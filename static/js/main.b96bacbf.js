/*! For license information please see main.b96bacbf.js.LICENSE.txt */
(()=>{var t={5296:(t,e,n)=>{"use strict";n.d(e,{Z:()=>st});var i=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(i){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),r=Math.abs,s=String.fromCharCode,o=Object.assign;function a(t){return t.trim()}function l(t,e,n){return t.replace(e,n)}function h(t,e){return t.indexOf(e)}function c(t,e){return 0|t.charCodeAt(e)}function u(t,e,n){return t.slice(e,n)}function p(t){return t.length}function d(t){return t.length}function f(t,e){return e.push(t),t}var m=1,g=1,y=0,v=0,_=0,T="";function E(t,e,n,i,r,s,o){return{value:t,root:e,parent:n,type:i,props:r,children:s,line:m,column:g,length:o,return:""}}function x(t,e){return o(E("",null,null,"",null,null,0),t,{length:-t.length},e)}function b(){return _=v>0?c(T,--v):0,g--,10===_&&(g=1,m--),_}function I(){return _=v<y?c(T,v++):0,g++,10===_&&(g=1,m++),_}function w(){return c(T,v)}function S(){return v}function R(t,e){return u(T,t,e)}function C(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function A(t){return m=g=1,y=p(T=t),v=0,[]}function D(t){return T="",t}function O(t){return a(R(v-1,P(91===t?t+2:40===t?t+1:t)))}function N(t){for(;(_=w())&&_<33;)I();return C(t)>2||C(_)>3?"":" "}function M(t,e){for(;--e&&I()&&!(_<48||_>102||_>57&&_<65||_>70&&_<97););return R(t,S()+(e<6&&32==w()&&32==I()))}function P(t){for(;I();)switch(_){case t:return v;case 34:case 39:34!==t&&39!==t&&P(_);break;case 40:41===t&&P(t);break;case 92:I()}return v}function F(t,e){for(;I()&&t+_!==57&&(t+_!==84||47!==w()););return"/*"+R(e,v-1)+"*"+s(47===t?t:I())}function L(t){for(;!C(w());)I();return R(t,v)}var k="-ms-",U="-moz-",B="-webkit-",z="comm",G="rule",H="decl",j="@import",V="@keyframes";function W(t,e){for(var n="",i=d(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function Z(t,e,n,i){switch(t.type){case j:case H:return t.return=t.return||t.value;case z:return"";case V:return t.return=t.value+"{"+W(t.children,i)+"}";case G:t.value=t.props.join(",")}return p(n=W(t.children,i))?t.return=t.value+"{"+n+"}":""}function Y(t){return D(q("",null,null,null,[""],t=A(t),0,[0],t))}function q(t,e,n,i,r,o,a,u,d){for(var m=0,g=0,y=a,v=0,_=0,T=0,E=1,x=1,R=1,C=0,A="",D=r,P=o,k=i,U=A;x;)switch(T=C,C=I()){case 40:if(108!=T&&58==c(U,y-1)){-1!=h(U+=l(O(C),"&","&\f"),"&\f")&&(R=-1);break}case 34:case 39:case 91:U+=O(C);break;case 9:case 10:case 13:case 32:U+=N(T);break;case 92:U+=M(S()-1,7);continue;case 47:switch(w()){case 42:case 47:f(K(F(I(),S()),e,n),d);break;default:U+="/"}break;case 123*E:u[m++]=p(U)*R;case 125*E:case 59:case 0:switch(C){case 0:case 125:x=0;case 59+g:_>0&&p(U)-y&&f(_>32?Q(U+";",i,n,y-1):Q(l(U," ","")+";",i,n,y-2),d);break;case 59:U+=";";default:if(f(k=X(U,e,n,m,g,r,u,A,D=[],P=[],y),o),123===C)if(0===g)q(U,e,k,k,D,o,y,u,P);else switch(99===v&&110===c(U,3)?100:v){case 100:case 109:case 115:q(t,k,k,i&&f(X(t,k,k,0,0,r,u,A,r,D=[],y),P),r,P,y,u,i?D:P);break;default:q(U,k,k,k,[""],P,0,u,P)}}m=g=_=0,E=R=1,A=U="",y=a;break;case 58:y=1+p(U),_=T;default:if(E<1)if(123==C)--E;else if(125==C&&0==E++&&125==b())continue;switch(U+=s(C),C*E){case 38:R=g>0?1:(U+="\f",-1);break;case 44:u[m++]=(p(U)-1)*R,R=1;break;case 64:45===w()&&(U+=O(I())),v=w(),g=y=p(A=U+=L(S())),C++;break;case 45:45===T&&2==p(U)&&(E=0)}}return o}function X(t,e,n,i,s,o,h,c,p,f,m){for(var g=s-1,y=0===s?o:[""],v=d(y),_=0,T=0,x=0;_<i;++_)for(var b=0,I=u(t,g+1,g=r(T=h[_])),w=t;b<v;++b)(w=a(T>0?y[b]+" "+I:l(I,/&\f/g,y[b])))&&(p[x++]=w);return E(t,e,n,0===s?G:c,p,f,m)}function K(t,e,n){return E(t,e,n,z,s(_),u(t,2,-2),0)}function Q(t,e,n,i){return E(t,e,n,H,u(t,0,i),u(t,i+1,-1),i)}var J=function(t,e,n){for(var i=0,r=0;i=r,r=w(),38===i&&12===r&&(e[n]=1),!C(r);)I();return R(t,v)},$=function(t,e){return D(function(t,e){var n=-1,i=44;do{switch(C(i)){case 0:38===i&&12===w()&&(e[n]=1),t[n]+=J(v-1,e,n);break;case 2:t[n]+=O(i);break;case 4:if(44===i){t[++n]=58===w()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=s(i)}}while(i=I());return t}(A(t),e))},tt=new WeakMap,et=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||tt.get(n))&&!i){tt.set(t,!0);for(var r=[],s=$(e,r),o=n.props,a=0,l=0;a<s.length;a++)for(var h=0;h<o.length;h++,l++)t.props[l]=r[a]?s[a].replace(/&\f/g,o[h]):o[h]+" "+s[a]}}},nt=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function it(t,e){switch(function(t,e){return 45^c(t,0)?(((e<<2^c(t,0))<<2^c(t,1))<<2^c(t,2))<<2^c(t,3):0}(t,e)){case 5103:return B+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return B+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return B+t+U+t+k+t+t;case 6828:case 4268:return B+t+k+t+t;case 6165:return B+t+k+"flex-"+t+t;case 5187:return B+t+l(t,/(\w+).+(:[^]+)/,B+"box-$1$2"+k+"flex-$1$2")+t;case 5443:return B+t+k+"flex-item-"+l(t,/flex-|-self/,"")+t;case 4675:return B+t+k+"flex-line-pack"+l(t,/align-content|flex-|-self/,"")+t;case 5548:return B+t+k+l(t,"shrink","negative")+t;case 5292:return B+t+k+l(t,"basis","preferred-size")+t;case 6060:return B+"box-"+l(t,"-grow","")+B+t+k+l(t,"grow","positive")+t;case 4554:return B+l(t,/([^-])(transform)/g,"$1"+B+"$2")+t;case 6187:return l(l(l(t,/(zoom-|grab)/,B+"$1"),/(image-set)/,B+"$1"),t,"")+t;case 5495:case 3959:return l(t,/(image-set\([^]*)/,B+"$1$`$1");case 4968:return l(l(t,/(.+:)(flex-)?(.*)/,B+"box-pack:$3"+k+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+B+t+t;case 4095:case 3583:case 4068:case 2532:return l(t,/(.+)-inline(.+)/,B+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(p(t)-1-e>6)switch(c(t,e+1)){case 109:if(45!==c(t,e+4))break;case 102:return l(t,/(.+:)(.+)-([^]+)/,"$1"+B+"$2-$3$1"+U+(108==c(t,e+3)?"$3":"$2-$3"))+t;case 115:return~h(t,"stretch")?it(l(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==c(t,e+1))break;case 6444:switch(c(t,p(t)-3-(~h(t,"!important")&&10))){case 107:return l(t,":",":"+B)+t;case 101:return l(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+B+(45===c(t,14)?"inline-":"")+"box$3$1"+B+"$2$3$1"+k+"$2box$3")+t}break;case 5936:switch(c(t,e+11)){case 114:return B+t+k+l(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return B+t+k+l(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return B+t+k+l(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return B+t+k+t+t}return t}var rt=[function(t,e,n,i){if(t.length>-1&&!t.return)switch(t.type){case H:t.return=it(t.value,t.length);break;case V:return W([x(t,{value:l(t.value,"@","@"+B)})],i);case G:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return W([x(t,{props:[l(e,/:(read-\w+)/,":"+U+"$1")]})],i);case"::placeholder":return W([x(t,{props:[l(e,/:(plac\w+)/,":"+B+"input-$1")]}),x(t,{props:[l(e,/:(plac\w+)/,":"+U+"$1")]}),x(t,{props:[l(e,/:(plac\w+)/,k+"input-$1")]})],i)}return""}))}}];const st=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var r=t.stylisPlugins||rt;var s,o,a={},l=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)a[e[n]]=!0;l.push(t)}));var h,c,u=[Z,(c=function(t){h.insert(t)},function(t){t.root||(t=t.return)&&c(t)})],p=function(t){var e=d(t);return function(n,i,r,s){for(var o="",a=0;a<e;a++)o+=t[a](n,i,r,s)||"";return o}}([et,nt].concat(r,u));o=function(t,e,n,i){h=n,W(Y(t?t+"{"+e.styles+"}":e.styles),p),i&&(f.inserted[e.name]=!0)};var f={key:e,sheet:new i({key:e,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:o};return f.sheet.hydrate(l),f}},1816:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=function(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}},6132:(t,e,n)=>{"use strict";n.d(e,{T:()=>a,w:()=>o});var i=n(7313),r=n(5296),s=(n(1086),n(5696),(0,i.createContext)("undefined"!==typeof HTMLElement?(0,r.Z)({key:"css"}):null));s.Provider;var o=function(t){return(0,i.forwardRef)((function(e,n){var r=(0,i.useContext)(s);return t(e,r,n)}))},a=(0,i.createContext)({})},1086:(t,e,n)=>{"use strict";n.d(e,{O:()=>m});const i=function(t){for(var e,n=0,i=0,r=t.length;r>=4;++i,r-=4)e=1540483477*(65535&(e=255&t.charCodeAt(i)|(255&t.charCodeAt(++i))<<8|(255&t.charCodeAt(++i))<<16|(255&t.charCodeAt(++i))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(r){case 3:n^=(255&t.charCodeAt(i+2))<<16;case 2:n^=(255&t.charCodeAt(i+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(i)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)};const r={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var s=n(1816),o=/[A-Z]|^ms/g,a=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(t){return 45===t.charCodeAt(1)},h=function(t){return null!=t&&"boolean"!==typeof t},c=(0,s.Z)((function(t){return l(t)?t:t.replace(o,"-$&").toLowerCase()})),u=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(a,(function(t,e,n){return d={name:e,styles:n,next:d},e}))}return 1===r[t]||l(t)||"number"!==typeof e||0===e?e:e+"px"};function p(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return d={name:n.name,styles:n.styles,next:d},n.name;if(void 0!==n.styles){var i=n.next;if(void 0!==i)for(;void 0!==i;)d={name:i.name,styles:i.styles,next:d},i=i.next;return n.styles+";"}return function(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=p(t,e,n[r])+";";else for(var s in n){var o=n[s];if("object"!==typeof o)null!=e&&void 0!==e[o]?i+=s+"{"+e[o]+"}":h(o)&&(i+=c(s)+":"+u(s,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=e&&void 0!==e[o[0]]){var a=p(t,e,o);switch(s){case"animation":case"animationName":i+=c(s)+":"+a+";";break;default:i+=s+"{"+a+"}"}}else for(var l=0;l<o.length;l++)h(o[l])&&(i+=c(s)+":"+u(s,o[l])+";")}return i}(t,e,n);case"function":if(void 0!==t){var r=d,s=n(t);return d=r,p(t,e,s)}}if(null==e)return n;var o=e[n];return void 0!==o?o:n}var d,f=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var m=function(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var r=!0,s="";d=void 0;var o=t[0];null==o||void 0===o.raw?(r=!1,s+=p(n,e,o)):s+=o[0];for(var a=1;a<t.length;a++)s+=p(n,e,t[a]),r&&(s+=o[a]);f.lastIndex=0;for(var l,h="";null!==(l=f.exec(s));)h+="-"+l[1];return{name:i(s)+h,styles:s,next:d}}},5696:(t,e,n)=>{"use strict";var i;n.d(e,{L:()=>o,j:()=>a});var r=n(7313),s=!!(i||(i=n.t(r,2))).useInsertionEffect&&(i||(i=n.t(r,2))).useInsertionEffect,o=s||function(t){return t()},a=s||r.useLayoutEffect},4911:(t,e,n)=>{"use strict";n.d(e,{My:()=>s,fp:()=>i,hC:()=>r});function i(t,e,n){var i="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):i+=n+" "})),i}var r=function(t,e,n){var i=t.key+"-"+e.name;!1===n&&void 0===t.registered[i]&&(t.registered[i]=e.styles)},s=function(t,e,n){r(t,e,n);var i=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var s=e;do{t.insert(e===s?"."+i:"",s,t.sheet,!0);s=s.next}while(void 0!==s)}}},4173:(t,e,n)=>{"use strict";var i=n(997),r=n(5307),s="value",o="\n  ",a={};function l(t){var e=Array.isArray(t);return function(n){var i,r=h(a.plainArray,n);if(r)return r;if(e&&n.length!==t.length)return"an array with "+t.length+" items";for(var s=0;s<n.length;s++)if(r=h((i=s,e?t[i]:t),n[s]))return[s].concat(r)}}function h(t,e){if(null!=e||t.hasOwnProperty("__required")){var n=t(e);return n?Array.isArray(n)?n:[n]:void 0}}function c(t,e){var n=t.length,i=t[n-1],o=t.slice(0,n-1);return 0===o.length&&(o=[s]),e=r(e,{path:o}),"function"===typeof i?i(e):u(e,function(t){return"must be "+function(t){if(/^an? /.test(t))return t;if(/^[aeiou]/i.test(t))return"an "+t;if(/^[a-z]/i.test(t))return"a "+t;return t}(t)+"."}(i))}function u(t,e){return(p(t.path)?"Item at position ":"")+(t.path.join(".")+" "+e)}function p(t){return"number"==typeof t[t.length-1]||"number"==typeof t[0]}a.assert=function(t,e){return e=e||{},function(n){var i=h(t,n);if(i){var r=c(i,e);throw e.apiName&&(r=e.apiName+": "+r),new Error(r)}}},a.shape=function(t){var e,n=(e=t,Object.keys(e||{}).map((function(t){return{key:t,value:e[t]}})));return function(t){var e,i=h(a.plainObject,t);if(i)return i;for(var r=[],l=0;l<n.length;l++)e=n[l].key,(i=h(n[l].value,t[e]))&&r.push([e].concat(i));return r.length<2?r[0]:function(t){r=r.map((function(e){return"- "+e[0]+": "+c(e,t).split("\n").join(o)}));var e=t.path.join(".");return"The following properties"+(e===s?"":" of "+e)+" have invalid values:"+o+r.join(o)}}},a.strictShape=function(t){var e=a.shape(t);return function(n){var i=e(n);if(i)return i;var r=Object.keys(n).reduce((function(e,n){return void 0===t[n]&&e.push(n),e}),[]);return 0!==r.length?function(){return"The following keys are invalid: "+r.join(", ")}:void 0}},a.arrayOf=function(t){return l(t)},a.tuple=function(){return l(Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments))},a.required=function(t){function e(e){return null==e?function(t){return u(t,p(t.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return e.__required=!0,e},a.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(e){var n=t.map((function(t){return h(t,e)})).filter(Boolean);if(n.length===t.length)return n.every((function(t){return 1===t.length&&"string"===typeof t[0]}))?function(t){if(t.length<2)return t[0];if(2===t.length)return t.join(" or ");return t.slice(0,-1).join(", ")+", or "+t.slice(-1)}(n.map((function(t){return t[0]}))):n.reduce((function(t,e){return e.length>t.length?e:t}))}},a.equal=function(t){return function(e){if(e!==t)return JSON.stringify(t)}},a.oneOf=function(){var t=(Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments)).map((function(t){return a.equal(t)}));return a.oneOfType.apply(this,t)},a.range=function(t){var e=t[0],n=t[1];return function(t){if(h(a.number,t)||t<e||t>n)return"number between "+e+" & "+n+" (inclusive)"}},a.any=function(){},a.boolean=function(t){if("boolean"!==typeof t)return"boolean"},a.number=function(t){if("number"!==typeof t)return"number"},a.plainArray=function(t){if(!Array.isArray(t))return"array"},a.plainObject=function(t){if(!i(t))return"object"},a.string=function(t){if("string"!==typeof t)return"string"},a.func=function(t){if("function"!==typeof t)return"function"},a.validate=h,a.processMessage=c,t.exports=a},997:t=>{"use strict";var e=Object.prototype.toString;t.exports=function(t){var n;return"[object Object]"===e.call(t)&&(null===(n=Object.getPrototypeOf(t))||n===Object.getPrototypeOf({}))}},1894:(t,e,n)=>{"use strict";var i=n(2751).x0;function r(t){this.origin=t.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=t.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=t,this.send=this.send.bind(this),this.countries=t.countries?t.countries.split(","):null,this.types=t.types?t.types.split(","):null,this.bbox=t.bbox?t.bbox:null,this.language=t.language?t.language.split(","):null,this.limit=t.limit?+t.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(t),this.eventQueue=new Array,this.flushInterval=t.flushInterval||1e3,this.maxQueueSize=t.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}r.prototype={select:function(t,e){var n=this.getSelectedIndex(t,e),i=this.getEventPayload("search.select",e);if(i.resultIndex=n,i.resultPlaceName=t.place_name,i.resultId=t.id,(n!==this.lastSentIndex||i.queryString!==this.lastSentInput)&&-1!=n&&(this.lastSentIndex=n,this.lastSentInput=i.queryString,i.queryString))return this.push(i)},start:function(t){var e=this.getEventPayload("search.start",t);if(e.queryString)return this.push(e)},keyevent:function(t,e){if(t.key&&!t.metaKey&&-1===[9,27,37,39,13,38,40].indexOf(t.keyCode)){var n=this.getEventPayload("search.keystroke",e);if(n.lastAction=t.key,n.queryString)return this.push(n)}},send:function(t,e){if(!this.enableEventLogging)return e?e():void 0;var n=this.getRequestOptions(t);this.request(n,function(t){return t?this.handleError(t,e):e?e():void 0}.bind(this))},getRequestOptions:function(t){return Array.isArray(t)||(t=[t]),{method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}},getEventPayload:function(t,e){var n;n=e.options.proximity?"object"===typeof e.options.proximity?[e.options.proximity.longitude,e.options.proximity.latitude]:"ip"===e.options.proximity?[999,999]:e.options.proximity:null;var i=e._map?e._map.getZoom():void 0,r={event:t,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:e.options.autocomplete,fuzzyMatch:e.options.fuzzyMatch,proximity:n,limit:e.options.limit,routing:e.options.routing,worldview:e.options.worldview,mapZoom:i,keyboardLocale:this.locale};return"search.select"===t?r.queryString=e.inputString:"search.select"!=t&&e._inputEl?r.queryString=e._inputEl.value:r.queryString=e.inputString,r},request:function(t,e){var n=new XMLHttpRequest;for(var i in n.onreadystatechange=function(){if(4==this.readyState)return 204==this.status?e(null):e(this.statusText)},n.open(t.method,t.host+"/"+t.path,!0),t.headers){var r=t.headers[i];n.setRequestHeader(i,r)}n.send(t.body)},handleError:function(t,e){if(e)return e(t)},generateSessionID:function(){return i()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(t,e){if(e._typeahead){var n=e._typeahead.data,i=t.id;return n.map((function(t){return t.id})).indexOf(i)}},shouldEnableLogging:function(t){return!1!==t.enableEventLogging&&((!t.origin||"https://api.mapbox.com"===t.origin)&&(!t.localGeocoder&&!t.filter))},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(t,e){this.eventQueue.push(t),(this.eventQueue.length>=this.maxQueueSize||e)&&this.flush()},remove:function(){this.flush()}},t.exports=r},3901:t=>{t.exports={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},5636:t=>{function e(){}e.prototype={isSupport:function(){return Boolean(window.navigator.geolocation)},getCurrentPosition:function(){const t={enableHighAccuracy:!0};return new Promise((function(e,n){window.navigator.geolocation.getCurrentPosition(e,n,t)}))}},t.exports=e},3457:(t,e,n)=>{"use strict";var i=n(3215),r=n(936),s=n(5307),o=n(8041).EventEmitter,a=n(3901),l=n(599),h=n(8348),c=n(1894),u=n(3291),p=n(3284),d=n(5636),f=n(8942);const m=0,g=1,y=2;function v(t){this._eventEmitter=new o,this.options=s({},this.options,t),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new d}v.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(t){return t.place_name},render:function(t){var e=t.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+e[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+e.splice(1,e.length).join(",")+"</div></div>"}},addTo:function(t){function e(t,e){if(!document.body.contains(e))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const n=t.onAdd();e.appendChild(n)}if(t._controlContainer)t.addControl(this);else if(t instanceof HTMLElement)e(this,t);else{if("string"!=typeof t)throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element");{const n=document.querySelectorAll(t);if(0===n.length)throw new Error("Element ",t,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");e(this,n[0])}}},onAdd:function(t){if(t&&"string"!=typeof t&&(this._map=t),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=h(l({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new c(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",r(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(t){this.eventManager.keyevent(t,this)}.bind(this));var s=document.createElement("div");s.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),s.appendChild(this._clearEl),s.appendChild(this._loadingEl),e.appendChild(n),e.appendChild(this._inputEl),e.appendChild(s),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var a=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(a),s.appendChild(this._geolocateEl),this._showGeolocateButton()}var u=this._typeahead=new i(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),u.getItemValue=this.options.getItemValue;var p=u.list.draw,d=this._footerNode=function(){var t=document.createElement("div");return t.className="mapboxgl-ctrl-geocoder--powered-by",t.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',t}();return u.list.draw=function(){p.call(this),d.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),d.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(d)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),e},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(t){this._hideLoadingIcon();const e={geometry:{type:"Point",coordinates:[t.coords.longitude,t.coords.latitude]}};this._handleMarker(e),this._fly(e),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(e),this._showClearButton(),this.fresh=!1;const n={limit:1,language:[this.options.language],query:e.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const t=e.geometry.coordinates[0]+","+e.geometry.coordinates[1];this._setInputValue(t),this._eventEmitter.emit("result",{result:e})}else this.geocoderService.reverseGeocode(n).send().then(function(t){const n=t.body.features[0];if(n){const t=f.transformFeatureToGeolocationText(n,this.options.addressAccuracy);this._setInputValue(t),n.user_coordinates=e.geometry.coordinates,this._eventEmitter.emit("result",{result:n})}else this._eventEmitter.emit("result",{result:{user_coordinates:e.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(t){1===t.code?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+t),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=e,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(t){this._inputEl.value=t,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(t){var e=(t.clipboardData||window.clipboardData).getData("text");e.length>=this.options.minLength&&this._geocode(e)},_onKeyDown:function(t){var e=27,n=9;if(t.keyCode===e&&this.options.clearAndBlurOnEsc)return this._clear(t),this._inputEl.blur();var i=t.target&&t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target;if(!(i?i.value:""))return this.fresh=!0,t.keyCode!==n&&this.clear(t),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),t.metaKey||-1!==[n,e,37,39,13,38,40].indexOf(t.keyCode)||i.value.length>=this.options.minLength&&this._geocode(i.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(t){this.options.clearOnBlur&&this._clearOnBlur(t),this.options.collapsed&&this._collapse()},_onChange:function(){var t=this._typeahead.selected;t&&JSON.stringify(t)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(t),this.options.marker&&this._mapboxgl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._eventEmitter.emit("result",{result:t}),this.eventManager.select(t,this))},_fly:function(t){var e;if(t.properties&&a[t.properties.short_code])e=s({},this.options.flyTo),this._map&&this._map.fitBounds(a[t.properties.short_code].bbox,e);else if(t.bbox){var n=t.bbox;e=s({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],e)}else{var i={zoom:this.options.zoom};e=s({},i,this.options.flyTo),t.center?e.center=t.center:t.geometry&&t.geometry.type&&"Point"===t.geometry.type&&t.geometry.coordinates&&(e.center=t.geometry.coordinates),this._map&&this._map.flyTo(e)}},_requestType:function(t,e){return t.localGeocoderOnly?g:t.reverseGeocode&&f.REVERSE_GEOCODE_COORD_RGX.test(e)?y:m},_setupConfig:function(t,e){const n=/[\s,]+/;var i=this,r=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"].reduce((function(t,e){if(void 0===i.options[e]||null===i.options[e])return t;["countries","types","language"].indexOf(e)>-1?t[e]=i.options[e].split(n):t[e]=i.options[e];const r="number"===typeof i.options[e].longitude&&"number"===typeof i.options[e].latitude;if("proximity"===e&&r){const n=i.options[e].longitude,r=i.options[e].latitude;t[e]=[n,r]}return t}),{});switch(t){case y:var o=e.split(n).map((function(t){return parseFloat(t,10)}));i.options.flipCoordinates||o.reverse(),!r.types||r.types[0],r=s(r,{query:o,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach((function(t){t in r&&delete r[t]}));break;case m:{const t=e.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(t)&&(e=e.replace(/,/g," ")),r=s(r,{query:e})}}return r},_geocode:function(t){this.inputString=t,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:t});const e=this._requestType(this.options,t),n=this._setupConfig(e,t);var i;switch(e){case g:i=Promise.resolve();break;case m:i=this.geocoderService.forwardGeocode(n).send();break;case y:i=this.geocoderService.reverseGeocode(n).send()}var r=this.options.localGeocoder&&this.options.localGeocoder(t)||[],s=[],o=null;return i.catch(function(t){o=t}.bind(this)).then(function(e){this._hideLoadingIcon();var i={};return e?"200"==e.statusCode&&((i=e.body).request=e.request,i.headers=e.headers):i={type:"FeatureCollection",features:[]},i.config=n,this.fresh&&(this.eventManager.start(this),this.fresh=!1),i.features=i.features?r.concat(i.features):r,this.options.externalGeocoder?(s=this.options.externalGeocoder(t,i.features)||Promise.resolve([])).then((function(t){return i.features=i.features?t.concat(i.features):t,i}),(function(){return i})):i}.bind(this)).then(function(t){if(o)throw o;this.options.filter&&t.features.length&&(t.features=t.features.filter(this.options.filter)),t.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",t),this._typeahead.update(t.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",t))}.bind(this)).catch(function(t){this._hideLoadingIcon(),this._hideAttribution(),r.length&&this.options.localGeocoder||s.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(r)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:r}),this._eventEmitter.emit("error",{error:t})}.bind(this)),i},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(t){this._clear(t),this._inputEl.focus()},_clearOnBlur:function(t){t.relatedTarget&&this._clear(t)},_onQueryResult:function(t){var e=t.body;if(e.features.length){var n=e.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(this._map&&this.options.trackProximity)if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){this._inputEl.value||this._inputEl===document.activeElement||this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(t){return this._geocode(t).then(this._onQueryResult),this},_renderError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>")},_renderLocationError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>")},_renderNoResults:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>")},_renderUserDeniedGeolocationError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>")},_renderMessage:function(t){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(t)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var t=this.options.language.split(",")[0],e=p.language(t),n=u.placeholder[e];if(n)return n}return"Search"},setInput:function(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),t.length>=this.options.minLength&&this._geocode(t),this},setProximity:function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.options.proximity=t,e&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(t){return t&&"function"==typeof t&&(this._typeahead.render=t),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(t){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=t||this.options.language||e,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(t){return this.options.zoom=t,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(t){return this.options.flyTo=t,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(t){return this.placeholder=t||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(t){return this.options.bbox=t,this},getCountries:function(){return this.options.countries},setCountries:function(t){return this.options.countries=t,this},getTypes:function(){return this.options.types},setTypes:function(t){return this.options.types=t,this},getMinLength:function(){return this.options.minLength},setMinLength:function(t){return this.options.minLength=t,this._typeahead&&(this._typeahead.options.minLength=t),this},getLimit:function(){return this.options.limit},setLimit:function(t){return this.options.limit=t,this._typeahead&&(this._typeahead.options.limit=t),this},getFilter:function(){return this.options.filter},setFilter:function(t){return this.options.filter=t,this},setOrigin:function(t){return this.options.origin=t,this.geocoderService=h(l({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(t){return this.options.accessToken=t,this.geocoderService=h(l({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(t){return this.options.autocomplete=t,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(t){return this.options.fuzzyMatch=t,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(t){return this.options.routing=t,this},getRouting:function(){return this.options.routing},setWorldview:function(t){return this.options.worldview=t,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(t){if(this._map){this._removeMarker();var e=s({},{color:"#4668F2"},this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(e),t.center?this.mapMarker.setLngLat(t.center).addTo(this._map):t.geometry&&t.geometry.type&&"Point"===t.geometry.type&&t.geometry.coordinates&&this.mapMarker.setLngLat(t.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this.eventManager.remove(),this}},t.exports=v},3291:t=>{"use strict";t.exports={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05dc\u05d7\u05e4\u05e9",ja:"\u30b5\u30fc\u30c1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041f\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641c\u7d22",cs:"Vyhled\xe1v\xe1n\xed",hu:"Keres\xe9s",ka:"\u10eb\u10d8\u10d4\u10d1\u10d0",nb:"S\xf8ke",sk:"Vyh\u013ead\xe1vanie",th:"\u0e04\u0e49\u0e19\u0e2b\u0e32",fi:"Hae",is:"Leita",ko:"\uc218\uc0c9",pl:"Szukaj",sl:"Iskanje",fa:"\u062c\u0633\u062a\u062c\u0648",ru:"\u041f\u043e\u0438\u0441\u043a"}}},8942:t=>{function e(t){const e=t.address||"",n=t.text||"",i=t.place_name||"",r={address:i.split(",")[0],houseNumber:e,street:n,placeName:i};return t.context.forEach((function(t){const e=t.id.split(".")[0];r[e]=t.text})),r}t.exports={transformFeatureToGeolocationText:function(t,n){const i=e(t),r=["address","street","place","country"];if("function"===typeof n)return n(i);const s=r.indexOf(n);return(-1===s?r:r.slice(s)).reduce((function(t,e){return i[e]?(""!==t&&(t+=", "),t+i[e]):t}),"")},getAddressInfo:e,REVERSE_GEOCODE_COORD_RGX:/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/}},599:(t,e,n)=>{"use strict";var i=n(7962);t.exports=i},7962:(t,e,n)=>{"use strict";var i=n(4516),r=n(9609);function s(t){r.call(this,t)}s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.sendRequest=i.browserSend,s.prototype.abortRequest=i.browserAbort,t.exports=function(t){return new s(t)}},4516:(t,e,n)=>{"use strict";var i=n(1188),r=n(7698),s=n(762),o=n(9928),a={};function l(t){var e=t.total,n=t.loaded;return{total:e,transferred:n,percent:100*n/e}}function h(t,e){return new Promise((function(n,i){e.onprogress=function(e){t.emitter.emit(s.EVENT_PROGRESS_DOWNLOAD,l(e))};var o=t.file;o&&(e.upload.onprogress=function(e){t.emitter.emit(s.EVENT_PROGRESS_UPLOAD,l(e))}),e.onerror=function(t){i(t)},e.onabort=function(){var e=new r({request:t,type:s.ERROR_REQUEST_ABORTED});i(e)},e.onload=function(){if(delete a[t.id],e.status<200||e.status>=400){var s=new r({request:t,body:e.response,statusCode:e.status});i(s)}else n(e)};var h=t.body;"string"===typeof h?e.send(h):h?e.send(JSON.stringify(h)):o?e.send(o):e.send(),a[t.id]=e})).then((function(e){return function(t,e){return new i(t,{body:e.response,headers:o(e.getAllResponseHeaders()),statusCode:e.status})}(t,e)}))}function c(t,e){var n=t.url(e),i=new window.XMLHttpRequest;return i.open(t.method,n),Object.keys(t.headers).forEach((function(e){i.setRequestHeader(e,t.headers[e])})),i}t.exports={browserAbort:function(t){var e=a[t.id];e&&(e.abort(),delete a[t.id])},sendRequestXhr:h,browserSend:function(t){return Promise.resolve().then((function(){var e=c(t,t.client.accessToken);return h(t,e)}))},createRequestXhr:c}},9609:(t,e,n)=>{"use strict";var i=n(247),r=n(3307),s=n(762);function o(t){if(!t||!t.accessToken)throw new Error("Cannot create a client without an access token");i(t.accessToken),this.accessToken=t.accessToken,this.origin=t.origin||s.API_ORIGIN}o.prototype.createRequest=function(t){return new r(this,t)},t.exports=o},7698:(t,e,n)=>{"use strict";var i=n(762);t.exports=function(t){var e,n=t.type||i.ERROR_HTTP;if(t.body)try{e=JSON.parse(t.body)}catch(s){e=t.body}else e=null;var r=t.message||null;r||("string"===typeof e?r=e:e&&"string"===typeof e.message?r=e.message:n===i.ERROR_REQUEST_ABORTED&&(r="Request aborted")),this.message=r,this.type=n,this.statusCode=t.statusCode||null,this.request=t.request,this.body=e}},3307:(t,e,n)=>{"use strict";var i=n(247),r=n(5307),s=n(7991),o=n(5607),a=n(762),l=1;function h(t,e){if(!t)throw new Error("MapiRequest requires a client");if(!e||!e.path||!e.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};e.body&&(n["content-type"]="application/json");var i=r(n,e.headers),o=Object.keys(i).reduce((function(t,e){return t[e.toLowerCase()]=i[e],t}),{});this.id=l++,this._options=e,this.emitter=new s,this.client=t,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=e.path,this.method=e.method,this.origin=e.origin||t.origin,this.query=e.query||{},this.params=e.params||{},this.body=e.body||null,this.file=e.file||null,this.encoding=e.encoding||"utf8",this.sendFileAs=e.sendFileAs||null,this.headers=o}h.prototype.url=function(t){var e=o.prependOrigin(this.path,this.origin);e=o.appendQueryObject(e,this.query);var n=this.params,s=null==t?this.client.accessToken:t;if(s){e=o.appendQueryParam(e,"access_token",s);var a=i(s).user;n=r({ownerId:a},n)}return e=o.interpolateRouteParams(e,n),e},h.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then((function(e){return t.response=e,t.emitter.emit(a.EVENT_RESPONSE,e),e}),(function(e){throw t.error=e,t.emitter.emit(a.EVENT_ERROR,e),e}))},h.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},h.prototype.eachPage=function(t){var e=this;function n(n){t(null,n,(function(){delete e._nextPageRequest;var t=n.nextPage();t&&(e._nextPageRequest=t,r(t))}))}function i(e){t(e,null,(function(){}))}function r(t){t.send().then(n,i)}r(this)},h.prototype.clone=function(){return this._extend()},h.prototype._extend=function(t){var e=r(this._options,t);return new h(this.client,e)},t.exports=h},1188:(t,e,n)=>{"use strict";var i=n(3212);function r(t,e){this.request=t,this.headers=e.headers,this.rawBody=e.body,this.statusCode=e.statusCode;try{this.body=JSON.parse(e.body||"{}")}catch(n){this.body=e.body}this.links=i(this.headers.link)}r.prototype.hasNextPage=function(){return!!this.links.next},r.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null},t.exports=r},762:t=>{"use strict";t.exports={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"}},9928:t=>{"use strict";t.exports=function(t){var e={};return t?(t.trim().split(/[\r|\n]+/).forEach((function(t){var n=function(t){var e=t.indexOf(":");return{name:t.substring(0,e).trim().toLowerCase(),value:t.substring(e+1).trim()}}(t);e[n.name]=n.value})),e):e}},3212:t=>{"use strict";t.exports=function(t){return t?t.split(/,\s*</).reduce((function(t,e){var n=function(t){var e=t.match(/<?([^>]*)>(.*)/);if(!e)return null;var n=e[1],i=e[2].split(";"),r=null,s=i.reduce((function(t,e){var n=function(t){var e=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return e?{key:e[1],value:e[2]}:null}(e);return n?"rel"===n.key?(r||(r=n.value),t):(t[n.key]=n.value,t):t}),{});return r?{url:n,rel:r,params:s}:null}(e);return n?(n.rel.split(/\s+/).forEach((function(e){t[e]||(t[e]={url:n.url,params:n.params})})),t):t}),{}):{}}},5607:t=>{"use strict";function e(t){return Array.isArray(t)?t.map(encodeURIComponent).join(","):encodeURIComponent(String(t))}function n(t,n,i){if(!1===i||null===i)return t;var r=/\?/.test(t)?"&":"?",s=encodeURIComponent(n);return void 0!==i&&""!==i&&!0!==i&&(s+="="+e(i)),""+t+r+s}t.exports={appendQueryObject:function(t,e){if(!e)return t;var i=t;return Object.keys(e).forEach((function(t){var r=e[t];void 0!==r&&(Array.isArray(r)&&(r=r.filter((function(t){return null!==t&&void 0!==t})).join(",")),i=n(i,t,r))})),i},appendQueryParam:n,prependOrigin:function(t,e){if(!e)return t;if("http"===t.slice(0,4))return t;var n="/"===t[0]?"":"/";return""+e.replace(/\/$/,"")+n+t},interpolateRouteParams:function(t,n){return n?t.replace(/\/:([a-zA-Z0-9]+)/g,(function(t,i){var r=n[i];if(void 0===r)throw new Error("Unspecified route parameter "+i);return"/"+e(r)})):t}}},7991:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,i,s,o){if("function"!==typeof i)throw new TypeError("The listener must be a function");var a=new r(i,s||t,o),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function o(t,e){0===--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=new Array(s);r<s;r++)o[r]=i[r].fn;return o},a.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,r,s,o){var a=n?n+t:t;if(!this._events[a])return!1;var l,h,c=this._events[a],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,r),!0;case 5:return c.fn.call(c.context,e,i,r,s),!0;case 6:return c.fn.call(c.context,e,i,r,s,o),!0}for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];c.fn.apply(c.context,l)}else{var p,d=c.length;for(h=0;h<d;h++)switch(c[h].once&&this.removeListener(t,c[h].fn,void 0,!0),u){case 1:c[h].fn.call(c[h].context);break;case 2:c[h].fn.call(c[h].context,e);break;case 3:c[h].fn.call(c[h].context,e,i);break;case 4:c[h].fn.call(c[h].context,e,i,r);break;default:if(!l)for(p=1,l=new Array(u-1);p<u;p++)l[p-1]=arguments[p];c[h].fn.apply(c[h].context,l)}}return!0},a.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,i,r){var s=n?n+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||o(this,s);else{for(var l=0,h=[],c=a.length;l<c;l++)(a[l].fn!==e||r&&!a[l].once||i&&a[l].context!==i)&&h.push(a[l]);h.length?this._events[s]=1===h.length?h[0]:h:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a},8348:(t,e,n)=>{"use strict";var i=n(5307),r=n(3269),s=n(3970),o=n(9216),a=n(598),l={},h=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];l.forwardGeocode=function(t){r.assertShape({query:r.required(r.string),mode:r.oneOf("mapbox.places","mapbox.places-permanent"),countries:r.arrayOf(r.string),proximity:r.oneOf(r.coordinates,"ip"),types:r.arrayOf(r.oneOf(h)),autocomplete:r.boolean,bbox:r.arrayOf(r.number),limit:r.number,language:r.arrayOf(r.string),routing:r.boolean,fuzzyMatch:r.boolean,worldview:r.string})(t),t.mode=t.mode||"mapbox.places";var e=o(i({country:t.countries},s(t,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:s(t,["mode","query"]),query:e})},l.reverseGeocode=function(t){r.assertShape({query:r.required(r.coordinates),mode:r.oneOf("mapbox.places","mapbox.places-permanent"),countries:r.arrayOf(r.string),types:r.arrayOf(r.oneOf(h)),bbox:r.arrayOf(r.number),limit:r.number,language:r.arrayOf(r.string),reverseMode:r.oneOf("distance","score"),routing:r.boolean,worldview:r.string})(t),t.mode=t.mode||"mapbox.places";var e=o(i({country:t.countries},s(t,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:s(t,["mode","query"]),query:e})},t.exports=a(l)},598:(t,e,n)=>{"use strict";var i=n(9609),r=n(7962);t.exports=function(t){return function(e){var n;n=i.prototype.isPrototypeOf(e)?e:r(e);var s=Object.create(t);return s.client=n,s}}},8480:t=>{"use strict";t.exports=function(t,e){return Object.keys(t).reduce((function(n,i){return n[i]=e(i,t[i]),n}),{})}},3970:t=>{"use strict";t.exports=function(t,e){var n=function(t,n){return-1!==e.indexOf(t)&&void 0!==n};return"function"===typeof e&&(n=e),Object.keys(t).filter((function(e){return n(e,t[e])})).reduce((function(e,n){return e[n]=t[n],e}),{})}},9216:(t,e,n)=>{"use strict";var i=n(8480);t.exports=function(t){return i(t,(function(t,e){return"boolean"===typeof e?JSON.stringify(e):e}))}},3269:(t,e,n)=>{"use strict";var i=n(5307),r=n(4173);t.exports=i(r,{file:function(t){if("undefined"!==typeof window){if(t instanceof n.g.Blob||t instanceof n.g.ArrayBuffer)return;return"Blob or ArrayBuffer"}if("string"!==typeof t&&void 0===t.pipe)return"Filename or Readable stream"},date:function(t){var e="date";if("boolean"===typeof t)return e;try{var n=new Date(t);if(n.getTime&&isNaN(n.getTime()))return e}catch(i){return e}},coordinates:function(t){return r.tuple(r.number,r.number)(t)},assertShape:function(t,e){return r.assert(r.strictShape(t),e)}})},247:(t,e,n)=>{"use strict";var i=n(7538),r={};function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t){if(r[t])return r[t];var e=t.split("."),n=e[0],o=e[1];if(!o)throw new Error("Invalid token");var a=function(t){try{return JSON.parse(i.decode(t))}catch(e){throw new Error("Invalid token")}}(o),l={usage:n,user:a.u};return s(a,"a")&&(l.authorization=a.a),s(a,"exp")&&(l.expires=1e3*a.exp),s(a,"iat")&&(l.created=1e3*a.iat),s(a,"scopes")&&(l.scopes=a.scopes),s(a,"client")&&(l.client=a.client),s(a,"ll")&&(l.lastLogin=a.ll),s(a,"iu")&&(l.impersonator=a.iu),r[t]=l,l}},4647:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBack");e.Z=o},4e3:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");e.Z=o},9790:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");e.Z=o},4045:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");e.Z=o},3195:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");e.Z=o},1198:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");e.Z=o},9513:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"M9.64 7.64c.23-.5.36-1.05.36-1.64 0-2.21-1.79-4-4-4S2 3.79 2 6s1.79 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1L9.64 7.64zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zM19 3l-6 6 2 2 7-7V3z"}),"ContentCut");e.Z=o},1997:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");e.Z=o},1945:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"}),"FindInPage");e.Z=o},1370:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-6.99 15c-.7 0-1.26-.56-1.26-1.26 0-.71.56-1.25 1.26-1.25.71 0 1.25.54 1.25 1.25-.01.69-.54 1.26-1.25 1.26zm3.01-7.4c-.76 1.11-1.48 1.46-1.87 2.17-.16.29-.22.48-.22 1.41h-1.82c0-.49-.08-1.29.31-1.98.49-.87 1.42-1.39 1.96-2.16.57-.81.25-2.33-1.37-2.33-1.06 0-1.58.8-1.8 1.48l-1.65-.7C9.01 7.15 10.22 6 11.99 6c1.48 0 2.49.67 3.01 1.52.44.72.7 2.07.02 3.08z"}),"HelpCenter");e.Z=o},4588:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"M18 20V8.35L13.65 4h-2.83L16 9.18V20h2zm4 0V6.69L19.31 4h-2.83L20 7.52V20h2zM8 4l-6 6v10h5v-5h2v5h5V10L8 4zm1 9H7v-2h2v2z"}),"HolidayVillage");e.Z=o},4:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"M9 3 5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3z"}),"ImportExport");e.Z=o},3973:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");e.Z=o},2854:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"}),"Logout");e.Z=o},7748:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"}),"Map");e.Z=o},1317:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");e.Z=o},2670:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"M11.07 12.85c.77-1.39 2.25-2.21 3.11-3.44.91-1.29.4-3.7-2.18-3.7-1.69 0-2.52 1.28-2.87 2.34L6.54 6.96C7.25 4.83 9.18 3 11.99 3c2.35 0 3.96 1.07 4.78 2.41.7 1.15 1.11 3.3.03 4.9-1.2 1.77-2.35 2.31-2.97 3.45-.25.46-.35.76-.35 2.24h-2.89c-.01-.78-.13-2.05.48-3.15zM14 20c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2z"}),"QuestionMark");e.Z=o},1676:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2v8z"}),"Straighten");e.Z=o},961:(t,e,n)=>{"use strict";var i=n(4836);e.Z=void 0;var r=i(n(5045)),s=n(6417),o=(0,r.default)((0,s.jsx)("path",{d:"M3 14h4v-4H3v4zm0 5h4v-4H3v4zM3 9h4V5H3v4zm5 5h13v-4H8v4zm0 5h13v-4H8v4zM8 5v4h13V5H8z"}),"ViewList");e.Z=o},5045:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return i.createSvgIcon}});var i=n(3928)},5436:(t,e)=>{"use strict";var n,i=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),c=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case s:case a:case o:case p:case d:return t;default:switch(t=t&&t.$$typeof){case c:case h:case u:case m:case f:case l:return t;default:return e}}case r:return e}}}n=Symbol.for("react.module.reference")},478:(t,e,n)=>{"use strict";n(5436)},8658:(t,e,n)=>{"use strict";n.d(e,{Z:()=>H});var i=n(7462),r=n(3366),s=n(7219),o=n(3019),a=n(9456),l=n(3232),h=n(3649);var c=n(7551);const u={black:"#000",white:"#fff"},p={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},d={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},f={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},y={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},v={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},_=["mode","contrastThreshold","tonalOffset"],T={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:u.white,default:u.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},E={text:{primary:u.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:u.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function x(t,e,n,i){const r=i.light||i,s=i.dark||1.5*i;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:"light"===e?t.light=(0,c.$n)(t.main,r):"dark"===e&&(t.dark=(0,c._j)(t.main,s)))}function b(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:a=.2}=t,l=(0,r.Z)(t,_),h=t.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(e),b=t.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:d[200],light:d[50],dark:d[400]}:{main:d[500],light:d[300],dark:d[700]}}(e),I=t.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[500],light:f[300],dark:f[700]}:{main:f[700],light:f[400],dark:f[800]}}(e),w=t.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[700],light:y[500],dark:y[900]}}(e),S=t.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:v[800],light:v[500],dark:v[900]}}(e),R=t.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:"#ed6c02",light:m[500],dark:m[900]}}(e);function C(t){return(0,c.mi)(t,E.text.primary)>=n?E.text.primary:T.text.primary}const A=t=>{let{color:e,name:n,mainShade:r=500,lightShade:o=300,darkShade:l=700}=t;if(e=(0,i.Z)({},e),!e.main&&e[r]&&(e.main=e[r]),!e.hasOwnProperty("main"))throw new Error((0,s.Z)(11,n?" (".concat(n,")"):"",r));if("string"!==typeof e.main)throw new Error((0,s.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(e.main)));return x(e,"light",o,a),x(e,"dark",l,a),e.contrastText||(e.contrastText=C(e.main)),e},D={dark:E,light:T};return(0,o.Z)((0,i.Z)({common:(0,i.Z)({},u),mode:e,primary:A({color:h,name:"primary"}),secondary:A({color:b,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:A({color:I,name:"error"}),warning:A({color:R,name:"warning"}),info:A({color:w,name:"info"}),success:A({color:S,name:"success"}),grey:p,contrastThreshold:n,getContrastText:C,augmentColor:A,tonalOffset:a},D[e]),l)}const I=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const w={textTransform:"uppercase"},S='"Roboto", "Helvetica", "Arial", sans-serif';function R(t,e){const n="function"===typeof e?e(t):e,{fontFamily:s=S,fontSize:a=14,fontWeightLight:l=300,fontWeightRegular:h=400,fontWeightMedium:c=500,fontWeightBold:u=700,htmlFontSize:p=16,allVariants:d,pxToRem:f}=n,m=(0,r.Z)(n,I);const g=a/14,y=f||(t=>"".concat(t/p*g,"rem")),v=(t,e,n,r,o)=>{return(0,i.Z)({fontFamily:s,fontWeight:t,fontSize:y(e),lineHeight:n},s===S?{letterSpacing:"".concat((a=r/e,Math.round(1e5*a)/1e5),"em")}:{},o,d);var a},_={h1:v(l,96,1.167,-1.5),h2:v(l,60,1.2,-.5),h3:v(h,48,1.167,0),h4:v(h,34,1.235,.25),h5:v(h,24,1.334,0),h6:v(c,20,1.6,.15),subtitle1:v(h,16,1.75,.15),subtitle2:v(c,14,1.57,.1),body1:v(h,16,1.5,.15),body2:v(h,14,1.43,.15),button:v(c,14,1.75,.4,w),caption:v(h,12,1.66,.4),overline:v(h,12,2.66,1,w),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,o.Z)((0,i.Z)({htmlFontSize:p,pxToRem:y,fontFamily:s,fontSize:a,fontWeightLight:l,fontWeightRegular:h,fontWeightMedium:c,fontWeightBold:u},_),m,{clone:!1})}const C=.2,A=.14,D=.12;function O(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(C,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(A,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(D,")")].join(",")}const N=["none",O(0,2,1,-1,0,1,1,0,0,1,3,0),O(0,3,1,-2,0,2,2,0,0,1,5,0),O(0,3,3,-2,0,3,4,0,0,1,8,0),O(0,2,4,-1,0,4,5,0,0,1,10,0),O(0,3,5,-1,0,5,8,0,0,1,14,0),O(0,3,5,-1,0,6,10,0,0,1,18,0),O(0,4,5,-2,0,7,10,1,0,2,16,1),O(0,5,5,-3,0,8,10,1,0,3,14,2),O(0,5,6,-3,0,9,12,1,0,3,16,2),O(0,6,6,-3,0,10,14,1,0,4,18,3),O(0,6,7,-4,0,11,15,1,0,4,20,3),O(0,7,8,-4,0,12,17,2,0,5,22,4),O(0,7,8,-4,0,13,19,2,0,5,24,4),O(0,7,9,-4,0,14,21,2,0,5,26,4),O(0,8,9,-5,0,15,22,2,0,6,28,5),O(0,8,10,-5,0,16,24,2,0,6,30,5),O(0,8,11,-5,0,17,26,2,0,6,32,5),O(0,9,11,-5,0,18,28,2,0,7,34,6),O(0,9,12,-6,0,19,29,2,0,7,36,6),O(0,10,13,-6,0,20,31,3,0,8,38,7),O(0,10,13,-6,0,21,33,3,0,8,40,7),O(0,10,14,-6,0,22,35,3,0,8,42,7),O(0,11,14,-7,0,23,36,3,0,9,44,8),O(0,11,15,-7,0,24,38,3,0,9,46,8)],M=["duration","easing","delay"],P={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},F={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function L(t){return"".concat(Math.round(t),"ms")}function k(t){if(!t)return 0;const e=t/36;return Math.round(10*(4+15*e**.25+e/5))}function U(t){const e=(0,i.Z)({},P,t.easing),n=(0,i.Z)({},F,t.duration);return(0,i.Z)({getAutoHeightDuration:k,create:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:s=n.standard,easing:o=e.easeInOut,delay:a=0}=i;(0,r.Z)(i,M);return(Array.isArray(t)?t:[t]).map((t=>"".concat(t," ").concat("string"===typeof s?s:L(s)," ").concat(o," ").concat("string"===typeof a?a:L(a)))).join(",")}},t,{easing:e,duration:n})}const B={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},z=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function G(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:e={},palette:n={},transitions:c={},typography:u={}}=t,p=(0,r.Z)(t,z);if(t.vars)throw new Error((0,s.Z)(18));const d=b(n),f=(0,a.Z)(t);let m=(0,o.Z)(f,{mixins:(g=f.breakpoints,y=e,(0,i.Z)({toolbar:{minHeight:56,[g.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[g.up("sm")]:{minHeight:64}}},y)),palette:d,shadows:N.slice(),typography:R(d,u),transitions:U(c),zIndex:(0,i.Z)({},B)});var g,y;m=(0,o.Z)(m,p);for(var v=arguments.length,_=new Array(v>1?v-1:0),T=1;T<v;T++)_[T-1]=arguments[T];return m=_.reduce(((t,e)=>(0,o.Z)(t,e)),m),m.unstable_sxConfig=(0,i.Z)({},l.Z,null==p?void 0:p.unstable_sxConfig),m.unstable_sx=function(t){return(0,h.Z)({sx:t,theme:this})},m}const H=G},2248:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=(0,n(8658).Z)()},8564:(t,e,n)=>{"use strict";n.d(e,{ZP:()=>w,FO:()=>x,Dz:()=>b});var i=n(3366),r=n(7462),s=n(4472),o=n(9456),a=n(114);const l=["variant"];function h(t){return 0===t.length}function c(t){const{variant:e}=t,n=(0,i.Z)(t,l);let r=e||"";return Object.keys(n).sort().forEach((e=>{r+="color"===e?h(r)?t[e]:(0,a.Z)(t[e]):"".concat(h(r)?e:(0,a.Z)(e)).concat((0,a.Z)(t[e].toString()))})),r}var u=n(3649);const p=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],d=["theme"],f=["theme"];function m(t){return 0===Object.keys(t).length}const g=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,y=(t,e)=>{let n=[];e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants);const i={};return n.forEach((t=>{const e=c(t.props);i[e]=t.style})),i},v=(t,e,n,i)=>{var r,s;const{ownerState:o={}}=t,a=[],l=null==n||null==(r=n.components)||null==(s=r[i])?void 0:s.variants;return l&&l.forEach((n=>{let i=!0;Object.keys(n.props).forEach((e=>{o[e]!==n.props[e]&&t[e]!==n.props[e]&&(i=!1)})),i&&a.push(e[c(n.props)])})),a};function _(t){return"ownerState"!==t&&"theme"!==t&&"sx"!==t&&"as"!==t}const T=(0,o.Z)();var E=n(2248);const x=t=>_(t)&&"classes"!==t,b=_,I=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{defaultTheme:e=T,rootShouldForwardProp:n=_,slotShouldForwardProp:o=_}=t,a=t=>{const n=m(t.theme)?e:t.theme;return(0,u.Z)((0,r.Z)({},t,{theme:n}))};return a.__mui_systemSx=!0,function(t){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Co)(t,(t=>t.filter((t=>!(null!=t&&t.__mui_systemSx)))));const{name:h,slot:c,skipVariantsResolver:u,skipSx:T,overridesResolver:E}=l,x=(0,i.Z)(l,p),b=void 0!==u?u:c&&"Root"!==c||!1,I=T||!1;let w=_;"Root"===c?w=n:c?w=o:function(t){return"string"===typeof t&&t.charCodeAt(0)>96}(t)&&(w=void 0);const S=(0,s.ZP)(t,(0,r.Z)({shouldForwardProp:w,label:undefined},x)),R=function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];const l=s?s.map((t=>"function"===typeof t&&t.__emotion_real!==t?n=>{let{theme:s}=n,o=(0,i.Z)(n,d);return t((0,r.Z)({theme:m(s)?e:s},o))}:t)):[];let c=t;h&&E&&l.push((t=>{const n=m(t.theme)?e:t.theme,i=g(h,n);if(i){const e={};return Object.entries(i).forEach((i=>{let[s,o]=i;e[s]="function"===typeof o?o((0,r.Z)({},t,{theme:n})):o})),E(t,e)}return null})),h&&!b&&l.push((t=>{const n=m(t.theme)?e:t.theme;return v(t,y(h,n),n,h)})),I||l.push(a);const u=l.length-s.length;if(Array.isArray(t)&&u>0){const e=new Array(u).fill("");c=[...t,...e],c.raw=[...t.raw,...e]}else"function"===typeof t&&t.__emotion_real!==t&&(c=n=>{let{theme:s}=n,o=(0,i.Z)(n,f);return t((0,r.Z)({theme:m(s)?e:s},o))});return S(c,...l)};return S.withConfig&&(R.withConfig=S.withConfig),R}}({defaultTheme:E.Z,rootShouldForwardProp:x}),w=I},9394:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(9023);var r=n(6936);function s(t){let{props:e,name:n,defaultTheme:s}=t;const o=function(t){const{theme:e,name:n,props:r}=t;return e&&e.components&&e.components[n]&&e.components[n].defaultProps?(0,i.Z)(e.components[n].defaultProps,r):r}({theme:(0,r.Z)(s),name:n,props:e});return o}var o=n(2248);function a(t){let{props:e,name:n}=t;return s({props:e,name:n,defaultTheme:o.Z})}},1615:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=n(114).Z},1171:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_});var i=n(7462),r=n(7313),s=n(3366),o=n(3061),a=n(1921),l=n(1615),h=n(9394),c=n(8564),u=n(7430),p=n(2298);function d(t){return(0,p.Z)("MuiSvgIcon",t)}(0,u.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var f=n(6417);const m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],g=(0,c.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"inherit"!==n.color&&e["color".concat((0,l.Z)(n.color))],e["fontSize".concat((0,l.Z)(n.fontSize))]]}})((t=>{let{theme:e,ownerState:n}=t;var i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(i=e.transitions)||null==(r=i.create)?void 0:r.call(i,"fill",{duration:null==(s=e.transitions)||null==(o=s.duration)?void 0:o.shorter}),fontSize:{inherit:"inherit",small:(null==(a=e.typography)||null==(l=a.pxToRem)?void 0:l.call(a,20))||"1.25rem",medium:(null==(h=e.typography)||null==(c=h.pxToRem)?void 0:c.call(h,24))||"1.5rem",large:(null==(u=e.typography)||null==(p=u.pxToRem)?void 0:p.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(d=null==(f=(e.vars||e).palette)||null==(m=f[n.color])?void 0:m.main)?d:{action:null==(g=(e.vars||e).palette)||null==(y=g.action)?void 0:y.active,disabled:null==(v=(e.vars||e).palette)||null==(_=v.action)?void 0:_.disabled,inherit:void 0}[n.color]}})),y=r.forwardRef((function(t,e){const n=(0,h.Z)({props:t,name:"MuiSvgIcon"}),{children:r,className:c,color:u="inherit",component:p="svg",fontSize:y="medium",htmlColor:v,inheritViewBox:_=!1,titleAccess:T,viewBox:E="0 0 24 24"}=n,x=(0,s.Z)(n,m),b=(0,i.Z)({},n,{color:u,component:p,fontSize:y,instanceFontSize:t.fontSize,inheritViewBox:_,viewBox:E}),I={};_||(I.viewBox=E);const w=(t=>{const{color:e,fontSize:n,classes:i}=t,r={root:["root","inherit"!==e&&"color".concat((0,l.Z)(e)),"fontSize".concat((0,l.Z)(n))]};return(0,a.Z)(r,d,i)})(b);return(0,f.jsxs)(g,(0,i.Z)({as:p,className:(0,o.Z)(w.root,c),focusable:"false",color:v,"aria-hidden":!T||void 0,role:T?"img":void 0,ref:e},I,x,{ownerState:b,children:[r,T?(0,f.jsx)("title",{children:T}):null]}))}));y.muiName="SvgIcon";const v=y;function _(t,e){function n(n,r){return(0,f.jsx)(v,(0,i.Z)({"data-testid":"".concat(e,"Icon"),ref:r},n,{children:t}))}return n.muiName=v.muiName,r.memo(r.forwardRef(n))}},8706:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=n(4312).Z},3928:(t,e,n)=>{"use strict";n.r(e),n.d(e,{capitalize:()=>r.Z,createChainedFunction:()=>s,createSvgIcon:()=>o.Z,debounce:()=>a.Z,deprecatedPropType:()=>l,isMuiElement:()=>h.Z,ownerDocument:()=>c.Z,ownerWindow:()=>u.Z,requirePropFactory:()=>p,setRef:()=>d,unstable_ClassNameGenerator:()=>E,unstable_useEnhancedEffect:()=>f.Z,unstable_useId:()=>m,unsupportedProp:()=>g,useControlled:()=>y.Z,useEventCallback:()=>v.Z,useForkRef:()=>_.Z,useIsFocusVisible:()=>T.Z});var i=n(1271),r=n(1615);const s=n(4246).Z;var o=n(1171),a=n(8706);const l=function(t,e){return()=>null};var h=n(7816),c=n(6106),u=n(3533);n(7462);const p=function(t,e){return()=>null};const d=n(9265).Z;var f=n(4993);const m=n(3362).Z;const g=function(t,e,n,i,r){return null};var y=n(522),v=n(3236),_=n(6983),T=n(9127);const E={configure:t=>{i.Z.configure(t)}}},7816:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(7313);const r=function(t,e){return i.isValidElement(t)&&-1!==e.indexOf(t.type.muiName)}},6106:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=n(9081).Z},3533:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=n(3282).Z},522:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(7313);const r=function(t){let{controlled:e,default:n,name:r,state:s="value"}=t;const{current:o}=i.useRef(void 0!==e),[a,l]=i.useState(n);return[o?e:a,i.useCallback((t=>{o||l(t)}),[])]}},4993:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=n(2678).Z},3236:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=n(2780).Z},6983:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=n(7472).Z},9127:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var i=n(7313);let r,s=!0,o=!1;const a={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(t){t.metaKey||t.altKey||t.ctrlKey||(s=!0)}function h(){s=!1}function c(){"hidden"===this.visibilityState&&o&&(s=!0)}function u(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch(n){}return s||function(t){const{type:e,tagName:n}=t;return!("INPUT"!==n||!a[e]||t.readOnly)||"TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable}(e)}const p=function(){const t=i.useCallback((t=>{var e;null!=t&&((e=t.ownerDocument).addEventListener("keydown",l,!0),e.addEventListener("mousedown",h,!0),e.addEventListener("pointerdown",h,!0),e.addEventListener("touchstart",h,!0),e.addEventListener("visibilitychange",c,!0))}),[]),e=i.useRef(!1);return{isFocusVisibleRef:e,onFocus:function(t){return!!u(t)&&(e.current=!0,!0)},onBlur:function(){return!!e.current&&(o=!0,window.clearTimeout(r),r=window.setTimeout((()=>{o=!1}),100),e.current=!1,!0)},ref:t}}},5693:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=n(7313).createContext(null)},201:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(7313),r=n(5693);function s(){return i.useContext(r.Z)}},4472:(t,e,n)=>{"use strict";n.d(e,{ZP:()=>T,Co:()=>E});var i=n(7313),r=n(7462),s=n(1816),o=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const a=(0,s.Z)((function(t){return o.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91}));var l=n(6132),h=n(4911),c=n(1086),u=n(5696),p=a,d=function(t){return"theme"!==t},f=function(t){return"string"===typeof t&&t.charCodeAt(0)>96?p:d},m=function(t,e,n){var i;if(e){var r=e.shouldForwardProp;i=t.__emotion_forwardProp&&r?function(e){return t.__emotion_forwardProp(e)&&r(e)}:r}return"function"!==typeof i&&n&&(i=t.__emotion_forwardProp),i},g=function(t){var e=t.cache,n=t.serialized,i=t.isStringTag;(0,h.hC)(e,n,i);(0,u.L)((function(){return(0,h.My)(e,n,i)}));return null};const y=function t(e,n){var s,o,a=e.__emotion_real===e,u=a&&e.__emotion_base||e;void 0!==n&&(s=n.label,o=n.target);var p=m(e,n,a),d=p||f(u),y=!d("as");return function(){var v=arguments,_=a&&void 0!==e.__emotion_styles?e.__emotion_styles.slice(0):[];if(void 0!==s&&_.push("label:"+s+";"),null==v[0]||void 0===v[0].raw)_.push.apply(_,v);else{0,_.push(v[0][0]);for(var T=v.length,E=1;E<T;E++)_.push(v[E],v[0][E])}var x=(0,l.w)((function(t,e,n){var r=y&&t.as||u,s="",a=[],m=t;if(null==t.theme){for(var v in m={},t)m[v]=t[v];m.theme=(0,i.useContext)(l.T)}"string"===typeof t.className?s=(0,h.fp)(e.registered,a,t.className):null!=t.className&&(s=t.className+" ");var T=(0,c.O)(_.concat(a),e.registered,m);s+=e.key+"-"+T.name,void 0!==o&&(s+=" "+o);var E=y&&void 0===p?f(r):d,x={};for(var b in t)y&&"as"===b||E(b)&&(x[b]=t[b]);return x.className=s,x.ref=n,(0,i.createElement)(i.Fragment,null,(0,i.createElement)(g,{cache:e,serialized:T,isStringTag:"string"===typeof r}),(0,i.createElement)(r,x))}));return x.displayName=void 0!==s?s:"Styled("+("string"===typeof u?u:u.displayName||u.name||"Component")+")",x.defaultProps=e.defaultProps,x.__emotion_real=x,x.__emotion_base=u,x.__emotion_styles=_,x.__emotion_forwardProp=p,Object.defineProperty(x,"toString",{value:function(){return"."+o}}),x.withComponent=function(e,i){return t(e,(0,r.Z)({},n,i,{shouldForwardProp:m(x,i,!0)})).apply(void 0,_)},x}};var v=y.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){v[t]=v(t)}));const _=v;function T(t,e){return _(t,e)}const E=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}},4929:(t,e,n)=>{"use strict";n.d(e,{L7:()=>a,VO:()=>i,W8:()=>o,k9:()=>s});const i={xs:0,sm:600,md:900,lg:1200,xl:1536},r={keys:["xs","sm","md","lg","xl"],up:t=>"@media (min-width:".concat(i[t],"px)")};function s(t,e,n){const s=t.theme||{};if(Array.isArray(e)){const t=s.breakpoints||r;return e.reduce(((i,r,s)=>(i[t.up(t.keys[s])]=n(e[s]),i)),{})}if("object"===typeof e){const t=s.breakpoints||r;return Object.keys(e).reduce(((r,s)=>{if(-1!==Object.keys(t.values||i).indexOf(s)){r[t.up(s)]=n(e[s],s)}else{const t=s;r[t]=e[t]}return r}),{})}return n(e)}function o(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e;return(null==(e=t.keys)?void 0:e.reduce(((e,n)=>(e[t.up(n)]={},e)),{}))||{}}function a(t,e){return t.reduce(((t,e)=>{const n=t[e];return(!n||0===Object.keys(n).length)&&delete t[e],t}),e)}},7551:(t,e,n)=>{"use strict";n.d(e,{$n:()=>u,Fq:()=>h,_j:()=>c,mi:()=>l});var i=n(7219);function r(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)}function s(t){if(t.type)return t;if("#"===t.charAt(0))return s(function(t){t=t.slice(1);const e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g");let n=t.match(e);return n&&1===n[0].length&&(n=n.map((t=>t+t))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((t,e)=>e<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3)).join(", "),")"):""}(t));const e=t.indexOf("("),n=t.substring(0,e);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.Z)(9,t));let r,o=t.substring(e+1,t.length-1);if("color"===n){if(o=o.split(" "),r=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.Z)(10,r))}else o=o.split(",");return o=o.map((t=>parseFloat(t))),{type:n,values:o,colorSpace:r}}function o(t){const{type:e,colorSpace:n}=t;let{values:i}=t;return-1!==e.indexOf("rgb")?i=i.map(((t,e)=>e<3?parseInt(t,10):t)):-1!==e.indexOf("hsl")&&(i[1]="".concat(i[1],"%"),i[2]="".concat(i[2],"%")),i=-1!==e.indexOf("color")?"".concat(n," ").concat(i.join(" ")):"".concat(i.join(", ")),"".concat(e,"(").concat(i,")")}function a(t){let e="hsl"===(t=s(t)).type||"hsla"===t.type?s(function(t){t=s(t);const{values:e}=t,n=e[0],i=e[1]/100,r=e[2]/100,a=i*Math.min(r,1-r),l=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+n/30)%12;return r-a*Math.max(Math.min(e-3,9-e,1),-1)};let h="rgb";const c=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===t.type&&(h+="a",c.push(e[3])),o({type:h,values:c})}(t)).values:t.values;return e=e.map((e=>("color"!==t.type&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4))),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function l(t,e){const n=a(t),i=a(e);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function h(t,e){return t=s(t),e=r(e),"rgb"!==t.type&&"hsl"!==t.type||(t.type+="a"),"color"===t.type?t.values[3]="/".concat(e):t.values[3]=e,o(t)}function c(t,e){if(t=s(t),e=r(e),-1!==t.type.indexOf("hsl"))t.values[2]*=1-e;else if(-1!==t.type.indexOf("rgb")||-1!==t.type.indexOf("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return o(t)}function u(t,e){if(t=s(t),e=r(e),-1!==t.type.indexOf("hsl"))t.values[2]+=(100-t.values[2])*e;else if(-1!==t.type.indexOf("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(-1!==t.type.indexOf("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return o(t)}},9456:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var i=n(7462),r=n(3366),s=n(3019);const o=["values","unit","step"],a=t=>{const e=Object.keys(t).map((e=>({key:e,val:t[e]})))||[];return e.sort(((t,e)=>t.val-e.val)),e.reduce(((t,e)=>(0,i.Z)({},t,{[e.key]:e.val})),{})};const l={borderRadius:4};var h=n(6886);var c=n(3649),u=n(3232);const p=["breakpoints","palette","spacing","shape"];const d=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:e={},palette:n={},spacing:d,shape:f={}}=t,m=(0,r.Z)(t,p),g=function(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:s=5}=t,l=(0,r.Z)(t,o),h=a(e),c=Object.keys(h);function u(t){const i="number"===typeof e[t]?e[t]:t;return"@media (min-width:".concat(i).concat(n,")")}function p(t){const i="number"===typeof e[t]?e[t]:t;return"@media (max-width:".concat(i-s/100).concat(n,")")}function d(t,i){const r=c.indexOf(i);return"@media (min-width:".concat("number"===typeof e[t]?e[t]:t).concat(n,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof e[c[r]]?e[c[r]]:i)-s/100).concat(n,")")}return(0,i.Z)({keys:c,values:h,up:u,down:p,between:d,only:function(t){return c.indexOf(t)+1<c.length?d(t,c[c.indexOf(t)+1]):u(t)},not:function(t){const e=c.indexOf(t);return 0===e?u(c[1]):e===c.length-1?p(c[e]):d(t,c[c.indexOf(t)+1]).replace("@media","@media not all and")},unit:n},l)}(e),y=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(t.mui)return t;const e=(0,h.hB)({spacing:t}),n=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(0===n.length?[1]:n).map((t=>{const n=e(t);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(d);let v=(0,s.Z)({breakpoints:g,direction:"ltr",components:{},palette:(0,i.Z)({mode:"light"},n),spacing:y,shape:(0,i.Z)({},l,f)},m);for(var _=arguments.length,T=new Array(_>1?_-1:0),E=1;E<_;E++)T[E-1]=arguments[E];return v=T.reduce(((t,e)=>(0,s.Z)(t,e)),v),v.unstable_sxConfig=(0,i.Z)({},u.Z,null==m?void 0:m.unstable_sxConfig),v.unstable_sx=function(t){return(0,c.Z)({sx:t,theme:this})},v}},7330:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(3019);const r=function(t,e){return e?(0,i.Z)(t,e,{clone:!1}):t}},6886:(t,e,n)=>{"use strict";n.d(e,{hB:()=>f,eI:()=>d,NA:()=>m,e6:()=>v,o3:()=>_});var i=n(4929),r=n(6428),s=n(7330);const o={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},h=function(t){const e={};return n=>(void 0===e[n]&&(e[n]=t(n)),e[n])}((t=>{if(t.length>2){if(!l[t])return[t];t=l[t]}const[e,n]=t.split(""),i=o[e],r=a[n]||"";return Array.isArray(r)?r.map((t=>i+t)):[i+r]})),c=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],u=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],p=[...c,...u];function d(t,e,n,i){var s;const o=null!=(s=(0,r.DW)(t,e,!1))?s:n;return"number"===typeof o?t=>"string"===typeof t?t:o*t:Array.isArray(o)?t=>"string"===typeof t?t:o[t]:"function"===typeof o?o:()=>{}}function f(t){return d(t,"spacing",8)}function m(t,e){if("string"===typeof e||null==e)return e;const n=t(Math.abs(e));return e>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(t,e,n,r){if(-1===e.indexOf(n))return null;const s=function(t,e){return n=>t.reduce(((t,i)=>(t[i]=m(e,n),t)),{})}(h(n),r),o=t[n];return(0,i.k9)(t,o,s)}function y(t,e){const n=f(t.theme);return Object.keys(t).map((i=>g(t,e,i,n))).reduce(s.Z,{})}function v(t){return y(t,c)}function _(t){return y(t,u)}function T(t){return y(t,p)}v.propTypes={},v.filterProps=c,_.propTypes={},_.filterProps=u,T.propTypes={},T.filterProps=p},6428:(t,e,n)=>{"use strict";n.d(e,{DW:()=>s,Jq:()=>o,ZP:()=>a});var i=n(114),r=n(4929);function s(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||"string"!==typeof e)return null;if(t&&t.vars&&n){const n="vars.".concat(e).split(".").reduce(((t,e)=>t&&t[e]?t[e]:null),t);if(null!=n)return n}return e.split(".").reduce(((t,e)=>t&&null!=t[e]?t[e]:null),t)}function o(t,e,n){let i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return i="function"===typeof t?t(n):Array.isArray(t)?t[n]||r:s(t,n)||r,e&&(i=e(i,r,t)),i}const a=function(t){const{prop:e,cssProperty:n=t.prop,themeKey:a,transform:l}=t,h=t=>{if(null==t[e])return null;const h=t[e],c=s(t.theme,a)||{};return(0,r.k9)(t,h,(t=>{let r=o(c,l,t);return t===r&&"string"===typeof t&&(r=o(c,l,"".concat(e).concat("default"===t?"":(0,i.Z)(t)),t)),!1===n?r:{[n]:r}}))};return h.propTypes={},h.filterProps=[e],h}},3232:(t,e,n)=>{"use strict";n.d(e,{Z:()=>M});var i=n(114),r=n(6886),s=n(4929),o=n(6428),a=n(7330);const l=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e.reduce(((t,e)=>(e.filterProps.forEach((n=>{t[n]=e})),t)),{}),r=t=>Object.keys(t).reduce(((e,n)=>i[n]?(0,a.Z)(e,i[n](t)):e),{});return r.propTypes={},r.filterProps=e.reduce(((t,e)=>t.concat(e.filterProps)),[]),r};function h(t){return"number"!==typeof t?t:"".concat(t,"px solid")}const c=(0,o.ZP)({prop:"border",themeKey:"borders",transform:h}),u=(0,o.ZP)({prop:"borderTop",themeKey:"borders",transform:h}),p=(0,o.ZP)({prop:"borderRight",themeKey:"borders",transform:h}),d=(0,o.ZP)({prop:"borderBottom",themeKey:"borders",transform:h}),f=(0,o.ZP)({prop:"borderLeft",themeKey:"borders",transform:h}),m=(0,o.ZP)({prop:"borderColor",themeKey:"palette"}),g=(0,o.ZP)({prop:"borderTopColor",themeKey:"palette"}),y=(0,o.ZP)({prop:"borderRightColor",themeKey:"palette"}),v=(0,o.ZP)({prop:"borderBottomColor",themeKey:"palette"}),_=(0,o.ZP)({prop:"borderLeftColor",themeKey:"palette"}),T=t=>{if(void 0!==t.borderRadius&&null!==t.borderRadius){const e=(0,r.eI)(t.theme,"shape.borderRadius",4,"borderRadius"),n=t=>({borderRadius:(0,r.NA)(e,t)});return(0,s.k9)(t,t.borderRadius,n)}return null};T.propTypes={},T.filterProps=["borderRadius"];l(c,u,p,d,f,m,g,y,v,_,T);const E=t=>{if(void 0!==t.gap&&null!==t.gap){const e=(0,r.eI)(t.theme,"spacing",8,"gap"),n=t=>({gap:(0,r.NA)(e,t)});return(0,s.k9)(t,t.gap,n)}return null};E.propTypes={},E.filterProps=["gap"];const x=t=>{if(void 0!==t.columnGap&&null!==t.columnGap){const e=(0,r.eI)(t.theme,"spacing",8,"columnGap"),n=t=>({columnGap:(0,r.NA)(e,t)});return(0,s.k9)(t,t.columnGap,n)}return null};x.propTypes={},x.filterProps=["columnGap"];const b=t=>{if(void 0!==t.rowGap&&null!==t.rowGap){const e=(0,r.eI)(t.theme,"spacing",8,"rowGap"),n=t=>({rowGap:(0,r.NA)(e,t)});return(0,s.k9)(t,t.rowGap,n)}return null};b.propTypes={},b.filterProps=["rowGap"];l(E,x,b,(0,o.ZP)({prop:"gridColumn"}),(0,o.ZP)({prop:"gridRow"}),(0,o.ZP)({prop:"gridAutoFlow"}),(0,o.ZP)({prop:"gridAutoColumns"}),(0,o.ZP)({prop:"gridAutoRows"}),(0,o.ZP)({prop:"gridTemplateColumns"}),(0,o.ZP)({prop:"gridTemplateRows"}),(0,o.ZP)({prop:"gridTemplateAreas"}),(0,o.ZP)({prop:"gridArea"}));function I(t,e){return"grey"===e?e:t}l((0,o.ZP)({prop:"color",themeKey:"palette",transform:I}),(0,o.ZP)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:I}),(0,o.ZP)({prop:"backgroundColor",themeKey:"palette",transform:I}));function w(t){return t<=1&&0!==t?"".concat(100*t,"%"):t}const S=(0,o.ZP)({prop:"width",transform:w}),R=t=>{if(void 0!==t.maxWidth&&null!==t.maxWidth){const e=e=>{var n,i,r;return{maxWidth:(null==(n=t.theme)||null==(i=n.breakpoints)||null==(r=i.values)?void 0:r[e])||s.VO[e]||w(e)}};return(0,s.k9)(t,t.maxWidth,e)}return null};R.filterProps=["maxWidth"];const C=(0,o.ZP)({prop:"minWidth",transform:w}),A=(0,o.ZP)({prop:"height",transform:w}),D=(0,o.ZP)({prop:"maxHeight",transform:w}),O=(0,o.ZP)({prop:"minHeight",transform:w}),N=((0,o.ZP)({prop:"size",cssProperty:"width",transform:w}),(0,o.ZP)({prop:"size",cssProperty:"height",transform:w}),l(S,R,C,A,D,O,(0,o.ZP)({prop:"boxSizing"})),t=>e=>{if(void 0!==e[t]&&null!==e[t]){const n=n=>{var r;let s=null==(r=e.theme.typography)?void 0:r[n];var o,a,l,h,c;("object"===typeof s&&(s=null),s)||(s=null==(o=e.theme.typography)?void 0:o["".concat(t).concat("default"===e[t]||e[t]===t?"":(0,i.Z)(null==(a=e[t])?void 0:a.toString()))]);s||(s=null!=(l=null==(h=e.theme.typography)||null==(c=h[n])?void 0:c[t])?l:n);return{[t]:s}};return(0,s.k9)(e,e[t],n)}return null}),M={border:{themeKey:"borders",transform:h},borderTop:{themeKey:"borders",transform:h},borderRight:{themeKey:"borders",transform:h},borderBottom:{themeKey:"borders",transform:h},borderLeft:{themeKey:"borders",transform:h},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:T},color:{themeKey:"palette",transform:I},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:I},backgroundColor:{themeKey:"palette",transform:I},p:{style:r.o3},pt:{style:r.o3},pr:{style:r.o3},pb:{style:r.o3},pl:{style:r.o3},px:{style:r.o3},py:{style:r.o3},padding:{style:r.o3},paddingTop:{style:r.o3},paddingRight:{style:r.o3},paddingBottom:{style:r.o3},paddingLeft:{style:r.o3},paddingX:{style:r.o3},paddingY:{style:r.o3},paddingInline:{style:r.o3},paddingInlineStart:{style:r.o3},paddingInlineEnd:{style:r.o3},paddingBlock:{style:r.o3},paddingBlockStart:{style:r.o3},paddingBlockEnd:{style:r.o3},m:{style:r.e6},mt:{style:r.e6},mr:{style:r.e6},mb:{style:r.e6},ml:{style:r.e6},mx:{style:r.e6},my:{style:r.e6},margin:{style:r.e6},marginTop:{style:r.e6},marginRight:{style:r.e6},marginBottom:{style:r.e6},marginLeft:{style:r.e6},marginX:{style:r.e6},marginY:{style:r.e6},marginInline:{style:r.e6},marginInlineStart:{style:r.e6},marginInlineEnd:{style:r.e6},marginBlock:{style:r.e6},marginBlockStart:{style:r.e6},marginBlockEnd:{style:r.e6},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:E},rowGap:{style:b},columnGap:{style:x},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:w},maxWidth:{style:R},minWidth:{transform:w},height:{transform:w},maxHeight:{transform:w},minHeight:{transform:w},boxSizing:{},fontFamily:{themeKey:"typography",style:N("fontFamily")},fontSize:{themeKey:"typography",style:N("fontSize")},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography",style:N("fontWeight")},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}}},3649:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var i=n(114),r=n(7330),s=n(6428),o=n(4929),a=n(3232);const l=function(){function t(t,e,n,r){const a={[t]:e,theme:n},l=r[t];if(!l)return{[t]:e};const{cssProperty:h=t,themeKey:c,transform:u,style:p}=l;if(null==e)return null;const d=(0,s.DW)(n,c)||{};if(p)return p(a);return(0,o.k9)(a,e,(e=>{let n=(0,s.Jq)(d,u,e);return e===n&&"string"===typeof e&&(n=(0,s.Jq)(d,u,"".concat(t).concat("default"===e?"":(0,i.Z)(e)),e)),!1===h?n:{[h]:n}}))}return function e(n){var i;const{sx:s,theme:l={}}=n||{};if(!s)return null;const h=null!=(i=l.unstable_sxConfig)?i:a.Z;function c(n){let i=n;if("function"===typeof n)i=n(l);else if("object"!==typeof n)return n;if(!i)return null;const s=(0,o.W8)(l.breakpoints),a=Object.keys(s);let c=s;return Object.keys(i).forEach((n=>{const s=(a=i[n],u=l,"function"===typeof a?a(u):a);var a,u;if(null!==s&&void 0!==s)if("object"===typeof s)if(h[n])c=(0,r.Z)(c,t(n,s,l,h));else{const t=(0,o.k9)({theme:l},s,(t=>({[n]:t})));!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e.reduce(((t,e)=>t.concat(Object.keys(e))),[]),r=new Set(i);return e.every((t=>r.size===Object.keys(t).length))}(t,s)?c=(0,r.Z)(c,t):c[n]=e({sx:s,theme:l})}else c=(0,r.Z)(c,t(n,s,l,h))})),(0,o.L7)(a,c)}return Array.isArray(s)?s.map(c):c(s)}}();l.filterProps=["sx"];const h=l},6936:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(9456),r=n(201);const s=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const e=(0,r.Z)();return e&&(n=e,0!==Object.keys(n).length)?e:t;var n},o=(0,i.Z)();const a=function(){return s(arguments.length>0&&void 0!==arguments[0]?arguments[0]:o)}},1271:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const i=t=>t,r=(()=>{let t=i;return{configure(e){t=e},generate:e=>t(e),reset(){t=i}}})()},114:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(7219);function r(t){if("string"!==typeof t)throw new Error((0,i.Z)(7));return t.charAt(0).toUpperCase()+t.slice(1)}},1921:(t,e,n)=>{"use strict";function i(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const i={};return Object.keys(t).forEach((r=>{i[r]=t[r].reduce(((t,i)=>{if(i){const r=e(i);""!==r&&t.push(r),n&&n[i]&&t.push(n[i])}return t}),[]).join(" ")})),i}n.d(e,{Z:()=>i})},4246:(t,e,n)=>{"use strict";function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(((t,e)=>null==e?t:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];t.apply(this,i),e.apply(this,i)}),(()=>{}))}n.d(e,{Z:()=>i})},4312:(t,e,n)=>{"use strict";function i(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function i(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];clearTimeout(e),e=setTimeout((()=>{t.apply(this,r)}),n)}return i.clear=()=>{clearTimeout(e)},i}n.d(e,{Z:()=>i})},3019:(t,e,n)=>{"use strict";n.d(e,{P:()=>r,Z:()=>o});var i=n(7462);function r(t){return null!==t&&"object"===typeof t&&t.constructor===Object}function s(t){if(!r(t))return t;const e={};return Object.keys(t).forEach((n=>{e[n]=s(t[n])})),e}function o(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const a=n.clone?(0,i.Z)({},t):t;return r(t)&&r(e)&&Object.keys(e).forEach((i=>{"__proto__"!==i&&(r(e[i])&&i in t&&r(t[i])?a[i]=o(t[i],e[i],n):n.clone?a[i]=r(e[i])?s(e[i]):e[i]:a[i]=e[i])})),a}},7219:(t,e,n)=>{"use strict";function i(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}n.d(e,{Z:()=>i})},2298:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(1271);const r={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function s(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const s=r[e];return s?"".concat(n,"-").concat(s):"".concat(i.Z.generate(t),"-").concat(e)}},7430:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(2298);function r(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return e.forEach((e=>{r[e]=(0,i.Z)(t,e,n)})),r}},9081:(t,e,n)=>{"use strict";function i(t){return t&&t.ownerDocument||document}n.d(e,{Z:()=>i})},3282:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(9081);function r(t){return(0,i.Z)(t).defaultView||window}},9023:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(7462);function r(t,e){const n=(0,i.Z)({},e);return Object.keys(t).forEach((s=>{if(s.toString().match(/^(components|slots)$/))n[s]=(0,i.Z)({},t[s],n[s]);else if(s.toString().match(/^(componentsProps|slotProps)$/)){const o=t[s]||{},a=e[s];n[s]={},a&&Object.keys(a)?o&&Object.keys(o)?(n[s]=(0,i.Z)({},a),Object.keys(o).forEach((t=>{n[s][t]=r(o[t],a[t])}))):n[s]=a:n[s]=o}else void 0===n[s]&&(n[s]=t[s])})),n}},9265:(t,e,n)=>{"use strict";function i(t,e){"function"===typeof t?t(e):t&&(t.current=e)}n.d(e,{Z:()=>i})},2678:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(7313);const r="undefined"!==typeof window?i.useLayoutEffect:i.useEffect},2780:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(7313),r=n(2678);function s(t){const e=i.useRef(t);return(0,r.Z)((()=>{e.current=t})),i.useCallback((function(){return(0,e.current)(...arguments)}),[])}},7472:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(7313),r=n(9265);function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.useMemo((()=>e.every((t=>null==t))?null:t=>{e.forEach((e=>{(0,r.Z)(e,t)}))}),e)}},3362:(t,e,n)=>{"use strict";var i;n.d(e,{Z:()=>a});var r=n(7313);let s=0;const o=(i||(i=n.t(r,2))).useId;function a(t){if(void 0!==o){const e=o();return null!=t?t:e}return function(t){const[e,n]=r.useState(t),i=t||e;return r.useEffect((()=>{null==e&&(s+=1,n("mui-".concat(s)))}),[e]),i}(t)}},7538:function(t,e,n){var i;t=n.nmd(t),function(r){var s=e,o=(t&&t.exports,"object"==typeof n.g&&n.g);o.global!==o&&o.window;var a=function(t){this.message=t};(a.prototype=new Error).name="InvalidCharacterError";var l=function(t){throw new a(t)},h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,u={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var e,n,i,r,s=t.length%3,o="",a=-1,c=t.length-s;++a<c;)e=t.charCodeAt(a)<<16,n=t.charCodeAt(++a)<<8,i=t.charCodeAt(++a),o+=h.charAt((r=e+n+i)>>18&63)+h.charAt(r>>12&63)+h.charAt(r>>6&63)+h.charAt(63&r);return 2==s?(e=t.charCodeAt(a)<<8,n=t.charCodeAt(++a),o+=h.charAt((r=e+n)>>10)+h.charAt(r>>4&63)+h.charAt(r<<2&63)+"="):1==s&&(r=t.charCodeAt(a),o+=h.charAt(r>>2)+h.charAt(r<<4&63)+"=="),o},decode:function(t){var e=(t=String(t).replace(c,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&l("Invalid character: the string to be decoded is not correctly encoded.");for(var n,i,r=0,s="",o=-1;++o<e;)i=h.indexOf(t.charAt(o)),n=r%4?64*n+i:i,r++%4&&(s+=String.fromCharCode(255&n>>(-2*r&6)));return s},version:"0.1.0"};void 0===(i=function(){return u}.call(e,n,e,t))||(t.exports=i)}()},3061:(t,e,n)=>{"use strict";function i(t){var e,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=i(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}n.d(e,{Z:()=>r});const r=function(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=i(t))&&(r&&(r+=" "),r+=e);return r}},8041:t=>{"use strict";var e,n="object"===typeof Reflect?Reflect:null,i=n&&"function"===typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var r=Number.isNaN||function(t){return t!==t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,i){function r(n){t.removeListener(e,s),i(n)}function s(){"function"===typeof t.removeListener&&t.removeListener("error",r),n([].slice.call(arguments))}m(t,e,s,{once:!0}),"error"!==e&&function(t,e,n){"function"===typeof t.on&&m(t,"error",e,n)}(t,r,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,n,i){var r,s,o,h;if(a(n),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),void 0===o)o=s[e]=n,++t._eventsCount;else if("function"===typeof o?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=l(t))>0&&o.length>r&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=o.length,h=c,console&&console.warn&&console.warn(h)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=c.bind(i);return r.listener=n,i.wrapFn=r,r}function p(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"===typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):f(r,r.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function m(t,e,n,i){if("function"===typeof t.on)i.once?t.once(e,n):t.on(e,n);else{if("function"!==typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(s){i.once&&t.removeEventListener(e,r),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!==typeof t||t<0||r(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||r(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[t];if(void 0===l)return!1;if("function"===typeof l)i(l,this,e);else{var h=l.length,c=f(l,h);for(n=0;n<h;++n)i(c[n],this,e)}return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return a(e),this.on(t,u(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,u(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,i,r,s,o;if(a(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!==typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){o=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,s=Object.keys(n);for(i=0;i<s.length;++i)"removeListener"!==(r=s[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},s.prototype.listenerCount=d,s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},1507:t=>{!function(){var e={};t.exports=e,e.simpleFilter=function(t,n){return n.filter((function(n){return e.test(t,n)}))},e.test=function(t,n){return null!==e.match(t,n)},e.match=function(t,e,n){n=n||{};var i,r=0,s=[],o=e.length,a=0,l=0,h=n.pre||"",c=n.post||"",u=n.caseSensitive&&e||e.toLowerCase();t=n.caseSensitive&&t||t.toLowerCase();for(var p=0;p<o;p++)i=e[p],u[p]===t[r]?(i=h+i+c,r+=1,l+=1+l):l=0,a+=l,s[s.length]=i;return r===t.length?(a=u===t?1/0:a,{rendered:s.join(""),score:a}):null},e.filter=function(t,n,i){return n&&0!==n.length?"string"!==typeof t?n:(i=i||{},n.reduce((function(n,r,s,o){var a=r;i.extract&&(a=i.extract(r));var l=e.match(t,a,i);return null!=l&&(n[n.length]={string:l.rendered,score:l.score,index:s,original:r}),n}),[]).sort((function(t,e){var n=e.score-t.score;return n||t.index-e.index}))):[]}}()},7861:(t,e,n)=>{"use strict";var i=n(2535),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(t){return i.isMemo(t)?o:a[t.$$typeof]||r}a[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[i.Memo]=o;var h=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,n,i){if("string"!==typeof n){if(f){var r=d(n);r&&r!==f&&t(e,r,i)}var o=c(n);u&&(o=o.concat(u(n)));for(var a=l(e),m=l(n),g=0;g<o.length;++g){var y=o[g];if(!s[y]&&(!i||!i[y])&&(!m||!m[y])&&(!a||!a[y])){var v=p(n,y);try{h(e,y,v)}catch(_){}}}}return e}},229:(t,e)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,h=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,T=n?Symbol.for("react.scope"):60119;function E(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case c:case u:case s:case a:case o:case d:return t;default:switch(t=t&&t.$$typeof){case h:case p:case g:case m:case l:return t;default:return e}}case r:return e}}}function x(t){return E(t)===u}e.AsyncMode=c,e.ConcurrentMode=u,e.ContextConsumer=h,e.ContextProvider=l,e.Element=i,e.ForwardRef=p,e.Fragment=s,e.Lazy=g,e.Memo=m,e.Portal=r,e.Profiler=a,e.StrictMode=o,e.Suspense=d,e.isAsyncMode=function(t){return x(t)||E(t)===c},e.isConcurrentMode=x,e.isContextConsumer=function(t){return E(t)===h},e.isContextProvider=function(t){return E(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return E(t)===p},e.isFragment=function(t){return E(t)===s},e.isLazy=function(t){return E(t)===g},e.isMemo=function(t){return E(t)===m},e.isPortal=function(t){return E(t)===r},e.isProfiler=function(t){return E(t)===a},e.isStrictMode=function(t){return E(t)===o},e.isSuspense=function(t){return E(t)===d},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===s||t===u||t===a||t===o||t===d||t===f||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===m||t.$$typeof===l||t.$$typeof===h||t.$$typeof===p||t.$$typeof===v||t.$$typeof===_||t.$$typeof===T||t.$$typeof===y)},e.typeOf=E},2535:(t,e,n)=>{"use strict";t.exports=n(229)},936:(t,e,n)=>{var i="Expected a function",r=NaN,s="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,h=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,p="object"==typeof self&&self&&self.Object===Object&&self,d=u||p||Function("return this")(),f=Object.prototype.toString,m=Math.max,g=Math.min,y=function(){return d.Date.now()};function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function _(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&f.call(t)==s}(t))return r;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=l.test(t);return n||h.test(t)?c(t.slice(2),n?2:8):a.test(t)?r:+t}t.exports=function(t,e,n){var r,s,o,a,l,h,c=0,u=!1,p=!1,d=!0;if("function"!=typeof t)throw new TypeError(i);function f(e){var n=r,i=s;return r=s=void 0,c=e,a=t.apply(i,n)}function T(t){var n=t-h;return void 0===h||n>=e||n<0||p&&t-c>=o}function E(){var t=y();if(T(t))return x(t);l=setTimeout(E,function(t){var n=e-(t-h);return p?g(n,o-(t-c)):n}(t))}function x(t){return l=void 0,d&&r?f(t):(r=s=void 0,a)}function b(){var t=y(),n=T(t);if(r=arguments,s=this,h=t,n){if(void 0===l)return function(t){return c=t,l=setTimeout(E,e),u?f(t):a}(h);if(p)return l=setTimeout(E,e),f(h)}return void 0===l&&(l=setTimeout(E,e)),a}return e=_(e)||0,v(n)&&(u=!!n.leading,o=(p="maxWait"in n)?m(_(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),b.cancel=function(){void 0!==l&&clearTimeout(l),c=0,r=h=s=l=void 0},b.flush=function(){return void 0===l?a:x(y())},b}},5056:function(t){t.exports=function(){"use strict";var t,e,n;function i(i,r){if(t)if(e){var s="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk); self.onerror = null;",o={};t(o),n=r(o),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([s],{type:"text/javascript"})))}else e=r;else t=r}return i(["exports"],(function(t){var e="undefined"!=typeof self?self:{},n="2.15.0";let i;const r={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==i){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{i=null!={NODE_ENV:"production",PUBLIC_URL:"/IFCReactApp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDWFdP9aE8vAwyMG1jq6pc0_MHr6ItLk84",REACT_APP_FIREBASE_APP_ID:"1:54427550535:web:56f3c2daa707f1606e8262",REACT_APP_FIREBASE_AUTH_DOMAIN:"ifc-react-app.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"54427550535",REACT_APP_FIREBASE_PROJECT_ID:"ifc-react-app",REACT_APP_FIREBASE_STORAGE_BUCKET:"ifc-react-app.appspot.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoiYmltY2EiLCJhIjoiY2xmMXJ4ZGhrMGJhazN4bGg2YTAwZG5heSJ9.OQdD57WTOQigRXhxpjfaqA"}.API_URL_REGEX?new RegExp({NODE_ENV:"production",PUBLIC_URL:"/IFCReactApp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDWFdP9aE8vAwyMG1jq6pc0_MHr6ItLk84",REACT_APP_FIREBASE_APP_ID:"1:54427550535:web:56f3c2daa707f1606e8262",REACT_APP_FIREBASE_AUTH_DOMAIN:"ifc-react-app.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"54427550535",REACT_APP_FIREBASE_PROJECT_ID:"ifc-react-app",REACT_APP_FIREBASE_STORAGE_BUCKET:"ifc-react-app.appspot.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoiYmltY2EiLCJhIjoiY2xmMXJ4ZGhrMGJhazN4bGg2YTAwZG5heSJ9.OQdD57WTOQigRXhxpjfaqA"}.API_URL_REGEX):t}catch(e){i=t}}return i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!r.API_URL)return null;try{const t=new URL(r.API_URL);return"api.mapbox.cn"===t.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===t.hostname?"https://events.mapbox.com/events/v2":null}catch(t){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},s={supported:!1,testSupport:function(t){!l&&a&&(h?c(t):o=t)}};let o,a,l=!1,h=!1;function c(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a),t.isContextLost())return;s.supported=!0}catch(t){}t.deleteTexture(e),l=!0}e.document&&(a=e.document.createElement("img"),a.onload=function(){o&&c(o),o=null,h=!0},a.onerror=function(){l=!0,o=null},a.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const u="01";function p(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var d=f;function f(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=i}f.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,i=0;i<8;i++){var r=this.sampleCurveX(n)-t;if(Math.abs(r)<e)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=r/s}var o=0,a=1;for(n=t,i=0;i<20&&(r=this.sampleCurveX(n),!(Math.abs(r-t)<e));i++)t>r?o=n:a=n,n=.5*(a-o)+o;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var m=p(d),g=y;function y(t,e){this.x=t,this.y=e}y.prototype={clone:function(){return new y(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),i=Math.sin(t),r=e.y+i*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-i*(this.y-e.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},y.convert=function(t){return t instanceof y?t:Array.isArray(t)?new y(t[0],t[1]):t};var v=p(g);const _=Math.PI/180,T=180/Math.PI;function E(t){return t*_}function x(t){return t*T}const b=[[0,0],[1,0],[1,1],[0,1]];function I(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function w(t,e,n,i){const r=new m(t,e,n,i);return function(t){return r.solve(t)}}const S=w(.25,.1,.25,1);function R(t,e,n){return Math.min(n,Math.max(e,t))}function C(t,e,n){return(n=R((n-t)/(e-t),0,1))*n*(3-2*n)}function A(t,e,n){const i=n-e,r=((t-e)%i+i)%i+e;return r===e?n:r}function D(t,e,n){if(!t.length)return n(null,[]);let i=t.length;const r=new Array(t.length);let s=null;t.forEach(((t,o)=>{e(t,((t,e)=>{t&&(s=t),r[o]=e,0==--i&&n(s,r)}))}))}function O(t){const e=[];for(const n in t)e.push(t[n]);return e}function N(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(const r of n)for(const e in r)t[e]=r[e];return t}let M=1;function P(){return M++}function F(){return function t(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function L(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function k(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function U(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function B(t,e){return-1!==t.indexOf(e,t.length-e.length)}function z(t,e,n){const i={};for(const r in t)i[r]=e.call(n||this,t[r],r,t);return i}function G(t,e,n){const i={};for(const r in t)e.call(n||this,t[r],r,t)&&(i[r]=t[r]);return i}function H(t){return Array.isArray(t)?t.map(H):"object"==typeof t&&t?z(t,H):t}const j={};function V(t){j[t]||("undefined"!=typeof console&&console.warn(t),j[t]=!0)}function W(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function Z(t){let e=0;for(let n,i,r=0,s=t.length,o=s-1;r<s;o=r++)n=t[r],i=t[o],e+=(i.x-n.x)*(n.y+i.y);return e}function Y(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function q(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,n,i,r)=>{const s=i||r;return e[n]=!s||s.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let X=null;function K(t){if(null==X){const e=t.navigator?t.navigator.userAgent:null;X=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return X}function Q(t){try{const n=e[t];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch(t){return!1}}function J(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}const $="mapbox-tiles";let tt,et,nt=500,it=50;function rt(){try{return e.caches}catch(t){}}function st(){rt()&&!tt&&(tt=e.caches.open($))}function ot(t){const e=t.indexOf("?");if(e<0)return t;const n=function(t){const e=t.indexOf("?");return e>0?t.slice(e+1).split("&"):[]}(t),i=n.filter((t=>{const e=t.split("=");return"language"===e[0]||"worldview"===e[0]}));return i.length?"".concat(t.slice(0,e),"?").concat(i.join("&")):t.slice(0,e)}let at=1/0;const lt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(lt);class ht extends Error{constructor(t,e,n){401===e&&Tt(n)&&(t+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(t),this.status=e,this.url=n}toString(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}const ct=Y()?()=>self.worker&&self.worker.referrer:()=>("blob:"===e.location.protocol?e.parent:e).location.href,ut=function(t,n){if(!(/^file:/.test(i=t.url)||/^file:/.test(ct())&&!/^\w+:/.test(i))){if(e.fetch&&e.Request&&e.AbortController&&e.Request.prototype.hasOwnProperty("signal"))return function(t,n){const i=new e.AbortController,r=new e.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:ct(),referrerPolicy:t.referrerPolicy,signal:i.signal});let s=!1,o=!1;const a=(l=r.url).indexOf("sku=")>0&&Tt(l);var l;"json"===t.type&&r.headers.set("Accept","application/json");const h=(i,s,l)=>{if(o)return;if(i&&"SecurityError"!==i.message&&V(i.toString()),s&&l)return c(s);const h=Date.now();e.fetch(r).then((e=>{if(e.ok){const t=a?e.clone():null;return c(e,t,h)}return n(new ht(e.statusText,e.status,t.url))})).catch((e=>{"AbortError"!==e.name&&n(new Error("".concat(e.message," ").concat(t.url)))}))},c=(i,a,l)=>{("arrayBuffer"===t.type?i.arrayBuffer():"json"===t.type?i.json():i.text()).then((t=>{o||(a&&l&&function(t,n,i){if(st(),!tt)return;const r={status:n.status,statusText:n.statusText,headers:new e.Headers};n.headers.forEach(((t,e)=>r.headers.set(e,t)));const s=q(n.headers.get("Cache-Control")||"");if(s["no-store"])return;s["max-age"]&&r.headers.set("Expires",new Date(i+1e3*s["max-age"]).toUTCString());const o=r.headers.get("Expires");o&&(new Date(o).getTime()-i<42e4||function(t,e){if(void 0===et)try{new Response(new ReadableStream),et=!0}catch(t){et=!1}et?e(t.body):t.blob().then(e)}(n,(n=>{const i=new e.Response(n,r);st(),tt&&tt.then((e=>e.put(ot(t.url),i))).catch((t=>V(t.message)))})))}(r,a,l),s=!0,n(null,t,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((t=>{o||n(new Error(t.message))}))};return a?function(t,e){if(st(),!tt)return e(null);const n=ot(t.url);tt.then((t=>{t.match(n).then((i=>{const r=function(t){if(!t)return!1;const e=new Date(t.headers.get("Expires")||0),n=q(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(i);t.delete(n),r&&t.put(n,i.clone()),e(null,i,r)})).catch(e)})).catch(e)}(r,h):h(null,null),{cancel:()=>{o=!0,s||i.abort()}}}(t,n);if(Y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,n,void 0,!0)}var i;return function(t,n){const i=new e.XMLHttpRequest;i.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(i.responseType="arraybuffer");for(const e in t.headers)i.setRequestHeader(e,t.headers[e]);return"json"===t.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===t.credentials,i.onerror=()=>{n(new Error(i.statusText))},i.onload=()=>{if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let e=i.response;if("json"===t.type)try{e=JSON.parse(i.response)}catch(t){return n(t)}n(null,e,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else n(new ht(i.statusText,i.status,t.url))},i.send(t.body),{cancel:()=>i.abort()}}(t,n)},pt=function(t,e){return ut(N(t,{type:"arrayBuffer"}),e)};function dt(t){const n=e.document.createElement("a");return n.href=t,n.protocol===e.document.location.protocol&&n.host===e.document.location.host}const ft="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let mt,gt;mt=[],gt=0;const yt=function(t,n){if(s.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),gt>=r.MAX_PARALLEL_IMAGE_REQUESTS){const e={requestParameters:t,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return mt.push(e),e}gt++;let i=!1;const o=()=>{if(!i)for(i=!0,gt--;mt.length&&gt<r.MAX_PARALLEL_IMAGE_REQUESTS;){const t=mt.shift(),{requestParameters:e,callback:n,cancelled:i}=t;i||(t.cancel=yt(e,n).cancel)}},a=pt(t,((t,i,r,s)=>{o(),t?n(t):i&&(e.createImageBitmap?function(t,n){const i=new e.Blob([new Uint8Array(t)],{type:"image/png"});e.createImageBitmap(i).then((t=>{n(null,t)})).catch((t=>{n(new Error("Could not load image because of ".concat(t.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(i,((t,e)=>n(t,e,r,s))):function(t,n){const i=new e.Image,r=e.URL;i.onload=()=>{n(null,i),r.revokeObjectURL(i.src),i.onload=null,e.requestAnimationFrame((()=>{i.src=ft}))},i.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const s=new e.Blob([new Uint8Array(t)],{type:"image/png"});i.src=t.byteLength?r.createObjectURL(s):ft}(i,((t,e)=>n(t,e,r,s))))}));return{cancel:()=>{a.cancel(),o()}}},vt="NO_ACCESS_TOKEN";function _t(t){return 0===t.indexOf("mapbox:")}function Tt(t){return r.API_URL_REGEX.test(t)}function Et(t){return r.API_CDN_URL_REGEX.test(t)}function xt(t){return r.API_STYLE_REGEX.test(t)&&!bt(t)}function bt(t){return r.API_SPRITE_REGEX.test(t)}const It=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function wt(t){const e=t.match(It);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function St(t){const e=t.params.length?"?".concat(t.params.join("&")):"";return"".concat(t.protocol,"://").concat(t.authority).concat(t.path).concat(e)}const Rt="mapbox.eventData";function Ct(t){if(!t)return null;const n=t.split(".");if(!n||3!==n.length)return null;try{return JSON.parse(decodeURIComponent(e.atob(n[1]).split("").map((t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(t){return null}}class At{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const n=Ct(r.ACCESS_TOKEN);let i="";return i=n&&n.u?e.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,((t,e)=>String.fromCharCode(Number("0x"+e))))):r.ACCESS_TOKEN||"",t?"".concat(Rt,".").concat(t,":").concat(i):"".concat(Rt,":").concat(i)}fetchEventData(){const t=Q("localStorage"),n=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{const t=e.localStorage.getItem(n);t&&(this.eventData=JSON.parse(t));const r=e.localStorage.getItem(i);r&&(this.anonId=r)}catch(t){V("Unable to read from LocalStorage")}}saveEventData(){const t=Q("localStorage"),n=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{e.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&e.localStorage.setItem(n,JSON.stringify(this.eventData))}catch(t){V("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,e,n,i){if(!r.EVENTS_URL)return;const s=wt(r.EVENTS_URL);s.params.push("access_token=".concat(i||r.ACCESS_TOKEN||""));const o={event:this.type,created:new Date(t).toISOString()},a=e?N(o,e):o,l={url:St(s),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=function(t,e){return ut(N(t,{method:"POST"}),e)}(l,(t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(i)}))}queueRequest(t,e){this.queue.push(t),this.processRequests(e)}}const Dt=new class extends At{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){r.EVENTS_URL&&r.ACCESS_TOKEN&&Array.isArray(t)&&t.some((t=>_t(t)||Tt(t)))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=Ct(r.ACCESS_TOKEN),i=e?e.u:r.ACCESS_TOKEN;let s=i!==this.eventData.tokenU;k(this.anonId)||(this.anonId=F(),s=!0);const o=this.queue.shift();if(this.eventData.lastSuccess){const t=new Date(this.eventData.lastSuccess),e=new Date(o),n=(o-this.eventData.lastSuccess)/864e5;s=s||n>=1||n<-1||t.getDate()!==e.getDate()}else s=!0;s?this.postEvent(o,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:u,"enabled.telemetry":!1,userId:this.anonId},(t=>{t||(this.eventData.lastSuccess=o,this.eventData.tokenU=i)}),t):this.processRequests()}},Ot=Dt.postTurnstileEvent.bind(Dt),Nt=new class extends At{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,n,i){this.skuToken=e,this.errorCb=i,r.EVENTS_URL&&(n||r.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(vt)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:i}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),k(this.anonId)||(this.anonId=F()),this.postEvent(i,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:u,skuToken:this.skuToken,userId:this.anonId},(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t))}},Mt=Nt.postMapLoadEvent.bind(Nt),Pt=new class extends At{constructor(){super("gljs.performance")}postPerformanceEvent(t,e){r.EVENTS_URL&&(t||r.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},t)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:i,performanceData:r}=this.queue.shift(),s=function(t){const i=e.performance.getEntriesByType("resource"),r=e.performance.getEntriesByType("mark"),s=function(t){const e={};if(t)for(const n in t)if("other"!==n)for(const i of t[n]){const t="".concat(n,"ResolveRangeMin"),r="".concat(n,"ResolveRangeMax"),s="".concat(n,"RequestCount"),o="".concat(n,"RequestCachedCount");e[t]=Math.min(e[t]||1/0,i.startTime),e[r]=Math.max(e[r]||-1/0,i.responseEnd);const a=t=>{void 0===e[t]&&(e[t]=0),++e[t]};void 0!==i.transferSize&&0===i.transferSize&&a(o),a(s)}return e}(function(t,e){const n={};if(t)for(const i of t){const t=e(i);void 0===n[t]&&(n[t]=[]),n[t].push(i)}return n}(i,Gt)),o=e.devicePixelRatio,a=e.navigator.connection||e.navigator.mozConnection||e.navigator.webkitConnection,l={counters:[],metadata:[],attributes:[]},h=(t,e,n)=>{null!=n&&t.push({name:e,value:n.toString()})};for(const e in s)h(l.counters,e,s[e]);if(t.interactionRange[0]!==1/0&&t.interactionRange[1]!==-1/0&&(h(l.counters,"interactionRangeMin",t.interactionRange[0]),h(l.counters,"interactionRangeMax",t.interactionRange[1])),r)for(const e of Object.keys(Bt)){const t=Bt[e],n=r.find((e=>e.name===t));n&&h(l.counters,t,n.startTime)}return h(l.counters,"visibilityHidden",t.visibilityHidden),h(l.attributes,"style",function(t){if(t)for(const e of t){const t=e.name.split("?")[0];if(xt(t)){const e=t.split("/").slice(-2);if(2===e.length)return"mapbox://styles/".concat(e[0],"/").concat(e[1])}}}(i)),h(l.attributes,"terrainEnabled",t.terrainEnabled?"true":"false"),h(l.attributes,"fogEnabled",t.fogEnabled?"true":"false"),h(l.attributes,"projection",t.projection),h(l.attributes,"zoom",t.zoom),h(l.metadata,"devicePixelRatio",o),h(l.metadata,"connectionEffectiveType",a?a.effectiveType:void 0),h(l.metadata,"navigatorUserAgent",e.navigator.userAgent),h(l.metadata,"screenWidth",e.screen.width),h(l.metadata,"screenHeight",e.screen.height),h(l.metadata,"windowWidth",e.innerWidth),h(l.metadata,"windowHeight",e.innerHeight),h(l.metadata,"mapWidth",t.width/o),h(l.metadata,"mapHeight",t.height/o),h(l.metadata,"webglRenderer",t.renderer),h(l.metadata,"webglVendor",t.vendor),h(l.metadata,"sdkVersion",n),h(l.metadata,"sdkIdentifier","mapbox-gl-js"),l}(r);for(const e of s.metadata);for(const e of s.counters);for(const e of s.attributes);this.postEvent(i,s,(()=>{}),t)}},Ft=Pt.postPerformanceEvent.bind(Pt),Lt=new class extends At{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,n,i){if(!r.API_URL||!r.SESSION_PATH)return;const s=wt(r.API_URL+r.SESSION_PATH);s.params.push("sku=".concat(e||"")),s.params.push("access_token=".concat(i||r.ACCESS_TOKEN||""));const o={url:St(s),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(t,e){return ut(N(t,{method:"GET"}),e)}(o,(t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(i)}))}getSessionAPI(t,e,n,i){this.skuToken=e,this.errorCb=i,r.SESSION_PATH&&r.API_URL&&(n||r.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(vt)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||this.getSession(n,this.skuToken,(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t)}},kt=Lt.getSessionAPI.bind(Lt),Ut=new Set,Bt={create:"create",load:"load",fullLoad:"fullLoad"},zt={mark(t){e.performance.mark(t)},measure(t,n,i){e.performance.measure(t,n,i)}};function Gt(t){const e=t.name.split("?")[0];return Et(e)&&e.includes("mapbox-gl.js")?"javascript":Et(e)&&e.includes("mapbox-gl.css")?"css":function(t){return r.API_FONTS_REGEX.test(t)}(e)?"fontRange":bt(e)?"sprite":xt(e)?"style":function(t){return r.API_TILEJSON_REGEX.test(t)}(e)?"tilejson":"other"}const Ht=e.performance;function jt(t){const e=t?t.url.toString():void 0;return Ht.getEntriesByName(e)}let Vt,Wt,Zt,Yt;const qt={now:()=>void 0!==Zt?Zt:e.performance.now(),setNow(t){Zt=t},restoreNow(){Zt=void 0},frame(t){const n=e.requestAnimationFrame(t);return{cancel:()=>e.cancelAnimationFrame(n)}},getImageData(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:i,height:r}=t;Yt||(Yt=e.document.createElement("canvas"));const s=Yt.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return(i>Yt.width||r>Yt.height)&&(Yt.width=i,Yt.height=r),s.clearRect(-n,-n,i+2*n,r+2*n),s.drawImage(t,0,0,i,r),s.getImageData(-n,-n,i+2*n,r+2*n)},resolveURL:t=>(Vt||(Vt=e.document.createElement("a")),Vt.href=t,Vt.href),get devicePixelRatio(){return e.devicePixelRatio},get prefersReducedMotion(){return!!e.matchMedia&&(null==Wt&&(Wt=e.matchMedia("(prefers-reduced-motion: reduce)")),Wt.matches)}};function Xt(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function Kt(t,e,n){if(n&&n[t]){const i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}class Qt{constructor(t){N(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.type=t}}class Jt extends Qt{constructor(t){super("error",N({error:t},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}}class $t{on(t,e){return this._listeners=this._listeners||{},Xt(t,e,this._listeners),this}off(t,e){return Kt(t,e,this._listeners),Kt(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},Xt(t,e,this._oneTimeListeners),this):new Promise((e=>this.once(t,e)))}fire(t,e){"string"==typeof t&&(t=new Qt(t,e||{}));const n=t.type;if(this.listens(n)){t.target=this;const e=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of e)n.call(this,t);const i=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const s of i)Kt(n,s,this._oneTimeListeners),s.call(this,t);const r=this._eventedParent;r&&(N(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),r.fire(t))}else t instanceof Jt&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var te=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ee(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(const r of n)for(const e in r)t[e]=r[e];return t}function ne(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function ie(t){if(Array.isArray(t))return t.map(ie);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=ie(t[n]);return e}return ne(t)}class re extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}var se=re;class oe{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.parent=t,this.bindings={};for(const[n,i]of e)this.bindings[n]=i}concat(t){return new oe(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error("".concat(t," not found in scope."))}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var ae=oe;const le={kind:"null"},he={kind:"number"},ce={kind:"string"},ue={kind:"boolean"},pe={kind:"color"},de={kind:"object"},fe={kind:"value"},me={kind:"collator"},ge={kind:"formatted"},ye={kind:"resolvedImage"};function ve(t,e){return{kind:"array",itemType:t,N:e}}function _e(t){if("array"===t.kind){const e=_e(t.itemType);return"number"==typeof t.N?"array<".concat(e,", ").concat(t.N,">"):"value"===t.itemType.kind?"array":"array<".concat(e,">")}return t.kind}const Te=[le,he,ce,ue,pe,ge,de,ve(fe),ye];function Ee(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Ee(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of Te)if(!Ee(t,e))return null}return"Expected ".concat(_e(t)," but found ").concat(_e(e)," instead.")}function xe(t,e){return e.some((e=>e.kind===t.kind))}function be(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var Ie,we={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Se(t){return(t=Math.round(t))<0?0:t>255?255:t}function Re(t){return Se("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function Ce(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function Ae(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{Ie={}.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in we)return we[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var i=n.indexOf("("),r=n.indexOf(")");if(-1!==i&&r+1===n.length){var s=n.substr(0,i),o=n.substr(i+1,r-(i+1)).split(","),a=1;switch(s){case"rgba":if(4!==o.length)return null;a=Ce(o.pop());case"rgb":return 3!==o.length?null:[Re(o[0]),Re(o[1]),Re(o[2]),a];case"hsla":if(4!==o.length)return null;a=Ce(o.pop());case"hsl":if(3!==o.length)return null;var l=(parseFloat(o[0])%360+360)%360/360,h=Ce(o[1]),c=Ce(o[2]),u=c<=.5?c*(h+1):c+h-c*h,p=2*c-u;return[Se(255*Ae(p,u,l+1/3)),Se(255*Ae(p,u,l)),Se(255*Ae(p,u,l-1/3)),a];default:return null}}return null}}catch(t){}class De{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=t,this.g=e,this.b=n,this.a=i}static parse(t){if(!t)return;if(t instanceof De)return t;if("string"!=typeof t)return;const e=Ie(t);return e?new De(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,n,i]=this.toArray();return"rgba(".concat(Math.round(t),",").concat(Math.round(e),",").concat(Math.round(n),",").concat(i,")")}toArray(){const{r:t,g:e,b:n,a:i}=this;return 0===i?[0,0,0,0]:[255*t/i,255*e/i,255*n/i,i]}toArray01(){const{r:t,g:e,b:n,a:i}=this;return 0===i?[0,0,0,0]:[t/i,e/i,n/i,i]}toArray01PremultipliedAlpha(){const{r:t,g:e,b:n,a:i}=this;return[t,e,n,i]}}De.black=new De(0,0,0,1),De.white=new De(1,1,1,1),De.transparent=new De(0,0,0,0),De.red=new De(1,0,0,1),De.blue=new De(0,0,1,1);var Oe=De;class Ne{constructor(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Me{constructor(t,e,n,i,r){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=n,this.fontStack=i,this.textColor=r}}class Pe{constructor(t){this.sections=t}static fromString(t){return new Pe([new Me(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof Pe?t:Pe.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const n={};e.fontStack&&(n["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(n["font-scale"]=e.scale),e.textColor&&(n["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(n)}return t}}class Fe{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Fe({name:t,available:!1}):null}serialize(){return["image",this.name]}}function Le(t,e,n,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value [".concat([t,e,n,i].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof i?[t,e,n,i]:[t,e,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function ke(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Oe)return!0;if(t instanceof Ne)return!0;if(t instanceof Pe)return!0;if(t instanceof Fe)return!0;if(Array.isArray(t)){for(const e of t)if(!ke(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!ke(t[e]))return!1;return!0}return!1}function Ue(t){if(null===t)return le;if("string"==typeof t)return ce;if("boolean"==typeof t)return ue;if("number"==typeof t)return he;if(t instanceof Oe)return pe;if(t instanceof Ne)return me;if(t instanceof Pe)return ge;if(t instanceof Fe)return ye;if(Array.isArray(t)){const e=t.length;let n;for(const i of t){const t=Ue(i);if(n){if(n===t)continue;n=fe;break}n=t}return ve(n||fe,e)}return de}function Be(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Oe||t instanceof Pe||t instanceof Fe?t.toString():JSON.stringify(t)}class ze{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!ke(t[1]))return e.error("invalid value");const n=t[1];let i=Ue(n);const r=e.expectedType;return"array"!==i.kind||0!==i.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(i=r),new ze(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Oe?["rgba"].concat(this.value.toArray()):this.value instanceof Pe?this.value.serialize():this.value}}var Ge=ze,He=class{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}};const je={string:ce,number:he,boolean:ue,object:de};class Ve{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n,i=1;const r=t[0];if("array"===r){let r,s;if(t.length>2){const n=t[1];if("string"!=typeof n||!(n in je)||"object"===n)return e.error('The item type argument of "array" must be one of string, number, boolean',1);r=je[n],i++}else r=fe;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);s=t[2],i++}n=ve(r,s)}else n=je[r];const s=[];for(;i<t.length;i++){const n=e.parse(t[i],i,fe);if(!n)return null;s.push(n)}return new Ve(n,s)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!Ee(this.type,Ue(n)))return n;if(e===this.args.length-1)throw new He("Expected value to be of type ".concat(_e(this.type),", but found ").concat(_e(Ue(n))," instead."))}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);const i=t.N;("number"==typeof i||this.args.length>1)&&e.push(i)}}return e.concat(this.args.map((t=>t.serialize())))}}var We=Ve;class Ze{constructor(t){this.type=ge,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const i=[];let r=!1;for(let s=1;s<=t.length-1;++s){const n=t[s];if(r&&"object"==typeof n&&!Array.isArray(n)){r=!1;let t=null;if(n["font-scale"]&&(t=e.parse(n["font-scale"],1,he),!t))return null;let s=null;if(n["text-font"]&&(s=e.parse(n["text-font"],1,ve(ce)),!s))return null;let o=null;if(n["text-color"]&&(o=e.parse(n["text-color"],1,pe),!o))return null;const a=i[i.length-1];a.scale=t,a.font=s,a.textColor=o}else{const n=e.parse(t[s],1,fe);if(!n)return null;const o=n.type.kind;if("string"!==o&&"value"!==o&&"null"!==o&&"resolvedImage"!==o)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,i.push({content:n,scale:null,font:null,textColor:null})}}return new Ze(i)}evaluate(t){return new Pe(this.sections.map((e=>{const n=e.content.evaluate(t);return Ue(n)===ye?new Me("",n,null,null,null):new Me(Be(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const n={};e.scale&&(n["font-scale"]=e.scale.serialize()),e.font&&(n["text-font"]=e.font.serialize()),e.textColor&&(n["text-color"]=e.textColor.serialize()),t.push(n)}return t}}class Ye{constructor(t){this.type=ye,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,ce);return n?new Ye(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=Fe.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const qe={"to-boolean":ue,"to-color":pe,"to-number":he,"to-string":ce};class Xe{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const i=qe[n],r=[];for(let s=1;s<t.length;s++){const n=e.parse(t[s],s,fe);if(!n)return null;r.push(n)}return new Xe(i,r)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,n;for(const i of this.args){if(e=i.evaluate(t),n=null,e instanceof Oe)return e;if("string"==typeof e){const n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?"Invalid rbga value ".concat(JSON.stringify(e),": expected an array containing either three or four numeric values."):Le(e[0],e[1],e[2],e[3]),!n))return new Oe(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new He(n||"Could not parse color from value '".concat("string"==typeof e?e:String(JSON.stringify(e)),"'"))}if("number"===this.type.kind){let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const i=Number(e);if(!isNaN(i))return i}throw new He("Could not convert ".concat(JSON.stringify(e)," to number."))}return"formatted"===this.type.kind?Pe.fromString(Be(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Fe.fromString(Be(this.args[0].evaluate(t))):Be(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new Ze([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ye(this.args[0]).serialize();const t=["to-".concat(this.type.kind)];return this.eachChild((e=>{t.push(e.serialize())})),t}}var Ke=Xe;const Qe=["Unknown","Point","LineString","Polygon"];var Je=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Qe[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:n,y:i}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*e-t[0])+this.featureDistanceData.bearing[1]*(i*e-t[1])}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Oe.parse(t)),e}};class $e{constructor(t,e,n,i){this.name=t,this.type=e,this._evaluate=n,this.args=i}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const n=t[0],i=$e.definitions[n];if(!i)return e.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0);const r=Array.isArray(i)?i[0]:i.type,s=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=s.filter((e=>{let[n]=e;return!Array.isArray(n)||n.length===t.length-1}));let a=null;for(const[l,h]of o){a=new Rn(e.registry,e.path,null,e.scope);const i=[];let s=!1;for(let e=1;e<t.length;e++){const n=t[e],r=Array.isArray(l)?l[e-1]:l.type,o=a.parse(n,1+i.length,r);if(!o){s=!0;break}i.push(o)}if(!s)if(Array.isArray(l)&&l.length!==i.length)a.error("Expected ".concat(l.length," arguments, but found ").concat(i.length," instead."));else{for(let t=0;t<i.length;t++){const e=Array.isArray(l)?l[t]:l.type,n=i[t];a.concat(t+1).checkSubtype(e,n.type)}if(0===a.errors.length)return new $e(n,r,h,i)}}if(1===o.length)e.errors.push(...a.errors);else{const n=(o.length?o:s).map((t=>{let[e]=t;return n=e,Array.isArray(n)?"(".concat(n.map(_e).join(", "),")"):"(".concat(_e(n.type),"...)");var n})).join(" | "),i=[];for(let r=1;r<t.length;r++){const n=e.parse(t[r],1+i.length);if(!n)return null;i.push(_e(n.type))}e.error("Expected arguments of type ".concat(n,", but found (").concat(i.join(", "),") instead."))}return null}static register(t,e){$e.definitions=e;for(const n in e)t[n]=$e}}var tn=$e;class en{constructor(t,e,n){this.type=me,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const i=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,ue);if(!i)return null;const r=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,ue);if(!r)return null;let s=null;return n.locale&&(s=e.parse(n.locale,1,ce),!s)?null:new en(i,r,s)}evaluate(t){return new Ne(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const nn=8192;function rn(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function sn(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function on(t,e){const n=(180+t[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,r=Math.pow(2,e.z);return[Math.round(n*r*nn),Math.round(i*r*nn)]}function an(t,e,n){const i=t[0]-e[0],r=t[1]-e[1],s=t[0]-n[0],o=t[1]-n[1];return i*o-s*r==0&&i*s<=0&&r*o<=0}function ln(t,e){let n=!1;for(let o=0,a=e.length;o<a;o++){const a=e[o];for(let e=0,o=a.length;e<o-1;e++){if(an(t,a[e],a[e+1]))return!1;(r=a[e])[1]>(i=t)[1]!=(s=a[e+1])[1]>i[1]&&i[0]<(s[0]-r[0])*(i[1]-r[1])/(s[1]-r[1])+r[0]&&(n=!n)}}var i,r,s;return n}function hn(t,e){for(let n=0;n<e.length;n++)if(ln(t,e[n]))return!0;return!1}function cn(t,e,n,i){const r=i[0]-n[0],s=i[1]-n[1],o=(t[0]-n[0])*s-r*(t[1]-n[1]),a=(e[0]-n[0])*s-r*(e[1]-n[1]);return o>0&&a<0||o<0&&a>0}function un(t,e,n){for(const h of n)for(let n=0;n<h.length-1;++n)if(0!=(a=[(o=h[n+1])[0]-(s=h[n])[0],o[1]-s[1]])[0]*(l=[(r=e)[0]-(i=t)[0],r[1]-i[1]])[1]-a[1]*l[0]&&cn(i,r,s,o)&&cn(s,o,i,r))return!0;var i,r,s,o,a,l;return!1}function pn(t,e){for(let n=0;n<t.length;++n)if(!ln(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(un(t[n],t[n+1],e))return!1;return!0}function dn(t,e){for(let n=0;n<e.length;n++)if(pn(t,e[n]))return!0;return!1}function fn(t,e,n){const i=[];for(let r=0;r<t.length;r++){const s=[];for(let i=0;i<t[r].length;i++){const o=on(t[r][i],n);rn(e,o),s.push(o)}i.push(s)}return i}function mn(t,e,n){const i=[];for(let r=0;r<t.length;r++){const s=fn(t[r],e,n);i.push(s)}return i}function gn(t,e,n,i){if(t[0]<n[0]||t[0]>n[2]){const e=.5*i;let r=t[0]-n[0]>e?-i:n[0]-t[0]>e?i:0;0===r&&(r=t[0]-n[2]>e?-i:n[2]-t[0]>e?i:0),t[0]+=r}rn(e,t)}function yn(t,e,n,i){const r=Math.pow(2,i.z)*nn,s=[i.x*nn,i.y*nn],o=[];if(!t)return o;for(const a of t)for(const t of a){const i=[t.x+s[0],t.y+s[1]];gn(i,e,n,r),o.push(i)}return o}function vn(t,e,n,i){const r=Math.pow(2,i.z)*nn,s=[i.x*nn,i.y*nn],o=[];if(!t)return o;for(const l of t){const t=[];for(const n of l){const i=[n.x+s[0],n.y+s[1]];rn(e,i),t.push(i)}o.push(t)}if(e[2]-e[0]<=r/2){(a=e)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(const t of o)for(const i of t)gn(i,e,n,r)}var a;return o}class _n{constructor(t,e){this.type=ue,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(ke(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const n=e.features[t].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new _n(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new _n(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new _n(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if(!r)return!1;if("Polygon"===e.type){const s=fn(e.coordinates,i,r),o=yn(t.geometry(),n,i,r);if(!sn(n,i))return!1;for(const t of o)if(!ln(t,s))return!1}if("MultiPolygon"===e.type){const s=mn(e.coordinates,i,r),o=yn(t.geometry(),n,i,r);if(!sn(n,i))return!1;for(const t of o)if(!hn(t,s))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if(!r)return!1;if("Polygon"===e.type){const s=fn(e.coordinates,i,r),o=vn(t.geometry(),n,i,r);if(!sn(n,i))return!1;for(const t of o)if(!pn(t,s))return!1}if("MultiPolygon"===e.type){const s=mn(e.coordinates,i,r),o=vn(t.geometry(),n,i,r);if(!sn(n,i))return!1;for(const t of o)if(!dn(t,s))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Tn=_n;function En(t){if(t instanceof tn){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Tn)return!1;let e=!0;return t.eachChild((t=>{e&&!En(t)&&(e=!1)})),e}function xn(t){if(t instanceof tn&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!xn(t)&&(e=!1)})),e}function bn(t,e){if(t instanceof tn&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild((t=>{n&&!bn(t,e)&&(n=!1)})),n}class In{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new In(n,e.scope.get(n)):e.error('Unknown variable "'.concat(n,'". Make sure "').concat(n,'" has been bound in an enclosing "let" expression before using it.'),1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var wn=In;class Sn{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ae,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this.registry=t,this.path=e,this.key=e.map((t=>"[".concat(t,"]"))).join(""),this.scope=i,this.errors=r,this.expectedType=n}parse(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e?this.concat(e,n,i)._parse(t,r):this._parse(t,r)}_parse(t,e){function n(t,e,n){return"assert"===n?new We(e,[t]):"coerce"===n?new Ke(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=t[0];if("string"!=typeof i)return this.error("Expression name must be a string, but found ".concat(typeof i,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;const r=this.registry[i];if(r){let i=r.parse(t,this);if(!i)return null;if(this.expectedType){const t=this.expectedType,r=i.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==r.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==r.kind&&"string"!==r.kind){if(this.checkSubtype(t,r))return null}else i=n(i,t,e.typeAnnotation||"coerce");else i=n(i,t,e.typeAnnotation||"assert")}if(!(i instanceof Ge)&&"resolvedImage"!==i.type.kind&&Cn(i)){const e=new Je;try{i=new Ge(i.type,i.evaluate(e))}catch(t){return this.error(t.message),null}}return i}return this.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof t," instead."))}concat(t,e,n){const i="number"==typeof t?this.path.concat(t):this.path,r=n?this.scope.concat(n):this.scope;return new Sn(this.registry,i,e||null,r,this.errors)}error(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r="".concat(this.key).concat(n.map((t=>"[".concat(t,"]"))).join(""));this.errors.push(new se(r,t))}checkSubtype(t,e){const n=Ee(t,e);return n&&this.error(n),n}}var Rn=Sn;function Cn(t){if(t instanceof wn)return Cn(t.boundExpression);if(t instanceof tn&&"error"===t.name)return!1;if(t instanceof en)return!1;if(t instanceof Tn)return!1;const e=t instanceof Ke||t instanceof We;let n=!0;return t.eachChild((t=>{n=e?n&&Cn(t):n&&t instanceof Ge})),!!n&&En(t)&&bn(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function An(t,e){const n=t.length-1;let i,r,s=0,o=n,a=0;for(;s<=o;)if(a=Math.floor((s+o)/2),i=t[a],r=t[a+1],i<=e){if(a===n||e<r)return a;s=a+1}else{if(!(i>e))throw new He("Input is not a number.");o=a-1}return 0}class Dn{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[i,r]of n)this.labels.push(i),this.outputs.push(r)}static parse(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,he);if(!n)return null;const i=[];let r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(let s=1;s<t.length;s+=2){const n=1===s?-1/0:t[s],o=t[s+1],a=s,l=s+1;if("number"!=typeof n)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(i.length&&i[i.length-1][0]>=n)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);const h=e.parse(o,l,r);if(!h)return null;r=r||h.type,i.push([n,h])}return new Dn(r,n,i)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);const r=e.length;return i>=e[r-1]?n[r-1].evaluate(t):n[An(e,i)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var On=Dn;function Nn(t,e,n){return t*(1-n)+e*n}var Mn=Object.freeze({__proto__:null,array:function(t,e,n){return t.map(((t,i)=>Nn(t,e[i],n)))},color:function(t,e,n){return new Oe(Nn(t.r,e.r,n),Nn(t.g,e.g,n),Nn(t.b,e.b,n),Nn(t.a,e.a,n))},number:Nn});const Pn=.95047,Fn=1.08883,Ln=4/29,kn=6/29,Un=3*kn*kn,Bn=kn*kn*kn,zn=Math.PI/180,Gn=180/Math.PI;function Hn(t){return t>Bn?Math.pow(t,1/3):t/Un+Ln}function jn(t){return t>kn?t*t*t:Un*(t-Ln)}function Vn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Wn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Zn(t){const e=Wn(t.r),n=Wn(t.g),i=Wn(t.b),r=Hn((.4124564*e+.3575761*n+.1804375*i)/Pn),s=Hn((.2126729*e+.7151522*n+.072175*i)/1);return{l:116*s-16,a:500*(r-s),b:200*(s-Hn((.0193339*e+.119192*n+.9503041*i)/Fn)),alpha:t.a}}function Yn(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=1*jn(e),n=Pn*jn(n),i=Fn*jn(i),new Oe(Vn(3.2404542*n-1.5371385*e-.4985314*i),Vn(-.969266*n+1.8760108*e+.041556*i),Vn(.0556434*n-.2040259*e+1.0572252*i),t.alpha)}function qn(t,e,n){const i=e-t;return t+n*(i>180||i<-180?i-360*Math.round(i/360):i)}const Xn={forward:Zn,reverse:Yn,interpolate:function(t,e,n){return{l:Nn(t.l,e.l,n),a:Nn(t.a,e.a,n),b:Nn(t.b,e.b,n),alpha:Nn(t.alpha,e.alpha,n)}}},Kn={forward:function(t){const{l:e,a:n,b:i}=Zn(t),r=Math.atan2(i,n)*Gn;return{h:r<0?r+360:r,c:Math.sqrt(n*n+i*i),l:e,alpha:t.a}},reverse:function(t){const e=t.h*zn,n=t.c;return Yn({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:qn(t.h,e.h,n),c:Nn(t.c,e.c,n),l:Nn(t.l,e.l,n),alpha:Nn(t.alpha,e.alpha,n)}}};var Qn=Object.freeze({__proto__:null,hcl:Kn,lab:Xn});class Jn{constructor(t,e,n,i,r){this.type=t,this.operator=e,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(const[s,o]of r)this.labels.push(s),this.outputs.push(o)}static interpolationFactor(t,e,n,i){let r=0;if("exponential"===t.name)r=$n(e,t.base,n,i);else if("linear"===t.name)r=$n(e,1,n,i);else if("cubic-bezier"===t.name){const s=t.controlPoints;r=new m(s[0],s[1],s[2],s[3]).solve($n(e,1,n,i))}return r}static parse(t,e){let[n,i,r,...s]=t;if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){const t=i[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:t}}else{if("cubic-bezier"!==i[0])return e.error("Unknown interpolation type ".concat(String(i[0])),1,0);{const t=i.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(r=e.parse(r,2,he),!r)return null;const o=[];let a=null;"interpolate-hcl"===n||"interpolate-lab"===n?a=pe:e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(let l=0;l<s.length;l+=2){const t=s[l],n=s[l+1],i=l+3,r=l+4;if("number"!=typeof t)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(o.length&&o[o.length-1][0]>=t)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const h=e.parse(n,r,a);if(!h)return null;a=a||h.type,o.push([t,h])}return"number"===a.kind||"color"===a.kind||"array"===a.kind&&"number"===a.itemType.kind&&"number"==typeof a.N?new Jn(a,n,i,r,o):e.error("Type ".concat(_e(a)," is not interpolatable."))}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);const r=e.length;if(i>=e[r-1])return n[r-1].evaluate(t);const s=An(e,i),o=Jn.interpolationFactor(this.interpolation,i,e[s],e[s+1]),a=n[s].evaluate(t),l=n[s+1].evaluate(t);return"interpolate"===this.operator?Mn[this.type.kind.toLowerCase()](a,l,o):"interpolate-hcl"===this.operator?Kn.reverse(Kn.interpolate(Kn.forward(a),Kn.forward(l),o)):Xn.reverse(Xn.interpolate(Xn.forward(a),Xn.forward(l),o))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e}}function $n(t,e,n,i){const r=i-n,s=t-n;return 0===r?0:1===e?s/r:(Math.pow(e,s)-1)/(Math.pow(e,r)-1)}var ti=Jn;class ei{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const i=e.expectedType;i&&"value"!==i.kind&&(n=i);const r=[];for(const o of t.slice(1)){const t=e.parse(o,1+r.length,n,void 0,{typeAnnotation:"omit"});if(!t)return null;n=n||t.type,r.push(t)}const s=i&&r.some((t=>Ee(i,t.type)));return new ei(s?fe:n,r)}evaluate(t){let e,n=null,i=0;for(const r of this.args){if(i++,n=r.evaluate(t),n&&n instanceof Fe&&!n.available&&(e||(e=n),n=null,i===this.args.length))return e;if(null!==n)break}return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}var ni=ei;class ii{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));const n=[];for(let r=1;r<t.length-1;r+=2){const i=t[r];if("string"!=typeof i)return e.error("Expected string, but found ".concat(typeof i," instead."),r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);const s=e.parse(t[r+1],r+1);if(!s)return null;n.push([i,s])}const i=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return i?new ii(n,i):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,n]of this.bindings)t.push(e,n.serialize());return t.push(this.result.serialize()),t}}var ri=ii;class si{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));const n=e.parse(t[1],1,he),i=e.parse(t[2],2,ve(e.expectedType||fe));return n&&i?new si(i.type.itemType,n,i):null}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new He("Array index out of bounds: ".concat(e," < 0."));if(e>=n.length)throw new He("Array index out of bounds: ".concat(e," > ").concat(n.length-1,"."));if(e!==Math.floor(e))throw new He("Array index must be an integer, but found ".concat(e," instead."));return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var oi=si;class ai{constructor(t,e){this.type=ue,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));const n=e.parse(t[1],1,fe),i=e.parse(t[2],2,fe);return n&&i?xe(n.type,[ue,ce,he,le,fe])?new ai(n,i):e.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(_e(n.type)," instead")):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(null==n)return!1;if(!be(e,["boolean","string","number","null"]))throw new He("Expected first argument to be of type boolean, string, number or null, but found ".concat(_e(Ue(e))," instead."));if(!be(n,["string","array"]))throw new He("Expected second argument to be of type array or string, but found ".concat(_e(Ue(n))," instead."));return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var li=ai;class hi{constructor(t,e,n){this.type=he,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));const n=e.parse(t[1],1,fe),i=e.parse(t[2],2,fe);if(!n||!i)return null;if(!xe(n.type,[ue,ce,he,le,fe]))return e.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(_e(n.type)," instead"));if(4===t.length){const r=e.parse(t[3],3,he);return r?new hi(n,i,r):null}return new hi(n,i)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!be(e,["boolean","string","number","null"]))throw new He("Expected first argument to be of type boolean, string, number or null, but found ".concat(_e(Ue(e))," instead."));if(!be(n,["string","array"]))throw new He("Expected second argument to be of type array or string, but found ".concat(_e(Ue(n))," instead."));if(this.fromIndex){const i=this.fromIndex.evaluate(t);return n.indexOf(e,i)}return n.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var ci=hi;class ui{constructor(t,e,n,i,r,s){this.inputType=t,this.type=e,this.input=n,this.cases=i,this.outputs=r,this.otherwise=s}static parse(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const r={},s=[];for(let l=2;l<t.length-1;l+=2){let o=t[l];const a=t[l+1];Array.isArray(o)||(o=[o]);const h=e.concat(l);if(0===o.length)return h.error("Expected at least one branch label.");for(const t of o){if("number"!=typeof t&&"string"!=typeof t)return h.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return h.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof t&&Math.floor(t)!==t)return h.error("Numeric branch labels must be integer values.");if(n){if(h.checkSubtype(n,Ue(t)))return null}else n=Ue(t);if(void 0!==r[String(t)])return h.error("Branch labels must be unique.");r[String(t)]=s.length}const c=e.parse(a,l,i);if(!c)return null;i=i||c.type,s.push(c)}const o=e.parse(t[1],1,fe);if(!o)return null;const a=e.parse(t[t.length-1],t.length-1,i);return a?"value"!==o.type.kind&&e.concat(1).checkSubtype(n,o.type)?null:new ui(n,i,o,r,s,a):null}evaluate(t){const e=this.input.evaluate(t);return(Ue(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),n=[],i={};for(const s of e){const t=i[this.cases[s]];void 0===t?(i[this.cases[s]]=n.length,n.push([this.cases[s],[s]])):n[t][1].push(s)}const r=t=>"number"===this.inputType.kind?Number(t):t;for(const[s,o]of n)t.push(1===o.length?r(o[0]):o.map(r)),t.push(this.outputs[s].serialize());return t.push(this.otherwise.serialize()),t}}var pi=ui;class di{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const i=[];for(let s=1;s<t.length-1;s+=2){const r=e.parse(t[s],s,ue);if(!r)return null;const o=e.parse(t[s+1],s+1,n);if(!o)return null;i.push([r,o]),n=n||o.type}const r=e.parse(t[t.length-1],t.length-1,n);return r?new di(n,i,r):null}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every((t=>{let[e,n]=t;return n.outputDefined()}))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}var fi=di;class mi{constructor(t,e,n,i){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));const n=e.parse(t[1],1,fe),i=e.parse(t[2],2,he);if(!n||!i)return null;if(!xe(n.type,[ve(fe),ce,fe]))return e.error("Expected first argument to be of type array or string, but found ".concat(_e(n.type)," instead"));if(4===t.length){const r=e.parse(t[3],3,he);return r?new mi(n.type,n,i,r):null}return new mi(n.type,n,i)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!be(e,["string","array"]))throw new He("Expected first argument to be of type array or string, but found ".concat(_e(Ue(e))," instead."));if(this.endIndex){const i=this.endIndex.evaluate(t);return e.slice(n,i)}return e.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var gi=mi;function yi(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function vi(t,e,n,i){return 0===i.compare(e,n)}function _i(t,e,n){const i="=="!==t&&"!="!==t;return class r{constructor(t,e,n){this.type=ue,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const n=t[0];let s=e.parse(t[1],1,fe);if(!s)return null;if(!yi(n,s.type))return e.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(_e(s.type),"'."));let o=e.parse(t[2],2,fe);if(!o)return null;if(!yi(n,o.type))return e.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(_e(o.type),"'."));if(s.type.kind!==o.type.kind&&"value"!==s.type.kind&&"value"!==o.type.kind)return e.error("Cannot compare types '".concat(_e(s.type),"' and '").concat(_e(o.type),"'."));i&&("value"===s.type.kind&&"value"!==o.type.kind?s=new We(o.type,[s]):"value"!==s.type.kind&&"value"===o.type.kind&&(o=new We(s.type,[o])));let a=null;if(4===t.length){if("string"!==s.type.kind&&"string"!==o.type.kind&&"value"!==s.type.kind&&"value"!==o.type.kind)return e.error("Cannot use collator to compare non-string types.");if(a=e.parse(t[3],3,me),!a)return null}return new r(s,o,a)}evaluate(r){const s=this.lhs.evaluate(r),o=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){const e=Ue(s),n=Ue(o);if(e.kind!==n.kind||"string"!==e.kind&&"number"!==e.kind)throw new He('Expected arguments for "'.concat(t,'" to be (string, string) or (number, number), but found (').concat(e.kind,", ").concat(n.kind,") instead."))}if(this.collator&&!i&&this.hasUntypedArgument){const t=Ue(s),n=Ue(o);if("string"!==t.kind||"string"!==n.kind)return e(r,s,o)}return this.collator?n(r,s,o,this.collator.evaluate(r)):e(r,s,o)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const Ti=_i("==",(function(t,e,n){return e===n}),vi),Ei=_i("!=",(function(t,e,n){return e!==n}),(function(t,e,n,i){return!vi(0,e,n,i)})),xi=_i("<",(function(t,e,n){return e<n}),(function(t,e,n,i){return i.compare(e,n)<0})),bi=_i(">",(function(t,e,n){return e>n}),(function(t,e,n,i){return i.compare(e,n)>0})),Ii=_i("<=",(function(t,e,n){return e<=n}),(function(t,e,n,i){return i.compare(e,n)<=0})),wi=_i(">=",(function(t,e,n){return e>=n}),(function(t,e,n,i){return i.compare(e,n)>=0}));class Si{constructor(t,e,n,i,r,s){this.type=ce,this.number=t,this.locale=e,this.currency=n,this.unit=i,this.minFractionDigits=r,this.maxFractionDigits=s}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,he);if(!n)return null;const i=t[2];if("object"!=typeof i||Array.isArray(i))return e.error("NumberFormat options argument must be an object.");let r=null;if(i.locale&&(r=e.parse(i.locale,1,ce),!r))return null;let s=null;if(i.currency&&(s=e.parse(i.currency,1,ce),!s))return null;let o=null;if(i.unit&&(o=e.parse(i.unit,1,ce),!o))return null;let a=null;if(i["min-fraction-digits"]&&(a=e.parse(i["min-fraction-digits"],1,he),!a))return null;let l=null;return i["max-fraction-digits"]&&(l=e.parse(i["max-fraction-digits"],1,he),!l)?null:new Si(n,r,s,o,a,l)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Ri{constructor(t){this.type=he,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found ".concat(t.length-1," instead."));const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found ".concat(_e(n.type)," instead.")):new Ri(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new He("Expected value to be of type string or array, but found ".concat(_e(Ue(e))," instead."))}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const Ci={"==":Ti,"!=":Ei,">":bi,"<":xi,">=":wi,"<=":Ii,array:We,at:oi,boolean:We,case:fi,coalesce:ni,collator:en,format:Ze,image:Ye,in:li,"index-of":ci,interpolate:ti,"interpolate-hcl":ti,"interpolate-lab":ti,length:Ri,let:ri,literal:Ge,match:pi,number:We,"number-format":Si,object:We,slice:gi,step:On,string:We,"to-boolean":Ke,"to-color":Ke,"to-number":Ke,"to-string":Ke,var:wn,within:Tn};function Ai(t,e){let[n,i,r,s]=e;n=n.evaluate(t),i=i.evaluate(t),r=r.evaluate(t);const o=s?s.evaluate(t):1,a=Le(n,i,r,o);if(a)throw new He(a);return new Oe(n/255*o,i/255*o,r/255*o,o)}function Di(t,e){return t in e}function Oi(t,e){const n=e[t];return void 0===n?null:n}function Ni(t){return{type:t}}tn.register(Ci,{error:[{kind:"error"},[ce],(t,e)=>{let[n]=e;throw new He(n.evaluate(t))}],typeof:[ce,[fe],(t,e)=>{let[n]=e;return _e(Ue(n.evaluate(t)))}],"to-rgba":[ve(he,4),[pe],(t,e)=>{let[n]=e;return n.evaluate(t).toArray()}],rgb:[pe,[he,he,he],Ai],rgba:[pe,[he,he,he,he],Ai],has:{type:ue,overloads:[[[ce],(t,e)=>{let[n]=e;return Di(n.evaluate(t),t.properties())}],[[ce,de],(t,e)=>{let[n,i]=e;return Di(n.evaluate(t),i.evaluate(t))}]]},get:{type:fe,overloads:[[[ce],(t,e)=>{let[n]=e;return Oi(n.evaluate(t),t.properties())}],[[ce,de],(t,e)=>{let[n,i]=e;return Oi(n.evaluate(t),i.evaluate(t))}]]},"feature-state":[fe,[ce],(t,e)=>{let[n]=e;return Oi(n.evaluate(t),t.featureState||{})}],properties:[de,[],t=>t.properties()],"geometry-type":[ce,[],t=>t.geometryType()],id:[fe,[],t=>t.id()],zoom:[he,[],t=>t.globals.zoom],pitch:[he,[],t=>t.globals.pitch||0],"distance-from-center":[he,[],t=>t.distanceFromCenter()],"heatmap-density":[he,[],t=>t.globals.heatmapDensity||0],"line-progress":[he,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[he,[],t=>t.globals.skyRadialProgress||0],accumulated:[fe,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[he,Ni(he),(t,e)=>{let n=0;for(const i of e)n+=i.evaluate(t);return n}],"*":[he,Ni(he),(t,e)=>{let n=1;for(const i of e)n*=i.evaluate(t);return n}],"-":{type:he,overloads:[[[he,he],(t,e)=>{let[n,i]=e;return n.evaluate(t)-i.evaluate(t)}],[[he],(t,e)=>{let[n]=e;return-n.evaluate(t)}]]},"/":[he,[he,he],(t,e)=>{let[n,i]=e;return n.evaluate(t)/i.evaluate(t)}],"%":[he,[he,he],(t,e)=>{let[n,i]=e;return n.evaluate(t)%i.evaluate(t)}],ln2:[he,[],()=>Math.LN2],pi:[he,[],()=>Math.PI],e:[he,[],()=>Math.E],"^":[he,[he,he],(t,e)=>{let[n,i]=e;return Math.pow(n.evaluate(t),i.evaluate(t))}],sqrt:[he,[he],(t,e)=>{let[n]=e;return Math.sqrt(n.evaluate(t))}],log10:[he,[he],(t,e)=>{let[n]=e;return Math.log(n.evaluate(t))/Math.LN10}],ln:[he,[he],(t,e)=>{let[n]=e;return Math.log(n.evaluate(t))}],log2:[he,[he],(t,e)=>{let[n]=e;return Math.log(n.evaluate(t))/Math.LN2}],sin:[he,[he],(t,e)=>{let[n]=e;return Math.sin(n.evaluate(t))}],cos:[he,[he],(t,e)=>{let[n]=e;return Math.cos(n.evaluate(t))}],tan:[he,[he],(t,e)=>{let[n]=e;return Math.tan(n.evaluate(t))}],asin:[he,[he],(t,e)=>{let[n]=e;return Math.asin(n.evaluate(t))}],acos:[he,[he],(t,e)=>{let[n]=e;return Math.acos(n.evaluate(t))}],atan:[he,[he],(t,e)=>{let[n]=e;return Math.atan(n.evaluate(t))}],min:[he,Ni(he),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[he,Ni(he),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[he,[he],(t,e)=>{let[n]=e;return Math.abs(n.evaluate(t))}],round:[he,[he],(t,e)=>{let[n]=e;const i=n.evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[he,[he],(t,e)=>{let[n]=e;return Math.floor(n.evaluate(t))}],ceil:[he,[he],(t,e)=>{let[n]=e;return Math.ceil(n.evaluate(t))}],"filter-==":[ue,[ce,fe],(t,e)=>{let[n,i]=e;return t.properties()[n.value]===i.value}],"filter-id-==":[ue,[fe],(t,e)=>{let[n]=e;return t.id()===n.value}],"filter-type-==":[ue,[ce],(t,e)=>{let[n]=e;return t.geometryType()===n.value}],"filter-<":[ue,[ce,fe],(t,e)=>{let[n,i]=e;const r=t.properties()[n.value],s=i.value;return typeof r==typeof s&&r<s}],"filter-id-<":[ue,[fe],(t,e)=>{let[n]=e;const i=t.id(),r=n.value;return typeof i==typeof r&&i<r}],"filter->":[ue,[ce,fe],(t,e)=>{let[n,i]=e;const r=t.properties()[n.value],s=i.value;return typeof r==typeof s&&r>s}],"filter-id->":[ue,[fe],(t,e)=>{let[n]=e;const i=t.id(),r=n.value;return typeof i==typeof r&&i>r}],"filter-<=":[ue,[ce,fe],(t,e)=>{let[n,i]=e;const r=t.properties()[n.value],s=i.value;return typeof r==typeof s&&r<=s}],"filter-id-<=":[ue,[fe],(t,e)=>{let[n]=e;const i=t.id(),r=n.value;return typeof i==typeof r&&i<=r}],"filter->=":[ue,[ce,fe],(t,e)=>{let[n,i]=e;const r=t.properties()[n.value],s=i.value;return typeof r==typeof s&&r>=s}],"filter-id->=":[ue,[fe],(t,e)=>{let[n]=e;const i=t.id(),r=n.value;return typeof i==typeof r&&i>=r}],"filter-has":[ue,[fe],(t,e)=>{let[n]=e;return n.value in t.properties()}],"filter-has-id":[ue,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[ue,[ve(ce)],(t,e)=>{let[n]=e;return n.value.indexOf(t.geometryType())>=0}],"filter-id-in":[ue,[ve(fe)],(t,e)=>{let[n]=e;return n.value.indexOf(t.id())>=0}],"filter-in-small":[ue,[ce,ve(fe)],(t,e)=>{let[n,i]=e;return i.value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[ue,[ce,ve(fe)],(t,e)=>{let[n,i]=e;return function(t,e,n,i){for(;n<=i;){const r=n+i>>1;if(e[r]===t)return!0;e[r]>t?i=r-1:n=r+1}return!1}(t.properties()[n.value],i.value,0,i.value.length-1)}],all:{type:ue,overloads:[[[ue,ue],(t,e)=>{let[n,i]=e;return n.evaluate(t)&&i.evaluate(t)}],[Ni(ue),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:ue,overloads:[[[ue,ue],(t,e)=>{let[n,i]=e;return n.evaluate(t)||i.evaluate(t)}],[Ni(ue),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[ue,[ue],(t,e)=>{let[n]=e;return!n.evaluate(t)}],"is-supported-script":[ue,[ce],(t,e)=>{let[n]=e;const i=t.globals&&t.globals.isSupportedScript;return!i||i(n.evaluate(t))}],upcase:[ce,[ce],(t,e)=>{let[n]=e;return n.evaluate(t).toUpperCase()}],downcase:[ce,[ce],(t,e)=>{let[n]=e;return n.evaluate(t).toLowerCase()}],concat:[ce,Ni(fe),(t,e)=>e.map((e=>Be(e.evaluate(t)))).join("")],"resolved-locale":[ce,[me],(t,e)=>{let[n]=e;return n.evaluate(t).resolvedLocale()}]});var Mi=Ci;function Pi(t){return{result:"success",value:t}}function Fi(t){return{result:"error",value:t}}function Li(t){return"data-driven"===t["property-type"]}function ki(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Ui(t){return!!t.expression&&t.expression.interpolated}function Bi(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function zi(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Gi(t){return t}function Hi(t,e){const n="color"===e.type,i=t.stops&&"object"==typeof t.stops[0][0],r=i||!(i||void 0!==t.property),s=t.type||(Ui(e)?"exponential":"interval");if(n&&((t=ee({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],Oe.parse(t[1])]))),t.default=Oe.parse(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!Qn[t.colorSpace])throw new Error("Unknown color space: ".concat(t.colorSpace));let o,a,l;if("exponential"===s)o=Zi;else if("interval"===s)o=Wi;else if("categorical"===s){o=Vi,a=Object.create(null);for(const e of t.stops)a[e[0]]=e[1];l=typeof t.stops[0][0]}else{if("identity"!==s)throw new Error('Unknown function type "'.concat(s,'"'));o=Yi}if(i){const n={},i=[];for(let e=0;e<t.stops.length;e++){const r=t.stops[e],s=r[0].zoom;void 0===n[s]&&(n[s]={zoom:s,type:t.type,property:t.property,default:t.default,stops:[]},i.push(s)),n[s].stops.push([r[0].value,r[1]])}const r=[];for(const t of i)r.push([n[t].zoom,Hi(n[t],e)]);const s={name:"linear"};return{kind:"composite",interpolationType:s,interpolationFactor:ti.interpolationFactor.bind(void 0,s),zoomStops:r.map((t=>t[0])),evaluate:(n,i)=>{let{zoom:s}=n;return Zi({stops:r,base:t.base},e,s).evaluate(s,i)}}}if(r){const n="exponential"===s?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:ti.interpolationFactor.bind(void 0,n),zoomStops:t.stops.map((t=>t[0])),evaluate:n=>{let{zoom:i}=n;return o(t,e,i,a,l)}}}return{kind:"source",evaluate(n,i){const r=i&&i.properties?i.properties[t.property]:void 0;return void 0===r?ji(t.default,e.default):o(t,e,r,a,l)}}}function ji(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function Vi(t,e,n,i,r){return ji(typeof n===r?i[n]:void 0,t.default,e.default)}function Wi(t,e,n){if("number"!==Bi(n))return ji(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];const r=An(t.stops.map((t=>t[0])),n);return t.stops[r][1]}function Zi(t,e,n){const i=void 0!==t.base?t.base:1;if("number"!==Bi(n))return ji(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];const s=An(t.stops.map((t=>t[0])),n),o=function(t,e,n,i){const r=i-n,s=t-n;return 0===r?0:1===e?s/r:(Math.pow(e,s)-1)/(Math.pow(e,r)-1)}(n,i,t.stops[s][0],t.stops[s+1][0]),a=t.stops[s][1],l=t.stops[s+1][1];let h=Mn[e.type]||Gi;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=Qn[t.colorSpace];h=(t,n)=>e.reverse(e.interpolate(e.forward(t),e.forward(n),o))}return"function"==typeof a.evaluate?{evaluate(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=a.evaluate.apply(void 0,e),r=l.evaluate.apply(void 0,e);if(void 0!==i&&void 0!==r)return h(i,r,o)}}:h(a,l,o)}function Yi(t,e,n){return"color"===e.type?n=Oe.parse(n):"formatted"===e.type?n=Pe.fromString(n.toString()):"resolvedImage"===e.type?n=Fe.fromString(n.toString()):Bi(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),ji(n,t.default,e.default)}class qi{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Je,this._defaultValue=e?function(t){return"color"===t.type&&(zi(t.default)||Array.isArray(t.default))?new Oe(0,0,0,0):"color"===t.type?Oe.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,i,r,s,o,a){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=i||null,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=s,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=a||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,i,r,s,o,a){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i||null,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=s||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=a||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new He("Expected value to be one of ".concat(Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", "),", but found ").concat(JSON.stringify(t)," instead."));return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function Xi(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Mi}function Ki(t,e){const n=new Rn(Mi,[],e?function(t){const e={color:pe,string:ce,number:he,enum:ce,boolean:ue,formatted:ge,resolvedImage:ye};return"array"===t.type?ve(e[t.value]||fe,t.length):e[t.type]}(e):void 0),i=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return i?Pi(new qi(i,e)):Fi(n.errors)}class Qi{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!xn(e.expression)}evaluateWithoutErrorHandling(t,e,n,i,r,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,s)}evaluate(t,e,n,i,r,s){return this._styleExpression.evaluate(t,e,n,i,r,s)}}class Ji{constructor(t,e,n,i){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!xn(e.expression),this.interpolationType=i}evaluateWithoutErrorHandling(t,e,n,i,r,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,s)}evaluate(t,e,n,i,r,s){return this._styleExpression.evaluate(t,e,n,i,r,s)}interpolationFactor(t,e,n){return this.interpolationType?ti.interpolationFactor(this.interpolationType,t,e,n):0}}function $i(t,e){if("error"===(t=Ki(t,e)).result)return t;const n=t.value.expression,i=En(n);if(!i&&!Li(e))return Fi([new se("","data expressions not supported")]);const r=bn(n,["zoom","pitch","distance-from-center"]);if(!r&&!ki(e))return Fi([new se("","zoom expressions not supported")]);const s=er(n);return s||r?s instanceof se?Fi([s]):s instanceof ti&&!Ui(e)?Fi([new se("",'"interpolate" expressions cannot be used with this property')]):Pi(s?new Ji(i?"camera":"composite",t.value,s.labels,s instanceof ti?s.interpolation:void 0):new Qi(i?"constant":"source",t.value)):Fi([new se("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class tr{constructor(t,e){this._parameters=t,this._specification=e,ee(this,Hi(this._parameters,this._specification))}static deserialize(t){return new tr(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function er(t){let e=null;if(t instanceof ri)e=er(t.result);else if(t instanceof ni){for(const n of t.args)if(e=er(n),e)break}else(t instanceof On||t instanceof ti)&&t.input instanceof tn&&"zoom"===t.input.name&&(e=t);return e instanceof se||t.eachChild((t=>{const n=er(t);n instanceof se?e=n:!e&&n?e=new se("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new se("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}class nr{constructor(t,e,n,i){this.message=(t?"".concat(t,": "):"")+n,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)}}function ir(t){const e=t.key,n=t.value,i=t.valueSpec||{},r=t.objectElementValidators||{},s=t.style,o=t.styleSpec;let a=[];const l=Bi(n);if("object"!==l)return[new nr(e,n,"object expected, ".concat(l," found"))];for(const h in n){const t=h.split(".")[0];let l;r[t]?l=r[t]:i[t]?l=kr:r["*"]?l=r["*"]:i["*"]&&(l=kr),l?a=a.concat(l({key:(e?"".concat(e,"."):e)+h,value:n[h],valueSpec:i[t]||i["*"],style:s,styleSpec:o,object:n,objectKey:h},n)):a.push(new nr(e,n[h],'unknown property "'.concat(h,'"')))}for(const h in i)r[h]||i[h].required&&void 0===i[h].default&&void 0===n[h]&&a.push(new nr(e,n,'missing required property "'.concat(h,'"')));return a}function rr(t){const e=t.value,n=t.valueSpec,i=t.style,r=t.styleSpec,s=t.key,o=t.arrayElementValidator||kr;if("array"!==Bi(e))return[new nr(s,e,"array expected, ".concat(Bi(e)," found"))];if(n.length&&e.length!==n.length)return[new nr(s,e,"array length ".concat(n.length," expected, length ").concat(e.length," found"))];if(n["min-length"]&&e.length<n["min-length"])return[new nr(s,e,"array length at least ".concat(n["min-length"]," expected, length ").concat(e.length," found"))];let a={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};r.$version<7&&(a.function=n.function),"object"===Bi(n.value)&&(a=n.value);let l=[];for(let h=0;h<e.length;h++)l=l.concat(o({array:e,arrayIndex:h,value:e[h],valueSpec:a,style:i,styleSpec:r,key:"".concat(s,"[").concat(h,"]")}));return l}function sr(t){const e=t.key,n=t.value,i=t.valueSpec;let r=Bi(n);if("number"===r&&n!=n&&(r="NaN"),"number"!==r)return[new nr(e,n,"number expected, ".concat(r," found"))];if("minimum"in i){let r=i.minimum;if("array"===Bi(i.minimum)&&(r=i.minimum[t.arrayIndex]),n<r)return[new nr(e,n,"".concat(n," is less than the minimum value ").concat(r))]}if("maximum"in i){let r=i.maximum;if("array"===Bi(i.maximum)&&(r=i.maximum[t.arrayIndex]),n>r)return[new nr(e,n,"".concat(n," is greater than the maximum value ").concat(r))]}return[]}function or(t){const e=t.valueSpec,n=ne(t.value.type);let i,r,s,o={};const a="categorical"!==n&&void 0===t.value.property,l=!a,h="array"===Bi(t.value.stops)&&"array"===Bi(t.value.stops[0])&&"object"===Bi(t.value.stops[0][0]),c=ir({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===n)return[new nr(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const i=t.value;return e=e.concat(rr({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:u})),"array"===Bi(i)&&0===i.length&&e.push(new nr(t.key,i,"array must have at least one stop")),e},default:function(t){return kr({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===n&&a&&c.push(new nr(t.key,t.value,'missing required property "property"')),"identity"===n||t.value.stops||c.push(new nr(t.key,t.value,'missing required property "stops"')),"exponential"===n&&t.valueSpec.expression&&!Ui(t.valueSpec)&&c.push(new nr(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Li(t.valueSpec)?c.push(new nr(t.key,t.value,"property functions not supported")):a&&!ki(t.valueSpec)&&c.push(new nr(t.key,t.value,"zoom functions not supported"))),"categorical"!==n&&!h||void 0!==t.value.property||c.push(new nr(t.key,t.value,'"property" property is required')),c;function u(t){let n=[];const i=t.value,a=t.key;if("array"!==Bi(i))return[new nr(a,i,"array expected, ".concat(Bi(i)," found"))];if(2!==i.length)return[new nr(a,i,"array length 2 expected, length ".concat(i.length," found"))];if(h){if("object"!==Bi(i[0]))return[new nr(a,i,"object expected, ".concat(Bi(i[0])," found"))];if(void 0===i[0].zoom)return[new nr(a,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new nr(a,i,"object stop key must have value")];const e=ne(i[0].zoom);if("number"!=typeof e)return[new nr(a,i[0].zoom,"stop zoom values must be numbers")];if(s&&s>e)return[new nr(a,i[0].zoom,"stop zoom values must appear in ascending order")];e!==s&&(s=e,r=void 0,o={}),n=n.concat(ir({key:"".concat(a,"[0]"),value:i[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:sr,value:p}}))}else n=n.concat(p({key:"".concat(a,"[0]"),value:i[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},i));return Xi(ie(i[1]))?n.concat([new nr("".concat(a,"[1]"),i[1],"expressions are not allowed in function stops.")]):n.concat(kr({key:"".concat(a,"[1]"),value:i[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function p(t,s){const a=Bi(t.value),l=ne(t.value),h=null!==t.value?t.value:s;if(i){if(a!==i)return[new nr(t.key,h,"".concat(a," stop domain type must match previous stop domain type ").concat(i))]}else i=a;if("number"!==a&&"string"!==a&&"boolean"!==a&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new nr(t.key,h,"stop domain value must be a number, string, or boolean")];if("number"!==a&&"categorical"!==n){let i="number expected, ".concat(a," found");return Li(e)&&void 0===n&&(i+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new nr(t.key,h,i)]}return"categorical"!==n||"number"!==a||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===a&&"number"==typeof l&&"number"==typeof r&&void 0!==r&&l<r?[new nr(t.key,h,"stop domain values must appear in ascending order")]:(r=l,"categorical"===n&&l in o?[new nr(t.key,h,"stop domain values must be unique")]:(o[l]=!0,[])):[new nr(t.key,h,"integer expected, found ".concat(String(l)))]}}function ar(t){const e=("property"===t.expressionContext?$i:Ki)(ie(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new nr("".concat(t.key).concat(e.key),t.value,e.message)));const n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new nr(t.key,t.value,'Invalid data expression for "'.concat(t.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===t.expressionContext&&"layout"===t.propertyType&&!xn(n))return[new nr(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext)return lr(n,t);if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!bn(n,["zoom","feature-state"]))return[new nr(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!En(n))return[new nr(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function lr(t,e){const n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const r of e.valueSpec.expression.parameters)n.delete(r);if(0===n.size)return[];const i=[];return t instanceof tn&&n.has(t.name)?[new nr(e.key,e.value,'["'.concat(t.name,'"] expression is not supported in a filter for a ').concat(e.object.type," layer with id: ").concat(e.object.id))]:(t.eachChild((t=>{i.push(...lr(t,e))})),i)}function hr(t){const e=t.key,n=t.value,i=t.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(ne(n))&&r.push(new nr(e,n,"expected one of [".concat(i.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(i.values).indexOf(ne(n))&&r.push(new nr(e,n,"expected one of [".concat(Object.keys(i.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),r}function cr(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!cr(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function ur(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill";if(null==t)return{filter:()=>!0,needGeometry:!1,needFeature:!1};cr(t)||(t=vr(t));const n=t;let i=!0;try{i=function(t){if(!fr(t))return t;let e=ie(t);return dr(e),e=pr(e),e}(n)}catch(t){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(n,null,2),"\n        "))}const r=te["filter_".concat(e)],s=Ki(i,r);let o=null;if("error"===s.result)throw new Error(s.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));o=(t,e,n)=>s.value.evaluate(t,e,{},n);let a=null,l=null;if(i!==n){const t=Ki(n,r);if("error"===t.result)throw new Error(t.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));a=(e,n,i,r,s)=>t.value.evaluate(e,n,{},i,void 0,void 0,r,s),l=!En(t.value.expression)}return{filter:o,dynamicFilter:a||void 0,needGeometry:yr(i),needFeature:!!l}}function pr(t){if(!Array.isArray(t))return t;const e=function(t){if(mr.has(t[0]))for(let e=1;e<t.length;e++)if(fr(t[e]))return!0;return t}(t);return!0===e?e:e.map((t=>pr(t)))}function dr(t){let e=!1;const n=[];if("case"===t[0]){for(let i=1;i<t.length-1;i+=2)e=e||fr(t[i]),n.push(t[i+1]);n.push(t[t.length-1])}else if("match"===t[0]){e=e||fr(t[1]);for(let e=2;e<t.length-1;e+=2)n.push(t[e+1]);n.push(t[t.length-1])}else if("step"===t[0]){e=e||fr(t[1]);for(let e=1;e<t.length-1;e+=2)n.push(t[e+1])}e&&(t.length=0,t.push("any",...n));for(let i=1;i<t.length;i++)dr(t[i])}function fr(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;var e;for(let n=1;n<t.length;n++)if(fr(t[n]))return!0;return!1}const mr=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function gr(t,e){return t<e?-1:t>e?1:0}function yr(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(yr(t[e]))return!0;return!1}function vr(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?_r(t[1],t[2],"=="):"!="===e?xr(_r(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?_r(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(vr))):"all"===e?["all"].concat(t.slice(1).map(vr)):"none"===e?["all"].concat(t.slice(1).map(vr).map(xr)):"in"===e?Tr(t[1],t.slice(2)):"!in"===e?xr(Tr(t[1],t.slice(2))):"has"===e?Er(t[1]):"!has"===e?xr(Er(t[1])):"within"!==e||t;var n}function _r(t,e,n){switch(t){case"$type":return["filter-type-".concat(n),e];case"$id":return["filter-id-".concat(n),e];default:return["filter-".concat(n),t,e]}}function Tr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(gr)]]:["filter-in-small",t,["literal",e]]}}function Er(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function xr(t){return["!",t]}function br(t){return cr(ie(t.value))?ar(ee({},t,{expressionContext:"filter",valueSpec:t.styleSpec["filter_".concat(t.layerType||"fill")]})):Ir(t)}function Ir(t){const e=t.value,n=t.key;if("array"!==Bi(e))return[new nr(n,e,"array expected, ".concat(Bi(e)," found"))];const i=t.styleSpec;let r,s=[];if(e.length<1)return[new nr(n,e,"filter array must have at least 1 element")];switch(s=s.concat(hr({key:"".concat(n,"[0]"),value:e[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),ne(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===ne(e[1])&&s.push(new nr(n,e,'"$type" cannot be use with operator "'.concat(e[0],'"')));case"==":case"!=":3!==e.length&&s.push(new nr(n,e,'filter array for operator "'.concat(e[0],'" must have 3 elements')));case"in":case"!in":e.length>=2&&(r=Bi(e[1]),"string"!==r&&s.push(new nr("".concat(n,"[1]"),e[1],"string expected, ".concat(r," found"))));for(let o=2;o<e.length;o++)r=Bi(e[o]),"$type"===ne(e[1])?s=s.concat(hr({key:"".concat(n,"[").concat(o,"]"),value:e[o],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&s.push(new nr("".concat(n,"[").concat(o,"]"),e[o],"string, number, or boolean expected, ".concat(r," found")));break;case"any":case"all":case"none":for(let i=1;i<e.length;i++)s=s.concat(Ir({key:"".concat(n,"[").concat(i,"]"),value:e[i],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":r=Bi(e[1]),2!==e.length?s.push(new nr(n,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"string"!==r&&s.push(new nr("".concat(n,"[1]"),e[1],"string expected, ".concat(r," found")));break;case"within":r=Bi(e[1]),2!==e.length?s.push(new nr(n,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"object"!==r&&s.push(new nr("".concat(n,"[1]"),e[1],"object expected, ".concat(r," found")))}return s}function wr(t,e){const n=t.key,i=t.style,r=t.styleSpec,s=t.value,o=t.objectKey,a=r["".concat(e,"_").concat(t.layerType)];if(!a)return[];const l=o.match(/^(.*)-transition$/);if("paint"===e&&l&&a[l[1]]&&a[l[1]].transition)return kr({key:n,value:s,valueSpec:r.transition,style:i,styleSpec:r});const h=t.valueSpec||a[o];if(!h)return[new nr(n,s,'unknown property "'.concat(o,'"'))];let c;if("string"===Bi(s)&&Li(h)&&!h.tokens&&(c=/^{([^}]+)}$/.exec(s))){const t='`{ "type": "identity", "property": '.concat(c?JSON.stringify(c[1]):'"_"'," }`");return[new nr(n,s,'"'.concat(o,'" does not support interpolation syntax\nUse an identity property function instead: ').concat(t,"."))]}const u=[];return"symbol"===t.layerType&&("text-field"===o&&i&&!i.glyphs&&u.push(new nr(n,s,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&zi(ie(s))&&"identity"===ne(s.type)&&u.push(new nr(n,s,'"text-font" does not support identity functions'))),u.concat(kr({key:t.key,value:s,valueSpec:h,style:i,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:o}))}function Sr(t){return wr(t,"paint")}function Rr(t){return wr(t,"layout")}function Cr(t){let e=[];const n=t.value,i=t.key,r=t.style,s=t.styleSpec;n.type||n.ref||e.push(new nr(i,n,'either "type" or "ref" is required'));let o=ne(n.type);const a=ne(n.ref);if(n.id){const s=ne(n.id);for(let o=0;o<t.arrayIndex;o++){const t=r.layers[o];ne(t.id)===s&&e.push(new nr(i,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(t.id.__line__)))}}if("ref"in n){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in n&&e.push(new nr(i,n[t],'"'.concat(t,'" is prohibited for ref layers')))})),r.layers.forEach((e=>{ne(e.id)===a&&(t=e)})),t?t.ref?e.push(new nr(i,n.ref,"ref cannot reference another ref layer")):o=ne(t.type):"string"==typeof a&&e.push(new nr(i,n.ref,'ref layer "'.concat(a,'" not found')))}else if("background"!==o&&"sky"!==o)if(n.source){const t=r.sources&&r.sources[n.source],s=t&&ne(t.type);t?"vector"===s&&"raster"===o?e.push(new nr(i,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster"===s&&"raster"!==o?e.push(new nr(i,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==s||n["source-layer"]?"raster-dem"===s&&"hillshade"!==o?e.push(new nr(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==o||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===s&&t.lineMetrics||e.push(new nr(i,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):e.push(new nr(i,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):e.push(new nr(i,n.source,'source "'.concat(n.source,'" not found')))}else e.push(new nr(i,n,'missing required property "source"'));return e=e.concat(ir({key:i,value:n,valueSpec:s.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>kr({key:"".concat(i,".type"),value:n.type,valueSpec:s.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"}),filter:t=>br(ee({layerType:o},t)),layout:t=>ir({layer:n,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Rr(ee({layerType:o},t))}}),paint:t=>ir({layer:n,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Sr(ee({layerType:o},t))}})}})),e}function Ar(t){const e=t.value,n=t.key,i=Bi(e);return"string"!==i?[new nr(n,e,"string expected, ".concat(i," found"))]:[]}const Dr={promoteId:function(t){let{key:e,value:n}=t;if("string"===Bi(n))return Ar({key:e,value:n});{const t=[];for(const i in n)t.push(...Ar({key:"".concat(e,".").concat(i),value:n[i]}));return t}}};function Or(t){const e=t.value,n=t.key,i=t.styleSpec,r=t.style;if(!e.type)return[new nr(n,e,'"type" is required')];const s=ne(e.type);let o;switch(s){case"vector":case"raster":case"raster-dem":return o=ir({key:n,value:e,valueSpec:i["source_".concat(s.replace("-","_"))],style:t.style,styleSpec:i,objectElementValidators:Dr}),o;case"geojson":if(o=ir({key:n,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,objectElementValidators:Dr}),e.cluster)for(const t in e.clusterProperties){const[i,r]=e.clusterProperties[t],s="string"==typeof i?[i,["accumulated"],["get",t]]:i;o.push(...ar({key:"".concat(n,".").concat(t,".map"),value:r,expressionContext:"cluster-map"})),o.push(...ar({key:"".concat(n,".").concat(t,".reduce"),value:s,expressionContext:"cluster-reduce"}))}return o;case"video":return ir({key:n,value:e,valueSpec:i.source_video,style:r,styleSpec:i});case"image":return ir({key:n,value:e,valueSpec:i.source_image,style:r,styleSpec:i});case"canvas":return[new nr(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return hr({key:"".concat(n,".type"),value:e.type,valueSpec:{values:Nr(i)},style:r,styleSpec:i})}}function Nr(t){return t.source.reduce(((e,n)=>{const i=t[n];return"enum"===i.type.type&&(e=e.concat(Object.keys(i.type.values))),e}),[])}function Mr(t){const e=t.value,n=t.styleSpec,i=n.light,r=t.style;let s=[];const o=Bi(e);if(void 0===e)return s;if("object"!==o)return s=s.concat([new nr("light",e,"object expected, ".concat(o," found"))]),s;for(const a in e){const t=a.match(/^(.*)-transition$/);s=s.concat(t&&i[t[1]]&&i[t[1]].transition?kr({key:a,value:e[a],valueSpec:n.transition,style:r,styleSpec:n}):i[a]?kr({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:n}):[new nr(a,e[a],'unknown property "'.concat(a,'"'))])}return s}function Pr(t){const e=t.value,n=t.key,i=t.style,r=t.styleSpec,s=r.terrain;let o=[];const a=Bi(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new nr("terrain",e,"object expected, ".concat(a," found"))]),o;for(const l in e){const t=l.match(/^(.*)-transition$/);o=o.concat(t&&s[t[1]]&&s[t[1]].transition?kr({key:l,value:e[l],valueSpec:r.transition,style:i,styleSpec:r}):s[l]?kr({key:l,value:e[l],valueSpec:s[l],style:i,styleSpec:r}):[new nr(l,e[l],'unknown property "'.concat(l,'"'))])}if(e.source){const t=i.sources&&i.sources[e.source],r=t&&ne(t.type);t?"raster-dem"!==r&&o.push(new nr(n,e.source,"terrain cannot be used with a source of type ".concat(String(r),', it only be used with a "raster-dem" source type'))):o.push(new nr(n,e.source,'source "'.concat(e.source,'" not found')))}else o.push(new nr(n,e,'terrain is missing required property "source"'));return o}function Fr(t){const e=t.value,n=t.style,i=t.styleSpec,r=i.fog;let s=[];const o=Bi(e);if(void 0===e)return s;if("object"!==o)return s=s.concat([new nr("fog",e,"object expected, ".concat(o," found"))]),s;for(const a in e){const t=a.match(/^(.*)-transition$/);s=s.concat(t&&r[t[1]]&&r[t[1]].transition?kr({key:a,value:e[a],valueSpec:i.transition,style:n,styleSpec:i}):r[a]?kr({key:a,value:e[a],valueSpec:r[a],style:n,styleSpec:i}):[new nr(a,e[a],'unknown property "'.concat(a,'"'))])}return s}const Lr={"*":()=>[],array:rr,boolean:function(t){const e=t.value,n=t.key,i=Bi(e);return"boolean"!==i?[new nr(n,e,"boolean expected, ".concat(i," found"))]:[]},number:sr,color:function(t){const e=t.key,n=t.value,i=Bi(n);return"string"!==i?[new nr(e,n,"color expected, ".concat(i," found"))]:null===Ie(n)?[new nr(e,n,'color expected, "'.concat(n,'" found'))]:[]},enum:hr,filter:br,function:or,layer:Cr,object:ir,source:Or,light:Mr,terrain:Pr,fog:Fr,string:Ar,formatted:function(t){return 0===Ar(t).length?[]:ar(t)},resolvedImage:function(t){return 0===Ar(t).length?[]:ar(t)},projection:function(t){const e=t.value,n=t.styleSpec,i=n.projection,r=t.style;let s=[];const o=Bi(e);if("object"===o)for(const a in e)s=s.concat(kr({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:n}));else"string"!==o&&(s=s.concat([new nr("projection",e,"object or string expected, ".concat(o," found"))]));return s}};function kr(t){const e=t.value,n=t.valueSpec,i=t.styleSpec;return n.expression&&zi(ne(e))?or(t):n.expression&&Xi(ie(e))?ar(t):n.type&&Lr[n.type]?Lr[n.type](t):ir(ee({},t,{valueSpec:n.type?i[n.type]:n}))}function Ur(t){const e=t.value,n=t.key,i=Ar(t);return i.length||(-1===e.indexOf("{fontstack}")&&i.push(new nr(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&i.push(new nr(n,e,'"glyphs" url must include a "{range}" token'))),i}function Br(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te;return Hr(kr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Ur,"*":()=>[]}}))}const zr=t=>Hr(Sr(t)),Gr=t=>Hr(Rr(t));function Hr(t){return t.slice().sort(((t,e)=>t.line&&e.line?t.line-e.line:0))}function jr(t,e){let n=!1;if(e&&e.length)for(const i of e)t.fire(new Jt(new Error(i.message))),n=!0;return n}var Vr=Zr,Wr=3;function Zr(t,e,n){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],this.d=(e=r[1])+2*(n=r[2]);for(var s=0;s<this.d*this.d;s++){var o=r[Wr+s],a=r[Wr+s+1];i.push(o===a?null:r.subarray(o,a))}var l=r[Wr+i.length+1];this.keys=r.subarray(r[Wr+i.length],l),this.bboxes=r.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var h=0;h<this.d*this.d;h++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var c=n/e*t;this.min=-c,this.max=t+c}Zr.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},Zr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Zr.prototype._insertCell=function(t,e,n,i,r,s){this.cells[r].push(s)},Zr.prototype.query=function(t,e,n,i,r){var s=this.min,o=this.max;if(t<=s&&e<=s&&o<=n&&o<=i&&!r)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(t,e,n,i,this._queryCell,a,{},r),a},Zr.prototype._queryCell=function(t,e,n,i,r,s,o,a){var l=this.cells[r];if(null!==l)for(var h=this.keys,c=this.bboxes,u=0;u<l.length;u++){var p=l[u];if(void 0===o[p]){var d=4*p;(a?a(c[d+0],c[d+1],c[d+2],c[d+3]):t<=c[d+2]&&e<=c[d+3]&&n>=c[d+0]&&i>=c[d+1])?(o[p]=!0,s.push(h[p])):o[p]=!1}}},Zr.prototype._forEachCell=function(t,e,n,i,r,s,o,a){for(var l=this._convertToCellCoord(t),h=this._convertToCellCoord(e),c=this._convertToCellCoord(n),u=this._convertToCellCoord(i),p=l;p<=c;p++)for(var d=h;d<=u;d++){var f=this.d*d+p;if((!a||a(this._convertFromCellCoord(p),this._convertFromCellCoord(d),this._convertFromCellCoord(p+1),this._convertFromCellCoord(d+1)))&&r.call(this,t,e,n,i,f,s,o,a))return}},Zr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Zr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Zr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=Wr+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var r=new Int32Array(e+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var s=e,o=0;o<t.length;o++){var a=t[o];r[Wr+o]=s,r.set(a,s),s+=a.length}return r[Wr+t.length]=s,r.set(this.keys,s),r[Wr+t.length+1]=s+=this.keys.length,r.set(this.bboxes,s),s+=this.bboxes.length,r.buffer};var Yr=p(Vr);const qr={};function Xr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),qr[e]={klass:t,omit:n.omit||[]}}Xr(Object,"Object"),Yr.serialize=function(t,e){const n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},Yr.deserialize=function(t){return new Yr(t.buffer)},Object.defineProperty(Yr,"name",{value:"Grid"}),Xr(Yr,"Grid"),Xr(Oe,"Color"),Xr(Error,"Error"),Xr(ht,"AJAXError"),Xr(Fe,"ResolvedImage"),Xr(tr,"StylePropertyFunction"),Xr(qi,"StyleExpression",{omit:["_evaluator"]}),Xr(Ji,"ZoomDependentExpression"),Xr(Qi,"ZoomConstantExpression"),Xr(tn,"CompoundExpression",{omit:["_evaluate"]});for(const bm in Mi)qr[Mi[bm]._classRegistryKey]||Xr(Mi[bm],"Expression".concat(bm));function Kr(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Qr(t){return e.ImageBitmap&&t instanceof e.ImageBitmap}function Jr(t,n){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Kr(t)||Qr(t))return n&&n.push(t),t;if(ArrayBuffer.isView(t)){const e=t;return n&&n.push(e.buffer),e}if(t instanceof e.ImageData)return n&&n.push(t.data.buffer),t;if(Array.isArray(t)){const e=[];for(const i of t)e.push(Jr(i,n));return e}if("object"==typeof t){const e=t.constructor,i=e._classRegistryKey;if(!i)throw new Error("can't serialize object of unregistered class ".concat(i));const r=e.serialize?e.serialize(t,n):{};if(!e.serialize){for(const e in t)t.hasOwnProperty(e)&&(qr[i].omit.indexOf(e)>=0||(r[e]=Jr(t[e],n)));t instanceof Error&&(r.message=t.message)}if(r.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==i&&(r.$name=i),r}throw new Error("can't serialize object of type "+typeof t)}function $r(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Kr(t)||Qr(t)||ArrayBuffer.isView(t)||t instanceof e.ImageData)return t;if(Array.isArray(t))return t.map($r);if("object"==typeof t){const e=t.$name||"Object",{klass:n}=qr[e];if(!n)throw new Error("can't deserialize unregistered class ".concat(e));if(n.deserialize)return n.deserialize(t);const i=Object.create(n.prototype);for(const r of Object.keys(t))"$name"!==r&&(i[r]=$r(t[r]));return i}throw new Error("can't deserialize object of type "+typeof t)}const ts={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function es(t){for(const e of t)if(rs(e.charCodeAt(0)))return!0;return!1}function ns(t){for(const e of t)if(!is(e.charCodeAt(0)))return!1;return!0}function is(t){return!(ts.Arabic(t)||ts["Arabic Supplement"](t)||ts["Arabic Extended-A"](t)||ts["Arabic Presentation Forms-A"](t)||ts["Arabic Presentation Forms-B"](t))}function rs(t){return!(746!==t&&747!==t&&(t<4352||!(ts["Bopomofo Extended"](t)||ts.Bopomofo(t)||ts["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||ts["CJK Compatibility Ideographs"](t)||ts["CJK Compatibility"](t)||ts["CJK Radicals Supplement"](t)||ts["CJK Strokes"](t)||!(!ts["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||ts["CJK Unified Ideographs Extension A"](t)||ts["CJK Unified Ideographs"](t)||ts["Enclosed CJK Letters and Months"](t)||ts["Hangul Compatibility Jamo"](t)||ts["Hangul Jamo Extended-A"](t)||ts["Hangul Jamo Extended-B"](t)||ts["Hangul Jamo"](t)||ts["Hangul Syllables"](t)||ts.Hiragana(t)||ts["Ideographic Description Characters"](t)||ts.Kanbun(t)||ts["Kangxi Radicals"](t)||ts["Katakana Phonetic Extensions"](t)||ts.Katakana(t)&&12540!==t||!(!ts["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!ts["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||ts["Unified Canadian Aboriginal Syllabics"](t)||ts["Unified Canadian Aboriginal Syllabics Extended"](t)||ts["Vertical Forms"](t)||ts["Yijing Hexagram Symbols"](t)||ts["Yi Syllables"](t)||ts["Yi Radicals"](t))))}function ss(t){return!(rs(t)||function(t){return!!(ts["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||ts["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||ts["Letterlike Symbols"](t)||ts["Number Forms"](t)||ts["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||ts["Control Pictures"](t)&&9251!==t||ts["Optical Character Recognition"](t)||ts["Enclosed Alphanumerics"](t)||ts["Geometric Shapes"](t)||ts["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||ts["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||ts["CJK Symbols and Punctuation"](t)||ts.Katakana(t)||ts["Private Use Area"](t)||ts["CJK Compatibility Forms"](t)||ts["Small Form Variants"](t)||ts["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function os(t){return t>=1424&&t<=2303||ts["Arabic Presentation Forms-A"](t)||ts["Arabic Presentation Forms-B"](t)}function as(t,e){return!(!e&&os(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||ts.Khmer(t))}function ls(t){for(const e of t)if(os(e.charCodeAt(0)))return!0;return!1}const hs="deferred",cs="loading",us="loaded";let ps=null,ds="unavailable",fs=null;const ms=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(ds="error"),ps&&ps(t)};function gs(){ys.fire(new Qt("pluginStateChange",{pluginStatus:ds,pluginURL:fs}))}const ys=new $t,vs=function(){return ds},_s=function(){if(ds!==hs||!fs)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ds=cs,gs(),fs&&pt({url:fs},(t=>{t?ms(t):(ds=us,gs())}))},Ts={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ds===us||null!=Ts.applyArabicShaping,isLoading:()=>ds===cs,setState(t){ds=t.pluginStatus,fs=t.pluginURL},isParsed:()=>null!=Ts.applyArabicShaping&&null!=Ts.processBidirectionalText&&null!=Ts.processStyledBidirectionalText,getPluginURL:()=>fs};class Es{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.transition=e.transition,this.pitch=e.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(t){return function(t,e){for(const n of t)if(!as(n.charCodeAt(0),e))return!1;return!0}(t,Ts.isLoaded())}}class xs{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(zi(t))return new tr(t,e);if(Xi(t)){const n=$i(t,e);if("error"===n.result)throw new Error(n.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));return n.value}{let n=t;return"string"==typeof t&&"color"===e.type&&(n=Oe.parse(t)),{kind:"constant",evaluate:()=>n}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}class bs{constructor(t){this.property=t,this.value=new xs(t,void 0)}transitioned(t,e){return new ws(this.property,this.value,e,N({},t.transition,this.transition),t.now)}untransitioned(){return new ws(this.property,this.value,null,{},0)}}class Is{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return H(this._values[t].value.value)}setValue(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new bs(this._values[t].property)),this._values[t].value=new xs(this._values[t].property,null===e?void 0:H(e))}getTransition(t){return H(this._values[t].transition)}setTransition(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new bs(this._values[t].property)),this._values[t].transition=H(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n);const i=this.getTransition(e);void 0!==i&&(t["".concat(e,"-transition")]=i)}return t}transitioned(t,e){const n=new Ss(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].transitioned(t,e._values[i]);return n}untransitioned(){const t=new Ss(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class ws{constructor(t,e,n,i,r){const s=i.delay||0,o=i.duration||0;r=r||0,this.property=t,this.value=e,this.begin=r+s,this.end=this.begin+o,t.specification.transition&&(i.delay||i.duration)&&(this.prior=n)}possiblyEvaluate(t,e,n){const i=t.now||0,r=this.value.possiblyEvaluate(t,e,n),s=this.prior;if(s){if(i>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(i<this.begin)return s.possiblyEvaluate(t,e,n);{const o=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(s.possiblyEvaluate(t,e,n),r,I(o))}}return r}}class Ss{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,n){const i=new As(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(t,e,n);return i}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Rs{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return H(this._values[t].value)}setValue(t,e){this._values[t]=new xs(this._values[t].property,null===e?void 0:H(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n)}return t}possiblyEvaluate(t,e,n){const i=new As(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(t,e,n);return i}}class Cs{constructor(t,e,n){this.property=t,this.value=e,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,n,i){return this.property.evaluate(this.value,this.parameters,t,e,n,i)}}class As{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Ds{constructor(t){this.specification=t}possiblyEvaluate(t,e){return t.expression.evaluate(e)}interpolate(t,e,n){const i=Mn[this.specification.type];return i?i(t,e,n):t}}class Os{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,n,i){return new Cs(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,i)}:t.expression,e)}interpolate(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Cs(this,{kind:"constant",value:void 0},t.parameters);const i=Mn[this.specification.type];return i?new Cs(this,{kind:"constant",value:i(t.value.value,e.value.value,n)},t.parameters):t}evaluate(t,e,n,i,r,s){return"constant"===t.kind?t.value:t.evaluate(e,n,i,r,s)}}class Ns{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,i){return!!t.expression.evaluate(e,null,{},n,i)}interpolate(){return!1}}class Ms{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const e=new Es(0,{});for(const n in t){const i=t[n];i.specification.overridable&&this.overridableProperties.push(n);const r=this.defaultPropertyValues[n]=new xs(i,void 0),s=this.defaultTransitionablePropertyValues[n]=new bs(i);this.defaultTransitioningPropertyValues[n]=s.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=r.possiblyEvaluate(e)}}}function Ps(t,e){return 256*(t=R(Math.floor(t),0,255))+R(Math.floor(e),0,255)}Xr(Os,"DataDrivenProperty"),Xr(Ds,"DataConstantProperty"),Xr(Ns,"ColorRampProperty");const Fs={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ls{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ks{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Us(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=0;return{members:t.map((t=>{const r=Fs[t.type].BYTES_PER_ELEMENT,s=n=Bs(n,Math.max(e,r)),o=t.components||1;return i=Math.max(i,r),n+=r*o,{name:t.name,type:t.type,components:o,offset:s}})),size:Bs(n,Math.max(i,e)),alignment:e}}function Bs(t,e){return Math.ceil(t/e)*e}class zs extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.int16[i+0]=e,this.int16[i+1]=n,t}}zs.prototype.bytesPerElement=4,Xr(zs,"StructArrayLayout2i4");class Gs extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.int16[r+0]=e,this.int16[r+1]=n,this.int16[r+2]=i,t}}Gs.prototype.bytesPerElement=6,Xr(Gs,"StructArrayLayout3i6");class Hs extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const s=4*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,t}}Hs.prototype.bytesPerElement=8,Xr(Hs,"StructArrayLayout4i8");class js extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,s,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,r,s,o)}emplace(t,e,n,i,r,s,o,a){const l=6*t,h=12*t,c=3*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.uint8[h+4]=i,this.uint8[h+5]=r,this.uint8[h+6]=s,this.uint8[h+7]=o,this.float32[c+2]=a,t}}js.prototype.bytesPerElement=12,Xr(js,"StructArrayLayout2i4ub1f12");class Vs extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const s=4*t;return this.float32[s+0]=e,this.float32[s+1]=n,this.float32[s+2]=i,this.float32[s+3]=r,t}}Vs.prototype.bytesPerElement=16,Xr(Vs,"StructArrayLayout4f16");class Ws extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,i,r)}emplace(t,e,n,i,r,s){const o=6*t,a=3*t;return this.uint16[o+0]=e,this.uint16[o+1]=n,this.uint16[o+2]=i,this.uint16[o+3]=r,this.float32[a+2]=s,t}}Ws.prototype.bytesPerElement=12,Xr(Ws,"StructArrayLayout4ui1f12");class Zs extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const s=4*t;return this.uint16[s+0]=e,this.uint16[s+1]=n,this.uint16[s+2]=i,this.uint16[s+3]=r,t}}Zs.prototype.bytesPerElement=8,Xr(Zs,"StructArrayLayout4ui8");class Ys extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,s){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,i,r,s)}emplace(t,e,n,i,r,s,o){const a=6*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.int16[a+2]=i,this.int16[a+3]=r,this.int16[a+4]=s,this.int16[a+5]=o,t}}Ys.prototype.bytesPerElement=12,Xr(Ys,"StructArrayLayout6i12");class qs extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,s,o,a,l,h,c,u){const p=this.length;return this.resize(p+1),this.emplace(p,t,e,n,i,r,s,o,a,l,h,c,u)}emplace(t,e,n,i,r,s,o,a,l,h,c,u,p){const d=12*t;return this.int16[d+0]=e,this.int16[d+1]=n,this.int16[d+2]=i,this.int16[d+3]=r,this.uint16[d+4]=s,this.uint16[d+5]=o,this.uint16[d+6]=a,this.uint16[d+7]=l,this.int16[d+8]=h,this.int16[d+9]=c,this.int16[d+10]=u,this.int16[d+11]=p,t}}qs.prototype.bytesPerElement=24,Xr(qs,"StructArrayLayout4i4ui4i24");class Xs extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,s){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,i,r,s)}emplace(t,e,n,i,r,s,o){const a=10*t,l=5*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.int16[a+2]=i,this.float32[l+2]=r,this.float32[l+3]=s,this.float32[l+4]=o,t}}Xs.prototype.bytesPerElement=20,Xr(Xs,"StructArrayLayout3i3f20");class Ks extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}Ks.prototype.bytesPerElement=4,Xr(Ks,"StructArrayLayout1ul4");class Qs extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,s,o,a,l,h,c,u,p){const d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,i,r,s,o,a,l,h,c,u,p)}emplace(t,e,n,i,r,s,o,a,l,h,c,u,p,d){const f=20*t,m=10*t;return this.int16[f+0]=e,this.int16[f+1]=n,this.int16[f+2]=i,this.int16[f+3]=r,this.int16[f+4]=s,this.float32[m+3]=o,this.float32[m+4]=a,this.float32[m+5]=l,this.float32[m+6]=h,this.int16[f+14]=c,this.uint32[m+8]=u,this.uint16[f+18]=p,this.uint16[f+19]=d,t}}Qs.prototype.bytesPerElement=40,Xr(Qs,"StructArrayLayout5i4f1i1ul2ui40");class Js extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,s,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,r,s,o)}emplace(t,e,n,i,r,s,o,a){const l=8*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=i,this.int16[l+4]=r,this.int16[l+5]=s,this.int16[l+6]=o,this.int16[l+7]=a,t}}Js.prototype.bytesPerElement=16,Xr(Js,"StructArrayLayout3i2i2i16");class $s extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,i,r)}emplace(t,e,n,i,r,s){const o=4*t,a=8*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=i,this.int16[a+6]=r,this.int16[a+7]=s,t}}$s.prototype.bytesPerElement=16,Xr($s,"StructArrayLayout2f1f2i16");class to extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const s=12*t,o=3*t;return this.uint8[s+0]=e,this.uint8[s+1]=n,this.float32[o+1]=i,this.float32[o+2]=r,t}}to.prototype.bytesPerElement=12,Xr(to,"StructArrayLayout2ub2f12");class eo extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.float32[r+0]=e,this.float32[r+1]=n,this.float32[r+2]=i,t}}eo.prototype.bytesPerElement=12,Xr(eo,"StructArrayLayout3f12");class no extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,this.uint16[r+2]=i,t}}no.prototype.bytesPerElement=6,Xr(no,"StructArrayLayout3ui6");class io extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T){const E=this.length;return this.resize(E+1),this.emplace(E,t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T)}emplace(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T,E){const x=30*t,b=15*t,I=60*t;return this.int16[x+0]=e,this.int16[x+1]=n,this.int16[x+2]=i,this.float32[b+2]=r,this.float32[b+3]=s,this.uint16[x+8]=o,this.uint16[x+9]=a,this.uint32[b+5]=l,this.uint32[b+6]=h,this.uint32[b+7]=c,this.uint16[x+16]=u,this.uint16[x+17]=p,this.uint16[x+18]=d,this.float32[b+10]=f,this.float32[b+11]=m,this.uint8[I+48]=g,this.uint8[I+49]=y,this.uint8[I+50]=v,this.uint32[b+13]=_,this.int16[x+28]=T,this.uint8[I+58]=E,t}}io.prototype.bytesPerElement=60,Xr(io,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class ro extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T,E,x,b,I,w,S,R,C,A){const D=this.length;return this.resize(D+1),this.emplace(D,t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T,E,x,b,I,w,S,R,C,A)}emplace(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T,E,x,b,I,w,S,R,C,A,D){const O=38*t,N=19*t;return this.int16[O+0]=e,this.int16[O+1]=n,this.int16[O+2]=i,this.float32[N+2]=r,this.float32[N+3]=s,this.int16[O+8]=o,this.int16[O+9]=a,this.int16[O+10]=l,this.int16[O+11]=h,this.int16[O+12]=c,this.int16[O+13]=u,this.uint16[O+14]=p,this.uint16[O+15]=d,this.uint16[O+16]=f,this.uint16[O+17]=m,this.uint16[O+18]=g,this.uint16[O+19]=y,this.uint16[O+20]=v,this.uint16[O+21]=_,this.uint16[O+22]=T,this.uint16[O+23]=E,this.uint16[O+24]=x,this.uint16[O+25]=b,this.uint16[O+26]=I,this.uint16[O+27]=w,this.uint16[O+28]=S,this.uint32[N+15]=R,this.float32[N+16]=C,this.float32[N+17]=A,this.float32[N+18]=D,t}}ro.prototype.bytesPerElement=76,Xr(ro,"StructArrayLayout3i2f6i15ui1ul3f76");class so extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}so.prototype.bytesPerElement=4,Xr(so,"StructArrayLayout1f4");class oo extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,i,r)}emplace(t,e,n,i,r,s){const o=5*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=i,this.float32[o+3]=r,this.float32[o+4]=s,t}}oo.prototype.bytesPerElement=20,Xr(oo,"StructArrayLayout5f20");class ao extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const s=6*t;return this.uint32[3*t+0]=e,this.uint16[s+2]=n,this.uint16[s+3]=i,this.uint16[s+4]=r,t}}ao.prototype.bytesPerElement=12,Xr(ao,"StructArrayLayout1ul3ui12");class lo extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,t}}lo.prototype.bytesPerElement=4,Xr(lo,"StructArrayLayout2ui4");class ho extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}ho.prototype.bytesPerElement=2,Xr(ho,"StructArrayLayout1ui2");class co extends ks{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.float32[i+0]=e,this.float32[i+1]=n,t}}co.prototype.bytesPerElement=8,Xr(co,"StructArrayLayout2f8");class uo extends Ls{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}uo.prototype.size=40;class po extends Qs{get(t){return new uo(this,t)}}Xr(po,"CollisionBoxArray");class fo extends Ls{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t}}fo.prototype.size=60;class mo extends io{get(t){return new fo(this,t)}}Xr(mo,"PlacedSymbolArray");class go extends Ls{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(t){this._structArray.uint32[this._pos4+15]=t}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}go.prototype.size=76;class yo extends ro{get(t){return new go(this,t)}}Xr(yo,"SymbolInstanceArray");class vo extends so{getoffsetX(t){return this.float32[1*t+0]}}Xr(vo,"GlyphOffsetArray");class _o extends zs{getx(t){return this.int16[2*t+0]}gety(t){return this.int16[2*t+1]}}Xr(_o,"SymbolLineVertexArray");class To extends Ls{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}To.prototype.size=12;class Eo extends ao{get(t){return new To(this,t)}}Xr(Eo,"FeatureIndexArray");class xo extends lo{geta_centroid_pos0(t){return this.uint16[2*t+0]}geta_centroid_pos1(t){return this.uint16[2*t+1]}}Xr(xo,"FillExtrusionCentroidArray");const bo=Us([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Io=Us([{name:"a_dash",components:4,type:"Uint16"}]);var wo={exports:{}},So={exports:{}};So.exports=function(t,e){var n,i,r,s,o,a,l,h;for(i=t.length-(n=3&t.length),r=e,o=3432918353,a=461845907,h=0;h<i;)l=255&t.charCodeAt(h)|(255&t.charCodeAt(++h))<<8|(255&t.charCodeAt(++h))<<16|(255&t.charCodeAt(++h))<<24,++h,r=27492+(65535&(s=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(s>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(h+2))<<16;case 2:l^=(255&t.charCodeAt(h+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(h)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0};var Ro=So.exports,Co={exports:{}};Co.exports=function(t,e){for(var n,i=t.length,r=e^i,s=0;i>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(s)|(255&t.charCodeAt(++s))<<8|(255&t.charCodeAt(++s))<<16|(255&t.charCodeAt(++s))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++s;switch(i){case 3:r^=(255&t.charCodeAt(s+2))<<16;case 2:r^=(255&t.charCodeAt(s+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(s)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0};var Ao=Ro,Do=Co.exports;wo.exports=Ao,wo.exports.murmur3=Ao,wo.exports.murmur2=Do;var Oo=p(wo.exports);class No{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,n,i){this.ids.push(Mo(t)),this.positions.push(e,n,i)}getPositions(t){const e=Mo(t);let n=0,i=this.ids.length-1;for(;n<i;){const t=n+i>>1;this.ids[t]>=e?i=t:n=t+1}const r=[];for(;this.ids[n]===e;)r.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return r}static serialize(t,e){const n=new Float64Array(t.ids),i=new Uint32Array(t.positions);return Po(n,i,0,n.length-1),e&&e.push(n.buffer,i.buffer),{ids:n,positions:i}}static deserialize(t){const e=new No;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function Mo(t){const e=+t;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:Oo(String(t))}function Po(t,e,n,i){for(;n<i;){const r=t[n+i>>1];let s=n-1,o=i+1;for(;;){do{s++}while(t[s]<r);do{o--}while(t[o]>r);if(s>=o)break;Fo(t,s,o),Fo(e,3*s,3*o),Fo(e,3*s+1,3*o+1),Fo(e,3*s+2,3*o+2)}o-n<i-o?(Po(t,e,n,o),n=o+1):(Po(t,e,o+1,i),i=o)}}function Fo(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}Xr(No,"FeaturePositionMap");class Lo{constructor(t){this.gl=t.gl,this.initialized=!1}fetchUniformLocation(t,e){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(t,e),this.initialized=!0),!!this.location}}class ko extends Lo{constructor(t){super(t),this.current=0}set(t,e,n){this.fetchUniformLocation(t,e)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Uo extends Lo{constructor(t){super(t),this.current=[0,0,0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3])))}}class Bo extends Lo{constructor(t){super(t),this.current=Oe.transparent}set(t,e,n){this.fetchUniformLocation(t,e)&&(n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a)))}}const zo=new Float32Array(16),Go=new Float32Array(9),Ho=new Float32Array(4);function jo(t){return[Ps(255*t.r,255*t.g),Ps(255*t.b,255*t.a)]}class Vo{constructor(t,e,n){this.value=t,this.uniformNames=e.map((t=>"u_".concat(t))),this.type=n}setUniform(t,e,n,i,r){e.set(t,r,i.constantOr(this.value))}getBinding(t,e){return"color"===this.type?new Bo(t):new ko(t)}}class Wo{constructor(t,e){this.uniformNames=e.map((t=>"u_".concat(t))),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(t){this.pixelRatio=t.pixelRatio||1,this.pattern=t.tl.concat(t.br)}setUniform(t,e,n,i,r){const s="u_pattern"===r||"u_dash"===r?this.pattern:"u_pixel_ratio"===r?this.pixelRatio:null;s&&e.set(t,r,s)}getBinding(t,e){return"u_pattern"===e||"u_dash"===e?new Uo(t):new ko(t)}}class Zo{constructor(t,e,n,i){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:"a_".concat(t),type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new i}populatePaintArray(t,e,n,i,r,s){const o=this.paintVertexArray.length,a=this.expression.evaluate(new Es(0),e,{},r,i,s);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)}updatePaintArray(t,e,n,i,r){const s=this.expression.evaluate({zoom:0},n,i,void 0,r);this._setPaintValue(t,e,s)}_setPaintValue(t,e,n){if("color"===this.type){const i=jo(n);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i[0],i[1])}else{for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Yo{constructor(t,e,n,i,r,s){this.expression=t,this.uniformNames=e.map((t=>"u_".concat(t,"_t"))),this.type=n,this.useIntegerZoom=i,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:"a_".concat(t),type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new s}populatePaintArray(t,e,n,i,r,s){const o=this.expression.evaluate(new Es(this.zoom),e,{},r,i,s),a=this.expression.evaluate(new Es(this.zoom+1),e,{},r,i,s),l=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(l,t,o,a)}updatePaintArray(t,e,n,i,r){const s=this.expression.evaluate({zoom:this.zoom},n,i,void 0,r),o=this.expression.evaluate({zoom:this.zoom+1},n,i,void 0,r);this._setPaintValue(t,e,s,o)}_setPaintValue(t,e,n,i){if("color"===this.type){const r=jo(n),s=jo(i);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1],s[0],s[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e,n,i,r){const s=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,o=R(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);e.set(t,r,o)}getBinding(t,e){return new ko(t)}}class qo{constructor(t,e,n,i,r){this.expression=t,this.layerId=r,this.paintVertexAttributes=("array"===n?Io:bo).members;for(let s=0;s<e.length;++s);this.paintVertexArray=new i}populatePaintArray(t,e,n){const i=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValues(i,t,e.patterns&&e.patterns[this.layerId],n)}updatePaintArray(t,e,n,i,r,s){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],s)}_setPaintValues(t,e,n,i){if(!i||!n)return;const r=i[n];if(!r)return;const{tl:s,br:o,pixelRatio:a}=r;for(let l=t;l<e;l++)this.paintVertexArray.emplace(l,s[0],s[1],o[0],o[1],a)}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Xo{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.binders={},this._buffers=[];const i=[];for(const r in t.paint._values){if(!n(r))continue;const s=t.paint.get(r);if(!(s instanceof Cs&&Li(s.property.specification)))continue;const o=Jo(r,t.type),a=s.value,l=s.property.specification.type,h=!!s.property.useIntegerZoom,c="line-dasharray"===r||r.endsWith("pattern"),u="line-dasharray"===r&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==a.kind||u)if("source"===a.kind||u||c){const e=ea(r,l,"source");this.binders[r]=c?new qo(a,o,l,e,t.id):new Zo(a,o,l,e),i.push("/a_".concat(r))}else{const t=ea(r,l,"composite");this.binders[r]=new Yo(a,o,l,h,e,t),i.push("/z_".concat(r))}else this.binders[r]=c?new Wo(a.value,o):new Vo(a.value,o,l),i.push("/u_".concat(r))}this.cacheKey=i.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof Zo||e instanceof Yo?e.maxValue:0}populatePaintArrays(t,e,n,i,r,s){for(const o in this.binders){const a=this.binders[o];(a instanceof Zo||a instanceof Yo||a instanceof qo)&&a.populatePaintArray(t,e,n,i,r,s)}}setConstantPatternPositions(t){for(const e in this.binders){const n=this.binders[e];n instanceof Wo&&n.setConstantPatternPositions(t)}}updatePaintArrays(t,e,n,i,r,s){let o=!1;for(const a in t){const l=e.getPositions(a);for(const e of l){const l=n.feature(e.index);for(const n in this.binders){const h=this.binders[n];if((h instanceof Zo||h instanceof Yo||h instanceof qo)&&!0===h.expression.isStateDependent){const c=i.paint.get(n);h.expression=c.value,h.updatePaintArray(e.start,e.end,l,t[a],r,s),o=!0}}}}return o}defines(){const t=[];for(const e in this.binders){const n=this.binders[e];(n instanceof Vo||n instanceof Wo)&&t.push(...n.uniformNames.map((t=>"#define HAS_UNIFORM_".concat(t))))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof Zo||n instanceof Yo||n instanceof qo)for(let e=0;e<n.paintVertexAttributes.length;e++)t.push(n.paintVertexAttributes[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof Vo||n instanceof Wo||n instanceof Yo)for(const e of n.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t){const e=[];for(const n in this.binders){const i=this.binders[n];if(i instanceof Vo||i instanceof Wo||i instanceof Yo)for(const r of i.uniformNames)e.push({name:r,property:n,binding:i.getBinding(t,r)})}return e}setUniforms(t,e,n,i,r){for(const{name:s,property:o,binding:a}of n)this.binders[o].setUniform(t,a,r,i.get(o),s)}updatePaintBuffers(){this._buffers=[];for(const t in this.binders){const e=this.binders[t];(e instanceof Zo||e instanceof Yo||e instanceof qo)&&e.paintVertexBuffer&&this._buffers.push(e.paintVertexBuffer)}}upload(t){for(const e in this.binders){const n=this.binders[e];(n instanceof Zo||n instanceof Yo||n instanceof qo)&&n.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof Zo||e instanceof Yo||e instanceof qo)&&e.destroy()}}}class Ko{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.programConfigurations={};for(const i of t)this.programConfigurations[i.id]=new Xo(i,e,n);this.needsUpload=!1,this._featureMap=new No,this._bufferOffset=0}populatePaintArrays(t,e,n,i,r,s,o){for(const a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,i,r,s,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,n,i,r){for(const s of n)this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(t,this._featureMap,e,s,i,r)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const Qo={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Jo(t,e){return Qo[t]||[t.replace("".concat(e,"-"),"").replace(/-/g,"_")]}const $o={"line-pattern":{source:Ws,composite:Ws},"fill-pattern":{source:Ws,composite:Ws},"fill-extrusion-pattern":{source:Ws,composite:Ws},"line-dasharray":{source:Zs,composite:Zs}},ta={color:{source:co,composite:Vs},number:{source:so,composite:co}};function ea(t,e,n){const i=$o[t];return i&&i[n]||ta[e][n]}Xr(Vo,"ConstantBinder"),Xr(Wo,"PatternConstantBinder"),Xr(Zo,"SourceExpressionBinder"),Xr(qo,"PatternCompositeBinder"),Xr(Yo,"CompositeExpressionBinder"),Xr(Xo,"ProgramConfiguration",{omit:["_buffers"]}),Xr(Ko,"ProgramConfigurationSet");const na="-transition";class ia extends $t{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new Rs(e.layout)),e.paint)){this._transitionablePaint=new Is(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new As(e.paint)}}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=e&&this._validate(Gr,"layers.".concat(this.id,".layout.").concat(t),t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return B(t,na)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e&&this._validate(zr,"layers.".concat(this.id,".paint.").concat(t),t,e,n))return!1;if(B(t,na))return this._transitionablePaint.setTransition(t.slice(0,-11),e||void 0),!1;{const n=this._transitionablePaint._values[t],i=n.value.isDataDriven(),r=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const s=this._transitionablePaint._values[t].value,o=s.isDataDriven(),a=B(t,"pattern")||"line-dasharray"===t;return o||i||a||this._handleOverridablePaintPropertyUpdate(t,r,s)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,e,n){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),G(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!r||!1!==r.validate)&&jr(this,t.call(Br,{key:e,layerType:this.type,objectKey:n,value:i,styleSpec:te,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof Cs&&Li(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=ur(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const ra=Us([{name:"a_pos",components:2,type:"Int16"}],4),sa=Us([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class oa{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.segments=t}prepareSegment(t,e,n,i){let r=this.segments[this.segments.length-1];return t>oa.MAX_VERTEX_ARRAY_LENGTH&&V("Max vertices per segment is ".concat(oa.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(t)),(!r||r.vertexLength+t>oa.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==i)&&(r={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==i&&(r.sortKey=i),this.segments.push(r)),r}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,n,i){return new oa([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])}}oa.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Xr(oa,"SegmentVector");var aa=8192;class la{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Hl?new Hl(t.lng,t.lat):Hl.convert(t),this}setSouthWest(t){return this._sw=t instanceof Hl?new Hl(t.lng,t.lat):Hl.convert(t),this}extend(t){const e=this._sw,n=this._ne;let i,r;if(t instanceof Hl)i=t,r=t;else{if(!(t instanceof la))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(la.convert(t)):this.extend(Hl.convert(t)):"object"==typeof t&&null!==t&&t.hasOwnProperty("lat")&&(t.hasOwnProperty("lon")||t.hasOwnProperty("lng"))?this.extend(Hl.convert(t)):this;if(i=t._sw,r=t._ne,!i||!r)return this}return e||n?(e.lng=Math.min(i.lng,e.lng),e.lat=Math.min(i.lat,e.lat),n.lng=Math.max(r.lng,n.lng),n.lat=Math.max(r.lat,n.lat)):(this._sw=new Hl(i.lng,i.lat),this._ne=new Hl(r.lng,r.lat)),this}getCenter(){return new Hl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Hl(this.getWest(),this.getNorth())}getSouthEast(){return new Hl(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:n}=Hl.convert(t);let i=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&i}static convert(t){return!t||t instanceof la?t:new la(t)}}var ha=1e-6,ca="undefined"!=typeof Float32Array?Float32Array:Array;function ua(){var t=new ca(9);return ca!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function pa(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],h=e[6],c=e[7],u=e[8],p=n[0],d=n[1],f=n[2],m=n[3],g=n[4],y=n[5],v=n[6],_=n[7],T=n[8];return t[0]=p*i+d*o+f*h,t[1]=p*r+d*a+f*c,t[2]=p*s+d*l+f*u,t[3]=m*i+g*o+y*h,t[4]=m*r+g*a+y*c,t[5]=m*s+g*l+y*u,t[6]=v*i+_*o+T*h,t[7]=v*r+_*a+T*c,t[8]=v*s+_*l+T*u,t}function da(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fa(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],h=e[7],c=e[8],u=e[9],p=e[10],d=e[11],f=e[12],m=e[13],g=e[14],y=e[15],v=n*a-i*o,_=n*l-r*o,T=n*h-s*o,E=i*l-r*a,x=i*h-s*a,b=r*h-s*l,I=c*m-u*f,w=c*g-p*f,S=c*y-d*f,R=u*g-p*m,C=u*y-d*m,A=p*y-d*g,D=v*A-_*C+T*R+E*S-x*w+b*I;return D?(t[0]=(a*A-l*C+h*R)*(D=1/D),t[1]=(r*C-i*A-s*R)*D,t[2]=(m*b-g*x+y*E)*D,t[3]=(p*x-u*b-d*E)*D,t[4]=(l*S-o*A-h*w)*D,t[5]=(n*A-r*S+s*w)*D,t[6]=(g*T-f*b-y*_)*D,t[7]=(c*b-p*T+d*_)*D,t[8]=(o*C-a*S+h*I)*D,t[9]=(i*S-n*C-s*I)*D,t[10]=(f*x-m*T+y*v)*D,t[11]=(u*T-c*x-d*v)*D,t[12]=(a*w-o*R-l*I)*D,t[13]=(n*R-i*w+r*I)*D,t[14]=(m*_-f*E-g*v)*D,t[15]=(c*E-u*_+p*v)*D,t):null}function ma(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],h=e[6],c=e[7],u=e[8],p=e[9],d=e[10],f=e[11],m=e[12],g=e[13],y=e[14],v=e[15],_=n[0],T=n[1],E=n[2],x=n[3];return t[0]=_*i+T*a+E*u+x*m,t[1]=_*r+T*l+E*p+x*g,t[2]=_*s+T*h+E*d+x*y,t[3]=_*o+T*c+E*f+x*v,t[4]=(_=n[4])*i+(T=n[5])*a+(E=n[6])*u+(x=n[7])*m,t[5]=_*r+T*l+E*p+x*g,t[6]=_*s+T*h+E*d+x*y,t[7]=_*o+T*c+E*f+x*v,t[8]=(_=n[8])*i+(T=n[9])*a+(E=n[10])*u+(x=n[11])*m,t[9]=_*r+T*l+E*p+x*g,t[10]=_*s+T*h+E*d+x*y,t[11]=_*o+T*c+E*f+x*v,t[12]=(_=n[12])*i+(T=n[13])*a+(E=n[14])*u+(x=n[15])*m,t[13]=_*r+T*l+E*p+x*g,t[14]=_*s+T*h+E*d+x*y,t[15]=_*o+T*c+E*f+x*v,t}function ga(t,e,n){var i,r,s,o,a,l,h,c,u,p,d,f,m=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],h=e[6],c=e[7],u=e[8],p=e[9],d=e[10],f=e[11],t[0]=i=e[0],t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=h,t[7]=c,t[8]=u,t[9]=p,t[10]=d,t[11]=f,t[12]=i*m+a*g+u*y+e[12],t[13]=r*m+l*g+p*y+e[13],t[14]=s*m+h*g+d*y+e[14],t[15]=o*m+c*g+f*y+e[15]),t}function ya(t,e,n){var i=n[0],r=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function va(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],h=e[8],c=e[9],u=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+h*i,t[5]=o*r+c*i,t[6]=a*r+u*i,t[7]=l*r+p*i,t[8]=h*r-s*i,t[9]=c*r-o*i,t[10]=u*r-a*i,t[11]=p*r-l*i,t}function _a(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],h=e[8],c=e[9],u=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-h*i,t[1]=o*r-c*i,t[2]=a*r-u*i,t[3]=l*r-p*i,t[8]=s*i+h*r,t[9]=o*i+c*r,t[10]=a*i+u*r,t[11]=l*i+p*r,t}function Ta(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ea(t,e,n){var i,r,s,o=n[0],a=n[1],l=n[2],h=Math.hypot(o,a,l);return h<ha?null:(o*=h=1/h,a*=h,l*=h,i=Math.sin(e),r=Math.cos(e),t[0]=o*o*(s=1-r)+r,t[1]=a*o*s+l*i,t[2]=l*o*s-a*i,t[3]=0,t[4]=o*a*s-l*i,t[5]=a*a*s+r,t[6]=l*a*s+o*i,t[7]=0,t[8]=o*l*s+a*i,t[9]=a*l*s-o*i,t[10]=l*l*s+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var xa=ma;function ba(){var t=new ca(3);return ca!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ia(t){var e=new ca(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function wa(t){return Math.hypot(t[0],t[1],t[2])}function Sa(t,e,n){var i=new ca(3);return i[0]=t,i[1]=e,i[2]=n,i}function Ra(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Ca(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Aa(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Da(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function Oa(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function Na(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Ma(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function Pa(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function Fa(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function La(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=r*l-s*a,t[1]=s*o-i*l,t[2]=i*a-r*o,t}function ka(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];return t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/(o=o||1),t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o,t}function Ua(t,e,n){var i=n[0],r=n[1],s=n[2],o=e[0],a=e[1],l=e[2],h=r*l-s*a,c=s*o-i*l,u=i*a-r*o,p=r*u-s*c,d=s*h-i*u,f=i*c-r*h,m=2*n[3];return c*=m,u*=m,d*=2,f*=2,t[0]=o+(h*=m)+(p*=2),t[1]=a+c+d,t[2]=l+u+f,t}var Ba,za=Ca,Ga=Aa,Ha=wa;function ja(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Va(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=s*o,t}function Wa(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*s+n[12]*o,t[1]=n[1]*i+n[5]*r+n[9]*s+n[13]*o,t[2]=n[2]*i+n[6]*r+n[10]*s+n[14]*o,t[3]=n[3]*i+n[7]*r+n[11]*s+n[15]*o,t}function Za(){var t=new ca(4);return ca!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Ya(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function qa(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l+o*a,t[1]=r*l+s*a,t[2]=s*l-r*a,t[3]=o*l-i*a,t}function Xa(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l-s*a,t[1]=r*l+o*a,t[2]=s*l+i*a,t[3]=o*l-r*a,t}ba(),Ba=new ca(4),ca!=Float32Array&&(Ba[0]=0,Ba[1]=0,Ba[2]=0,Ba[3]=0);var Ka=Va;ba(),Sa(1,0,0),Sa(0,1,0),Za(),Za(),ua();const Qa=Us([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Ja}=Qa,$a=Us([{name:"a_pos_3",components:3,type:"Int16"}]);var tl=Us([{name:"a_pos",type:"Int16",components:2}]);class el{constructor(t,e){this.pos=t,this.dir=e}intersectsPlane(t,e,n){const i=Fa(e,this.dir);if(Math.abs(i)<1e-6)return!1;const r=((t[0]-this.pos[0])*e[0]+(t[1]-this.pos[1])*e[1]+(t[2]-this.pos[2])*e[2])/i;return n[0]=this.pos[0]+this.dir[0]*r,n[1]=this.pos[1]+this.dir[1]*r,n[2]=this.pos[2]+this.dir[2]*r,!0}closestPointOnSphere(t,e,n){if(function(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2];return Math.abs(n-s)<=ha*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-o)<=ha*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=ha*Math.max(1,Math.abs(r),Math.abs(a))}(this.pos,t)||0===e)return n[0]=n[1]=n[2]=0,!1;const[i,r,s]=this.dir,o=this.pos[0]-t[0],a=this.pos[1]-t[1],l=this.pos[2]-t[2],h=i*i+r*r+s*s,c=2*(o*i+a*r+l*s),u=c*c-4*h*(o*o+a*a+l*l-e*e);if(u<0){const t=Math.max(-c/2,0),h=o+i*t,u=a+r*t,p=l+s*t,d=Math.hypot(h,u,p);return n[0]=h*e/d,n[1]=u*e/d,n[2]=p*e/d,!1}{const t=(-c-Math.sqrt(u))/(2*h);if(t<0){const t=Math.hypot(o,a,l);return n[0]=o*e/t,n[1]=a*e/t,n[2]=l*e/t,!1}return n[0]=o+i*t,n[1]=a+r*t,n[2]=l+s*t,!0}}}class nl{constructor(t,e,n,i,r){this.TL=t,this.TR=e,this.BR=n,this.BL=i,this.horizon=r}static fromInvProjectionMatrix(t,e,n){const i=[-1,1,1],r=[1,1,1],s=[1,-1,1],o=[-1,-1,1],a=ka(i,i,t),l=ka(r,r,t),h=ka(s,s,t),c=ka(o,o,t);return new nl(a,l,h,c,e/n)}}class il{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(t,e,n,i){const r=Math.pow(2,n),s=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const s=Wa([],n,t),o=1/s[3]/e*r;return function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}(s,s,[o,o,i?1/s[3]:o,o])})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const e=Pa([],La([],za([],s[t[0]],s[t[1]]),za([],s[t[2]],s[t[1]]))),n=-Fa(e,s[t[1]]);return e.concat(n)}));return new il(s,o)}}class rl{static fromPoints(t){const e=[1/0,1/0,1/0],n=[-1/0,-1/0,-1/0];for(const i of t)Da(e,e,i),Oa(n,n,i);return new rl(e,n)}static applyTransform(t,e){const n=t.getCorners();for(let i=0;i<n.length;++i)ka(n[i],n[i],e);return rl.fromPoints(n)}constructor(t,e){this.min=t,this.max=e,this.center=Na([],Ra([],this.min,this.max),.5)}quadrant(t){const e=[t%2==0,t<2],n=Ia(this.min),i=Ia(this.max);for(let r=0;r<e.length;r++)n[r]=e[r]?this.min[r]:this.center[r],i[r]=e[r]?this.center[r]:this.max[r];return i[2]=this.max[2],new rl(n,i)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}getCorners(){const t=this.min,e=this.max;return[[t[0],t[1],t[2]],[e[0],t[1],t[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],e[2]],[t[0],e[1],e[2]]]}intersects(t){const e=this.getCorners();let n=!0;for(let i=0;i<t.planes.length;i++){const r=t.planes[i];let s=0;for(let t=0;t<e.length;t++)s+=Fa(r,e[t])+r[3]>=0;if(0===s)return 0;s!==e.length&&(n=!1)}if(n)return 2;for(let i=0;i<3;i++){let e=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let r=0;r<t.points.length;r++){const s=t.points[r][i]-this.min[i];e=Math.min(e,s),n=Math.max(n,s)}if(n<0||e>this.max[i]-this.min[i])return 0}return 1}}const sl=5,ol=6,al=aa/Math.PI/2,ll=16383,hl=64,cl=[hl,32,16],ul=-al,pl=al,dl=[new rl([ul,ul,ul],[pl,pl,pl]),new rl([ul,ul,ul],[0,0,pl]),new rl([0,ul,ul],[pl,0,pl]),new rl([ul,0,ul],[0,pl,pl]),new rl([0,0,ul],[pl,pl,pl])];function fl(t){return t*al/Bl}function ml(t,e,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=Na([],t._camera.position,t.worldSize),s=[e,n,1,1];Wa(s,s,t.pixelMatrixInverse),ja(s,s,1/s[3]);const o=Pa([],za([],s,r)),a=t.globeMatrix,l=[a[12],a[13],a[14]],h=za([],l,r),c=wa(h),u=Pa([],h),p=t.worldSize/(2*Math.PI),d=Fa(u,o),f=Math.asin(p/c);if(f<Math.acos(d)){if(!i)return null;const t=[],e=[];Na(t,o,c/d),Pa(e,za(e,t,h)),Pa(o,Ra(o,h,Na(o,e,Math.tan(f)*c)))}const m=[];new el(r,o).closestPointOnSphere(l,p,m);const g=Pa([],J(a,0)),y=Pa([],J(a,1)),v=Pa([],J(a,2)),_=Fa(g,m),T=Fa(y,m),E=Fa(v,m),b=x(Math.asin(-T/p));let I=x(Math.atan2(_,E));I=t.center.lng+function(t,e){const n=(e-t+180)%360-180;return n<-180?n+360:n}(t.center.lng,I);const w=Vl(I),S=R(Wl(b),0,1);return new Jl(w,S)}class gl{constructor(t,e,n){this.a=za([],t,n),this.b=za([],e,n),this.center=n;const i=Pa([],this.a),r=Pa([],this.b);this.angle=Math.acos(Fa(i,r))}}function yl(t,e){if(0===t.angle)return null;let n;return n=0===t.a[e]?1/t.angle*.5*Math.PI:1/t.angle*Math.atan(t.b[e]/t.a[e]/Math.sin(t.angle)-1/Math.tan(t.angle)),n<0||n>1?null:function(t,e,n,i){const r=Math.sin(n);return t*(Math.sin((1-i)*n)/r)+e*(Math.sin(i*n)/r)}(t.a[e],t.b[e],t.angle,R(n,0,1))+t.center[e]}function vl(t){if(t.z<=1)return dl[t.z+2*t.y+t.x];const e=Il(bl(t));return rl.fromPoints(e)}function _l(t,e,n){return Na(t,t,1-n),Ma(t,t,e,n)}function Tl(t,e){const n=Ml(e.zoom);if(0===n)return vl(t);const i=bl(t),r=Il(i),s=Vl(i.getWest())*e.worldSize,o=Vl(i.getEast())*e.worldSize,a=Wl(i.getNorth())*e.worldSize,l=Wl(i.getSouth())*e.worldSize,h=[s,a,0],c=[o,a,0],u=[s,l,0],p=[o,l,0],d=fa([],e.globeMatrix);return ka(h,h,d),ka(c,c,d),ka(u,u,d),ka(p,p,d),r[0]=_l(r[0],u,n),r[1]=_l(r[1],p,n),r[2]=_l(r[2],c,n),r[3]=_l(r[3],h,n),rl.fromPoints(r)}function El(t,e,n){for(const i of t)ka(i,i,e),Na(i,i,n)}function xl(t,e,n){const i=e/t.worldSize,r=t.globeMatrix;if(n.z<=1){const t=vl(n).getCorners();return El(t,r,i),rl.fromPoints(t)}const s=bl(n),o=Il(s);El(o,r,i);const a=Number.MAX_VALUE,l=[-a,-a,-a],h=[a,a,a];if(s.contains(t.center)){for(const t of o)Da(h,h,t),Oa(l,l,t);l[2]=0;const e=t.point,n=[e.x*i,e.y*i,0];return Da(h,h,n),Oa(l,l,n),new rl(h,l)}const c=[r[12]*i,r[13]*i,r[14]*i],u=s.getCenter(),p=R(t.center.lat,-Kl,Kl),d=R(u.lat,-Kl,Kl),f=Vl(t.center.lng),m=Wl(p);let g=f-Vl(u.lng);const y=m-Wl(d);g>.5?g-=1:g<-.5&&(g+=1);let v=0;Math.abs(g)>Math.abs(y)?v=g>=0?1:3:(v=y>=0?0:2,Ma(c,c,[r[4]*i,r[5]*i,r[6]*i],-Math.sin(E(y>=0?s.getSouth():s.getNorth()))*al));const _=o[v],T=o[(v+1)%4],x=new gl(_,T,c),b=[yl(x,0)||_[0],yl(x,1)||_[1],yl(x,2)||_[2]],I=Ml(t.zoom);if(I>0){const i=function(t,e,n,i,r){let{x:s,y:o,z:a}=t;const l=1/(1<<a);let h=s*l,c=h+l,u=o*l,p=u+l,d=0;const f=(h+c)/2-i;return f>.5?d=-1:f<-.5&&(d=1),h=((h+d)*e-(i*=e))*n+i,c=((c+d)*e-i)*n+i,u=(u*e-(r*=e))*n+r,p=(p*e-r)*n+r,[[h,p,0],[c,p,0],[c,u,0],[h,u,0]]}(n,e,t._pixelsPerMercatorPixel,f,m);for(let t=0;t<o.length;t++)_l(o[t],i[t],I);const r=Ra([],i[v],i[(v+1)%4]);Na(r,r,.5),_l(b,r,I)}for(const E of o)Da(h,h,E),Oa(l,l,E);return h[2]=Math.min(_[2],T[2]),Da(h,h,b),Oa(l,l,b),new rl(h,l)}function bl(t){let{x:e,y:n,z:i}=t;const r=1/(1<<i),s=new Hl(Yl(e*r),ql((n+1)*r)),o=new Hl(Yl((e+1)*r),ql(n*r));return new la(s,o)}function Il(t){const e=E(t.getNorth()),n=E(t.getSouth()),i=Math.cos(e),r=Math.cos(n),s=Math.sin(e),o=Math.sin(n),a=t.getWest(),l=t.getEast();return[wl(r,o,a),wl(r,o,l),wl(i,s,l),wl(i,s,a)]}function wl(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:al;return n=E(n),[t*Math.sin(n)*i,-e*i,t*Math.cos(n)*i]}function Sl(t,e,n){return wl(Math.cos(E(t)),Math.sin(E(t)),e,n)}function Rl(t,e,n,i){const r=1<<n.z,s=(t/aa+n.x)/r;return Sl(ql((e/aa+n.y)/r),Yl(s),i)}function Cl(t){let{min:e,max:n}=t;return ll/Math.max(n[0]-e[0],n[1]-e[1],n[2]-e[2])}const Al=new Float64Array(16);function Dl(t){const e=Cl(t),n=Ta(Al,[e,e,e]);return ga(n,n,((i=[])[0]=-(r=t.min)[0],i[1]=-r[1],i[2]=-r[2],i));var i,r}function Ol(t){const e=(i=t.min,(n=Al)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1,n);var n,i;const r=1/Cl(t);return ya(e,e,[r,r,r])}function Nl(t,e,n,i,r){const s=function(t){const e=aa/(2*Math.PI);return t/(2*Math.PI)/e}(n),o=[t,e,-n/(2*Math.PI)],a=da(new Float64Array(16));return ga(a,a,o),ya(a,a,[s,s,s]),va(a,a,E(-r)),_a(a,a,E(-i)),a}function Ml(t){return C(sl,ol,t)}function Pl(t,e){const n=Sl(e.lat,e.lng),i=function(t){const e=Sl(t._center.lat,t._center.lng);let n=La([],Sa(0,1,0),e);const i=Ea([],-t.angle,e);n=ka(n,n,i),Ea(i,-t._pitch,n);const r=Pa([],e);return Na(r,r,fl(t.cameraToCenterDistance/t.pixelsPerMeter)),ka(r,r,i),Ra([],e,r)}(t);return o=(r=Ca([],i,n))[0],a=r[1],l=r[2],h=(s=n)[0],c=s[1],u=s[2],d=(p=Math.sqrt(o*o+a*a+l*l)*Math.sqrt(h*h+c*c+u*u))&&Fa(r,s)/p,Math.acos(Math.min(Math.max(d,-1),1));var r,s,o,a,l,h,c,u,p,d}function Fl(t,e){return Pl(t,e)>Math.PI/2*1.01}const Ll=E(85),kl=Math.cos(Ll),Ul=Math.sin(Ll),Bl=6371008.8,zl=2*Math.PI*Bl;class Gl{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(e,")"));if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Gl(A(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}distanceTo(t){const e=Math.PI/180,n=this.lat*e,i=t.lat*e,r=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((t.lng-this.lng)*e);return Bl*Math.acos(Math.min(r,1))}toBounds(){const t=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,e=t/Math.cos(Math.PI/180*this.lat);return new la(new Gl(this.lng-e,this.lat-t),new Gl(this.lng+e,this.lat+t))}toEcef(t){const e=fl(t);return Sl(this.lat,this.lng,al+e)}static convert(t){if(t instanceof Gl)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Gl(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Gl(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Hl=Gl;function jl(t){return zl*Math.cos(t*Math.PI/180)}function Vl(t){return(180+t)/360}function Wl(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Zl(t,e){return t/jl(e)}function Yl(t){return 360*t-180}function ql(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Xl(t,e){return t*jl(ql(e))}const Kl=85.051129;function Ql(t){return 1/Math.cos(t*Math.PI/180)}class Jl{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=+t,this.y=+e,this.z=+n}static fromLngLat(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Hl.convert(t);return new Jl(Vl(n.lng),Wl(n.lat),Zl(e,n.lat))}toLngLat(){return new Hl(Yl(this.x),ql(this.y))}toAltitude(){return Xl(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/zl*Ql(ql(this.y))}}function $l(t,e,n,i,r,s,o,a,l){const h=(e+i)/2,c=(n+r)/2,u=new v(h,c);a(u),function(t,e,n,i,r,s){const o=n-r,a=i-s;return Math.abs((i-e)*o-(n-t)*a)/Math.hypot(o,a)}(u.x,u.y,s.x,s.y,o.x,o.y)>=l?($l(t,e,n,h,c,s,u,a,l),$l(t,h,c,i,r,u,o,a,l)):t.push(o)}function th(t,e,n){let i=t[0],r=i.x,s=i.y;e(i);const o=[i];for(let a=1;a<t.length;a++){const l=t[a],{x:h,y:c}=l;e(l),$l(o,r,s,h,c,i,l,e,n),r=h,s=c,i=l}return o}function eh(t,e,n,i){if(i(e,n)){const r=e.add(n)._mult(.5);eh(t,e,r,i),eh(t,r,n,i)}else t.push(n)}function nh(t,e){let n=t[0];const i=[n];for(let r=1;r<t.length;r++){const s=t[r];eh(i,n,s,e),n=s}return i}const ih=Math.pow(2,14)-1,rh=-ih-1;function sh(t,e){const n=Math.round(t.x*e),i=Math.round(t.y*e);return t.x=R(n,rh,ih),t.y=R(i,rh,ih),(n<t.x||n>t.x+1||i<t.y||i>t.y+1)&&V("Geometry exceeds allowed extent, reduce your vector tile buffer size"),t}function oh(t,e,n){const i=t.loadGeometry(),r=t.extent,s=aa/r;if(e&&n&&n.projection.isReprojectedInTileSpace){const s=1<<e.z,{scale:o,x:a,y:l,projection:h}=n,c=t=>{const n=Yl((e.x+t.x/r)/s),i=ql((e.y+t.y/r)/s),c=h.project(n,i);t.x=(c.x*o-a)*r,t.y=(c.y*o-l)*r};for(let e=0;e<i.length;e++)if(1!==t.type)i[e]=th(i[e],c,1);else{const t=[];for(const n of i[e])n.x<0||n.x>=r||n.y<0||n.y>=r||(c(n),t.push(n));i[e]=t}}for(const o of i)for(const t of o)sh(t,s);return i}function ah(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?oh(t):[]}}function lh(t,e,n,i,r){t.emplaceBack(2*e+(i+1)/2,2*n+(r+1)/2)}function hh(t,e,n){const i=16384;t.emplaceBack(e.x,e.y,e.z,n[0]*i,n[1]*i,n[2]*i)}class ch{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new zs,this.indexArray=new no,this.segments=new oa,this.programConfigurations=new Ko(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n,i){const r=this.layers[0],s=[];let o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));for(const{feature:l,id:h,index:c,sourceLayerIndex:u}of t){const t=this.layers[0]._featureFilter.needGeometry,e=ah(l,t);if(!this.layers[0]._featureFilter.filter(new Es(this.zoom),e,n))continue;const r=o?o.evaluate(e,{},n):void 0,a={id:h,properties:l.properties,type:l.type,sourceLayerIndex:u,index:c,geometry:t?e.geometry:oh(l,n,i),patterns:{},sortKey:r};s.push(a)}o&&s.sort(((t,e)=>t.sortKey-e.sortKey));let a=null;"globe"===i.projection.name&&(this.globeExtVertexArray=new Ys,a=i.projection);for(const l of s){const{geometry:i,index:r,sourceLayerIndex:s}=l,o=t[r].feature;this.addFeature(l,i,r,e.availableImages,n,a),e.featureIndex.insert(o,i,r,s,this.index)}}update(t,e,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ra.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,sa.members))),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(t,e,n,i,r,s){for(const o of e)for(const e of o){const n=e.x,i=e.y;if(n<0||n>=aa||i<0||i>=aa)continue;if(s){const t=s.projectTilePoint(n,i,r),e=s.upVector(r,n,i),o=this.globeExtVertexArray;hh(o,t,e),hh(o,t,e),hh(o,t,e),hh(o,t,e)}const o=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),a=o.vertexLength;lh(this.layoutVertexArray,n,i,-1,-1),lh(this.layoutVertexArray,n,i,1,-1),lh(this.layoutVertexArray,n,i,1,1),lh(this.layoutVertexArray,n,i,-1,1),this.indexArray.emplaceBack(a,a+1,a+2),this.indexArray.emplaceBack(a,a+2,a+3),o.vertexLength+=4,o.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},i,r)}}function uh(t,e){for(let n=0;n<t.length;n++)if(Th(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(Th(t,e[n]))return!0;return!!mh(t,e)}function ph(t,e,n){return!!Th(t,e)||!!yh(e,t,n)}function dh(t,e){if(1===t.length)return _h(e,t[0]);for(let n=0;n<e.length;n++){const i=e[n];for(let e=0;e<i.length;e++)if(Th(t,i[e]))return!0}for(let n=0;n<t.length;n++)if(_h(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(mh(t,e[n]))return!0;return!1}function fh(t,e,n){if(t.length>1){if(mh(t,e))return!0;for(let i=0;i<e.length;i++)if(yh(e[i],t,n))return!0}for(let i=0;i<t.length;i++)if(yh(t[i],e,n))return!0;return!1}function mh(t,e){if(0===t.length||0===e.length)return!1;for(let n=0;n<t.length-1;n++){const i=t[n],r=t[n+1];for(let t=0;t<e.length-1;t++)if(gh(i,r,e[t],e[t+1]))return!0}return!1}function gh(t,e,n,i){return W(t,n,i)!==W(e,n,i)&&W(t,e,n)!==W(t,e,i)}function yh(t,e,n){const i=n*n;if(1===e.length)return t.distSqr(e[0])<i;for(let r=1;r<e.length;r++)if(vh(t,e[r-1],e[r])<i)return!0;return!1}function vh(t,e,n){const i=e.distSqr(n);if(0===i)return t.distSqr(e);const r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return t.distSqr(r<0?e:r>1?n:n.sub(e)._mult(r)._add(e))}function _h(t,e){let n,i,r,s=!1;for(let o=0;o<t.length;o++){n=t[o];for(let t=0,o=n.length-1;t<n.length;o=t++)i=n[t],r=n[o],i.y>e.y!=r.y>e.y&&e.x<(r.x-i.x)*(e.y-i.y)/(r.y-i.y)+i.x&&(s=!s)}return s}function Th(t,e){let n=!1;for(let i=0,r=t.length-1;i<t.length;r=i++){const s=t[i],o=t[r];s.y>e.y!=o.y>e.y&&e.x<(o.x-s.x)*(e.y-s.y)/(o.y-s.y)+s.x&&(n=!n)}return n}function Eh(t,e,n,i,r){for(const o of t)if(e<=o.x&&n<=o.y&&i>=o.x&&r>=o.y)return!0;const s=[new v(e,n),new v(e,r),new v(i,r),new v(i,n)];if(t.length>2)for(const o of s)if(Th(t,o))return!0;for(let o=0;o<t.length-1;o++)if(xh(t[o],t[o+1],s))return!0;return!1}function xh(t,e,n){const i=n[0],r=n[2];if(t.x<i.x&&e.x<i.x||t.x>r.x&&e.x>r.x||t.y<i.y&&e.y<i.y||t.y>r.y&&e.y>r.y)return!1;const s=W(t,e,n[0]);return s!==W(t,e,n[1])||s!==W(t,e,n[2])||s!==W(t,e,n[3])}function bh(t,e,n){const i=e.paint.get(t).value;return"constant"===i.kind?i.value:n.programConfigurations.get(e.id).getMaxValue(t)}function Ih(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function wh(t,e,n,i,r){if(!e[0]&&!e[1])return t;const s=v.convert(e)._mult(r);"viewport"===n&&s._rotate(-i);const o=[];for(let a=0;a<t.length;a++)o.push(t[a].sub(s));return o}function Sh(t,e,n,i){const r=v.convert(t)._mult(i);return"viewport"===e&&r._rotate(-n),r}Xr(ch,"CircleBucket",{omit:["layers"]});const Rh=new Ms({"circle-sort-key":new Os(te.layout_circle["circle-sort-key"])});var Ch={paint:new Ms({"circle-radius":new Os(te.paint_circle["circle-radius"]),"circle-color":new Os(te.paint_circle["circle-color"]),"circle-blur":new Os(te.paint_circle["circle-blur"]),"circle-opacity":new Os(te.paint_circle["circle-opacity"]),"circle-translate":new Ds(te.paint_circle["circle-translate"]),"circle-translate-anchor":new Ds(te.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ds(te.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ds(te.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Os(te.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Os(te.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Os(te.paint_circle["circle-stroke-opacity"])}),layout:Rh};function Ah(t,e,n,i,r,s,o,a,l){if(s&&t.queryGeometry.isAboveHorizon)return!1;s&&(l*=t.pixelToTileUnitsFactor);const h=t.tileID.canonical,c=n.projection.upVectorScale(h,n.center.lat,n.worldSize).metersToTile;for(const u of e)for(const e of u){const u=e.add(a),p=r&&n.elevation?n.elevation.exaggeration()*r.getElevationAt(u.x,u.y,!0):0,d=n.projection.projectTilePoint(u.x,u.y,h);if(p>0){const t=n.projection.upVector(h,u.x,u.y);d.x+=t[0]*c*p,d.y+=t[1]*c*p,d.z+=t[2]*c*p}const f=s?u:Dh(d.x,d.y,d.z,i),m=s?t.tilespaceRays.map((t=>Mh(t,p))):t.queryGeometry.screenGeometry,g=Wa([],[d.x,d.y,d.z,1],i);if(!o&&s?l*=g[3]/n.cameraToCenterDistance:o&&!s&&(l*=n.cameraToCenterDistance/g[3]),s){const t=ql((e.y/aa+h.y)/(1<<h.z));l/=n.projection.pixelsPerMeter(t,1)/Zl(1,t)}if(ph(m,f,l))return!0}return!1}function Dh(t,e,n,i){const r=Wa([],[t,e,n,1],i);return new v(r[0]/r[3],r[1]/r[3])}const Oh=Sa(0,0,0),Nh=Sa(0,0,1);function Mh(t,e){const n=ba();return Oh[2]=e,t.intersectsPlane(Oh,Nh,n),new v(n[0],n[1])}class Ph extends ch{}function Fh(t,e,n,i){let{width:r,height:s}=e;if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==r*s*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(r*s*n);return t.width=r,t.height=s,t.data=i,t}function Lh(t,e,n){const{width:i,height:r}=e;i===t.width&&r===t.height||(kh(t,e,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,i),height:Math.min(t.height,r)},n),t.width=i,t.height=r,t.data=e.data)}function kh(t,e,n,i,r,s){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||n.x>t.width-r.width||n.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||i.x>e.width-r.width||i.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");const o=t.data,a=e.data;for(let l=0;l<r.height;l++){const h=((n.y+l)*t.width+n.x)*s,c=((i.y+l)*e.width+i.x)*s;for(let t=0;t<r.width*s;t++)a[c+t]=o[h+t]}return e}Xr(Ph,"HeatmapBucket",{omit:["layers"]});class Uh{constructor(t,e){Fh(this,t,1,e)}resize(t){Lh(this,new Uh(t),1)}clone(){return new Uh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,i,r){kh(t,e,n,i,r,1)}}class Bh{constructor(t,e){Fh(this,t,4,e)}resize(t){Lh(this,new Bh(t),4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Bh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,i,r){kh(t,e,n,i,r,4)}}Xr(Uh,"AlphaImage"),Xr(Bh,"RGBAImage");var zh={paint:new Ms({"heatmap-radius":new Os(te.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Os(te.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ds(te.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ns(te.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ds(te.paint_heatmap["heatmap-opacity"])})};function Gh(t){const e={},n=t.resolution||256,i=t.clips?t.clips.length:1,r=t.image||new Bh({width:n,height:i}),s=(n,i,s)=>{e[t.evaluationKey]=s;const o=t.expression.evaluate(e);r.data[n+i+0]=Math.floor(255*o.r/o.a),r.data[n+i+1]=Math.floor(255*o.g/o.a),r.data[n+i+2]=Math.floor(255*o.b/o.a),r.data[n+i+3]=Math.floor(255*o.a)};if(t.clips)for(let o=0,a=0;o<i;++o,a+=4*n)for(let e=0,i=0;e<n;e++,i+=4){const r=e/(n-1),{start:l,end:h}=t.clips[o];s(a,i,l*(1-r)+h*r)}else for(let o=0,a=0;o<n;o++,a+=4)s(0,a,o/(n-1));return r}var Hh={paint:new Ms({"hillshade-illumination-direction":new Ds(te.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ds(te.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ds(te.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ds(te.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ds(te.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ds(te.paint_hillshade["hillshade-accent-color"])})};const jh=Us([{name:"a_pos",components:2,type:"Int16"}],4),{members:Vh}=jh;var Wh={exports:{}};function Zh(t,e,n){n=n||2;var i,r,s,o,a,l,h,c=e&&e.length,u=c?e[0]*n:t.length,p=Yh(t,0,u,n,!0),d=[];if(!p||p.next===p.prev)return d;if(c&&(p=function(t,e,n,i){var r,s,o,a=[];for(r=0,s=e.length;r<s;r++)(o=Yh(t,e[r]*i,r<s-1?e[r+1]*i:t.length,i,!1))===o.next&&(o.steiner=!0),a.push(rc(o));for(a.sort(tc),r=0;r<a.length;r++)n=ec(a[r],n);return n}(t,e,p,n)),t.length>80*n){i=s=t[0],r=o=t[1];for(var f=n;f<u;f+=n)(a=t[f])<i&&(i=a),(l=t[f+1])<r&&(r=l),a>s&&(s=a),l>o&&(o=l);h=0!==(h=Math.max(s-i,o-r))?32767/h:0}return Xh(p,d,n,i,r,h,0),d}function Yh(t,e,n,i,r){var s,o;if(r===yc(t,e,n,i)>0)for(s=e;s<n;s+=i)o=fc(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=fc(s,t[s],t[s+1],o);return o&&lc(o,o.next)&&(mc(o),o=o.next),o}function qh(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!lc(i,i.next)&&0!==ac(i.prev,i,i.next))i=i.next;else{if(mc(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Xh(t,e,n,i,r,s,o){if(t){!o&&s&&function(t,e,n,i){var r=t;do{0===r.z&&(r.z=ic(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,s,o,a,l,h=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<h&&(a++,i=i.nextZ);e++);for(l=h;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,h*=2}while(o>1)}(r)}(t,i,r,s);for(var a,l,h=t;t.prev!==t.next;)if(a=t.prev,l=t.next,s?Qh(t,i,r,s):Kh(t))e.push(a.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),mc(t),t=l.next,h=l.next;else if((t=l)===h){o?1===o?Xh(t=Jh(qh(t),e,n),e,n,i,r,s,2):2===o&&$h(t,e,n,i,r,s):Xh(qh(t),e,n,i,r,s,1);break}}}function Kh(t){var e=t.prev,n=t,i=t.next;if(ac(e,n,i)>=0)return!1;for(var r=e.x,s=n.x,o=i.x,a=e.y,l=n.y,h=i.y,c=r<s?r<o?r:o:s<o?s:o,u=a<l?a<h?a:h:l<h?l:h,p=r>s?r>o?r:o:s>o?s:o,d=a>l?a>h?a:h:l>h?l:h,f=i.next;f!==e;){if(f.x>=c&&f.x<=p&&f.y>=u&&f.y<=d&&sc(r,a,s,l,o,h,f.x,f.y)&&ac(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Qh(t,e,n,i){var r=t.prev,s=t,o=t.next;if(ac(r,s,o)>=0)return!1;for(var a=r.x,l=s.x,h=o.x,c=r.y,u=s.y,p=o.y,d=a<l?a<h?a:h:l<h?l:h,f=c<u?c<p?c:p:u<p?u:p,m=a>l?a>h?a:h:l>h?l:h,g=c>u?c>p?c:p:u>p?u:p,y=ic(d,f,e,n,i),v=ic(m,g,e,n,i),_=t.prevZ,T=t.nextZ;_&&_.z>=y&&T&&T.z<=v;){if(_.x>=d&&_.x<=m&&_.y>=f&&_.y<=g&&_!==r&&_!==o&&sc(a,c,l,u,h,p,_.x,_.y)&&ac(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,T.x>=d&&T.x<=m&&T.y>=f&&T.y<=g&&T!==r&&T!==o&&sc(a,c,l,u,h,p,T.x,T.y)&&ac(T.prev,T,T.next)>=0)return!1;T=T.nextZ}for(;_&&_.z>=y;){if(_.x>=d&&_.x<=m&&_.y>=f&&_.y<=g&&_!==r&&_!==o&&sc(a,c,l,u,h,p,_.x,_.y)&&ac(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;T&&T.z<=v;){if(T.x>=d&&T.x<=m&&T.y>=f&&T.y<=g&&T!==r&&T!==o&&sc(a,c,l,u,h,p,T.x,T.y)&&ac(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function Jh(t,e,n){var i=t;do{var r=i.prev,s=i.next.next;!lc(r,s)&&hc(r,i,i.next,s)&&pc(r,s)&&pc(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),mc(i),mc(i.next),i=t=s),i=i.next}while(i!==t);return qh(i)}function $h(t,e,n,i,r,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&oc(o,a)){var l=dc(o,a);return o=qh(o,o.next),l=qh(l,l.next),Xh(o,e,n,i,r,s,0),void Xh(l,e,n,i,r,s,0)}a=a.next}o=o.next}while(o!==t)}function tc(t,e){return t.x-e.x}function ec(t,e){var n=function(t,e){var n,i=e,r=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>o&&(o=a,n=i.x<i.next.x?i:i.next,a===r))return n}i=i.next}while(i!==e);if(!n)return null;var l,h=n,c=n.x,u=n.y,p=1/0;i=n;do{r>=i.x&&i.x>=c&&r!==i.x&&sc(s<u?r:o,s,c,u,s<u?o:r,s,i.x,i.y)&&(l=Math.abs(s-i.y)/(r-i.x),pc(i,t)&&(l<p||l===p&&(i.x>n.x||i.x===n.x&&nc(n,i)))&&(n=i,p=l)),i=i.next}while(i!==h);return n}(t,e);if(!n)return e;var i=dc(n,t);return qh(i,i.next),qh(n,n.next)}function nc(t,e){return ac(t.prev,t,e.prev)<0&&ac(e.next,t,t.next)<0}function ic(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function rc(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function sc(t,e,n,i,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function oc(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&hc(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(pc(t,e)&&pc(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(ac(t.prev,t,e.prev)||ac(t,e.prev,e))||lc(t,e)&&ac(t.prev,t,t.next)>0&&ac(e.prev,e,e.next)>0)}function ac(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function lc(t,e){return t.x===e.x&&t.y===e.y}function hc(t,e,n,i){var r=uc(ac(t,e,n)),s=uc(ac(t,e,i)),o=uc(ac(n,i,t)),a=uc(ac(n,i,e));return r!==s&&o!==a||!(0!==r||!cc(t,n,e))||!(0!==s||!cc(t,i,e))||!(0!==o||!cc(n,t,i))||!(0!==a||!cc(n,e,i))}function cc(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function uc(t){return t>0?1:t<0?-1:0}function pc(t,e){return ac(t.prev,t,t.next)<0?ac(t,e,t.next)>=0&&ac(t,t.prev,e)>=0:ac(t,e,t.prev)<0||ac(t,t.next,e)<0}function dc(t,e){var n=new gc(t.i,t.x,t.y),i=new gc(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function fc(t,e,n,i){var r=new gc(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function mc(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function gc(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yc(t,e,n,i){for(var r=0,s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}Wh.exports=Zh,Wh.exports.default=Zh,Zh.deviation=function(t,e,n,i){var r=e&&e.length,s=Math.abs(yc(t,0,r?e[0]*n:t.length,n));if(r)for(var o=0,a=e.length;o<a;o++)s-=Math.abs(yc(t,e[o]*n,o<a-1?e[o+1]*n:t.length,n));var l=0;for(o=0;o<i.length;o+=3){var h=i[o]*n,c=i[o+1]*n,u=i[o+2]*n;l+=Math.abs((t[h]-t[u])*(t[c+1]-t[h+1])-(t[h]-t[c])*(t[u+1]-t[h+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},Zh.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[r][s][o]);r>0&&n.holes.push(i+=t[r-1].length)}return n};var vc=p(Wh.exports);function _c(t,e,n,i,r){Tc(t,e,n||0,i||t.length-1,r||xc)}function Tc(t,e,n,i,r){for(;i>n;){if(i-n>600){var s=i-n+1,o=e-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),h=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);Tc(t,e,Math.max(n,Math.floor(e-o*l/s+h)),Math.min(i,Math.floor(e+(s-o)*l/s+h)),r)}var c=t[e],u=n,p=i;for(Ec(t,n,e),r(t[i],c)>0&&Ec(t,n,i);u<p;){for(Ec(t,u,p),u++,p--;r(t[u],c)<0;)u++;for(;r(t[p],c)>0;)p--}0===r(t[n],c)?Ec(t,n,p):Ec(t,++p,i),p<=e&&(n=p+1),e<=p&&(i=p-1)}}function Ec(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function xc(t,e){return t<e?-1:t>e?1:0}function bc(t,e){const n=t.length;if(n<=1)return[t];const i=[];let r,s;for(let o=0;o<n;o++){const e=Z(t[o]);0!==e&&(t[o].area=Math.abs(e),void 0===s&&(s=e<0),s===e<0?(r&&i.push(r),r=[t[o]]):r.push(t[o]))}if(r&&i.push(r),e>1)for(let o=0;o<i.length;o++)i[o].length<=e||(_c(i[o],e,1,i[o].length-1,Ic),i[o]=i[o].slice(0,e));return i}function Ic(t,e){return e.area-t.area}function wc(t,e,n){const i=n.patternDependencies;let r=!1;for(const s of e){const e=s.paint.get("".concat(t,"-pattern"));e.isConstant()||(r=!0);const n=e.constantOr(null);n&&(r=!0,i[n]=!0)}return r}function Sc(t,e,n,i,r){const s=r.patternDependencies;for(const o of e){const e=o.paint.get("".concat(t,"-pattern")).value;if("constant"!==e.kind){let t=e.evaluate({zoom:i},n,{},r.availableImages);t=t&&t.name?t.name:t,s[t]=!0,n.patterns[o.id]=t}}return n}class Rc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new zs,this.indexArray=new no,this.indexArray2=new lo,this.programConfigurations=new Ko(t.layers,t.zoom),this.segments=new oa,this.segments2=new oa,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.projection=t.projection}populate(t,e,n,i){this.hasPattern=wc("fill",this.layers,e);const r=this.layers[0].layout.get("fill-sort-key"),s=[];for(const{feature:o,id:a,index:l,sourceLayerIndex:h}of t){const t=this.layers[0]._featureFilter.needGeometry,c=ah(o,t);if(!this.layers[0]._featureFilter.filter(new Es(this.zoom),c,n))continue;const u=r?r.evaluate(c,{},n,e.availableImages):void 0,p={id:a,properties:o.properties,type:o.type,sourceLayerIndex:h,index:l,geometry:t?c.geometry:oh(o,n,i),patterns:{},sortKey:u};s.push(p)}r&&s.sort(((t,e)=>t.sortKey-e.sortKey));for(const o of s){const{geometry:i,index:r,sourceLayerIndex:s}=o;if(this.hasPattern){const t=Sc("fill",this.layers,o,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(o,i,r,n,{},e.availableImages);e.featureIndex.insert(t[r].feature,i,r,s,this.index)}}update(t,e,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,i)}addFeatures(t,e,n,i,r){for(const s of this.patternFeatures)this.addFeature(s,s.geometry,s.index,e,n,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Vh),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];for(const o of bc(e,500)){let t=0;for(const a of o)t+=a.length;const e=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),n=e.vertexLength,i=[],r=[];for(const a of o){if(0===a.length)continue;a!==o[0]&&r.push(i.length/2);const t=this.segments2.prepareSegment(a.length,this.layoutVertexArray,this.indexArray2),e=t.vertexLength;this.layoutVertexArray.emplaceBack(a[0].x,a[0].y),this.indexArray2.emplaceBack(e+a.length-1,e),i.push(a[0].x),i.push(a[0].y);for(let n=1;n<a.length;n++)this.layoutVertexArray.emplaceBack(a[n].x,a[n].y),this.indexArray2.emplaceBack(e+n-1,e+n),i.push(a[n].x),i.push(a[n].y);t.vertexLength+=a.length,t.primitiveLength+=a.length}const s=vc(i,r);for(let o=0;o<s.length;o+=3)this.indexArray.emplaceBack(n+s[o],n+s[o+1],n+s[o+2]);e.vertexLength+=t,e.primitiveLength+=s.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,s,i)}}Xr(Rc,"FillBucket",{omit:["layers","patternFeatures"]});const Cc=new Ms({"fill-sort-key":new Os(te.layout_fill["fill-sort-key"])});var Ac={paint:new Ms({"fill-antialias":new Ds(te.paint_fill["fill-antialias"]),"fill-opacity":new Os(te.paint_fill["fill-opacity"]),"fill-color":new Os(te.paint_fill["fill-color"]),"fill-outline-color":new Os(te.paint_fill["fill-outline-color"]),"fill-translate":new Ds(te.paint_fill["fill-translate"]),"fill-translate-anchor":new Ds(te.paint_fill["fill-translate-anchor"]),"fill-pattern":new Os(te.paint_fill["fill-pattern"])}),layout:Cc};const Dc=Us([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Oc=Us([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Nc=Us([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Mc}=Dc;var Pc={},Fc=g,Lc=kc;function kc(t,e,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=r,t.readFields(Uc,this,e)}function Uc(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Bc(t){for(var e,n,i=0,r=0,s=t.length,o=s-1;r<s;o=r++)i+=((n=t[o]).x-(e=t[r]).x)*(e.y+n.y);return i}kc.types=["Unknown","Point","LineString","Polygon"],kc.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,r=0,s=0,o=0,a=[];t.pos<n;){if(r<=0){var l=t.readVarint();i=7&l,r=l>>3}if(r--,1===i||2===i)s+=t.readSVarint(),o+=t.readSVarint(),1===i&&(e&&a.push(e),e=[]),e.push(new Fc(s,o));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&a.push(e),a},kc.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,r=0,s=0,o=1/0,a=-1/0,l=1/0,h=-1/0;t.pos<e;){if(i<=0){var c=t.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)(r+=t.readSVarint())<o&&(o=r),r>a&&(a=r),(s+=t.readSVarint())<l&&(l=s),s>h&&(h=s);else if(7!==n)throw new Error("unknown command "+n)}return[o,l,a,h]},kc.prototype.toGeoJSON=function(t,e,n){var i,r,s=this.extent*Math.pow(2,n),o=this.extent*t,a=this.extent*e,l=this.loadGeometry(),h=kc.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+o)/s-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+a)/s)*Math.PI/180))-90]}}switch(this.type){case 1:var u=[];for(i=0;i<l.length;i++)u[i]=l[i][0];c(l=u);break;case 2:for(i=0;i<l.length;i++)c(l[i]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],s=0;s<e;s++){var o=Bc(t[s]);0!==o&&(void 0===i&&(i=o<0),i===o<0?(n&&r.push(n),n=[t[s]]):n.push(t[s]))}return n&&r.push(n),r}(l),i=0;i<l.length;i++)for(r=0;r<l[i].length;r++)c(l[i][r])}1===l.length?l=l[0]:h="Multi"+h;var p={type:"Feature",geometry:{type:h,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var zc=Lc,Gc=Hc;function Hc(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(jc,this,e),this.length=this._features.length}function jc(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(n))}Hc.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new zc(this._pbf,e,this.extent,this._keys,this._values)};var Vc=Gc;function Wc(t,e,n){if(3===t){var i=new Vc(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}var Zc=Pc.VectorTile=function(t,e){this.layers=t.readFields(Wc,{},e)},Yc=Pc.VectorTileFeature=Lc;function qc(t,e,n,i){const r=[],s=0===i?(t,e,n,i,r,s)=>{t.push(new v(s,n+(s-e)/(i-e)*(r-n)))}:(t,e,n,i,r,s)=>{t.push(new v(e+(s-n)/(r-n)*(i-e),s))};for(const o of t){const t=[];for(const r of o){if(r.length<=2)continue;const o=[];for(let t=0;t<r.length-1;t++){const a=r[t].x,l=r[t].y,h=r[t+1].x,c=r[t+1].y,u=0===i?a:l,p=0===i?h:c;u<e?p>e&&s(o,a,l,h,c,e):u>n?p<n&&s(o,a,l,h,c,n):o.push(r[t]),p<e&&u>=e&&s(o,a,l,h,c,e),p>n&&u<=n&&s(o,a,l,h,c,n)}let a=r[r.length-1];const l=0===i?a.x:a.y;l>=e&&l<=n&&o.push(a),o.length&&(a=o[o.length-1],o[0].x===a.x&&o[0].y===a.y||o.push(o[0]),t.push(o))}t.length&&r.push(t)}return r}Pc.VectorTileLayer=Gc;const Xc=Yc.types,Kc=Math.pow(2,13);function Qc(t,e,n,i,r,s,o,a){t.emplaceBack((e<<1)+o,(n<<1)+s,(Math.floor(i*Kc)<<1)+r,Math.round(a))}function Jc(t,e,n){const i=16384;t.emplaceBack(e.x,e.y,e.z,n[0]*i,n[1]*i,n[2]*i)}class $c{constructor(){this.acc=new v(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new v(t.x,t.y),this.max=new v(t.x,t.y))}append(t,e){this.currentPolyCount.edges++,this.acc._add(t);const n=this.min,i=this.max;t.x<n.x?n.x=t.x:t.x>i.x&&(i.x=t.x),t.y<n.y?n.y=t.y:t.y>i.y&&(i.y=t.y),((0===t.x||t.x===aa)&&t.x===e.x)!=((0===t.y||t.y===aa)&&t.y===e.y)&&this.processBorderOverlap(t,e),e.x<0!=t.x<0&&this.addBorderIntersection(0,Nn(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>aa!=t.x>aa&&this.addBorderIntersection(1,Nn(e.y,t.y,(aa-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,Nn(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>aa!=t.y>aa&&this.addBorderIntersection(3,Nn(e.x,t.x,(aa-e.y)/(t.y-e.y)))}addBorderIntersection(t,e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[t];e<n[0]&&(n[0]=e),e>n[1]&&(n[1]=e)}processBorderOverlap(t,e){if(t.x===e.x){if(t.y===e.y)return;const n=0===t.x?0:1;this.addBorderIntersection(n,e.y),this.addBorderIntersection(n,t.y)}else{const n=0===t.y?2:3;this.addBorderIntersection(n,e.x),this.addBorderIntersection(n,t.x)}}centroid(){const t=this.polyCount.reduce(((t,e)=>t+e.edges),0);return 0!==t?this.acc.div(t)._round():new v(0,0)}span(){return new v(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((t,e)=>t+ +(e[0]!==Number.MAX_VALUE)),0)}}class tu{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new Hs,this.centroidVertexArray=new xo,this.indexArray=new no,this.programConfigurations=new Ko(t.layers,t.zoom),this.segments=new oa,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.enableTerrain=t.enableTerrain}populate(t,e,n,i){this.features=[],this.hasPattern=wc("fill-extrusion",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(t){const e=Math.exp(Math.PI*(1-t.y/(1<<t.z)*2));return 80150034*e/(e*e+1)/aa/(1<<t.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:r,id:s,index:o,sourceLayerIndex:a}of t){const t=this.layers[0]._featureFilter.needGeometry,l=ah(r,t);if(!this.layers[0]._featureFilter.filter(new Es(this.zoom),l,n))continue;const h={id:s,sourceLayerIndex:a,index:o,geometry:t?l.geometry:oh(r,n,i),properties:r.properties,type:r.type,patterns:{}},c=this.layoutVertexArray.length;this.hasPattern?this.features.push(Sc("fill-extrusion",this.layers,h,this.zoom,e)):this.addFeature(h,h.geometry,o,n,{},e.availableImages,i),e.featureIndex.insert(r,h.geometry,o,a,this.index,c)}this.sortBorders()}addFeatures(t,e,n,i,r){for(const s of this.features){const{geometry:t}=s;this.addFeature(s,t,s.index,e,n,i,r)}this.sortBorders()}update(t,e,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Mc),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=t.createVertexBuffer(this.layoutVertexExtArray,Nc.members,!0))),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Oc.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,i,r,s,o){const a=[new v(0,0),new v(aa,aa)],l=o.projection,h="globe"===l.name,c=this.enableTerrain&&!h?new $c:null,u="Polygon"===Xc[t.type];h&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Ys);const p=bc(e,500);for(let g=p.length-1;g>=0;g--){const t=p[g];(0===t.length||(d=t[0]).every((t=>t.x<=0))||d.every((t=>t.x>=aa))||d.every((t=>t.y<=0))||d.every((t=>t.y>=aa)))&&p.splice(g,1)}var d;let f;if(h)f=lu(p,a,i);else{f=[];for(const t of p)f.push({polygon:t,bounds:a})}const m=u?this.edgeRadius:0;for(const{polygon:g,bounds:y}of f){let t=0,e=0;for(const i of g)u&&!i[0].equals(i[i.length-1])&&i.push(i[0]),e+=u?i.length-1:i.length;const n=this.segments.prepareSegment((u?5:4)*e,this.layoutVertexArray,this.indexArray);if(u){const e=[],r=[];t=n.vertexLength;for(const t of g){let s,o;t.length&&t!==g[0]&&r.push(e.length/2),s=t[1].sub(t[0])._perp()._unit();for(let r=1;r<t.length;r++){const a=t[r],c=t[r===t.length-1?1:r+1];let{x:u,y:p}=a;if(m){o=c.sub(a)._perp()._unit();const t=s.add(o)._unit(),e=m*Math.min(4,1/(s.x*t.x+s.y*t.y));u+=e*t.x,p+=e*t.y,s=o}Qc(this.layoutVertexArray,u,p,0,0,1,1,0),n.vertexLength++,e.push(a.x,a.y),h&&Jc(this.layoutVertexExtArray,l.projectTilePoint(u,p,i),l.upVector(i,u,p))}}const s=vc(e,r);for(let i=0;i<s.length;i+=3)this.indexArray.emplaceBack(t+s[i],t+s[i+2],t+s[i+1]),n.primitiveLength++}for(const r of g){c&&r.length&&c.startRing(r[0]);let e,s,o,a=r.length>4&&su(r[r.length-2],r[0],r[1]),p=m?nu(r[r.length-2],r[0],r[1],m):0;s=r[1].sub(r[0])._perp()._unit();let d=!0;for(let f=1,g=0;f<r.length;f++){let v=r[f-1],_=r[f];const T=r[f===r.length-1?1:f+1];if(c&&u&&c.currentPolyCount.top++,ru(_,v,y)){m&&(s=T.sub(_)._perp()._unit(),d=!d);continue}c&&c.append(_,v);const E=_.sub(v)._perp(),x=E.x/(Math.abs(E.x)+Math.abs(E.y)),b=E.y>0?1:0,I=v.dist(_);if(g+I>32768&&(g=0),m){o=T.sub(_)._perp()._unit();let t=iu(v,_,T,eu(s,o),m);isNaN(t)&&(t=0);const e=_.sub(v)._unit();v=v.add(e.mult(p))._round(),_=_.add(e.mult(-t))._round(),p=t,s=o}const w=n.vertexLength,S=r.length>4&&su(v,_,T);let R=ou(g,a,d);if(Qc(this.layoutVertexArray,v.x,v.y,x,b,0,0,R),Qc(this.layoutVertexArray,v.x,v.y,x,b,0,1,R),g+=I,R=ou(g,S,!d),a=S,Qc(this.layoutVertexArray,_.x,_.y,x,b,0,0,R),Qc(this.layoutVertexArray,_.x,_.y,x,b,0,1,R),n.vertexLength+=4,this.indexArray.emplaceBack(w+0,w+1,w+2),this.indexArray.emplaceBack(w+1,w+3,w+2),n.primitiveLength+=2,m){const i=t+(1===f?r.length-2:f-2),s=1===f?t:i+1;if(this.indexArray.emplaceBack(w+1,i,w+3),this.indexArray.emplaceBack(i,s,w+3),n.primitiveLength+=2,void 0===e&&(e=w),!ru(T,r[f],y)){const t=f===r.length-1?e:n.vertexLength;this.indexArray.emplaceBack(w+2,w+3,t),this.indexArray.emplaceBack(w+3,t+1,t),this.indexArray.emplaceBack(w+3,s,t+1),n.primitiveLength+=3}d=!d}if(h){const t=this.layoutVertexExtArray,e=l.projectTilePoint(v.x,v.y,i),n=l.projectTilePoint(_.x,_.y,i),r=l.upVector(i,v.x,v.y),s=l.upVector(i,_.x,_.y);Jc(t,e,r),Jc(t,e,r),Jc(t,n,s),Jc(t,n,s)}}u&&(t+=r.length-1)}}if(c&&c.polyCount.length>0){if(c.borders){c.vertexArrayOffset=this.centroidVertexArray.length;const t=c.borders,e=this.featuresOnBorder.push(c)-1;for(let n=0;n<4;n++)t[n][0]!==Number.MAX_VALUE&&this.borders[n].push(e)}this.encodeCentroid(c.borders?void 0:c.centroid(),c)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,s,i)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort(((e,n)=>this.featuresOnBorder[e].borders[t][0]-this.featuresOnBorder[n].borders[t][0]))}encodeCentroid(t,e){let n,i,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t)if(0!==t.y){const r=e.span()._mult(this.tileToMeter);n=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(r.x/10)),i=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(r.y/10))}else n=Math.ceil(7*(t.x+450)),i=0;else n=0,i=+r;let s=r?this.centroidVertexArray.length:e.vertexArrayOffset;for(const o of e.polyCount){r&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*o.edges+o.top);for(let t=0;t<o.top;t++)this.centroidVertexArray.emplace(s++,n,i);for(let t=0;t<2*o.edges;t++)this.centroidVertexArray.emplace(s++,0,i),this.centroidVertexArray.emplace(s++,n,i)}}}function eu(t,e){const n=t.add(e)._unit();return t.x*n.x+t.y*n.y}function nu(t,e,n,i){const r=e.sub(t)._perp()._unit(),s=n.sub(e)._perp()._unit();return iu(t,e,n,eu(r,s),i)}function iu(t,e,n,i,r){const s=Math.sqrt(1-i*i);return Math.min(t.dist(e)/3,e.dist(n)/3,r*s/i)}function ru(t,e,n){return t.x<n[0].x&&e.x<n[0].x||t.x>n[1].x&&e.x>n[1].x||t.y<n[0].y&&e.y<n[0].y||t.y>n[1].y&&e.y>n[1].y}function su(t,e,n){if(t.x<0||t.x>=aa||e.x<0||e.x>=aa||n.x<0||n.x>=aa)return!1;const i=n.sub(e),r=i.perp(),s=t.sub(e);return(i.x*s.x+i.y*s.y)/Math.sqrt((i.x*i.x+i.y*i.y)*(s.x*s.x+s.y*s.y))>-.866&&r.x*s.x+r.y*s.y<0}function ou(t,e,n){const i=e?2|t:-3&t;return n?1|i:-2&i}function au(){const t=Math.PI/32,e=Math.tan(t),n=Bl;return n*Math.sqrt(1+2*e*e)-n}function lu(t,e,n){const i=1<<n.z,r=Yl(n.x/i),s=Yl((n.x+1)/i),o=ql(n.y/i),a=ql((n.y+1)/i);return function(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;const o=[];if(!t.length||!n||!i)return o;const a=(t,e)=>{for(const n of t)o.push({polygon:n,bounds:e})},l=Math.ceil(Math.log2(n)),h=Math.ceil(Math.log2(i)),c=l-h,u=[];for(let f=0;f<Math.abs(c);f++)u.push(c>0?0:1);for(let f=0;f<Math.min(l,h);f++)u.push(0),u.push(1);let p=t;if(p=qc(p,e[0].y-r,e[1].y+r,1),p=qc(p,e[0].x-r,e[1].x+r,0),!p.length)return o;const d=[];for(u.length?d.push({polygons:p,bounds:e,depth:0}):a(p,e);d.length;){const t=d.pop(),e=t.depth,n=u[e],i=t.bounds[0],o=t.bounds[1],l=0===n?i.x:i.y,h=0===n?o.x:o.y,c=s?s(n,l,h):.5*(l+h),p=qc(t.polygons,l-r,c+r,n),f=qc(t.polygons,c-r,h+r,n);if(p.length){const t=[i,new v(0===n?c:o.x,1===n?c:o.y)];u.length>e+1?d.push({polygons:p,bounds:t,depth:e+1}):a(p,t)}if(f.length){const t=[new v(0===n?c:i.x,1===n?c:i.y),o];u.length>e+1?d.push({polygons:f,bounds:t,depth:e+1}):a(f,t)}}return o}(t,e,Math.ceil((s-r)/11.25),Math.ceil((o-a)/11.25),1,((t,e,r)=>{if(0===t)return.5*(e+r);{const t=ql((n.y+e/aa)/i);return(Wl(.5*(ql((n.y+r/aa)/i)+t))*i-n.y)*aa}}))}Xr(tu,"FillExtrusionBucket",{omit:["layers","features"]}),Xr($c,"PartMetadata");const hu=new Ms({"fill-extrusion-edge-radius":new Ds(te["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var cu={paint:new Ms({"fill-extrusion-opacity":new Ds(te["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Os(te["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ds(te["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ds(te["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Os(te["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Os(te["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Os(te["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ds(te["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ds(te["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ds(te["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Ds(te["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:hu};function uu(t,e,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}class pu{constructor(t,e,n){this.z=t,this.x=e,this.y=n,this.key=mu(0,t,t,e,n)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e){const n=function(t,e,n){var i=uu(256*t,256*(e=Math.pow(2,n)-e-1),n),r=uu(256*(t+1),256*(e+1),n);return i[0]+","+i[1]+","+r[0]+","+r[1]}(this.x,this.y,this.z),i=function(t,e,n){let i,r="";for(let s=t;s>0;s--)i=1<<s-1,r+=(e&i?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",i).replace("{bbox-epsg-3857}",n)}toString(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}class du{constructor(t,e){this.wrap=t,this.canonical=e,this.key=mu(t,e.z,e.z,e.x,e.y)}}class fu{constructor(t,e,n,i,r){this.overscaledZ=t,this.wrap=e,this.canonical=new pu(n,+i,+r),this.key=0===e&&t===n?this.canonical.key:mu(e,t,n,i,r)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const e=this.canonical.z-t;return t>this.canonical.z?new fu(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fu(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return mu(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-t;return mu(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new fu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new fu(e,this.wrap,e,n,i),new fu(e,this.wrap,e,n+1,i),new fu(e,this.wrap,e,n,i+1),new fu(e,this.wrap,e,n+1,i+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new fu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new fu(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new du(this.wrap,this.canonical)}toString(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}}function mu(t,e,n,i,r){const s=1<<Math.min(n,22);let o=s*(r%s)+i%s;return t&&n<22&&(o+=s*s*((t<0?-2*t-1:2*t)%(1<<2*(22-n)))),16*(32*o+n)+(e-n)}Xr(pu,"CanonicalTileID"),Xr(fu,"OverscaledTileID",{omit:["projMatrix"]});class gu extends v{constructor(t,e,n){super(t,e),this.z=n}}function yu(t,e){return t.x*e.x+t.y*e.y}function vu(t,e){if(1===t.length){let n=0;const i=e[n++];let r;for(;!r||i.equals(r);)if(r=e[n++],!r)return 1/0;for(;n<e.length;n++){const s=e[n],o=t[0],a=r.sub(i),l=s.sub(i),h=o.sub(i),c=yu(a,a),u=yu(a,l),p=yu(l,l),d=yu(h,a),f=yu(h,l),m=c*p-u*u,g=(p*d-u*f)/m,y=(c*f-u*d)/m,v=i.z*(1-g-y)+r.z*g+s.z*y;if(isFinite(v))return v}return 1/0}{let t=1/0;for(const n of e)t=Math.min(t,n.z);return t}}function _u(t,e,n,i,r,s,o,a){const l=o*r.getElevationAt(t,e,!0,!0),h=0!==s[0],c=h?0===s[1]?o*(s[0]/7-450):o*function(t,e,n){const i=Math.floor(e[0]/8),r=Math.floor(e[1]/8),s=10*(e[0]-8*i),o=10*(e[1]-8*r),a=t.getElevationAt(i,r,!0,!0),l=t.getMeterToDEM(n),h=Math.floor(.5*(s*l-1)),c=Math.floor(.5*(o*l-1)),u=t.tileCoordToPixel(i,r),p=2*h+1,d=2*c+1,f=function(t,e,n,i,r){return[t.getElevationAtPixel(e,n,!0),t.getElevationAtPixel(e+r,n,!0),t.getElevationAtPixel(e,n+r,!0),t.getElevationAtPixel(e+i,n+r,!0)]}(t,u.x-h,u.y-c,p,d),m=Math.abs(f[0]-f[1]),g=Math.abs(f[2]-f[3]),y=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),v=Math.min(.25,.5*l*(m+g)/p),_=Math.min(.25,.5*l*y/d);return a+Math.max(v*s,_*o)}(r,s,a):l;return{base:l+(0===n)?-1:n,top:h?Math.max(c+i,l+n+2):l+i}}const Tu=Us([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Eu}=Tu,xu=Us([{name:"a_packed",components:4,type:"Float32"}]),{members:bu}=xu,Iu=Yc.types,wu=Math.cos(Math.PI/180*37.5);class Su{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new js,this.layoutVertexArray2=new Vs,this.indexArray=new no,this.programConfigurations=new Ko(t.layers,t.zoom),this.segments=new oa,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n,i){this.hasPattern=wc("line",this.layers,e);const r=this.layers[0].layout.get("line-sort-key"),s=[];for(const{feature:h,id:c,index:u,sourceLayerIndex:p}of t){const t=this.layers[0]._featureFilter.needGeometry,e=ah(h,t);if(!this.layers[0]._featureFilter.filter(new Es(this.zoom),e,n))continue;const o=r?r.evaluate(e,{},n):void 0,a={id:c,properties:h.properties,type:h.type,sourceLayerIndex:p,index:u,geometry:t?e.geometry:oh(h,n,i),patterns:{},sortKey:o};s.push(a)}r&&s.sort(((t,e)=>t.sortKey-e.sortKey));const{lineAtlas:o,featureIndex:a}=e,l=this.addConstantDashes(o);for(const h of s){const{geometry:i,index:r,sourceLayerIndex:s}=h;if(l&&this.addFeatureDashes(h,o),this.hasPattern){const t=Sc("line",this.layers,h,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(h,i,r,n,o.positions,e.availableImages);a.insert(t[r].feature,i,r,s,this.index)}}addConstantDashes(t){let e=!1;for(const n of this.layers){const i=n.paint.get("line-dasharray").value,r=n.layout.get("line-cap").value;if("constant"!==i.kind||"constant"!==r.kind)e=!0;else{const e=r.value,n=i.value;if(!n)continue;t.addDash(n,e)}}return e}addFeatureDashes(t,e){const n=this.zoom;for(const i of this.layers){const r=i.paint.get("line-dasharray").value,s=i.layout.get("line-cap").value;if("constant"===r.kind&&"constant"===s.kind)continue;let o,a;if("constant"===r.kind){if(o=r.value,!o)continue}else o=r.evaluate({zoom:n},t);a="constant"===s.kind?s.value:s.evaluate({zoom:n},t),e.addDash(o,a),t.patterns[i.id]=e.getKey(o,a)}}update(t,e,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,i)}addFeatures(t,e,n,i,r){for(const s of this.patternFeatures)this.addFeature(s,s.geometry,s.index,e,n,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,bu)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Eu),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,n,i,r,s){const o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),l=o.get("line-cap").evaluate(t,{}),h=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const u of e)this.addLine(u,t,a,l,h,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,s,i)}addLine(t,e,n,i,r,s){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const o="Polygon"===Iu[e.type];let a=t.length;for(;a>=2&&t[a-1].equals(t[a-2]);)a--;let l=0;for(;l<a-1&&t[l].equals(t[l+1]);)l++;if(a<(o?3:2))return;"bevel"===n&&(r=1.05);const h=this.overscaling<=16?15*aa/(512*this.overscaling):0,c=this.segments.prepareSegment(10*a,this.layoutVertexArray,this.indexArray);let u,p,d,f,m;this.e1=this.e2=-1,o&&(u=t[a-2],m=t[l].sub(u)._unit()._perp());for(let g=l;g<a;g++){if(d=g===a-1?o?t[l+1]:void 0:t[g+1],d&&t[g].equals(d))continue;m&&(f=m),u&&(p=u),u=t[g],m=d?d.sub(u)._unit()._perp():f,f=f||m;let e=f.add(m);0===e.x&&0===e.y||e._unit();const y=f.x*m.x+f.y*m.y,v=e.x*m.x+e.y*m.y,_=0!==v?1/v:1/0,T=2*Math.sqrt(2-2*v),E=v<wu&&p&&d,x=f.x*m.y-f.y*m.x>0;if(E&&g>l){const t=u.dist(p);if(t>2*h){const e=u.sub(u.sub(p)._mult(h/t)._round());this.updateDistance(p,e),this.addCurrentVertex(e,f,0,0,c),p=e}}const b=p&&d;let I=b?n:o?"butt":i;if(b&&"round"===I&&(_<s?I="miter":_<=2&&(I="fakeround")),"miter"===I&&_>r&&(I="bevel"),"bevel"===I&&(_>2&&(I="flipbevel"),_<r&&(I="miter")),p&&this.updateDistance(p,u),"miter"===I)e._mult(_),this.addCurrentVertex(u,e,0,0,c);else if("flipbevel"===I){if(_>100)e=m.mult(-1);else{const t=_*f.add(m).mag()/f.sub(m).mag();e._perp()._mult(t*(x?-1:1))}this.addCurrentVertex(u,e,0,0,c),this.addCurrentVertex(u,e.mult(-1),0,0,c)}else if("bevel"===I||"fakeround"===I){const t=-Math.sqrt(_*_-1),e=x?t:0,n=x?0:t;if(p&&this.addCurrentVertex(u,f,e,n,c),"fakeround"===I){const t=Math.round(180*T/Math.PI/20);for(let e=1;e<t;e++){let n=e/t;if(.5!==n){const t=n-.5;n+=n*t*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*t*t+(.848013+y*(.215638*y-1.06021)))}const i=m.sub(f)._mult(n)._add(f)._unit()._mult(x?-1:1);this.addHalfVertex(u,i.x,i.y,!1,x,0,c)}}d&&this.addCurrentVertex(u,m,-e,-n,c)}else if("butt"===I)this.addCurrentVertex(u,e,0,0,c);else if("square"===I){const t=p?1:-1;p||this.addCurrentVertex(u,e,t,t,c),this.addCurrentVertex(u,e,0,0,c),p&&this.addCurrentVertex(u,e,t,t,c)}else"round"===I&&(p&&(this.addCurrentVertex(u,f,0,0,c),this.addCurrentVertex(u,f,1,1,c,!0)),d&&(this.addCurrentVertex(u,m,-1,-1,c,!0),this.addCurrentVertex(u,m,0,0,c)));if(E&&g<a-1){const t=u.dist(d);if(t>2*h){const e=u.add(d.sub(u)._mult(h/t)._round());this.updateDistance(u,e),this.addCurrentVertex(e,m,0,0,c),u=e}}}}addCurrentVertex(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const o=e.y*i-e.x,a=-e.y-e.x*i;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,s,!1,n,r),this.addHalfVertex(t,o,a,s,!0,-i,r)}addHalfVertex(t,e,n,i,r,s,o){let{x:a,y:l}=t;this.layoutVertexArray.emplaceBack((a<<1)+(i?1:0),(l<<1)+(r?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===s?0:s<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const h=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,h),o.primitiveLength++),r?this.e2=h:this.e1=h}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}Xr(Su,"LineBucket",{omit:["layers","patternFeatures"]});const Ru=new Ms({"line-cap":new Os(te.layout_line["line-cap"]),"line-join":new Os(te.layout_line["line-join"]),"line-miter-limit":new Ds(te.layout_line["line-miter-limit"]),"line-round-limit":new Ds(te.layout_line["line-round-limit"]),"line-sort-key":new Os(te.layout_line["line-sort-key"])});var Cu={paint:new Ms({"line-opacity":new Os(te.paint_line["line-opacity"]),"line-color":new Os(te.paint_line["line-color"]),"line-translate":new Ds(te.paint_line["line-translate"]),"line-translate-anchor":new Ds(te.paint_line["line-translate-anchor"]),"line-width":new Os(te.paint_line["line-width"]),"line-gap-width":new Os(te.paint_line["line-gap-width"]),"line-offset":new Os(te.paint_line["line-offset"]),"line-blur":new Os(te.paint_line["line-blur"]),"line-dasharray":new Os(te.paint_line["line-dasharray"]),"line-pattern":new Os(te.paint_line["line-pattern"]),"line-gradient":new Ns(te.paint_line["line-gradient"]),"line-trim-offset":new Ds(te.paint_line["line-trim-offset"])}),layout:Ru};const Au=new class extends Os{possiblyEvaluate(t,e){return e=new Es(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,i){return e=N({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,i)}}(Cu.paint.properties["line-width"].specification);function Du(t,e){return e>0?e+2*t:t}Au.useIntegerZoom=!0;const Ou=Us([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Nu=Us([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Mu=Us([{name:"a_projected_pos",components:4,type:"Float32"}],4);Us([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Pu=Us([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Fu=Us([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Us([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Lu=Us([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ku=Us([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Us([{name:"triangle",components:3,type:"Uint16"}]),Us([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Us([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Us([{type:"Float32",name:"offsetX"}]),Us([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Uu=24;const Bu=128;function zu(t,e){const{expression:n}=e;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Es(t+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:i}=n;let r=0;for(;r<e.length&&e[r]<=t;)r++;r=Math.max(0,r-1);let s=r;for(;s<e.length&&e[s]<t+1;)s++;s=Math.min(e.length-1,s);const o=e[r],a=e[s];return"composite"===n.kind?{kind:"composite",minZoom:o,maxZoom:a,interpolationType:i}:{kind:"camera",minZoom:o,maxZoom:a,minSize:n.evaluate(new Es(o)),maxSize:n.evaluate(new Es(a)),interpolationType:i}}}function Gu(t,e,n){let{uSize:i,uSizeT:r}=e,{lowerSize:s,upperSize:o}=n;return"source"===t.kind?s/Bu:"composite"===t.kind?Nn(s/Bu,o/Bu,r):i}function Hu(t,e){let n=0,i=0;if("constant"===t.kind)i=t.layoutSize;else if("source"!==t.kind){const{interpolationType:r,minZoom:s,maxZoom:o}=t,a=r?R(ti.interpolationFactor(r,e,s,o),0,1):0;"camera"===t.kind?i=Nn(t.minSize,t.maxSize,a):n=a}return{uSizeT:n,uSize:i}}var ju=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Bu,evaluateSizeForFeature:Gu,evaluateSizeForZoom:Hu,getSizeData:zu});function Vu(t,e,n){return t.sections.forEach((t=>{t.text=function(t,e,n){const i=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?t=t.toLocaleUpperCase():"lowercase"===i&&(t=t.toLocaleLowerCase()),Ts.applyArabicShaping&&(t=Ts.applyArabicShaping(t)),t}(t.text,e,n)})),t}const Wu={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function Zu(t){return"\ufe36"===t||"\ufe48"===t||"\ufe38"===t||"\ufe44"===t||"\ufe42"===t||"\ufe3e"===t||"\ufe3c"===t||"\ufe3a"===t||"\ufe18"===t||"\ufe40"===t||"\ufe10"===t||"\ufe13"===t||"\ufe14"===t||"\uff40"===t||"\uffe3"===t||"\ufe11"===t||"\ufe12"===t}function Yu(t){return"\ufe35"===t||"\ufe47"===t||"\ufe37"===t||"\ufe43"===t||"\ufe41"===t||"\ufe3d"===t||"\ufe3b"===t||"\ufe39"===t||"\ufe17"===t||"\ufe3f"===t}var qu=Qu,Xu=function(t,e,n,i,r){var s,o,a=8*r-i-1,l=(1<<a)-1,h=l>>1,c=-7,u=n?r-1:0,p=n?-1:1,d=t[e+u];for(u+=p,s=d&(1<<-c)-1,d>>=-c,c+=a;c>0;s=256*s+t[e+u],u+=p,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=i;c>0;o=256*o+t[e+u],u+=p,c-=8);if(0===s)s=1-h;else{if(s===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),s-=h}return(d?-1:1)*o*Math.pow(2,s-i)},Ku=function(t,e,n,i,r,s){var o,a,l,h=8*s-r-1,c=(1<<h)-1,u=c>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:s-1,f=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+u>=1?p/l:p*Math.pow(2,1-u))*l>=2&&(o++,l/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(e*l-1)*Math.pow(2,r),o+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,r),o=0));r>=8;t[n+d]=255&a,d+=f,a/=256,r-=8);for(o=o<<r|a,h+=r;h>0;t[n+d]=255&o,d+=f,o/=256,h-=8);t[n+d-f]|=128*m};function Qu(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Qu.Varint=0,Qu.Fixed64=1,Qu.Bytes=2,Qu.Fixed32=5;var Ju=4294967296,$u=1/Ju,tp="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function ep(t){return t.type===Qu.Bytes?t.readVarint()+t.pos:t.pos+1}function np(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function ip(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=t;r--)n.buf[r+i]=n.buf[r]}function rp(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function sp(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function op(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function ap(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function lp(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function hp(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function cp(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function up(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function pp(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function dp(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function fp(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function mp(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Qu.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,s=this.pos;this.type=7&i,t(r,e,this),this.pos===s&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=dp(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=mp(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=dp(this.buf,this.pos)+dp(this.buf,this.pos+4)*Ju;return this.pos+=8,t},readSFixed64:function(){var t=dp(this.buf,this.pos)+mp(this.buf,this.pos+4)*Ju;return this.pos+=8,t},readFloat:function(){var t=Xu(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Xu(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,i=this.buf;return e=127&(n=i[this.pos++]),n<128?e:(e|=(127&(n=i[this.pos++]))<<7,n<128?e:(e|=(127&(n=i[this.pos++]))<<14,n<128?e:(e|=(127&(n=i[this.pos++]))<<21,n<128?e:function(t,e,n){var i,r,s=n.buf;if(i=(112&(r=s[n.pos++]))>>4,r<128)return np(t,i,e);if(i|=(127&(r=s[n.pos++]))<<3,r<128)return np(t,i,e);if(i|=(127&(r=s[n.pos++]))<<10,r<128)return np(t,i,e);if(i|=(127&(r=s[n.pos++]))<<17,r<128)return np(t,i,e);if(i|=(127&(r=s[n.pos++]))<<24,r<128)return np(t,i,e);if(i|=(1&(r=s[n.pos++]))<<31,r<128)return np(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&tp?function(t,e,n){return tp.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var i="",r=e;r<n;){var s,o,a,l=t[r],h=null,c=l>239?4:l>223?3:l>191?2:1;if(r+c>n)break;1===c?l<128&&(h=l):2===c?128==(192&(s=t[r+1]))&&(h=(31&l)<<6|63&s)<=127&&(h=null):3===c?(o=t[r+2],128==(192&(s=t[r+1]))&&128==(192&o)&&((h=(15&l)<<12|(63&s)<<6|63&o)<=2047||h>=55296&&h<=57343)&&(h=null)):4===c&&(o=t[r+2],a=t[r+3],128==(192&(s=t[r+1]))&&128==(192&o)&&128==(192&a)&&((h=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,c=1):h>65535&&(h-=65536,i+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),i+=String.fromCharCode(h),r+=c}return i}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Qu.Bytes)return t.push(this.readVarint(e));var n=ep(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Qu.Bytes)return t.push(this.readSVarint());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Qu.Bytes)return t.push(this.readBoolean());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Qu.Bytes)return t.push(this.readFloat());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Qu.Bytes)return t.push(this.readDouble());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Qu.Bytes)return t.push(this.readFixed32());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Qu.Bytes)return t.push(this.readSFixed32());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Qu.Bytes)return t.push(this.readFixed64());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Qu.Bytes)return t.push(this.readSFixed64());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Qu.Varint)for(;this.buf[this.pos++]>127;);else if(e===Qu.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Qu.Fixed32)this.pos+=4;else{if(e!==Qu.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),fp(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),fp(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),fp(this.buf,-1&t,this.pos),fp(this.buf,Math.floor(t*$u),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),fp(this.buf,-1&t,this.pos),fp(this.buf,Math.floor(t*$u),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,i;if(t>=0?(n=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var i,r,s=0;s<e.length;s++){if((i=e.charCodeAt(s))>55295&&i<57344){if(!r){i>56319||s+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):r=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(t[n++]=239,t[n++]=191,t[n++]=189,r=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&ip(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Ku(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Ku(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&ip(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,Qu.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,rp,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,sp,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,lp,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,op,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,ap,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,hp,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,cp,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,up,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,pp,e)},writeBytesField:function(t,e){this.writeTag(t,Qu.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Qu.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Qu.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Qu.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Qu.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Qu.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Qu.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Qu.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Qu.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Qu.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var gp=p(qu);const yp=3;function vp(t,e,n){e.glyphs=[],1===t&&n.readMessage(_p,e)}function _p(t,e,n){if(3===t){const{id:t,bitmap:i,width:r,height:s,left:o,top:a,advance:l}=n.readMessage(Tp,{});e.glyphs.push({id:t,bitmap:new Uh({width:r+2*yp,height:s+2*yp},i),metrics:{width:r,height:s,left:o,top:a,advance:l}})}else 4===t?e.ascender=n.readSVarint():5===t&&(e.descender=n.readSVarint())}function Tp(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}const Ep=yp;function xp(t){let e=0,n=0;for(const o of t)e+=o.w*o.h,n=Math.max(n,o.w);t.sort(((t,e)=>e.h-t.h));const i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let r=0,s=0;for(const o of t)for(let t=i.length-1;t>=0;t--){const e=i[t];if(!(o.w>e.w||o.h>e.h)){if(o.x=e.x,o.y=e.y,s=Math.max(s,o.y+o.h),r=Math.max(r,o.x+o.w),o.w===e.w&&o.h===e.h){const e=i.pop();t<i.length&&(i[t]=e)}else o.h===e.h?(e.x+=o.w,e.w-=o.w):o.w===e.w?(e.y+=o.h,e.h-=o.h):(i.push({x:e.x+o.w,y:e.y,w:e.w-o.w,h:o.h}),e.y+=o.h,e.h-=o.h);break}}return{w:r,h:s,fill:e/(r*s)||0}}const bp=1;class Ip{constructor(t,e){let{pixelRatio:n,version:i,stretchX:r,stretchY:s,content:o}=e;this.paddedRect=t,this.pixelRatio=n,this.stretchX=r,this.stretchY=s,this.content=o,this.version=i}get tl(){return[this.paddedRect.x+bp,this.paddedRect.y+bp]}get br(){return[this.paddedRect.x+this.paddedRect.w-bp,this.paddedRect.y+this.paddedRect.h-bp]}get displaySize(){return[(this.paddedRect.w-2*bp)/this.pixelRatio,(this.paddedRect.h-2*bp)/this.pixelRatio]}}class wp{constructor(t,e){const n={},i={};this.haveRenderCallbacks=[];const r=[];this.addImages(t,n,r),this.addImages(e,i,r);const{w:s,h:o}=xp(r),a=new Bh({width:s||1,height:o||1});for(const l in t){const e=t[l],i=n[l].paddedRect;Bh.copy(e.data,a,{x:0,y:0},{x:i.x+bp,y:i.y+bp},e.data)}for(const l in e){const t=e[l],n=i[l].paddedRect,r=n.x+bp,s=n.y+bp,o=t.data.width,h=t.data.height;Bh.copy(t.data,a,{x:0,y:0},{x:r,y:s},t.data),Bh.copy(t.data,a,{x:0,y:h-1},{x:r,y:s-1},{width:o,height:1}),Bh.copy(t.data,a,{x:0,y:0},{x:r,y:s+h},{width:o,height:1}),Bh.copy(t.data,a,{x:o-1,y:0},{x:r-1,y:s},{width:1,height:h}),Bh.copy(t.data,a,{x:0,y:0},{x:r+o,y:s},{width:1,height:h})}this.image=a,this.iconPositions=n,this.patternPositions=i}addImages(t,e,n){for(const i in t){const r=t[i],s={x:0,y:0,w:r.data.width+2*bp,h:r.data.height+2*bp};n.push(s),e[i]=new Ip(s,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}patchUpdatedImages(t,e){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((e=>t.hasImage(e))),t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}patchUpdatedImage(t,e,n){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[i,r]=t.tl;n.update(e.data,void 0,{x:i,y:r})}}Xr(Ip,"ImagePosition"),Xr(wp,"ImageAtlas");const Sp={horizontal:1,vertical:2,horizontalOnly:3},Rp=-17;class Cp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const n=new Cp;return n.scale=t||1,n.fontStack=e,n}static forImage(t){const e=new Cp;return e.imageName=t,e}}class Ap{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const n=new Ap;for(let i=0;i<t.sections.length;i++){const r=t.sections[i];r.image?n.addImageSection(r):n.addTextSection(r,e)}return n}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(t,e){let n="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i+1)||null,s=t.charCodeAt(i-1)||null;n+=!e&&(r&&ss(r)&&!Wu[t[i+1]]||s&&ss(s)&&!Wu[t[i-1]])||!Wu[t[i]]?t[i]:Wu[t[i]]}return n}(this.text,t)}trim(){let t=0;for(let n=0;n<this.text.length&&Op[this.text.charCodeAt(n)];n++)t++;let e=this.text.length;for(let n=this.text.length-1;n>=0&&n>=t&&Op[this.text.charCodeAt(n)];n--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const n=new Ap;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(Cp.forText(t.scale,t.fontStack||e));const n=this.sections.length-1;for(let i=0;i<t.text.length;++i)this.sectionIndex.push(n)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void V("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Cp.forImage(e)),this.sectionIndex.push(this.sections.length-1)):V("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Dp(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){const m=Ap.fromFeature(t,r);u===Sp.vertical&&m.verticalizePunctuation(p);let g=[];const y=function(t,e,n,i,r,s){if(!t)return[];const o=[],a=function(t,e,n,i,r,s){let o=0;for(let a=0;a<t.length();a++){const n=t.getSection(a);o+=Mp(t.getCharCode(a),n,i,r,e,s)}return o/Math.max(1,Math.ceil(o/n))}(t,e,n,i,r,s),l=t.text.indexOf("\u200b")>=0;let h=0;for(let u=0;u<t.length();u++){const n=t.getSection(u),p=t.getCharCode(u);if(Op[p]||(h+=Mp(p,n,i,r,e,s)),u<t.length()-1){const e=!((c=p)<11904||!(ts["Bopomofo Extended"](c)||ts.Bopomofo(c)||ts["CJK Compatibility Forms"](c)||ts["CJK Compatibility Ideographs"](c)||ts["CJK Compatibility"](c)||ts["CJK Radicals Supplement"](c)||ts["CJK Strokes"](c)||ts["CJK Symbols and Punctuation"](c)||ts["CJK Unified Ideographs Extension A"](c)||ts["CJK Unified Ideographs"](c)||ts["Enclosed CJK Letters and Months"](c)||ts["Halfwidth and Fullwidth Forms"](c)||ts.Hiragana(c)||ts["Ideographic Description Characters"](c)||ts["Kangxi Radicals"](c)||ts["Katakana Phonetic Extensions"](c)||ts.Katakana(c)||ts["Vertical Forms"](c)||ts["Yi Radicals"](c)||ts["Yi Syllables"](c)));(Np[p]||e||n.imageName)&&o.push(Lp(u+1,h,a,o,Fp(p,t.getCharCode(u+1),e&&l),!1))}}var c;return kp(Lp(t.length(),h,a,o,0,!0))}(m,h,s,e,i,d),{processBidirectionalText:v,processStyledBidirectionalText:_}=Ts;if(v&&1===m.sections.length){const t=v(m.toString(),y);for(const e of t){const t=new Ap;t.text=e,t.sections=m.sections;for(let n=0;n<e.length;n++)t.sectionIndex.push(0);g.push(t)}}else if(_){const t=_(m.text,m.sectionIndex,y);for(const e of t){const t=new Ap;t.text=e[0],t.sectionIndex=e[1],t.sections=m.sections,g.push(t)}}else g=function(t,e){const n=[],i=t.text;let r=0;for(const s of e)n.push(t.substring(r,s)),r=s;return r<i.length&&n.push(t.substring(r,i.length)),n}(m,y);const T=[],E={positionedLines:T,text:m.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:u,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(t,e,n,i,r,s,o,a,l,h,c,u){let p=0,d=0,f=0;const m="right"===a?1:"left"===a?0:.5;let g=!1;for(const x of r){const t=x.getSections();for(const n of t){if(n.imageName)continue;const t=e[n.fontStack];if(t&&(g=void 0!==t.ascender&&void 0!==t.descender,!g))break}if(!g)break}let y=0;for(const x of r){x.trim();const r=x.getMaxScale(),o=(r-1)*Uu,a={positionedGlyphs:[],lineOffset:0};t.positionedLines[y]=a;const _=a.positionedGlyphs;let T=0;if(!x.length()){d+=s,++y;continue}let E=0,b=0;for(let s=0;s<x.length();s++){const o=x.getSection(s),a=x.getSectionIndex(s),f=x.getCharCode(s);let m=o.scale,y=null,I=null,w=null,S=Uu,R=0;const C=!(l===Sp.horizontal||!c&&!rs(f)||c&&(Op[f]||(v=f,ts.Arabic(v)||ts["Arabic Supplement"](v)||ts["Arabic Extended-A"](v)||ts["Arabic Presentation Forms-A"](v)||ts["Arabic Presentation Forms-B"](v))));if(o.imageName){const e=i[o.imageName];if(!e)continue;w=o.imageName,t.iconsInText=t.iconsInText||!0,I=e.paddedRect;const n=e.displaySize;m=m*Uu/u,y={width:n[0],height:n[1],left:bp,top:-Ep,advance:C?n[1]:n[0],localGlyph:!1},R=g?-y.height*m:Rp+r*Uu-n[1]*m,S=y.advance;const s=(C?n[0]:n[1])*m-Uu*r;s>0&&s>T&&(T=s)}else{const t=n[o.fontStack];if(!t)continue;t[f]&&(I=t[f]);const i=e[o.fontStack];if(!i)continue;const s=i.glyphs[f];if(!s)continue;if(y=s.metrics,S=8203!==f?Uu:0,g){const t=void 0!==i.ascender?Math.abs(i.ascender):0,e=void 0!==i.descender?Math.abs(i.descender):0,n=(t+e)*m;E<n&&(E=n,b=(t-e)/2*m),R=-t*m}else R=Rp+(r-m)*Uu}C?(t.verticalizable=!0,_.push({glyph:f,imageName:w,x:p,y:d+R,vertical:C,scale:m,localGlyph:y.localGlyph,fontStack:o.fontStack,sectionIndex:a,metrics:y,rect:I}),p+=S*m+h):(_.push({glyph:f,imageName:w,x:p,y:d+R,vertical:C,scale:m,localGlyph:y.localGlyph,fontStack:o.fontStack,sectionIndex:a,metrics:y,rect:I}),p+=y.advance*m+h)}0!==_.length&&(f=Math.max(p-h,f),g?Bp(_,m,T,b,s*r/2):Bp(_,m,T,0,s/2)),p=0;const I=s*r+T;a.lineOffset=Math.max(T,o),d+=I,++y}var v;const _=d,{horizontalAlign:T,verticalAlign:E}=Up(o);(function(t,e,n,i,r,s){const o=(e-n)*r,a=-s*i;for(const l of t)for(const t of l.positionedGlyphs)t.x+=o,t.y+=a})(t.positionedLines,m,T,E,f,_),t.top+=-E*_,t.bottom=t.top+_,t.left+=-T*f,t.right=t.left+f,t.hasBaseline=g}(E,e,n,i,g,o,a,l,u,h,p,f),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(T)&&E}const Op={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Np={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Mp(t,e,n,i,r,s){if(e.imageName){const t=i[e.imageName];return t?t.displaySize[0]*e.scale*Uu/s+r:0}{const i=n[e.fontStack],s=i&&i.glyphs[t];return s?s.metrics.advance*e.scale+r:0}}function Pp(t,e,n,i){const r=Math.pow(t-e,2);return i?t<e?r/2:2*r:r+Math.abs(n)*n}function Fp(t,e,n){let i=0;return 10===t&&(i-=1e4),n&&(i+=150),40!==t&&65288!==t||(i+=50),41!==e&&65289!==e||(i+=50),i}function Lp(t,e,n,i,r,s){let o=null,a=Pp(e,n,r,s);for(const l of i){const t=Pp(e-l.x,n,r,s)+l.badness;t<=a&&(o=l,a=t)}return{index:t,x:e,priorBreak:o,badness:a}}function kp(t){return t?kp(t.priorBreak).concat(t.index):[]}function Up(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Bp(t,e,n,i,r){if(!(e||n||i||r))return;const s=t.length-1,o=t[s],a=(o.x+o.metrics.advance*o.scale)*e;for(let l=0;l<=s;l++)t[l].x-=a,t[l].y+=n+i+r}function zp(t,e,n){const{horizontalAlign:i,verticalAlign:r}=Up(n),s=e[0]-t.displaySize[0]*i,o=e[1]-t.displaySize[1]*r;return{image:t,top:o,bottom:o+t.displaySize[1],left:s,right:s+t.displaySize[0]}}function Gp(t,e,n,i,r,s){const o=t.image;let a;if(o.content){const t=o.content,e=o.pixelRatio||1;a=[t[0]/e,t[1]/e,o.displaySize[0]-t[2]/e,o.displaySize[1]-t[3]/e]}const l=e.left*s,h=e.right*s;let c,u,p,d;"width"===n||"both"===n?(d=r[0]+l-i[3],u=r[0]+h+i[1]):(d=r[0]+(l+h-o.displaySize[0])/2,u=d+o.displaySize[0]);const f=e.top*s,m=e.bottom*s;return"height"===n||"both"===n?(c=r[1]+f-i[0],p=r[1]+m+i[2]):(c=r[1]+(f+m-o.displaySize[1])/2,p=c+o.displaySize[1]),{image:o,top:c,right:u,bottom:p,left:d,collisionPadding:a}}class Hp extends v{constructor(t,e,n,i,r){super(t,e),this.angle=i,this.z=n,void 0!==r&&(this.segment=r)}clone(){return new Hp(this.x,this.y,this.z,this.angle,this.segment)}}function jp(t,e,n,i,r){if(void 0===e.segment)return!0;let s=e,o=e.segment+1,a=0;for(;a>-n/2;){if(o--,o<0)return!1;a-=t[o].dist(s),s=t[o]}a+=t[o].dist(t[o+1]),o++;const l=[];let h=0;for(;a<n/2;){const e=t[o],n=t[o+1];if(!n)return!1;let s=t[o-1].angleTo(e)-e.angleTo(n);for(s=Math.abs((s+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:a,angleDelta:s}),h+=s;a-l[0].distance>i;)h-=l.shift().angleDelta;if(h>r)return!1;o++,a+=e.dist(n)}return!0}function Vp(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Wp(t,e,n){return t?.6*e*n:0}function Zp(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Yp(t,e,n,i,r,s){const o=Wp(n,r,s),a=Zp(n,i)*s;let l=0;const h=Vp(t)/2;for(let c=0;c<t.length-1;c++){const n=t[c],i=t[c+1],r=n.dist(i);if(l+r>h){const s=(h-l)/r,u=Nn(n.x,i.x,s),p=Nn(n.y,i.y,s),d=new Hp(u,p,0,i.angleTo(n),c);return!o||jp(t,d,a,o,e)?d:void 0}l+=r}}function qp(t,e,n,i,r,s,o,a,l){const h=Wp(i,s,o),c=Zp(i,r),u=c*o,p=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-u<e/4&&(e=u+e/4),Xp(t,p?e/2*a%e:(c/2+2*s)*o*a%e,e,h,n,u,p,!1,l)}function Xp(t,e,n,i,r,s,o,a,l){const h=s/2,c=Vp(t);let u=0,p=e-n,d=[];for(let f=0;f<t.length-1;f++){const e=t[f],o=t[f+1],a=e.dist(o),m=o.angleTo(e);for(;p+n<u+a;){p+=n;const g=(p-u)/a,y=Nn(e.x,o.x,g),v=Nn(e.y,o.y,g);if(y>=0&&y<l&&v>=0&&v<l&&p-h>=0&&p+h<=c){const e=new Hp(y,v,0,m,f);e._round(),i&&!jp(t,e,s,i,r)||d.push(e)}}u+=a}return a||d.length||o||(d=Xp(t,u/2,n,i,r,s,o,!0,l)),d}function Kp(t,e,n,i,r){const s=[];for(let o=0;o<t.length;o++){const a=t[o];let l;for(let t=0;t<a.length-1;t++){let o=a[t],h=a[t+1];o.x<e&&h.x<e||(o.x<e?o=new v(e,o.y+(e-o.x)/(h.x-o.x)*(h.y-o.y))._round():h.x<e&&(h=new v(e,o.y+(e-o.x)/(h.x-o.x)*(h.y-o.y))._round()),o.y<n&&h.y<n||(o.y<n?o=new v(o.x+(n-o.y)/(h.y-o.y)*(h.x-o.x),n)._round():h.y<n&&(h=new v(o.x+(n-o.y)/(h.y-o.y)*(h.x-o.x),n)._round()),o.x>=i&&h.x>=i||(o.x>=i?o=new v(i,o.y+(i-o.x)/(h.x-o.x)*(h.y-o.y))._round():h.x>=i&&(h=new v(i,o.y+(i-o.x)/(h.x-o.x)*(h.y-o.y))._round()),o.y>=r&&h.y>=r||(o.y>=r?o=new v(o.x+(r-o.y)/(h.y-o.y)*(h.x-o.x),r)._round():h.y>=r&&(h=new v(o.x+(r-o.y)/(h.y-o.y)*(h.x-o.x),r)._round()),l&&o.equals(l[l.length-1])||(l=[o],s.push(l)),l.push(h)))))}}return s}Xr(Hp,"Anchor");const Qp=1e20;function Jp(t,e,n,i,r,s,o,a,l){for(let h=e;h<e+i;h++)$p(t,n*s+h,s,r,o,a,l);for(let h=n;h<n+r;h++)$p(t,h*s+e,1,i,o,a,l)}function $p(t,e,n,i,r,s,o){s[0]=0,o[0]=-Qp,o[1]=Qp,r[0]=t[e];for(let a=1,l=0,h=0;a<i;a++){r[a]=t[e+a*n];const i=a*a;do{const t=s[l];h=(r[a]-r[t]+i-t*t)/(a-t)/2}while(h<=o[l]&&--l>-1);l++,s[l]=a,o[l]=h,o[l+1]=Qp}for(let a=0,l=0;a<i;a++){for(;o[l+1]<a;)l++;const i=s[l],h=a-i;t[e+a*n]=r[i]+h*h}}const td=2,ed={none:0,ideographs:1,all:2};class nd{constructor(t,e,n){this.requestManager=t,this.localGlyphMode=e,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,e){const n=[];for(const i in t)for(const e of t[i])n.push({stack:i,id:e});D(n,((t,e)=>{let{stack:n,id:i}=t,r=this.entries[n];r||(r=this.entries[n]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let s=r.glyphs[i];if(void 0!==s)return void e(null,{stack:n,id:i,glyph:s});if(s=this._tinySDF(r,n,i),s)return r.glyphs[i]=s,void e(null,{stack:n,id:i,glyph:s});const o=Math.floor(i/256);if(256*o>65535)return void e(new Error("glyphs > 65535 not supported"));if(r.ranges[o])return void e(null,{stack:n,id:i,glyph:s});let a=r.requests[o];a||(a=r.requests[o]=[],nd.loadGlyphRange(n,o,this.url,this.requestManager,((t,e)=>{if(e){r.ascender=e.ascender,r.descender=e.descender;for(const t in e.glyphs)this._doesCharSupportLocalGlyph(+t)||(r.glyphs[+t]=e.glyphs[+t]);r.ranges[o]=!0}for(const n of a)n(t,e);delete r.requests[o]}))),a.push(((t,r)=>{t?e(t):r&&e(null,{stack:n,id:i,glyph:r.glyphs[i]||null})}))}),((t,n)=>{if(t)e(t);else if(n){const t={};for(const{stack:e,id:i,glyph:r}of n)void 0===t[e]&&(t[e]={}),void 0===t[e].glyphs&&(t[e].glyphs={}),t[e].glyphs[i]=r&&{id:r.id,bitmap:r.bitmap.clone(),metrics:r.metrics},t[e].ascender=this.entries[e].ascender,t[e].descender=this.entries[e].descender;e(null,t)}}))}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==ed.none&&(this.localGlyphMode===ed.all?!!this.localFontFamily:!!this.localFontFamily&&(ts["CJK Unified Ideographs"](t)||ts["Hangul Syllables"](t)||ts.Hiragana(t)||ts.Katakana(t)||ts["CJK Symbols and Punctuation"](t)))}_tinySDF(t,e,n){const i=this.localFontFamily;if(!i||!this._doesCharSupportLocalGlyph(n))return;let r=t.tinySDF;if(!r){let n="400";/bold/i.test(e)?n="900":/medium/i.test(e)?n="500":/light/i.test(e)&&(n="200"),r=t.tinySDF=new nd.TinySDF({fontFamily:i,fontWeight:n,fontSize:24*td,buffer:3*td,radius:8*td}),r.fontWeight=n}if(this.localGlyphs[r.fontWeight][n])return this.localGlyphs[r.fontWeight][n];const s=String.fromCharCode(n),{data:o,width:a,height:l,glyphWidth:h,glyphHeight:c,glyphLeft:u,glyphTop:p,glyphAdvance:d}=r.draw(s);return this.localGlyphs[r.fontWeight][n]={id:n,bitmap:new Uh({width:a,height:l},o),metrics:{width:h/td,height:c/td,left:u/td,top:p/td-27,advance:d/td,localGlyph:!0}}}}nd.loadGlyphRange=function(t,e,n,i,r){const s=256*e,o=s+255,a=i.transformRequest(i.normalizeGlyphsURL(n).replace("{fontstack}",t).replace("{range}","".concat(s,"-").concat(o)),lt.Glyphs);pt(a,((t,e)=>{if(t)r(t);else if(e){const t={},n=function(t){return new gp(t).readFields(vp,{})}(e);for(const e of n.glyphs)t[e.id]=e;r(null,{glyphs:t,ascender:n.ascender,descender:n.descender})}}))},nd.TinySDF=class{constructor(){let{fontSize:t=24,buffer:e=3,radius:n=8,cutoff:i=.25,fontFamily:r="sans-serif",fontWeight:s="normal",fontStyle:o="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=e,this.cutoff=i,this.radius=n;const a=this.size=t+4*e,l=this._createCanvas(a),h=this.ctx=l.getContext("2d",{willReadFrequently:!0});h.font="".concat(o," ").concat(s," ").concat(t,"px ").concat(r),h.textBaseline="alphabetic",h.textAlign="left",h.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:r,actualBoundingBoxRight:s}=this.ctx.measureText(t),o=Math.ceil(n),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(s-r))),l=Math.min(this.size-this.buffer,o+Math.ceil(i)),h=a+2*this.buffer,c=l+2*this.buffer,u=Math.max(h*c,0),p=new Uint8ClampedArray(u),d={data:p,width:h,height:c,glyphWidth:a,glyphHeight:l,glyphTop:o,glyphLeft:0,glyphAdvance:e};if(0===a||0===l)return d;const{ctx:f,buffer:m,gridInner:g,gridOuter:y}=this;f.clearRect(m,m,a,l),f.fillText(t,m,m+o);const v=f.getImageData(m,m,a,l);y.fill(Qp,0,u),g.fill(0,0,u);for(let _=0;_<l;_++)for(let t=0;t<a;t++){const e=v.data[4*(_*a+t)+3]/255;if(0===e)continue;const n=(_+m)*h+t+m;if(1===e)y[n]=0,g[n]=Qp;else{const t=.5-e;y[n]=t>0?t*t:0,g[n]=t<0?t*t:0}}Jp(y,0,0,h,c,h,this.f,this.v,this.z),Jp(g,m,m,a,l,h,this.f,this.v,this.z);for(let _=0;_<u;_++){const t=Math.sqrt(y[_])-Math.sqrt(g[_]);p[_]=Math.round(255-255*(t/this.radius+this.cutoff))}return d}};const id=bp;function rd(t,e,n,i){const r=[],s=t.image,o=s.pixelRatio,a=s.paddedRect.w-2*id,l=s.paddedRect.h-2*id,h=t.right-t.left,c=t.bottom-t.top,u=s.stretchX||[[0,a]],p=s.stretchY||[[0,l]],d=(t,e)=>t+e[1]-e[0],f=u.reduce(d,0),m=p.reduce(d,0),g=a-f,y=l-m;let _=0,T=f,E=0,x=m,b=0,I=g,w=0,S=y;if(s.content&&i){const t=s.content;_=sd(u,0,t[0]),E=sd(p,0,t[1]),T=sd(u,t[0],t[2]),x=sd(p,t[1],t[3]),b=t[0]-_,w=t[1]-E,I=t[2]-t[0]-T,S=t[3]-t[1]-x}const R=(i,r,a,l)=>{const u=ad(i.stretch-_,T,h,t.left),p=ld(i.fixed-b,I,i.stretch,f),d=ad(r.stretch-E,x,c,t.top),g=ld(r.fixed-w,S,r.stretch,m),y=ad(a.stretch-_,T,h,t.left),R=ld(a.fixed-b,I,a.stretch,f),C=ad(l.stretch-E,x,c,t.top),A=ld(l.fixed-w,S,l.stretch,m),D=new v(u,d),O=new v(y,d),N=new v(y,C),M=new v(u,C),P=new v(p/o,g/o),F=new v(R/o,A/o),L=e*Math.PI/180;if(L){const t=Math.sin(L),e=Math.cos(L),n=[e,-t,t,e];D._matMult(n),O._matMult(n),M._matMult(n),N._matMult(n)}const k=i.stretch+i.fixed,U=r.stretch+r.fixed;return{tl:D,tr:O,bl:M,br:N,tex:{x:s.paddedRect.x+id+k,y:s.paddedRect.y+id+U,w:a.stretch+a.fixed-k,h:l.stretch+l.fixed-U},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:P,pixelOffsetBR:F,minFontScaleX:I/o/h,minFontScaleY:S/o/c,isSDF:n}};if(i&&(s.stretchX||s.stretchY)){const t=od(u,g,f),e=od(p,y,m);for(let n=0;n<t.length-1;n++){const i=t[n],s=t[n+1];for(let t=0;t<e.length-1;t++)r.push(R(i,e[t],s,e[t+1]))}}else r.push(R({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:a+1},{fixed:0,stretch:l+1}));return r}function sd(t,e,n){let i=0;for(const r of t)i+=Math.max(e,Math.min(n,r[1]))-Math.max(e,Math.min(n,r[0]));return i}function od(t,e,n){const i=[{fixed:-id,stretch:0}];for(const[r,s]of t){const t=i[i.length-1];i.push({fixed:r-t.stretch,stretch:t.stretch}),i.push({fixed:r-t.stretch,stretch:t.stretch+(s-r)})}return i.push({fixed:e+id,stretch:n}),i}function ad(t,e,n,i){return t/e*n+i}function ld(t,e,n,i){return t-e*n/i}function hd(t,e,n,i){const r=e+t.positionedLines[i].lineOffset;return 0===i?n+r/2:n+(r+(e+t.positionedLines[i-1].lineOffset))/2}class cd{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ud;if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,i=e[t];for(;t>0;){const r=t-1>>1,s=e[r];if(n(i,s)>=0)break;e[t]=s,t=r}e[t]=i}_down(t){const{data:e,compare:n}=this,i=this.length>>1,r=e[t];for(;t<i;){let i=1+(t<<1),s=e[i];const o=i+1;if(o<this.length&&n(e[o],s)<0&&(i=o,s=e[o]),n(s,r)>=0)break;e[t]=s,t=i}e[t]=r}}function ud(t,e){return t<e?-1:t>e?1:0}function pd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=1/0,r=1/0,s=-1/0,o=-1/0;const a=t[0];for(let d=0;d<a.length;d++){const t=a[d];(!d||t.x<i)&&(i=t.x),(!d||t.y<r)&&(r=t.y),(!d||t.x>s)&&(s=t.x),(!d||t.y>o)&&(o=t.y)}const l=Math.min(s-i,o-r);let h=l/2;const c=new cd([],dd);if(0===l)return new v(i,r);for(let d=i;d<s;d+=l)for(let e=r;e<o;e+=l)c.push(new fd(d+h,e+h,h,t));let u=function(t){let e=0,n=0,i=0;const r=t[0];for(let s=0,o=r.length,a=o-1;s<o;a=s++){const t=r[s],o=r[a],l=t.x*o.y-o.x*t.y;n+=(t.x+o.x)*l,i+=(t.y+o.y)*l,e+=3*l}return new fd(n/e,i/e,0,t)}(t),p=c.length;for(;c.length;){const i=c.pop();(i.d>u.d||!u.d)&&(u=i,n&&console.log("found best %d after %d probes",Math.round(1e4*i.d)/1e4,p)),i.max-u.d<=e||(h=i.h/2,c.push(new fd(i.p.x-h,i.p.y-h,h,t)),c.push(new fd(i.p.x+h,i.p.y-h,h,t)),c.push(new fd(i.p.x-h,i.p.y+h,h,t)),c.push(new fd(i.p.x+h,i.p.y+h,h,t)),p+=4)}return n&&(console.log("num probes: ".concat(p)),console.log("best distance: ".concat(u.d))),u.p}function dd(t,e){return e.max-t.max}class fd{constructor(t,e,n,i){this.p=new v(t,e),this.h=n,this.d=function(t,e){let n=!1,i=1/0;for(let r=0;r<e.length;r++){const s=e[r];for(let e=0,r=s.length,o=r-1;e<r;o=e++){const r=s[e],a=s[o];r.y>t.y!=a.y>t.y&&t.x<(a.x-r.x)*(t.y-r.y)/(a.y-r.y)+r.x&&(n=!n),i=Math.min(i,vh(t,r,a))}}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}}const md=7,gd=Number.POSITIVE_INFINITY,yd=Math.sqrt(2);function vd(t,e){let[n,i]=e,r=0,s=0;if(i===gd){n<0&&(n=0);const e=n/yd;switch(t){case"top-right":case"top-left":s=e-md;break;case"bottom-right":case"bottom-left":s=-e+md;break;case"bottom":s=-n+md;break;case"top":s=n-md}switch(t){case"top-right":case"bottom-right":r=-e;break;case"top-left":case"bottom-left":r=e;break;case"left":r=n;break;case"right":r=-n}}else{switch(n=Math.abs(n),i=Math.abs(i),t){case"top-right":case"top-left":case"top":s=i-md;break;case"bottom-right":case"bottom-left":case"bottom":s=-i+md}switch(t){case"top-right":case"bottom-right":case"right":r=-n;break;case"top-left":case"bottom-left":case"left":r=n}}return[r,s]}function _d(t,e,n,i,r,s,o,a,l,h){t.createArrays(),t.tilePixelRatio=aa/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const c=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,p={};if("composite"===t.textSizeData.kind){const{minZoom:e,maxZoom:n}=t.textSizeData;p.compositeTextSizes=[u["text-size"].possiblyEvaluate(new Es(e),a),u["text-size"].possiblyEvaluate(new Es(n),a)]}if("composite"===t.iconSizeData.kind){const{minZoom:e,maxZoom:n}=t.iconSizeData;p.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new Es(e),a),u["icon-size"].possiblyEvaluate(new Es(n),a)]}p.layoutTextSize=u["text-size"].possiblyEvaluate(new Es(l+1),a),p.layoutIconSize=u["icon-size"].possiblyEvaluate(new Es(l+1),a),p.textMaxSize=u["text-size"].possiblyEvaluate(new Es(18),a);const d="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),f=c.get("text-size");for(const m of t.features){const s=c.get("text-font").evaluate(m,{},a).join(","),l=f.evaluate(m,{},a),u=p.layoutTextSize.evaluate(m,{},a),g=(p.layoutIconSize.evaluate(m,{},a),{horizontal:{},vertical:void 0}),y=m.text;let v,_=[0,0];if(y){const i=y.toString(),o=c.get("text-letter-spacing").evaluate(m,{},a)*Uu,h=c.get("text-line-height").evaluate(m,{},a)*Uu,p=ns(i)?o:0,f=c.get("text-anchor").evaluate(m,{},a),v=c.get("text-variable-anchor");if(!v){const t=c.get("text-radial-offset").evaluate(m,{},a);_=t?vd(f,[t*Uu,gd]):c.get("text-offset").evaluate(m,{},a).map((t=>t*Uu))}let T=d?"center":c.get("text-justify").evaluate(m,{},a);const E="point"===c.get("symbol-placement"),x=E?c.get("text-max-width").evaluate(m,{},a)*Uu:1/0,b=o=>{t.allowVerticalPlacement&&es(i)&&(g.vertical=Dp(y,e,n,r,s,x,h,f,o,p,_,Sp.vertical,!0,u,l))};if(!d&&v){const t="auto"===T?v.map((t=>Td(t))):[T];let i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(!g.horizontal[a])if(i)g.horizontal[a]=g.horizontal[0];else{const t=Dp(y,e,n,r,s,x,h,"center",a,p,_,Sp.horizontal,!1,u,l);t&&(g.horizontal[a]=t,i=1===t.positionedLines.length)}}b("left")}else{if("auto"===T&&(T=Td(f)),E||c.get("text-writing-mode").indexOf("horizontal")>=0||!es(i)){const t=Dp(y,e,n,r,s,x,h,f,T,p,_,Sp.horizontal,!1,u,l);t&&(g.horizontal[T]=t)}b(E?"left":T)}}let T=!1;if(m.icon&&m.icon.name){const e=i[m.icon.name];e&&(v=zp(r[m.icon.name],c.get("icon-offset").evaluate(m,{},a),c.get("icon-anchor").evaluate(m,{},a)),T=e.sdf,void 0===t.sdfIcons?t.sdfIcons=e.sdf:t.sdfIcons!==e.sdf&&V("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const E=wd(g.horizontal)||g.vertical;t.iconsInText||(t.iconsInText=!!E&&E.iconsInText),(E||v)&&Ed(t,m,g,v,i,p,u,0,_,T,o,a,h)}s&&t.generateCollisionDebugBuffers(l,t.collisionBoxArray)}function Td(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ed(t,e,n,i,r,s,o,a,l,h,c,u,p){let d=s.textMaxSize.evaluate(e,{},u);void 0===d&&(d=o);const f=t.layers[0].layout,m=f.get("icon-offset").evaluate(e,{},u),g=wd(n.horizontal)||n.vertical,y="globe"===p.name,v=Uu,_=o/v,T=t.tilePixelRatio*d/v,x=(D=t.overscaling,t.zoom>18&&D>2&&(D>>=1),Math.max(aa/(512*D),1)*f.get("symbol-spacing")),b=f.get("text-padding")*t.tilePixelRatio,I=f.get("icon-padding")*t.tilePixelRatio,w=E(f.get("text-max-angle")),S="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),R="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),C=f.get("symbol-placement"),A=x/2;var D;const O=f.get("icon-text-fit");let N;i&&"none"!==O&&(t.allowVerticalPlacement&&n.vertical&&(N=Gp(i,n.vertical,O,f.get("icon-text-fit-padding"),m,_)),g&&(i=Gp(i,g,O,f.get("icon-text-fit-padding"),m,_)));const M=(o,a,d)=>{if(a.x<0||a.x>=aa||a.y<0||a.y>=aa)return;let f=null;if(y){const{x:t,y:e,z:n}=p.projectTilePoint(a.x,a.y,d);f={anchor:new Hp(t,e,n,0,void 0),up:p.upVector(d,a.x,a.y)}}!function(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T,E,x,b,I){const w=t.addToLineVertexArray(e,i);let S,R,C,A,D,O,N,M=0,P=0,F=0,L=0,k=-1,U=-1;const B={};let z=Oo("");const G=n?n.anchor:e;let H=0,j=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[H,j]=l.layout.get("text-offset").evaluate(T,{},I).map((t=>t*Uu)):(H=l.layout.get("text-radial-offset").evaluate(T,{},I)*Uu,j=gd),t.allowVerticalPlacement&&r.vertical){const t=r.vertical;if(f)O=Rd(t),a&&(N=Rd(a));else{const n=l.layout.get("text-rotate").evaluate(T,{},I)+90;C=Sd(h,G,e,c,u,p,t,d,n,m),a&&(A=Sd(h,G,e,c,u,p,a,y,n))}}if(s){const i=l.layout.get("icon-rotate").evaluate(T,{},I),r="none"!==l.layout.get("icon-text-fit"),o=rd(s,i,x,r),d=a?rd(a,i,x,r):void 0;R=Sd(h,G,e,c,u,p,s,y,i),M=4*o.length;const f=t.iconSizeData;let m=null;"source"===f.kind?(m=[Bu*l.layout.get("icon-size").evaluate(T,{},I)],m[0]>bd&&V("".concat(t.layerIds[0],': Value for "icon-size" is >= ').concat(xd,'. Reduce your "icon-size".'))):"composite"===f.kind&&(m=[Bu*E.compositeIconSizes[0].evaluate(T,{},I),Bu*E.compositeIconSizes[1].evaluate(T,{},I)],(m[0]>bd||m[1]>bd)&&V("".concat(t.layerIds[0],': Value for "icon-size" is >= ').concat(xd,'. Reduce your "icon-size".'))),t.addSymbols(t.icon,o,m,_,v,T,!1,n,e,w.lineStartIndex,w.lineLength,-1,b,I),k=t.icon.placedSymbolArray.length-1,d&&(P=4*d.length,t.addSymbols(t.icon,d,m,_,v,T,Sp.vertical,n,e,w.lineStartIndex,w.lineLength,-1,b,I),U=t.icon.placedSymbolArray.length-1)}for(const V in r.horizontal){const i=r.horizontal[V];S||(z=Oo(i.text),f?D=Rd(i):S=Sd(h,G,e,c,u,p,i,d,l.layout.get("text-rotate").evaluate(T,{},I),m));const s=1===i.positionedLines.length;if(F+=Id(t,n,e,i,o,l,f,T,m,w,r.vertical?Sp.horizontal:Sp.horizontalOnly,s?Object.keys(r.horizontal):[V],B,k,E,b,I),s)break}r.vertical&&(L+=Id(t,n,e,r.vertical,o,l,f,T,m,w,Sp.vertical,["vertical"],B,U,E,b,I));let W=-1;const Z=(t,e)=>t?Math.max(t,e):e;W=Z(D,W),W=Z(O,W),W=Z(N,W);const Y=W>-1?1:0;t.glyphOffsetArray.length>=af.MAX_GLYPHS&&V("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==T.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,T.sortKey),t.symbolInstances.emplaceBack(G.x,G.y,G.z,e.x,e.y,B.right>=0?B.right:-1,B.center>=0?B.center:-1,B.left>=0?B.left:-1,B.vertical>=0?B.vertical:-1,k,U,z,void 0!==S?S:t.collisionBoxArray.length,void 0!==S?S+1:t.collisionBoxArray.length,void 0!==C?C:t.collisionBoxArray.length,void 0!==C?C+1:t.collisionBoxArray.length,void 0!==R?R:t.collisionBoxArray.length,void 0!==R?R+1:t.collisionBoxArray.length,A||t.collisionBoxArray.length,A?A+1:t.collisionBoxArray.length,c,F,L,M,P,Y,0,H,j,W)}(t,a,f,o,n,i,r,N,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,b,S,l,0,I,R,m,e,s,h,c,u)};if("line"===C)for(const E of Kp(e.geometry,0,0,aa,aa)){const e=qp(E,x,w,n.vertical||g,i,v,T,t.overscaling,aa);for(const n of e)g&&Cd(t,g.text,A,n)||M(E,n,u)}else if("line-center"===C){for(const E of e.geometry)if(E.length>1){const t=Yp(E,w,n.vertical||g,i,v,T);t&&M(E,t,u)}}else if("Polygon"===e.type)for(const E of bc(e.geometry,0)){const t=pd(E,16);M(E[0],new Hp(t.x,t.y,0,0,void 0),u)}else if("LineString"===e.type)for(const E of e.geometry)M(E,new Hp(E[0].x,E[0].y,0,0,void 0),u);else if("Point"===e.type)for(const E of e.geometry)for(const t of E)M([t],new Hp(t.x,t.y,0,0,void 0),u)}const xd=255,bd=xd*Bu;function Id(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g){const y=function(t,e,n,i,r,s,o,a){const l=[];if(0===e.positionedLines.length)return l;const h=i.layout.get("text-rotate").evaluate(s,{})*Math.PI/180,c=function(t){const e=t[0],n=t[1],i=e*n;return i>0?[e,-n]:i<0?[-e,n]:0===e?[n,e]:[n,-e]}(n);let u=Math.abs(e.top-e.bottom);for(const m of e.positionedLines)u-=m.lineOffset;const p=e.positionedLines.length,d=u/p;let f=e.top-n[1];for(let m=0;m<p;++m){const t=e.positionedLines[m];f=hd(e,d,f,m);for(const i of t.positionedGlyphs){if(!i.rect)continue;const t=i.rect||{};let s=Ep+1,u=!0,p=1,d=0;if(i.imageName){const t=o[i.imageName];if(!t)continue;if(t.sdf){V("SDF images are not supported in formatted text and will be ignored.");continue}u=!1,p=t.pixelRatio,s=bp/p}const m=(r||a)&&i.vertical,g=i.metrics.advance*i.scale/2,y=i.metrics,_=i.rect;if(null===_)continue;a&&e.verticalizable&&(d=i.imageName?g-i.metrics.width*i.scale/2:0);const T=r?[i.x+g,i.y]:[0,0];let E=[0,0],x=[0,0],b=!1;r||(m?(x=[i.x+g+c[0],i.y+c[1]-d],b=!0):E=[i.x+g+n[0],i.y+n[1]-d]);const I=_.w*i.scale/(p*(i.localGlyph?td:1)),w=_.h*i.scale/(p*(i.localGlyph?td:1));let S,R,C,A;if(m){const t=i.y-f,e=new v(-g,g-t),n=-Math.PI/2,r=new v(...x);S=new v(-g+E[0],E[1]),S._rotateAround(n,e)._add(r),S.x+=-t+g,S.y-=(y.left-s)*i.scale;const o=i.imageName?y.advance*i.scale:Uu*i.scale,a=String.fromCharCode(i.glyph);Zu(a)?S.x+=(1-s)*i.scale:Yu(a)?S.x+=o-y.height*i.scale+(-s-1)*i.scale:S.x+=i.imageName||y.width+2*s===_.w&&y.height+2*s===_.h?(o-w)/2:(o-(y.height+2*s)*i.scale)/2,R=new v(S.x,S.y-I),C=new v(S.x+w,S.y),A=new v(S.x+w,S.y-I)}else{const t=(y.left-s)*i.scale-g+E[0],e=(-y.top-s)*i.scale+E[1],n=t+I,r=e+w;S=new v(t,e),R=new v(n,e),C=new v(t,r),A=new v(n,r)}if(h){let t;t=r?new v(0,0):b?new v(c[0],c[1]):new v(n[0],n[1]),S._rotateAround(h,t),R._rotateAround(h,t),C._rotateAround(h,t),A._rotateAround(h,t)}const D=new v(0,0),O=new v(0,0);l.push({tl:S,tr:R,bl:C,br:A,tex:t,writingMode:e.writingMode,glyphOffset:T,sectionIndex:i.sectionIndex,isSDF:u,pixelOffsetTL:D,pixelOffsetBR:O,minFontScaleX:0,minFontScaleY:0})}}return l}(0,i,l,s,o,a,r,t.allowVerticalPlacement),_=t.textSizeData;let T=null;"source"===_.kind?(T=[Bu*s.layout.get("text-size").evaluate(a,{},g)],T[0]>bd&&V("".concat(t.layerIds[0],': Value for "text-size" is >= ').concat(xd,'. Reduce your "text-size".'))):"composite"===_.kind&&(T=[Bu*f.compositeTextSizes[0].evaluate(a,{},g),Bu*f.compositeTextSizes[1].evaluate(a,{},g)],(T[0]>bd||T[1]>bd)&&V("".concat(t.layerIds[0],': Value for "text-size" is >= ').concat(xd,'. Reduce your "text-size".'))),t.addSymbols(t.text,y,T,l,o,a,c,e,n,h.lineStartIndex,h.lineLength,d,m,g);for(const v of u)p[v]=t.text.placedSymbolArray.length-1;return 4*y.length}function wd(t){for(const e in t)return t[e];return null}function Sd(t,e,n,i,r,s,o,a,l,h){let c=o.top,u=o.bottom,p=o.left,d=o.right;const f=o.collisionPadding;if(f&&(p-=f[0],c-=f[1],d+=f[2],u+=f[3]),l){const t=new v(p,c),e=new v(d,c),n=new v(p,u),i=new v(d,u),r=E(l);let s=new v(0,0);h&&(s=new v(h[0],h[1])),t._rotateAround(r,s),e._rotateAround(r,s),n._rotateAround(r,s),i._rotateAround(r,s),p=Math.min(t.x,e.x,n.x,i.x),d=Math.max(t.x,e.x,n.x,i.x),c=Math.min(t.y,e.y,n.y,i.y),u=Math.max(t.y,e.y,n.y,i.y)}return t.emplaceBack(e.x,e.y,e.z,n.x,n.y,p,c,d,u,a,i,r,s),t.length-1}function Rd(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function Cd(t,e,n,i){const r=t.compareText;if(e in r){const t=r[e];for(let e=t.length-1;e>=0;e--)if(i.dist(t[e])<n)return!0}else r[e]=[];return r[e].push(i),!1}function Ad(t,e){const n=t.fovAboveCenter,i=t.elevation?t.elevation.getMinElevationBelowMSL()*e:0,r=(t._camera.position[2]*t.worldSize-i)/Math.cos(t._pitch),s=Math.sin(n)*r/Math.sin(Math.max(Math.PI/2-t._pitch-n,.01)),o=Math.sin(t._pitch)*s+r;return Math.min(1.01*o,r*(1/t._horizonShift))}function Dd(t,e){if(!e.isReprojectedInTileSpace)return{scale:1<<t.z,x:t.x,y:t.y,x2:t.x+1,y2:t.y+1,projection:e};const n=Math.pow(2,-t.z),i=t.x*n,r=(t.x+1)*n,s=t.y*n,o=(t.y+1)*n,a=Yl(i),l=Yl(r),h=ql(s),c=ql(o),u=e.project(a,h),p=e.project(l,h),d=e.project(l,c),f=e.project(a,c);let m=Math.min(u.x,p.x,d.x,f.x),g=Math.min(u.y,p.y,d.y,f.y),y=Math.max(u.x,p.x,d.x,f.x),v=Math.max(u.y,p.y,d.y,f.y);const _=n/16;function T(t,n,i,r,s,o){const a=(i+s)/2,l=(r+o)/2,h=e.project(Yl(a),ql(l)),c=Math.max(0,m-h.x,g-h.y,h.x-y,h.y-v);m=Math.min(m,h.x),y=Math.max(y,h.x),g=Math.min(g,h.y),v=Math.max(v,h.y),c>_&&(T(t,h,i,r,a,l),T(h,n,a,l,s,o))}T(u,p,i,s,r,s),T(p,d,r,s,r,o),T(d,f,r,o,i,o),T(f,u,i,o,i,s),m-=_,g-=_,y+=_,v+=_;const E=1/Math.max(y-m,v-g);return{scale:E,x:m*E,y:g*E,x2:y*E,y2:v*E,projection:e}}const Od=da(new Float32Array(16));class Nd{constructor(t){this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(t,e){return{x:0,y:0,z:0}}unproject(t,e){return new Hl(0,0)}projectTilePoint(t,e,n){return{x:t,y:e,z:0}}locationPoint(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t._coordinatePoint(t.locationCoordinate(e),n)}pixelsPerMeter(t,e){return Zl(1,t)*e}pixelSpaceConversion(t,e,n){return 1}farthestPixelDistance(t){return Ad(t,t.pixelsPerMeter)}pointCoordinate(t,e,n,i){const r=t.horizonLineFromTop(!1),s=new v(e,Math.max(r,n));return t.rayIntersectionCoordinate(t.pointRayIntersection(s,i))}pointCoordinate3D(t,e,n){const i=new v(e,n);if(t.elevation)return t.elevation.pointCoordinate(i);{const e=this.pointCoordinate(t,i.x,i.y,0);return[e.x,e.y,e.z]}}isPointAboveHorizon(t,e){if(t.elevation)return!this.pointCoordinate3D(t,e.x,e.y);const n=t.horizonLineFromTop();return e.y<n}createInversionMatrix(t,e){return Od}createTileMatrix(t,e,n){let i,r,s;const o=n.canonical,a=da(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=Dd(o,this);i=1,r=l.x+n.wrap*l.scale,s=l.y,ya(a,a,[i/l.scale,i/l.scale,t.pixelsPerMeter/e])}else i=e/t.zoomScale(o.z),r=(o.x+Math.pow(2,o.z)*n.wrap)*i,s=o.y*i;return ga(a,a,[r,s,0]),ya(a,a,[i/aa,i/aa,1]),a}upVector(t,e,n){return[0,0,1]}upVectorScale(t,e,n){return{metersToTile:1}}}class Md extends Nd{constructor(t){super(t),this.range=[4,7],this.center=t.center||[-96,37.5];const[e,n]=this.parallels=t.parallels||[29.5,45.5],i=Math.sin(E(e));this.n=(i+Math.sin(E(n)))/2,this.c=1+i*(2*this.n-i),this.r0=Math.sqrt(this.c)/this.n}project(t,e){const{n:n,c:i,r0:r}=this,s=E(t-this.center[0]),o=E(e),a=Math.sqrt(i-2*n*Math.sin(o))/n;return{x:a*Math.sin(s*n),y:a*Math.cos(s*n)-r,z:0}}unproject(t,e){const{n:n,c:i,r0:r}=this,s=r+e;let o=Math.atan2(t,Math.abs(s))*Math.sign(s);s*n<0&&(o-=Math.PI*Math.sign(t)*Math.sign(s));const a=E(this.center[0])*n;o=A(o,-Math.PI-a,Math.PI-a);const l=R(x(o/n)+this.center[0],-180,180),h=Math.asin(R((i-(t*t+s*s)*n*n)/(2*n),-1,1)),c=R(x(h),-Kl,Kl);return new Hl(l,c)}}const Pd=1.340264,Fd=-.081106,Ld=893e-6,kd=.003796,Ud=Math.sqrt(3)/2;class Bd extends Nd{project(t,e){e=e/180*Math.PI,t=t/180*Math.PI;const n=Math.asin(Ud*Math.sin(e)),i=n*n,r=i*i*i;return{x:.5*(t*Math.cos(n)/(Ud*(Pd+3*Fd*i+r*(7*Ld+9*kd*i)))/Math.PI+.5),y:1-.5*(n*(Pd+Fd*i+r*(Ld+kd*i))/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let n=e=(2*(1-e)-1)*Math.PI,i=n*n,r=i*i*i;for(let h,c,u,p=0;p<12&&(c=n*(Pd+Fd*i+r*(Ld+kd*i))-e,u=Pd+3*Fd*i+r*(7*Ld+9*kd*i),h=c/u,n=R(n-h,-Math.PI/3,Math.PI/3),i=n*n,r=i*i*i,!(Math.abs(h)<1e-12));++p);const s=Ud*t*(Pd+3*Fd*i+r*(7*Ld+9*kd*i))/Math.cos(n),o=Math.asin(Math.sin(n)/Ud),a=R(180*s/Math.PI,-180,180),l=R(180*o/Math.PI,-Kl,Kl);return new Hl(a,l)}}class zd extends Nd{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0}project(t,e){return{x:.5+t/360,y:.5-e/360,z:0}}unproject(t,e){const n=360*(t-.5),i=R(360*(.5-e),-Kl,Kl);return new Hl(n,i)}}const Gd=Math.PI/2;function Hd(t){return Math.tan((Gd+t)/2)}class jd extends Nd{constructor(t){super(t),this.center=t.center||[0,30];const[e,n]=this.parallels=t.parallels||[30,30];let i=E(e),r=E(n);this.southernCenter=i+r<0,this.southernCenter&&(i=-i,r=-r);const s=Math.cos(i),o=Hd(i);this.n=i===r?Math.sin(i):Math.log(s/Math.cos(r))/Math.log(Hd(r)/o),this.f=s*Math.pow(Hd(i),this.n)/this.n}project(t,e){e=E(e),this.southernCenter&&(e=-e),t=E(t-this.center[0]);const n=1e-6,{n:i,f:r}=this;r>0?e<-Gd+n&&(e=-Gd+n):e>Gd-n&&(e=Gd-n);const s=r/Math.pow(Hd(e),i);let o=s*Math.sin(i*t),a=r-s*Math.cos(i*t);return o=.5*(o/Math.PI+.5),a=.5*(a/Math.PI+.5),{x:o,y:this.southernCenter?a:1-a,z:0}}unproject(t,e){t=(2*t-.5)*Math.PI,this.southernCenter&&(e=1-e),e=(2*(1-e)-.5)*Math.PI;const{n:n,f:i}=this,r=i-e,s=Math.sign(r),o=Math.sign(n)*Math.sqrt(t*t+r*r);let a=Math.atan2(t,Math.abs(r))*s;r*n<0&&(a-=Math.PI*Math.sign(t)*s);const l=R(x(a/n)+this.center[0],-180,180),h=R(x(2*Math.atan(Math.pow(i/o,1/n))-Gd),-Kl,Kl);return new Hl(l,this.southernCenter?-h:h)}}class Vd extends Nd{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(t,e){return{x:Vl(t),y:Wl(e),z:0}}unproject(t,e){const n=Yl(t),i=ql(e);return new Hl(n,i)}}const Wd=E(Kl);class Zd extends Nd{project(t,e){const n=(e=E(e))*e,i=n*n;return{x:.5*((t=E(t))*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791))/Math.PI+.5),y:1-.5*(e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let n=e=(2*(1-e)-1)*Math.PI,i=25,r=0,s=n*n;do{s=n*n;const t=s*s;r=(n*(1.007226+s*(.015085+t*(.028874*s-.044475-.005916*t)))-e)/(1.007226+s*(.045255+t*(.259866*s-.311325-.005916*11*t))),n=R(n-r,-Wd,Wd)}while(Math.abs(r)>1e-6&&--i>0);s=n*n;const o=R(x(t/(.8707+s*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979))),-180,180),a=x(n);return new Hl(o,a)}}const Yd=E(Kl);class qd extends Nd{project(t,e){e=E(e),t=E(t);const n=Math.cos(e),i=2/Math.PI,r=Math.acos(n*Math.cos(t/2)),s=Math.sin(r)/r,o=.5*(t*i+2*n*Math.sin(t/2)/s)||0,a=.5*(e+Math.sin(e)/s)||0;return{x:.5*(o/Math.PI+.5),y:1-.5*(a/Math.PI+1),z:0}}unproject(t,e){let n=t=(2*t-.5)*Math.PI,i=e=(2*(1-e)-1)*Math.PI,r=25;const s=1e-6;let o=0,a=0;do{const r=Math.cos(i),s=Math.sin(i),l=2*s*r,h=s*s,c=r*r,u=Math.cos(n/2),p=Math.sin(n/2),d=2*u*p,f=p*p,m=1-c*u*u,g=m?1/m:0,y=m?Math.acos(r*u)*Math.sqrt(1/m):0,v=.5*(2*y*r*p+2*n/Math.PI)-t,_=.5*(y*s+i)-e,T=.5*g*(c*f+y*r*u*h)+1/Math.PI,E=g*(d*l/4-y*s*p),x=.125*g*(l*p-y*s*c*d),b=.5*g*(h*u+y*f*r)+.5,I=E*x-b*T;o=(_*E-v*b)/I,a=(v*x-_*T)/I,n=R(n-o,-Math.PI,Math.PI),i=R(i-a,-Yd,Yd)}while((Math.abs(o)>s||Math.abs(a)>s)&&--r>0);return new Hl(x(n),x(i))}}class Xd extends Nd{constructor(t){super(t),this.center=t.center||[0,0],this.parallels=t.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(E(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(t,e){const{scale:n,cosPhi:i}=this;return{x:E(t)*i*n+.5,y:-Math.sin(E(e))/i*n+.5,z:0}}unproject(t,e){const{scale:n,cosPhi:i}=this,r=-(e-.5)/n,s=R(x((t-.5)/n)/i,-180,180),o=Math.asin(R(r*i,-1,1)),a=R(x(o),-Kl,Kl);return new Hl(s,a)}}class Kd extends Vd{constructor(t){super(t),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(t,e,n){const i=Rl(t,e,n);return ka(i,i,Dl(vl(n))),{x:i[0],y:i[1],z:i[2]}}locationPoint(t,e){const n=Sl(e.lat,e.lng),i=Pa([],n),r=t.elevation?t.elevation.getAtPointOrZero(t.locationCoordinate(e),t._centerAltitude):t._centerAltitude;Ma(n,n,i,Zl(1,0)*aa*r);const s=da(new Float64Array(16));return ma(s,t.pixelMatrix,t.globeMatrix),ka(n,n,s),new v(n[0],n[1])}pixelsPerMeter(t,e){return Zl(1,0)*e}pixelSpaceConversion(t,e,n){const i=Zl(1,t)*e,r=Nn(Zl(1,45)*e,i,n);return this.pixelsPerMeter(t,e)/r}createTileMatrix(t,e,n){const i=Ol(vl(n.canonical));return ma(new Float64Array(16),t.globeMatrix,i)}createInversionMatrix(t,e){const{center:n}=t,i=Dl(vl(e));return _a(i,i,E(n.lng)),va(i,i,E(n.lat)),ya(i,i,[t._pixelsPerMercatorPixel,t._pixelsPerMercatorPixel,1]),Float32Array.from(i)}pointCoordinate(t,e,n,i){return ml(t,e,n,!0)||new Jl(0,0)}pointCoordinate3D(t,e,n){const i=this.pointCoordinate(t,e,n,0);return[i.x,i.y,i.z]}isPointAboveHorizon(t,e){return!ml(t,e.x,e.y,!1)}farthestPixelDistance(t){const e=function(t,e){const n=t.cameraToCenterDistance,i=t._centerAltitude*e,r=t._camera,s=t._camera.forward(),o=Ra([],Na([],s,-n),[0,0,i]),a=t.worldSize/(2*Math.PI),l=[0,0,-a],h=t.width/t.height,c=Math.tan(t.fovAboveCenter),u=Na([],r.up(),c),p=Na([],r.right(),c*h),d=Pa([],Ra([],Ra([],s,u),p)),f=[];let m;if(new el(o,d).closestPointOnSphere(l,a,f)){const e=Ra([],f,l),n=za([],e,o);m=Math.cos(t.fovAboveCenter)*wa(n)}else{const t=za([],o,l),e=za([],l,o);Pa(e,e);const n=wa(t)-a;m=Math.sqrt(n*(n+2*a));const i=Math.acos(m/(a+n))-Math.acos(Fa(s,e));m*=Math.cos(i)}return 1.01*m}(t,this.pixelsPerMeter(t.center.lat,t.worldSize)),n=Ml(t.zoom);if(n>0){const i=Ad(t,Zl(1,t.center.lat)*t.worldSize),r=t.worldSize/(2*Math.PI),s=Math.max(t.width,t.height)/t.worldSize*Math.PI;return Nn(e,i+r*(1-Math.cos(s)),Math.pow(n,10))}return e}upVector(t,e,n){return Rl(e,n,t,1)}upVectorScale(t){return{metersToTile:fl(Cl(vl(t)))}}}function Qd(t){const e=t.parallels,n=!!e&&Math.abs(e[0]+e[1])<.01;switch(t.name){case"mercator":return new Vd(t);case"equirectangular":return new zd(t);case"naturalEarth":return new Zd(t);case"equalEarth":return new Bd(t);case"winkelTripel":return new qd(t);case"albers":return n?new Xd(t):new Md(t);case"lambertConformalConic":return n?new Xd(t):new jd(t);case"globe":return new Kd(t)}throw new Error("Invalid projection name: ".concat(t.name))}const Jd=Yc.types,$d=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function tf(t,e,n,i,r,s,o,a,l,h,c,u,p){const d=a?Math.min(bd,Math.round(a[0])):0,f=a?Math.min(bd,Math.round(a[1])):0;t.emplaceBack(e,n,Math.round(32*i),Math.round(32*r),s,o,(d<<1)+(l?1:0),f,16*h,16*c,256*u,256*p)}function ef(t,e,n,i,r,s,o){t.emplaceBack(e,n,i,r,s,o)}function nf(t,e,n,i,r){t.emplaceBack(e,n,i,r),t.emplaceBack(e,n,i,r),t.emplaceBack(e,n,i,r),t.emplaceBack(e,n,i,r)}function rf(t){for(const e of t.sections)if(ls(e.text))return!0;return!1}class sf{constructor(t){this.layoutVertexArray=new qs,this.indexArray=new no,this.programConfigurations=t,this.segments=new oa,this.dynamicLayoutVertexArray=new Vs,this.opacityVertexArray=new Ks,this.placedSymbolArray=new mo,this.globeExtVertexArray=new Xs}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ou.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Mu.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,$d,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,Nu.members,!0)),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Xr(sf,"SymbolBuffers");class of{constructor(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new oa,this.collisionVertexArray=new to,this.collisionVertexArrayExt=new eo}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Pu.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,Fu.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Xr(of,"CollisionBuffers");class af{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=da([]),this.placementViewportMatrix=da([]);const e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=zu(this.zoom,e["text-size"]),this.iconSizeData=zu(this.zoom,e["icon-size"]);const n=this.layers[0].layout,i=n.get("symbol-sort-key"),r=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==r&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===r||"auto"===r&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map((t=>Sp[t])),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=t.sourceID,this.projection=t.projection}createArrays(){this.text=new sf(new Ko(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new sf(new Ko(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new vo,this.lineVertexArray=new _o,this.symbolInstances=new yo}calculateGlyphDependencies(t,e,n,i,r){for(let s=0;s<t.length;s++)if(e[t.charCodeAt(s)]=!0,i&&r){const n=Wu[t.charAt(s)];n&&(e[n.charCodeAt(0)]=!0)}}populate(t,e,n,i){const r=this.layers[0],s=r.layout,o="globe"===this.projection.name,a=s.get("text-font"),l=s.get("text-field"),h=s.get("icon-image"),c=("constant"!==l.value.kind||l.value.value instanceof Pe&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),u="constant"!==h.value.kind||!!h.value.value||Object.keys(h.parameters).length>0,p=s.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const d=e.iconDependencies,f=e.glyphDependencies,m=e.availableImages,g=new Es(this.zoom);for(const{feature:y,id:v,index:_,sourceLayerIndex:T}of t){const t=r._featureFilter.needGeometry,e=ah(y,t);if(!r._featureFilter.filter(g,e,n))continue;if(t||(e.geometry=oh(y,n,i)),o&&1!==y.type&&n.z<=5){const t=e.geometry,i=.98078528056,r=(t,e)=>Fa(Rl(t.x,t.y,n,1),Rl(e.x,e.y,n,1))<i;for(let e=0;e<t.length;e++)t[e]=nh(t[e],r)}let l,h;if(c){const t=r.getValueAndResolveTokens("text-field",e,n,m),i=Pe.factory(t);rf(i)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===vs()||this.hasRTLText&&Ts.isParsed())&&(l=Vu(i,r,e))}if(u){const t=r.getValueAndResolveTokens("icon-image",e,n,m);h=t instanceof Fe?t:Fe.fromString(t)}if(!l&&!h)continue;const E=this.sortFeaturesByKey?p.evaluate(e,{},n):void 0;if(this.features.push({id:v,text:l,icon:h,index:_,sourceLayerIndex:T,geometry:e.geometry,properties:y.properties,type:Jd[y.type],sortKey:E}),h&&(d[h.name]=!0),l){const t=a.evaluate(e,{},n).join(","),i="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Sp.vertical)>=0;for(const e of l.sections)if(e.image)d[e.image.name]=!0;else{const n=es(l.toString()),r=e.fontStack||t,s=f[r]=f[r]||{};this.calculateGlyphDependencies(e.text,s,i,this.allowVerticalPlacement,n)}}}"line"===s.get("symbol-placement")&&(this.features=function(t){const e={},n={},i=[];let r=0;function s(e){i.push(t[e]),r++}function o(t,e,r){const s=n[t];return delete n[t],n[e]=s,i[s].geometry[0].pop(),i[s].geometry[0]=i[s].geometry[0].concat(r[0]),s}function a(t,n,r){const s=e[n];return delete e[n],e[t]=s,i[s].geometry[0].shift(),i[s].geometry[0]=r[0].concat(i[s].geometry[0]),s}function l(t,e,n){const i=n?e[0][e[0].length-1]:e[0][0];return"".concat(t,":").concat(i.x,":").concat(i.y)}for(let h=0;h<t.length;h++){const c=t[h],u=c.geometry,p=c.text?c.text.toString():null;if(!p){s(h);continue}const d=l(p,u),f=l(p,u,!0);if(d in n&&f in e&&n[d]!==e[f]){const t=a(d,f,u),r=o(d,f,i[t].geometry);delete e[d],delete n[f],n[l(p,i[r].geometry,!0)]=r,i[t].geometry=null}else d in n?o(d,f,u):f in e?a(d,f,u):(s(h),e[d]=r-1,n[f]=r-1)}return i.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,n,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n,i))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Qd(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const n=this.lineVertexArray.length;if(void 0!==t.segment)for(const{x:i,y:r}of e)this.lineVertexArray.emplaceBack(i,r);return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,e,n,i,r,s,o,a,l,h,c,u,p,d){const f=t.indexArray,m=t.layoutVertexArray,g=t.globeExtVertexArray,y=t.segments.prepareSegment(4*e.length,m,f,this.canOverlap?s.sortKey:void 0),v=this.glyphOffsetArray.length,_=y.vertexLength,T=this.allowVerticalPlacement&&o===Sp.vertical?Math.PI/2:0,E=s.text&&s.text.sections;for(let b=0;b<e.length;b++){const{tl:i,tr:r,bl:o,br:h,tex:c,pixelOffsetTL:u,pixelOffsetBR:v,minFontScaleX:_,minFontScaleY:x,glyphOffset:I,isSDF:w,sectionIndex:S}=e[b],R=y.vertexLength,C=I[1];if(tf(m,l.x,l.y,i.x,C+i.y,c.x,c.y,n,w,u.x,u.y,_,x),tf(m,l.x,l.y,r.x,C+r.y,c.x+c.w,c.y,n,w,v.x,u.y,_,x),tf(m,l.x,l.y,o.x,C+o.y,c.x,c.y+c.h,n,w,u.x,v.y,_,x),tf(m,l.x,l.y,h.x,C+h.y,c.x+c.w,c.y+c.h,n,w,v.x,v.y,_,x),a){const{x:e,y:n,z:i}=a.anchor,[r,s,o]=a.up;ef(g,e,n,i,r,s,o),ef(g,e,n,i,r,s,o),ef(g,e,n,i,r,s,o),ef(g,e,n,i,r,s,o),nf(t.dynamicLayoutVertexArray,e,n,i,T)}else nf(t.dynamicLayoutVertexArray,l.x,l.y,l.z,T);f.emplaceBack(R,R+1,R+2),f.emplaceBack(R+1,R+2,R+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(I[0]),b!==e.length-1&&S===e[b+1].sectionIndex||t.programConfigurations.populatePaintArrays(m.length,s,s.index,{},p,d,E&&E[S])}const x=a?a.anchor:l;t.placedSymbolArray.emplaceBack(x.x,x.y,x.z,l.x,l.y,v,this.glyphOffsetArray.length-v,_,h,c,l.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],o,0,!1,0,u,0)}_commitLayoutVertex(t,e,n,i,r,s,o){t.emplaceBack(e,n,i,r,s,Math.round(o.x),Math.round(o.y))}_addCollisionDebugVertices(t,e,n,i,r,s,o){const a=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=a.vertexLength,h=o.tileAnchorX,c=o.tileAnchorY;for(let p=0;p<4;p++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),n.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(n.layoutVertexArray,i,r,s,h,c,new v(t.x1,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,r,s,h,c,new v(t.x2,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,r,s,h,c,new v(t.x2,t.y2)),this._commitLayoutVertex(n.layoutVertexArray,i,r,s,h,c,new v(t.x1,t.y2)),a.vertexLength+=4;const u=n.indexArray;u.emplaceBack(l,l+1),u.emplaceBack(l+1,l+2),u.emplaceBack(l+2,l+3),u.emplaceBack(l+3,l),a.primitiveLength+=4}_addTextDebugCollisionBoxes(t,e,n,i,r,s){for(let o=i;o<r;o++){const i=n.get(o),r=this.getSymbolInstanceTextSize(t,s,e,o);this._addCollisionDebugVertices(i,r,this.textCollisionBox,i.projectedAnchorX,i.projectedAnchorY,i.projectedAnchorZ,s)}}_addIconDebugCollisionBoxes(t,e,n,i,r,s){for(let o=i;o<r;o++){const i=n.get(o),r=this.getSymbolInstanceIconSize(t,e,s.placedIconSymbolIndex);this._addCollisionDebugVertices(i,r,this.iconCollisionBox,i.projectedAnchorX,i.projectedAnchorY,i.projectedAnchorZ,s)}}generateCollisionDebugBuffers(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new of(Js,Lu.members,lo),this.iconCollisionBox=new of(Js,Lu.members,lo);const n=Hu(this.iconSizeData,t),i=Hu(this.textSizeData,t);for(let r=0;r<this.symbolInstances.length;r++){const s=this.symbolInstances.get(r);this._addTextDebugCollisionBoxes(i,t,e,s.textBoxStartIndex,s.textBoxEndIndex,s),this._addTextDebugCollisionBoxes(i,t,e,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s),this._addIconDebugCollisionBoxes(n,t,e,s.iconBoxStartIndex,s.iconBoxEndIndex,s),this._addIconDebugCollisionBoxes(n,t,e,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s)}}getSymbolInstanceTextSize(t,e,n,i){const r=this.text.placedSymbolArray.get(e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:i),s=Gu(this.textSizeData,t,r)/Uu;return this.tilePixelRatio*s}getSymbolInstanceIconSize(t,e,n){const i=this.icon.placedSymbolArray.get(n),r=Gu(this.iconSizeData,t,i);return this.tilePixelRatio*r}_commitDebugCollisionVertexUpdate(t,e,n){t.emplaceBack(e,-n,-n),t.emplaceBack(e,n,-n),t.emplaceBack(e,n,n),t.emplaceBack(e,-n,n)}_updateTextDebugCollisionBoxes(t,e,n,i,r,s){for(let o=i;o<r;o++){const i=n.get(o),r=this.getSymbolInstanceTextSize(t,s,e,o);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,r,i.padding)}}_updateIconDebugCollisionBoxes(t,e,n,i,r,s){for(let o=i;o<r;o++){const i=n.get(o),r=this.getSymbolInstanceIconSize(t,e,s);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,r,i.padding)}}updateCollisionDebugBuffers(t,e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=Hu(this.iconSizeData,t),i=Hu(this.textSizeData,t);for(let r=0;r<this.symbolInstances.length;r++){const s=this.symbolInstances.get(r);this._updateTextDebugCollisionBoxes(i,t,e,s.textBoxStartIndex,s.textBoxEndIndex,s),this._updateTextDebugCollisionBoxes(i,t,e,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s),this._updateIconDebugCollisionBoxes(n,t,e,s.iconBoxStartIndex,s.iconBoxEndIndex,s.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(n,t,e,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,e,n,i,r,s,o,a,l){const h={};if(e<n){const{x1:n,y1:i,x2:r,y2:s,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:u,tileAnchorY:p,featureIndex:d}=t.get(e);h.textBox={x1:n,y1:i,x2:r,y2:s,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:u,tileAnchorY:p},h.textFeatureIndex=d}if(i<r){const{x1:e,y1:n,x2:r,y2:s,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:u,tileAnchorY:p,featureIndex:d}=t.get(i);h.verticalTextBox={x1:e,y1:n,x2:r,y2:s,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:u,tileAnchorY:p},h.verticalTextFeatureIndex=d}if(s<o){const{x1:e,y1:n,x2:i,y2:r,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:u,tileAnchorY:p,featureIndex:d}=t.get(s);h.iconBox={x1:e,y1:n,x2:i,y2:r,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:u,tileAnchorY:p},h.iconFeatureIndex=d}if(a<l){const{x1:e,y1:n,x2:i,y2:r,padding:s,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:u,tileAnchorY:p,featureIndex:d}=t.get(a);h.verticalIconBox={x1:e,y1:n,x2:i,y2:r,padding:s,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:c,tileAnchorX:u,tileAnchorY:p},h.verticalIconFeatureIndex=d}return h}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const n=t.placedSymbolArray.get(e),i=n.vertexStartIndex+4*n.numGlyphs;for(let r=n.vertexStartIndex;r<i;r+=4)t.indexArray.emplaceBack(r,r+1,r+2),t.indexArray.emplaceBack(r+1,r+2,r+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),n=Math.cos(t),i=[],r=[],s=[];for(let o=0;o<this.symbolInstances.length;++o){s.push(o);const t=this.symbolInstances.get(o);i.push(0|Math.round(e*t.tileAnchorX+n*t.tileAnchorY)),r.push(t.featureIndex)}return s.sort(((t,e)=>i[t]-i[e]||r[e]-r[t])),s}addToSortKeyRanges(t,e){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex);const{rightJustifiedTextSymbolIndex:n,centerJustifiedTextSymbolIndex:i,leftJustifiedTextSymbolIndex:r,verticalPlacedTextSymbolIndex:s,placedIconSymbolIndex:o,verticalPlacedIconSymbolIndex:a}=e;n>=0&&this.addIndicesForPlacedSymbol(this.text,n),i>=0&&i!==n&&this.addIndicesForPlacedSymbol(this.text,i),r>=0&&r!==i&&r!==n&&this.addIndicesForPlacedSymbol(this.text,r),s>=0&&this.addIndicesForPlacedSymbol(this.text,s),o>=0&&this.addIndicesForPlacedSymbol(this.icon,o),a>=0&&this.addIndicesForPlacedSymbol(this.icon,a)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Xr(af,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),af.MAX_GLYPHS=65535,af.addDynamicAttributes=nf;const lf=new Ms({"symbol-placement":new Ds(te.layout_symbol["symbol-placement"]),"symbol-spacing":new Ds(te.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ds(te.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Os(te.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ds(te.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ds(te.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ds(te.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ds(te.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ds(te.layout_symbol["icon-rotation-alignment"]),"icon-size":new Os(te.layout_symbol["icon-size"]),"icon-text-fit":new Ds(te.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ds(te.layout_symbol["icon-text-fit-padding"]),"icon-image":new Os(te.layout_symbol["icon-image"]),"icon-rotate":new Os(te.layout_symbol["icon-rotate"]),"icon-padding":new Ds(te.layout_symbol["icon-padding"]),"icon-keep-upright":new Ds(te.layout_symbol["icon-keep-upright"]),"icon-offset":new Os(te.layout_symbol["icon-offset"]),"icon-anchor":new Os(te.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ds(te.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ds(te.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ds(te.layout_symbol["text-rotation-alignment"]),"text-field":new Os(te.layout_symbol["text-field"]),"text-font":new Os(te.layout_symbol["text-font"]),"text-size":new Os(te.layout_symbol["text-size"]),"text-max-width":new Os(te.layout_symbol["text-max-width"]),"text-line-height":new Os(te.layout_symbol["text-line-height"]),"text-letter-spacing":new Os(te.layout_symbol["text-letter-spacing"]),"text-justify":new Os(te.layout_symbol["text-justify"]),"text-radial-offset":new Os(te.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ds(te.layout_symbol["text-variable-anchor"]),"text-anchor":new Os(te.layout_symbol["text-anchor"]),"text-max-angle":new Ds(te.layout_symbol["text-max-angle"]),"text-writing-mode":new Ds(te.layout_symbol["text-writing-mode"]),"text-rotate":new Os(te.layout_symbol["text-rotate"]),"text-padding":new Ds(te.layout_symbol["text-padding"]),"text-keep-upright":new Ds(te.layout_symbol["text-keep-upright"]),"text-transform":new Os(te.layout_symbol["text-transform"]),"text-offset":new Os(te.layout_symbol["text-offset"]),"text-allow-overlap":new Ds(te.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ds(te.layout_symbol["text-ignore-placement"]),"text-optional":new Ds(te.layout_symbol["text-optional"])});var hf={paint:new Ms({"icon-opacity":new Os(te.paint_symbol["icon-opacity"]),"icon-color":new Os(te.paint_symbol["icon-color"]),"icon-halo-color":new Os(te.paint_symbol["icon-halo-color"]),"icon-halo-width":new Os(te.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Os(te.paint_symbol["icon-halo-blur"]),"icon-translate":new Ds(te.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ds(te.paint_symbol["icon-translate-anchor"]),"text-opacity":new Os(te.paint_symbol["text-opacity"]),"text-color":new Os(te.paint_symbol["text-color"],{runtimeType:pe,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new Os(te.paint_symbol["text-halo-color"]),"text-halo-width":new Os(te.paint_symbol["text-halo-width"]),"text-halo-blur":new Os(te.paint_symbol["text-halo-blur"]),"text-translate":new Ds(te.paint_symbol["text-translate"]),"text-translate-anchor":new Ds(te.paint_symbol["text-translate-anchor"])}),layout:lf};class cf{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:le,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Xr(cf,"FormatSectionOverride",{omit:["defaultValue"]});class uf extends ia{constructor(t){super(t,hf)}recalculate(t,e){super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const t=[];for(const e of n)t.indexOf(e)<0&&t.push(e);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,e,n,i){const r=this.layout.get(t).evaluate(e,{},n,i),s=this._unevaluatedLayout._values[t];return s.isDataDriven()||Xi(s.value)||!r?r:function(t,e){return e.replace(/{([^{}]+)}/g,((e,n)=>n in t?String(t[n]):""))}(e.properties,r)}createBucket(t){return new af(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of hf.paint.overridableProperties){if(!uf.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),n=new cf(e),i=new qi(n,e.property.specification);let r=null;r="constant"===e.value.kind||"source"===e.value.kind?new Qi("source",i):new Ji("composite",i,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new Cs(e.property,r,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven())&&uf.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const n=t.get("text-field"),i=hf.paint.properties[e];let r=!1;const s=t=>{for(const e of t)if(i.overrides&&i.overrides.hasOverride(e))return void(r=!0)};if("constant"===n.value.kind&&n.value.value instanceof Pe)s(n.value.value.sections);else if("source"===n.value.kind){const t=e=>{r||(e instanceof Ge&&Ue(e.value)===ge?s(e.value.sections):e instanceof Ze?s(e.sections):e.eachChild(t))},e=n.value;e._styleExpression&&t(e._styleExpression.expression)}return r}getProgramConfiguration(t){return new Xo(this,t)}}var pf={paint:new Ms({"background-color":new Ds(te.paint_background["background-color"]),"background-pattern":new Ds(te.paint_background["background-pattern"]),"background-opacity":new Ds(te.paint_background["background-opacity"])})},df={paint:new Ms({"raster-opacity":new Ds(te.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ds(te.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ds(te.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ds(te.paint_raster["raster-brightness-max"]),"raster-saturation":new Ds(te.paint_raster["raster-saturation"]),"raster-contrast":new Ds(te.paint_raster["raster-contrast"]),"raster-resampling":new Ds(te.paint_raster["raster-resampling"]),"raster-fade-duration":new Ds(te.paint_raster["raster-fade-duration"])})};class ff extends ia{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var mf={paint:new Ms({"sky-type":new Ds(te.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ds(te.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ds(te.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ds(te.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ds(te.paint_sky["sky-gradient-radius"]),"sky-gradient":new Ns(te.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ds(te.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ds(te.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ds(te.paint_sky["sky-opacity"])})};function gf(t,e,n){const i=[0,0,1],r=Ya([]);return Xa(r,r,n?-E(t)+Math.PI:E(t)),qa(r,r,-E(e)),Ua(i,i,r),Pa(i,i)}const yf={circle:class extends ia{constructor(t){super(t,Ch)}createBucket(t){return new ch(t)}queryRadius(t){const e=t;return bh("circle-radius",this,e)+bh("circle-stroke-width",this,e)+Ih(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,i,r,s,o,a){const l=Sh(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),h=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n);return Ah(t,i,s,o,a,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,h)}getProgramIds(){return["circle"]}getProgramConfiguration(t){return new Xo(this,t)}},heatmap:class extends ia{createBucket(t){return new Ph(t)}constructor(t){super(t,zh),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Gh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(t){return bh("heatmap-radius",this,t)}queryIntersectsFeature(t,e,n,i,r,s,o,a){const l=this.paint.get("heatmap-radius").evaluate(e,n);return Ah(t,i,s,o,a,!0,!0,new v(0,0),l)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new Xo(this,t)}},hillshade:class extends ia{constructor(t){super(t,Hh)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends ia{constructor(t){super(t,Ac)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),n=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(t){return new Xo(this,t)}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Rc(t)}queryRadius(){return Ih(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,i,r,s){return!t.queryGeometry.isAboveHorizon&&dh(wh(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),i)}isTileClipped(){return!0}},"fill-extrusion":class extends ia{constructor(t){super(t,cu)}createBucket(t){return new tu(t)}queryRadius(){return Ih(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new Xo(this,t)}queryIntersectsFeature(t,e,n,i,r,s,o,a,l){const h=Sh(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),c=this.paint.get("fill-extrusion-height").evaluate(e,n),u=this.paint.get("fill-extrusion-base").evaluate(e,n),p=[0,0],d=a&&s.elevation,f=s.elevation?s.elevation.exaggeration():1,m=t.tile.getBucket(this);if(d&&m instanceof tu){const t=m.centroidVertexArray,e=l+1;e<t.length&&(p[0]=t.geta_centroid_pos0(e),p[1]=t.geta_centroid_pos1(e))}if(0===p[0]&&1===p[1])return!1;"globe"===s.projection.name&&(i=lu([i],[new v(0,0),new v(aa,aa)],t.tileID.canonical).map((t=>t.polygon)).flat());const g=d?a:null,[y,_]=function(t,e,n,i,r,s,o,a,l,h,c){return"globe"===t.projection.name?function(t,e,n,i,r,s,o,a,l,h,c){const u=[],p=[],d=t.projection.upVectorScale(c,t.center.lat,t.worldSize).metersToTile,f=[0,0,0,1],m=[0,0,0,1],g=(t,e,n,i)=>{t[0]=e,t[1]=n,t[2]=i,t[3]=1},y=au();n>0&&(n+=y),i+=y;for(const v of e){const e=[],y=[];for(const u of v){const p=u.x+r.x,v=u.y+r.y,_=t.projection.projectTilePoint(p,v,c),T=t.projection.upVector(c,u.x,u.y);let E=n,x=i;if(o){const t=_u(p,v,n,i,o,a,l,h);E+=t.base,x+=t.top}0!==n?g(f,_.x+T[0]*d*E,_.y+T[1]*d*E,_.z+T[2]*d*E):g(f,_.x,_.y,_.z),g(m,_.x+T[0]*d*x,_.y+T[1]*d*x,_.z+T[2]*d*x),ka(f,f,s),ka(m,m,s),e.push(new gu(f[0],f[1],f[2])),y.push(new gu(m[0],m[1],m[2]))}u.push(e),p.push(y)}return[u,p]}(t,e,n,i,r,s,o,a,l,h,c):o?function(t,e,n,i,r,s,o,a,l){const h=[],c=[],u=[0,0,0,1];for(const p of t){const t=[],d=[];for(const h of p){const c=h.x+i.x,p=h.y+i.y,f=_u(c,p,e,n,s,o,a,l);u[0]=c,u[1]=p,u[2]=f.base,u[3]=1,Wa(u,u,r),u[3]=Math.max(u[3],1e-5);const m=new gu(u[0]/u[3],u[1]/u[3],u[2]/u[3]);u[0]=c,u[1]=p,u[2]=f.top,u[3]=1,Wa(u,u,r),u[3]=Math.max(u[3],1e-5);const g=new gu(u[0]/u[3],u[1]/u[3],u[2]/u[3]);t.push(m),d.push(g)}h.push(t),c.push(d)}return[h,c]}(e,n,i,r,s,o,a,l,h):function(t,e,n,i,r){const s=[],o=[],a=r[8]*e,l=r[9]*e,h=r[10]*e,c=r[11]*e,u=r[8]*n,p=r[9]*n,d=r[10]*n,f=r[11]*n;for(const m of t){const t=[],e=[];for(const n of m){const s=n.x+i.x,o=n.y+i.y,m=r[0]*s+r[4]*o+r[12],g=r[1]*s+r[5]*o+r[13],y=r[2]*s+r[6]*o+r[14],v=r[3]*s+r[7]*o+r[15],_=m+a,T=g+l,E=y+h,x=Math.max(v+c,1e-5),b=m+u,I=g+p,w=y+d,S=Math.max(v+f,1e-5);t.push(new gu(_/x,T/x,E/x)),e.push(new gu(b/S,I/S,w/S))}s.push(t),o.push(e)}return[s,o]}(e,n,i,r,s)}(s,i,u,c,h,o,g,p,f,s.center.lat,t.tileID.canonical),T=t.queryGeometry;return function(t,e,n){let i=1/0;dh(n,e)&&(i=vu(n,e[0]));for(let r=0;r<e.length;r++){const s=e[r],o=t[r];for(let t=0;t<s.length-1;t++){const e=s[t],r=[e,s[t+1],o[t+1],o[t],e];uh(n,r)&&(i=Math.min(i,vu(n,r)))}}return i!==1/0&&i}(y,_,T.isPointQuery()?T.screenBounds:T.screenGeometry)}},line:class extends ia{constructor(t){super(t,Cu),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof On,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=Au.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Su(t)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(t){return new Xo(this,t)}queryRadius(t){const e=t,n=Du(bh("line-width",this,e),bh("line-gap-width",this,e)),i=bh("line-offset",this,e);return n/2+Math.abs(i)+Ih(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,i,r,s){if(t.queryGeometry.isAboveHorizon)return!1;const o=wh(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),a=t.pixelToTileUnitsFactor/2*Du(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),l=this.paint.get("line-offset").evaluate(e,n);return l&&(i=function(t,e){const n=[],i=new v(0,0);for(let r=0;r<t.length;r++){const s=t[r],o=[];for(let t=0;t<s.length;t++){const n=s[t],r=s[t+1],a=0===t?i:n.sub(s[t-1])._unit()._perp(),l=t===s.length-1?i:r.sub(n)._unit()._perp(),h=a._add(l)._unit();h._mult(1/(h.x*l.x+h.y*l.y)),o.push(h._mult(e)._add(n))}n.push(o)}return n}(i,l*t.pixelToTileUnitsFactor)),function(t,e,n){for(let i=0;i<e.length;i++){const r=e[i];if(t.length>=3)for(let e=0;e<r.length;e++)if(Th(t,r[e]))return!0;if(fh(t,r,n))return!0}return!1}(o,i,a)}isTileClipped(){return!0}},symbol:uf,background:class extends ia{constructor(t){super(t,pf)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends ia{constructor(t){super(t,df)}getProgramIds(){return["raster"]}},sky:class extends ia{constructor(t){super(t,mf),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Gh({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(t,e){if("atmosphere"===this.paint.get("sky-type")){const n=this.paint.get("sky-atmosphere-sun"),i=!n,r=t.style.light,s=r.properties.get("position");return i&&"viewport"===r.properties.get("anchor")&&V("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),i?gf(s.azimuthal,90-s.polar,e):gf(n[0],90-n[1],e)}const n=this.paint.get("sky-gradient-center");return gf(n[0],90-n[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}}};class vf{constructor(t,e,n,i){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,i)}update(t,n,i){const{width:r,height:s}=t,{context:o}=this,{gl:a}=o,{HTMLImageElement:l,HTMLCanvasElement:h,HTMLVideoElement:c,ImageData:u,ImageBitmap:p}=e;if(a.bindTexture(a.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!n||!1!==n.premultiply)),i||this.size&&this.size[0]===r&&this.size[1]===s){const{x:e,y:n}=i||{x:0,y:0};t instanceof l||t instanceof h||t instanceof c||t instanceof u||p&&t instanceof p?a.texSubImage2D(a.TEXTURE_2D,0,e,n,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,e,n,r,s,a.RGBA,a.UNSIGNED_BYTE,t.data)}else this.size=[r,s],t instanceof l||t instanceof h||t instanceof c||t instanceof u||p&&t instanceof p?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,r,s,0,this.format,a.UNSIGNED_BYTE,t.data);this.useMipmap=Boolean(n&&n.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&a.generateMipmap(a.TEXTURE_2D)}bind(t,e){const{context:n}=this,{gl:i}=n;i.bindTexture(i.TEXTURE_2D,this.texture),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,this.useMipmap?t===i.NEAREST?i.NEAREST_MIPMAP_NEAREST:i.LINEAR_MIPMAP_NEAREST:t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class _f{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Tf{constructor(){this.tasks={},this.taskQueue=[],U(["process"],this),this.invoker=new _f(this.process),this.nextId=0}add(t,e){const n=this.nextId++,i=function(t){let{type:e,isSymbolTile:n,zoom:i}=t;return i=i||0,"message"===e?0:"maybePrepare"!==e||n?"parseTile"!==e||n?"parseTile"===e&&n?300-i:"maybePrepare"===e&&n?400-i:500:200-i:100-i}(e);if(0===i){Y();try{t()}finally{}return{cancel:()=>{}}}return this.tasks[n]={fn:t,metadata:e,priority:i,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){Y();try{if(this.taskQueue=this.taskQueue.filter((t=>!!this.tasks[t])),!this.taskQueue.length)return;const t=this.pick();if(null===t)return;const e=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!e)return;e.fn()}finally{}}pick(){let t=null,e=1/0;for(let i=0;i<this.taskQueue.length;i++){const n=this.tasks[this.taskQueue[i]];n.priority<e&&(e=n.priority,t=i)}if(null===t)return null;const n=this.taskQueue[t];return this.taskQueue.splice(t,1),n}remove(){this.invoker.remove()}}class Ef{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}const xf=["tile","layer","source","sourceLayer","state"];class bf{constructor(t,e,n,i,r){this.type="Feature",this._vectorTileFeature=t,this._z=e,this._x=n,this._y=i,this.properties=t.properties,this.id=r}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(t.id=this.id);for(const e of xf)void 0!==this[e]&&(t[e]=this[e]);return t}}const If=32,wf=33,Sf=new Uint16Array(8184);for(let bm=0;bm<2046;bm++){let t=bm+2,e=0,n=0,i=0,r=0,s=0,o=0;for(1&t?i=r=s=If:e=n=o=If;(t>>=1)>1;){const a=e+i>>1,l=n+r>>1;1&t?(i=e,r=n,e=s,n=o):(e=i,n=r,i=s,r=o),s=a,o=l}const a=4*bm;Sf[a+0]=e,Sf[a+1]=n,Sf[a+2]=i,Sf[a+3]=r}const Rf=new Uint16Array(2178),Cf=new Uint8Array(1089),Af=new Uint16Array(1089);function Df(t){return 0===t?-.03125:32===t?.03125:0}var Of=Us([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Nf={type:2,extent:aa,loadGeometry:()=>[[new v(0,0),new v(aa+1,0),new v(aa+1,aa+1),new v(0,aa+1),new v(0,0)]]};class Mf{constructor(t,e,n,i,r){this.tileID=t,this.uid=P(),this.uses=0,this.tileSize=e,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=r,this.expiredRequestCount=0,this.state="loading",i&&i.transform&&(this.projection=i.transform.projection)}registerFadeDuration(t){const e=t+this.timeAdded;e<qt.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Dd(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(t,e,n){if(this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const n={};if(!e)return n;for(const i of t){const t=i.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){i.layers=t,i.stateDependentLayerIds&&(i.stateDependentLayers=i.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)n[e.id]=i}}return n}(t.buckets,e.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const e=this.buckets[t];if(e instanceof af){if(this.hasSymbolBuckets=!0,!n)break;e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const e=this.buckets[t];if(e instanceof af&&e.hasRTLText){this.hasRTLText=!0,Ts.isLoading()||Ts.isLoaded()||"deferred"!==vs()||_s();break}}this.queryPadding=0;for(const t in this.buckets){const n=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(t).queryRadius(n))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new po}unloadVectorData(){if(this.hasData()){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(t){return this.buckets[t.id]}upload(t){for(const n in this.buckets){const e=this.buckets[n];e.uploadPending()&&e.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new vf(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new vf(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new vf(t,this.lineAtlas.image,e.ALPHA),this.lineAtlas.uploaded=!0)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,n,i,r,s,o,a){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:i,pixelPosMatrix:o,transform:s,params:r,tileTransform:this.tileTransform},t,e,n):{}}querySourceFeatures(t,e){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const i=n.loadVTLayers(),r=e?e.sourceLayer:"",s=i._geojsonTileLayer||i[r];if(!s)return;const o=ur(e&&e.filter),{z:a,x:l,y:h}=this.tileID.canonical,c={z:a,x:l,y:h};for(let u=0;u<s.length;u++){const e=s.feature(u);if(o.needGeometry){const t=ah(e,!0);if(!o.filter(new Es(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!o.filter(new Es(this.tileID.overscaledZ),e))continue;const i=n.getId(e,r),p=new bf(e,a,l,h,i);p.tile=c,t.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const e=this.expirationTime;if(t.cacheControl){const e=q(t.cacheControl);e["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let n=!1;if(this.expirationTime>t)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{const i=this.expirationTime-e;i?this.expirationTime=t+Math.max(i,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length||!e)return;const n=this.latestFeatureIndex.loadVTLayers(),i=e.style.listImages();for(const r in this.buckets){if(!e.style.hasLayer(r))continue;const s=this.buckets[r],o=s.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],l=t[o];if(!a||!l||0===Object.keys(l).length)continue;if(s.update(l,a,i,this.imageAtlas&&this.imageAtlas.patternPositions||{}),s instanceof Su||s instanceof Rc){const t=e.style._getSourceCache(s.layers[0].source);e._terrain&&e._terrain.enabled&&t&&s.programConfigurations.needsUpload&&e._terrain._clearRenderCacheForTile(t.id,this.tileID)}const h=e&&e.style&&e.style.getLayer(r);h&&(this.queryPadding=Math.max(this.queryPadding,h.queryRadius(s)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<qt.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=qt.now()+t}setTexture(t,e){const n=e.context,i=n.gl;this.texture=this.texture||e.getTileTexture(t.width),this.texture?this.texture.update(t,{useMipmap:!0}):(this.texture=new vf(n,t,i.RGBA,{useMipmap:!0}),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE))}setDependencies(t,e){const n={};for(const i of e)n[i]=!0;this.dependencies[t]=n}hasDependency(t,e){for(const n of t){const t=this.dependencies[n];if(t)for(const n of e)if(t[n])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(t,e){if(!e||"mercator"===e.name||this._tileDebugBuffer)return;const n=oh(Nf,this.tileID.canonical,this.tileTransform)[0],i=new zs,r=new ho;for(let s=0;s<n.length;s++){const{x:t,y:e}=n[s];i.emplaceBack(t,e),r.emplaceBack(s)}r.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(r),this._tileDebugBuffer=t.createVertexBuffer(i,tl.members),this._tileDebugSegments=oa.simpleSegment(0,0,i.length,r.length)}_makeTileBoundsBuffers(t,e){if(this._tileBoundsBuffer||!e||"mercator"===e.name)return;const n=oh(Nf,this.tileID.canonical,this.tileTransform)[0];let i,r;if(this.isRaster){const t=function(t,e){const n=Dd(t,e),i=Math.pow(2,t.z);for(let h=0;h<wf;h++)for(let r=0;r<wf;r++){const s=Yl((t.x+(r+Df(r))/If)/i),o=ql((t.y+(h+Df(h))/If)/i),a=e.project(s,o),l=h*wf+r;Rf[2*l+0]=Math.round((a.x*n.scale-n.x)*aa),Rf[2*l+1]=Math.round((a.y*n.scale-n.y)*aa)}Cf.fill(0),Af.fill(0);for(let h=2045;h>=0;h--){const t=4*h,e=Sf[t+0],n=Sf[t+1],i=Sf[t+2],r=Sf[t+3],s=e+i>>1,o=n+r>>1,a=s+o-n,l=o+e-s,c=n*wf+e,u=r*wf+i,p=o*wf+s,d=Math.hypot((Rf[2*c+0]+Rf[2*u+0])/2-Rf[2*p+0],(Rf[2*c+1]+Rf[2*u+1])/2-Rf[2*p+1])>=16;Cf[p]=Cf[p]||(d?1:0),h<1022&&(Cf[p]=Cf[p]||Cf[(n+l>>1)*wf+(e+a>>1)]||Cf[(r+l>>1)*wf+(i+a>>1)])}const r=new Hs,s=new no;let o=0;function a(t,e){const n=e*wf+t;return 0===Af[n]&&(r.emplaceBack(Rf[2*n+0],Rf[2*n+1],t*aa/If,e*aa/If),Af[n]=++o),Af[n]-1}function l(t,e,n,i,r,o){const h=t+n>>1,c=e+i>>1;if(Math.abs(t-r)+Math.abs(e-o)>1&&Cf[c*wf+h])l(r,o,t,e,h,c),l(n,i,r,o,h,c);else{const l=a(t,e),h=a(n,i),c=a(r,o);s.emplaceBack(l,h,c)}}return l(0,0,If,If,If,0),l(If,If,0,0,0,If),{vertices:r,indices:s}}(this.tileID.canonical,e);i=t.vertices,r=t.indices}else{i=new Hs,r=new no;for(const{x:e,y:r}of n)i.emplaceBack(e,r,0,0);const t=vc(i.int16,void 0,4);for(let e=0;e<t.length;e+=3)r.emplaceBack(t[e],t[e+1],t[e+2])}this._tileBoundsBuffer=t.createVertexBuffer(i,Of.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(r),this._tileBoundsSegments=oa.simpleSegment(0,0,i.length,r.length)}_makeGlobeTileDebugBuffers(t,e){const n=e.projection;if(!n||"globe"!==n.name||e.freezeTileCoverage)return;const i=this.tileID.canonical,r=Dl(Tl(i,e)),s=Ml(e.zoom);let o;s>0&&(o=fa(new Float64Array(16),e.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(t,i,e,r,o,s),this._makeGlobeTileDebugTextBuffer(t,i,e,r,o,s)}_globePoint(t,e,n,i,r,s,o){let a=Rl(t,e,n);if(s){const r=1<<n.z,l=Vl(i.center.lng),h=Wl(i.center.lat),c=(n.x+.5)/r-l;let u=0;c>.5?u=-1:c<-.5&&(u=1);let p=(t/aa+n.x)/r+u,d=(e/aa+n.y)/r;p=(p-l)*i._pixelsPerMercatorPixel+l,d=(d-h)*i._pixelsPerMercatorPixel+h;const f=[p*i.worldSize,d*i.worldSize,0];ka(f,f,s),a=_l(a,f,o)}return ka(a,a,r)}_makeGlobeTileDebugBorderBuffer(t,e,n,i,r,s){const o=new zs,a=new ho,l=new Gs,h=(t,h,c,u,p)=>{const d=(c-t)/(p-1),f=(u-h)/(p-1),m=o.length;for(let g=0;g<p;g++){const c=t+g*d,u=h+g*f;o.emplaceBack(c,u);const p=this._globePoint(c,u,e,n,i,r,s);l.emplaceBack(p[0],p[1],p[2]),a.emplaceBack(m+g)}},c=aa;h(0,0,c,0,16),h(c,0,c,c,16),h(c,c,0,c,16),h(0,c,0,0,16),this._tileDebugIndexBuffer=t.createIndexBuffer(a),this._tileDebugBuffer=t.createVertexBuffer(o,tl.members),this._globeTileDebugBorderBuffer=t.createVertexBuffer(l,$a.members),this._tileDebugSegments=oa.simpleSegment(0,0,o.length,a.length)}_makeGlobeTileDebugTextBuffer(t,e,n,i,r,s){const o=aa/4,a=new zs,l=new no,h=new Gs,c=25;l.reserve(32),a.reserve(c),h.reserve(c);const u=(t,e)=>c*t+e;for(let p=0;p<c;p++){const t=p*o;for(let l=0;l<c;l++){const c=l*o;a.emplaceBack(c,t);const u=this._globePoint(c,t,e,n,i,r,s);h.emplaceBack(u[0],u[1],u[2])}}for(let p=0;p<4;p++)for(let t=0;t<4;t++){const e=u(p,t),n=u(p,t+1),i=u(p+1,t),r=u(p+1,t+1);l.emplaceBack(e,n,i),l.emplaceBack(i,n,r)}this._tileDebugTextIndexBuffer=t.createIndexBuffer(l),this._tileDebugTextBuffer=t.createVertexBuffer(a,tl.members),this._globeTileDebugTextBuffer=t.createVertexBuffer(h,$a.members),this._tileDebugTextSegments=oa.simpleSegment(0,0,c,32)}}class Pf{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,e,n){const i=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][i]=this.stateChanges[t][i]||{},N(this.stateChanges[t][i],n),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==i&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][i]){this.deletedStates[t][i]={};for(const e in this.state[t][i])n[e]||(this.deletedStates[t][i][e]=null)}else for(const r in n)this.deletedStates[t]&&this.deletedStates[t][i]&&null===this.deletedStates[t][i][r]&&delete this.deletedStates[t][i][r]}removeFeatureState(t,e,n){if(null===this.deletedStates[t])return;const i=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][i]&&(this.deletedStates[t][i]=this.deletedStates[t][i]||{},this.deletedStates[t][i][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][i])for(n in this.deletedStates[t][i]={},this.stateChanges[t][i])this.deletedStates[t][i][n]=null;else this.deletedStates[t][i]=null;else this.deletedStates[t]=null}getState(t,e){const n=String(e),i=N({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const n=this.deletedStates[t][e];if(null===n)return{};for(const t in n)delete i[t]}return i}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(t,e){const n={};for(const i in this.stateChanges){this.state[i]=this.state[i]||{};const t={};for(const e in this.stateChanges[i])this.state[i][e]||(this.state[i][e]={}),N(this.state[i][e],this.stateChanges[i][e]),t[e]=this.state[i][e];n[i]=t}for(const i in this.deletedStates){this.state[i]=this.state[i]||{};const t={};if(null===this.deletedStates[i])for(const e in this.state[i])t[e]={},this.state[i][e]={};else for(const e in this.deletedStates[i]){if(null===this.deletedStates[i][e])this.state[i][e]={};else if(this.state[i][e])for(const t of Object.keys(this.deletedStates[i][e]))delete this.state[i][e][t];t[e]=this.state[i][e]}n[i]=n[i]||{},N(n[i],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const i in t)t[i].setFeatureState(n,e)}}class Ff{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,e){const n=this.toIdx(t,e);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(t,e){return this.leaves[this.toIdx(t,e)]}toIdx(t,e){return e*this.size+t}}function Lf(t,e,n,i){let r=0,s=Number.MAX_VALUE;for(let o=0;o<3;o++)if(Math.abs(i[o])<1e-15){if(n[o]<t[o]||n[o]>e[o])return null}else{const a=1/i[o];let l=(t[o]-n[o])*a,h=(e[o]-n[o])*a;if(l>h){const t=l;l=h,h=t}if(l>r&&(r=l),h<s&&(s=h),r>s)return null}return r}function kf(t,e,n,i,r,s,o,a,l,h,c){const u=i-t,p=r-e,d=s-n,f=o-t,m=a-e,g=l-n,y=c[1]*g-c[2]*m,v=c[2]*f-c[0]*g,_=c[0]*m-c[1]*f,T=u*y+p*v+d*_;if(Math.abs(T)<1e-15)return null;const E=1/T,x=h[0]-t,b=h[1]-e,I=h[2]-n,w=(x*y+b*v+I*_)*E;if(w<0||w>1)return null;const S=b*d-I*p,R=I*u-x*d,C=x*p-b*u,A=(c[0]*S+c[1]*R+c[2]*C)*E;return A<0||w+A>1?null:(f*S+m*R+g*C)*E}function Uf(t,e,n){return(t-e)/(n-e)}function Bf(t,e,n,i,r,s,o,a,l){const h=1<<n,c=s-i,u=o-r,p=(t+1)/h*c+i,d=(e+0)/h*u+r,f=(e+1)/h*u+r;a[0]=(t+0)/h*c+i,a[1]=d,l[0]=p,l[1]=f}class zf{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const e=function(t){const e=Math.ceil(Math.log2(t.dim/8)),n=[];let i=Math.ceil(Math.pow(2,e));const r=1/i,s=(t,e,n,i,r)=>{const s=i?1:0,o=(t+1)*n-s,a=e*n,l=(e+1)*n-s;r[0]=t*n,r[1]=a,r[2]=o,r[3]=l};let o=new Ff(i);const a=[];for(let l=0;l<i*i;l++){s(l%i,Math.floor(l/i),r,!1,a);const e=Hf(a[0],a[1],t),n=Hf(a[2],a[1],t),h=Hf(a[2],a[3],t),c=Hf(a[0],a[3],t);o.minimums.push(Math.min(e,n,h,c)),o.maximums.push(Math.max(e,n,h,c)),o.leaves.push(1)}for(n.push(o),i/=2;i>=1;i/=2){const t=n[n.length-1];o=new Ff(i);for(let e=0;e<i*i;e++){s(e%i,Math.floor(e/i),2,!0,a);const n=t.getElevation(a[0],a[1]),r=t.getElevation(a[2],a[1]),l=t.getElevation(a[2],a[3]),h=t.getElevation(a[0],a[3]),c=t.isLeaf(a[0],a[1]),u=t.isLeaf(a[2],a[1]),p=t.isLeaf(a[2],a[3]),d=t.isLeaf(a[0],a[3]),f=Math.min(n.min,r.min,l.min,h.min),m=Math.max(n.max,r.max,l.max,h.max),g=c&&u&&p&&d;o.maximums.push(m),o.minimums.push(f),o.leaves.push(m-f<=5&&g?1:0)}n.push(o)}return n}(this.dem),n=e.length-1,i=e[n];this._addNode(i.minimums[0],i.maximums[0],i.leaves[0]),this._construct(e,0,0,n,0)}raycastRoot(t,e,n,i,r,s){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Lf([t,e,-100],[n,i,this.maximums[0]*o],r,s)}raycast(t,e,n,i,r,s){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;const a=this.raycastRoot(t,e,n,i,r,s,o);if(null==a)return null;const l=[],h=[],c=[],u=[],p=[{idx:0,t:a,nodex:0,nodey:0,depth:0}];for(;p.length>0;){const{idx:a,t:d,nodex:f,nodey:m,depth:g}=p.pop();if(this.leaves[a]){Bf(f,m,g,t,e,n,i,c,u);const a=1<<g,l=(f+0)/a,h=(f+1)/a,p=(m+0)/a,y=(m+1)/a,v=Hf(l,p,this.dem)*o,_=Hf(h,p,this.dem)*o,T=Hf(h,y,this.dem)*o,E=Hf(l,y,this.dem)*o,x=kf(c[0],c[1],v,u[0],c[1],_,u[0],u[1],T,r,s),b=kf(u[0],u[1],T,c[0],u[1],E,c[0],c[1],v,r,s),I=Math.min(null!==x?x:Number.MAX_VALUE,null!==b?b:Number.MAX_VALUE);if(I!==Number.MAX_VALUE)return I;{const t=Ma([],r,s,d);if(Gf(v,_,E,T,Uf(t[0],c[0],u[0]),Uf(t[1],c[1],u[1]))>=t[2])return d}continue}let y=0;for(let p=0;p<this._siblingOffset.length;p++){Bf((f<<1)+this._siblingOffset[p][0],(m<<1)+this._siblingOffset[p][1],g+1,t,e,n,i,c,u),c[2]=-100,u[2]=this.maximums[this.childOffsets[a]+p]*o;const d=Lf(c,u,r,s);if(null!=d){const t=d;l[p]=t;let e=!1;for(let n=0;n<y&&!e;n++)t>=l[h[n]]&&(h.splice(n,0,p),e=!0);e||(h[y]=p),y++}}for(let t=0;t<y;t++){const e=h[t];p.push({idx:this.childOffsets[a]+e,t:l[e],nodex:(f<<1)+this._siblingOffset[e][0],nodey:(m<<1)+this._siblingOffset[e][1],depth:g+1})}}return null}_addNode(t,e,n){return this.minimums.push(t),this.maximums.push(e),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(t,e,n,i,r){if(1===t[i].isLeaf(e,n))return;this.childOffsets[r]||(this.childOffsets[r]=this.nodeCount);const s=i-1,o=t[s];let a=0,l=0;for(let h=0;h<this._siblingOffset.length;h++){const t=2*e+this._siblingOffset[h][0],i=2*n+this._siblingOffset[h][1],r=o.getElevation(t,i),s=o.isLeaf(t,i),c=this._addNode(r.min,r.max,s);s&&(a|=1<<h),l||(l=c)}for(let h=0;h<this._siblingOffset.length;h++)a&1<<h||this._construct(t,2*e+this._siblingOffset[h][0],2*n+this._siblingOffset[h][1],s,l+h)}}function Gf(t,e,n,i,r,s){return Nn(Nn(t,n,s),Nn(e,i,s),r)}function Hf(t,e,n){const i=n.dim,r=R(t*i-.5,0,i-1),s=R(e*i-.5,0,i-1),o=Math.floor(r),a=Math.floor(s),l=Math.min(o+1,i-1),h=Math.min(a+1,i-1);return Gf(n.get(o,a),n.get(l,a),n.get(o,h),n.get(l,h),r-o,s-a)}const jf={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Vf(t,e,n){return(256*t*256+256*e+n)/10-1e4}function Wf(t,e,n){return 256*t+e+n/256-32768}class Zf{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return V('"'.concat(n,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=e.height;const s=this.dim=e.height-2,o=new Uint32Array(e.data.buffer);if(this.pixels=new Uint8Array(e.data.buffer),this.encoding=n||"mapbox",this.borderReady=i,!i){for(let t=0;t<s;t++)o[this._idx(-1,t)]=o[this._idx(0,t)],o[this._idx(s,t)]=o[this._idx(s-1,t)],o[this._idx(t,-1)]=o[this._idx(t,0)],o[this._idx(t,s)]=o[this._idx(t,s-1)];o[this._idx(-1,-1)]=o[this._idx(0,0)],o[this._idx(s,-1)]=o[this._idx(s-1,0)],o[this._idx(-1,s)]=o[this._idx(0,s-1)],o[this._idx(s,s)]=o[this._idx(s-1,s-1)],r&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new zf(this)}get(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(t=R(t,-1,this.dim),e=R(e,-1,this.dim));const n=4*this._idx(t,e);return("terrarium"===this.encoding?Wf:Vf)(this.pixels[n],this.pixels[n+1],this.pixels[n+2])}static getUnpackVector(t){return jf[t]}get unpackVector(){return jf[this.encoding]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}static pack(t,e){const n=[0,0,0,0],i=Zf.getUnpackVector(e);let r=Math.floor((t+i[3])/i[2]);return n[2]=r%256,r=Math.floor(r/256),n[1]=r%256,r=Math.floor(r/256),n[0]=r,n}getPixels(){return new Bh({width:this.stride,height:this.stride},this.pixels)}backfillBorder(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let i=e*this.dim,r=e*this.dim+this.dim,s=n*this.dim,o=n*this.dim+this.dim;switch(e){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:s=o-1;break;case 1:o=s+1}const a=-e*this.dim,l=-n*this.dim;for(let h=s;h<o;h++)for(let e=i;e<r;e++){const n=4*this._idx(e,h),i=4*this._idx(e+a,h+l);this.pixels[n+0]=t.pixels[i+0],this.pixels[n+1]=t.pixels[i+1],this.pixels[n+2]=t.pixels[i+2],this.pixels[n+3]=t.pixels[i+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Xr(Zf,"DEMData"),Xr(zf,"DemMinMaxQuadTree",{omit:["dem"]});class Yf{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,n){const i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);const r={value:e,timeout:void 0};if(void 0!==n&&(r.timeout=setTimeout((()=>{this.remove(t,r)}),n)),this.data[i].push(r),this.order.push(i),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const n=t.wrapped().key,i=void 0===e?0:this.data[n].indexOf(e),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const n in this.data)for(const i of this.data[n])t(i.value)||e.push(i);for(const n of e)this.remove(n.value.tileID,n)}}class qf{constructor(t,e,n){this.func=t,this.mask=e,this.range=n}}qf.ReadOnly=!1,qf.ReadWrite=!0,qf.disabled=new qf(519,qf.ReadOnly,[0,1]);const Xf=7680;class Kf{constructor(t,e,n,i,r,s){this.test=t,this.ref=e,this.mask=n,this.fail=i,this.depthFail=r,this.pass=s}}Kf.disabled=new Kf({func:519,mask:0},0,0,Xf,Xf,Xf);class Qf{constructor(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n}}Qf.Replace=[1,0],Qf.disabled=new Qf(Qf.Replace,Oe.transparent,[!1,!1,!1,!1]),Qf.unblended=new Qf(Qf.Replace,Oe.transparent,[!0,!0,!0,!0]),Qf.alphaBlended=new Qf([1,771],Oe.transparent,[!0,!0,!0,!0]);const Jf=1029,$f=2305;class tm{constructor(t,e,n){this.enable=t,this.mode=e,this.frontFace=n}}tm.disabled=new tm(!1,Jf,$f),tm.backCCW=new tm(!0,Jf,$f),tm.backCW=new tm(!0,Jf,2304),tm.frontCW=new tm(!0,1028,2304),tm.frontCCW=new tm(!0,1028,$f);class em extends $t{constructor(t,e,n){super(),this.id=t,this._onlySymbols=n,e.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),e.on("error",(()=>{this._sourceErrored=!0})),this._source=e,this._tiles={},this._cache=new Yf(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=e.minTileCacheSize,this._maxTileCacheSize=e.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Pf,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(t){this.map=t,this._minTileCacheSize=void 0===this._minTileCacheSize&&t?t._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&t?t._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,e){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,(()=>{}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}}getIds(){return O(this._tiles).map((t=>t.tileID)).sort(nm).map((t=>t.key))}getRenderableIds(t){const e=[];for(const n in this._tiles)this._isIdRenderable(+n,t)&&e.push(this._tiles[n]);return t?e.sort(((t,e)=>{const n=t.tileID,i=e.tileID,r=new v(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),s=new v(i.canonical.x,i.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-i.overscaledZ||s.y-r.y||s.x-r.x})).map((t=>t.tileID.key)):e.map((t=>t.tileID)).sort(nm).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}}_reloadTile(t,e){const n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))}_tileLoaded(t,e,n,i){if(i)if(t.state="errored",404!==i.status)this._source.fire(new Jt(i,{tile:t}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const t=this.map.painter.terrain;this.update(this.transform,t.getScaledDemTileSize(),!0),t.resetTileLookupCache(this.id)}else this.update(this.transform);else t.timeAdded=qt.now(),"expired"===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this._source.type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new Qt("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const e=this.getRenderableIds();for(let i=0;i<e.length;i++){const r=e[i];if(t.neighboringTiles&&t.neighboringTiles[r]){const e=this.getTileByID(r);n(t,e),n(e,t)}}function n(t,e){if(!t.dem||t.dem.borderReady)return;t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0;let n=e.tileID.canonical.x-t.tileID.canonical.x;const i=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),s=e.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,i),t.neighboringTiles&&t.neighboringTiles[s]&&(t.neighboringTiles[s].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,n,i){for(const r in this._tiles){let s=this._tiles[r];if(i[r]||!s.hasData()||s.tileID.overscaledZ<=e||s.tileID.overscaledZ>n)continue;let o=s.tileID;for(;s&&s.tileID.overscaledZ>e+1;){const t=s.tileID.scaledTo(s.tileID.overscaledZ-1);s=this._tiles[t.key],s&&s.hasData()&&(o=t)}let a=o;for(;a.overscaledZ>e;)if(a=a.scaledTo(a.overscaledZ-1),t[a.key]){i[o.key]=o;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(let n=t.overscaledZ-1;n>=e;n--){const e=t.scaledTo(n),i=this._getLoadedTile(e);if(i)return i}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,e){e=e||this._source.tileSize;const n=Math.ceil(t.width/e)+1,i=Math.ceil(t.height/e)+1,r=Math.floor(n*i*5),s="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,r):r,o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,s):s;this._cache.setMaxSize(o)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const n in this._tiles){const i=this._tiles[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),t[i.tileID.key]=i}this._tiles=t;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(t,e,n){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!n)return;let i;this.updateCacheSize(t,e),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?i=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new fu(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(i=t.coveringTiles({tileSize:e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(i=i.filter((t=>this._source.hasTile(t))))):i=[];const r=this._updateRetainedTiles(i);if(im(this._source.type)&&0!==i.length){const t={},e={},n=Object.keys(r);for(const i of n){const n=r[i],s=this._tiles[i];if(!s||s.fadeEndTime&&s.fadeEndTime<=qt.now())continue;const o=this.findLoadedParent(n,Math.max(n.overscaledZ-em.maxOverzooming,this._source.minzoom));o&&(this._addTile(o.tileID),t[o.tileID.key]=o.tileID),e[i]=n}const s=i[i.length-1].overscaledZ;for(const i in this._tiles){const t=this._tiles[i];if(r[i]||!t.hasData())continue;let n=t.tileID;for(;n.overscaledZ>s;){n=n.scaledTo(n.overscaledZ-1);const s=this._tiles[n.key];if(s&&s.hasData()&&e[n.key]){r[i]=t.tileID;break}}}for(const i in t)r[i]||(this._coveredTiles[i]=!0,r[i]=t[i])}for(const o in r)this._tiles[o].clearFadeHold();const s=function(t,e){const n=[];for(const i in t)i in e||n.push(i);return n}(this._tiles,r);for(const o of s){const t=this._tiles[o];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+o)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const e={};if(0===t.length)return e;const n={},i=t.reduce(((t,e)=>Math.min(t,e.overscaledZ)),1/0),r=t[0].overscaledZ,s=Math.max(r-em.maxOverzooming,this._source.minzoom),o=Math.max(r+em.maxUnderzooming,this._source.minzoom),a={};for(const l of t){const t=this._addTile(l);e[l.key]=l,t.hasData()||i<this._source.maxzoom&&(a[l.key]=l)}this._retainLoadedChildren(a,i,o,e);for(const l of t){let t=this._tiles[l.key];if(t.hasData())continue;if(l.canonical.z>=this._source.maxzoom){const t=l.children(this._source.maxzoom)[0],n=this.getTile(t);if(n&&n.hasData()){e[t.key]=t;continue}}else{const t=l.children(this._source.maxzoom);if(e[t[0].key]&&e[t[1].key]&&e[t[2].key]&&e[t[3].key])continue}let i=t.wasRequested();for(let r=l.overscaledZ-1;r>=s;--r){const s=l.scaledTo(r);if(n[s.key])break;if(n[s.key]=!0,t=this.getTile(s),!t&&i&&(t=this._addTile(s)),t&&(e[s.key]=s,i=t.wasRequested(),t.hasData()))break}}return e}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let n,i=this._tiles[t].tileID;for(;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}e.push(i.key);const t=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(t),n)break;i=t}for(const t of e)this._loadedParentTiles[t]=n}}_addTile(t){let e=this._tiles[t.key];if(e)return e;e=this._cache.getAndRemove(t),e&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));const n=Boolean(e);if(!n){const n=this.map?this.map.painter:null;e=new Mf(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,n,this._isRaster),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))}return e?(e.uses++,this._tiles[t.key]=e,n||this._source.fire(new Qt("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),n))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(t,e,n){const i=[],r=this.transform;if(!r)return i;const s="globe"===r.projection.name,o=Vl(r.center.lng);for(const a in this._tiles){const l=this._tiles[a];if(n&&l.clearQueryDebugViz(),l.holdingForFade())continue;let h;if(s){const t=l.tileID.canonical;if(0===t.z){const e=[Math.abs(R(o,...rm(t,-1))-o),Math.abs(R(o,...rm(t,1))-o)];h=[0,2*e.indexOf(Math.min(...e))-1]}else{const e=[Math.abs(R(o,...rm(t,-1))-o),Math.abs(R(o,...rm(t,0))-o),Math.abs(R(o,...rm(t,1))-o)];h=[e.indexOf(Math.min(...e))-1]}}else h=[0];for(const n of h){const s=t.containsTile(l,r,e,n);s&&i.push(s)}}return i}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const n of e)n.projMatrix=this.transform.calculateProjMatrix(n.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(im(this._source.type))for(const t in this._tiles){const e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=qt.now())return!0}return!1}setFeatureState(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)}removeFeatureState(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,n){const i=this._tiles[t];i&&i.setDependencies(e,n)}reloadTilesForDependencies(t,e){for(const n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(+n,"reloading");this._cache.filter((n=>!n.hasDependency(t,e)))}_preloadTiles(t,e){if(!this._sourceLoaded){const n=()=>{this._sourceLoaded&&(this._source.off("data",n),this._preloadTiles(t,e))};return void this._source.on("data",n)}const n=new Map,i=Array.isArray(t)?t:[t],r=this.map.painter.terrain,s=this.usedForTerrain&&r?r.getScaledDemTileSize():this._source.tileSize;for(const o of i){const t=o.coveringTiles({tileSize:s,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const e of t)n.set(e.key,e);this.usedForTerrain&&o.updateElevation(!1)}D(Array.from(n.values()),((t,e)=>{const n=new Mf(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(n,(t=>{"raster-dem"===this._source.type&&n.dem&&this._backfillDEM(n),e(t,n)}))}),e)}}function nm(t,e){const n=Math.abs(2*t.wrap)-+(t.wrap<0),i=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||i-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function im(t){return"raster"===t||"image"===t||"video"===t||"custom"===t}function rm(t,e){const n=1<<t.z;return[t.x/n+e,(t.x+1)/n+e]}em.maxOverzooming=10,em.maxUnderzooming=3;class sm{constructor(t,e,n){this._demTile=t,this._dem=this._demTile.dem,this._scale=e,this._offset=n}static create(t,e,n){const i=n||t.findDEMTileFor(e);if(!i||!i.dem)return;const r=i.dem,s=i.tileID,o=1<<e.canonical.z-s.canonical.z;return new sm(i,i.tileSize/aa/o,[(e.canonical.x/o-s.canonical.x)*r.dim,(e.canonical.y/o-s.canonical.y)*r.dim])}tileCoordToPixel(t,e){const n=e*this._scale+this._offset[1],i=Math.floor(t*this._scale+this._offset[0]),r=Math.floor(n);return new v(i,r)}getElevationAt(t,e,n,i){const r=t*this._scale+this._offset[0],s=e*this._scale+this._offset[1],o=Math.floor(r),a=Math.floor(s),l=this._dem;return i=!!i,n?Nn(Nn(l.get(o,a,i),l.get(o,a+1,i),s-a),Nn(l.get(o+1,a,i),l.get(o+1,a+1,i),s-a),r-o):l.get(o,a,i)}getElevationAtPixel(t,e,n){return this._dem.get(t,e,!!n)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*Zl(1,t)*this._dem.stride}}class om{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Yr(aa,16,0),this.featureIndexArray=new Eo,this.promoteId=e}insert(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r,s);const a=this.grid;for(let l=0;l<e.length;l++){const t=e[l],n=[1/0,1/0,-1/0,-1/0];for(let e=0;e<t.length;e++){const i=t[e];n[0]=Math.min(n[0],i.x),n[1]=Math.min(n[1],i.y),n[2]=Math.max(n[2],i.x),n[3]=Math.max(n[3],i.y)}n[0]<aa&&n[1]<aa&&n[2]>=0&&n[3]>=0&&a.insert(o,n[0],n[1],n[2],n[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Zc(new gp(this.rawTileData)).layers,this.sourceLayerCoder=new Ef(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[]}return this.vtLayers}query(t,e,n,i){var r=this;this.loadVTLayers();const s=t.params||{},o=ur(s.filter),a=t.tileResult,l=t.transform,h=a.bufferedTilespaceBounds,c=this.grid.query(h.min.x,h.min.y,h.max.x,h.max.y,((t,e,n,i)=>Eh(a.bufferedTilespaceGeometry,t,e,n,i)));c.sort(lm);let u=null;l.elevation&&c.length>0&&(u=sm.create(l.elevation,this.tileID));const p={};let d;for(let f=0;f<c.length;f++){const l=c[f];if(l===d)continue;d=l;const h=this.featureIndexArray.get(l);let m=null;this.loadMatchingFeature(p,h,o,s.layers,s.availableImages,e,n,i,(function(e,n,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return m||(m=oh(e,r.tileID.canonical,t.tileTransform)),n.queryIntersectsFeature(a,e,i,m,r.z,t.transform,t.pixelPosMatrix,u,s)}))}return p}loadMatchingFeature(t,e,n,i,r,s,o,a,l){const{featureIndex:h,bucketIndex:c,sourceLayerIndex:u,layoutVertexArrayOffset:p}=e,d=this.bucketLayerIDs[c];if(i&&!function(t,e){for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(i,d))return;const f=this.sourceLayerCoder.decode(u),m=this.vtLayers[f].feature(h);if(n.needGeometry){const t=ah(m,!0);if(!n.filter(new Es(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!n.filter(new Es(this.tileID.overscaledZ),m))return;const g=this.getId(m,f);for(let y=0;y<d.length;y++){const e=d[y];if(i&&i.indexOf(e)<0)continue;const n=s[e];if(!n)continue;let c={};void 0!==g&&a&&(c=a.getState(n.sourceLayer||"_geojsonTileLayer",g));const u=N({},o[e]);u.paint=am(u.paint,n.paint,m,c,r),u.layout=am(u.layout,n.layout,m,c,r);const f=!l||l(m,n,c,p);if(!f)continue;const v=new bf(m,this.z,this.x,this.y,g);v.layer=u;let _=t[e];void 0===_&&(_=t[e]=[]),_.push({featureIndex:h,feature:v,intersectionZ:f})}}lookupSymbolFeatures(t,e,n,i,r,s,o,a){const l={};this.loadVTLayers();const h=ur(r);for(const c of t)this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:i,featureIndex:c,layoutVertexArrayOffset:0},h,s,o,a,e);return l}loadFeature(t){const{featureIndex:e,sourceLayerIndex:n}=t;this.loadVTLayers();const i=this.sourceLayerCoder.decode(n),r=this.vtFeatures[i];if(r[e])return r[e];const s=this.vtLayers[i].feature(e);return r[e]=s,s}hasLayer(t){for(const e of this.bucketLayerIDs)for(const n of e)if(t===n)return!0;return!1}getId(t,e){let n=t.id;if(this.promoteId){const i="string"==typeof this.promoteId?this.promoteId:this.promoteId[e];null!=i&&(n=t.properties[i]),"boolean"==typeof n&&(n=Number(n))}return n}}function am(t,e,n,i,r){return z(t,((t,s)=>{const o=e instanceof As?e.get(s):null;return o&&o.evaluate?o.evaluate(n,i,r):o}))}function lm(t,e){return e-t}Xr(om,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class hm{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.image=new Uh({width:t,height:e}),this.positions={},this.uploaded=!1}getDash(t,e){const n=this.getKey(t,e);return this.positions[n]}trim(){const t=this.width,e=this.height=L(this.nextRow);this.image.resize({width:t,height:e})}getKey(t,e){return t.join(",")+e}getDashRanges(t,e,n){const i=[];let r=t.length%2==1?-t[t.length-1]*n:0,s=t[0]*n,o=!0;i.push({left:r,right:s,isDash:o,zeroLength:0===t[0]});let a=t[0];for(let l=1;l<t.length;l++){o=!o;const e=t[l];r=a*n,a+=e,s=a*n,i.push({left:r,right:s,isDash:o,zeroLength:0===e})}return i}addRoundDash(t,e,n){const i=e/2;for(let r=-n;r<=n;r++){const e=this.width*(this.nextRow+n+r);let s=0,o=t[s];for(let a=0;a<this.width;a++){a/o.right>1&&(o=t[++s]);const l=Math.abs(a-o.left),h=Math.abs(a-o.right),c=Math.min(l,h);let u;const p=r/n*(i+1);if(o.isDash){const t=i-Math.abs(p);u=Math.sqrt(c*c+t*t)}else u=i-Math.sqrt(c*c+p*p);this.image.data[e+a]=Math.max(0,Math.min(255,u+128))}}}addRegularDash(t,e){for(let a=t.length-1;a>=0;--a){const e=t[a],n=t[a+1];e.zeroLength?t.splice(a,1):n&&n.isDash===e.isDash&&(n.left=e.left,t.splice(a,1))}const n=t[0],i=t[t.length-1];n.isDash===i.isDash&&(n.left=i.left-this.width,i.right=n.right+this.width);const r=this.width*this.nextRow;let s=0,o=t[s];for(let a=0;a<this.width;a++){a/o.right>1&&(o=t[++s]);const n=Math.abs(a-o.left),i=Math.abs(a-o.right),l=Math.min(n,i);this.image.data[r+a]=Math.max(0,Math.min(255,(o.isDash?l:-l)+e+128))}}addDash(t,e){const n=this.getKey(t,e);if(this.positions[n])return this.positions[n];const i="round"===e,r=i?7:0,s=2*r+1;if(this.nextRow+s>this.height)return V("LineAtlas out of space"),null;0===t.length&&t.push(1);let o=0;for(let h=0;h<t.length;h++)t[h]<0&&(V("Negative value is found in line dasharray, replacing values with 0"),t[h]=0),o+=t[h];if(0!==o){const n=this.width/o,s=this.getDashRanges(t,this.width,n);i?this.addRoundDash(s,n,r):this.addRegularDash(s,"square"===e?.5*n:0)}const a=this.nextRow+r;this.nextRow+=s;const l={tl:[a,r],br:[o,0]};return this.positions[n]=l,l}}Xr(hm,"LineAtlas");const cm=1*td;class um{constructor(t){const e={},n=[];for(const o in t){const i=t[o],r=e[o]={};for(const t in i.glyphs){const e=i.glyphs[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const s=e.metrics.localGlyph?cm:1,o={x:0,y:0,w:e.bitmap.width+2*s,h:e.bitmap.height+2*s};n.push(o),r[t]=o}}const{w:i,h:r}=xp(n),s=new Uh({width:i||1,height:r||1});for(const o in t){const n=t[o];for(const t in n.glyphs){const i=n.glyphs[+t];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const r=e[o][t],a=i.metrics.localGlyph?cm:1;Uh.copy(i.bitmap,s,{x:0,y:0},{x:r.x+a,y:r.y+a},i.bitmap)}}this.image=s,this.positions=e}}Xr(um,"GlyphAtlas");class pm{constructor(t){this.tileID=new fu(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=Dd(t.tileID.canonical,t.projection),this.projection=t.projection}parse(t,e,n,i,r){this.status="parsing",this.data=t,this.collisionBoxArray=new po;const s=new Ef(Object.keys(t.layers).sort()),o=new om(this.tileID,this.promoteId);o.bucketLayerIDs=[];const a={},l=new hm(256,256),h={featureIndex:o,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:n},c=e.familiesBySource[this.source];for(const T in c){const e=t.layers[T];if(!e)continue;let i=!1,r=!1;for(const t of c[T])"symbol"===t[0].type?i=!0:r=!0;if(!0===this.isSymbolTile&&!i)continue;if(!1===this.isSymbolTile&&!r)continue;1===e.version&&V('Vector tile source "'.concat(this.source,'" layer "').concat(T,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));const l=s.encode(T),u=[];for(let t=0;t<e.length;t++){const n=e.feature(t),i=o.getId(n,T);u.push({feature:n,id:i,index:t,sourceLayerIndex:l})}for(const t of c[T]){const e=t[0];void 0!==this.isSymbolTile&&"symbol"===e.type!==this.isSymbolTile||e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(dm(t,this.zoom,n),(a[e.id]=e.createBucket({index:o.bucketLayerIDs.length,layers:t,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:l,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:n})).populate(u,h,this.tileID.canonical,this.tileTransform),o.bucketLayerIDs.push(t.map((t=>t.id))))}}let u,p,d,f;l.trim();const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=()=>{if(u)return r(u);if(p&&d&&f){const t=new um(p),e=new wp(d,f);for(const i in a){const r=a[i];r instanceof af?(dm(r.layers,this.zoom,n),_d(r,p,t.positions,d,e.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):r.hasPattern&&(r instanceof Su||r instanceof Rc||r instanceof tu)&&(dm(r.layers,this.zoom,n),r.addFeatures(h,this.tileID.canonical,e.patternPositions,n,this.tileTransform))}this.status="done",r(null,{buckets:O(a).filter((t=>!t.isEmpty())),featureIndex:o,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,lineAtlas:l,imageAtlas:e,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?t.positions:null})}},y=z(h.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(y).length?i.send("getGlyphs",{uid:this.uid,stacks:y},((t,e)=>{u||(u=t,p=e,g())}),void 0,!1,m):p={};const v=Object.keys(h.iconDependencies);v.length?i.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{u||(u=t,d=e,g())}),void 0,!1,m):d={};const _=Object.keys(h.patternDependencies);_.length?i.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{u||(u=t,f=e,g())}),void 0,!1,m):f={},g()}}function dm(t,e,n){const i=new Es(e);for(const r of t)r.recalculate(i,n)}class fm{constructor(t){this.entries={},this.scheduler=t}request(t,e,n,i){const r=this.entries[t]=this.entries[t]||{callbacks:[]};if(r.result){const[t,n]=r.result;return this.scheduler?this.scheduler.add((()=>{i(t,n)}),e):i(t,n),()=>{}}return r.callbacks.push(i),r.cancel||(r.cancel=n(((n,i)=>{r.result=[n,i];for(const t of r.callbacks)this.scheduler?this.scheduler.add((()=>{t(n,i)}),e):t(n,i);setTimeout((()=>delete this.entries[t]),3e3)}))),()=>{r.result||(r.callbacks=r.callbacks.filter((t=>t!==i)),r.callbacks.length||(r.cancel(),delete this.entries[t]))}}}function mm(t,e,n){const i=JSON.stringify(t.request);return t.data&&(this.deduped.entries[i]={result:[null,t.data]}),this.deduped.request(i,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},(e=>{const i=pt(t.request,((t,i,r,s)=>{t?e(t):i&&e(null,{vectorTile:n?void 0:new Zc(new gp(i)),rawData:i,cacheControl:r,expires:s})}));return()=>{i.cancel(),e()}}),e)}const gm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ym{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[e,n]=new Uint8Array(t,0,2);if(219!==e)throw new Error("Data does not appear to be in a KDBush format.");const i=n>>4;if(1!==i)throw new Error("Got v".concat(i," data when expected v1."));const r=gm[15&n];if(!r)throw new Error("Unrecognized array type.");const[s]=new Uint16Array(t,2,1),[o]=new Uint32Array(t,4,1);return new ym(o,s,r,t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(isNaN(t)||t<0)throw new Error("Unpexpected numItems value: ".concat(t,"."));this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.ArrayType=n,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const r=gm.indexOf(this.ArrayType),s=2*t*this.ArrayType.BYTES_PER_ELEMENT,o=t*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-o%8)%8;if(r<0)throw new Error("Unexpected typed array class: ".concat(n,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+o+a,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+s+o+a),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+o+a,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+r]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t)}add(t,e){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=e,n}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error("Added ".concat(t," items when expected ").concat(this.numItems,"."));return vm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,e,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:s,nodeSize:o}=this,a=[0,r.length-1,0],l=[];for(;a.length;){const h=a.pop()||0,c=a.pop()||0,u=a.pop()||0;if(c-u<=o){for(let o=u;o<=c;o++){const a=s[2*o],h=s[2*o+1];a>=t&&a<=n&&h>=e&&h<=i&&l.push(r[o])}continue}const p=u+c>>1,d=s[2*p],f=s[2*p+1];d>=t&&d<=n&&f>=e&&f<=i&&l.push(r[p]),(0===h?t<=d:e<=f)&&(a.push(u),a.push(p-1),a.push(1-h)),(0===h?n>=d:i>=f)&&(a.push(p+1),a.push(c),a.push(1-h))}return l}within(t,e,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:r,nodeSize:s}=this,o=[0,i.length-1,0],a=[],l=n*n;for(;o.length;){const h=o.pop()||0,c=o.pop()||0,u=o.pop()||0;if(c-u<=s){for(let n=u;n<=c;n++)xm(r[2*n],r[2*n+1],t,e)<=l&&a.push(i[n]);continue}const p=u+c>>1,d=r[2*p],f=r[2*p+1];xm(d,f,t,e)<=l&&a.push(i[p]),(0===h?t-n<=d:e-n<=f)&&(o.push(u),o.push(p-1),o.push(1-h)),(0===h?t+n>=d:e+n>=f)&&(o.push(p+1),o.push(c),o.push(1-h))}return a}}function vm(t,e,n,i,r,s){if(r-i<=n)return;const o=i+r>>1;_m(t,e,o,i,r,s),vm(t,e,n,i,o-1,1-s),vm(t,e,n,o+1,r,1-s)}function _m(t,e,n,i,r,s){for(;r>i;){if(r-i>600){const o=r-i+1,a=n-i+1,l=Math.log(o),h=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*h*(o-h)/o)*(a-o/2<0?-1:1);_m(t,e,n,Math.max(i,Math.floor(n-a*h/o+c)),Math.min(r,Math.floor(n+(o-a)*h/o+c)),s)}const o=e[2*n+s];let a=i,l=r;for(Tm(t,e,i,n),e[2*r+s]>o&&Tm(t,e,i,r);a<l;){for(Tm(t,e,a,l),a++,l--;e[2*a+s]<o;)a++;for(;e[2*l+s]>o;)l--}e[2*i+s]===o?Tm(t,e,i,l):(l++,Tm(t,e,l,r)),l<=n&&(i=l+1),n<=l&&(r=l-1)}}function Tm(t,e,n,i){Em(t,n,i),Em(e,2*n,2*i),Em(e,2*n+1,2*i+1)}function Em(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function xm(t,e,n,i){const r=t-n,s=e-i;return r*r+s*s}t.ARRAY_TYPE=ca,t.AUTH_ERR_MSG=vt,t.Aabb=rl,t.Actor=class{constructor(t,n,i){this.target=t,this.parent=n,this.mapId=i,this.callbacks={},this.cancelCallbacks={},U(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Y()?t:e,this.scheduler=new Tf}send(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0;const o=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=s,this.callbacks[o]=n);const a=K(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:t,hasCallback:!!n,targetMapId:i,mustQueue:r,sourceMapId:this.mapId,data:Jr(e,a)},a),{cancel:()=>{n&&delete this.callbacks[o],this.target.postMessage({id:o,type:"<cancel>",targetMapId:i,sourceMapId:this.mapId})}}}receive(t){const e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const t=this.cancelCallbacks[n];delete this.cancelCallbacks[n],t&&t.cancel()}else if(e.mustQueue||Y()){const t=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add((()=>this.processTask(n,e)),t&&t.metadata||{type:"message"})}else this.processTask(n,e)}processTask(t,e){if("<response>"===e.type){const n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n($r(e.error)):n(null,$r(e.data)))}else{const n=K(this.globalScope)?void 0:[],i=e.hasCallback?(e,i)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?Jr(e):null,data:Jr(i,n)},n)}:t=>{},r=$r(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,r,i);else if(this.parent.getWorkerSource){const t=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,t[0],r.source)[t[1]](r,i)}else i(new Error("Could not find function ".concat(e.type)))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.CanonicalTileID=pu,t.Color=Oe,t.ColorMode=Qf,t.CullFaceMode=tm,t.DEMData=Zf,t.DataConstantProperty=Ds,t.DedupedRequest=fm,t.DepthMode=qf,t.EXTENT=aa,t.Elevation=class{isDataAvailableAtPoint(t){const e=this._source();if(this.isUsingMockSource()||!e||t.y<0||t.y>1)return!1;const n=e.getSource().maxzoom,i=1<<n,r=Math.floor(t.x),s=Math.floor((t.x-r)*i),o=Math.floor(t.y*i),a=this.findDEMTileFor(new fu(n,r,n,s,o));return!(!a||!a.dem)}getAtPointOrZero(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getAtPoint(t,e)||0}getAtPoint(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isUsingMockSource())return null;null==e&&(e=null);const i=this._source();if(!i)return e;if(t.y<0||t.y>1)return e;const r=i.getSource().maxzoom,s=1<<r,o=Math.floor(t.x),a=t.x-o,l=new fu(r,o,r,Math.floor(a*s),Math.floor(t.y*s)),h=this.findDEMTileFor(l);if(!h||!h.dem)return e;const c=h.dem,u=1<<h.tileID.canonical.z,p=(a*u-h.tileID.canonical.x)*c.dim,d=(t.y*u-h.tileID.canonical.y)*c.dim,f=Math.floor(p),m=Math.floor(d);return(n?this.exaggeration():1)*Nn(Nn(c.get(f,m),c.get(f,m+1),d-m),Nn(c.get(f+1,m),c.get(f+1,m+1),d-m),p-f)}getAtTileOffset(t,e,n){const i=1<<t.canonical.z;return this.getAtPointOrZero(new Jl(t.wrap+(t.canonical.x+e/aa)/i,(t.canonical.y+n/aa)/i))}getAtTileOffsetFunc(t,e,n,i){return r=>{const s=this.getAtTileOffset(t,r.x,r.y),o=i.upVector(t.canonical,r.x,r.y);return Na(o,o,s*i.upVectorScale(t.canonical,e,n).metersToTile),o}}getForTilePoints(t,e,n,i){if(this.isUsingMockSource())return!1;const r=sm.create(this,t,i);return!!r&&(e.forEach((t=>{t[2]=this.exaggeration()*r.getElevationAt(t[0],t[1],n)})),!0)}getMinMaxForTile(t){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const n=e.dem.tree,i=e.tileID,r=1<<t.canonical.z-i.canonical.z;let s=t.canonical.x/r-i.canonical.x,o=t.canonical.y/r-i.canonical.y,a=0;for(let l=0;l<t.canonical.z-i.canonical.z&&!n.leaves[a];l++){s*=2,o*=2;const t=2*Math.floor(o)+Math.floor(s);a=n.childOffsets[a]+t,s%=1,o%=1}return{min:this.exaggeration()*n.minimums[a],max:this.exaggeration()*n.maximums[a]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,n){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},t.ErrorEvent=Jt,t.EvaluationParameters=Es,t.Event=Qt,t.Evented=$t,t.FillExtrusionBucket=tu,t.Frustum=il,t.FrustumCorners=nl,t.GLOBE_RADIUS=al,t.GLOBE_SCALE_MATCH_LATITUDE=45,t.GLOBE_ZOOM_THRESHOLD_MAX=ol,t.GLOBE_ZOOM_THRESHOLD_MIN=sl,t.GlobeSharedBuffers=class{constructor(t){this._createGrid(t),this._createPoles(t)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const t of this._poleSegments)t.destroy();for(const t of this._gridSegments)t.withSkirts.destroy(),t.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const t of this._wireframeSegments)t.destroy()}}_fillGridMeshWithLods(t,e){const n=new zs,i=new no,r=[],s=t+1+2,o=e[0]+1,a=e[0]+1+(1+e.length),l=(t,e,n)=>{let i=t===s-1?t-2:0===t?t:t-1;return i+=n?24575:0,[i,e]};for(let h=0;h<s;++h)n.emplaceBack(...l(h,0,!0));for(let h=0;h<o;++h)for(let t=0;t<s;++t)n.emplaceBack(...l(t,h,(0===t||t===s-1)&&!0));for(let h=0;h<e.length;++h){const t=e[h];for(let e=0;e<s;++e)n.emplaceBack(...l(e,t,!0))}for(let h=0;h<e.length;++h){const t=i.length,o=e[h]+1+2,l=new no;for(let n=0;n<o-1;n++){const t=n===o-2,r=t?s*(a-e.length+h-n):s;for(let e=0;e<s-1;e++){const o=n*s+e;0===n||t||0===e||e===s-2?(l.emplaceBack(o+1,o,o+r),l.emplaceBack(o+r,o+r+1,o+1)):(i.emplaceBack(o+1,o,o+r),i.emplaceBack(o+r,o+r+1,o+1))}}const c=oa.simpleSegment(0,t,n.length,i.length-t);for(let e=0;e<l.uint16.length;e+=3)i.emplaceBack(l.uint16[e],l.uint16[e+1],l.uint16[e+2]);const u=oa.simpleSegment(0,t,n.length,i.length-t);r.push({withoutSkirts:c,withSkirts:u})}return{vertices:n,indices:i,segments:r}}_createGrid(t){const e=this._fillGridMeshWithLods(hl,cl);this._gridSegments=e.segments,this._gridBuffer=t.createVertexBuffer(e.vertices,tl.members),this._gridIndexBuffer=t.createIndexBuffer(e.indices,!0)}_createPoles(t){const e=new no;for(let r=0;r<=hl;r++)e.emplaceBack(0,r+1,r+2);this._poleIndexBuffer=t.createIndexBuffer(e,!0);const n=new oo,i=new oo;this._poleSegments=[];for(let r=0,s=0;r<sl;r++){const t=360/(1<<r);n.emplaceBack(0,-al,0,.5,0),i.emplaceBack(0,-al,0,.5,1);for(let e=0;e<=hl;e++){const r=e/hl,s=Nn(0,t,r),[o,a,l]=wl(kl,Ul,s,al);n.emplaceBack(o,a,l,r,0),i.emplaceBack(o,a,l,r,1)}this._poleSegments.push(oa.simpleSegment(s,0,66,64)),s+=66}this._poleNorthVertexBuffer=t.createVertexBuffer(n,Ja,!1),this._poleSouthVertexBuffer=t.createVertexBuffer(i,Ja,!1)}getGridBuffers(t,e){return[this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[t].withSkirts:this._gridSegments[t].withoutSkirts]}getPoleBuffers(t){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[t]]}getWirefameBuffers(t,e){if(!this._wireframeSegments){const e=new lo,n=hl,i=n+1+2,r=1;this._wireframeSegments=[];for(let t=0,s=0;t<cl.length;t++){const o=cl[t];for(let t=r;t<o+r;t++)for(let s=r;s<n+r;s++){const n=t*i+s;e.emplaceBack(n,n+1),e.emplaceBack(n,n+i),e.emplaceBack(n,n+i+1)}const a=o*n*3;this._wireframeSegments.push(oa.simpleSegment(0,s,(o+1)*i,a)),s+=a}this._wireframeIndexBuffer=t.createIndexBuffer(e)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},t.GlyphManager=nd,t.ImagePosition=Ip,t.KDBush=ym,t.LivePerformanceUtils=zt,t.LngLat=Hl,t.LngLatBounds=la,t.LocalGlyphMode=ed,t.MAX_MERCATOR_LATITUDE=Kl,t.MercatorCoordinate=Jl,t.ONE_EM=Uu,t.OverscaledTileID=fu,t.PerformanceMarkers=Bt,t.Point=v,t.Properties=Ms,t.RGBAImage=Bh,t.Ray=el,t.RequestManager=class{constructor(t,e,n){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const t=function(){let t="";for(let e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",u,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!_t(t))return t;const n=wt(t);return n.path="/styles/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!_t(t))return t;const n=wt(t);return n.path="/fonts/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||e)}normalizeSourceURL(t,e,n,i){if(!_t(t))return t;const r=wt(t);return r.path="/v4/".concat(r.authority,".json"),r.params.push("secure"),n&&r.params.push("language=".concat(n)),i&&r.params.push("worldview=".concat(i)),this._makeAPIURL(r,this._customAccessToken||e)}normalizeSpriteURL(t,e,n,i){const r=wt(t);return _t(t)?(r.path="/styles/v1".concat(r.path,"/sprite").concat(e).concat(n),this._makeAPIURL(r,this._customAccessToken||i)):(r.path+="".concat(e).concat(n),St(r))}normalizeTileURL(t,e,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!_t(t))return t;const i=wt(t);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(e||n&&"raster"!==i.authority&&512===n?"@2x":"").concat(s.supported?".webp":"$1")),"raster"===i.authority?i.path="/".concat(r.RASTER_URL_PREFIX).concat(i.path):(i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/".concat(r.TILE_URL_VERSION).concat(i.path));const o=this._customAccessToken||function(t){for(const e of t){const t=e.match(/^access_token=(.*)$/);if(t)return t[1]}return null}(i.params)||r.ACCESS_TOKEN;return r.REQUIRE_ACCESS_TOKEN&&o&&this._skuToken&&i.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(i,o)}canonicalizeTileURL(t,e){const n=wt(t);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return t;let i="mapbox://";n.path.match(/^\/raster\/v1\//)?i+="raster/".concat(n.path.replace("/".concat(r.RASTER_URL_PREFIX,"/"),"")):i+="tiles/".concat(n.path.replace("/".concat(r.TILE_URL_VERSION,"/"),""));let s=n.params;return e&&(s=s.filter((t=>!t.match(/^access_token=/)))),s.length&&(i+="?".concat(s.join("&"))),i}canonicalizeTileset(t,e){const n=!!e&&_t(e),i=[];for(const r of t.tiles||[])Tt(r)?i.push(this.canonicalizeTileURL(r,n)):i.push(r);return i}_makeAPIURL(t,e){const n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",i=wt(r.API_URL);if(t.protocol=i.protocol,t.authority=i.authority,"http"===t.protocol){const e=t.params.indexOf("secure");e>=0&&t.params.splice(e,1)}if("/"!==i.path&&(t.path="".concat(i.path).concat(t.path)),!r.REQUIRE_ACCESS_TOKEN)return St(t);if(e=e||r.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error("An API access token is required to use Mapbox GL. ".concat(n));if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(n))}return t.params=t.params.filter((t=>-1===t.indexOf("access_token"))),t.params.push("access_token=".concat(e||"")),St(t)}},t.ResourceType=lt,t.SegmentVector=oa,t.SourceCache=em,t.StencilMode=Kf,t.StructArrayLayout1ui2=ho,t.StructArrayLayout2f1f2i16=$s,t.StructArrayLayout2i4=zs,t.StructArrayLayout2ui4=lo,t.StructArrayLayout3f12=eo,t.StructArrayLayout3ui6=no,t.StructArrayLayout4i8=Hs,t.StructArrayLayout5f20=oo,t.Texture=vf,t.Tile=Mf,t.Transitionable=Is,t.Uniform1f=ko,t.Uniform1i=class extends Lo{constructor(t){super(t),this.current=0}set(t,e,n){this.fetchUniformLocation(t,e)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},t.Uniform2f=class extends Lo{constructor(t){super(t),this.current=[0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}},t.Uniform3f=class extends Lo{constructor(t){super(t),this.current=[0,0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}},t.Uniform4f=Uo,t.UniformColor=Bo,t.UniformMatrix2f=class extends Lo{constructor(t){super(t),this.current=Ho}set(t,e,n){if(this.fetchUniformLocation(t,e))for(let i=0;i<4;i++)if(n[i]!==this.current[i]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}},t.UniformMatrix3f=class extends Lo{constructor(t){super(t),this.current=Go}set(t,e,n){if(this.fetchUniformLocation(t,e))for(let i=0;i<9;i++)if(n[i]!==this.current[i]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}},t.UniformMatrix4f=class extends Lo{constructor(t){super(t),this.current=zo}set(t,e,n){if(this.fetchUniformLocation(t,e)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let t=1;t<16;t++)if(n[t]!==this.current[t]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}},t.UnwrappedTileID=du,t.ValidationError=nr,t.VectorTileFeature=Yc,t.VectorTileWorkerSource=class extends $t{constructor(t,e,n,i,r){super(),this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=r||mm,this.loading={},this.loaded={},this.deduped=new fm(t.scheduler),this.isSpriteLoaded=i,this.scheduler=t.scheduler}loadTile(t,e){const n=t.uid,i=t&&t.request,r=i&&i.collectResourceTiming,s=this.loading[n]=new pm(t);s.abort=this.loadVectorData(t,((o,a)=>{const l=!this.loading[n];if(delete this.loading[n],l||o||!a)return s.status="done",l||(this.loaded[n]=s),e(o);const h=a.rawData,c={};a.expires&&(c.expires=a.expires),a.cacheControl&&(c.cacheControl=a.cacheControl),s.vectorTile=a.vectorTile||new Zc(new gp(h));const u=()=>{s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,((t,n)=>{if(t||!n)return e(t);const s={};if(r){const t=jt(i);t.length>0&&(s.resourceTiming=JSON.parse(JSON.stringify(t)))}e(null,N({rawTileData:h.slice(0)},n,c,s))}))};this.isSpriteLoaded?u():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(u,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom}):u()})),this.loaded=this.loaded||{},this.loaded[n]=s}))}reloadTile(t,e){const n=this.loaded,i=t.uid,r=this;if(n&&n[i]){const s=n[i];s.showCollisionBoxes=t.showCollisionBoxes,s.enableTerrain=!!t.enableTerrain,s.projection=t.projection,s.tileTransform=Dd(t.tileID.canonical,t.projection);const o=(t,n)=>{const i=s.reloadCallback;i&&(delete s.reloadCallback,s.parse(s.vectorTile,r.layerIndex,this.availableImages,r.actor,i)),e(t,n)};"parsing"===s.status?s.reloadCallback=o:"done"===s.status&&(s.vectorTile?s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,o):o())}}abortTile(t,e){const n=t.uid,i=this.loading[n];i&&(i.abort&&i.abort(),delete this.loading[n]),e()}removeTile(t,e){const n=this.loaded,i=t.uid;n&&n[i]&&delete n[i],e()}},t.WritingMode=Sp,t.ZoomDependentExpression=Ji,t.add=Ra,t.addDynamicAttributes=nf,t.adjoint=function(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],h=e[7],c=e[8];return t[0]=o*c-a*h,t[1]=r*h-i*c,t[2]=i*a-r*o,t[3]=a*l-s*c,t[4]=n*c-r*l,t[5]=r*s-n*a,t[6]=s*h-o*l,t[7]=i*l-n*h,t[8]=n*o-i*s,t},t.asyncAll=D,t.bezier=w,t.bindAll=U,t.boundsAttributes=Of,t.bufferConvexPolygon=function(t,e){const n=[];for(let i=0;i<t.length;i++){const r=A(i-1,-1,t.length-1),s=A(i+1,-1,t.length-1),o=t[i],a=t[s],l=t[r].sub(o).unit(),h=a.sub(o).unit(),c=h.angleWithSep(l.x,l.y),u=l.add(h).unit().mult(-1*e/Math.sin(c/2));n.push(o.add(u))}return n},t.cacheEntryPossiblyAdded=function(t){at++,at>it&&(t.getActor().send("enforceCacheSizeLimit",nt),at=0)},t.calculateGlobeLabelMatrix=function(t,e){const{x:n,y:i}=t.point,r=Nl(n,i,t.worldSize/t._pixelsPerMercatorPixel,0,0);return ma(r,r,Ol(vl(e)))},t.calculateGlobeMatrix=function(t){const{x:e,y:n}=t.point,{lng:i,lat:r}=t._center;return Nl(e,n,t.worldSize,i,r)},t.calculateGlobeMercatorMatrix=function(t){const e=t.pixelsPerMeter,n=e/Zl(1,t.center.lat),i=da(new Float64Array(16));return ga(i,i,[t.point.x,t.point.y,0]),ya(i,i,[n,n,e]),Float32Array.from(i)},t.circumferenceAtLatitude=jl,t.clamp=R,t.clearTileCache=function(t){if(!rt())return;const n=e.caches.delete($);t&&n.catch(t).then((()=>t()))},t.clipLine=Kp,t.clone=function(t){var e=new ca(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=H,t.collisionCircleLayout=ku,t.config=r,t.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},t.create=function(){var t=new ca(16);return ca!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=ua,t.createExpression=Ki,t.createLayout=Us,t.createStyleLayer=function(t){return"custom"===t.type?new ff(t):new yf[t.type](t)},t.cross=La,t.degToRad=E,t.distance=function(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])},t.div=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},t.dot=Fa,t.earthRadius=Bl,t.ease=S,t.easeCubicInOut=I,t.ecefToLatLng=function(t){let[e,n,i]=t;const r=Math.hypot(e,n,i),s=Math.atan2(e,i),o=.5*Math.PI-Math.acos(-n/r);return new Hl(x(s),x(o))},t.emitValidationErrors=jr,t.endsWith=B,t.enforceCacheSizeLimit=function(t){st(),tt&&tt.then((e=>{e.keys().then((n=>{for(let i=0;i<n.length-t;i++)e.delete(n[i])}))}))},t.evaluateSizeForFeature=Gu,t.evaluateSizeForZoom=Hu,t.evaluateVariableOffset=vd,t.evented=ys,t.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},t.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},t.exported=qt,t.exported$1=s,t.extend=N,t.extend$1=ee,t.fillExtrusionHeightLift=au,t.filterObject=G,t.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},t.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,l=r+r,h=n*o,c=i*o,u=i*a,p=r*o,d=r*a,f=r*l,m=s*o,g=s*a,y=s*l;return t[0]=1-u-f,t[1]=c+y,t[2]=p-g,t[3]=0,t[4]=c-y,t[5]=1-h-f,t[6]=d+m,t[7]=0,t[8]=p+g,t[9]=d-m,t[10]=1-h-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=Ta,t.furthestTileCorner=function(t){const e=Math.round((t+45+360)%360/90)%4;return b[e]},t.getAABBPointSquareDist=function(t,e,n){let i=0;for(let r=0;r<2;++r){const s=n?n[r]:0;t[r]>s&&(i+=(t[r]-s)*(t[r]-s)),e[r]<s&&(i+=(s-e[r])*(s-e[r]))}return i},t.getAnchorAlignment=Up,t.getAnchorJustification=Td,t.getBounds=function(t){let e=1/0,n=1/0,i=-1/0,r=-1/0;for(const s of t)e=Math.min(e,s.x),n=Math.min(n,s.y),i=Math.max(i,s.x),r=Math.max(r,s.y);return{min:new v(e,n),max:new v(i,r)}},t.getColumn=J,t.getDefaultExportFromCjs=p,t.getGridMatrix=function(t,e,n,i){const r=e.getNorth(),s=e.getSouth(),o=e.getWest(),a=e.getEast(),l=1<<t.z,h=a-o,c=r-s,u=h/hl,p=-c/cl[n],d=[0,u,0,p,0,0,r,o,0];if(t.z>0){const t=180/i;pa(d,d,[t/h+1,0,0,0,t/c+1,0,-.5*t/u,.5*t/p,1])}return d[2]=l,d[5]=t.x,d[8]=t.y,d},t.getImage=yt,t.getJSON=function(t,e){return ut(N(t,{type:"json"}),e)},t.getLatitudinalLod=function(t){const e=Kl-5;t=R(t,-e,e)/e*90;const n=Math.pow(Math.abs(Math.sin(E(t))),3);return Math.round(n*(cl.length-1))},t.getMapSessionAPI=kt,t.getPerformanceMeasurement=jt,t.getProjection=Qd,t.getRTLTextPluginStatus=vs,t.getReferrer=ct,t.getTilePoint=function(t,e){let{x:n,y:i}=e;return new v(((n-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0))*t.scale-t.x)*aa,(i*t.scale-t.y)*aa)},t.getTileVec3=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Sa(((e.x-n)*t.scale-t.x)*aa,(e.y*t.scale-t.y)*aa,Xl(e.z,e.y))},t.getVideo=function(t,n){const i=e.document.createElement("video");i.muted=!0,i.onloadstart=function(){n(null,i)};for(let r=0;r<t.length;r++){const n=e.document.createElement("source");dt(t[r])||(i.crossOrigin="Anonymous"),n.src=t[r],i.appendChild(n)}return{cancel:()=>{}}},t.globeCenterToScreenPoint=function(t){const e=[0,0,0],n=da(new Float64Array(16));return ma(n,t.pixelMatrix,t.globeMatrix),ka(e,e,n),new v(e[0],e[1])},t.globeDenormalizeECEF=Ol,t.globeECEFOrigin=function(t,e){const n=[0,0,0];return ka(n,n,Dl(vl(e.canonical))),ka(n,n,t),n},t.globeMetersToEcef=fl,t.globeNormalizeECEF=Dl,t.globePixelsToTileUnits=function(t,e){return aa/(512*Math.pow(2,t))*Cl(vl(e))},t.globePoleMatrixForTile=function(t,e,n){const i=da(new Float64Array(16)),r=(e/(1<<t)-.5)*Math.PI*2;return _a(i,n.globeMatrix,r),Float32Array.from(i)},t.globeTileBounds=vl,t.globeTiltAtLngLat=Pl,t.globeToMercatorTransition=Ml,t.globeUseCustomAntiAliasing=function(t,e,n){const i=Ml(n.zoom),r=t.style.map._antialias,s=!!e.extStandardDerivatives,o=e.extStandardDerivativesForceOff||t.terrain&&t.terrain.exaggeration()>0;return 0===i&&!r&&!o&&s},t.identity=da,t.identity$1=Ya,t.invert=fa,t.isFullscreen=function(){return!!e.document.fullscreenElement||!!e.document.webkitFullscreenElement},t.isLngLatBehindGlobe=Fl,t.isMapAuthenticated=function(t){return Ut.has(t)},t.isMapboxURL=_t,t.isSafariWithAntialiasingBug=function(t){const e=t.navigator?t.navigator.userAgent:null;return!!K(t)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},t.latFromMercatorY=ql,t.latLngToECEF=Sl,t.len=Ha,t.length=wa,t.length$1=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},t.lngFromMercatorX=Yl,t.loadVectorTile=mm,t.makeRequest=ut,t.mapValue=function(t,e,n,i,r){return R((t-e)/(n-e)*(r-i)+i,i,r)},t.mercatorScale=Ql,t.mercatorXfromLng=Vl,t.mercatorYfromLat=Wl,t.mercatorZfromAltitude=Zl,t.mul=xa,t.mul$1=Ga,t.multiply=ma,t.multiply$1=pa,t.multiply$2=Aa,t.nextPowerOfTwo=L,t.normalize=Pa,t.normalize$1=Ka,t.normalize$2=Va,t.number=Nn,t.ortho=function(t,e,n,i,r,s,o){var a=1/(e-n),l=1/(i-r),h=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*l,t[14]=(o+s)*h,t[15]=1,t},t.pbf=qu,t.perspective=function(t,e,n,i,r){var s,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(s=1/(i-r)),t[14]=2*r*i*s):(t[10]=-1,t[14]=-2*i),t},t.pick=function(t,e){const n={};for(let i=0;i<e.length;i++){const r=e[i];r in t&&(n[r]=t[r])}return n},t.plugin=Ts,t.pointGeometry=g,t.polesInViewport=function(t){const e=da(new Float64Array(16));ma(e,t.pixelMatrix,t.globeMatrix);const n=[0,ul,0],i=[0,pl,0];return ka(n,n,e),ka(i,i,e),[n[0]>0&&n[0]<=t.width&&n[1]>0&&n[1]<=t.height&&!Fl(t,new Hl(t.center.lat,90)),i[0]>0&&i[0]<=t.width&&i[1]>0&&i[1]<=t.height&&!Fl(t,new Hl(t.center.lat,-90))]},t.polygonContainsPoint=Th,t.polygonIntersectsBox=Eh,t.polygonIntersectsPolygon=uh,t.polygonizeBounds=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=new v(n,n),s=t.sub(r),o=e.add(r),a=[s,new v(o.x,s.y),o,new v(s.x,o.y)];return i&&a.push(s.clone()),a},t.posAttributes=tl,t.postMapLoadEvent=Mt,t.postPerformanceEvent=Ft,t.postTurnstileEvent=Ot,t.potpack=xp,t.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},t.radToDeg=x,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(t){return t({pluginStatus:ds,pluginURL:fs}),ys.on("pluginStateChange",t),t},t.removeAuthState=function(t){Ut.delete(t)},t.renderColorRamp=Gh,t.resample=th,t.rotateX=va,t.rotateX$1=qa,t.rotateY=_a,t.rotateY$1=Xa,t.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],h=e[4],c=e[5],u=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+h*i,t[1]=o*r+c*i,t[2]=a*r+u*i,t[3]=l*r+p*i,t[4]=h*r-s*i,t[5]=c*r-o*i,t[6]=u*r-a*i,t[7]=p*r-l*i,t},t.rotateZ$1=function(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l+r*a,t[1]=r*l-i*a,t[2]=s*l+o*a,t[3]=o*l-s*a,t},t.scale=ya,t.scale$1=ja,t.scale$2=Na,t.scaleAndAdd=Ma,t.set=function(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t},t.setCacheLimits=function(t,e){nt=t,it=e},t.setColumn=function(t,e,n){t[4*e+0]=n[0],t[4*e+1]=n[1],t[4*e+2]=n[2],t[4*e+3]=n[3]},t.setRTLTextPlugin=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ds===hs||ds===cs||ds===us)throw new Error("setRTLTextPlugin cannot be called multiple times.");fs=qt.resolveURL(t),ds=hs,ps=e,gs(),n||_s()},t.smoothstep=C,t.spec=te,t.squaredLength=function(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i},t.storeAuthState=function(t,e){e?Ut.add(t):Ut.delete(t)},t.sub=za,t.subtract=Ca,t.symbolSize=ju,t.tileAABB=function(t,e,n,i,r,s,o,a,l){if("globe"===l.name)return xl(t,e,new pu(n,i,r));const h=Dd({z:n,x:i,y:r},l);return new rl([(s+h.x/h.scale)*e,e*(h.y/h.scale),o],[(s+h.x2/h.scale)*e,e*(h.y2/h.scale),a])},t.tileCornersToBounds=bl,t.tileTransform=Dd,t.transformMat3=function(t,e,n){var i=e[0],r=e[1],s=e[2];return t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8],t},t.transformMat4=ka,t.transformMat4$1=Wa,t.transformQuat=Ua,t.transitionTileAABBinECEF=Tl,t.translate=ga,t.transpose=function(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},t.triggerPluginCompletionEvent=ms,t.uniqueId=P,t.updateGlobeVertexNormal=function(t,e,n,i,r){const s=5*e+2;t.float32[s+0]=n,t.float32[s+1]=i,t.float32[s+2]=r},t.validateCustomStyleLayer=function(t){const e=[],n=t.id;return void 0===n&&e.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===t.render&&e.push({message:"layers.".concat(n,': missing required method "render"')}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),e},t.validateFilter=t=>Hr(br(t)),t.validateFog=t=>Hr(Fr(t)),t.validateLayer=t=>Hr(Cr(t)),t.validateLight=t=>Hr(Mr(t)),t.validateSource=t=>Hr(Or(t)),t.validateStyle=Br,t.validateTerrain=t=>Hr(Pr(t)),t.values=O,t.vectorTile=Pc,t.version=n,t.warnOnce=V,t.window=e,t.wrap=A})),i(["./shared"],(function(t){function e(t){if("number"==typeof t||"boolean"==typeof t||"string"==typeof t||null==t)return JSON.stringify(t);if(Array.isArray(t)){let n="[";for(const i of t)n+="".concat(e(i),",");return"".concat(n,"]")}let n="{";for(const i of Object.keys(t).sort())n+="".concat(i,":").concat(e(t[i]),",");return"".concat(n,"}")}function n(n){let i="";for(const r of t.refProperties)i+="/".concat(e(n[r]));return i}class i{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,i){for(const n of e)this._layerConfigs[n.id]=n,(this._layers[n.id]=t.createStyleLayer(n)).compileFilter(),this.keyCache[n.id]&&delete this.keyCache[n.id];for(const t of i)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const r=function(t,e){const i={};for(let s=0;s<t.length;s++){const r=e&&e[t[s].id]||n(t[s]);e&&(e[t[s].id]=r);let o=i[r];o||(o=i[r]=[]),o.push(t[s])}const r=[];for(const n in i)r.push(i[n]);return r}(t.values(this._layerConfigs),this.keyCache);for(const t of r){const e=t.map((t=>this._layers[t.id])),n=e[0];if("none"===n.visibility)continue;const i=n.source||"";let r=this.familiesBySource[i];r||(r=this.familiesBySource[i]={});const s=n.sourceLayer||"_geojsonTileLayer";let o=r[s];o||(o=r[s]=[]),o.push(e)}}}class r{loadTile(e,n){const{uid:i,encoding:r,rawImageData:s,padding:o,buildQuadTree:a}=e,l=t.window.ImageBitmap&&s instanceof t.window.ImageBitmap?this.getImageData(s,o):s;n(null,new t.DEMData(i,l,r,o<1,a))}getImageData(t,e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);const n=this.offscreenCanvasContext.getImageData(-e,-e,t.width+2*e,t.height+2*e);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}function s(t,e){if(0!==t.length){o(t[0],e);for(var n=1;n<t.length;n++)o(t[n],!e)}}function o(t,e){for(var n=0,i=0,r=0,s=t.length,o=s-1;r<s;o=r++){var a=(t[r][0]-t[o][0])*(t[o][1]+t[r][1]),l=n+a;i+=Math.abs(n)>=Math.abs(a)?n-l+a:a-l+n,n=l}n+i>=0!=!!e&&t.reverse()}var a=t.getDefaultExportFromCjs((function t(e,n){var i,r=e&&e.type;if("FeatureCollection"===r)for(i=0;i<e.features.length;i++)t(e.features[i],n);else if("GeometryCollection"===r)for(i=0;i<e.geometries.length;i++)t(e.geometries[i],n);else if("Feature"===r)t(e.geometry,n);else if("Polygon"===r)s(e.coordinates,n);else if("MultiPolygon"===r)for(i=0;i<e.coordinates.length;i++)s(e.coordinates[i],n);return e}));const l=t.VectorTileFeature.prototype.toGeoJSON;var h={exports:{}},c=t.pointGeometry,u=t.vectorTile.VectorTileFeature,p=d;function d(t,e){this.options=e||{},this.features=t,this.length=t.length}function f(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}d.prototype.feature=function(t){return new f(this.features[t],this.options.extent)},f.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],i=[],r=0;r<n.length;r++)i.push(new c(n[r][0],n[r][1]));this.geometry.push(i)}return this.geometry},f.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,i=1/0,r=-1/0,s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.length;a++){var l=o[a];e=Math.min(e,l.x),n=Math.max(n,l.x),i=Math.min(i,l.y),r=Math.max(r,l.y)}return[e,i,n,r]},f.prototype.toGeoJSON=u.prototype.toGeoJSON;var m=t.pbf,g=p;function y(t){var e=new m;return function(t,e){for(var n in t.layers)e.writeMessage(3,v,t.layers[n])}(t,e),e.finish()}function v(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)i.feature=t.feature(n),e.writeMessage(2,_,i);var r=i.keys;for(n=0;n<r.length;n++)e.writeStringField(3,r[n]);var s=i.values;for(n=0;n<s.length;n++)e.writeMessage(4,I,s[n])}function _(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,T,t),e.writeVarintField(3,n.type),e.writeMessage(4,b,n)}function T(t,e){var n=t.feature,i=t.keys,r=t.values,s=t.keycache,o=t.valuecache;for(var a in n.properties){var l=n.properties[a],h=s[a];if(null!==l){void 0===h&&(i.push(a),s[a]=h=i.length-1),e.writeVarint(h);var c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var u=c+":"+l,p=o[u];void 0===p&&(r.push(l),o[u]=p=r.length-1),e.writeVarint(p)}}}function E(t,e){return(e<<3)+(7&t)}function x(t){return t<<1^t>>31}function b(t,e){for(var n=t.loadGeometry(),i=t.type,r=0,s=0,o=n.length,a=0;a<o;a++){var l=n[a],h=1;1===i&&(h=l.length),e.writeVarint(E(1,h));for(var c=3===i?l.length-1:l.length,u=0;u<c;u++){1===u&&1!==i&&e.writeVarint(E(2,c-1));var p=l[u].x-r,d=l[u].y-s;e.writeVarint(x(p)),e.writeVarint(x(d)),r+=p,s+=d}3===i&&e.writeVarint(E(7,1))}}function I(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}h.exports=y,h.exports.fromVectorTileJs=y,h.exports.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var i in t)n[i]=new g(t[i].features,e),n[i].name=i,n[i].version=e.version,n[i].extent=e.extent;return y({layers:n})},h.exports.GeoJSONWrapper=g;var w=t.getDefaultExportFromCjs(h.exports);const S={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},R=Math.fround||(C=new Float32Array(1),t=>(C[0]=+t,C[0]));var C;const A=3,D=5,O=6;class N{constructor(t){this.options=Object.assign(Object.create(S),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:e,minZoom:n,maxZoom:i}=this.options;e&&console.time("total time");const r="prepare ".concat(t.length," points");e&&console.time(r),this.points=t;const s=[];for(let a=0;a<t.length;a++){const e=t[a];if(!e.geometry)continue;const[n,i]=e.geometry.coordinates,r=R(F(n)),o=R(L(i));s.push(r,o,1/0,a,-1,1),this.options.reduce&&s.push(0)}let o=this.trees[i+1]=this._createTree(s);e&&console.timeEnd(r);for(let a=i;a>=n;a--){const t=+Date.now();o=this.trees[a]=this._createTree(this._cluster(o,a)),e&&console.log("z%d: %d clusters in %dms",a,o.numItems,+Date.now()-t)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,t[1]));let r=180===t[2]?180:((t[2]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,r=180;else if(n>r){const t=this.getClusters([n,i,180,s],e),o=this.getClusters([-180,i,r,s],e);return t.concat(o)}const o=this.trees[this._limitZoom(e)],a=o.range(F(n),L(s),F(r),L(i)),l=o.data,h=[];for(const c of a){const t=this.stride*c;h.push(l[t+D]>1?M(l,t,this.clusterProps):this.points[l[t+A]])}return h}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);const s=r.data;if(e*this.stride>=s.length)throw new Error(i);const o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=r.within(s[e*this.stride],s[e*this.stride+1],o),l=[];for(const h of a){const e=h*this.stride;s[e+4]===t&&l.push(s[e+D]>1?M(s,e,this.clusterProps):this.points[s[e+A]])}if(0===l.length)throw new Error(i);return l}getLeaves(t,e,n){const i=[];return this._appendLeaves(i,t,e=e||10,n=n||0,0),i}getTile(t,e,n){const i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),{extent:s,radius:o}=this.options,a=o/s,l=(n-a)/r,h=(n+1+a)/r,c={features:[]};return this._addTileFeatures(i.range((e-a)/r,l,(e+1+a)/r,h),i.data,e,n,r,c),0===e&&this._addTileFeatures(i.range(1-a/r,l,1,h),i.data,r,n,r,c),e===r-1&&this._addTileFeatures(i.range(0,l,a/r,h),i.data,-1,n,r,c),c.features.length?c:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,i,r){const s=this.getChildren(e);for(const o of s){const e=o.properties;if(e&&e.cluster?r+e.point_count<=i?r+=e.point_count:r=this._appendLeaves(t,e.cluster_id,n,i,r):r<i?r++:t.push(o),t.length===n)break}return r}_createTree(e){const n=new t.KDBush(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let t=0;t<e.length;t+=this.stride)n.add(e[t],e[t+1]);return n.finish(),n.data=e,n}_addTileFeatures(t,e,n,i,r,s){for(const o of t){const t=o*this.stride,a=e[t+D]>1;let l,h,c;if(a)l=P(e,t,this.clusterProps),h=e[t],c=e[t+1];else{const n=this.points[e[t+A]];l=n.properties;const[i,r]=n.geometry.coordinates;h=F(i),c=L(r)}const u={type:1,geometry:[[Math.round(this.options.extent*(h*r-n)),Math.round(this.options.extent*(c*r-i))]],tags:l};let p;p=a||this.options.generateId?e[t+A]:this.points[e[t+A]].id,void 0!==p&&(u.id=p),s.features.push(u)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const{radius:n,extent:i,reduce:r,minPoints:s}=this.options,o=n/(i*Math.pow(2,e)),a=t.data,l=[],h=this.stride;for(let c=0;c<a.length;c+=h){if(a[c+2]<=e)continue;a[c+2]=e;const n=a[c],i=a[c+1],u=t.within(a[c],a[c+1],o),p=a[c+D];let d=p;for(const t of u){const n=t*h;a[n+2]>e&&(d+=a[n+D])}if(d>p&&d>=s){let t,s=n*p,o=i*p,f=-1;const m=((c/h|0)<<5)+(e+1)+this.points.length;for(const n of u){const i=n*h;if(a[i+2]<=e)continue;a[i+2]=e;const l=a[i+D];s+=a[i]*l,o+=a[i+1]*l,a[i+4]=m,r&&(t||(t=this._map(a,c,!0),f=this.clusterProps.length,this.clusterProps.push(t)),r(t,this._map(a,i)))}a[c+4]=m,l.push(s/d,o/d,1/0,m,-1,d),r&&l.push(f)}else{for(let t=0;t<h;t++)l.push(a[c+t]);if(d>1)for(const t of u){const n=t*h;if(!(a[n+2]<=e)){a[n+2]=e;for(let t=0;t<h;t++)l.push(a[n+t])}}}}return l}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e,n){if(t[e+D]>1){const i=this.clusterProps[t[e+O]];return n?Object.assign({},i):i}const i=this.points[t[e+A]].properties,r=this.options.map(i);return n&&r===i?Object.assign({},r):r}}function M(t,e,n){return{type:"Feature",id:t[e+A],properties:P(t,e,n),geometry:{type:"Point",coordinates:[(i=t[e],360*(i-.5)),k(t[e+1])]}};var i}function P(t,e,n){const i=t[e+D],r=i>=1e4?"".concat(Math.round(i/1e3),"k"):i>=1e3?Math.round(i/100)/10+"k":i,s=t[e+O],o=-1===s?{}:Object.assign({},n[s]);return Object.assign(o,{cluster:!0,cluster_id:t[e+A],point_count:i,point_count_abbreviated:r})}function F(t){return t/360+.5}function L(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function k(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function U(t,e,n,i){for(var r,s=i,o=n-e>>1,a=n-e,l=t[e],h=t[e+1],c=t[n],u=t[n+1],p=e+3;p<n;p+=3){var d=B(t[p],t[p+1],l,h,c,u);if(d>s)r=p,s=d;else if(d===s){var f=Math.abs(p-o);f<a&&(r=p,a=f)}}s>i&&(r-e>3&&U(t,e,r,i),t[r+2]=s,n-r>3&&U(t,r,n,i))}function B(t,e,n,i,r,s){var o=r-n,a=s-i;if(0!==o||0!==a){var l=((t-n)*o+(e-i)*a)/(o*o+a*a);l>1?(n=r,i=s):l>0&&(n+=o*l,i+=a*l)}return(o=t-n)*o+(a=e-i)*a}function z(t,e,n,i){var r={id:void 0===t?null:t,type:e,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)G(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<e.length;i++)G(t,e[i]);else if("MultiPolygon"===n)for(i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++)G(t,e[i][r])}(r),r}function G(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function H(t,e,n,i){if(e.geometry){var r=e.geometry.coordinates,s=e.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),a=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=i||0),"Point"===s)j(r,a);else if("MultiPoint"===s)for(var h=0;h<r.length;h++)j(r[h],a);else if("LineString"===s)V(r,a,o,!1);else if("MultiLineString"===s){if(n.lineMetrics){for(h=0;h<r.length;h++)V(r[h],a=[],o,!1),t.push(z(l,"LineString",a,e.properties));return}W(r,a,o,!1)}else if("Polygon"===s)W(r,a,o,!0);else{if("MultiPolygon"!==s){if("GeometryCollection"===s){for(h=0;h<e.geometry.geometries.length;h++)H(t,{id:l,geometry:e.geometry.geometries[h],properties:e.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(h=0;h<r.length;h++){var c=[];W(r[h],c,o,!0),a.push(c)}}t.push(z(l,s,a,e.properties))}}function j(t,e){e.push(Z(t[0])),e.push(Y(t[1])),e.push(0)}function V(t,e,n,i){for(var r,s,o=0,a=0;a<t.length;a++){var l=Z(t[a][0]),h=Y(t[a][1]);e.push(l),e.push(h),e.push(0),a>0&&(o+=i?(r*h-l*s)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(h-s,2))),r=l,s=h}var c=e.length-3;e[2]=1,U(e,0,c,n),e[c+2]=1,e.size=Math.abs(o),e.start=0,e.end=e.size}function W(t,e,n,i){for(var r=0;r<t.length;r++){var s=[];V(t[r],s,n,i),e.push(s)}}function Z(t){return t/360+.5}function Y(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function q(t,e,n,i,r,s,o,a){if(i/=e,s>=(n/=e)&&o<i)return t;if(o<n||s>=i)return null;for(var l=[],h=0;h<t.length;h++){var c=t[h],u=c.geometry,p=c.type,d=0===r?c.minX:c.minY,f=0===r?c.maxX:c.maxY;if(d>=n&&f<i)l.push(c);else if(!(f<n||d>=i)){var m=[];if("Point"===p||"MultiPoint"===p)X(u,m,n,i,r);else if("LineString"===p)K(u,m,n,i,r,!1,a.lineMetrics);else if("MultiLineString"===p)J(u,m,n,i,r,!1);else if("Polygon"===p)J(u,m,n,i,r,!0);else if("MultiPolygon"===p)for(var g=0;g<u.length;g++){var y=[];J(u[g],y,n,i,r,!0),y.length&&m.push(y)}if(m.length){if(a.lineMetrics&&"LineString"===p){for(g=0;g<m.length;g++)l.push(z(c.id,p,m[g],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===m.length?(p="LineString",m=m[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===m.length?"Point":"MultiPoint"),l.push(z(c.id,p,m,c.tags))}}}return l.length?l:null}function X(t,e,n,i,r){for(var s=0;s<t.length;s+=3){var o=t[s+r];o>=n&&o<=i&&(e.push(t[s]),e.push(t[s+1]),e.push(t[s+2]))}}function K(t,e,n,i,r,s,o){for(var a,l,h=Q(t),c=0===r?tt:et,u=t.start,p=0;p<t.length-3;p+=3){var d=t[p],f=t[p+1],m=t[p+2],g=t[p+3],y=t[p+4],v=0===r?d:f,_=0===r?g:y,T=!1;o&&(a=Math.sqrt(Math.pow(d-g,2)+Math.pow(f-y,2))),v<n?_>n&&(l=c(h,d,f,g,y,n),o&&(h.start=u+a*l)):v>i?_<i&&(l=c(h,d,f,g,y,i),o&&(h.start=u+a*l)):$(h,d,f,m),_<n&&v>=n&&(l=c(h,d,f,g,y,n),T=!0),_>i&&v<=i&&(l=c(h,d,f,g,y,i),T=!0),!s&&T&&(o&&(h.end=u+a*l),e.push(h),h=Q(t)),o&&(u+=a)}var E=t.length-3;d=t[E],f=t[E+1],m=t[E+2],(v=0===r?d:f)>=n&&v<=i&&$(h,d,f,m),E=h.length-3,s&&E>=3&&(h[E]!==h[0]||h[E+1]!==h[1])&&$(h,h[0],h[1],h[2]),h.length&&e.push(h)}function Q(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function J(t,e,n,i,r,s){for(var o=0;o<t.length;o++)K(t[o],e,n,i,r,s,!1)}function $(t,e,n,i){t.push(e),t.push(n),t.push(i)}function tt(t,e,n,i,r,s){var o=(s-e)/(i-e);return t.push(s),t.push(n+(r-n)*o),t.push(1),o}function et(t,e,n,i,r,s){var o=(s-n)/(r-n);return t.push(e+(i-e)*o),t.push(s),t.push(1),o}function nt(t,e){for(var n=[],i=0;i<t.length;i++){var r,s=t[i],o=s.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)r=it(s.geometry,e);else if("MultiLineString"===o||"Polygon"===o){r=[];for(var a=0;a<s.geometry.length;a++)r.push(it(s.geometry[a],e))}else if("MultiPolygon"===o)for(r=[],a=0;a<s.geometry.length;a++){for(var l=[],h=0;h<s.geometry[a].length;h++)l.push(it(s.geometry[a][h],e));r.push(l)}n.push(z(s.id,o,r,s.tags))}return n}function it(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var i=0;i<t.length;i+=3)n.push(t[i]+e,t[i+1],t[i+2]);return n}function rt(t,e){if(t.transformed)return t;var n,i,r,s=1<<t.z,o=t.x,a=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],h=l.geometry,c=l.type;if(l.geometry=[],1===c)for(i=0;i<h.length;i+=2)l.geometry.push(st(h[i],h[i+1],e,s,o,a));else for(i=0;i<h.length;i++){var u=[];for(r=0;r<h[i].length;r+=2)u.push(st(h[i][r],h[i][r+1],e,s,o,a));l.geometry.push(u)}}return t.transformed=!0,t}function st(t,e,n,i,r,s){return[Math.round(n*(t*i-r)),Math.round(n*(e*i-s))]}function ot(t,e,n,i,r){for(var s=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<t.length;a++){o.numFeatures++,at(o,t[a],s,r);var l=t[a].minX,h=t[a].minY,c=t[a].maxX,u=t[a].maxY;l<o.minX&&(o.minX=l),h<o.minY&&(o.minY=h),c>o.maxX&&(o.maxX=c),u>o.maxY&&(o.maxY=u)}return o}function at(t,e,n,i){var r=e.geometry,s=e.type,o=[];if("Point"===s||"MultiPoint"===s)for(var a=0;a<r.length;a+=3)o.push(r[a]),o.push(r[a+1]),t.numPoints++,t.numSimplified++;else if("LineString"===s)lt(o,r,t,n,!1,!1);else if("MultiLineString"===s||"Polygon"===s)for(a=0;a<r.length;a++)lt(o,r[a],t,n,"Polygon"===s,0===a);else if("MultiPolygon"===s)for(var l=0;l<r.length;l++){var h=r[l];for(a=0;a<h.length;a++)lt(o,h[a],t,n,!0,0===a)}if(o.length){var c=e.tags||null;if("LineString"===s&&i.lineMetrics){for(var u in c={},e.tags)c[u]=e.tags[u];c.mapbox_clip_start=r.start/r.size,c.mapbox_clip_end=r.end/r.size}var p={geometry:o,type:"Polygon"===s||"MultiPolygon"===s?3:"LineString"===s||"MultiLineString"===s?2:1,tags:c};null!==e.id&&(p.id=e.id),t.features.push(p)}}function lt(t,e,n,i,r,s){var o=i*i;if(i>0&&e.size<(r?o:i))n.numPoints+=e.length/3;else{for(var a=[],l=0;l<e.length;l+=3)(0===i||e[l+2]>o)&&(n.numSimplified++,a.push(e[l]),a.push(e[l+1])),n.numPoints++;r&&function(t,e){for(var n=0,i=0,r=t.length,s=r-2;i<r;s=i,i+=2)n+=(t[i]-t[s])*(t[i+1]+t[s+1]);if(n>0===e)for(i=0,r=t.length;i<r/2;i+=2){var o=t[i],a=t[i+1];t[i]=t[r-2-i],t[i+1]=t[r-1-i],t[r-2-i]=o,t[r-1-i]=a}}(a,s),t.push(a)}}function ht(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)H(n,t.features[i],e,i);else H(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=function(t,e){var n=e.buffer/e.extent,i=t,r=q(t,1,-1-n,n,0,-1,2,e),s=q(t,1,1-n,2+n,0,-1,2,e);return(r||s)&&(i=q(t,1,-n,1+n,0,-1,2,e)||[],r&&(i=nt(r,1).concat(i)),s&&(i=i.concat(nt(s,-1)))),i}(i,e),i.length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ct(t,e,n){return 32*((1<<t)*n+e)+t}function ut(e,n){const i=e.tileID.canonical;if(!this._geoJSONIndex)return n(null,null);const r=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!r)return n(null,null);const s=new class{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(e){return new class{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const n of this._feature.geometry)e.push([new t.Point(n[0],n[1])]);return e}{const e=[];for(const n of this._feature.geometry){const i=[];for(const e of n)i.push(new t.Point(e[0],e[1]));e.push(i)}return e}}toGeoJSON(t,e,n){return l.call(this,t,e,n)}}(this._features[e])}}(r.features);let o=w(s);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),n(null,{vectorTile:s,rawData:o.buffer})}ht.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ht.prototype.splitTile=function(t,e,n,i,r,s,o){for(var a=[t,e,n,i],l=this.options,h=l.debug;a.length;){i=a.pop(),n=a.pop(),e=a.pop(),t=a.pop();var c=1<<e,u=ct(e,n,i),p=this.tiles[u];if(!p&&(h>1&&console.time("creation"),p=this.tiles[u]=ot(t,e,n,i,l),this.tileCoords.push({z:e,x:n,y:i}),h)){h>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(p.source=t,r){if(e===l.maxZoom||e===r)continue;var f=1<<r-e;if(n!==Math.floor(s/f)||i!==Math.floor(o/f))continue}else if(e===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==t.length){h>1&&console.time("clipping");var m,g,y,v,_,T,E=.5*l.buffer/l.extent,x=.5-E,b=.5+E,I=1+E;m=g=y=v=null,_=q(t,c,n-E,n+b,0,p.minX,p.maxX,l),T=q(t,c,n+x,n+I,0,p.minX,p.maxX,l),t=null,_&&(m=q(_,c,i-E,i+b,1,p.minY,p.maxY,l),g=q(_,c,i+x,i+I,1,p.minY,p.maxY,l),_=null),T&&(y=q(T,c,i-E,i+b,1,p.minY,p.maxY,l),v=q(T,c,i+x,i+I,1,p.minY,p.maxY,l),T=null),h>1&&console.timeEnd("clipping"),a.push(m||[],e+1,2*n,2*i),a.push(g||[],e+1,2*n,2*i+1),a.push(y||[],e+1,2*n+1,2*i),a.push(v||[],e+1,2*n+1,2*i+1)}}},ht.prototype.getTile=function(t,e,n){var i=this.options,r=i.extent,s=i.debug;if(t<0||t>24)return null;var o=1<<t,a=ct(t,e=(e%o+o)%o,n);if(this.tiles[a])return rt(this.tiles[a],r);s>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,h=t,c=e,u=n;!l&&h>0;)h--,c=Math.floor(c/2),u=Math.floor(u/2),l=this.tiles[ct(h,c,u)];return l&&l.source?(s>1&&console.log("found parent tile z%d-%d-%d",h,c,u),s>1&&console.time("drilling down"),this.splitTile(l.source,h,c,u,t,e,n),s>1&&console.timeEnd("drilling down"),this.tiles[a]?rt(this.tiles[a],r):null):null};class pt extends t.VectorTileWorkerSource{constructor(t,e,n,i,r){super(t,e,n,i,ut),r&&(this.loadGeoJSON=r)}loadData(e,n){const i=e&&e.request,r=i&&i.collectResourceTiming;this.loadGeoJSON(e,((s,o)=>{if(s||!o)return n(s);if("object"!=typeof o)return n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")));{a(o,!0);try{if(e.filter){const n=t.createExpression(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));const i=o.features.filter((t=>n.value.evaluate({zoom:0},t)));o={type:"FeatureCollection",features:i}}this._geoJSONIndex=e.cluster?new N(function(e){let{superclusterOptions:n,clusterProperties:i}=e;if(!i||!n)return n;const r={},s={},o={accumulated:null,zoom:0},a={properties:null},l=Object.keys(i);for(const h of l){const[e,n]=i[h],o=t.createExpression(n),a=t.createExpression("string"==typeof e?[e,["accumulated"],["get",h]]:e);r[h]=o.value,s[h]=a.value}return n.map=t=>{a.properties=t;const e={};for(const n of l)e[n]=r[n].evaluate(o,a);return e},n.reduce=(t,e)=>{a.properties=e;for(const n of l)o.accumulated=t[n],t[n]=s[n].evaluate(o,a)},n}(e)).load(o.features):function(t,e){return new ht(t,e)}(o,e.geojsonVtOptions)}catch(s){return n(s)}this.loaded={};const l={};if(r){const n=t.getPerformanceMeasurement(i);n&&(l.resourceTiming={},l.resourceTiming[e.source]=JSON.parse(JSON.stringify(n)))}n(null,l)}}))}reloadTile(t,e){const n=this.loaded;return n&&n[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")))}}}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class dt{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=t.getProjection({name:"mercator"}),this.workerSourceTypes={vector:t.VectorTileWorkerSource,geojson:pt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error('Worker source with name "'.concat(t,'" already registered.'));this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}clearCaches(t,e,n){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t],n()}checkIfReady(t,e,n){n()}setReferrer(t,e){this.referrer=e}spriteLoaded(e,n){this.isSpriteLoaded[e]=n;for(const i in this.workerSources[e]){const r=this.workerSources[e][i];for(const e in r)r[e]instanceof t.VectorTileWorkerSource&&(r[e].isSpriteLoaded=n,r[e].fire(new t.Event("isSpriteLoaded")))}}setImages(t,e,n){this.availableImages[t]=e;for(const i in this.workerSources[t]){const n=this.workerSources[t][i];for(const t in n)n[t].availableImages=e}n()}enableTerrain(t,e,n){this.terrain=e,n()}setProjection(e,n){this.projections[e]=t.getProjection(n)}setLayers(t,e,n){this.getLayerIndex(t).replace(e),n()}updateLayers(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()}loadTile(e,n,i){const r=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;r.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,n.type,n.source).loadTile(r,i)}loadDEMTile(e,n,i){const r=this.enableTerrain?t.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(e,n.source).loadTile(r,i)}reloadTile(e,n,i){const r=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;r.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,n.type,n.source).reloadTile(r,i)}abortTile(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)}removeTile(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)}removeSource(t,e,n){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const i=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==i.removeSource?i.removeSource(e,n):n()}loadWorkerSource(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}}syncRTLPluginState(e,n,i){try{t.plugin.setState(n);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const n=t.plugin.isParsed();i(n?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(e)),n)}}catch(t){i(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e}getWorkerSource(t,e,n){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){const i={send:(e,n,i,r,s,o)=>{this.actor.send(e,n,i,t,s,o)},scheduler:this.actor.scheduler};this.workerSources[t][e][n]=new this.workerSourceTypes[e](i,this.getLayerIndex(t),this.getAvailableImages(t),this.isSpriteLoaded[t])}return this.workerSources[t][e][n]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new r),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,n){t.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(t,e,n){n(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new dt(self)),dt})),i(["./shared"],(function(t){function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!e(t[i],n[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(!e(t[i],n[i]))return!1;return!0}return t===n}var n=i;function i(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===r[e=t&&t.failIfMajorPerformanceCaveat]&&(r[e]=function(t){var e,n=function(t){var e=document.createElement("canvas"),n=Object.create(i.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}(t);if(!n)return!1;try{e=n.createShader(n.VERTEX_SHADER)}catch(t){return!1}return!(!e||n.isContextLost())&&(n.shaderSource(e,"void main() {}"),n.compileShader(e),!0===n.getShaderParameter(e,n.COMPILE_STATUS))}(e)),r[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var r={};function s(e,n,i){const r=t.window.document.createElement(e);return void 0!==n&&(r.className=n),i&&i.appendChild(r),r}function o(e,n,i){const r=t.window.document.createElementNS("http://www.w3.org/2000/svg",e);for(const t of Object.keys(n))r.setAttributeNS(null,t,n[t]);return i&&i.appendChild(r),r}i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const a=t.window.document&&t.window.document.documentElement.style,l=a&&void 0!==a.userSelect?"userSelect":"WebkitUserSelect";let h;function c(){a&&l&&(h=a[l],a[l]="none")}function u(){a&&l&&(a[l]=h)}function p(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",p,!0)}function d(){t.window.addEventListener("click",p,!0),t.window.setTimeout((()=>{t.window.removeEventListener("click",p,!0)}),0)}function f(t,e){const n=t.getBoundingClientRect();return y(t,n,e)}function m(t,e){const n=t.getBoundingClientRect(),i=[];for(let r=0;r<e.length;r++)i.push(y(t,n,e[r]));return i}function g(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button}function y(e,n,i){const r=e.offsetWidth===n.width?1:e.offsetWidth/n.width;return new t.Point((i.clientX-n.left)*r,(i.clientY-n.top)*r)}function v(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*s-r*i;return o?(t[0]=s*(o=1/o),t[1]=-i*o,t[2]=-r*o,t[3]=n*o,t):null}function _(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class T extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}hasImage(t){return!!this.getImage(t)}getImage(t){return this.images[t]}addImage(t,e){this._validate(t,e)&&(this.images[t]=e)}_validate(e,n){let i=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "stretchX" value')))),i=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "stretchY" value')))),i=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "content" value')))),i=!1),i}_validateStretch(t,e){if(!t)return!0;let n=0;for(const i of t){if(i[0]<n||i[1]<i[0]||e<i[1])return!1;n=i[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let n=!0;if(!this.isLoaded())for(const i of t)this.images[i]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,n){const i={};for(const r of e){this.images[r]||this.fire(new t.Event("styleimagemissing",{id:r}));const e=this.images[r];e?i[r]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce('Image "'.concat(r,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}n(null,i)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const n=this.patterns[e],i=this.getImage(e);if(!i)return null;if(n&&n.position.version===i.version)return n.position;if(n)n.position.version=i.version;else{const n={w:i.data.width+2,h:i.data.height+2,x:0,y:0},r=new t.ImagePosition(n,i);this.patterns[e]={bin:n,position:r}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture&&this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:i}=t.potpack(e),r=this.atlasImage;r.resize({width:n||1,height:i||1});for(const s in this.patterns){const{bin:e}=this.patterns[s],n=e.x+1,i=e.y+1,o=this.images[s].data,a=o.width,l=o.height;t.RGBAImage.copy(o,r,{x:0,y:0},{x:n,y:i},{width:a,height:l}),t.RGBAImage.copy(o,r,{x:0,y:l-1},{x:n,y:i-1},{width:a,height:1}),t.RGBAImage.copy(o,r,{x:0,y:0},{x:n,y:i+l},{width:a,height:1}),t.RGBAImage.copy(o,r,{x:a-1,y:0},{x:n-1,y:i},{width:1,height:l}),t.RGBAImage.copy(o,r,{x:0,y:0},{x:n+a,y:i},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const e of t){if(this.callbackDispatchedThisFrame[e])continue;this.callbackDispatchedThisFrame[e]=!0;const t=this.images[e];_(t)&&this.updateImage(e,t)}}}const E=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,n){return function(e){let[n,i,r]=e;const s=t.degToRad(i+90),o=t.degToRad(r);return{x:n*Math.cos(s)*Math.sin(o),y:n*Math.sin(s)*Math.sin(o),z:n*Math.cos(o),azimuthal:i,polar:r}}(e.expression.evaluate(n))}interpolate(e,n,i){return{x:t.number(e.x,n.x,i),y:t.number(e.y,n.y,i),z:t.number(e.z,n.z,i),azimuthal:t.number(e.azimuthal,n.azimuthal,i),polar:t.number(e.polar,n.polar,i)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)});class x extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(E),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.validateLight,e,n))for(const i in e){const n=e[i];t.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-11),n):this._transitionable.setValue(i,n)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}const b=new t.Properties({source:new t.DataConstantProperty(t.spec.terrain.source),exaggeration:new t.DataConstantProperty(t.spec.terrain.exaggeration)});let I=class extends t.Evented{constructor(e,n){super(),this._transitionable=new t.Transitionable(b),this.set(e),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=n}get(){return this._transitionable.serialize()}set(e){for(const n in e){const i=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),i):this._transitionable.setValue(n,i)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}};function w(e,n,i,r){const s=t.smoothstep(45,65,i),[o,a]=S(e,r),l=t.length(n);let h=1-Math.min(1,Math.exp((l-o)/(a-o)*-6));return h*=h*h,h=Math.min(1,1.00747*h),h*s*e.alpha}function S(t,e){const n=.5/Math.tan(.5*e);return[t.range[0]+n,t.range[1]+n]}const R=new t.Properties({range:new t.DataConstantProperty(t.spec.fog.range),color:new t.DataConstantProperty(t.spec.fog.color),"high-color":new t.DataConstantProperty(t.spec.fog["high-color"]),"space-color":new t.DataConstantProperty(t.spec.fog["space-color"]),"horizon-blend":new t.DataConstantProperty(t.spec.fog["horizon-blend"]),"star-intensity":new t.DataConstantProperty(t.spec.fog["star-intensity"])});class C extends t.Evented{constructor(e,n){super(),this._transitionable=new t.Transitionable(R),this.set(e),this._transitioning=this._transitionable.untransitioned(),this._transform=n}get state(){const e=this._transform,n="globe"===e.projection.name,i=t.globeToMercatorTransition(e.zoom),r=this.properties.get("range"),s=[.5,3];return{range:n?[t.number(s[0],r[0],i),t.number(s[1],r[1],i)]:r,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.validateFog,e,n)){for(const n of Object.keys(t.spec.fog))e&&void 0===e[n]&&(e[n]=t.spec.fog[n].default);for(const n in e){const i=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),i):this._transitionable.setValue(n,i)}}}getOpacity(e){if(!this._transform.projection.supportsFog)return 0;const n=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:t.smoothstep(45,65,e))*n.a}getOpacityAtLatLng(e,n){return this._transform.projection.supportsFog?function(e,n,i){const r=t.MercatorCoordinate.fromLngLat(n),s=i.elevation?i.elevation.getAtPointOrZero(r):0,o=[r.x,r.y,s];return t.transformMat4(o,o,i.mercatorFogMatrix),w(e,o,i.pitch,i._fov)}(this.state,e,n):0}getFovAdjustedRange(t){return this._transform.projection.supportsFog?S(this.state,t):[0,1]}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class A{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const i=this.workerPool.acquire(this.id);for(let t=0;t<i.length;t++){const e=new A.Actor(i[t],n,this.id);e.name="Worker ".concat(t),this.actors.push(e)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(e,n,i){t.asyncAll(this.actors,((t,i)=>{t.send(e,n,i)}),i=i||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function D(e,n,i){return n*(t.EXTENT/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}A.Actor=t.Actor;class O{constructor(t,e,n,i){this.screenBounds=t,this.cameraPoint=e,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,i)}static createFromScreenPoints(e,n){let i,r;if(e instanceof t.Point||"number"==typeof e[0]){const s=t.Point.convert(e);i=[s],r=n.isPointAboveHorizon(s)}else{const s=t.Point.convert(e[0]),o=t.Point.convert(e[1]);i=[s,o],r=t.polygonizeBounds(s,o).every((t=>n.isPointAboveHorizon(t)))}return new O(i,n.getCameraPoint(),r,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(e){return t.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],e)}bufferedCameraGeometry(e){const n=this.screenBounds[0],i=1===this.screenBounds.length?this.screenBounds[0].add(new t.Point(1,1)):this.screenBounds[1],r=t.polygonizeBounds(n,i,0,!1);return this.cameraPoint.y>i.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<i.x?r.splice(3,0,this.cameraPoint):this.cameraPoint.x>=i.x?r[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(r[3]=this.cameraPoint)),t.bufferConvexPolygon(r,e)}bufferedCameraGeometryGlobe(e){const n=this.screenBounds[0],i=1===this.screenBounds.length?this.screenBounds[0].add(new t.Point(1,1)):this.screenBounds[1],r=t.polygonizeBounds(n,i,e),s=this.cameraPoint.clone();switch(3*((s.y>n.y)+(s.y>i.y))+((s.x>n.x)+(s.x>i.x))){case 0:r[0]=s,r[4]=s.clone();break;case 1:r.splice(1,0,s);break;case 2:r[1]=s;break;case 3:r.splice(4,0,s);break;case 5:r.splice(2,0,s);break;case 6:r[3]=s;break;case 7:r.splice(3,0,s);break;case 8:r[2]=s}return r}containsTile(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=e.queryPadding/n._pixelsPerMercatorPixel+1,o=i?this._bufferedCameraMercator(s,n):this._bufferedScreenMercator(s,n);let a=e.tileID.wrap+(o.unwrapped?r:0);const l=o.polygon.map((n=>t.getTilePoint(e.tileTransform,n,a)));if(!t.polygonIntersectsBox(l,0,0,t.EXTENT,t.EXTENT))return;a=e.tileID.wrap+(this.screenGeometryMercator.unwrapped?r:0);const h=this.screenGeometryMercator.polygon.map((n=>t.getTileVec3(e.tileTransform,n,a))),c=h.map((e=>new t.Point(e[0],e[1]))),u=n.getFreeCameraOptions().position||new t.MercatorCoordinate(0,0,0),p=t.getTileVec3(e.tileTransform,u,a),d=h.map((e=>{const n=t.sub(e,e,p);return t.normalize(n,n),new t.Ray(p,n)})),f=D(e,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:c,tilespaceRays:d,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(m=t.getBounds(l),m.min.x=t.clamp(m.min.x,0,t.EXTENT),m.min.y=t.clamp(m.min.y,0,t.EXTENT),m.max.x=t.clamp(m.max.x,0,t.EXTENT),m.max.y=t.clamp(m.max.y,0,t.EXTENT),m),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:f};var m}_bufferedScreenMercator(t,e){const n=P(t);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{let i;return i="globe"===e.projection.name?this._projectAndResample(this.bufferedScreenGeometry(t),e):{polygon:this.bufferedScreenGeometry(t).map((t=>e.pointCoordinate3D(t))),unwrapped:!0},this._screenRaycastCache[n]=i,i}}_bufferedCameraMercator(t,e){const n=P(t);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{let i;return i="globe"===e.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(t),e):{polygon:this.bufferedCameraGeometry(t).map((t=>e.pointCoordinate3D(t))),unwrapped:!0},this._cameraRaycastCache[n]=i,i}}_projectAndResample(e,n){const i=function(e,n){const i=t.multiply([],n.pixelMatrix,n.globeMatrix),r=[0,-t.GLOBE_RADIUS,0,1],s=[0,t.GLOBE_RADIUS,0,1],o=[0,0,0,1];t.transformMat4$1(r,r,i),t.transformMat4$1(s,s,i),t.transformMat4$1(o,o,i);const a=new t.Point(r[0]/r[3],r[1]/r[3]),l=new t.Point(s[0]/s[3],s[1]/s[3]),h=t.polygonContainsPoint(e,a)&&r[3]<o[3],c=t.polygonContainsPoint(e,l)&&s[3]<o[3];if(!h&&!c)return null;const u=function(t,e,n){for(let i=1;i<t.length;i++){const r=M(e.pointCoordinate3D(t[i-1]).x),s=M(e.pointCoordinate3D(t[i]).x);if(n<0){if(r<s)return{idx:i,t:-r/(s-1-r)}}else if(s<r)return{idx:i,t:(1-r)/(s+1-r)}}return null}(e,n,h?-1:1);if(!u)return null;const{idx:p,t:d}=u;let f=p>1?N(e.slice(0,p),n):[],m=p<e.length?N(e.slice(p),n):[];f=f.map((e=>new t.Point(M(e.x),e.y))),m=m.map((e=>new t.Point(M(e.x),e.y)));const g=[...f];0===g.length&&g.push(m[m.length-1]);const y=t.number(g[g.length-1].y,(0===m.length?f[0]:m[0]).y,d);let v;return v=h?[new t.Point(0,y),new t.Point(0,0),new t.Point(1,0),new t.Point(1,y)]:[new t.Point(1,y),new t.Point(1,1),new t.Point(0,1),new t.Point(0,y)],g.push(...v),0===m.length?g.push(f[0]):g.push(...m),{polygon:g.map((e=>new t.MercatorCoordinate(e.x,e.y))),unwrapped:!1}}(e,n);if(i)return i;const r=function(e,n){let i=!1,r=-1/0,s=0;for(let t=0;t<e.length-1;t++)e[t].x>r&&(r=e[t].x,s=t);for(let t=0;t<e.length-1;t++){const n=(s+t)%(e.length-1),r=e[n],o=e[n+1];Math.abs(r.x-o.x)>.5&&(r.x<o.x?(r.x+=1,0===n&&(e[e.length-1].x+=1)):(o.x+=1,n+1===e.length-1&&(e[0].x+=1)),i=!0)}const o=t.mercatorXfromLng(n.center.lng);return i&&o<Math.abs(o-1)&&e.forEach((t=>{t.x-=1})),{polygon:e,unwrapped:i}}(N(e,n).map((e=>new t.Point(M(e.x),e.y))),n);return{polygon:r.polygon.map((e=>new t.MercatorCoordinate(e.x,e.y))),unwrapped:r.unwrapped}}}function N(e,n){return t.resample(e,(t=>{const e=n.pointCoordinate3D(t);t.x=e.x,t.y=e.y}),1/256)}function M(t){return t<0?1+t%1:t%1}function P(t){return 100*t|0}function F(e,n,i,r,s){const o=function(i,r){if(i)return s(i);if(r){e.url&&r.tiles&&e.tiles&&delete e.tiles;const i=t.pick(t.extend(r,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);r.vector_layers&&(i.vectorLayers=r.vector_layers,i.vectorLayerIds=i.vectorLayers.map((t=>t.id))),i.tiles=n.canonicalizeTileset(i,e.url),s(null,i)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url,null,i,r),t.ResourceType.Source),o):t.exported.frame((()=>o(null,e)))}class L{constructor(e,n,i){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=i||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),i=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),s=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),o=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=i&&e.x<s&&e.y>=r&&e.y<o}}class k{constructor(t,e,n){this.context=t;const i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||e.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const U={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class B{constructor(t,e,n,i){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;const r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||e.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let n=0;n<this.attributes.length;n++){const i=e.attributes[this.attributes[n].name];void 0!==i&&t.enableVertexAttribArray(i)}}setVertexAttribPointers(t,e,n){for(let i=0;i<this.attributes.length;i++){const r=this.attributes[i],s=e.attributes[r.name];void 0!==s&&t.vertexAttribPointer(s,r.components,t[U[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class z{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class G extends z{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class H extends z{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class j extends z{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class V extends z{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class W extends z{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Z extends z{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Y extends z{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class q extends z{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class X extends z{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class K extends z{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Q extends z{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class J extends z{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class $ extends z{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class tt extends z{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class et extends z{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class nt extends z{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class it extends z{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class rt extends z{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class st extends z{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}let ot,at=class extends z{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}};class lt extends z{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ht extends z{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class ct extends z{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class ut extends z{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class pt extends z{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class dt extends z{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ft extends z{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class mt extends z{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class gt extends z{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class yt extends z{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class vt extends z{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class _t extends z{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class Tt extends _t{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Et extends _t{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,this.attachment(),e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class xt extends Et{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class bt{constructor(t,e,n,i){this.context=t,this.width=e,this.height=n;const r=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new Tt(t,r),i&&(this.depthAttachment=new Et(t,r))}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class It{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.gl=t,this.isWebGL2=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),e){const e=t;this.extVertexArrayObject={createVertexArrayOES:e.createVertexArray.bind(t),deleteVertexArrayOES:e.deleteVertexArray.bind(t),bindVertexArrayOES:e.bindVertexArray.bind(t)}}this.clearColor=new G(this),this.clearDepth=new H(this),this.clearStencil=new j(this),this.colorMask=new V(this),this.depthMask=new W(this),this.stencilMask=new Z(this),this.stencilFunc=new Y(this),this.stencilOp=new q(this),this.stencilTest=new X(this),this.depthRange=new K(this),this.depthTest=new Q(this),this.depthFunc=new J(this),this.blend=new $(this),this.blendFunc=new tt(this),this.blendColor=new et(this),this.blendEquation=new nt(this),this.cullFace=new it(this),this.cullFaceSide=new rt(this),this.frontFace=new st(this),this.program=new at(this),this.activeTexture=new lt(this),this.viewport=new ht(this),this.bindFramebuffer=new ct(this),this.bindRenderbuffer=new ut(this),this.bindTexture=new pt(this),this.bindVertexBuffer=new dt(this),this.bindElementBuffer=new ft(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new mt(this),this.pixelStoreUnpack=new gt(this),this.pixelStoreUnpackPremultiplyAlpha=new yt(this),this.pixelStoreUnpackFlipY=new vt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=t.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=t.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=t.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),e||(this.extTextureHalfFloat=t.getExtension("OES_texture_half_float")),(e||this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=e||t.getExtension("OES_standard_derivatives"),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new k(this,t,e)}createVertexBuffer(t,e,n){return new B(this,t,e,n)}createRenderbuffer(t,e,n){const i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),r}createFramebuffer(t,e,n){return new bt(this,t,e,n)}clear(t){let{color:e,depth:n,stencil:i}=t;const r=this.gl;let s=0;e&&(s|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(s|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==i&&(s|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),r.clear(s)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(n){e(n.blendFunction,t.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class wt extends t.Evented{constructor(e,n,i,r){if(super(),this.id=e,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(n,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r),this._tileWorkers={},this._deduped=new t.DedupedRequest}load(e){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"}));const n=Array.isArray(this.map._language)?this.map._language.join():this.map._language,i=this.map._worldview;this._tileJSONRequest=F(this._options,this.map._requestManager,n,i,((r,s)=>{this._tileJSONRequest=null,this._loaded=!0,r?(n&&console.warn("Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ".concat(n)),i&&2!==i.length&&console.warn("Requested worldview strings must be a valid ISO alpha-2 code. Found: ".concat(i)),this.fire(new t.ErrorEvent(r))):s&&(t.extend(this,s),s.bounds&&(this.tileBounds=new L(s.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(s.tiles,this.map._requestManager._customAccessToken),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))),e&&e(r)}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(t){return this._options.tiles=t,this.reload(),this}setUrl(t){return this.url=t,this._options.url=t,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return t.extend({},this._options)}loadTile(e,n){const i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(i,t.ResourceType.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile};if(r.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state)"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",r,s.bind(this));else if(e.actor=this._tileWorkers[i]=this._tileWorkers[i]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",r,s.bind(this),void 0,!0);else{const n=t.loadVectorTile.call({deduped:this._deduped},r,((t,n)=>{t||!n?s.call(this,t):(r.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},e.actor&&e.actor.send("loadTile",r,s.bind(this),void 0,!0))}),!0);e.request={cancel:n}}function s(i,r){return delete e.request,e.aborted?n(null):i&&404!==i.status?n(i):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id})}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class St extends t.Evented{constructor(e,n,i,r){super(),this.id=e,this.dispatcher=i,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}load(e){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=F(this._options,this.map._requestManager,null,null,((n,i)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new t.ErrorEvent(n)):i&&(t.extend(this,i),i.bounds&&(this.tileBounds=new L(i.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(i.tiles),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))),e&&e(n)}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(t){return this._options.tiles=t,this.reload(),this}setUrl(t){return this.url=t,this._options.url=t,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const i=t.exported.devicePixelRatio>=2,r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),i,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),((i,r,s,o)=>(delete e.request,e.aborted?(e.state="unloaded",n(null)):i?(e.state="errored",n(i)):r?(this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:s,expires:o}),e.setTexture(r,this.map.painter),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),void n(null)):n(null))))}static loadTileData(t,e,n){t.setTexture(e,n)}static unloadTileData(t,e){t.texture&&e.saveTileTexture(t.texture)}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Rt(e,n,i,r,s,o,a,l){const h=[e,i,s,n,r,o,1,1,1],c=[a,l,1],u=t.adjoint([],h),[p,d,f]=t.transformMat3(c,c,t.transpose(u,u));return t.multiply$1(h,[p,0,0,0,d,0,0,0,f],h)}class Ct extends t.Evented{constructor(t,e,n,i){super(),this.id=t,this.dispatcher=n,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=e,this._dirty=!1}load(e,n){this._loaded=n||!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((n,i)=>{if(this._imageRequest=null,this._loaded=!0,n)this.fire(new t.ErrorEvent(n));else if(i){const{HTMLImageElement:n}=t.window;this.image=i instanceof n?t.exported.getImageData(i):i,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,e&&(this.coordinates=e),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this._imageRequest&&t.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=t.url,this.load(t.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(e){this.coordinates=e,this._boundsArray=void 0;const n=e.map(t.MercatorCoordinate.fromLngLat);return this.tileID=function(e){let n=1/0,i=1/0,r=-1/0,s=-1/0;for(const t of e)n=Math.min(n,t.x),i=Math.min(i,t.y),r=Math.max(r,t.x),s=Math.max(s,t.y);const o=Math.max(r-n,s-i),a=Math.max(0,Math.floor(-Math.log(o)/Math.LN2)),l=Math.pow(2,a);return new t.CanonicalTileID(a,Math.floor((n+r)/2*l),Math.floor((i+s)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(e){for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}if(this._boundsArray)return;const n=t.tileTransform(this.tileID,this.map.transform.projection),[i,r,s,o]=this.coordinates.map((e=>{const i=n.projection.project(e[0],e[1]);return t.getTilePoint(n,i)._round()}));this.perspectiveTransform=function(e,n,i,r,s,o,a,l,h,c){const u=Rt(0,0,e,0,0,n,e,n),p=Rt(i,r,s,o,a,l,h,c);return t.multiply$1(p,t.adjoint(u,u),p),[p[6]/p[8]*e/t.EXTENT,p[7]/p[8]*n/t.EXTENT]}(this.width,this.height,i.x,i.y,r.x,r.y,o.x,o.y,s.x,s.y);const a=this._boundsArray=new t.StructArrayLayout4i8;a.emplaceBack(i.x,i.y,0,0),a.emplaceBack(r.x,r.y,t.EXTENT,0),a.emplaceBack(o.x,o.y,0,t.EXTENT),a.emplaceBack(s.x,s.y,t.EXTENT,t.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=e.createVertexBuffer(a,t.boundsAttributes.members),this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(e)}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const At={vector:wt,raster:St,"raster-dem":class extends St{constructor(e,n,i,r){super(e,n,i,r),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(e,n){const i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function r(t,i){t&&(e.state="errored",n(t)),i&&(e.dem=i,e.dem.onDeserialize(),e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),function(i,s,o,a){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(s){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:o,expires:a});const n=t.window.ImageBitmap&&s instanceof t.window.ImageBitmap&&(null==ot&&(ot=t.window.OffscreenCanvas&&new t.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof t.window.createImageBitmap),ot),i=1-(s.width-t.prevPowerOfTwo(s.width))/2;i<1||e.neighboringTiles||(e.neighboringTiles=this._getNeighboringTiles(e.tileID));const l=n?s:t.exported.getImageData(s,i),h={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:i};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",h,r.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(e){const n=e.canonical,i=Math.pow(2,n.z),r=(n.x-1+i)%i,s=0===n.x?e.wrap-1:e.wrap,o=(n.x+1+i)%i,a=n.x+1===i?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,s,n.z,r,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,n.z,o,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,s,n.z,r,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,n.z,o,n.y-1).key]={backfilled:!1}),n.y+1<i&&(l[new t.OverscaledTileID(e.overscaledZ,s,n.z,r,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,n.z,o,n.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded"}},geojson:class extends t.Evented{constructor(e,n,i,r){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(r),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const s=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*s,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*s,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*s,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(t){this.map=t,this.setData(this._data)}setData(t){return this._data=t,this._updateWorkerData(),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,n,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},i),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new t.Event("dataloading",{dataType:"source"})),this._loaded=!1;const e=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(e.request=this.map._requestManager.transformRequest(t.exported.resolveURL(n),t.ResourceType.Source),e.request.collectResourceTiming=this._collectResourceTiming):e.data=JSON.stringify(n),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),e,((e,n)=>{if(this._loaded=!0,this._pendingLoad=null,e)this.fire(new t.ErrorEvent(e));else{const e={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(e.resourceTiming=n.resourceTiming[this.id]),this.fire(new t.Event("data",e)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(e,n){const i=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(i,{type:this.type,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((t,r)=>(delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(r,this.map.painter,"reloadTile"===i),n(null)))),void 0,"loadTile"===i)}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Ct{constructor(t,e,n,i){super(t,e,n,i),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const n of e.urls)this.urls.push(this.map._requestManager.transformRequest(n,t.ResourceType.Source).url);t.getVideo(this.urls,((e,n)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(this.video=n,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(n.start(0)," and ").concat(n.end(0),"-second mark.")))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(e)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ct,canvas:class extends Ct{constructor(e,n,i,r){super(e,n,i,r),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}},custom:class extends t.Evented{constructor(e,n,i,r){super(),this.id=e,this.type="custom",this._dataType="raster",this._dispatcher=i,this._implementation=n,this.setEventedParent(r),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new t.ErrorEvent(new Error("Missing implementation for ".concat(this.id," custom source")))),this._implementation.loadTile||this.fire(new t.ErrorEvent(new Error("Missing loadTile implementation for ".concat(this.id," custom source")))),this._implementation.bounds&&(this.tileBounds=new L(this._implementation.bounds,this.minzoom,this.maxzoom)),n.update=this._update.bind(this),n.clearTiles=this._clearTiles.bind(this),n.coveringTiles=this._coveringTiles.bind(this),t.extend(this,t.pick(n,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return t.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(e){this._map=e,this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(e),this.load()}onRemove(t){this._implementation.onRemove&&this._implementation.onRemove(t)}hasTile(t){if(this._implementation.hasTile){const{x:e,y:n,z:i}=t.canonical;return this._implementation.hasTile({x:e,y:n,z:i})}return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const{x:i,y:r,z:s}=e.tileID.canonical,o=new t.window.AbortController;e.request=Promise.resolve(this._implementation.loadTile({x:i,y:r,z:s},{signal:o.signal})).then(function(i){return delete e.request,e.aborted?(e.state="unloaded",n(null)):void 0===i?(e.state="errored",n(null)):null===i?(this.loadTileData(e,{width:this.tileSize,height:this.tileSize,data:null}),e.state="loaded",n(null)):function(e){return e instanceof t.window.ImageData||e instanceof t.window.HTMLCanvasElement||e instanceof t.window.ImageBitmap||e instanceof t.window.HTMLImageElement}(i)?(this.loadTileData(e,i),e.state="loaded",void n(null)):(e.state="errored",n(new Error("Can't infer data type for ".concat(this.id,", only raster data supported at the moment"))))}.bind(this)).catch((t=>{20!==t.code&&(e.state="errored",n(t))})),e.request.cancel=()=>o.abort()}loadTileData(t,e){St.loadTileData(t,e,this._map.painter)}unloadTileData(t){St.unloadTileData(t,this._map.painter)}unloadTile(t,e){if(this.unloadTileData(t),this._implementation.unloadTile){const{x:e,y:n,z:i}=t.tileID.canonical;this._implementation.unloadTile({x:e,y:n,z:i})}e()}abortTile(t,e){t.request&&t.request.cancel&&(t.request.cancel(),delete t.request),e()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((t=>({x:t.canonical.x,y:t.canonical.y,z:t.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Dt=function(e,n,i,r){const s=new At[n.type](e,n,i,r);if(s.id!==e)throw new Error("Expected Source id to be ".concat(e," instead of ").concat(s.id));return t.bindAll(["load","abort","unload","serialize","prepare"],s),s};function Ot(e,n){const i=t.identity([]);return t.scale(i,i,[.5*e.width,.5*-e.height,1]),t.translate(i,i,[1,-1,0]),t.multiply(i,i,e.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(i)}function Nt(t,e,n,i,r,s,o){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=t.tilesIn(i,o,a);l.sort(Pt);const h=[];for(const u of l)h.push({wrappedTileID:u.tile.tileID.wrapped().key,queryResults:u.tile.queryRenderedFeatures(e,n,t._state,u,r,s,Ot(t.transform,u.tile.tileID),a)});const c=function(t){const e={},n={};for(const i of t){const t=i.queryResults,r=i.wrappedTileID,s=n[r]=n[r]||{};for(const n in t){const i=t[n],r=s[n]=s[n]||{},o=e[n]=e[n]||[];for(const t of i)r[t.featureIndex]||(r[t.featureIndex]=!0,o.push(t))}}return e}(h);for(const u in c)c[u].forEach((e=>{const n=e.feature,i=n.layer;i&&"background"!==i.type&&"sky"!==i.type&&(n.source=i.source,i["source-layer"]&&(n.sourceLayer=i["source-layer"]),n.state=void 0!==n.id?t.getFeatureState(i["source-layer"],n.id):{})}));return c}function Mt(t,e){const n=t.getRenderableIds().map((e=>t.getTileByID(e))),i=[],r={};for(let s=0;s<n.length;s++){const t=n[s],o=t.tileID.canonical.key;r[o]||(r[o]=!0,t.querySourceFeatures(i,e))}return i}function Pt(t,e){const n=t.tileID,i=e.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}function Ft(){return null!=ps.workerClass?new ps.workerClass:new t.window.Worker(ps.workerUrl)}const Lt="mapboxgl_preloaded_worker_pool";class kt{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<kt.workerCount;)this.workers.push(new Ft);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Lt]}numActive(){return Object.keys(this.active).length}}let Ut;function Bt(){return Ut||(Ut=new kt),Ut}function zt(e,n){const i={};for(const t in e)"ref"!==t&&(i[t]=e[t]);return t.refProperties.forEach((t=>{t in n&&(i[t]=n[t])})),i}function Gt(t){t=t.slice();const e=Object.create(null);for(let n=0;n<t.length;n++)e[t[n].id]=t[n];for(let n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=zt(t[n],e[t[n].ref]));return t}kt.workerCount=2;const Ht={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function jt(t,e,n){n.push({command:Ht.addSource,args:[t,e[t]]})}function Vt(t,e,n){e.push({command:Ht.removeSource,args:[t]}),n[t]=!0}function Wt(t,e,n,i){Vt(t,n,i),jt(t,e,n)}function Zt(t,n,i){let r;for(r in t[i])if(t[i].hasOwnProperty(r)&&"data"!==r&&!e(t[i][r],n[i][r]))return!1;for(r in n[i])if(n[i].hasOwnProperty(r)&&"data"!==r&&!e(t[i][r],n[i][r]))return!1;return!0}function Yt(t,n,i,r,s,o){let a;for(a in n=n||{},t=t||{})t.hasOwnProperty(a)&&(e(t[a],n[a])||i.push({command:o,args:[r,a,n[a],s]}));for(a in n)n.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(e(t[a],n[a])||i.push({command:o,args:[r,a,n[a],s]}))}function qt(t){return t.id}function Xt(t,e){return t[e.id]=e,t}class Kt{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let n=1,i=this._distances[n];const r=e*this.paddedLength+this.padding;for(;i<r&&n<this._distances.length;)i=this._distances[++n];const s=n-1,o=this._distances[s],a=i-o,l=a>0?(r-o)/a:0;return this.points[s].mult(1-l).add(this.points[n].mult(l))}}class Qt{constructor(t,e,n){const i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(let s=0;s<this.xCellCount*this.yCellCount;s++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}insertCircle(t,e,n,i){this._forEachCell(e-i,n-i,e+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(i)}_insertBoxCell(t,e,n,i,r,s){this.boxCells[r].push(s)}_insertCircleCell(t,e,n,i,r,s){this.circleCells[r].push(s)}_query(t,e,n,i,r,s){if(n<0||t>this.width||i<0||e>this.height)return!r&&[];const o=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=i){if(r)return!0;for(let t=0;t<this.boxKeys.length;t++)o.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],n=this.circles[3*t+1],i=this.circles[3*t+2];o.push({key:this.circleKeys[t],x1:e-i,y1:n-i,x2:e+i,y2:n+i})}return s?o.filter(s):o}return this._forEachCell(t,e,n,i,this._queryCell,o,{hitTest:r,seenUids:{box:{},circle:{}}},s),r?o.length>0:o}_queryCircle(t,e,n,i,r){const s=t-n,o=t+n,a=e-n,l=e+n;if(o<0||s>this.width||l<0||a>this.height)return!i&&[];const h=[];return this._forEachCell(s,a,o,l,this._queryCellCircle,h,{hitTest:i,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},r),i?h.length>0:h}query(t,e,n,i,r){return this._query(t,e,n,i,!1,r)}hitTest(t,e,n,i,r){return this._query(t,e,n,i,!0,r)}hitTestCircle(t,e,n,i){return this._queryCircle(t,e,n,!0,i)}_queryCell(t,e,n,i,r,s,o,a){const l=o.seenUids,h=this.boxCells[r];if(null!==h){const r=this.bboxes;for(const c of h)if(!l.box[c]){l.box[c]=!0;const h=4*c;if(t<=r[h+2]&&e<=r[h+3]&&n>=r[h+0]&&i>=r[h+1]&&(!a||a(this.boxKeys[c]))){if(o.hitTest)return s.push(!0),!0;s.push({key:this.boxKeys[c],x1:r[h],y1:r[h+1],x2:r[h+2],y2:r[h+3]})}}}const c=this.circleCells[r];if(null!==c){const r=this.circles;for(const h of c)if(!l.circle[h]){l.circle[h]=!0;const c=3*h;if(this._circleAndRectCollide(r[c],r[c+1],r[c+2],t,e,n,i)&&(!a||a(this.circleKeys[h]))){if(o.hitTest)return s.push(!0),!0;{const t=r[c],e=r[c+1],n=r[c+2];s.push({key:this.circleKeys[h],x1:t-n,y1:e-n,x2:t+n,y2:e+n})}}}}}_queryCellCircle(t,e,n,i,r,s,o,a){const l=o.circle,h=o.seenUids,c=this.boxCells[r];if(null!==c){const t=this.bboxes;for(const e of c)if(!h.box[e]){h.box[e]=!0;const n=4*e;if(this._circleAndRectCollide(l.x,l.y,l.radius,t[n+0],t[n+1],t[n+2],t[n+3])&&(!a||a(this.boxKeys[e])))return s.push(!0),!0}}const u=this.circleCells[r];if(null!==u){const t=this.circles;for(const e of u)if(!h.circle[e]){h.circle[e]=!0;const n=3*e;if(this._circlesCollide(t[n],t[n+1],t[n+2],l.x,l.y,l.radius)&&(!a||a(this.circleKeys[e])))return s.push(!0),!0}}}_forEachCell(t,e,n,i,r,s,o,a){const l=this._convertToXCellCoord(t),h=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),u=this._convertToYCellCoord(i);for(let p=l;p<=c;p++)for(let l=h;l<=u;l++)if(r.call(this,t,e,n,i,this.xCellCount*l+p,s,o,a))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,n,i,r,s){const o=i-t,a=r-e,l=n+s;return l*l>o*o+a*a}_circleAndRectCollide(t,e,n,i,r,s,o){const a=(s-i)/2,l=Math.abs(t-(i+a));if(l>a+n)return!1;const h=(o-r)/2,c=Math.abs(e-(r+h));if(c>h+n)return!1;if(l<=a||c<=h)return!0;const u=l-a,p=c-h;return u*u+p*p<=n*n}}const Jt={unknown:0,flipRequired:1,flipNotRequired:2},$t=Math.tan(85*Math.PI/180);function te(e,n,i,r,s,o,a){const l=t.create();if(i)if("globe"===o.name){const e=t.calculateGlobeLabelMatrix(s,n);t.multiply(l,l,e)}else{const e=v([],a);l[0]=e[0],l[1]=e[1],l[4]=e[2],l[5]=e[3],r||t.rotateZ(l,l,s.angle)}else t.multiply(l,s.labelPlaneMatrix,e);return l}function ee(t,e,n,i,r,s,o){const a=te(t,e,n,i,r,s,o);return"globe"===s.name&&n||(a[2]=a[6]=a[10]=a[14]=0),a}function ne(e,n,i,r,s,o,a){if(i){if("globe"===o.name){const l=te(e,n,i,r,s,o,a);return t.invert(l,l),t.multiply(l,e,l),l}{const n=t.clone(e),i=t.identity([]);return i[0]=a[0],i[1]=a[1],i[4]=a[2],i[5]=a[3],t.multiply(n,n,i),r||t.rotateZ(n,n,-s.angle),n}}return s.glCoordMatrix}function ie(e,n,i,r){const s=[e,n,i,1];i?t.transformMat4$1(s,s,r):fe(s,s,r);const o=s[3];return s[0]/=o,s[1]/=o,s[2]/=o,s}function re(t,e){return Math.min(.5+t/e*.5,1.5)}function se(t,e){const n=t[0]/t[3],i=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&i>=-e[1]&&i<=e[1]}function oe(e,n,i,r,s,o,a,l,h,c){const u=i.transform,p=r?e.textSizeData:e.iconSizeData,d=t.evaluateSizeForZoom(p,i.transform.zoom),f="globe"===u.projection.name,m=[256/i.width*2+1,256/i.height*2+1],g=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;g.clear();let y=null;f&&(y=r?e.text.globeExtVertexArray:e.icon.globeExtVertexArray);const v=e.lineVertexArray,_=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,T=i.transform.width/i.transform.height;let E,x=!1;for(let b=0;b<_.length;b++){const r=_.get(b),{numGlyphs:f,writingMode:I}=r;if(I!==t.WritingMode.vertical||x||E===t.WritingMode.horizontal||(x=!0),E=I,(r.hidden||I===t.WritingMode.vertical)&&!x){de(f,g);continue}x=!1;const w=new t.Point(r.tileAnchorX,r.tileAnchorY);let{x:S,y:R,z:C}=u.projection.projectTilePoint(w.x,w.y,c.canonical);if(h){const[t,e,n]=h(w);S+=t,R+=e,C+=n}const A=[S,R,C,1];if(t.transformMat4$1(A,A,n),!se(A,m)){de(f,g);continue}const D=re(i.transform.cameraToCenterDistance,A[3]),O=t.evaluateSizeForFeature(p,d,r),N=a?O/D:O*D,M=ie(S,R,C,s);if(M[3]<=0){de(f,g);continue}let P={};const F=a?null:h,L=he(r,N,!1,l,n,s,o,e.glyphOffsetArray,v,g,y,M,w,P,T,F,u.projection,c,a);x=L.useVertical,F&&L.needsFlipping&&(P={}),(L.notEnoughRoom||x||L.needsFlipping&&he(r,N,!0,l,n,s,o,e.glyphOffsetArray,v,g,y,M,w,P,T,F,u.projection,c,a).notEnoughRoom)&&de(f,g)}r?(e.text.dynamicLayoutVertexBuffer.updateData(g),y&&e.text.globeExtVertexBuffer.updateData(y)):(e.icon.dynamicLayoutVertexBuffer.updateData(g),y&&e.icon.globeExtVertexBuffer.updateData(y))}function ae(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){const{lineStartIndex:g,glyphStartIndex:y,segment:v}=a,_=y+a.numGlyphs,T=g+a.lineLength,E=e.getoffsetX(y),x=e.getoffsetX(_-1),b=pe(t*E,n,i,r,s,o,v,g,T,l,h,c,u,p,!0,d,f,m);if(!b)return null;const I=pe(t*x,n,i,r,s,o,v,g,T,l,h,c,u,p,!0,d,f,m);return I?{first:b,last:I}:null}function le(e,n,i,r){return e===t.WritingMode.horizontal&&Math.abs(r)>Math.abs(i)?{useVertical:!0}:e===t.WritingMode.vertical?r>0?{needsFlipping:!0}:null:n!==Jt.unknown&&function(t,e){return 0===t||Math.abs(e/t)>$t}(i,r)?n===Jt.flipRequired?{needsFlipping:!0}:null:i<0?{needsFlipping:!0}:null}function he(e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_){const T=n/24,E=e.lineOffsetX*T,x=e.lineOffsetY*T,{lineStartIndex:b,glyphStartIndex:I,numGlyphs:w,segment:S,writingMode:R,flipState:C}=e,A=b+e.lineLength,D=e=>{if(u){const[n,i,r]=e.up,s=c.length;t.updateGlobeVertexNormal(u,s+0,n,i,r),t.updateGlobeVertexNormal(u,s+1,n,i,r),t.updateGlobeVertexNormal(u,s+2,n,i,r),t.updateGlobeVertexNormal(u,s+3,n,i,r)}const[n,i,r]=e.point;t.addDynamicAttributes(c,n,i,r,e.angle)};if(w>1){const t=ae(T,l,E,x,i,p,d,e,h,o,f,g,!1,y,v,_);if(!t)return{notEnoughRoom:!0};if(r&&!i){let[n,i,r]=t.first.point,[s,o,l]=t.last.point;[n,i]=ie(n,i,r,a),[s,o]=ie(s,o,l,a);const h=le(R,C,(s-n)*m,o-i);if(e.flipState=h&&h.needsFlipping?Jt.flipRequired:Jt.flipNotRequired,h)return h}D(t.first);for(let e=I+1;e<I+w-1;e++){const t=pe(T*l.getoffsetX(e),E,x,i,p,d,S,b,A,h,o,f,g,!1,!1,y,v,_);if(!t)return c.length-=4*(e-I),{notEnoughRoom:!0};D(t)}D(t.last)}else{if(r&&!i){const n=ie(d.x,d.y,0,s),i=b+S+1,r=new t.Point(h.getx(i),h.gety(i)),o=ie(r.x,r.y,0,s),a=o[3]>0?o:ue(d,r,n,1,s,void 0,y,v.canonical),l=le(R,C,(a[0]-n[0])*m,a[1]-n[1]);if(e.flipState=l&&l.needsFlipping?Jt.flipRequired:Jt.flipNotRequired,l)return l}const n=pe(T*l.getoffsetX(I),E,x,i,p,d,S,b,A,h,o,f,g,!1,!1,y,v,_);if(!n)return{notEnoughRoom:!0};D(n)}return{}}function ce(t,e,n,i,r){const{x:s,y:o,z:a}=i.projectTilePoint(t.x,t.y,e);if(!r)return ie(s,o,a,n);const[l,h,c]=r(t);return ie(s+l,o+h,a+c,n)}function ue(e,n,i,r,s,o,a,l){const h=ce(e.sub(n)._unit()._add(e),l,s,a,o);return t.sub(h,i,h),t.normalize(h,h),t.scaleAndAdd(h,i,h,r)}function pe(e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v){const _=r?e-n:e+n;let T=_>0?1:-1,E=0;r&&(T*=-1,E=Math.PI),T<0&&(E+=Math.PI);let x=l+a+(T>0?0:1)|0,b=s,I=s,w=0,S=0;const R=Math.abs(_),C=[],A=[];let D=o,O=D;const N=()=>ue(O,D,I,R-w+1,u,d,g,y.canonical);for(;w+S<=R;){if(x+=T,x<l||x>=h)return null;if(I=b,O=D,C.push(I),f&&A.push(O),D=new t.Point(c.getx(x),c.gety(x)),b=p[x],!b){const t=ce(D,y.canonical,u,g,d);b=t[3]>0?p[x]=t:N()}w+=S,S=t.distance(I,b)}m&&d&&(p[x]&&(b=N(),S=t.distance(I,b)),p[x]=b);const M=(R-w)/S,P=D.sub(O)._mult(M)._add(O),F=t.sub([],b,I),L=t.scaleAndAdd([],I,F,M);let k=[0,0,1],U=F[0],B=F[1];if(v&&(k=g.upVector(y.canonical,P.x,P.y),0!==k[0]||0!==k[1]||1!==k[2])){const e=[k[2],0,-k[0]],n=t.cross([],k,e);t.normalize(e,e),t.normalize(n,n),U=t.dot(F,e),B=t.dot(F,n)}if(i){const e=t.cross([],k,F);t.normalize(e,e),t.scaleAndAdd(L,L,e,i*T)}const z=E+Math.atan2(B,U);return C.push(L),f&&A.push(P),{point:L,angle:z,path:C,tilePath:A,up:k}}function de(t,e){const n=e.length,i=n+4*t;e.resize(i),e.float32.fill(-1/0,4*n,4*i)}function fe(t,e,n){const i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t[3]=n[3]*i+n[7]*r+n[15],t}const me=100;class ge{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Qt(t.width+200,t.height+200,25),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Qt(t.width+200,t.height+200,25);this.transform=t,this.grid=n,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+me,this.screenBottomBoundary=t.height+me,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.fogState=e}placeCollisionBox(t,e,n,i,r,s,o,a){let l=n.projectedAnchorX,h=n.projectedAnchorY,c=n.projectedAnchorZ;const u=n.elevation,p=n.tileID,d=t.getProjection();if(u&&p){const[t,e,i]=d.upVector(p.canonical,n.tileAnchorX,n.tileAnchorY),r=d.upVectorScale(p.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=t*u*r,h+=e*u*r,c+=i*u*r}const f=this.projectAndGetPerspectiveRatio(o,l,h,c,n.tileID,"globe"===d.name||!!u||this.transform.pitch>0,d),m=s*f.perspectiveRatio,g=(n.x1*e+i.x-n.padding)*m+f.point.x,y=(n.y1*e+i.y-n.padding)*m+f.point.y,v=(n.x2*e+i.x+n.padding)*m+f.point.x,_=(n.y2*e+i.y+n.padding)*m+f.point.y,T=f.perspectiveRatio<=.55||f.occluded;return!this.isInsideGrid(g,y,v,_)||!r&&this.grid.hitTest(g,y,v,_,a)||T?{box:[],offscreen:!1,occluded:f.occluded}:{box:[g,y,v,_],offscreen:this.isOffscreen(g,y,v,_),occluded:!1}}placeCollisionCircles(e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){const g=[],y=this.transform.elevation,v=e.getProjection(),_=y?y.getAtTileOffsetFunc(m,this.transform.center.lat,this.transform.worldSize,v):null,T=new t.Point(i.tileAnchorX,i.tileAnchorY);let{x:E,y:x,z:b}=v.projectTilePoint(T.x,T.y,m.canonical);if(_){const[t,e,n]=_(T);E+=t,x+=e,b+=n}const I="globe"===v.name,w=this.projectAndGetPerspectiveRatio(a,E,x,b,m,I||!!y||this.transform.pitch>0,v),{perspectiveRatio:S}=w,R=(u?o/S:o*S)/t.ONE_EM,C=ie(E,x,b,l),A=w.signedDistanceFromCamera>0?ae(R,s,i.lineOffsetX*R,i.lineOffsetY*R,!1,C,T,i,r,l,{},y&&!u?_:null,u&&!!y,v,m,u):null;let D=!1,O=!1,N=!0;if(A&&!w.occluded){const e=.5*d*S+f,i=new t.Point(-100,-100),r=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),s=new Kt,{first:o,last:a}=A,l=o.path.length;let u=[];for(let t=l-1;t>=1;t--)u.push(o.path[t]);for(let t=1;t<a.path.length;t++)u.push(a.path[t]);const m=2.5*e;h&&(u=u.map(((t,e)=>{let[n,i,r]=t;return _&&!I&&(r=_(e<l-1?o.tilePath[l-1-e]:a.tilePath[e-l+2])[2]),ie(n,i,r,h)})),u.some((t=>t[3]<=0))&&(u=[]));let y=[];if(u.length>0){let e=1/0,n=-1/0,s=1/0,o=-1/0;for(const t of u)e=Math.min(e,t[0]),s=Math.min(s,t[1]),n=Math.max(n,t[0]),o=Math.max(o,t[1]);n>=i.x&&e<=r.x&&o>=i.y&&s<=r.y&&(y=[u.map((e=>new t.Point(e[0],e[1])))],(e<i.x||n>r.x||s<i.y||o>r.y)&&(y=t.clipLine(y,i.x,i.y,r.x,r.y)))}for(const t of y){s.reset(t,.25*e);let i=0;i=s.length<=.5*e?1:Math.ceil(s.paddedLength/m)+1;for(let t=0;t<i;t++){const r=t/Math.max(i-1,1),o=s.lerp(r),a=o.x+me,l=o.y+me;g.push(a,l,e,0);const h=a-e,u=l-e,d=a+e,f=l+e;if(N=N&&this.isOffscreen(h,u,d,f),O=O||this.isInsideGrid(h,u,d,f),!n&&this.grid.hitTestCircle(a,l,e,p)&&(D=!0,!c))return{circles:[],offscreen:!1,collisionDetected:D,occluded:!1}}}}return{circles:!c&&D||!O?[]:g,offscreen:N,collisionDetected:D,occluded:w.occluded}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let i=1/0,r=1/0,s=-1/0,o=-1/0;for(const c of e){const e=new t.Point(c.x+me,c.y+me);i=Math.min(i,e.x),r=Math.min(r,e.y),s=Math.max(s,e.x),o=Math.max(o,e.y),n.push(e)}const a=this.grid.query(i,r,s,o).concat(this.ignoredGrid.query(i,r,s,o)),l={},h={};for(const c of a){const e=c.key;if(void 0===l[e.bucketInstanceId]&&(l[e.bucketInstanceId]={}),l[e.bucketInstanceId][e.featureIndex])continue;const i=[new t.Point(c.x1,c.y1),new t.Point(c.x2,c.y1),new t.Point(c.x2,c.y2),new t.Point(c.x1,c.y2)];t.polygonIntersectsPolygon(n,i)&&(l[e.bucketInstanceId][e.featureIndex]=!0,void 0===h[e.bucketInstanceId]&&(h[e.bucketInstanceId]=[]),h[e.bucketInstanceId].push(e.featureIndex))}return h}insertCollisionBox(t,e,n,i,r){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:i,collisionGroupID:r},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,n,i,r){const s=e?this.ignoredGrid:this.grid,o={bucketInstanceId:n,featureIndex:i,collisionGroupID:r};for(let a=0;a<t.length;a+=4)s.insertCircle(o,t[a],t[a+1],t[a+2])}projectAndGetPerspectiveRatio(e,n,i,r,s,o,a){const l=[n,i,r,1];let h=!1;if(r||this.transform.pitch>0){if(t.transformMat4$1(l,l,e),this.fogState&&s&&"globe"!==a.name){const e=function(e,n,i,r,s,o){const a=o.calculateFogTileMatrix(s),l=[n,i,r];return t.transformMat4(l,l,a),w(e,l,o.pitch,o._fov)}(this.fogState,n,i,r,s.toUnwrapped(),this.transform);h=e>.9}}else fe(l,l,e);const c=l[3];return{point:new t.Point((l[0]/c+1)/2*this.transform.width+me,(-l[1]/c+1)/2*this.transform.height+me),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(a)/c*.5,1.5),signedDistanceFromCamera:c,occluded:o&&l[2]>c||h}}isOffscreen(t,e,n,i){return n<me||t>=this.screenRightBoundary||i<me||e>this.screenBottomBoundary}isInsideGrid(t,e,n,i){return n>=0&&t<this.gridRightBoundary&&i>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}function ye(e,n,i){const r=n.createTileMatrix(e,e.worldSize,i.toUnwrapped());return t.multiply(new Float32Array(16),e.projMatrix,r)}function ve(t,e,n){if(e.projection.name===n.projection.name)return t.projMatrix;const i=n.clone();return i.setProjection(e.projection),ye(i,e.getProjection(),t)}function _e(t,e,n){return e.name===n.projection.name?t.projMatrix:ye(n,e,t)}class Te{constructor(t,e,n,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class Ee{constructor(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.text=new Te(t?t.text:null,e,n,r),this.icon=new Te(t?t.icon:null,e,i,r),this.clipped=s}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class xe{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.text=t,this.icon=e,this.skipFade=n,this.clipped=i}}class be{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class Ie{constructor(t,e,n,i,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=r}}class we{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function Se(e,n,i,r,s){const{horizontalAlign:o,verticalAlign:a}=t.getAnchorAlignment(e),l=-(o-.5)*n,h=-(a-.5)*i,c=t.evaluateVariableOffset(e,r);return new t.Point(l+c[0]*s,h+c[1]*s)}function Re(e,n,i,r,s){const o=new t.Point(e,n);return i&&o._rotate(r?s:-s),o}class Ce{constructor(t,e,n,i,r){this.transform=t.clone(),this.projection=t.projection.name,this.collisionIndex=new ge(this.transform,r),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new we(n),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,n,i,r){const s=i.getBucket(n),o=i.latestFeatureIndex;if(!s||!o||n.id!==s.layerIds[0])return;const a=s.layers[0].layout,l=i.collisionBoxArray,h=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),c=i.tileSize/t.EXTENT,u=i.tileID.toUnwrapped();this.transform.setProjection(s.projection);const p=(d=i.tileID,f=s.getProjection(),m=this.transform,f.name===this.projection?m.calculateProjMatrix(d.toUnwrapped()):ye(m,f,d));var d,f,m;const g="map"===a.get("text-pitch-alignment"),y="map"===a.get("text-rotation-alignment");n.compileFilter();const v=n.dynamicFilter(),_=n.dynamicFilterNeedsFeature(),T=this.transform.calculatePixelsToTileUnitsMatrix(i),E=ee(p,i.tileID.canonical,g,y,this.transform,s.getProjection(),T);let x=null;if(g){const e=ne(p,i.tileID.canonical,g,y,this.transform,s.getProjection(),T);x=t.multiply([],this.transform.labelPlaneMatrix,e)}let b=null;v&&i.latestFeatureIndex&&(b={unwrappedTileID:u,dynamicFilter:v,dynamicFilterNeedsFeature:_,featureIndex:i.latestFeatureIndex}),this.retainedQueryData[s.bucketInstanceId]=new Ie(s.bucketInstanceId,o,s.sourceLayerIndex,s.index,i.tileID);const I={bucket:s,layout:a,posMatrix:p,textLabelPlaneMatrix:E,labelToScreenMatrix:x,clippingData:b,scale:h,textPixelRatio:c,holdingForFade:i.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(s.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:t.evaluateSizeForZoom(s.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(s.sourceID)};if(r)for(const t of s.sortKeyRanges){const{sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r}=t;e.push({sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r,parameters:I})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:s.symbolInstances.length,parameters:I})}attemptAnchorPlacement(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y){const{textOffset0:v,textOffset1:_,crossTileID:T}=u,E=[v,_],x=Se(t,n,i,E,r),b=this.collisionIndex.placeCollisionBox(d,r,e,Re(x.x,x.y,s,o,this.transform.angle),c,a,l,h.predicate);if(m){const t=d.getSymbolInstanceIconSize(y,this.transform.zoom,u.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(d,t,m,Re(x.x,x.y,s,o,this.transform.angle),c,a,l,h.predicate).box.length)return}if(b.box.length>0){let e;return this.prevPlacement&&this.prevPlacement.variableOffsets[T]&&this.prevPlacement.placements[T]&&this.prevPlacement.placements[T].text&&(e=this.prevPlacement.variableOffsets[T].anchor),this.variableOffsets[T]={textOffset:E,width:n,height:i,anchor:t,textScale:r,prevAnchor:e},this.markUsedJustification(d,t,u,f),d.allowVerticalPlacement&&(this.markUsedOrientation(d,f,u),this.placedOrientations[T]=f),{shift:x,placedGlyphBoxes:b}}}placeLayerBucketPart(e,n,i,r){const{bucket:s,layout:o,posMatrix:a,textLabelPlaneMatrix:l,labelToScreenMatrix:h,clippingData:c,textPixelRatio:u,holdingForFade:p,collisionBoxArray:d,partiallyEvaluatedTextSize:f,partiallyEvaluatedIconSize:m,collisionGroup:g}=e.parameters,y=o.get("text-optional"),v=o.get("icon-optional"),_=o.get("text-allow-overlap"),T=o.get("icon-allow-overlap"),E="map"===o.get("text-rotation-alignment"),x="map"===o.get("text-pitch-alignment"),b="none"!==o.get("icon-text-fit"),I="viewport-y"===o.get("symbol-z-order");this.transform.setProjection(s.projection);let w=_&&(T||!s.hasIconData()||v),S=T&&(_||!s.hasTextData()||y);!s.collisionArrays&&d&&s.deserializeCollisionBoxes(d),i&&r&&s.updateCollisionDebugBuffers(this.transform.zoom,d);const R=(e,r,d)=>{const{crossTileID:I,numVerticalGlyphVertices:R}=e;if(c){const i={zoom:this.transform.zoom,pitch:this.transform.pitch};let r=null;if(c.dynamicFilterNeedsFeature){const t=this.retainedQueryData[s.bucketInstanceId];r=c.featureIndex.loadFeature({featureIndex:e.featureIndex,bucketIndex:t.bucketIndex,sourceLayerIndex:t.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,c.dynamicFilter)(i,r,this.retainedQueryData[s.bucketInstanceId].tileID.canonical,new t.Point(e.tileAnchorX,e.tileAnchorY),this.transform.calculateDistanceTileData(c.unwrappedTileID)))return this.placements[I]=new xe(!1,!1,!1,!0),void n.add(I)}if(n.has(I))return;if(p)return void(this.placements[I]=new xe(!1,!1,!1));let C=!1,A=!1,D=!0,O=!1,N=!1,M=null,P={box:null,offscreen:null,occluded:null},F={box:null,offscreen:null,occluded:null},L=null,k=null,U=null,B=0,z=0,G=0;d.textFeatureIndex?B=d.textFeatureIndex:e.useRuntimeCollisionCircles&&(B=e.featureIndex),d.verticalTextFeatureIndex&&(z=d.verticalTextFeatureIndex);const H=t=>{t.tileID=this.retainedQueryData[s.bucketInstanceId].tileID;const e=this.transform.elevation;(e||t.elevation)&&(t.elevation=e?e.getAtTileOffset(t.tileID,t.tileAnchorX,t.tileAnchorY):0)},j=d.textBox;if(j){H(j);const n=n=>{let i=t.WritingMode.horizontal;if(s.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[I];t&&(this.placedOrientations[I]=t,i=t,this.markUsedOrientation(s,i,e))}return i},i=(e,n)=>{if(s.allowVerticalPlacement&&R>0&&d.verticalTextBox){for(const i of s.writingModes)if(i===t.WritingMode.vertical?(P=n(),F=P):P=e(),P&&P.box&&P.box.length)break}else P=e()};if(o.get("text-variable-anchor")){let l=o.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[I]){const t=this.prevPlacement.variableOffsets[I];l.indexOf(t.anchor)>0&&(l=l.filter((e=>e!==t.anchor)),l.unshift(t.anchor))}const h=(t,n,i)=>{const o=s.getSymbolInstanceTextSize(f,e,this.transform.zoom,r),h=(t.x2-t.x1)*o+2*t.padding,c=(t.y2-t.y1)*o+2*t.padding,p=b&&!T?n:null;p&&H(p);let d={box:[],offscreen:!1,occluded:!1};const y=_?2*l.length:l.length;for(let v=0;v<y;++v){const n=this.attemptAnchorPlacement(l[v%l.length],t,h,c,o,E,x,u,a,g,v>=l.length,e,r,s,i,p,f,m);if(n&&(d=n.placedGlyphBoxes,d&&d.box&&d.box.length)){C=!0,M=n.shift;break}}return d};i((()=>h(j,d.iconBox,t.WritingMode.horizontal)),(()=>{const e=d.verticalTextBox;return e&&H(e),s.allowVerticalPlacement&&!(P&&P.box&&P.box.length)&&R>0&&e?h(e,d.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),P&&(C=P.box,D=P.offscreen,O=P.occluded);const c=n(!(!P||!P.box));if(!C&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[I];t&&(this.variableOffsets[I]=t,this.markUsedJustification(s,t.anchor,e,c))}}else{const o=(n,i)=>{const o=s.getSymbolInstanceTextSize(f,e,this.transform.zoom,r),l=this.collisionIndex.placeCollisionBox(s,o,n,new t.Point(0,0),_,u,a,g.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(s,i,e),this.placedOrientations[I]=i),l};i((()=>o(j,t.WritingMode.horizontal)),(()=>{const e=d.verticalTextBox;return s.allowVerticalPlacement&&R>0&&e?(H(e),o(e,t.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),n(!!(P&&P.box&&P.box.length))}}if(L=P,C=L&&L.box&&L.box.length>0,D=L&&L.offscreen,O=L&&L.occluded,e.useRuntimeCollisionCircles){const n=s.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex),r=t.evaluateSizeForFeature(s.textSizeData,f,n),c=o.get("text-padding");k=this.collisionIndex.placeCollisionCircles(s,_,n,s.lineVertexArray,s.glyphOffsetArray,r,a,l,h,i,x,g.predicate,e.collisionCircleDiameter*r/t.ONE_EM,c,this.retainedQueryData[s.bucketInstanceId].tileID),C=_||k.circles.length>0&&!k.collisionDetected,D=D&&k.offscreen,O=k.occluded}if(d.iconFeatureIndex&&(G=d.iconFeatureIndex),d.iconBox){const n=n=>{H(n);const i=b&&M?Re(M.x,M.y,E,x,this.transform.angle):new t.Point(0,0),r=s.getSymbolInstanceIconSize(m,this.transform.zoom,e.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(s,r,n,i,T,u,a,g.predicate)};F&&F.box&&F.box.length&&d.verticalIconBox?(U=n(d.verticalIconBox),A=U.box.length>0):(U=n(d.iconBox),A=U.box.length>0),D=D&&U.offscreen,N=U.occluded}const V=y||0===e.numHorizontalGlyphVertices&&0===R,W=v||0===e.numIconVertices;if(V||W?W?V||(A=A&&C):C=A&&C:A=C=A&&C,C&&L&&L.box&&this.collisionIndex.insertCollisionBox(L.box,o.get("text-ignore-placement"),s.bucketInstanceId,F&&F.box&&z?z:B,g.ID),A&&U&&this.collisionIndex.insertCollisionBox(U.box,o.get("icon-ignore-placement"),s.bucketInstanceId,G,g.ID),k&&(C&&this.collisionIndex.insertCollisionCircles(k.circles,o.get("text-ignore-placement"),s.bucketInstanceId,B,g.ID),i)){const t=s.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new be);for(let n=0;n<k.circles.length;n+=4)e.circles.push(k.circles[n+0]),e.circles.push(k.circles[n+1]),e.circles.push(k.circles[n+2]),e.circles.push(k.collisionDetected?1:0)}const Z="globe"!==s.projection.name;w=w&&(Z||!O),S=S&&(Z||!N),this.placements[I]=new xe(C||w,A||S,D||s.justReloaded),n.add(I)};if(I){const t=s.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const n=t[e];R(s.symbolInstances.get(n),n,s.collisionArrays[n])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)R(s.symbolInstances.get(t),t,s.collisionArrays[t]);if(i&&s.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[s.bucketInstanceId];t.invert(e.invProjMatrix,a),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}s.justReloaded=!1}markUsedJustification(e,n,i,r){const{leftJustifiedTextSymbolIndex:s,centerJustifiedTextSymbolIndex:o,rightJustifiedTextSymbolIndex:a,verticalPlacedTextSymbolIndex:l,crossTileID:h}=i,c=t.getAnchorJustification(n),u=r===t.WritingMode.vertical?l:"left"===c?s:"center"===c?o:"right"===c?a:-1;s>=0&&(e.text.placedSymbolArray.get(s).crossTileID=u>=0&&s!==u?0:h),o>=0&&(e.text.placedSymbolArray.get(o).crossTileID=u>=0&&o!==u?0:h),a>=0&&(e.text.placedSymbolArray.get(a).crossTileID=u>=0&&a!==u?0:h),l>=0&&(e.text.placedSymbolArray.get(l).crossTileID=u>=0&&l!==u?0:h)}markUsedOrientation(e,n,i){const r=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,s=n===t.WritingMode.vertical?n:0,{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:h}=i,c=e.text.placedSymbolArray;o>=0&&(c.get(o).placedOrientation=r),a>=0&&(c.get(a).placedOrientation=r),l>=0&&(c.get(l).placedOrientation=r),h>=0&&(c.get(h).placedOrientation=s)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const i=e?e.symbolFadeChange(t):1,r=e?e.opacities:{},s=e?e.variableOffsets:{},o=e?e.placedOrientations:{};for(const a in this.placements){const t=this.placements[a],e=r[a];e?(this.opacities[a]=new Ee(e,i,t.text,t.icon,null,t.clipped),n=n||t.text!==e.text.placed||t.icon!==e.icon.placed):(this.opacities[a]=new Ee(null,i,t.text,t.icon,t.skipFade,t.clipped),n=n||t.text||t.icon)}for(const a in r){const t=r[a];if(!this.opacities[a]){const e=new Ee(t,i,!1,!1);e.isHidden()||(this.opacities[a]=e,n=n||t.text.placed||t.icon.placed)}}for(const a in s)this.variableOffsets[a]||!this.opacities[a]||this.opacities[a].isHidden()||(this.variableOffsets[a]=s[a]);for(const a in o)this.placedOrientations[a]||!this.opacities[a]||this.opacities[a].isHidden()||(this.placedOrientations[a]=o[a]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const n=new Set;for(const i of e){const e=i.getBucket(t);e&&i.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,n,i.collisionBoxArray)}}updateBucketOpacities(e,n,i){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const r=e.layers[0].layout,s=!!e.layers[0].dynamicFilter(),o=new Ee(null,0,!1,!1,!0),a=r.get("text-allow-overlap"),l=r.get("icon-allow-overlap"),h=r.get("text-variable-anchor"),c="map"===r.get("text-rotation-alignment"),u="map"===r.get("text-pitch-alignment"),p="none"!==r.get("icon-text-fit"),d=new Ee(null,0,a&&(l||!e.hasIconData()||r.get("icon-optional")),l&&(a||!e.hasTextData()||r.get("text-optional")),!0);!e.collisionArrays&&i&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(i);const f=(t,e,n)=>{for(let i=0;i<e/4;i++)t.opacityVertexArray.emplaceBack(n)};let m=0;for(let g=0;g<e.symbolInstances.length;g++){const i=e.symbolInstances.get(g),{numHorizontalGlyphVertices:r,numVerticalGlyphVertices:a,crossTileID:l,numIconVertices:y}=i,v=n.has(l);let _=this.opacities[l];v?_=o:_||(_=d,this.opacities[l]=_),n.add(l);const T=r>0||a>0,E=y>0,x=this.placedOrientations[l],b=x===t.WritingMode.vertical,I=x===t.WritingMode.horizontal||x===t.WritingMode.horizontalOnly;if(!T&&!E||_.isHidden()||m++,T){const t=ke(_.text);f(e.text,r,b?Ue:t),f(e.text,a,I?Ue:t);const n=_.text.isHidden(),{leftJustifiedTextSymbolIndex:s,centerJustifiedTextSymbolIndex:o,rightJustifiedTextSymbolIndex:h,verticalPlacedTextSymbolIndex:c}=i,u=e.text.placedSymbolArray,p=n||b?1:0;s>=0&&(u.get(s).hidden=p),o>=0&&(u.get(o).hidden=p),h>=0&&(u.get(h).hidden=p),c>=0&&(u.get(c).hidden=n||I?1:0);const d=this.variableOffsets[l];d&&this.markUsedJustification(e,d.anchor,i,x);const m=this.placedOrientations[l];m&&(this.markUsedJustification(e,"left",i,m),this.markUsedOrientation(e,m,i))}if(E){const t=ke(_.icon),{placedIconSymbolIndex:n,verticalPlacedIconSymbolIndex:r}=i,s=e.icon.placedSymbolArray,o=_.icon.isHidden()?1:0;n>=0&&(f(e.icon,y,b?Ue:t),s.get(n).hidden=o),r>=0&&(f(e.icon,i.numVerticalIconVertices,I?Ue:t),s.get(r).hidden=o)}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[g];if(n){let i=new t.Point(0,0),r=!0;if(n.textBox||n.verticalTextBox){if(h){const t=this.variableOffsets[l];t?(i=Se(t.anchor,t.width,t.height,t.textOffset,t.textScale),c&&i._rotate(u?this.transform.angle:-this.transform.angle)):r=!1}s&&(r=!_.clipped),n.textBox&&Ae(e.textCollisionBox.collisionVertexArray,_.text.placed,!r||b,i.x,i.y),n.verticalTextBox&&Ae(e.textCollisionBox.collisionVertexArray,_.text.placed,!r||I,i.x,i.y)}const o=r&&Boolean(!I&&n.verticalIconBox);n.iconBox&&Ae(e.iconCollisionBox.collisionVertexArray,_.icon.placed,o,p?i.x:0,p?i.y:0),n.verticalIconBox&&Ae(e.iconCollisionBox.collisionVertexArray,_.icon.placed,!o,p?i.x:0,p?i.y:0)}}}if(e.fullyClipped=0===m,e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t}setStale(){this.stale=!0}}function Ae(t,e,n,i,r){t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0)}const De=Math.pow(2,25),Oe=Math.pow(2,24),Ne=Math.pow(2,17),Me=Math.pow(2,16),Pe=Math.pow(2,9),Fe=Math.pow(2,8),Le=Math.pow(2,1);function ke(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*De+e*Oe+n*Ne+e*Me+n*Pe+e*Fe+n*Le+e}const Ue=0;class Be{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(t,e,n,i,r){const s=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(s,i,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,s.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<s.length;){const t=s[this._currentPartIndex];if(e.placeLayerBucketPart(t,this._seenCrossTileIDs,n,0===t.symbolInstanceStart),this._currentPartIndex++,r())return!0}return!1}}class ze{constructor(t,e,n,i,r,s,o,a){this.placement=new Ce(t,r,s,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1}isDone(){return this._done}continuePlacement(e,n,i){const r=t.exported.now(),s=()=>{const e=t.exported.now()-r;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=n[e[this._currentPlacementIndex]],r=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=r)&&(!t.maxzoom||t.maxzoom>r)){if(this._inProgressLayer||(this._inProgressLayer=new Be(t)),this._inProgressLayer.continuePlacement(i[t.source],this.placement,this._showCollisionBoxes,t,s))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Ge=512/t.EXTENT/2;class He{constructor(e,n,i){this.tileID=e,this.bucketInstanceId=i,this.index=new t.KDBush(n.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const r=e.canonical.x*t.EXTENT,s=e.canonical.y*t.EXTENT;for(let t=0;t<n.length;t++){const{key:e,crossTileID:i,tileAnchorX:o,tileAnchorY:a}=n.get(t),l=Math.floor((r+o)*Ge),h=Math.floor((s+a)*Ge);this.index.add(l,h),this.keys.push(e),this.crossTileIDs.push(i)}this.index.finish()}findMatches(e,n,i){const r=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z),s=Ge/Math.pow(2,n.canonical.z-this.tileID.canonical.z),o=n.canonical.x*t.EXTENT,a=n.canonical.y*t.EXTENT;for(let t=0;t<e.length;t++){const n=e.get(t);if(n.crossTileID)continue;const{key:l,tileAnchorX:h,tileAnchorY:c}=n,u=Math.floor((o+h)*s),p=Math.floor((a+c)*s),d=this.index.range(u-r,p-r,u+r,p+r);for(const t of d){const e=this.crossTileIDs[t];if(this.keys[t]===l&&!i.has(e)){i.add(e),n.crossTileID=e;break}}}}}class je{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ve{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const n in this.indexes){const t=this.indexes[n],i={};for(const n in t){const r=t[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),i[r.tileID.key]=r}this.indexes[n]=i}this.lng=t}addBucket(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]=new Set);const i=this.usedCrossTileIDs[t.overscaledZ];for(const r in this.indexes){const n=this.indexes[r];if(Number(r)>t.overscaledZ)for(const r in n){const s=n[r];s.tileID.isChildOf(t)&&s.findMatches(e.symbolInstances,t,i)}else{const s=n[t.scaledTo(Number(r)).key];s&&s.findMatches(e.symbolInstances,t,i)}}for(let r=0;r<e.symbolInstances.length;r++){const t=e.symbolInstances.get(r);t.crossTileID||(t.crossTileID=n.generate(),i.add(t.crossTileID))}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new He(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const n of e.crossTileIDs)this.usedCrossTileIDs[t].delete(n)}removeStaleBuckets(t){let e=!1;for(const n in this.indexes){const i=this.indexes[n];for(const r in i)t[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],e=!0)}return e}}class We{constructor(){this.layerIndexes={},this.crossTileIDs=new je,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,n,i){let r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new Ve);let s=!1;const o={};"globe"!==i.name&&r.handleWrapJump(n);for(const a of e){const e=a.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(a.tileID,e,this.crossTileIDs)&&(s=!0),o[e.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(s=!0),s}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const n in this.layerIndexes)e[n]||delete this.layerIndexes[n]}}const Ze=(e,n)=>t.emitValidationErrors(e,n&&n.filter((t=>"source.canvas"!==t.identifier))),Ye=t.pick(Ht,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),qe=t.pick(Ht,["setCenter","setZoom","setBearing","setPitch"]),Xe={version:8,layers:[],sources:{}},Ke={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Qe extends t.Evented{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.map=e,this.dispatcher=new A(Bt(),this),this.imageManager=new T,this.imageManager.setEventedParent(this),this.glyphManager=new t.GlyphManager(e._requestManager,n.localFontFamily?t.LocalGlyphMode.all:n.localIdeographFontFamily?t.LocalGlyphMode.ideographs:t.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.crossTileSymbolIndex=new We,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const i=this;this._rtlTextPluginCallback=Qe.registerForPluginStateChange((e=>{i.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},((e,n)=>{if(t.triggerPluginCompletionEvent(e),n&&n.every((t=>t)))for(const t in i._sourceCaches){const e=i._sourceCaches[t],n=e.getSource().type;"vector"!==n&&"geojson"!==n||e.reload()}}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.getSource(t.sourceId);if(e&&e.vectorLayerIds)for(const n in this._layers){const t=this._layers[n];t.source===e.id&&this._validateLayer(t)}}))}loadURL(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new t.Event("dataloading",{dataType:"style"}));const i="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);const r=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(r,((e,n)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):n&&this._load(n,i)}))}loadJSON(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((()=>{this._request=null,this._load(e,!1!==n.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Xe,!1)}_updateLayerCount(t,e){const n=e?1:-1;t.is3D()&&(this._num3DLayers+=n),"circle"===t.type&&(this._numCircleLayers+=n),"symbol"===t.type&&(this._numSymbolLayers+=n)}_load(e,n){if(n&&Ze(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=t.clone$1(e),this._updateMapProjection();for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});this._changed=!1,e.sprite?this._loadSprite(e.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(e.glyphs);const i=Gt(this.stylesheet.layers);this._order=i.map((t=>t.id)),this._layers={},this._serializedLayers={};for(const r of i){const e=t.createStyleLayer(r);e.setEventedParent(this,{layer:{id:e.id}}),this._layers[e.id]=e,this._serializedLayers[e.id]=e.serialize(),this._updateLayerCount(e,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new x(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(t){t?this.stylesheet.projection=t:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(e){this._spriteRequest=function(e,n,i){let r,s,o;const a=t.exported.devicePixelRatio>1?"@2x":"";let l=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,a,".json"),t.ResourceType.SpriteJSON),((t,e)=>{l=null,o||(o=t,r=e,c())})),h=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,a,".png"),t.ResourceType.SpriteImage),((t,e)=>{h=null,o||(o=t,s=e,c())}));function c(){if(o)i(o);else if(r&&s){const e=t.exported.getImageData(s),n={};for(const i in r){const{width:s,height:o,x:a,y:l,sdf:h,pixelRatio:c,stretchX:u,stretchY:p,content:d}=r[i],f=new t.RGBAImage({width:s,height:o});t.RGBAImage.copy(e,f,{x:a,y:l},{x:0,y:0},{width:s,height:o}),n[i]={data:f,pixelRatio:c,sdf:h,stretchX:u,stretchY:p,content:d}}i(null,n)}}return{cancel(){l&&(l.cancel(),l=null),h&&(h.cancel(),h=null)}}}(e,this.map._requestManager,((e,n)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(n)for(const t in n)this.imageManager.addImage(t,n[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const n=this.getSource(e.source);if(!n)return;const i=e.sourceLayer;i&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(i))&&this.fire(new t.ErrorEvent(new Error('Source layer "'.concat(i,'" does not exist on source "').concat(n.id,'" as specified by style layer "').concat(e.id,'"'))))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const n of t){const t=this._layers[n];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(t){return!!this.terrain&&("function"==typeof t.isLayerDraped?t.isLayerDraped():Ke[t.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(e){if(!this._loaded)return;const n=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(t.length||n.length)&&this._updateWorkerLayers(t,n);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const i in this._updatedPaintProps)this._layers[i].updateTransitions(e);this.light.updateTransitions(e),this.fog&&this.fog.updateTransitions(e),this._resetUpdates()}const i={};for(const t in this._sourceCaches){const e=this._sourceCaches[t];i[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];if(n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)){const t=this._getLayerSourceCache(n);t&&(t.used=!0)}const i=this.map.painter;if(i){const t=n.getProgramIds();if(!t)continue;const r=n.getProgramConfiguration(e.zoom);for(const e of t)i.useProgram(e,r)}}for(const r in i){const e=this._sourceCaches[r];i[r]!==e.used&&e.getSource().fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:e.getSource().id}))}this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.fog&&this.fog.recalculate(e),this.z=e.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this._sourceCaches)this._sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(n){if(this._checkLoaded(),Ze(this,t.validateStyle(n)))return!1;(n=t.clone$1(n)).layers=Gt(n.layers);const i=function(t,n){if(!t)return[{command:Ht.setStyle,args:[n]}];let i=[];try{if(!e(t.version,n.version))return[{command:Ht.setStyle,args:[n]}];e(t.center,n.center)||i.push({command:Ht.setCenter,args:[n.center]}),e(t.zoom,n.zoom)||i.push({command:Ht.setZoom,args:[n.zoom]}),e(t.bearing,n.bearing)||i.push({command:Ht.setBearing,args:[n.bearing]}),e(t.pitch,n.pitch)||i.push({command:Ht.setPitch,args:[n.pitch]}),e(t.sprite,n.sprite)||i.push({command:Ht.setSprite,args:[n.sprite]}),e(t.glyphs,n.glyphs)||i.push({command:Ht.setGlyphs,args:[n.glyphs]}),e(t.transition,n.transition)||i.push({command:Ht.setTransition,args:[n.transition]}),e(t.light,n.light)||i.push({command:Ht.setLight,args:[n.light]}),e(t.fog,n.fog)||i.push({command:Ht.setFog,args:[n.fog]}),e(t.projection,n.projection)||i.push({command:Ht.setProjection,args:[n.projection]});const r={},s=[];!function(t,n,i,r){let s;for(s in n=n||{},t=t||{})t.hasOwnProperty(s)&&(n.hasOwnProperty(s)||Vt(s,i,r));for(s in n){if(!n.hasOwnProperty(s))continue;const o=n[s];t.hasOwnProperty(s)?e(t[s],o)||("geojson"===t[s].type&&"geojson"===o.type&&Zt(t,n,s)?i.push({command:Ht.setGeoJSONSourceData,args:[s,o.data]}):Wt(s,n,i,r)):jt(s,n,i)}}(t.sources,n.sources,s,r);const o=[];t.layers&&t.layers.forEach((t=>{t.source&&r[t.source]?i.push({command:Ht.removeLayer,args:[t.id]}):o.push(t)}));let a=t.terrain;a&&r[a.source]&&(i.push({command:Ht.setTerrain,args:[void 0]}),a=void 0),i=i.concat(s),e(a,n.terrain)||i.push({command:Ht.setTerrain,args:[n.terrain]}),function(t,n,i){n=n||[];const r=(t=t||[]).map(qt),s=n.map(qt),o=t.reduce(Xt,{}),a=n.reduce(Xt,{}),l=r.slice(),h=Object.create(null);let c,u,p,d,f,m,g;for(c=0,u=0;c<r.length;c++)p=r[c],a.hasOwnProperty(p)?u++:(i.push({command:Ht.removeLayer,args:[p]}),l.splice(l.indexOf(p,u),1));for(c=0,u=0;c<s.length;c++)p=s[s.length-1-c],l[l.length-1-c]!==p&&(o.hasOwnProperty(p)?(i.push({command:Ht.removeLayer,args:[p]}),l.splice(l.lastIndexOf(p,l.length-u),1)):u++,m=l[l.length-c],i.push({command:Ht.addLayer,args:[a[p],m]}),l.splice(l.length-c,0,p),h[p]=!0);for(c=0;c<s.length;c++)if(p=s[c],d=o[p],f=a[p],!h[p]&&!e(d,f))if(e(d.source,f.source)&&e(d["source-layer"],f["source-layer"])&&e(d.type,f.type)){for(g in Yt(d.layout,f.layout,i,p,null,Ht.setLayoutProperty),Yt(d.paint,f.paint,i,p,null,Ht.setPaintProperty),e(d.filter,f.filter)||i.push({command:Ht.setFilter,args:[p,f.filter]}),e(d.minzoom,f.minzoom)&&e(d.maxzoom,f.maxzoom)||i.push({command:Ht.setLayerZoomRange,args:[p,f.minzoom,f.maxzoom]}),d)d.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Yt(d[g],f[g],i,p,g.slice(6),Ht.setPaintProperty):e(d[g],f[g])||i.push({command:Ht.setLayerProperty,args:[p,g,f[g]]}));for(g in f)f.hasOwnProperty(g)&&!d.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Yt(d[g],f[g],i,p,g.slice(6),Ht.setPaintProperty):e(d[g],f[g])||i.push({command:Ht.setLayerProperty,args:[p,g,f[g]]}))}else i.push({command:Ht.removeLayer,args:[p]}),m=l[l.lastIndexOf(p)+1],i.push({command:Ht.addLayer,args:[f,m]})}(o,n.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:Ht.setStyle,args:[n]}]}return i}(this.serialize(),n).filter((t=>!(t.command in qe)));if(0===i.length)return!1;const r=i.filter((t=>!(t.command in Ye)));if(r.length>0)throw new Error("Unimplemented: ".concat(r.map((t=>t.command)).join(", "),"."));return i.forEach((t=>{"setTransition"!==t.command&&"setProjection"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=n,this._updateMapProjection(),!0}addImage(e,n){return this.getImage(e)?this.fire(new t.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(e,n),this._afterImageUpdated(e),this)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){return this.getImage(e)?(this.imageManager.removeImage(e),this._afterImageUpdated(e),this):this.fire(new t.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(e))throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(n).join(", "),"."));if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateSource,"sources.".concat(e),n,null,i))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const r=Dt(e,n,this.dispatcher,this);r.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(e),source:r.serialize(),sourceId:e})));const s=n=>{const i=(n?"symbol:":"other:")+e,s=this._sourceCaches[i]=new t.SourceCache(i,r,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[e]=s,s.style=this,s.onAdd(this.map)};s(!1),"vector"!==n.type&&"geojson"!==n.type||s(!0),r.onAdd&&r.onAdd(this.map),this._changed=!0}removeSource(e){this._checkLoaded();const n=this.getSource(e);if(!n)throw new Error("There is no source with this ID");for(const r in this._layers)if(this._layers[r].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'.concat(e,'" cannot be removed while layer "').concat(r,'" is using it.'))));if(this.terrain&&this.terrain.get().source===e)return this.fire(new t.ErrorEvent(new Error('Source "'.concat(e,'" cannot be removed while terrain is using it.'))));const i=this._getSourceCaches(e);for(const r of i)delete this._sourceCaches[r.id],delete this._updatedSources[r.id],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r.getSource().id})),r.setEventedParent(null),r.clearTiles();return delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(t,e){this._checkLoaded(),this.getSource(t).setData(e),this._changed=!0}getSource(t){const e=this._getSourceCache(t);return e&&e.getSource()}_getSources(){const t=[];for(const e in this._otherSourceCaches){const n=this._getSourceCache(e);n&&t.push(n.getSource())}return t}addLayer(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const r=e.id;if(this.getLayer(r))return void this.fire(new t.ErrorEvent(new Error('Layer with id "'.concat(r,'" already exists on this map'))));let s;if("custom"===e.type){if(Ze(this,t.validateCustomStyleLayer(e)))return;s=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone$1(e),e=t.extend(e,{source:r})),this._validate(t.validateLayer,"layers.".concat(r),e,{arrayIndex:-1},i))return;s=t.createStyleLayer(e),this._validateLayer(s),s.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[s.id]=s.serialize(),this._updateLayerCount(s,!0)}const o=n?this._order.indexOf(n):this._order.length;if(n&&-1===o)return void this.fire(new t.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.'))));this._order.splice(o,0,r),this._layerOrderChanged=!0,this._layers[r]=s;const a=this._getLayerSourceCache(s);if(this._removedLayers[r]&&s.source&&a&&"custom"!==s.type){const t=this._removedLayers[r];delete this._removedLayers[r],t.type!==s.type?this._updatedSources[s.source]="clear":(this._updatedSources[s.source]="reload",a.pause())}this._updateLayer(s),s.onAdd&&s.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be moved."))));if(e===n)return;const i=this._order.indexOf(e);this._order.splice(i,1);const r=n?this._order.indexOf(n):this._order.length;n&&-1===r?this.fire(new t.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.')))):(this._order.splice(r,0,e),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be removed."))));n.setEventedParent(null),this._updateLayerCount(n,!1);const i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}hasLayerType(t){for(const e in this._layers)if(this._layers[e].type===t)return!0;return!1}setLayerZoomRange(e,n,i){this._checkLoaded();const r=this.getLayer(e);r?r.minzoom===n&&r.maxzoom===i||(null!=n&&(r.minzoom=n),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot have zoom extent."))))}setFilter(n,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const s=this.getLayer(n);if(s){if(!e(s.filter,i))return null==i?(s.filter=void 0,void this._updateLayer(s)):void(this._validate(t.validateFilter,"layers.".concat(s.id,".filter"),i,{layerType:s.type},r)||(s.filter=t.clone$1(i),this._updateLayer(s)))}else this.fire(new t.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be filtered."))))}getFilter(e){const n=this.getLayer(e);return n&&t.clone$1(n.filter)}setLayoutProperty(n,i,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const o=this.getLayer(n);o?e(o.getLayoutProperty(i),r)||(o.setLayoutProperty(i,r,s),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}getLayoutProperty(e,n){const i=this.getLayer(e);if(i)return i.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style."))))}setPaintProperty(n,i,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const o=this.getLayer(n);o?e(o.getPaintProperty(i),r)||(o.setPaintProperty(i,r,s)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new t.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}getPaintProperty(t,e){const n=this.getLayer(t);return n&&n.getPaintProperty(e)}setFeatureState(e,n){this._checkLoaded();const i=e.source,r=e.sourceLayer,s=this.getSource(i);if(!s)return void this.fire(new t.ErrorEvent(new Error("The source '".concat(i,"' does not exist in the map's style."))));const o=s.type;if("geojson"===o&&r)return void this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===o&&!r)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));const a=this._getSourceCaches(i);for(const t of a)t.setFeatureState(r,e.id,n)}removeFeatureState(e,n){this._checkLoaded();const i=e.source,r=this.getSource(i);if(!r)return void this.fire(new t.ErrorEvent(new Error("The source '".concat(i,"' does not exist in the map's style."))));const s=r.type,o="vector"===s?e.sourceLayer:void 0;if("vector"===s&&!o)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof e.id&&"number"!=typeof e.id)return void this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const a=this._getSourceCaches(i);for(const t of a)t.removeFeatureState(o,e.id,n)}getFeatureState(e){this._checkLoaded();const n=e.source,i=e.sourceLayer,r=this.getSource(n);if(r){if("vector"!==r.type||i)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(i,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const e={};for(const t in this._sourceCaches){const n=this._sourceCaches[t].getSource();e[n.id]||(e[n.id]=n.serialize())}return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:e,layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0;const e=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&e&&"raster"!==e.getSource().type&&(this._updatedSources[t.source]="reload",e.pause()),this._changed=!0,t.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,n={},i=[];for(let s=this._order.length-1;s>=0;s--){const r=this._order[s];if(e(r)){n[r]=s;for(const e of t){const t=e[r];if(t)for(const e of t)i.push(e)}}}i.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const r=[];for(let s=this._order.length-1;s>=0;s--){const o=this._order[s];if(e(o))for(let t=i.length-1;t>=0;t--){const e=i[t].feature;if(n[e.layer.id]<s)break;r.push(e),i.pop()}else for(const e of t){const t=e[o];if(t)for(const e of t)r.push(e.feature)}}return r}queryRenderedFeatures(e,n,i){n&&n.filter&&this._validate(t.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);const r={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be queried for features.")))),[];r[n.source]=!0}}const s=[];n.availableImages=this._availableImages;const o=n&&n.layers?n.layers.some((t=>{const e=this.getLayer(t);return e&&e.is3D()})):this.has3DLayers(),a=O.createFromScreenPoints(e,i);for(const t in this._sourceCaches){const e=this._sourceCaches[t].getSource().id;n.layers&&!r[e]||s.push(Nt(this._sourceCaches[t],this._layers,this._serializedLayers,a,n,i,o,!!this.map._showQueryGeometry))}return this.placement&&s.push(function(t,e,n,i,r,s,o){const a={},l=s.queryRenderedSymbols(i),h=[];for(const c of Object.keys(l).map(Number))h.push(o[c]);h.sort(Pt);for(const c of h){const n=c.featureIndex.lookupSymbolFeatures(l[c.bucketInstanceId],e,c.bucketIndex,c.sourceLayerIndex,r.filter,r.layers,r.availableImages,t);for(const t in n){const e=a[t]=a[t]||[],i=n[t];i.sort(((t,e)=>{const n=c.featureSortOrder;if(n){const i=n.indexOf(t.featureIndex);return n.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex}));for(const t of i)e.push(t)}}for(const c in a)a[c].forEach((e=>{const i=e.feature,r=n(t[c]);if(!r)return;const s=r.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=s}));return a}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),a.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(s)}querySourceFeatures(e,n){n&&n.filter&&this._validate(t.validateFilter,"querySourceFeatures.filter",n.filter,null,n);const i=this._getSourceCaches(e);let r=[];for(const t of i)r=r.concat(Mt(t,n));return r}addSourceType(t,e,n){return Qe.getSourceType(t)?n(new Error('A source type called "'.concat(t,'" already exists.'))):(Qe.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();const i=this.light.getLight();let r=!1;for(const o in t)if(!e(t[o],i[o])){r=!0;break}if(!r)return;const s=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(t,n),this.light.updateTransitions(s)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let r=n;if(1===i){if("object"==typeof r.source){const e="terrain-dem-src";this.addSource(e,r.source),r=t.clone$1(r),r=t.extend(r,{source:e})}if(this._validate(t.validateTerrain,"terrain",r))return}if(!this.terrain||this.terrain&&i!==this.terrain.drapeRenderMode){if(!r)return;this._createTerrain(r,i)}else{const n=this.terrain,i=n.get();for(const e of Object.keys(t.spec.terrain))!r.hasOwnProperty(e)&&t.spec.terrain[e].default&&(r[e]=t.spec.terrain[e].default);for(const t in r)if(!e(r[t],i[t])){n.set(r),this.stylesheet.terrain=r;const t=this._setTransitionParameters({duration:0});n.updateTransitions(t);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(t){const e=this.fog=new C(t,this.map.transform);this.stylesheet.fog=t;const n=this._setTransitionParameters({duration:0});e.updateTransitions(n)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const t of this.map._markers)t._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,i=n.get();0===Object.keys(t).length&&n.set(t);for(const r in t)if(!e(t[r],i[r])){n.set(t),this.stylesheet.fog=t;const e=this._setTransitionParameters({duration:0});n.updateTransitions(e);break}}else this._createFog(t);this._markersNeedUpdate=!0}_setTransitionParameters(e){return{now:t.exported.now(),transition:t.extend(e,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const t=this._order.filter((t=>this.isLayerDraped(this._layers[t]))),e=this._order.filter((t=>!this.isLayerDraped(this._layers[t])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...t),this._drapedFirstOrder.push(...e)}_createTerrain(t,e){const n=this.terrain=new I(t,e);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const i=this._setTransitionParameters({duration:0});n.updateTransitions(i)}_force3DLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"fill-extrusion"===e.type&&this._updateLayer(e)}}_forceSymbolLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"symbol"===e.type&&this._updateLayer(e)}}_validate(e,n,i,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!s||!1!==s.validate)&&Ze(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:i,styleSpec:t.spec},r)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){const e=this._getSourceCaches(t);for(const n of e)n.clearTiles()}_reloadSource(t){const e=this._getSourceCaches(t);for(const n of e)n.resume(),n.reload()}_reloadSources(){for(const t of this._getSources())t.reload&&t.reload()}_updateSources(t){for(const e in this._sourceCaches)this._sourceCaches[e].update(t)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const e=this._sourceCaches[t];e.resume(),e.reload()}}_updatePlacement(e,n,i,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=!1,a=!1;const l={};for(const t of this._order){const n=this._layers[t];if("symbol"!==n.type)continue;if(!l[n.source]){const t=this._getLayerSourceCache(n);if(!t)continue;l[n.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const i=this.crossTileSymbolIndex.addLayer(n,l[n.source],e.center.lng,e.projection);o=o||i}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),s=s||this._layerOrderChanged||0===i,this._layerOrderChanged&&this.fire(new t.Event("neworder")),(s||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new ze(e,this._order,s,n,i,r,this.placement,this.fog&&e.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();const i=t=>{t&&t.setDependencies(e.tileID.key,e.type,e.icons)};i(this._otherSourceCaches[e.source]),i(this._symbolSourceCaches[e.source])}getGlyphs(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)}getResource(e,n,i){return t.makeRequest(n,i)}_getSourceCache(t){return this._otherSourceCaches[t]}_getLayerSourceCache(t){return"symbol"===t.type?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}_getSourceCaches(t){const e=[];return this._otherSourceCaches[t]&&e.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&e.push(this._symbolSourceCaches[t]),e}_isSourceCacheLoaded(e){const n=this._getSourceCaches(e);return 0===n.length?(this.fire(new t.ErrorEvent(new Error("There is no source with ID '".concat(e,"'")))),!1):n.every((t=>t.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Qe.getSourceType=function(t){return At[t]},Qe.setSourceType=function(t,e){At[t]=e},Qe.registerForPluginStateChange=t.registerForPluginStateChange;var Je="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",$e="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",tn="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",en="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",nn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let rn={},sn={};const on=[];un(Je,on),un(tn,on),un(en,on),un(nn,on),rn=pn("",tn),sn=pn(nn,en);const an=pn("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),ln=Je,hn="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var cn={background:pn("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:pn("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:pn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:pn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:pn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:pn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:pn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:pn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:pn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:pn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:pn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:pn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:pn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:pn("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:pn("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:pn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:pn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:pn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:pn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:pn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:pn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:pn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:pn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:pn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:pn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:pn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",$e),skyboxGradient:pn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",$e),skyboxCapture:pn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:pn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:pn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function un(t,e){const n=t.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let i of n)if(i=i.trim(),"#"===i[0]&&i.includes("if")&&!i.includes("endif")){i=i.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const t=i.split(" ");for(const n of t)e.includes(n)||e.push(n)}}function pn(t,e){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=e.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),r={},s=[...on];return un(t,s),un(e,s),{fragmentSource:t=t.replace(n,((t,e,n,i,s)=>(r[s]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(s,"\nvarying ").concat(n," ").concat(i," ").concat(s,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(s,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(s,"\n    ").concat(n," ").concat(i," ").concat(s," = u_").concat(s,";\n#endif\n")))),vertexSource:e=e.replace(n,((t,e,n,i,s)=>{const o="float"===i?"vec2":"vec4",a=s.match(/color/)?"color":o;return r[s]?"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(s,"\nuniform lowp float u_").concat(s,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(s,";\nvarying ").concat(n," ").concat(i," ").concat(s,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(s,";\n#endif\n"):"vec4"===a?"\n#ifndef HAS_UNIFORM_u_".concat(s,"\n    ").concat(s," = a_").concat(s,";\n#else\n    ").concat(n," ").concat(i," ").concat(s," = u_").concat(s,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(s,"\n    ").concat(s," = unpack_mix_").concat(a,"(a_").concat(s,", u_").concat(s,"_t);\n#else\n    ").concat(n," ").concat(i," ").concat(s," = u_").concat(s,";\n#endif\n"):"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(s,"\nuniform lowp float u_").concat(s,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(s,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(s,";\n#endif\n"):"vec4"===a?"\n#ifndef HAS_UNIFORM_u_".concat(s,"\n    ").concat(n," ").concat(i," ").concat(s," = a_").concat(s,";\n#else\n    ").concat(n," ").concat(i," ").concat(s," = u_").concat(s,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(s,"\n    ").concat(n," ").concat(i," ").concat(s," = unpack_mix_").concat(a,"(a_").concat(s,", u_").concat(s,"_t);\n#else\n    ").concat(n," ").concat(i," ").concat(s," = u_").concat(s,";\n#endif\n")})),staticAttributes:i,usedDefines:s}}class dn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(t,e,n,i,r,s,o){this.context=t;let a=this.boundPaintVertexBuffers.length!==i.length;for(let h=0;!a&&h<i.length;h++)this.boundPaintVertexBuffers[h]!==i[h]&&(a=!0);let l=this.boundDynamicVertexBuffers.length!==o.length;for(let h=0;!l&&h<o.length;h++)this.boundDynamicVertexBuffers[h]!==o[h]&&(l=!0);if(!t.extVertexArrayObject||!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||a||l||this.boundIndexBuffer!==r||this.boundVertexOffset!==s)this.freshBind(e,n,i,r,s,o);else{t.bindVertexArrayOES.set(this.vao);for(const t of o)t&&t.bind();r&&r.dynamicDraw&&r.bind()}}freshBind(t,e,n,i,r,s){let o;const a=t.numAttributes,l=this.context,h=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),o=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffers=s;else{o=l.currentNumAttributes||0;for(let t=a;t<o;t++)h.disableVertexAttribArray(t)}e.enableAttributes(h,t),e.bind(),e.setVertexAttribPointers(h,t,r);for(const c of n)c.enableAttributes(h,t),c.bind(),c.setVertexAttribPointers(h,t,r);for(const c of s)c&&(c.enableAttributes(h,t),c.bind(),c.setVertexAttribPointers(h,t,r));i&&i.bind(),l.currentNumAttributes=a}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function fn(e,n){const i=Math.pow(2,n.canonical.z),r=n.canonical.y;return[new t.MercatorCoordinate(0,r/i).toLngLat().lat,new t.MercatorCoordinate(0,(r+1)/i).toLngLat().lat]}function mn(e,n,i,r,s,o,a){const l=e.context,h=l.gl,c=i.fbo;if(!c)return;e.prepareDrawTile();const u=e.useProgram("hillshade");l.activeTexture.set(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,c.colorAttachment.get());const p=((t,e,n,i)=>{const r=n.paint.get("hillshade-shadow-color"),s=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color");let a=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);const l=!t.options.moving;return{u_matrix:i||t.transform.calculateProjMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:fn(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),a],u_shadow:r,u_highlight:s,u_accent:o}})(e,i,r,e.terrain?n.projMatrix:null);e.prepareDrawProgram(l,u,n.toUnwrapped());const{tileBoundsBuffer:d,tileBoundsIndexBuffer:f,tileBoundsSegments:m}=e.getTileBoundsBuffers(i);u.draw(l,h.TRIANGLES,s,o,a,t.CullFaceMode.disabled,p,r.id,d,f,m)}function gn(e,n,i){if(!n.needsDEMTextureUpload)return;const r=e.context,s=r.gl;r.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(i.stride);const o=i.getPixels();n.demTexture?n.demTexture.update(o,{premultiply:!1}):n.demTexture=new t.Texture(r,o,s.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function yn(e,n,i,r,s,o){const a=e.context,l=a.gl;if(!n.dem)return;const h=n.dem;if(a.activeTexture.set(l.TEXTURE1),gn(e,n,h),!n.demTexture)return;n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const c=h.dim;a.activeTexture.set(l.TEXTURE0);let u=n.fbo;if(!u){const e=new t.Texture(a,{width:c,height:c,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),u=n.fbo=a.createFramebuffer(c,c,!0),u.colorAttachment.set(e.texture)}a.bindFramebuffer.set(u.framebuffer),a.viewport.set([0,0,c,c]);const{tileBoundsBuffer:p,tileBoundsIndexBuffer:d,tileBoundsSegments:f}=e.getMercatorTileBoundsBuffers();e.useProgram("hillshadePrepare").draw(a,l.TRIANGLES,r,s,o,t.CullFaceMode.disabled,((e,n)=>{const i=n.stride,r=t.create();return t.ortho(r,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(r,r,[0,-t.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[i,i],u_zoom:e.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,h),i.id,p,d,f),n.needsHillshadePrepare=!1}const vn=e=>({u_matrix:new t.UniformMatrix4f(e),u_image0:new t.Uniform1i(e),u_skirt_height:new t.Uniform1f(e)}),_n=(t,e)=>({u_matrix:t,u_image0:0,u_skirt_height:e}),Tn=(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f)=>({u_proj_matrix:Float32Array.from(t),u_globe_matrix:e,u_normalize_matrix:Float32Array.from(i),u_merc_matrix:n,u_zoom_transition:r,u_merc_center:s,u_image0:0,u_frustum_tl:o,u_frustum_tr:a,u_frustum_br:l,u_frustum_bl:h,u_globe_pos:c,u_globe_radius:u,u_viewport:p,u_grid_matrix:f?Float32Array.from(f):new Float32Array(9),u_skirt_height:d});function En(t,e){return null!=t&&null!=e&&!(!t.hasData()||!e.hasData())&&null!=t.demTexture&&null!=e.demTexture&&t.tileID.key!==e.tileID.key}const xn=new class{constructor(){this.operations={}}newMorphing(t,e,n,i,r){if(t in this.operations){const e=this.operations[t];e.to.tileID.key!==n.tileID.key&&(e.queued=n)}else this.operations[t]={startTime:i,phase:0,duration:r,from:e,to:n,queued:null}}getMorphValuesForProxy(t){if(!(t in this.operations))return null;const e=this.operations[t];return{from:e.from,to:e.to,phase:e.phase}}update(t){for(const e in this.operations){const n=this.operations[e];for(n.phase=(t-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,t)){delete this.operations[e];break}}}_nextOp(t,e){return!!t.queued&&(t.from=t.to,t.to=t.queued,t.queued=null,t.phase=0,t.startTime=e,!0)}_validOp(t){return t.from.hasData()&&t.to.hasData()}},bn={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function In(t){return 6*Math.pow(1.5,22-t)}function wn(t,e){const n=1<<t.z;return!e&&(0===t.x||t.x===n-1)||0===t.y||t.y===n-1}const Sn=t=>({u_matrix:t});function Rn(e,n,i,r,s){if(s>0){const o=t.exported.now(),a=(o-e.timeAdded)/s,l=n?(o-n.timeAdded)/s:-1,h=i.getSource(),c=r.coveringZoomLevel({tileSize:h.tileSize,roundZoom:h.roundZoom}),u=!n||Math.abs(n.tileID.overscaledZ-c)>Math.abs(e.tileID.overscaledZ-c),p=u&&e.refreshedUponExpiration?1:t.clamp(u?a:1-l,0,1);return e.refreshedUponExpiration&&a>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}class Cn extends t.SourceCache{constructor(t){const e={type:"raster-dem",maxzoom:t.transform.maxZoom},n=new A(Bt(),null),i=Dt("mock-dem",e,n,t.style);super("mock-dem",i,!1),i.setEventedParent(this),this._sourceLoaded=!0}_loadTile(t,e){t.state="loaded",e(null)}}class An extends t.SourceCache{constructor(t){const e=Dt("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new A(Bt(),null),t.style);super("proxy",e,!1),e.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(e,n,i){if(e.freezeTileCoverage)return;this.transform=e;const r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((n,i)=>{if(n[i.key]="",!this._tiles[i.key]){const n=new t.Tile(i,this._source.tileSize*i.overscaleFactor(),e.tileZoom);n.state="loaded",this._tiles[i.key]=n}return n}),{});for(const t in this._tiles)t in r||(this.freeFBO(t),this._tiles[t].unloadVectorData(),delete this._tiles[t])}freeFBO(t){const e=this.proxyCachedFBO[t];if(void 0!==e){const n=Object.values(e);this.renderCachePool.push(...n),delete this.proxyCachedFBO[t]}}deallocRenderCache(){this.renderCache.forEach((t=>t.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Dn extends t.OverscaledTileID{constructor(t,e,n){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=e,this.projMatrix=n}}class On extends t.Elevation{constructor(e,n){super(),this.painter=e,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[i,r,s]=function(e){const n=new t.StructArrayLayout2i4,i=new t.StructArrayLayout3ui6,r=131;n.reserve(17161),i.reserve(33800);const s=t.EXTENT/128,o=t.EXTENT+s/2,a=o+s;for(let h=-s;h<a;h+=s)for(let e=-s;e<a;e+=s){const i=e<0||e>o||h<0||h>o?24575:0,r=t.clamp(Math.round(e),0,t.EXTENT),s=t.clamp(Math.round(h),0,t.EXTENT);n.emplaceBack(r+i,s)}const l=(t,e)=>{const n=e*r+t;i.emplaceBack(n+1,n,n+r),i.emplaceBack(n+r,n+r+1,n+1)};for(let t=1;t<129;t++)for(let e=1;e<129;e++)l(e,t);return[0,129].forEach((t=>{for(let e=0;e<130;e++)l(e,t),l(t,e)})),[n,i,32768]}(),o=e.context;this.gridBuffer=o.createVertexBuffer(i,t.posAttributes.members),this.gridIndexBuffer=o.createIndexBuffer(r),this.gridSegments=t.SegmentVector.simpleSegment(0,0,i.length,r.length),this.gridNoSkirtSegments=t.SegmentVector.simpleSegment(0,0,i.length,s),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new An(n.map),this.orthoMatrix=t.create(),t.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,t.EXTENT,0,t.EXTENT,0,1);const a=o.gl;this._overlapStencilMode=new t.StencilMode({func:a.GEQUAL,mask:255},0,255,a.KEEP,a.KEEP,a.REPLACE),this._previousZoom=e.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Cn(n.map)}set style(t){t.on("data",this._onStyleDataEvent.bind(this)),t.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=t,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(e,n,i){if(e&&e.terrain){this._style!==e&&(this.style=e),this.enabled=!0;const r=e.terrain.properties;this.sourceCache=0===e.terrain.drapeRenderMode?this._mockSourceCache:e._getSourceCache(r.get("source")),this._exaggeration=r.get("exaggeration");const s=()=>{this.sourceCache.used&&t.warnOnce("Raster DEM source '".concat(this.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));const e=this.getScaledDemTileSize();this.sourceCache.update(n,e,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,s(),this._initializing=!0),s(),n.updateElevation(!0,i),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(t){this._findCoveringTileCache[t]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const e=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==e.efficiency&&t.warnOnce("Terrain render cache efficiency is not optimal (".concat(e.efficiency,"%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '").concat(e.firstUndrapedLayer,"' or create a map using optimizeForTerrain: true option."))}_onStyleDataEvent(t){t.coord&&"source"===t.dataType?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):"style"===t.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const t in this._style._sourceCaches)this._style._sourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((t=>t.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}set useVertexMorphing(t){this._useVertexMorphing=t}updateTileBinding(e){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,i=this.painter.transform;this._initializing&&(this._initializing=0===i._centerAltitude&&-1===this.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(i.center),-1),this._emptyDEMTextureDirty=!this._initializing);const r=this.proxyCoords=n.getIds().map((t=>{const e=n.getTileByID(t).tileID;return e.projMatrix=i.calculateProjMatrix(e.toUnwrapped()),e}));!function(e,n){const i=n.transform.pointCoordinate(n.transform.getCameraPoint()),r=new t.Point(i.x,i.y);e.sort(((e,n)=>{if(n.overscaledZ-e.overscaledZ)return n.overscaledZ-e.overscaledZ;const i=new t.Point(e.canonical.x+(1<<e.canonical.z)*e.wrap,e.canonical.y),s=new t.Point(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),o=r.mult(1<<e.canonical.z);return o.x-=.5,o.y-=.5,o.distSqr(i)-o.distSqr(s)}))}(r,this.painter),this._previousZoom=i.zoom;const s=this.proxyToSource||{};this.proxyToSource={},r.forEach((t=>{this.proxyToSource[t.key]={}})),this.terrainTileForTile={};const o=this._style._sourceCaches;for(const t in o){const n=o[t];if(!n.used)continue;if(n!==this.sourceCache&&this.resetTileLookupCache(n.id),this._setupProxiedCoordsForOrtho(n,e[t],s),n.usedForTerrain)continue;const i=e[t];n.getSource().reparseOverscaled&&this._assignTerrainTiles(i)}this.proxiedCoords[n.id]=r.map((t=>new Dn(t,t.key,this.orthoMatrix))),this._assignTerrainTiles(r),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(s),this.renderingToTexture=!1,this._updateTimestamp=t.exported.now();const a={};this._visibleDemTiles=[];for(const t of this.proxyCoords){const e=this.terrainTileForTile[t.key];if(!e)continue;const n=e.tileID.key;n in a||(this._visibleDemTiles.push(e),a[n]=n)}}_assignTerrainTiles(t){this._initializing||t.forEach((t=>{if(this.terrainTileForTile[t.key])return;const e=this._findTileCoveringTileID(t,this.sourceCache);e&&(this.terrainTileForTile[t.key]=e)}))}_prepareDEMTextures(){const t=this.painter.context,e=t.gl;for(const n in this.terrainTileForTile){const i=this.terrainTileForTile[n],r=i.dem;!r||i.demTexture&&!i.needsDEMTextureUpload||(t.activeTexture.set(e.TEXTURE1),gn(this.painter,i,r))}}_prepareDemTileUniforms(t,e,n,i){if(!e||null==e.demTexture)return!1;const r=t.tileID.canonical,s=Math.pow(2,e.tileID.canonical.z-r.z),o=i||"";return n["u_dem_tl".concat(o)]=[r.x*s%1,r.y*s%1],n["u_dem_scale".concat(o)]=s,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const e=this.painter.context,n=e.gl;if(!this._emptyDepthBufferTexture){const i=new t.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new t.Texture(e,i,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let t=0;const e=this._visibleDemTiles.reduce(((e,n)=>{if(!n.dem)return e;const i=n.dem.tree.minimums[0];return i>0&&t++,e+i}),0);return t?e/t:0}_updateEmptyDEMTexture(){const e=this.painter.context,n=e.gl;e.activeTexture.set(n.TEXTURE2);const i=this._getLoadedAreaMinimum(),r=new t.RGBAImage({width:1,height:1},new Uint8Array(t.DEMData.pack(i,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let s=this._emptyDEMTexture;return s?s.update(r,{premultiply:!1}):s=this._emptyDEMTexture=new t.Texture(e,r,n.RGBA,{premultiply:!1}),s}setupElevationDraw(e,n,i){const r=this.painter.context,s=r.gl,o=(a=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:t.DEMData.getUnpackVector(a),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var a;o.u_dem_size=this.sourceCache.getSource().tileSize,o.u_exaggeration=this.exaggeration();let l=null,h=null,c=1;if(i&&i.morphing&&this._useVertexMorphing){const t=i.morphing.srcDemTile,n=i.morphing.dstDemTile;c=i.morphing.phase,t&&n&&(this._prepareDemTileUniforms(e,t,o,"_prev")&&(h=t),this._prepareDemTileUniforms(e,n,o)&&(l=n))}if(h&&l?(r.activeTexture.set(s.TEXTURE2),l.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE,s.NEAREST),r.activeTexture.set(s.TEXTURE4),h.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE,s.NEAREST),o.u_dem_lerp=c):(l=this.terrainTileForTile[e.tileID.key],r.activeTexture.set(s.TEXTURE2),(this._prepareDemTileUniforms(e,l,o)?l.demTexture:this.emptyDEMTexture).bind(s.NEAREST,s.CLAMP_TO_EDGE)),r.activeTexture.set(s.TEXTURE3),i&&i.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE),this._depthFBO&&(o.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE),o.u_depth_size_inv=[1,1]),i&&i.useMeterToDem&&l){const e=(1<<l.tileID.canonical.z)*t.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;o.u_meter_to_dem=e}if(i&&i.labelPlaneMatrixInv&&(o.u_label_plane_matrix_inv=i.labelPlaneMatrixInv),n.setTerrainUniformValues(r,o),"globe"===this.painter.transform.projection.name){const t=this.globeUniformValues(this.painter.transform,e.tileID.canonical,i&&i.useDenormalizedUpVectorScale);n.setGlobeUniformValues(r,t)}}globeUniformValues(e,n,i){const r=e.projection;return{u_tile_tl_up:r.upVector(n,0,0),u_tile_tr_up:r.upVector(n,t.EXTENT,0),u_tile_br_up:r.upVector(n,t.EXTENT,t.EXTENT),u_tile_bl_up:r.upVector(n,0,t.EXTENT),u_tile_up_scale:i?t.globeMetersToEcef(1):r.upVectorScale(n,e.center.lat,e.worldSize).metersToTile}}renderToBackBuffer(e){const n=this.painter,i=this.painter.context;0!==e.length&&(i.bindFramebuffer.set(null),i.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(e,n,i,r,s){if("globe"===e.transform.projection.name)!function(e,n,i,r,s){const o=e.context,a=o.gl;let l,h;const c=e.options.showTerrainWireframe?2:0,u=e.transform,p=t.globeUseCustomAntiAliasing(e,o,u),d=(t,n)=>{if(h===t)return;const i=[bn[t],"PROJECTION_GLOBE_VIEW"];p&&i.push("CUSTOM_ANTIALIASING"),n&&i.push(bn[c]),l=e.useProgram("globeRaster",null,i),h=t},f=e.colorModeForRenderPass(),m=new t.DepthMode(a.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);xn.update(s);const g=t.calculateGlobeMercatorMatrix(u),y=[t.mercatorXfromLng(u.center.lng),t.mercatorYfromLat(u.center.lat)],v=c?[!1,!0]:[!1],_=e.globeSharedBuffers,T=[u.width*t.exported.devicePixelRatio,u.height*t.exported.devicePixelRatio],E=Float32Array.from(u.globeMatrix),x={useDenormalizedUpVectorScale:!0};if(v.forEach((c=>{const u=e.transform,p=In(u.zoom)*n.exaggeration();h=-1;const v=c?a.LINES:a.TRIANGLES;for(const h of r){const r=i.getTile(h),b=t.StencilMode.disabled,I=n.prevTerrainTileForTile[h.key],w=n.terrainTileForTile[h.key];En(I,w)&&xn.newMorphing(h.key,I,w,s,250),o.activeTexture.set(a.TEXTURE0),r.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE);const S=xn.getMorphValuesForProxy(h.key),R=S?1:0;S&&t.extend$1(x,{morphing:{srcDemTile:S.from,dstDemTile:S.to,phase:t.easeCubicInOut(S.phase)}});const C=t.tileCornersToBounds(h.canonical),A=t.getLatitudinalLod(C.getCenter().lat),D=t.getGridMatrix(h.canonical,C,A,u.worldSize/u._pixelsPerMercatorPixel),O=t.globeNormalizeECEF(t.globeTileBounds(h.canonical)),N=Tn(u.projMatrix,E,g,O,t.globeToMercatorTransition(u.zoom),y,u.frustumCorners.TL,u.frustumCorners.TR,u.frustumCorners.BR,u.frustumCorners.BL,u.globeCenterInViewSpace,u.globeRadius,T,p,D);if(d(R,c),n.setupElevationDraw(r,l,x),e.prepareDrawProgram(o,l,h.toUnwrapped()),_){const[n,i,r]=c?_.getWirefameBuffers(e.context,A):_.getGridBuffers(A,0!==p);l.draw(o,v,m,b,f,t.CullFaceMode.backCCW,N,"globe_raster",n,i,r)}}})),_){const s=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];p&&s.push("CUSTOM_ANTIALIASING"),l=e.useProgram("globeRaster",null,s);for(const h of r){const{x:r,y:s,z:c}=h.canonical,p=0===s,d=s===(1<<c)-1,[g,v,E,b]=_.getPoleBuffers(c);if(b&&(p||d)){const s=i.getTile(h);o.activeTexture.set(a.TEXTURE0),s.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE);let _=t.globePoleMatrixForTile(c,r,u);const I=t.globeNormalizeECEF(t.globeTileBounds(h.canonical)),w=(e,n)=>e.draw(o,a.TRIANGLES,m,t.StencilMode.disabled,f,t.CullFaceMode.disabled,Tn(u.projMatrix,_,_,I,0,y,u.frustumCorners.TL,u.frustumCorners.TR,u.frustumCorners.BR,u.frustumCorners.BL,u.globeCenterInViewSpace,u.globeRadius,T,0),"globe_pole_raster",n,E,b);n.setupElevationDraw(s,l,x),e.prepareDrawProgram(o,l,h.toUnwrapped()),p&&w(l,g),d&&(_=t.scale(t.create(),_,[1,-1,1]),w(l,v))}}}}(e,n,i,r,s);else{const o=e.context,a=o.gl;let l,h;const c=e.options.showTerrainWireframe?2:0,u=(t,n)=>{if(h===t)return;const i=[bn[t]];n&&i.push(bn[c]),l=e.useProgram("terrainRaster",null,i),h=t},p=e.colorModeForRenderPass(),d=new t.DepthMode(a.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);xn.update(s);const f=e.transform,m=In(f.zoom)*n.exaggeration();(c?[!1,!0]:[!1]).forEach((c=>{h=-1;const g=c?a.LINES:a.TRIANGLES,[y,v]=c?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const h of r){const r=i.getTile(h),_=t.StencilMode.disabled,T=n.prevTerrainTileForTile[h.key],E=n.terrainTileForTile[h.key];En(T,E)&&xn.newMorphing(h.key,T,E,s,250),o.activeTexture.set(a.TEXTURE0),r.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);const x=xn.getMorphValuesForProxy(h.key),b=x?1:0;let I;x&&(I={morphing:{srcDemTile:x.from,dstDemTile:x.to,phase:t.easeCubicInOut(x.phase)}});const w=_n(h.projMatrix,wn(h.canonical,f.renderWorldCopies)?m/10:m);u(b,c),n.setupElevationDraw(r,l,I),e.prepareDrawProgram(o,l,h.toUnwrapped()),l.draw(o,g,d,_,p,t.CullFaceMode.backCCW,w,"terrain_raster",n.gridBuffer,y,v)}}))}}(n,this,this.proxySourceCache,e,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),e.splice(0,e.length))}renderBatch(e){if(0===this._drapedRenderBatches.length)return e+1;this.renderingToTexture=!0;const n=this.painter,i=this.painter.context,r=this.proxySourceCache,s=this.proxiedCoords[r.id],o=this._drapedRenderBatches.shift(),a=[],l=n.style.order;let h=0;for(const c of s){const s=r.getTileByID(c.proxyTileKey),u=r.proxyCachedFBO[c.key]?r.proxyCachedFBO[c.key][e]:void 0,p=void 0!==u?r.renderCache[u]:this.pool[h++],d=void 0!==u;if(s.texture=p.tex,d&&!p.dirty){a.push(s.tileID);continue}let f;i.bindFramebuffer.set(p.fb.framebuffer),this.renderedToTile=!1,p.dirty&&(i.clear({color:t.Color.transparent,stencil:0}),p.dirty=!1);for(let t=o.start;t<=o.end;++t){const e=n.style._layers[l[t]];if(e.isHidden(n.transform.zoom))continue;const r=n.style._getLayerSourceCache(e),s=r?this.proxyToSource[c.key][r.id]:[c];if(!s)continue;const o=s;i.viewport.set([0,0,p.fb.width,p.fb.height]),f!==(r?r.id:null)&&(this._setupStencil(p,s,e,r),f=r?r.id:null),n.renderLayer(n,r,e,o)}this.renderedToTile?(p.dirty=!0,a.push(s.tileID)):d||--h,5===h&&(h=0,this.renderToBackBuffer(a))}return this.renderToBackBuffer(a),this.renderingToTexture=!1,i.bindFramebuffer.set(null),i.viewport.set([0,0,n.width,n.height]),o.end+1}postRender(){}renderCacheEfficiency(t){const e=t.order.length;if(0===e)return{efficiency:100};let n,i=0,r=0,s=!1;for(let o=0;o<e;++o){const e=t._layers[t.order[o]];this._style.isLayerDraped(e)?(s&&++i,++r):s||(s=!0,n=e.id)}return 0===r?{efficiency:100}:{efficiency:100*(1-i/r),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let t=0;return this._visibleDemTiles.filter((t=>t.dem)).forEach((e=>{t=Math.min(t,e.dem.tree.minimums[0])})),0===t?t:(t-30)*this._exaggeration}raycast(t,e,n){if(!this._visibleDemTiles)return null;const i=this._visibleDemTiles.filter((t=>t.dem)).map((i=>{const r=i.tileID,s=1<<r.overscaledZ,{x:o,y:a}=r.canonical,l=o/s,h=(o+1)/s,c=a/s,u=(a+1)/s;return{minx:l,miny:c,maxx:h,maxy:u,t:i.dem.tree.raycastRoot(l,c,h,u,t,e,n),tile:i}}));i.sort(((t,e)=>(null!==t.t?t.t:Number.MAX_VALUE)-(null!==e.t?e.t:Number.MAX_VALUE)));for(const r of i){if(null==r.t)return null;const i=r.tile.dem.tree.raycast(r.minx,r.miny,r.maxx,r.maxy,t,e,n);if(null!=i)return i}return null}_createFBO(){const e=this.painter.context,n=e.gl,i=this.drapeBufferSize;e.activeTexture.set(n.TEXTURE0);const r=new t.Texture(e,{width:i[0],height:i[1],data:null},n.RGBA);r.bind(n.LINEAR,n.CLAMP_TO_EDGE);const s=e.createFramebuffer(i[0],i[1],!1);return s.colorAttachment.set(r.texture),s.depthAttachment=new xt(e,s.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=e.createRenderbuffer(e.gl.DEPTH_STENCIL,i[0],i[1]),this._stencilRef=0,s.depthAttachment.set(this._sharedDepthStencil),e.clear({stencil:0})):s.depthAttachment.set(this._sharedDepthStencil),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:s,tex:r,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((t=>{const e=this._style._layers[t],n=e.isHidden(this.painter.transform.zoom);return"custom"===e.type?!n&&e.shouldRedrape():!n&&e.hasTransition()}))}_clearLineLayersFromRenderCache(){let e=!1;for(const t of this._style._getSources())if(t instanceof wt){e=!0;break}if(!e)return;const n={};for(let i=0;i<this._style.order.length;++i){const e=this._style._layers[this._style.order[i]],r=this._style._getLayerSourceCache(e);if(r&&!n[r.id]&&!e.isHidden(this.painter.transform.zoom)&&"line"===e.type&&e.widthExpression()instanceof t.ZoomDependentExpression){n[r.id]=!0;for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][r.id];if(e)for(const t of e)this._clearRenderCacheForTile(r.id,t)}}}}_clearRasterLayersFromRenderCache(){let t=!1;for(const n in this._style._sourceCaches)if(this._style._sourceCaches[n]._source instanceof St){t=!0;break}if(!t)return;const e={};for(let n=0;n<this._style.order.length;++n){const t=this._style._layers[this._style.order[n]],i=this._style._getLayerSourceCache(t);if(!i||e[i.id])continue;if(t.isHidden(this.painter.transform.zoom)||"raster"!==t.type)continue;const r=t.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][i.id];if(t)for(const e of t){const t=Rn(i.getTile(e),i.findLoadedParent(e,0),i,this.painter.transform,r);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(i.id,e)}}}}_setupDrapedRenderBatches(){const t=this._style.order,e=t.length;if(0===e)return;const n=[];let i,r=0,s=this._style._layers[t[r]];for(;!this._style.isLayerDraped(s)&&s.isHidden(this.painter.transform.zoom)&&++r<e;)s=this._style._layers[t[r]];for(;r<e;++r){const e=this._style._layers[t[r]];e.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(e)?void 0===i&&(i=r):void 0!==i&&(n.push({start:i,end:r-1}),i=void 0))}void 0!==i&&n.push({start:i,end:r-1}),this._drapedRenderBatches=n}_setupRenderCache(t){const e=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,e.renderCache.length>e.renderCachePool.length){const t=Object.values(e.proxyCachedFBO);e.proxyCachedFBO={};for(let n=0;n<t.length;++n){const i=Object.values(t[n]);e.renderCachePool.push(...i)}}return}this._clearRasterLayersFromRenderCache();const n=this.proxyCoords,i=this._tilesDirty;for(let s=n.length-1;s>=0;s--){const r=n[s];if(e.getTileByID(r.key),void 0!==e.proxyCachedFBO[r.key]){const n=t[r.key],s=this.proxyToSource[r.key];let o=0;for(const t in s){const e=s[t],r=n[t];if(!r||r.length!==e.length||e.some(((e,n)=>e!==r[n]||i[t]&&i[t].hasOwnProperty(e.key)))){o=-1;break}++o}for(const t in e.proxyCachedFBO[r.key])e.renderCache[e.proxyCachedFBO[r.key][t]].dirty=o<0||o!==Object.values(n).length}}const r=[...this._drapedRenderBatches];r.sort(((t,e)=>e.end-e.start-(t.end-t.start)));for(const s of r)for(const t of n){if(e.proxyCachedFBO[t.key])continue;let n=e.renderCachePool.pop();void 0===n&&e.renderCache.length<50&&(n=e.renderCache.length,e.renderCache.push(this._createFBO())),void 0!==n&&(e.proxyCachedFBO[t.key]={},e.proxyCachedFBO[t.key][s.start]=n,e.renderCache[n].dirty=!0)}this._tilesDirty={}}_setupStencil(t,e,n,i){if(!i||!this._sourceTilesOverlap[i.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const r=this.painter.context,s=r.gl;if(e.length<=1)return void(this._overlapStencilType=!1);let o;if(n.isTileClipped())o=e.length,this._overlapStencilMode.test={func:s.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(e[0].overscaledZ>e[e.length-1].overscaledZ))return void(this._overlapStencilType=!1);o=1,this._overlapStencilMode.test={func:s.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+o>255&&(r.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=o,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(e,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):t.StencilMode.disabled}_renderTileClippingMasks(e,n){const i=this.painter,r=this.painter.context,s=r.gl;i._tileClippingMaskIDs={},r.setColorMode(t.ColorMode.disabled),r.setDepthMode(t.DepthMode.disabled);const o=i.useProgram("clippingMask");for(const a of e){const e=i._tileClippingMaskIDs[a.key]=--n;o.draw(r,s.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:s.ALWAYS,mask:0},e,255,s.KEEP,s.KEEP,s.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Sn(a.projMatrix),"$clipping",i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments)}}pointCoordinate(e){const n=this.painter.transform;if(e.x<0||e.x>n.width||e.y<0||e.y>n.height)return null;const i=[e.x,e.y,1,1];t.transformMat4$1(i,i,n.pixelMatrixInverse),t.scale$1(i,i,1/i[3]),i[0]/=n.worldSize,i[1]/=n.worldSize;const r=n._camera.position,s=t.mercatorZfromAltitude(1,n.center.lat),o=[r[0],r[1],r[2]/s,0],a=t.subtract([],i.slice(0,3),o);t.normalize(a,a);const l=this.raycast(o,a,this._exaggeration);return null!==l&&l?(t.scaleAndAdd(o,o,a,l),o[3]=o[2],o[2]*=s,o):null}drawDepth(){const e=this.painter,n=e.context,i=this.proxySourceCache,r=Math.ceil(e.width),s=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===r&&this._depthFBO.height===s||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const e=n.gl,i=n.createFramebuffer(r,s,!0);n.activeTexture.set(e.TEXTURE0);const o=new t.Texture(n,{width:r,height:s,data:null},e.RGBA);o.bind(e.NEAREST,e.CLAMP_TO_EDGE),i.colorAttachment.set(o.texture);const a=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,r,s);i.depthAttachment.set(a),this._depthFBO=i,this._depthTexture=o}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,r,s]),function(e,n,i,r){if("globe"===e.transform.projection.name)return;const s=e.context,o=s.gl;s.clear({depth:1});const a=e.useProgram("terrainDepth"),l=new t.DepthMode(o.LESS,t.DepthMode.ReadWrite,e.depthRangeFor3D);for(const h of r){const e=i.getTile(h),r=_n(h.projMatrix,0);n.setupElevationDraw(e,a),a.draw(s,o.TRIANGLES,l,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.backCCW,r,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(e,this,i,this.proxyCoords)}_setupProxiedCoordsForOrtho(t,e,n){if(t.getSource()instanceof Ct)return this._setupProxiedCoordsForImageSource(t,e,n);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};const i=this.proxiedCoords[t.id]=[],r=this.proxyCoords;for(let o=0;o<r.length;o++){const e=r[o],s=this._findTileCoveringTileID(e,t);if(s){const r=this._createProxiedId(e,s,n[e.key]&&n[e.key][t.id]);i.push(r),this.proxyToSource[e.key][t.id]=[r]}}let s=!1;for(let o=0;o<e.length;o++){const r=t.getTile(e[o]);if(!r||!r.hasData())continue;const a=this._findTileCoveringTileID(r.tileID,this.proxySourceCache);if(a&&a.tileID.canonical.z!==r.tileID.canonical.z){const e=this.proxyToSource[a.tileID.key][t.id],o=this._createProxiedId(a.tileID,r,n[a.tileID.key]&&n[a.tileID.key][t.id]);e?e.splice(e.length-1,0,o):this.proxyToSource[a.tileID.key][t.id]=[o],i.push(o),s=!0}}this._sourceTilesOverlap[t.id]=s}_setupProxiedCoordsForImageSource(e,n,i){if(!e.getSource().loaded())return;const r=this.proxiedCoords[e.id]=[],s=this.proxyCoords,o=e.getSource(),a=new t.Point(o.tileID.x,o.tileID.y)._div(1<<o.tileID.z),l=o.coordinates.map(t.MercatorCoordinate.fromLngLat).reduce(((t,e)=>(t.min.x=Math.min(t.min.x,e.x-a.x),t.min.y=Math.min(t.min.y,e.y-a.y),t.max.x=Math.max(t.max.x,e.x-a.x),t.max.y=Math.max(t.max.y,e.y-a.y),t)),{min:new t.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),h=(e,n)=>{const i=e.wrap+e.canonical.x/(1<<e.canonical.z),r=e.canonical.y/(1<<e.canonical.z),s=t.EXTENT/(1<<e.canonical.z),o=n.wrap+n.canonical.x/(1<<n.canonical.z),a=n.canonical.y/(1<<n.canonical.z);return i+s<o+l.min.x||i>o+l.max.x||r+s<a+l.min.y||r>a+l.max.y};for(let t=0;t<s.length;t++){const o=s[t];for(let t=0;t<n.length;t++){const s=e.getTile(n[t]);if(!s||!s.hasData())continue;if(h(o,s.tileID))continue;const a=this._createProxiedId(o,s,i[o.key]&&i[o.key][e.id]),l=this.proxyToSource[o.key][e.id];l?l.push(a):this.proxyToSource[o.key][e.id]=[a],r.push(a)}}}_createProxiedId(e,n,i){let r=this.orthoMatrix;if(i){const t=i.find((t=>t.key===n.tileID.key));if(t)return t}if(n.tileID.key!==e.key){const i=e.canonical.z-n.tileID.canonical.z;let s,o,a;r=t.create();const l=n.tileID.wrap-e.wrap<<e.overscaledZ;i>0?(s=t.EXTENT>>i,o=s*((n.tileID.canonical.x<<i)-e.canonical.x+l),a=s*((n.tileID.canonical.y<<i)-e.canonical.y)):(s=t.EXTENT<<-i,o=t.EXTENT*(n.tileID.canonical.x-(e.canonical.x+l<<-i)),a=t.EXTENT*(n.tileID.canonical.y-(e.canonical.y<<-i))),t.ortho(r,0,s,0,s,0,1),t.translate(r,r,[o,a,0])}return new Dn(n.tileID,e.key,r)}_findTileCoveringTileID(e,n){let i=n.getTile(e);if(i&&i.hasData())return i;const r=this._findCoveringTileCache[n.id],s=r[e.key];if(i=s?n.getTileByID(s):null,i&&i.hasData()||null===s)return i;let o=i?i.tileID:e,a=o.overscaledZ;const l=n.getSource().minzoom,h=[];if(!s){const r=n.getSource().maxzoom;if(e.canonical.z>=r){const i=e.canonical.z-r;n.getSource().reparseOverscaled?(a=Math.max(e.canonical.z+2,n.transform.tileZoom),o=new t.OverscaledTileID(a,e.wrap,r,e.canonical.x>>i,e.canonical.y>>i)):0!==i&&(a=r,o=new t.OverscaledTileID(a,e.wrap,r,e.canonical.x>>i,e.canonical.y>>i))}o.key!==e.key&&(h.push(o.key),i=n.getTile(o))}const c=t=>{h.forEach((e=>{r[e]=t})),h.length=0};for(a-=1;a>=l&&(!i||!i.hasData());a--){i&&c(i.tileID.key);const t=o.calculateScaledKey(a);if(i=n.getTileByID(t),i&&i.hasData())break;const e=r[t];if(null===e)break;void 0===e?h.push(t):i=n.getTileByID(e)}return c(i?i.tileID.key:null),i&&i.hasData()?i:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(t,e){let n=this._tilesDirty[t];n||(n=this._tilesDirty[t]={}),n[e.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const e=function(e){let n=0;const i=new t.StructArrayLayout2ui4,r=131;for(let t=1;t<129;t++){for(let e=1;e<129;e++)n=t*r+e,i.emplaceBack(n,n+1),i.emplaceBack(n,n+r),i.emplaceBack(n+1,n+r),128===t&&i.emplaceBack(n+r,n+r+1);i.emplaceBack(n+1,n+1+r)}return i}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(e),this.wireframeSegments=t.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,e.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Nn{static cacheKey(t,e,n,i){let r="".concat(e).concat(i?i.cacheKey:"");for(const s of n)t.usedDefines.includes(s)&&(r+="/".concat(s));return r}constructor(e,n,i,r,s,o){const a=e.gl;this.program=a.createProgram();const l=function(t){const e=[];for(let n=0;n<t.length;n++){if(null===t[n])continue;const i=t[n].split(" ");e.push(i.pop())}return e}(i.staticAttributes),h=r?r.getBinderAttributes():[],c=l.concat(h);let u=r?r.defines():[];u=u.concat(o.map((t=>"#define ".concat(t))));const p=e.isWebGL2?"#version 300 es\n":"",d=p+u.concat(e.extStandardDerivatives&&0===p.length?"#extension GL_OES_standard_derivatives : enable\n".concat(hn):hn,hn,ln,an.fragmentSource,sn.fragmentSource,i.fragmentSource).join("\n"),f=p+u.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",ln,an.vertexSource,sn.vertexSource,rn.vertexSource,i.vertexSource).join("\n"),m=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);a.shaderSource(m,d),a.compileShader(m),a.attachShader(this.program,m);const g=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(g,f),a.compileShader(g),a.attachShader(this.program,g),this.attributes={},this.numAttributes=c.length;for(let t=0;t<this.numAttributes;t++)c[t]&&(a.bindAttribLocation(this.program,t,c[t]),this.attributes[c[t]]=t);a.linkProgram(this.program),a.deleteShader(g),a.deleteShader(m),this.fixedUniforms=s(e),this.binderUniforms=r?r.getUniforms(e):[],o.includes("TERRAIN")&&(this.terrainUniforms=(e=>({u_dem:new t.Uniform1i(e),u_dem_prev:new t.Uniform1i(e),u_dem_unpack:new t.Uniform4f(e),u_dem_tl:new t.Uniform2f(e),u_dem_scale:new t.Uniform1f(e),u_dem_tl_prev:new t.Uniform2f(e),u_dem_scale_prev:new t.Uniform1f(e),u_dem_size:new t.Uniform1f(e),u_dem_lerp:new t.Uniform1f(e),u_exaggeration:new t.Uniform1f(e),u_depth:new t.Uniform1i(e),u_depth_size_inv:new t.Uniform2f(e),u_meter_to_dem:new t.Uniform1f(e),u_label_plane_matrix_inv:new t.UniformMatrix4f(e)}))(e)),o.includes("GLOBE")&&(this.globeUniforms=(e=>({u_tile_tl_up:new t.Uniform3f(e),u_tile_tr_up:new t.Uniform3f(e),u_tile_br_up:new t.Uniform3f(e),u_tile_bl_up:new t.Uniform3f(e),u_tile_up_scale:new t.Uniform1f(e)}))(e)),o.includes("FOG")&&(this.fogUniforms=(e=>({u_fog_matrix:new t.UniformMatrix4f(e),u_fog_range:new t.Uniform2f(e),u_fog_color:new t.Uniform4f(e),u_fog_horizon_blend:new t.Uniform1f(e),u_fog_temporal_offset:new t.Uniform1f(e),u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_globe_pos:new t.Uniform3f(e),u_globe_radius:new t.Uniform1f(e),u_globe_transition:new t.Uniform1f(e),u_is_globe:new t.Uniform1i(e),u_viewport:new t.Uniform2f(e)}))(e))}}setTerrainUniformValues(t,e){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t]&&n[t].set(this.program,t,e[t])}}setGlobeUniformValues(t,e){if(!this.globeUniforms)return;const n=this.globeUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t]&&n[t].set(this.program,t,e[t])}}setFogUniformValues(t,e){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t].set(this.program,t,e[t])}}draw(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){const m=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(i),t.setColorMode(r),t.setCullFace(s);for(const y of Object.keys(this.fixedUniforms))this.fixedUniforms[y].set(this.program,y,o[y]);d&&d.setUniforms(this.program,t,this.binderUniforms,u,{zoom:p});const g={[m.LINES]:2,[m.TRIANGLES]:3,[m.LINE_STRIP]:1}[e];for(const y of c.get()){const n=y.vaos||(y.vaos={});(n[a]||(n[a]=new dn)).bind(t,this,l,d?d.getPaintVertexBuffers():[],h,y.vertexOffset,f||[]),m.drawElements(e,y.primitiveLength*g,m.UNSIGNED_SHORT,y.primitiveOffset*g*2)}}}function Mn(t,e){const n=Math.pow(2,e.tileID.overscaledZ),i=e.tileSize*Math.pow(2,t.transform.tileZoom)/n,r=i*(e.tileID.canonical.x+e.tileID.wrap*n),s=i*e.tileID.canonical.y;return{u_image:0,u_texsize:e.imageAtlasTexture.size,u_tile_units_to_pixels:1/D(e,1,t.transform.tileZoom),u_pixel_coord_upper:[r>>16,s>>16],u_pixel_coord_lower:[65535&r,65535&s]}}const Pn=t.create(),Fn=(e,n,i,r,s,o,a,l,h,c,u)=>{const p=n.style.light,d=p.properties.get("position"),f=[d.x,d.y,d.z],m=t.create$1();"viewport"===p.properties.get("anchor")&&(t.fromRotation(m,-n.transform.angle),t.transformMat3(f,f,m));const g=p.properties.get("color"),y=n.transform,v={u_matrix:e,u_lightpos:f,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[g.r,g.g,g.b],u_vertical_gradient:+i,u_opacity:r,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Pn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:s,u_edge_radius:o};return"globe"===y.projection.name&&(v.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],v.u_zoom_transition=h,v.u_inv_rot_matrix=u,v.u_merc_center=c,v.u_up_dir=y.projection.upVector(new t.CanonicalTileID(0,0,0),c[0]*t.EXTENT,c[1]*t.EXTENT),v.u_height_lift=l),v},Ln=(e,n,i,r,s,o,a,l,h,c,u,p)=>{const d=Fn(e,n,i,r,s,o,a,h,c,u,p),f={u_height_factor:-Math.pow(2,a.overscaledZ)/l.tileSize/8};return t.extend(d,Mn(n,l),f)},kn=t=>({u_matrix:t}),Un=(e,n,i)=>t.extend(kn(e),Mn(n,i)),Bn=(t,e)=>({u_matrix:t,u_world:e}),zn=(e,n,i,r)=>t.extend(Un(e,n,i),{u_world:r}),Gn=t.create(),Hn=(e,n,i,r,s,o)=>{const a=e.transform,l="globe"===a.projection.name;let h;if("map"===o.paint.get("circle-pitch-alignment"))if(l){const e=t.globePixelsToTileUnits(a.zoom,n.canonical)*a._pixelsPerMercatorPixel;h=Float32Array.from([e,0,0,e])}else h=a.calculatePixelsToTileUnitsMatrix(i);else h=new Float32Array([a.pixelsToGLUnits[0],0,0,a.pixelsToGLUnits[1]]);const c={u_camera_to_center_distance:a.cameraToCenterDistance,u_matrix:e.translatePosMatrix(n.projMatrix,i,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_device_pixel_ratio:t.exported.devicePixelRatio,u_extrude_scale:h,u_inv_rot_matrix:Gn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){c.u_inv_rot_matrix=r,c.u_merc_center=s,c.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],c.u_zoom_transition=t.globeToMercatorTransition(a.zoom);const e=s[0]*t.EXTENT,i=s[1]*t.EXTENT;c.u_up_dir=a.projection.upVector(new t.CanonicalTileID(0,0,0),e,i)}return c},jn=t=>{const e=[];return"map"===t.paint.get("circle-pitch-alignment")&&e.push("PITCH_WITH_MAP"),"map"===t.paint.get("circle-pitch-scale")&&e.push("SCALE_WITH_MAP"),e},Vn=(e,n,i,r)=>{const s=t.EXTENT/i.tileSize;return{u_matrix:e,u_camera_to_center_distance:n.getCameraToCenterDistance(r),u_extrude_scale:[n.pixelsToGLUnits[0]/s,n.pixelsToGLUnits[1]/s]}},Wn=function(t,e){return{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},Zn=t.create(),Yn=(e,n,i,r,s,o,a)=>{const l=e.transform,h="globe"===l.projection.name,c=h?t.globePixelsToTileUnits(l.zoom,n.canonical)*l._pixelsPerMercatorPixel:D(i,1,o),u={u_matrix:n.projMatrix,u_extrude_scale:c,u_intensity:a,u_inv_rot_matrix:Zn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(h){u.u_inv_rot_matrix=r,u.u_merc_center=s,u.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],u.u_zoom_transition=t.globeToMercatorTransition(l.zoom);const e=s[0]*t.EXTENT,i=s[1]*t.EXTENT;u.u_up_dir=l.projection.upVector(new t.CanonicalTileID(0,0,0),e,i)}return u},qn=(t,e,n,i,r,s,o)=>{const a=t.transform,l=a.calculatePixelsToTileUnitsMatrix(e);return{u_matrix:Qn(t,e,n,i),u_pixels_to_tile_units:l,u_device_pixel_ratio:s,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:r,u_texsize:Jn(n)?e.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Kn(e,t.transform),u_alpha_discard_threshold:0,u_trim_offset:o}},Xn=(t,e,n,i,r)=>{const s=t.transform;return{u_matrix:Qn(t,e,n,i),u_texsize:e.imageAtlasTexture.size,u_pixels_to_tile_units:s.calculatePixelsToTileUnitsMatrix(e),u_device_pixel_ratio:r,u_image:0,u_tile_units_to_pixels:Kn(e,s),u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Kn(t,e){return 1/D(t,1,e.tileZoom)}function Qn(t,e,n,i){return t.translatePosMatrix(i||e.tileID.projMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function Jn(t){const e=t.paint.get("line-dasharray").value;return e.value||"constant"!==e.kind}const $n=(t,e,n,i,r,s)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_fade_t:i.mix,u_opacity:i.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(a=r.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:ti(r.paint.get("raster-hue-rotate")),u_perspective_transform:s};var o,a};function ti(t){t*=Math.PI/180;const e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}const ei=t.create(),ni=(e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g)=>{const y=s.transform,v={u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:y.cameraToCenterDistance,u_rotate_symbol:+i,u_aspect_ratio:y.width/y.height,u_fade_change:s.options.fadeDuration?s.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:l,u_is_text:+h,u_pitch_with_map:+r,u_texsize:c,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:ei,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:ei,u_up_vector:[0,-1,0]};return"globe"===g.name&&(v.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],v.u_zoom_transition=p,v.u_inv_rot_matrix=f,v.u_merc_center=d,v.u_camera_forward=y._camera.forward(),v.u_ecef_origin=t.globeECEFOrigin(y.globeMatrix,u.toUnwrapped()),v.u_tile_matrix=Float32Array.from(y.globeMatrix),v.u_up_vector=m),v},ii=(e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y)=>t.extend(ni(e,n,i,r,s,o,a,l,h,c,p,d,f,m,g,y),{u_gamma_scale:r?s.transform.cameraToCenterDistance*Math.cos(s.terrain?0:s.transform._pitch):1,u_device_pixel_ratio:t.exported.devicePixelRatio,u_is_halo:+u}),ri=(e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g)=>t.extend(ii(e,n,i,r,s,o,a,l,!0,h,!0,u,p,d,f,m,g),{u_texsize_icon:c,u_texture_icon:1}),si=(t,e,n)=>({u_matrix:t,u_opacity:e,u_color:n}),oi=(e,n,i,r,s)=>t.extend(function(t,e,n){const i=e.imageManager.getPattern(t.toString()),{width:r,height:s}=e.imageManager.getPixelSize(),o=Math.pow(2,n.tileID.overscaledZ),a=n.tileSize*Math.pow(2,e.transform.tileZoom)/o,l=a*(n.tileID.canonical.x+n.tileID.wrap*o),h=a*n.tileID.canonical.y;return{u_image:0,u_pattern_tl:i.tl,u_pattern_br:i.br,u_texsize:[r,s],u_pattern_size:i.displaySize,u_tile_units_to_pixels:1/D(n,1,e.transform.tileZoom),u_pixel_coord_upper:[l>>16,h>>16],u_pixel_coord_lower:[65535&l,65535&h]}}(r,i,s),{u_matrix:e,u_opacity:n}),ai={fillExtrusion:e=>({u_matrix:new t.UniformMatrix4f(e),u_lightpos:new t.Uniform3f(e),u_lightintensity:new t.Uniform1f(e),u_lightcolor:new t.Uniform3f(e),u_vertical_gradient:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_edge_radius:new t.Uniform1f(e),u_ao:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_up_dir:new t.Uniform3f(e),u_height_lift:new t.Uniform1f(e)}),fillExtrusionPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_lightpos:new t.Uniform3f(e),u_lightintensity:new t.Uniform1f(e),u_lightcolor:new t.Uniform3f(e),u_vertical_gradient:new t.Uniform1f(e),u_height_factor:new t.Uniform1f(e),u_edge_radius:new t.Uniform1f(e),u_ao:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_up_dir:new t.Uniform3f(e),u_height_lift:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e)}),fill:e=>({u_matrix:new t.UniformMatrix4f(e)}),fillPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}),fillOutline:e=>({u_matrix:new t.UniformMatrix4f(e),u_world:new t.Uniform2f(e)}),fillOutlinePattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_world:new t.Uniform2f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}),circle:e=>({u_camera_to_center_distance:new t.Uniform1f(e),u_extrude_scale:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_up_dir:new t.Uniform3f(e)}),collisionBox:e=>({u_matrix:new t.UniformMatrix4f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_extrude_scale:new t.Uniform2f(e)}),collisionCircle:e=>({u_matrix:new t.UniformMatrix4f(e),u_inv_matrix:new t.UniformMatrix4f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_viewport_size:new t.Uniform2f(e)}),debug:e=>({u_color:new t.UniformColor(e),u_matrix:new t.UniformMatrix4f(e),u_overlay:new t.Uniform1i(e),u_overlay_scale:new t.Uniform1f(e)}),clippingMask:e=>({u_matrix:new t.UniformMatrix4f(e)}),heatmap:e=>({u_extrude_scale:new t.Uniform1f(e),u_intensity:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_up_dir:new t.Uniform3f(e)}),heatmapTexture:e=>({u_image:new t.Uniform1i(e),u_color_ramp:new t.Uniform1i(e),u_opacity:new t.Uniform1f(e)}),hillshade:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_latrange:new t.Uniform2f(e),u_light:new t.Uniform2f(e),u_shadow:new t.UniformColor(e),u_highlight:new t.UniformColor(e),u_accent:new t.UniformColor(e)}),hillshadePrepare:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_dimension:new t.Uniform2f(e),u_zoom:new t.Uniform1f(e),u_unpack:new t.Uniform4f(e)}),line:e=>({u_matrix:new t.UniformMatrix4f(e),u_pixels_to_tile_units:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_units_to_pixels:new t.Uniform2f(e),u_dash_image:new t.Uniform1i(e),u_gradient_image:new t.Uniform1i(e),u_image_height:new t.Uniform1f(e),u_texsize:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_alpha_discard_threshold:new t.Uniform1f(e),u_trim_offset:new t.Uniform2f(e)}),linePattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_texsize:new t.Uniform2f(e),u_pixels_to_tile_units:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_units_to_pixels:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_alpha_discard_threshold:new t.Uniform1f(e)}),raster:e=>({u_matrix:new t.UniformMatrix4f(e),u_tl_parent:new t.Uniform2f(e),u_scale_parent:new t.Uniform1f(e),u_fade_t:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_image0:new t.Uniform1i(e),u_image1:new t.Uniform1i(e),u_brightness_low:new t.Uniform1f(e),u_brightness_high:new t.Uniform1f(e),u_saturation_factor:new t.Uniform1f(e),u_contrast_factor:new t.Uniform1f(e),u_spin_weights:new t.Uniform3f(e),u_perspective_transform:new t.Uniform2f(e)}),symbolIcon:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_camera_forward:new t.Uniform3f(e),u_tile_matrix:new t.UniformMatrix4f(e),u_up_vector:new t.Uniform3f(e),u_ecef_origin:new t.Uniform3f(e),u_texture:new t.Uniform1i(e)}),symbolSDF:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_texture:new t.Uniform1i(e),u_gamma_scale:new t.Uniform1f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_camera_forward:new t.Uniform3f(e),u_tile_matrix:new t.UniformMatrix4f(e),u_up_vector:new t.Uniform3f(e),u_ecef_origin:new t.Uniform3f(e),u_is_halo:new t.Uniform1i(e)}),symbolTextAndIcon:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_texsize_icon:new t.Uniform2f(e),u_texture:new t.Uniform1i(e),u_texture_icon:new t.Uniform1i(e),u_gamma_scale:new t.Uniform1f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_is_halo:new t.Uniform1i(e)}),background:e=>({u_matrix:new t.UniformMatrix4f(e),u_opacity:new t.Uniform1f(e),u_color:new t.UniformColor(e)}),backgroundPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_opacity:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_pattern_tl:new t.Uniform2f(e),u_pattern_br:new t.Uniform2f(e),u_texsize:new t.Uniform2f(e),u_pattern_size:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}),terrainRaster:vn,terrainDepth:vn,skybox:e=>({u_matrix:new t.UniformMatrix4f(e),u_sun_direction:new t.Uniform3f(e),u_cubemap:new t.Uniform1i(e),u_opacity:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e)}),skyboxGradient:e=>({u_matrix:new t.UniformMatrix4f(e),u_color_ramp:new t.Uniform1i(e),u_center_direction:new t.Uniform3f(e),u_radius:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e)}),skyboxCapture:e=>({u_matrix_3f:new t.UniformMatrix3f(e),u_sun_direction:new t.Uniform3f(e),u_sun_intensity:new t.Uniform1f(e),u_color_tint_r:new t.Uniform4f(e),u_color_tint_m:new t.Uniform4f(e),u_luminance:new t.Uniform1f(e)}),globeRaster:e=>({u_proj_matrix:new t.UniformMatrix4f(e),u_globe_matrix:new t.UniformMatrix4f(e),u_normalize_matrix:new t.UniformMatrix4f(e),u_merc_matrix:new t.UniformMatrix4f(e),u_zoom_transition:new t.Uniform1f(e),u_merc_center:new t.Uniform2f(e),u_image0:new t.Uniform1i(e),u_grid_matrix:new t.UniformMatrix3f(e),u_skirt_height:new t.Uniform1f(e),u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_globe_pos:new t.Uniform3f(e),u_globe_radius:new t.Uniform1f(e),u_viewport:new t.Uniform2f(e)}),globeAtmosphere:e=>({u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_horizon:new t.Uniform1f(e),u_transition:new t.Uniform1f(e),u_fadeout_range:new t.Uniform1f(e),u_color:new t.Uniform4f(e),u_high_color:new t.Uniform4f(e),u_space_color:new t.Uniform4f(e),u_star_intensity:new t.Uniform1f(e),u_star_density:new t.Uniform1f(e),u_star_size:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e),u_horizon_angle:new t.Uniform1f(e),u_rotation_matrix:new t.UniformMatrix4f(e)})};let li;function hi(e,n,i,r,s,o,a){const l=e.context,h=l.gl,c=e.transform,u=e.useProgram("collisionBox"),p=[];let d=0,f=0;for(let E=0;E<r.length;E++){const m=r[E],g=n.getTile(m),y=g.getBucket(i);if(!y)continue;const v=ve(m,y,c);let _=v;0===s[0]&&0===s[1]||(_=e.translatePosMatrix(v,g,s,o));const T=a?y.textCollisionBox:y.iconCollisionBox,x=y.collisionCircleArray;if(x.length>0){const e=t.create(),n=_;t.mul(e,y.placementInvProjMatrix,c.glCoordMatrix),t.mul(e,e,y.placementViewportMatrix),p.push({circleArray:x,circleOffset:f,transform:n,invTransform:e,projection:y.getProjection()}),d+=x.length/4,f=d}T&&(e.terrain&&e.terrain.setupElevationDraw(g,u),u.draw(l,h.LINES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,Vn(_,c,g,y.getProjection()),i.id,T.layoutVertexBuffer,T.indexBuffer,T.segments,null,c.zoom,null,[T.collisionVertexBuffer,T.collisionVertexBufferExt]))}if(!a||!p.length)return;const m=e.useProgram("collisionCircle"),g=new t.StructArrayLayout2f1f2i16;g.resize(4*d),g._trim();let y=0;for(const t of p)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,i=t.circleArray[n+0],r=t.circleArray[n+1],s=t.circleArray[n+2],o=t.circleArray[n+3];g.emplace(y++,i,r,s,o,0),g.emplace(y++,i,r,s,o,1),g.emplace(y++,i,r,s,o,2),g.emplace(y++,i,r,s,o,3)}(!li||li.length<2*d)&&(li=function(e){const n=2*e,i=new t.StructArrayLayout3ui6;i.resize(n),i._trim();for(let t=0;t<n;t++){const e=6*t;i.uint16[e+0]=4*t+0,i.uint16[e+1]=4*t+1,i.uint16[e+2]=4*t+2,i.uint16[e+3]=4*t+2,i.uint16[e+4]=4*t+3,i.uint16[e+5]=4*t+0}return i}(d));const v=l.createIndexBuffer(li,!0),_=l.createVertexBuffer(g,t.collisionCircleLayout.members,!0);for(const E of p){const n={u_matrix:E.transform,u_inv_matrix:E.invTransform,u_camera_to_center_distance:(T=c).getCameraToCenterDistance(E.projection),u_viewport_size:[T.width,T.height]};m.draw(l,h.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,n,i.id,_,v,t.SegmentVector.simpleSegment(0,2*E.circleOffset,E.circleArray.length,E.circleArray.length/2),null,c.zoom)}var T;_.destroy(),v.destroy()}const ci=t.create();function ui(e,n){let{width:i,height:r,anchor:s,textOffset:o,textScale:a}=e;const{horizontalAlign:l,verticalAlign:h}=t.getAnchorAlignment(s),c=-(l-.5)*i,u=-(h-.5)*r,p=t.evaluateVariableOffset(s,o);return new t.Point((c/a+p[0])*n,(u/a+p[1])*n)}function pi(e,n,i,r,s,o,a,l,h,c,u){const p=e.text.placedSymbolArray,d=e.text.dynamicLayoutVertexArray,f=e.icon.dynamicLayoutVertexArray,m={},g=e.getProjection(),y=_e(l,g,o),v=o.elevation,_=g.upVectorScale(l.canonical,o.center.lat,o.worldSize).metersToTile;d.clear();for(let T=0;T<p.length;T++){const f=p.get(T),{tileAnchorX:E,tileAnchorY:x,numGlyphs:b}=f,I=f.hidden||!f.crossTileID||e.allowVerticalPlacement&&!f.placedOrientation?null:r[f.crossTileID];if(I){let r=0,p=0,T=0;if(v){const t=v?v.getAtTileOffset(l,E,x):0,[e,n,i]=g.upVector(l.canonical,E,x);r=t*e*_,p=t*n*_,T=t*i*_}let[w,S,R,C]=ie(f.projectedAnchorX+r,f.projectedAnchorY+p,f.projectedAnchorZ+T,i?y:a);const A=re(o.getCameraToCenterDistance(g),C);let D=s.evaluateSizeForFeature(e.textSizeData,c,f)*A/t.ONE_EM;i&&(D*=e.tilePixelRatio/h);const O=ui(I,D);i?(({x:w,y:S,z:R}=g.projectTilePoint(E+O.x,x+O.y,l.canonical)),[w,S,R]=ie(w+r,S+p,R+T,a)):(n&&O._rotate(-o.angle),w+=O.x,S+=O.y,R=0);const N=e.allowVerticalPlacement&&f.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<b;e++)t.addDynamicAttributes(d,w,S,R,N);u&&f.associatedIconIndex>=0&&(m[f.associatedIconIndex]={x:w,y:S,z:R,angle:N})}else de(b,d)}if(u){f.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const i=n.get(e),{numGlyphs:r}=i,s=m[e];if(i.hidden||!s)de(r,f);else{const{x:e,y:n,z:i,angle:o}=s;for(let s=0;s<r;s++)t.addDynamicAttributes(f,e,n,i,o)}}e.icon.dynamicLayoutVertexBuffer.updateData(f)}e.text.dynamicLayoutVertexBuffer.updateData(d)}function di(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function fi(e,n,i,r,s,o,a,l,h,c,u,p){const d=e.context,f=d.gl,m=e.transform,g="map"===l,y="map"===h,v=g&&"point"!==i.layout.get("symbol-placement"),_=g&&!y&&!v,T=void 0!==i.layout.get("symbol-sort-key").constantOr(1);let E=!1;const x=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),b=[t.mercatorXfromLng(m.center.lng),t.mercatorYfromLat(m.center.lat)],I=i.layout.get("text-variable-anchor"),w="globe"===m.projection.name,S=[],R=[0,-1,0];let C=R;!w&&!m.mercatorFromTransition||g||(C=function(e){const n=e._camera.getWorldToCamera(e.worldSize,1),i=t.multiply([],n,e.globeMatrix);t.invert(i,i);const r=[0,0,0],s=[0,1,0,0];return t.transformMat4$1(s,s,i),r[0]=s[0],r[1]=s[1],r[2]=s[2],t.normalize(r,r),r}(m));for(const A of r){const r=n.getTile(A),l=r.getBucket(i);if(!l)continue;if("mercator"===l.projection.name&&w)continue;const h=s?l.text:l.icon;if(!h||l.fullyClipped||!h.segments.get().length)continue;const u=h.programConfigurations.get(i.id),p=s||l.sdfIcons,d=s?l.textSizeData:l.iconSizeData,x=y||0!==m.pitch,D=t.evaluateSizeForZoom(d,m.zoom);let O,N,M,P,F=[0,0],L=null;if(s)N=r.glyphAtlasTexture,M=f.LINEAR,O=r.glyphAtlasTexture.size,l.iconsInText&&(F=r.imageAtlasTexture.size,L=r.imageAtlasTexture,P=x||e.options.rotating||e.options.zooming||"composite"===d.kind||"camera"===d.kind?f.LINEAR:f.NEAREST);else{const t=1!==i.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;N=r.imageAtlasTexture,M=p||e.options.rotating||e.options.zooming||t||x?f.LINEAR:f.NEAREST,O=r.imageAtlasTexture.size}const k="globe"===l.projection.name,U=k?C:R,B=k?t.globeToMercatorTransition(m.zoom):0,z=_e(A,l.getProjection(),m),G=m.calculatePixelsToTileUnitsMatrix(r),H=te(z,r.tileID.canonical,y,g,m,l.getProjection(),G),j=e.terrain&&y&&v?t.invert(t.create(),H):ci,V=ne(z,r.tileID.canonical,y,g,m,l.getProjection(),G),W=I&&l.hasTextData(),Z="none"!==i.layout.get("icon-text-fit")&&W&&l.hasIconData();if(v){const t=m.elevation,n=t?t.getAtTileOffsetFunc(A,m.center.lat,m.worldSize,l.getProjection()):null,i=ee(z,r.tileID.canonical,y,g,m,l.getProjection(),G);oe(l,z,e,s,i,V,y,c,n,A)}const Y=v||s&&I||Z,q=e.translatePosMatrix(z,r,o,a),X=Y?ci:H,K=e.translatePosMatrix(V,r,o,a,!0),Q=l.getProjection().createInversionMatrix(m,A.canonical),J=[];e.terrainRenderModeElevated()&&y&&J.push("PITCH_WITH_MAP_TERRAIN"),k&&J.push("PROJECTION_GLOBE_VIEW"),Y&&J.push("PROJECTED_POS_ON_VIEWPORT");const $=p&&0!==i.paint.get(s?"text-halo-width":"icon-halo-width").constantOr(1);let tt;tt=p?l.iconsInText?ri(d.kind,D,_,y,e,q,X,K,O,F,A,B,b,Q,U,l.getProjection()):ii(d.kind,D,_,y,e,q,X,K,s,O,!0,A,B,b,Q,U,l.getProjection()):ni(d.kind,D,_,y,e,q,X,K,s,O,A,B,b,Q,U,l.getProjection());const et={program:e.useProgram(di(p,s,l),u,J),buffers:h,uniformValues:tt,atlasTexture:N,atlasTextureIcon:L,atlasInterpolation:M,atlasInterpolationIcon:P,isSDF:p,hasHalo:$,tile:r,labelPlaneMatrixInv:j};if(T&&l.canOverlap){E=!0;const e=h.segments.get();for(const n of e)S.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:et})}else S.push({segments:h.segments,sortKey:0,state:et})}E&&S.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of S){const n=t.state;if(e.terrain&&e.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!w,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),d.activeTexture.set(f.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,f.CLAMP_TO_EDGE),n.atlasTextureIcon&&(d.activeTexture.set(f.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),n.isSDF){const r=n.uniformValues;n.hasHalo&&(r.u_is_halo=1,mi(n.buffers,t.segments,i,e,n.program,x,u,p,r)),r.u_is_halo=0}mi(n.buffers,t.segments,i,e,n.program,x,u,p,n.uniformValues)}}function mi(e,n,i,r,s,o,a,l,h){const c=r.context,u=[e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer,e.globeExtVertexBuffer];s.draw(c,c.gl.TRIANGLES,o,a,l,t.CullFaceMode.disabled,h,i.id,e.layoutVertexBuffer,e.indexBuffer,n,i.paint,r.transform.zoom,e.programConfigurations.get(i.id),u)}function gi(e,n,i,r,s,o,a){const l=e.context.gl,h=i.paint.get("fill-pattern"),c=h&&h.constantOr(1);let u,p,d,f,m;a?(p=c&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",u=l.LINES):(p=c?"fillPattern":"fill",u=l.TRIANGLES);for(const g of r){const r=n.getTile(g);if(c&&!r.patternsLoaded())continue;const y=r.getBucket(i);if(!y)continue;e.prepareDrawTile();const v=y.programConfigurations.get(i.id),_=e.useProgram(p,v);c&&(e.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers());const T=h.constantOr(null);if(T&&r.imageAtlas){const t=r.imageAtlas.patternPositions[T.toString()];t&&v.setConstantPatternPositions(t)}const E=e.translatePosMatrix(g.projMatrix,r,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(a){f=y.indexBuffer2,m=y.segments2;const t=e.terrain&&e.terrain.renderingToTexture?e.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];d="fillOutlinePattern"===p&&c?zn(E,e,r,t):Bn(E,t)}else f=y.indexBuffer,m=y.segments,d=c?Un(E,e,r):kn(E);e.prepareDrawProgram(e.context,_,g.toUnwrapped()),_.draw(e.context,u,s,e.stencilModeForClipping(g),o,t.CullFaceMode.disabled,d,i.id,y.layoutVertexBuffer,f,m,i.paint,e.transform.zoom,v)}}function yi(e,n,i,r,s,o,a){const l=e.context,h=l.gl,c=e.transform,u=i.paint.get("fill-extrusion-pattern"),p=u.constantOr(1),d=i.paint.get("fill-extrusion-opacity"),f=[i.paint.get("fill-extrusion-ambient-occlusion-intensity"),i.paint.get("fill-extrusion-ambient-occlusion-radius")],m=i.layout.get("fill-extrusion-edge-radius"),g=m>0&&!i.paint.get("fill-extrusion-rounded-roof"),y=g?0:m,v="globe"===c.projection.name?t.fillExtrusionHeightLift():0,_="globe"===c.projection.name,T=_?t.globeToMercatorTransition(c.zoom):0,E=[t.mercatorXfromLng(c.center.lng),t.mercatorYfromLat(c.center.lat)],x=[];_&&x.push("PROJECTION_GLOBE_VIEW"),f[0]>0&&x.push("FAUX_AO"),g&&x.push("ZERO_ROOF_RADIUS");for(const b of r){const r=n.getTile(b),m=r.getBucket(i);if(!m||m.projection.name!==c.projection.name)continue;const g=m.programConfigurations.get(i.id),I=e.useProgram(p?"fillExtrusionPattern":"fillExtrusion",g,x);if(e.terrain){const t=e.terrain;if(e.style.terrainSetForDrapingOnly())t.setupElevationDraw(r,I,{useMeterToDem:!0});else{if(!m.enableTerrain)continue;if(t.setupElevationDraw(r,I,{useMeterToDem:!0}),vi(l,n,b,m,i,t),!m.centroidVertexBuffer){const t=I.attributes.a_centroid_pos;void 0!==t&&h.vertexAttrib2f(t,0,0)}}}p&&(e.context.activeTexture.set(h.TEXTURE0),r.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),g.updatePaintBuffers());const w=u.constantOr(null);if(w&&r.imageAtlas){const t=r.imageAtlas.patternPositions[w.toString()];t&&g.setConstantPatternPositions(t)}const S=e.translatePosMatrix(b.projMatrix,r,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),R=c.projection.createInversionMatrix(c,b.canonical),C=i.paint.get("fill-extrusion-vertical-gradient"),A=p?Ln(S,e,C,d,f,y,b,r,v,T,E,R):Fn(S,e,C,d,f,y,b,v,T,E,R);e.prepareDrawProgram(l,I,b.toUnwrapped());const D=[];e.terrain&&D.push(m.centroidVertexBuffer),_&&D.push(m.layoutVertexExtBuffer),I.draw(l,l.gl.TRIANGLES,s,o,a,t.CullFaceMode.backCCW,A,i.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,i.paint,e.transform.zoom,g,D)}}function vi(e,n,i,r,s,o){const a=[e=>{let n=e.canonical.x-1,i=e.wrap;return n<0&&(n=(1<<e.canonical.z)-1,i--),new t.OverscaledTileID(e.overscaledZ,i,e.canonical.z,n,e.canonical.y)},e=>{let n=e.canonical.x+1,i=e.wrap;return n===1<<e.canonical.z&&(n=0,i++),new t.OverscaledTileID(e.overscaledZ,i,e.canonical.z,n,e.canonical.y)},e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1),e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)],l=t=>{const e=n.getSource().minzoom,i=t=>{const e=n.getTileByID(t);if(e&&e.hasData())return e.getBucket(s)},r=[0,-1,1];for(const n of r){if(t.overscaledZ+n<e)continue;const r=i(t.calculateScaledKey(t.overscaledZ+n));if(r)return r}},h=[0,0,0],c=(e,n)=>(h[0]=Math.min(e.min.y,n.min.y),h[1]=Math.max(e.max.y,n.max.y),h[2]=t.EXTENT-n.min.x>e.max.x?n.min.x-t.EXTENT:e.max.x,h),u=(e,n)=>(h[0]=Math.min(e.min.x,n.min.x),h[1]=Math.max(e.max.x,n.max.x),h[2]=t.EXTENT-n.min.y>e.max.y?n.min.y-t.EXTENT:e.max.y,h),p=[(t,e)=>c(t,e),(t,e)=>c(e,t),(t,e)=>u(t,e),(t,e)=>u(e,t)],d=new t.Point(0,0);let f,m,g;const y=(e,n,r,s,a)=>{const l=[[s?r:e,s?e:r,0],[s?r:n,s?n:r,0]],h=a<0?t.EXTENT+a:a,c=[s?h:(e+n)/2,s?(e+n)/2:h,0];return 0===r&&a<0||0!==r&&a>0?o.getForTilePoints(g,[c],!0,m):l.push(c),o.getForTilePoints(i,l,!0,f),Math.max(l[0][2],l[1][2],c[2])/o.exaggeration()};for(let v=0;v<4;v++){const e=(v<2?1:5)-v,n=r.borders[v];if(0===n.length)continue;const s=g=a[v](i),h=l(s);if(!(h&&h instanceof t.FillExtrusionBucket&&h.enableTerrain))continue;if(r.borderDoneWithNeighborZ[v]===h.canonical.z&&h.borderDoneWithNeighborZ[e]===r.canonical.z)continue;if(m=o.findDEMTileFor(s),!m||!m.dem)continue;if(!f){const t=o.findDEMTileFor(i);if(!t||!t.dem)return;f=t}const c=h.borders[e];let u=0;const _=h.borderDoneWithNeighborZ[e]!==r.canonical.z;if(r.canonical.z===h.canonical.z){for(let i=0;i<n.length;i++){const s=r.featuresOnBorder[n[i]],o=s.borders[v];let a;for(;u<c.length&&(a=h.featuresOnBorder[c[u]],!(a.borders[e][1]>o[0]+3));)_&&h.encodeCentroid(void 0,a,!1),u++;if(a&&u<c.length){const n=u;let i=0;for(;!(a.borders[e][0]>o[1]-3)&&(i++,++u!==c.length);)a=h.featuresOnBorder[c[u]];if(a=h.featuresOnBorder[c[n]],s.intersectsCount()>1||a.intersectsCount()>1||1!==i){1!==i&&(u=n),r.encodeCentroid(void 0,s,!1),_&&h.encodeCentroid(void 0,a,!1);continue}const l=p[v](s,a),f=v%2?t.EXTENT-1:0;d.x=y(l[0],Math.min(t.EXTENT-1,l[1]),f,v<2,l[2]),d.y=0,r.encodeCentroid(d,s,!1),_&&h.encodeCentroid(d,a,!1)}else r.encodeCentroid(void 0,s,!1)}r.borderDoneWithNeighborZ[v]=h.canonical.z,r.needsCentroidUpdate=!0,_&&(h.borderDoneWithNeighborZ[e]=r.canonical.z,h.needsCentroidUpdate=!0)}else{for(const t of n)r.encodeCentroid(void 0,r.featuresOnBorder[t],!1);if(_){for(const t of c)h.encodeCentroid(void 0,h.featuresOnBorder[t],!1);h.borderDoneWithNeighborZ[e]=r.canonical.z,h.needsCentroidUpdate=!0}r.borderDoneWithNeighborZ[v]=h.canonical.z,r.needsCentroidUpdate=!0}}(r.needsCentroidUpdate||!r.centroidVertexBuffer&&0!==r.centroidVertexArray.length)&&r.uploadCentroid(e)}const _i=new t.Color(1,0,0,1),Ti=new t.Color(0,1,0,1),Ei=new t.Color(0,0,1,1),xi=new t.Color(1,0,1,1),bi=new t.Color(0,1,1,1);function Ii(e,n,i){const r=e.context,s=e.transform,o=r.gl,a="globe"===s.projection.name,l=a?["PROJECTION_GLOBE_VIEW"]:null;let h=i.projMatrix;if(a&&t.globeToMercatorTransition(s.zoom)>0){const e=t.transitionTileAABBinECEF(i.canonical,s),n=t.globeDenormalizeECEF(e);h=t.multiply(new Float32Array(16),s.globeMatrix,n),t.multiply(h,s.projMatrix,h)}const c=e.useProgram("debug",null,l),u=n.getTileByID(i.key);e.terrain&&e.terrain.setupElevationDraw(u,c);const p=t.DepthMode.disabled,d=t.StencilMode.disabled,f=e.colorModeForRenderPass(),m="$debug";r.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),a?u._makeGlobeTileDebugBuffers(e.context,s):u._makeDebugTileBoundsBuffers(e.context,s.projection);const g=u._tileDebugBuffer||e.debugBuffer,y=u._tileDebugIndexBuffer||e.debugIndexBuffer,v=u._tileDebugSegments||e.debugSegments;c.draw(r,o.LINE_STRIP,p,d,f,t.CullFaceMode.disabled,Wn(h,t.Color.red),m,g,y,v,null,null,null,[u._globeTileDebugBorderBuffer]);const _=u.latestRawTileData,T=Math.floor((_&&_.byteLength||0)/1024),E=n.getTile(i).tileSize,x=512/Math.min(E,512)*(i.overscaledZ/s.zoom)*.5;let b=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(b+=" => ".concat(i.overscaledZ)),b+=" ".concat(T,"kb"),function(t,e){t.initDebugOverlayCanvas();const n=t.debugOverlayCanvas,i=t.context.gl,r=t.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,n.width,n.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(e,5,5),r.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(e,b);const I=u._tileDebugTextBuffer||e.debugBuffer,w=u._tileDebugTextIndexBuffer||e.quadTriangleIndexBuffer,S=u._tileDebugTextSegments||e.debugSegments;c.draw(r,o.TRIANGLES,p,d,t.ColorMode.alphaBlended,t.CullFaceMode.disabled,Wn(h,t.Color.transparent,x),m,I,w,S,null,null,null,[u._globeTileDebugTextBuffer])}function wi(t,e,n,i){Ri(t,0,e+n/2,t.transform.width,n,i)}function Si(t,e,n,i){Ri(t,e-n/2,0,n,t.transform.height,i)}function Ri(e,n,i,r,s,o){const a=e.context,l=a.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*t.exported.devicePixelRatio,i*t.exported.devicePixelRatio,r*t.exported.devicePixelRatio,s*t.exported.devicePixelRatio),a.clear({color:o}),l.disable(l.SCISSOR_TEST)}const Ci=t.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Ai}=Ci;function Di(t,e,n,i){t.emplaceBack(e,n,i)}class Oi{constructor(e){this.vertexArray=new t.StructArrayLayout3f12,this.indices=new t.StructArrayLayout3ui6,Di(this.vertexArray,-1,-1,1),Di(this.vertexArray,1,-1,1),Di(this.vertexArray,-1,1,1),Di(this.vertexArray,1,1,1),Di(this.vertexArray,-1,-1,-1),Di(this.vertexArray,1,-1,-1),Di(this.vertexArray,-1,1,-1),Di(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=e.createVertexBuffer(this.vertexArray,Ai),this.indexBuffer=e.createIndexBuffer(this.indices),this.segment=t.SegmentVector.simpleSegment(0,0,36,12)}}function Ni(e,n,i,r,s,o){const a=e.gl,l=n.paint.get("sky-atmosphere-color"),h=n.paint.get("sky-atmosphere-halo-color"),c=n.paint.get("sky-atmosphere-sun-intensity"),u=((t,e,n,i,r)=>({u_matrix_3f:t,u_sun_direction:e,u_sun_intensity:n,u_color_tint_r:[i.r,i.g,i.b,i.a],u_color_tint_m:[r.r,r.g,r.b,r.a],u_luminance:5e-5}))(t.fromMat4(t.create$1(),r),s,c,l,h);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+o,n.skyboxTexture,0),i.draw(e,a.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.frontCW,u,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const Mi=t.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Pi{constructor(e){const n=new t.StructArrayLayout5f20;n.emplaceBack(-1,1,1,0,0),n.emplaceBack(1,1,1,1,0),n.emplaceBack(1,-1,1,1,1),n.emplaceBack(-1,-1,1,0,1);const i=new t.StructArrayLayout3ui6;i.emplaceBack(0,1,2),i.emplaceBack(2,3,0),this.vertexBuffer=e.createVertexBuffer(n,Mi.members),this.indexBuffer=e.createIndexBuffer(i),this.segments=t.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Fi={symbol:function(e,n,i,r,s){if("translucent"!==e.renderPass)return;const o=t.StencilMode.disabled,a=e.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(e,n,i,r,s,o,a){const l=n.transform,h="map"===s,c="map"===o;for(const u of e){const e=r.getTile(u),n=e.getBucket(i);if(!n||!n.text||!n.text.segments.get().length)continue;const s=t.evaluateSizeForZoom(n.textSizeData,l.zoom),o=_e(u,n.getProjection(),l),p=l.calculatePixelsToTileUnitsMatrix(e),d=te(o,e.tileID.canonical,c,h,l,n.getProjection(),p),f="none"!==i.layout.get("icon-text-fit")&&n.hasIconData();if(s){const i=Math.pow(2,l.zoom-e.tileID.overscaledZ);pi(n,h,c,a,t.symbolSize,l,d,u,i,s,f)}}}(r,e,i,n,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),s),0!==i.paint.get("icon-opacity").constantOr(1)&&fi(e,n,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),o,a),0!==i.paint.get("text-opacity").constantOr(1)&&fi(e,n,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),o,a),n.map.showCollisionBoxes&&(hi(e,n,i,r,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),hi(e,n,i,r,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))},circle:function(e,n,i,r){if("translucent"!==e.renderPass)return;const s=i.paint.get("circle-opacity"),o=i.paint.get("circle-stroke-width"),a=i.paint.get("circle-stroke-opacity"),l=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0===s.constantOr(1)&&(0===o.constantOr(1)||0===a.constantOr(1)))return;const h=e.context,c=h.gl,u=e.transform,p=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),d=t.StencilMode.disabled,f=e.colorModeForRenderPass(),m="globe"===u.projection.name,g=[t.mercatorXfromLng(u.center.lng),t.mercatorYfromLat(u.center.lat)],y=[];for(let _=0;_<r.length;_++){const s=r[_],o=n.getTile(s),a=o.getBucket(i);if(!a||a.projection.name!==u.projection.name)continue;const h=a.programConfigurations.get(i.id),c=jn(i);m&&c.push("PROJECTION_GLOBE_VIEW");const p=e.useProgram("circle",h,c),d=a.layoutVertexBuffer,f=a.globeExtVertexBuffer,v=a.indexBuffer,T=u.projection.createInversionMatrix(u,s.canonical),E={programConfiguration:h,program:p,layoutVertexBuffer:d,globeExtVertexBuffer:f,indexBuffer:v,uniformValues:Hn(e,s,o,T,g,i),tile:o};if(l){const e=a.segments.get();for(const n of e)y.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:E})}else y.push({segments:a.segments,sortKey:0,state:E})}l&&y.sort(((t,e)=>t.sortKey-e.sortKey));const v={useDepthForOcclusion:!m};for(const _ of y){const{programConfiguration:n,program:r,layoutVertexBuffer:s,globeExtVertexBuffer:o,indexBuffer:a,uniformValues:l,tile:m}=_.state,g=_.segments;e.terrain&&e.terrain.setupElevationDraw(m,r,v),e.prepareDrawProgram(h,r,m.tileID.toUnwrapped()),r.draw(h,c.TRIANGLES,p,d,f,t.CullFaceMode.disabled,l,i.id,s,a,g,i.paint,u.zoom,n,[o])}},heatmap:function(e,n,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const s=e.context,o=s.gl,a=t.StencilMode.disabled,l=new t.ColorMode([o.ONE,o.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n,i){const r=t.gl,s=e.width*i,o=e.height*i;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,s,o]);let a=n.heatmapFbo;if(!a||a&&(a.width!==s||a.height!==o)){a&&a.destroy();const e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),a=n.heatmapFbo=t.createFramebuffer(s,o,!1),function(t,e,n,i,r,s){const o=t.gl;o.texImage2D(o.TEXTURE_2D,0,t.isWebGL2&&t.extRenderToTextureHalfFloat?o.RGBA16F:o.RGBA,r,s,0,o.RGBA,t.extRenderToTextureHalfFloat?t.isWebGL2?o.HALF_FLOAT:t.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(n)}(t,0,e,a,s,o)}else r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),t.bindFramebuffer.set(a.framebuffer)}(s,e,i,"globe"===e.transform.projection.name?.5:.25),s.clear({color:t.Color.transparent});const h=e.transform,c="globe"===h.projection.name,u=c?["PROJECTION_GLOBE_VIEW"]:null,p=c?t.CullFaceMode.frontCCW:t.CullFaceMode.disabled,d=[t.mercatorXfromLng(h.center.lng),t.mercatorYfromLat(h.center.lat)];for(let f=0;f<r.length;f++){const m=r[f];if(n.hasRenderableParent(m))continue;const g=n.getTile(m),y=g.getBucket(i);if(!y||y.projection.name!==h.projection.name)continue;const v=y.programConfigurations.get(i.id),_=e.useProgram("heatmap",v,u),{zoom:T}=e.transform;e.terrain&&e.terrain.setupElevationDraw(g,_),e.prepareDrawProgram(s,_,m.toUnwrapped());const E=h.projection.createInversionMatrix(h,m.canonical);_.draw(s,o.TRIANGLES,t.DepthMode.disabled,a,l,p,Yn(e,m,g,E,d,T,i.paint.get("heatmap-intensity")),i.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,i.paint,e.transform.zoom,v,c?[y.globeExtVertexBuffer]:null)}s.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){const i=e.context,r=i.gl,s=n.heatmapFbo;if(!s)return;i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,s.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);let o=n.colorRampTexture;o||(o=n.colorRampTexture=new t.Texture(i,n.colorRamp,r.RGBA)),o.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,r.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,((t,e,n,i)=>({u_image:0,u_color_ramp:1,u_opacity:e.paint.get("heatmap-opacity")}))(0,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}(e,i))},line:function(e,n,i,r){if("translucent"!==e.renderPass)return;const s=i.paint.get("line-opacity"),o=i.paint.get("line-width");if(0===s.constantOr(1)||0===o.constantOr(1))return;const a=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),l=e.colorModeForRenderPass(),h=e.terrain&&e.terrain.renderingToTexture?1:t.exported.devicePixelRatio,c=i.paint.get("line-dasharray"),u=c.constantOr(1),p=i.layout.get("line-cap"),d=i.paint.get("line-pattern"),f=d.constantOr(1),m=i.paint.get("line-gradient"),g=f?"linePattern":"line",y=e.context,v=y.gl,_=(t=>{const e=[];Jn(t)&&e.push("RENDER_LINE_DASH"),t.paint.get("line-gradient")&&e.push("RENDER_LINE_GRADIENT");const n=t.paint.get("line-trim-offset");0===n[0]&&0===n[1]||e.push("RENDER_LINE_TRIM_OFFSET");const i=t.paint.get("line-pattern").constantOr(1),r=1!==t.paint.get("line-opacity").constantOr(1);return!i&&r&&e.push("RENDER_LINE_ALPHA_DISCARD"),e})(i);let T=_.includes("RENDER_LINE_ALPHA_DISCARD");e.terrain&&e.terrain.clipOrMaskOverlapStencilType()&&(T=!1);for(const E of r){const r=n.getTile(E);if(f&&!r.patternsLoaded())continue;const s=r.getBucket(i);if(!s)continue;e.prepareDrawTile();const o=s.programConfigurations.get(i.id),x=e.useProgram(g,o,_),b=d.constantOr(null);if(b&&r.imageAtlas){const t=r.imageAtlas.patternPositions[b.toString()];t&&o.setConstantPatternPositions(t)}const I=c.constantOr(null),w=p.constantOr(null);if(!f&&I&&w&&r.lineAtlas){const t=r.lineAtlas.getDash(I,w);t&&o.setConstantPatternPositions(t)}let[S,R]=i.paint.get("line-trim-offset");if("round"===w||"square"===w){const t=1;S!==R&&(0===S&&(S-=t),1===R&&(R+=t))}const C=e.terrain?E.projMatrix:null,A=f?Xn(e,r,i,C,h):qn(e,r,i,C,s.lineClipsArray.length,h,[S,R]);if(m){const r=s.gradients[i.id];let o=r.texture;if(i.gradientVersion!==r.version){let a=256;if(i.stepInterpolant){const i=n.getSource().maxzoom,r=E.canonical.z===i?Math.ceil(1<<e.transform.maxZoom-E.canonical.z):1;a=t.clamp(t.nextPowerOfTwo(s.maxLineLength/t.EXTENT*1024*r),256,y.maxTextureSize)}r.gradient=t.renderColorRamp({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:a,image:r.gradient||void 0,clips:s.lineClipsArray}),r.texture?r.texture.update(r.gradient):r.texture=new t.Texture(y,r.gradient,v.RGBA),r.version=i.gradientVersion,o=r.texture}y.activeTexture.set(v.TEXTURE1),o.bind(i.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}u&&(y.activeTexture.set(v.TEXTURE0),r.lineAtlasTexture.bind(v.LINEAR,v.REPEAT),o.updatePaintBuffers()),f&&(y.activeTexture.set(v.TEXTURE0),r.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),o.updatePaintBuffers()),e.prepareDrawProgram(y,x,E.toUnwrapped());const D=n=>{x.draw(y,v.TRIANGLES,a,n,l,t.CullFaceMode.disabled,A,i.id,s.layoutVertexBuffer,s.indexBuffer,s.segments,i.paint,e.transform.zoom,o,[s.layoutVertexBuffer2])};if(T){const n=e.stencilModeForClipping(E).ref;0===n&&e.terrain&&y.clear({stencil:0});const i={func:v.EQUAL,mask:255};A.u_alpha_discard_threshold=.8,D(new t.StencilMode(i,n,255,v.KEEP,v.KEEP,v.INVERT)),A.u_alpha_discard_threshold=0,D(new t.StencilMode(i,n,255,v.KEEP,v.KEEP,v.KEEP))}else D(e.stencilModeForClipping(E))}T&&(e.resetStencilClippingMasks(),e.terrain&&y.clear({stencil:0}))},fill:function(e,n,i,r){const s=i.paint.get("fill-color"),o=i.paint.get("fill-opacity");if(0===o.constantOr(1))return;const a=e.colorModeForRenderPass(),l=i.paint.get("fill-pattern"),h=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===s.constantOr(t.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(e.renderPass===h){const s=e.depthModeForSublayer(1,"opaque"===e.renderPass?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly);gi(e,n,i,r,s,a,!1)}if("translucent"===e.renderPass&&i.paint.get("fill-antialias")){const s=e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,t.DepthMode.ReadOnly);gi(e,n,i,r,s,a,!0)}},"fill-extrusion":function(e,n,i,r){const s=i.paint.get("fill-extrusion-opacity");if(0!==s&&"translucent"===e.renderPass){const o=new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);if(1!==s||i.paint.get("fill-extrusion-pattern").constantOr(1))yi(e,n,i,r,o,t.StencilMode.disabled,t.ColorMode.disabled),yi(e,n,i,r,o,e.stencilModeFor3D(),e.colorModeForRenderPass()),e.resetStencilClippingMasks();else{const s=e.colorModeForRenderPass();yi(e,n,i,r,o,t.StencilMode.disabled,s)}}},hillshade:function(e,n,i,r){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const s=e.context,o=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),a=e.colorModeForRenderPass(),l=e.terrain&&e.terrain.renderingToTexture,[h,c]="translucent"!==e.renderPass||l?[{},r]:e.stencilConfigForOverlap(r);for(const u of c){const r=n.getTile(u);if(r.needsHillshadePrepare&&"offscreen"===e.renderPass)yn(e,r,i,o,t.StencilMode.disabled,a);else if("translucent"===e.renderPass){const t=l&&e.terrain?e.terrain.stencilModeForRTTOverlap(u):h[u.overscaledZ];mn(e,u,r,i,o,t,a)}}s.viewport.set([0,0,e.width,e.height]),e.resetStencilClippingMasks()},raster:function(e,n,i,r,s,o){if("translucent"!==e.renderPass)return;if(0===i.paint.get("raster-opacity"))return;if(!r.length)return;const a=e.context,l=a.gl,h=n.getSource(),c=e.useProgram("raster"),u=e.colorModeForRenderPass(),p=e.terrain&&e.terrain.renderingToTexture,[d,f]=h instanceof Ct||p?[{},r]:e.stencilConfigForOverlap(r),m=f[f.length-1].overscaledZ,g=!e.options.moving;for(const y of f){const r=p?t.DepthMode.disabled:e.depthModeForSublayer(y.overscaledZ-m,1===i.paint.get("raster-opacity")?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly,l.LESS),s=y.toUnwrapped(),f=n.getTile(y);if(p&&(!f||!f.hasData()))continue;const v=p?y.projMatrix:e.transform.calculateProjMatrix(s,g),_=e.terrain&&p?e.terrain.stencilModeForRTTOverlap(y):d[y.overscaledZ],T=o?0:i.paint.get("raster-fade-duration");f.registerFadeDuration(T);const E=n.findLoadedParent(y,0),x=Rn(f,E,n,e.transform,T);let b,I;e.terrain&&e.terrain.prepareDrawTile();const w="nearest"===i.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;a.activeTexture.set(l.TEXTURE0),f.texture.bind(w,l.CLAMP_TO_EDGE),a.activeTexture.set(l.TEXTURE1),E?(E.texture.bind(w,l.CLAMP_TO_EDGE),b=Math.pow(2,E.tileID.overscaledZ-f.tileID.overscaledZ),I=[f.tileID.canonical.x*b%1,f.tileID.canonical.y*b%1]):f.texture.bind(w,l.CLAMP_TO_EDGE),f.texture.useMipmap&&a.extTextureFilterAnisotropic&&e.transform.pitch>20&&l.texParameterf(l.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax);const S=$n(v,I||[0,0],b||1,x,i,h instanceof Ct?h.perspectiveTransform:[0,0]);if(e.prepareDrawProgram(a,c,s),h instanceof Ct)h.boundsBuffer&&h.boundsSegments&&c.draw(a,l.TRIANGLES,r,t.StencilMode.disabled,u,t.CullFaceMode.disabled,S,i.id,h.boundsBuffer,e.quadTriangleIndexBuffer,h.boundsSegments);else{const{tileBoundsBuffer:n,tileBoundsIndexBuffer:s,tileBoundsSegments:o}=e.getTileBoundsBuffers(f);c.draw(a,l.TRIANGLES,r,_,u,t.CullFaceMode.disabled,S,i.id,n,s,o)}}e.resetStencilClippingMasks()},background:function(e,n,i,r){const s=i.paint.get("background-color"),o=i.paint.get("background-opacity");if(0===o)return;const a=e.context,l=a.gl,h=e.transform,c=h.tileSize,u=i.paint.get("background-pattern");if(e.isPatternMissing(u))return;const p=!u&&1===s.a&&1===o&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==p)return;const d=t.StencilMode.disabled,f=e.depthModeForSublayer(0,"opaque"===p?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly),m=e.colorModeForRenderPass(),g=e.useProgram(u?"backgroundPattern":"background");let y,v=r;v||(y=e.getBackgroundTiles(),v=Object.values(y).map((t=>t.tileID))),u&&(a.activeTexture.set(l.TEXTURE0),e.imageManager.bind(e.context));for(const _ of v){const p=_.toUnwrapped(),v=r?_.projMatrix:e.transform.calculateProjMatrix(p);e.prepareDrawTile();const T=n?n.getTile(_):y?y[_.key]:new t.Tile(_,c,h.zoom,e),E=u?oi(v,o,e,u,{tileID:_,tileSize:c}):si(v,o,s);e.prepareDrawProgram(a,g,p);const{tileBoundsBuffer:x,tileBoundsIndexBuffer:b,tileBoundsSegments:I}=e.getTileBoundsBuffers(T);g.draw(a,l.TRIANGLES,f,d,m,t.CullFaceMode.disabled,E,i.id,x,b,I)}},sky:function(e,n,i){const r=e.transform,s="mercator"===r.projection.name||"globe"===r.projection.name?1:t.smoothstep(7,8,r.zoom),o=i.paint.get("sky-opacity")*s;if(0===o)return;const a=e.context,l=i.paint.get("sky-type"),h=new t.DepthMode(a.gl.LEQUAL,t.DepthMode.ReadOnly,[0,1]),c=e.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===e.renderPass?i.needsSkyboxCapture(e)&&(function(e,n,i,r){const s=e.context,o=s.gl;let a=n.skyboxFbo;if(!a){a=n.skyboxFbo=s.createFramebuffer(32,32,!1),n.skyboxGeometry=new Oi(s),n.skyboxTexture=s.gl.createTexture(),o.bindTexture(o.TEXTURE_CUBE_MAP,n.skyboxTexture),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR);for(let t=0;t<6;++t)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,o.RGBA,32,32,0,o.RGBA,o.UNSIGNED_BYTE,null)}s.bindFramebuffer.set(a.framebuffer),s.viewport.set([0,0,32,32]);const l=n.getCenter(e,!0),h=e.useProgram("skyboxCapture"),c=new Float64Array(16);t.identity(c),t.rotateY(c,c,.5*-Math.PI),Ni(s,n,h,c,l,0),t.identity(c),t.rotateY(c,c,.5*Math.PI),Ni(s,n,h,c,l,1),t.identity(c),t.rotateX(c,c,.5*-Math.PI),Ni(s,n,h,c,l,2),t.identity(c),t.rotateX(c,c,.5*Math.PI),Ni(s,n,h,c,l,3),t.identity(c),Ni(s,n,h,c,l,4),t.identity(c),t.rotateY(c,c,Math.PI),Ni(s,n,h,c,l,5),s.viewport.set([0,0,e.width,e.height])}(e,i),i.markSkyboxValid(e)):"sky"===e.renderPass&&function(e,n,i,r,s){const o=e.context,a=o.gl,l=e.transform,h=e.useProgram("skybox");o.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture);const c=((t,e,n,i,r)=>({u_matrix:t,u_sun_direction:e,u_cubemap:0,u_opacity:i,u_temporal_offset:r}))(l.skyboxMatrix,n.getCenter(e,!1),0,r,s);e.prepareDrawProgram(o,h),h.draw(o,a.TRIANGLES,i,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,c,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,i,h,o,c):"gradient"===l&&"sky"===e.renderPass&&function(e,n,i,r,s){const o=e.context,a=o.gl,l=e.transform,h=e.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new Oi(o)),o.activeTexture.set(a.TEXTURE0);let c=n.colorRampTexture;c||(c=n.colorRampTexture=new t.Texture(o,n.colorRamp,a.RGBA)),c.bind(a.LINEAR,a.CLAMP_TO_EDGE);const u=((e,n,i,r,s)=>({u_matrix:e,u_color_ramp:0,u_center_direction:n,u_radius:t.degToRad(i),u_opacity:r,u_temporal_offset:s}))(l.skyboxMatrix,n.getCenter(e,!1),n.paint.get("sky-gradient-radius"),r,s);e.prepareDrawProgram(o,h),h.draw(o,a.TRIANGLES,i,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,u,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,i,h,o,c)},debug:function(t,e,n){for(let i=0;i<n.length;i++)Ii(t,e,n[i])},custom:function(e,n,i,r){const s=e.context,o=i.implementation;if(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes("custom")||e.terrain&&(e.terrain.renderingToTexture||"offscreen"===e.renderPass)&&i.isLayerDraped()){if("offscreen"===e.renderPass){const n=o.prerender;if(n){if(e.setCustomLayerDefaults(),s.setColorMode(e.colorModeForRenderPass()),"globe"===e.transform.projection.name){const i=e.transform.pointMerc;n.call(o,s.gl,e.transform.customLayerMatrix(),e.transform.getProjection(),e.transform.globeToMercatorMatrix(),t.globeToMercatorTransition(e.transform.zoom),[i.x,i.y],e.transform.pixelsPerMeterRatio)}else n.call(o,s.gl,e.transform.customLayerMatrix());s.setDirty(),e.setBaseState()}}else if("translucent"===e.renderPass){if(e.terrain&&e.terrain.renderingToTexture){const n=o.renderToTile;if(n){const i=r[0].canonical,a=new t.MercatorCoordinate(i.x+r[0].wrap*(1<<i.z),i.y,i.z);s.setDepthMode(t.DepthMode.disabled),s.setStencilMode(t.StencilMode.disabled),s.setColorMode(e.colorModeForRenderPass()),e.setCustomLayerDefaults(),n.call(o,s.gl,a),s.setDirty(),e.setBaseState()}return}e.setCustomLayerDefaults(),s.setColorMode(e.colorModeForRenderPass()),s.setStencilMode(t.StencilMode.disabled);const n="3d"===o.renderingMode?new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,t.DepthMode.ReadOnly);if(s.setDepthMode(n),"globe"===e.transform.projection.name){const n=e.transform.pointMerc;o.render(s.gl,e.transform.customLayerMatrix(),e.transform.getProjection(),e.transform.globeToMercatorMatrix(),t.globeToMercatorTransition(e.transform.zoom),[n.x,n.y],e.transform.pixelsPerMeterRatio)}else o.render(s.gl,e.transform.customLayerMatrix());s.setDirty(),e.setBaseState(),s.bindFramebuffer.set(null)}}else t.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Li{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.context=new It(e,i),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=t.SourceCache.maxUnderzooming+t.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(t,e){const n=!!t&&!!t.terrain&&this.transform.projection.supportsTerrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new On(this,t));const i=this._terrain;this.transform.elevation=n?i:null,i.update(t,this.transform,e)}_updateFog(t){const e=t.fog;if(!e||"globe"===this.transform.projection.name||e.getOpacity(this.transform.pitch)<1||e.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,i]=e.getFovAdjustedRange(this.transform._fov);if(n>i)return void(this.transform.fogCullDistSq=null);const r=n+.78*(i-n);this.transform.fogCullDistSq=r*r}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(e,n){if(this.width=e*t.exported.devicePixelRatio,this.height=n*t.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style.order)this.style._layers[t].resize()}setup(){const e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,t.posAttributes.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(i,t.posAttributes.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const r=new t.StructArrayLayout2i4;r.emplaceBack(-1,-1),r.emplaceBack(1,-1),r.emplaceBack(-1,1),r.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(r,t.posAttributes.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const s=new t.StructArrayLayout4i8;s.emplaceBack(0,0,0,0),s.emplaceBack(t.EXTENT,0,t.EXTENT,0),s.emplaceBack(0,t.EXTENT,0,t.EXTENT),s.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.mercatorBoundsBuffer=e.createVertexBuffer(s,t.boundsAttributes.members),this.mercatorBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.StructArrayLayout3ui6;o.emplaceBack(0,1,2),o.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(o);const a=new t.StructArrayLayout1ui2;for(const t of[0,1,3,2,0])a.emplaceBack(t);this.debugIndexBuffer=e.createIndexBuffer(a),this.emptyTexture=new t.Texture(e,new t.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),e.gl.RGBA),this.identityMat=t.create();const l=this.context.gl;this.stencilClearMode=new t.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(t.window.performance.now()),this.atmosphereBuffer=new Pi(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(t){return t._makeTileBoundsBuffers(this.context,this.transform.projection),t._tileBoundsBuffer?{tileBoundsBuffer:t._tileBoundsBuffer,tileBoundsIndexBuffer:t._tileBoundsIndexBuffer,tileBoundsSegments:t._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(e,n.TRIANGLES,t.DepthMode.disabled,this.stencilClearMode,t.ColorMode.disabled,t.CullFaceMode.disabled,Sn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(e,n,i){if(!n||this.currentStencilSource===n.id||!e.isTileClipped()||!i||0===i.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let t=!1;for(const e of i)if(void 0===this._tileClippingMaskIDs[e.key]){t=!0;break}if(!t)return}this.currentStencilSource=n.id;const r=this.context,s=r.gl;this.nextStencilID+i.length>256&&this.clearStencil(),r.setColorMode(t.ColorMode.disabled),r.setDepthMode(t.DepthMode.disabled);const o=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const a of i){const e=n.getTile(a),i=this._tileClippingMaskIDs[a.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:h,tileBoundsSegments:c}=this.getTileBoundsBuffers(e);o.draw(r,s.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:s.ALWAYS,mask:0},i,255,s.KEEP,s.KEEP,s.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Sn(a.projMatrix),"$clipping",l,h,c)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,n=this.context.gl;return new t.StencilMode({func:n.NOTEQUAL,mask:255},e,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);const n=this.context.gl;return new t.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(e){const n=this.context.gl,i=e.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),r=i[i.length-1].overscaledZ,s=i[0].overscaledZ-r+1;if(s>1){this.currentStencilSource=void 0,this.nextStencilID+s>256&&this.clearStencil();const e={};for(let i=0;i<s;i++)e[i+r]=new t.StencilMode({func:n.GEQUAL,mask:255},i+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=s,[e,i]}return[{[r]:t.StencilMode.disabled},i]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new t.ColorMode([e.CONSTANT_COLOR,e.ONE],new t.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?t.ColorMode.unblended:t.ColorMode.alphaBlended}depthModeForSublayer(e,n,i){if(!this.opaquePassEnabledForLayer())return t.DepthMode.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new t.DepthMode(i||this.context.gl.LEQUAL,n,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){this.style=e,this.options=n,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const i=this.style.order,r=this.style._sourceCaches;for(const t in r){const e=r[t];e.used&&e.prepare(this.context)}const s={},o={},a={};for(const t in r){const e=r[t];s[t]=e.getVisibleCoordinates(),o[t]=s[t].slice().reverse(),a[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<i.length;t++)if(this.style._layers[i[t]].is3D()){this.opaquePassCutoff=t;break}if(this.terrain&&(this.terrain.updateTileBinding(a),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new t.GlobeSharedBuffers(this.context)),!t.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const t of i){const n=this.style._layers[t],i=e._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const r=i?o[i.id]:void 0;("custom"===n.type||n.isSky()||r&&r.length)&&this.renderLayer(this,i,n,r)}this.depthRangeFor3D=[0,1-(e.order.length+2)*this.numSublayers*this.depthEpsilon];const l=this.terrain;if(l&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&l.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[i[this.currentLayer]],n=e._getLayerSourceCache(t);if(t.isSky())continue;const r=n?o[n.id]:void 0;this._renderTileClippingMasks(t,n,r),this.renderLayer(this,n,t,r)}if(this.style.fog&&this.transform.projection.supportsFog&&function(e,n){const i=e.context,r=i.gl,s=e.transform,o=new t.DepthMode(r.LEQUAL,t.DepthMode.ReadOnly,[0,1]),a=e.useProgram("globeAtmosphere",null,"globe"===s.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=t.globeToMercatorTransition(s.zoom),h=n.properties.get("color").toArray01(),c=n.properties.get("high-color").toArray01(),u=n.properties.get("space-color").toArray01PremultipliedAlpha(),p=t.identity$1([]);t.rotateY$1(p,p,-t.degToRad(s._center.lng)),t.rotateX$1(p,p,t.degToRad(s._center.lat)),t.rotateZ$1(p,p,s.angle),t.rotateX$1(p,p,-s._pitch);const d=t.fromQuat(new Float32Array(16),p),f=t.mapValue(n.properties.get("star-intensity"),0,1,0,.25),m=5e-4,g=t.mapValue(n.properties.get("horizon-blend"),0,1,m,.25),y=t.globeUseCustomAntiAliasing(e,i,s)&&g===m?s.worldSize/(2*Math.PI*1.025)-1:s.globeRadius,v=e.frameCounter/1e3%1,_=t.length(s.globeCenterInViewSpace),T=Math.sqrt(Math.pow(_,2)-Math.pow(y,2)),E=Math.acos(T/_),x=((e,n,i,r,s,o,a,l,h,c,u,p,d,f)=>({u_frustum_tl:e,u_frustum_tr:n,u_frustum_br:i,u_frustum_bl:r,u_horizon:s,u_transition:o,u_fadeout_range:a,u_color:l,u_high_color:h,u_space_color:c,u_star_intensity:u,u_star_size:5*t.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:p,u_horizon_angle:d,u_rotation_matrix:f}))(s.frustumCorners.TL,s.frustumCorners.TR,s.frustumCorners.BR,s.frustumCorners.BL,s.frustumCorners.horizon,l,g,h,c,u,f,v,E,d);e.prepareDrawProgram(i,a);const b=e.atmosphereBuffer;b&&a.draw(i,r.TRIANGLES,o,t.StencilMode.disabled,t.ColorMode.alphaBlended,t.CullFaceMode.backCW,x,"skybox",b.vertexBuffer,b.indexBuffer,b.segments)}(this,this.style.fog),this.renderPass="sky",(t.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){const t=this.style._layers[i[this.currentLayer]],n=e._getLayerSourceCache(t);t.isSky()&&this.renderLayer(this,n,t,n?o[n.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;){const t=this.style._layers[i[this.currentLayer]],n=e._getLayerSourceCache(t);if(t.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(t)){if(t.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const r=n?("symbol"===t.type?a:o)[n.id]:void 0;this._renderTileClippingMasks(t,n,n?s[n.id]:void 0),this.renderLayer(this,n,t,r),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let n=null;t.values(this.style._layers).forEach((t=>{const i=e._getLayerSourceCache(t);i&&!t.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<i.getSource().maxzoom)&&(n=i)})),n&&this.options.showTileBoundaries&&Fi.debug(this,n,n.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;wi(t,t.transform.height-(e.top||0),3,_i),wi(t,e.bottom||0,3,Ti),Si(t,e.left||0,3,Ei),Si(t,t.transform.width-(e.right||0),3,xi);const n=t.transform.centerPoint;!function(t,e,n,i){Ri(t,e-1,n-10,2,20,i),Ri(t,e-10,n-1,20,2,i)}(t,n.x,t.transform.height-n.y,bi)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(t.window.performance.now()),this.saveCanvasCopy())}renderLayer(t,e,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||i&&i.length)&&(this.id=n.id,this.gpuTimingStart(n),(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes(n.type)||t.terrain&&"custom"===n.type)&&Fi[n.type](t,e,n,i,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const t=this.context.extTimerQuery,e=t.createQueryEXT();this.deferredRenderGpuTimeQueries.push(e),t.beginQueryEXT(t.TIME_ELAPSED_EXT,e)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}collectDeferredRenderGpuQueries(){const t=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],t}queryGpuTimers(t){const e={};for(const n in t){const i=t[n],r=this.context.extTimerQuery,s=r.getQueryObjectEXT(i.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(i.query),e[n]=s}return e}queryGpuTimeDeferredRender(t){if(!this.options.gpuTimingDeferredRender)return 0;const e=this.context.extTimerQuery;let n=0;for(const i of t)n+=e.getQueryObjectEXT(i,e.QUERY_RESULT_EXT)/1e6,e.deleteQueryEXT(i);return n}translatePosMatrix(e,n,i,r,s){if(!i[0]&&!i[1])return e;const o=s?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(o){const t=Math.sin(o),e=Math.cos(o);i=[i[0]*e-i[1]*t,i[0]*t+i[1]*e]}const a=[s?i[0]:D(n,i[0],this.transform.zoom),s?i[1]:D(n,i[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,a),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){return null===t||void 0!==t&&!this.imageManager.getPattern(t.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const t=this.terrain&&this.terrain.renderingToTexture,e=this.terrain&&0===this.terrain.exaggeration(),n=this.style&&this.style.fog,i=[];return this.terrainRenderModeElevated()&&i.push("TERRAIN"),"globe"===this.transform.projection.name&&i.push("GLOBE"),e&&i.push("ZERO_EXAGGERATION"),n&&!t&&0!==n.getOpacity(this.transform.pitch)&&i.push("FOG"),t&&i.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&i.push("OVERDRAW_INSPECTOR"),i}useProgram(t,e,n){this.cache=this.cache||{};const i=n||[],r=this.currentGlobalDefines().concat(i),s=Nn.cacheKey(cn[t],t,r,e);return this.cache[s]||(this.cache[s]=new Nn(this.context,t,cn[t],e,ai[t],r)),this.cache[s]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(e,n,i){if(this.terrain&&this.terrain.renderingToTexture)return;const r=this.style.fog;if(r){const s=r.getOpacity(this.transform.pitch),o=((e,n,i,r,s,o,a,l,h,c,u)=>{const p=e.transform,d=n.properties.get("color").toArray01();d[3]=r;const f=e.frameCounter/1e3%1;return{u_fog_matrix:i?p.calculateFogTileMatrix(i):e.identityMat,u_fog_range:n.getFovAdjustedRange(p._fov),u_fog_color:d,u_fog_horizon_blend:n.properties.get("horizon-blend"),u_fog_temporal_offset:f,u_frustum_tl:s,u_frustum_tr:o,u_frustum_br:a,u_frustum_bl:l,u_globe_pos:h,u_globe_radius:c,u_viewport:u,u_globe_transition:t.globeToMercatorTransition(p.zoom),u_is_globe:+("globe"===p.projection.name)}})(this,r,i,s,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*t.exported.devicePixelRatio,this.transform.height*t.exported.devicePixelRatio]);n.setFogUniformValues(e,o)}}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){const t=this.canvasCopy();t&&(this.frameCopies.push(t),this.tileLoaded=!1)}canvasCopy(){const t=this.context.gl,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),e}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const t=this.style&&this.style.fog;return!!t&&0!==t.getOpacity(this.transform.pitch)}getBackgroundTiles(){const e=this._backgroundTiles,n=this._backgroundTiles={},i=this.transform.coveringTiles({tileSize:512});for(const r of i)n[r.key]=e[r.key]||new t.Tile(r,512,this.transform.tileZoom,this);return n}clearBackgroundTiles(){this._backgroundTiles={}}}class ki{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=i}interpolate(e,n,i){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,i)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,i)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,i)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,i)),this}getCenter(e,n){const i=t.clamp((this.left+e-this.right)/2,0,e),r=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.Point(i,r)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new ki(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ui(e,n){const i=t.getColumn(e,3);t.fromQuat(e,n),t.setColumn(e,3,i)}function Bi(e,n){const i=t.identity$1([]);return t.rotateZ$1(i,i,-n),t.rotateX$1(i,i,-e),i}function zi(e,n){const i=[e[0],e[1],0],r=[n[0],n[1],0];if(t.length(i)>=1e-15){const e=t.normalize([],i);t.scale$2(r,e,t.dot(r,e)),n[0]=r[0],n[1]=r[1]}const s=t.cross([],n,e);if(t.len(s)<1e-15)return null;const o=Math.atan2(-s[1],s[0]);return Bi(Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2]),o)}class Gi{constructor(t,e){this.position=t,this.orientation=e}get position(){return this._position}set position(e){if(e){const n=e instanceof t.MercatorCoordinate?e:new t.MercatorCoordinate(e[0],e[1],e[2]);this._renderWorldCopies&&(n.x=t.wrap(n.x,0,1)),this._position=n}else this._position=null}lookAtPoint(e,n){if(this.orientation=null,!this.position)return;const i=this.position,r=this._elevation?this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(e)):0,s=t.MercatorCoordinate.fromLngLat(e,r),o=[s.x-i.x,s.y-i.y,s.z-i.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=zi(o,n)}setPitchBearing(e,n){this.orientation=Bi(t.degToRad(e),t.degToRad(-n))}}class Hi{constructor(e,n){this._transform=t.identity([]),this.orientation=n,this.position=e}get mercatorPosition(){const e=this.position;return new t.MercatorCoordinate(e[0],e[1],e[2])}get position(){const e=t.getColumn(this._transform,3);return[e[0],e[1],e[2]]}set position(e){var n;e&&t.setColumn(this._transform,3,[(n=e)[0],n[1],n[2],1])}get orientation(){return this._orientation}set orientation(e){this._orientation=e||t.identity$1([]),e&&Ui(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),e=this.right();return{bearing:Math.atan2(-e[1],e[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,e){this._orientation=Bi(t,e),Ui(this._transform,this._orientation)}forward(){const e=t.getColumn(this._transform,2);return[-e[0],-e[1],-e[2]]}up(){const e=t.getColumn(this._transform,1);return[-e[0],-e[1],-e[2]]}right(){const e=t.getColumn(this._transform,0);return[e[0],e[1],e[2]]}getCameraToWorld(e,n){const i=new Float64Array(16);return t.invert(i,this.getWorldToCamera(e,n)),i}getWorldToCameraPosition(e,n,i){const r=this.position;t.scale$2(r,r,-e);const s=new Float64Array(16);return t.fromScaling(s,[i,i,i]),t.translate(s,s,r),s[10]*=n,s}getWorldToCamera(e,n){const i=new Float64Array(16),r=new Float64Array(4),s=this.position;return t.conjugate(r,this._orientation),t.scale$2(s,s,-e),t.fromQuat(i,r),t.translate(i,i,s),i[1]*=-1,i[5]*=-1,i[9]*=-1,i[13]*=-1,i[8]*=n,i[9]*=n,i[10]*=n,i[11]*=n,i}getCameraToClipPerspective(e,n,i,r){const s=new Float64Array(16);return t.perspective(s,e,n,i,r),s}getDistanceToElevation(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=0===e?0:t.mercatorZfromAltitude(e,n?t.latFromMercatorY(this.position[1]):this.position[1]),r=this.forward();return(i-this.position[2])/r[2]}clone(){return new Hi([...this.position],[...this.orientation])}}function ji(e,n){const i=Wi(e.projection,e.zoom,e.width,e.height),r=function(e,n,i,r,s){const o=new t.LngLat(i.lng-180*Zi,i.lat),a=new t.LngLat(i.lng+180*Zi,i.lat),l=e.project(o.lng,o.lat),h=e.project(a.lng,a.lat),c=-Math.atan2(h.y-l.y,h.x-l.x),u=t.MercatorCoordinate.fromLngLat(i);u.y=t.clamp(u.y,-1+Zi,1-Zi);const p=u.toLngLat(),d=e.project(p.lng,p.lat),f=t.MercatorCoordinate.fromLngLat(p);f.x+=Zi;const m=f.toLngLat(),g=e.project(m.lng,m.lat),y=qi(g.x-d.x,g.y-d.y,c),v=t.MercatorCoordinate.fromLngLat(p);v.y+=Zi;const _=v.toLngLat(),T=e.project(_.lng,_.lat),E=qi(T.x-d.x,T.y-d.y,c),x=Math.abs(y.x)/Math.abs(E.y),b=t.identity([]);t.rotateZ(b,b,-c*(1-(s?0:r)));const I=t.identity([]);return t.scale(I,I,[1,1-(1-x)*r,1]),I[4]=-E.x/E.y*r,t.rotateZ(I,I,c),t.multiply(I,b,I),I}(e.projection,0,e.center,i,n),s=Vi(e);return t.scale(r,r,[s,s,1]),r}function Vi(e){const n=e.projection,i=Wi(e.projection,e.zoom,e.width,e.height),r=Yi(n,e.center),s=Yi(n,t.LngLat.convert(n.center));return Math.pow(2,r*i+(1-i)*s)}function Wi(e,n,i,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;const o=e.range;if(!o)return 0;const a=Math.min(s,Math.max(i,r)),l=Math.log(a/1024)/Math.LN2;return t.smoothstep(o[0]+l,o[1]+l,n)}const Zi=1/4e4;function Yi(e,n){const i=t.clamp(n.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),r=new t.LngLat(n.lng-180*Zi,i),s=new t.LngLat(n.lng+180*Zi,i),o=e.project(r.lng,i),a=e.project(s.lng,i),l=t.MercatorCoordinate.fromLngLat(r),h=t.MercatorCoordinate.fromLngLat(s),c=a.x-o.x,u=a.y-o.y,p=h.x-l.x,d=h.y-l.y,f=Math.sqrt((p*p+d*d)/(c*c+u*u));return Math.log(f)/Math.LN2}function qi(t,e,n){const i=Math.cos(n),r=Math.sin(n);return{x:t*i-e*r,y:t*r+e*i}}class Xi{constructor(e,n,i,r,s,o,a){this.tileSize=512,this._renderWorldCopies=void 0===s||s,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==r?60:r,this.setProjection(o),this.setMaxBounds(a),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ki,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Hi,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const t=new Xi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,t.tileSize=this.tileSize,t.mercatorFromTransition=this.mercatorFromTransition,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._seaLevelZoom=this._seaLevelZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._nearZ=this._nearZ,t._farZ=this._farZ,t._averageElevation=this._averageElevation,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t.frustumCorners=this.frustumCorners,t}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||n)&&this._updateCameraOnTerrain(),(t||n)&&this._constrainCamera(e),this._calcMatrices()}getProjection(){return t.pick(this.projection,["name","center","parallels"])}setProjection(n){this.projectionOptions=n||{name:"mercator"};const i=this.projection?this.getProjection():void 0;this.projection=t.getProjection(this.projectionOptions);const r=!e(i,this.getProjection());return r&&this._calcMatrices(),this.mercatorFromTransition=!1,r}setMercatorFromTransition(){const e=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=t.getProjection({name:"mercator"});const n=e!==this.projection.name;return n&&this._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get cameraWorldSize(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return t.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.Point(this.width,this.height)}get bearing(){return t.wrap(this.rotation,-180,180)}set bearing(t){this.rotation=t}get rotation(){return-this.angle/Math.PI*180}set rotation(e){const n=-e*Math.PI/180;var i;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(i=new t.ARRAY_TYPE(4),t.ARRAY_TYPE!=Float32Array&&(i[1]=0,i[2]=0),i[0]=1,i[3]=1,i),function(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=i*l+s*a,t[1]=r*l+o*a,t[2]=i*-a+s*l,t[3]=r*-a+o*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const t=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/t)}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=t.degToRad(e),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(t){this._averageElevation=t,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._setZoom(e),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const t=this._elevation;this._centerAltitude=t.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=t.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const e=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],i=this.horizonLineFromTop();let r=0,s=0;for(let o=0;o<n.length;o++){const a=new t.Point(n[o][0]*this.width,i+n[o][1]*(this.height-i)),l=e.pointCoordinate(a);if(!l)continue;const h=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);r+=l[3]*h,s+=h}return 0===s?NaN:r/s}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const t=this._seaLevelZoom,e=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*e,i=this._mercatorZfromZoom(t),r=this._mercatorZfromZoom(this._maxZoom),s=Math.max(i-n,r);this._setZoom(this._zoomFromMercatorZ(s))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(e){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));let i;i=e.z<this._camera.position[2]?[n.x,n.y,n.z]:[e.x,e.y,e.z];const r=t.length(t.sub([],this._camera.position,i));return t.clamp(this._zoomFromMercatorZ(r),this._minZoom,this._maxZoom)}setFreeCameraOptions(e){if(!this.height)return;if(!e.position&&!e.orientation)return;this._updateCameraState();let n=!1;if(e.orientation&&!t.exactEquals(e.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(e.orientation)),e.position){const i=[e.position.x,e.position.y,e.position.z];t.exactEquals$1(i,this._camera.position)||(this._setCameraPosition(i),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const e=this._camera.position,n=new Gi;return n.position=new t.MercatorCoordinate(e[0],e[1],e[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}_setCameraOrientation(e){if(!t.length$1(e))return!1;t.normalize$1(e,e);const n=t.transformQuat([],[0,0,-1],e),i=t.transformQuat([],[0,-1,0],e);if(i[2]<0)return!1;const r=zi(n,i);return!!r&&(this._camera.orientation=r,!0)}_setCameraPosition(e){const n=this.zoomScale(this.minZoom)*this.tileSize,i=this.zoomScale(this.maxZoom)*this.tileSize,r=this.cameraToCenterDistance;e[2]=t.clamp(e[2],r/i,r/n),this._camera.position=e}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const n=[new t.UnwrappedTileID(0,e)];if(this.renderWorldCopies){const i=this.pointCoordinate(new t.Point(0,0)),r=this.pointCoordinate(new t.Point(this.width,0)),s=this.pointCoordinate(new t.Point(this.width,this.height)),o=this.pointCoordinate(new t.Point(0,this.height)),a=Math.floor(Math.min(i.x,r.x,s.x,o.x)),l=Math.floor(Math.max(i.x,r.x,s.x,o.x)),h=1;for(let c=a-h;c<=l+h;c++)0!==c&&n.push(new t.UnwrappedTileID(c,e))}return n}coveringTiles(e){let n=this.coveringZoomLevel(e);const i=n,r=this.elevation&&!e.isTerrainDEM,s="mercator"===this.projection.name;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);const o=this.locationCoordinate(this.center),a=this.center.lat,l=1<<n,h=[l*o.x,l*o.y,0],c="globe"===this.projection.name,u=!c,p=t.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,u),d=c?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),f=l*t.mercatorZfromAltitude(1,this.center.lat),m=this._camera.position[2]/t.mercatorZfromAltitude(1,this.center.lat),g=[l*d.x,l*d.y,m*(u?1:f)],y=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),v=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?n:0,_=e.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,T=e.isTerrainDEM?-_:this._elevation?this._elevation.getMinElevationBelowMSL():0,E=this.projection.isReprojectedInTileSpace?Vi(this):1,x=e=>{const n=1/4e4,i=new t.MercatorCoordinate(e.x+n,e.y,e.z),r=new t.MercatorCoordinate(e.x,e.y+n,e.z),s=e.toLngLat(),o=i.toLngLat(),a=r.toLngLat(),l=this.locationCoordinate(s),h=this.locationCoordinate(o),c=this.locationCoordinate(a),u=Math.hypot(h.x-l.x,h.y-l.y),p=Math.hypot(c.x-l.x,c.y-l.y);return Math.sqrt(u*p)*E/n},b=e=>{const n=_,i=T;return{aabb:t.tileAABB(this,l,0,0,0,e,i,n,this.projection),zoom:0,x:0,y:0,minZ:i,maxZ:n,wrap:e,fullyVisible:!1}},I=[];let w=[];const S=n,R=e.reparseOverscaled?i:n,C=t=>t*t,A=C((m-this._centerAltitude)*f),D=t=>{if(!this._elevation||!t.tileID||!s)return;const e=this._elevation.getMinMaxForTile(t.tileID),n=t.aabb;e?(n.min[2]=e.min,n.max[2]=e.max,n.center[2]=(n.min[2]+n.max[2])/2):(t.shouldSplit=O(t),t.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=this._centerAltitude))},O=e=>{if(e.zoom<v)return!0;if(e.zoom===S)return!1;if(null!=e.shouldSplit)return e.shouldSplit;const n=e.aabb.distanceX(g),s=e.aabb.distanceY(g);let o=A,l=1;if(c){o=C(e.aabb.distanceZ(g));const n=Math.pow(2,e.zoom),i=t.latFromMercatorY((e.y+1)/n),r=t.latFromMercatorY(e.y/n),s=Math.min(Math.max(a,i),r),h=t.circumferenceAtLatitude(s)/t.circumferenceAtLatitude(a);if(l=s===a?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,h/this._mercatorScaleRatio),this.zoom<=t.GLOBE_ZOOM_THRESHOLD_MIN&&e.zoom===S-1&&h>=.9)return!0}else if(r&&(o=C(e.aabb.distanceZ(g)*f)),this.projection.isReprojectedInTileSpace&&i<=5){const n=Math.pow(2,e.zoom),i=x(new t.MercatorCoordinate((e.x+.5)/n,(e.y+.5)/n));l=i>.85?1:i}const h=n*n+s*s+o,u=C((1<<S-e.zoom)*y*l*((t,e)=>{if(e*C(.707)<t)return 1;const n=Math.sqrt(e/t);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(o,A),h));return h<u};if(this.renderWorldCopies)for(let t=1;t<=3;t++)I.push(b(-t)),I.push(b(t));for(I.push(b(0));I.length>0;){const i=I.pop(),o=i.x,a=i.y;let u=i.fullyVisible;if(!u){const t=i.aabb.intersects(p);if(0===t)continue;u=2===t}if(i.zoom!==S&&O(i))for(let e=0;e<4;e++){const n=(o<<1)+e%2,h=(a<<1)+(e>>1),p={aabb:s?i.aabb.quadrant(e):t.tileAABB(this,l,i.zoom+1,n,h,i.wrap,i.minZ,i.maxZ,this.projection),zoom:i.zoom+1,x:n,y:h,wrap:i.wrap,fullyVisible:u,tileID:void 0,shouldSplit:void 0,minZ:i.minZ,maxZ:i.maxZ};r&&!c&&(p.tileID=new t.OverscaledTileID(i.zoom+1===S?R:i.zoom+1,i.wrap,i.zoom+1,n,h),D(p)),I.push(p)}else{const r=i.zoom===S?R:i.zoom;if(e.minzoom&&e.minzoom>r)continue;const s=h[0]-(.5+o+(i.wrap<<i.zoom))*(1<<n-i.zoom),l=h[1]-.5-a,c=i.tileID?i.tileID:new t.OverscaledTileID(r,i.wrap,i.zoom,o,a);w.push({tileID:c,distanceSq:s*s+l*l})}}if(this.fogCullDistSq){const n=this.fogCullDistSq,i=this.horizonLineFromTop();w=w.filter((r=>{const s=[0,0,0,1],o=[t.EXTENT,t.EXTENT,0,1],a=this.calculateFogTileMatrix(r.tileID.toUnwrapped());t.transformMat4$1(s,s,a),t.transformMat4$1(o,o,a);const l=t.getAABBPointSquareDist(s,o);if(0===l)return!0;let h=!1;const c=this._elevation;if(c&&l>n&&0!==i){const n=this.calculateProjMatrix(r.tileID.toUnwrapped());let s;e.isTerrainDEM||(s=c.getMinMaxForTile(r.tileID)),s||(s={min:T,max:_});const o=t.furthestTileCorner(this.rotation),a=[o[0]*t.EXTENT,o[1]*t.EXTENT,s.max];t.transformMat4(a,a,n),h=(1-a[1])*this.height*.5<i}return l<n||h}))}return w.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const n=t.clamp(e.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),i=this.projection.project(e.lng,n);return new t.Point(i.x*this.worldSize,i.y*this.worldSize)}unproject(t){return this.projection.unproject(t.x/this.worldSize,t.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/t.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(e,n){let i,r;const s=this.centerPoint;if("globe"===this.projection.name){const t=this.worldSize;i=(n.x-s.x)/t,r=(n.y-s.y)/t}else{const t=this.pointCoordinate(n),e=this.pointCoordinate(s);i=t.x-e.x,r=t.y-e.y}const o=this.locationCoordinate(e);this.setLocation(new t.MercatorCoordinate(o.x-i,o.y-r))}setLocation(t){this.center=this.coordinateLocation(t),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(t){return this.projection.locationPoint(this,t)}locationPoint3D(t){return this.projection.locationPoint(this,t,!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(e,n){const i=n?t.mercatorZfromAltitude(n,e.lat):void 0,r=this.projection.project(e.lng,e.lat);return new t.MercatorCoordinate(r.x,r.y,i)}coordinateLocation(t){return this.projection.unproject(t.x,t.y)}pointRayIntersection(e,n){const i=null!=n?n:this._centerAltitude,r=[e.x,e.y,0,1],s=[e.x,e.y,1,1];t.transformMat4$1(r,r,this.pixelMatrixInverse),t.transformMat4$1(s,s,this.pixelMatrixInverse);const o=s[3];t.scale$1(r,r,1/r[3]),t.scale$1(s,s,1/o);const a=r[2],l=s[2];return{p0:r,p1:s,t:a===l?0:(i-a)/(l-a)}}screenPointToMercatorRay(e){const n=[e.x,e.y,0,1],i=[e.x,e.y,1,1];return t.transformMat4$1(n,n,this.pixelMatrixInverse),t.transformMat4$1(i,i,this.pixelMatrixInverse),t.scale$1(n,n,1/n[3]),t.scale$1(i,i,1/i[3]),n[2]=t.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,i[2]=t.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,t.scale$1(n,n,1/this.worldSize),t.scale$1(i,i,1/this.worldSize),new t.Ray([n[0],n[1],n[2]],t.normalize([],t.sub([],i,n)))}rayIntersectionCoordinate(e){const{p0:n,p1:i,t:r}=e,s=t.mercatorZfromAltitude(n[2],this._center.lat),o=t.mercatorZfromAltitude(i[2],this._center.lat);return new t.MercatorCoordinate(t.number(n[0],i[0],r)/this.worldSize,t.number(n[1],i[1],r)/this.worldSize,t.number(s,o,r))}pointCoordinate(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._centerAltitude;return this.projection.pointCoordinate(this,t.x,t.y,e)}pointCoordinate3D(e){if(!this.elevation)return this.pointCoordinate(e);let n=this.projection.pointCoordinate3D(this,e.x,e.y);if(n)return new t.MercatorCoordinate(n[0],n[1],n[2]);let i=0,r=this.horizonLineFromTop();if(e.y>r)return this.pointCoordinate(e);const s=.02*r,o=e.clone();for(let a=0;a<10&&r-i>s;a++){o.y=t.number(i,r,.66);const e=this.projection.pointCoordinate3D(this,o.x,o.y);e?(r=o.y,n=e):i=o.y}return n?new t.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(e)}isPointAboveHorizon(t){return this.projection.isPointAboveHorizon(this,t)}isPointOnSurface(e){if(e.y<0||e.y>this.height||e.x<0||e.x>this.width)return!1;if(this.elevation||this.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(e);const n=this.pointCoordinate(e);return n.y>=0&&n.y<=1}_coordinatePoint(e,n){const i=n&&this.elevation?this.elevation.getAtPointOrZero(e,this._centerAltitude):this._centerAltitude,r=[e.x*this.worldSize,e.y*this.worldSize,i+e.toAltitude(),1];return t.transformMat4$1(r,r,this.pixelMatrix),r[3]>0?new t.Point(r[0]/r[3],r[1]/r[3]):new t.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:e,left:n}=this._edgeInsets,i=this.height-this._edgeInsets.bottom,r=this.width-this._edgeInsets.right,s=this.pointLocation3D(new t.Point(n,e)),o=this.pointLocation3D(new t.Point(r,e)),a=this.pointLocation3D(new t.Point(r,i)),l=this.pointLocation3D(new t.Point(n,i));let h=Math.min(s.lng,o.lng,a.lng,l.lng),c=Math.max(s.lng,o.lng,a.lng,l.lng),u=Math.min(s.lat,o.lat,a.lat,l.lat),p=Math.max(s.lat,o.lat,a.lat,l.lat);const d=Math.pow(2,-this.zoom)/16*270,f="globe"===this.projection.name?1:4,m=(e,n,i,r,s)=>{const o=(e+i)/2,a=(n+r)/2,l=new t.Point(o,a),{lng:g,lat:y}=this.pointLocation3D(l),v=Math.max(0,h-g,u-y,g-c,y-p);h=Math.min(h,g),c=Math.max(c,g),u=Math.min(u,y),p=Math.max(p,y),(s<f||v>d)&&(m(e,n,o,a,s+1),m(o,a,i,r,s+1))};if(m(n,e,r,e,1),m(r,e,r,i,1),m(r,i,n,i,1),m(n,i,n,e,1),"globe"===this.projection.name){const[e,n]=t.polesInViewport(this);e?(p=90,c=180,h=-180):n&&(u=-90,c=180,h=-180)}return new t.LngLatBounds(new t.LngLat(h,u),new t.LngLat(c,p))}_getBoundsRectangular(e,n){const{top:i,left:r}=this._edgeInsets,s=this.height-this._edgeInsets.bottom,o=this.width-this._edgeInsets.right,a=new t.Point(r,i),l=new t.Point(o,i),h=new t.Point(o,s),c=new t.Point(r,s);let u=this.pointCoordinate(a,e),p=this.pointCoordinate(l,e);const d=this.pointCoordinate(h,n),f=this.pointCoordinate(c,n),m=(t,e)=>(e.y-t.y)/(e.x-t.x);return u.y>1&&p.y>=0?u=new t.MercatorCoordinate((1-f.y)/m(f,u)+f.x,1):u.y<0&&p.y<=1&&(u=new t.MercatorCoordinate(-f.y/m(f,u)+f.x,0)),p.y>1&&u.y>=0?p=new t.MercatorCoordinate((1-d.y)/m(d,p)+d.x,1):p.y<0&&u.y<=1&&(p=new t.MercatorCoordinate(-d.y/m(d,p)+d.x,0)),(new t.LngLatBounds).extend(this.coordinateLocation(u)).extend(this.coordinateLocation(p)).extend(this.coordinateLocation(f)).extend(this.coordinateLocation(d))}_getBoundsRectangularTerrain(){const t=this.elevation;if(!t.visibleDemTiles.length||t.isUsingMockSource())return this._getBoundsRectangular(0,0);const e=t.visibleDemTiles.reduce(((t,e)=>{if(e.dem){const n=e.dem.tree;t.min=Math.min(t.min,n.minimums[0]),t.max=Math.max(t.max,n.maximums[0])}return t}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(e.min*t.exaggeration(),e.max*t.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-e*(1-this._horizonShift);return t?Math.max(0,n):n}getMaxBounds(){return this.maxBounds}setMaxBounds(e){this.maxBounds=e,this.minLat=-t.MAX_MERCATOR_LATITUDE,this.maxLat=t.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,e&&(this.minLat=e.getSouth(),this.maxLat=e.getNorth(),this.minLng=e.getWest(),this.maxLng=e.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=t.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=t.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=t.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=t.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(t,e){return this.projection.createTileMatrix(this,e,t)}calculateDistanceTileData(e){const n=e.key,i=this._distanceTileDataCache;if(i[n])return i[n];const r=e.canonical,s=1/this.height,o=this.cameraWorldSize,a=o/this.zoomScale(r.z),l=(r.x+Math.pow(2,r.z)*e.wrap)*a,h=r.y*a,c=this.point;c.x*=o/this.worldSize,c.y*=o/this.worldSize;const u=this.angle,p=Math.sin(-u),d=-Math.cos(-u);return i[n]={bearing:[p,d],center:[(c.x-l)*s,(c.y-h)*s],scale:a/t.EXTENT*s},i[n]}calculateFogTileMatrix(e){const n=e.key,i=this._fogTileMatrixCache;if(i[n])return i[n];const r=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,e);return t.multiply(r,this.worldToFogMatrix,r),i[n]=new Float32Array(r),i[n]}calculateProjMatrix(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.key,r=n?this._alignedProjMatrixCache:this._projMatrixCache;if(r[i])return r[i];const s=this.calculatePosMatrix(e,this.worldSize);return t.multiply(s,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,s),r[i]=new Float32Array(s),r[i]}calculatePixelsToTileUnitsMatrix(e){const n=e.tileID.key,i=this._pixelsToTileUnitsCache;if(i[n])return i[n];const r=function(e,n){const{scale:i}=e.tileTransform,r=i*t.EXTENT/(e.tileSize*Math.pow(2,n.zoom-e.tileID.overscaledZ+e.tileID.canonical.z));return s=new Float32Array(4),l=(o=n.inverseAdjustmentMatrix)[1],h=o[2],c=o[3],p=(a=[r,r])[1],s[0]=o[0]*(u=a[0]),s[1]=l*u,s[2]=h*p,s[3]=c*p,s;var s,o,a,l,h,c,u,p}(e,this);return i[n]=r,i[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const e=1/this.worldSize,n=t.fromScaling([],[e,e,e]);return t.multiply(n,n,this.globeMatrix),n}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const e=this._elevation;this._updateCameraState();const n=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(n),r=this._camera.forward(),s=t.mercatorZfromAltitude(1,this._center.lat);i[2]/=s,r[2]/=s,t.normalize(r,r);const o=e.raycast(i,r,e.exaggeration());if(o){const e=t.scaleAndAdd([],i,r,o),n=new t.MercatorCoordinate(e[0],e[1],t.mercatorZfromAltitude(e[2],t.latFromMercatorY(e[1]))),a=(n.z+t.length([n.x-i[0],n.y-i[1],n.z-i[2]*s]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(a),this._centerAltitude=n.toAltitude(),this._center=this.coordinateLocation(n),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._elevation)return;const n=this._elevation,i=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(i),s=n.getAtPointOrZero(new t.MercatorCoordinate(...r)),o=this.pixelsPerMeter/this.worldSize*s,a=this._minimumHeightOverTerrain(),l=r[2]-o;if(l<=a)if(l<0||e){const e=this.locationCoordinate(this._center,this._centerAltitude),n=[r[0],r[1],e.z-r[2]],i=t.length(n);n[2]-=(a-l)/this._pixelsPerMercatorPixel;const s=t.length(n);if(0===s)return;t.scale$2(n,n,i/s*this._pixelsPerMercatorPixel),this._camera.position=[r[0],r[1],e.z*this._pixelsPerMercatorPixel-n[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||e){const n=this.center;return n.lat=t.clamp(n.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!e)&&(n.lng=t.clamp(n.lng,this.minLng,this.maxLng)),this.center=n,void(this._constraining=!1)}const n=this._unmodified,{x:i,y:r}=this.point;let s=0,o=i,a=r;const l=this.width/2,h=this.height/2,c=this.worldMinY*this.scale,u=this.worldMaxY*this.scale;if(r-h<c&&(a=c+h),r+h>u&&(a=u-h),u-c<this.height&&(s=Math.max(s,this.height/(u-c)),a=(u+c)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const t=this.worldMinX*this.scale,e=this.worldMaxX*this.scale,n=this.worldSize/2-(t+e)/2;o=(i+n+this.worldSize)%this.worldSize-n,o-l<t&&(o=t+l),o+l>e&&(o=e-l),e-t<this.width&&(s=Math.max(s,this.width/(e-t)),o=(e+t)/2)}o===i&&a===r||(this.center=this.unproject(new t.Point(o,a))),s&&(this.zoom+=this.scaleZoom(s)),this._constrainCamera(),this._unmodified=n,this._constraining=!1}_minZoomForBounds(){let t=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(t=Math.max(t,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),t}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,n=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=t.mercatorZfromAltitude(1,this.center.lat)/t.mercatorZfromAltitude(1,t.GLOBE_SCALE_MATCH_LATITUDE));const i=Wi(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,i),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const r="meters"===this.projection.zAxisUnit?n:1,s=this._camera.getWorldToCamera(this.worldSize,r),o=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);o[8]=2*-e.x/this.width,o[9]=2*e.y/this.height;let a=t.mul([],o,s);if(this.projection.isReprojectedInTileSpace){const e=this.locationCoordinate(this.center),n=t.identity([]);t.translate(n,n,[e.x*this.worldSize,e.y*this.worldSize,0]),t.multiply(n,n,ji(this)),t.translate(n,n,[-e.x*this.worldSize,-e.y*this.worldSize,0]),t.multiply(a,a,n),this.inverseAdjustmentMatrix=function(t){const e=ji(t,!0);return v([],[e[0],e[1],e[4],e[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=t.scale([],a,[this.worldSize,this.worldSize,this.worldSize/r,1]),this.projMatrix=a,this.invProjMatrix=t.invert(new Float64Array(16),this.projMatrix);const l=t.invert([],o);this.frustumCorners=t.FrustumCorners.fromInvProjectionMatrix(l,this.horizonLineFromTop(),this.height);const h=new Float32Array(16);t.identity(h),t.scale(h,h,[1,-1,1]),t.rotateX(h,h,this._pitch),t.rotateZ(h,h,this.angle);const c=t.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),u=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;c[8]=2*-e.x/this.width,c[9]=2*(e.y+u)/this.height,this.skyboxMatrix=t.multiply(h,c,h);const p=this.point,d=p.x,f=p.y,m=this.width%2/2,g=this.height%2/2,y=Math.cos(this.angle),_=Math.sin(this.angle),T=d-Math.round(d)+y*m+_*g,E=f-Math.round(f)+y*g+_*m,x=new Float64Array(a);if(t.translate(x,x,[T>.5?T-1:T,E>.5?E-1:E,0]),this.alignedProjMatrix=x,a=t.create(),t.scale(a,a,[this.width/2,-this.height/2,1]),t.translate(a,a,[1,-1,0]),this.labelPlaneMatrix=a,a=t.create(),t.scale(a,a,[1,-1,1]),t.translate(a,a,[-1,-1,0]),t.scale(a,a,[2/this.width,2/this.height,1]),this.glCoordMatrix=a,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},a=t.invert(new Float64Array(16),this.pixelMatrix),!a)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=a,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=t.calculateGlobeMatrix(this);const e=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=t.transformMat4(e,e,s),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=a;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const e=this.cameraWorldSizeForFog,n=this.cameraPixelsPerMeter,i=this._camera.position,r=1/this.height/this._pixelsPerMercatorPixel,s=[e,e,n];t.scale$2(s,s,r),t.scale$2(i,i,-1),t.multiply$2(i,i,s);const o=t.create();t.translate(o,o,i),t.scale(o,o,s),this.mercatorFogMatrix=o,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(e,n,r)}_computeCameraPosition(t){const e=(t=t||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),i=this.point,r=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*e-t/this.worldSize*this._centerAltitude;return[i.x/this.worldSize-n[0]*r,i.y/this.worldSize-n[1]*r,t/this.worldSize*this._centerAltitude-n[2]*r]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(e){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),i=this._camera.position[2],r=e[2];let s=1;this.projection.wrap&&(this.center=this.center.wrap()),r>0&&(s=Math.min((n-i)/r,1)),this._camera.position=t.scaleAndAdd([],this._camera.position,e,s),this._updateStateFromCamera()}_updateStateFromCamera(){const e=this._camera.position,n=this._camera.forward(),{pitch:i,bearing:r}=this._camera.getPitchBearing(),s=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,o=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.degToRad(this._maxPitch)),a=Math.max((e[2]-s)/Math.cos(i),o),l=this._zoomFromMercatorZ(a);t.scaleAndAdd(e,e,n,a),this._pitch=t.clamp(i,t.degToRad(this.minPitch),t.degToRad(this.maxPitch)),this.angle=t.wrap(r,-Math.PI,Math.PI),this._setZoom(t.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new t.MercatorCoordinate(e[0],e[1],e[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}zoomFromMercatorZAdjusted(e){let n=0,i=t.GLOBE_ZOOM_THRESHOLD_MAX,r=0,s=1/0;for(;i-n>1e-6&&i>n;){const t=n+.5*(i-n),o=this.tileSize*Math.pow(2,t),a=this.getCameraToCenterDistance(this.projection,t,o),l=this.scaleZoom(a/(e*this.tileSize)),h=Math.abs(t-l);h<s&&(s=h,r=t),t<l?n=t:i=t}return r}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(t.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(e,n){const i=Math.min(e.x,n.x),r=Math.max(e.x,n.x),s=Math.min(e.y,n.y),o=Math.max(e.y,n.y);if(s<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const a=[new t.Point(i,s),new t.Point(r,o),new t.Point(i,o),new t.Point(r,s)],l=this.renderWorldCopies?-3:0,h=this.renderWorldCopies?4:1;for(const t of a){const e=this.pointRayIntersection(t);if(e.t<0)return!0;const n=this.rayIntersectionCoordinate(e);if(n.x<l||n.y<0||n.x>h||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+t.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new t.Point(0,0),new t.Point(this.width,this.height))}zoomDeltaToMovement(e,n){const i=t.length(t.sub([],this._camera.position,e)),r=this._zoomFromMercatorZ(i)+n;return i-this._mercatorZfromZoom(r)}getCameraPoint(){if("globe"===this.projection.name){const e=function(e,n){let[i,r,s]=e;const o=[i,r,s,1];t.transformMat4$1(o,o,n);const a=o[3]=Math.max(o[3],1e-6);return o[0]/=a,o[1]/=a,o[2]/=a,o}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new t.Point(e[0],e[1])}{const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))}}getCameraToCenterDistance(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.worldSize;const i=Wi(t,e,this.width,this.height,1024),r=t.pixelSpaceConversion(this.center.lat,n,i);return.5/Math.tan(.5*this._fov)*this.height*r}getWorldToCameraMatrix(){const e=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&t.multiply(e,e,this.globeMatrix),e}}function Ki(t,e){let n=!1,i=null;const r=()=>{i=null,n&&(t(),i=setTimeout(r,e),n=!1)};return()=>(n=!0,i||r(),i)}class Qi{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ki(this._updateHashUnthrottled.bind(this),300)}addTo(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),e.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),t.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const e=this._map;if(!e)return"";const n=Ji(e);if(this._hashName){const e=this._hashName;let i=!1;const r=t.window.location.hash.slice(1).split("&").map((t=>{const r=t.split("=")[0];return r===e?(i=!0,"".concat(r,"=").concat(n)):t})).filter((t=>t));return i||r.push("".concat(e,"=").concat(n)),"#".concat(r.join("&"))}return"#".concat(n)}_getCurrentHash(){const e=t.window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((t=>t.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const t=this._map;if(!t)return!1;const e=this._getCurrentHash();if(e.length>=3&&!e.some((t=>isNaN(t)))){const n=t.dragRotate.isEnabled()&&t.touchZoomRotate.isEnabled()?+(e[3]||0):t.getBearing();return t.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:n,pitch:+(e[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());t.window.history.replaceState(t.window.history.state,null,e)}}function Ji(t,e){const n=t.getCenter(),i=Math.round(100*t.getZoom())/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),s=Math.pow(10,r),o=Math.round(n.lng*s)/s,a=Math.round(n.lat*s)/s,l=t.getBearing(),h=t.getPitch();let c=e?"/".concat(o,"/").concat(a,"/").concat(i):"".concat(i,"/").concat(a,"/").concat(o);return(l||h)&&(c+="/"+Math.round(10*l)/10),h&&(c+="/".concat(Math.round(h))),c}const $i={linearity:.3,easing:t.bezier(0,0,.3,1)},tr=t.extend({deceleration:2500,maxSpeed:1400},$i),er=t.extend({deceleration:20,maxSpeed:1400},$i),nr=t.extend({deceleration:1e3,maxSpeed:360},$i),ir=t.extend({deceleration:1e3,maxSpeed:90},$i);class rr{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,n=t.exported.now();for(;e.length>0&&n-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._map._prefersReducedMotion())return;if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const i=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,r={};if(n.pan.mag()){const s=or(n.pan.mag(),i,t.extend({},tr,e||{}));r.offset=n.pan.mult(s.amount/n.pan.mag()),r.center=this._map.transform.center,sr(r,s)}if(n.zoom){const t=or(n.zoom,i,er);r.zoom=this._map.transform.zoom+t.amount,sr(r,t)}if(n.bearing){const e=or(n.bearing,i,nr);r.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),sr(r,e)}if(n.pitch){const t=or(n.pitch,i,ir);r.pitch=this._map.transform.pitch+t.amount,sr(r,t)}if(r.zoom||r.bearing){const t=void 0===n.pinchAround?n.around:n.pinchAround;r.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),r.noMoveStart=!0,r}}function sr(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function or(e,n,i){const{maxSpeed:r,linearity:s,deceleration:o}=i,a=t.clamp(e*s/(n/1e3),-r,r),l=Math.abs(a)/(o*s);return{easing:i.easing,duration:1e3*l,amount:a*(l/2)}}class ar extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=f(n.getCanvasContainer(),i),o=n.unproject(s);super(e,t.extend({point:s,lngLat:o,originalEvent:i},r)),this._defaultPrevented=!1,this.target=n}}class lr extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,i){const r="touchend"===e?i.changedTouches:i.touches,s=m(n.getCanvasContainer(),r),o=s.map((t=>n.unproject(t))),a=s.reduce(((t,e,n,i)=>t.add(e.div(i.length))),new t.Point(0,0));super(e,{points:s,point:a,lngLats:o,lngLat:n.unproject(a),originalEvent:i}),this._defaultPrevented=!1}}class hr extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,e,n){super(t,{originalEvent:n}),this._defaultPrevented=!1}}class cr{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){this._mousedownPos=void 0}wheel(t){return this._firePreventable(new hr(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new ar(t.type,this._map,t))}mouseup(t){this._map.fire(new ar(t.type,this._map,t))}preclick(e){const n=t.extend({},e);n.type="preclick",this._map.fire(new ar(n.type,this._map,n))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||(this.preclick(t),this._map.fire(new ar(t.type,this._map,t)))}dblclick(t){return this._firePreventable(new ar(t.type,this._map,t))}mouseover(t){this._map.fire(new ar(t.type,this._map,t))}mouseout(t){this._map.fire(new ar(t.type,this._map,t))}touchstart(t){return this._firePreventable(new lr(t.type,this._map,t))}touchmove(t){this._map.fire(new lr(t.type,this._map,t))}touchend(t){this._map.fire(new lr(t.type,this._map,t))}touchcancel(t){this._map.fire(new lr(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ur{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(t){this._map.fire(new ar(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ar("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new ar(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pr{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(c(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const n=e,i=this._startPos,r=this._lastPos;if(!i||!r||r.equals(n)||!this._box&&n.dist(i)<this._clickTolerance)return;this._lastPos=n,this._box||(this._box=s("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const o=Math.min(i.x,n.x),a=Math.max(i.x,n.x),l=Math.min(i.y,n.y),h=Math.max(i.y,n.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform="translate(".concat(o,"px,").concat(l,"px)"),this._box.style.width=a-o+"px",this._box.style.height=h-l+"px")}))}mouseupWindow(e,n){if(!this._active)return;const i=this._startPos,r=n;if(i&&0===e.button){if(this.reset(),d(),i.x!==r.x||i.y!==r.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(i,r,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",e)}}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),u(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))}}function dr(t,e){const n={};for(let i=0;i<t.length;i++)n[t[i].identifier]=e[i];return n}class fr{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(e,n,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=e.timeStamp),i.length===this.numTouches&&(this.centroid=function(e){const n=new t.Point(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=dr(i,n)))}touchmove(t,e,n){if(this.aborted||!this.centroid)return;const i=dr(n,e);for(const r in this.touches){const t=i[r];(!t||t.dist(this.touches[r])>30)&&(this.aborted=!0)}}touchend(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class mr{constructor(t){this.singleTap=new fr(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(t,e,n){this.singleTap.touchstart(t,e,n)}touchmove(t,e,n){this.singleTap.touchmove(t,e,n)}touchend(t,e,n){const i=this.singleTap.touchend(t,e,n);if(i){const e=t.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(i)<30;if(e&&n||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}}}class gr{constructor(){this._zoomIn=new mr({numTouches:1,numTaps:2}),this._zoomOut=new mr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)}touchmove(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)}touchend(t,e,n){const i=this._zoomIn.touchend(t,e,n),r=this._zoomOut.touchend(t,e,n);return i?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(i)},{originalEvent:t})}):r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(r)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const yr={0:1,2:2};class vr{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const n=g(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}mousemoveWindow(t,e){const n=this._lastPoint;if(n)if(t.preventDefault(),null!=this._eventButton&&function(t,e){const n=yr[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)}mouseupWindow(t){this._lastPoint&&g(t)===this._eventButton&&(this._moved&&d(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _r extends vr{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class Tr extends vr{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(t){t.preventDefault()}}class Er extends vr{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(t){t.preventDefault()}}class xr{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),t.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)}touchstart(t,e,n){return this._calculateTransform(t,e,n)}touchmove(e,n,i){if(this._active&&!(i.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===i.length&&!t.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return e.cancelable&&e.preventDefault(),this._calculateTransform(e,n,i)}}touchend(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,i){i.length>0&&(this._active=!0);const r=dr(i,n),s=new t.Point(0,0),o=new t.Point(0,0);let a=0;for(const t in r){const e=r[t],n=this._touches[t];n&&(s._add(e),o._add(e.sub(n)),a++,r[t]=e)}if(this._touches=r,a<this._minTouches||!o.mag())return;const l=o.div(a);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:s.div(a),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=s("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class br{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(t){}_move(t,e,n){return{}}touchstart(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,n){const i=this._firstTwoTouches;if(!i)return;t.preventDefault();const[r,s]=i,o=Ir(n,e,r),a=Ir(n,e,s);if(!o||!a)return;const l=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],l,t)}touchend(t,e,n){if(!this._firstTwoTouches)return;const[i,r]=this._firstTwoTouches,s=Ir(n,e,i),o=Ir(n,e,r);s&&o||(this._active&&d(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ir(t,e,n){for(let i=0;i<t.length;i++)if(t[i].identifier===n)return e[i]}function wr(t,e){return Math.log(t/e)/Math.LN2}class Sr extends br{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(wr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:wr(this._distance,n),pinchAround:e}}}function Rr(t,e){return 180*t.angleWith(e)/Math.PI}class Cr extends br{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const n=this._vector;if(this._vector=t[0].sub(t[1]),n&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Rr(this._vector,n),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,n=this._startVector;if(!n)return!1;const i=Rr(t,n);return Math.abs(i)<e}}function Ar(t){return Math.abs(t.y)>Math.abs(t.x)}class Dr extends br{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(t){this._lastPoints=t,Ar(t[0].sub(t[1]))&&(this._valid=!1)}_move(e,n,i){const r=this._lastPoints;if(!r)return;const s=e[0].sub(r[0]),o=e[1].sub(r[1]);return this._map._cooperativeGestures&&!t.isFullscreen()&&i.touches.length<3||(this._valid=this.gestureBeginsVertically(s,o,i.timeStamp),!this._valid)?void 0:(this._lastPoints=e,this._active=!0,{pitchDelta:(s.y+o.y)/2*-.5})}gestureBeginsVertically(t,e,n){if(void 0!==this._valid)return this._valid;const i=t.mag()>=2,r=e.mag()>=2;if(!i&&!r)return;if(!i||!r)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const s=t.y>0==e.y>0;return Ar(t)&&Ar(e)&&s}}const Or={panStep:100,bearingStep:15,pitchStep:10};class Nr{constructor(){const t=Or;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,n=0,i=0,r=0,s=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),s=-1);break;case 40:t.shiftKey?i=-1:(t.preventDefault(),s=1);break;default:return}return this._rotationDisabled&&(n=0,i=0),{cameraAnimation:o=>{const a=o.getZoom();o.easeTo({duration:300,easeId:"keyboardHandler",easing:Mr,zoom:e?Math.round(a)+e*(t.shiftKey?2:1):a,bearing:o.getBearing()+n*this._bearingStep,pitch:o.getPitch()+i*this._pitchStep,offset:[-r*this._panStep,-s*this._panStep],center:o.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Mr(t){return t*(2-t)}const Pr=4.000244140625;class Fr{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(e){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(e.ctrlKey||e.metaKey||this.isZooming()||t.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const i=t.exported.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==n&&n%Pr==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const e=f(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:e,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform;"wheel"===this._type&&e.projection.wrap&&(e._center.lng>=180||e._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const n=()=>e._terrainEnabled()&&this._aroundCoord?e.computeZoomRelativeTo(this._aroundCoord):e.zoom;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>Pr?this._wheelZoomRate:this._defaultZoomRate;let i=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==i&&(i=1/i);const r=n(),s=Math.pow(2,r),o="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):s;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=r,this._easing=this._smoothOutEasing(200)),this._delta=0}const i="number"==typeof this._targetZoom?this._targetZoom:n(),r=this._startZoom,s=this._easing;let o,a=!1;if("wheel"===this._type&&r&&s){const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),n=s(e);o=t.number(r,i,n),e<1?this._frameId||(this._frameId=!0):a=!0}else o=i,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!a,zoomDelta:o-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.ease;if(this._prevEase){const e=this._prevEase,i=(t.exported.now()-e.start)/e.duration,r=e.easing(i+.01)-e.easing(i),s=.27/Math.sqrt(r*r+1e-4)*.01,o=Math.sqrt(.0729-s*s);n=t.bezier(s,o,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:n},n}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=s("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(t.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class Lr{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class kr{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(t,e){return t.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ur{constructor(){this._tap=new mr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))}touchmove(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const i=e[0],r=i.y-this._swipePoint.y;return this._swipePoint=i,t.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(t,e,n)}touchend(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Br{constructor(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class zr{constructor(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Gr{constructor(t,e,n,i){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Hr=t=>t.zoom||t.drag||t.pitch||t.rotate;class jr extends t.Event{}class Vr{constructor(){this.constants=[1,1,.01],this.radius=0}setup(e,n){const i=t.sub([],n,e);this.radius=t.length(i[2]<0?t.div([],i,this.constants):[i[0],i[1],0])}projectRay(e){t.div(e,e,this.constants),t.normalize(e,e),t.mul$1(e,e,this.constants);const n=t.scale$2([],e,this.radius);if(n[2]>0){const e=t.scale$2([],[0,0,1],t.dot(n,[0,0,1])),i=t.scale$2([],t.normalize([],[n[0],n[1],0]),this.radius),r=t.add([],n,t.scale$2([],t.sub([],t.add([],i,e),n),2));n[0]=r[0],n[1]=r[1]}return n}}function Wr(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class Zr{constructor(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new rr(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Vr,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);const i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[t.window,"blur",void 0]];for(const[r,s,o]of this._listeners)r.addEventListener(s,r===t.window.document?this.handleWindowEvent:this.handleEvent,o)}destroy(){for(const[e,n,i]of this._listeners)e.removeEventListener(n,e===t.window.document?this.handleWindowEvent:this.handleEvent,i)}_addDefaultHandlers(t){const e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new cr(e,t));const i=e.boxZoom=new pr(e,t);this._add("boxZoom",i);const r=new gr,s=new kr;e.doubleClickZoom=new Lr(s,r),this._add("tapZoom",r),this._add("clickZoom",s);const o=new Ur;this._add("tapDragZoom",o);const a=e.touchPitch=new Dr(e);this._add("touchPitch",a);const l=new Tr(t),h=new Er(t);e.dragRotate=new zr(t,l,h),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",h,["mouseRotate"]);const c=new _r(t),u=new xr(e,t);e.dragPan=new Br(n,c,u),this._add("mousePan",c),this._add("touchPan",u,["touchZoom","touchRotate"]);const p=new Cr,d=new Sr;e.touchZoomRotate=new Gr(n,d,p,o),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ur(e));const f=e.scrollZoom=new Fr(e,this);this._add("scrollZoom",f,["mousePan"]);const m=e.keyboard=new Nr;this._add("keyboard",m);for(const g of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[g]&&e[g].enable(t[g])}_add(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Hr(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(t,e,n){for(const i in t)if(i!==n&&(!e||e.indexOf(i)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,"".concat(t.type,"Window"))}_getMapTouches(t){const e=[];for(const n of t)this._el.contains(n.target)&&e.push(n);return e}handleEvent(t,e){this._updatingCamera=!0;const n="renderFrame"===t.type,i=n?void 0:t,r={needsRenderFrame:!1},s={},o={},a=t.touches?this._getMapTouches(t.touches):void 0,l=a?m(this._el,a):n?void 0:f(this._el,t);for(const{handlerName:u,handler:p,allowed:d}of this._handlers){if(!p.isEnabled())continue;let n;this._blockedByActive(o,d,u)?p.reset():p[e||t.type]&&(n=p[e||t.type](t,l,a),this.mergeHandlerResult(r,s,n,u,i),n&&n.needsRenderFrame&&this._triggerRenderFrame()),(n||p.isActive())&&(o[u]=p)}const h={};for(const u in this._previousActiveHandlers)o[u]||(h[u]=i);this._previousActiveHandlers=o,(Object.keys(h).length||Wr(r))&&(this._changes.push([r,s,h]),this._triggerRenderFrame()),(Object.keys(o).length||Wr(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:c}=r;c&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],c(this._map))}mergeHandlerResult(e,n,i,r,s){if(!i)return;t.extend(e,i);const o={handlerName:r,originalEvent:i.originalEvent||s};void 0!==i.zoomDelta&&(n.zoom=o),void 0!==i.panDelta&&(n.drag=o),void 0!==i.pitchDelta&&(n.pitch=o),void 0!==i.bearingDelta&&(n.rotate=o)}_applyChanges(){const e={},n={},i={};for(const[r,s,o]of this._changes)r.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(r.panDelta)),r.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+r.zoomDelta),r.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+r.bearingDelta),r.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+r.pitchDelta),void 0!==r.around&&(e.around=r.around),void 0!==r.aroundCoord&&(e.aroundCoord=r.aroundCoord),void 0!==r.pinchAround&&(e.pinchAround=r.pinchAround),r.noInertia&&(e.noInertia=r.noInertia),t.extend(n,s),t.extend(i,o);this._updateMapTransform(e,n,i),this._changes=[]}_updateMapTransform(e,n,i){const r=this._map,s=r.transform,o=t=>[t.x,t.y,t.z];if((t=>{const e=this._eventsInProgress.drag;return e&&!this._handlersById[e.handlerName].isActive()})()&&!Wr(e)){const t=s.zoom;s.cameraElevationReference="sea",s.recenterOnTerrain(),s.cameraElevationReference="ground",t!==s.zoom&&this._map._update(!0)}if(s._isCameraConstrained&&r._stop(!0),!Wr(e))return void this._fireEvents(n,i,!0);let{panDelta:a,zoomDelta:l,bearingDelta:h,pitchDelta:c,around:u,aroundCoord:p,pinchAround:d}=e;s._isCameraConstrained&&(l>0&&(l=0),s._isCameraConstrained=!1),void 0!==d&&(u=d),(l||(t=>n[t]&&!this._eventsInProgress[t])("drag"))&&u&&(this._dragOrigin=o(s.pointCoordinate3D(u)),this._trackingEllipsoid.setup(s._camera.position,this._dragOrigin)),s.cameraElevationReference="sea",r._stop(!0),u=u||r.transform.centerPoint,h&&(s.bearing+=h),c&&(s.pitch+=c),s._updateCameraState();const f=[0,0,0];if(a)if("mercator"===s.projection.name){const t=this._trackingEllipsoid.projectRay(s.screenPointToMercatorRay(u).dir),e=this._trackingEllipsoid.projectRay(s.screenPointToMercatorRay(u.sub(a)).dir);f[0]=e[0]-t[0],f[1]=e[1]-t[1]}else{const e=s.pointCoordinate(u);if("globe"===s.projection.name){a=a.rotate(-s.angle);const n=s._pixelsPerMercatorPixel/s.worldSize;f[0]=-a.x*t.mercatorScale(t.latFromMercatorY(e.y))*n,f[1]=-a.y*t.mercatorScale(s.center.lat)*n}else{const t=s.pointCoordinate(u.sub(a));e&&t&&(f[0]=t.x-e.x,f[1]=t.y-e.y)}}const m=s.zoom,g=[0,0,0];if(l){const e=o(p||s.pointCoordinate3D(u)),n={dir:t.normalize([],t.sub([],e,s._camera.position))};if(n.dir[2]<0){const i=s.zoomDeltaToMovement(e,l);t.scale$2(g,n.dir,i)}}const y=t.add(f,f,g);s._translateCameraConstrained(y),l&&Math.abs(s.zoom-m)>1e-4&&s.recenterOnTerrain(),s.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(n,i,!0)}_fireEvents(e,n,i){const r=Hr(this._eventsInProgress),s=Hr(e),o={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(o["".concat(t,"start")]=n),this._eventsInProgress[t]=e[t]}!r&&s&&this._fireEvent("movestart",s.originalEvent);for(const t in o)this._fireEvent(t,o[t]);s&&this._fireEvent("move",s.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const a={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:i}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=n[e]||i,a["".concat(t,"end")]=l)}for(const t in a)this._fireEvent(t,a[t]);const h=Hr(this._eventsInProgress);if(i&&(r||s)&&!h){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(n(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{this._frameId=void 0,this.handleEvent(new jr("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Yr="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class qr extends t.Evented{constructor(e,n){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=n.bearingSnap,this._respectPrefersReducedMotion=!1!==n.respectPrefersReducedMotion,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,n,i){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),i)}panTo(e,n,i){return this.easeTo(t.extend({center:e},n),i)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,n,i){return this.easeTo(t.extend({zoom:e},n),i)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,n,i){return this.easeTo(t.extend({bearing:e},n),i)}resetNorth(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,n){e=t.LngLatBounds.convert(e);const i=n&&n.bearing||0,r=n&&n.pitch||0,s=e.getNorthWest(),o=e.getSouthEast();return this._cameraForBounds(this.transform,s,o,i,r,n)}_extendCameraOptions(e){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(e=t.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){const t=e.padding;e.padding={top:t,bottom:t,right:t,left:t}}return e.padding=t.extend(n,e.padding),e}_minimumAABBFrustumDistance(t,e){const n=e.max[0]-e.min[0],i=e.max[1]-e.min[1];return n/i>t.aspect?n/(2*Math.tan(.5*t.fovX)*t.aspect):i/(2*Math.tan(.5*t.fovY)*t.aspect)}_cameraForBoundsOnGlobe(e,n,i,r,s,o){const a=e.clone(),l=this._extendCameraOptions(o);a.bearing=r,a.pitch=s;const h=t.LngLat.convert(n),c=t.LngLat.convert(i),u=.5*(h.lat+c.lat),p=.5*(h.lng+c.lng),d=t.latLngToECEF(u,p),f=t.normalize([],d),m=t.normalize([],t.cross([],f,[0,1,0])),g=t.cross([],m,f),y=[m[0],m[1],m[2],0,g[0],g[1],g[2],0,f[0],f[1],f[2],0,0,0,0,1],v=[d,t.latLngToECEF(h.lat,h.lng),t.latLngToECEF(c.lat,h.lng),t.latLngToECEF(c.lat,c.lng),t.latLngToECEF(h.lat,c.lng),t.latLngToECEF(u,h.lng),t.latLngToECEF(u,c.lng),t.latLngToECEF(h.lat,p),t.latLngToECEF(c.lat,p)];let _=t.Aabb.fromPoints(v.map((e=>[t.dot(m,e),t.dot(g,e),t.dot(f,e)])));const T=t.transformMat4([],_.center,y);0===t.squaredLength(T)&&t.set(T,0,0,1),t.normalize(T,T),t.scale$2(T,T,t.GLOBE_RADIUS),a.center=t.ecefToLatLng(T);const E=a.getWorldToCameraMatrix(),x=t.invert(new Float64Array(16),E);_=t.Aabb.applyTransform(_,t.multiply([],E,y)),t.transformMat4(T,T,E);const b=.5*(_.max[2]-_.min[2]),I=this._minimumAABBFrustumDistance(a,_),w=t.scale$2([],[0,0,1],b),S=t.add(w,T,w),R=I+(0===a.pitch?0:t.distance(T,S)),C=a.globeCenterInViewSpace,A=t.sub([],T,[C[0],C[1],C[2]]);t.normalize(A,A),t.scale$2(A,A,R);const D=t.add([],T,A);t.transformMat4(D,D,x);const O=t.earthRadius/t.GLOBE_RADIUS,N=t.length(D),M=t.mercatorZfromAltitude(Math.max(N*O-t.earthRadius,Number.EPSILON),0),P=Math.min(a.zoomFromMercatorZAdjusted(M),l.maxZoom);return P>.5*(t.GLOBE_ZOOM_THRESHOLD_MIN+t.GLOBE_ZOOM_THRESHOLD_MAX)?(a.setProjection({name:"mercator"}),a.zoom=P,this._cameraForBounds(a,n,i,r,s,o)):{center:a.center,zoom:P,bearing:r,pitch:s}}queryTerrainElevation(e,n){const i=this.transform.elevation;return i?(n=t.extend({},{exaggerated:!0},n),i.getAtPoint(t.MercatorCoordinate.fromLngLat(e),null,n.exaggerated)):null}_cameraForBounds(e,n,i,r,s,o){if("globe"===e.projection.name)return this._cameraForBoundsOnGlobe(e,n,i,r,s,o);const a=e.clone(),l=this._extendCameraOptions(o),h=a.padding;a.bearing=r,a.pitch=s;const c=t.LngLat.convert(n),u=t.LngLat.convert(i),p=new t.LngLat(c.lng,u.lat),d=new t.LngLat(u.lng,c.lat),f=a.project(c),m=a.project(u),g=this.queryTerrainElevation(c),y=this.queryTerrainElevation(u),v=this.queryTerrainElevation(p),_=this.queryTerrainElevation(d),T=[[f.x,f.y,Math.min(g||0,y||0,v||0,_||0)],[m.x,m.y,Math.max(g||0,y||0,v||0,_||0)]];let E=t.Aabb.fromPoints(T);const x=a.getWorldToCameraMatrix(),b=t.invert(new Float64Array(16),x);E=t.Aabb.applyTransform(E,x);const I=t.sub([],E.max,E.min),w=h.left||0,S=h.right||0,R=h.bottom||0,C=h.top||0,{left:A,right:D,top:O,bottom:N}=l.padding,M=.5*(w+S),P=.5*(C+R),F=Math.min(a.scaleZoom(a.scale*Math.min((a.width-(w+S+A+D))/I[0],(a.height-(R+C+N+O))/I[1])),l.maxZoom),L=a.scale/a.zoomScale(F);E=new t.Aabb([E.min[0]-(A+M)*L,E.min[1]-(N+P)*L,E.min[2]],[E.max[0]+(D+M)*L,E.max[1]+(O+P)*L,E.max[2]]);const k=.5*I[2],U=this._minimumAABBFrustumDistance(a,E),B=[0,0,1,0];t.transformMat4$1(B,B,x),t.normalize$2(B,B);const z=t.scale$2([],B,U+k),G=t.add([],E.center,z),H=("number"==typeof l.offset.x&&"number"==typeof l.offset.y?new t.Point(l.offset.x,l.offset.y):t.Point.convert(l.offset)).rotate(-t.degToRad(r));E.center[0]-=H.x*L,E.center[1]+=H.y*L,t.transformMat4(E.center,E.center,b),t.transformMat4(G,G,b);const j=[E.center[0],E.center[1],G[2]*a.pixelsPerMeter];t.scale$2(j,j,1/a.worldSize);const V=t.lngFromMercatorX(j[0]),W=t.latFromMercatorY(j[1]),Z=Math.min(a._zoomFromMercatorZ(j[2]),l.maxZoom),Y=new t.LngLat(V,W);return a.mercatorFromTransition&&Z<.5*(t.GLOBE_ZOOM_THRESHOLD_MIN+t.GLOBE_ZOOM_THRESHOLD_MAX)?(a.setProjection({name:"globe"}),a.zoom=Z,this._cameraForBounds(a,n,i,r,s,o)):{center:Y,zoom:Z,bearing:r,pitch:s}}fitBounds(t,e,n){const i=this.cameraForBounds(t,e);return this._fitInternal(i,e,n)}fitScreenCoordinates(e,n,i,r,s){const o=t.Point.convert(e),a=t.Point.convert(n),l=new t.Point(Math.min(o.x,a.x),Math.min(o.y,a.y)),h=new t.Point(Math.max(o.x,a.x),Math.max(o.y,a.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(o,a))return this;const c=this.transform.pointLocation3D(l),u=this.transform.pointLocation3D(h),p=this.transform.pointLocation3D(new t.Point(l.x,h.y)),d=this.transform.pointLocation3D(new t.Point(h.x,l.y)),f=[Math.min(c.lng,u.lng,p.lng,d.lng),Math.min(c.lat,u.lat,p.lat,d.lat)],m=[Math.max(c.lng,u.lng,p.lng,d.lng),Math.max(c.lat,u.lat,p.lat,d.lat)],g=r&&r.pitch?r.pitch:this.getPitch(),y=this._cameraForBounds(this.transform,f,m,i,g,r);return this._fitInternal(y,r,s)}_fitInternal(e,n,i){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,i):this.flyTo(n,i)):this}jumpTo(e,n){this.stop();const i=e.preloadOnly?this.transform.clone():this.transform;let r=!1,s=!1,o=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(r=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=t.LngLat.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(s=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(o=!0,i.pitch=+e.pitch),null==e.padding||i.isPaddingEqual(e.padding)||(i.padding=e.padding),e.preloadOnly?(this._preloadTiles(i),this):(this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),r&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),s&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),o&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||t.warnOnce(Yr),this.transform.getFreeCameraOptions()}setFreeCameraOptions(e,n){const i=this.transform;if(!i.projection.supportsFreeCamera)return t.warnOnce(Yr),this;this.stop();const r=i.zoom,s=i.pitch,o=i.bearing;i.setFreeCameraOptions(e);const a=r!==i.zoom,l=s!==i.pitch,h=o!==i.bearing;return this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),a&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),h&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),l&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n)),this}easeTo(e,n){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||this._prefersReducedMotion(e))&&(e.duration=0);const i=this.transform,r=this.getZoom(),s=this.getBearing(),o=this.getPitch(),a=this.getPadding(),l="zoom"in e?+e.zoom:r,h="bearing"in e?this._normalizeBearing(e.bearing,s):s,c="pitch"in e?+e.pitch:o,u="padding"in e?e.padding:i.padding,p=t.Point.convert(e.offset);let d,f,m;if("globe"===i.projection.name){const n=t.MercatorCoordinate.fromLngLat(i.center),r=p.rotate(-i.angle);n.x+=r.x/i.worldSize,n.y+=r.y/i.worldSize;const s=n.toLngLat(),o=t.LngLat.convert(e.center||s);this._normalizeCenter(o),d=i.centerPoint.add(r),f=new t.Point(n.x,n.y).mult(i.worldSize),m=new t.Point(t.mercatorXfromLng(o.lng),t.mercatorYfromLat(o.lat)).mult(i.worldSize).sub(f)}else{d=i.centerPoint.add(p);const n=i.pointLocation(d),r=t.LngLat.convert(e.center||n);this._normalizeCenter(r),f=i.project(n),m=i.project(r).sub(f)}const g=i.zoomScale(l-r);let y,v;e.around&&(y=t.LngLat.convert(e.around),v=i.locationPoint(y));const _=this._zooming||l!==r,T=this._rotating||s!==h,E=this._pitching||c!==o,x=!i.isPaddingEqual(u),b=i=>b=>{if(_&&(i.zoom=t.number(r,l,b)),T&&(i.bearing=t.number(s,h,b)),E&&(i.pitch=t.number(o,c,b)),x&&(i.interpolatePadding(a,u,b),d=i.centerPoint.add(p)),y)i.setLocationAtPoint(y,v);else{const t=i.zoomScale(i.zoom-r),e=l>r?Math.min(2,g):Math.max(.5,g),n=Math.pow(e,1-b),s=i.unproject(f.add(m.mult(b*n)).mult(t));i.setLocationAtPoint(i.renderWorldCopies?s.wrap():s,d)}return e.preloadOnly||this._fireMoveEvents(n),i};if(e.preloadOnly){const t=this._emulate(b,e.duration,i);return this._preloadTiles(t),this}const I={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=_,this._rotating=T,this._pitching=E,this._padding=x,this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,I),this._ease(b(i),(t=>{i.recenterOnTerrain(),this._afterEase(n,t)}),e),this}_prepareEase(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",n||i.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!i.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!i.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!i.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const i=this._zooming,r=this._rotating,s=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),s&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,n){if(this._prefersReducedMotion(e)){const i=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const i=this.transform,r=this.getZoom(),s=this.getBearing(),o=this.getPitch(),a=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,i.minZoom,i.maxZoom):r,h="bearing"in e?this._normalizeBearing(e.bearing,s):s,c="pitch"in e?+e.pitch:o,u="padding"in e?e.padding:i.padding,p=i.zoomScale(l-r),d=t.Point.convert(e.offset);let f=i.centerPoint.add(d);const m=i.pointLocation(f),g=t.LngLat.convert(e.center||m);this._normalizeCenter(g);const y=i.project(m),v=i.project(g).sub(y);let _=e.curve;const T=Math.max(i.width,i.height),E=T/p,x=v.mag();if("minZoom"in e){const n=t.clamp(Math.min(e.minZoom,r,l),i.minZoom,i.maxZoom),s=T/i.zoomScale(n-r);_=Math.sqrt(s/x*2)}const b=_*_;function I(t){const e=(E*E-T*T+(t?-1:1)*b*b*x*x)/(2*(t?E:T)*b*x);return Math.log(Math.sqrt(e*e+1)-e)}function w(t){return(Math.exp(t)-Math.exp(-t))/2}function S(t){return(Math.exp(t)+Math.exp(-t))/2}const R=I(0);let C=function(t){return S(R)/S(R+_*t)},A=function(t){return T*((S(R)*(w(e=R+_*t)/S(e))-w(R))/b)/x;var e},D=(I(1)-R)/_;if(Math.abs(x)<1e-6||!isFinite(D)){if(Math.abs(T-E)<1e-6)return this.easeTo(e,n);const t=E<T?-1:1;D=Math.abs(Math.log(E/T))/_,A=function(){return 0},C=function(e){return Math.exp(t*_*e)}}e.duration="duration"in e?+e.duration:1e3*D/("screenSpeed"in e?+e.screenSpeed/_:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0);const O=s!==h,N=c!==o,M=!i.isPaddingEqual(u),P=i=>p=>{const m=p*D,_=1/C(m);i.zoom=1===p?l:r+i.scaleZoom(_),O&&(i.bearing=t.number(s,h,p)),N&&(i.pitch=t.number(o,c,p)),M&&(i.interpolatePadding(a,u,p),f=i.centerPoint.add(d));const T=1===p?g:i.unproject(y.add(v.mult(A(m))).mult(_));return i.setLocationAtPoint(i.renderWorldCopies?T.wrap():T,f),i._updateCameraOnTerrain(),e.preloadOnly||this._fireMoveEvents(n),i};if(e.preloadOnly){const t=this._emulate(P,e.duration,i);return this._preloadTiles(t),this}return this._zooming=!0,this._rotating=O,this._pitching=N,this._padding=M,this._prepareEase(n,!1),this._ease(P(i),(()=>this._afterEase(n)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const t=this._onEaseEnd;this._onEaseEnd=void 0,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,n,i){!1===i.animate||0===i.duration?(e(1),n()):(this._easeStart=t.exported.now(),this._easeOptions=i,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,n){e=t.wrap(e,-180,180);const i=Math.abs(e-n);return Math.abs(e-360-n)<i&&(e-=360),Math.abs(e+360-n)<i&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.maxBounds)return;const n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}_prefersReducedMotion(e){return this._respectPrefersReducedMotion&&t.exported.prefersReducedMotion&&!(e&&e.essential)}_emulate(t,e,n){const i=Math.ceil(15*e/1e3),r=[],s=t(n.clone());for(let o=0;o<=i;o++){const t=s(o/i);r.push(t.clone())}return r}}class Xr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const e=this.options&&this.options.compact;return this._map=t,this._container=s("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=s("button","mapboxgl-ctrl-attrib-button",this._container),s("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=s("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const n=this._map._getUIString("AttributionControl.".concat(e));t.setAttribute("aria-label",n),t.removeAttribute("title"),t.firstElementChild&&t.firstElementChild.setAttribute("title",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){const i=n.reduce(((t,e,i)=>(e.value&&(t+="".concat(e.key,"=").concat(e.value).concat(i<n.length-1?"&":"")),t)),"?");e.href="".concat(t.config.FEEDBACK_URL,"/").concat(i,"#").concat(Ji(this._map,!0)),e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style._sourceCaches;for(const i in e){const n=e[i];if(n.used){const e=n.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,n)=>{for(let i=n+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=[...this.options.customAttribution,...t]:t.unshift(this.options.customAttribution));const n=t.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,t.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Kr{constructor(){t.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(t){this._map=t,this._container=s("div","mapboxgl-ctrl");const e=s("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const t=this._map.style._sourceCaches;if(0===Object.entries(t).length)return!0;for(const e in t){const n=t[e].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}}}class Qr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,n=e?this._queue.concat(e):this._queue;for(const i of n)if(i.id===t)return void(i.cancelled=!0)}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const e=this._currentlyRunning=this._queue;this._queue=[];for(const n of e)if(!n.cancelled&&(n.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Jr(e,n,i){if(e=new t.LngLat(e.lng,e.lat),n){const r=new t.LngLat(e.lng-360,e.lat),s=new t.LngLat(e.lng+360,e.lat),o=360*Math.ceil(Math.abs(e.lng-i.center.lng)/360),a=i.locationPoint(e).distSqr(n),l=n.x<0||n.y<0||n.x>i.width||n.y>i.height;i.locationPoint(r).distSqr(n)<a&&(l||Math.abs(r.lng-i.center.lng)<o)?e=r:i.locationPoint(s).distSqr(n)<a&&(l||Math.abs(s.lng-i.center.lng)<o)&&(e=s)}for(;Math.abs(e.lng-i.center.lng)>180;){const t=i.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=i.width&&t.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e}const $r={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class ts extends t.Evented{constructor(e,n){if(super(),(e instanceof t.window.HTMLElement||n)&&(e=t.extend({element:e},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=e&&e.occludedOpacity||.2,e&&e.element)this._element=e.element,this._offset=t.Point.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=s("div");const n=41,i=27,r=o("svg",{display:"block",height:n*this._scale+"px",width:i*this._scale+"px",viewBox:"0 0 ".concat(i," ").concat(n)},this._element),a=o("radialGradient",{id:"shadowGradient"},o("defs",{},r));o("stop",{offset:"10%","stop-opacity":.4},a),o("stop",{offset:"100%","stop-opacity":.05},a),o("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},r),o("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},r),o("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},r),o("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},r),this._offset=t.Point.convert(e&&e.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()}));const i=this._element.classList;for(const t in $r)i.remove("mapboxgl-marker-anchor-".concat(t));i.add("mapboxgl-marker-anchor-".concat(this._anchor)),this._popup=null}addTo(t){return t===this._map||(this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._updateMoving),t.on("moveend",this._update),t.on("remove",this._clearFadeTimer),t._addMarker(this),this.setDraggable(this._draggable),this._update(),t.on("click",this._onMapClick)),this}remove(){const t=this._map;return t&&(t.off("click",this._onMapClick),t.off("move",this._updateMoving),t.off("moveend",this._update),t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler),t.off("mouseup",this._onUp),t.off("touchend",this._onUp),t.off("mousemove",this._onMove),t.off("touchmove",this._onMove),t.off("remove",this._clearFadeTimer),t._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,n=13.5,i=Math.sqrt(Math.pow(n,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[i,-1*(e-n+i)],"bottom-right":[-i,-1*(e-n+i)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,t._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(t){const e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?(t.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(t.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const t=this._map,e=this._pos;if(!t||!e)return!1;const n=t.unproject(e),i=t.getFreeCameraOptions();if(!i.position)return!1;const r=i.position.toLngLat();return r.distanceTo(n)<.9*r.distanceTo(this._lngLat)}_evaluateOpacity(){const e=this._map;if(!e)return;const n=this._pos;if(!n||n.x<0||n.x>e.transform.width||n.y<0||n.y>e.transform.height)return void this._clearFadeTimer();const i=e.unproject(n);let r;e._showingGlobe()&&t.isLngLatBehindGlobe(e.transform,this._lngLat)?r=0:(r=1-e._queryFogOpacity(i),e.transform._terrainEnabled()&&e.getTerrain()&&this._behindTerrain()&&(r*=this._occludedOpacity)),this._element.style.opacity="".concat(r),this._element.style.pointerEvents=r>0?"auto":"none",this._popup&&this._popup._setOpacity(r),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const t=this._pos;if(!t||!this._map)return;const e=this._offset.mult(this._scale);this._element.style.transform="\n            translate(".concat(t.x,"px,").concat(t.y,"px)\n            ").concat($r[this._anchor],"\n            ").concat(this._calculateXYTransform()," ").concat(this._calculateZTransform(),"\n            translate(").concat(e.x,"px,").concat(e.y,"px)\n        ")}_calculateXYTransform(){const e=this._pos,n=this._map,i=this.getPitchAlignment();if(!n||!e||"map"!==i)return"";if(!n._showingGlobe()){const t=n.getPitch();return t?"rotateX(".concat(t,"deg)"):""}const r=t.radToDeg(t.globeTiltAtLngLat(n.transform,this._lngLat)),s=e.sub(t.globeCenterToScreenPoint(n.transform)),o=Math.abs(s.x)+Math.abs(s.y);if(0===o)return"";const a=r/o;return"rotateX(".concat(-s.y*a,"deg) rotateY(").concat(s.x*a,"deg)")}_calculateZTransform(){const e=this._pos,n=this._map;if(!n||!e)return"";let i=0;const r=this.getRotationAlignment();if("map"===r)if(n._showingGlobe()){const e=n.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),r=n.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(e);i=t.radToDeg(Math.atan2(r.y,r.x))-90}else i=-n.getBearing();else if("horizon"===r){const r=t.smoothstep(4,6,n.getZoom()),s=t.globeCenterToScreenPoint(n.transform);s.y+=r*n.transform.height;const o=e.sub(s),a=t.radToDeg(Math.atan2(o.y,o.x));i=(a>90?a-270:a+90)*(1-r)}return i+=this._rotation,i?"rotateZ(".concat(i,"deg)"):""}_update(e){t.window.cancelAnimationFrame(this._updateFrameId);const n=this._map;n&&(n.transform.renderWorldCopies&&(this._lngLat=Jr(this._lngLat,this._pos,n.transform)),this._pos=n.project(this._lngLat),!0===e?this._updateFrameId=t.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),n._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(n._showingGlobe()||n.getTerrain()||n.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(e){return this._offset=t.Point.convert(e),this._update(),this}_onMove(e){const n=this._map;if(!n)return;const i=this._pointerdownPos,r=this._positionDelta;if(i&&r){if(!this._isDragging){const t=this._clickTolerance||n._clickTolerance;if(e.point.dist(i)<t)return;this._isDragging=!0}this._pos=e.point.sub(r),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const e=this._map;e&&(e.off("mousemove",this._onMove),e.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){const e=this._map,n=this._pos;e&&n&&this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(n),this._pointerdownPos=t.point,this._state="pending",e.on("mousemove",this._onMove),e.on("touchmove",this._onMove),e.once("mouseup",this._onUp),e.once("touchend",this._onUp))}setDraggable(t){this._draggable=!!t;const e=this._map;return e&&(t?(e.on("mousedown",this._addDragHandler),e.on("touchstart",this._addDragHandler)):(e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(t){return this._occludedOpacity=t||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const es={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ns=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function is(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new t.Point(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom";if("number"==typeof e){const i=Math.round(Math.sqrt(.5*Math.pow(e,2)));switch(n){case"top":return new t.Point(0,e);case"top-left":return new t.Point(i,i);case"top-right":return new t.Point(-i,i);case"bottom":return new t.Point(0,-e);case"bottom-left":return new t.Point(i,-i);case"bottom-right":return new t.Point(-i,-i);case"left":return new t.Point(e,0);case"right":return new t.Point(-e,0)}return new t.Point(0,0)}return e instanceof t.Point||Array.isArray(e)?t.Point.convert(e):t.Point.convert(e[n]||[0,0])}class rs{constructor(t){this.jumpTo(t)}getValue(e){if(e<=this._startTime)return this._start;if(e>=this._endTime)return this._end;const n=t.easeCubicInOut((e-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(t){return t>=this._startTime&&t<=this._endTime}jumpTo(t){this._startTime=-1/0,this._endTime=-1/0,this._start=t,this._end=t}easeTo(t,e,n){this._start=this.getValue(e),this._end=t,this._startTime=e,this._endTime=e+n}}const ss={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},os={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},as={showCompass:!0,showZoom:!0,visualizePitch:!1};class ls{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._clickTolerance=10,this.element=n,this.mouseRotate=new Tr({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,i&&(this.mousePitch=new Er({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener("mousedown",this.mousedown),n.addEventListener("touchstart",this.touchstart,{passive:!1}),n.addEventListener("touchmove",this.touchmove),n.addEventListener("touchend",this.touchend),n.addEventListener("touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),c()}move(t,e){const n=this.map,i=this.mouseRotate.mousemoveWindow(t,e),r=i&&i.bearingDelta;if(r&&n.setBearing(n.getBearing()+r),this.mousePitch){const i=this.mousePitch.mousemoveWindow(t,e),r=i&&i.pitchDelta;r&&n.setPitch(n.getPitch()+r)}}off(){const t=this.element;t.removeEventListener("mousedown",this.mousedown),t.removeEventListener("touchstart",this.touchstart,{passive:!1}),t.removeEventListener("touchmove",this.touchmove),t.removeEventListener("touchend",this.touchend),t.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){u(),t.window.removeEventListener("mousemove",this.mousemove),t.window.removeEventListener("mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),f(this.element,e)),t.window.addEventListener("mousemove",this.mousemove),t.window.addEventListener("mouseup",this.mouseup)}mousemove(t){this.move(t,f(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=m(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=m(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const hs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},cs={maxWidth:100,unit:"metric"},us={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},ps={version:t.version,supported:n,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends qr{constructor(e){if(t.LivePerformanceUtils.mark(t.PerformanceMarkers.create),null!=(e=t.extend({},os,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(e.antialias&&t.isSafariWithAntialiasingBug(t.window)&&(e.antialias=!1,t.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Xi(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),e),this._interactive=e.interactive,this._minTileCacheSize=e.minTileCacheSize,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._useWebGL2=e.useWebGL2,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=e.crossSourceCollisions,this._collectResourceTiming=e.collectResourceTiming,this._optimizeForTerrain=e.optimizeForTerrain,this._language=this._parseLanguage(e.language),this._worldview=e.worldview,this._renderTaskQueue=new Qr,this._domRenderTaskQueue=new Qr,this._controls=[],this._markers=[],this._popups=[],this._mapId=t.uniqueId(),this._locale=t.extend({},ss,e.locale),this._clickTolerance=e.clickTolerance,this._cooperativeGestures=e.cooperativeGestures,this._performanceMetricsCollection=e.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new rs(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken,e.testMode),this._silenceAuthErrors=!!e.testMode,"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '".concat(e.container,"' not found."))}else{if(!(e.container instanceof t.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(this._container.childNodes.length>0&&t.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1),t.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Zr(this,e),this._localFontFamily=e.localFontFamily,this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),e.projection&&this.setProjection(e.projection),this._hash=e.hash&&new Qi("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),e.attributionControl&&this.addControl(new Xr({customAttribution:e.customAttribution})),this._logoControl=new Kr,this.addControl(this._logoControl,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event("".concat(e.dataType,"data"),e))})),this.on("dataloading",(e=>{this.fire(new t.Event("".concat(e.dataType,"dataloading"),e))}))}_getMapId(){return this._mapId}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const i=e.onAdd(this);this._controls.push(e);const r=this._controlPositions[n];return-1!==n.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(e){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const n=!this._moving;return n&&this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)),this.fire(new t.Event("resize",e)),n&&this.fire(new t.Event("moveend",e)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e?this.setZoom(e):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e?this.setZoom(e):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e?this.setPitch(e):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?85:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e?this.setPitch(e):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(e){return"auto"===e?t.window.navigator.language:Array.isArray(e)?0===e.length?void 0:e.map((e=>"auto"===e?t.window.navigator.language:e)):e}setLanguage(t){const e=this._parseLanguage(t);if(!this.style||e===this._language)return this;this._language=e,this.style._reloadSources();for(const n of this._controls)n._setLanguage&&n._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(t){return this.style&&t!==this._worldview?(this._worldview=t,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(t){return this._lazyInitEmptyStyle(),t?"string"==typeof t&&(t={name:t}):t=null,this._useExplicitProjection=!!t,this._prioritizeAndUpdateProjection(t,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const e=this.transform,n=e.projection.name;let i;"globe"===n&&e.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?(e.setMercatorFromTransition(),i=!0):"mercator"===n&&e.zoom<t.GLOBE_ZOOM_THRESHOLD_MAX&&(e.setProjection({name:"globe"}),i=!0),i&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(t,e){return this._updateProjection(t||e||{name:"mercator"})}_updateProjection(e){let n;if(n="globe"===e.name&&this.transform.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(e),this.style.applyProjectionUpdate(),n){this.painter.clearBackgroundTiles();for(const t in this.style._sourceCaches)this.style._sourceCaches[t].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(e){return this.transform.locationPoint3D(t.LngLat.convert(e))}unproject(e){return this.transform.pointLocation3D(t.Point.convert(e))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(t,e,n){if("mouseenter"===t||"mouseover"===t){let i=!1;const r=r=>{const s=e.filter((t=>this.getLayer(t))),o=s.length?this.queryRenderedFeatures(r.point,{layers:s}):[];o.length?i||(i=!0,n.call(this,new ar(t,this,r.originalEvent,{features:o}))):i=!1},s=()=>{i=!1};return{layers:new Set(e),listener:n,delegates:{mousemove:r,mouseout:s}}}if("mouseleave"===t||"mouseout"===t){let i=!1;const r=r=>{const s=e.filter((t=>this.getLayer(t)));(s.length?this.queryRenderedFeatures(r.point,{layers:s}):[]).length?i=!0:i&&(i=!1,n.call(this,new ar(t,this,r.originalEvent)))},s=e=>{i&&(i=!1,n.call(this,new ar(t,this,e.originalEvent)))};return{layers:new Set(e),listener:n,delegates:{mousemove:r,mouseout:s}}}{const i=t=>{const i=e.filter((t=>this.getLayer(t))),r=i.length?this.queryRenderedFeatures(t.point,{layers:i}):[];r.length&&(t.features=r,n.call(this,t),delete t.features)};return{layers:new Set(e),listener:n,delegates:{[t]:i}}}}on(t,e,n){if(void 0===n)return super.on(t,e);Array.isArray(e)||(e=[e]);const i=this._createDelegatedListener(t,e,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(i);for(const r in i.delegates)this.on(r,i.delegates[r]);return this}once(t,e,n){if(void 0===n)return super.once(t,e);Array.isArray(e)||(e=[e]);const i=this._createDelegatedListener(t,e,n);for(const r in i.delegates)this.once(r,i.delegates[r]);return this}off(t,e,n){if(void 0===n)return super.off(t,e);e=new Set(Array.isArray(e)?e:[e]);const i=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0},r=this._delegatedListeners?this._delegatedListeners[t]:void 0;return r&&(t=>{for(let r=0;r<t.length;r++){const s=t[r];if(s.listener===n&&i(s.layers,e)){for(const t in s.delegates)this.off(t,s.delegates[t]);return t.splice(r,1),this}}})(r),this}queryRenderedFeatures(e,n){return this.style?(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),this.style.queryRenderedFeatures(e=e||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}isPointOnSurface(e){const{name:n}=this.transform.projection;return"globe"!==n&&"mercator"!==n&&t.warnOnce("".concat(n," projection does not support isPointOnSurface, this API may behave unexpectedly.")),this.transform.isPointOnSurface(t.Point.convert(e))}setStyle(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(e,n))}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error("Missing UI string '".concat(t,"'"));return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),t&&(this.style=new Qe(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Qe(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const i=this._requestManager.normalizeStyleURL(e),r=this._requestManager.transformRequest(i,t.ResourceType.Style);t.getJSON(r,((e,i)=>{e?this.fire(new t.ErrorEvent(e)):i&&this._updateDiff(i,n)}))}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e)&&this._update(!0)}catch(i){t.warnOnce("Unable to perform style diff: ".concat(i.message||i.error||i,".  Rebuilding the style from scratch.")),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(t.warnOnce("There is no style added to the map."),!1)}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(t){return!!this.style&&this.style._isSourceCacheLoaded(t)}areTilesLoaded(){const t=this.style&&this.style._sourceCaches;for(const e in t){const n=t[e]._tiles;for(const t in n){const e=n[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,n){this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)}removeSource(t){return this.style.removeSource(t),this._updateTerrain(),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,n){let{pixelRatio:i=1,sdf:r=!1,stretchX:s,stretchY:o,content:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._lazyInitEmptyStyle(),n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap){const{width:l,height:h,data:c}=t.exported.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:h},c),pixelRatio:i,stretchX:s,stretchY:o,content:a,sdf:r,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:l,height:h}=n,c=n;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:h},new Uint8Array(c.data)),pixelRatio:i,stretchX:s,stretchY:o,content:a,sdf:r,version:0,userImage:c}),c.onAdd&&c.onAdd(this,e)}}updateImage(e,n){const i=this.style.getImage(e);if(!i)return void this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const r=n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap?t.exported.getImageData(n):n,{width:s,height:o}=r;void 0!==s&&void 0!==o?s===i.data.width&&o===i.data.height?(i.data.replace(r.data,!(n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap)),this.style.updateImage(e,i)):this.fire(new t.ErrorEvent(new Error("The width and height of the updated image (".concat(s,", ").concat(o,")\n                must be that same as the previous version of the image\n                (").concat(i.data.width,", ").concat(i.data.height,")")))):this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),((e,i)=>{n(e,i instanceof t.window.HTMLImageElement?t.exported.getImageData(i):i)}))}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)}setFilter(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(t,e,n),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(t,e,n,i),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(t,e,n,i),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(t){return this._lazyInitEmptyStyle(),!t&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(t),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(t){return this._lazyInitEmptyStyle(),this.style.setFog(t),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(e){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(t.LngLat.convert(e),this.transform):0}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}_updateContainerDimensions(){if(!this._container)return;const e=this._container.getBoundingClientRect().width||400,n=this._container.getBoundingClientRect().height||300;let i,r,s,o=this._container;for(;o&&(!r||!s);){const e=t.window.getComputedStyle(o).transform;e&&"none"!==e&&(i=e.match(/matrix.*\((.+)\)/)[1].split(", "),i[0]&&"0"!==i[0]&&"1"!==i[0]&&(r=i[0]),i[3]&&"0"!==i[3]&&"1"!==i[3]&&(s=i[3])),o=o.parentElement}this._containerWidth=r?Math.abs(e/r):e,this._containerHeight=s?Math.abs(n/s):n}_detectMissingCSS(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=s("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();const e=this._canvasContainer=s("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=s("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const n=this._controlContainer=s("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{i[t]=s("div","mapboxgl-ctrl-".concat(t),n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,n){const i=t.exported.devicePixelRatio||1;this._canvas.width=i*Math.ceil(e),this._canvas.height=i*Math.ceil(n),this._canvas.style.width="".concat(e,"px"),this._canvas.style.height="".concat(n,"px")}_addMarker(t){this._markers.push(t)}_removeMarker(t){const e=this._markers.indexOf(t);-1!==e&&this._markers.splice(e,1)}_addPopup(t){this._popups.push(t)}_removePopup(t){const e=this._popups.indexOf(t);-1!==e&&this._popups.splice(e,1)}_setupPainter(){const e=t.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._useWebGL2&&this._canvas.getContext("webgl2",e),r=i||this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);r?(this._useWebGL2&&!i&&t.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),t.storeAuthState(r,!0),this.painter=new Li(r,this.transform,!!i),this.on("data",(t=>{"source"===t.dataType&&this.painter.setTileLoadedFlag(!0)})),t.exported$1.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_requestDomTask(t){!this.loaded()||this.loaded()&&!this.isMoving()?t():this._domRenderTaskQueue.add(t)}_render(e){let n;const i=this.painter.context.extTimerQuery,r=t.exported.now();if(this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],t.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],t.window.performance.now())),this._renderTaskQueue.run(e),this._domRenderTaskQueue.run(e),this._removed)return;this._updateProjectionTransition();const s=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,n=this.transform.pitch,i=t.exported.now(),r=new t.EvaluationParameters(e,{now:i,fadeDuration:s,pitch:n,transition:this.style.getTransition()});this.style.update(r)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let o=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),o=this._updateAverageElevation(r),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):o=this._updateAverageElevation(r),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){const e=t.exported.now()-r;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout((()=>{const s=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:s})),t.window.performance.mark("frame-gpu",{startTime:r,detail:{gpuTime:s}})}),50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:n}))}),50)}if(this.listens("gpu-timing-deferred-render")){const e=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const n=this.painter.queryGpuTimeDeferredRender(e);this.fire(new t.Event("gpu-timing-deferred-render",{gpuTime:n}))}),50)}const a=this._sourcesDirty||this._styleDirty||this._placementDirty||o;if(a||this._repaint)this.triggerRepaint();else{const e=!this.isMoving()&&this.loaded();if(e&&(o=this._updateAverageElevation(r,!0)),o)this.triggerRepaint();else if(this._triggerFrame(!1),e&&(this.fire(new t.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const e=this._calculateSpeedIndex();this.fire(new t.Event("speedindexcompleted",{speedIndex:e})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||a||(this._fullyLoaded=!0,t.LivePerformanceUtils.mark(t.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&t.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(t){for(const e of this._markers)t&&!this.getRenderWorldCopies()&&(e._lngLat=e._lngLat.wrap()),e._update();for(const e of this._popups)!t||this.getRenderWorldCopies()||e._trackPointer||(e._lngLat=e._lngLat.wrap()),e._update()}_updateAverageElevation(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t=>(this.transform.averageElevation=t,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((e||t-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(t)){const e=this.transform.averageElevation;let i=this.transform.sampleAverageElevation(),r=!1;this.transform.elevation&&(r=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(i)?i=0:this._averageElevationLastSampledAt=t;const s=Math.abs(e-i);if(s>1){if(this._isInitialLoad||r)return this._averageElevation.jumpTo(i),n(i);this._averageElevation.easeTo(i,t,300)}else if(s>1e-4)return this._averageElevation.jumpTo(i),n(i)}return!!this._averageElevation.isEasing(t)&&n(this._averageElevation.getValue(t))}_authenticate(){t.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(e=>{if(e&&(e.message===t.AUTH_ERR_MSG||401===e.status)){const e=this.painter.context.gl;t.storeAuthState(e,!1),this._logoControl instanceof Kr&&this._logoControl._updateLogo(),e&&e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT|e.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new t.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),t.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const t=this._isDragging();this.painter.updateTerrain(this.style,t)}_calculateSpeedIndex(){const t=this.painter.canvasCopy(),e=this.painter.getCanvasCopiesAndTimestamps();e.timeStamps.push(performance.now());const n=this.painter.context.gl,i=n.createFramebuffer();function r(t){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);const e=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,e),e}return n.bindFramebuffer(n.FRAMEBUFFER,i),this._canvasPixelComparison(r(t),e.canvasCopies.map(r),e.timeStamps)}_canvasPixelComparison(t,e,n){let i=n[1]-n[0];const r=t.length/4;for(let s=0;s<e.length;s++){const o=e[s];let a=0;for(let e=0;e<o.length;e+=4)o[e]===t[e]&&o[e+1]===t[e+1]&&o[e+2]===t[e+2]&&o[e+3]===t[e+3]&&(a+=1);i+=(n[s+2]-n[s+1])*(1-a/r)}return i}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1),t.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),t.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(e){this._renderNextFrame=this._renderNextFrame||e,this.style&&!this._frame&&(this._frame=t.exported.frame((t=>{const e=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,e&&this._render(t)})))}_preloadTiles(e){const n=this.style?Object.values(this.style._sourceCaches):[];return t.asyncAll(n,((t,n)=>t._preloadTiles(e,n)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}_onVisibilityChange(){"hidden"===t.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(t){this._showTerrainWireframe!==t&&(this._showTerrainWireframe=t,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(t){this._speedIndexTiming!==t&&(this._speedIndexTiming=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(t){this._showTileAABBs!==t&&(this._showTileAABBs=t,t&&this._update())}_setCacheLimits(e,n){t.setCacheLimits(e,n)}get version(){return t.version}},NavigationControl:class{constructor(e){this.options=t.extend({},as,e),this._container=s("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(t=>{this._map&&this._map.zoomIn({},{originalEvent:t})})),s("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(t=>{this._map&&this._map.zoomOut({},{originalEvent:t})})),s("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(t=>{const e=this._map;e&&(this.options.visualizePitch?e.resetNorthPitch({},{originalEvent:t}):e.resetNorth({},{originalEvent:t}))})),this._compassIcon=s("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const t=this._map;if(!t)return;const e=t.getZoom(),n=e===t.getMaxZoom(),i=e===t.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())}_rotateCompassArrow(){const t=this._map;if(!t)return;const e=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(t.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(t.transform.pitch,"deg) rotateZ(").concat(t.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(t.transform.angle*(180/Math.PI),"deg)");t._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=e)}))}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),t.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&t.on("pitch",this._rotateCompassArrow),t.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ls(t,this._compass,this.options.visualizePitch)),this._container}onRemove(){const t=this._map;t&&(this._container.remove(),this.options.showZoom&&t.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&t.off("pitch",this._rotateCompassArrow),t.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(t,e){const n=s("button",t,this._container);return n.type="button",n.addEventListener("click",e),n}_setButtonTitle(t,e){if(!this._map)return;const n=this._map._getUIString("NavigationControl.".concat(e));t.setAttribute("aria-label",n),t.firstElementChild&&t.firstElementChild.setAttribute("title",n)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({geolocation:t.window.navigator.geolocation},hs,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Ki(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(t){return this._map=t,this._container=s("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(e){var n=this;const i=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!!n.options.geolocation;n._supportsGeolocation=t,e(t)};void 0!==this._supportsGeolocation?e(this._supportsGeolocation):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((t=>i("denied"!==t.state))).catch((()=>i())):i()}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),n=t.coords;return!!e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy,r=this._map.getBearing(),s=t.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(i),s,{geolocateSource:!0})}_updateMarker(e){if(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const e=this._map.transform,n=t.mercatorZfromAltitude(1,e._center.lat)*e.worldSize,i=Math.ceil(2*this._accuracy*n);this._circleElement.style.width="".concat(i,"px"),this._circleElement.style.height="".concat(i,"px")}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=s("button","mapboxgl-ctrl-geolocate",this._container),s("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=s("div","mapboxgl-user-location"),this._dotElement.appendChild(s("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(s("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new ts({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=s("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ts({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}}_onDeviceOrientation(t){this._userLocationDotMarker&&(t.webkitCompassHeading?this._heading=t.webkitCompassHeading:!0===t.absolute&&(this._heading=-1*t.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(t={maximumAge:6e5,timeout:0},this._noTimeout=!0):(t=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,t),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const e=()=>{t.window.addEventListener("ondeviceorientationabsolute"in t.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==t.window.DeviceMotionEvent&&"function"==typeof t.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((t=>{"granted"===t&&e()})).catch(console.error):e()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),t.window.removeEventListener("deviceorientation",this._onDeviceOrientation),t.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Xr,ScaleControl:class{constructor(e){this.options=t.extend({},cs,e),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(t){return!1}}(),t.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const t=this.options.maxWidth||100,e=this._map,n=e._containerHeight/2,i=e._containerWidth/2-t/2,r=e.unproject([i,n]),s=e.unproject([i+t,n]),o=r.distanceTo(s);if("imperial"===this.options.unit){const e=3.2808*o;e>5280?this._setScale(t,e/5280,"mile"):this._setScale(t,e,"foot")}else"nautical"===this.options.unit?this._setScale(t,o/1852,"nautical-mile"):o>=1e3?this._setScale(t,o/1e3,"kilometer"):this._setScale(t,o,"meter")}_setScale(t,e,n){this._map._requestDomTask((()=>{const i=function(t){const e=Math.pow(10,"".concat(Math.floor(t)).length-1);let n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n),e*n}(e),r=i/e;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==n?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:n}).format(i):"".concat(i,"&nbsp;").concat(us[n]),this._container.style.width=t*r+"px"}))}onAdd(t){return this._map=t,this._language=t.getLanguage(),this._container=s("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(t){this._language=t,this._update()}setUnit(t){this.options.unit=t,this._update()}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in t.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=s("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!t.window.document.fullscreenEnabled&&!t.window.document.webkitFullscreenEnabled)}_setupUI(){const e=this._fullscreenButton=s("button","mapboxgl-ctrl-fullscreen",this._controlContainer);s("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",t)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(t.window.document.fullscreenElement||t.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(es),e),t.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(e&&e.className?e.className.trim().split(/\s+/):[])}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&e.on("preclick",this._onClose),this.options.closeOnMove&&e.on("move",this._onClose),e.on("remove",this.remove),this._update(),e._addPopup(this),this._focusFirstElement(),this._trackPointer?(e.on("mousemove",this._onMouseEvent),e.on("mouseup",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")):e.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const e=this._map;return e&&(e.off("move",this._update),e.off("move",this._onClose),e.off("preclick",this._onClose),e.off("click",this._onClose),e.off("remove",this.remove),e.off("mousemove",this._onMouseEvent),e.off("mouseup",this._onMouseEvent),e.off("drag",this._onMouseEvent),e._canvasContainer&&e._canvasContainer.classList.remove("mapboxgl-track-pointer"),e._removePopup(this),this._map=void 0),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update();const n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const t=this._map;return t&&(t.off("move",this._update),t.on("mousemove",this._onMouseEvent),t.on("drag",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(t.window.document.createTextNode(e))}setHTML(e){const n=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");let r;for(i.innerHTML=e;r=i.firstChild,r;)n.appendChild(r);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){let e=this._content;if(e)for(;e.hasChildNodes();)e.firstChild&&e.removeChild(e.firstChild);else e=this._content=s("div","mapboxgl-popup-content",this._container||void 0);if(e.appendChild(t),this.options.closeButton){const t=this._closeButton=s("button","mapboxgl-popup-close-button",e);t.type="button",t.setAttribute("aria-label","Close popup"),t.setAttribute("aria-hidden","true"),t.innerHTML="&#215;",t.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(t){return this._classList.add(t),this._updateClassList(),this}removeClassName(t){return this._classList.delete(t),this._updateClassList(),this}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){let e;return this._classList.delete(t)?e=!1:(this._classList.add(t),e=!0),this._updateClassList(),e}_onMouseEvent(t){this._update(t.point)}_getAnchor(t){if(this.options.anchor)return this.options.anchor;const e=this._map,n=this._container,i=this._pos;if(!e||!n||!i)return"bottom";const r=n.offsetWidth,s=n.offsetHeight,o=i.x<r/2,a=i.x>e.transform.width-r/2;if(i.y+t<s)return o?"top-left":a?"top-right":"top";if(i.y>e.transform.height-s){if(o)return"bottom-left";if(a)return"bottom-right"}return o?"left":a?"right":"bottom"}_updateClassList(){const t=this._container;if(!t)return;const e=[...this._classList];e.push("mapboxgl-popup"),this._anchor&&e.push("mapboxgl-popup-anchor-".concat(this._anchor)),this._trackPointer&&e.push("mapboxgl-popup-track-pointer"),t.className=e.join(" ")}_update(e){const n=this._map,i=this._content;if(!n||!this._lngLat&&!this._trackPointer||!i)return;let r=this._container;if(r||(r=this._container=s("div","mapboxgl-popup",n.getContainer()),this._tip=s("div","mapboxgl-popup-tip",r),r.appendChild(i)),this.options.maxWidth&&r.style.maxWidth!==this.options.maxWidth&&(r.style.maxWidth=this.options.maxWidth),n.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Jr(this._lngLat,this._pos,n.transform)),!this._trackPointer||e){const t=this._pos=this._trackPointer&&e?e:n.project(this._lngLat),i=is(this.options.offset),r=this._anchor=this._getAnchor(i.y),s=is(this.options.offset,r),o=t.add(s).round();n._requestDomTask((()=>{this._container&&r&&(this._container.style.transform="".concat($r[r]," translate(").concat(o.x,"px,").concat(o.y,"px)"))}))}if(!this._marker&&n._showingGlobe()){const e=t.isLngLatBehindGlobe(n.transform,this._lngLat)?0:1;this._setOpacity(e)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(ns);t&&t.focus()}_onClose(){this.remove()}_setOpacity(t){this._container&&(this._container.style.opacity="".concat(t)),this._content&&(this._content.style.pointerEvents=t?"auto":"none")}},Marker:ts,Style:Qe,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,FreeCameraOptions:Gi,Evented:t.Evented,config:t.config,prewarm:function(){Bt().acquire(Lt)},clearPrewarmedResources:function(){const t=Ut;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Lt),Ut=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return kt.workerCount},set workerCount(t){kt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",workerClass:null,setNow:t.exported.setNow,restoreNow:t.exported.restoreNow};return ps})),n}()},534:(t,e,n)=>{"use strict";var i=n(7313),r=n(2224);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(t,e){h(t,e),h(t+"Capture",e)}function h(t,e){for(a[t]=e,t=0;t<e.length;t++)o.add(e[t])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function m(t,e,n,i,r,s,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function _(t,e,n,i){var r=g.hasOwnProperty(e)?g[e]:null;(null!==r?0!==r.type:i||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!u.call(f,t)||!u.call(d,t)&&(p.test(t)?f[t]=!0:(d[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var T=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),R=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function F(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=P&&t[P]||t["@@iterator"])?t:null}var L,k=Object.assign;function U(t){if(void 0===L)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);L=e&&e[1]||""}return"\n"+L+t}var B=!1;function z(t,e){if(!t||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){i=h}t.call(e.prototype)}else{try{throw Error()}catch(h){i=h}t()}}catch(h){if(h&&i&&"string"===typeof h.stack){for(var r=h.stack.split("\n"),s=i.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a]){var l="\n"+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=o&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?U(t):""}function G(t){switch(t.tag){case 5:return U(t.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return t=z(t.type,!1);case 11:return t=z(t.type.render,!1);case 1:return t=z(t.type,!0);default:return""}}function H(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case b:return"Fragment";case x:return"Portal";case w:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case R:return(t.displayName||"Context")+".Consumer";case S:return(t._context.displayName||"Context")+".Provider";case C:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case O:return null!==(e=t.displayName||null)?e:H(t.type)||"Memo";case N:e=t._payload,t=t._init;try{return H(t(e))}catch(n){}}return null}function j(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(e);case 8:return e===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function V(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function W(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Z(t){t._valueTracker||(t._valueTracker=function(t){var e=W(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,s.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Y(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=W(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function q(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function X(t,e){var n=e.checked;return k({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function K(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=V(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Q(t,e){null!=(e=e.checked)&&_(t,"checked",e,!1)}function J(t,e){Q(t,e);var n=V(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,V(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function $(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&q(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+V(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function it(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return k({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(et(n)){if(1<n.length)throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:V(n)}}function st(t,e){var n=V(e.value),i=V(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function ot(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ht,ct,ut=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ht=ht||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ht.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction((function(){return ct(t,e)}))}:ct);function pt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];function mt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||dt.hasOwnProperty(t)&&dt[t]?(""+e).trim():e+"px"}function gt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=mt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(dt).forEach((function(t){ft.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dt[e]=dt[t]}))}));var yt=k({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62))}}function _t(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=null;function Et(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var xt=null,bt=null,It=null;function wt(t){if(t=_r(t)){if("function"!==typeof xt)throw Error(s(280));var e=t.stateNode;e&&(e=Er(e),xt(t.stateNode,t.type,e))}}function St(t){bt?It?It.push(t):It=[t]:bt=t}function Rt(){if(bt){var t=bt,e=It;if(It=bt=null,wt(t),e)for(t=0;t<e.length;t++)wt(e[t])}}function Ct(t,e){return t(e)}function At(){}var Dt=!1;function Ot(t,e,n){if(Dt)return t(e,n);Dt=!0;try{return Ct(t,e,n)}finally{Dt=!1,(null!==bt||null!==It)&&(At(),Rt())}}function Nt(t,e){var n=t.stateNode;if(null===n)return null;var i=Er(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(s(231,e,typeof n));return n}var Mt=!1;if(c)try{var Pt={};Object.defineProperty(Pt,"passive",{get:function(){Mt=!0}}),window.addEventListener("test",Pt,Pt),window.removeEventListener("test",Pt,Pt)}catch(ct){Mt=!1}function Ft(t,e,n,i,r,s,o,a,l){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(c){this.onError(c)}}var Lt=!1,kt=null,Ut=!1,Bt=null,zt={onError:function(t){Lt=!0,kt=t}};function Gt(t,e,n,i,r,s,o,a,l){Lt=!1,kt=null,Ft.apply(zt,arguments)}function Ht(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function jt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Vt(t){if(Ht(t)!==t)throw Error(s(188))}function Wt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Ht(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Vt(r),t;if(o===i)return Vt(r),e;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t))?Zt(t):null}function Zt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Zt(t);if(null!==e)return e;t=t.sibling}return null}var Yt=r.unstable_scheduleCallback,qt=r.unstable_cancelCallback,Xt=r.unstable_shouldYield,Kt=r.unstable_requestPaint,Qt=r.unstable_now,Jt=r.unstable_getCurrentPriorityLevel,$t=r.unstable_ImmediatePriority,te=r.unstable_UserBlockingPriority,ee=r.unstable_NormalPriority,ne=r.unstable_LowPriority,ie=r.unstable_IdlePriority,re=null,se=null;var oe=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var he=64,ce=4194304;function ue(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pe(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=268435455&n;if(0!==o){var a=o&~r;0!==a?i=ue(a):0!==(s&=o)&&(i=ue(s))}else 0!==(o=n&~r)?i=ue(o):0!==s&&(i=ue(s));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&r)&&((r=i&-i)>=(s=e&-e)||16===r&&0!==(4194240&s)))return e;if(0!==(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-oe(e)),i|=t[n],e&=~r;return i}function de(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function fe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=he;return 0===(4194240&(he<<=1))&&(he=64),t}function ge(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ye(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-oe(e)]=n}function ve(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-oe(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var _e=0;function Te(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var Ee,xe,be,Ie,we,Se=!1,Re=[],Ce=null,Ae=null,De=null,Oe=new Map,Ne=new Map,Me=[],Pe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fe(t,e){switch(t){case"focusin":case"focusout":Ce=null;break;case"dragenter":case"dragleave":Ae=null;break;case"mouseover":case"mouseout":De=null;break;case"pointerover":case"pointerout":Oe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ne.delete(e.pointerId)}}function Le(t,e,n,i,r,s){return null===t||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==e&&(null!==(e=_r(e))&&xe(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function ke(t){var e=vr(t.target);if(null!==e){var n=Ht(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=jt(n)))return t.blockedOn=e,void we(t.priority,(function(){be(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Ue(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=_r(n))&&xe(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);Tt=i,n.target.dispatchEvent(i),Tt=null,e.shift()}return!0}function Be(t,e,n){Ue(t)&&n.delete(e)}function ze(){Se=!1,null!==Ce&&Ue(Ce)&&(Ce=null),null!==Ae&&Ue(Ae)&&(Ae=null),null!==De&&Ue(De)&&(De=null),Oe.forEach(Be),Ne.forEach(Be)}function Ge(t,e){t.blockedOn===e&&(t.blockedOn=null,Se||(Se=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ze)))}function He(t){function e(e){return Ge(e,t)}if(0<Re.length){Ge(Re[0],t);for(var n=1;n<Re.length;n++){var i=Re[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==Ce&&Ge(Ce,t),null!==Ae&&Ge(Ae,t),null!==De&&Ge(De,t),Oe.forEach(e),Ne.forEach(e),n=0;n<Me.length;n++)(i=Me[n]).blockedOn===t&&(i.blockedOn=null);for(;0<Me.length&&null===(n=Me[0]).blockedOn;)ke(n),null===n.blockedOn&&Me.shift()}var je=T.ReactCurrentBatchConfig,Ve=!0;function We(t,e,n,i){var r=_e,s=je.transition;je.transition=null;try{_e=1,Ye(t,e,n,i)}finally{_e=r,je.transition=s}}function Ze(t,e,n,i){var r=_e,s=je.transition;je.transition=null;try{_e=4,Ye(t,e,n,i)}finally{_e=r,je.transition=s}}function Ye(t,e,n,i){if(Ve){var r=Xe(t,e,n,i);if(null===r)Vi(t,e,i,qe,n),Fe(t,i);else if(function(t,e,n,i,r){switch(e){case"focusin":return Ce=Le(Ce,t,e,n,i,r),!0;case"dragenter":return Ae=Le(Ae,t,e,n,i,r),!0;case"mouseover":return De=Le(De,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Oe.set(s,Le(Oe.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ne.set(s,Le(Ne.get(s)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i))i.stopPropagation();else if(Fe(t,i),4&e&&-1<Pe.indexOf(t)){for(;null!==r;){var s=_r(r);if(null!==s&&Ee(s),null===(s=Xe(t,e,n,i))&&Vi(t,e,i,qe,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Vi(t,e,i,null,n)}}var qe=null;function Xe(t,e,n,i){if(qe=null,null!==(t=vr(t=Et(i))))if(null===(e=Ht(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=jt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qe=t,null}function Ke(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case $t:return 1;case te:return 4;case ee:case ne:return 16;case ie:return 536870912;default:return 16}default:return 16}}var Qe=null,Je=null,$e=null;function tn(){if($e)return $e;var t,e,n=Je,i=n.length,r="value"in Qe?Qe.value:Qe.textContent,s=r.length;for(t=0;t<i&&n[t]===r[t];t++);var o=i-t;for(e=1;e<=o&&n[i-e]===r[s-e];e++);return $e=r.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function sn(t){function e(e,n,i,r,s){for(var o in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return k(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var on,an,ln,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(hn),un=k({},hn,{view:0,detail:0}),pn=sn(un),dn=k({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(on=t.screenX-ln.screenX,an=t.screenY-ln.screenY):an=on=0,ln=t),on)},movementY:function(t){return"movementY"in t?t.movementY:an}}),fn=sn(dn),mn=sn(k({},dn,{dataTransfer:0})),gn=sn(k({},un,{relatedTarget:0})),yn=sn(k({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=k({},hn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_n=sn(vn),Tn=sn(k({},hn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=bn[t])&&!!e[t]}function wn(){return In}var Sn=k({},un,{key:function(t){if(t.key){var e=En[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?xn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Rn=sn(Sn),Cn=sn(k({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(k({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn})),Dn=sn(k({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=k({},dn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=sn(On),Mn=[9,13,27,32],Pn=c&&"CompositionEvent"in window,Fn=null;c&&"documentMode"in document&&(Fn=document.documentMode);var Ln=c&&"TextEvent"in window&&!Fn,kn=c&&(!Pn||Fn&&8<Fn&&11>=Fn),Un=String.fromCharCode(32),Bn=!1;function zn(t,e){switch(t){case"keyup":return-1!==Mn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Hn=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!jn[t.type]:"textarea"===e}function Wn(t,e,n,i){St(i),0<(e=Zi(e,"onChange")).length&&(n=new cn("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Zn=null,Yn=null;function qn(t){Ui(t,0)}function Xn(t){if(Y(Tr(t)))return t}function Kn(t,e){if("change"===t)return e}var Qn=!1;if(c){var Jn;if(c){var $n="oninput"in document;if(!$n){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),$n="function"===typeof ti.oninput}Jn=$n}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function ei(){Zn&&(Zn.detachEvent("onpropertychange",ni),Yn=Zn=null)}function ni(t){if("value"===t.propertyName&&Xn(Yn)){var e=[];Wn(e,Yn,t,Et(t)),Ot(qn,e)}}function ii(t,e,n){"focusin"===t?(ei(),Yn=n,(Zn=e).attachEvent("onpropertychange",ni)):"focusout"===t&&ei()}function ri(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Xn(Yn)}function si(t,e){if("click"===t)return Xn(e)}function oi(t,e){if("input"===t||"change"===t)return Xn(e)}var ai="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function li(t,e){if(ai(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!u.call(e,r)||!ai(t[r],e[r]))return!1}return!0}function hi(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ci(t,e){var n,i=hi(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=hi(i)}}function ui(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?ui(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function pi(){for(var t=window,e=q();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=q((t=e.contentWindow).document)}return e}function di(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function fi(t){var e=pi(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ui(n.ownerDocument.documentElement,n)){if(null!==i&&di(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=ci(n,s);var o=ci(n,i);r&&o&&(1!==t.rangeCount||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&((e=e.createRange()).setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mi=c&&"documentMode"in document&&11>=document.documentMode,gi=null,yi=null,vi=null,_i=!1;function Ti(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_i||null==gi||gi!==q(i)||("selectionStart"in(i=gi)&&di(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&li(vi,i)||(vi=i,0<(i=Zi(yi,"onSelect")).length&&(e=new cn("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=gi)))}function Ei(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xi={animationend:Ei("Animation","AnimationEnd"),animationiteration:Ei("Animation","AnimationIteration"),animationstart:Ei("Animation","AnimationStart"),transitionend:Ei("Transition","TransitionEnd")},bi={},Ii={};function wi(t){if(bi[t])return bi[t];if(!xi[t])return t;var e,n=xi[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ii)return bi[t]=n[e];return t}c&&(Ii=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);var Si=wi("animationend"),Ri=wi("animationiteration"),Ci=wi("animationstart"),Ai=wi("transitionend"),Di=new Map,Oi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(t,e){Di.set(t,e),l(e,[t])}for(var Mi=0;Mi<Oi.length;Mi++){var Pi=Oi[Mi];Ni(Pi.toLowerCase(),"on"+(Pi[0].toUpperCase()+Pi.slice(1)))}Ni(Si,"onAnimationEnd"),Ni(Ri,"onAnimationIteration"),Ni(Ci,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(Ai,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Li=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fi));function ki(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,o,a,l,h){if(Gt.apply(this,arguments),Lt){if(!Lt)throw Error(s(198));var c=kt;Lt=!1,kt=null,Ut||(Ut=!0,Bt=c)}}(i,e,void 0,t),t.currentTarget=null}function Ui(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,h=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break t;ki(r,a,h),s=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,h=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break t;ki(r,a,h),s=l}}}if(Ut)throw t=Bt,Ut=!1,Bt=null,t}function Bi(t,e){var n=e[mr];void 0===n&&(n=e[mr]=new Set);var i=t+"__bubble";n.has(i)||(ji(e,t,2,!1),n.add(i))}function zi(t,e,n){var i=0;e&&(i|=4),ji(n,t,i,e)}var Gi="_reactListening"+Math.random().toString(36).slice(2);function Hi(t){if(!t[Gi]){t[Gi]=!0,o.forEach((function(e){"selectionchange"!==e&&(Li.has(e)||zi(e,!1,t),zi(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Gi]||(e[Gi]=!0,zi("selectionchange",!1,e))}}function ji(t,e,n,i){switch(Ke(e)){case 1:var r=We;break;case 4:r=Ze;break;default:r=Ye}n=r.bind(null,e,n,t),r=void 0,!Mt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Vi(t,e,n,i,r){var s=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=vr(a)))return;if(5===(l=o.tag)||6===l){i=s=o;continue t}a=a.parentNode}}i=i.return}Ot((function(){var i=s,r=Et(n),o=[];t:{var a=Di.get(t);if(void 0!==a){var l=cn,h=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=Rn;break;case"focusin":h="focus",l=gn;break;case"focusout":h="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Si:case Ri:case Ci:l=yn;break;case Ai:l=Dn;break;case"scroll":l=pn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var c=0!==(4&e),u=!c&&"scroll"===t,p=c?null!==a?a+"Capture":null:a;c=[];for(var d,f=i;null!==f;){var m=(d=f).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==p&&(null!=(m=Nt(f,p))&&c.push(Wi(f,m,d)))),u)break;f=f.return}0<c.length&&(a=new l(a,h,null,n,r),o.push({event:a,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===Tt||!(h=n.relatedTarget||n.fromElement)||!vr(h)&&!h[fr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(h=(h=n.relatedTarget||n.toElement)?vr(h):null)&&(h!==(u=Ht(h))||5!==h.tag&&6!==h.tag)&&(h=null)):(l=null,h=i),l!==h)){if(c=fn,m="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(c=Cn,m="onPointerLeave",p="onPointerEnter",f="pointer"),u=null==l?a:Tr(l),d=null==h?a:Tr(h),(a=new c(m,f+"leave",l,n,r)).target=u,a.relatedTarget=d,m=null,vr(r)===i&&((c=new c(p,f+"enter",h,n,r)).target=d,c.relatedTarget=u,m=c),u=m,l&&h)t:{for(p=h,f=0,d=c=l;d;d=Yi(d))f++;for(d=0,m=p;m;m=Yi(m))d++;for(;0<f-d;)c=Yi(c),f--;for(;0<d-f;)p=Yi(p),d--;for(;f--;){if(c===p||null!==p&&c===p.alternate)break t;c=Yi(c),p=Yi(p)}c=null}else c=null;null!==l&&qi(o,a,l,c,!1),null!==h&&null!==u&&qi(o,u,h,c,!0)}if("select"===(l=(a=i?Tr(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Kn;else if(Vn(a))if(Qn)g=oi;else{g=ri;var y=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=si);switch(g&&(g=g(t,i))?Wn(o,g,n,r):(y&&y(t,a,i),"focusout"===t&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&tt(a,"number",a.value)),y=i?Tr(i):window,t){case"focusin":(Vn(y)||"true"===y.contentEditable)&&(gi=y,yi=i,vi=null);break;case"focusout":vi=yi=gi=null;break;case"mousedown":_i=!0;break;case"contextmenu":case"mouseup":case"dragend":_i=!1,Ti(o,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":Ti(o,n,r)}var v;if(Pn)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else Hn?zn(t,n)&&(_="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(_="onCompositionStart");_&&(kn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Hn&&(v=tn()):(Je="value"in(Qe=r)?Qe.value:Qe.textContent,Hn=!0)),0<(y=Zi(i,_)).length&&(_=new Tn(_,t,null,n,r),o.push({event:_,listeners:y}),v?_.data=v:null!==(v=Gn(n))&&(_.data=v))),(v=Ln?function(t,e){switch(t){case"compositionend":return Gn(e);case"keypress":return 32!==e.which?null:(Bn=!0,Un);case"textInput":return(t=e.data)===Un&&Bn?null:t;default:return null}}(t,n):function(t,e){if(Hn)return"compositionend"===t||!Pn&&zn(t,e)?(t=tn(),$e=Je=Qe=null,Hn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(i=Zi(i,"onBeforeInput")).length&&(r=new Tn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=v))}Ui(o,e)}))}function Wi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zi(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Nt(t,n))&&i.unshift(Wi(t,s,r)),null!=(s=Nt(t,e))&&i.push(Wi(t,s,r))),t=t.return}return i}function Yi(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function qi(t,e,n,i,r){for(var s=e._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,h=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==h&&(a=h,r?null!=(l=Nt(n,s))&&o.unshift(Wi(n,l,a)):r||null!=(l=Nt(n,s))&&o.push(Wi(n,l,a))),n=n.return}0!==o.length&&t.push({event:e,listeners:o})}var Xi=/\r\n?/g,Ki=/\u0000|\uFFFD/g;function Qi(t){return("string"===typeof t?t:""+t).replace(Xi,"\n").replace(Ki,"")}function Ji(t,e,n){if(e=Qi(e),Qi(t)!==e&&n)throw Error(s(425))}function $i(){}var tr=null,er=null;function nr(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(t){return sr.resolve(null).then(t).catch(ar)}:ir;function ar(t){setTimeout((function(){throw t}))}function lr(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return t.removeChild(r),void He(e);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);He(e)}function hr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function cr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var ur=Math.random().toString(36).slice(2),pr="__reactFiber$"+ur,dr="__reactProps$"+ur,fr="__reactContainer$"+ur,mr="__reactEvents$"+ur,gr="__reactListeners$"+ur,yr="__reactHandles$"+ur;function vr(t){var e=t[pr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fr]||n[pr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=cr(t);null!==t;){if(n=t[pr])return n;t=cr(t)}return e}n=(t=n).parentNode}return null}function _r(t){return!(t=t[pr]||t[fr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function Tr(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function Er(t){return t[dr]||null}var xr=[],br=-1;function Ir(t){return{current:t}}function wr(t){0>br||(t.current=xr[br],xr[br]=null,br--)}function Sr(t,e){br++,xr[br]=t.current,t.current=e}var Rr={},Cr=Ir(Rr),Ar=Ir(!1),Dr=Rr;function Or(t,e){var n=t.type.contextTypes;if(!n)return Rr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Nr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Mr(){wr(Ar),wr(Cr)}function Pr(t,e,n){if(Cr.current!==Rr)throw Error(s(168));Sr(Cr,e),Sr(Ar,n)}function Fr(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(s(108,j(t)||"Unknown",r));return k({},n,i)}function Lr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rr,Dr=Cr.current,Sr(Cr,t),Sr(Ar,Ar.current),!0}function kr(t,e,n){var i=t.stateNode;if(!i)throw Error(s(169));n?(t=Fr(t,e,Dr),i.__reactInternalMemoizedMergedChildContext=t,wr(Ar),wr(Cr),Sr(Cr,t)):wr(Ar),Sr(Ar,n)}var Ur=null,Br=!1,zr=!1;function Gr(t){null===Ur?Ur=[t]:Ur.push(t)}function Hr(){if(!zr&&null!==Ur){zr=!0;var t=0,e=_e;try{var n=Ur;for(_e=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}Ur=null,Br=!1}catch(r){throw null!==Ur&&(Ur=Ur.slice(t+1)),Yt($t,Hr),r}finally{_e=e,zr=!1}}return null}var jr=[],Vr=0,Wr=null,Zr=0,Yr=[],qr=0,Xr=null,Kr=1,Qr="";function Jr(t,e){jr[Vr++]=Zr,jr[Vr++]=Wr,Wr=t,Zr=e}function $r(t,e,n){Yr[qr++]=Kr,Yr[qr++]=Qr,Yr[qr++]=Xr,Xr=t;var i=Kr;t=Qr;var r=32-oe(i)-1;i&=~(1<<r),n+=1;var s=32-oe(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Kr=1<<32-oe(e)+r|n<<r|i,Qr=s+t}else Kr=1<<s|n<<r|i,Qr=t}function ts(t){null!==t.return&&(Jr(t,1),$r(t,1,0))}function es(t){for(;t===Wr;)Wr=jr[--Vr],jr[Vr]=null,Zr=jr[--Vr],jr[Vr]=null;for(;t===Xr;)Xr=Yr[--qr],Yr[qr]=null,Qr=Yr[--qr],Yr[qr]=null,Kr=Yr[--qr],Yr[qr]=null}var ns=null,is=null,rs=!1,ss=null;function os(t,e){var n=Nh(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function as(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,ns=t,is=hr(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,ns=t,is=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Xr?{id:Kr,overflow:Qr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Nh(18,null,null,0)).stateNode=e,n.return=t,t.child=n,ns=t,is=null,!0);default:return!1}}function ls(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function hs(t){if(rs){var e=is;if(e){var n=e;if(!as(t,e)){if(ls(t))throw Error(s(418));e=hr(n.nextSibling);var i=ns;e&&as(t,e)?os(i,n):(t.flags=-4097&t.flags|2,rs=!1,ns=t)}}else{if(ls(t))throw Error(s(418));t.flags=-4097&t.flags|2,rs=!1,ns=t}}}function cs(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;ns=t}function us(t){if(t!==ns)return!1;if(!rs)return cs(t),rs=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!nr(t.type,t.memoizedProps)),e&&(e=is)){if(ls(t))throw ps(),Error(s(418));for(;e;)os(t,e),e=hr(e.nextSibling)}if(cs(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){is=hr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}is=null}}else is=ns?hr(t.stateNode.nextSibling):null;return!0}function ps(){for(var t=is;t;)t=hr(t.nextSibling)}function ds(){is=ns=null,rs=!1}function fs(t){null===ss?ss=[t]:ss.push(t)}var ms=T.ReactCurrentBatchConfig;function gs(t,e){if(t&&t.defaultProps){for(var n in e=k({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var ys=Ir(null),vs=null,_s=null,Ts=null;function Es(){Ts=_s=vs=null}function xs(t){var e=ys.current;wr(ys),t._currentValue=e}function bs(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Is(t,e){vs=t,Ts=_s=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Ta=!0),t.firstContext=null)}function ws(t){var e=t._currentValue;if(Ts!==t)if(t={context:t,memoizedValue:e,next:null},null===_s){if(null===vs)throw Error(s(308));_s=t,vs.dependencies={lanes:0,firstContext:t}}else _s=_s.next=t;return e}var Ss=null;function Rs(t){null===Ss?Ss=[t]:Ss.push(t)}function Cs(t,e,n,i){var r=e.interleaved;return null===r?(n.next=n,Rs(e)):(n.next=r.next,r.next=n),e.interleaved=n,As(t,i)}function As(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Ds=!1;function Os(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ns(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ms(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ps(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Al)){var r=i.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),i.pending=e,As(t,n)}return null===(r=i.interleaved)?(e.next=e,Rs(i)):(e.next=r.next,r.next=e),i.interleaved=e,As(t,n)}function Fs(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ve(t,n)}}function Ls(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=e:s=s.next=e}else r=s=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ks(t,e,n,i){var r=t.updateQueue;Ds=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,h=l.next;l.next=null,null===o?s=h:o.next=h,o=l;var c=t.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=h:a.next=h,c.lastBaseUpdate=l))}if(null!==s){var u=r.baseState;for(o=0,c=h=l=null,a=s;;){var p=a.lane,d=a.eventTime;if((i&p)===p){null!==c&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var f=t,m=a;switch(p=e,d=n,m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(d,u,p);break t}u=f;break t;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=m.payload)?f.call(d,u,p):f)||void 0===p)break t;u=k({},u,p);break t;case 2:Ds=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(p=r.effects)?r.effects=[a]:p.push(a))}else d={eventTime:d,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(h=c=d,l=u):c=c.next=d,o|=p;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(p=a).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}if(null===c&&(l=u),r.baseState=l,r.firstBaseUpdate=h,r.lastBaseUpdate=c,null!==(e=r.shared.interleaved)){r=e;do{o|=r.lane,r=r.next}while(r!==e)}else null===s&&(r.shared.lanes=0);kl|=o,t.lanes=o,t.memoizedState=u}}function Us(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Bs=(new i.Component).refs;function zs(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:k({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Gs={isMounted:function(t){return!!(t=t._reactInternals)&&Ht(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=eh(),r=nh(t),s=Ms(i,r);s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Ps(t,s,r))&&(ih(e,t,r,i),Fs(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=eh(),r=nh(t),s=Ms(i,r);s.tag=1,s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Ps(t,s,r))&&(ih(e,t,r,i),Fs(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=eh(),i=nh(t),r=Ms(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),null!==(e=Ps(t,r,i))&&(ih(e,t,i,n),Fs(e,t,i))}};function Hs(t,e,n,i,r,s,o){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,s,o):!e.prototype||!e.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function js(t,e,n){var i=!1,r=Rr,s=e.contextType;return"object"===typeof s&&null!==s?s=ws(s):(r=Nr(e)?Dr:Cr.current,s=(i=null!==(i=e.contextTypes)&&void 0!==i)?Or(t,r):Rr),e=new e(n,s),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Gs,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Vs(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Gs.enqueueReplaceState(e,e.state,null)}function Ws(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=Bs,Os(t);var s=e.contextType;"object"===typeof s&&null!==s?r.context=ws(s):(s=Nr(e)?Dr:Cr.current,r.context=Or(t,s)),r.state=t.memoizedState,"function"===typeof(s=e.getDerivedStateFromProps)&&(zs(t,e,s,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&Gs.enqueueReplaceState(r,r.state,null),ks(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308)}function Zs(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,t));var r=i,o=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=r.refs;e===Bs&&(e=r.refs={}),null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function Ys(t,e){throw t=Object.prototype.toString.call(e),Error(s(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qs(t){return(0,t._init)(t._payload)}function Xs(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Ph(t,e)).index=0,t.sibling=null,t}function o(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=Uh(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function h(t,e,n,i){var s=n.type;return s===b?u(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===N&&qs(s)===e.type)?((i=r(e,n.props)).ref=Zs(t,e,n),i.return=t,i):((i=Fh(n.type,n.key,n.props,null,t.mode,i)).ref=Zs(t,e,n),i.return=t,i)}function c(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Bh(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function u(t,e,n,i,s){return null===e||7!==e.tag?((e=Lh(n,t.mode,i,s)).return=t,e):((e=r(e,n)).return=t,e)}function p(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Uh(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case E:return(n=Fh(e.type,e.key,e.props,null,t.mode,n)).ref=Zs(t,null,e),n.return=t,n;case x:return(e=Bh(e,t.mode,n)).return=t,e;case N:return p(t,(0,e._init)(e._payload),n)}if(et(e)||F(e))return(e=Lh(e,t.mode,n,null)).return=t,e;Ys(t,e)}return null}function d(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===r?h(t,e,n,i):null;case x:return n.key===r?c(t,e,n,i):null;case N:return d(t,e,(r=n._init)(n._payload),i)}if(et(n)||F(n))return null!==r?null:u(t,e,n,i,null);Ys(t,n)}return null}function f(t,e,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case E:return h(e,t=t.get(null===i.key?n:i.key)||null,i,r);case x:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r);case N:return f(t,e,n,(0,i._init)(i._payload),r)}if(et(i)||F(i))return u(e,t=t.get(n)||null,i,r,null);Ys(e,i)}return null}function m(r,s,a,l){for(var h=null,c=null,u=s,m=s=0,g=null;null!==u&&m<a.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var y=d(r,u,a[m],l);if(null===y){null===u&&(u=g);break}t&&u&&null===y.alternate&&e(r,u),s=o(y,s,m),null===c?h=y:c.sibling=y,c=y,u=g}if(m===a.length)return n(r,u),rs&&Jr(r,m),h;if(null===u){for(;m<a.length;m++)null!==(u=p(r,a[m],l))&&(s=o(u,s,m),null===c?h=u:c.sibling=u,c=u);return rs&&Jr(r,m),h}for(u=i(r,u);m<a.length;m++)null!==(g=f(u,r,m,a[m],l))&&(t&&null!==g.alternate&&u.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?h=g:c.sibling=g,c=g);return t&&u.forEach((function(t){return e(r,t)})),rs&&Jr(r,m),h}function g(r,a,l,h){var c=F(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var u=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=d(r,m,v.value,h);if(null===_){null===m&&(m=y);break}t&&m&&null===_.alternate&&e(r,m),a=o(_,a,g),null===u?c=_:u.sibling=_,u=_,m=y}if(v.done)return n(r,m),rs&&Jr(r,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=p(r,v.value,h))&&(a=o(v,a,g),null===u?c=v:u.sibling=v,u=v);return rs&&Jr(r,g),c}for(m=i(r,m);!v.done;g++,v=l.next())null!==(v=f(m,r,g,v.value,h))&&(t&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===u?c=v:u.sibling=v,u=v);return t&&m.forEach((function(t){return e(r,t)})),rs&&Jr(r,g),c}return function t(i,s,o,l){if("object"===typeof o&&null!==o&&o.type===b&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case E:t:{for(var h=o.key,c=s;null!==c;){if(c.key===h){if((h=o.type)===b){if(7===c.tag){n(i,c.sibling),(s=r(c,o.props.children)).return=i,i=s;break t}}else if(c.elementType===h||"object"===typeof h&&null!==h&&h.$$typeof===N&&qs(h)===c.type){n(i,c.sibling),(s=r(c,o.props)).ref=Zs(i,c,o),s.return=i,i=s;break t}n(i,c);break}e(i,c),c=c.sibling}o.type===b?((s=Lh(o.props.children,i.mode,l,o.key)).return=i,i=s):((l=Fh(o.type,o.key,o.props,null,i.mode,l)).ref=Zs(i,s,o),l.return=i,i=l)}return a(i);case x:t:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(i,s.sibling),(s=r(s,o.children||[])).return=i,i=s;break t}n(i,s);break}e(i,s),s=s.sibling}(s=Bh(o,i.mode,l)).return=i,i=s}return a(i);case N:return t(i,s,(c=o._init)(o._payload),l)}if(et(o))return m(i,s,o,l);if(F(o))return g(i,s,o,l);Ys(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,o)).return=i,i=s):(n(i,s),(s=Uh(o,i.mode,l)).return=i,i=s),a(i)):n(i,s)}}var Ks=Xs(!0),Qs=Xs(!1),Js={},$s=Ir(Js),to=Ir(Js),eo=Ir(Js);function no(t){if(t===Js)throw Error(s(174));return t}function io(t,e){switch(Sr(eo,e),Sr(to,t),Sr($s,Js),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}wr($s),Sr($s,e)}function ro(){wr($s),wr(to),wr(eo)}function so(t){no(eo.current);var e=no($s.current),n=lt(e,t.type);e!==n&&(Sr(to,t),Sr($s,n))}function oo(t){to.current===t&&(wr($s),wr(to))}var ao=Ir(0);function lo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ho=[];function co(){for(var t=0;t<ho.length;t++)ho[t]._workInProgressVersionPrimary=null;ho.length=0}var uo=T.ReactCurrentDispatcher,po=T.ReactCurrentBatchConfig,fo=0,mo=null,go=null,yo=null,vo=!1,_o=!1,To=0,Eo=0;function xo(){throw Error(s(321))}function bo(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ai(t[n],e[n]))return!1;return!0}function Io(t,e,n,i,r,o){if(fo=o,mo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,uo.current=null===t||null===t.memoizedState?aa:la,t=n(i,r),_o){o=0;do{if(_o=!1,To=0,25<=o)throw Error(s(301));o+=1,yo=go=null,e.updateQueue=null,uo.current=ha,t=n(i,r)}while(_o)}if(uo.current=oa,e=null!==go&&null!==go.next,fo=0,yo=go=mo=null,vo=!1,e)throw Error(s(300));return t}function wo(){var t=0!==To;return To=0,t}function So(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=t:yo=yo.next=t,yo}function Ro(){if(null===go){var t=mo.alternate;t=null!==t?t.memoizedState:null}else t=go.next;var e=null===yo?mo.memoizedState:yo.next;if(null!==e)yo=e,go=t;else{if(null===t)throw Error(s(310));t={memoizedState:(go=t).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=t:yo=yo.next=t}return yo}function Co(t,e){return"function"===typeof e?e(t):e}function Ao(t){var e=Ro(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=go,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=a=null,h=null,c=o;do{var u=c.lane;if((fo&u)===u)null!==h&&(h=h.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var p={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===h?(l=h=p,a=i):h=h.next=p,mo.lanes|=u,kl|=u}c=c.next}while(null!==c&&c!==o);null===h?a=i:h.next=l,ai(i,e.memoizedState)||(Ta=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(null!==(t=n.interleaved)){r=t;do{o=r.lane,mo.lanes|=o,kl|=o,r=r.next}while(r!==t)}else null===r&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Do(t){var e=Ro(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=t(o,a.action),a=a.next}while(a!==r);ai(o,e.memoizedState)||(Ta=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Oo(){}function No(t,e){var n=mo,i=Ro(),r=e(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,Ta=!0),i=i.queue,Vo(Fo.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Bo(9,Po.bind(null,n,i,r,e),void 0,null),null===Dl)throw Error(s(349));0!==(30&fo)||Mo(n,e,r)}return r}function Mo(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=mo.updateQueue)?(e={lastEffect:null,stores:null},mo.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Po(t,e,n,i){e.value=n,e.getSnapshot=i,Lo(e)&&ko(t)}function Fo(t,e,n){return n((function(){Lo(e)&&ko(t)}))}function Lo(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ai(t,n)}catch(i){return!0}}function ko(t){var e=As(t,1);null!==e&&ih(e,t,1,-1)}function Uo(t){var e=So();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:t},e.queue=t,t=t.dispatch=na.bind(null,mo,t),[e.memoizedState,t]}function Bo(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=mo.updateQueue)?(e={lastEffect:null,stores:null},mo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function zo(){return Ro().memoizedState}function Go(t,e,n,i){var r=So();mo.flags|=t,r.memoizedState=Bo(1|e,n,void 0,void 0===i?null:i)}function Ho(t,e,n,i){var r=Ro();i=void 0===i?null:i;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==i&&bo(i,o.deps))return void(r.memoizedState=Bo(e,n,s,i))}mo.flags|=t,r.memoizedState=Bo(1|e,n,s,i)}function jo(t,e){return Go(8390656,8,t,e)}function Vo(t,e){return Ho(2048,8,t,e)}function Wo(t,e){return Ho(4,2,t,e)}function Zo(t,e){return Ho(4,4,t,e)}function Yo(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function qo(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Ho(4,4,Yo.bind(null,e,t),n)}function Xo(){}function Ko(t,e){var n=Ro();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&bo(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Qo(t,e){var n=Ro();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&bo(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Jo(t,e,n){return 0===(21&fo)?(t.baseState&&(t.baseState=!1,Ta=!0),t.memoizedState=n):(ai(n,e)||(n=me(),mo.lanes|=n,kl|=n,t.baseState=!0),e)}function $o(t,e){var n=_e;_e=0!==n&&4>n?n:4,t(!0);var i=po.transition;po.transition={};try{t(!1),e()}finally{_e=n,po.transition=i}}function ta(){return Ro().memoizedState}function ea(t,e,n){var i=nh(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ia(t))ra(e,n);else if(null!==(n=Cs(t,e,n,i))){ih(n,t,i,eh()),sa(n,e,i)}}function na(t,e,n){var i=nh(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ia(t))ra(e,r);else{var s=t.alternate;if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,o)){var l=e.interleaved;return null===l?(r.next=r,Rs(e)):(r.next=l.next,l.next=r),void(e.interleaved=r)}}catch(h){}null!==(n=Cs(t,e,r,i))&&(ih(n,t,i,r=eh()),sa(n,e,i))}}function ia(t){var e=t.alternate;return t===mo||null!==e&&e===mo}function ra(t,e){_o=vo=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sa(t,e,n){if(0!==(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ve(t,n)}}var oa={readContext:ws,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},aa={readContext:ws,useCallback:function(t,e){return So().memoizedState=[t,void 0===e?null:e],t},useContext:ws,useEffect:jo,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Go(4194308,4,Yo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Go(4194308,4,t,e)},useInsertionEffect:function(t,e){return Go(4,2,t,e)},useMemo:function(t,e){var n=So();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=So();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=ea.bind(null,mo,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},So().memoizedState=t},useState:Uo,useDebugValue:Xo,useDeferredValue:function(t){return So().memoizedState=t},useTransition:function(){var t=Uo(!1),e=t[0];return t=$o.bind(null,t[1]),So().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=mo,r=So();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=e(),null===Dl)throw Error(s(349));0!==(30&fo)||Mo(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,jo(Fo.bind(null,i,o,t),[t]),i.flags|=2048,Bo(9,Po.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=So(),e=Dl.identifierPrefix;if(rs){var n=Qr;e=":"+e+"R"+(n=(Kr&~(1<<32-oe(Kr)-1)).toString(32)+n),0<(n=To++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=Eo++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},la={readContext:ws,useCallback:Ko,useContext:ws,useEffect:Vo,useImperativeHandle:qo,useInsertionEffect:Wo,useLayoutEffect:Zo,useMemo:Qo,useReducer:Ao,useRef:zo,useState:function(){return Ao(Co)},useDebugValue:Xo,useDeferredValue:function(t){return Jo(Ro(),go.memoizedState,t)},useTransition:function(){return[Ao(Co)[0],Ro().memoizedState]},useMutableSource:Oo,useSyncExternalStore:No,useId:ta,unstable_isNewReconciler:!1},ha={readContext:ws,useCallback:Ko,useContext:ws,useEffect:Vo,useImperativeHandle:qo,useInsertionEffect:Wo,useLayoutEffect:Zo,useMemo:Qo,useReducer:Do,useRef:zo,useState:function(){return Do(Co)},useDebugValue:Xo,useDeferredValue:function(t){var e=Ro();return null===go?e.memoizedState=t:Jo(e,go.memoizedState,t)},useTransition:function(){return[Do(Co)[0],Ro().memoizedState]},useMutableSource:Oo,useSyncExternalStore:No,useId:ta,unstable_isNewReconciler:!1};function ca(t,e){try{var n="",i=e;do{n+=G(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:t,source:e,stack:r,digest:null}}function ua(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function pa(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(t,e,n){(n=Ms(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Wl||(Wl=!0,Zl=i),pa(0,e)},n}function ma(t,e,n){(n=Ms(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){pa(0,e)}}var s=t.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){pa(0,e),"function"!==typeof i&&(null===Yl?Yl=new Set([this]):Yl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ga(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new da;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Sh.bind(null,t,e,n),e.then(t,t))}function ya(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function va(t,e,n,i,r){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Ms(-1,1)).tag=2,Ps(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var _a=T.ReactCurrentOwner,Ta=!1;function Ea(t,e,n,i){e.child=null===t?Qs(e,null,n,i):Ks(e,t.child,n,i)}function xa(t,e,n,i,r){n=n.render;var s=e.ref;return Is(e,r),i=Io(t,e,n,i,s,r),n=wo(),null===t||Ta?(rs&&n&&ts(e),e.flags|=1,Ea(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Wa(t,e,r))}function ba(t,e,n,i,r){if(null===t){var s=n.type;return"function"!==typeof s||Mh(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Fh(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Ia(t,e,s,i,r))}if(s=t.child,0===(t.lanes&r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&t.ref===e.ref)return Wa(t,e,r)}return e.flags|=1,(t=Ph(s,i)).ref=e.ref,t.return=e,e.child=t}function Ia(t,e,n,i,r){if(null!==t){var s=t.memoizedProps;if(li(s,i)&&t.ref===e.ref){if(Ta=!1,e.pendingProps=i=s,0===(t.lanes&r))return e.lanes=t.lanes,Wa(t,e,r);0!==(131072&t.flags)&&(Ta=!0)}}return Ra(t,e,n,i,r)}function wa(t,e,n){var i=e.pendingProps,r=i.children,s=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sr(Pl,Ml),Ml|=n;else{if(0===(1073741824&n))return t=null!==s?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Sr(Pl,Ml),Ml|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Sr(Pl,Ml),Ml|=i}else null!==s?(i=s.baseLanes|n,e.memoizedState=null):i=n,Sr(Pl,Ml),Ml|=i;return Ea(t,e,r,n),e.child}function Sa(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ra(t,e,n,i,r){var s=Nr(n)?Dr:Cr.current;return s=Or(e,s),Is(e,r),n=Io(t,e,n,i,s,r),i=wo(),null===t||Ta?(rs&&i&&ts(e),e.flags|=1,Ea(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Wa(t,e,r))}function Ca(t,e,n,i,r){if(Nr(n)){var s=!0;Lr(e)}else s=!1;if(Is(e,r),null===e.stateNode)Va(t,e),js(e,n,i),Ws(e,n,i,r),i=!0;else if(null===t){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,h=n.contextType;"object"===typeof h&&null!==h?h=ws(h):h=Or(e,h=Nr(n)?Dr:Cr.current);var c=n.getDerivedStateFromProps,u="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||l!==h)&&Vs(e,o,i,h),Ds=!1;var p=e.memoizedState;o.state=p,ks(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Ar.current||Ds?("function"===typeof c&&(zs(e,n,c,i),l=e.memoizedState),(a=Ds||Hs(e,n,a,i,p,l,h))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(e.flags|=4194308)):("function"===typeof o.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=h,i=a):("function"===typeof o.componentDidMount&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Ns(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:gs(e.type,a),o.props=h,u=e.pendingProps,p=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=ws(l):l=Or(e,l=Nr(n)?Dr:Cr.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==u||p!==l)&&Vs(e,o,i,l),Ds=!1,p=e.memoizedState,o.state=p,ks(e,i,o,r);var f=e.memoizedState;a!==u||p!==f||Ar.current||Ds?("function"===typeof d&&(zs(e,n,d,i),f=e.memoizedState),(h=Ds||Hs(e,n,h,i,p,f,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof o.componentDidUpdate&&(e.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=f),o.props=i,o.state=f,o.context=l,i=h):("function"!==typeof o.componentDidUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return Aa(t,e,n,i,s,r)}function Aa(t,e,n,i,r,s){Sa(t,e);var o=0!==(128&e.flags);if(!i&&!o)return r&&kr(e,n,!1),Wa(t,e,s);i=e.stateNode,_a.current=e;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&o?(e.child=Ks(e,t.child,null,s),e.child=Ks(e,null,a,s)):Ea(t,e,a,s),e.memoizedState=i.state,r&&kr(e,n,!0),e.child}function Da(t){var e=t.stateNode;e.pendingContext?Pr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Pr(0,e.context,!1),io(t,e.containerInfo)}function Oa(t,e,n,i,r){return ds(),fs(r),e.flags|=256,Ea(t,e,n,i),e.child}var Na,Ma,Pa,Fa,La={dehydrated:null,treeContext:null,retryLane:0};function ka(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ua(t,e,n){var i,r=e.pendingProps,o=ao.current,a=!1,l=0!==(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!==(2&o)),i?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(o|=1),Sr(ao,1&o),null===t)return hs(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=r.children,t=r.fallback,a?(r=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=kh(l,r,0,null),t=Lh(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=ka(n),e.memoizedState=La,t):Ba(e,l));if(null!==(o=t.memoizedState)&&null!==(i=o.dehydrated))return function(t,e,n,i,r,o,a){if(n)return 256&e.flags?(e.flags&=-257,za(t,e,a,i=ua(Error(s(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=kh({mode:"visible",children:i.children},r,0,null),(o=Lh(o,r,a,null)).flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,0!==(1&e.mode)&&Ks(e,t.child,null,a),e.child.memoizedState=ka(a),e.memoizedState=La,o);if(0===(1&e.mode))return za(t,e,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,za(t,e,a,i=ua(o=Error(s(419)),i,void 0))}if(l=0!==(a&t.childLanes),Ta||l){if(null!==(i=Dl)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==o.retryLane&&(o.retryLane=r,As(t,r),ih(i,t,r,-1))}return gh(),za(t,e,a,i=ua(Error(s(421))))}return"$?"===r.data?(e.flags|=128,e.child=t.child,e=Ch.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,is=hr(r.nextSibling),ns=e,rs=!0,ss=null,null!==t&&(Yr[qr++]=Kr,Yr[qr++]=Qr,Yr[qr++]=Xr,Kr=t.id,Qr=t.overflow,Xr=e),e=Ba(e,i.children),e.flags|=4096,e)}(t,e,l,r,i,o,n);if(a){a=r.fallback,l=e.mode,i=(o=t.child).sibling;var h={mode:"hidden",children:r.children};return 0===(1&l)&&e.child!==o?((r=e.child).childLanes=0,r.pendingProps=h,e.deletions=null):(r=Ph(o,h)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=Ph(i,a):(a=Lh(a,l,n,null)).flags|=2,a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,l=null===(l=t.child.memoizedState)?ka(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=La,r}return t=(a=t.child).sibling,r=Ph(a,{mode:"visible",children:r.children}),0===(1&e.mode)&&(r.lanes=n),r.return=e,r.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ba(t,e){return(e=kh({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function za(t,e,n,i){return null!==i&&fs(i),Ks(e,t.child,null,n),(t=Ba(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Ga(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),bs(t.return,e,n)}function Ha(t,e,n,i,r){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function ja(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ea(t,e,i.children,n),0!==(2&(i=ao.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ga(t,n,e);else if(19===t.tag)Ga(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Sr(ao,i),0===(1&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===lo(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Ha(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===lo(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Ha(e,!0,n,null,s);break;case"together":Ha(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Va(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wa(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),kl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Ph(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Ph(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Za(t,e){if(!rs)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ya(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function qa(t,e,n){var i=e.pendingProps;switch(es(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(e),null;case 1:case 17:return Nr(e.type)&&Mr(),Ya(e),null;case 3:return i=e.stateNode,ro(),wr(Ar),wr(Cr),co(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(us(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==ss&&(ah(ss),ss=null))),Ma(t,e),Ya(e),null;case 5:oo(e);var r=no(eo.current);if(n=e.type,null!==t&&null!=e.stateNode)Pa(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(s(166));return Ya(e),null}if(t=no($s.current),us(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[pr]=e,i[dr]=o,t=0!==(1&e.mode),n){case"dialog":Bi("cancel",i),Bi("close",i);break;case"iframe":case"object":case"embed":Bi("load",i);break;case"video":case"audio":for(r=0;r<Fi.length;r++)Bi(Fi[r],i);break;case"source":Bi("error",i);break;case"img":case"image":case"link":Bi("error",i),Bi("load",i);break;case"details":Bi("toggle",i);break;case"input":K(i,o),Bi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Bi("invalid",i);break;case"textarea":rt(i,o),Bi("invalid",i)}for(var l in vt(n,o),r=null,o)if(o.hasOwnProperty(l)){var h=o[l];"children"===l?"string"===typeof h?i.textContent!==h&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,h,t),r=["children",h]):"number"===typeof h&&i.textContent!==""+h&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,h,t),r=["children",""+h]):a.hasOwnProperty(l)&&null!=h&&"onScroll"===l&&Bi("scroll",i)}switch(n){case"input":Z(i),$(i,o,!0);break;case"textarea":Z(i),ot(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=$i)}i=r,e.updateQueue=i,null!==i&&(e.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),"select"===n&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[pr]=e,t[dr]=i,Na(t,e,!1,!1),e.stateNode=t;t:{switch(l=_t(n,i),n){case"dialog":Bi("cancel",t),Bi("close",t),r=i;break;case"iframe":case"object":case"embed":Bi("load",t),r=i;break;case"video":case"audio":for(r=0;r<Fi.length;r++)Bi(Fi[r],t);r=i;break;case"source":Bi("error",t),r=i;break;case"img":case"image":case"link":Bi("error",t),Bi("load",t),r=i;break;case"details":Bi("toggle",t),r=i;break;case"input":K(t,i),r=X(t,i),Bi("invalid",t);break;case"option":default:r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=k({},i,{value:void 0}),Bi("invalid",t);break;case"textarea":rt(t,i),r=it(t,i),Bi("invalid",t)}for(o in vt(n,r),h=r)if(h.hasOwnProperty(o)){var c=h[o];"style"===o?gt(t,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&ut(t,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&pt(t,c):"number"===typeof c&&pt(t,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Bi("scroll",t):null!=c&&_(t,o,c,l))}switch(n){case"input":Z(t),$(t,i,!1);break;case"textarea":Z(t),ot(t);break;case"option":null!=i.value&&t.setAttribute("value",""+V(i.value));break;case"select":t.multiple=!!i.multiple,null!=(o=i.value)?nt(t,!!i.multiple,o,!1):null!=i.defaultValue&&nt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(t.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ya(e),null;case 6:if(t&&null!=e.stateNode)Fa(t,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(s(166));if(n=no(eo.current),no($s.current),us(e)){if(i=e.stateNode,n=e.memoizedProps,i[pr]=e,(o=i.nodeValue!==n)&&null!==(t=ns))switch(t.tag){case 3:Ji(i.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&t.mode))}o&&(e.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[pr]=e,e.stateNode=i}return Ya(e),null;case 13:if(wr(ao),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&e.mode)&&0===(128&e.flags))ps(),ds(),e.flags|=98560,o=!1;else if(o=us(e),null!==i&&null!==i.dehydrated){if(null===t){if(!o)throw Error(s(318));if(!(o=null!==(o=e.memoizedState)?o.dehydrated:null))throw Error(s(317));o[pr]=e}else ds(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Ya(e),o=!1}else null!==ss&&(ah(ss),ss=null),o=!0;if(!o)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((i=null!==i)!==(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ao.current)?0===Fl&&(Fl=3):gh())),null!==e.updateQueue&&(e.flags|=4),Ya(e),null);case 4:return ro(),Ma(t,e),null===t&&Hi(e.stateNode.containerInfo),Ya(e),null;case 10:return xs(e.type._context),Ya(e),null;case 19:if(wr(ao),null===(o=e.memoizedState))return Ya(e),null;if(i=0!==(128&e.flags),null===(l=o.rendering))if(i)Za(o,!1);else{if(0!==Fl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=lo(t))){for(e.flags|=128,Za(o,!1),null!==(i=l.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;null!==n;)t=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Sr(ao,1&ao.current|2),e.child}t=t.sibling}null!==o.tail&&Qt()>jl&&(e.flags|=128,i=!0,Za(o,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=lo(l))){if(e.flags|=128,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Za(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!rs)return Ya(e),null}else 2*Qt()-o.renderingStartTime>jl&&1073741824!==n&&(e.flags|=128,i=!0,Za(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=o.last)?n.sibling=l:e.child=l,o.last=l)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Qt(),e.sibling=null,n=ao.current,Sr(ao,i?1&n|2:1&n),e):(Ya(e),null);case 22:case 23:return ph(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!==(1&e.mode)?0!==(1073741824&Ml)&&(Ya(e),6&e.subtreeFlags&&(e.flags|=8192)):Ya(e),null;case 24:case 25:return null}throw Error(s(156,e.tag))}function Xa(t,e){switch(es(e),e.tag){case 1:return Nr(e.type)&&Mr(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return ro(),wr(Ar),wr(Cr),co(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return oo(e),null;case 13:if(wr(ao),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(s(340));ds()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return wr(ao),null;case 4:return ro(),null;case 10:return xs(e.type._context),null;case 22:case 23:return ph(),null;default:return null}}Na=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ma=function(){},Pa=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,no($s.current);var s,o=null;switch(n){case"input":r=X(t,r),i=X(t,i),o=[];break;case"select":r=k({},r,{value:void 0}),i=k({},i,{value:void 0}),o=[];break;case"textarea":r=it(t,r),i=it(t,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(t.onclick=$i)}for(c in vt(n,i),n=null,r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&null!=r[c])if("style"===c){var l=r[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var h=i[c];if(l=null!=r?r[c]:void 0,i.hasOwnProperty(c)&&h!==l&&(null!=h||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||h&&h.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in h)h.hasOwnProperty(s)&&l[s]!==h[s]&&(n||(n={}),n[s]=h[s])}else n||(o||(o=[]),o.push(c,n)),n=h;else"dangerouslySetInnerHTML"===c?(h=h?h.__html:void 0,l=l?l.__html:void 0,null!=h&&l!==h&&(o=o||[]).push(c,h)):"children"===c?"string"!==typeof h&&"number"!==typeof h||(o=o||[]).push(c,""+h):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=h&&"onScroll"===c&&Bi("scroll",t),o||l===h||(o=[])):(o=o||[]).push(c,h))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}},Fa=function(t,e,n,i){n!==i&&(e.flags|=4)};var Ka=!1,Qa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,$a=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){wh(t,e,i)}else n.current=null}function el(t,e,n){try{n()}catch(i){wh(t,e,i)}}var nl=!1;function il(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,void 0!==s&&el(e,n,s)}r=r.next}while(r!==i)}}function rl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function sl(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function ol(t){var e=t.alternate;null!==e&&(t.alternate=null,ol(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[pr],delete e[dr],delete e[mr],delete e[gr],delete e[yr])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function hl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=$i));else if(4!==i&&null!==(t=t.child))for(hl(t,e,n),t=t.sibling;null!==t;)hl(t,e,n),t=t.sibling}function cl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var ul=null,pl=!1;function dl(t,e,n){for(n=n.child;null!==n;)fl(t,e,n),n=n.sibling}function fl(t,e,n){if(se&&"function"===typeof se.onCommitFiberUnmount)try{se.onCommitFiberUnmount(re,n)}catch(a){}switch(n.tag){case 5:Qa||tl(n,e);case 6:var i=ul,r=pl;ul=null,dl(t,e,n),pl=r,null!==(ul=i)&&(pl?(t=ul,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(pl?(t=ul,n=n.stateNode,8===t.nodeType?lr(t.parentNode,n):1===t.nodeType&&lr(t,n),He(t)):lr(ul,n.stateNode));break;case 4:i=ul,r=pl,ul=n.stateNode.containerInfo,pl=!0,dl(t,e,n),ul=i,pl=r;break;case 0:case 11:case 14:case 15:if(!Qa&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,e,o),r=r.next}while(r!==i)}dl(t,e,n);break;case 1:if(!Qa&&(tl(n,e),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){wh(n,e,a)}dl(t,e,n);break;case 21:dl(t,e,n);break;case 22:1&n.mode?(Qa=(i=Qa)||null!==n.memoizedState,dl(t,e,n),Qa=i):dl(t,e,n);break;default:dl(t,e,n)}}function ml(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Ja),e.forEach((function(e){var i=Ah.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}function gl(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,pl=!1;break t;case 3:case 4:ul=l.stateNode.containerInfo,pl=!0;break t}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,r),ul=null,pl=!1;var h=r.alternate;null!==h&&(h.return=null),r.return=null}catch(c){wh(r,e,c)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)yl(e,t),e=e.sibling}function yl(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gl(e,t),vl(t),4&i){try{il(3,t,t.return),rl(3,t)}catch(g){wh(t,t.return,g)}try{il(5,t,t.return)}catch(g){wh(t,t.return,g)}}break;case 1:gl(e,t),vl(t),512&i&&null!==n&&tl(n,n.return);break;case 5:if(gl(e,t),vl(t),512&i&&null!==n&&tl(n,n.return),32&t.flags){var r=t.stateNode;try{pt(r,"")}catch(g){wh(t,t.return,g)}}if(4&i&&null!=(r=t.stateNode)){var o=t.memoizedProps,a=null!==n?n.memoizedProps:o,l=t.type,h=t.updateQueue;if(t.updateQueue=null,null!==h)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(r,o),_t(l,a);var c=_t(l,o);for(a=0;a<h.length;a+=2){var u=h[a],p=h[a+1];"style"===u?gt(r,p):"dangerouslySetInnerHTML"===u?ut(r,p):"children"===u?pt(r,p):_(r,u,p,c)}switch(l){case"input":J(r,o);break;case"textarea":st(r,o);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?nt(r,!!o.multiple,f,!1):d!==!!o.multiple&&(null!=o.defaultValue?nt(r,!!o.multiple,o.defaultValue,!0):nt(r,!!o.multiple,o.multiple?[]:"",!1))}r[dr]=o}catch(g){wh(t,t.return,g)}}break;case 6:if(gl(e,t),vl(t),4&i){if(null===t.stateNode)throw Error(s(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(g){wh(t,t.return,g)}}break;case 3:if(gl(e,t),vl(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{He(e.containerInfo)}catch(g){wh(t,t.return,g)}break;case 4:default:gl(e,t),vl(t);break;case 13:gl(e,t),vl(t),8192&(r=t.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Hl=Qt())),4&i&&ml(t);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&t.mode?(Qa=(c=Qa)||u,gl(e,t),Qa=c):gl(e,t),vl(t),8192&i){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!u&&0!==(1&t.mode))for($a=t,u=t.child;null!==u;){for(p=$a=u;null!==$a;){switch(f=(d=$a).child,d.tag){case 0:case 11:case 14:case 15:il(4,d,d.return);break;case 1:tl(d,d.return);var m=d.stateNode;if("function"===typeof m.componentWillUnmount){i=d,n=d.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){wh(i,n,g)}}break;case 5:tl(d,d.return);break;case 22:if(null!==d.memoizedState){xl(p);continue}}null!==f?(f.return=d,$a=f):xl(p)}u=u.sibling}t:for(u=null,p=t;;){if(5===p.tag){if(null===u){u=p;try{r=p.stateNode,c?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=p.stateNode,a=void 0!==(h=p.memoizedProps.style)&&null!==h&&h.hasOwnProperty("display")?h.display:null,l.style.display=mt("display",a))}catch(g){wh(t,t.return,g)}}}else if(6===p.tag){if(null===u)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(g){wh(t,t.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===t)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===t)break t;for(;null===p.sibling;){if(null===p.return||p.return===t)break t;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:gl(e,t),vl(t),4&i&&ml(t);case 21:}}function vl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(al(n)){var i=n;break t}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(pt(r,""),i.flags&=-33),cl(t,ll(t),r);break;case 3:case 4:var o=i.stateNode.containerInfo;hl(t,ll(t),o);break;default:throw Error(s(161))}}catch(a){wh(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function _l(t,e,n){$a=t,Tl(t,e,n)}function Tl(t,e,n){for(var i=0!==(1&t.mode);null!==$a;){var r=$a,s=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Ka;if(!o){var a=r.alternate,l=null!==a&&null!==a.memoizedState||Qa;a=Ka;var h=Qa;if(Ka=o,(Qa=l)&&!h)for($a=r;null!==$a;)l=(o=$a).child,22===o.tag&&null!==o.memoizedState?bl(r):null!==l?(l.return=o,$a=l):bl(r);for(;null!==s;)$a=s,Tl(s,e,n),s=s.sibling;$a=r,Ka=a,Qa=h}El(t)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,$a=s):El(t)}}function El(t){for(;null!==$a;){var e=$a;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Qa||rl(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!Qa)if(null===n)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:gs(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;null!==o&&Us(e,o,i);break;case 3:var a=e.updateQueue;if(null!==a){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Us(e,a,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var p=u.dehydrated;null!==p&&He(p)}}}break;default:throw Error(s(163))}Qa||512&e.flags&&sl(e)}catch(d){wh(e,e.return,d)}}if(e===t){$a=null;break}if(null!==(n=e.sibling)){n.return=e.return,$a=n;break}$a=e.return}}function xl(t){for(;null!==$a;){var e=$a;if(e===t){$a=null;break}var n=e.sibling;if(null!==n){n.return=e.return,$a=n;break}$a=e.return}}function bl(t){for(;null!==$a;){var e=$a;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rl(4,e)}catch(l){wh(e,n,l)}break;case 1:var i=e.stateNode;if("function"===typeof i.componentDidMount){var r=e.return;try{i.componentDidMount()}catch(l){wh(e,r,l)}}var s=e.return;try{sl(e)}catch(l){wh(e,s,l)}break;case 5:var o=e.return;try{sl(e)}catch(l){wh(e,o,l)}}}catch(l){wh(e,e.return,l)}if(e===t){$a=null;break}var a=e.sibling;if(null!==a){a.return=e.return,$a=a;break}$a=e.return}}var Il,wl=Math.ceil,Sl=T.ReactCurrentDispatcher,Rl=T.ReactCurrentOwner,Cl=T.ReactCurrentBatchConfig,Al=0,Dl=null,Ol=null,Nl=0,Ml=0,Pl=Ir(0),Fl=0,Ll=null,kl=0,Ul=0,Bl=0,zl=null,Gl=null,Hl=0,jl=1/0,Vl=null,Wl=!1,Zl=null,Yl=null,ql=!1,Xl=null,Kl=0,Ql=0,Jl=null,$l=-1,th=0;function eh(){return 0!==(6&Al)?Qt():-1!==$l?$l:$l=Qt()}function nh(t){return 0===(1&t.mode)?1:0!==(2&Al)&&0!==Nl?Nl&-Nl:null!==ms.transition?(0===th&&(th=me()),th):0!==(t=_e)?t:t=void 0===(t=window.event)?16:Ke(t.type)}function ih(t,e,n,i){if(50<Ql)throw Ql=0,Jl=null,Error(s(185));ye(t,n,i),0!==(2&Al)&&t===Dl||(t===Dl&&(0===(2&Al)&&(Ul|=n),4===Fl&&lh(t,Nl)),rh(t,i),1===n&&0===Al&&0===(1&e.mode)&&(jl=Qt()+500,Br&&Hr()))}function rh(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-oe(s),a=1<<o,l=r[o];-1===l?0!==(a&n)&&0===(a&i)||(r[o]=de(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}(t,e);var i=pe(t,t===Dl?Nl:0);if(0===i)null!==n&&qt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&qt(n),1===e)0===t.tag?function(t){Br=!0,Gr(t)}(hh.bind(null,t)):Gr(hh.bind(null,t)),or((function(){0===(6&Al)&&Hr()})),n=null;else{switch(Te(i)){case 1:n=$t;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=ie}n=Dh(n,sh.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sh(t,e){if($l=-1,th=0,0!==(6&Al))throw Error(s(327));var n=t.callbackNode;if(bh()&&t.callbackNode!==n)return null;var i=pe(t,t===Dl?Nl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||e)e=yh(t,i);else{e=i;var r=Al;Al|=2;var o=mh();for(Dl===t&&Nl===e||(Vl=null,jl=Qt()+500,dh(t,e));;)try{_h();break}catch(l){fh(t,l)}Es(),Sl.current=o,Al=r,null!==Ol?e=0:(Dl=null,Nl=0,e=Fl)}if(0!==e){if(2===e&&(0!==(r=fe(t))&&(i=r,e=oh(t,r))),1===e)throw n=Ll,dh(t,0),lh(t,i),rh(t,Qt()),n;if(6===e)lh(t,i);else{if(r=t.current.alternate,0===(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch(a){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(r)&&(2===(e=yh(t,i))&&(0!==(o=fe(t))&&(i=o,e=oh(t,o))),1===e))throw n=Ll,dh(t,0),lh(t,i),rh(t,Qt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(s(345));case 2:case 5:xh(t,Gl,Vl);break;case 3:if(lh(t,i),(130023424&i)===i&&10<(e=Hl+500-Qt())){if(0!==pe(t,0))break;if(((r=t.suspendedLanes)&i)!==i){eh(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ir(xh.bind(null,t,Gl,Vl),e);break}xh(t,Gl,Vl);break;case 4:if(lh(t,i),(4194240&i)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-oe(i);o=1<<a,(a=e[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=Qt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*wl(i/1960))-i)){t.timeoutHandle=ir(xh.bind(null,t,Gl,Vl),i);break}xh(t,Gl,Vl);break;default:throw Error(s(329))}}}return rh(t,Qt()),t.callbackNode===n?sh.bind(null,t):null}function oh(t,e){var n=zl;return t.current.memoizedState.isDehydrated&&(dh(t,e).flags|=256),2!==(t=yh(t,e))&&(e=Gl,Gl=n,null!==e&&ah(e)),t}function ah(t){null===Gl?Gl=t:Gl.push.apply(Gl,t)}function lh(t,e){for(e&=~Bl,e&=~Ul,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oe(e),i=1<<n;t[n]=-1,e&=~i}}function hh(t){if(0!==(6&Al))throw Error(s(327));bh();var e=pe(t,0);if(0===(1&e))return rh(t,Qt()),null;var n=yh(t,e);if(0!==t.tag&&2===n){var i=fe(t);0!==i&&(e=i,n=oh(t,i))}if(1===n)throw n=Ll,dh(t,0),lh(t,e),rh(t,Qt()),n;if(6===n)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xh(t,Gl,Vl),rh(t,Qt()),null}function ch(t,e){var n=Al;Al|=1;try{return t(e)}finally{0===(Al=n)&&(jl=Qt()+500,Br&&Hr())}}function uh(t){null!==Xl&&0===Xl.tag&&0===(6&Al)&&bh();var e=Al;Al|=1;var n=Cl.transition,i=_e;try{if(Cl.transition=null,_e=1,t)return t()}finally{_e=i,Cl.transition=n,0===(6&(Al=e))&&Hr()}}function ph(){Ml=Pl.current,wr(Pl)}function dh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,rr(n)),null!==Ol)for(n=Ol.return;null!==n;){var i=n;switch(es(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Mr();break;case 3:ro(),wr(Ar),wr(Cr),co();break;case 5:oo(i);break;case 4:ro();break;case 13:case 19:wr(ao);break;case 10:xs(i.type._context);break;case 22:case 23:ph()}n=n.return}if(Dl=t,Ol=t=Ph(t.current,null),Nl=Ml=e,Fl=0,Ll=null,Bl=Ul=kl=0,Gl=zl=null,null!==Ss){for(e=0;e<Ss.length;e++)if(null!==(i=(n=Ss[e]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var o=s.next;s.next=r,i.next=o}n.pending=i}Ss=null}return t}function fh(t,e){for(;;){var n=Ol;try{if(Es(),uo.current=oa,vo){for(var i=mo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}vo=!1}if(fo=0,yo=go=mo=null,_o=!1,To=0,Rl.current=null,null===n||null===n.return){Fl=1,Ll=e,Ol=null;break}t:{var o=t,a=n.return,l=n,h=e;if(e=Nl,l.flags|=32768,null!==h&&"object"===typeof h&&"function"===typeof h.then){var c=h,u=l,p=u.tag;if(0===(1&u.mode)&&(0===p||11===p||15===p)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=ya(a);if(null!==f){f.flags&=-257,va(f,a,l,0,e),1&f.mode&&ga(o,c,e),h=c;var m=(e=f).updateQueue;if(null===m){var g=new Set;g.add(h),e.updateQueue=g}else m.add(h);break t}if(0===(1&e)){ga(o,c,e),gh();break t}h=Error(s(426))}else if(rs&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,e),fs(ca(h,l));break t}}o=h=ca(h,l),4!==Fl&&(Fl=2),null===zl?zl=[o]:zl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e,Ls(o,fa(0,h,e));break t;case 1:l=h;var v=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Yl||!Yl.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e,Ls(o,ma(o,l,e));break t}}o=o.return}while(null!==o)}Eh(n)}catch(T){e=T,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function mh(){var t=Sl.current;return Sl.current=oa,null===t?oa:t}function gh(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Dl||0===(268435455&kl)&&0===(268435455&Ul)||lh(Dl,Nl)}function yh(t,e){var n=Al;Al|=2;var i=mh();for(Dl===t&&Nl===e||(Vl=null,dh(t,e));;)try{vh();break}catch(r){fh(t,r)}if(Es(),Al=n,Sl.current=i,null!==Ol)throw Error(s(261));return Dl=null,Nl=0,Fl}function vh(){for(;null!==Ol;)Th(Ol)}function _h(){for(;null!==Ol&&!Xt();)Th(Ol)}function Th(t){var e=Il(t.alternate,t,Ml);t.memoizedProps=t.pendingProps,null===e?Eh(t):Ol=e,Rl.current=null}function Eh(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=qa(n,e,Ml)))return void(Ol=n)}else{if(null!==(n=Xa(n,e)))return n.flags&=32767,void(Ol=n);if(null===t)return Fl=6,void(Ol=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Ol=e);Ol=e=t}while(null!==e);0===Fl&&(Fl=5)}function xh(t,e,n){var i=_e,r=Cl.transition;try{Cl.transition=null,_e=1,function(t,e,n,i){do{bh()}while(null!==Xl);if(0!==(6&Al))throw Error(s(327));n=t.finishedWork;var r=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-oe(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}(t,o),t===Dl&&(Ol=Dl=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Dh(ee,(function(){return bh(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=_e;_e=1;var l=Al;Al|=4,Rl.current=null,function(t,e){if(tr=Ve,di(t=pi())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(E){n=null;break t}var a=0,l=-1,h=-1,c=0,u=0,p=t,d=null;e:for(;;){for(var f;p!==n||0!==r&&3!==p.nodeType||(l=a+r),p!==o||0!==i&&3!==p.nodeType||(h=a+i),3===p.nodeType&&(a+=p.nodeValue.length),null!==(f=p.firstChild);)d=p,p=f;for(;;){if(p===t)break e;if(d===n&&++c===r&&(l=a),d===o&&++u===i&&(h=a),null!==(f=p.nextSibling))break;d=(p=d).parentNode}p=f}n=-1===l||-1===h?null:{start:l,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(er={focusedElem:t,selectionRange:n},Ve=!1,$a=e;null!==$a;)if(t=(e=$a).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,$a=t;else for(;null!==$a;){e=$a;try{var m=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:gs(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=e.stateNode.containerInfo;1===T.nodeType?T.textContent="":9===T.nodeType&&T.documentElement&&T.removeChild(T.documentElement);break;default:throw Error(s(163))}}catch(E){wh(e,e.return,E)}if(null!==(t=e.sibling)){t.return=e.return,$a=t;break}$a=e.return}m=nl,nl=!1}(t,n),yl(n,t),fi(er),Ve=!!tr,er=tr=null,t.current=n,_l(n,t,r),Kt(),Al=l,_e=a,Cl.transition=o}else t.current=n;if(ql&&(ql=!1,Xl=t,Kl=r),o=t.pendingLanes,0===o&&(Yl=null),function(t){if(se&&"function"===typeof se.onCommitFiberRoot)try{se.onCommitFiberRoot(re,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),rh(t,Qt()),null!==e)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,t=Zl,Zl=null,t;0!==(1&Kl)&&0!==t.tag&&bh(),o=t.pendingLanes,0!==(1&o)?t===Jl?Ql++:(Ql=0,Jl=t):Ql=0,Hr()}(t,e,n,i)}finally{Cl.transition=r,_e=i}return null}function bh(){if(null!==Xl){var t=Te(Kl),e=Cl.transition,n=_e;try{if(Cl.transition=null,_e=16>t?16:t,null===Xl)var i=!1;else{if(t=Xl,Xl=null,Kl=0,0!==(6&Al))throw Error(s(331));var r=Al;for(Al|=4,$a=t.current;null!==$a;){var o=$a,a=o.child;if(0!==(16&$a.flags)){var l=o.deletions;if(null!==l){for(var h=0;h<l.length;h++){var c=l[h];for($a=c;null!==$a;){var u=$a;switch(u.tag){case 0:case 11:case 15:il(8,u,o)}var p=u.child;if(null!==p)p.return=u,$a=p;else for(;null!==$a;){var d=(u=$a).sibling,f=u.return;if(ol(u),u===c){$a=null;break}if(null!==d){d.return=f,$a=d;break}$a=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}$a=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,$a=a;else t:for(;null!==$a;){if(0!==(2048&(o=$a).flags))switch(o.tag){case 0:case 11:case 15:il(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,$a=v;break t}$a=o.return}}var _=t.current;for($a=_;null!==$a;){var T=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==T)T.return=a,$a=T;else t:for(a=_;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){wh(l,l.return,x)}if(l===a){$a=null;break t}var E=l.sibling;if(null!==E){E.return=l.return,$a=E;break t}$a=l.return}}if(Al=r,Hr(),se&&"function"===typeof se.onPostCommitFiberRoot)try{se.onPostCommitFiberRoot(re,t)}catch(x){}i=!0}return i}finally{_e=n,Cl.transition=e}}return!1}function Ih(t,e,n){t=Ps(t,e=fa(0,e=ca(n,e),1),1),e=eh(),null!==t&&(ye(t,1,e),rh(t,e))}function wh(t,e,n){if(3===t.tag)Ih(t,t,n);else for(;null!==e;){if(3===e.tag){Ih(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Yl||!Yl.has(i))){e=Ps(e,t=ma(e,t=ca(n,t),1),1),t=eh(),null!==e&&(ye(e,1,t),rh(e,t));break}}e=e.return}}function Sh(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=eh(),t.pingedLanes|=t.suspendedLanes&n,Dl===t&&(Nl&n)===n&&(4===Fl||3===Fl&&(130023424&Nl)===Nl&&500>Qt()-Hl?dh(t,0):Bl|=n),rh(t,e)}function Rh(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ce,0===(130023424&(ce<<=1))&&(ce=4194304)));var n=eh();null!==(t=As(t,e))&&(ye(t,e,n),rh(t,n))}function Ch(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Rh(t,n)}function Ah(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(e),Rh(t,n)}function Dh(t,e){return Yt(t,e)}function Oh(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nh(t,e,n,i){return new Oh(t,e,n,i)}function Mh(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Ph(t,e){var n=t.alternate;return null===n?((n=Nh(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fh(t,e,n,i,r,o){var a=2;if(i=t,"function"===typeof t)Mh(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case b:return Lh(n.children,r,o,e);case I:a=8,r|=8;break;case w:return(t=Nh(12,n,e,2|r)).elementType=w,t.lanes=o,t;case A:return(t=Nh(13,n,e,r)).elementType=A,t.lanes=o,t;case D:return(t=Nh(19,n,e,r)).elementType=D,t.lanes=o,t;case M:return kh(n,r,o,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case S:a=10;break t;case R:a=9;break t;case C:a=11;break t;case O:a=14;break t;case N:a=16,i=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Nh(a,n,e,r)).elementType=t,e.type=i,e.lanes=o,e}function Lh(t,e,n,i){return(t=Nh(7,t,i,e)).lanes=n,t}function kh(t,e,n,i){return(t=Nh(22,t,i,e)).elementType=M,t.lanes=n,t.stateNode={isHidden:!1},t}function Uh(t,e,n){return(t=Nh(6,t,null,e)).lanes=n,t}function Bh(t,e,n){return(e=Nh(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zh(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Gh(t,e,n,i,r,s,o,a,l){return t=new zh(t,e,n,a,l),1===e?(e=1,!0===s&&(e|=8)):e=0,s=Nh(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Os(s),t}function Hh(t){if(!t)return Rr;t:{if(Ht(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Nr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(s(171))}if(1===t.tag){var n=t.type;if(Nr(n))return Fr(t,n,e)}return e}function jh(t,e,n,i,r,s,o,a,l){return(t=Gh(n,i,!0,t,0,s,0,a,l)).context=Hh(null),n=t.current,(s=Ms(i=eh(),r=nh(n))).callback=void 0!==e&&null!==e?e:null,Ps(n,s,r),t.current.lanes=r,ye(t,r,i),rh(t,i),t}function Vh(t,e,n,i){var r=e.current,s=eh(),o=nh(r);return n=Hh(n),null===e.context?e.context=n:e.pendingContext=n,(e=Ms(s,o)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),null!==(t=Ps(r,e,o))&&(ih(t,r,o,s),Fs(t,r,o)),o}function Wh(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Zh(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Yh(t,e){Zh(t,e),(t=t.alternate)&&Zh(t,e)}Il=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ar.current)Ta=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return Ta=!1,function(t,e,n){switch(e.tag){case 3:Da(e),ds();break;case 5:so(e);break;case 1:Nr(e.type)&&Lr(e);break;case 4:io(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Sr(ys,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=e.memoizedState))return null!==i.dehydrated?(Sr(ao,1&ao.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Ua(t,e,n):(Sr(ao,1&ao.current),null!==(t=Wa(t,e,n))?t.sibling:null);Sr(ao,1&ao.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(128&t.flags)){if(i)return ja(t,e,n);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Sr(ao,ao.current),i)break;return null;case 22:case 23:return e.lanes=0,wa(t,e,n)}return Wa(t,e,n)}(t,e,n);Ta=0!==(131072&t.flags)}else Ta=!1,rs&&0!==(1048576&e.flags)&&$r(e,Zr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Va(t,e),t=e.pendingProps;var r=Or(e,Cr.current);Is(e,n),r=Io(null,e,i,t,r,n);var o=wo();return e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nr(i)?(o=!0,Lr(e)):o=!1,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Os(e),r.updater=Gs,e.stateNode=r,r._reactInternals=e,Ws(e,i,t,n),e=Aa(null,e,i,!0,o,n)):(e.tag=0,rs&&o&&ts(e),Ea(null,e,r,n),e=e.child),e;case 16:i=e.elementType;t:{switch(Va(t,e),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"===typeof t)return Mh(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===C)return 11;if(t===O)return 14}return 2}(i),t=gs(i,t),r){case 0:e=Ra(null,e,i,t,n);break t;case 1:e=Ca(null,e,i,t,n);break t;case 11:e=xa(null,e,i,t,n);break t;case 14:e=ba(null,e,i,gs(i.type,t),n);break t}throw Error(s(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,Ra(t,e,i,r=e.elementType===i?r:gs(i,r),n);case 1:return i=e.type,r=e.pendingProps,Ca(t,e,i,r=e.elementType===i?r:gs(i,r),n);case 3:t:{if(Da(e),null===t)throw Error(s(387));i=e.pendingProps,r=(o=e.memoizedState).element,Ns(t,e),ks(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,256&e.flags){e=Oa(t,e,i,n,r=ca(Error(s(423)),e));break t}if(i!==r){e=Oa(t,e,i,n,r=ca(Error(s(424)),e));break t}for(is=hr(e.stateNode.containerInfo.firstChild),ns=e,rs=!0,ss=null,n=Qs(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ds(),i===r){e=Wa(t,e,n);break t}Ea(t,e,i,n)}e=e.child}return e;case 5:return so(e),null===t&&hs(e),i=e.type,r=e.pendingProps,o=null!==t?t.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==o&&nr(i,o)&&(e.flags|=32),Sa(t,e),Ea(t,e,a,n),e.child;case 6:return null===t&&hs(e),null;case 13:return Ua(t,e,n);case 4:return io(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=Ks(e,null,i,n):Ea(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,xa(t,e,i,r=e.elementType===i?r:gs(i,r),n);case 7:return Ea(t,e,e.pendingProps,n),e.child;case 8:case 12:return Ea(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,Sr(ys,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===r.children&&!Ar.current){e=Wa(t,e,n);break t}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var h=l.firstContext;null!==h;){if(h.context===i){if(1===o.tag){(h=Ms(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?h.next=h:(h.next=u.next,u.next=h),c.pending=h}}o.lanes|=n,null!==(h=o.alternate)&&(h.lanes|=n),bs(o.return,n,e),l.lanes|=n;break}h=h.next}}else if(10===o.tag)a=o.type===e.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),bs(a,n,e),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Ea(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Is(e,n),i=i(r=ws(r)),e.flags|=1,Ea(t,e,i,n),e.child;case 14:return r=gs(i=e.type,e.pendingProps),ba(t,e,i,r=gs(i.type,r),n);case 15:return Ia(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:gs(i,r),Va(t,e),e.tag=1,Nr(i)?(t=!0,Lr(e)):t=!1,Is(e,n),js(e,i,r),Ws(e,i,r,n),Aa(null,e,i,!0,t,n);case 19:return ja(t,e,n);case 22:return wa(t,e,n)}throw Error(s(156,e.tag))};var qh="function"===typeof reportError?reportError:function(t){console.error(t)};function Xh(t){this._internalRoot=t}function Kh(t){this._internalRoot=t}function Qh(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Jh(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function $h(){}function tc(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof r){var a=r;r=function(){var t=Wh(o);a.call(t)}}Vh(e,o,t,r)}else o=function(t,e,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var t=Wh(o);s.call(t)}}var o=jh(e,i,t,0,null,!1,0,"",$h);return t._reactRootContainer=o,t[fr]=o.current,Hi(8===t.nodeType?t.parentNode:t),uh(),o}for(;r=t.lastChild;)t.removeChild(r);if("function"===typeof i){var a=i;i=function(){var t=Wh(l);a.call(t)}}var l=Gh(t,0,!1,null,0,!1,0,"",$h);return t._reactRootContainer=l,t[fr]=l.current,Hi(8===t.nodeType?t.parentNode:t),uh((function(){Vh(e,l,n,i)})),l}(n,e,t,r,i);return Wh(o)}Kh.prototype.render=Xh.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(s(409));Vh(t,e,null,null)},Kh.prototype.unmount=Xh.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;uh((function(){Vh(null,t,null,null)})),e[fr]=null}},Kh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ie();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Me.length&&0!==e&&e<Me[n].priority;n++);Me.splice(n,0,t),0===n&&ke(t)}},Ee=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ue(e.pendingLanes);0!==n&&(ve(e,1|n),rh(e,Qt()),0===(6&Al)&&(jl=Qt()+500,Hr()))}break;case 13:uh((function(){var e=As(t,1);if(null!==e){var n=eh();ih(e,t,1,n)}})),Yh(t,1)}},xe=function(t){if(13===t.tag){var e=As(t,134217728);if(null!==e)ih(e,t,134217728,eh());Yh(t,134217728)}},be=function(t){if(13===t.tag){var e=nh(t),n=As(t,e);if(null!==n)ih(n,t,e,eh());Yh(t,e)}},Ie=function(){return _e},we=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}},xt=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Er(i);if(!r)throw Error(s(90));Y(i),J(i,r)}}}break;case"textarea":st(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Ct=ch,At=uh;var ec={usingClientEntryPoint:!1,Events:[_r,Tr,Er,St,Rt,ch]},nc={findFiberByHostInstance:vr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ic={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Wt(t))?null:t.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{re=rc.inject(ic),se=rc}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qh(e))throw Error(s(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Qh(t))throw Error(s(299));var n=!1,i="",r=qh;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(r=e.onRecoverableError)),e=Gh(t,1,!1,null,0,n,0,i,r),t[fr]=e.current,Hi(8===t.nodeType?t.parentNode:t),new Xh(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw t=Object.keys(t).join(","),Error(s(268,t))}return t=null===(t=Wt(e))?null:t.stateNode},e.flushSync=function(t){return uh(t)},e.hydrate=function(t,e,n){if(!Jh(e))throw Error(s(200));return tc(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Qh(t))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",a=qh;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),e=jh(e,null,t,1,null!=n?n:null,r,0,o,a),t[fr]=e.current,Hi(t),i)for(t=0;t<i.length;t++)r=(r=(n=i[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Kh(e)},e.render=function(t,e,n){if(!Jh(e))throw Error(s(200));return tc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Jh(t))throw Error(s(40));return!!t._reactRootContainer&&(uh((function(){tc(null,null,t,!1,(function(){t._reactRootContainer=null,t[fr]=null}))})),!0)},e.unstable_batchedUpdates=ch,e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Jh(n))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return tc(t,e,n,!1,i)},e.version="18.2.0-next-9e3b772b8-20220608"},1739:(t,e,n)=>{"use strict";var i=n(1168);e.createRoot=i.createRoot,e.hydrateRoot=i.hydrateRoot},1168:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(534)},5918:(t,e,n)=>{"use strict";var i=n(7313),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(t,e,n){var i,s={},h=null,c=null;for(i in void 0!==n&&(h=""+n),void 0!==e.key&&(h=""+e.key),void 0!==e.ref&&(c=e.ref),e)o.call(e,i)&&!l.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===s[i]&&(s[i]=e[i]);return{$$typeof:r,type:t,key:h,ref:c,props:s,_owner:a.current}}e.Fragment=s,e.jsx=h,e.jsxs=h},306:(t,e)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),d=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||f}function v(){}function _(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var T=_.prototype=new v;T.constructor=_,m(T,y.prototype),T.isPureReactComponent=!0;var E=Array.isArray,x=Object.prototype.hasOwnProperty,b={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function w(t,e,i){var r,s={},o=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)x.call(e,r)&&!I.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var h=Array(l),c=0;c<l;c++)h[c]=arguments[c+2];s.children=h}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:t,key:o,ref:a,props:s,_owner:b.current}}function S(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var R=/\/+/g;function C(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function A(t,e,r,s,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=t),t=""===s?"."+C(l,0):s,E(o)?(r="",null!=t&&(r=t.replace(R,"$&/")+"/"),A(o,e,r,"",(function(t){return t}))):null!=o&&(S(o)&&(o=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(R,"$&/")+"/")+t)),e.push(o)),1;if(l=0,s=""===s?".":s+":",E(t))for(var h=0;h<t.length;h++){var c=s+C(a=t[h],h);l+=A(a,e,r,c,o)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=d&&t[d]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),h=0;!(a=t.next()).done;)l+=A(a=a.value,e,r,c=s+C(a,h++),o);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function D(t,e,n){if(null==t)return t;var i=[],r=0;return A(t,i,"","",(function(t){return e.call(n,t,r++)})),i}function O(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var N={current:null},M={transition:null},P={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:M,ReactCurrentOwner:b};e.Children={map:D,forEach:function(t,e,n){D(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return D(t,(function(){e++})),e},toArray:function(t){return D(t,(function(t){return t}))||[]},only:function(t){if(!S(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=r,e.Profiler=o,e.PureComponent=_,e.StrictMode=s,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=m({},t.props),s=t.key,o=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,a=b.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(h in e)x.call(e,h)&&!I.hasOwnProperty(h)&&(r[h]=void 0===e[h]&&void 0!==l?l[h]:e[h])}var h=arguments.length-2;if(1===h)r.children=i;else if(1<h){l=Array(h);for(var c=0;c<h;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:n,type:t.type,key:s,ref:o,props:r,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=w,e.createFactory=function(t){var e=w.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:h,render:t}},e.isValidElement=S,e.lazy=function(t){return{$$typeof:p,_payload:{_status:-1,_result:t},_init:O}},e.memo=function(t,e){return{$$typeof:u,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=M.transition;M.transition={};try{t()}finally{M.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return N.current.useCallback(t,e)},e.useContext=function(t){return N.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return N.current.useDeferredValue(t)},e.useEffect=function(t,e){return N.current.useEffect(t,e)},e.useId=function(){return N.current.useId()},e.useImperativeHandle=function(t,e,n){return N.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return N.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return N.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return N.current.useMemo(t,e)},e.useReducer=function(t,e,n){return N.current.useReducer(t,e,n)},e.useRef=function(t){return N.current.useRef(t)},e.useState=function(t){return N.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return N.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return N.current.useTransition()},e.version="18.2.0"},7313:(t,e,n)=>{"use strict";t.exports=n(306)},6417:(t,e,n)=>{"use strict";t.exports=n(5918)},3095:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<s(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=t[a],h=a+1,c=t[h];if(0>s(l,n))h<r&&0>s(c,l)?(t[i]=c,t[h]=n,i=h):(t[i]=l,t[a]=n,i=a);else{if(!(h<r&&0>s(c,n)))break t;t[i]=c,t[h]=n,i=h}}}return e}function s(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var h=[],c=[],u=1,p=null,d=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function T(t){for(var e=i(c);null!==e;){if(null===e.callback)r(c);else{if(!(e.startTime<=t))break;r(c),e.sortIndex=e.expirationTime,n(h,e)}e=i(c)}}function E(t){if(g=!1,T(t),!m)if(null!==i(h))m=!0,M(x);else{var e=i(c);null!==e&&P(E,e.startTime-t)}}function x(t,n){m=!1,g&&(g=!1,v(S),S=-1),f=!0;var s=d;try{for(T(n),p=i(h);null!==p&&(!(p.expirationTime>n)||t&&!A());){var o=p.callback;if("function"===typeof o){p.callback=null,d=p.priorityLevel;var a=o(p.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?p.callback=a:p===i(h)&&r(h),T(n)}else r(h);p=i(h)}if(null!==p)var l=!0;else{var u=i(c);null!==u&&P(E,u.startTime-n),l=!1}return l}finally{p=null,d=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var b,I=!1,w=null,S=-1,R=5,C=-1;function A(){return!(e.unstable_now()-C<R)}function D(){if(null!==w){var t=e.unstable_now();C=t;var n=!0;try{n=w(!0,t)}finally{n?b():(I=!1,w=null)}}else I=!1}if("function"===typeof _)b=function(){_(D)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,N=O.port2;O.port1.onmessage=D,b=function(){N.postMessage(null)}}else b=function(){y(D,0)};function M(t){w=t,I||(I=!0,b())}function P(t,n){S=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,M(x))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return i(h)},e.unstable_next=function(t){switch(d){case 1:case 2:case 3:var e=3;break;default:e=d}var n=d;d=e;try{return t()}finally{d=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=d;d=t;try{return e()}finally{d=n}},e.unstable_scheduleCallback=function(t,r,s){var o=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:u++,callback:r,priorityLevel:t,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(t.sortIndex=s,n(c,t),null===i(h)&&t===i(c)&&(g?(v(S),S=-1):g=!0,P(E,s-o))):(t.sortIndex=a,n(h,t),m||f||(m=!0,M(x))),t},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(t){var e=d;return function(){var n=d;d=e;try{return t.apply(this,arguments)}finally{d=n}}}},2224:(t,e,n)=>{"use strict";t.exports=n(3095)},3284:function(t){var e,n;e=this,n=function(){var t="",e=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function n(t){return t.match(e)||[]}function i(e){return{language:(e=n(e))[1]||t,extlang:e[2]||t,script:e[3]||t,region:e[4]||t}}function r(t,e,n){Object.defineProperty(t,e,{value:n,enumerable:!0})}function s(e,s,o){function a(i){return n(i)[e]||t}r(a,"pattern",s),r(i,o,a)}return s(1,/^[a-zA-Z]{2,3}$/,"language"),s(2,/^[a-zA-Z]{3}$/,"extlang"),s(3,/^[a-zA-Z]{4}$/,"script"),s(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),r(i,"split",(function(t){return n(t).filter((function(t,e){return t&&e}))})),i},t.exports?t.exports=n():e.subtag=n()},3215:(t,e,n)=>{"use strict";var i=n(1009);t.exports=i,"undefined"!==typeof window&&(window.Suggestions=i)},908:t=>{"use strict";var e=function(t){return this.component=t,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};e.prototype.show=function(){this.element.style.display="block"},e.prototype.hide=function(){this.element.style.display="none"},e.prototype.add=function(t){this.items.push(t)},e.prototype.clear=function(){this.items=[],this.active=0},e.prototype.isEmpty=function(){return!this.items.length},e.prototype.isVisible=function(){return"block"===this.element.style.display},e.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()}else this.hide()},e.prototype.drawItem=function(t,e){var n=document.createElement("li"),i=document.createElement("a");e&&(n.className+=" active"),i.innerHTML=t.string,n.appendChild(i),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,t)}.bind(this))},e.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()},e.prototype.move=function(t){this.active=t,this.draw()},e.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},e.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},e.prototype.drawError=function(t){var e=document.createElement("li");e.innerHTML=t,this.element.appendChild(e),this.show()},t.exports=e},1009:(t,e,n)=>{"use strict";var i=n(5307),r=n(1507),s=n(908),o=function(t,e,n){return n=n||{},this.options=i({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=t,this.data=e||[],this.list=new s(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(t){this.handleKeyUp(t.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(t){this.handleKeyDown(t)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(t){this.handlePaste(t)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};o.prototype.handleKeyUp=function(t){40!==t&&38!==t&&27!==t&&13!==t&&9!==t&&this.handleInputChange(this.el.value)},o.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},o.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},o.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout((function(){e.handleInputChange(t.target.value)}),100)}},o.prototype.handleInputChange=function(t){this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(t){for(var e=0;e<t.length&&(this.list.add(t[e]),e!==this.options.limit-1);e++);this.list.draw()}.bind(this))},o.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},o.prototype.update=function(t){this.data=t,this.handleKeyUp()},o.prototype.clear=function(){this.data=[],this.list.clear()},o.prototype.normalize=function(t){return t=t.toLowerCase()},o.prototype.match=function(t,e){return t.indexOf(e)>-1},o.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")},o.prototype.getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:function(t){return this.getItemValue(t)}.bind(this)};t(this.options.filter?r.filter(this.query,this.data,e).map(function(t){return{original:t.original,string:this.render(t.original,t.string)}}.bind(this)):this.data.map(function(t){return{original:t,string:this.render(t)}}.bind(this)))},o.prototype.getItemValue=function(t){return t},o.prototype.render=function(t,e){if(e)return e;for(var n=t.original?this.getItemValue(t.original):this.getItemValue(t),i=this.normalize(n),r=i.lastIndexOf(this.query);r>-1;){var s=r+this.query.length;n=n.slice(0,r)+"<strong>"+n.slice(r,s)+"</strong>"+n.slice(s),r=i.slice(0,r).lastIndexOf(this.query)}return n},o.prototype.renderError=function(t){this.list.drawError(t)},t.exports=o},1018:(t,e,n)=>{"use strict";function i(t){return t.arrayBuffer?t.arrayBuffer():new Promise(((e,n)=>{const i=new FileReader;i.addEventListener("loadend",(()=>{e(i.result)})),i.addEventListener("error",n),i.readAsArrayBuffer(t)}))}async function r(t){const e=await i(t);return new Uint8Array(e)}function s(t){return"undefined"!==typeof Blob&&t instanceof Blob}function o(t){return"undefined"!==typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer}n.d(e,{Ri:()=>nt}),t=n.hmd(t);const a="undefined"!==typeof process&&process.versions&&"undefined"!==typeof process.versions.node&&"undefined"===typeof process.versions.electron;class l{constructor(t){this.typedArray=t instanceof ArrayBuffer||o(t)?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}async getLength(){return this.typedArray.byteLength}async read(t,e){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+t,e)}}class h{constructor(t){this.blob=t}async getLength(){return this.blob.size}async read(t,e){const n=this.blob.slice(t,t+e),r=await i(n);return new Uint8Array(r)}async sliceAsBlob(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.blob.slice(t,t+e,n)}}function c(t,e){var n=t.length;if(e<=n)return t;var i=new Uint8Array(Math.max(n<<1,e));return i.set(t,0),i}function u(t,e,n,i,r,s){for(var o=g,a=v,l=0;l<n;){var h=t[a(i,r)&e];r+=15&h;var c=h>>>4;if(c<=15)s[l]=c,l++;else{var u=0,p=0;16==c?(p=3+o(i,r,2),r+=2,u=s[l-1]):17==c?(p=3+o(i,r,3),r+=3):18==c&&(p=11+o(i,r,7),r+=7);for(var d=l+p;l<d;)s[l]=u,l++}}return r}function p(t,e,n,i){for(var r=0,s=0,o=i.length>>>1;s<n;){var a=t[s+e];i[s<<1]=0,i[1+(s<<1)]=a,a>r&&(r=a),s++}for(;s<o;)i[s<<1]=0,i[1+(s<<1)]=0,s++;return r}function d(t,e){for(var n,i,r,s,o=t.length,a=_.bl_count,l=0;l<=e;l++)a[l]=0;for(l=1;l<o;l+=2)a[t[l]]++;var h=_.next_code;for(n=0,a[0]=0,i=1;i<=e;i++)n=n+a[i-1]<<1,h[i]=n;for(r=0;r<o;r+=2)0!=(s=t[r+1])&&(t[r]=h[s],h[s]++)}function f(t,e,n){for(var i=t.length,r=_.rev15,s=0;s<i;s+=2)if(0!=t[s+1])for(var o=s>>1,a=t[s+1],l=o<<4|a,h=e-a,c=t[s]<<h,u=c+(1<<h);c!=u;){n[r[c]>>>15-e]=l,c++}}function m(t,e){for(var n=_.rev15,i=15-e,r=0;r<t.length;r+=2){var s=t[r]<<e-t[r+1];t[r]=n[s]>>>i}}function g(t,e,n){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<n)-1}function y(t,e,n){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<n)-1}function v(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)}const _=function(){var t=Uint16Array,e=Uint32Array;return{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new e(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new e(286),dhst:new e(30),ihst:new e(19),lits:new e(15e3),strt:new t(65536),prev:new t(32768)}}();!function(){for(var t=0;t<32768;t++){var e=t;e=(4278255360&(e=(4042322160&(e=(3435973836&(e=(2863311530&e)>>>1|(1431655765&e)<<1))>>>2|(858993459&e)<<2))>>>4|(252645135&e)<<4))>>>8|(16711935&e)<<8,_.rev15[t]=(e>>>16|e<<16)>>>17}function n(t,e,n){for(;0!=e--;)t.push(0,n)}for(t=0;t<32;t++)_.ldef[t]=_.of0[t]<<3|_.exb[t],_.ddef[t]=_.df0[t]<<4|_.dxb[t];n(_.fltree,144,8),n(_.fltree,112,9),n(_.fltree,24,7),n(_.fltree,8,8),d(_.fltree,9),f(_.fltree,9,_.flmap),m(_.fltree,9),n(_.fdtree,32,5),d(_.fdtree,5),f(_.fdtree,5,_.fdmap),m(_.fdtree,5),n(_.itree,19,0),n(_.ltree,286,0),n(_.dtree,30,0),n(_.ttree,320,0)}();const T={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var n=e,i=0;i<8;i++)1&n?n=3988292384^n>>>1:n>>>=1;t[e]=n}return t}(),update:function(t,e,n,i){for(var r=0;r<i;r++)t=T.table[255&(t^e[n+r])]^t>>>8;return t},crc:function(t,e,n){return 4294967295^T.update(4294967295,t,e,n)}};function E(t,e){return function(t,e){var n=Uint8Array;if(3==t[0]&&0==t[1])return e||new n(0);var i=y,r=g,s=u,o=v,a=null==e;a&&(e=new n(t.length>>>2<<3));for(var l,h,m=0,T=0,E=0,x=0,b=0,I=0,w=0,S=0,R=0;0==m;)if(m=i(t,R,1),T=i(t,R+1,2),R+=3,0!=T){if(a&&(e=c(e,S+(1<<17))),1==T&&(l=_.flmap,h=_.fdmap,I=511,w=31),2==T){E=r(t,R,5)+257,x=r(t,R+5,5)+1,b=r(t,R+10,4)+4,R+=14;for(var C=0;C<38;C+=2)_.itree[C]=0,_.itree[C+1]=0;var A=1;for(C=0;C<b;C++){var D=r(t,R+3*C,3);_.itree[1+(_.ordr[C]<<1)]=D,D>A&&(A=D)}R+=3*b,d(_.itree,A),f(_.itree,A,_.imap),l=_.lmap,h=_.dmap,R=s(_.imap,(1<<A)-1,E+x,t,R,_.ttree);var O=p(_.ttree,0,E,_.ltree);I=(1<<O)-1;var N=p(_.ttree,E,x,_.dtree);w=(1<<N)-1,d(_.ltree,O),f(_.ltree,O,l),d(_.dtree,N),f(_.dtree,N,h)}for(;;){var M=l[o(t,R)&I];R+=15&M;var P=M>>>4;if(P>>>8==0)e[S++]=P;else{if(256==P)break;var F=S+P-254;if(P>264){var L=_.ldef[P-257];F=S+(L>>>3)+r(t,R,7&L),R+=7&L}var k=h[o(t,R)&w];R+=15&k;var U=k>>>4,B=_.ddef[U],z=(B>>>4)+i(t,R,15&B);for(R+=15&B,a&&(e=c(e,S+(1<<17)));S<F;)e[S]=e[S++-z],e[S]=e[S++-z],e[S]=e[S++-z],e[S]=e[S++-z];S=F}}}else{0!=(7&R)&&(R+=8-(7&R));var G=4+(R>>>3),H=t[G-4]|t[G-3]<<8;a&&(e=c(e,S+H)),e.set(new n(t.buffer,t.byteOffset+G,H),S),R=G+H<<3,S+=H}return e.length==S?e:e.slice(0,S)}(t,e)}const x={numWorkers:1,workerURL:"",useWorkers:!1};let b=0,I=0,w=!0;const S=[],R=[],C=[],A=new Map;function D(t){M(t.target);const{id:e,error:n,data:i}=t.data,r=A.get(e);A.delete(e),n?r.reject(n):r.resolve(i)}function O(t){return new Promise(((e,n)=>{const i=new Worker(t);i.onmessage=t=>{"start"===t.data?(i.onerror=void 0,i.onmessage=void 0,e(i)):n(new Error("unexpected message: ".concat(t.data)))},i.onerror=n}))}const N=function(){if(a){const{Worker:i}=(n="worker_threads",(e=t).require?e.require(n):{});return{createWorker:async t=>new i(t),addEventListener(t,e){t.on("message",(n=>{e({target:t,data:n})}))},async terminate(t){await t.terminate()}}}return{async createWorker(t){try{return await O(t)}catch(n){console.warn("could not load worker:",t)}let e;try{const n=await fetch(t,{mode:"cors"});if(!n.ok)throw new Error("could not load: ".concat(t));e=await n.text(),t=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));const i=await O(t);return x.workerURL=t,i}catch(n){console.warn("could not load worker via fetch:",t)}if(void 0!==e)try{t="data:application/javascript;base64,".concat(btoa(e));const n=await O(t);return x.workerURL=t,n}catch(n){console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(t,e){t.addEventListener("message",e)},async terminate(t){t.terminate()}};var e,n}();function M(t){R.push(t),F()}function P(t,e,n,i){const r=new Uint8Array(e);E(t,r),i(n?new Blob([r],{type:n}):r.buffer)}async function F(){if(0!==C.length){if(x.useWorkers&&w){const t=await async function(){if(0===R.length&&I<x.numWorkers){++I;try{const t=await N.createWorker(x.workerURL);S.push(t),R.push(t),N.addEventListener(t,D)}catch(t){w=!1}}return R.pop()}();if(w){if(t){if(0===C.length)return void M(t);const{id:e,src:n,uncompressedSize:i,type:r,resolve:s,reject:o}=C.shift();A.set(e,{id:e,resolve:s,reject:o});const a=[];t.postMessage({type:"inflate",data:{id:e,type:r,src:n,uncompressedSize:i}},a)}return}}for(;C.length;){const{src:t,uncompressedSize:e,type:n,resolve:i}=C.shift();let o=t;s(t)&&(o=await r(t)),P(o,e,n,i)}}}function L(t,e,n){return new Promise(((i,r)=>{C.push({src:t,uncompressedSize:e,type:n,resolve:i,reject:r,id:b++}),F()}))}class k{constructor(t,e){var n,i;this._reader=t,this._rawEntry=e,this.name=e.name,this.nameBytes=e.nameBytes,this.size=e.uncompressedSize,this.compressedSize=e.compressedSize,this.comment=e.comment,this.commentBytes=e.commentBytes,this.compressionMethod=e.compressionMethod,this.lastModDate=(n=e.lastModFileDate,i=e.lastModFileTime,new Date(1980+(n>>9&127),(n>>5&15)-1,31&n,i>>11&31,i>>5&63,2*(31&i),0)),this.isDirectory=0===e.uncompressedSize&&e.name.endsWith("/"),this.encrypted=!!(1&e.generalPurposeBitFlag),this.externalFileAttributes=e.externalFileAttributes,this.versionMadeBy=e.versionMadeBy}async blob(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/octet-stream";return await async function(t,e,n){const{decompress:i,fileDataStart:r}=await tt(t,e);if(!i){const i=await j(t,r,e.compressedSize,n);return s(i)?i:new Blob([o(i.buffer)?new Uint8Array(i):i],{type:n})}const a=await j(t,r,e.compressedSize),l=await L(a,e.uncompressedSize,n);return l}(this._reader,this._rawEntry,t)}async arrayBuffer(){return await async function(t,e){const{decompress:n,fileDataStart:i}=await tt(t,e);if(!n){const n=await H(t,i,e.compressedSize);return 0===(r=n).byteOffset&&r.byteLength===r.buffer.byteLength?n.buffer:n.slice().buffer}var r;const s=await j(t,i,e.compressedSize);return await L(s,e.uncompressedSize)}(this._reader,this._rawEntry)}async text(){const t=await this.arrayBuffer();return X(new Uint8Array(t))}async json(){const t=await this.text();return JSON.parse(t)}}const U=22,B=65535,z=101010256,G=101075792;async function H(t,e,n){return await t.read(e,n)}async function j(t,e,n,i){return t.sliceAsBlob?await t.sliceAsBlob(e,n,i):await t.read(e,n)}const V={unsigned:()=>0};function W(t,e){return t[e]+256*t[e+1]}function Z(t,e){return t[e]+256*t[e+1]+65536*t[e+2]+16777216*t[e+3]}function Y(t,e){return Z(t,e)+4294967296*Z(t,e+4)}const q=new TextDecoder;function X(t,e){return o(t.buffer)&&(t=new Uint8Array(t)),q.decode(t)}const K=117853008;async function Q(t,e,n,i){const r=e-20,s=await H(t,r,20);if(Z(s,0)!==K)throw new Error("invalid zip64 end of central directory locator signature");const o=Y(s,8),a=await H(t,o,56);if(Z(a,0)!==G)throw new Error("invalid zip64 end of central directory record signature");const l=Y(a,32),h=Y(a,40);return $(t,Y(a,48),h,l,n,i)}const J=33639248;async function $(t,e,n,i,r,s){let o=0;const a=await H(t,e,n),l=[];for(let h=0;h<i;++h){const t=a.subarray(o,o+46),e=Z(t,0);if(e!==J)throw new Error("invalid central directory file header signature: 0x".concat(e.toString(16)));const n={versionMadeBy:W(t,4),versionNeededToExtract:W(t,6),generalPurposeBitFlag:W(t,8),compressionMethod:W(t,10),lastModFileTime:W(t,12),lastModFileDate:W(t,14),crc32:Z(t,16),compressedSize:Z(t,20),uncompressedSize:Z(t,24),fileNameLength:W(t,28),extraFieldLength:W(t,30),fileCommentLength:W(t,32),internalFileAttributes:W(t,36),externalFileAttributes:Z(t,38),relativeOffsetOfLocalHeader:Z(t,42)};if(64&n.generalPurposeBitFlag)throw new Error("strong encryption is not supported");o+=46;const i=a.subarray(o,o+n.fileNameLength+n.extraFieldLength+n.fileCommentLength);n.nameBytes=i.slice(0,n.fileNameLength),n.name=X(n.nameBytes);const r=n.fileNameLength+n.extraFieldLength,s=i.slice(n.fileNameLength,r);n.extraFields=[];let h=0;for(;h<s.length-3;){const t=W(s,h+0),e=h+4,i=e+W(s,h+2);if(i>s.length)throw new Error("extra field length exceeds extra field buffer size");n.extraFields.push({id:t,data:s.slice(e,i)}),h=i}if(n.commentBytes=i.slice(r,r+n.fileCommentLength),n.comment=X(n.commentBytes),o+=i.length,4294967295===n.uncompressedSize||4294967295===n.compressedSize||4294967295===n.relativeOffsetOfLocalHeader){const t=n.extraFields.find((t=>1===t.id));if(!t)throw new Error("expected zip64 extended information extra field");const e=t.data;let i=0;if(4294967295===n.uncompressedSize){if(i+8>e.length)throw new Error("zip64 extended information extra field does not include uncompressed size");n.uncompressedSize=Y(e,i),i+=8}if(4294967295===n.compressedSize){if(i+8>e.length)throw new Error("zip64 extended information extra field does not include compressed size");n.compressedSize=Y(e,i),i+=8}if(4294967295===n.relativeOffsetOfLocalHeader){if(i+8>e.length)throw new Error("zip64 extended information extra field does not include relative header offset");n.relativeOffsetOfLocalHeader=Y(e,i),i+=8}}const c=n.extraFields.find((t=>28789===t.id&&t.data.length>=6&&1===t.data[0]&&Z(t.data,1)),V.unsigned(n.nameBytes));if(c&&(n.fileName=X(c.data.slice(5))),0===n.compressionMethod){let t=n.uncompressedSize;if(0!==(1&n.generalPurposeBitFlag)&&(t+=12),n.compressedSize!==t)throw new Error("compressed size mismatch for stored file: ".concat(n.compressedSize," != ").concat(t))}l.push(n)}return{zip:{comment:r,commentBytes:s},entries:l.map((e=>new k(t,e)))}}async function tt(t,e){if(1&e.generalPurposeBitFlag)throw new Error("encrypted entries not supported");const n=await H(t,e.relativeOffsetOfLocalHeader,30),i=await t.getLength(),r=Z(n,0);if(67324752!==r)throw new Error("invalid local file header signature: 0x".concat(r.toString(16)));const s=W(n,26),o=W(n,28),a=e.relativeOffsetOfLocalHeader+n.length+s+o;let l;if(0===e.compressionMethod)l=!1;else{if(8!==e.compressionMethod)throw new Error("unsupported compression method: ".concat(e.compressionMethod));l=!0}const h=a,c=h+e.compressedSize;if(0!==e.compressedSize&&c>i)throw new Error("file data overflows file bounds: ".concat(h," +  ").concat(e.compressedSize,"  > ").concat(i));return{decompress:l,fileDataStart:h}}async function et(t){let e;if("undefined"!==typeof Blob&&t instanceof Blob)e=new h(t);else if(t instanceof ArrayBuffer||t&&t.buffer&&t.buffer instanceof ArrayBuffer)e=new l(t);else if(o(t)||o(t.buffer))e=new l(t);else if("string"===typeof t){const n=await fetch(t);if(!n.ok)throw new Error("failed http request ".concat(t,", status: ").concat(n.status,": ").concat(n.statusText));const i=await n.blob();e=new h(i)}else{if("function"!==typeof t.getLength||"function"!==typeof t.read)throw new Error("unsupported source type");e=t}const n=await e.getLength();if(n>Number.MAX_SAFE_INTEGER)throw new Error("file too large. size: ".concat(n,". Only file sizes up 4503599627370496 bytes are supported"));return await async function(t,e){const n=Math.min(U+B,e),i=e-n,r=await H(t,i,n);for(let s=n-U;s>=0;--s){if(Z(r,s)!==z)continue;const e=new Uint8Array(r.buffer,r.byteOffset+s,r.byteLength-s),n=W(e,4);if(0!==n)throw new Error("multi-volume zip files are not supported. This is volume: ".concat(n));const o=W(e,10),a=Z(e,12),l=Z(e,16),h=W(e,20),c=e.length-U;if(h!==c)throw new Error("invalid comment length. expected: ".concat(c,", actual: ").concat(h));const u=new Uint8Array(e.buffer,e.byteOffset+22,h),p=X(u);return 65535===o||4294967295===l?await Q(t,i+s,p,u):await $(t,l,a,o,p,u)}throw new Error("could not find end of central directory. maybe not zip file")}(e,n)}async function nt(t){const{zip:e,entries:n}=await et(t);return{zip:e,entries:Object.fromEntries(n.map((t=>[t.name,t])))}}},5307:t=>{t.exports=function(){for(var t={},n=0;n<arguments.length;n++){var i=arguments[n];for(var r in i)e.call(i,r)&&(t[r]=i[r])}return t};var e=Object.prototype.hasOwnProperty},5671:t=>{function e(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=5671,t.exports=e},4836:t=>{t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},7462:(t,e,n)=>{"use strict";function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},i.apply(this,arguments)}n.d(e,{Z:()=>i})},3366:(t,e,n)=>{"use strict";function i(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}n.d(e,{Z:()=>i})},2751:(t,e,n)=>{"use strict";n.d(e,{x0:()=>i});let i=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(t)).reduce(((t,e)=>t+=(e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_"),"")}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.amdO={},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var s=Object.create(null);n.r(s);var o={};t=t||[null,e({}),e([]),e(e)];for(var a=2&r&&i;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>o[t]=()=>i[t]));return o.default=()=>i,n.d(s,o),s}})(),n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t,e=n(7313),i=n.t(e,2),r=n(1739);function s(){return s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},s.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(t||(t={}));const o="popstate";function a(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function l(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(uJ){}}}function h(t,e){return{usr:t.state,key:t.key,idx:e}}function c(t,e,n,i){return void 0===n&&(n=null),s({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?p(e):e,{state:n,key:e&&e.key||i||Math.random().toString(36).substr(2,8)})}function u(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(e+="#"===i.charAt(0)?i:"#"+i),e}function p(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function d(e,n,i,r){void 0===r&&(r={});let{window:l=document.defaultView,v5Compat:p=!1}=r,d=l.history,f=t.Pop,m=null,g=y();function y(){return(d.state||{idx:null}).idx}function v(){f=t.Pop;let e=y(),n=null==e?null:e-g;g=e,m&&m({action:f,location:T.location,delta:n})}function _(t){let e="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof t?t:u(t);return a(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==g&&(g=0,d.replaceState(s({},d.state,{idx:g}),""));let T={get action(){return f},get location(){return e(l,d)},listen(t){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(o,v),m=t,()=>{l.removeEventListener(o,v),m=null}},createHref:t=>n(l,t),createURL:_,encodeLocation(t){let e=_(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(e,n){f=t.Push;let r=c(T.location,e,n);i&&i(r,e),g=y()+1;let s=h(r,g),o=T.createHref(r);try{d.pushState(s,"",o)}catch(a){l.location.assign(o)}p&&m&&m({action:f,location:T.location,delta:1})},replace:function(e,n){f=t.Replace;let r=c(T.location,e,n);i&&i(r,e),g=y();let s=h(r,g),o=T.createHref(r);d.replaceState(s,"",o),p&&m&&m({action:f,location:T.location,delta:0})},go:t=>d.go(t)};return T}var f;function m(t,e,n){void 0===n&&(n="/");let i=A(("string"===typeof e?p(e):e).pathname||"/",n);if(null==i)return null;let r=g(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(r);let s=null;for(let o=0;null==s&&o<r.length;++o)s=S(r[o],C(i));return s}function g(t,e,n,i){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(t,r,s)=>{let o={relativePath:void 0===s?t.path||"":s,caseSensitive:!0===t.caseSensitive,childrenIndex:r,route:t};o.relativePath.startsWith("/")&&(a(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(i.length));let l=P([i,o.relativePath]),h=n.concat(o);t.children&&t.children.length>0&&(a(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),g(t.children,e,h,l)),(null!=t.path||t.index)&&e.push({path:l,score:w(l,t.index),routesMeta:h})};return t.forEach(((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let i of y(t.path))r(t,e,i);else r(t,e)})),e}function y(t){let e=t.split("/");if(0===e.length)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let o=y(i.join("/")),a=[];return a.push(...o.map((t=>""===t?s:[s,t].join("/")))),r&&a.push(...o),a.map((e=>t.startsWith("/")&&""===e?"/":e))}!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(f||(f={}));const v=/^:\w+$/,_=3,T=2,E=1,x=10,b=-2,I=t=>"*"===t;function w(t,e){let n=t.split("/"),i=n.length;return n.some(I)&&(i+=b),e&&(i+=T),n.filter((t=>!I(t))).reduce(((t,e)=>t+(v.test(e)?_:""===e?E:x)),i)}function S(t,e){let{routesMeta:n}=t,i={},r="/",s=[];for(let o=0;o<n.length;++o){let t=n[o],a=o===n.length-1,l="/"===r?e:e.slice(r.length)||"/",h=R({path:t.relativePath,caseSensitive:t.caseSensitive,end:a},l);if(!h)return null;Object.assign(i,h.params);let c=t.route;s.push({params:i,pathname:P([r,h.pathname]),pathnameBase:F(P([r,h.pathnameBase])),route:c}),"/"!==h.pathnameBase&&(r=P([r,h.pathnameBase]))}return s}function R(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);D("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,((t,e)=>(i.push(e),"/([^\\/]+)")));t.endsWith("*")?(i.push("*"),r+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==t&&"/"!==t&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,e?void 0:"i");return[s,i]}(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce(((t,e,n)=>{if("*"===e){let t=a[n]||"";o=s.slice(0,s.length-t.length).replace(/(.)\/+$/,"$1")}return t[e]=function(t,e){try{return decodeURIComponent(t)}catch(n){return D(!1,'The value for the URL param "'+e+'" will not be decoded because the string "'+t+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),t}}(a[n]||"",e),t}),{}),pathname:s,pathnameBase:o,pattern:t}}function C(t){try{return decodeURI(t)}catch(e){return D(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function A(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&"/"!==i?null:t.slice(n)||"/"}function D(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(uJ){}}}function O(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function N(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function M(t,e,n,i){let r;void 0===i&&(i=!1),"string"===typeof t?r=p(t):(r=s({},t),a(!r.pathname||!r.pathname.includes("?"),O("?","pathname","search",r)),a(!r.pathname||!r.pathname.includes("#"),O("#","pathname","hash",r)),a(!r.search||!r.search.includes("#"),O("#","search","hash",r)));let o,l=""===t||""===r.pathname,h=l?"/":r.pathname;if(i||null==h)o=n;else{let t=e.length-1;if(h.startsWith("..")){let e=h.split("/");for(;".."===e[0];)e.shift(),t-=1;r.pathname=e.join("/")}o=t>=0?e[t]:"/"}let c=function(t,e){void 0===e&&(e="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof t?p(t):t,s=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:s,search:L(i),hash:k(r)}}(r,o),u=h&&"/"!==h&&h.endsWith("/"),d=(l||"."===h)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!d||(c.pathname+="/"),c}const P=t=>t.join("/").replace(/\/\/+/g,"/"),F=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),L=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",k=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";class U extends Error{}function B(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}const z=["post","put","patch","delete"],G=(new Set(z),["get",...z]);new Set(G),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},H.apply(this,arguments)}const j="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},{useState:V,useEffect:W,useLayoutEffect:Z,useDebugValue:Y}=i;function q(t){const e=t.getSnapshot,n=t.value;try{const t=e();return!j(n,t)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,i.useSyncExternalStore;const X=e.createContext(null);const K=e.createContext(null);const Q=e.createContext(null);const J=e.createContext(null);const $=e.createContext({outlet:null,matches:[]});const tt=e.createContext(null);function et(){return null!=e.useContext(J)}function nt(){return et()||a(!1),e.useContext(J).location}function it(){let t=function(){var t;let n=e.useContext(tt),i=ht(lt.UseRouteError),r=ct(lt.UseRouteError);if(n)return n;return null==(t=i.errors)?void 0:t[r]}(),n=B(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),i?e.createElement("pre",{style:s},i):null,null)}class rt extends e.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location?{error:t.error,location:t.location}:{error:t.error||e.error,location:e.location}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error?e.createElement($.Provider,{value:this.props.routeContext},e.createElement(tt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function st(t){let{routeContext:n,match:i,children:r}=t,s=e.useContext(X);return s&&s.static&&s.staticContext&&i.route.errorElement&&(s.staticContext._deepestRenderedBoundaryId=i.route.id),e.createElement($.Provider,{value:n},r)}function ot(t,n,i){if(void 0===n&&(n=[]),null==t){if(null==i||!i.errors)return null;t=i.matches}let r=t,s=null==i?void 0:i.errors;if(null!=s){let t=r.findIndex((t=>t.route.id&&(null==s?void 0:s[t.route.id])));t>=0||a(!1),r=r.slice(0,Math.min(r.length,t+1))}return r.reduceRight(((t,o,a)=>{let l=o.route.id?null==s?void 0:s[o.route.id]:null,h=i?o.route.errorElement||e.createElement(it,null):null,c=n.concat(r.slice(0,a+1)),u=()=>e.createElement(st,{match:o,routeContext:{outlet:t,matches:c}},l?h:void 0!==o.route.element?o.route.element:t);return i&&(o.route.errorElement||0===a)?e.createElement(rt,{location:i.location,component:h,error:l,children:u(),routeContext:{outlet:null,matches:c}}):u()}),null)}var at,lt;function ht(t){let n=e.useContext(K);return n||a(!1),n}function ct(t){let n=function(t){let n=e.useContext($);return n||a(!1),n}(),i=n.matches[n.matches.length-1];return i.route.id||a(!1),i.route.id}!function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator"}(at||(at={})),function(t){t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"}(lt||(lt={}));function ut(t){let{to:n,replace:i,state:r,relative:s}=t;et()||a(!1);let o=e.useContext(K),l=function(){et()||a(!1);let{basename:t,navigator:n}=e.useContext(Q),{matches:i}=e.useContext($),{pathname:r}=nt(),s=JSON.stringify(N(i).map((t=>t.pathnameBase))),o=e.useRef(!1);e.useEffect((()=>{o.current=!0}));let l=e.useCallback((function(e,i){if(void 0===i&&(i={}),!o.current)return;if("number"===typeof e)return void n.go(e);let a=M(e,JSON.parse(s),r,"path"===i.relative);"/"!==t&&(a.pathname="/"===a.pathname?t:P([t,a.pathname])),(i.replace?n.replace:n.push)(a,i.state,i)}),[t,n,s,r]);return l}();return e.useEffect((()=>{o&&"idle"!==o.navigation.state||l(n,{replace:i,state:r,relative:s})})),null}function pt(t){a(!1)}function dt(n){let{basename:i="/",children:r=null,location:s,navigationType:o=t.Pop,navigator:l,static:h=!1}=n;et()&&a(!1);let c=i.replace(/^\/*/,"/"),u=e.useMemo((()=>({basename:c,navigator:l,static:h})),[c,l,h]);"string"===typeof s&&(s=p(s));let{pathname:d="/",search:f="",hash:m="",state:g=null,key:y="default"}=s,v=e.useMemo((()=>{let t=A(d,c);return null==t?null:{pathname:t,search:f,hash:m,state:g,key:y}}),[c,d,f,m,g,y]);return null==v?null:e.createElement(Q.Provider,{value:u},e.createElement(J.Provider,{children:r,value:{location:v,navigationType:o}}))}function ft(n){let{children:i,location:r}=n,s=e.useContext(X);return function(n,i){et()||a(!1);let{navigator:r}=e.useContext(Q),s=e.useContext(K),{matches:o}=e.useContext($),l=o[o.length-1],h=l?l.params:{},c=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let u,d=nt();if(i){var f;let t="string"===typeof i?p(i):i;"/"===c||(null==(f=t.pathname)?void 0:f.startsWith(c))||a(!1),u=t}else u=d;let g=u.pathname||"/",y=m(n,{pathname:"/"===c?g:g.slice(c.length)||"/"}),v=ot(y&&y.map((t=>Object.assign({},t,{params:Object.assign({},h,t.params),pathname:P([c,r.encodeLocation?r.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?c:P([c,r.encodeLocation?r.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),o,s||void 0);return i&&v?e.createElement(J.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:t.Pop}},v):v}(s&&!i?s.router.routes:yt(i),r)}var mt;!function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"}(mt||(mt={}));new Promise((()=>{}));class gt extends e.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,e){console.error("<Await> caught the following error during render",t,e)}render(){let{children:t,errorElement:e,resolve:n}=this.props,i=null,r=mt.pending;if(n instanceof Promise)if(this.state.error){mt.error;let t=this.state.error;Promise.reject().catch((()=>{})),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_error",{get:()=>t})}else n._tracked?(n,void 0!==i._error?mt.error:void 0!==i._data?mt.success:mt.pending):(mt.pending,Object.defineProperty(n,"_tracked",{get:()=>!0}),n.then((t=>Object.defineProperty(n,"_data",{get:()=>t})),(t=>Object.defineProperty(n,"_error",{get:()=>t}))));else mt.success,Promise.resolve(),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_data",{get:()=>n});if(r===mt.error&&i._error instanceof AbortedDeferredError)throw neverSettledPromise;if(r===mt.error&&!e)throw i._error;if(r===mt.error)return React.createElement(AwaitContext.Provider,{value:i,children:e});if(r===mt.success)return React.createElement(AwaitContext.Provider,{value:i,children:t});throw i}}function yt(t,n){void 0===n&&(n=[]);let i=[];return e.Children.forEach(t,((t,r)=>{if(!e.isValidElement(t))return;if(t.type===e.Fragment)return void i.push.apply(i,yt(t.props.children,n));t.type!==pt&&a(!1),t.props.index&&t.props.children&&a(!1);let s=[...n,r],o={id:t.props.id||s.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,hasErrorBoundary:null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle};t.props.children&&(o.children=yt(t.props.children,s)),i.push(o)})),i}function vt(t){let{basename:n,children:i,window:r}=t,s=e.useRef();var o;null==s.current&&(s.current=(void 0===(o={window:r,v5Compat:!0})&&(o={}),d((function(t,e){let{pathname:n="/",search:i="",hash:r=""}=p(t.location.hash.substr(1));return c("",{pathname:n,search:i,hash:r},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){let n=t.document.querySelector("base"),i="";if(n&&n.getAttribute("href")){let e=t.location.href,n=e.indexOf("#");i=-1===n?e:e.slice(0,n)}return i+"#"+("string"===typeof e?e:u(e))}),(function(t,e){l("/"===t.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(e)+")")}),o)));let a=s.current,[h,f]=e.useState({action:a.action,location:a.location});return e.useLayoutEffect((()=>a.listen(f)),[a]),e.createElement(dt,{basename:n,children:i,location:h.location,navigationType:h.action,navigator:a})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var _t,Tt;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(_t||(_t={})),function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(Tt||(Tt={}));var Et=n(7462),xt=n(3366),bt=n(3061),It=n(4472),wt=n(3649),St=n(3019),Rt=n(3232);const Ct=["sx"],At=t=>{var e,n;const i={systemProps:{},otherProps:{}},r=null!=(e=null==t||null==(n=t.theme)?void 0:n.unstable_sxConfig)?e:Rt.Z;return Object.keys(t).forEach((e=>{r[e]?i.systemProps[e]=t[e]:i.otherProps[e]=t[e]})),i};function Dt(t){const{sx:e}=t,n=(0,xt.Z)(t,Ct),{systemProps:i,otherProps:r}=At(n);let s;return s=Array.isArray(e)?[i,...e]:"function"===typeof e?function(){const t=e(...arguments);return(0,St.P)(t)?(0,Et.Z)({},i,t):i}:(0,Et.Z)({},i,e),(0,Et.Z)({},r,{sx:s})}var Ot=n(6936),Nt=n(6417);const Mt=["className","component"];var Pt=n(1271),Ft=n(8658);const Lt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{defaultTheme:n,defaultClassName:i="MuiBox-root",generateClassName:r}=t,s=(0,It.ZP)("div",{shouldForwardProp:t=>"theme"!==t&&"sx"!==t&&"as"!==t})(wt.Z),o=e.forwardRef((function(t,e){const o=(0,Ot.Z)(n),a=Dt(t),{className:l,component:h="div"}=a,c=(0,xt.Z)(a,Mt);return(0,Nt.jsx)(s,(0,Et.Z)({as:h,ref:e,className:(0,bt.Z)(l,r?r(i):i),theme:o},c))}));return o}({defaultTheme:(0,Ft.Z)(),defaultClassName:"MuiBox-root",generateClassName:Pt.Z.generate}),kt=Lt;var Ut=n(9023),Bt=n(1921),zt=n(7551),Gt=n(8564),Ht=n(9394),jt=n(6983),Vt=n(3236),Wt=n(9127);function Zt(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Yt(t,e){return Yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yt(t,e)}function qt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Yt(t,e)}const Xt=e.createContext(null);function Kt(t,n){var i=Object.create(null);return t&&e.Children.map(t,(function(t){return t})).forEach((function(t){i[t.key]=function(t){return n&&(0,e.isValidElement)(t)?n(t):t}(t)})),i}function Qt(t,e,n){return null!=n[e]?n[e]:t.props[e]}function Jt(t,n,i){var r=Kt(t.children),s=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var i,r=Object.create(null),s=[];for(var o in t)o in e?s.length&&(r[o]=s,s=[]):s.push(o);var a={};for(var l in e){if(r[l])for(i=0;i<r[l].length;i++){var h=r[l][i];a[r[l][i]]=n(h)}a[l]=n(l)}for(i=0;i<s.length;i++)a[s[i]]=n(s[i]);return a}(n,r);return Object.keys(s).forEach((function(o){var a=s[o];if((0,e.isValidElement)(a)){var l=o in n,h=o in r,c=n[o],u=(0,e.isValidElement)(c)&&!c.props.in;!h||l&&!u?h||!l||u?h&&l&&(0,e.isValidElement)(c)&&(s[o]=(0,e.cloneElement)(a,{onExited:i.bind(null,a),in:c.props.in,exit:Qt(a,"exit",t),enter:Qt(a,"enter",t)})):s[o]=(0,e.cloneElement)(a,{in:!1}):s[o]=(0,e.cloneElement)(a,{onExited:i.bind(null,a),in:!0,exit:Qt(a,"exit",t),enter:Qt(a,"enter",t)})}})),s}var $t=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},te=function(t){function n(e,n){var i,r=(i=t.call(this,e,n)||this).handleExited.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i));return i.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},i}qt(n,t);var i=n.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(t,n){var i,r,s=n.children,o=n.handleExited;return{children:n.firstRender?(i=t,r=o,Kt(i.children,(function(t){return(0,e.cloneElement)(t,{onExited:r.bind(null,t),in:!0,appear:Qt(t,"appear",i),enter:Qt(t,"enter",i),exit:Qt(t,"exit",i)})}))):Jt(t,s,o),firstRender:!1}},i.handleExited=function(t,e){var n=Kt(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=(0,Et.Z)({},e.children);return delete n[t.key],{children:n}})))},i.render=function(){var t=this.props,n=t.component,i=t.childFactory,r=(0,xt.Z)(t,["component","childFactory"]),s=this.state.contextValue,o=$t(this.state.children).map(i);return delete r.appear,delete r.enter,delete r.exit,null===n?e.createElement(Xt.Provider,{value:s},o):e.createElement(Xt.Provider,{value:s},e.createElement(n,r,o))},n}(e.Component);te.propTypes={},te.defaultProps={component:"div",childFactory:function(t){return t}};const ee=te;n(5296);var ne=n(6132),ie=(n(7861),n(4911)),re=n(1086),se=n(5696),oe=(0,ne.w)((function(t,n){var i=t.styles,r=(0,re.O)([i],void 0,(0,e.useContext)(ne.T)),s=(0,e.useRef)();return(0,se.j)((function(){var t=n.key+"-global",e=new n.sheet.constructor({key:t,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),i=!1,o=document.querySelector('style[data-emotion="'+t+" "+r.name+'"]');return n.sheet.tags.length&&(e.before=n.sheet.tags[0]),null!==o&&(i=!0,o.setAttribute("data-emotion",t),e.hydrate([o])),s.current=[e,i],function(){e.flush()}}),[n]),(0,se.j)((function(){var t=s.current,e=t[0];if(t[1])t[1]=!1;else{if(void 0!==r.next&&(0,ie.My)(n,r.next,!0),e.tags.length){var i=e.tags[e.tags.length-1].nextElementSibling;e.before=i,e.flush()}n.insert("",r,e,!1)}}),[n,r.name]),null}));function ae(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,re.O)(e)}var le=function(){var t=ae.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};const he=function(t){const{className:n,classes:i,pulsate:r=!1,rippleX:s,rippleY:o,rippleSize:a,in:l,onExited:h,timeout:c}=t,[u,p]=e.useState(!1),d=(0,bt.Z)(n,i.ripple,i.rippleVisible,r&&i.ripplePulsate),f={width:a,height:a,top:-a/2+o,left:-a/2+s},m=(0,bt.Z)(i.child,u&&i.childLeaving,r&&i.childPulsate);return l||u||p(!0),e.useEffect((()=>{if(!l&&null!=h){const t=setTimeout(h,c);return()=>{clearTimeout(t)}}}),[h,l,c]),(0,Nt.jsx)("span",{className:d,style:f,children:(0,Nt.jsx)("span",{className:m})})};var ce=n(7430);const ue=(0,ce.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var pe,de,fe,me;const ge=["center","classes","className"];let ye,ve,_e,Te;const Ee=80,xe=le(ye||(ye=pe||(pe=Zt(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),be=le(ve||(ve=de||(de=Zt(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),Ie=le(_e||(_e=fe||(fe=Zt(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),we=(0,Gt.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Se=(0,Gt.ZP)(he,{name:"MuiTouchRipple",slot:"Ripple"})(Te||(Te=me||(me=Zt(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),ue.rippleVisible,xe,550,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut}),ue.ripplePulsate,(t=>{let{theme:e}=t;return e.transitions.duration.shorter}),ue.child,ue.childLeaving,be,550,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut}),ue.childPulsate,Ie,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut})),Re=e.forwardRef((function(t,n){const i=(0,Ht.Z)({props:t,name:"MuiTouchRipple"}),{center:r=!1,classes:s={},className:o}=i,a=(0,xt.Z)(i,ge),[l,h]=e.useState([]),c=e.useRef(0),u=e.useRef(null);e.useEffect((()=>{u.current&&(u.current(),u.current=null)}),[l]);const p=e.useRef(!1),d=e.useRef(null),f=e.useRef(null),m=e.useRef(null);e.useEffect((()=>()=>{clearTimeout(d.current)}),[]);const g=e.useCallback((t=>{const{pulsate:e,rippleX:n,rippleY:i,rippleSize:r,cb:o}=t;h((t=>[...t,(0,Nt.jsx)(Se,{classes:{ripple:(0,bt.Z)(s.ripple,ue.ripple),rippleVisible:(0,bt.Z)(s.rippleVisible,ue.rippleVisible),ripplePulsate:(0,bt.Z)(s.ripplePulsate,ue.ripplePulsate),child:(0,bt.Z)(s.child,ue.child),childLeaving:(0,bt.Z)(s.childLeaving,ue.childLeaving),childPulsate:(0,bt.Z)(s.childPulsate,ue.childPulsate)},timeout:550,pulsate:e,rippleX:n,rippleY:i,rippleSize:r},c.current)])),c.current+=1,u.current=o}),[s]),y=e.useCallback((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:i=!1,center:s=r||e.pulsate,fakeElement:o=!1}=e;if("mousedown"===(null==t?void 0:t.type)&&p.current)return void(p.current=!1);"touchstart"===(null==t?void 0:t.type)&&(p.current=!0);const a=o?null:m.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let h,c,u;if(s||void 0===t||0===t.clientX&&0===t.clientY||!t.clientX&&!t.touches)h=Math.round(l.width/2),c=Math.round(l.height/2);else{const{clientX:e,clientY:n}=t.touches&&t.touches.length>0?t.touches[0]:t;h=Math.round(e-l.left),c=Math.round(n-l.top)}if(s)u=Math.sqrt((2*l.width**2+l.height**2)/3),u%2===0&&(u+=1);else{const t=2*Math.max(Math.abs((a?a.clientWidth:0)-h),h)+2,e=2*Math.max(Math.abs((a?a.clientHeight:0)-c),c)+2;u=Math.sqrt(t**2+e**2)}null!=t&&t.touches?null===f.current&&(f.current=()=>{g({pulsate:i,rippleX:h,rippleY:c,rippleSize:u,cb:n})},d.current=setTimeout((()=>{f.current&&(f.current(),f.current=null)}),Ee)):g({pulsate:i,rippleX:h,rippleY:c,rippleSize:u,cb:n})}),[r,g]),v=e.useCallback((()=>{y({},{pulsate:!0})}),[y]),_=e.useCallback(((t,e)=>{if(clearTimeout(d.current),"touchend"===(null==t?void 0:t.type)&&f.current)return f.current(),f.current=null,void(d.current=setTimeout((()=>{_(t,e)})));f.current=null,h((t=>t.length>0?t.slice(1):t)),u.current=e}),[]);return e.useImperativeHandle(n,(()=>({pulsate:v,start:y,stop:_})),[v,y,_]),(0,Nt.jsx)(we,(0,Et.Z)({className:(0,bt.Z)(ue.root,s.root,o),ref:m},a,{children:(0,Nt.jsx)(ee,{component:null,exit:!0,children:l})}))})),Ce=Re;var Ae=n(2298);function De(t){return(0,Ae.Z)("MuiButtonBase",t)}const Oe=(0,ce.Z)("MuiButtonBase",["root","disabled","focusVisible"]),Ne=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Me=(0,Gt.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(Oe.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Pe=e.forwardRef((function(t,n){const i=(0,Ht.Z)({props:t,name:"MuiButtonBase"}),{action:r,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:h=!1,disableRipple:c=!1,disableTouchRipple:u=!1,focusRipple:p=!1,LinkComponent:d="a",onBlur:f,onClick:m,onContextMenu:g,onDragLeave:y,onFocus:v,onFocusVisible:_,onKeyDown:T,onKeyUp:E,onMouseDown:x,onMouseLeave:b,onMouseUp:I,onTouchEnd:w,onTouchMove:S,onTouchStart:R,tabIndex:C=0,TouchRippleProps:A,touchRippleRef:D,type:O}=i,N=(0,xt.Z)(i,Ne),M=e.useRef(null),P=e.useRef(null),F=(0,jt.Z)(P,D),{isFocusVisibleRef:L,onFocus:k,onBlur:U,ref:B}=(0,Wt.Z)(),[z,G]=e.useState(!1);h&&z&&G(!1),e.useImperativeHandle(r,(()=>({focusVisible:()=>{G(!0),M.current.focus()}})),[]);const[H,j]=e.useState(!1);e.useEffect((()=>{j(!0)}),[]);const V=H&&!c&&!h;function W(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;return(0,Vt.Z)((i=>{e&&e(i);return!n&&P.current&&P.current[t](i),!0}))}e.useEffect((()=>{z&&p&&!c&&H&&P.current.pulsate()}),[c,p,z,H]);const Z=W("start",x),Y=W("stop",g),q=W("stop",y),X=W("stop",I),K=W("stop",(t=>{z&&t.preventDefault(),b&&b(t)})),Q=W("start",R),J=W("stop",w),$=W("stop",S),tt=W("stop",(t=>{U(t),!1===L.current&&G(!1),f&&f(t)}),!1),et=(0,Vt.Z)((t=>{M.current||(M.current=t.currentTarget),k(t),!0===L.current&&(G(!0),_&&_(t)),v&&v(t)})),nt=()=>{const t=M.current;return l&&"button"!==l&&!("A"===t.tagName&&t.href)},it=e.useRef(!1),rt=(0,Vt.Z)((t=>{p&&!it.current&&z&&P.current&&" "===t.key&&(it.current=!0,P.current.stop(t,(()=>{P.current.start(t)}))),t.target===t.currentTarget&&nt()&&" "===t.key&&t.preventDefault(),T&&T(t),t.target===t.currentTarget&&nt()&&"Enter"===t.key&&!h&&(t.preventDefault(),m&&m(t))})),st=(0,Vt.Z)((t=>{p&&" "===t.key&&P.current&&z&&!t.defaultPrevented&&(it.current=!1,P.current.stop(t,(()=>{P.current.pulsate(t)}))),E&&E(t),m&&t.target===t.currentTarget&&nt()&&" "===t.key&&!t.defaultPrevented&&m(t)}));let ot=l;"button"===ot&&(N.href||N.to)&&(ot=d);const at={};"button"===ot?(at.type=void 0===O?"button":O,at.disabled=h):(N.href||N.to||(at.role="button"),h&&(at["aria-disabled"]=h));const lt=(0,jt.Z)(n,B,M);const ht=(0,Et.Z)({},i,{centerRipple:s,component:l,disabled:h,disableRipple:c,disableTouchRipple:u,focusRipple:p,tabIndex:C,focusVisible:z}),ct=(t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:i,classes:r}=t,s={root:["root",e&&"disabled",n&&"focusVisible"]},o=(0,Bt.Z)(s,De,r);return n&&i&&(o.root+=" ".concat(i)),o})(ht);return(0,Nt.jsxs)(Me,(0,Et.Z)({as:ot,className:(0,bt.Z)(ct.root,a),ownerState:ht,onBlur:tt,onClick:m,onContextMenu:Y,onFocus:et,onKeyDown:rt,onKeyUp:st,onMouseDown:Z,onMouseLeave:K,onMouseUp:X,onDragLeave:q,onTouchEnd:J,onTouchMove:$,onTouchStart:Q,ref:lt,tabIndex:h?-1:C,type:O},at,N,{children:[o,V?(0,Nt.jsx)(Ce,(0,Et.Z)({ref:F,center:s},A)):null]}))})),Fe=Pe;var Le=n(1615);function ke(t){return(0,Ae.Z)("MuiButton",t)}const Ue=(0,ce.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const Be=e.createContext({}),ze=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Ge=t=>(0,Et.Z)({},"small"===t.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===t.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===t.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),He=(0,Gt.ZP)(Fe,{shouldForwardProp:t=>(0,Gt.FO)(t)||"classes"===t,name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e["".concat(n.variant).concat((0,Le.Z)(n.color))],e["size".concat((0,Le.Z)(n.size))],e["".concat(n.variant,"Size").concat((0,Le.Z)(n.size))],"inherit"===n.color&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})((t=>{let{theme:e,ownerState:n}=t;var i,r;return(0,Et.Z)({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":(0,Et.Z)({textDecoration:"none",backgroundColor:e.vars?"rgba(".concat(e.vars.palette.text.primaryChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,zt.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===n.variant&&"inherit"!==n.color&&{backgroundColor:e.vars?"rgba(".concat(e.vars.palette[n.color].mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,zt.Fq)(e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===n.variant&&"inherit"!==n.color&&{border:"1px solid ".concat((e.vars||e).palette[n.color].main),backgroundColor:e.vars?"rgba(".concat(e.vars.palette[n.color].mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,zt.Fq)(e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===n.variant&&{backgroundColor:(e.vars||e).palette.grey.A100,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},"contained"===n.variant&&"inherit"!==n.color&&{backgroundColor:(e.vars||e).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[n.color].main}}),"&:active":(0,Et.Z)({},"contained"===n.variant&&{boxShadow:(e.vars||e).shadows[8]}),["&.".concat(Ue.focusVisible)]:(0,Et.Z)({},"contained"===n.variant&&{boxShadow:(e.vars||e).shadows[6]}),["&.".concat(Ue.disabled)]:(0,Et.Z)({color:(e.vars||e).palette.action.disabled},"outlined"===n.variant&&{border:"1px solid ".concat((e.vars||e).palette.action.disabledBackground)},"contained"===n.variant&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},"text"===n.variant&&{padding:"6px 8px"},"text"===n.variant&&"inherit"!==n.color&&{color:(e.vars||e).palette[n.color].main},"outlined"===n.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===n.variant&&"inherit"!==n.color&&{color:(e.vars||e).palette[n.color].main,border:e.vars?"1px solid rgba(".concat(e.vars.palette[n.color].mainChannel," / 0.5)"):"1px solid ".concat((0,zt.Fq)(e.palette[n.color].main,.5))},"contained"===n.variant&&{color:e.vars?e.vars.palette.text.primary:null==(i=(r=e.palette).getContrastText)?void 0:i.call(r,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],boxShadow:(e.vars||e).shadows[2]},"contained"===n.variant&&"inherit"!==n.color&&{color:(e.vars||e).palette[n.color].contrastText,backgroundColor:(e.vars||e).palette[n.color].main},"inherit"===n.color&&{color:"inherit",borderColor:"currentColor"},"small"===n.size&&"text"===n.variant&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},"large"===n.size&&"text"===n.variant&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},"small"===n.size&&"outlined"===n.variant&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},"large"===n.size&&"outlined"===n.variant&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},"small"===n.size&&"contained"===n.variant&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},"large"===n.size&&"contained"===n.variant&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})}),(t=>{let{ownerState:e}=t;return e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(Ue.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(Ue.disabled)]:{boxShadow:"none"}}})),je=(0,Gt.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e["iconSize".concat((0,Le.Z)(n.size))]]}})((t=>{let{ownerState:e}=t;return(0,Et.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},Ge(e))})),Ve=(0,Gt.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e["iconSize".concat((0,Le.Z)(n.size))]]}})((t=>{let{ownerState:e}=t;return(0,Et.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},Ge(e))})),We=e.forwardRef((function(t,n){const i=e.useContext(Be),r=(0,Ut.Z)(i,t),s=(0,Ht.Z)({props:r,name:"MuiButton"}),{children:o,color:a="primary",component:l="button",className:h,disabled:c=!1,disableElevation:u=!1,disableFocusRipple:p=!1,endIcon:d,focusVisibleClassName:f,fullWidth:m=!1,size:g="medium",startIcon:y,type:v,variant:_="text"}=s,T=(0,xt.Z)(s,ze),E=(0,Et.Z)({},s,{color:a,component:l,disabled:c,disableElevation:u,disableFocusRipple:p,fullWidth:m,size:g,type:v,variant:_}),x=(t=>{const{color:e,disableElevation:n,fullWidth:i,size:r,variant:s,classes:o}=t,a={root:["root",s,"".concat(s).concat((0,Le.Z)(e)),"size".concat((0,Le.Z)(r)),"".concat(s,"Size").concat((0,Le.Z)(r)),"inherit"===e&&"colorInherit",n&&"disableElevation",i&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,Le.Z)(r))],endIcon:["endIcon","iconSize".concat((0,Le.Z)(r))]},l=(0,Bt.Z)(a,ke,o);return(0,Et.Z)({},o,l)})(E),b=y&&(0,Nt.jsx)(je,{className:x.startIcon,ownerState:E,children:y}),I=d&&(0,Nt.jsx)(Ve,{className:x.endIcon,ownerState:E,children:d});return(0,Nt.jsxs)(He,(0,Et.Z)({ownerState:E,className:(0,bt.Z)(i.className,x.root,h),component:l,disabled:c,focusRipple:!p,focusVisibleClassName:(0,bt.Z)(x.focusVisible,f),ref:n,type:v},T,{classes:x,children:[b,o,I]}))})),Ze=We;var Ye=n(7472),qe=n(9081),Xe=n(2780),Ke=n(4246),Qe=n(1168),Je=n(2678),$e=n(9265);const tn=e.forwardRef((function(t,n){const{children:i,container:r,disablePortal:s=!1}=t,[o,a]=e.useState(null),l=(0,Ye.Z)(e.isValidElement(i)?i.ref:null,n);if((0,Je.Z)((()=>{s||a(function(t){return"function"===typeof t?t():t}(r)||document.body)}),[r,s]),(0,Je.Z)((()=>{if(o&&!s)return(0,$e.Z)(n,o),()=>{(0,$e.Z)(n,null)}}),[n,o,s]),s){if(e.isValidElement(i)){const t={ref:l};return e.cloneElement(i,t)}return(0,Nt.jsx)(e.Fragment,{children:i})}return(0,Nt.jsx)(e.Fragment,{children:o?Qe.createPortal(i,o):o})}));const en=tn;var nn=n(3282);function rn(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function sn(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function on(t){return parseInt((0,nn.Z)(t).getComputedStyle(t).paddingRight,10)||0}function an(t,e,n,i,r){const s=[e,n,...i];[].forEach.call(t.children,(t=>{const e=-1===s.indexOf(t),n=!function(t){const e=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName),n="INPUT"===t.tagName&&"hidden"===t.getAttribute("type");return e||n}(t);e&&n&&sn(t,r)}))}function ln(t,e){let n=-1;return t.some(((t,i)=>!!e(t)&&(n=i,!0))),n}function hn(t,e){const n=[],i=t.container;if(!e.disableScrollLock){if(function(t){const e=(0,qe.Z)(t);return e.body===t?(0,nn.Z)(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}(i)){const t=rn((0,qe.Z)(i));n.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight="".concat(on(i)+t,"px");const e=(0,qe.Z)(i).querySelectorAll(".mui-fixed");[].forEach.call(e,(e=>{n.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(on(e)+t,"px")}))}let t;if(i.parentNode instanceof DocumentFragment)t=(0,qe.Z)(i).body;else{const e=i.parentElement,n=(0,nn.Z)(i);t="HTML"===(null==e?void 0:e.nodeName)&&"scroll"===n.getComputedStyle(e).overflowY?e:i}n.push({value:t.style.overflow,property:"overflow",el:t},{value:t.style.overflowX,property:"overflow-x",el:t},{value:t.style.overflowY,property:"overflow-y",el:t}),t.style.overflow="hidden"}return()=>{n.forEach((t=>{let{value:e,el:n,property:i}=t;e?n.style.setProperty(i,e):n.style.removeProperty(i)}))}}const cn=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function un(t){const e=[],n=[];return Array.from(t.querySelectorAll(cn)).forEach(((t,i)=>{const r=function(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?"true"===t.contentEditable||("AUDIO"===t.nodeName||"VIDEO"===t.nodeName||"DETAILS"===t.nodeName)&&null===t.getAttribute("tabindex")?0:t.tabIndex:e}(t);-1!==r&&function(t){return!(t.disabled||"INPUT"===t.tagName&&"hidden"===t.type||function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return!1;if(!t.name)return!1;const e=e=>t.ownerDocument.querySelector('input[type="radio"]'.concat(e));let n=e('[name="'.concat(t.name,'"]:checked'));return n||(n=e('[name="'.concat(t.name,'"]'))),n!==t}(t))}(t)&&(0===r?e.push(t):n.push({documentOrder:i,tabIndex:r,node:t}))})),n.sort(((t,e)=>t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex)).map((t=>t.node)).concat(e)}function pn(){return!0}const dn=function(t){const{children:n,disableAutoFocus:i=!1,disableEnforceFocus:r=!1,disableRestoreFocus:s=!1,getTabbable:o=un,isEnabled:a=pn,open:l}=t,h=e.useRef(!1),c=e.useRef(null),u=e.useRef(null),p=e.useRef(null),d=e.useRef(null),f=e.useRef(!1),m=e.useRef(null),g=(0,Ye.Z)(n.ref,m),y=e.useRef(null);e.useEffect((()=>{l&&m.current&&(f.current=!i)}),[i,l]),e.useEffect((()=>{if(!l||!m.current)return;const t=(0,qe.Z)(m.current);return m.current.contains(t.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),f.current&&m.current.focus()),()=>{s||(p.current&&p.current.focus&&(h.current=!0,p.current.focus()),p.current=null)}}),[l]),e.useEffect((()=>{if(!l||!m.current)return;const t=(0,qe.Z)(m.current),e=e=>{const{current:n}=m;if(null!==n)if(t.hasFocus()&&!r&&a()&&!h.current){if(!n.contains(t.activeElement)){if(e&&d.current!==e.target||t.activeElement!==d.current)d.current=null;else if(null!==d.current)return;if(!f.current)return;let r=[];if(t.activeElement!==c.current&&t.activeElement!==u.current||(r=o(m.current)),r.length>0){var i,s;const t=Boolean((null==(i=y.current)?void 0:i.shiftKey)&&"Tab"===(null==(s=y.current)?void 0:s.key)),e=r[0],n=r[r.length-1];"string"!==typeof e&&"string"!==typeof n&&(t?n.focus():e.focus())}else n.focus()}}else h.current=!1},n=e=>{y.current=e,!r&&a()&&"Tab"===e.key&&t.activeElement===m.current&&e.shiftKey&&(h.current=!0,u.current&&u.current.focus())};t.addEventListener("focusin",e),t.addEventListener("keydown",n,!0);const i=setInterval((()=>{t.activeElement&&"BODY"===t.activeElement.tagName&&e(null)}),50);return()=>{clearInterval(i),t.removeEventListener("focusin",e),t.removeEventListener("keydown",n,!0)}}),[i,r,s,a,l,o]);const v=t=>{null===p.current&&(p.current=t.relatedTarget),f.current=!0};return(0,Nt.jsxs)(e.Fragment,{children:[(0,Nt.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:c,"data-testid":"sentinelStart"}),e.cloneElement(n,{ref:g,onFocus:t=>{null===p.current&&(p.current=t.relatedTarget),f.current=!0,d.current=t.target;const e=n.props.onFocus;e&&e(t)}}),(0,Nt.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:u,"data-testid":"sentinelEnd"})]})};function fn(t){return(0,Ae.Z)("MuiModal",t)}(0,ce.Z)("MuiModal",["root","hidden","backdrop"]);function mn(t){return"string"===typeof t}function gn(t){if(void 0===t)return{};const e={};return Object.keys(t).filter((e=>!(e.match(/^on[A-Z]/)&&"function"===typeof t[e]))).forEach((n=>{e[n]=t[n]})),e}function yn(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:i,externalForwardedProps:r,className:s}=t;if(!e){const t=(0,bt.Z)(null==r?void 0:r.className,null==i?void 0:i.className,s,null==n?void 0:n.className),e=(0,Et.Z)({},null==n?void 0:n.style,null==r?void 0:r.style,null==i?void 0:i.style),o=(0,Et.Z)({},n,r,i);return t.length>0&&(o.className=t),Object.keys(e).length>0&&(o.style=e),{props:o,internalRef:void 0}}const o=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===t)return{};const n={};return Object.keys(t).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof t[n]&&!e.includes(n))).forEach((e=>{n[e]=t[e]})),n}((0,Et.Z)({},r,i)),a=gn(i),l=gn(r),h=e(o),c=(0,bt.Z)(null==h?void 0:h.className,null==n?void 0:n.className,s,null==r?void 0:r.className,null==i?void 0:i.className),u=(0,Et.Z)({},null==h?void 0:h.style,null==n?void 0:n.style,null==r?void 0:r.style,null==i?void 0:i.style),p=(0,Et.Z)({},h,n,l,a);return c.length>0&&(p.className=c),Object.keys(u).length>0&&(p.style=u),{props:p,internalRef:h.ref}}function vn(t,e){return"function"===typeof t?t(e):t}const _n=["elementType","externalSlotProps","ownerState"];function Tn(t){var e;const{elementType:n,externalSlotProps:i,ownerState:r}=t,s=(0,xt.Z)(t,_n),o=vn(i,r),{props:a,internalRef:l}=yn((0,Et.Z)({},s,{externalSlotProps:o})),h=(0,Ye.Z)(l,null==o?void 0:o.ref,null==(e=t.additionalProps)?void 0:e.ref),c=function(t,e,n){return void 0===t||mn(t)?e:(0,Et.Z)({},e,{ownerState:(0,Et.Z)({},e.ownerState,n)})}(n,(0,Et.Z)({},a,{ref:h}),r);return c}const En={disableDefaultClasses:!1},xn=e.createContext(En);const bn=["children","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],In=t=>{const{open:n,exited:i}=t,r={root:["root",!n&&i&&"hidden"],backdrop:["backdrop"]};return(0,Bt.Z)(r,function(t){const{disableDefaultClasses:n}=e.useContext(xn);return e=>n?"":t(e)}(fn))};const wn=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,e){let n=this.modals.indexOf(t);if(-1!==n)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&sn(t.modalRef,!1);const i=function(t){const e=[];return[].forEach.call(t.children,(t=>{"true"===t.getAttribute("aria-hidden")&&e.push(t)})),e}(e);an(e,t.mount,t.modalRef,i,!0);const r=ln(this.containers,(t=>t.container===e));return-1!==r?(this.containers[r].modals.push(t),n):(this.containers.push({modals:[t],container:e,restore:null,hiddenSiblings:i}),n)}mount(t,e){const n=ln(this.containers,(e=>-1!==e.modals.indexOf(t))),i=this.containers[n];i.restore||(i.restore=hn(i,e))}remove(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(t);if(-1===n)return n;const i=ln(this.containers,(e=>-1!==e.modals.indexOf(t))),r=this.containers[i];if(r.modals.splice(r.modals.indexOf(t),1),this.modals.splice(n,1),0===r.modals.length)r.restore&&r.restore(),t.modalRef&&sn(t.modalRef,e),an(r.container,t.mount,t.modalRef,r.hiddenSiblings,!1),this.containers.splice(i,1);else{const t=r.modals[r.modals.length-1];t.modalRef&&sn(t.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}},Sn=e.forwardRef((function(t,n){var i,r;const{children:s,closeAfterTransition:o=!1,component:a,container:l,disableAutoFocus:h=!1,disableEnforceFocus:c=!1,disableEscapeKeyDown:u=!1,disablePortal:p=!1,disableRestoreFocus:d=!1,disableScrollLock:f=!1,hideBackdrop:m=!1,keepMounted:g=!1,manager:y=wn,onBackdropClick:v,onClose:_,onKeyDown:T,open:E,onTransitionEnter:x,onTransitionExited:b,slotProps:I={},slots:w={}}=t,S=(0,xt.Z)(t,bn),[R,C]=e.useState(!E),A=e.useRef({}),D=e.useRef(null),O=e.useRef(null),N=(0,Ye.Z)(O,n),M=function(t){return!!t&&t.props.hasOwnProperty("in")}(s),P=null==(i=t["aria-hidden"])||i,F=()=>(A.current.modalRef=O.current,A.current.mountNode=D.current,A.current),L=()=>{y.mount(F(),{disableScrollLock:f}),O.current&&(O.current.scrollTop=0)},k=(0,Xe.Z)((()=>{const t=function(t){return"function"===typeof t?t():t}(l)||(0,qe.Z)(D.current).body;y.add(F(),t),O.current&&L()})),U=e.useCallback((()=>y.isTopModal(F())),[y]),B=(0,Xe.Z)((t=>{D.current=t,t&&O.current&&(E&&U()?L():sn(O.current,P))})),z=e.useCallback((()=>{y.remove(F(),P)}),[y,P]);e.useEffect((()=>()=>{z()}),[z]),e.useEffect((()=>{E?k():M&&o||z()}),[E,z,M,o,k]);const G=(0,Et.Z)({},t,{closeAfterTransition:o,disableAutoFocus:h,disableEnforceFocus:c,disableEscapeKeyDown:u,disablePortal:p,disableRestoreFocus:d,disableScrollLock:f,exited:R,hideBackdrop:m,keepMounted:g}),H=In(G),j=()=>{C(!1),x&&x()},V=()=>{C(!0),b&&b(),o&&z()},W={};void 0===s.props.tabIndex&&(W.tabIndex="-1"),M&&(W.onEnter=(0,Ke.Z)(j,s.props.onEnter),W.onExited=(0,Ke.Z)(V,s.props.onExited));const Z=null!=(r=null!=a?a:w.root)?r:"div",Y=Tn({elementType:Z,externalSlotProps:I.root,externalForwardedProps:S,additionalProps:{ref:N,role:"presentation",onKeyDown:t=>{T&&T(t),"Escape"===t.key&&U()&&(u||(t.stopPropagation(),_&&_(t,"escapeKeyDown")))}},className:H.root,ownerState:G}),q=w.backdrop,X=Tn({elementType:q,externalSlotProps:I.backdrop,additionalProps:{"aria-hidden":!0,onClick:t=>{t.target===t.currentTarget&&(v&&v(t),_&&_(t,"backdropClick"))},open:E},className:H.backdrop,ownerState:G});return g||E||M&&!R?(0,Nt.jsx)(en,{ref:B,container:l,disablePortal:p,children:(0,Nt.jsxs)(Z,(0,Et.Z)({},Y,{children:[!m&&q?(0,Nt.jsx)(q,(0,Et.Z)({},X)):null,(0,Nt.jsx)(dn,{disableEnforceFocus:c,disableAutoFocus:h,disableRestoreFocus:d,isEnabled:U,open:E,children:e.cloneElement(s,W)})]}))}):null})),Rn=!1;var Cn="unmounted",An="exited",Dn="entering",On="entered",Nn="exiting",Mn=function(t){function n(e,n){var i;i=t.call(this,e,n)||this;var r,s=n&&!n.isMounting?e.enter:e.appear;return i.appearStatus=null,e.in?s?(r=An,i.appearStatus=Dn):r=On:r=e.unmountOnExit||e.mountOnEnter?Cn:An,i.state={status:r},i.nextCallback=null,i}qt(n,t),n.getDerivedStateFromProps=function(t,e){return t.in&&e.status===Cn?{status:An}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==Dn&&n!==On&&(e=Dn):n!==Dn&&n!==On||(e=Nn)}this.updateStatus(!1,e)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var t,e,n,i=this.props.timeout;return t=e=n=i,null!=i&&"number"!==typeof i&&(t=i.exit,e=i.enter,n=void 0!==i.appear?i.appear:e),{exit:t,enter:e,appear:n}},i.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e)if(this.cancelNextCallback(),e===Dn){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Qe.findDOMNode(this);n&&function(t){t.scrollTop}(n)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===An&&this.setState({status:Cn})},i.performEnter=function(t){var e=this,n=this.props.enter,i=this.context?this.context.isMounting:t,r=this.props.nodeRef?[i]:[Qe.findDOMNode(this),i],s=r[0],o=r[1],a=this.getTimeouts(),l=i?a.appear:a.enter;!t&&!n||Rn?this.safeSetState({status:On},(function(){e.props.onEntered(s)})):(this.props.onEnter(s,o),this.safeSetState({status:Dn},(function(){e.props.onEntering(s,o),e.onTransitionEnd(l,(function(){e.safeSetState({status:On},(function(){e.props.onEntered(s,o)}))}))})))},i.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:Qe.findDOMNode(this);e&&!Rn?(this.props.onExit(i),this.safeSetState({status:Nn},(function(){t.props.onExiting(i),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:An},(function(){t.props.onExited(i)}))}))}))):this.safeSetState({status:An},(function(){t.props.onExited(i)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},i.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,e.nextCallback=null,t(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:Qe.findDOMNode(this),i=null==t&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=r[0],o=r[1];this.props.addEndListener(s,o)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},i.render=function(){var t=this.state.status;if(t===Cn)return null;var n=this.props,i=n.children,r=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,xt.Z)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(Xt.Provider,{value:null},"function"===typeof i?i(t,r):e.cloneElement(e.Children.only(i),r))},n}(e.Component);function Pn(){}Mn.contextType=Xt,Mn.propTypes={},Mn.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Pn,onEntering:Pn,onEntered:Pn,onExit:Pn,onExiting:Pn,onExited:Pn},Mn.UNMOUNTED=Cn,Mn.EXITED=An,Mn.ENTERING=Dn,Mn.ENTERED=On,Mn.EXITING=Nn;const Fn=Mn;var Ln=n(2248);function kn(){return(0,Ot.Z)(Ln.Z)}const Un=t=>t.scrollTop;function Bn(t,e){var n,i;const{timeout:r,easing:s,style:o={}}=t;return{duration:null!=(n=o.transitionDuration)?n:"number"===typeof r?r:r[e.mode]||0,easing:null!=(i=o.transitionTimingFunction)?i:"object"===typeof s?s[e.mode]:s,delay:o.transitionDelay}}const zn=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Gn={entering:{opacity:1},entered:{opacity:1}},Hn=e.forwardRef((function(t,n){const i=kn(),r={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:h,onEnter:c,onEntered:u,onEntering:p,onExit:d,onExited:f,onExiting:m,style:g,timeout:y=r,TransitionComponent:v=Fn}=t,_=(0,xt.Z)(t,zn),T=e.useRef(null),E=(0,jt.Z)(T,a.ref,n),x=t=>e=>{if(t){const n=T.current;void 0===e?t(n):t(n,e)}},b=x(p),I=x(((t,e)=>{Un(t);const n=Bn({style:g,timeout:y,easing:l},{mode:"enter"});t.style.webkitTransition=i.transitions.create("opacity",n),t.style.transition=i.transitions.create("opacity",n),c&&c(t,e)})),w=x(u),S=x(m),R=x((t=>{const e=Bn({style:g,timeout:y,easing:l},{mode:"exit"});t.style.webkitTransition=i.transitions.create("opacity",e),t.style.transition=i.transitions.create("opacity",e),d&&d(t)})),C=x(f);return(0,Nt.jsx)(v,(0,Et.Z)({appear:o,in:h,nodeRef:T,onEnter:I,onEntered:w,onEntering:b,onExit:R,onExited:C,onExiting:S,addEndListener:t=>{s&&s(T.current,t)},timeout:y},_,{children:(t,n)=>e.cloneElement(a,(0,Et.Z)({style:(0,Et.Z)({opacity:0,visibility:"exited"!==t||h?void 0:"hidden"},Gn[t],g,a.props.style),ref:E},n))}))})),jn=Hn;function Vn(t){return(0,Ae.Z)("MuiBackdrop",t)}(0,ce.Z)("MuiBackdrop",["root","invisible"]);const Wn=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Zn=(0,Gt.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})((t=>{let{ownerState:e}=t;return(0,Et.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})})),Yn=e.forwardRef((function(t,e){var n,i,r;const s=(0,Ht.Z)({props:t,name:"MuiBackdrop"}),{children:o,className:a,component:l="div",components:h={},componentsProps:c={},invisible:u=!1,open:p,slotProps:d={},slots:f={},TransitionComponent:m=jn,transitionDuration:g}=s,y=(0,xt.Z)(s,Wn),v=(0,Et.Z)({},s,{component:l,invisible:u}),_=(t=>{const{classes:e,invisible:n}=t,i={root:["root",n&&"invisible"]};return(0,Bt.Z)(i,Vn,e)})(v),T=null!=(n=d.root)?n:c.root;return(0,Nt.jsx)(m,(0,Et.Z)({in:p,timeout:g},y,{children:(0,Nt.jsx)(Zn,(0,Et.Z)({"aria-hidden":!0},T,{as:null!=(i=null!=(r=f.root)?r:h.Root)?i:l,className:(0,bt.Z)(_.root,a,null==T?void 0:T.className),ownerState:(0,Et.Z)({},v,null==T?void 0:T.ownerState),classes:_,ref:e,children:o}))}))})),qn=Yn,Xn=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],Kn=(0,Gt.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})((t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),Qn=(0,Gt.ZP)(qn,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),Jn=e.forwardRef((function(t,n){var i,r,s,o,a,l;const h=(0,Ht.Z)({name:"MuiModal",props:t}),{BackdropComponent:c=Qn,BackdropProps:u,classes:p,className:d,closeAfterTransition:f=!1,children:m,component:g,components:y={},componentsProps:v={},disableAutoFocus:_=!1,disableEnforceFocus:T=!1,disableEscapeKeyDown:E=!1,disablePortal:x=!1,disableRestoreFocus:b=!1,disableScrollLock:I=!1,hideBackdrop:w=!1,keepMounted:S=!1,slotProps:R,slots:C,theme:A}=h,D=(0,xt.Z)(h,Xn),[O,N]=e.useState(!0),M={closeAfterTransition:f,disableAutoFocus:_,disableEnforceFocus:T,disableEscapeKeyDown:E,disablePortal:x,disableRestoreFocus:b,disableScrollLock:I,hideBackdrop:w,keepMounted:S},P=(0,Et.Z)({},h,M,{exited:O}),F=null!=(i=null!=(r=null==C?void 0:C.root)?r:y.Root)?i:Kn,L=null!=(s=null!=(o=null==C?void 0:C.backdrop)?o:y.Backdrop)?s:c,k=null!=(a=null==R?void 0:R.root)?a:v.root,U=null!=(l=null==R?void 0:R.backdrop)?l:v.backdrop;return(0,Nt.jsx)(Sn,(0,Et.Z)({slots:{root:F,backdrop:L},slotProps:{root:()=>(0,Et.Z)({},vn(k,P),!mn(F)&&{as:g,theme:A},{className:(0,bt.Z)(d,null==k?void 0:k.className,null==p?void 0:p.root,!P.open&&P.exited&&(null==p?void 0:p.hidden))}),backdrop:()=>(0,Et.Z)({},u,vn(U,P),{className:(0,bt.Z)(null==U?void 0:U.className,null==p?void 0:p.backdrop)})},onTransitionEnter:()=>N(!1),onTransitionExited:()=>N(!0),ref:n},D,M,{children:m}))})),$n=Jn;function ti(t){return(0,Ae.Z)("MuiTypography",t)}(0,ce.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const ei=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],ni=(0,Gt.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],"inherit"!==n.align&&e["align".concat((0,Le.Z)(n.align))],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})((t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({margin:0},n.variant&&e.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),ii={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ri={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},si=e.forwardRef((function(t,e){const n=(0,Ht.Z)({props:t,name:"MuiTypography"}),i=(t=>ri[t]||t)(n.color),r=Dt((0,Et.Z)({},n,{color:i})),{align:s="inherit",className:o,component:a,gutterBottom:l=!1,noWrap:h=!1,paragraph:c=!1,variant:u="body1",variantMapping:p=ii}=r,d=(0,xt.Z)(r,ei),f=(0,Et.Z)({},r,{align:s,color:i,className:o,component:a,gutterBottom:l,noWrap:h,paragraph:c,variant:u,variantMapping:p}),m=a||(c?"p":p[u]||ii[u])||"span",g=(t=>{const{align:e,gutterBottom:n,noWrap:i,paragraph:r,variant:s,classes:o}=t,a={root:["root",s,"inherit"!==t.align&&"align".concat((0,Le.Z)(e)),n&&"gutterBottom",i&&"noWrap",r&&"paragraph"]};return(0,Bt.Z)(a,ti,o)})(f);return(0,Nt.jsx)(ni,(0,Et.Z)({as:m,ref:e,ownerState:f,className:(0,bt.Z)(g.root,o)},d))})),oi=si;const ai=e.createContext({});function li(t){return(0,Ae.Z)("MuiList",t)}(0,ce.Z)("MuiList",["root","padding","dense","subheader"]);const hi=["children","className","component","dense","disablePadding","subheader"],ci=(0,Gt.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})((t=>{let{ownerState:e}=t;return(0,Et.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})})),ui=e.forwardRef((function(t,n){const i=(0,Ht.Z)({props:t,name:"MuiList"}),{children:r,className:s,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:h}=i,c=(0,xt.Z)(i,hi),u=e.useMemo((()=>({dense:a})),[a]),p=(0,Et.Z)({},i,{component:o,dense:a,disablePadding:l}),d=(t=>{const{classes:e,disablePadding:n,dense:i,subheader:r}=t,s={root:["root",!n&&"padding",i&&"dense",r&&"subheader"]};return(0,Bt.Z)(s,li,e)})(p);return(0,Nt.jsx)(ai.Provider,{value:u,children:(0,Nt.jsxs)(ci,(0,Et.Z)({as:o,className:(0,bt.Z)(d.root,s),ref:n,ownerState:p},c,{children:[h,r]}))})})),pi=ui;var di=n(7816),fi=n(4993);function mi(t){return(0,Ae.Z)("MuiListItem",t)}const gi=(0,ce.Z)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);function yi(t){return(0,Ae.Z)("MuiListItemButton",t)}const vi=(0,ce.Z)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function _i(t){return(0,Ae.Z)("MuiListItemSecondaryAction",t)}(0,ce.Z)("MuiListItemSecondaryAction",["root","disableGutters"]);const Ti=["className"],Ei=(0,Gt.ZP)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})((t=>{let{ownerState:e}=t;return(0,Et.Z)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})})),xi=e.forwardRef((function(t,n){const i=(0,Ht.Z)({props:t,name:"MuiListItemSecondaryAction"}),{className:r}=i,s=(0,xt.Z)(i,Ti),o=e.useContext(ai),a=(0,Et.Z)({},i,{disableGutters:o.disableGutters}),l=(t=>{const{disableGutters:e,classes:n}=t,i={root:["root",e&&"disableGutters"]};return(0,Bt.Z)(i,_i,n)})(a);return(0,Nt.jsx)(Ei,(0,Et.Z)({className:(0,bt.Z)(l.root,r),ownerState:a,ref:n},s))}));xi.muiName="ListItemSecondaryAction";const bi=xi,Ii=["className"],wi=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Si=(0,Gt.ZP)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,"flex-start"===n.alignItems&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.button&&e.button,n.hasSecondaryAction&&e.secondaryAction]}})((t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&(0,Et.Z)({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&{["& > .".concat(vi.root)]:{paddingRight:48}},{["&.".concat(gi.focusVisible)]:{backgroundColor:(e.vars||e).palette.action.focus},["&.".concat(gi.selected)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):(0,zt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),["&.".concat(gi.focusVisible)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.focusOpacity,"))"):(0,zt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},["&.".concat(gi.disabled)]:{opacity:(e.vars||e).palette.action.disabledOpacity}},"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:"1px solid ".concat((e.vars||e).palette.divider),backgroundClip:"padding-box"},n.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(gi.selected,":hover")]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.hoverOpacity,"))"):(0,zt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):(0,zt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}}},n.hasSecondaryAction&&{paddingRight:48})})),Ri=(0,Gt.ZP)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),Ci=e.forwardRef((function(t,n){const i=(0,Ht.Z)({props:t,name:"MuiListItem"}),{alignItems:r="center",autoFocus:s=!1,button:o=!1,children:a,className:l,component:h,components:c={},componentsProps:u={},ContainerComponent:p="li",ContainerProps:{className:d}={},dense:f=!1,disabled:m=!1,disableGutters:g=!1,disablePadding:y=!1,divider:v=!1,focusVisibleClassName:_,secondaryAction:T,selected:E=!1,slotProps:x={},slots:b={}}=i,I=(0,xt.Z)(i.ContainerProps,Ii),w=(0,xt.Z)(i,wi),S=e.useContext(ai),R=e.useMemo((()=>({dense:f||S.dense||!1,alignItems:r,disableGutters:g})),[r,S.dense,f,g]),C=e.useRef(null);(0,fi.Z)((()=>{s&&C.current&&C.current.focus()}),[s]);const A=e.Children.toArray(a),D=A.length&&(0,di.Z)(A[A.length-1],["ListItemSecondaryAction"]),O=(0,Et.Z)({},i,{alignItems:r,autoFocus:s,button:o,dense:R.dense,disabled:m,disableGutters:g,disablePadding:y,divider:v,hasSecondaryAction:D,selected:E}),N=(t=>{const{alignItems:e,button:n,classes:i,dense:r,disabled:s,disableGutters:o,disablePadding:a,divider:l,hasSecondaryAction:h,selected:c}=t,u={root:["root",r&&"dense",!o&&"gutters",!a&&"padding",l&&"divider",s&&"disabled",n&&"button","flex-start"===e&&"alignItemsFlexStart",h&&"secondaryAction",c&&"selected"],container:["container"]};return(0,Bt.Z)(u,mi,i)})(O),M=(0,jt.Z)(C,n),P=b.root||c.Root||Si,F=x.root||u.root||{},L=(0,Et.Z)({className:(0,bt.Z)(N.root,F.className,l),disabled:m},w);let k=h||"li";return o&&(L.component=h||"div",L.focusVisibleClassName=(0,bt.Z)(gi.focusVisible,_),k=Fe),D?(k=L.component||h?k:"div","li"===p&&("li"===k?k="div":"li"===L.component&&(L.component="div")),(0,Nt.jsx)(ai.Provider,{value:R,children:(0,Nt.jsxs)(Ri,(0,Et.Z)({as:p,className:(0,bt.Z)(N.container,d),ref:M,ownerState:O},I,{children:[(0,Nt.jsx)(P,(0,Et.Z)({},F,!mn(P)&&{as:k,ownerState:(0,Et.Z)({},O,F.ownerState)},L,{children:A})),A.pop()]}))})):(0,Nt.jsx)(ai.Provider,{value:R,children:(0,Nt.jsxs)(P,(0,Et.Z)({},F,{as:k,ref:M},!mn(P)&&{ownerState:(0,Et.Z)({},O,F.ownerState)},L,{children:[A,T&&(0,Nt.jsx)(bi,{children:T})]}))})})),Ai=Ci;function Di(t){return(0,Ae.Z)("MuiListItemIcon",t)}(0,ce.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);const Oi=["className"],Ni=(0,Gt.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"flex-start"===n.alignItems&&e.alignItemsFlexStart]}})((t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})})),Mi=e.forwardRef((function(t,n){const i=(0,Ht.Z)({props:t,name:"MuiListItemIcon"}),{className:r}=i,s=(0,xt.Z)(i,Oi),o=e.useContext(ai),a=(0,Et.Z)({},i,{alignItems:o.alignItems}),l=(t=>{const{alignItems:e,classes:n}=t,i={root:["root","flex-start"===e&&"alignItemsFlexStart"]};return(0,Bt.Z)(i,Di,n)})(a);return(0,Nt.jsx)(Ni,(0,Et.Z)({className:(0,bt.Z)(l.root,r),ownerState:a,ref:n},s))})),Pi=Mi;function Fi(t){return(0,Ae.Z)("MuiListItemText",t)}const Li=(0,ce.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),ki=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],Ui=(0,Gt.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["& .".concat(Li.primary)]:e.primary},{["& .".concat(Li.secondary)]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})((t=>{let{ownerState:e}=t;return(0,Et.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})})),Bi=e.forwardRef((function(t,n){const i=(0,Ht.Z)({props:t,name:"MuiListItemText"}),{children:r,className:s,disableTypography:o=!1,inset:a=!1,primary:l,primaryTypographyProps:h,secondary:c,secondaryTypographyProps:u}=i,p=(0,xt.Z)(i,ki),{dense:d}=e.useContext(ai);let f=null!=l?l:r,m=c;const g=(0,Et.Z)({},i,{disableTypography:o,inset:a,primary:!!f,secondary:!!m,dense:d}),y=(t=>{const{classes:e,inset:n,primary:i,secondary:r,dense:s}=t,o={root:["root",n&&"inset",s&&"dense",i&&r&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,Bt.Z)(o,Fi,e)})(g);return null==f||f.type===oi||o||(f=(0,Nt.jsx)(oi,(0,Et.Z)({variant:d?"body2":"body1",className:y.primary,component:null!=h&&h.variant?void 0:"span",display:"block"},h,{children:f}))),null==m||m.type===oi||o||(m=(0,Nt.jsx)(oi,(0,Et.Z)({variant:"body2",className:y.secondary,color:"text.secondary",display:"block"},u,{children:m}))),(0,Nt.jsxs)(Ui,(0,Et.Z)({className:(0,bt.Z)(y.root,s),ownerState:g,ref:n},p,{children:[f,m]}))})),zi=Bi,Gi=["LOGIN","UPDATE_USER","LOGOUT","START_MAP","REMOVE_MAP","ADD_BUILDING","OPEN_BUILDING","CLOSE_BUILDING","UPDATE_BUILDING","DELETE_BUILDING","UPLOAD_MODEL","DELETE_MODEL","START_BUILDING","CLOSE_BUILDING","EXPLODE_MODEL","TOGGLE_CLIPPER","TOGGLE_DIMENSIONS","TOGGLE_FLOORPLAN","UPDATE_FLOORPLANS","UPDATE_PROPERTIES"],Hi=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},ji={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,l=a?t[r+2]:0,h=e>>2,c=(3&e)<<4|o>>4;let u=(15&o)<<2|l>>6,p=63&l;a||(p=64,s||(u=64)),i.push(n[h],n[c],n[u],n[p])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Hi(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length?n[t.charAt(r)]:0;++r;const o=r<t.length?n[t.charAt(r)]:64;++r;const a=r<t.length?n[t.charAt(r)]:64;if(++r,null==e||null==s||null==o||null==a)throw new Vi;const l=e<<2|s>>4;if(i.push(l),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vi extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wi=function(t){return function(t){const e=Hi(t);return ji.encodeByteArray(e,!0)}(t).replace(/\./g,"")},Zi=function(t){try{return ji.decodeString(t,!0)}catch(uJ){console.error("base64Decode failed: ",uJ)}return null};const Yi=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,qi=()=>{try{return Yi()||(()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",PUBLIC_URL:"/IFCReactApp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDWFdP9aE8vAwyMG1jq6pc0_MHr6ItLk84",REACT_APP_FIREBASE_APP_ID:"1:54427550535:web:56f3c2daa707f1606e8262",REACT_APP_FIREBASE_AUTH_DOMAIN:"ifc-react-app.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"54427550535",REACT_APP_FIREBASE_PROJECT_ID:"ifc-react-app",REACT_APP_FIREBASE_STORAGE_BUCKET:"ifc-react-app.appspot.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoiYmltY2EiLCJhIjoiY2xmMXJ4ZGhrMGJhazN4bGg2YTAwZG5heSJ9.OQdD57WTOQigRXhxpjfaqA"}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(uJ){return}const e=t&&Zi(t[1]);return e&&JSON.parse(e)})()}catch(uJ){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(uJ))}},Xi=t=>{var e,n;return null===(n=null===(e=qi())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},Ki=t=>{const e=Xi(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Qi=()=>{var t;return null===(t=qi())||void 0===t?void 0:t.config},Ji=t=>{var e;return null===(e=qi())||void 0===e?void 0:e["_".concat(t)]};class $i{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function tr(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wi(JSON.stringify({alg:"none",type:"JWT"})),Wi(JSON.stringify(s)),""].join(".")}function er(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function nr(){var t;const e=null===(t=qi())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(uJ){return!1}}class ir extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rr.prototype.create)}}class rr{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t){const e=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(t),i=this.errors[t],r=i?function(t,e){return t.replace(sr,((t,n)=>{const i=e[n];return null!=i?String(i):"<".concat(n,"?>")}))}(i,e):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new ir(n,s,e)}}const sr=/\{\$([^}]+)}/g;function or(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(ar(n)&&ar(s)){if(!or(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ar(t){return null!==t&&"object"===typeof t}function lr(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function hr(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function cr(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class ur{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!==typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"===typeof t[n])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=pr),void 0===i.error&&(i.error=pr),void 0===i.complete&&(i.complete=pr);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(uJ){}})),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(uJ){"undefined"!==typeof console&&console.error&&console.error(uJ)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function pr(){}function dr(t){return t&&t._delegate?t._delegate:t}class fr{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const mr="[DEFAULT]";class gr{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new $i;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(uJ){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(uJ){if(i)return null;throw uJ}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:mr})}catch(uJ){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(uJ){}}}}clearInstance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr;return this.instances.has(t)}getOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr;return this.instancesOptions.get(t)||{}}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(Ob){}}getOrInitializeService(t){let{instanceIdentifier:e,options:n={}}=t,i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===mr?void 0:r),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(Ob){}var r;return i||null}normalizeInstanceIdentifier(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr;return this.component?this.component.multipleInstances?t:mr:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class yr{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new gr(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const vr=[];var _r;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(_r||(_r={}));const Tr={debug:_r.DEBUG,verbose:_r.VERBOSE,info:_r.INFO,warn:_r.WARN,error:_r.ERROR,silent:_r.SILENT},Er=_r.INFO,xr={[_r.DEBUG]:"log",[_r.VERBOSE]:"log",[_r.INFO]:"info",[_r.WARN]:"warn",[_r.ERROR]:"error"},br=function(t,e){if(e<t.logLevel)return;const n=(new Date).toISOString(),i=xr[e];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];console[i]("[".concat(n,"]  ").concat(t.name,":"),...s)};class Ir{constructor(t){this.name=t,this._logLevel=Er,this._logHandler=br,this._userLogHandler=null,vr.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in _r))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?Tr[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_r.DEBUG,...e),this._logHandler(this,_r.DEBUG,...e)}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_r.VERBOSE,...e),this._logHandler(this,_r.VERBOSE,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_r.INFO,...e),this._logHandler(this,_r.INFO,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_r.WARN,...e),this._logHandler(this,_r.WARN,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_r.ERROR,...e),this._logHandler(this,_r.ERROR,...e)}}const wr=(t,e)=>e.some((e=>t instanceof e));let Sr,Rr;const Cr=new WeakMap,Ar=new WeakMap,Dr=new WeakMap,Or=new WeakMap,Nr=new WeakMap;let Mr={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Ar.get(t);if("objectStoreNames"===e)return t.objectStoreNames||Dr.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Lr(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Pr(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Rr||(Rr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(kr(this),n),Lr(Cr.get(this))}:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Lr(t.apply(kr(this),n))}:function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=t.call(kr(this),e,...i);return Dr.set(s,e.sort?e.sort():[e]),Lr(s)}}function Fr(t){return"function"===typeof t?Pr(t):(t instanceof IDBTransaction&&function(t){if(Ar.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));Ar.set(t,e)}(t),wr(t,Sr||(Sr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,Mr):t)}function Lr(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(Lr(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&Cr.set(e,t)})).catch((()=>{})),Nr.set(e,t),e}(t);if(Or.has(t))return Or.get(t);const e=Fr(t);return e!==t&&(Or.set(t,e),Nr.set(e,t)),e}const kr=t=>Nr.get(t);const Ur=["get","getKey","getAll","getAllKeys","count"],Br=["put","add","delete","clear"],zr=new Map;function Gr(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(zr.get(e))return zr.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Br.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Ur.includes(n))return;const s=async function(t){const e=this.transaction(t,r?"readwrite":"readonly");let s=e.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return i&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),r&&e.done]))[0]};return zr.set(e,s),s}Mr=(t=>({...t,get:(e,n,i)=>Gr(e,n)||t.get(e,n,i),has:(e,n)=>!!Gr(e,n)||t.has(e,n)}))(Mr);class Hr{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){const e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null})).filter((t=>t)).join(" ")}}const jr="@firebase/app",Vr="0.9.4",Wr=new Ir("@firebase/app"),Zr="[DEFAULT]",Yr={[jr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},qr=new Map,Xr=new Map;function Kr(t,e){try{t.container.addComponent(e)}catch(uJ){Wr.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),uJ)}}function Qr(t){const e=t.name;if(Xr.has(e))return Wr.debug("There were multiple attempts to register component ".concat(e,".")),!1;Xr.set(e,t);for(const n of qr.values())Kr(n,t);return!0}function Jr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const $r=new rr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ts{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fr("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}const es="9.17.2";function ns(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;if("object"!==typeof e){e={name:e}}const i=Object.assign({name:Zr,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!==typeof r||!r)throw $r.create("bad-app-name",{appName:String(r)});if(n||(n=Qi()),!n)throw $r.create("no-options");const s=qr.get(r);if(s){if(or(n,s.options)&&or(i,s.config))return s;throw $r.create("duplicate-app",{appName:r})}const o=new yr(r);for(const l of Xr.values())o.addComponent(l);const a=new ts(n,i,o);return qr.set(r,a),a}function is(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zr;const e=qr.get(t);if(!e&&t===Zr)return ns();if(!e)throw $r.create("no-app",{appName:t});return e}function rs(t,e,n){var i;let r=null!==(i=Yr[t])&&void 0!==i?i:t;n&&(r+="-".concat(n));const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=['Unable to register library "'.concat(r,'" with version "').concat(e,'":')];return s&&t.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&o&&t.push("and"),o&&t.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void Wr.warn(t.join(" "))}Qr(new fr("".concat(r,"-version"),(()=>({library:r,version:e})),"VERSION"))}const ss="firebase-heartbeat-database",os=1,as="firebase-heartbeat-store";let ls=null;function hs(){return ls||(ls=function(t,e){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(t,e),a=Lr(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(Lr(o.result),t.oldVersion,t.newVersion,Lr(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),a}(ss,os,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(as)}}).catch((t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})}))),ls}async function cs(t,e){try{const n=(await hs()).transaction(as,"readwrite"),i=n.objectStore(as);return await i.put(e,us(t)),n.done}catch(uJ){if(uJ instanceof ir)Wr.warn(uJ.message);else{const e=$r.create("idb-set",{originalErrorMessage:null===uJ||void 0===uJ?void 0:uJ.message});Wr.warn(e.message)}}}function us(t){return"".concat(t.name,"!").concat(t.options.appId)}const ps=1024;class ds{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new ms(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=fs();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=fs(),{heartbeatsToSend:e,unsentEntries:n}=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ps;const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),gs(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),gs(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=Wi(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function fs(){return(new Date).toISOString().substring(0,10)}class ms{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(uJ){return!1}}()&&new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{return(await hs()).transaction(as).objectStore(as).get(us(t))}catch(uJ){if(uJ instanceof ir)Wr.warn(uJ.message);else{const e=$r.create("idb-get",{originalErrorMessage:null===uJ||void 0===uJ?void 0:uJ.message});Wr.warn(e.message)}}}(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return cs(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return cs(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function gs(t){return Wi(JSON.stringify({version:2,heartbeats:t})).length}var ys;ys="",Qr(new fr("platform-logger",(t=>new Hr(t)),"PRIVATE")),Qr(new fr("heartbeat",(t=>new ds(t)),"PRIVATE")),rs(jr,Vr,ys),rs(jr,Vr,"esm2017"),rs("fire-js","");function vs(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}Object.create;Object.create;function _s(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ts=_s,Es=new rr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xs=new Ir("@firebase/auth");function bs(t){if(xs.logLevel<=_r.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];xs.error("Auth (".concat(es,"): ").concat(t),...n)}}function Is(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw Cs(t,...n)}function ws(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Cs(t,...n)}function Ss(t,e,n){const i=Object.assign(Object.assign({},Ts()),{[e]:n});return new rr("auth","Firebase",i).create(e,{appName:t.name})}function Rs(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&Is(t,"argument-error"),Ss(t,"argument-error","Type of ".concat(e.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Cs(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if("string"!==typeof t){const e=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(e,...i)}return Es.create(t,...n)}function As(t,e){if(!t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw Cs(e,...i)}}function Ds(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bs(e),new Error(e)}function Os(t,e){t||Ds(e)}const Ns=new Map;function Ms(t){Os(t instanceof Function,"Expected a class definition");let e=Ns.get(t);return e?(Os(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ns.set(t,e),e)}function Ps(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function Fs(){return"http:"===Ls()||"https:"===Ls()}function Ls(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function ks(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Fs()||function(){const t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class Us{constructor(t,e){this.shortDelay=t,this.longDelay=e,Os(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(er())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return ks()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Bs(t,e){Os(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?"".concat(n).concat(e.startsWith("/")?e.slice(1):e):n}class zs{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Gs={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Hs=new Us(3e4,6e4);function js(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Vs(t,e,n,i){return Ws(t,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let r={},s={};i&&("GET"===e?s=i:r={body:JSON.stringify(i)});const o=lr(Object.assign({key:t.config.apiKey},s)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),zs.fetch()(Ys(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},r))}))}async function Ws(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Gs),e);try{const e=new qs(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw Xs(t,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const e=r.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Xs(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Xs(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw Xs(t,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Ss(t,a,o);Is(t,a)}}catch(uJ){if(uJ instanceof ir)throw uJ;Is(t,"internal-error",{message:String(uJ)})}}async function Zs(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Vs(t,e,n,i,r);return"mfaPendingCredential"in s&&Is(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Ys(t,e,n,i){const r="".concat(e).concat(n,"?").concat(i);return t.config.emulator?Bs(t.config,r):"".concat(t.config.apiScheme,"://").concat(r)}class qs{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(ws(this.auth,"network-request-failed"))),Hs.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xs(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ws(t,e,i);return r.customData._tokenResponse=n,r}function Ks(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(uJ){}}function Qs(t){return 1e3*Number(t)}function Js(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return bs("JWT malformed, contained fewer than 3 sections"),null;try{const t=Zi(n);return t?JSON.parse(t):(bs("Failed to decode base64 JWT payload"),null)}catch(uJ){return bs("Caught error parsing JWT payload as JSON",null===uJ||void 0===uJ?void 0:uJ.toString()),null}}async function $s(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return e;try{return await e}catch(uJ){throw uJ instanceof ir&&function(t){let{code:e}=t;return e==="auth/".concat("user-disabled")||e==="auth/".concat("user-token-expired")}(uJ)&&t.auth.currentUser===t&&await t.auth.signOut(),uJ}}class to{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(uJ){return void((null===uJ||void 0===uJ?void 0:uJ.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class eo{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ks(this.lastLoginAt),this.creationTime=Ks(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function no(t){var e;const n=t.auth,i=await t.getIdToken(),r=await $s(t,async function(t,e){return Vs(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));As(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?s.providerUserInfo.map((t=>{var{providerId:e}=t,n=vs(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=function(t,e){const n=t.filter((t=>!e.some((e=>e.providerId===t.providerId))));return[...n,...e]}(t.providerData,o),l=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),c=!!l&&h,u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new eo(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,u)}class io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){As(t.idToken,"internal-error"),As("undefined"!==typeof t.idToken,"internal-error"),As("undefined"!==typeof t.refreshToken,"internal-error");const e="expiresIn"in t&&"undefined"!==typeof t.expiresIn?Number(t.expiresIn):function(t){const e=Js(t);return As(e,"internal-error"),As("undefined"!==typeof e.exp,"internal-error"),As("undefined"!==typeof e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return As(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(t,e){const n=await Ws(t,{},(async()=>{const n=lr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,s=Ys(t,i,"/v1/token","key=".concat(r)),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",zs.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new io;return n&&(As("string"===typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(As("string"===typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(As("number"===typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new io,this.toJSON())}_performRefresh(){return Ds("not implemented")}}function ro(t,e){As("string"===typeof t||"undefined"===typeof t,"internal-error",{appName:e})}class so{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=vs(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new to(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new eo(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await $s(this,this.stsTokenManager.getToken(this.auth,t));return As(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=dr(t),i=await n.getIdToken(e),r=Js(i);As(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ks(Qs(r.auth_time)),issuedAtTime:Ks(Qs(r.iat)),expirationTime:Ks(Qs(r.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=dr(t);await no(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(As(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new so(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){As(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await no(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await $s(this,async function(t,e){return Vs(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,l,h;const c=null!==(n=e.displayName)&&void 0!==n?n:void 0,u=null!==(i=e.email)&&void 0!==i?i:void 0,p=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,d=null!==(s=e.photoURL)&&void 0!==s?s:void 0,f=null!==(o=e.tenantId)&&void 0!==o?o:void 0,m=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=e.createdAt)&&void 0!==l?l:void 0,y=null!==(h=e.lastLoginAt)&&void 0!==h?h:void 0,{uid:v,emailVerified:_,isAnonymous:T,providerData:E,stsTokenManager:x}=e;As(v&&x,t,"internal-error");const b=io.fromJSON(this.name,x);As("string"===typeof v,t,"internal-error"),ro(c,t.name),ro(u,t.name),As("boolean"===typeof _,t,"internal-error"),As("boolean"===typeof T,t,"internal-error"),ro(p,t.name),ro(d,t.name),ro(f,t.name),ro(m,t.name),ro(g,t.name),ro(y,t.name);const I=new so({uid:v,auth:t,email:u,emailVerified:_,displayName:c,isAnonymous:T,photoURL:d,phoneNumber:p,tenantId:f,stsTokenManager:b,createdAt:g,lastLoginAt:y});return E&&Array.isArray(E)&&(I.providerData=E.map((t=>Object.assign({},t)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new io;i.updateFromServerResponse(e);const r=new so({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await no(r),r}}class oo{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}oo.type="NONE";const ao=oo;function lo(t,e,n){return"firebase".concat(":",t,":").concat(e,":").concat(n)}class ho{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=lo(this.userKey,i.apiKey,r),this.fullPersistenceKey=lo("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?so._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!e.length)return new ho(Ms(ao),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=i[0]||Ms(ao);const s=lo(n,t.config.apiKey,t.name);let o=null;for(const l of e)try{const e=await l._get(s);if(e){const n=so._fromJSON(t,e);l!==r&&(o=n),r=l;break}}catch(Ob){}const a=i.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(s)}catch(Ob){}}))),new ho(r,t,n)):new ho(r,t,n)}}function co(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mo(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uo(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yo(e))return"Blackberry";if(vo(e))return"Webos";if(po(e))return"Safari";if((e.includes("chrome/")||fo(e))&&!e.includes("edge/"))return"Chrome";if(go(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function uo(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er();return/firefox\//i.test(t)}function po(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:er()).toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function fo(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er();return/crios\//i.test(t)}function mo(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er();return/iemobile/i.test(t)}function go(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er();return/android/i.test(t)}function yo(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er();return/blackberry/i.test(t)}function vo(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er();return/webos/i.test(t)}function _o(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er();return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function To(){return function(){const t=er();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}function Eo(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er();return _o(t)||go(t)||vo(t)||yo(t)||/windows phone/i.test(t)||mo(t)}function xo(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(t){case"Browser":e=co(er());break;case"Worker":e="".concat(co(er()),"-").concat(t);break;default:e=t}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(e,"/","JsCore","/").concat(es,"/").concat(i)}class bo{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,i)=>{try{n(t(e))}catch(uJ){i(uJ)}}));n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(uJ){e.reverse();for(const i of e)try{i()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===uJ||void 0===uJ?void 0:uJ.message})}}}class Io{constructor(t,e,n){this.app=t,this.heartbeatServiceProvider=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new So(this),this.idTokenSubscription=new So(this),this.beforeStateQueue=new bo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Es,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ms(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await ho.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(uJ){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(uJ){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(uJ)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return As(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(uJ){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await no(t)}catch(uJ){if((null===uJ||void 0===uJ?void 0:uJ.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?dr(t):null;return e&&As(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return t&&As(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Ms(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new rr("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ms(t)||this._popupRedirectResolver;As(e,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[Ms(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"===typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return As(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"===typeof e?t.addObserver(e,n,i):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return As(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=xo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());return n&&(e["X-Firebase-Client"]=n),e}}function wo(t){return dr(t)}class So{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new ur(t,e);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return As(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ro(t,e,n){const i=wo(t);As(i._canInitEmulator,i,"emulator-config-failed"),As(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Co(e),{host:o,port:a}=function(t){const e=Co(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:Ao(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Ao(e)}}}(e),l=null===a?"":":".concat(a);i.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}function Co(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ao(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class Do{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Ds("not implemented")}_getIdTokenResponse(t){return Ds("not implemented")}_linkToIdToken(t,e){return Ds("not implemented")}_getReauthenticationResolver(t){return Ds("not implemented")}}async function Oo(t,e){return Vs(t,"POST","/v1/accounts:update",e)}class No extends Do{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new No(t,e,"password")}static _fromEmailAndCode(t,e){return new No(t,e,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t;if((null===e||void 0===e?void 0:e.email)&&(null===e||void 0===e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return async function(t,e){return Zs(t,"POST","/v1/accounts:signInWithPassword",js(t,e))}(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return Zs(t,"POST","/v1/accounts:signInWithEmailLink",js(t,e))}(t,{email:this._email,oobCode:this._password});default:Is(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return Oo(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return Zs(t,"POST","/v1/accounts:signInWithEmailLink",js(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:Is(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Mo(t,e){return Zs(t,"POST","/v1/accounts:signInWithIdp",js(t,e))}class Po extends Do{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Po(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Is("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=vs(e,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Po(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(t){return Mo(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Mo(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Mo(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=lr(e)}return t}}const Fo={USER_NOT_FOUND:"user-not-found"};class Lo extends Do{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new Lo({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new Lo({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return Zs(t,"POST","/v1/accounts:signInWithPhoneNumber",js(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await Zs(t,"POST","/v1/accounts:signInWithPhoneNumber",js(t,e));if(n.temporaryProof)throw Xs(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return Zs(t,"POST","/v1/accounts:signInWithPhoneNumber",js(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Fo)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"===typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new Lo({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class ko{constructor(t){var e,n,i,r,s,o;const a=hr(cr(t)),l=null!==(e=a.apiKey)&&void 0!==e?e:null,h=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);As(l&&h&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=h,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=hr(cr(t)).link,n=e?hr(cr(e)).deep_link_id:null,i=hr(cr(t)).deep_link_id;return(i?hr(cr(i)).link:null)||i||n||e||t}(t);try{return new ko(e)}catch(Ob){return null}}}class Uo{constructor(){this.providerId=Uo.PROVIDER_ID}static credential(t,e){return No._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=ko.parseLink(e);return As(n,"argument-error"),No._fromEmailAndCode(t,n.code,n.tenantId)}}Uo.PROVIDER_ID="password",Uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Bo{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class zo extends Bo{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Go extends zo{constructor(){super("facebook.com")}static credential(t){return Po._fromParams({providerId:Go.PROVIDER_ID,signInMethod:Go.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Go.credentialFromTaggedObject(t)}static credentialFromError(t){return Go.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Go.credential(e.oauthAccessToken)}catch(Ob){return null}}}Go.FACEBOOK_SIGN_IN_METHOD="facebook.com",Go.PROVIDER_ID="facebook.com";class Ho extends zo{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Po._fromParams({providerId:Ho.PROVIDER_ID,signInMethod:Ho.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Ho.credentialFromTaggedObject(t)}static credentialFromError(t){return Ho.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ho.credential(n,i)}catch(Ob){return null}}}Ho.GOOGLE_SIGN_IN_METHOD="google.com",Ho.PROVIDER_ID="google.com";class jo extends zo{constructor(){super("github.com")}static credential(t){return Po._fromParams({providerId:jo.PROVIDER_ID,signInMethod:jo.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return jo.credentialFromTaggedObject(t)}static credentialFromError(t){return jo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return jo.credential(e.oauthAccessToken)}catch(Ob){return null}}}jo.GITHUB_SIGN_IN_METHOD="github.com",jo.PROVIDER_ID="github.com";class Vo extends zo{constructor(){super("twitter.com")}static credential(t,e){return Po._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Vo.credentialFromTaggedObject(t)}static credentialFromError(t){return Vo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Vo.credential(n,i)}catch(Ob){return null}}}Vo.TWITTER_SIGN_IN_METHOD="twitter.com",Vo.PROVIDER_ID="twitter.com";class Wo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await so._fromIdTokenResponse(t,n,i),s=Zo(n);return new Wo({user:r,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=Zo(n);return new Wo({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function Zo(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Yo extends ir{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Yo.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new Yo(t,e,n,i)}}function qo(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Yo._fromErrorAndOperation(t,n,e,i);throw n}))}async function Xo(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await $s(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wo._forOperation(t,"link",i)}async function Ko(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=t,r="reauthenticate";try{const s=await $s(t,qo(i,r,e,t),n);As(s.idToken,i,"internal-error");const o=Js(s.idToken);As(o,i,"internal-error");const{sub:a}=o;return As(t.uid===a,i,"user-mismatch"),Wo._forOperation(t,r,s)}catch(uJ){throw(null===uJ||void 0===uJ?void 0:uJ.code)==="auth/".concat("user-not-found")&&Is(i,"user-mismatch"),uJ}}async function Qo(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i="signIn",r=await qo(t,i,e),s=await Wo._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}new WeakMap;const Jo="__sak";class $o{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Jo,"1"),this.storage.removeItem(Jo),Promise.resolve(!0)):Promise.resolve(!1)}catch(Ob){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class ta extends $o{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=er();return po(t)||_o(t)}()&&function(){try{return!(!window||window===window.top)}catch(uJ){return!1}}(),this.fallbackToPolling=Eo(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);To()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,10):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}ta.type="LOCAL";const ea=ta;class na extends $o{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}na.type="SESSION";const ia=na;class ra{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new ra(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async t=>t(e.origin,r))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function sa(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<e;i++)n+=Math.floor(10*Math.random());return t+n}ra.receivers=[];class oa{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const l=sa("",20);i.port1.start();const h=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(h),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(h),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:e},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function aa(){return window}function la(){return"undefined"!==typeof aa().WorkerGlobalScope&&"function"===typeof aa().importScripts}const ha="firebaseLocalStorageDb",ca=1,ua="firebaseLocalStorage",pa="fbase_key";class da{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function fa(t,e){return t.transaction([ua],e?"readwrite":"readonly").objectStore(ua)}function ma(){const t=indexedDB.open(ha,ca);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(ua,{keyPath:pa})}catch(uJ){n(uJ)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(ua)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(ha);return new da(t).toPromise()}(),e(await ma()))}))}))}async function ga(t,e,n){const i=fa(t,!0).put({[pa]:e,value:n});return new da(i).toPromise()}function ya(t,e){const n=fa(t,!0).delete(e);return new da(n).toPromise()}class va{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await ma()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(uJ){if(e++>3)throw uJ;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return la()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ra._getInstance(la()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new oa(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&function(){var t;return(null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(Ob){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await ma();return await ga(t,Jo,"1"),await ya(t,Jo),!0}catch(Ob){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>ga(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=fa(t,!1).get(e),i=await new da(n).toPromise();return void 0===i?null:i.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>ya(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=fa(t,!1).getAll();return new da(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}va.type="LOCAL";const _a=va;function Ta(t){return new Promise(((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=ws("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",function(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(i)}))}function Ea(t){return"__".concat(t).concat(Math.floor(1e6*Math.random()))}Ea("rcb"),new Us(3e4,6e4);const xa="recaptcha";async function ba(t,e,n){var i;const r=await n.verify();try{let s;if(As("string"===typeof r,t,"argument-error"),As(n.type===xa,t,"argument-error"),s="string"===typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){As("enroll"===e.type,t,"internal-error");const n=await function(t,e){return Vs(t,"POST","/v2/accounts/mfaEnrollment:start",js(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{As("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;As(n,t,"missing-multi-factor-info");const o=await function(t,e){return Vs(t,"POST","/v2/accounts/mfaSignIn:start",js(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return Vs(t,"POST","/v1/accounts:sendVerificationCode",js(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}class Ia{constructor(t){this.providerId=Ia.PROVIDER_ID,this.auth=wo(t)}verifyPhoneNumber(t,e){return ba(this.auth,t,dr(e))}static credential(t,e){return Lo._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Ia.credentialFromTaggedObject(e)}static credentialFromError(t){return Ia.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?Lo._fromTokenResponse(n,i):null}}function wa(t,e){return e?Ms(e):(As(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}Ia.PROVIDER_ID="phone",Ia.PHONE_SIGN_IN_METHOD="phone";class Sa extends Do{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Mo(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Mo(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Mo(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Ra(t){return Qo(t.auth,new Sa(t),t.bypassAuthState)}function Ca(t){const{auth:e,user:n}=t;return As(n,e,"internal-error"),Ko(n,new Sa(t),t.bypassAuthState)}async function Aa(t){const{auth:e,user:n}=t;return As(n,e,"internal-error"),Xo(n,new Sa(t),t.bypassAuthState)}class Da{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(uJ){this.reject(uJ)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(uJ){this.reject(uJ)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Ra;case"linkViaPopup":case"linkViaRedirect":return Aa;case"reauthViaPopup":case"reauthViaRedirect":return Ca;default:Is(this.auth,"internal-error")}}resolve(t){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Oa=new Us(2e3,1e4);class Na extends Da{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Na.currentPopupAction&&Na.currentPopupAction.cancel(),Na.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return As(t,this.auth,"internal-error"),t}async onExecution(){Os(1===this.filter.length,"Popup operations only handle one event");const t=sa();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(ws(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(ws(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Na.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(ws(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(t,Oa.get())};t()}}Na.currentPopupAction=null;const Ma="pendingRedirect",Pa=new Map;class Fa extends Da{constructor(t,e){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let t=Pa.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=Ua(e),i=ka(t);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(e)}catch(uJ){t=()=>Promise.reject(uJ)}Pa.set(this.auth._key(),t)}return this.bypassAuthState||Pa.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function La(t,e){Pa.set(t._key(),e)}function ka(t){return Ms(t._redirectPersistence)}function Ua(t){return lo(Ma,t.config.apiKey,t.name)}async function Ba(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=wo(t),r=wa(i,e),s=new Fa(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}class za{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ha(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Ha(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(ws(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ga(t))}saveEventToCache(t){this.cachedEventUids.add(Ga(t)),this.lastProcessedEventTime=Date.now()}}function Ga(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function Ha(t){let{type:e,error:n}=t;return"unknown"===e&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const ja=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Va=/^https?/;async function Wa(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t){return Vs(t,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(t);for(const n of e)try{if(Za(n))return}catch(Ob){}Is(t,"unauthorized-domain")}function Za(t){const e=Ps(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Va.test(n))return!1;if(ja.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Ya=new Us(3e4,6e4);function qa(){const t=aa().___jsl;if(null===t||void 0===t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}let Xa=null;function Ka(t){return Xa=Xa||function(t){return new Promise(((e,n)=>{var i,r,s;function o(){qa(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qa(),n(ws(t,"network-request-failed"))},timeout:Ya.get()})}if(null===(r=null===(i=aa().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=aa().gapi)||void 0===s?void 0:s.load)){const e=Ea("iframefcb");return aa()[e]=()=>{gapi.load?o():n(ws(t,"network-request-failed"))},Ta("https://apis.google.com/js/api.js?onload=".concat(e)).catch((t=>n(t)))}o()}})).catch((t=>{throw Xa=null,t}))}(t),Xa}const Qa=new Us(5e3,15e3),Ja="__/auth/iframe",$a="emulator/auth/iframe",tl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},el=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nl(t){const e=t.config;As(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Bs(e,$a):"https://".concat(t.config.authDomain,"/").concat(Ja),i={apiKey:e.apiKey,appName:t.name,v:es},r=el.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat(lr(i).slice(1))}const il={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rl=500,sl=600,ol="_blank",al="http://localhost";class ll{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(uJ){}}}function hl(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rl,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:sl;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},il),{width:i.toString(),height:r.toString(),top:s,left:o}),h=er().toLowerCase();n&&(a=fo(h)?ol:n),uo(h)&&(e=e||al,l.scrollbars="yes");const c=Object.entries(l).reduce(((t,e)=>{let[n,i]=e;return"".concat(t).concat(n,"=").concat(i,",")}),"");if(function(){var t;return _o(arguments.length>0&&void 0!==arguments[0]?arguments[0]:er())&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(h)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",a),new ll(null);const u=window.open(e||"",a,c);As(u,t,"popup-blocked");try{u.focus()}catch(uJ){}return new ll(u)}const cl="__/auth/handler",ul="emulator/auth/handler";function pl(t,e,n,i,r,s){As(t.config.authDomain,t,"auth-domain-config-required"),As(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:es,eventId:r};if(e instanceof Bo){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))o[t]=e}if(e instanceof zo){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];return"".concat(function(t){let{config:e}=t;if(!e.emulator)return"https://".concat(e.authDomain,"/").concat(cl);return Bs(e,ul)}(t),"?").concat(lr(a).slice(1))}const dl="webStorageSupport";const fl=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ia,this._completeRedirectFn=Ba,this._overrideRedirectResult=La}async _openPopup(t,e,n,i){var r;Os(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return hl(t,pl(t,e,n,Ps(),i),sa())}async _openRedirect(t,e,n,i){var r;return await this._originValidation(t),r=pl(t,e,n,Ps(),i),aa().location.href=r,new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(Os(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await async function(t){const e=await Ka(t),n=aa().gapi;return As(n,t,"internal-error"),e.open({where:document.body,url:nl(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tl,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=ws(t,"network-request-failed"),s=aa().setTimeout((()=>{i(r)}),Qa.get());function o(){aa().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{i(r)}))}))))}(t),n=new za(t);return e.register("authEvent",(e=>{As(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event");return{status:n.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(dl,{type:dl},(n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[dl];void 0!==r&&e(!!r),Is(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Wa(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Eo()||po()||_o()}};var ml="@firebase/auth",gl="0.21.4";class yl{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(t)}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null===e||void 0===e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){As(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const vl=Ji("authIdTokenMaxAge")||300;let _l=null;const Tl=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>vl)return;const r=null===n||void 0===n?void 0:n.token;_l!==r&&(_l=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))};function El(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:is();const e=Jr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function(t,e){const n=Jr(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(or(n.getOptions(),null!==e&&void 0!==e?e:{}))return t;Is(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:fl,persistence:[_a,ea,ia]}),i=Ji("authTokenSyncURL");if(i){const t=Tl(i);!function(t,e,n){dr(t).beforeAuthStateChanged(e,n)}(n,t,(()=>t(n.currentUser))),function(t,e,n,i){dr(t).onIdTokenChanged(e,n,i)}(n,(e=>t(e)))}const r=Xi("auth");return r&&Ro(n,"http://".concat(r)),n}var xl;xl="Browser",Qr(new fr("auth",((t,e)=>{let{options:n}=e;const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),{apiKey:s,authDomain:o}=i.options;return((t,e)=>{As(s&&!s.includes(":"),"invalid-api-key",{appName:t.name}),As(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:t.name});const i={apiKey:s,authDomain:o,clientPlatform:xl,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xo(xl)},r=new Io(t,e,i);return function(t,e){const n=(null===e||void 0===e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ms);(null===e||void 0===e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null===e||void 0===e?void 0:e.popupRedirectResolver)}(r,n),r})(i,r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),Qr(new fr("auth-internal",(t=>(t=>new yl(t))(wo(t.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),rs(ml,gl,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(xl)),rs(ml,gl,"esm2017");let bl=!1;const Il=()=>{const t=El(),n=Grt()[1],i=()=>{!function(t,e,n,i){dr(t).onAuthStateChanged(e,n,i)}(t,(t=>{const e=t?{...t}:null;n({type:"UPDATE_USER",payload:e})}))};return(0,e.useEffect)((()=>{bl||(i(),bl=!0)}),[]),(0,Nt.jsx)(Nt.Fragment,{})},wl="135",Sl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Rl=0,Cl=1,Al=2,Dl=1,Ol=2,Nl=3,Ml=0,Pl=1,Fl=2,Ll=0,kl=1,Ul=2,Bl=3,zl=4,Gl=5,Hl=100,jl=101,Vl=102,Wl=103,Zl=104,Yl=200,ql=201,Xl=202,Kl=203,Ql=204,Jl=205,$l=206,th=207,eh=208,nh=209,ih=210,rh=0,sh=1,oh=2,ah=3,lh=4,hh=5,ch=6,uh=7,ph=0,dh=1,fh=2,mh=0,gh=1,yh=2,vh=3,_h=4,Th=5,Eh=301,xh=302,bh=303,Ih=304,wh=306,Sh=307,Rh=1e3,Ch=1001,Ah=1002,Dh=1003,Oh=1004,Nh=1005,Mh=1006,Ph=1007,Fh=1008,Lh=1009,kh=1010,Uh=1011,Bh=1012,zh=1013,Gh=1014,Hh=1015,jh=1016,Vh=1017,Wh=1018,Zh=1019,Yh=1020,qh=1021,Xh=1022,Kh=1023,Qh=1024,Jh=1025,$h=Kh,tc=1026,ec=1027,nc=1028,ic=1029,rc=1030,sc=1031,oc=1032,ac=1033,lc=33776,hc=33777,cc=33778,uc=33779,pc=35840,dc=35841,fc=35842,mc=35843,gc=36196,yc=37492,vc=37496,_c=37808,Tc=37809,Ec=37810,xc=37811,bc=37812,Ic=37813,wc=37814,Sc=37815,Rc=37816,Cc=37817,Ac=37818,Dc=37819,Oc=37820,Nc=37821,Mc=36492,Pc=37840,Fc=37841,Lc=37842,kc=37843,Uc=37844,Bc=37845,zc=37846,Gc=37847,Hc=37848,jc=37849,Vc=37850,Wc=37851,Zc=37852,Yc=37853,qc=2300,Xc=2301,Kc=2302,Qc=2400,Jc=2401,$c=2402,tu=2500,eu=2501,nu=2,iu=3e3,ru=3001,su=3007,ou=3002,au=3004,lu=3005,hu=3006,cu=3201,uu=0,pu=1,du=7680,fu=35044,mu=35048,gu="300 es";class yu{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t);t.target=null}}}const vu=[];for(let n=0;n<256;n++)vu[n]=(n<16?"0":"")+n.toString(16);let _u=1234567;const Tu=Math.PI/180,Eu=180/Math.PI;function xu(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(vu[255&t]+vu[t>>8&255]+vu[t>>16&255]+vu[t>>24&255]+"-"+vu[255&e]+vu[e>>8&255]+"-"+vu[e>>16&15|64]+vu[e>>24&255]+"-"+vu[63&n|128]+vu[n>>8&255]+"-"+vu[n>>16&255]+vu[n>>24&255]+vu[255&i]+vu[i>>8&255]+vu[i>>16&255]+vu[i>>24&255]).toUpperCase()}function bu(t,e,n){return Math.max(e,Math.min(n,t))}function Iu(t,e){return(t%e+e)%e}function wu(t,e,n){return(1-n)*t+n*e}function Su(t){return 0===(t&t-1)&&0!==t}function Ru(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Cu(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var Au=Object.freeze({__proto__:null,DEG2RAD:Tu,RAD2DEG:Eu,generateUUID:xu,clamp:bu,euclideanModulo:Iu,mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:wu,damp:function(t,e,n,i){return wu(t,e,1-Math.exp(-n*i))},pingpong:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e-Math.abs(Iu(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(_u=t%2147483647),_u=16807*_u%2147483647,(_u-1)/2147483646},degToRad:function(t){return t*Tu},radToDeg:function(t){return t*Eu},isPowerOfTwo:Su,ceilPowerOfTwo:Ru,floorPowerOfTwo:Cu,setQuaternionFromProperEuler:function(t,e,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),h=s((e+i)/2),c=o((e+i)/2),u=s((e-i)/2),p=o((e-i)/2),d=s((i-e)/2),f=o((i-e)/2);switch(r){case"XYX":t.set(a*c,l*u,l*p,a*h);break;case"YZY":t.set(l*p,a*c,l*u,a*h);break;case"ZXZ":t.set(l*u,l*p,a*c,a*h);break;case"XZX":t.set(a*c,l*f,l*d,a*h);break;case"YXY":t.set(l*d,a*c,l*f,a*h);break;case"ZYZ":t.set(l*f,l*d,a*c,a*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}});class Du{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Du.prototype.isVector2=!0;class Ou{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,s,o,a,l){const h=this.elements;return h[0]=t,h[1]=i,h[2]=o,h[3]=e,h[4]=r,h[5]=a,h[6]=n,h[7]=s,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],h=n[4],c=n[7],u=n[2],p=n[5],d=n[8],f=i[0],m=i[3],g=i[6],y=i[1],v=i[4],_=i[7],T=i[2],E=i[5],x=i[8];return r[0]=s*f+o*y+a*T,r[3]=s*m+o*v+a*E,r[6]=s*g+o*_+a*x,r[1]=l*f+h*y+c*T,r[4]=l*m+h*v+c*E,r[7]=l*g+h*_+c*x,r[2]=u*f+p*y+d*T,r[5]=u*m+p*v+d*E,r[8]=u*g+p*_+d*x,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],h=t[8];return e*s*h-e*o*l-n*r*h+n*o*a+i*r*l-i*s*a}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],h=t[8],c=h*s-o*l,u=o*a-h*r,p=l*r-s*a,d=e*c+n*u+i*p;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const f=1/d;return t[0]=c*f,t[1]=(i*l-h*n)*f,t[2]=(o*n-i*s)*f,t[3]=u*f,t[4]=(h*e-i*a)*f,t[5]=(i*r-o*e)*f,t[6]=p*f,t[7]=(n*a-l*e)*f,t[8]=(s*e-n*r)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,s,o){const a=Math.cos(r),l=Math.sin(r);return this.set(n*a,n*l,-n*(a*s+l*o)+s+t,-i*l,i*a,-i*(-l*s+a*o)+o+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],s=i[3],o=i[6],a=i[1],l=i[4],h=i[7];return i[0]=e*r+n*a,i[3]=e*s+n*l,i[6]=e*o+n*h,i[1]=-n*r+e*a,i[4]=-n*s+e*l,i[7]=-n*o+e*h,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function Nu(t){if(0===t.length)return-1/0;let e=t[0];for(let n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}Ou.prototype.isMatrix3=!0;Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function Mu(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Pu(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=3735928559^e,i=1103547991^e;for(let r,s=0;s<t.length;s++)r=t.charCodeAt(s),n=Math.imul(n^r,2654435761),i=Math.imul(i^r,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&i)+(n>>>0)}let Fu;class Lu{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Fu&&(Fu=Mu("canvas")),Fu.width=t.width,Fu.height=t.height;const n=Fu.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Fu}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}}let ku=0;class Uu extends yu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uu.DEFAULT_IMAGE,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uu.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ch,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ch,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Mh,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Fh,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Kh,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Lh,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:iu;super(),Object.defineProperty(this,"id",{value:ku++}),this.uuid=xu(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new Du(0,0),this.repeat=new Du(1,1),this.center=new Du(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ou,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const i=this.image;if(void 0===i.uuid&&(i.uuid=xu()),!e&&void 0===t.images[i.uuid]){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(Bu(i[t].image)):e.push(Bu(i[t]))}else e=Bu(i);t.images[i.uuid]={uuid:i.uuid,url:e}}n.image=i.uuid}return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Rh:t.x=t.x-Math.floor(t.x);break;case Ch:t.x=t.x<0?0:1;break;case Ah:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Rh:t.y=t.y-Math.floor(t.y);break;case Ch:t.y=t.y<0?0:1;break;case Ah:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&this.version++}}function Bu(t){return"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?Lu.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Uu.DEFAULT_IMAGE=void 0,Uu.DEFAULT_MAPPING=300,Uu.prototype.isTexture=!0;class zu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*e+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*e+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*e+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const s=.01,o=.1,a=t.elements,l=a[0],h=a[4],c=a[8],u=a[1],p=a[5],d=a[9],f=a[2],m=a[6],g=a[10];if(Math.abs(h-u)<s&&Math.abs(c-f)<s&&Math.abs(d-m)<s){if(Math.abs(h+u)<o&&Math.abs(c+f)<o&&Math.abs(d+m)<o&&Math.abs(l+p+g-3)<o)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,a=(p+1)/2,y=(g+1)/2,v=(h+u)/4,_=(c+f)/4,T=(d+m)/4;return t>a&&t>y?t<s?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(t),i=v/n,r=_/n):a>y?a<s?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(a),n=v/i,r=T/i):y<s?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(y),n=_/r,i=T/r),this.set(n,i,r,e),this}let y=Math.sqrt((m-d)*(m-d)+(c-f)*(c-f)+(u-h)*(u-h));return Math.abs(y)<.001&&(y=1),this.x=(m-d)/y,this.y=(c-f)/y,this.z=(u-h)/y,this.w=Math.acos((l+p+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}zu.prototype.isVector4=!0;class Gu extends yu{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.width=t,this.height=e,this.depth=1,this.scissor=new zu(0,0,t,e),this.scissorTest=!1,this.viewport=new zu(0,0,t,e),this.texture=new Uu(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:t,height:e,depth:1},this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Mh,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}setSize(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Gu.prototype.isWebGLRenderTarget=!0;(class extends Gu{constructor(t,e,n){super(t,e);const i=this.texture;this.texture=[];for(let r=0;r<n;r++)this.texture[r]=i.clone()}setSize(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=t,this.texture[i].image.height=e,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(let e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone();return this}}).prototype.isWebGLMultipleRenderTargets=!0;class Hu extends Gu{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(t,e,n),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===n.ignoreDepth||n.ignoreDepth,this.useRenderToTexture=void 0!==n.useRenderToTexture&&n.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(t){return super.copy.call(this,t),this.samples=t.samples,this.useRenderToTexture=t.useRenderToTexture,this.useRenderbuffer=t.useRenderbuffer,this}}Hu.prototype.isWebGLMultisampleRenderTarget=!0;class ju{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this._x=t,this._y=e,this._z=n,this._w=i}static slerp(t,e,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,i)}static slerpFlat(t,e,n,i,r,s,o){let a=n[i+0],l=n[i+1],h=n[i+2],c=n[i+3];const u=r[s+0],p=r[s+1],d=r[s+2],f=r[s+3];if(0===o)return t[e+0]=a,t[e+1]=l,t[e+2]=h,void(t[e+3]=c);if(1===o)return t[e+0]=u,t[e+1]=p,t[e+2]=d,void(t[e+3]=f);if(c!==f||a!==u||l!==p||h!==d){let t=1-o;const e=a*u+l*p+h*d+c*f,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),s=Math.atan2(r,e*n);t=Math.sin(t*s)/r,o=Math.sin(o*s)/r}const r=o*n;if(a=a*t+u*r,l=l*t+p*r,h=h*t+d*r,c=c*t+f*r,t===1-o){const t=1/Math.sqrt(a*a+l*l+h*h+c*c);a*=t,l*=t,h*=t,c*=t}}t[e]=a,t[e+1]=l,t[e+2]=h,t[e+3]=c}static multiplyQuaternionsFlat(t,e,n,i,r,s){const o=n[i],a=n[i+1],l=n[i+2],h=n[i+3],c=r[s],u=r[s+1],p=r[s+2],d=r[s+3];return t[e]=o*d+h*c+a*p-l*u,t[e+1]=a*d+h*u+l*c-o*p,t[e+2]=l*d+h*p+o*u-a*c,t[e+3]=h*d-o*c-a*u-l*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,i=t._y,r=t._z,s=t._order,o=Math.cos,a=Math.sin,l=o(n/2),h=o(i/2),c=o(r/2),u=a(n/2),p=a(i/2),d=a(r/2);switch(s){case"XYZ":this._x=u*h*c+l*p*d,this._y=l*p*c-u*h*d,this._z=l*h*d+u*p*c,this._w=l*h*c-u*p*d;break;case"YXZ":this._x=u*h*c+l*p*d,this._y=l*p*c-u*h*d,this._z=l*h*d-u*p*c,this._w=l*h*c+u*p*d;break;case"ZXY":this._x=u*h*c-l*p*d,this._y=l*p*c+u*h*d,this._z=l*h*d+u*p*c,this._w=l*h*c-u*p*d;break;case"ZYX":this._x=u*h*c-l*p*d,this._y=l*p*c+u*h*d,this._z=l*h*d-u*p*c,this._w=l*h*c+u*p*d;break;case"YZX":this._x=u*h*c+l*p*d,this._y=l*p*c+u*h*d,this._z=l*h*d-u*p*c,this._w=l*h*c-u*p*d;break;case"XZY":this._x=u*h*c-l*p*d,this._y=l*p*c-u*h*d,this._z=l*h*d+u*p*c,this._w=l*h*c+u*p*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],s=e[1],o=e[5],a=e[9],l=e[2],h=e[6],c=e[10],u=n+o+c;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(h-a)*t,this._y=(r-l)*t,this._z=(s-i)*t}else if(n>o&&n>c){const t=2*Math.sqrt(1+n-o-c);this._w=(h-a)/t,this._x=.25*t,this._y=(i+s)/t,this._z=(r+l)/t}else if(o>c){const t=2*Math.sqrt(1+o-n-c);this._w=(r-l)/t,this._x=(i+s)/t,this._y=.25*t,this._z=(a+h)/t}else{const t=2*Math.sqrt(1+c-n-o);this._w=(s-i)/t,this._x=(r+l)/t,this._y=(a+h)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(bu(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,s=t._w,o=e._x,a=e._y,l=e._z,h=e._w;return this._x=n*h+s*o+i*l-r*a,this._y=i*h+s*a+r*o-n*l,this._z=r*h+s*l+n*a-i*o,this._w=s*h-n*o-i*a-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,s=this._w;let o=s*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),h=Math.atan2(l,o),c=Math.sin((1-e)*h)/l,u=Math.sin(e*h)/l;return this._w=s*c+this._w*u,this._x=n*c+this._x*u,this._y=i*c+this._y*u,this._z=r*c+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,n){this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}ju.prototype.isQuaternion=!0;class Vu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Zu.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Zu.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z,a=t.w,l=a*e+s*i-o*n,h=a*n+o*e-r*i,c=a*i+r*n-s*e,u=-r*e-s*n-o*i;return this.x=l*a+u*-r+h*-o-c*-s,this.y=h*a+u*-s+c*-r-l*-o,this.z=c*a+u*-o+l*-s-h*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=i*a-r*o,this.y=r*s-n*a,this.z=n*o-i*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Wu.copy(this).projectOnVector(t),this.sub(Wu)}reflect(t){return this.sub(Wu.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(bu(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Vu.prototype.isVector3=!0;const Wu=new Vu,Zu=new ju;class Yu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vu(1/0,1/0,1/0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vu(-1/0,-1/0,-1/0);this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=t.length;a<l;a+=3){const l=t[a],h=t[a+1],c=t[a+2];l<e&&(e=l),h<n&&(n=h),c<i&&(i=c),l>r&&(r=l),h>s&&(s=h),c>o&&(o=c)}return this.min.set(e,n,i),this.max.set(r,s,o),this}setFromBufferAttribute(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=t.count;a<l;a++){const l=t.getX(a),h=t.getY(a),c=t.getZ(a);l<e&&(e=l),h<n&&(n=h),c<i&&(i=c),l>r&&(r=l),h>s&&(s=h),c>o&&(o=c)}return this.min.set(e,n,i),this.max.set(r,s,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Xu.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),Ku.copy(e.boundingBox),Ku.applyMatrix4(t.matrixWorld),this.union(Ku));const n=t.children;for(let i=0,r=n.length;i<r;i++)this.expandByObject(n[i]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Xu),Xu.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(ip),rp.subVectors(this.max,ip),Qu.subVectors(t.a,ip),Ju.subVectors(t.b,ip),$u.subVectors(t.c,ip),tp.subVectors(Ju,Qu),ep.subVectors($u,Ju),np.subVectors(Qu,$u);let e=[0,-tp.z,tp.y,0,-ep.z,ep.y,0,-np.z,np.y,tp.z,0,-tp.x,ep.z,0,-ep.x,np.z,0,-np.x,-tp.y,tp.x,0,-ep.y,ep.x,0,-np.y,np.x,0];return!!ap(e,Qu,Ju,$u,rp)&&(e=[1,0,0,0,1,0,0,0,1],!!ap(e,Qu,Ju,$u,rp)&&(sp.crossVectors(tp,ep),e=[sp.x,sp.y,sp.z],ap(e,Qu,Ju,$u,rp)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Xu.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(Xu).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(qu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),qu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),qu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),qu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),qu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),qu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),qu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),qu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(qu)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Yu.prototype.isBox3=!0;const qu=[new Vu,new Vu,new Vu,new Vu,new Vu,new Vu,new Vu,new Vu],Xu=new Vu,Ku=new Yu,Qu=new Vu,Ju=new Vu,$u=new Vu,tp=new Vu,ep=new Vu,np=new Vu,ip=new Vu,rp=new Vu,sp=new Vu,op=new Vu;function ap(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){op.fromArray(t,s);const o=r.x*Math.abs(op.x)+r.y*Math.abs(op.y)+r.z*Math.abs(op.z),a=e.dot(op),l=n.dot(op),h=i.dot(op);if(Math.max(-Math.max(a,l,h),Math.min(a,l,h))>o)return!1}return!0}const lp=new Yu,hp=new Vu,cp=new Vu,up=new Vu;class pp{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vu,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):lp.setFromPoints(t).getCenter(n);let i=0;for(let r=0,s=t.length;r<s;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){up.subVectors(t,this.center);const e=up.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.add(up.multiplyScalar(n/t)),this.radius+=n}return this}union(t){return cp.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(hp.copy(t.center).add(cp)),this.expandByPoint(hp.copy(t.center).sub(cp)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const dp=new Vu,fp=new Vu,mp=new Vu,gp=new Vu,yp=new Vu,vp=new Vu,_p=new Vu;class Tp{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vu,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vu(0,0,-1);this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,dp)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=dp.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(dp.copy(this.direction).multiplyScalar(e).add(this.origin),dp.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){fp.copy(t).add(e).multiplyScalar(.5),mp.copy(e).sub(t).normalize(),gp.copy(this.origin).sub(fp);const r=.5*t.distanceTo(e),s=-this.direction.dot(mp),o=gp.dot(this.direction),a=-gp.dot(mp),l=gp.lengthSq(),h=Math.abs(1-s*s);let c,u,p,d;if(h>0)if(c=s*a-o,u=s*o-a,d=r*h,c>=0)if(u>=-d)if(u<=d){const t=1/h;c*=t,u*=t,p=c*(c+s*u+2*o)+u*(s*c+u+2*a)+l}else u=r,c=Math.max(0,-(s*u+o)),p=-c*c+u*(u+2*a)+l;else u=-r,c=Math.max(0,-(s*u+o)),p=-c*c+u*(u+2*a)+l;else u<=-d?(c=Math.max(0,-(-s*r+o)),u=c>0?-r:Math.min(Math.max(-r,-a),r),p=-c*c+u*(u+2*a)+l):u<=d?(c=0,u=Math.min(Math.max(-r,-a),r),p=u*(u+2*a)+l):(c=Math.max(0,-(s*r+o)),u=c>0?r:Math.min(Math.max(-r,-a),r),p=-c*c+u*(u+2*a)+l);else u=s>0?-r:r,c=Math.max(0,-(s*u+o)),p=-c*c+u*(u+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(c).add(this.origin),i&&i.copy(mp).multiplyScalar(u).add(fp),p}intersectSphere(t,e){dp.subVectors(t.center,this.origin);const n=dp.dot(this.direction),i=dp.dot(dp)-n*n,r=t.radius*t.radius;if(i>r)return null;const s=Math.sqrt(r-i),o=n-s,a=n+s;return o<0&&a<0?null:o<0?this.at(a,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,s,o,a;const l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,u=this.origin;return l>=0?(n=(t.min.x-u.x)*l,i=(t.max.x-u.x)*l):(n=(t.max.x-u.x)*l,i=(t.min.x-u.x)*l),h>=0?(r=(t.min.y-u.y)*h,s=(t.max.y-u.y)*h):(r=(t.max.y-u.y)*h,s=(t.min.y-u.y)*h),n>s||r>i?null:((r>n||n!==n)&&(n=r),(s<i||i!==i)&&(i=s),c>=0?(o=(t.min.z-u.z)*c,a=(t.max.z-u.z)*c):(o=(t.max.z-u.z)*c,a=(t.min.z-u.z)*c),n>a||o>i?null:((o>n||n!==n)&&(n=o),(a<i||i!==i)&&(i=a),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,dp)}intersectTriangle(t,e,n,i,r){yp.subVectors(e,t),vp.subVectors(n,t),_p.crossVectors(yp,vp);let s,o=this.direction.dot(_p);if(o>0){if(i)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}gp.subVectors(this.origin,t);const a=s*this.direction.dot(vp.crossVectors(gp,vp));if(a<0)return null;const l=s*this.direction.dot(yp.cross(gp));if(l<0)return null;if(a+l>o)return null;const h=-s*gp.dot(_p);return h<0?null:this.at(h/o,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ep{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=o,g[13]=a,g[2]=l,g[6]=h,g[10]=c,g[14]=u,g[3]=p,g[7]=d,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ep).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/xp.setFromMatrixColumn(t,0).length(),r=1/xp.setFromMatrixColumn(t,1).length(),s=1/xp.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(i),l=Math.sin(i),h=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){const t=s*h,n=s*c,i=o*h,r=o*c;e[0]=a*h,e[4]=-a*c,e[8]=l,e[1]=n+i*l,e[5]=t-r*l,e[9]=-o*a,e[2]=r-t*l,e[6]=i+n*l,e[10]=s*a}else if("YXZ"===t.order){const t=a*h,n=a*c,i=l*h,r=l*c;e[0]=t+r*o,e[4]=i*o-n,e[8]=s*l,e[1]=s*c,e[5]=s*h,e[9]=-o,e[2]=n*o-i,e[6]=r+t*o,e[10]=s*a}else if("ZXY"===t.order){const t=a*h,n=a*c,i=l*h,r=l*c;e[0]=t-r*o,e[4]=-s*c,e[8]=i+n*o,e[1]=n+i*o,e[5]=s*h,e[9]=r-t*o,e[2]=-s*l,e[6]=o,e[10]=s*a}else if("ZYX"===t.order){const t=s*h,n=s*c,i=o*h,r=o*c;e[0]=a*h,e[4]=i*l-n,e[8]=t*l+r,e[1]=a*c,e[5]=r*l+t,e[9]=n*l-i,e[2]=-l,e[6]=o*a,e[10]=s*a}else if("YZX"===t.order){const t=s*a,n=s*l,i=o*a,r=o*l;e[0]=a*h,e[4]=r-t*c,e[8]=i*c+n,e[1]=c,e[5]=s*h,e[9]=-o*h,e[2]=-l*h,e[6]=n*c+i,e[10]=t-r*c}else if("XZY"===t.order){const t=s*a,n=s*l,i=o*a,r=o*l;e[0]=a*h,e[4]=-c,e[8]=l*h,e[1]=t*c+r,e[5]=s*h,e[9]=n*c-i,e[2]=i*c-n,e[6]=o*h,e[10]=r*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Ip,t,wp)}lookAt(t,e,n){const i=this.elements;return Cp.subVectors(t,e),0===Cp.lengthSq()&&(Cp.z=1),Cp.normalize(),Sp.crossVectors(n,Cp),0===Sp.lengthSq()&&(1===Math.abs(n.z)?Cp.x+=1e-4:Cp.z+=1e-4,Cp.normalize(),Sp.crossVectors(n,Cp)),Sp.normalize(),Rp.crossVectors(Cp,Sp),i[0]=Sp.x,i[4]=Rp.x,i[8]=Cp.x,i[1]=Sp.y,i[5]=Rp.y,i[9]=Cp.y,i[2]=Sp.z,i[6]=Rp.z,i[10]=Cp.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],h=n[1],c=n[5],u=n[9],p=n[13],d=n[2],f=n[6],m=n[10],g=n[14],y=n[3],v=n[7],_=n[11],T=n[15],E=i[0],x=i[4],b=i[8],I=i[12],w=i[1],S=i[5],R=i[9],C=i[13],A=i[2],D=i[6],O=i[10],N=i[14],M=i[3],P=i[7],F=i[11],L=i[15];return r[0]=s*E+o*w+a*A+l*M,r[4]=s*x+o*S+a*D+l*P,r[8]=s*b+o*R+a*O+l*F,r[12]=s*I+o*C+a*N+l*L,r[1]=h*E+c*w+u*A+p*M,r[5]=h*x+c*S+u*D+p*P,r[9]=h*b+c*R+u*O+p*F,r[13]=h*I+c*C+u*N+p*L,r[2]=d*E+f*w+m*A+g*M,r[6]=d*x+f*S+m*D+g*P,r[10]=d*b+f*R+m*O+g*F,r[14]=d*I+f*C+m*N+g*L,r[3]=y*E+v*w+_*A+T*M,r[7]=y*x+v*S+_*D+T*P,r[11]=y*b+v*R+_*O+T*F,r[15]=y*I+v*C+_*N+T*L,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],o=t[5],a=t[9],l=t[13],h=t[2],c=t[6],u=t[10],p=t[14];return t[3]*(+r*a*c-i*l*c-r*o*u+n*l*u+i*o*p-n*a*p)+t[7]*(+e*a*p-e*l*u+r*s*u-i*s*p+i*l*h-r*a*h)+t[11]*(+e*l*c-e*o*p-r*s*c+n*s*p+r*o*h-n*l*h)+t[15]*(-i*o*h-e*a*c+e*o*u+i*s*c-n*s*u+n*a*h)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],h=t[8],c=t[9],u=t[10],p=t[11],d=t[12],f=t[13],m=t[14],g=t[15],y=c*m*l-f*u*l+f*a*p-o*m*p-c*a*g+o*u*g,v=d*u*l-h*m*l-d*a*p+s*m*p+h*a*g-s*u*g,_=h*f*l-d*c*l+d*o*p-s*f*p-h*o*g+s*c*g,T=d*c*a-h*f*a-d*o*u+s*f*u+h*o*m-s*c*m,E=e*y+n*v+i*_+r*T;if(0===E)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/E;return t[0]=y*x,t[1]=(f*u*r-c*m*r-f*i*p+n*m*p+c*i*g-n*u*g)*x,t[2]=(o*m*r-f*a*r+f*i*l-n*m*l-o*i*g+n*a*g)*x,t[3]=(c*a*r-o*u*r-c*i*l+n*u*l+o*i*p-n*a*p)*x,t[4]=v*x,t[5]=(h*m*r-d*u*r+d*i*p-e*m*p-h*i*g+e*u*g)*x,t[6]=(d*a*r-s*m*r-d*i*l+e*m*l+s*i*g-e*a*g)*x,t[7]=(s*u*r-h*a*r+h*i*l-e*u*l-s*i*p+e*a*p)*x,t[8]=_*x,t[9]=(d*c*r-h*f*r-d*n*p+e*f*p+h*n*g-e*c*g)*x,t[10]=(s*f*r-d*o*r+d*n*l-e*f*l-s*n*g+e*o*g)*x,t[11]=(h*o*r-s*c*r-h*n*l+e*c*l+s*n*p-e*o*p)*x,t[12]=T*x,t[13]=(h*f*i-d*c*i+d*n*u-e*f*u-h*n*m+e*c*m)*x,t[14]=(d*o*i-s*f*i-d*n*a+e*f*a+s*n*m-e*o*m)*x,t[15]=(s*c*i-h*o*i+h*n*a-e*c*a-s*n*u+e*o*u)*x,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,o=t.y,a=t.z,l=r*s,h=r*o;return this.set(l*s+n,l*o-i*a,l*a+i*o,0,l*o+i*a,h*o+n,h*a-i*s,0,l*a-i*o,h*a+i*s,r*a*a+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,s){return this.set(1,n,r,0,t,1,s,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,s=e._y,o=e._z,a=e._w,l=r+r,h=s+s,c=o+o,u=r*l,p=r*h,d=r*c,f=s*h,m=s*c,g=o*c,y=a*l,v=a*h,_=a*c,T=n.x,E=n.y,x=n.z;return i[0]=(1-(f+g))*T,i[1]=(p+_)*T,i[2]=(d-v)*T,i[3]=0,i[4]=(p-_)*E,i[5]=(1-(u+g))*E,i[6]=(m+y)*E,i[7]=0,i[8]=(d+v)*x,i[9]=(m-y)*x,i[10]=(1-(u+f))*x,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=xp.set(i[0],i[1],i[2]).length();const s=xp.set(i[4],i[5],i[6]).length(),o=xp.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],bp.copy(this);const a=1/r,l=1/s,h=1/o;return bp.elements[0]*=a,bp.elements[1]*=a,bp.elements[2]*=a,bp.elements[4]*=l,bp.elements[5]*=l,bp.elements[6]*=l,bp.elements[8]*=h,bp.elements[9]*=h,bp.elements[10]*=h,e.setFromRotationMatrix(bp),n.x=r,n.y=s,n.z=o,this}makePerspective(t,e,n,i,r,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,a=2*r/(e-t),l=2*r/(n-i),h=(e+t)/(e-t),c=(n+i)/(n-i),u=-(s+r)/(s-r),p=-2*s*r/(s-r);return o[0]=a,o[4]=0,o[8]=h,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,n,i,r,s){const o=this.elements,a=1/(e-t),l=1/(n-i),h=1/(s-r),c=(e+t)*a,u=(n+i)*l,p=(s+r)*h;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*h,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}Ep.prototype.isMatrix4=!0;const xp=new Vu,bp=new Ep,Ip=new Vu(0,0,0),wp=new Vu(1,1,1),Sp=new Vu,Rp=new Vu,Cp=new Vu,Ap=new Ep,Dp=new ju;class Op{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Op.DefaultOrder;this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=t.elements,r=i[0],s=i[4],o=i[8],a=i[1],l=i[5],h=i[9],c=i[2],u=i[6],p=i[10];switch(e){case"XYZ":this._y=Math.asin(bu(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-bu(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,p),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-c,r),this._z=0);break;case"ZXY":this._x=Math.asin(bu(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-c,p),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-bu(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(u,p),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(bu(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(o,p));break;case"XZY":this._z=Math.asin(-bu(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-h,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Ap.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Ap,e,n)}setFromVector3(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(t.x,t.y,t.z,e)}reorder(t){return Dp.setFromEuler(this),this.setFromQuaternion(Dp,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new Vu(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Op.prototype.isEuler=!0,Op.DefaultOrder="XYZ",Op.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Np{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}isEnabled(t){return 0!==(this.mask&(1<<t|0))}}let Mp=0;const Pp=new Vu,Fp=new ju,Lp=new Ep,kp=new Vu,Up=new Vu,Bp=new Vu,zp=new ju,Gp=new Vu(1,0,0),Hp=new Vu(0,1,0),jp=new Vu(0,0,1),Vp={type:"added"},Wp={type:"removed"};class Zp extends yu{constructor(){super(),Object.defineProperty(this,"id",{value:Mp++}),this.uuid=xu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Zp.DefaultUp.clone();const t=new Vu,e=new Op,n=new ju,i=new Vu(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ep},normalMatrix:{value:new Ou}}),this.matrix=new Ep,this.matrixWorld=new Ep,this.matrixAutoUpdate=Zp.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Np,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Fp.setFromAxisAngle(t,e),this.quaternion.multiply(Fp),this}rotateOnWorldAxis(t,e){return Fp.setFromAxisAngle(t,e),this.quaternion.premultiply(Fp),this}rotateX(t){return this.rotateOnAxis(Gp,t)}rotateY(t){return this.rotateOnAxis(Hp,t)}rotateZ(t){return this.rotateOnAxis(jp,t)}translateOnAxis(t,e){return Pp.copy(t).applyQuaternion(this.quaternion),this.position.add(Pp.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Gp,t)}translateY(t){return this.translateOnAxis(Hp,t)}translateZ(t){return this.translateOnAxis(jp,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Lp.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?kp.copy(t):kp.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Up.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Lp.lookAt(Up,kp,this.up):Lp.lookAt(kp,Up,this.up),this.quaternion.setFromRotationMatrix(Lp),i&&(Lp.extractRotation(i.matrixWorld),Fp.setFromRotationMatrix(Lp),this.quaternion.premultiply(Fp.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Vp)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Wp)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Wp)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Lp.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Lp.multiply(t.parent.matrixWorld)),t.applyMatrix4(Lp),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Up,t,Bp),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Up,zp,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const i=n[e];r(t.shapes,i)}else r(t.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,i=this.material.length;n<i;n++)e.push(r(t.materials,this.material[n]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];i.animations.push(r(t.animations,n))}}if(e){const e=s(t.geometries),i=s(t.materials),r=s(t.textures),o=s(t.images),a=s(t.shapes),l=s(t.skeletons),h=s(t.animations);e.length>0&&(n.geometries=e),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),o.length>0&&(n.images=o),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),h.length>0&&(n.animations=h)}return n.object=i,n;function s(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}}Zp.DefaultUp=new Vu(0,1,0),Zp.DefaultMatrixAutoUpdate=!0,Zp.prototype.isObject3D=!0;const Yp=new Vu,qp=new Vu,Xp=new Vu,Kp=new Vu,Qp=new Vu,Jp=new Vu,$p=new Vu,td=new Vu,ed=new Vu,nd=new Vu;class id{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vu,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vu,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Vu;this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),Yp.subVectors(t,e),i.cross(Yp);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){Yp.subVectors(i,e),qp.subVectors(n,e),Xp.subVectors(t,e);const s=Yp.dot(Yp),o=Yp.dot(qp),a=Yp.dot(Xp),l=qp.dot(qp),h=qp.dot(Xp),c=s*l-o*o;if(0===c)return r.set(-2,-1,-1);const u=1/c,p=(l*a-o*h)*u,d=(s*h-o*a)*u;return r.set(1-p-d,d,p)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,Kp),Kp.x>=0&&Kp.y>=0&&Kp.x+Kp.y<=1}static getUV(t,e,n,i,r,s,o,a){return this.getBarycoord(t,e,n,i,Kp),a.set(0,0),a.addScaledVector(r,Kp.x),a.addScaledVector(s,Kp.y),a.addScaledVector(o,Kp.z),a}static isFrontFacing(t,e,n,i){return Yp.subVectors(n,e),qp.subVectors(t,e),Yp.cross(qp).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Yp.subVectors(this.c,this.b),qp.subVectors(this.a,this.b),.5*Yp.cross(qp).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return id.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return id.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return id.getUV(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return id.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return id.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,r=this.c;let s,o;Qp.subVectors(i,n),Jp.subVectors(r,n),td.subVectors(t,n);const a=Qp.dot(td),l=Jp.dot(td);if(a<=0&&l<=0)return e.copy(n);ed.subVectors(t,i);const h=Qp.dot(ed),c=Jp.dot(ed);if(h>=0&&c<=h)return e.copy(i);const u=a*c-h*l;if(u<=0&&a>=0&&h<=0)return s=a/(a-h),e.copy(n).addScaledVector(Qp,s);nd.subVectors(t,r);const p=Qp.dot(nd),d=Jp.dot(nd);if(d>=0&&p<=d)return e.copy(r);const f=p*l-a*d;if(f<=0&&l>=0&&d<=0)return o=l/(l-d),e.copy(n).addScaledVector(Jp,o);const m=h*d-p*c;if(m<=0&&c-h>=0&&p-d>=0)return $p.subVectors(r,i),o=(c-h)/(c-h+(p-d)),e.copy(i).addScaledVector($p,o);const g=1/(m+f+u);return s=f*g,o=u*g,e.copy(n).addScaledVector(Qp,s).addScaledVector(Jp,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let rd=0;class sd extends yu{constructor(){super(),Object.defineProperty(this,"id",{value:rd++}),this.uuid=xu(),this.name="",this.type="Material",this.fog=!0,this.blending=kl,this.side=Ml,this.vertexColors=!1,this.opacity=1,this.format=Kh,this.transparent=!1,this.blendSrc=Ql,this.blendDst=Jl,this.blendEquation=Hl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ah,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=du,this.stencilZFail=du,this.stencilZPass=du,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!==t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==kl&&(n.blending=this.blending),this.side!==Ml&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==Kh&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(n.textures=e),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.format=t.format,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}sd.prototype.isMaterial=!0;const od={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ad={h:0,s:0,l:0},ld={h:0,s:0,l:0};function hd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function cd(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function ud(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class pd{constructor(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this}setHSL(t,e,n){if(t=Iu(t,1),e=bu(e,0,1),n=bu(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=hd(r,i,t+1/3),this.g=hd(r,i,t),this.b=hd(r,i,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=n[1],r=n[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const n=parseFloat(t[1])/360,i=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100;return e(t[4]),this.setHSL(n,i,r)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=n[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=od[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=cd(t.r),this.g=cd(t.g),this.b=cd(t.b),this}copyLinearToSRGB(t){return this.r=ud(t.r),this.g=ud(t.g),this.b=ud(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const e=this.r,n=this.g,i=this.b,r=Math.max(e,n,i),s=Math.min(e,n,i);let o,a;const l=(s+r)/2;if(s===r)o=0,a=0;else{const t=r-s;switch(a=l<=.5?t/(r+s):t/(2-r-s),r){case e:o=(n-i)/t+(n<i?6:0);break;case n:o=(i-e)/t+2;break;case i:o=(e-n)/t+4}o/=6}return t.h=o,t.s=a,t.l=l,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,n){return this.getHSL(ad),ad.h+=t,ad.s+=e,ad.l+=n,this.setHSL(ad.h,ad.s,ad.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(ad),t.getHSL(ld);const n=wu(ad.h,ld.h,e),i=wu(ad.s,ld.s,e),r=wu(ad.l,ld.l,e);return this.setHSL(n,i,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}pd.NAMES=od,pd.prototype.isColor=!0,pd.prototype.r=1,pd.prototype.g=1,pd.prototype.b=1;class dd extends sd{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new pd(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ph,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}dd.prototype.isMeshBasicMaterial=!0;const fd=new Vu,md=new Du;class gd{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=fu,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new pd),e[n++]=r.r,e[n++]=r.g,e[n++]=r.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new Du),e[n++]=r.x,e[n++]=r.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new Vu),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new zu),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n++]=r.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)md.fromBufferAttribute(this,e),md.applyMatrix3(t),this.setXY(e,md.x,md.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)fd.fromBufferAttribute(this,e),fd.applyMatrix3(t),this.setXYZ(e,fd.x,fd.y,fd.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)fd.x=this.getX(e),fd.y=this.getY(e),fd.z=this.getZ(e),fd.applyMatrix4(t),this.setXYZ(e,fd.x,fd.y,fd.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)fd.x=this.getX(e),fd.y=this.getY(e),fd.z=this.getZ(e),fd.applyNormalMatrix(t),this.setXYZ(e,fd.x,fd.y,fd.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)fd.x=this.getX(e),fd.y=this.getY(e),fd.z=this.getZ(e),fd.transformDirection(t),this.setXYZ(e,fd.x,fd.y,fd.z);return this}set(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==fu&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}gd.prototype.isBufferAttribute=!0;class yd extends gd{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class vd extends gd{constructor(t,e,n){super(new Uint32Array(t),e,n)}}(class extends gd{constructor(t,e,n){super(new Uint16Array(t),e,n)}}).prototype.isFloat16BufferAttribute=!0;class _d extends gd{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Td=0;const Ed=new Ep,xd=new Zp,bd=new Vu,Id=new Yu,wd=new Yu,Sd=new Vu;class Rd extends yu{constructor(){super(),Object.defineProperty(this,"id",{value:Td++}),this.uuid=xu(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Nu(t)>65535?vd:yd)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Ou).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Ed.makeRotationFromQuaternion(t),this.applyMatrix4(Ed),this}rotateX(t){return Ed.makeRotationX(t),this.applyMatrix4(Ed),this}rotateY(t){return Ed.makeRotationY(t),this.applyMatrix4(Ed),this}rotateZ(t){return Ed.makeRotationZ(t),this.applyMatrix4(Ed),this}translate(t,e,n){return Ed.makeTranslation(t,e,n),this.applyMatrix4(Ed),this}scale(t,e,n){return Ed.makeScale(t,e,n),this.applyMatrix4(Ed),this}lookAt(t){return xd.lookAt(t),xd.updateMatrix(),this.applyMatrix4(xd.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(bd).negate(),this.translate(bd.x,bd.y,bd.z),this}setFromPoints(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new _d(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Yu);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Vu(-1/0,-1/0,-1/0),new Vu(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,i=e.length;n<i;n++){const t=e[n];Id.setFromBufferAttribute(t),this.morphTargetsRelative?(Sd.addVectors(this.boundingBox.min,Id.min),this.boundingBox.expandByPoint(Sd),Sd.addVectors(this.boundingBox.max,Id.max),this.boundingBox.expandByPoint(Sd)):(this.boundingBox.expandByPoint(Id.min),this.boundingBox.expandByPoint(Id.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new pp);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Vu,1/0);if(t){const n=this.boundingSphere.center;if(Id.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){const n=e[t];wd.setFromBufferAttribute(n),this.morphTargetsRelative?(Sd.addVectors(Id.min,wd.min),Id.expandByPoint(Sd),Sd.addVectors(Id.max,wd.max),Id.expandByPoint(Sd)):(Id.expandByPoint(wd.min),Id.expandByPoint(wd.max))}Id.getCenter(n);let i=0;for(let e=0,r=t.count;e<r;e++)Sd.fromBufferAttribute(t,e),i=Math.max(i,n.distanceToSquared(Sd));if(e)for(let r=0,s=e.length;r<s;r++){const s=e[r],o=this.morphTargetsRelative;for(let e=0,r=s.count;e<r;e++)Sd.fromBufferAttribute(s,e),o&&(bd.fromBufferAttribute(t,e),Sd.add(bd)),i=Math.max(i,n.distanceToSquared(Sd))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,i=e.position.array,r=e.normal.array,s=e.uv.array,o=i.length/3;void 0===e.tangent&&this.setAttribute("tangent",new gd(new Float32Array(4*o),4));const a=e.tangent.array,l=[],h=[];for(let w=0;w<o;w++)l[w]=new Vu,h[w]=new Vu;const c=new Vu,u=new Vu,p=new Vu,d=new Du,f=new Du,m=new Du,g=new Vu,y=new Vu;function v(t,e,n){c.fromArray(i,3*t),u.fromArray(i,3*e),p.fromArray(i,3*n),d.fromArray(s,2*t),f.fromArray(s,2*e),m.fromArray(s,2*n),u.sub(c),p.sub(c),f.sub(d),m.sub(d);const r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(g.copy(u).multiplyScalar(m.y).addScaledVector(p,-f.y).multiplyScalar(r),y.copy(p).multiplyScalar(f.x).addScaledVector(u,-m.x).multiplyScalar(r),l[t].add(g),l[e].add(g),l[n].add(g),h[t].add(y),h[e].add(y),h[n].add(y))}let _=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(let w=0,S=_.length;w<S;++w){const t=_[w],e=t.start;for(let i=e,r=e+t.count;i<r;i+=3)v(n[i+0],n[i+1],n[i+2])}const T=new Vu,E=new Vu,x=new Vu,b=new Vu;function I(t){x.fromArray(r,3*t),b.copy(x);const e=l[t];T.copy(e),T.sub(x.multiplyScalar(x.dot(e))).normalize(),E.crossVectors(b,e);const n=E.dot(h[t])<0?-1:1;a[4*t]=T.x,a[4*t+1]=T.y,a[4*t+2]=T.z,a[4*t+3]=n}for(let w=0,S=_.length;w<S;++w){const t=_[w],e=t.start;for(let i=e,r=e+t.count;i<r;i+=3)I(n[i+0]),I(n[i+1]),I(n[i+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new gd(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const i=new Vu,r=new Vu,s=new Vu,o=new Vu,a=new Vu,l=new Vu,h=new Vu,c=new Vu;if(t)for(let u=0,p=t.count;u<p;u+=3){const p=t.getX(u+0),d=t.getX(u+1),f=t.getX(u+2);i.fromBufferAttribute(e,p),r.fromBufferAttribute(e,d),s.fromBufferAttribute(e,f),h.subVectors(s,r),c.subVectors(i,r),h.cross(c),o.fromBufferAttribute(n,p),a.fromBufferAttribute(n,d),l.fromBufferAttribute(n,f),o.add(h),a.add(h),l.add(h),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let t=0,u=e.count;t<u;t+=3)i.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),s.fromBufferAttribute(e,t+2),h.subVectors(s,r),c.subVectors(i,r),h.cross(c),n.setXYZ(t+0,h.x,h.y,h.z),n.setXYZ(t+1,h.x,h.y,h.z),n.setXYZ(t+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(void 0===t.attributes[i])continue;const r=n[i].array,s=t.attributes[i],o=s.array,a=s.itemSize*e,l=Math.min(o.length,r.length-a);for(let t=0,e=a;t<l;t++,e++)r[e]=o[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Sd.fromBufferAttribute(t,e),Sd.normalize(),t.setXYZ(e,Sd.x,Sd.y,Sd.z)}toNonIndexed(){function t(t,e){const n=t.array,i=t.itemSize,r=t.normalized,s=new n.constructor(e.length*i);let o=0,a=0;for(let l=0,h=e.length;l<h;l++){o=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*i;for(let t=0;t<i;t++)s[a++]=n[o++]}return new gd(s,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Rd,n=this.index.array,i=this.attributes;for(const o in i){const r=t(i[o],n);e.setAttribute(o,r)}const r=this.morphAttributes;for(const o in r){const i=[],s=r[o];for(let e=0,r=s.length;e<r;e++){const r=t(s[e],n);i.push(r)}e.morphAttributes[o]=i}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,a=s.length;o<a;o++){const t=s[o];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const a in n){const e=n[a];t.data.attributes[a]=e.toJSON(t.data)}const i={};let r=!1;for(const a in this.morphAttributes){const e=this.morphAttributes[a],n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];n.push(r.toJSON(t.data))}n.length>0&&(i[a]=n,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return null!==o&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const i=t.attributes;for(const l in i){const t=i[l];this.setAttribute(l,t.clone(e))}const r=t.morphAttributes;for(const l in r){const t=[],n=r[l];for(let i=0,r=n.length;i<r;i++)t.push(n[i].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let l=0,h=s.length;l<h;l++){const t=s[l];this.addGroup(t.start,t.count,t.materialIndex)}const o=t.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Rd.prototype.isBufferGeometry=!0;const Cd=new Ep,Ad=new Tp,Dd=new pp,Od=new Vu,Nd=new Vu,Md=new Vu,Pd=new Vu,Fd=new Vu,Ld=new Vu,kd=new Vu,Ud=new Vu,Bd=new Vu,zd=new Du,Gd=new Du,Hd=new Du,jd=new Vu,Vd=new Vu;class Wd extends Zp{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rd,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new dd;super(),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Dd.copy(n.boundingSphere),Dd.applyMatrix4(r),!1===t.ray.intersectsSphere(Dd))return;if(Cd.copy(r).invert(),Ad.copy(t.ray).applyMatrix4(Cd),null!==n.boundingBox&&!1===Ad.intersectsBox(n.boundingBox))return;let s;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position,a=n.morphAttributes.position,l=n.morphTargetsRelative,h=n.attributes.uv,c=n.attributes.uv2,u=n.groups,p=n.drawRange;if(null!==r)if(Array.isArray(i))for(let n=0,d=u.length;n<d;n++){const d=u[n],f=i[d.materialIndex];for(let n=Math.max(d.start,p.start),i=Math.min(r.count,Math.min(d.start+d.count,p.start+p.count));n<i;n+=3){const i=r.getX(n),u=r.getX(n+1),p=r.getX(n+2);s=Zd(this,f,t,Ad,o,a,l,h,c,i,u,p),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=d.materialIndex,e.push(s))}}else{for(let n=Math.max(0,p.start),u=Math.min(r.count,p.start+p.count);n<u;n+=3){const u=r.getX(n),p=r.getX(n+1),d=r.getX(n+2);s=Zd(this,i,t,Ad,o,a,l,h,c,u,p,d),s&&(s.faceIndex=Math.floor(n/3),e.push(s))}}else if(void 0!==o)if(Array.isArray(i))for(let n=0,d=u.length;n<d;n++){const r=u[n],d=i[r.materialIndex];for(let n=Math.max(r.start,p.start),i=Math.min(o.count,Math.min(r.start+r.count,p.start+p.count));n<i;n+=3){s=Zd(this,d,t,Ad,o,a,l,h,c,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=r.materialIndex,e.push(s))}}else{for(let n=Math.max(0,p.start),r=Math.min(o.count,p.start+p.count);n<r;n+=3){s=Zd(this,i,t,Ad,o,a,l,h,c,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),e.push(s))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Zd(t,e,n,i,r,s,o,a,l,h,c,u){Od.fromBufferAttribute(r,h),Nd.fromBufferAttribute(r,c),Md.fromBufferAttribute(r,u);const p=t.morphTargetInfluences;if(s&&p){kd.set(0,0,0),Ud.set(0,0,0),Bd.set(0,0,0);for(let t=0,e=s.length;t<e;t++){const e=p[t],n=s[t];0!==e&&(Pd.fromBufferAttribute(n,h),Fd.fromBufferAttribute(n,c),Ld.fromBufferAttribute(n,u),o?(kd.addScaledVector(Pd,e),Ud.addScaledVector(Fd,e),Bd.addScaledVector(Ld,e)):(kd.addScaledVector(Pd.sub(Od),e),Ud.addScaledVector(Fd.sub(Nd),e),Bd.addScaledVector(Ld.sub(Md),e)))}Od.add(kd),Nd.add(Ud),Md.add(Bd)}t.isSkinnedMesh&&(t.boneTransform(h,Od),t.boneTransform(c,Nd),t.boneTransform(u,Md));const d=function(t,e,n,i,r,s,o,a){let l;if(l=e.side===Pl?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,e.side!==Fl,a),null===l)return null;Vd.copy(a),Vd.applyMatrix4(t.matrixWorld);const h=n.ray.origin.distanceTo(Vd);return h<n.near||h>n.far?null:{distance:h,point:Vd.clone(),object:t}}(t,e,n,i,Od,Nd,Md,jd);if(d){a&&(zd.fromBufferAttribute(a,h),Gd.fromBufferAttribute(a,c),Hd.fromBufferAttribute(a,u),d.uv=id.getUV(jd,Od,Nd,Md,zd,Gd,Hd,new Du)),l&&(zd.fromBufferAttribute(l,h),Gd.fromBufferAttribute(l,c),Hd.fromBufferAttribute(l,u),d.uv2=id.getUV(jd,Od,Nd,Md,zd,Gd,Hd,new Du));const t={a:h,b:c,c:u,normal:new Vu,materialIndex:0};id.getNormal(Od,Nd,Md,t.normal),d.face=t}return d}Wd.prototype.isMesh=!0;class Yd extends Rd{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};const o=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);const a=[],l=[],h=[],c=[];let u=0,p=0;function d(t,e,n,i,r,s,d,f,m,g,y){const v=s/m,_=d/g,T=s/2,E=d/2,x=f/2,b=m+1,I=g+1;let w=0,S=0;const R=new Vu;for(let o=0;o<I;o++){const s=o*_-E;for(let a=0;a<b;a++){const u=a*v-T;R[t]=u*i,R[e]=s*r,R[n]=x,l.push(R.x,R.y,R.z),R[t]=0,R[e]=0,R[n]=f>0?1:-1,h.push(R.x,R.y,R.z),c.push(a/m),c.push(1-o/g),w+=1}}for(let o=0;o<g;o++)for(let t=0;t<m;t++){const e=u+t+b*o,n=u+t+b*(o+1),i=u+(t+1)+b*(o+1),r=u+(t+1)+b*o;a.push(e,n,r),a.push(n,i,r),S+=6}o.addGroup(p,S,y),p+=S,u+=w}d("z","y","x",-1,-1,n,e,t,s,r,0),d("z","y","x",1,-1,n,e,-t,s,r,1),d("x","z","y",1,1,t,n,e,i,s,2),d("x","z","y",1,-1,t,n,-e,i,s,3),d("x","y","z",1,-1,t,e,n,i,r,4),d("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(a),this.setAttribute("position",new _d(l,3)),this.setAttribute("normal",new _d(h,3)),this.setAttribute("uv",new _d(c,2))}static fromJSON(t){return new Yd(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function qd(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Xd(t){const e={};for(let n=0;n<t.length;n++){const i=qd(t[n]);for(const t in i)e[t]=i[t]}return e}const Kd={clone:qd,merge:Xd};class Qd extends sd{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=qd(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?e.uniforms[i]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[i]={type:"m4",value:n.toArray()}:e.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}Qd.prototype.isShaderMaterial=!0;class Jd extends Zp{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Ep,this.projectionMatrix=new Ep,this.projectionMatrixInverse=new Ep}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Jd.prototype.isCamera=!0;class $d extends Jd{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Eu*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Tu*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Eu*Math.atan(Math.tan(.5*Tu*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,i,r,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Tu*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const t=s.fullWidth,o=s.fullHeight;r+=s.offsetX*i/t,e-=s.offsetY*n/o,i*=s.width/t,n*=s.height/o}const o=this.filmOffset;0!==o&&(r+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}$d.prototype.isPerspectiveCamera=!0;const tf=90;class ef extends Zp{constructor(t,e,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const i=new $d(tf,1,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Vu(1,0,0)),this.add(i);const r=new $d(tf,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Vu(-1,0,0)),this.add(r);const s=new $d(tf,1,t,e);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new Vu(0,1,0)),this.add(s);const o=new $d(tf,1,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new Vu(0,-1,0)),this.add(o);const a=new $d(tf,1,t,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new Vu(0,0,1)),this.add(a);const l=new $d(tf,1,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Vu(0,0,-1)),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[i,r,s,o,a,l]=this.children,h=t.xr.enabled,c=t.getRenderTarget();t.xr.enabled=!1;const u=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,s),t.setRenderTarget(n,3),t.render(e,o),t.setRenderTarget(n,4),t.render(e,a),n.texture.generateMipmaps=u,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(c),t.xr.enabled=h}}class nf extends Uu{constructor(t,e,n,i,r,s,o,a,l,h){super(t=void 0!==t?t:[],e=void 0!==e?e:Eh,n,i,r,s,o,a,l,h),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}nf.prototype.isCubeTexture=!0;class rf extends Gu{constructor(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),super(t,t,e),e=e||{},this.texture=new nf(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Mh,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.format=Kh,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new Yd(5,5,5),o=new Qd({name:"CubemapFromEquirect",uniforms:qd(n),vertexShader:i,fragmentShader:r,side:Pl,blending:Ll});o.uniforms.tEquirect.value=e;const a=new Wd(s,o),l=e.minFilter;e.minFilter===Fh&&(e.minFilter=Mh);return new ef(1,10,this).update(t,a),e.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(t,e,n,i){const r=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,n,i);t.setRenderTarget(r)}}rf.prototype.isWebGLCubeRenderTarget=!0;const sf=new Vu,of=new Vu,af=new Ou;class lf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vu(1,0,0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=sf.subVectors(n,e).cross(of.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(sf),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(n).multiplyScalar(r).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||af.getNormalMatrix(t),i=this.coplanarPoint(sf).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}lf.prototype.isPlane=!0;const hf=new pp,cf=new Vu;class uf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new lf,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lf,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new lf,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new lf,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new lf,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new lf;this.planes=[t,e,n,i,r,s]}set(t,e,n,i,r,s){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(s),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],h=n[6],c=n[7],u=n[8],p=n[9],d=n[10],f=n[11],m=n[12],g=n[13],y=n[14],v=n[15];return e[0].setComponents(o-i,c-a,f-u,v-m).normalize(),e[1].setComponents(o+i,c+a,f+u,v+m).normalize(),e[2].setComponents(o+r,c+l,f+p,v+g).normalize(),e[3].setComponents(o-r,c-l,f-p,v-g).normalize(),e[4].setComponents(o-s,c-h,f-d,v-y).normalize(),e[5].setComponents(o+s,c+h,f+d,v+y).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),hf.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(hf)}intersectsSprite(t){return hf.center.set(0,0,0),hf.radius=.7071067811865476,hf.applyMatrix4(t.matrixWorld),this.intersectsSphere(hf)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let r=0;r<6;r++){if(e[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(cf.x=i.normal.x>0?t.max.x:t.min.x,cf.y=i.normal.y>0?t.max.y:t.min.y,cf.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(cf)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function pf(){let t=null,e=!1,n=null,i=null;function r(e,s){n(e,s),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function df(t,e){const n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){const t=i.get(e);return void((!t||t.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const s=i.get(e);void 0===s?i.set(e,function(e,i){const r=e.array,s=e.usage,o=t.createBuffer();t.bindBuffer(i,o),t.bufferData(i,r,s),e.onUploadCallback();let a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?e.isFloat16BufferAttribute?n?a=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:(r instanceof Uint8Array||r instanceof Uint8ClampedArray)&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,r)):s.version<e.version&&(!function(e,i,r){const s=i.array,o=i.updateRange;t.bindBuffer(r,e),-1===o.count?t.bufferSubData(r,0,s):(n?t.bufferSubData(r,o.offset*s.BYTES_PER_ELEMENT,s,o.offset,o.count):t.bufferSubData(r,o.offset*s.BYTES_PER_ELEMENT,s.subarray(o.offset,o.offset+o.count)),o.count=-1)}(s.buffer,e,r),s.version=e.version)}}}class ff extends Rd{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=t/2,s=e/2,o=Math.floor(n),a=Math.floor(i),l=o+1,h=a+1,c=t/o,u=e/a,p=[],d=[],f=[],m=[];for(let g=0;g<h;g++){const t=g*u-s;for(let e=0;e<l;e++){const n=e*c-r;d.push(n,-t,0),f.push(0,0,1),m.push(e/o),m.push(1-g/a)}}for(let g=0;g<a;g++)for(let t=0;t<o;t++){const e=t+l*g,n=t+l*(g+1),i=t+1+l*(g+1),r=t+1+l*g;p.push(e,n,r),p.push(n,i,r)}this.setIndex(p),this.setAttribute("position",new _d(d,3)),this.setAttribute("normal",new _d(f,3)),this.setAttribute("uv",new _d(m,2))}static fromJSON(t){return new ff(t.width,t.height,t.widthSegments,t.heightSegments)}}const mf={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},gf={common:{diffuse:{value:new pd(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ou},uv2Transform:{value:new Ou},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Du(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pd(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pd(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ou}},sprite:{diffuse:{value:new pd(16777215)},opacity:{value:1},center:{value:new Du(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ou}}},yf={basic:{uniforms:Xd([gf.common,gf.specularmap,gf.envmap,gf.aomap,gf.lightmap,gf.fog]),vertexShader:mf.meshbasic_vert,fragmentShader:mf.meshbasic_frag},lambert:{uniforms:Xd([gf.common,gf.specularmap,gf.envmap,gf.aomap,gf.lightmap,gf.emissivemap,gf.fog,gf.lights,{emissive:{value:new pd(0)}}]),vertexShader:mf.meshlambert_vert,fragmentShader:mf.meshlambert_frag},phong:{uniforms:Xd([gf.common,gf.specularmap,gf.envmap,gf.aomap,gf.lightmap,gf.emissivemap,gf.bumpmap,gf.normalmap,gf.displacementmap,gf.fog,gf.lights,{emissive:{value:new pd(0)},specular:{value:new pd(1118481)},shininess:{value:30}}]),vertexShader:mf.meshphong_vert,fragmentShader:mf.meshphong_frag},standard:{uniforms:Xd([gf.common,gf.envmap,gf.aomap,gf.lightmap,gf.emissivemap,gf.bumpmap,gf.normalmap,gf.displacementmap,gf.roughnessmap,gf.metalnessmap,gf.fog,gf.lights,{emissive:{value:new pd(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mf.meshphysical_vert,fragmentShader:mf.meshphysical_frag},toon:{uniforms:Xd([gf.common,gf.aomap,gf.lightmap,gf.emissivemap,gf.bumpmap,gf.normalmap,gf.displacementmap,gf.gradientmap,gf.fog,gf.lights,{emissive:{value:new pd(0)}}]),vertexShader:mf.meshtoon_vert,fragmentShader:mf.meshtoon_frag},matcap:{uniforms:Xd([gf.common,gf.bumpmap,gf.normalmap,gf.displacementmap,gf.fog,{matcap:{value:null}}]),vertexShader:mf.meshmatcap_vert,fragmentShader:mf.meshmatcap_frag},points:{uniforms:Xd([gf.points,gf.fog]),vertexShader:mf.points_vert,fragmentShader:mf.points_frag},dashed:{uniforms:Xd([gf.common,gf.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mf.linedashed_vert,fragmentShader:mf.linedashed_frag},depth:{uniforms:Xd([gf.common,gf.displacementmap]),vertexShader:mf.depth_vert,fragmentShader:mf.depth_frag},normal:{uniforms:Xd([gf.common,gf.bumpmap,gf.normalmap,gf.displacementmap,{opacity:{value:1}}]),vertexShader:mf.meshnormal_vert,fragmentShader:mf.meshnormal_frag},sprite:{uniforms:Xd([gf.sprite,gf.fog]),vertexShader:mf.sprite_vert,fragmentShader:mf.sprite_frag},background:{uniforms:{uvTransform:{value:new Ou},t2D:{value:null}},vertexShader:mf.background_vert,fragmentShader:mf.background_frag},cube:{uniforms:Xd([gf.envmap,{opacity:{value:1}}]),vertexShader:mf.cube_vert,fragmentShader:mf.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mf.equirect_vert,fragmentShader:mf.equirect_frag},distanceRGBA:{uniforms:Xd([gf.common,gf.displacementmap,{referencePosition:{value:new Vu},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mf.distanceRGBA_vert,fragmentShader:mf.distanceRGBA_frag},shadow:{uniforms:Xd([gf.lights,gf.fog,{color:{value:new pd(0)},opacity:{value:1}}]),vertexShader:mf.shadow_vert,fragmentShader:mf.shadow_frag}};function vf(t,e,n,i,r){const s=new pd(0);let o,a,l=0,h=null,c=0,u=null;function p(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,r)}return{getClearColor:function(){return s},setClearColor:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(t),l=e,p(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(t){l=t,p(s,l)},render:function(n,r){let d=!1,f=!0===r.isScene?r.background:null;f&&f.isTexture&&(f=e.get(f));const m=t.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(f=null),null===f?p(s,l):f&&f.isColor&&(p(f,1),d=!0),(t.autoClear||d)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),f&&(f.isCubeTexture||f.mapping===wh)?(void 0===a&&(a=new Wd(new Yd(1,1,1),new Qd({name:"BackgroundCubeMaterial",uniforms:qd(yf.cube.uniforms),vertexShader:yf.cube.vertexShader,fragmentShader:yf.cube.fragmentShader,side:Pl,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(a)),a.material.uniforms.envMap.value=f,a.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,h===f&&c===f.version&&u===t.toneMapping||(a.material.needsUpdate=!0,h=f,c=f.version,u=t.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null)):f&&f.isTexture&&(void 0===o&&(o=new Wd(new ff(2,2),new Qd({name:"BackgroundMaterial",uniforms:qd(yf.background.uniforms),vertexShader:yf.background.vertexShader,fragmentShader:yf.background.fragmentShader,side:Ml,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(o)),o.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),o.material.uniforms.uvTransform.value.copy(f.matrix),h===f&&c===f.version&&u===t.toneMapping||(o.material.needsUpdate=!0,h=f,c=f.version,u=t.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null))}}}function _f(t,e,n,i){const r=t.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},l=p(null);let h=l;function c(e){return i.isWebGL2?t.bindVertexArray(e):s.bindVertexArrayOES(e)}function u(e){return i.isWebGL2?t.deleteVertexArray(e):s.deleteVertexArrayOES(e)}function p(t){const e=[],n=[],i=[];for(let s=0;s<r;s++)e[s]=0,n[s]=0,i[s]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function d(){const t=h.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function f(t){m(t,0)}function m(n,r){const s=h.newAttributes,o=h.enabledAttributes,a=h.attributeDivisors;if(s[n]=1,0===o[n]&&(t.enableVertexAttribArray(n),o[n]=1),a[n]!==r){(i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),a[n]=r}}function g(){const e=h.newAttributes,n=h.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function y(e,n,r,s,o,a){!0!==i.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,n,r,s,o,a):t.vertexAttribIPointer(e,n,r,o,a)}function v(){_(),h!==l&&(h=l,c(h.object))}function _(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,u,v,_){let T=!1;if(o){const e=function(e,n,r){const o=!0===r.wireframe;let l=a[e.id];void 0===l&&(l={},a[e.id]=l);let h=l[n.id];void 0===h&&(h={},l[n.id]=h);let c=h[o];void 0===c&&(c=p(i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()),h[o]=c);return c}(v,u,l);h!==e&&(h=e,c(h.object)),T=function(t,e){const n=h.attributes,i=t.attributes;let r=0;for(const s in i){const t=n[s],e=i[s];if(void 0===t)return!0;if(t.attribute!==e)return!0;if(t.data!==e.data)return!0;r++}return h.attributesNum!==r||h.index!==e}(v,_),T&&function(t,e){const n={},i=t.attributes;let r=0;for(const s in i){const t=i[s],e={};e.attribute=t,t.data&&(e.data=t.data),n[s]=e,r++}h.attributes=n,h.attributesNum=r,h.index=e}(v,_)}else{const t=!0===l.wireframe;h.geometry===v.id&&h.program===u.id&&h.wireframe===t||(h.geometry=v.id,h.program=u.id,h.wireframe=t,T=!0)}!0===r.isInstancedMesh&&(T=!0),null!==_&&n.update(_,34963),T&&(!function(r,s,o,a){if(!1===i.isWebGL2&&(r.isInstancedMesh||a.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;d();const l=a.attributes,h=o.getAttributes(),c=s.defaultAttributeValues;for(const e in h){const i=h[e];if(i.location>=0){let s=l[e];if(void 0===s&&("instanceMatrix"===e&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===e&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const e=s.normalized,o=s.itemSize,l=n.get(s);if(void 0===l)continue;const h=l.buffer,c=l.type,u=l.bytesPerElement;if(s.isInterleavedBufferAttribute){const n=s.data,l=n.stride,p=s.offset;if(n&&n.isInstancedInterleavedBuffer){for(let t=0;t<i.locationSize;t++)m(i.location+t,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<i.locationSize;t++)f(i.location+t);t.bindBuffer(34962,h);for(let t=0;t<i.locationSize;t++)y(i.location+t,o/i.locationSize,c,e,l*u,(p+o/i.locationSize*t)*u)}else{if(s.isInstancedBufferAttribute){for(let t=0;t<i.locationSize;t++)m(i.location+t,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let t=0;t<i.locationSize;t++)f(i.location+t);t.bindBuffer(34962,h);for(let t=0;t<i.locationSize;t++)y(i.location+t,o/i.locationSize,c,e,o*u,o/i.locationSize*t*u)}}else if(void 0!==c){const n=c[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(i.location,n);break;case 3:t.vertexAttrib3fv(i.location,n);break;case 4:t.vertexAttrib4fv(i.location,n);break;default:t.vertexAttrib1fv(i.location,n)}}}}g()}(r,l,u,v),null!==_&&t.bindBuffer(34963,n.get(_).buffer))},reset:v,resetDefaultState:_,dispose:function(){v();for(const t in a){const e=a[t];for(const t in e){const n=e[t];for(const t in n)u(n[t].object),delete n[t];delete e[t]}delete a[t]}},releaseStatesOfGeometry:function(t){if(void 0===a[t.id])return;const e=a[t.id];for(const n in e){const t=e[n];for(const e in t)u(t[e].object),delete t[e];delete e[n]}delete a[t.id]},releaseStatesOfProgram:function(t){for(const e in a){const n=a[e];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)u(i[t].object),delete i[t];delete n[t.id]}},initAttributes:d,enableAttribute:f,disableUnusedAttributes:g}}function Tf(t,e,n,i){const r=i.isWebGL2;let s;this.setMode=function(t){s=t},this.render=function(e,i){t.drawArrays(s,e,i),n.update(i,s,1)},this.renderInstances=function(i,o,a){if(0===a)return;let l,h;if(r)l=t,h="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[h](s,i,o,a),n.update(o,s,a)}}function Ef(t,e,n){let i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let o=void 0!==n.precision?n.precision:"highp";const a=r(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);const l=s||e.has("WEBGL_draw_buffers"),h=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),u=t.getParameter(35660),p=t.getParameter(3379),d=t.getParameter(34076),f=t.getParameter(34921),m=t.getParameter(36347),g=t.getParameter(36348),y=t.getParameter(36349),v=u>0,_=s||e.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:h,maxTextures:c,maxVertexTextures:u,maxTextureSize:p,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:v,floatFragmentTextures:_,floatVertexTextures:v&&_,maxSamples:s?t.getParameter(36183):0}}function xf(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new lf,a=new Ou,l={value:null,needsUpdate:!1};function h(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function c(t,n,i,r){const s=null!==t?t.length:0;let h=null;if(0!==s){if(h=l.value,!0!==r||null===h){const e=i+4*s,r=n.matrixWorldInverse;a.getNormalMatrix(r),(null===h||h.length<e)&&(h=new Float32Array(e));for(let n=0,l=i;n!==s;++n,l+=4)o.copy(t[n]).applyMatrix4(r,a),o.normal.toArray(h,l),h[l+3]=o.constant}l.value=h,l.needsUpdate=!0}return e.numPlanes=s,e.numIntersection=0,h}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,s){const o=0!==t.length||e||0!==i||r;return r=e,n=c(t,s,0),i=t.length,o},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1,h()},this.setState=function(e,o,a){const u=e.clippingPlanes,p=e.clipIntersection,d=e.clipShadows,f=t.get(e);if(!r||null===u||0===u.length||s&&!d)s?c(null):h();else{const t=s?0:i,e=4*t;let r=f.clippingState||null;l.value=r,r=c(u,o,e,a);for(let i=0;i!==e;++i)r[i]=n[i];f.clippingState=r,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=t}}}function bf(t){let e=new WeakMap;function n(t,e){return e===bh?t.mapping=Eh:e===Ih&&(t.mapping=xh),t}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const s=r.mapping;if(s===bh||s===Ih){if(e.has(r)){return n(e.get(r).texture,r.mapping)}{const s=r.image;if(s&&s.height>0){const o=t.getRenderTarget(),a=new rf(s.height/2);return a.fromEquirectangularTexture(t,r),e.set(r,a),t.setRenderTarget(o),r.addEventListener("dispose",i),n(a.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}yf.physical={uniforms:Xd([yf.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Du(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new pd(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Du},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new pd(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new pd(1,1,1)},specularColorMap:{value:null}}]),vertexShader:mf.meshphysical_vert,fragmentShader:mf.meshphysical_frag};class If extends Jd{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,s=n+t,o=i+e,a=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,s=r+t*this.view.width,o-=e*this.view.offsetY,a=o-e*this.view.height}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}If.prototype.isOrthographicCamera=!0;class wf extends Qd{constructor(t){super(t),this.type="RawShaderMaterial"}}wf.prototype.isRawShaderMaterial=!0;const Sf=4,Rf=8,Cf=Math.pow(2,Rf),Af=[.125,.215,.35,.446,.526,.582],Df=Rf-Sf+1+Af.length,Of=20,Nf={[iu]:0,[ru]:1,[ou]:2,[au]:3,[lu]:4,[hu]:5,[su]:6},Mf=new If,{_lodPlanes:Pf,_sizeLods:Ff,_sigmas:Lf}=Vf(),kf=new pd;let Uf=null;const Bf=(1+Math.sqrt(5))/2,zf=1/Bf,Gf=[new Vu(1,1,1),new Vu(-1,1,1),new Vu(1,1,-1),new Vu(-1,1,-1),new Vu(0,Bf,zf),new Vu(0,Bf,-zf),new Vu(zf,0,Bf),new Vu(-zf,0,Bf),new Vu(Bf,zf,0),new Vu(-Bf,zf,0)];class Hf{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(t){const e=new Float32Array(t),n=new Vu(0,1,0);return new wf({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Nf[iu]},outputEncoding:{value:Nf[iu]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:Ll,depthTest:!1,depthWrite:!1})}(Of),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Uf=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=qf(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Yf(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let t=0;t<Pf.length;t++)Pf[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Uf),t.scissorTest=!1,Zf(t,0,0,t.width,t.height)}_fromTexture(t){Uf=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:Dh,minFilter:Dh,generateMipmaps:!1,type:Lh,format:$h,encoding:jf(t)?t.encoding:ou,depthBuffer:!1},n=Wf(e);return n.depthBuffer=!t,this._pingPongRenderTarget=Wf(e),n}_compileMaterial(t){const e=new Wd(Pf[0],t);this._renderer.compile(e,Mf)}_sceneToCubeUV(t,e,n,i){const r=new $d(90,1,e,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,h=a.outputEncoding,c=a.toneMapping;a.getClearColor(kf),a.toneMapping=mh,a.outputEncoding=iu,a.autoClear=!1;const u=new dd({name:"PMREM.Background",side:Pl,depthWrite:!1,depthTest:!1}),p=new Wd(new Yd,u);let d=!1;const f=t.background;f?f.isColor&&(u.color.copy(f),t.background=null,d=!0):(u.color.copy(kf),d=!0);for(let m=0;m<6;m++){const e=m%3;0==e?(r.up.set(0,s[m],0),r.lookAt(o[m],0,0)):1==e?(r.up.set(0,0,s[m]),r.lookAt(0,o[m],0)):(r.up.set(0,s[m],0),r.lookAt(0,0,o[m])),Zf(i,e*Cf,m>2?Cf:0,Cf,Cf),a.setRenderTarget(i),d&&a.render(p,r),a.render(t,r)}p.geometry.dispose(),p.material.dispose(),a.toneMapping=c,a.outputEncoding=h,a.autoClear=l,t.background=f}_setEncoding(t,e){t.value=Nf[e.encoding]}_textureToCubeUV(t,e){const n=this._renderer,i=t.mapping===Eh||t.mapping===xh;i?null==this._cubemapShader&&(this._cubemapShader=qf()):null==this._equirectShader&&(this._equirectShader=Yf());const r=i?this._cubemapShader:this._equirectShader,s=new Wd(Pf[0],r),o=r.uniforms;o.envMap.value=t,i||o.texelSize.value.set(1/t.image.width,1/t.image.height),this._setEncoding(o.inputEncoding,t),this._setEncoding(o.outputEncoding,e.texture),Zf(e,0,0,3*Cf,2*Cf),n.setRenderTarget(e),n.render(s,Mf)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let i=1;i<Df;i++){const e=Math.sqrt(Lf[i]*Lf[i]-Lf[i-1]*Lf[i-1]),n=Gf[(i-1)%Gf.length];this._blur(t,i-1,i,e,n)}e.autoClear=n}_blur(t,e,n,i,r){const s=this._pingPongRenderTarget;this._halfBlur(t,s,e,n,i,"latitudinal",r),this._halfBlur(s,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,s,o){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const h=new Wd(Pf[i],l),c=l.uniforms,u=Ff[n]-1,p=isFinite(r)?Math.PI/(2*u):2*Math.PI/39,d=r/p,f=isFinite(r)?1+Math.floor(3*d):Of;f>Of&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(Of));const m=[];let g=0;for(let v=0;v<Of;++v){const t=v/d,e=Math.exp(-t*t/2);m.push(e),0==v?g+=e:v<f&&(g+=2*e)}for(let v=0;v<m.length;v++)m[v]=m[v]/g;c.envMap.value=t.texture,c.samples.value=f,c.weights.value=m,c.latitudinal.value="latitudinal"===s,o&&(c.poleAxis.value=o),c.dTheta.value=p,c.mipInt.value=Rf-n,this._setEncoding(c.inputEncoding,t.texture),this._setEncoding(c.outputEncoding,t.texture);const y=Ff[i];Zf(e,3*Math.max(0,Cf-2*y),(0===i?0:2*Cf)+2*y*(i>Rf-Sf?i-Rf+Sf:0),3*y,2*y),a.setRenderTarget(e),a.render(h,Mf)}}function jf(t){return void 0!==t&&t.type===Lh&&(t.encoding===iu||t.encoding===ru||t.encoding===su)}function Vf(){const t=[],e=[],n=[];let i=Rf;for(let r=0;r<Df;r++){const s=Math.pow(2,i);e.push(s);let o=1/s;r>Rf-Sf?o=Af[r-Rf+Sf-1]:0==r&&(o=0),n.push(o);const a=1/(s-1),l=-a/2,h=1+a/2,c=[l,l,h,l,h,h,l,l,h,h,l,h],u=6,p=6,d=3,f=2,m=1,g=new Float32Array(d*p*u),y=new Float32Array(f*p*u),v=new Float32Array(m*p*u);for(let t=0;t<u;t++){const e=t%3*2/3-1,n=t>2?0:-1,i=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];g.set(i,d*p*t),y.set(c,f*p*t);const r=[t,t,t,t,t,t];v.set(r,m*p*t)}const _=new Rd;_.setAttribute("position",new gd(g,d)),_.setAttribute("uv",new gd(y,f)),_.setAttribute("faceIndex",new gd(v,m)),t.push(_),i>Sf&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}function Wf(t){const e=new Gu(3*Cf,3*Cf,t);return e.texture.mapping=wh,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Zf(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function Yf(){const t=new Du(1,1);return new wf({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:Nf[iu]},outputEncoding:{value:Nf[iu]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:Ll,depthTest:!1,depthWrite:!1})}function qf(){return new wf({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Nf[iu]},outputEncoding:{value:Nf[iu]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:Ll,depthTest:!1,depthWrite:!1})}function Xf(t){let e=new WeakMap,n=null;function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const s=r.mapping,o=s===bh||s===Ih,a=s===Eh||s===xh;if(o||a){if(e.has(r))return e.get(r).texture;{const s=r.image;if(o&&s&&s.height>0||a&&s&&function(t){let e=0;const n=6;for(let i=0;i<n;i++)void 0!==t[i]&&e++;return e===n}(s)){const s=t.getRenderTarget();null===n&&(n=new Hf(t));const a=o?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,a),t.setRenderTarget(s),r.addEventListener("dispose",i),a.texture}return null}}}return r},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Kf(t){const e={};function n(n){if(void 0!==e[n])return e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function Qf(t,e,n,i){const r={},s=new WeakMap;function o(t){const a=t.target;null!==a.index&&e.remove(a.index);for(const n in a.attributes)e.remove(a.attributes[n]);a.removeEventListener("dispose",o),delete r[a.id];const l=s.get(a);l&&(e.remove(l),s.delete(a)),i.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(t){const n=[],i=t.index,r=t.attributes.position;let o=0;if(null!==i){const t=i.array;o=i.version;for(let e=0,i=t.length;e<i;e+=3){const i=t[e+0],r=t[e+1],s=t[e+2];n.push(i,r,r,s,s,i)}}else{const t=r.array;o=r.version;for(let e=0,i=t.length/3-1;e<i;e+=3){const t=e+0,i=e+1,r=e+2;n.push(t,i,i,r,r,t)}}const a=new(Nu(n)>65535?vd:yd)(n,1);a.version=o;const l=s.get(t);l&&e.remove(l),s.set(t,a)}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener("dispose",o),r[e.id]=!0,n.memory.geometries++),e},update:function(t){const n=t.attributes;for(const r in n)e.update(n[r],34962);const i=t.morphAttributes;for(const r in i){const t=i[r];for(let n=0,i=t.length;n<i;n++)e.update(t[n],34962)}},getWireframeAttribute:function(t){const e=s.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&a(t)}else a(t);return s.get(t)}}}function Jf(t,e,n,i){const r=i.isWebGL2;let s,o,a;this.setMode=function(t){s=t},this.setIndex=function(t){o=t.type,a=t.bytesPerElement},this.render=function(e,i){t.drawElements(s,i,o,e*a),n.update(i,s,1)},this.renderInstances=function(i,l,h){if(0===h)return;let c,u;if(r)c=t,u="drawElementsInstanced";else if(c=e.get("ANGLE_instanced_arrays"),u="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[u](s,l,o,i*a,h),n.update(l,s,h)}}function $f(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}class tm extends Uu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=Dh,this.minFilter=Dh,this.wrapR=Ch,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}function em(t,e){return t[0]-e[0]}function nm(t,e){return Math.abs(e[1])-Math.abs(t[1])}function im(t,e){let n=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?n=127:i instanceof Int16Array?n=32767:i instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),t.divideScalar(n)}function rm(t,e,n){const i={},r=new Float32Array(8),s=new WeakMap,o=new Vu,a=[];for(let l=0;l<8;l++)a[l]=[l,0];return{update:function(l,h,c,u){const p=l.morphTargetInfluences;if(!0===e.isWebGL2){const i=h.morphAttributes.position.length;let r=s.get(h);if(void 0===r||r.count!==i){void 0!==r&&r.texture.dispose();const t=void 0!==h.morphAttributes.normal,n=h.morphAttributes.position,a=h.morphAttributes.normal||[],l=!0===t?2:1;let c=h.attributes.position.count*l,u=1;c>e.maxTextureSize&&(u=Math.ceil(c/e.maxTextureSize),c=e.maxTextureSize);const p=new Float32Array(c*u*4*i),d=new tm(p,c,u,i);d.format=Kh,d.type=Hh;const f=4*l;for(let e=0;e<i;e++){const i=n[e],r=a[e],s=c*u*4*e;for(let e=0;e<i.count;e++){o.fromBufferAttribute(i,e),!0===i.normalized&&im(o,i);const n=e*f;p[s+n+0]=o.x,p[s+n+1]=o.y,p[s+n+2]=o.z,p[s+n+3]=0,!0===t&&(o.fromBufferAttribute(r,e),!0===r.normalized&&im(o,r),p[s+n+4]=o.x,p[s+n+5]=o.y,p[s+n+6]=o.z,p[s+n+7]=0)}}r={count:i,texture:d,size:new Du(c,u)},s.set(h,r)}let a=0;for(let t=0;t<p.length;t++)a+=p[t];const l=h.morphTargetsRelative?1:1-a;u.getUniforms().setValue(t,"morphTargetBaseInfluence",l),u.getUniforms().setValue(t,"morphTargetInfluences",p),u.getUniforms().setValue(t,"morphTargetsTexture",r.texture,n),u.getUniforms().setValue(t,"morphTargetsTextureSize",r.size)}else{const e=void 0===p?0:p.length;let n=i[h.id];if(void 0===n||n.length!==e){n=[];for(let t=0;t<e;t++)n[t]=[t,0];i[h.id]=n}for(let t=0;t<e;t++){const e=n[t];e[0]=t,e[1]=p[t]}n.sort(nm);for(let t=0;t<8;t++)t<e&&n[t][1]?(a[t][0]=n[t][0],a[t][1]=n[t][1]):(a[t][0]=Number.MAX_SAFE_INTEGER,a[t][1]=0);a.sort(em);const s=h.morphAttributes.position,o=h.morphAttributes.normal;let l=0;for(let t=0;t<8;t++){const e=a[t],n=e[0],i=e[1];n!==Number.MAX_SAFE_INTEGER&&i?(s&&h.getAttribute("morphTarget"+t)!==s[n]&&h.setAttribute("morphTarget"+t,s[n]),o&&h.getAttribute("morphNormal"+t)!==o[n]&&h.setAttribute("morphNormal"+t,o[n]),r[t]=i,l+=i):(s&&!0===h.hasAttribute("morphTarget"+t)&&h.deleteAttribute("morphTarget"+t),o&&!0===h.hasAttribute("morphNormal"+t)&&h.deleteAttribute("morphNormal"+t),r[t]=0)}const c=h.morphTargetsRelative?1:1-l;u.getUniforms().setValue(t,"morphTargetBaseInfluence",c),u.getUniforms().setValue(t,"morphTargetInfluences",r)}}}}function sm(t,e,n,i){let r=new WeakMap;function s(t){const e=t.target;e.removeEventListener("dispose",s),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){const o=i.render.frame,a=t.geometry,l=e.get(t,a);return r.get(l)!==o&&(e.update(l),r.set(l,o)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",s)&&t.addEventListener("dispose",s),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l},dispose:function(){r=new WeakMap}}}tm.prototype.isDataTexture2DArray=!0;class om extends Uu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=Dh,this.minFilter=Dh,this.wrapR=Ch,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}om.prototype.isDataTexture3D=!0;const am=new Uu,lm=new tm,hm=new om,cm=new nf,um=[],pm=[],dm=new Float32Array(16),fm=new Float32Array(9),mm=new Float32Array(4);function gm(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=um[r];if(void 0===s&&(s=new Float32Array(r),um[r]=s),0!==e){i.toArray(s,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(s,r)}return s}function ym(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function vm(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function _m(t,e){let n=pm[e];void 0===n&&(n=new Int32Array(e),pm[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Tm(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Em(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ym(n,e))return;t.uniform2fv(this.addr,e),vm(n,e)}}function xm(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ym(n,e))return;t.uniform3fv(this.addr,e),vm(n,e)}}function bm(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ym(n,e))return;t.uniform4fv(this.addr,e),vm(n,e)}}function Im(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(ym(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),vm(n,e)}else{if(ym(n,i))return;mm.set(i),t.uniformMatrix2fv(this.addr,!1,mm),vm(n,i)}}function wm(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(ym(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),vm(n,e)}else{if(ym(n,i))return;fm.set(i),t.uniformMatrix3fv(this.addr,!1,fm),vm(n,i)}}function Sm(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(ym(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),vm(n,e)}else{if(ym(n,i))return;dm.set(i),t.uniformMatrix4fv(this.addr,!1,dm),vm(n,i)}}function Rm(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Cm(t,e){const n=this.cache;ym(n,e)||(t.uniform2iv(this.addr,e),vm(n,e))}function Am(t,e){const n=this.cache;ym(n,e)||(t.uniform3iv(this.addr,e),vm(n,e))}function Dm(t,e){const n=this.cache;ym(n,e)||(t.uniform4iv(this.addr,e),vm(n,e))}function Om(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Nm(t,e){const n=this.cache;ym(n,e)||(t.uniform2uiv(this.addr,e),vm(n,e))}function Mm(t,e){const n=this.cache;ym(n,e)||(t.uniform3uiv(this.addr,e),vm(n,e))}function Pm(t,e){const n=this.cache;ym(n,e)||(t.uniform4uiv(this.addr,e),vm(n,e))}function Fm(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||am,r)}function Lm(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||hm,r)}function km(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||cm,r)}function Um(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||lm,r)}function Bm(t,e){t.uniform1fv(this.addr,e)}function zm(t,e){const n=gm(e,this.size,2);t.uniform2fv(this.addr,n)}function Gm(t,e){const n=gm(e,this.size,3);t.uniform3fv(this.addr,n)}function Hm(t,e){const n=gm(e,this.size,4);t.uniform4fv(this.addr,n)}function jm(t,e){const n=gm(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Vm(t,e){const n=gm(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Wm(t,e){const n=gm(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Zm(t,e){t.uniform1iv(this.addr,e)}function Ym(t,e){t.uniform2iv(this.addr,e)}function qm(t,e){t.uniform3iv(this.addr,e)}function Xm(t,e){t.uniform4iv(this.addr,e)}function Km(t,e){t.uniform1uiv(this.addr,e)}function Qm(t,e){t.uniform2uiv(this.addr,e)}function Jm(t,e){t.uniform3uiv(this.addr,e)}function $m(t,e){t.uniform4uiv(this.addr,e)}function tg(t,e,n){const i=e.length,r=_m(n,i);t.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)n.safeSetTexture2D(e[s]||am,r[s])}function eg(t,e,n){const i=e.length,r=_m(n,i);t.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)n.setTexture3D(e[s]||hm,r[s])}function ng(t,e,n){const i=e.length,r=_m(n,i);t.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)n.safeSetTextureCube(e[s]||cm,r[s])}function ig(t,e,n){const i=e.length,r=_m(n,i);t.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||lm,r[s])}function rg(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Tm;case 35664:return Em;case 35665:return xm;case 35666:return bm;case 35674:return Im;case 35675:return wm;case 35676:return Sm;case 5124:case 35670:return Rm;case 35667:case 35671:return Cm;case 35668:case 35672:return Am;case 35669:case 35673:return Dm;case 5125:return Om;case 36294:return Nm;case 36295:return Mm;case 36296:return Pm;case 35678:case 36198:case 36298:case 36306:case 35682:return Fm;case 35679:case 36299:case 36307:return Lm;case 35680:case 36300:case 36308:case 36293:return km;case 36289:case 36303:case 36311:case 36292:return Um}}(e.type)}function sg(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Bm;case 35664:return zm;case 35665:return Gm;case 35666:return Hm;case 35674:return jm;case 35675:return Vm;case 35676:return Wm;case 5124:case 35670:return Zm;case 35667:case 35671:return Ym;case 35668:case 35672:return qm;case 35669:case 35673:return Xm;case 5125:return Km;case 36294:return Qm;case 36295:return Jm;case 36296:return $m;case 35678:case 36198:case 36298:case 36306:case 35682:return tg;case 35679:case 36299:case 36307:return eg;case 35680:case 36300:case 36308:case 36293:return ng;case 36289:case 36303:case 36311:case 36292:return ig}}(e.type)}function og(t){this.id=t,this.seq=[],this.map={}}sg.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),vm(e,t)},og.prototype.setValue=function(t,e,n){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const s=i[r];s.setValue(t,e[s.id],n)}};const ag=/(\w+)(\])?(\[|\.)?/g;function lg(t,e){t.seq.push(e),t.map[e.id]=e}function hg(t,e,n){const i=t.name,r=i.length;for(ag.lastIndex=0;;){const s=ag.exec(i),o=ag.lastIndex;let a=s[1];const l="]"===s[2],h=s[3];if(l&&(a|=0),void 0===h||"["===h&&o+2===r){lg(n,void 0===h?new rg(a,t,e):new sg(a,t,e));break}{let t=n.map[a];void 0===t&&(t=new og(a),lg(n,t)),n=t}}}function cg(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);hg(n,t.getUniformLocation(e,n.name),this)}}function ug(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}cg.prototype.setValue=function(t,e,n,i){const r=this.map[e];void 0!==r&&r.setValue(t,n,i)},cg.prototype.setOptional=function(t,e,n){const i=e[n];void 0!==i&&this.setValue(t,n,i)},cg.upload=function(t,e,n,i){for(let r=0,s=e.length;r!==s;++r){const s=e[r],o=n[s.id];!1!==o.needsUpdate&&s.setValue(t,o.value,i)}},cg.seqWithValue=function(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const r=t[i];r.id in e&&n.push(r)}return n};let pg=0;function dg(t){switch(t){case iu:return["Linear","( value )"];case ru:return["sRGB","( value )"];case ou:return["RGBE","( value )"];case au:return["RGBM","( value, 7.0 )"];case lu:return["RGBM","( value, 16.0 )"];case hu:return["RGBD","( value, 256.0 )"];case su:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function fg(t,e,n){const i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();return i&&""===r?"":n.toUpperCase()+"\n\n"+r+"\n\n"+function(t){const e=t.split("\n");for(let n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(t.getShaderSource(e))}function mg(t,e){const n=dg(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function gg(t,e){const n=dg(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function yg(t,e){let n;switch(e){case gh:n="Linear";break;case yh:n="Reinhard";break;case vh:n="OptimizedCineon";break;case _h:n="ACESFilmic";break;case Th:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function vg(t){return""!==t}function _g(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Tg(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Eg=/^[ \t]*#include +<([\w\d./]+)>/gm;function xg(t){return t.replace(Eg,bg)}function bg(t,e){const n=mf[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return xg(n)}const Ig=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,wg=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Sg(t){return t.replace(wg,Cg).replace(Ig,Rg)}function Rg(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Cg(t,e,n,i)}function Cg(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Ag(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Dg(t,e,n,i){const r=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Dl?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Ol?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Nl&&(e="SHADOWMAP_TYPE_VSM"),e}(n),h=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Eh:case xh:e="ENVMAP_TYPE_CUBE";break;case wh:case Sh:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),c=function(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case xh:case Sh:e="ENVMAP_MODE_REFRACTION"}return e}(n),u=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case ph:e="ENVMAP_BLENDING_MULTIPLY";break;case dh:e="ENVMAP_BLENDING_MIX";break;case fh:e="ENVMAP_BLENDING_ADD"}return e}(n),p=t.gammaFactor>0?t.gammaFactor:1,d=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(vg).join("\n")}(n),f=function(t){const e=[];for(const n in t){const i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(s),m=r.createProgram();let g,y,v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[f].filter(vg).join("\n"),g.length>0&&(g+="\n"),y=[d,f].filter(vg).join("\n"),y.length>0&&(y+="\n")):(g=[Ag(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(vg).join("\n"),y=[d,Ag(n),"#define SHADER_NAME "+n.shaderName,f,"#define GAMMA_FACTOR "+p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==mh?"#define TONE_MAPPING":"",n.toneMapping!==mh?mf.tonemapping_pars_fragment:"",n.toneMapping!==mh?yg("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===Xh?"#define OPAQUE":"",mf.encodings_pars_fragment,n.map?mg("mapTexelToLinear",n.mapEncoding):"",n.matcap?mg("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?mg("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?mg("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularColorMap?mg("specularColorMapTexelToLinear",n.specularColorMapEncoding):"",n.sheenColorMap?mg("sheenColorMapTexelToLinear",n.sheenColorMapEncoding):"",n.lightMap?mg("lightMapTexelToLinear",n.lightMapEncoding):"",gg("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(vg).join("\n")),o=xg(o),o=_g(o,n),o=Tg(o,n),a=xg(a),a=_g(a,n),a=Tg(a,n),o=Sg(o),a=Sg(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,y=["#define varying in",n.glslVersion===gu?"":"out highp vec4 pc_fragColor;",n.glslVersion===gu?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const _=v+y+a,T=ug(r,35633,v+g+o),E=ug(r,35632,_);if(r.attachShader(m,T),r.attachShader(m,E),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),t.debug.checkShaderErrors){const t=r.getProgramInfoLog(m).trim(),e=r.getShaderInfoLog(T).trim(),n=r.getShaderInfoLog(E).trim();let i=!0,s=!0;if(!1===r.getProgramParameter(m,35714)){i=!1;const e=fg(r,T,"vertex"),n=fg(r,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==e&&""!==n||(s=!1);s&&(this.diagnostics={runnable:i,programLog:t,vertexShader:{log:e,prefix:g},fragmentShader:{log:n,prefix:y}})}let x,b;return r.deleteShader(T),r.deleteShader(E),this.getUniforms=function(){return void 0===x&&(x=new cg(r,m)),x},this.getAttributes=function(){return void 0===b&&(b=function(t,e){const n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const i=t.getActiveAttrib(e,r),s=i.name;let o=1;35674===i.type&&(o=2),35675===i.type&&(o=3),35676===i.type&&(o=4),n[s]={type:i.type,location:t.getAttribLocation(e,s),locationSize:o}}return n}(r,m)),b},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=pg++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=T,this.fragmentShader=E,this}function Og(t,e,n,i,r,s,o){const a=[],l=r.isWebGL2,h=r.logarithmicDepthBuffer,c=r.floatVertexTextures,u=r.maxVertexUniforms,p=r.vertexTextures;let d=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},m=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function g(t){let e;return t&&t.isTexture?e=t.encoding:t&&t.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=iu,e}return{getParameters:function(s,a,m,y,v){const _=y.fog,T=s.isMeshStandardMaterial?y.environment:null,E=(s.isMeshStandardMaterial?n:e).get(s.envMap||T),x=f[s.type],b=v.isSkinnedMesh?function(t){const e=t.skeleton.bones;if(c)return 1024;{const t=u,n=Math.floor((t-20)/4),i=Math.min(n,e.length);return i<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+i+"."),0):i}}(v):0;let I,w;if(null!==s.precision&&(d=r.getMaxPrecision(s.precision),d!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",d,"instead.")),x){const t=yf[x];I=t.vertexShader,w=t.fragmentShader}else I=s.vertexShader,w=s.fragmentShader;const S=t.getRenderTarget(),R=s.alphaTest>0,C=s.clearcoat>0;return{isWebGL2:l,shaderID:x,shaderName:s.type,vertexShader:I,fragmentShader:w,defines:s.defines,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:d,instancing:!0===v.isInstancedMesh,instancingColor:!0===v.isInstancedMesh&&null!==v.instanceColor,supportsVertexTextures:p,outputEncoding:null!==S?g(S.texture):t.outputEncoding,map:!!s.map,mapEncoding:g(s.map),matcap:!!s.matcap,matcapEncoding:g(s.matcap),envMap:!!E,envMapMode:E&&E.mapping,envMapEncoding:g(E),envMapCubeUV:!!E&&(E.mapping===wh||E.mapping===Sh),lightMap:!!s.lightMap,lightMapEncoding:g(s.lightMap),aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,emissiveMapEncoding:g(s.emissiveMap),bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,objectSpaceNormalMap:s.normalMapType===pu,tangentSpaceNormalMap:s.normalMapType===uu,clearcoat:C,clearcoatMap:C&&!!s.clearcoatMap,clearcoatRoughnessMap:C&&!!s.clearcoatRoughnessMap,clearcoatNormalMap:C&&!!s.clearcoatNormalMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,specularIntensityMap:!!s.specularIntensityMap,specularColorMap:!!s.specularColorMap,specularColorMapEncoding:g(s.specularColorMap),alphaMap:!!s.alphaMap,alphaTest:R,gradientMap:!!s.gradientMap,sheen:s.sheen>0,sheenColorMap:!!s.sheenColorMap,sheenColorMapEncoding:g(s.sheenColorMap),sheenRoughnessMap:!!s.sheenRoughnessMap,transmission:s.transmission>0,transmissionMap:!!s.transmissionMap,thicknessMap:!!s.thicknessMap,combine:s.combine,vertexTangents:!!s.normalMap&&!!v.geometry&&!!v.geometry.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!v.geometry&&!!v.geometry.attributes.color&&4===v.geometry.attributes.color.itemSize,vertexUvs:!!s.map||!!s.bumpMap||!!s.normalMap||!!s.specularMap||!!s.alphaMap||!!s.emissiveMap||!!s.roughnessMap||!!s.metalnessMap||!!s.clearcoatMap||!!s.clearcoatRoughnessMap||!!s.clearcoatNormalMap||!!s.displacementMap||!!s.transmissionMap||!!s.thicknessMap||!!s.specularIntensityMap||!!s.specularColorMap||!!s.sheenColorMap||s.sheenRoughnessMap,uvsVertexOnly:!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatNormalMap||s.transmission>0||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheen>0||s.sheenColorMap||s.sheenRoughnessMap)&&!!s.displacementMap,fog:!!_,useFog:s.fog,fogExp2:_&&_.isFogExp2,flatShading:!!s.flatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===v.isSkinnedMesh&&b>0,maxBones:b,useVertexTexture:c,morphTargets:!!v.geometry&&!!v.geometry.morphAttributes.position,morphNormals:!!v.geometry&&!!v.geometry.morphAttributes.normal,morphTargetsCount:v.geometry&&v.geometry.morphAttributes.position?v.geometry.morphAttributes.position.length:0,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:s.format,dithering:s.dithering,shadowMapEnabled:t.shadowMap.enabled&&m.length>0,shadowMapType:t.shadowMap.type,toneMapping:s.toneMapped?t.toneMapping:mh,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===Fl,flipSided:s.side===Pl,depthPacking:void 0!==s.depthPacking&&s.depthPacking,index0AttributeName:s.index0AttributeName,extensionDerivatives:s.extensions&&s.extensions.derivatives,extensionFragDepth:s.extensions&&s.extensions.fragDepth,extensionDrawBuffers:s.extensions&&s.extensions.drawBuffers,extensionShaderTextureLOD:s.extensions&&s.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||i.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(Pu(e.fragmentShader)),n.push(Pu(e.vertexShader))),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);if(!1===e.isRawShaderMaterial){for(let t=0;t<m.length;t++)n.push(e[m[t]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=f[t.type];let n;if(e){const t=yf[e];n=Kd.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let i;for(let t=0,r=a.length;t<r;t++){const e=a[t];if(e.cacheKey===n){i=e,++i.usedTimes;break}}return void 0===i&&(i=new Dg(t,n,e,s),a.push(i)),i},releaseProgram:function(t){if(0===--t.usedTimes){const e=a.indexOf(t);a[e]=a[a.length-1],a.pop(),t.destroy()}},programs:a}}function Ng(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function Mg(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Pg(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Fg(t){const e=[];let n=0;const i=[],r=[],s=[],o={id:-1};function a(i,r,s,a,l,h){let c=e[n];const u=t.get(s);return void 0===c?(c={id:i.id,object:i,geometry:r,material:s,program:u.program||o,groupOrder:a,renderOrder:i.renderOrder,z:l,group:h},e[n]=c):(c.id=i.id,c.object=i,c.geometry=r,c.material=s,c.program=u.program||o,c.groupOrder=a,c.renderOrder=i.renderOrder,c.z=l,c.group=h),n++,c}return{opaque:i,transmissive:r,transparent:s,init:function(){n=0,i.length=0,r.length=0,s.length=0},push:function(t,e,n,o,l,h){const c=a(t,e,n,o,l,h);n.transmission>0?r.push(c):!0===n.transparent?s.push(c):i.push(c)},unshift:function(t,e,n,o,l,h){const c=a(t,e,n,o,l,h);n.transmission>0?r.unshift(c):!0===n.transparent?s.unshift(c):i.unshift(c)},finish:function(){for(let t=n,i=e.length;t<i;t++){const n=e[t];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(t,e){i.length>1&&i.sort(t||Mg),r.length>1&&r.sort(e||Pg),s.length>1&&s.sort(e||Pg)}}}function Lg(t){let e=new WeakMap;return{get:function(n,i){let r;return!1===e.has(n)?(r=new Fg(t),e.set(n,[r])):i>=e.get(n).length?(r=new Fg(t),e.get(n).push(r)):r=e.get(n)[i],r},dispose:function(){e=new WeakMap}}}function kg(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Vu,color:new pd};break;case"SpotLight":n={position:new Vu,direction:new Vu,color:new pd,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Vu,color:new pd,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Vu,skyColor:new pd,groundColor:new pd};break;case"RectAreaLight":n={color:new pd,position:new Vu,halfWidth:new Vu,halfHeight:new Vu}}return t[e.id]=n,n}}}let Ug=0;function Bg(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function zg(t,e){const n=new kg,i=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Du};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Du,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let l=0;l<9;l++)r.probe.push(new Vu);const s=new Vu,o=new Ep,a=new Ep;return{setup:function(s,o){let a=0,l=0,h=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let c=0,u=0,p=0,d=0,f=0,m=0,g=0,y=0;s.sort(Bg);const v=!0!==o?Math.PI:1;for(let t=0,e=s.length;t<e;t++){const e=s[t],o=e.color,_=e.intensity,T=e.distance,E=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)a+=o.r*_*v,l+=o.g*_*v,h+=o.b*_*v;else if(e.isLightProbe)for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],_);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*v),e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.directionalShadow[c]=n,r.directionalShadowMap[c]=E,r.directionalShadowMatrix[c]=e.shadow.matrix,m++}r.directional[c]=t,c++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(o).multiplyScalar(_*v),t.distance=T,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.spotShadow[p]=n,r.spotShadowMap[p]=E,r.spotShadowMatrix[p]=e.shadow.matrix,y++}r.spot[p]=t,p++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(o).multiplyScalar(_),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),r.rectArea[d]=t,d++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*v),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,r.pointShadow[u]=n,r.pointShadowMap[u]=E,r.pointShadowMatrix[u]=e.shadow.matrix,g++}r.point[u]=t,u++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(_*v),t.groundColor.copy(e.groundColor).multiplyScalar(_*v),r.hemi[f]=t,f++}}d>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=gf.LTC_FLOAT_1,r.rectAreaLTC2=gf.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=gf.LTC_HALF_1,r.rectAreaLTC2=gf.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=a,r.ambient[1]=l,r.ambient[2]=h;const _=r.hash;_.directionalLength===c&&_.pointLength===u&&_.spotLength===p&&_.rectAreaLength===d&&_.hemiLength===f&&_.numDirectionalShadows===m&&_.numPointShadows===g&&_.numSpotShadows===y||(r.directional.length=c,r.spot.length=p,r.rectArea.length=d,r.point.length=u,r.hemi.length=f,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=y,r.spotShadowMap.length=y,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotShadowMatrix.length=y,_.directionalLength=c,_.pointLength=u,_.spotLength=p,_.rectAreaLength=d,_.hemiLength=f,_.numDirectionalShadows=m,_.numPointShadows=g,_.numSpotShadows=y,r.version=Ug++)},setupView:function(t,e){let n=0,i=0,l=0,h=0,c=0;const u=e.matrixWorldInverse;for(let p=0,d=t.length;p<d;p++){const e=t[p];if(e.isDirectionalLight){const t=r.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),s.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(u),n++}else if(e.isSpotLight){const t=r.spot[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(u),t.direction.setFromMatrixPosition(e.matrixWorld),s.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(u),l++}else if(e.isRectAreaLight){const t=r.rectArea[h];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(u),a.identity(),o.copy(e.matrixWorld),o.premultiply(u),a.extractRotation(o),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),h++}else if(e.isPointLight){const t=r.point[i];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(u),i++}else if(e.isHemisphereLight){const t=r.hemi[c];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(u),t.direction.normalize(),c++}}},state:r}}function Gg(t,e){const n=new zg(t,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(t){n.setup(i,t)},setupLightsView:function(t){n.setupView(i,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function Hg(t,e){let n=new WeakMap;return{get:function(i){let r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(i)?(r=new Gg(t,e),n.set(i,[r])):s>=n.get(i).length?(r=new Gg(t,e),n.get(i).push(r)):r=n.get(i)[s],r},dispose:function(){n=new WeakMap}}}class jg extends sd{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}jg.prototype.isMeshDepthMaterial=!0;class Vg extends sd{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Vu,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}Vg.prototype.isMeshDistanceMaterial=!0;const Wg="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Zg="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Yg(t,e,n){let i=new uf;const r=new Du,s=new Du,o=new zu,a=new jg({depthPacking:cu}),l=new Vg,h={},c=n.maxTextureSize,u={0:Pl,1:Ml,2:Fl},p=new Qd({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Du},radius:{value:4}},vertexShader:Wg,fragmentShader:Zg}),d=p.clone();d.defines.HORIZONTAL_PASS=1;const f=new Rd;f.setAttribute("position",new gd(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Wd(f,p),g=this;function y(n,i){const r=e.update(m);p.defines.VSM_SAMPLES!==n.blurSamples&&(p.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,p.needsUpdate=!0,d.needsUpdate=!0),p.uniforms.shadow_pass.value=n.map.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,p,m,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,d,m,null)}function v(e,n,i,r,s,o,c){let p=null;const d=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(p=void 0!==d?d:!0===r.isPointLight?l:a,t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0){const t=p.uuid,e=i.uuid;let n=h[t];void 0===n&&(n={},h[t]=n);let r=n[e];void 0===r&&(r=p.clone(),n[e]=r),p=r}return p.visible=i.visible,p.wireframe=i.wireframe,p.side=c===Nl?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:u[i.side],p.alphaMap=i.alphaMap,p.alphaTest=i.alphaTest,p.clipShadows=i.clipShadows,p.clippingPlanes=i.clippingPlanes,p.clipIntersection=i.clipIntersection,p.displacementMap=i.displacementMap,p.displacementScale=i.displacementScale,p.displacementBias=i.displacementBias,p.wireframeLinewidth=i.wireframeLinewidth,p.linewidth=i.linewidth,!0===r.isPointLight&&!0===p.isMeshDistanceMaterial&&(p.referencePosition.setFromMatrixPosition(r.matrixWorld),p.nearDistance=s,p.farDistance=o),p}function _(n,r,s,o,a){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===Nl)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const i=e.update(n),r=n.material;if(Array.isArray(r)){const e=i.groups;for(let l=0,h=e.length;l<h;l++){const h=e[l],c=r[h.materialIndex];if(c&&c.visible){const e=v(n,0,c,o,s.near,s.far,a);t.renderBufferDirect(s,null,i,e,n,h)}}}else if(r.visible){const e=v(n,0,r,o,s.near,s.far,a);t.renderBufferDirect(s,null,i,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)_(l[t],r,s,o,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Dl,this.render=function(e,n,a){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),h=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),p=t.state;p.setBlending(Ll),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(let d=0,f=e.length;d<f;d++){const l=e[d],h=l.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;r.copy(h.mapSize);const u=h.getFrameExtents();if(r.multiply(u),s.copy(h.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(s.x=Math.floor(c/u.x),r.x=s.x*u.x,h.mapSize.x=s.x),r.y>c&&(s.y=Math.floor(c/u.y),r.y=s.y*u.y,h.mapSize.y=s.y)),null===h.map&&!h.isPointLightShadow&&this.type===Nl){const t={minFilter:Mh,magFilter:Mh,format:Kh};h.map=new Gu(r.x,r.y,t),h.map.texture.name=l.name+".shadowMap",h.mapPass=new Gu(r.x,r.y,t),h.camera.updateProjectionMatrix()}if(null===h.map){const t={minFilter:Dh,magFilter:Dh,format:Kh};h.map=new Gu(r.x,r.y,t),h.map.texture.name=l.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();const f=h.getViewportCount();for(let t=0;t<f;t++){const e=h.getViewport(t);o.set(s.x*e.x,s.y*e.y,s.x*e.z,s.y*e.w),p.viewport(o),h.updateMatrices(l,t),i=h.getFrustum(),_(n,a,h.camera,l,this.type)}h.isPointLightShadow||this.type!==Nl||y(h,a),h.needsUpdate=!1}g.needsUpdate=!1,t.setRenderTarget(l,h,u)}}function qg(t,e,n){const i=n.isWebGL2;const r=new function(){let e=!1;const n=new zu;let i=null;const r=new zu(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,s,o,a){!0===a&&(e*=o,i*=o,s*=o),n.set(e,i,s,o),!1===r.equals(n)&&(t.clearColor(e,i,s,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){let e=!1,n=null,i=null,r=null;return{setTest:function(t){t?L(2929):k(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case rh:t.depthFunc(512);break;case sh:t.depthFunc(519);break;case oh:t.depthFunc(513);break;case ah:t.depthFunc(515);break;case lh:t.depthFunc(514);break;case hh:t.depthFunc(518);break;case ch:t.depthFunc(516);break;case uh:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},o=new function(){let e=!1,n=null,i=null,r=null,s=null,o=null,a=null,l=null,h=null;return{setTest:function(t){e||(t?L(2960):k(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){i===e&&r===n&&s===o||(t.stencilFunc(e,n,o),i=e,r=n,s=o)},setOp:function(e,n,i){o===e&&a===n&&l===i||(t.stencilOp(e,n,i),o=e,a=n,l=i)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,n=null,i=null,r=null,s=null,o=null,a=null,l=null,h=null}}};let a={},l={},h=null,c=!1,u=null,p=null,d=null,f=null,m=null,g=null,y=null,v=!1,_=null,T=null,E=null,x=null,b=null;const I=t.getParameter(35661);let w=!1,S=0;const R=t.getParameter(7938);-1!==R.indexOf("WebGL")?(S=parseFloat(/^WebGL (\d)/.exec(R)[1]),w=S>=1):-1!==R.indexOf("OpenGL ES")&&(S=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),w=S>=2);let C=null,A={};const D=t.getParameter(3088),O=t.getParameter(2978),N=(new zu).fromArray(D),M=(new zu).fromArray(O);function P(e,n,i){const r=new Uint8Array(4),s=t.createTexture();t.bindTexture(e,s),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let o=0;o<i;o++)t.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return s}const F={};function L(e){!0!==a[e]&&(t.enable(e),a[e]=!0)}function k(e){!1!==a[e]&&(t.disable(e),a[e]=!1)}F[3553]=P(3553,3553,1),F[34067]=P(34067,34069,6),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),L(2929),s.setFunc(ah),G(!1),H(Cl),L(2884),z(Ll);const U={[Hl]:32774,[jl]:32778,[Vl]:32779};if(i)U[Wl]=32775,U[Zl]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(U[Wl]=t.MIN_EXT,U[Zl]=t.MAX_EXT)}const B={[Yl]:0,[ql]:1,[Xl]:768,[Ql]:770,[ih]:776,[eh]:774,[$l]:772,[Kl]:769,[Jl]:771,[nh]:775,[th]:773};function z(e,n,i,r,s,o,a,l){if(e!==Ll){if(!1===c&&(L(3042),c=!0),e===Gl)s=s||n,o=o||i,a=a||r,n===p&&s===m||(t.blendEquationSeparate(U[n],U[s]),p=n,m=s),i===d&&r===f&&o===g&&a===y||(t.blendFuncSeparate(B[i],B[r],B[o],B[a]),d=i,f=r,g=o,y=a),u=e,v=null;else if(e!==u||l!==v){if(p===Hl&&m===Hl||(t.blendEquation(32774),p=Hl,m=Hl),l)switch(e){case kl:t.blendFuncSeparate(1,771,1,771);break;case Ul:t.blendFunc(1,1);break;case Bl:t.blendFuncSeparate(0,0,769,771);break;case zl:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case kl:t.blendFuncSeparate(770,771,1,771);break;case Ul:t.blendFunc(770,1);break;case Bl:t.blendFunc(0,769);break;case zl:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}d=null,f=null,g=null,y=null,u=e,v=l}}else!0===c&&(k(3042),c=!1)}function G(e){_!==e&&(e?t.frontFace(2304):t.frontFace(2305),_=e)}function H(e){e!==Rl?(L(2884),e!==T&&(e===Cl?t.cullFace(1029):e===Al?t.cullFace(1028):t.cullFace(1032))):k(2884),T=e}function j(e,n,i){e?(L(32823),x===n&&b===i||(t.polygonOffset(n,i),x=n,b=i)):k(32823)}function V(e){void 0===e&&(e=33984+I-1),C!==e&&(t.activeTexture(e),C=e)}return{buffers:{color:r,depth:s,stencil:o},enable:L,disable:k,bindFramebuffer:function(e,n){return l[e]!==n&&(t.bindFramebuffer(e,n),l[e]=n,i&&(36009===e&&(l[36160]=n),36160===e&&(l[36009]=n)),!0)},useProgram:function(e){return h!==e&&(t.useProgram(e),h=e,!0)},setBlending:z,setMaterial:function(t,e){t.side===Fl?k(2884):L(2884);let n=t.side===Pl;e&&(n=!n),G(n),t.blending===kl&&!1===t.transparent?z(Ll):z(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),s.setFunc(t.depthFunc),s.setTest(t.depthTest),s.setMask(t.depthWrite),r.setMask(t.colorWrite);const i=t.stencilWrite;o.setTest(i),i&&(o.setMask(t.stencilWriteMask),o.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),j(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?L(32926):k(32926)},setFlipSided:G,setCullFace:H,setLineWidth:function(e){e!==E&&(w&&t.lineWidth(e),E=e)},setPolygonOffset:j,setScissorTest:function(t){t?L(3089):k(3089)},activeTexture:V,bindTexture:function(e,n){null===C&&V();let i=A[C];void 0===i&&(i={type:void 0,texture:void 0},A[C]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||F[e]),i.type=e,i.texture=n)},unbindTexture:function(){const e=A[C];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===N.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),N.copy(e))},viewport:function(e){!1===M.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),M.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===i&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),a={},C=null,A={},l={},h=null,c=!1,u=null,p=null,d=null,f=null,m=null,g=null,y=null,v=!1,_=null,T=null,E=null,x=null,b=null,N.set(0,0,t.canvas.width,t.canvas.height),M.set(0,0,t.canvas.width,t.canvas.height),r.reset(),s.reset(),o.reset()}}}function Xg(t,e,n,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,h=r.maxCubemapSize,c=r.maxTextureSize,u=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,d=new WeakMap;let f,m=!1;try{m="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(B){}function g(t,e){return m?new OffscreenCanvas(t,e):Mu("canvas")}function y(t,e,n,i){let r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const i=e?Cu:Math.floor,s=i(r*t.width),o=i(r*t.height);void 0===f&&(f=g(s,o));const a=n?g(s,o):f;a.width=s,a.height=o;return a.getContext("2d").drawImage(t,0,0,s,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+s+"x"+o+")."),a}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function v(t){return Su(t.width)&&Su(t.height)}function _(t,e){return t.generateMipmaps&&e&&t.minFilter!==Dh&&t.minFilter!==Mh}function T(e){t.generateMipmap(e)}function E(n,i,r){if(!1===a)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let s=i;return 6403===i&&(5126===r&&(s=33326),5131===r&&(s=33325),5121===r&&(s=33321)),6407===i&&(5126===r&&(s=34837),5131===r&&(s=34843),5121===r&&(s=32849)),6408===i&&(5126===r&&(s=34836),5131===r&&(s=34842),5121===r&&(s=32856)),33325!==s&&33326!==s&&34842!==s&&34836!==s||e.get("EXT_color_buffer_float"),s}function x(t){return t===Dh||t===Oh||t===Nh?9728:9729}function b(e){const n=e.target;n.removeEventListener("dispose",b),function(e){const n=i.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),i.remove(e)}(n),n.isVideoTexture&&d.delete(n),o.memory.textures--}function I(e){const n=e.target;n.removeEventListener("dispose",I),function(e){const n=e.texture,r=i.get(e),s=i.get(n);if(!e)return;void 0!==s.__webglTexture&&(t.deleteTexture(s.__webglTexture),o.memory.textures--);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let i=0;i<6;i++)t.deleteFramebuffer(r.__webglFramebuffer[i]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[i]);else t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&t.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer);if(e.isWebGLMultipleRenderTargets)for(let a=0,l=n.length;a<l;a++){const e=i.get(n[a]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),o.memory.textures--),i.remove(n[a])}i.remove(n),i.remove(e)}(n)}let w=0;function S(t,e){const r=i.get(t);if(t.isVideoTexture&&function(t){const e=o.render.frame;d.get(t)!==e&&(d.set(t,e),t.update())}(t),t.version>0&&r.__version!==t.version){const n=t.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void N(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function R(e,r){const o=i.get(e);e.version>0&&o.__version!==e.version?function(e,i,r){if(6!==i.image.length)return;O(e,i),n.activeTexture(33984+r),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const o=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),l=i.image[0]&&i.image[0].isDataTexture,c=[];for(let t=0;t<6;t++)c[t]=o||l?l?i.image[t].image:i.image[t]:y(i.image[t],!1,!0,h);const u=v(c[0])||a,p=s.convert(i.format),d=s.convert(i.type),f=E(i.internalFormat,p,d,i.encoding);let m;if(D(34067,i,u),o)for(let t=0;t<6;t++){m=c[t].mipmaps;for(let e=0;e<m.length;e++){const r=m[e];i.format!==Kh&&i.format!==Xh?null!==p?n.compressedTexImage2D(34069+t,e,f,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+t,e,f,r.width,r.height,0,p,d,r.data)}}else{m=i.mipmaps;for(let t=0;t<6;t++)if(l){n.texImage2D(34069+t,0,f,c[t].width,c[t].height,0,p,d,c[t].data);for(let e=0;e<m.length;e++){const i=m[e].image[t].image;n.texImage2D(34069+t,e+1,f,i.width,i.height,0,p,d,i.data)}}else{n.texImage2D(34069+t,0,f,p,d,c[t]);for(let e=0;e<m.length;e++){const i=m[e];n.texImage2D(34069+t,e+1,f,p,d,i.image[t])}}}_(i,u)&&T(34067);e.__version=i.version,i.onUpdate&&i.onUpdate(i)}(o,e,r):(n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture))}const C={[Rh]:10497,[Ch]:33071,[Ah]:33648},A={[Dh]:9728,[Oh]:9984,[Nh]:9986,[Mh]:9729,[Ph]:9985,[Fh]:9987};function D(n,s,o){if(o?(t.texParameteri(n,10242,C[s.wrapS]),t.texParameteri(n,10243,C[s.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,C[s.wrapR]),t.texParameteri(n,10240,A[s.magFilter]),t.texParameteri(n,10241,A[s.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),s.wrapS===Ch&&s.wrapT===Ch||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,x(s.magFilter)),t.texParameteri(n,10241,x(s.minFilter)),s.minFilter!==Dh&&s.minFilter!==Mh&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const o=e.get("EXT_texture_filter_anisotropic");if(s.type===Hh&&!1===e.has("OES_texture_float_linear"))return;if(!1===a&&s.type===jh&&!1===e.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(t.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function O(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",b),e.__webglTexture=t.createTexture(),o.memory.textures++)}function N(e,i,r){let o=3553;i.isDataTexture2DArray&&(o=35866),i.isDataTexture3D&&(o=32879),O(e,i),n.activeTexture(33984+r),n.bindTexture(o,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const l=function(t){return!a&&(t.wrapS!==Ch||t.wrapT!==Ch||t.minFilter!==Dh&&t.minFilter!==Mh)}(i)&&!1===v(i.image),h=y(i.image,l,!1,c),u=v(h)||a,p=s.convert(i.format);let d,f=s.convert(i.type),m=E(i.internalFormat,p,f,i.encoding);D(o,i,u);const g=i.mipmaps;if(i.isDepthTexture)m=6402,a?m=i.type===Hh?36012:i.type===Gh?33190:i.type===Yh?35056:33189:i.type===Hh&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===tc&&6402===m&&i.type!==Bh&&i.type!==Gh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Bh,f=s.convert(i.type)),i.format===ec&&6402===m&&(m=34041,i.type!==Yh&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Yh,f=s.convert(i.type))),n.texImage2D(3553,0,m,h.width,h.height,0,p,f,null);else if(i.isDataTexture)if(g.length>0&&u){for(let t=0,e=g.length;t<e;t++)d=g[t],n.texImage2D(3553,t,m,d.width,d.height,0,p,f,d.data);i.generateMipmaps=!1}else n.texImage2D(3553,0,m,h.width,h.height,0,p,f,h.data);else if(i.isCompressedTexture)for(let t=0,s=g.length;t<s;t++)d=g[t],i.format!==Kh&&i.format!==Xh?null!==p?n.compressedTexImage2D(3553,t,m,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,t,m,d.width,d.height,0,p,f,d.data);else if(i.isDataTexture2DArray)n.texImage3D(35866,0,m,h.width,h.height,h.depth,0,p,f,h.data);else if(i.isDataTexture3D)n.texImage3D(32879,0,m,h.width,h.height,h.depth,0,p,f,h.data);else{const t=function(t,e,n){return!0===_(t,n)?Math.log2(Math.max(e.width,e.height))+1:t.mipmaps.length>0?t.mipmaps.length:1}(i,h,u),r=a&&!0!==i.isVideoTexture,s=void 0===e.__version;if(g.length>0&&u){r&&s&&n.texStorage2D(3553,t,m,g[0].width,g[0].height);for(let t=0,e=g.length;t<e;t++)d=g[t],r?n.texSubImage2D(3553,t,0,0,p,f,d):n.texImage2D(3553,t,m,p,f,d);i.generateMipmaps=!1}else r?(s&&n.texStorage2D(3553,t,m,h.width,h.height),n.texSubImage2D(3553,0,0,0,p,f,h)):n.texImage2D(3553,0,m,p,f,h)}_(i,u)&&T(o),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function M(e,r,o,a,l){const h=s.convert(o.format),c=s.convert(o.type),u=E(o.internalFormat,h,c,o.encoding);i.get(r).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,u,r.width,r.height,r.depth,0,h,c,null):n.texImage2D(l,0,u,r.width,r.height,0,h,c,null)),n.bindFramebuffer(36160,e),r.useRenderToTexture?p.framebufferTexture2DMultisampleEXT(36160,a,l,i.get(o).__webglTexture,0,L(r)):t.framebufferTexture2D(36160,a,l,i.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function P(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i||n.useRenderToTexture){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===Hh?r=36012:e.type===Gh&&(r=33190));const i=L(n);n.useRenderToTexture?p.renderbufferStorageMultisampleEXT(36161,i,r,n.width,n.height):t.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else t.renderbufferStorage(36161,r,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){const r=L(n);i&&n.useRenderbuffer?t.renderbufferStorageMultisample(36161,r,35056,n.width,n.height):n.useRenderToTexture?p.renderbufferStorageMultisampleEXT(36161,r,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,r=s.convert(e.format),o=s.convert(e.type),a=E(e.internalFormat,r,o,e.encoding),l=L(n);i&&n.useRenderbuffer?t.renderbufferStorageMultisample(36161,l,a,n.width,n.height):n.useRenderToTexture?p.renderbufferStorageMultisampleEXT(36161,l,a,n.width,n.height):t.renderbufferStorage(36161,a,n.width,n.height)}t.bindRenderbuffer(36161,null)}function F(e){const r=i.get(e),s=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),S(r.depthTexture,0);const s=i.get(r.depthTexture).__webglTexture,o=L(r);if(r.depthTexture.format===tc)r.useRenderToTexture?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,s,0,o):t.framebufferTexture2D(36160,36096,3553,s,0);else{if(r.depthTexture.format!==ec)throw new Error("Unknown depthTexture format");r.useRenderToTexture?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,s,0,o):t.framebufferTexture2D(36160,33306,3553,s,0)}}(r.__webglFramebuffer,e)}else if(s){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(36160,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=t.createRenderbuffer(),P(r.__webglDepthbuffer[i],e,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),P(r.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function L(t){return a&&(t.useRenderbuffer||t.useRenderToTexture)?Math.min(u,t.samples):0}let k=!1,U=!1;this.allocateTextureUnit=function(){const t=w;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),w+=1,t},this.resetTextureUnits=function(){w=0},this.setTexture2D=S,this.setTexture2DArray=function(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?N(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?N(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=R,this.rebindTextures=function(t,e,n){const r=i.get(t);void 0!==e&&M(r.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&F(t)},this.setupRenderTarget=function(e){const l=e.texture,h=i.get(e),c=i.get(l);e.addEventListener("dispose",I),!0!==e.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=t.createTexture()),c.__version=l.version,o.memory.textures++);const u=!0===e.isWebGLCubeRenderTarget,p=!0===e.isWebGLMultipleRenderTargets,d=l.isDataTexture3D||l.isDataTexture2DArray,f=v(e)||a;if(!a||l.format!==Xh||l.type!==Hh&&l.type!==jh||(l.format=Kh,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),u){h.__webglFramebuffer=[];for(let e=0;e<6;e++)h.__webglFramebuffer[e]=t.createFramebuffer()}else if(h.__webglFramebuffer=t.createFramebuffer(),p)if(r.drawBuffers){const n=e.texture;for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);void 0===r.__webglTexture&&(r.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(e.useRenderbuffer)if(a){h.__webglMultisampledFramebuffer=t.createFramebuffer(),h.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,h.__webglColorRenderbuffer);const i=s.convert(l.format),r=s.convert(l.type),o=E(l.internalFormat,i,r,l.encoding),a=L(e);t.renderbufferStorageMultisample(36161,a,o,e.width,e.height),n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,h.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(h.__webglDepthRenderbuffer=t.createRenderbuffer(),P(h.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(u){n.bindTexture(34067,c.__webglTexture),D(34067,l,f);for(let t=0;t<6;t++)M(h.__webglFramebuffer[t],e,l,36064,34069+t);_(l,f)&&T(34067),n.unbindTexture()}else if(p){const t=e.texture;for(let r=0,s=t.length;r<s;r++){const s=t[r],o=i.get(s);n.bindTexture(3553,o.__webglTexture),D(3553,s,f),M(h.__webglFramebuffer,e,s,36064+r,3553),_(s,f)&&T(3553)}n.unbindTexture()}else{let t=3553;if(d)if(a){t=l.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(t,c.__webglTexture),D(t,l,f),M(h.__webglFramebuffer,e,l,36064,t),_(l,f)&&T(t),n.unbindTexture()}e.depthBuffer&&F(e)},this.updateRenderTargetMipmap=function(t){const e=v(t)||a,r=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,o=r.length;s<o;s++){const o=r[s];if(_(o,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,r=i.get(o).__webglTexture;n.bindTexture(e,r),T(e),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(e.useRenderbuffer)if(a){const r=e.width,s=e.height;let o=16384;const a=[36064],l=e.stencilBuffer?33306:36096;e.depthBuffer&&a.push(l),e.ignoreDepthForMultisampleCopy||(e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024));const h=i.get(e);n.bindFramebuffer(36008,h.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,h.__webglFramebuffer),e.ignoreDepthForMultisampleCopy&&(t.invalidateFramebuffer(36008,[l]),t.invalidateFramebuffer(36009,[l])),t.blitFramebuffer(0,0,r,s,0,0,r,s,o,9728),t.invalidateFramebuffer(36008,a),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,h.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=F,this.setupFrameBufferTexture=M,this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===k&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),k=!0),t=t.texture),S(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===U&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),U=!0),t=t.texture),R(t,e)}}function Kg(t,e,n){const i=n.isWebGL2;return{convert:function(t){let n;if(t===Lh)return 5121;if(t===Vh)return 32819;if(t===Wh)return 32820;if(t===Zh)return 33635;if(t===kh)return 5120;if(t===Uh)return 5122;if(t===Bh)return 5123;if(t===zh)return 5124;if(t===Gh)return 5125;if(t===Hh)return 5126;if(t===jh)return i?5131:(n=e.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(t===qh)return 6406;if(t===Xh)return 6407;if(t===Kh)return 6408;if(t===Qh)return 6409;if(t===Jh)return 6410;if(t===tc)return 6402;if(t===ec)return 34041;if(t===nc)return 6403;if(t===ic)return 36244;if(t===rc)return 33319;if(t===sc)return 33320;if(t===oc)return 36248;if(t===ac)return 36249;if(t===lc||t===hc||t===cc||t===uc){if(n=e.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(t===lc)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===hc)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===cc)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===uc)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===pc||t===dc||t===fc||t===mc){if(n=e.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(t===pc)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===dc)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===fc)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===mc)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===gc)return n=e.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===yc||t===vc)&&(n=e.get("WEBGL_compressed_texture_etc"),null!==n)){if(t===yc)return n.COMPRESSED_RGB8_ETC2;if(t===vc)return n.COMPRESSED_RGBA8_ETC2_EAC}return t===_c||t===Tc||t===Ec||t===xc||t===bc||t===Ic||t===wc||t===Sc||t===Rc||t===Cc||t===Ac||t===Dc||t===Oc||t===Nc||t===Pc||t===Fc||t===Lc||t===kc||t===Uc||t===Bc||t===zc||t===Gc||t===Hc||t===jc||t===Vc||t===Wc||t===Zc||t===Yc?(n=e.get("WEBGL_compressed_texture_astc"),null!==n?t:null):t===Mc?(n=e.get("EXT_texture_compression_bptc"),null!==n?t:null):t===Yh?i?34042:(n=e.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class Qg extends $d{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.cameras=t}}Qg.prototype.isArrayCamera=!0;class Jg extends Zp{constructor(){super(),this.type="Group"}}Jg.prototype.isGroup=!0;const $g={type:"move"};class ty{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Jg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Jg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vu,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vu),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Jg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vu,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vu),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,s=null;const o=this._targetRay,a=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==o&&(i=e.getPose(t.targetRaySpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent($g))),l&&t.hand){s=!0;for(const s of t.hand.values()){const t=e.getJointPose(s,n);if(void 0===l.joints[s.jointName]){const t=new Jg;t.matrixAutoUpdate=!1,t.visible=!1,l.joints[s.jointName]=t,l.add(t)}const i=l.joints[s.jointName];null!==t&&(i.matrix.fromArray(t.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=t.radius),i.visible=null!==t}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],o=i.position.distanceTo(r.position),a=.02,h=.005;l.inputState.pinching&&o>a+h?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&o<=a-h&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));return null!==o&&(o.visible=null!==i),null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),this}}class ey extends Uu{constructor(t,e,n,i,r,s,o,a,l,h){if((h=void 0!==h?h:tc)!==tc&&h!==ec)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&h===tc&&(n=Bh),void 0===n&&h===ec&&(n=Yh),super(null,i,r,s,o,a,h,n,l),this.image={width:t,height:e},this.magFilter=void 0!==o?o:Dh,this.minFilter=void 0!==a?a:Dh,this.flipY=!1,this.generateMipmaps=!1}}ey.prototype.isDepthTexture=!0;class ny extends yu{constructor(t,e){super();const n=this;let i=null,r=1,s=null,o="local-floor";const a=t.extensions.has("WEBGL_multisampled_render_to_texture");let l=null,h=null,c=null,u=null,p=!1,d=null;const f=e.getContextAttributes();let m=null,g=null;const y=[],v=new Map,_=new $d;_.layers.enable(1),_.viewport=new zu;const T=new $d;T.layers.enable(2),T.viewport=new zu;const E=[_,T],x=new Qg;x.layers.enable(1),x.layers.enable(2);let b=null,I=null;function w(t){const e=v.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function S(){v.forEach((function(t,e){t.disconnect(e)})),v.clear(),b=null,I=null,t.setRenderTarget(m),u=null,c=null,h=null,i=null,g=null,N.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function R(t){const e=i.inputSources;for(let n=0;n<y.length;n++)v.set(e[n],y[n]);for(let n=0;n<t.removed.length;n++){const e=t.removed[n],i=v.get(e);i&&(i.dispatchEvent({type:"disconnected",data:e}),v.delete(e))}for(let n=0;n<t.added.length;n++){const e=t.added[n],i=v.get(e);i&&i.dispatchEvent({type:"connected",data:e})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=y[t];return void 0===e&&(e=new ty,y[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=y[t];return void 0===e&&(e=new ty,y[t]=e),e.getGripSpace()},this.getHand=function(t){let e=y[t];return void 0===e&&(e=new ty,y[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){o=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s},this.getBaseLayer=function(){return null!==c?c:u},this.getBinding=function(){return h},this.getFrame=function(){return d},this.getSession=function(){return i},this.setSession=async function(l){if(i=l,null!==i){if(m=t.getRenderTarget(),i.addEventListener("select",w),i.addEventListener("selectstart",w),i.addEventListener("selectend",w),i.addEventListener("squeeze",w),i.addEventListener("squeezestart",w),i.addEventListener("squeezeend",w),i.addEventListener("end",S),i.addEventListener("inputsourceschange",R),!0!==f.xrCompatible&&await e.makeXRCompatible(),void 0===i.renderState.layers||!1===t.capabilities.isWebGL2){const t={antialias:void 0!==i.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:r};u=new XRWebGLLayer(i,e,t),i.updateRenderState({baseLayer:u}),g=new Gu(u.framebufferWidth,u.framebufferHeight)}else{p=f.antialias;let t=null,n=null,s=null;f.depth&&(s=f.stencil?35056:33189,t=f.stencil?ec:tc,n=f.stencil?Yh:Bh);const o={colorFormat:f.alpha||p?32856:32849,depthFormat:s,scaleFactor:r};h=new XRWebGLBinding(i,e),c=h.createProjectionLayer(o),i.updateRenderState({layers:[c]}),g=p?new Hu(c.textureWidth,c.textureHeight,{format:Kh,type:Lh,depthTexture:new ey(c.textureWidth,c.textureHeight,n,void 0,void 0,void 0,void 0,void 0,void 0,t),stencilBuffer:f.stencil,ignoreDepth:c.ignoreDepthValues,useRenderToTexture:a}):new Gu(c.textureWidth,c.textureHeight,{format:f.alpha?Kh:Xh,type:Lh,depthTexture:new ey(c.textureWidth,c.textureHeight,n,void 0,void 0,void 0,void 0,void 0,void 0,t),stencilBuffer:f.stencil,ignoreDepth:c.ignoreDepthValues})}this.setFoveation(0),s=await i.requestReferenceSpace(o),N.setContext(i),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const C=new Vu,A=new Vu;function D(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===i)return;x.near=T.near=_.near=t.near,x.far=T.far=_.far=t.far,b===x.near&&I===x.far||(i.updateRenderState({depthNear:x.near,depthFar:x.far}),b=x.near,I=x.far);const e=t.parent,n=x.cameras;D(x,e);for(let i=0;i<n.length;i++)D(n[i],e);x.matrixWorld.decompose(x.position,x.quaternion,x.scale),t.position.copy(x.position),t.quaternion.copy(x.quaternion),t.scale.copy(x.scale),t.matrix.copy(x.matrix),t.matrixWorld.copy(x.matrixWorld);const r=t.children;for(let i=0,s=r.length;i<s;i++)r[i].updateMatrixWorld(!0);2===n.length?function(t,e,n){C.setFromMatrixPosition(e.matrixWorld),A.setFromMatrixPosition(n.matrixWorld);const i=C.distanceTo(A),r=e.projectionMatrix.elements,s=n.projectionMatrix.elements,o=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],h=(r[9]-1)/r[5],c=(r[8]-1)/r[0],u=(s[8]+1)/s[0],p=o*c,d=o*u,f=i/(-c+u),m=f*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=o+f,y=a+f,v=p-m,_=d+(i-m),T=l*a/y*g,E=h*a/y*g;t.projectionMatrix.makePerspective(v,_,T,E,g,y)}(x,_,T):x.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return x},this.getFoveation=function(){return null!==c?c.fixedFoveation:null!==u?u.fixedFoveation:void 0},this.setFoveation=function(t){null!==c&&(c.fixedFoveation=t),null!==u&&void 0!==u.fixedFoveation&&(u.fixedFoveation=t)};let O=null;const N=new pf;N.setAnimationLoop((function(e,n){if(l=n.getViewerPose(s),d=n,null!==l){const e=l.views;null!==u&&(t.setRenderTargetFramebuffer(g,u.framebuffer),t.setRenderTarget(g));let n=!1;e.length!==x.cameras.length&&(x.cameras.length=0,n=!0);for(let i=0;i<e.length;i++){const r=e[i];let s=null;if(null!==u)s=u.getViewport(r);else{const e=h.getViewSubImage(c,r);s=e.viewport,0===i&&(t.setRenderTargetTextures(g,e.colorTexture,c.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(g))}const o=E[i];o.matrix.fromArray(r.transform.matrix),o.projectionMatrix.fromArray(r.projectionMatrix),o.viewport.set(s.x,s.y,s.width,s.height),0===i&&x.matrix.copy(o.matrix),!0===n&&x.cameras.push(o)}}const r=i.inputSources;for(let t=0;t<y.length;t++){const e=y[t],i=r[t];e.update(i,n,s)}O&&O(e,n),d=null})),this.setAnimationLoop=function(t){O=t},this.dispose=function(){}}}function iy(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap),n.alphaTest>0&&(e.alphaTest.value=n.alphaTest);const i=t.get(n).envMap;let r,s;i&&(e.envMap.value=i,e.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,e.reflectivity.value=n.reflectivity,e.ior.value=n.ior,e.refractionRatio.value=n.refractionRatio),n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularColorMap?r=n.specularColorMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap?r=n.thicknessMap:n.sheenColorMap?r=n.sheenColorMap:n.sheenRoughnessMap&&(r=n.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),n.aoMap?s=n.aoMap:n.lightMap&&(s=n.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),e.uv2Transform.value.copy(s.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,n.side===Pl&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),n.side===Pl&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,i,r,s,o){i.isMeshBasicMaterial?e(t,i):i.isMeshLambertMaterial?(e(t,i),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,i)):i.isMeshToonMaterial?(e(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap);e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===Pl&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===Pl&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshPhongMaterial?(e(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===Pl&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===Pl&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshStandardMaterial?(e(t,i),i.isMeshPhysicalMaterial?function(t,e,i){n(t,e),t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===Pl&&t.clearcoatNormalScale.value.negate()));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=i.texture,t.transmissionSamplerSize.value.set(i.width,i.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap);e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,i,o):n(t,i)):i.isMeshMatcapMaterial?(e(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===Pl&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===Pl&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDepthMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDistanceMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,i)):i.isMeshNormalMaterial?(e(t,i),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===Pl&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===Pl&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,i)):i.isPointsMaterial?function(t,e,n,i){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*i,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let r;e.map?r=e.map:e.alphaMap&&(r=e.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}(t,i,r,s):i.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function ry(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=void 0!==t.canvas?t.canvas:function(){const t=Mu("canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,s=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,a=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,h=void 0!==t.powerPreference?t.powerPreference:"default",c=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let u=null,p=null;const d=[],f=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=iu,this.physicallyCorrectLights=!1,this.toneMapping=mh,this.toneMappingExposure=1;const m=this;let g=!1,y=0,v=0,_=null,T=-1,E=null;const x=new zu,b=new zu;let I=null,w=e.width,S=e.height,R=1,C=null,A=null;const D=new zu(0,0,w,S),O=new zu(0,0,w,S);let N=!1;const M=[],P=new uf;let F=!1,L=!1,k=null;const U=new Ep,B=new Vu,z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function G(){return null===_?R:1}let H,j,V,W,Z,Y,q,X,K,Q,J,$,tt,et,nt,it,rt,st,ot,at,lt,ht,ct,ut=n;function pt(t,n){for(let i=0;i<t.length;i++){const r=t[i],s=e.getContext(r,n);if(null!==s)return s}return null}try{const t={alpha:i,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:h,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r".concat(wl)),e.addEventListener("webglcontextlost",mt,!1),e.addEventListener("webglcontextrestored",gt,!1),null===ut){const e=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&e.shift(),ut=pt(e,t),null===ut)throw pt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ut.getShaderPrecisionFormat&&(ut.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ct){throw console.error("THREE.WebGLRenderer: "+Ct.message),Ct}function dt(){H=new Kf(ut),j=new Ef(ut,H,t),H.init(j),ht=new Kg(ut,H,j),V=new qg(ut,H,j),M[0]=1029,W=new $f(ut),Z=new Ng,Y=new Xg(ut,H,V,Z,j,ht,W),q=new bf(m),X=new Xf(m),K=new df(ut,j),ct=new _f(ut,H,K,j),Q=new Qf(ut,K,W,ct),J=new sm(ut,Q,K,W),ot=new rm(ut,j,Y),it=new xf(Z),$=new Og(m,q,X,H,j,ct,it),tt=new iy(Z),et=new Lg(Z),nt=new Hg(H,j),st=new vf(m,q,V,J,a),rt=new Yg(m,J,j),at=new Tf(ut,H,W,j),lt=new Jf(ut,H,W,j),W.programs=$.programs,m.capabilities=j,m.extensions=H,m.properties=Z,m.renderLists=et,m.shadowMap=rt,m.state=V,m.info=W}dt();const ft=new ny(m,ut);function mt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function gt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const t=W.autoReset,e=rt.enabled,n=rt.autoUpdate,i=rt.needsUpdate,r=rt.type;dt(),W.autoReset=t,rt.enabled=e,rt.autoUpdate=n,rt.needsUpdate=i,rt.type=r}function yt(t){const e=t.target;e.removeEventListener("dispose",yt),function(t){(function(t){const e=Z.get(t).programs;void 0!==e&&e.forEach((function(t){$.releaseProgram(t)}))})(t),Z.remove(t)}(e)}this.xr=ft,this.getContext=function(){return ut},this.getContextAttributes=function(){return ut.getContextAttributes()},this.forceContextLoss=function(){const t=H.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=H.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(t){void 0!==t&&(R=t,this.setSize(w,S,!1))},this.getSize=function(t){return t.set(w,S)},this.setSize=function(t,n,i){ft.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(w=t,S=n,e.width=Math.floor(t*R),e.height=Math.floor(n*R),!1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(w*R,S*R).floor()},this.setDrawingBufferSize=function(t,n,i){w=t,S=n,R=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(x)},this.getViewport=function(t){return t.copy(D)},this.setViewport=function(t,e,n,i){t.isVector4?D.set(t.x,t.y,t.z,t.w):D.set(t,e,n,i),V.viewport(x.copy(D).multiplyScalar(R).floor())},this.getScissor=function(t){return t.copy(O)},this.setScissor=function(t,e,n,i){t.isVector4?O.set(t.x,t.y,t.z,t.w):O.set(t,e,n,i),V.scissor(b.copy(O).multiplyScalar(R).floor())},this.getScissorTest=function(){return N},this.setScissorTest=function(t){V.setScissorTest(N=t)},this.setOpaqueSort=function(t){C=t},this.setTransparentSort=function(t){A=t},this.getClearColor=function(t){return t.copy(st.getClearColor())},this.setClearColor=function(){st.setClearColor.apply(st,arguments)},this.getClearAlpha=function(){return st.getClearAlpha()},this.setClearAlpha=function(){st.setClearAlpha.apply(st,arguments)},this.clear=function(t,e,n){let i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),ut.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",mt,!1),e.removeEventListener("webglcontextrestored",gt,!1),et.dispose(),nt.dispose(),Z.dispose(),q.dispose(),X.dispose(),J.dispose(),ct.dispose(),ft.dispose(),ft.removeEventListener("sessionstart",_t),ft.removeEventListener("sessionend",Tt),k&&(k.dispose(),k=null),Et.stop()},this.renderBufferDirect=function(t,e,n,i,r,s){null===e&&(e=z);const o=r.isMesh&&r.matrixWorld.determinant()<0,a=function(t,e,n,i,r){!0!==e.isScene&&(e=z);Y.resetTextureUnits();const s=e.fog,o=i.isMeshStandardMaterial?e.environment:null,a=null===_?m.outputEncoding:_.texture.encoding,l=(i.isMeshStandardMaterial?X:q).get(i.envMap||o),h=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!i.normalMap&&!!n.attributes.tangent,u=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=n.morphAttributes.position?n.morphAttributes.position.length:0,g=Z.get(i),y=p.state.lights;if(!0===F&&(!0===L||t!==E)){const e=t===E&&i.id===T;it.setState(i,t,e)}let v=!1;i.version===g.__version?g.needsLights&&g.lightsStateVersion!==y.state.version||g.outputEncoding!==a||r.isInstancedMesh&&!1===g.instancing?v=!0:r.isInstancedMesh||!0!==g.instancing?r.isSkinnedMesh&&!1===g.skinning?v=!0:r.isSkinnedMesh||!0!==g.skinning?g.envMap!==l||i.fog&&g.fog!==s?v=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===it.numPlanes&&g.numIntersection===it.numIntersection?(g.vertexAlphas!==h||g.vertexTangents!==c||g.morphTargets!==u||g.morphNormals!==d||!0===j.isWebGL2&&g.morphTargetsCount!==f)&&(v=!0):v=!0:v=!0:v=!0:(v=!0,g.__version=i.version);let x=g.currentProgram;!0===v&&(x=St(i,e,r));let b=!1,I=!1,w=!1;const C=x.getUniforms(),A=g.uniforms;V.useProgram(x.program)&&(b=!0,I=!0,w=!0);i.id!==T&&(T=i.id,I=!0);if(b||E!==t){if(C.setValue(ut,"projectionMatrix",t.projectionMatrix),j.logarithmicDepthBuffer&&C.setValue(ut,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),E!==t&&(E=t,I=!0,w=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const e=C.map.cameraPosition;void 0!==e&&e.setValue(ut,B.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&C.setValue(ut,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&C.setValue(ut,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){C.setOptional(ut,r,"bindMatrix"),C.setOptional(ut,r,"bindMatrixInverse");const t=r.skeleton;t&&(j.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),C.setValue(ut,"boneTexture",t.boneTexture,Y),C.setValue(ut,"boneTextureSize",t.boneTextureSize)):C.setOptional(ut,t,"boneMatrices"))}!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||ot.update(r,n,i,x);(I||g.receiveShadow!==r.receiveShadow)&&(g.receiveShadow=r.receiveShadow,C.setValue(ut,"receiveShadow",r.receiveShadow));I&&(C.setValue(ut,"toneMappingExposure",m.toneMappingExposure),g.needsLights&&(O=w,(D=A).ambientLightColor.needsUpdate=O,D.lightProbe.needsUpdate=O,D.directionalLights.needsUpdate=O,D.directionalLightShadows.needsUpdate=O,D.pointLights.needsUpdate=O,D.pointLightShadows.needsUpdate=O,D.spotLights.needsUpdate=O,D.spotLightShadows.needsUpdate=O,D.rectAreaLights.needsUpdate=O,D.hemisphereLights.needsUpdate=O),s&&i.fog&&tt.refreshFogUniforms(A,s),tt.refreshMaterialUniforms(A,i,R,S,k),cg.upload(ut,g.uniformsList,A,Y));var D,O;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(cg.upload(ut,g.uniformsList,A,Y),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&C.setValue(ut,"center",r.center);return C.setValue(ut,"modelViewMatrix",r.modelViewMatrix),C.setValue(ut,"normalMatrix",r.normalMatrix),C.setValue(ut,"modelMatrix",r.matrixWorld),x}(t,e,n,i,r);V.setMaterial(i,o);let l=n.index;const h=n.attributes.position;if(null===l){if(void 0===h||0===h.count)return}else if(0===l.count)return;let c,u=1;!0===i.wireframe&&(l=Q.getWireframeAttribute(n),u=2),ct.setup(r,i,a,n,l);let d=at;null!==l&&(c=K.get(l),d=lt,d.setIndex(c));const f=null!==l?l.count:h.count,g=n.drawRange.start*u,y=n.drawRange.count*u,v=null!==s?s.start*u:0,x=null!==s?s.count*u:1/0,b=Math.max(g,v),I=Math.min(f,g+y,v+x)-1,w=Math.max(0,I-b+1);if(0!==w){if(r.isMesh)!0===i.wireframe?(V.setLineWidth(i.wireframeLinewidth*G()),d.setMode(1)):d.setMode(4);else if(r.isLine){let t=i.linewidth;void 0===t&&(t=1),V.setLineWidth(t*G()),r.isLineSegments?d.setMode(1):r.isLineLoop?d.setMode(2):d.setMode(3)}else r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);if(r.isInstancedMesh)d.renderInstances(b,w,r.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(b,w,t)}else d.render(b,w)}},this.compile=function(t,e){p=nt.get(t),p.init(),f.push(p),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(p.pushLight(t),t.castShadow&&p.pushShadow(t))})),p.setupLights(m.physicallyCorrectLights),t.traverse((function(e){const n=e.material;if(n)if(Array.isArray(n))for(let i=0;i<n.length;i++){St(n[i],t,e)}else St(n,t,e)})),f.pop(),p=null};let vt=null;function _t(){Et.stop()}function Tt(){Et.start()}const Et=new pf;function xt(t,e,n,i){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)p.pushLight(t),t.castShadow&&p.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||P.intersectsSprite(t)){i&&B.setFromMatrixPosition(t.matrixWorld).applyMatrix4(U);const e=J.update(t),r=t.material;r.visible&&u.push(t,e,r,n,B.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==W.render.frame&&(t.skeleton.update(),t.skeleton.frame=W.render.frame),!t.frustumCulled||P.intersectsObject(t))){i&&B.setFromMatrixPosition(t.matrixWorld).applyMatrix4(U);const e=J.update(t),r=t.material;if(Array.isArray(r)){const i=e.groups;for(let s=0,o=i.length;s<o;s++){const o=i[s],a=r[o.materialIndex];a&&a.visible&&u.push(t,e,a,n,B.z,o)}}else r.visible&&u.push(t,e,r,n,B.z,null)}const r=t.children;for(let s=0,o=r.length;s<o;s++)xt(r[s],e,n,i)}function bt(t,e,n,i){const r=t.opaque,s=t.transmissive,a=t.transparent;p.setupLightsView(n),s.length>0&&function(t,e,n){if(null===k){const t=!0===o&&!0===j.isWebGL2;k=new(t?Hu:Gu)(1024,1024,{generateMipmaps:!0,type:null!==ht.convert(jh)?jh:Lh,minFilter:Fh,magFilter:Dh,wrapS:Ch,wrapT:Ch,useRenderToTexture:H.has("WEBGL_multisampled_render_to_texture")})}const i=m.getRenderTarget();m.setRenderTarget(k),m.clear();const r=m.toneMapping;m.toneMapping=mh,It(t,e,n),m.toneMapping=r,Y.updateMultisampleRenderTarget(k),Y.updateRenderTargetMipmap(k),m.setRenderTarget(i)}(r,e,n),i&&V.viewport(x.copy(i)),r.length>0&&It(r,e,n),s.length>0&&It(s,e,n),a.length>0&&It(a,e,n)}function It(t,e,n){const i=!0===e.isScene?e.overrideMaterial:null;for(let r=0,s=t.length;r<s;r++){const s=t[r],o=s.object,a=s.geometry,l=null===i?s.material:i,h=s.group;o.layers.test(n.layers)&&wt(o,e,n,a,l,h)}}function wt(t,e,n,i,r,s){t.onBeforeRender(m,e,n,i,r,s),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(m,e,n,i,t,s),!0===r.transparent&&r.side===Fl?(r.side=Pl,r.needsUpdate=!0,m.renderBufferDirect(n,e,i,r,t,s),r.side=Ml,r.needsUpdate=!0,m.renderBufferDirect(n,e,i,r,t,s),r.side=Fl):m.renderBufferDirect(n,e,i,r,t,s),t.onAfterRender(m,e,n,i,r,s)}function St(t,e,n){!0!==e.isScene&&(e=z);const i=Z.get(t),r=p.state.lights,s=p.state.shadowsArray,o=r.state.version,a=$.getParameters(t,r.state,s,e,n),l=$.getProgramCacheKey(a);let h=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?X:q).get(t.envMap||i.environment),void 0===h&&(t.addEventListener("dispose",yt),h=new Map,i.programs=h);let c=h.get(l);if(void 0!==c){if(i.currentProgram===c&&i.lightsStateVersion===o)return Rt(t,a),c}else a.uniforms=$.getUniforms(t),t.onBuild(n,a,m),t.onBeforeCompile(a,m),c=$.acquireProgram(a,l),h.set(l,c),i.uniforms=a.uniforms;const u=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(u.clippingPlanes=it.uniform),Rt(t,a),i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=o,i.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotShadowMatrix.value=r.state.spotShadowMatrix,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix);const d=c.getUniforms(),f=cg.seqWithValue(d.seq,u);return i.currentProgram=c,i.uniformsList=f,c}function Rt(t,e){const n=Z.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents}Et.setAnimationLoop((function(t){vt&&vt(t)})),"undefined"!==typeof window&&Et.setContext(window),this.setAnimationLoop=function(t){vt=t,ft.setAnimationLoop(t),null===t?Et.stop():Et.start()},ft.addEventListener("sessionstart",_t),ft.addEventListener("sessionend",Tt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===ft.enabled&&!0===ft.isPresenting&&(!0===ft.cameraAutoUpdate&&ft.updateCamera(e),e=ft.getCamera()),!0===t.isScene&&t.onBeforeRender(m,t,e,_),p=nt.get(t,f.length),p.init(),f.push(p),U.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),P.setFromProjectionMatrix(U),L=this.localClippingEnabled,F=it.init(this.clippingPlanes,L,e),u=et.get(t,d.length),u.init(),d.push(u),xt(t,e,0,m.sortObjects),u.finish(),!0===m.sortObjects&&u.sort(C,A),!0===F&&it.beginShadows();const n=p.state.shadowsArray;if(rt.render(n,t,e),!0===F&&it.endShadows(),!0===this.info.autoReset&&this.info.reset(),st.render(u,t),p.setupLights(m.physicallyCorrectLights),e.isArrayCamera){const n=e.cameras;for(let e=0,i=n.length;e<i;e++){const i=n[e];bt(u,t,i,i.viewport)}}else bt(u,t,e);null!==_&&(Y.updateMultisampleRenderTarget(_),Y.updateRenderTargetMipmap(_)),!0===t.isScene&&t.onAfterRender(m,t,e),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1),ct.resetDefaultState(),T=-1,E=null,f.pop(),p=f.length>0?f[f.length-1]:null,d.pop(),u=d.length>0?d[d.length-1]:null},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(t,e,n){Z.get(t.texture).__webglTexture=e,Z.get(t.depthTexture).__webglTexture=n;const i=Z.get(t);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||t.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),t.useRenderToTexture=!1,t.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(t,e){const n=Z.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_=t,y=e,v=n;let i=!0;if(t){const e=Z.get(t);void 0!==e.__useDefaultFramebuffer?(V.bindFramebuffer(36160,null),i=!1):void 0===e.__webglFramebuffer?Y.setupRenderTarget(t):e.__hasExternalTextures&&Y.rebindTextures(t,Z.get(t.texture).__webglTexture,Z.get(t.depthTexture).__webglTexture)}let r=null,s=!1,o=!1;if(t){const n=t.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(o=!0);const i=Z.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=i[e],s=!0):r=t.useRenderbuffer?Z.get(t).__webglMultisampledFramebuffer:i,x.copy(t.viewport),b.copy(t.scissor),I=t.scissorTest}else x.copy(D).multiplyScalar(R).floor(),b.copy(O).multiplyScalar(R).floor(),I=N;if(V.bindFramebuffer(36160,r)&&j.drawBuffers&&i){let e=!1;if(t)if(t.isWebGLMultipleRenderTargets){const n=t.texture;if(M.length!==n.length||36064!==M[0]){for(let t=0,e=n.length;t<e;t++)M[t]=36064+t;M.length=n.length,e=!0}}else 1===M.length&&36064===M[0]||(M[0]=36064,M.length=1,e=!0);else 1===M.length&&1029===M[0]||(M[0]=1029,M.length=1,e=!0);e&&(j.isWebGL2?ut.drawBuffers(M):H.get("WEBGL_draw_buffers").drawBuffersWEBGL(M))}if(V.viewport(x),V.scissor(b),V.setScissorTest(I),s){const i=Z.get(t.texture);ut.framebufferTexture2D(36160,36064,34069+e,i.__webglTexture,n)}else if(o){const i=Z.get(t.texture),r=e||0;ut.framebufferTextureLayer(36160,36064,i.__webglTexture,n||0,r)}T=-1},this.readRenderTargetPixels=function(t,e,n,i,r,s,o){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=Z.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){V.bindFramebuffer(36160,a);try{const o=t.texture,a=o.format,l=o.type;if(a!==Kh&&ht.convert(a)!==ut.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const h=l===jh&&(H.has("EXT_color_buffer_half_float")||j.isWebGL2&&H.has("EXT_color_buffer_float"));if(l!==Lh&&ht.convert(l)!==ut.getParameter(35738)&&(l!==Hh||!(j.isWebGL2||H.has("OES_texture_float")||H.has("WEBGL_color_buffer_float")))&&!h)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ut.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&ut.readPixels(e,n,i,r,ht.convert(a),ht.convert(l),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const t=null!==_?Z.get(_).__webglFramebuffer:null;V.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),s=Math.floor(e.image.height*i);let o=ht.convert(e.format);j.isWebGL2&&(6407===o&&(o=32849),6408===o&&(o=32856)),Y.setTexture2D(e,0),ut.copyTexImage2D(3553,n,o,t.x,t.y,r,s,0),V.unbindTexture()},this.copyTextureToTexture=function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=e.image.width,s=e.image.height,o=ht.convert(n.format),a=ht.convert(n.type);Y.setTexture2D(n,0),ut.pixelStorei(37440,n.flipY),ut.pixelStorei(37441,n.premultiplyAlpha),ut.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?ut.texSubImage2D(3553,i,t.x,t.y,r,s,o,a,e.image.data):e.isCompressedTexture?ut.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):ut.texSubImage2D(3553,i,t.x,t.y,o,a,e.image),0===i&&n.generateMipmaps&&ut.generateMipmap(3553),V.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=t.max.x-t.min.x+1,o=t.max.y-t.min.y+1,a=t.max.z-t.min.z+1,l=ht.convert(i.format),h=ht.convert(i.type);let c;if(i.isDataTexture3D)Y.setTexture3D(i,0),c=32879;else{if(!i.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Y.setTexture2DArray(i,0),c=35866}ut.pixelStorei(37440,i.flipY),ut.pixelStorei(37441,i.premultiplyAlpha),ut.pixelStorei(3317,i.unpackAlignment);const u=ut.getParameter(3314),p=ut.getParameter(32878),d=ut.getParameter(3316),f=ut.getParameter(3315),g=ut.getParameter(32877),y=n.isCompressedTexture?n.mipmaps[0]:n.image;ut.pixelStorei(3314,y.width),ut.pixelStorei(32878,y.height),ut.pixelStorei(3316,t.min.x),ut.pixelStorei(3315,t.min.y),ut.pixelStorei(32877,t.min.z),n.isDataTexture||n.isDataTexture3D?ut.texSubImage3D(c,r,e.x,e.y,e.z,s,o,a,l,h,y.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ut.compressedTexSubImage3D(c,r,e.x,e.y,e.z,s,o,a,l,y.data)):ut.texSubImage3D(c,r,e.x,e.y,e.z,s,o,a,l,h,y),ut.pixelStorei(3314,u),ut.pixelStorei(32878,p),ut.pixelStorei(3316,d),ut.pixelStorei(3315,f),ut.pixelStorei(32877,g),0===r&&i.generateMipmaps&&ut.generateMipmap(c),V.unbindTexture()},this.initTexture=function(t){Y.setTexture2D(t,0),V.unbindTexture()},this.resetState=function(){y=0,v=0,_=null,V.reset(),ct.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}ry.prototype.isWebGLRenderer=!0;(class extends ry{}).prototype.isWebGL1Renderer=!0;class sy{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.name="",this.color=new pd(t),this.density=e}clone(){return new sy(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}sy.prototype.isFogExp2=!0;class oy{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.name="",this.color=new pd(t),this.near=e,this.far=n}clone(){return new oy(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}oy.prototype.isFog=!0;class ay extends Zp{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}ay.prototype.isScene=!0;class ly{constructor(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=fu,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=xu()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=xu()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=xu()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}ly.prototype.isInterleavedBuffer=!0;const hy=new Vu;class cy{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)hy.x=this.getX(e),hy.y=this.getY(e),hy.z=this.getZ(e),hy.applyMatrix4(t),this.setXYZ(e,hy.x,hy.y,hy.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)hy.x=this.getX(e),hy.y=this.getY(e),hy.z=this.getZ(e),hy.applyNormalMatrix(t),this.setXYZ(e,hy.x,hy.y,hy.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)hy.x=this.getX(e),hy.y=this.getY(e),hy.z=this.getZ(e),hy.transformDirection(t),this.setXYZ(e,hy.x,hy.y,hy.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new gd(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new cy(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}cy.prototype.isInterleavedBufferAttribute=!0;class uy extends sd{constructor(t){super(),this.type="SpriteMaterial",this.color=new pd(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}let py;uy.prototype.isSpriteMaterial=!0;const dy=new Vu,fy=new Vu,my=new Vu,gy=new Du,yy=new Du,vy=new Ep,_y=new Vu,Ty=new Vu,Ey=new Vu,xy=new Du,by=new Du,Iy=new Du;class wy extends Zp{constructor(t){if(super(),this.type="Sprite",void 0===py){py=new Rd;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new ly(t,5);py.setIndex([0,1,2,0,2,3]),py.setAttribute("position",new cy(e,3,0,!1)),py.setAttribute("uv",new cy(e,2,3,!1))}this.geometry=py,this.material=void 0!==t?t:new uy,this.center=new Du(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),fy.setFromMatrixScale(this.matrixWorld),vy.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),my.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&fy.multiplyScalar(-my.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const s=this.center;Sy(_y.set(-.5,-.5,0),my,s,fy,i,r),Sy(Ty.set(.5,-.5,0),my,s,fy,i,r),Sy(Ey.set(.5,.5,0),my,s,fy,i,r),xy.set(0,0),by.set(1,0),Iy.set(1,1);let o=t.ray.intersectTriangle(_y,Ty,Ey,!1,dy);if(null===o&&(Sy(Ty.set(-.5,.5,0),my,s,fy,i,r),by.set(0,1),o=t.ray.intersectTriangle(_y,Ey,Ty,!1,dy),null===o))return;const a=t.ray.origin.distanceTo(dy);a<t.near||a>t.far||e.push({distance:a,point:dy.clone(),uv:id.getUV(dy,_y,Ty,Ey,xy,by,Iy,new Du),face:null,object:this})}copy(t){return super.copy(t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function Sy(t,e,n,i,r,s){gy.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(yy.x=s*gy.x-r*gy.y,yy.y=r*gy.x+s*gy.y):yy.copy(gy),t.copy(e),t.x+=yy.x,t.y+=yy.y,t.applyMatrix4(vy)}wy.prototype.isSprite=!0;const Ry=new Vu,Cy=new zu,Ay=new zu,Dy=new Vu,Oy=new Ep;class Ny extends Wd{constructor(t,e){super(t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ep,this.bindMatrixInverse=new Ep}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new zu,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const n=this.skeleton,i=this.geometry;Cy.fromBufferAttribute(i.attributes.skinIndex,t),Ay.fromBufferAttribute(i.attributes.skinWeight,t),Ry.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const t=Ay.getComponent(r);if(0!==t){const i=Cy.getComponent(r);Oy.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),e.addScaledVector(Dy.copy(Ry).applyMatrix4(Oy),t)}}return e.applyMatrix4(this.bindMatrixInverse)}}Ny.prototype.isSkinnedMesh=!0;class My extends Zp{constructor(){super(),this.type="Bone"}}My.prototype.isBone=!0;class Py extends Uu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Dh,r=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Dh;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,i,r,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.image={data:t,width:e,height:n},this.magFilter=i,this.minFilter=r,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Py.prototype.isDataTexture=!0;const Fy=new Ep,Ly=new Ep;class ky{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=xu(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Ep)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new Ep;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,s=t.length;r<s;r++){const i=t[r]?t[r].matrixWorld:Ly;Fy.multiplyMatrices(i,e[r]),Fy.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}clone(){return new ky(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=Ru(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Py(e,t,t,Kh,Hh);return this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){const i=t.bones[n];let r=e[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new My),this.bones.push(r),this.boneInverses.push((new Ep).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const r=e[i];t.bones.push(r.uuid);const s=n[i];t.boneInverses.push(s.toArray())}return t}}class Uy extends gd{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;"number"===typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,n),this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}Uy.prototype.isInstancedBufferAttribute=!0;const By=new Ep,zy=new Ep,Gy=[],Hy=new Wd;class jy extends Wd{constructor(t,e,n){super(t,e),this.instanceMatrix=new Uy(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,i=this.count;if(Hy.geometry=this.geometry,Hy.material=this.material,void 0!==Hy.material)for(let r=0;r<i;r++){this.getMatrixAt(r,By),zy.multiplyMatrices(n,By),Hy.matrixWorld=zy,Hy.raycast(t,Gy);for(let t=0,n=Gy.length;t<n;t++){const n=Gy[t];n.instanceId=r,n.object=this,e.push(n)}Gy.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new Uy(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}jy.prototype.isInstancedMesh=!0;class Vy extends sd{constructor(t){super(),this.type="LineBasicMaterial",this.color=new pd(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}Vy.prototype.isLineBasicMaterial=!0;const Wy=new Vu,Zy=new Vu,Yy=new Ep,qy=new Tp,Xy=new pp;class Ky extends Zp{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rd,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vy;super(),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,i=e.count;t<i;t++)Wy.fromBufferAttribute(e,t-1),Zy.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=Wy.distanceTo(Zy);t.setAttribute("lineDistance",new _d(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Xy.copy(n.boundingSphere),Xy.applyMatrix4(i),Xy.radius+=r,!1===t.ray.intersectsSphere(Xy))return;Yy.copy(i).invert(),qy.copy(t.ray).applyMatrix4(Yy);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=new Vu,h=new Vu,c=new Vu,u=new Vu,p=this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,r=n.attributes.position;if(null!==i){for(let n=Math.max(0,s.start),o=Math.min(i.count,s.start+s.count)-1;n<o;n+=p){const s=i.getX(n),o=i.getX(n+1);l.fromBufferAttribute(r,s),h.fromBufferAttribute(r,o);if(qy.distanceSqToSegment(l,h,u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const p=t.ray.origin.distanceTo(u);p<t.near||p>t.far||e.push({distance:p,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,s.start),i=Math.min(r.count,s.start+s.count)-1;n<i;n+=p){l.fromBufferAttribute(r,n),h.fromBufferAttribute(r,n+1);if(qy.distanceSqToSegment(l,h,u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const i=t.ray.origin.distanceTo(u);i<t.near||i>t.far||e.push({distance:i,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Ky.prototype.isLine=!0;const Qy=new Vu,Jy=new Vu;class $y extends Ky{constructor(t,e){super(t,e),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,i=e.count;t<i;t+=2)Qy.fromBufferAttribute(e,t),Jy.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+Qy.distanceTo(Jy);t.setAttribute("lineDistance",new _d(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}$y.prototype.isLineSegments=!0;class tv extends Ky{constructor(t,e){super(t,e),this.type="LineLoop"}}tv.prototype.isLineLoop=!0;class ev extends sd{constructor(t){super(),this.type="PointsMaterial",this.color=new pd(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}ev.prototype.isPointsMaterial=!0;const nv=new Ep,iv=new Tp,rv=new pp,sv=new Vu;class ov extends Zp{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rd,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ev;super(),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),rv.copy(n.boundingSphere),rv.applyMatrix4(i),rv.radius+=r,!1===t.ray.intersectsSphere(rv))return;nv.copy(i).invert(),iv.copy(t.ray).applyMatrix4(nv);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position;if(null!==r){for(let n=Math.max(0,s.start),l=Math.min(r.count,s.start+s.count);n<l;n++){const s=r.getX(n);sv.fromBufferAttribute(o,s),av(sv,s,a,i,t,e,this)}}else{for(let n=Math.max(0,s.start),r=Math.min(o.count,s.start+s.count);n<r;n++)sv.fromBufferAttribute(o,n),av(sv,n,a,i,t,e,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function av(t,e,n,i,r,s,o){const a=iv.distanceSqToPoint(t);if(a<n){const n=new Vu;iv.closestPointToPoint(t,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:e,face:null,object:o})}}ov.prototype.isPoints=!0;(class extends Uu{constructor(t,e,n,i,r,s,o,a,l){super(t,e,n,i,r,s,o,a,l),this.format=void 0!==o?o:Xh,this.minFilter=void 0!==s?s:Mh,this.magFilter=void 0!==r?r:Mh,this.generateMipmaps=!1;const h=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){h.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}).prototype.isVideoTexture=!0;class lv extends Uu{constructor(t,e,n,i,r,s,o,a,l,h,c,u){super(null,s,o,a,l,h,i,r,c,u),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}lv.prototype.isCompressedTexture=!0;(class extends Uu{constructor(t,e,n,i,r,s,o,a,l){super(t,e,n,i,r,s,o,a,l),this.needsUpdate=!0}}).prototype.isCanvasTexture=!0;class hv extends Rd{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a};const l=this;i=Math.floor(i),r=Math.floor(r);const h=[],c=[],u=[],p=[];let d=0;const f=[],m=n/2;let g=0;function y(n){const r=d,s=new Du,f=new Vu;let y=0;const v=!0===n?t:e,_=!0===n?1:-1;for(let t=1;t<=i;t++)c.push(0,m*_,0),u.push(0,_,0),p.push(.5,.5),d++;const T=d;for(let t=0;t<=i;t++){const e=t/i*a+o,n=Math.cos(e),r=Math.sin(e);f.x=v*r,f.y=m*_,f.z=v*n,c.push(f.x,f.y,f.z),u.push(0,_,0),s.x=.5*n+.5,s.y=.5*r*_+.5,p.push(s.x,s.y),d++}for(let t=0;t<i;t++){const e=r+t,i=T+t;!0===n?h.push(i,i+1,e):h.push(i+1,i,e),y+=3}l.addGroup(g,y,!0===n?1:2),g+=y}!function(){const s=new Vu,y=new Vu;let v=0;const _=(e-t)/n;for(let l=0;l<=r;l++){const h=[],g=l/r,v=g*(e-t)+t;for(let t=0;t<=i;t++){const e=t/i,r=e*a+o,l=Math.sin(r),f=Math.cos(r);y.x=v*l,y.y=-g*n+m,y.z=v*f,c.push(y.x,y.y,y.z),s.set(l,_,f).normalize(),u.push(s.x,s.y,s.z),p.push(e,1-g),h.push(d++)}f.push(h)}for(let t=0;t<i;t++)for(let e=0;e<r;e++){const n=f[e][t],i=f[e+1][t],r=f[e+1][t+1],s=f[e][t+1];h.push(n,i,s),h.push(i,r,s),v+=6}l.addGroup(g,v,0),g+=v}(),!1===s&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(h),this.setAttribute("position",new _d(c,3)),this.setAttribute("normal",new _d(u,3)),this.setAttribute("uv",new _d(p,2))}static fromJSON(t){return new hv(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class cv extends hv{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,t,e,n,i,r,s,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:o}}static fromJSON(t){return new cv(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class uv extends Rd{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i};const r=[],s=[];function o(t,e,n,i){const r=i+1,s=[];for(let o=0;o<=r;o++){s[o]=[];const i=t.clone().lerp(n,o/r),a=e.clone().lerp(n,o/r),l=r-o;for(let t=0;t<=l;t++)s[o][t]=0===t&&o===r?i:i.clone().lerp(a,t/l)}for(let o=0;o<r;o++)for(let t=0;t<2*(r-o)-1;t++){const e=Math.floor(t/2);t%2===0?(a(s[o][e+1]),a(s[o+1][e]),a(s[o][e])):(a(s[o][e+1]),a(s[o+1][e+1]),a(s[o+1][e]))}}function a(t){r.push(t.x,t.y,t.z)}function l(e,n){const i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function h(t,e,n,i){i<0&&1===t.x&&(s[e]=t.x-1),0===n.x&&0===n.z&&(s[e]=i/2/Math.PI+.5)}function c(t){return Math.atan2(t.z,-t.x)}!function(t){const n=new Vu,i=new Vu,r=new Vu;for(let s=0;s<e.length;s+=3)l(e[s+0],n),l(e[s+1],i),l(e[s+2],r),o(n,i,r,t)}(i),function(t){const e=new Vu;for(let n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}(n),function(){const t=new Vu;for(let n=0;n<r.length;n+=3){t.x=r[n+0],t.y=r[n+1],t.z=r[n+2];const i=c(t)/2/Math.PI+.5,o=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);s.push(i,1-o)}var e;(function(){const t=new Vu,e=new Vu,n=new Vu,i=new Vu,o=new Du,a=new Du,l=new Du;for(let u=0,p=0;u<r.length;u+=9,p+=6){t.set(r[u+0],r[u+1],r[u+2]),e.set(r[u+3],r[u+4],r[u+5]),n.set(r[u+6],r[u+7],r[u+8]),o.set(s[p+0],s[p+1]),a.set(s[p+2],s[p+3]),l.set(s[p+4],s[p+5]),i.copy(t).add(e).add(n).divideScalar(3);const d=c(i);h(o,p+0,t,d),h(a,p+2,e,d),h(l,p+4,n,d)}})(),function(){for(let t=0;t<s.length;t+=6){const e=s[t+0],n=s[t+2],i=s[t+4],r=Math.max(e,n,i),o=Math.min(e,n,i);r>.9&&o<.1&&(e<.2&&(s[t+0]+=1),n<.2&&(s[t+2]+=1),i<.2&&(s[t+4]+=1))}}()}(),this.setAttribute("position",new _d(r,3)),this.setAttribute("normal",new _d(r.slice(),3)),this.setAttribute("uv",new _d(s,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(t){return new uv(t.vertices,t.indices,t.radius,t.details)}}const pv=new Vu,dv=new Vu,fv=new Vu,mv=new id;class gv extends Rd{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const n=4,i=Math.pow(10,n),r=Math.cos(Tu*e),s=t.getIndex(),o=t.getAttribute("position"),a=s?s.count:o.count,l=[0,0,0],h=["a","b","c"],c=new Array(3),u={},p=[];for(let t=0;t<a;t+=3){s?(l[0]=s.getX(t),l[1]=s.getX(t+1),l[2]=s.getX(t+2)):(l[0]=t,l[1]=t+1,l[2]=t+2);const{a:e,b:n,c:a}=mv;if(e.fromBufferAttribute(o,l[0]),n.fromBufferAttribute(o,l[1]),a.fromBufferAttribute(o,l[2]),mv.getNormal(fv),c[0]="".concat(Math.round(e.x*i),",").concat(Math.round(e.y*i),",").concat(Math.round(e.z*i)),c[1]="".concat(Math.round(n.x*i),",").concat(Math.round(n.y*i),",").concat(Math.round(n.z*i)),c[2]="".concat(Math.round(a.x*i),",").concat(Math.round(a.y*i),",").concat(Math.round(a.z*i)),c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let t=0;t<3;t++){const e=(t+1)%3,n=c[t],i=c[e],s=mv[h[t]],o=mv[h[e]],a="".concat(n,"_").concat(i),d="".concat(i,"_").concat(n);d in u&&u[d]?(fv.dot(u[d].normal)<=r&&(p.push(s.x,s.y,s.z),p.push(o.x,o.y,o.z)),u[d]=null):a in u||(u[a]={index0:l[t],index1:l[e],normal:fv.clone()})}}for(const t in u)if(u[t]){const{index0:e,index1:n}=u[t];pv.fromBufferAttribute(o,e),dv.fromBufferAttribute(o,n),p.push(pv.x,pv.y,pv.z),p.push(dv.x,dv.y,dv.z)}this.setAttribute("position",new _d(p,3))}}}class yv{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),r=0;e.push(0);for(let s=1;s<=t;s++)n=this.getPoint(s/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let i=0;const r=n.length;let s;s=e||t*n[r-1];let o,a=0,l=r-1;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),o=n[i]-s,o<0)a=i+1;else{if(!(o>0)){l=i;break}l=i-1}if(i=l,n[i]===s)return i/(r-1);const h=n[i];return(i+(s-h)/(n[i+1]-h))/(r-1)}getTangent(t,e){const n=1e-4;let i=t-n,r=t+n;i<0&&(i=0),r>1&&(r=1);const s=this.getPoint(i),o=this.getPoint(r),a=e||(s.isVector2?new Du:new Vu);return a.copy(o).sub(s).normalize(),a}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new Vu,i=[],r=[],s=[],o=new Vu,a=new Ep;for(let p=0;p<=t;p++){const e=p/t;i[p]=this.getTangentAt(e,new Vu)}r[0]=new Vu,s[0]=new Vu;let l=Number.MAX_VALUE;const h=Math.abs(i[0].x),c=Math.abs(i[0].y),u=Math.abs(i[0].z);h<=l&&(l=h,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),u<=l&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),s[0].crossVectors(i[0],r[0]);for(let p=1;p<=t;p++){if(r[p]=r[p-1].clone(),s[p]=s[p-1].clone(),o.crossVectors(i[p-1],i[p]),o.length()>Number.EPSILON){o.normalize();const t=Math.acos(bu(i[p-1].dot(i[p]),-1,1));r[p].applyMatrix4(a.makeRotationAxis(o,t))}s[p].crossVectors(i[p],r[p])}if(!0===e){let e=Math.acos(bu(r[0].dot(r[t]),-1,1));e/=t,i[0].dot(o.crossVectors(r[0],r[t]))>0&&(e=-e);for(let n=1;n<=t;n++)r[n].applyMatrix4(a.makeRotationAxis(i[n],e*n)),s[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class vv extends yv{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(t,e){const n=e||new Du,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=s?0:i),!0!==this.aClockwise||s||(r===i?r=-i:r-=i);const o=this.aStartAngle+t*r;let a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=a-this.aX,i=l-this.aY;a=n*t-i*e+this.aX,l=n*e+i*t+this.aY}return n.set(a,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}vv.prototype.isEllipseCurve=!0;class _v extends vv{constructor(t,e,n,i,r,s){super(t,e,n,n,i,r,s),this.type="ArcCurve"}}function Tv(){let t=0,e=0,n=0,i=0;function r(r,s,o,a){t=r,e=o,n=-3*r+3*s-2*o-a,i=2*r-2*s+o+a}return{initCatmullRom:function(t,e,n,i,s){r(e,n,s*(n-t),s*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,s,o,a){let l=(e-t)/s-(n-t)/(s+o)+(n-e)/o,h=(n-e)/o-(i-e)/(o+a)+(i-n)/a;l*=o,h*=o,r(e,n,l,h)},calc:function(r){const s=r*r;return t+e*r+n*s+i*(s*r)}}}_v.prototype.isArcCurve=!0;const Ev=new Vu,xv=new Tv,bv=new Tv,Iv=new Tv;class wv extends yv{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vu,n=this.points,i=n.length,r=(i-(this.closed?0:1))*t;let s,o,a=Math.floor(r),l=r-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/i)+1)*i:0===l&&a===i-1&&(a=i-2,l=1),this.closed||a>0?s=n[(a-1)%i]:(Ev.subVectors(n[0],n[1]).add(n[0]),s=Ev);const h=n[a%i],c=n[(a+1)%i];if(this.closed||a+2<i?o=n[(a+2)%i]:(Ev.subVectors(n[i-1],n[i-2]).add(n[i-1]),o=Ev),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(s.distanceToSquared(h),t),n=Math.pow(h.distanceToSquared(c),t),i=Math.pow(c.distanceToSquared(o),t);n<1e-4&&(n=1),e<1e-4&&(e=n),i<1e-4&&(i=n),xv.initNonuniformCatmullRom(s.x,h.x,c.x,o.x,e,n,i),bv.initNonuniformCatmullRom(s.y,h.y,c.y,o.y,e,n,i),Iv.initNonuniformCatmullRom(s.z,h.z,c.z,o.z,e,n,i)}else"catmullrom"===this.curveType&&(xv.initCatmullRom(s.x,h.x,c.x,o.x,this.tension),bv.initCatmullRom(s.y,h.y,c.y,o.y,this.tension),Iv.initCatmullRom(s.z,h.z,c.z,o.z,this.tension));return e.set(xv.calc(l),bv.calc(l),Iv.calc(l)),e}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Vu).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function Sv(t,e,n,i,r){const s=.5*(i-e),o=.5*(r-n),a=t*t;return(2*n-2*i+s+o)*(t*a)+(-3*n+3*i-2*s-o)*a+s*t+n}function Rv(t,e,n,i){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function Cv(t,e,n,i,r){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}wv.prototype.isCatmullRomCurve3=!0;class Av extends yv{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Du,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Du,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Du,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Du;super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Du,n=this.v0,i=this.v1,r=this.v2,s=this.v3;return e.set(Cv(t,n.x,i.x,r.x,s.x),Cv(t,n.y,i.y,r.y,s.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Av.prototype.isCubicBezierCurve=!0;class Dv extends yv{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vu,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vu,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Vu,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Vu;super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vu,n=this.v0,i=this.v1,r=this.v2,s=this.v3;return e.set(Cv(t,n.x,i.x,r.x,s.x),Cv(t,n.y,i.y,r.y,s.y),Cv(t,n.z,i.z,r.z,s.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Dv.prototype.isCubicBezierCurve3=!0;class Ov extends yv{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Du,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Du;super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Du;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new Du;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Ov.prototype.isLineCurve=!0;class Nv extends yv{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Du,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Du,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Du;super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Du,n=this.v0,i=this.v1,r=this.v2;return e.set(Rv(t,n.x,i.x,r.x),Rv(t,n.y,i.y,r.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Nv.prototype.isQuadraticBezierCurve=!0;class Mv extends yv{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vu,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vu,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Vu;super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vu,n=this.v0,i=this.v1,r=this.v2;return e.set(Rv(t,n.x,i.x,r.x),Rv(t,n.y,i.y,r.y),Rv(t,n.z,i.z,r.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Mv.prototype.isQuadraticBezierCurve3=!0;class Pv extends yv{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.type="SplineCurve",this.points=t}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Du,n=this.points,i=(n.length-1)*t,r=Math.floor(i),s=i-r,o=n[0===r?r:r-1],a=n[r],l=n[r>n.length-2?n.length-1:r+1],h=n[r>n.length-3?n.length-1:r+2];return e.set(Sv(s,o.x,a.x,l.x,h.x),Sv(s,o.y,a.y,l.y,h.y)),e}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Du).fromArray(n))}return this}}Pv.prototype.isSplineCurve=!0;var Fv=Object.freeze({__proto__:null,ArcCurve:_v,CatmullRomCurve3:wv,CubicBezierCurve:Av,CubicBezierCurve3:Dv,EllipseCurve:vv,LineCurve:Ov,LineCurve3:class extends yv{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vu,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vu;super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vu;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:Nv,QuadraticBezierCurve3:Mv,SplineCurve:Pv});class Lv extends yv{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ov(e,t))}getPoint(t,e){const n=t*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const t=i[r]-n,s=this.curves[r],o=s.getLength(),a=0===o?0:1-t/o;return s.getPointAt(a,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const s=r[i],o=s&&s.isEllipseCurve?2*t:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?t*s.points.length:t,a=s.getPoints(o);for(let t=0;t<a.length;t++){const i=a[t];n&&n.equals(i)||(e.push(i),n=i)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new Fv[n.type]).fromJSON(n))}return this}}class kv extends Lv{constructor(t){super(),this.type="Path",this.currentPoint=new Du,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Ov(this.currentPoint.clone(),new Du(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){const r=new Nv(this.currentPoint.clone(),new Du(t,e),new Du(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,r,s){const o=new Av(this.currentPoint.clone(),new Du(t,e),new Du(n,i),new Du(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new Pv(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,r,s){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+o,e+a,n,i,r,s),this}absarc(t,e,n,i,r,s){return this.absellipse(t,e,n,n,i,r,s),this}ellipse(t,e,n,i,r,s,o,a){const l=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(t+l,e+h,n,i,r,s,o,a),this}absellipse(t,e,n,i,r,s,o,a){const l=new vv(t,e,n,i,r,s,o,a);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const h=l.getPoint(1);return this.currentPoint.copy(h),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Uv extends kv{constructor(t){super(t),this.uuid=xu(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new kv).fromJSON(n))}return this}}const Bv=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=e&&e.length,r=i?e[0]*n:t.length;let s=zv(t,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,h,c,u,p,d;if(i&&(s=function(t,e,n,i){const r=[];let s,o,a,l,h;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,h=zv(t,a,l,i,!1),h===h.next&&(h.steiner=!0),r.push(Qv(h));for(r.sort(Yv),s=0;s<r.length;s++)qv(r[s],n),n=Gv(n,n.next);return n}(t,e,s,n)),t.length>80*n){a=h=t[0],l=c=t[1];for(let e=n;e<r;e+=n)u=t[e],p=t[e+1],u<a&&(a=u),p<l&&(l=p),u>h&&(h=u),p>c&&(c=p);d=Math.max(h-a,c-l),d=0!==d?1/d:0}return Hv(s,o,n,a,l,d),o};function zv(t,e,n,i,r){let s,o;if(r===function(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}(t,e,n,i)>0)for(s=e;s<n;s+=i)o=a_(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=a_(s,t[s],t[s+1],o);return o&&e_(o,o.next)&&(l_(o),o=o.next),o}function Gv(t,e){if(!t)return t;e||(e=t);let n,i=t;do{if(n=!1,i.steiner||!e_(i,i.next)&&0!==t_(i.prev,i,i.next))i=i.next;else{if(l_(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function Hv(t,e,n,i,r,s,o){if(!t)return;!o&&s&&function(t,e,n,i){let r=t;do{null===r.z&&(r.z=Kv(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,n,i,r,s,o,a,l,h=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<h&&(a++,i=i.nextZ,i);e++);for(l=h;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,h*=2}while(o>1)}(r)}(t,i,r,s);let a,l,h=t;for(;t.prev!==t.next;)if(a=t.prev,l=t.next,s?Vv(t,i,r,s):jv(t))e.push(a.i/n),e.push(t.i/n),e.push(l.i/n),l_(t),t=l.next,h=l.next;else if((t=l)===h){o?1===o?Hv(t=Wv(Gv(t),e,n),e,n,i,r,s,2):2===o&&Zv(t,e,n,i,r,s):Hv(Gv(t),e,n,i,r,s,1);break}}function jv(t){const e=t.prev,n=t,i=t.next;if(t_(e,n,i)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(Jv(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&t_(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Vv(t,e,n,i){const r=t.prev,s=t,o=t.next;if(t_(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,l=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,h=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,c=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,u=Kv(a,l,e,n,i),p=Kv(h,c,e,n,i);let d=t.prevZ,f=t.nextZ;for(;d&&d.z>=u&&f&&f.z<=p;){if(d!==t.prev&&d!==t.next&&Jv(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&t_(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,f!==t.prev&&f!==t.next&&Jv(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&t_(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;d&&d.z>=u;){if(d!==t.prev&&d!==t.next&&Jv(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&t_(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&Jv(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&t_(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Wv(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!e_(r,s)&&n_(r,i,i.next,s)&&s_(r,s)&&s_(s,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(s.i/n),l_(i),l_(i.next),i=t=s),i=i.next}while(i!==t);return Gv(i)}function Zv(t,e,n,i,r,s){let o=t;do{let t=o.next.next;for(;t!==o.prev;){if(o.i!==t.i&&$v(o,t)){let a=o_(o,t);return o=Gv(o,o.next),a=Gv(a,a.next),Hv(o,e,n,i,r,s),void Hv(a,e,n,i,r,s)}t=t.next}o=o.next}while(o!==t)}function Yv(t,e){return t.x-e.x}function qv(t,e){if(e=function(t,e){let n=e;const i=t.x,r=t.y;let s,o=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const t=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=i&&t>o){if(o=t,t===i){if(r===n.y)return n;if(r===n.next.y)return n.next}s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!s)return null;if(i===o)return s;const a=s,l=s.x,h=s.y;let c,u=1/0;n=s;do{i>=n.x&&n.x>=l&&i!==n.x&&Jv(r<h?i:o,r,l,h,r<h?o:i,r,n.x,n.y)&&(c=Math.abs(r-n.y)/(i-n.x),s_(n,t)&&(c<u||c===u&&(n.x>s.x||n.x===s.x&&Xv(s,n)))&&(s=n,u=c)),n=n.next}while(n!==a);return s}(t,e),e){const n=o_(e,t);Gv(e,e.next),Gv(n,n.next)}}function Xv(t,e){return t_(t.prev,t,e.prev)<0&&t_(e.next,t,t.next)<0}function Kv(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Qv(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Jv(t,e,n,i,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(i-a)-(n-o)*(e-a)>=0&&(n-o)*(s-a)-(r-o)*(i-a)>=0}function $v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&n_(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(s_(t,e)&&s_(e,t)&&function(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!==n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(t_(t.prev,t,e.prev)||t_(t,e.prev,e))||e_(t,e)&&t_(t.prev,t,t.next)>0&&t_(e.prev,e,e.next)>0)}function t_(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function e_(t,e){return t.x===e.x&&t.y===e.y}function n_(t,e,n,i){const r=r_(t_(t,e,n)),s=r_(t_(t,e,i)),o=r_(t_(n,i,t)),a=r_(t_(n,i,e));return r!==s&&o!==a||(!(0!==r||!i_(t,n,e))||(!(0!==s||!i_(t,i,e))||(!(0!==o||!i_(n,t,i))||!(0!==a||!i_(n,e,i)))))}function i_(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function r_(t){return t>0?1:t<0?-1:0}function s_(t,e){return t_(t.prev,t,t.next)<0?t_(t,e,t.next)>=0&&t_(t,t.prev,e)>=0:t_(t,e,t.prev)<0||t_(t,t.next,e)<0}function o_(t,e){const n=new h_(t.i,t.x,t.y),i=new h_(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function a_(t,e,n,i){const r=new h_(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function l_(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function h_(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class c_{static area(t){const e=t.length;let n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n}static isClockWise(t){return c_.area(t)<0}static triangulateShape(t,e){const n=[],i=[],r=[];u_(t),p_(n,t);let s=t.length;e.forEach(u_);for(let a=0;a<e.length;a++)i.push(s),s+=e[a].length,p_(n,e[a]);const o=Bv(n,i);for(let a=0;a<o.length;a+=3)r.push(o.slice(a,a+3));return r}}function u_(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function p_(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class d_ extends Rd{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uv([new Du(.5,.5),new Du(-.5,.5),new Du(-.5,-.5),new Du(.5,-.5)]),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,i=[],r=[];for(let o=0,a=t.length;o<a;o++){s(t[o])}function s(t){const s=[],o=void 0!==e.curveSegments?e.curveSegments:12,a=void 0!==e.steps?e.steps:1;let l=void 0!==e.depth?e.depth:1,h=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:.2,u=void 0!==e.bevelSize?e.bevelSize:c-.1,p=void 0!==e.bevelOffset?e.bevelOffset:0,d=void 0!==e.bevelSegments?e.bevelSegments:3;const f=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:f_;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);let g,y,v,_,T,E=!1;f&&(g=f.getSpacedPoints(a),E=!0,h=!1,y=f.computeFrenetFrames(a,!1),v=new Vu,_=new Vu,T=new Vu),h||(d=0,c=0,u=0,p=0);const x=t.extractPoints(o);let b=x.shape;const I=x.holes;if(!c_.isClockWise(b)){b=b.reverse();for(let t=0,e=I.length;t<e;t++){const e=I[t];c_.isClockWise(e)&&(I[t]=e.reverse())}}const w=c_.triangulateShape(b,I),S=b;for(let e=0,n=I.length;e<n;e++){const t=I[e];b=b.concat(t)}function R(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}const C=b.length,A=w.length;function D(t,e,n){let i,r,s;const o=t.x-e.x,a=t.y-e.y,l=n.x-t.x,h=n.y-t.y,c=o*o+a*a,u=o*h-a*l;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(c),p=Math.sqrt(l*l+h*h),d=e.x-a/u,f=e.y+o/u,m=((n.x-h/p-d)*h-(n.y+l/p-f)*l)/(o*h-a*l);i=d+o*m-t.x,r=f+a*m-t.y;const g=i*i+r*r;if(g<=2)return new Du(i,r);s=Math.sqrt(g/2)}else{let t=!1;o>Number.EPSILON?l>Number.EPSILON&&(t=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(h)&&(t=!0),t?(i=-a,r=o,s=Math.sqrt(c)):(i=o,r=a,s=Math.sqrt(c/2))}return new Du(i/s,r/s)}const O=[];for(let e=0,n=S.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),O[e]=D(S[e],S[i],S[r]);const N=[];let M,P=O.concat();for(let e=0,n=I.length;e<n;e++){const t=I[e];M=[];for(let e=0,n=t.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),M[e]=D(t[e],t[i],t[r]);N.push(M),P=P.concat(M)}for(let e=0;e<d;e++){const t=e/d,n=c*Math.cos(t*Math.PI/2),i=u*Math.sin(t*Math.PI/2)+p;for(let e=0,r=S.length;e<r;e++){const t=R(S[e],O[e],i);k(t.x,t.y,-n)}for(let e=0,r=I.length;e<r;e++){const t=I[e];M=N[e];for(let e=0,r=t.length;e<r;e++){const r=R(t[e],M[e],i);k(r.x,r.y,-n)}}}const F=u+p;for(let e=0;e<C;e++){const t=h?R(b[e],P[e],F):b[e];E?(_.copy(y.normals[0]).multiplyScalar(t.x),v.copy(y.binormals[0]).multiplyScalar(t.y),T.copy(g[0]).add(_).add(v),k(T.x,T.y,T.z)):k(t.x,t.y,0)}for(let e=1;e<=a;e++)for(let t=0;t<C;t++){const n=h?R(b[t],P[t],F):b[t];E?(_.copy(y.normals[e]).multiplyScalar(n.x),v.copy(y.binormals[e]).multiplyScalar(n.y),T.copy(g[e]).add(_).add(v),k(T.x,T.y,T.z)):k(n.x,n.y,l/a*e)}for(let e=d-1;e>=0;e--){const t=e/d,n=c*Math.cos(t*Math.PI/2),i=u*Math.sin(t*Math.PI/2)+p;for(let e=0,r=S.length;e<r;e++){const t=R(S[e],O[e],i);k(t.x,t.y,l+n)}for(let e=0,r=I.length;e<r;e++){const t=I[e];M=N[e];for(let e=0,r=t.length;e<r;e++){const r=R(t[e],M[e],i);E?k(r.x,r.y+g[a-1].y,g[a-1].x+n):k(r.x,r.y,l+n)}}}function L(t,e){let n=t.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=t.length-1);for(let t=0,n=a+2*d;t<n;t++){const n=C*t,s=C*(t+1);B(e+i+n,e+r+n,e+r+s,e+i+s)}}}function k(t,e,n){s.push(t),s.push(e),s.push(n)}function U(t,e,r){z(t),z(e),z(r);const s=i.length/3,o=m.generateTopUV(n,i,s-3,s-2,s-1);G(o[0]),G(o[1]),G(o[2])}function B(t,e,r,s){z(t),z(e),z(s),z(e),z(r),z(s);const o=i.length/3,a=m.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);G(a[0]),G(a[1]),G(a[3]),G(a[1]),G(a[2]),G(a[3])}function z(t){i.push(s[3*t+0]),i.push(s[3*t+1]),i.push(s[3*t+2])}function G(t){r.push(t.x),r.push(t.y)}!function(){const t=i.length/3;if(h){let t=0,e=C*t;for(let n=0;n<A;n++){const t=w[n];U(t[2]+e,t[1]+e,t[0]+e)}t=a+2*d,e=C*t;for(let n=0;n<A;n++){const t=w[n];U(t[0]+e,t[1]+e,t[2]+e)}}else{for(let t=0;t<A;t++){const e=w[t];U(e[2],e[1],e[0])}for(let t=0;t<A;t++){const e=w[t];U(e[0]+C*a,e[1]+C*a,e[2]+C*a)}}n.addGroup(t,i.length/3-t,0)}(),function(){const t=i.length/3;let e=0;L(S,e),e+=S.length;for(let n=0,i=I.length;n<i;n++){const t=I[n];L(t,e),e+=t.length}n.addGroup(t,i.length/3-t,1)}()}this.setAttribute("position",new _d(i,3)),this.setAttribute("uv",new _d(r,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const e=t[i];n.shapes.push(e.uuid)}else n.shapes.push(t.uuid);void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let r=0,s=t.shapes.length;r<s;r++){const i=e[t.shapes[r]];n.push(i)}const i=t.options.extrudePath;return void 0!==i&&(t.options.extrudePath=(new Fv[i.type]).fromJSON(i)),new d_(n,t.options)}}const f_={generateTopUV:function(t,e,n,i,r){const s=e[3*n],o=e[3*n+1],a=e[3*i],l=e[3*i+1],h=e[3*r],c=e[3*r+1];return[new Du(s,o),new Du(a,l),new Du(h,c)]},generateSideWallUV:function(t,e,n,i,r,s){const o=e[3*n],a=e[3*n+1],l=e[3*n+2],h=e[3*i],c=e[3*i+1],u=e[3*i+2],p=e[3*r],d=e[3*r+1],f=e[3*r+2],m=e[3*s],g=e[3*s+1],y=e[3*s+2];return Math.abs(a-c)<Math.abs(o-h)?[new Du(o,1-l),new Du(h,1-u),new Du(p,1-f),new Du(m,1-y)]:[new Du(a,1-l),new Du(c,1-u),new Du(d,1-f),new Du(g,1-y)]}};class m_ extends uv{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new m_(t.radius,t.detail)}}class g_ extends Rd{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uv([new Du(0,.5),new Du(-.5,-.5),new Du(.5,-.5)]),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],i=[],r=[],s=[];let o=0,a=0;if(!1===Array.isArray(t))l(t);else for(let h=0;h<t.length;h++)l(t[h]),this.addGroup(o,a,h),o+=a,a=0;function l(t){const o=i.length/3,l=t.extractPoints(e);let h=l.shape;const c=l.holes;!1===c_.isClockWise(h)&&(h=h.reverse());for(let e=0,n=c.length;e<n;e++){const t=c[e];!0===c_.isClockWise(t)&&(c[e]=t.reverse())}const u=c_.triangulateShape(h,c);for(let e=0,n=c.length;e<n;e++){const t=c[e];h=h.concat(t)}for(let e=0,n=h.length;e<n;e++){const t=h[e];i.push(t.x,t.y,0),r.push(0,0,1),s.push(t.x,t.y)}for(let e=0,i=u.length;e<i;e++){const t=u[e],i=t[0]+o,r=t[1]+o,s=t[2]+o;n.push(i,r,s),a+=3}}this.setIndex(n),this.setAttribute("position",new _d(i,3)),this.setAttribute("normal",new _d(r,3)),this.setAttribute("uv",new _d(s,2))}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];n.push(r)}return new g_(n,t.curveSegments)}}class y_ extends Rd{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:o},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const a=Math.min(s+o,Math.PI);let l=0;const h=[],c=new Vu,u=new Vu,p=[],d=[],f=[],m=[];for(let g=0;g<=n;g++){const p=[],y=g/n;let v=0;0==g&&0==s?v=.5/e:g==n&&a==Math.PI&&(v=-.5/e);for(let n=0;n<=e;n++){const a=n/e;c.x=-t*Math.cos(i+a*r)*Math.sin(s+y*o),c.y=t*Math.cos(s+y*o),c.z=t*Math.sin(i+a*r)*Math.sin(s+y*o),d.push(c.x,c.y,c.z),u.copy(c).normalize(),f.push(u.x,u.y,u.z),m.push(a+v,1-y),p.push(l++)}h.push(p)}for(let g=0;g<n;g++)for(let t=0;t<e;t++){const e=h[g][t+1],i=h[g][t],r=h[g+1][t],o=h[g+1][t+1];(0!==g||s>0)&&p.push(e,i,o),(g!==n-1||a<Math.PI)&&p.push(i,r,o)}this.setIndex(p),this.setAttribute("position",new _d(d,3)),this.setAttribute("normal",new _d(f,3)),this.setAttribute("uv",new _d(m,2))}static fromJSON(t){return new y_(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class v_ extends Rd{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const s=[],o=[],a=[],l=[],h=new Vu,c=new Vu,u=new Vu;for(let p=0;p<=n;p++)for(let s=0;s<=i;s++){const d=s/i*r,f=p/n*Math.PI*2;c.x=(t+e*Math.cos(f))*Math.cos(d),c.y=(t+e*Math.cos(f))*Math.sin(d),c.z=e*Math.sin(f),o.push(c.x,c.y,c.z),h.x=t*Math.cos(d),h.y=t*Math.sin(d),u.subVectors(c,h).normalize(),a.push(u.x,u.y,u.z),l.push(s/i),l.push(p/n)}for(let p=1;p<=n;p++)for(let t=1;t<=i;t++){const e=(i+1)*p+t-1,n=(i+1)*(p-1)+t-1,r=(i+1)*(p-1)+t,o=(i+1)*p+t;s.push(e,n,o),s.push(n,r,o)}this.setIndex(s),this.setAttribute("position",new _d(o,3)),this.setAttribute("normal",new _d(a,3)),this.setAttribute("uv",new _d(l,2))}static fromJSON(t){return new v_(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class __ extends Rd{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],n=new Set,i=new Vu,r=new Vu;if(null!==t.index){const s=t.attributes.position,o=t.index;let a=t.groups;0===a.length&&(a=[{start:0,count:o.count,materialIndex:0}]);for(let t=0,l=a.length;t<l;++t){const l=a[t],h=l.start;for(let t=h,a=h+l.count;t<a;t+=3)for(let l=0;l<3;l++){const a=o.getX(t+l),h=o.getX(t+(l+1)%3);i.fromBufferAttribute(s,a),r.fromBufferAttribute(s,h),!0===T_(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}}else{const s=t.attributes.position;for(let t=0,o=s.count/3;t<o;t++)for(let a=0;a<3;a++){const o=3*t+a,l=3*t+(a+1)%3;i.fromBufferAttribute(s,o),r.fromBufferAttribute(s,l),!0===T_(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new _d(e,3))}}}function T_(t,e,n){const i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z),r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i,r),!0)}class E_ extends sd{constructor(t){super(),this.type="ShadowMaterial",this.color=new pd(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}E_.prototype.isShadowMaterial=!0;class x_ extends sd{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new pd(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pd(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uu,this.normalScale=new Du(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}x_.prototype.isMeshStandardMaterial=!0;class b_ extends x_{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Du(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return bu(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new pd(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new pd(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new pd(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!==t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!==t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!==t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}b_.prototype.isMeshPhysicalMaterial=!0;class I_ extends sd{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new pd(16777215),this.specular=new pd(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pd(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uu,this.normalScale=new Du(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ph,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}I_.prototype.isMeshPhongMaterial=!0;class w_ extends sd{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new pd(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pd(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uu,this.normalScale=new Du(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}w_.prototype.isMeshToonMaterial=!0;class S_ extends sd{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uu,this.normalScale=new Du(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}S_.prototype.isMeshNormalMaterial=!0;class R_ extends sd{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new pd(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pd(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ph,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}R_.prototype.isMeshLambertMaterial=!0;class C_ extends sd{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new pd(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uu,this.normalScale=new Du(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}C_.prototype.isMeshMatcapMaterial=!0;class A_ extends Vy{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}A_.prototype.isLineDashedMaterial=!0;const D_={arraySlice:function(t,e,n){return D_.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,n=new Array(e);for(let i=0;i!==e;++i)n[i]=i;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,o=0;o!==i;++s){const i=n[s]*e;for(let n=0;n!==e;++n)r[o++]=t[i+n]}return r},flattenJSON:function(t,e,n,i){let r=1,s=t[0];for(;void 0!==s&&void 0===s[i];)s=t[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),n.push.apply(n,o)),s=t[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),n.push(o)),s=t[r++]}while(void 0!==s)},subclip:function(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const t=s.tracks[l],e=t.getValueSize(),a=[],h=[];for(let s=0;s<t.times.length;++s){const o=t.times[s]*r;if(!(o<n||o>=i)){a.push(t.times[s]);for(let n=0;n<e;++n)h.push(t.values[s*e+n])}}0!==a.length&&(t.times=D_.convertArray(a,t.times.constructor),t.values=D_.convertArray(h,t.values.constructor),o.push(t))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let o=0;o<r;++o){const e=n.tracks[o],i=e.ValueTypeName;if("bool"===i||"string"===i)continue;const r=t.tracks.find((function(t){return t.name===e.name&&t.ValueTypeName===i}));if(void 0===r)continue;let a=0;const l=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);let h=0;const c=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=c/3);const u=e.times.length-1;let p;if(s<=e.times[0]){const t=a,n=l-a;p=D_.arraySlice(e.values,t,n)}else if(s>=e.times[u]){const t=u*l+a,n=t+l-a;p=D_.arraySlice(e.values,t,n)}else{const t=e.createInterpolant(),n=a,i=l-a;t.evaluate(s),p=D_.arraySlice(t.resultBuffer,n,i)}if("quaternion"===i){(new ju).fromArray(p).normalize().conjugate().toArray(p)}const d=r.times.length;for(let t=0;t<d;++t){const e=t*c+h;if("quaternion"===i)ju.multiplyQuaternionsFlat(r.values,e,p,0,r.values,e);else{const t=c-2*h;for(let n=0;n<t;++n)r.values[e+n]-=p[n]}}}return t.blendMode=eu,t}};class O_{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{let s;n:{i:if(!(t<i)){for(let s=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===s)break;if(r=i,i=e[++n],t<i)break e}s=e.length;break n}if(t>=r)break t;{const o=e[1];t<o&&(n=2,r=o);for(let s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===s)break;if(i=r,r=e[--n-1],t>=r)break e}s=n,n=0}}for(;n<s;){const i=n+s>>>1;t<e[i]?s=i:n=i+1}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let s=0;s!==i;++s)e[s]=n[r+s];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}O_.prototype.beforeStart_=O_.prototype.copySampleValue_,O_.prototype.afterEnd_=O_.prototype.copySampleValue_;class N_ extends O_{constructor(t,e,n,i){super(t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Qc,endingEnd:Qc}}intervalChanged_(t,e,n){const i=this.parameterPositions;let r=t-2,s=t+1,o=i[r],a=i[s];if(void 0===o)switch(this.getSettings_().endingStart){case Jc:r=t,o=2*e-n;break;case $c:r=i.length-2,o=e+i[r]-i[r+1];break;default:r=t,o=n}if(void 0===a)switch(this.getSettings_().endingEnd){case Jc:s=t,a=2*n-e;break;case $c:s=1,a=n+i[1]-i[0];break;default:s=t-1,a=e}const l=.5*(n-e),h=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(a-n),this._offsetPrev=r*h,this._offsetNext=s*h}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,h=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,p=this._weightNext,d=(n-e)/(i-e),f=d*d,m=f*d,g=-u*m+2*u*f-u*d,y=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*d+1,v=(-1-p)*m+(1.5+p)*f+.5*d,_=p*m-p*f;for(let T=0;T!==o;++T)r[T]=g*s[h+T]+y*s[l+T]+v*s[a+T]+_*s[c+T];return r}}class M_ extends O_{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,h=(n-e)/(i-e),c=1-h;for(let u=0;u!==o;++u)r[u]=s[l+u]*c+s[a+u]*h;return r}}class P_ extends O_{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class F_{constructor(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=D_.convertArray(e,this.TimeBufferType),this.values=D_.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:D_.convertArray(t.times,Array),values:D_.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new P_(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new M_(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new N_(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case qc:e=this.InterpolantFactoryMethodDiscrete;break;case Xc:e=this.InterpolantFactoryMethodLinear;break;case Kc:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return qc;case this.InterpolantFactoryMethodLinear:return Xc;case this.InterpolantFactoryMethodSmooth:return Kc}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let r=0,s=i-1;for(;r!==i&&n[r]<t;)++r;for(;-1!==s&&n[s]>e;)--s;if(++s,0!==r||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const t=this.getValueSize();this.times=D_.arraySlice(n,r,s),this.values=D_.arraySlice(this.values,r*t,s*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let o=0;o!==r;o++){const e=n[o];if("number"===typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,e),t=!1;break}if(null!==s&&s>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,e,s),t=!1;break}s=e}if(void 0!==i&&D_.isTypedArray(i))for(let o=0,a=i.length;o!==a;++o){const e=i[o];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,e),t=!1;break}}return t}optimize(){const t=D_.arraySlice(this.times),e=D_.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===Kc,r=t.length-1;let s=1;for(let o=1;o<r;++o){let r=!1;const a=t[o];if(a!==t[o+1]&&(1!==o||a!==t[0]))if(i)r=!0;else{const t=o*n,i=t-n,s=t+n;for(let o=0;o!==n;++o){const n=e[t+o];if(n!==e[i+o]||n!==e[s+o]){r=!0;break}}}if(r){if(o!==s){t[s]=t[o];const i=o*n,r=s*n;for(let t=0;t!==n;++t)e[r+t]=e[i+t]}++s}}if(r>0){t[s]=t[r];for(let t=r*n,i=s*n,o=0;o!==n;++o)e[i+o]=e[t+o];++s}return s!==t.length?(this.times=D_.arraySlice(t,0,s),this.values=D_.arraySlice(e,0,s*n)):(this.times=t,this.values=e),this}clone(){const t=D_.arraySlice(this.times,0),e=D_.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}F_.prototype.TimeBufferType=Float32Array,F_.prototype.ValueBufferType=Float32Array,F_.prototype.DefaultInterpolation=Xc;class L_ extends F_{}L_.prototype.ValueTypeName="bool",L_.prototype.ValueBufferType=Array,L_.prototype.DefaultInterpolation=qc,L_.prototype.InterpolantFactoryMethodLinear=void 0,L_.prototype.InterpolantFactoryMethodSmooth=void 0;class k_ extends F_{}k_.prototype.ValueTypeName="color";class U_ extends F_{}U_.prototype.ValueTypeName="number";class B_ extends O_{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=(n-e)/(i-e);let l=t*o;for(let h=l+o;l!==h;l+=4)ju.slerpFlat(r,0,s,l-o,s,l,a);return r}}class z_ extends F_{InterpolantFactoryMethodLinear(t){return new B_(this.times,this.values,this.getValueSize(),t)}}z_.prototype.ValueTypeName="quaternion",z_.prototype.DefaultInterpolation=Xc,z_.prototype.InterpolantFactoryMethodSmooth=void 0;class G_ extends F_{}G_.prototype.ValueTypeName="string",G_.prototype.ValueBufferType=Array,G_.prototype.DefaultInterpolation=qc,G_.prototype.InterpolantFactoryMethodLinear=void 0,G_.prototype.InterpolantFactoryMethodSmooth=void 0;class H_ extends F_{}H_.prototype.ValueTypeName="vector";class j_{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:tu;this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=xu(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let s=0,o=n.length;s!==o;++s)e.push(V_(n[s]).scale(i));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let r=0,s=n.length;r!==s;++r)e.push(F_.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(t,e,n,i){const r=e.length,s=[];for(let o=0;o<r;o++){let t=[],a=[];t.push((o+r-1)%r,o,(o+1)%r),a.push(0,1,0);const l=D_.getKeyframeOrder(t);t=D_.sortedArray(t,1,l),a=D_.sortedArray(a,1,l),i||0!==t[0]||(t.push(r),a.push(a[0])),s.push(new U_(".morphTargetInfluences["+e[o].name+"]",t,a).scale(1/n))}return new this(t,-1,s)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let o=0,a=t.length;o<a;o++){const e=t[o],n=e.name.match(r);if(n&&n.length>1){const t=n[1];let r=i[t];r||(i[t]=r=[]),r.push(e)}}const s=[];for(const o in i)s.push(this.CreateFromMorphTargetSequence(o,i[o],e,n));return s}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,i,r){if(0!==n.length){const s=[],o=[];D_.flattenJSON(n,s,o,i),0!==s.length&&r.push(new t(e,s,o))}},i=[],r=t.name||"default",s=t.fps||30,o=t.blendMode;let a=t.length||-1;const l=t.hierarchy||[];for(let h=0;h<l.length;h++){const t=l[h].keys;if(t&&0!==t.length)if(t[0].morphTargets){const e={};let n;for(n=0;n<t.length;n++)if(t[n].morphTargets)for(let i=0;i<t[n].morphTargets.length;i++)e[t[n].morphTargets[i]]=-1;for(const r in e){const e=[],s=[];for(let i=0;i!==t[n].morphTargets.length;++i){const i=t[n];e.push(i.time),s.push(i.morphTarget===r?1:0)}i.push(new U_(".morphTargetInfluence["+r+"]",e,s))}a=e.length*(s||1)}else{const r=".bones["+e[h].name+"]";n(H_,r+".position",t,"pos",i),n(z_,r+".quaternion",t,"rot",i),n(H_,r+".scale",t,"scl",i)}}if(0===i.length)return null;return new this(r,a,i,o)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function V_(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return U_;case"vector":case"vector2":case"vector3":case"vector4":return H_;case"color":return k_;case"quaternion":return z_;case"bool":case"boolean":return L_;case"string":return G_}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];D_.flattenJSON(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const W_={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Z_{constructor(t,e,n){const i=this;let r,s=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===s&&void 0!==i.onStart&&i.onStart(t,o,a),s=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,a),o===a&&(s=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return r?r(t):t},this.setURLModifier=function(t){return r=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],i=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return i}return null}}}const Y_=new Z_;class q_{constructor(t){this.manager=void 0!==t?t:Y_,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(i,r){n.load(t,i,e,r)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const X_={};class K_ extends q_{constructor(t){super(t)}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=W_.get(t);if(void 0!==r)return this.manager.itemStart(t),setTimeout((()=>{e&&e(r),this.manager.itemEnd(t)}),0),r;if(void 0!==X_[t])return void X_[t].push({onLoad:e,onProgress:n,onError:i});X_[t]=[],X_[t].push({onLoad:e,onProgress:n,onError:i});const s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(s).then((e=>{if(200===e.status||0===e.status){0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const n=X_[t],i=e.body.getReader(),r=e.headers.get("Content-Length"),s=r?parseInt(r):0,o=0!==s;let a=0;return new ReadableStream({start(t){!function e(){i.read().then((i=>{let{done:r,value:l}=i;if(r)t.close();else{a+=l.byteLength;const i=new ProgressEvent("progress",{lengthComputable:o,loaded:a,total:s});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(i)}t.enqueue(l),e()}}))}()}})}throw Error('fetch for "'.concat(e.url,'" responded with ').concat(e.status,": ").concat(e.statusText))})).then((t=>{const e=new Response(t);switch(this.responseType){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((t=>(new DOMParser).parseFromString(t,this.mimeType)));case"json":return e.json();default:return e.text()}})).then((e=>{W_.add(t,e);const n=X_[t];delete X_[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onLoad&&i.onLoad(e)}this.manager.itemEnd(t)})).catch((e=>{const n=X_[t];delete X_[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(e)}this.manager.itemError(t),this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Q_ extends q_{constructor(t){super(t)}load(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,s=W_.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout((function(){e&&e(s),r.manager.itemEnd(t)}),0),s;const o=Mu("img");function a(){h(),W_.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){h(),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}function h(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(t),o.src=t,o}}class J_ extends q_{constructor(t){super(t)}load(t,e,n,i){const r=new nf,s=new Q_(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function a(n){s.load(t[n],(function(t){r.images[n]=t,o++,6===o&&(r.needsUpdate=!0,e&&e(r))}),void 0,i)}for(let l=0;l<t.length;++l)a(l);return r}}class $_ extends q_{constructor(t){super(t)}load(t,e,n,i){const r=new Uu,s=new Q_(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,(function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)}),n,i),r}}class tT extends Zp{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.type="Light",this.color=new pd(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}tT.prototype.isLight=!0;class eT extends tT{constructor(t,e,n){super(t,n),this.type="HemisphereLight",this.position.copy(Zp.DefaultUp),this.updateMatrix(),this.groundColor=new pd(e)}copy(t){return tT.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}eT.prototype.isHemisphereLight=!0;const nT=new Ep,iT=new Vu,rT=new Vu;class sT{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Du(512,512),this.map=null,this.mapPass=null,this.matrix=new Ep,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new uf,this._frameExtents=new Du(1,1),this._viewportCount=1,this._viewports=[new zu(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;iT.setFromMatrixPosition(t.matrixWorld),e.position.copy(iT),rT.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(rT),e.updateMatrixWorld(),nT.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nT),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class oT extends sT{constructor(){super(new $d(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,n=2*Eu*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}oT.prototype.isSpotLightShadow=!0;class aT extends tT{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(t,e),this.type="SpotLight",this.position.copy(Zp.DefaultUp),this.updateMatrix(),this.target=new Zp,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.shadow=new oT}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}aT.prototype.isSpotLight=!0;const lT=new Ep,hT=new Vu,cT=new Vu;class uT extends sT{constructor(){super(new $d(90,1,.5,500)),this._frameExtents=new Du(4,2),this._viewportCount=6,this._viewports=[new zu(2,1,1,1),new zu(0,1,1,1),new zu(3,1,1,1),new zu(1,1,1,1),new zu(3,0,1,1),new zu(1,0,1,1)],this._cubeDirections=[new Vu(1,0,0),new Vu(-1,0,0),new Vu(0,0,1),new Vu(0,0,-1),new Vu(0,1,0),new Vu(0,-1,0)],this._cubeUps=[new Vu(0,1,0),new Vu(0,1,0),new Vu(0,1,0),new Vu(0,1,0),new Vu(0,0,1),new Vu(0,0,-1)]}updateMatrices(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),hT.setFromMatrixPosition(t.matrixWorld),n.position.copy(hT),cT.copy(n.position),cT.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(cT),n.updateMatrixWorld(),i.makeTranslation(-hT.x,-hT.y,-hT.z),lT.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lT)}}uT.prototype.isPointLightShadow=!0;class pT extends tT{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(t,e),this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new uT}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}pT.prototype.isPointLight=!0;class dT extends sT{constructor(){super(new If(-5,5,5,-5,.5,500))}}dT.prototype.isDirectionalLightShadow=!0;class fT extends tT{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(Zp.DefaultUp),this.updateMatrix(),this.target=new Zp,this.shadow=new dT}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}fT.prototype.isDirectionalLight=!0;class mT extends tT{constructor(t,e){super(t,e),this.type="AmbientLight"}}mT.prototype.isAmbientLight=!0;class gT extends tT{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(t,e),this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}gT.prototype.isRectAreaLight=!0;class yT{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Vu)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,i=t.y,r=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.282095),e.addScaledVector(s[1],.488603*i),e.addScaledVector(s[2],.488603*r),e.addScaledVector(s[3],.488603*n),e.addScaledVector(s[4],n*i*1.092548),e.addScaledVector(s[5],i*r*1.092548),e.addScaledVector(s[6],.315392*(3*r*r-1)),e.addScaledVector(s[7],n*r*1.092548),e.addScaledVector(s[8],.546274*(n*n-i*i)),e}getIrradianceAt(t,e){const n=t.x,i=t.y,r=t.z,s=this.coefficients;return e.copy(s[0]).multiplyScalar(.886227),e.addScaledVector(s[1],1.023328*i),e.addScaledVector(s[2],1.023328*r),e.addScaledVector(s[3],1.023328*n),e.addScaledVector(s[4],.858086*n*i),e.addScaledVector(s[5],.858086*i*r),e.addScaledVector(s[6],.743125*r*r-.247708),e.addScaledVector(s[7],.858086*n*r),e.addScaledVector(s[8],.429043*(n*n-i*i)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}static getBasisAt(t,e){const n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}yT.prototype.isSphericalHarmonics3=!0;class vT extends tT{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new yT;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}vT.prototype.isLightProbe=!0;class _T{static decodeText(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(uJ){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}static resolveURL(t,e){return"string"!==typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class TT extends Rd{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}TT.prototype.isInstancedBufferGeometry=!0;class ET extends q_{constructor(t){super(t),"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,s=W_.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout((function(){e&&e(s),r.manager.itemEnd(t)}),0),s;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(t,o).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){W_.add(t,n),e&&e(n),r.manager.itemEnd(t)})).catch((function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}let xT;ET.prototype.isImageBitmapLoader=!0;const bT=function(){return void 0===xT&&(xT=new(window.AudioContext||window.webkitAudioContext)),xT};class IT extends q_{constructor(t){super(t)}load(t,e,n,i){const r=this,s=new K_(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){try{const t=n.slice(0);bT().decodeAudioData(t,(function(t){e(t)}))}catch(uJ){i?i(uJ):console.error(uJ),r.manager.itemError(t)}}),n,i)}}(class extends vT{constructor(t,e){super(void 0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1);const n=(new pd).set(t),i=(new pd).set(e),r=new Vu(n.r,n.g,n.b),s=new Vu(i.r,i.g,i.b),o=Math.sqrt(Math.PI),a=o*Math.sqrt(.75);this.sh.coefficients[0].copy(r).add(s).multiplyScalar(o),this.sh.coefficients[1].copy(r).sub(s).multiplyScalar(a)}}).prototype.isHemisphereLightProbe=!0;(class extends vT{constructor(t){super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1);const e=(new pd).set(t);this.sh.coefficients[0].set(e.r,e.g,e.b).multiplyScalar(2*Math.sqrt(Math.PI))}}).prototype.isAmbientLightProbe=!0;class wT{constructor(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ST(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=ST();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function ST(){return("undefined"===typeof performance?Date:performance).now()}class RT extends Zp{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}class CT{constructor(t,e,n){let i,r,s;switch(this.binding=t,this.valueSize=n,e){case"quaternion":i=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,i=this.valueSize,r=t*i+i;let s=this.cumulativeWeight;if(0===s){for(let t=0;t!==i;++t)n[r+t]=n[t];s=e}else{s+=e;const t=e/s;this._mixBufferRegion(n,r,0,t,i)}this.cumulativeWeight=s}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const t=e*this._origIndex;this._mixBufferRegion(n,i,t,1-r,e)}s>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let a=e,l=e+e;a!==l;++a)if(n[a]!==n[a+e]){o.setValue(n,i);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let r=n,s=i;r!==s;++r)e[r]=e[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,i,r){if(i>=.5)for(let s=0;s!==r;++s)t[e+s]=t[n+s]}_slerp(t,e,n,i){ju.slerpFlat(t,e,t,e,t,n,i)}_slerpAdditive(t,e,n,i,r){const s=this._workIndex*r;ju.multiplyQuaternionsFlat(t,s,t,e,t,n),ju.slerpFlat(t,e,t,e,t,s,i)}_lerp(t,e,n,i,r){const s=1-i;for(let o=0;o!==r;++o){const r=e+o;t[r]=t[r]*s+t[n+o]*i}}_lerpAdditive(t,e,n,i,r){for(let s=0;s!==r;++s){const r=e+s;t[r]=t[r]+t[n+s]*i}}}const AT="\\[\\]\\.:\\/",DT=new RegExp("["+AT+"]","g"),OT="[^"+AT+"]",NT="[^"+AT.replace("\\.","")+"]",MT=/((?:WC+[\/:])*)/.source.replace("WC",OT),PT=/(WCOD+)?/.source.replace("WCOD",NT),FT=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",OT),LT=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",OT),kT=new RegExp("^"+MT+PT+FT+LT+"$"),UT=["material","materials","bones"];class BT{constructor(t,e,n){this.path=e,this.parsedPath=n||BT.parseTrackName(e),this.node=BT.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new BT.Composite(t,e,n):new BT(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(DT,"")}static parseTrackName(t){const e=kT.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const t=n.nodeName.substring(i+1);-1!==UT.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const s=n(r.children);if(s)return s}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=BT.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===i){i=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==i){if(void 0===t[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[i]}}const s=t[i];if(void 0===s){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",t)}let o=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}a=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(a=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}BT.Composite=class{constructor(t,e,n){const i=n||BT.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},BT.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},BT.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},BT.prototype.GetterByBindingType=[BT.prototype._getValue_direct,BT.prototype._getValue_array,BT.prototype._getValue_arrayElement,BT.prototype._getValue_toArray],BT.prototype.SetterByBindingTypeAndVersioning=[[BT.prototype._setValue_direct,BT.prototype._setValue_direct_setNeedsUpdate,BT.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[BT.prototype._setValue_array,BT.prototype._setValue_array_setNeedsUpdate,BT.prototype._setValue_array_setMatrixWorldNeedsUpdate],[BT.prototype._setValue_arrayElement,BT.prototype._setValue_arrayElement_setNeedsUpdate,BT.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[BT.prototype._setValue_fromArray,BT.prototype._setValue_fromArray_setNeedsUpdate,BT.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class zT{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.blendMode;this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;const r=e.tracks,s=r.length,o=new Array(s),a={endingStart:Qc,endingEnd:Qc};for(let l=0;l!==s;++l){const t=r[l].createInterpolant(null);o[l]=t,t.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,i=t._clip.duration,r=i/n,s=n/i;t.warp(1,r,e),this.warp(s,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const i=this._mixer,r=i.time,s=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=r,a[1]=r+n,l[0]=t/s,l[1]=e/s,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,i){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const i=(t-r)*n;if(i<0||0===n)return;this._startTime=null,e=n*i}e*=this._updateTimeScale(t);const s=this._updateTime(e),o=this._updateWeight(t);if(o>0){const t=this._interpolants,e=this._propertyBindings;if(this.blendMode===eu)for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(s),e[n].accumulateAdditive(o);else for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(s),e[n].accumulate(i,o)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let i=this.time+t,r=this._loopCount;const s=2202===n;if(0===t)return-1===r?i:s&&1===(1&r)?e-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),i>=e||i<0){const n=Math.floor(i/e);i-=e*n,r+=Math.abs(n);const o=this.repetitions-r;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===o){const e=t<0;this._setEndings(e,!e,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(s&&1===(1&r))return e-i}return i}_setEndings(t,e,n){const i=this._interpolantSettings;n?(i.endingStart=Jc,i.endingEnd=Jc):(i.endingStart=t?this.zeroSlopeAtStart?Jc:Qc:$c,i.endingEnd=e?this.zeroSlopeAtEnd?Jc:Qc:$c)}_scheduleFading(t,e,n){const i=this._mixer,r=i.time;let s=this._weightInterpolant;null===s&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,a=s.sampleValues;return o[0]=r,a[0]=e,o[1]=r+t,a[1]=n,this}}(class extends yu{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,s=t._propertyBindings,o=t._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let h=l[a];void 0===h&&(h={},l[a]=h);for(let c=0;c!==r;++c){const t=i[c],r=t.name;let l=h[r];if(void 0!==l)s[c]=l;else{if(l=s[c],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,a,r));continue}const i=e&&e._propertyBindings[c].binding.parsedPath;l=new CT(BT.create(n,r,i),t.ValueTypeName,t.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,a,r),s[c]=l}o[c].resultBuffer=l.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const i=this._actions,r=this._actionsByClip;let s=r[e];if(void 0===s)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=s;else{const e=s.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=i.length,i.push(t),s.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,s=this._actionsByClip,o=s[r],a=o.knownActions,l=a[a.length-1],h=t._byClipCacheIndex;l._byClipCacheIndex=h,a[h]=l,a.pop(),t._byClipCacheIndex=null;delete o.actionByRoot[(t._localRoot||this._root).uuid],0===a.length&&delete s[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const t=e[n];0===--t.referenceCount&&this._removeInactiveBinding(t)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const i=this._bindingsByRootAndName,r=this._bindings;let s=i[e];void 0===s&&(s={},i[e]=s),s[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,o=s[i],a=e[e.length-1],l=t._cacheIndex;a._cacheIndex=l,e[l]=a,e.pop(),delete o[r],0===Object.keys(o).length&&delete s[i]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new M_(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const i=e||this._root,r=i.uuid;let s="string"===typeof t?j_.findByName(i,t):t;const o=null!==s?s.uuid:t,a=this._actionsByClip[o];let l=null;if(void 0===n&&(n=null!==s?s.blendMode:tu),void 0!==a){const t=a.actionByRoot[r];if(void 0!==t&&t.blendMode===n)return t;l=a.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const h=new zT(this,s,e,n);return this._bindAction(h,l),this._addInactiveAction(h,o,r),h}existingAction(t,e){const n=e||this._root,i=n.uuid,r="string"===typeof t?j_.findByName(n,t):t,s=r?r.uuid:t,o=this._actionsByClip[s];return void 0!==o&&o.actionByRoot[i]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),s=this._accuIndex^=1;for(let l=0;l!==n;++l){e[l]._update(i,t,r,s)}const o=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)o[l].apply(s);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const t=r.knownActions;for(let n=0,i=t.length;n!==i;++n){const i=t[n];this._deactivateAction(i);const r=i._cacheIndex,s=e[e.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,s._cacheIndex=r,e[r]=s,e.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const r in n){const t=n[r].actionByRoot[e];void 0!==t&&(this._deactivateAction(t),this._removeInactiveAction(t))}const i=this._bindingsByRootAndName[e];if(void 0!==i)for(const r in i){const t=i[r];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class GT{constructor(t){"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new GT(void 0===this.value.clone?this.value:this.value.clone())}}class HT extends ly{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(t,e),this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}HT.prototype.isInstancedInterleavedBuffer=!0;class jT{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new Tp(t,e),this.near=n,this.far=i,this.camera=null,this.layers=new Np,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return WT(t,this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),e.sort(VT),e}intersectObjects(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let i=0,r=t.length;i<r;i++)WT(t[i],this,n,e);return n.sort(VT),n}}function VT(t,e){return t.distance-e.distance}function WT(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i){const i=t.children;for(let t=0,r=i.length;t<r;t++)WT(i[t],e,n,!0)}}class ZT{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(bu(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const YT=new Du;class qT{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Du(1/0,1/0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Du(-1/0,-1/0);this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=YT.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return YT.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}qT.prototype.isBox2=!0;const XT=new Vu,KT=new Vu;class QT{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vu,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vu;this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){XT.subVectors(t,this.start),KT.subVectors(this.end,this.start);const n=KT.dot(KT);let i=KT.dot(XT)/n;return e&&(i=bu(i,0,1)),i}closestPointToPoint(t,e,n){const i=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const JT=new Vu,$T=new Ep,tE=new Ep;function eE(t){const e=[];t&&t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,eE(t.children[n]));return e}class nE extends $y{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new pd(n),i=new pd(i);const r=e/2,s=t/e,o=t/2,a=[],l=[];for(let c=0,u=0,p=-o;c<=e;c++,p+=s){a.push(-o,0,p,o,0,p),a.push(p,0,-o,p,0,o);const t=c===r?n:i;t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3}const h=new Rd;h.setAttribute("position",new _d(a,3)),h.setAttribute("color",new _d(l,3));super(h,new Vy({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}const iE=new Float32Array(1);new Int32Array(iE.buffer);yv.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(yv.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},kv.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)},nE.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends $y{constructor(t){const e=eE(t),n=new Rd,i=[],r=[],s=new pd(0,0,1),o=new pd(0,1,0);for(let a=0;a<e.length;a++){const t=e[a];t.parent&&t.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(s.r,s.g,s.b),r.push(o.r,o.g,o.b))}n.setAttribute("position",new _d(i,3)),n.setAttribute("color",new _d(r,3));super(n,new Vy({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,i=n.getAttribute("position");tE.copy(this.root.matrixWorld).invert();for(let r=0,s=0;r<e.length;r++){const t=e[r];t.parent&&t.parent.isBone&&($T.multiplyMatrices(tE,t.matrixWorld),JT.setFromMatrixPosition($T),i.setXYZ(s,JT.x,JT.y,JT.z),$T.multiplyMatrices(tE,t.parent.matrixWorld),JT.setFromMatrixPosition($T),i.setXYZ(s+1,JT.x,JT.y,JT.z),s+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},q_.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),_T.extractUrlBase(t)},q_.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},qT.prototype.center=function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},qT.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},qT.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},qT.prototype.size=function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)},Yu.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Yu.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Yu.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Yu.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},Yu.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},pp.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},uf.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},QT.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Ou.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},Ou.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},Ou.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Ou.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},Ou.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Ou.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},Ep.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},Ep.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},Ep.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Vu).setFromMatrixColumn(this,3)},Ep.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},Ep.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Ep.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Ep.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Ep.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Ep.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},Ep.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Ep.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Ep.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Ep.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Ep.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Ep.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Ep.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Ep.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Ep.prototype.makeFrustum=function(t,e,n,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,s)},Ep.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},lf.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},ju.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},ju.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Tp.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Tp.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},Tp.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},id.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},id.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},id.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},id.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},id.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},id.barycoordFromPoint=function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),id.getBarycoord(t,e,n,i,r)},id.normal=function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),id.getNormal(t,e,n,i)},Uv.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},Uv.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new d_(this,t)},Uv.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new g_(this,t)},Du.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Du.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Du.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Vu.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Vu.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Vu.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},Vu.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},Vu.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},Vu.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},Vu.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Vu.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Vu.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},zu.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},zu.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Zp.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},Zp.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Zp.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},Zp.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Zp.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Zp.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Wd.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Wd.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Ny.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},$d.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(tT.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(gd.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===mu},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(mu)}}}),gd.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?mu:fu),this},gd.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},gd.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Rd.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},Rd.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new gd(arguments[1],arguments[2])))},Rd.prototype.addDrawCall=function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},Rd.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Rd.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Rd.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},Rd.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Rd.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),ly.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?mu:fu),this},ly.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},d_.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},d_.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},d_.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},ay.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},GT.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(sd.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new pd}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Qd.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),ry.prototype.clearTarget=function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},ry.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},ry.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},ry.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},ry.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},ry.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},ry.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},ry.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},ry.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},ry.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},ry.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},ry.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},ry.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},ry.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},ry.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},ry.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},ry.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},ry.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},ry.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},ry.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},ry.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},ry.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},ry.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},ry.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},ry.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(ry.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?ru:iu}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Yg.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Gu.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),RT.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new IT).load(t,(function(t){e.setBuffer(t)})),this},ef.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},ef.prototype.clear=function(t,e,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,i)},Lu.crossOrigin=void 0,Lu.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new $_;r.setCrossOrigin(this.crossOrigin);const s=r.load(t,n,void 0,i);return e&&(s.mapping=e),s},Lu.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new J_;r.setCrossOrigin(this.crossOrigin);const s=r.load(t,n,void 0,i);return e&&(s.mapping=e),s},Lu.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Lu.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:wl}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=wl);const rE=new Vu,sE=new Vu,oE=new Vu,aE=new Du,lE=new Du,hE=new Du,cE=new Vu;function uE(t,e,n,i,r,s,o){rE.fromBufferAttribute(e,i),sE.fromBufferAttribute(e,r),oE.fromBufferAttribute(e,s);const a=function(t,e,n,i,r,s){let o;return o=s===Pl?t.intersectTriangle(i,n,e,!0,r):t.intersectTriangle(e,n,i,s!==Fl,r),null===o?null:{distance:t.origin.distanceTo(r),point:r.clone()}}(t,rE,sE,oE,cE,o);if(a){n&&(aE.fromBufferAttribute(n,i),lE.fromBufferAttribute(n,r),hE.fromBufferAttribute(n,s),a.uv=id.getUV(cE,rE,sE,oE,aE,lE,hE,new Du));const t={a:i,b:r,c:s,normal:new Vu,materialIndex:0};id.getNormal(rE,sE,oE,t.normal),a.face=t,a.faceIndex=i}return a}function pE(t,e,n,i,r){const s=3*i,o=t.index.getX(s),a=t.index.getX(s+1),l=t.index.getX(s+2),h=uE(n,t.attributes.position,t.attributes.uv,o,a,l,e);return h?(h.faceIndex=i,r&&r.push(h),h):null}function dE(t,e,n){return null===t?null:(t.point.applyMatrix4(e.matrixWorld),t.distance=t.point.distanceTo(n.ray.origin),t.object=e,t.distance<n.near||t.distance>n.far?null:t)}const fE=0,mE=1,gE=2,yE=2,vE=1.25,_E=1,TE=32,EE=65535,xE=Math.pow(2,-24);class bE{constructor(){}}function IE(t,e,n){return n.min.x=e[t],n.min.y=e[t+1],n.min.z=e[t+2],n.max.x=e[t+3],n.max.y=e[t+4],n.max.z=e[t+5],n}function wE(t){let e=-1,n=-1/0;for(let i=0;i<3;i++){const r=t[i+3]-t[i];r>n&&(n=r,e=i)}return e}function SE(t,e){e.set(t)}function RE(t,e,n){let i,r;for(let s=0;s<3;s++){const o=s+3;i=t[s],r=e[s],n[s]=i<r?i:r,i=t[o],r=e[o],n[o]=i>r?i:r}}function CE(t,e,n){for(let i=0;i<3;i++){const r=e[t+2*i],s=e[t+2*i+1],o=r-s,a=r+s;o<n[i]&&(n[i]=o),a>n[i+3]&&(n[i+3]=a)}}function AE(t){const e=t[3]-t[0],n=t[4]-t[1],i=t[5]-t[2];return 2*(e*n+n*i+i*e)}function DE(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=1/0,o=1/0,a=1/0,l=-1/0,h=-1/0,c=-1/0,u=1/0,p=1/0,d=1/0,f=-1/0,m=-1/0,g=-1/0;const y=null!==r;for(let v=6*e,_=6*(e+n);v<_;v+=6){const e=t[v+0],n=t[v+1],i=e-n,r=e+n;i<s&&(s=i),r>l&&(l=r),y&&e<u&&(u=e),y&&e>f&&(f=e);const _=t[v+2],T=t[v+3],E=_-T,x=_+T;E<o&&(o=E),x>h&&(h=x),y&&_<p&&(p=_),y&&_>m&&(m=_);const b=t[v+4],I=t[v+5],w=b-I,S=b+I;w<a&&(a=w),S>c&&(c=S),y&&b<d&&(d=b),y&&b>g&&(g=b)}i[0]=s,i[1]=o,i[2]=a,i[3]=l,i[4]=h,i[5]=c,y&&(r[0]=u,r[1]=p,r[2]=d,r[3]=f,r[4]=m,r[5]=g)}const OE=32,NE=(t,e)=>t.candidate-e.candidate,ME=new Array(OE).fill().map((()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0}))),PE=new Float32Array(6);function FE(t,e){function n(t){p&&p(t/d)}function i(e,r,p){let d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!f&&m>=l&&(f=!0,h&&(console.warn("MeshBVH: Max depth of ".concat(l," reached when generating BVH. Consider increasing maxDepth.")),console.warn(t))),p<=c||m>=l)return n(r+p),e.offset=r,e.count=p,e;const g=function(t,e,n,i,r,s){let o=-1,a=0;if(s===fE)o=wE(e),-1!==o&&(a=(e[o]+e[o+3])/2);else if(s===mE)o=wE(t),-1!==o&&(a=function(t,e,n,i){let r=0;for(let s=e,o=e+n;s<o;s++)r+=t[6*s+2*i];return r/n}(n,i,r,o));else if(s===gE){const s=AE(t);let l=vE*r;const h=6*i,c=6*(i+r);for(let t=0;t<3;t++){const i=e[t],u=(e[t+3]-i)/OE;if(r<OE/4){const e=[...ME];e.length=r;let i=0;for(let r=h;r<c;r+=6,i++){const s=e[i];s.candidate=n[r+2*t],s.count=0;const{bounds:o,leftCacheBounds:a,rightCacheBounds:l}=s;for(let t=0;t<3;t++)l[t]=1/0,l[t+3]=-1/0,a[t]=1/0,a[t+3]=-1/0,o[t]=1/0,o[t+3]=-1/0;CE(r,n,o)}e.sort(NE);let u=r;for(let t=0;t<u;t++){const n=e[t];for(;t+1<u&&e[t+1].candidate===n.candidate;)e.splice(t+1,1),u--}for(let r=h;r<c;r+=6){const i=n[r+2*t];for(let t=0;t<u;t++){const s=e[t];i>=s.candidate?CE(r,n,s.rightCacheBounds):(CE(r,n,s.leftCacheBounds),s.count++)}}for(let n=0;n<u;n++){const i=e[n],h=i.count,c=r-i.count,u=i.leftCacheBounds,p=i.rightCacheBounds;let d=0;0!==h&&(d=AE(u)/s);let f=0;0!==c&&(f=AE(p)/s);const m=_E+vE*(d*h+f*c);m<l&&(o=t,l=m,a=i.candidate)}}else{for(let t=0;t<OE;t++){const e=ME[t];e.count=0,e.candidate=i+u+t*u;const n=e.bounds;for(let t=0;t<3;t++)n[t]=1/0,n[t+3]=-1/0}for(let r=h;r<c;r+=6){let e=~~((n[r+2*t]-i)/u);e>=OE&&(e=OE-1);const s=ME[e];s.count++,CE(r,n,s.bounds)}const e=ME[OE-1];SE(e.bounds,e.rightCacheBounds);for(let t=OE-2;t>=0;t--){const e=ME[t],n=ME[t+1];RE(e.bounds,n.rightCacheBounds,e.rightCacheBounds)}let p=0;for(let n=0;n<OE-1;n++){const e=ME[n],i=e.count,h=e.bounds,c=ME[n+1].rightCacheBounds;0!==i&&(0===p?SE(h,PE):RE(h,PE,PE)),p+=i;let u=0,d=0;0!==p&&(u=AE(PE)/s);const f=r-p;0!==f&&(d=AE(c)/s);const m=_E+vE*(u*p+d*f);m<l&&(o=t,l=m,a=e.candidate)}}}}else console.warn("MeshBVH: Invalid build strategy value ".concat(s," used."));return{axis:o,pos:a}}(e.boundingData,d,o,r,p,u);if(-1===g.axis)return n(r+p),e.offset=r,e.count=p,e;const y=function(t,e,n,i,r){let s=n,o=n+i-1;const a=r.pos,l=2*r.axis;for(;;){for(;s<=o&&e[6*s+l]<a;)s++;for(;s<=o&&e[6*o+l]>=a;)o--;if(!(s<o))return s;for(let n=0;n<3;n++){let i=t[3*s+n];t[3*s+n]=t[3*o+n],t[3*o+n]=i;let r=e[6*s+2*n+0];e[6*s+2*n+0]=e[6*o+2*n+0],e[6*o+2*n+0]=r;let a=e[6*s+2*n+1];e[6*s+2*n+1]=e[6*o+2*n+1],e[6*o+2*n+1]=a}s++,o--}}(a,o,r,p,g);if(y===r||y===r+p)n(r+p),e.offset=r,e.count=p;else{e.splitAxis=g.axis;const t=new bE,n=r,a=y-r;e.left=t,t.boundingData=new Float32Array(6),DE(o,n,a,t.boundingData,s),i(t,n,a,s,m+1);const l=new bE,h=y,c=p-a;e.right=l,l.boundingData=new Float32Array(6),DE(o,h,c,l.boundingData,s),i(l,h,c,s,m+1)}return e}!function(t,e){if(!t.index){const n=t.attributes.position.count,i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;let r;r=n>65535?new Uint32Array(new i(4*n)):new Uint16Array(new i(2*n)),t.setIndex(new gd(r,1));for(let t=0;t<n;t++)r[t]=t}}(t,e);const r=new Float32Array(6),s=new Float32Array(6),o=function(t,e){const n=t.attributes.position,i=t.index.array,r=i.length/3,s=new Float32Array(6*r),o=n.normalized,a=n.array,l=n.offset||0;let h=3;n.isInterleavedBufferAttribute&&(h=n.data.stride);const c=["getX","getY","getZ"];for(let u=0;u<r;u++){const t=3*u,r=6*u;let p,d,f;o?(p=i[t+0],d=i[t+1],f=i[t+2]):(p=i[t+0]*h+l,d=i[t+1]*h+l,f=i[t+2]*h+l);for(let i=0;i<3;i++){let t,l,h;o?(t=n[c[i]](p),l=n[c[i]](d),h=n[c[i]](f)):(t=a[p+i],l=a[d+i],h=a[f+i]);let u=t;l<u&&(u=l),h<u&&(u=h);let m=t;l>m&&(m=l),h>m&&(m=h);const g=(m-u)/2,y=2*i;s[r+y+0]=u+g,s[r+y+1]=g+(Math.abs(u)+g)*xE,u<e[i]&&(e[i]=u),m>e[i+3]&&(e[i+3]=m)}}return s}(t,r),a=t.index.array,l=e.maxDepth,h=e.verbose,c=e.maxLeafTris,u=e.strategy,p=e.onProgress,d=t.index.count/3;let f=!1;const m=[],g=function(t){if(!t.groups||!t.groups.length)return[{offset:0,count:t.index.count/3}];const e=[],n=new Set;for(const r of t.groups)n.add(r.start),n.add(r.start+r.count);const i=Array.from(n.values()).sort(((t,e)=>t-e));for(let r=0;r<i.length-1;r++){const t=i[r],n=i[r+1];e.push({offset:t/3,count:(n-t)/3})}return e}(t);if(1===g.length){const t=g[0],e=new bE;e.boundingData=r,function(t,e,n,i){let r=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,h=-1/0;for(let c=6*e,u=6*(e+n);c<u;c+=6){const e=t[c+0];e<r&&(r=e),e>a&&(a=e);const n=t[c+2];n<s&&(s=n),n>l&&(l=n);const i=t[c+4];i<o&&(o=i),i>h&&(h=i)}i[0]=r,i[1]=s,i[2]=o,i[3]=a,i[4]=l,i[5]=h}(o,t.offset,t.count,s),i(e,t.offset,t.count,s),m.push(e)}else for(let y of g){const t=new bE;t.boundingData=new Float32Array(6),DE(o,y.offset,y.count,t.boundingData,s),i(t,y.offset,y.count,s),m.push(t)}return m}class LE{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(t,e){let n=1/0,i=-1/0;for(let r=0,s=t.length;r<s;r++){const s=t[r][e];n=s<n?s:n,i=s>i?s:i}this.min=n,this.max=i}setFromPoints(t,e){let n=1/0,i=-1/0;for(let r=0,s=e.length;r<s;r++){const s=e[r],o=t.dot(s);n=o<n?o:n,i=o>i?o:i}this.min=n,this.max=i}isSeparated(t){return this.min>t.max||t.min>this.max}}LE.prototype.setFromBox=function(){const t=new Vu;return function(e,n){const i=n.min,r=n.max;let s=1/0,o=-1/0;for(let a=0;a<=1;a++)for(let n=0;n<=1;n++)for(let l=0;l<=1;l++){t.x=i.x*a+r.x*(1-a),t.y=i.y*n+r.y*(1-n),t.z=i.z*l+r.z*(1-l);const h=e.dot(t);s=Math.min(h,s),o=Math.max(h,o)}this.min=s,this.max=o}}();!function(){const t=new LE}();const kE=function(){const t=new Vu,e=new Vu,n=new Vu;return function(i,r,s){const o=i.start,a=t,l=r.start,h=e;n.subVectors(o,l),t.subVectors(i.end,i.start),e.subVectors(r.end,r.start);const c=n.dot(h),u=h.dot(a),p=h.dot(h),d=n.dot(a),f=a.dot(a)*p-u*u;let m,g;m=0!==f?(c*u-d*p)/f:0,g=(c+m*u)/p,s.x=m,s.y=g}}(),UE=function(){const t=new Du,e=new Vu,n=new Vu;return function(i,r,s,o){kE(i,r,t);let a=t.x,l=t.y;if(a>=0&&a<=1&&l>=0&&l<=1)return i.at(a,s),void r.at(l,o);if(a>=0&&a<=1)return l<0?r.at(0,o):r.at(1,o),void i.closestPointToPoint(o,!0,s);if(l>=0&&l<=1)return a<0?i.at(0,s):i.at(1,s),void r.closestPointToPoint(s,!0,o);{let t,h;t=a<0?i.start:i.end,h=l<0?r.start:r.end;const c=e,u=n;return i.closestPointToPoint(h,!0,e),r.closestPointToPoint(t,!0,n),c.distanceToSquared(h)<=u.distanceToSquared(t)?(s.copy(c),void o.copy(h)):(s.copy(t),void o.copy(u))}}}(),BE=function(){const t=new Vu,e=new Vu,n=new lf,i=new QT;return function(r,s){const{radius:o,center:a}=r,{a:l,b:h,c:c}=s;i.start=l,i.end=h;if(i.closestPointToPoint(a,!0,t).distanceTo(a)<=o)return!0;i.start=l,i.end=c;if(i.closestPointToPoint(a,!0,t).distanceTo(a)<=o)return!0;i.start=h,i.end=c;if(i.closestPointToPoint(a,!0,t).distanceTo(a)<=o)return!0;const u=s.getPlane(n);if(Math.abs(u.distanceToPoint(a))<=o){const t=u.projectPoint(a,e);if(s.containsPoint(t))return!0}return!1}}(),zE=1e-15;function GE(t){return Math.abs(t)<zE}class HE extends id{constructor(){super(...arguments),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map((()=>new Vu)),this.satBounds=new Array(4).fill().map((()=>new LE)),this.points=[this.a,this.b,this.c],this.sphere=new pp,this.plane=new lf,this.needsUpdate=!0}intersectsSphere(t){return BE(t,this)}update(){const t=this.a,e=this.b,n=this.c,i=this.points,r=this.satAxes,s=this.satBounds,o=r[0],a=s[0];this.getNormal(o),a.setFromPoints(o,i);const l=r[1],h=s[1];l.subVectors(t,e),h.setFromPoints(l,i);const c=r[2],u=s[2];c.subVectors(e,n),u.setFromPoints(c,i);const p=r[3],d=s[3];p.subVectors(n,t),d.setFromPoints(p,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(o,t),this.needsUpdate=!1}}HE.prototype.closestPointToSegment=function(){const t=new Vu,e=new Vu,n=new QT;return function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{start:o,end:a}=i,l=this.points;let h,c=1/0;for(let u=0;u<3;u++){const o=(u+1)%3;n.start.copy(l[u]),n.end.copy(l[o]),UE(n,i,t,e),h=t.distanceToSquared(e),h<c&&(c=h,r&&r.copy(t),s&&s.copy(e))}return this.closestPointToPoint(o,t),h=o.distanceToSquared(t),h<c&&(c=h,r&&r.copy(t),s&&s.copy(o)),this.closestPointToPoint(a,t),h=a.distanceToSquared(t),h<c&&(c=h,r&&r.copy(t),s&&s.copy(a)),Math.sqrt(c)}}(),HE.prototype.intersectsTriangle=function(){const t=new HE,e=new Array(3),n=new Array(3),i=new LE,r=new LE,s=new Vu,o=new Vu,a=new Vu,l=new Vu,h=new QT,c=new QT,u=new QT;return function(p){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,f=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.needsUpdate&&this.update(),p.isExtendedTriangle?p.needsUpdate&&p.update():(t.copy(p),t.update(),p=t);const m=this.plane,g=p.plane;if(Math.abs(m.normal.dot(g.normal))>1-1e-10){const t=this.satBounds,o=this.satAxes;n[0]=p.a,n[1]=p.b,n[2]=p.c;for(let e=0;e<4;e++){const r=t[e],s=o[e];if(i.setFromPoints(s,n),r.isSeparated(i))return!1}const a=p.satBounds,l=p.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let n=0;n<4;n++){const t=a[n],r=l[n];if(i.setFromPoints(r,e),t.isSeparated(i))return!1}for(let h=0;h<4;h++){const t=o[h];for(let o=0;o<4;o++){const a=l[o];if(s.crossVectors(t,a),i.setFromPoints(s,e),r.setFromPoints(s,n),i.isSeparated(r))return!1}}return d&&(f||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),d.start.set(0,0,0),d.end.set(0,0,0)),!0}{const t=this.points;let e=!1,n=0;for(let a=0;a<3;a++){const i=t[a],r=t[(a+1)%3];h.start.copy(i),h.end.copy(r),h.delta(o);const s=e?c.start:c.end,l=GE(g.distanceToPoint(i));if(GE(g.normal.dot(o))&&l){c.copy(h),n=2;break}if((g.intersectLine(h,s)||l)&&!GE(s.distanceTo(r))){if(n++,e)break;e=!0}}if(1===n&&p.containsPoint(c.end))return d&&(d.start.copy(c.end),d.end.copy(c.end)),!0;if(2!==n)return!1;const i=p.points;let r=!1,s=0;for(let o=0;o<3;o++){const t=i[o],e=i[(o+1)%3];h.start.copy(t),h.end.copy(e),h.delta(a);const n=r?u.start:u.end,l=GE(m.distanceToPoint(t));if(GE(m.normal.dot(a))&&l){u.copy(h),s=2;break}if((m.intersectLine(h,n)||l)&&!GE(n.distanceTo(e))){if(s++,r)break;r=!0}}if(1===s&&this.containsPoint(u.end))return d&&(d.start.copy(u.end),d.end.copy(u.end)),!0;if(2!==s)return!1;if(c.delta(o),u.delta(a),o.dot(a)<0){let t=u.start;u.start=u.end,u.end=t}const f=c.start.dot(o),y=c.end.dot(o),v=u.start.dot(o),_=u.end.dot(o);return(f===_||v===y||y<v!==f<_)&&(d&&(l.subVectors(c.start,u.start),l.dot(o)>0?d.start.copy(c.start):d.start.copy(u.start),l.subVectors(c.end,u.end),l.dot(o)<0?d.end.copy(c.end):d.end.copy(u.end)),!0)}}}(),HE.prototype.distanceToPoint=function(){const t=new Vu;return function(e){return this.closestPointToPoint(e,t),e.distanceTo(t)}}(),HE.prototype.distanceToTriangle=function(){const t=new Vu,e=new Vu,n=["a","b","c"],i=new QT,r=new QT;return function(s){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const l=o||a?i:null;if(this.intersectsTriangle(s,l))return(o||a)&&(o&&l.getCenter(o),a&&l.getCenter(a)),0;let h=1/0;for(let e=0;e<3;e++){let i;const r=n[e],l=s[r];this.closestPointToPoint(l,t),i=l.distanceToSquared(t),i<h&&(h=i,o&&o.copy(t),a&&a.copy(l));const c=this[r];s.closestPointToPoint(c,t),i=c.distanceToSquared(t),i<h&&(h=i,o&&o.copy(c),a&&a.copy(t))}for(let c=0;c<3;c++){const l=n[c],u=n[(c+1)%3];i.set(this[l],this[u]);for(let c=0;c<3;c++){const l=n[c],u=n[(c+1)%3];r.set(s[l],s[u]),UE(i,r,t,e);const p=t.distanceToSquared(e);p<h&&(h=p,o&&o.copy(t),a&&a.copy(e))}}return Math.sqrt(h)}}();class jE{constructor(t,e,n){this.isOrientedBox=!0,this.min=new Vu,this.max=new Vu,this.matrix=new Ep,this.invMatrix=new Ep,this.points=new Array(8).fill().map((()=>new Vu)),this.satAxes=new Array(3).fill().map((()=>new Vu)),this.satBounds=new Array(3).fill().map((()=>new LE)),this.alignedSatBounds=new Array(3).fill().map((()=>new LE)),this.needsUpdate=!1,t&&this.min.copy(t),e&&this.max.copy(e),n&&this.matrix.copy(n)}set(t,e,n){this.min.copy(t),this.max.copy(e),this.matrix.copy(n),this.needsUpdate=!0}copy(t){this.min.copy(t.min),this.max.copy(t.max),this.matrix.copy(t.matrix),this.needsUpdate=!0}}function VE(t,e,n,i){const r=t.a,s=t.b,o=t.c;let a=e,l=e+1,h=e+2;n&&(a=n.getX(e),l=n.getX(e+1),h=n.getX(e+2)),r.x=i.getX(a),r.y=i.getY(a),r.z=i.getZ(a),s.x=i.getX(l),s.y=i.getY(l),s.z=i.getZ(l),o.x=i.getX(h),o.y=i.getY(h),o.z=i.getZ(h)}function WE(t,e,n,i,r,s,o){const a=n.index,l=n.attributes.position;for(let h=t,c=e+t;h<c;h++)if(VE(o,3*h,a,l),o.needsUpdate=!0,i(o,h,r,s))return!0;return!1}jE.prototype.update=function(){const t=this.matrix,e=this.min,n=this.max,i=this.points;for(let l=0;l<=1;l++)for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){const o=i[1*l|2*r|4*s];o.x=l?n.x:e.x,o.y=r?n.y:e.y,o.z=s?n.z:e.z,o.applyMatrix4(t)}const r=this.satBounds,s=this.satAxes,o=i[0];for(let l=0;l<3;l++){const t=s[l],e=r[l],n=i[1<<l];t.subVectors(o,n),e.setFromPoints(t,i)}const a=this.alignedSatBounds;a[0].setFromPointsField(i,"x"),a[1].setFromPointsField(i,"y"),a[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1},jE.prototype.intersectsBox=function(){const t=new LE;return function(e){this.needsUpdate&&this.update();const n=e.min,i=e.max,r=this.satBounds,s=this.satAxes,o=this.alignedSatBounds;if(t.min=n.x,t.max=i.x,o[0].isSeparated(t))return!1;if(t.min=n.y,t.max=i.y,o[1].isSeparated(t))return!1;if(t.min=n.z,t.max=i.z,o[2].isSeparated(t))return!1;for(let a=0;a<3;a++){const n=s[a],i=r[a];if(t.setFromBox(n,e),i.isSeparated(t))return!1}return!0}}(),jE.prototype.intersectsTriangle=function(){const t=new HE,e=new Array(3),n=new LE,i=new LE,r=new Vu;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(t.copy(s),t.update(),s=t);const o=this.satBounds,a=this.satAxes;e[0]=s.a,e[1]=s.b,e[2]=s.c;for(let t=0;t<3;t++){const i=o[t],r=a[t];if(n.setFromPoints(r,e),i.isSeparated(n))return!1}const l=s.satBounds,h=s.satAxes,c=this.points;for(let t=0;t<3;t++){const e=l[t],i=h[t];if(n.setFromPoints(i,c),e.isSeparated(n))return!1}for(let t=0;t<3;t++){const s=a[t];for(let t=0;t<4;t++){const o=h[t];if(r.crossVectors(s,o),n.setFromPoints(r,e),i.setFromPoints(r,c),n.isSeparated(i))return!1}}return!0}}(),jE.prototype.closestPointToPoint=function(t,e){return this.needsUpdate&&this.update(),e.copy(t).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),e},jE.prototype.distanceToPoint=function(){const t=new Vu;return function(e){return this.closestPointToPoint(e,t),e.distanceTo(t)}}(),jE.prototype.distanceToBox=function(){const t=["x","y","z"],e=new Array(12).fill().map((()=>new QT)),n=new Array(12).fill().map((()=>new QT)),i=new Vu,r=new Vu;return function(s){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(a||l)&&(s.getCenter(r),this.closestPointToPoint(r,i),s.closestPointToPoint(i,r),a&&a.copy(i),l&&l.copy(r)),0;const h=o*o,c=s.min,u=s.max,p=this.points;let d=1/0;for(let t=0;t<8;t++){const e=p[t];r.copy(e).clamp(c,u);const n=e.distanceToSquared(r);if(n<d&&(d=n,a&&a.copy(e),l&&l.copy(r),n<h))return Math.sqrt(n)}let f=0;for(let i=0;i<3;i++)for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){const o=(i+1)%3,a=(i+2)%3,l=1<<i|r<<o|s<<a,h=p[r<<o|s<<a],d=p[l];e[f].set(h,d);const m=t[i],g=t[o],y=t[a],v=n[f],_=v.start,T=v.end;_[m]=c[m],_[g]=r?c[g]:u[g],_[y]=s?c[y]:u[g],T[m]=u[m],T[g]=r?c[g]:u[g],T[y]=s?c[y]:u[g],f++}for(let t=0;t<=1;t++)for(let e=0;e<=1;e++)for(let n=0;n<=1;n++){r.x=t?u.x:c.x,r.y=e?u.y:c.y,r.z=n?u.z:c.z,this.closestPointToPoint(r,i);const s=r.distanceToSquared(i);if(s<d&&(d=s,a&&a.copy(i),l&&l.copy(r),s<h))return Math.sqrt(s)}for(let t=0;t<12;t++){const s=e[t];for(let t=0;t<12;t++){const e=n[t];UE(s,e,i,r);const o=i.distanceToSquared(r);if(o<d&&(d=o,a&&a.copy(i),l&&l.copy(r),o<h))return Math.sqrt(o)}}return Math.sqrt(d)}}();class ZE{constructor(t){this._getNewPrimitive=t,this._primitives=[]}getPrimitive(){const t=this._primitives;return 0===t.length?this._getNewPrimitive():t.pop()}releasePrimitive(t){this._primitives.push(t)}}function YE(t,e){return 65535===e[t+15]}function qE(t,e){return e[t+6]}function XE(t,e){return e[t+14]}function KE(t){return t+8}function QE(t,e){return e[t+6]}const JE=new Yu,$E=new Vu,tx=["x","y","z"];function ex(t,e,n,i,r){let s=2*t,o=lx,a=hx,l=cx;if(YE(s,a)){!function(t,e,n,i,r,s){for(let o=i,a=i+r;o<a;o++)pE(t,e,n,o,s)}(e,n,i,qE(t,l),XE(s,a),r)}else{const s=KE(t);sx(s,o,i,$E)&&ex(s,e,n,i,r);const a=QE(t,l);sx(a,o,i,$E)&&ex(a,e,n,i,r)}}function nx(t,e,n,i){let r=2*t,s=lx,o=hx,a=cx;if(YE(r,o)){return function(t,e,n,i,r){let s=1/0,o=null;for(let a=i,l=i+r;a<l;a++){const i=pE(t,e,n,a);i&&i.distance<s&&(o=i,s=i.distance)}return o}(e,n,i,qE(t,a),XE(r,o))}{const r=function(t,e){return e[t+7]}(t,a),o=tx[r],l=i.direction[o]>=0;let h,c;l?(h=KE(t),c=QE(t,a)):(h=QE(t,a),c=KE(t));const u=sx(h,s,i,$E)?nx(h,e,n,i):null;if(u){const t=u.point[o];if(l?t<=s[c+r]:t>=s[c+r+3])return u}const p=sx(c,s,i,$E)?nx(c,e,n,i):null;return u&&p?u.distance<=p.distance?u:p:u||p||null}}const ix=function(){let t,e;const n=[],i=new ZE((()=>new Yu));return function(){t=i.getPrimitive(),e=i.getPrimitive(),n.push(t,e);const s=r(...arguments);i.releasePrimitive(t),i.releasePrimitive(e),n.pop(),n.pop();const o=n.length;return o>0&&(e=n[o-1],t=n[o-2]),s};function r(n,i,s,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;function c(t){let e=2*t,n=hx,i=cx;for(;!YE(e,n);)e=2*(t=KE(t));return qE(t,i)}function u(t){let e=2*t,n=hx,i=cx;for(;!YE(e,n);)e=2*(t=QE(t,i));return qE(t,i)+XE(e,n)}let p=2*n,d=lx,f=hx,m=cx;if(YE(p,f)){const e=qE(n,m),i=XE(p,f);return IE(n,d,t),o(e,i,!1,h,l+n,t)}{const p=KE(n),g=QE(n,m);let y,v,_,T,E=p,x=g;if(a&&(_=t,T=e,IE(E,d,_),IE(x,d,T),y=a(_),v=a(T),v<y)){E=g,x=p;const t=y;y=v,v=t,_=T}_||(_=t,IE(E,d,_));const b=s(_,YE(2*E,f),y,h+1,l+E);let I;if(b===yE){const t=c(E);I=o(t,u(E)-t,!0,h+1,l+E,_)}else I=b&&r(E,i,s,o,a,l,h+1);if(I)return!0;T=e,IE(x,d,T);const w=s(T,YE(2*x,f),v,h+1,l+x);let S;if(w===yE){const t=c(x);S=o(t,u(x)-t,!0,h+1,l+x,T)}else S=w&&r(x,i,s,o,a,l,h+1);return!!S}}}(),rx=function(){const t=new HE,e=new HE,n=new Ep,i=new jE,r=new jE;return function s(o,a,l,h){let c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=2*o,p=lx,d=hx,f=cx;null===c&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,h),c=i);if(!YE(u,d)){const t=o+8,e=f[o+6];IE(t,p,JE);if(c.intersectsBox(JE)&&s(t,a,l,h,c))return!0;IE(e,p,JE);return!!(c.intersectsBox(JE)&&s(e,a,l,h,c))}{const i=a,s=i.index,c=i.attributes.position,m=l.index,g=l.attributes.position,y=qE(o,f),v=XE(u,d);if(n.copy(h).invert(),l.boundsTree){IE(o,p,r),r.matrix.copy(n),r.needsUpdate=!0;const t=l.boundsTree.shapecast({intersectsBounds:t=>r.intersectsBox(t),intersectsTriangle:t=>{t.a.applyMatrix4(h),t.b.applyMatrix4(h),t.c.applyMatrix4(h),t.needsUpdate=!0;for(let n=3*y,i=3*(v+y);n<i;n+=3)if(VE(e,n,s,c),e.needsUpdate=!0,t.intersectsTriangle(e))return!0;return!1}});return t}for(let r=3*y,o=v+3*y;r<o;r+=3){VE(t,r,s,c),t.a.applyMatrix4(n),t.b.applyMatrix4(n),t.c.applyMatrix4(n),t.needsUpdate=!0;for(let n=0,i=m.count;n<i;n+=3)if(VE(e,n,m,g),e.needsUpdate=!0,t.intersectsTriangle(e))return!0}}}}();function sx(t,e,n,i){return IE(t,e,JE),n.intersectBox(JE,i)}const ox=[];let ax,lx,hx,cx;function ux(t){ax&&ox.push(ax),ax=t,lx=new Float32Array(t),hx=new Uint16Array(t),cx=new Uint32Array(t)}function px(){ax=null,lx=null,hx=null,cx=null,ox.length&&ux(ox.pop())}const dx=Symbol("skip tree generation"),fx=new Yu,mx=new Yu,gx=new Ep,yx=new jE,vx=new jE,_x=new Vu,Tx=new Vu,Ex=new Vu,xx=new Vu,bx=new Vu,Ix=new Yu,wx=new ZE((()=>new HE));class Sx{static serialize(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),Sx.serialize(arguments[0],{cloneBuffers:void 0===arguments[2]||arguments[2]});e={cloneBuffers:!0,...e};const n=t.geometry,i=t._roots,r=n.getIndex();let s;return s=e.cloneBuffers?{roots:i.map((t=>t.slice())),index:r.array.slice()}:{roots:i,index:r.array},s}static deserialize(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("boolean"===typeof n)return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),Sx.deserialize(arguments[0],arguments[1],{setIndex:void 0===arguments[2]||arguments[2]});n={setIndex:!0,...n};const{index:i,roots:r}=t,s=new Sx(e,{...n,[dx]:!0});if(s._roots=r,n.setIndex){const n=e.getIndex();if(null===n){const n=new gd(t.index,1,!1);e.setIndex(n)}else n.array!==i&&(n.array.set(i),n.needsUpdate=!0)}return s}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.isBufferGeometry)throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t.index&&t.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.");if(e=Object.assign({strategy:fE,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[dx]:!1},e),e.useSharedArrayBuffer&&"undefined"===typeof SharedArrayBuffer)throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,e[dx]||(this._roots=function(t,e){const n=FE(t,e);let i,r,s;const o=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let c=0;c<n.length;c++){const t=n[c];let e=l(t);const u=new a(TE*e);i=new Float32Array(u),r=new Uint32Array(u),s=new Uint16Array(u),h(0,t),o.push(u)}return o;function l(t){return t.count?1:1+l(t.left)+l(t.right)}function h(t,e){const n=t/4,o=t/2,a=!!e.count,l=e.boundingData;for(let r=0;r<6;r++)i[n+r]=l[r];if(a){const i=e.offset,a=e.count;return r[n+6]=i,s[o+14]=a,s[o+15]=EE,t+TE}{const i=e.left,s=e.right,o=e.splitAxis;let a;if(a=h(t+TE,i),a/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return r[n+6]=a/4,a=h(a,s),r[n+7]=o,a}}}(t,e),!t.boundingBox&&e.setBoundingBox&&(t.boundingBox=this.getBoundingBox(new Yu))),this.geometry=t}refit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&Array.isArray(t)&&(t=new Set(t));const e=this.geometry,n=e.index.array,i=e.attributes.position;let r,s,o,a,l=0;const h=this._roots;for(let u=0,p=h.length;u<p;u++)r=h[u],s=new Uint32Array(r),o=new Uint16Array(r),a=new Float32Array(r),c(0,l),l+=r.byteLength;function c(e,r){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const h=2*e;if(o[h+15]===EE){const t=s[e+6];let r=1/0,l=1/0,c=1/0,u=-1/0,p=-1/0,d=-1/0;for(let e=3*t,s=3*(t+o[h+14]);e<s;e++){const t=n[e],s=i.getX(t),o=i.getY(t),a=i.getZ(t);s<r&&(r=s),s>u&&(u=s),o<l&&(l=o),o>p&&(p=o),a<c&&(c=a),a>d&&(d=a)}return(a[e+0]!==r||a[e+1]!==l||a[e+2]!==c||a[e+3]!==u||a[e+4]!==p||a[e+5]!==d)&&(a[e+0]=r,a[e+1]=l,a[e+2]=c,a[e+3]=u,a[e+4]=p,a[e+5]=d,!0)}{const n=e+8,i=s[e+6],o=n+r,h=i+r;let u=l,p=!1,d=!1;t?u||(p=t.has(o),d=t.has(h),u=!p&&!d):(p=!0,d=!0);const f=u||d;let m=!1;(u||p)&&(m=c(n,r,u));let g=!1;f&&(g=c(i,r,u));const y=m||g;if(y)for(let t=0;t<3;t++){const r=n+t,s=i+t,o=a[r],l=a[r+3],h=a[s],c=a[s+3];a[e+t]=o<h?o:h,a[e+t+3]=l>c?l:c}return y}}}traverse(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this._roots[e],i=new Uint32Array(n),r=new Uint16Array(n);!function e(s){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=2*s,l=r[a+15]===EE;if(l){const e=i[s+6],h=r[a+14];t(o,l,new Float32Array(n,4*s,6),e,h)}else{const r=s+TE/4,a=i[s+6],h=i[s+7];t(o,l,new Float32Array(n,4*s,6),h)||(e(r,o+1),e(a,o+1))}}(0)}raycast(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ml;const n=this._roots,i=this.geometry,r=[],s=e.isMaterial,o=Array.isArray(e),a=i.groups,l=s?e.side:e;for(let h=0,c=n.length;h<c;h++){const s=o?e[a[h].materialIndex].side:l,c=r.length;if(ux(n[h]),ex(0,i,s,t,r),px(),o){const t=a[h].materialIndex;for(let e=c,n=r.length;e<n;e++)r[e].face.materialIndex=t}}return r}raycastFirst(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ml;const n=this._roots,i=this.geometry,r=e.isMaterial,s=Array.isArray(e);let o=null;const a=i.groups,l=r?e.side:e;for(let h=0,c=n.length;h<c;h++){const r=s?e[a[h].materialIndex].side:l;ux(n[h]);const c=nx(0,i,r,t);px(),null!=c&&(null==o||c.distance<o.distance)&&(o=c,s&&(c.face.materialIndex=a[h].materialIndex))}return o}intersectsGeometry(t,e){const n=this.geometry;let i=!1;for(const r of this._roots)if(ux(r),i=rx(0,n,t,e),px(),i)break;return i}shapecast(t,e,n){const i=this.geometry;if(t instanceof Function){if(e){const t=e;e=(e,n,i,r)=>{const s=3*n;return t(e,s,s+1,s+2,i,r)}}t={boundsTraverseOrder:n,intersectsBounds:t,intersectsTriangle:e,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}const r=wx.getPrimitive();let{boundsTraverseOrder:s,intersectsBounds:o,intersectsRange:a,intersectsTriangle:l}=t;if(a&&l){const t=a;a=(e,n,s,o,a)=>!!t(e,n,s,o,a)||WE(e,n,i,l,s,o,r)}else a||(a=l?(t,e,n,s)=>WE(t,e,i,l,n,s,r):(t,e,n)=>n);let h=!1,c=0;for(const u of this._roots){if(ux(u),h=ix(0,i,o,a,s,c),px(),h)break;c+=u.byteLength}return wx.releasePrimitive(r),h}bvhcast(t,e,n){let{intersectsRanges:i,intersectsTriangles:r}=n;const s=this.geometry.index,o=this.geometry.attributes.position,a=t.geometry.index,l=t.geometry.attributes.position;gx.copy(e).invert();const h=wx.getPrimitive(),c=wx.getPrimitive();if(r){function p(t,n,i,u,p,d,f,m){for(let g=i,y=i+u;g<y;g++){VE(c,3*g,a,l),c.a.applyMatrix4(e),c.b.applyMatrix4(e),c.c.applyMatrix4(e),c.needsUpdate=!0;for(let e=t,i=t+n;e<i;e++)if(VE(h,3*e,s,o),h.needsUpdate=!0,r(h,c,e,g,p,d,f,m))return!0}return!1}if(i){const d=i;i=function(t,e,n,i,r,s,o,a){return!!d(t,e,n,i,r,s,o,a)||p(t,e,n,i,r,s,o,a)}}else i=p}t.getBoundingBox(mx),mx.applyMatrix4(e);const u=this.shapecast({intersectsBounds:t=>mx.intersectsBox(t),intersectsRange:(e,n,r,s,o,a)=>(fx.copy(a),fx.applyMatrix4(gx),t.shapecast({intersectsBounds:t=>fx.intersectsBox(t),intersectsRange:(t,r,a,l,h)=>i(e,n,t,r,s,o,l,h)}))});return wx.releasePrimitive(h),wx.releasePrimitive(c),u}intersectsBox(t,e){return yx.set(t.min,t.max,e),yx.needsUpdate=!0,this.shapecast({intersectsBounds:t=>yx.intersectsBox(t),intersectsTriangle:t=>yx.intersectsTriangle(t)})}intersectsSphere(t){return this.shapecast({intersectsBounds:e=>t.intersectsBox(e),intersectsTriangle:e=>e.intersectsSphere(t)})}closestPointToGeometry(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0;t.boundingBox||t.computeBoundingBox(),yx.set(t.boundingBox.min,t.boundingBox.max,e),yx.needsUpdate=!0;const o=this.geometry,a=o.attributes.position,l=o.index,h=t.attributes.position,c=t.index,u=wx.getPrimitive(),p=wx.getPrimitive();let d=Tx,f=Ex,m=null,g=null;i&&(m=xx,g=bx);let y=1/0,v=null,_=null;return gx.copy(e).invert(),vx.matrix.copy(gx),this.shapecast({boundsTraverseOrder:t=>yx.distanceToBox(t),intersectsBounds:(t,e,n)=>n<y&&n<s&&(e&&(vx.min.copy(t.min),vx.max.copy(t.max),vx.needsUpdate=!0),!0),intersectsRange:(n,i)=>{if(t.boundsTree)return t.boundsTree.shapecast({boundsTraverseOrder:t=>vx.distanceToBox(t),intersectsBounds:(t,e,n)=>n<y&&n<s,intersectsRange:(t,s)=>{for(let o=3*t,T=3*(t+s);o<T;o+=3){VE(p,o,c,h),p.a.applyMatrix4(e),p.b.applyMatrix4(e),p.c.applyMatrix4(e),p.needsUpdate=!0;for(let t=3*n,e=3*(n+i);t<e;t+=3){VE(u,t,l,a),u.needsUpdate=!0;const e=u.distanceToTriangle(p,d,m);if(e<y&&(f.copy(d),g&&g.copy(m),y=e,v=t/3,_=o/3),e<r)return!0}}}});for(let t=0,s=c?c.count:h.count;t<s;t+=3){VE(p,t,c,h),p.a.applyMatrix4(e),p.b.applyMatrix4(e),p.c.applyMatrix4(e),p.needsUpdate=!0;for(let e=3*n,s=3*(n+i);e<s;e+=3){VE(u,e,l,a),u.needsUpdate=!0;const n=u.distanceToTriangle(p,d,m);if(n<y&&(f.copy(d),g&&g.copy(m),y=n,v=e/3,_=t/3),n<r)return!0}}}}),wx.releasePrimitive(u),wx.releasePrimitive(p),y===1/0?null:(n.point?n.point.copy(f):n.point=f.clone(),n.distance=y,n.faceIndex=v,i&&(i.point?i.point.copy(g):i.point=g.clone(),i.point.applyMatrix4(gx),f.applyMatrix4(gx),i.distance=f.sub(i.point).length(),i.faceIndex=_),n)}closestPointToPoint(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const r=n*n,s=i*i;let o=1/0,a=null;if(this.shapecast({boundsTraverseOrder:e=>(_x.copy(t).clamp(e.min,e.max),_x.distanceToSquared(t)),intersectsBounds:(t,e,n)=>n<o&&n<s,intersectsTriangle:(e,n)=>{e.closestPointToPoint(t,_x);const i=t.distanceToSquared(_x);return i<o&&(Tx.copy(_x),o=i,a=n),i<r}}),o===1/0)return null;const l=Math.sqrt(o);return e.point?e.point.copy(Tx):e.point=Tx.clone(),e.distance=l,e.faceIndex=a,e}getBoundingBox(t){t.makeEmpty();return this._roots.forEach((e=>{IE(0,new Float32Array(e),Ix),t.union(Ix)})),t}}const Rx=new Tp,Cx=new Ep,Ax=Wd.prototype.raycast;function Dx(t,e){if(this.geometry.boundsTree){if(void 0===this.material)return;Cx.copy(this.matrixWorld).invert(),Rx.copy(t.ray).applyMatrix4(Cx);const n=this.geometry.boundsTree;if(!0===t.firstHitOnly){const i=dE(n.raycastFirst(Rx,this.material),this,t);i&&e.push(i)}else{const i=n.raycast(Rx,this.material);for(let n=0,r=i.length;n<r;n++){const r=dE(i[n],this,t);r&&e.push(r)}}}else Ax.call(this,t,e)}function Ox(t){return this.boundsTree=new Sx(this,t),this.boundsTree}function Nx(){this.boundsTree=null}class Mx{constructor(){this.trigger=t=>{this.handlers.slice(0).forEach((e=>e(t)))},this.handlers=[]}on(t){this.handlers.push(t)}off(t){this.handlers=this.handlers.filter((e=>e!==t))}reset(){this.handlers.length=0}}const Px=1,Fx=2,Lx=4,kx=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768});function Ux(t){return t.isPerspectiveCamera}function Bx(t){return t.isOrthographicCamera}const zx=2*Math.PI,Gx=Math.PI/2,Hx=1e-5;function jx(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hx;return Math.abs(t)<e}function Vx(t,e){return jx(t-e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hx)}function Wx(t,e){return Math.round(t/e)*e}function Zx(t){return isFinite(t)?t:t<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Yx(t){return Math.abs(t)<Number.MAX_VALUE?t:t*(1/0)}function qx(t,e){e.set(0,0),t.forEach((t=>{e.x+=t.clientX,e.y+=t.clientY})),e.x/=t.length,e.y/=t.length}function Xx(t,e){return!!Bx(t)&&(console.warn("".concat(e," is not supported in OrthographicCamera")),!0)}function Kx(t){return t.invert?t.invert():t.inverse(),t}class Qx{constructor(){this._listeners={}}addEventListener(t,e){const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}removeAllEventListeners(t){t?Array.isArray(this._listeners[t])&&(this._listeners[t].length=0):this._listeners={}}dispatchEvent(t){const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t)}}}const Jx=1/8,$x="undefined"!==typeof window,tb=$x&&/Mac/.test(navigator.platform),eb=!($x&&"PointerEvent"in window);let nb,ib,rb,sb,ob,ab,lb,hb,cb,ub,pb,db,fb,mb,gb,yb,vb,_b,Tb,Eb,xb,bb;class Ib extends Qx{static install(t){nb=t.THREE,ib=Object.freeze(new nb.Vector3(0,0,0)),rb=Object.freeze(new nb.Vector3(0,1,0)),sb=Object.freeze(new nb.Vector3(0,0,1)),ob=new nb.Vector2,ab=new nb.Vector3,lb=new nb.Vector3,hb=new nb.Vector3,cb=new nb.Vector3,ub=new nb.Vector3,pb=new nb.Vector3,db=new nb.Vector3,fb=new nb.Vector3,mb=new nb.Spherical,gb=new nb.Spherical,yb=new nb.Box3,vb=new nb.Box3,_b=new nb.Sphere,Tb=new nb.Quaternion,Eb=new nb.Quaternion,xb=new nb.Matrix4,bb=new nb.Raycaster}static get ACTION(){return kx}constructor(t,e){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=0,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.dampingFactor=.05,this.draggingDampingFactor=.25,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=kx.NONE,this._viewport=null,this._affectOffset=!1,this._dollyControlAmount=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._activePointers=[],this._truckInternal=(t,e,n)=>{if(Ux(this._camera)){const i=ab.copy(this._camera.position).sub(this._target),r=this._camera.getEffectiveFOV()*nb.MathUtils.DEG2RAD,s=i.length()*Math.tan(.5*r),o=this.truckSpeed*t*s/this._elementRect.height,a=this.truckSpeed*e*s/this._elementRect.height;this.verticalDragToForward?(n?this.setFocalOffset(this._focalOffsetEnd.x+o,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(o,0,!0),this.forward(-a,!0)):n?this.setFocalOffset(this._focalOffsetEnd.x+o,this._focalOffsetEnd.y+a,this._focalOffsetEnd.z,!0):this.truck(o,a,!0)}else if(Bx(this._camera)){const i=this._camera,r=t*(i.right-i.left)/i.zoom/this._elementRect.width,s=e*(i.top-i.bottom)/i.zoom/this._elementRect.height;n?this.setFocalOffset(this._focalOffsetEnd.x+r,this._focalOffsetEnd.y+s,this._focalOffsetEnd.z,!0):this.truck(r,s,!0)}},this._rotateInternal=(t,e)=>{const n=zx*this.azimuthRotateSpeed*t/this._elementRect.height,i=zx*this.polarRotateSpeed*e/this._elementRect.height;this.rotate(n,i,!0)},this._dollyInternal=(t,e,n)=>{const i=Math.pow(.95,-t*this.dollySpeed),r=this._sphericalEnd.radius*i,s=this._sphericalEnd.radius,o=s*(t>=0?-1:1);this.dollyTo(r),this.infinityDolly&&(r<this.minDistance||this.maxDistance===this.minDistance)&&(this._camera.getWorldDirection(ab),this._targetEnd.add(ab.normalize().multiplyScalar(o)),this._target.add(ab.normalize().multiplyScalar(o))),this.dollyToCursor&&(this._dollyControlAmount+=this._sphericalEnd.radius-s,this.infinityDolly&&(r<this.minDistance||this.maxDistance===this.minDistance)&&(this._dollyControlAmount-=o),this._dollyControlCoord.set(e,n))},this._zoomInternal=(t,e,n)=>{const i=Math.pow(.95,t*this.dollySpeed),r=this._zoomEnd;this.zoomTo(this._zoom*i),this.dollyToCursor&&(this._dollyControlAmount+=this._zoomEnd-r,this._dollyControlCoord.set(e,n))},"undefined"===typeof nb&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=t,this._yAxisUpSpace=(new nb.Quaternion).setFromUnitVectors(this._camera.up,rb),this._yAxisUpSpaceInverse=Kx(this._yAxisUpSpace.clone()),this._state=kx.NONE,this._target=new nb.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new nb.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=(new nb.Spherical).setFromVector3(ab.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._nearPlaneCorners=[new nb.Vector3,new nb.Vector3,new nb.Vector3,new nb.Vector3],this._updateNearPlaneCorners(),this._boundary=new nb.Box3(new nb.Vector3(-1/0,-1/0,-1/0),new nb.Vector3(1/0,1/0,1/0)),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlAmount=0,this._dollyControlCoord=new nb.Vector2,this.mouseButtons={left:kx.ROTATE,middle:kx.DOLLY,right:kx.TRUCK,wheel:Ux(this._camera)?kx.DOLLY:Bx(this._camera)?kx.ZOOM:kx.NONE},this.touches={one:kx.TOUCH_ROTATE,two:Ux(this._camera)?kx.TOUCH_DOLLY_TRUCK:Bx(this._camera)?kx.TOUCH_ZOOM_TRUCK:kx.NONE,three:kx.TOUCH_TRUCK};const n=new nb.Vector2,i=new nb.Vector2,r=new nb.Vector2,s=t=>{if(!this._enabled||!this._domElement)return;const e={pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,deltaX:0,deltaY:0};this._activePointers.push(e),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),y(t)},o=t=>{if(!this._enabled||!this._domElement)return;const e={pointerId:0,clientX:t.clientX,clientY:t.clientY,deltaX:0,deltaY:0};this._activePointers.push(e),this._domElement.ownerDocument.removeEventListener("mousemove",h),this._domElement.ownerDocument.removeEventListener("mouseup",p),this._domElement.ownerDocument.addEventListener("mousemove",h),this._domElement.ownerDocument.addEventListener("mouseup",p),y(t)},a=t=>{this._enabled&&this._domElement&&(t.preventDefault(),Array.prototype.forEach.call(t.changedTouches,(t=>{const e={pointerId:t.identifier,clientX:t.clientX,clientY:t.clientY,deltaX:0,deltaY:0};this._activePointers.push(e)})),this._domElement.ownerDocument.removeEventListener("touchmove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("touchend",d),this._domElement.ownerDocument.addEventListener("touchmove",c,{passive:!1}),this._domElement.ownerDocument.addEventListener("touchend",d),y(t))},l=t=>{t.cancelable&&t.preventDefault();const e=t.pointerId,n=this._findPointerById(e);if(n){if(n.clientX=t.clientX,n.clientY=t.clientY,n.deltaX=t.movementX,n.deltaY=t.movementY,"touch"===t.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=0,(t.buttons&Px)===Px&&(this._state=this._state|this.mouseButtons.left),(t.buttons&Lx)===Lx&&(this._state=this._state|this.mouseButtons.middle),(t.buttons&Fx)===Fx&&(this._state=this._state|this.mouseButtons.right);v()}},h=t=>{const e=this._findPointerById(0);e&&(e.clientX=t.clientX,e.clientY=t.clientY,e.deltaX=t.movementX,e.deltaY=t.movementY,this._state=0,(t.buttons&Px)===Px&&(this._state=this._state|this.mouseButtons.left),(t.buttons&Lx)===Lx&&(this._state=this._state|this.mouseButtons.middle),(t.buttons&Fx)===Fx&&(this._state=this._state|this.mouseButtons.right),v())},c=t=>{t.cancelable&&t.preventDefault(),Array.prototype.forEach.call(t.changedTouches,(t=>{const e=t.identifier,n=this._findPointerById(e);n&&(n.clientX=t.clientX,n.clientY=t.clientY)})),v()},u=t=>{const e=t.pointerId,n=this._findPointerById(e);if(n&&this._activePointers.splice(this._activePointers.indexOf(n),1),"touch"===t.pointerType)switch(this._activePointers.length){case 0:this._state=kx.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=kx.NONE;_()},p=()=>{const t=this._findPointerById(0);t&&this._activePointers.splice(this._activePointers.indexOf(t),1),this._state=kx.NONE,_()},d=t=>{switch(Array.prototype.forEach.call(t.changedTouches,(t=>{const e=t.identifier,n=this._findPointerById(e);n&&this._activePointers.splice(this._activePointers.indexOf(n),1)})),this._activePointers.length){case 0:this._state=kx.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}_()};let f=-1;const m=t=>{if(!this._enabled||this.mouseButtons.wheel===kx.NONE)return;if(t.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===kx.ROTATE||this.mouseButtons.wheel===kx.TRUCK){const t=performance.now();f-t<1e3&&this._getClientRect(this._elementRect),f=t}const e=tb?-1:-3,n=1===t.deltaMode?t.deltaY/e:t.deltaY/(10*e),i=this.dollyToCursor?(t.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,r=this.dollyToCursor?(t.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case kx.ROTATE:this._rotateInternal(t.deltaX,t.deltaY);break;case kx.TRUCK:this._truckInternal(t.deltaX,t.deltaY,!1);break;case kx.OFFSET:this._truckInternal(t.deltaX,t.deltaY,!0);break;case kx.DOLLY:this._dollyInternal(-n,i,r);break;case kx.ZOOM:this._zoomInternal(-n,i,r)}this.dispatchEvent({type:"control"})},g=t=>{this._enabled&&t.preventDefault()},y=t=>{if(!this._enabled)return;qx(this._activePointers,ob),this._getClientRect(this._elementRect),n.copy(ob),i.copy(ob);if(this._activePointers.length>=2){const t=ob.x-this._activePointers[1].clientX,e=ob.y-this._activePointers[1].clientY,n=Math.sqrt(t*t+e*e);r.set(0,n);const s=.5*(this._activePointers[0].clientX+this._activePointers[1].clientX),o=.5*(this._activePointers[0].clientY+this._activePointers[1].clientY);i.set(s,o)}if("touches"in t||"pointerType"in t&&"touch"===t.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=0,(t.buttons&Px)===Px&&(this._state=this._state|this.mouseButtons.left),(t.buttons&Lx)===Lx&&(this._state=this._state|this.mouseButtons.middle),(t.buttons&Fx)===Fx&&(this._state=this._state|this.mouseButtons.right);this.dispatchEvent({type:"controlstart"})},v=()=>{if(!this._enabled)return;qx(this._activePointers,ob);const t=this._domElement&&document.pointerLockElement===this._domElement,e=t?-this._activePointers[0].deltaX:i.x-ob.x,s=t?-this._activePointers[0].deltaY:i.y-ob.y;if(i.copy(ob),(this._state&kx.ROTATE)!==kx.ROTATE&&(this._state&kx.TOUCH_ROTATE)!==kx.TOUCH_ROTATE&&(this._state&kx.TOUCH_DOLLY_ROTATE)!==kx.TOUCH_DOLLY_ROTATE&&(this._state&kx.TOUCH_ZOOM_ROTATE)!==kx.TOUCH_ZOOM_ROTATE||this._rotateInternal(e,s),(this._state&kx.DOLLY)===kx.DOLLY||(this._state&kx.ZOOM)===kx.ZOOM){const t=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,e=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&kx.DOLLY)===kx.DOLLY?this._dollyInternal(s*Jx,t,e):this._zoomInternal(s*Jx,t,e)}if((this._state&kx.TOUCH_DOLLY)===kx.TOUCH_DOLLY||(this._state&kx.TOUCH_ZOOM)===kx.TOUCH_ZOOM||(this._state&kx.TOUCH_DOLLY_TRUCK)===kx.TOUCH_DOLLY_TRUCK||(this._state&kx.TOUCH_ZOOM_TRUCK)===kx.TOUCH_ZOOM_TRUCK||(this._state&kx.TOUCH_DOLLY_OFFSET)===kx.TOUCH_DOLLY_OFFSET||(this._state&kx.TOUCH_ZOOM_OFFSET)===kx.TOUCH_ZOOM_OFFSET||(this._state&kx.TOUCH_DOLLY_ROTATE)===kx.TOUCH_DOLLY_ROTATE||(this._state&kx.TOUCH_ZOOM_ROTATE)===kx.TOUCH_ZOOM_ROTATE){const t=ob.x-this._activePointers[1].clientX,e=ob.y-this._activePointers[1].clientY,n=Math.sqrt(t*t+e*e),s=r.y-n;r.set(0,n);const o=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,a=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&kx.TOUCH_DOLLY)===kx.TOUCH_DOLLY||(this._state&kx.TOUCH_DOLLY_ROTATE)===kx.TOUCH_DOLLY_ROTATE||(this._state&kx.TOUCH_DOLLY_TRUCK)===kx.TOUCH_DOLLY_TRUCK||(this._state&kx.TOUCH_DOLLY_OFFSET)===kx.TOUCH_DOLLY_OFFSET?this._dollyInternal(s*Jx,o,a):this._zoomInternal(s*Jx,o,a)}(this._state&kx.TRUCK)!==kx.TRUCK&&(this._state&kx.TOUCH_TRUCK)!==kx.TOUCH_TRUCK&&(this._state&kx.TOUCH_DOLLY_TRUCK)!==kx.TOUCH_DOLLY_TRUCK&&(this._state&kx.TOUCH_ZOOM_TRUCK)!==kx.TOUCH_ZOOM_TRUCK||this._truckInternal(e,s,!1),(this._state&kx.OFFSET)!==kx.OFFSET&&(this._state&kx.TOUCH_OFFSET)!==kx.TOUCH_OFFSET&&(this._state&kx.TOUCH_DOLLY_OFFSET)!==kx.TOUCH_DOLLY_OFFSET&&(this._state&kx.TOUCH_ZOOM_OFFSET)!==kx.TOUCH_ZOOM_OFFSET||this._truckInternal(e,s,!0),this.dispatchEvent({type:"control"})},_=()=>{qx(this._activePointers,ob),i.copy(ob),0===this._activePointers.length&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("touchmove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("touchend",d),this.dispatchEvent({type:"controlend"}))};this._addAllEventListeners=t=>{this._domElement=t,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",s),eb&&this._domElement.addEventListener("mousedown",o),eb&&this._domElement.addEventListener("touchstart",a),this._domElement.addEventListener("pointercancel",u),this._domElement.addEventListener("wheel",m,{passive:!1}),this._domElement.addEventListener("contextmenu",g)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.removeEventListener("pointerdown",s),this._domElement.removeEventListener("mousedown",o),this._domElement.removeEventListener("touchstart",a),this._domElement.removeEventListener("pointercancel",u),this._domElement.removeEventListener("wheel",m,{passive:!1}),this._domElement.removeEventListener("contextmenu",g),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",h),this._domElement.ownerDocument.removeEventListener("touchmove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",p),this._domElement.ownerDocument.removeEventListener("touchend",d))},this.cancel=()=>{this._state!==kx.NONE&&(this._state=kx.NONE,this._activePointers.length=0,_())},e&&this.connect(e),this.update(0)}get camera(){return this._camera}set camera(t){this._camera=t,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(t){this._domElement&&(this._enabled=t,t?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0}addEventListener(t,e){super.addEventListener(t,e)}removeEventListener(t,e){super.removeEventListener(t,e)}rotate(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+e,n)}rotateAzimuthTo(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.rotateTo(t,this._sphericalEnd.phi,e)}rotatePolarTo(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.rotateTo(this._sphericalEnd.theta,t,e)}rotateTo(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=nb.MathUtils.clamp(t,this.minAzimuthAngle,this.maxAzimuthAngle),r=nb.MathUtils.clamp(e,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=i,this._sphericalEnd.phi=r,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const s=!n||Vx(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Vx(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(s)}dolly(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.dollyTo(this._sphericalEnd.radius-t,e)}dollyTo(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this._sphericalEnd.radius,i=nb.MathUtils.clamp(t,this.minDistance,this.maxDistance);if(this.colliderMeshes.length>=1){const t=this._collisionTest(),e=Vx(t,this._spherical.radius);if(!(n>i)&&e)return Promise.resolve();this._sphericalEnd.radius=Math.min(i,t)}else this._sphericalEnd.radius=i;this._needsUpdate=!0,e||(this._spherical.radius=this._sphericalEnd.radius);const r=!e||Vx(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(r)}zoom(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.zoomTo(this._zoomEnd+t,e)}zoomTo(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._zoomEnd=nb.MathUtils.clamp(t,this.minZoom,this.maxZoom),this._needsUpdate=!0,e||(this._zoom=this._zoomEnd);const n=!e||Vx(this._zoom,this._zoomEnd,this.restThreshold);return this._createOnRestPromise(n)}pan(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return console.warn("`pan` has been renamed to `truck`"),this.truck(t,e,n)}truck(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._camera.updateMatrix(),cb.setFromMatrixColumn(this._camera.matrix,0),ub.setFromMatrixColumn(this._camera.matrix,1),cb.multiplyScalar(t),ub.multiplyScalar(-e);const i=ab.copy(cb).add(ub),r=lb.copy(this._targetEnd).add(i);return this.moveTo(r.x,r.y,r.z,n)}forward(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ab.setFromMatrixColumn(this._camera.matrix,0),ab.crossVectors(this._camera.up,ab),ab.multiplyScalar(t);const n=lb.copy(this._targetEnd).add(ab);return this.moveTo(n.x,n.y,n.z,e)}moveTo(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=ab.set(t,e,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,r,this.boundaryFriction),this._needsUpdate=!0,i||this._target.copy(this._targetEnd);const s=!i||Vx(this._target.x,this._targetEnd.x,this.restThreshold)&&Vx(this._target.y,this._targetEnd.y,this.restThreshold)&&Vx(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}fitToBox(t,e){let{cover:n=!1,paddingLeft:i=0,paddingRight:r=0,paddingBottom:s=0,paddingTop:o=0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=[],l=t.isBox3?yb.copy(t):yb.setFromObject(t);l.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const h=Wx(this._sphericalEnd.theta,Gx),c=Wx(this._sphericalEnd.phi,Gx);a.push(this.rotateTo(h,c,e));const u=ab.setFromSpherical(this._sphericalEnd).normalize(),p=Tb.setFromUnitVectors(u,sb),d=Vx(Math.abs(u.y),1);d&&p.multiply(Eb.setFromAxisAngle(rb,h)),p.multiply(this._yAxisUpSpaceInverse);const f=vb.makeEmpty();lb.copy(l.min).applyQuaternion(p),f.expandByPoint(lb),lb.copy(l.min).setX(l.max.x).applyQuaternion(p),f.expandByPoint(lb),lb.copy(l.min).setY(l.max.y).applyQuaternion(p),f.expandByPoint(lb),lb.copy(l.max).setZ(l.min.z).applyQuaternion(p),f.expandByPoint(lb),lb.copy(l.min).setZ(l.max.z).applyQuaternion(p),f.expandByPoint(lb),lb.copy(l.max).setY(l.min.y).applyQuaternion(p),f.expandByPoint(lb),lb.copy(l.max).setX(l.min.x).applyQuaternion(p),f.expandByPoint(lb),lb.copy(l.max).applyQuaternion(p),f.expandByPoint(lb),f.min.x-=i,f.min.y-=s,f.max.x+=r,f.max.y+=o,p.setFromUnitVectors(sb,u),d&&p.premultiply(Eb.invert()),p.premultiply(this._yAxisUpSpace);const m=f.getSize(ab),g=f.getCenter(lb).applyQuaternion(p);if(Ux(this._camera)){const t=this.getDistanceToFitBox(m.x,m.y,m.z,n);a.push(this.moveTo(g.x,g.y,g.z,e)),a.push(this.dollyTo(t,e)),a.push(this.setFocalOffset(0,0,0,e))}else if(Bx(this._camera)){const t=this._camera,i=t.right-t.left,r=t.top-t.bottom,s=n?Math.max(i/m.x,r/m.y):Math.min(i/m.x,r/m.y);a.push(this.moveTo(g.x,g.y,g.z,e)),a.push(this.zoomTo(s,e)),a.push(this.setFocalOffset(0,0,0,e))}return Promise.all(a)}fitToSphere(t,e){const n=[],i=t instanceof nb.Sphere?_b.copy(t):function(t,e){const n=e,i=n.center;yb.makeEmpty(),t.traverseVisible((t=>{t.isMesh&&yb.expandByObject(t)})),yb.getCenter(i);let r=0;return t.traverseVisible((t=>{if(!t.isMesh)return;const e=t,n=e.geometry.clone();if(n.applyMatrix4(e.matrixWorld),n.isBufferGeometry){const t=n.attributes.position;for(let e=0,n=t.count;e<n;e++)ab.fromBufferAttribute(t,e),r=Math.max(r,i.distanceToSquared(ab))}else{const t=n.attributes.position,e=new nb.Vector3;for(let n=0,s=t.count;n<s;n++)e.fromBufferAttribute(t,n),r=Math.max(r,i.distanceToSquared(e))}})),n.radius=Math.sqrt(r),n}(t,_b);if(n.push(this.moveTo(i.center.x,i.center.y,i.center.z,e)),Ux(this._camera)){const t=this.getDistanceToFitSphere(i.radius);n.push(this.dollyTo(t,e))}else if(Bx(this._camera)){const t=this._camera.right-this._camera.left,r=this._camera.top-this._camera.bottom,s=2*i.radius,o=Math.min(t/s,r/s);n.push(this.zoomTo(o,e))}return n.push(this.setFocalOffset(0,0,0,e)),Promise.all(n)}setLookAt(t,e,n,i,r,s){let o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];const a=lb.set(i,r,s),l=ab.set(t,e,n);this._targetEnd.copy(a),this._sphericalEnd.setFromVector3(l.sub(a).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,o||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const h=!o||Vx(this._target.x,this._targetEnd.x,this.restThreshold)&&Vx(this._target.y,this._targetEnd.y,this.restThreshold)&&Vx(this._target.z,this._targetEnd.z,this.restThreshold)&&Vx(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Vx(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Vx(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(h)}lerpLookAt(t,e,n,i,r,s,o,a,l,h,c,u,p){let d=arguments.length>13&&void 0!==arguments[13]&&arguments[13];const f=ab.set(i,r,s),m=lb.set(t,e,n);mb.setFromVector3(m.sub(f).applyQuaternion(this._yAxisUpSpace));const g=hb.set(h,c,u),y=lb.set(o,a,l);gb.setFromVector3(y.sub(g).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(f.lerp(g,p));const v=gb.theta-mb.theta,_=gb.phi-mb.phi,T=gb.radius-mb.radius;this._sphericalEnd.set(mb.radius+T*p,mb.phi+_*p,mb.theta+v*p),this.normalizeRotations(),this._needsUpdate=!0,d||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const E=!d||Vx(this._target.x,this._targetEnd.x,this.restThreshold)&&Vx(this._target.y,this._targetEnd.y,this.restThreshold)&&Vx(this._target.z,this._targetEnd.z,this.restThreshold)&&Vx(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Vx(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Vx(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(E)}setPosition(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.setLookAt(t,e,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,i)}setTarget(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=this.getPosition(ab),s=this.setLookAt(r.x,r.y,r.z,t,e,n,i);return this._sphericalEnd.phi=nb.MathUtils.clamp(this.polarAngle,this.minPolarAngle,this.maxPolarAngle),s}setFocalOffset(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._focalOffsetEnd.set(t,e,n),this._needsUpdate=!0,i||this._focalOffset.copy(this._focalOffsetEnd),this._affectOffset=!jx(t)||!jx(e)||!jx(n);const r=!i||Vx(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Vx(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Vx(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}setOrbitPoint(t,e,n){this._camera.updateMatrixWorld(),cb.setFromMatrixColumn(this._camera.matrixWorldInverse,0),ub.setFromMatrixColumn(this._camera.matrixWorldInverse,1),pb.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const i=ab.set(t,e,n),r=i.distanceTo(this._camera.position),s=i.sub(this._camera.position);cb.multiplyScalar(s.x),ub.multiplyScalar(s.y),pb.multiplyScalar(s.z),ab.copy(cb).add(ub).add(pb),ab.z=ab.z+r,this.dollyTo(r,!1),this.setFocalOffset(-ab.x,ab.y,-ab.z,!1),this.moveTo(t,e,n,!1)}setBoundary(t){if(!t)return this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),void(this._needsUpdate=!0);this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(t,e,n,i){null!==t?(this._viewport=this._viewport||new nb.Vector4,"number"===typeof t?this._viewport.set(t,e,n,i):this._viewport.copy(t)):this._viewport=null}getDistanceToFitBox(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Xx(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const r=t/e,s=this._camera.getEffectiveFOV()*nb.MathUtils.DEG2RAD,o=this._camera.aspect;return.5*((i?r>o:r<o)?e:t/o)/Math.tan(.5*s)+.5*n}getDistanceToFitSphere(t){if(Xx(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const e=this._camera.getEffectiveFOV()*nb.MathUtils.DEG2RAD,n=2*Math.atan(Math.tan(.5*e)*this._camera.aspect),i=1<this._camera.aspect?e:n;return t/Math.sin(.5*i)}getTarget(t){return(t&&t.isVector3?t:new nb.Vector3).copy(this._targetEnd)}getPosition(t){return(t&&t.isVector3?t:new nb.Vector3).setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)}getFocalOffset(t){return(t&&t.isVector3?t:new nb.Vector3).copy(this._focalOffsetEnd)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%zx,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=zx),this._spherical.theta+=zx*Math.round((this._sphericalEnd.theta-this._spherical.theta)/zx)}reset(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)];return Promise.all(e)}saveState(){this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,rb),Kx(this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace))}update(t){const e=this._state===kx.NONE?this.dampingFactor:this.draggingDampingFactor,n=Math.min(e*t*60,1),i=this._sphericalEnd.theta-this._spherical.theta,r=this._sphericalEnd.phi-this._spherical.phi,s=this._sphericalEnd.radius-this._spherical.radius,o=db.subVectors(this._targetEnd,this._target),a=fb.subVectors(this._focalOffsetEnd,this._focalOffset);if(jx(i)&&jx(r)&&jx(s)&&jx(o.x)&&jx(o.y)&&jx(o.z)&&jx(a.x)&&jx(a.y)&&jx(a.z)?(this._spherical.copy(this._sphericalEnd),this._target.copy(this._targetEnd),this._focalOffset.copy(this._focalOffsetEnd)):(this._spherical.set(this._spherical.radius+s*n,this._spherical.phi+r*n,this._spherical.theta+i*n),this._target.add(o.multiplyScalar(n)),this._focalOffset.add(a.multiplyScalar(n)),this._needsUpdate=!0),0!==this._dollyControlAmount){if(Ux(this._camera)){const t=this._camera,e=ab.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),n=lb.copy(e).cross(t.up).normalize();0===n.lengthSq()&&(n.x=1);const i=hb.crossVectors(n,e),r=this._sphericalEnd.radius*Math.tan(t.getEffectiveFOV()*nb.MathUtils.DEG2RAD*.5),s=(this._sphericalEnd.radius-this._dollyControlAmount-this._sphericalEnd.radius)/this._sphericalEnd.radius,o=ab.copy(this._targetEnd).add(n.multiplyScalar(this._dollyControlCoord.x*r*t.aspect)).add(i.multiplyScalar(this._dollyControlCoord.y*r));this._targetEnd.lerp(o,s)}else if(Bx(this._camera)){const t=this._camera,e=ab.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(t.near+t.far)/(t.near-t.far)).unproject(t),n=lb.set(0,0,-1).applyQuaternion(t.quaternion),i=hb.copy(e).add(n.multiplyScalar(-e.dot(t.up))),r=-(this._zoom-this._dollyControlAmount-this._zoomEnd)/this._zoom,s=ab.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),o=this._targetEnd.dot(s);this._targetEnd.lerp(i,r);const a=this._targetEnd.dot(s),l=s.multiplyScalar(a-o);this._targetEnd.sub(l)}this._target.copy(this._targetEnd),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._dollyControlAmount=0}const l=this._zoomEnd-this._zoom;this._zoom+=l*n,this._camera.zoom!==this._zoom&&(jx(l)&&(this._zoom=this._zoomEnd),this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const h=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,h),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),this._affectOffset&&(this._camera.updateMatrixWorld(),cb.setFromMatrixColumn(this._camera.matrix,0),ub.setFromMatrixColumn(this._camera.matrix,1),pb.setFromMatrixColumn(this._camera.matrix,2),cb.multiplyScalar(this._focalOffset.x),ub.multiplyScalar(-this._focalOffset.y),pb.multiplyScalar(this._focalOffset.z),ab.copy(cb).add(ub).add(pb),this._camera.position.add(ab)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),ab.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const c=this._needsUpdate;return c&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):c?(this.dispatchEvent({type:"update"}),jx(i,this.restThreshold)&&jx(r,this.restThreshold)&&jx(s,this.restThreshold)&&jx(o.x,this.restThreshold)&&jx(o.y,this.restThreshold)&&jx(o.z,this.restThreshold)&&jx(a.x,this.restThreshold)&&jx(a.y,this.restThreshold)&&jx(a.z,this.restThreshold)&&jx(l,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!c&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._updatedLastTime=c,this._needsUpdate=!1,c}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Zx(this.maxDistance),minZoom:this.minZoom,maxZoom:Zx(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Zx(this.maxPolarAngle),minAzimuthAngle:Zx(this.minAzimuthAngle),maxAzimuthAngle:Zx(this.maxAzimuthAngle),dampingFactor:this.dampingFactor,draggingDampingFactor:this.draggingDampingFactor,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:ab.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=JSON.parse(t),i=ab.fromArray(n.position);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=Yx(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=Yx(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=Yx(n.maxPolarAngle),this.minAzimuthAngle=Yx(n.minAzimuthAngle),this.maxAzimuthAngle=Yx(n.maxAzimuthAngle),this.dampingFactor=n.dampingFactor,this.draggingDampingFactor=n.draggingDampingFactor,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],e),mb.setFromVector3(i.sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(mb.theta,mb.phi,e),this.zoomTo(n.zoom,e),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],e),this._needsUpdate=!0}connect(t){this._domElement?console.warn("camera-controls is already connected."):(t.setAttribute("data-camera-controls-version","1.38.1"),this._addAllEventListeners(t))}disconnect(){this._removeAllEventListeners(),this._domElement=void 0}dispose(){this.disconnect(),this._domElement&&"setAttribute"in this._domElement&&this._domElement.removeAttribute("data-camera-controls-version")}_findPointerById(t){let e=null;return this._activePointers.some((n=>n.pointerId===t&&(e=n,!0))),e}_encloseToBoundary(t,e,n){const i=e.lengthSq();if(0===i)return t;const r=lb.copy(e).add(t),s=this._boundary.clampPoint(r,hb).sub(r),o=s.lengthSq();if(0===o)return t.add(e);if(o===i)return t;if(0===n)return t.add(e).add(s);{const i=1+n*o/e.dot(s);return t.add(lb.copy(e).multiplyScalar(i)).add(s.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(Ux(this._camera)){const t=this._camera,e=t.near,n=t.getEffectiveFOV()*nb.MathUtils.DEG2RAD,i=Math.tan(.5*n)*e,r=i*t.aspect;this._nearPlaneCorners[0].set(-r,-i,0),this._nearPlaneCorners[1].set(r,-i,0),this._nearPlaneCorners[2].set(r,i,0),this._nearPlaneCorners[3].set(-r,i,0)}else if(Bx(this._camera)){const t=this._camera,e=1/t.zoom,n=t.left*e,i=t.right*e,r=t.top*e,s=t.bottom*e;this._nearPlaneCorners[0].set(n,r,0),this._nearPlaneCorners[1].set(i,r,0),this._nearPlaneCorners[2].set(i,s,0),this._nearPlaneCorners[3].set(n,s,0)}}_collisionTest(){let t=1/0;if(!(this.colliderMeshes.length>=1))return t;if(Xx(this._camera,"_collisionTest"))return t;const e=ab.setFromSpherical(this._spherical).divideScalar(this._spherical.radius);xb.lookAt(ib,e,this._camera.up);for(let n=0;n<4;n++){const i=lb.copy(this._nearPlaneCorners[n]);i.applyMatrix4(xb);const r=hb.addVectors(this._target,i);bb.set(r,e),bb.far=this._spherical.radius+1;const s=bb.intersectObjects(this.colliderMeshes);0!==s.length&&s[0].distance<t&&(t=s[0].distance)}return t}_getClientRect(t){if(!this._domElement)return;const e=this._domElement.getBoundingClientRect();return t.x=e.left,t.y=e.top,this._viewport?(t.x+=this._viewport.x,t.y+=e.height-this._viewport.w-this._viewport.y,t.width=this._viewport.z,t.height=this._viewport.w):(t.width=e.width,t.height=e.height),t}_createOnRestPromise(t){return t?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise((t=>{const e=()=>{this.removeEventListener("rest",e),t()};this.addEventListener("rest",e)})))}_addAllEventListeners(t){}_removeAllEventListeners(){}}class wb{constructor(){this.isDisposeable=()=>"dispose"in this,this.isResizeable=()=>"resize"in this&&"getSize"in this,this.isUpdateable=()=>"afterUpdate"in this&&"beforeUpdate"in this&&"update"in this,this.isHideable=()=>"visible"in this}}class Sb extends wb{constructor(t){super(),this.components=t,this.name="SimpleCamera",this.beforeUpdate=new Mx,this.afterUpdate=new Mx,this._perspectiveCamera=this.setupCamera(),this.activeCamera=this._perspectiveCamera,this.controls=this.setupCameraControls();t.scene.get().add(this._perspectiveCamera),this.setupEvents()}get enabled(){return this.controls.enabled}set enabled(t){this.controls.enabled=t}get(){return this.activeCamera}dispose(){this.enabled=!1,this.beforeUpdate.reset(),this.afterUpdate.reset(),this._perspectiveCamera.removeFromParent(),this.controls.dispose()}update(t){this.enabled&&(this.beforeUpdate.trigger(this),this.controls.update(t),this.afterUpdate.trigger(this))}updateAspect(){if(this.components.renderer.isResizeable()){const t=this.components.renderer.getSize();this._perspectiveCamera.aspect=t.width/t.height,this._perspectiveCamera.updateProjectionMatrix()}}setupCamera(){const t=window.innerWidth/window.innerHeight,e=new $d(60,t,1,1e3);return e.position.set(50,50,50),e.lookAt(new Vu(0,0,0)),e}setupCameraControls(){Ib.install({THREE:Sb.getSubsetOfThree()});const t=this.components.renderer.get().domElement,e=new Ib(this._perspectiveCamera,t);return e.dampingFactor=.2,e.dollyToCursor=!0,e.infinityDolly=!0,e.setTarget(0,0,0),e}setupEvents(){window.addEventListener("resize",(()=>{this.updateAspect()}))}static getSubsetOfThree(){return{MOUSE:Sl,Vector2:Du,Vector3:Vu,Vector4:zu,Quaternion:ju,Matrix4:Ep,Spherical:ZT,Box3:Yu,Sphere:pp,Raycaster:jT,MathUtils:Au}}}class Rb extends Zp{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("div");super(),this.element=t,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",(function(){this.traverse((function(t){t.element instanceof Element&&null!==t.element.parentNode&&t.element.parentNode.removeChild(t.element)}))}))}copy(t,e){return super.copy(t,e),this.element=t.element.cloneNode(!0),this}}Rb.prototype.isCSS2DObject=!0;const Cb=new Vu,Ab=new Ep,Db=new Ep,Ob=new Vu,Nb=new Vu;class Mb{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this;let n,i,r,s;const o={objects:new WeakMap},a=void 0!==t.element?t.element:document.createElement("div");function l(t,n,i){if(t.isCSS2DObject){t.onBeforeRender(e,n,i),Cb.setFromMatrixPosition(t.matrixWorld),Cb.applyMatrix4(Db);const l=t.element;/apple/i.test(navigator.vendor)?l.style.transform="translate(-50%,-50%) translate("+Math.round(Cb.x*r+r)+"px,"+Math.round(-Cb.y*s+s)+"px)":l.style.transform="translate(-50%,-50%) translate("+(Cb.x*r+r)+"px,"+(-Cb.y*s+s)+"px)",l.style.display=t.visible&&Cb.z>=-1&&Cb.z<=1?"":"none";const c={distanceToCameraSquared:h(i,t)};o.objects.set(t,c),l.parentNode!==a&&a.appendChild(l),t.onAfterRender(e,n,i)}for(let e=0,r=t.children.length;e<r;e++)l(t.children[e],n,i)}function h(t,e){return Ob.setFromMatrixPosition(t.matrixWorld),Nb.setFromMatrixPosition(e.matrixWorld),Ob.distanceToSquared(Nb)}a.style.overflow="hidden",this.domElement=a,this.getSize=function(){return{width:n,height:i}},this.render=function(t,e){!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),Ab.copy(e.matrixWorldInverse),Db.multiplyMatrices(e.projectionMatrix,Ab),l(t,t,e),function(t){const e=function(t){const e=[];return t.traverse((function(t){t.isCSS2DObject&&e.push(t)})),e}(t).sort((function(t,e){return o.objects.get(t).distanceToCameraSquared-o.objects.get(e).distanceToCameraSquared})),n=e.length;for(let i=0,r=e.length;i<r;i++)e[i].element.style.zIndex=n-i}(t)},this.setSize=function(t,e){n=t,i=e,r=n/2,s=i/2,a.style.width=t+"px",a.style.height=e+"px"}}}class Pb{dispose(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.removeFromParent(),this.disposeGeometryAndMaterials(t,e),n&&t.children.length&&this.disposeChildren(t),t.material=[],t.children.length=0}disposeGeometry(t){t.boundsTree&&t.disposeBoundsTree(),t.dispose()}disposeGeometryAndMaterials(t,e){t.geometry&&this.disposeGeometry(t.geometry),e&&Pb.disposeMaterial(t)}disposeChildren(t){for(const e of t.children)this.dispose(e)}static disposeMaterial(t){if(t.material)if(Array.isArray(t.material))for(const e of t.material)e.dispose();else t.material.dispose()}}new Vu,new Vu,new Vu;class Fb{constructor(t,e){this.boundingBox=new Wd,this._disposer=new Pb,this._root=new Jg,this._endpoints=[],this._components=t,this.start=e.start,this.end=e.end,this._length=this.getLength(),this.center=this.getCenter(),this._line=this.createLine(e),this.newEndpointMesh(e),this.newEndpointMesh(e),this.label=this.newText(),this._root.renderOrder=2,this._components.scene.get().add(this._root)}set visible(t){t?(this._components.scene.get().add(this._root),this._root.add(this.label)):(this._root.removeFromParent(),this.label.removeFromParent())}set geometry(t){for(const e of this._endpoints)e.geometry=t}set endPoint(t){this.end=t,this.updateEndpointPosition(t),this.updateEndpointMeshes(t),this.updateLabel()}dispose(){this.visible=!1,this._disposer.dispose(this._root),this._disposer.dispose(this._line);for(const t of this._endpoints)t.removeFromParent();this._endpoints.length=0,this.label.removeFromParent(),this.label.element.remove(),this.boundingBox&&this._disposer.dispose(this.boundingBox)}createBoundingBox(){this.boundingBox.geometry=new Yd(1,1,this._length),this.boundingBox.position.copy(this.center),this.boundingBox.lookAt(this.end),this.boundingBox.visible=!1,this._root.add(this.boundingBox)}updateLabel(){this._length=this.getLength(),this.label.element.textContent=this.getTextContent(),this.center=this.getCenter(),this.label.position.set(this.center.x,this.center.y,this.center.z),this._line.computeLineDistances()}updateEndpointMeshes(t){this._endpoints[1].position.copy(t),this._endpoints[1].lookAt(this.start),this._endpoints[0].lookAt(this.end)}updateEndpointPosition(t){const e=this._line.geometry.attributes.position;e.setXYZ(1,t.x,t.y,t.z),e.needsUpdate=!0}createLine(t){const e=new Rd;e.setFromPoints([t.start,t.end]);const n=new Ky(e,t.lineMaterial);return this._root.add(n),n}newEndpointMesh(t){const e=0===this._endpoints.length,n=e?this.start:this.end,i=e?this.end:this.start,r=t.endpoint.clone();r.position.copy(n),r.lookAt(i),this._endpoints.push(r),this._root.add(r)}newText(){const t=document.createElement("div");t.className="ifcjs-dimension-label",t.textContent=this.getTextContent();const e=new Rb(t);return e.position.set(this.center.x,this.center.y,this.center.z),this._root.add(e),e}getTextContent(){return"".concat(this._length/Fb.scale," ").concat(Fb.units)}getLength(){return parseFloat(this.start.distanceTo(this.end).toFixed(2))}getCenter(){let t=this.end.clone().sub(this.start);const e=.5*t.length();return t=t.normalize().multiplyScalar(e),this.start.clone().add(t)}}Fb.scale=1,Fb.units="m";class Lb{constructor(t){this.dom=t,this._position=new Du,this.updateMouseInfo=t=>{this._event=t},this.setupMousePositionUpdate()}get position(){if(this._event){const t=this.dom.getBoundingClientRect();this._position.x=this.getPositionX(t,this._event),this._position.y=this.getPositionY(t,this._event)}return this._position}dispose(){this.dom.removeEventListener("mousemove",this.updateMouseInfo)}getPositionY(t,e){return-(e.clientY-t.top)/(t.bottom-t.top)*2+1}getPositionX(t,e){return(e.clientX-t.left)/(t.right-t.left)*2-1}setupMousePositionUpdate(){this.dom.addEventListener("mousemove",this.updateMouseInfo)}}class kb extends wb{constructor(t){super(),this.components=t,this.name="SimpleRaycaster",this.enabled=!0,this._raycaster=new jT;const e=t.renderer.get().domElement;this._mouse=new Lb(e)}get(){return this._raycaster}castRay(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.components.meshes;const e=this.components.camera.get();this._raycaster.setFromCamera(this._mouse.position,e);const n=this._raycaster.intersectObjects(t),i=this.filterClippingPlanes(n);return i.length>0?i[0]:null}filterClippingPlanes(t){const e=this.components.renderer;if(!e.clippingPlanes)return t;const n=e.clippingPlanes;return t.length<=0||!n||(null===n||void 0===n?void 0:n.length)<=0?t:t.filter((t=>n.every((e=>e.distanceToPoint(t.point)>0))))}}class Ub extends wb{constructor(t){super(),this.components=t,this.name="SimpleDimensions",this.beforeUpdate=new Mx,this.afterUpdate=new Mx,this.onCreate=new Mx,this.onDelete=new Mx,this.snapDistance=.25,this._lineMaterial=new A_({color:0,linewidth:2,depthTest:!1,dashSize:.2,gapSize:.2}),this._dimensions=[],this._visible=!0,this._enabled=!1,this._disposer=new Pb,this._temp={isDragging:!1,start:new Vu,end:new Vu,dimension:void 0},this._raycaster=new kb(this.components),this._endpointMesh=this.newEndpointMesh();const e=document.createElement("div");e.className="ifcjs-dimension-preview",this.previewElement=new Rb(e),this.previewElement.visible=!1}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this.previewVisible=t}get visible(){return this._visible}set visible(t){this._visible=t,this._visible||(this.enabled=!1);for(const e of this._dimensions)e.visible=this._visible}set color(t){this._endpointMesh.material.color=t,this._lineMaterial.color=t}get geometry(){return this._endpointMesh.geometry}set geometry(t){this._endpointMesh.geometry=t;for(const e of this._dimensions)e.geometry=t}set previewVisible(t){var e;const n=null===(e=this.components.scene)||void 0===e?void 0:e.get();t?n.add(this.previewElement):this.previewElement.removeFromParent()}get(){return this._dimensions}dispose(){this.enabled=!1,this._dimensions.forEach((t=>t.dispose())),this._dimensions=[],this._disposer.dispose(this._endpointMesh),this._endpointMesh.removeFromParent(),this.previewElement.removeFromParent(),this.previewElement.element.remove()}update(t){if(this._enabled){this.beforeUpdate.trigger(this);const t=this._raycaster.castRay();if(this.previewElement.visible=!!t,!t)return;this.previewElement.visible=!0;const e=this.getClosestVertex(t);if(this.previewElement.visible=!!e,!e)return;this.previewElement.position.set(e.x,e.y,e.z),this._temp.isDragging&&this.drawInProcess(),this.afterUpdate.trigger(this)}}create(t){this._enabled&&(this._temp.isDragging?this.drawEnd():this.drawStart(t))}delete(){if(!this._enabled||0===this._dimensions.length)return;const t=this.getBoundingBoxes(),e=this._raycaster.castRay(t);if(!e)return;const n=this._dimensions.find((t=>t.boundingBox===e.object));if(n){const t=this._dimensions.indexOf(n);this._dimensions.splice(t,1),n.dispose(),this.onDelete.trigger(n)}}deleteAll(){this._dimensions.forEach((t=>{t.dispose(),this.onDelete.trigger(t)})),this._dimensions=[]}cancelDrawing(){var t;this._temp.dimension&&(this._temp.isDragging=!1,null===(t=this._temp.dimension)||void 0===t||t.dispose(),this._temp.dimension=void 0)}drawStart(t){const e=t?[t]:void 0,n=this._raycaster.castRay(e);n&&(this._temp.isDragging=!0,this._temp.start=t?n.point:this.getClosestVertex(n))}drawInProcess(){const t=this._raycaster.castRay();if(!t)return;const e=this.getClosestVertex(t);e&&(this._temp.end=e,this._temp.dimension||(this._temp.dimension=this.drawDimension()),this._temp.dimension.endPoint=this._temp.end)}drawEnd(){this._temp.dimension&&(this._temp.dimension.createBoundingBox(),this._dimensions.push(this._temp.dimension),this._temp.dimension=void 0,this._temp.isDragging=!1,this.onCreate.trigger(this._temp.dimension))}newEndpointMesh(){const t=Ub.getDefaultEndpointGeometry(),e=new dd({color:0,depthTest:!1});return new Wd(t,e)}drawDimension(){return new Fb(this.components,{start:this._temp.start,end:this._temp.end,lineMaterial:this._lineMaterial,endpoint:this._endpointMesh})}getBoundingBoxes(){return this._dimensions.map((t=>t.boundingBox)).filter((t=>void 0!==t))}static getDefaultEndpointGeometry(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.4;const e=new cv(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,t);return e.translate(0,-t/2,0),e.rotateX(-Math.PI/2),e}getClosestVertex(t){let e=new Vu,n=!1,i=Number.MAX_SAFE_INTEGER;const r=Ub.getVertices(t);return null===r||void 0===r||r.forEach((r=>{if(!r)return;const s=t.point.distanceTo(r);s>i||s>this.snapDistance||(n=!0,e=r,i=t.point.distanceTo(r))})),n?e:t.point}static getVertices(t){const e=t.object;if(!t.face||!e)return null;const n=e.geometry;return[Ub.getVertex(t.face.a,n),Ub.getVertex(t.face.b,n),Ub.getVertex(t.face.c,n)].map((t=>null===t||void 0===t?void 0:t.applyMatrix4(e.matrixWorld)))}static getVertex(t,e){if(void 0===t)return null;const n=e.attributes.position;return new Vu(n.getX(t),n.getY(t),n.getZ(t))}}class Bb extends wb{constructor(t){super(),this.name="SimpleGrid",this.enabled=!0,this._disposer=new Pb,this._grid=new nE(50,50);t.scene.get().add(this._grid)}get visible(){return this._grid.visible}set visible(t){this._grid.visible=t}get(){return this._grid}dispose(){this._disposer.dispose(this._grid)}}class zb extends wb{constructor(){super(...arguments),this.clippingPlanes=[]}togglePlane(t,e,n){e.isLocal=n;const i=this.clippingPlanes.indexOf(e);t&&-1===i?this.clippingPlanes.push(e):!t&&i>-1&&this.clippingPlanes.splice(i,1);this.get().clippingPlanes=this.clippingPlanes.filter((t=>!t.isLocal))}}class Gb extends zb{constructor(t,e){super(),this.components=t,this.container=e,this.name="SimpleRenderer",this.enabled=!0,this.beforeUpdate=new Mx,this.afterUpdate=new Mx,this._renderer2D=new Mb,this._renderer=new ry({antialias:!0,alpha:!0}),this._renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.setupRenderers(),this.setupEvents(),this.resize()}get(){return this._renderer}update(t){var e,n;this.beforeUpdate.trigger(this);const i=null===(e=this.components.scene)||void 0===e?void 0:e.get(),r=null===(n=this.components.camera)||void 0===n?void 0:n.get();i&&r&&(this._renderer.render(i,r),this._renderer2D.render(i,r),this.afterUpdate.trigger(this))}dispose(){this.enabled=!1,this._renderer.domElement.remove(),this._renderer.dispose(),this.afterUpdate.reset(),this.beforeUpdate.reset()}getSize(){return new Du(this._renderer.domElement.clientWidth,this._renderer.domElement.clientHeight)}resize(){const t=this.container.clientWidth,e=this.container.clientHeight;this._renderer.setSize(t,e),this._renderer2D.setSize(t,e)}setupRenderers(){this._renderer.localClippingEnabled=!0,this.container.appendChild(this._renderer.domElement),this._renderer2D.domElement.style.position="absolute",this._renderer2D.domElement.style.top="0px",this._renderer2D.domElement.style.pointerEvents="none",this.container.appendChild(this._renderer2D.domElement)}setupEvents(){window.addEventListener("resize",(()=>{this.resize()}))}}class Hb extends wb{constructor(t){super(),this.enabled=!0,this.name="SimpleScene",this._disposer=new Pb,this._scene=new ay,this._scene.background=new pd(13421772)}get(){return this._scene}dispose(){for(const t of this._scene.children){const e=t;e.geometry&&this._disposer.dispose(e)}this._scene.children=[]}}class jb extends wb{constructor(t,e){super(),this.components=t,this.PlaneType=e,this.name="SimpleClipper",this.onCreate=new Mx,this.onDelete=new Mx,this._material=new dd({color:16776960,side:Fl,transparent:!0,opacity:.2}),this.orthogonalY=!1,this.toleranceOrthogonalY=.7,this.onStartDragging=new Mx,this.onEndDragging=new Mx,this._planes=[],this._size=5,this._enabled=!1,this._onStartDragging=()=>{this.onStartDragging.trigger()},this._onEndDragging=()=>{this.onEndDragging.trigger()}}get enabled(){return this._enabled}set enabled(t){this._enabled=t;for(const e of this.planes3D)e.enabled=t;this.updateMaterials()}get material(){return this._material}set material(t){this._material=t;for(const e of this._planes)e.planeMaterial=t}get size(){return this._size}set size(t){this._size=t;for(const e of this._planes)e.size=t}get planes3D(){return this._planes.filter((t=>!t.isPlan))}get(){return this._planes}dispose(){this._enabled=!1;for(const t of this._planes)t.dispose();this._planes.length=0,this._material.dispose(),this.onStartDragging.reset(),this.onEndDragging.reset()}create(){if(!this.enabled)return;const t=this.components.raycaster.castRay();t&&this.createPlaneFromIntersection(t)}createFromNormalAndCoplanarPoint(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.newPlane(e,t,n);return this.updateMaterials(),i}delete(t){this.enabled&&(t||(t=this.pickPlane()),t&&this.deletePlane(t))}deleteAll(){for(;this._planes.length>0;)this.delete(this._planes[0])}deletePlane(t){const e=this._planes.indexOf(t);-1!==e&&(this._planes.splice(e,1),this.components.renderer.togglePlane(!1,t.get()),t.dispose(),this.updateMaterials(),this.onDelete.trigger(t))}pickPlane(){const t=this.getAllPlaneMeshes(),e=this.components.raycaster.castRay(t);if(e){const t=e.object;return this._planes.find((e=>e.meshes.includes(t)))}}getAllPlaneMeshes(){const t=[];for(const e of this.planes3D)t.push(...e.meshes);return t}createPlaneFromIntersection(t){var e;const n=t.point.distanceTo(new Vu(0,0,0)),i=null===(e=t.face)||void 0===e?void 0:e.normal;if(!n||!i)return;const r=this.getWorldNormal(t,i),s=this.newPlane(t.point,r.negate(),!1);this.components.renderer.togglePlane(!0,s.get()),this.updateMaterials()}getWorldNormal(t,e){const n=(new Ou).getNormalMatrix(t.object.matrixWorld),i=e.clone().applyMatrix3(n).normalize();return this.normalizePlaneDirectionY(i),i}normalizePlaneDirectionY(t){this.orthogonalY&&(t.y>this.toleranceOrthogonalY&&(t.x=0,t.y=1,t.z=0),t.y<-this.toleranceOrthogonalY&&(t.x=0,t.y=-1,t.z=0))}newPlane(t,e,n){const i=this.newPlaneInstance(t,e,n);return i.onStartDragging.on(this._onStartDragging),i.onEndDragging.on(this._onEndDragging),this._planes.push(i),this.onCreate.trigger(i),i}newPlaneInstance(t,e,n){return new this.PlaneType(this.components,t,e,this.size,this._material,n)}updateMaterials(){const t=this.components.renderer.clippingPlanes;this.components.meshes.forEach((e=>{Array.isArray(e.material)?e.material.forEach((e=>e.clippingPlanes=t)):e.material.clippingPlanes=t}))}}const Vb=new jT,Wb=new Vu,Zb=new Vu,Yb=new ju,qb={X:new Vu(1,0,0),Y:new Vu(0,1,0),Z:new Vu(0,0,1)},Xb={type:"change"},Kb={type:"mouseDown"},Qb={type:"mouseUp",mode:null},Jb={type:"objectChange"};class $b extends Zp{constructor(t,e){super(),void 0===e&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),e=document),this.visible=!1,this.domElement=e,this.domElement.style.touchAction="none";const n=new TI;this._gizmo=n,this.add(n);const i=new EI;this._plane=i,this.add(i);const r=this;function s(t,e){let s=e;Object.defineProperty(r,t,{get:function(){return void 0!==s?s:e},set:function(e){s!==e&&(s=e,i[t]=e,n[t]=e,r.dispatchEvent({type:t+"-changed",value:e}),r.dispatchEvent(Xb))}}),r[t]=e,i[t]=e,n[t]=e}s("camera",t),s("object",void 0),s("enabled",!0),s("axis",null),s("mode","translate"),s("translationSnap",null),s("rotationSnap",null),s("scaleSnap",null),s("space","world"),s("size",1),s("dragging",!1),s("showX",!0),s("showY",!0),s("showZ",!0);const o=new Vu,a=new Vu,l=new ju,h=new ju,c=new Vu,u=new ju,p=new Vu,d=new Vu,f=new Vu,m=new Vu;s("worldPosition",o),s("worldPositionStart",a),s("worldQuaternion",l),s("worldQuaternionStart",h),s("cameraPosition",c),s("cameraQuaternion",u),s("pointStart",p),s("pointEnd",d),s("rotationAxis",f),s("rotationAngle",0),s("eye",m),this._offset=new Vu,this._startNorm=new Vu,this._endNorm=new Vu,this._cameraScale=new Vu,this._parentPosition=new Vu,this._parentQuaternion=new ju,this._parentQuaternionInv=new ju,this._parentScale=new Vu,this._worldScaleStart=new Vu,this._worldQuaternionInv=new ju,this._worldScale=new Vu,this._positionStart=new Vu,this._quaternionStart=new ju,this._scaleStart=new Vu,this._getPointer=tI.bind(this),this._onPointerDown=nI.bind(this),this._onPointerHover=eI.bind(this),this._onPointerMove=iI.bind(this),this._onPointerUp=rI.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(t){if(void 0===this.object||!0===this.dragging)return;Vb.setFromCamera(t,this.camera);const e=sI(this._gizmo.picker[this.mode],Vb);this.axis=e?e.object.name:null}pointerDown(t){if(void 0!==this.object&&!0!==this.dragging&&0===t.button&&null!==this.axis){Vb.setFromCamera(t,this.camera);const e=sI(this._plane,Vb,!0);e&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(e.point).sub(this.worldPositionStart)),this.dragging=!0,Kb.mode=this.mode,this.dispatchEvent(Kb)}}pointerMove(t){const e=this.axis,n=this.mode,i=this.object;let r=this.space;if("scale"===n?r="local":"E"!==e&&"XYZE"!==e&&"XYZ"!==e||(r="world"),void 0===i||null===e||!1===this.dragging||-1!==t.button)return;Vb.setFromCamera(t,this.camera);const s=sI(this._plane,Vb,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),"translate"===n)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===r&&"XYZ"!==e&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===e.indexOf("X")&&(this._offset.x=0),-1===e.indexOf("Y")&&(this._offset.y=0),-1===e.indexOf("Z")&&(this._offset.z=0),"local"===r&&"XYZ"!==e?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),i.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===r&&(i.position.applyQuaternion(Yb.copy(this._quaternionStart).invert()),-1!==e.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.position.applyQuaternion(this._quaternionStart)),"world"===r&&(i.parent&&i.position.add(Wb.setFromMatrixPosition(i.parent.matrixWorld)),-1!==e.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.parent&&i.position.sub(Wb.setFromMatrixPosition(i.parent.matrixWorld))));else if("scale"===n){if(-1!==e.search("XYZ")){let t=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(t*=-1),Zb.set(t,t,t)}else Wb.copy(this.pointStart),Zb.copy(this.pointEnd),Wb.applyQuaternion(this._worldQuaternionInv),Zb.applyQuaternion(this._worldQuaternionInv),Zb.divide(Wb),-1===e.search("X")&&(Zb.x=1),-1===e.search("Y")&&(Zb.y=1),-1===e.search("Z")&&(Zb.z=1);i.scale.copy(this._scaleStart).multiply(Zb),this.scaleSnap&&(-1!==e.search("X")&&(i.scale.x=Math.round(i.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Y")&&(i.scale.y=Math.round(i.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Z")&&(i.scale.z=Math.round(i.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this._offset.copy(this.pointEnd).sub(this.pointStart);const t=20/this.worldPosition.distanceTo(Wb.setFromMatrixPosition(this.camera.matrixWorld));"E"===e?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===e?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Wb.copy(this.rotationAxis).cross(this.eye))*t):"X"!==e&&"Y"!==e&&"Z"!==e||(this.rotationAxis.copy(qb[e]),Wb.copy(qb[e]),"local"===r&&Wb.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(Wb.cross(this.eye).normalize())*t),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===r&&"E"!==e&&"XYZE"!==e?(i.quaternion.copy(this._quaternionStart),i.quaternion.multiply(Yb.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),i.quaternion.copy(Yb.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),i.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(Xb),this.dispatchEvent(Jb)}}pointerUp(t){0===t.button&&(this.dragging&&null!==this.axis&&(Qb.mode=this.mode,this.dispatchEvent(Qb)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()}))}attach(t){return this.object=t,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}getRaycaster(){return Vb}getMode(){return this.mode}setMode(t){this.mode=t}setTranslationSnap(t){this.translationSnap=t}setRotationSnap(t){this.rotationSnap=t}setScaleSnap(t){this.scaleSnap=t}setSize(t){this.size=t}setSpace(t){this.space=t}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function tI(t){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:t.button};{const e=this.domElement.getBoundingClientRect();return{x:(t.clientX-e.left)/e.width*2-1,y:-(t.clientY-e.top)/e.height*2+1,button:t.button}}}function eI(t){if(this.enabled)switch(t.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(t))}}function nI(t){this.enabled&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(t)),this.pointerDown(this._getPointer(t)))}function iI(t){this.enabled&&this.pointerMove(this._getPointer(t))}function rI(t){this.enabled&&(this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(t)))}function sI(t,e,n){const i=e.intersectObject(t,!0);for(let r=0;r<i.length;r++)if(i[r].object.visible||n)return i[r];return!1}$b.prototype.isTransformControls=!0;const oI=new Op,aI=new Vu(0,1,0),lI=new Vu(0,0,0),hI=new Ep,cI=new ju,uI=new ju,pI=new Vu,dI=new Ep,fI=new Vu(1,0,0),mI=new Vu(0,1,0),gI=new Vu(0,0,1),yI=new Vu,vI=new Vu,_I=new Vu;class TI extends Zp{constructor(){super(),this.type="TransformControlsGizmo";const t=new dd({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),e=new Vy({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),n=t.clone();n.opacity=.15;const i=e.clone();i.opacity=.5;const r=t.clone();r.color.setHex(16711680);const s=t.clone();s.color.setHex(65280);const o=t.clone();o.color.setHex(255);const a=t.clone();a.color.setHex(16711680),a.opacity=.5;const l=t.clone();l.color.setHex(65280),l.opacity=.5;const h=t.clone();h.color.setHex(255),h.opacity=.5;const c=t.clone();c.opacity=.25;const u=t.clone();u.color.setHex(16776960),u.opacity=.25;t.clone().color.setHex(16776960);const p=t.clone();p.color.setHex(7895160);const d=new hv(0,.04,.1,12);d.translate(0,.05,0);const f=new Yd(.08,.08,.08);f.translate(0,.04,0);const m=new Rd;m.setAttribute("position",new _d([0,0,0,1,0,0],3));const g=new hv(.0075,.0075,.5,3);function y(t,e){const n=new v_(t,.0075,3,64,e*Math.PI*2);return n.rotateY(Math.PI/2),n.rotateX(Math.PI/2),n}g.translate(0,.25,0);const v={X:[[new Wd(d,r),[.5,0,0],[0,0,-Math.PI/2]],[new Wd(d,r),[-.5,0,0],[0,0,Math.PI/2]],[new Wd(g,r),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new Wd(d,s),[0,.5,0]],[new Wd(d,s),[0,-.5,0],[Math.PI,0,0]],[new Wd(g,s)]],Z:[[new Wd(d,o),[0,0,.5],[Math.PI/2,0,0]],[new Wd(d,o),[0,0,-.5],[-Math.PI/2,0,0]],[new Wd(g,o),null,[Math.PI/2,0,0]]],XYZ:[[new Wd(new m_(.1,0),c.clone()),[0,0,0]]],XY:[[new Wd(new Yd(.15,.15,.01),h.clone()),[.15,.15,0]]],YZ:[[new Wd(new Yd(.15,.15,.01),a.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Wd(new Yd(.15,.15,.01),l.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},_={X:[[new Wd(new hv(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new Wd(new hv(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Wd(new hv(.2,0,.6,4),n),[0,.3,0]],[new Wd(new hv(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Wd(new hv(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new Wd(new hv(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new Wd(new m_(.2,0),n)]],XY:[[new Wd(new Yd(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new Wd(new Yd(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Wd(new Yd(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]]},T={START:[[new Wd(new m_(.01,2),i),null,null,null,"helper"]],END:[[new Wd(new m_(.01,2),i),null,null,null,"helper"]],DELTA:[[new Ky(function(){const t=new Rd;return t.setAttribute("position",new _d([0,0,0,1,1,1],3)),t}(),i),null,null,null,"helper"]],X:[[new Ky(m,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Ky(m,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Ky(m,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},E={XYZE:[[new Wd(y(.5,1),p),null,[0,Math.PI/2,0]]],X:[[new Wd(y(.5,.5),r)]],Y:[[new Wd(y(.5,.5),s),null,[0,0,-Math.PI/2]]],Z:[[new Wd(y(.5,.5),o),null,[0,Math.PI/2,0]]],E:[[new Wd(y(.75,1),u),null,[0,Math.PI/2,0]]]},x={AXIS:[[new Ky(m,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},b={XYZE:[[new Wd(new y_(.25,10,8),n)]],X:[[new Wd(new v_(.5,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Wd(new v_(.5,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Wd(new v_(.5,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Wd(new v_(.75,.1,2,24),n)]]},I={X:[[new Wd(f,r),[.5,0,0],[0,0,-Math.PI/2]],[new Wd(g,r),[0,0,0],[0,0,-Math.PI/2]],[new Wd(f,r),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new Wd(f,s),[0,.5,0]],[new Wd(g,s)],[new Wd(f,s),[0,-.5,0],[0,0,Math.PI]]],Z:[[new Wd(f,o),[0,0,.5],[Math.PI/2,0,0]],[new Wd(g,o),[0,0,0],[Math.PI/2,0,0]],[new Wd(f,o),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new Wd(new Yd(.15,.15,.01),h),[.15,.15,0]]],YZ:[[new Wd(new Yd(.15,.15,.01),a),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Wd(new Yd(.15,.15,.01),l),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Wd(new Yd(.1,.1,.1),c.clone())]]},w={X:[[new Wd(new hv(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new Wd(new hv(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Wd(new hv(.2,0,.6,4),n),[0,.3,0]],[new Wd(new hv(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Wd(new hv(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new Wd(new hv(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new Wd(new Yd(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new Wd(new Yd(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Wd(new Yd(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Wd(new Yd(.2,.2,.2),n),[0,0,0]]]},S={X:[[new Ky(m,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Ky(m,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Ky(m,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function R(t){const e=new Zp;for(const n in t)for(let i=t[n].length;i--;){const r=t[n][i][0].clone(),s=t[n][i][1],o=t[n][i][2],a=t[n][i][3],l=t[n][i][4];r.name=n,r.tag=l,s&&r.position.set(s[0],s[1],s[2]),o&&r.rotation.set(o[0],o[1],o[2]),a&&r.scale.set(a[0],a[1],a[2]),r.updateMatrix();const h=r.geometry.clone();h.applyMatrix4(r.matrix),r.geometry=h,r.renderOrder=1/0,r.position.set(0,0,0),r.rotation.set(0,0,0),r.scale.set(1,1,1),e.add(r)}return e}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=R(v)),this.add(this.gizmo.rotate=R(E)),this.add(this.gizmo.scale=R(I)),this.add(this.picker.translate=R(_)),this.add(this.picker.rotate=R(b)),this.add(this.picker.scale=R(w)),this.add(this.helper.translate=R(T)),this.add(this.helper.rotate=R(x)),this.add(this.helper.scale=R(S)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(t){const e="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:uI;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let n=[];n=n.concat(this.picker[this.mode].children),n=n.concat(this.gizmo[this.mode].children),n=n.concat(this.helper[this.mode].children);for(let i=0;i<n.length;i++){const t=n[i];let r;if(t.visible=!0,t.rotation.set(0,0,0),t.position.copy(this.worldPosition),r=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),t.scale.set(1,1,1).multiplyScalar(r*this.size/4),"helper"!==t.tag){if(t.quaternion.copy(e),"translate"===this.mode||"scale"===this.mode){const n=.99,i=.2;"X"===t.name&&Math.abs(aI.copy(fI).applyQuaternion(e).dot(this.eye))>n&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"Y"===t.name&&Math.abs(aI.copy(mI).applyQuaternion(e).dot(this.eye))>n&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"Z"===t.name&&Math.abs(aI.copy(gI).applyQuaternion(e).dot(this.eye))>n&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"XY"===t.name&&Math.abs(aI.copy(gI).applyQuaternion(e).dot(this.eye))<i&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"YZ"===t.name&&Math.abs(aI.copy(fI).applyQuaternion(e).dot(this.eye))<i&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"XZ"===t.name&&Math.abs(aI.copy(mI).applyQuaternion(e).dot(this.eye))<i&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1)}else"rotate"===this.mode&&(cI.copy(e),aI.copy(this.eye).applyQuaternion(Yb.copy(e).invert()),-1!==t.name.search("E")&&t.quaternion.setFromRotationMatrix(hI.lookAt(this.eye,lI,mI)),"X"===t.name&&(Yb.setFromAxisAngle(fI,Math.atan2(-aI.y,aI.z)),Yb.multiplyQuaternions(cI,Yb),t.quaternion.copy(Yb)),"Y"===t.name&&(Yb.setFromAxisAngle(mI,Math.atan2(aI.x,aI.z)),Yb.multiplyQuaternions(cI,Yb),t.quaternion.copy(Yb)),"Z"===t.name&&(Yb.setFromAxisAngle(gI,Math.atan2(aI.y,aI.x)),Yb.multiplyQuaternions(cI,Yb),t.quaternion.copy(Yb)));t.visible=t.visible&&(-1===t.name.indexOf("X")||this.showX),t.visible=t.visible&&(-1===t.name.indexOf("Y")||this.showY),t.visible=t.visible&&(-1===t.name.indexOf("Z")||this.showZ),t.visible=t.visible&&(-1===t.name.indexOf("E")||this.showX&&this.showY&&this.showZ),t.material._color=t.material._color||t.material.color.clone(),t.material._opacity=t.material._opacity||t.material.opacity,t.material.color.copy(t.material._color),t.material.opacity=t.material._opacity,this.enabled&&this.axis&&(t.name===this.axis||this.axis.split("").some((function(e){return t.name===e})))&&(t.material.color.setHex(16776960),t.material.opacity=1)}else t.visible=!1,"AXIS"===t.name?(t.position.copy(this.worldPositionStart),t.visible=!!this.axis,"X"===this.axis&&(Yb.setFromEuler(oI.set(0,0,0)),t.quaternion.copy(e).multiply(Yb),Math.abs(aI.copy(fI).applyQuaternion(e).dot(this.eye))>.9&&(t.visible=!1)),"Y"===this.axis&&(Yb.setFromEuler(oI.set(0,0,Math.PI/2)),t.quaternion.copy(e).multiply(Yb),Math.abs(aI.copy(mI).applyQuaternion(e).dot(this.eye))>.9&&(t.visible=!1)),"Z"===this.axis&&(Yb.setFromEuler(oI.set(0,Math.PI/2,0)),t.quaternion.copy(e).multiply(Yb),Math.abs(aI.copy(gI).applyQuaternion(e).dot(this.eye))>.9&&(t.visible=!1)),"XYZE"===this.axis&&(Yb.setFromEuler(oI.set(0,Math.PI/2,0)),aI.copy(this.rotationAxis),t.quaternion.setFromRotationMatrix(hI.lookAt(lI,aI,mI)),t.quaternion.multiply(Yb),t.visible=this.dragging),"E"===this.axis&&(t.visible=!1)):"START"===t.name?(t.position.copy(this.worldPositionStart),t.visible=this.dragging):"END"===t.name?(t.position.copy(this.worldPosition),t.visible=this.dragging):"DELTA"===t.name?(t.position.copy(this.worldPositionStart),t.quaternion.copy(this.worldQuaternionStart),Wb.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Wb.applyQuaternion(this.worldQuaternionStart.clone().invert()),t.scale.copy(Wb),t.visible=this.dragging):(t.quaternion.copy(e),this.dragging?t.position.copy(this.worldPositionStart):t.position.copy(this.worldPosition),this.axis&&(t.visible=-1!==this.axis.search(t.name)))}super.updateMatrixWorld(t)}}TI.prototype.isTransformControlsGizmo=!0;class EI extends Wd{constructor(){super(new ff(1e5,1e5,2,2),new dd({visible:!1,wireframe:!0,side:Fl,transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane"}updateMatrixWorld(t){let e=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(e="local"),yI.copy(fI).applyQuaternion("local"===e?this.worldQuaternion:uI),vI.copy(mI).applyQuaternion("local"===e?this.worldQuaternion:uI),_I.copy(gI).applyQuaternion("local"===e?this.worldQuaternion:uI),aI.copy(vI),this.mode){case"translate":case"scale":switch(this.axis){case"X":aI.copy(this.eye).cross(yI),pI.copy(yI).cross(aI);break;case"Y":aI.copy(this.eye).cross(vI),pI.copy(vI).cross(aI);break;case"Z":aI.copy(this.eye).cross(_I),pI.copy(_I).cross(aI);break;case"XY":pI.copy(_I);break;case"YZ":pI.copy(yI);break;case"XZ":aI.copy(_I),pI.copy(vI);break;case"XYZ":case"E":pI.set(0,0,0)}break;default:pI.set(0,0,0)}0===pI.length()?this.quaternion.copy(this.cameraQuaternion):(dI.lookAt(Wb.set(0,0,0),pI,aI),this.quaternion.setFromRotationMatrix(dI)),super.updateMatrixWorld(t)}}EI.prototype.isTransformControlsPlane=!0;class xI extends wb{constructor(t,e,n,i,r,s){super(),this.name="SimplePlane",this.afterUpdate=new Mx,this.beforeUpdate=new Mx,this.onStartDragging=new Mx,this.onEndDragging=new Mx,this.isPlan=!1,this._plane=new lf,this._visible=!0,this._enabled=!0,this._arrowBoundBox=new Wd,this._hiddenMaterial=new dd({visible:!1}),this._components=t,this._normal=n,this._origin=e,this.isPlan=s,this._components.renderer.togglePlane(!0,this._plane),this._planeMesh=xI.newPlaneMesh(i,r),this._helper=this.newHelper(),this._controls=this.newTransformControls(),this._plane.setFromNormalAndCoplanarPoint(n,e),s||this.setupEvents()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._components.renderer.togglePlane(t,this._plane),this._visible=t,this._controls.visible=t,this._helper.visible=t}get meshes(){return[this._planeMesh,this._arrowBoundBox]}get planeMaterial(){return this._planeMesh.material}set planeMaterial(t){this._planeMesh.material=t}get size(){return this._planeMesh.scale.x}set size(t){this._planeMesh.scale.set(t,t,t)}update(){this._enabled&&(this.beforeUpdate.trigger(this._plane),this._plane.setFromNormalAndCoplanarPoint(this._normal,this._helper.position),this.afterUpdate.trigger(this._plane))}get(){return this._plane}dispose(){this._enabled=!1,this.beforeUpdate.reset(),this.afterUpdate.reset(),this.onStartDragging.reset(),this.onEndDragging.reset(),this._helper.removeFromParent(),this._components.renderer.togglePlane(!1,this._plane),this._arrowBoundBox.removeFromParent(),this._arrowBoundBox.geometry.dispose(),this._planeMesh.geometry.dispose(),this._controls.removeFromParent(),this._controls.dispose()}newTransformControls(){const t=this._components.camera.get(),e=this._components.renderer.get().domElement,n=new $b(t,e);return this.initializeControls(n),this.isPlan||this._components.scene.get().add(n),n}initializeControls(t){t.attach(this._helper),t.showX=!1,t.showY=!1,t.setSpace("local"),this.createArrowBoundingBox(),t.children[0].children[0].add(this._arrowBoundBox)}createArrowBoundingBox(){this._arrowBoundBox.geometry=new hv(.18,.18,1.2),this._arrowBoundBox.material=this._hiddenMaterial,this._arrowBoundBox.rotateX(Math.PI/2),this._arrowBoundBox.updateMatrix(),this._arrowBoundBox.geometry.applyMatrix4(this._arrowBoundBox.matrix)}setupEvents(){this._controls.addEventListener("change",(()=>this.update())),this._controls.addEventListener("dragging-changed",(t=>this.onDraggingChanged(t)))}onDraggingChanged(t){this._enabled&&(this._visible=!t.value,this.preventCameraMovement(),this.notifyDraggingChanged(t))}notifyDraggingChanged(t){t.value?this.onStartDragging.trigger():this.onEndDragging.trigger()}preventCameraMovement(){this._components.camera.enabled=this._visible}newHelper(){const t=new Zp;return t.lookAt(this._normal),t.position.copy(this._origin),this._planeMesh.position.z+=.01,t.add(this._planeMesh),this.isPlan||this._components.scene.get().add(t),t}static newPlaneMesh(t,e){const n=new ff(1),i=new Wd(n,e);return i.scale.set(t,t,t),i}}class bI{constructor(){this.tools=[]}add(t){this.tools.push(t)}remove(t){const e=this.tools.findIndex((e=>e===t));return e>-1&&(this.tools.splice(e,1),!0)}get(t){return this.tools.find((e=>e.name===t))}update(t){for(const e of this.tools)e.enabled&&e.isUpdateable()&&e.update(t)}dispose(){for(const t of this.tools)t.enabled=!1,t.isDisposeable()&&t.dispose();this.tools=[]}}class II{constructor(){this.meshes=[],this._enabled=!0,this.update=()=>{if(!this._enabled)return;const t=this._clock.getDelta();II.update(this.scene,t),II.update(this.renderer,t),II.update(this.camera,t),this.tools.update(t);this.renderer.get().setAnimationLoop(this.update)},this._clock=new wT,this.tools=new bI,II.setupBVH()}get renderer(){if(!this._renderer)throw new Error("Renderer hasn't been initialised.");return this._renderer}set renderer(t){this._renderer=t}get scene(){if(!this._scene)throw new Error("Scene hasn't been initialised.");return this._scene}set scene(t){this._scene=t}get camera(){if(!this._camera)throw new Error("Camera hasn't been initialised.");return this._camera}set camera(t){this._camera=t}get raycaster(){if(!this._raycaster)throw new Error("Raycaster hasn't been initialised.");return this._raycaster}set raycaster(t){this._raycaster=t}init(){this._clock.start(),this.update()}dispose(){this._enabled=!1,this.tools.dispose(),this.renderer.isDisposeable()&&this.renderer.dispose(),this.scene.isDisposeable()&&this.scene.dispose(),this.camera.isDisposeable()&&this.camera.dispose()}static update(t,e){t.isUpdateable()&&t.enabled&&t.update(e)}static setupBVH(){Rd.prototype.computeBoundsTree=Ox,Rd.prototype.disposeBoundsTree=Nx,Wd.prototype.raycast=Dx}}class wI extends q_{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new DI(t)})),this.register((function(t){return new LI(t)})),this.register((function(t){return new kI(t)})),this.register((function(t){return new OI(t)})),this.register((function(t){return new NI(t)})),this.register((function(t){return new MI(t)})),this.register((function(t){return new PI(t)})),this.register((function(t){return new FI(t)})),this.register((function(t){return new CI(t)})),this.register((function(t){return new UI(t)}))}load(t,e,n,i){const r=this;let s;s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:_T.extractUrlBase(t),this.manager.itemStart(t);const o=function(e){i?i(e):console.error(e),r.manager.itemError(t),r.manager.itemEnd(t)},a=new K_(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){try{r.parse(n,s,(function(n){e(n),r.manager.itemEnd(t)}),o)}catch(uJ){o(uJ)}}),n,o)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,i){let r;const s={},o={};if("string"===typeof t)r=t;else{if(_T.decodeText(new Uint8Array(t,0,4))===BI){try{s[RI.KHR_BINARY_GLTF]=new HI(t)}catch(h){return void(i&&i(h))}r=s[RI.KHR_BINARY_GLTF].content}else r=_T.decodeText(new Uint8Array(t))}const a=JSON.parse(r);if(void 0===a.asset||a.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new Tw(a,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const t=this.pluginCallbacks[c](l);o[t.name]=t,s[t.name]=!0}if(a.extensionsUsed)for(let c=0;c<a.extensionsUsed.length;++c){const t=a.extensionsUsed[c],e=a.extensionsRequired||[];switch(t){case RI.KHR_MATERIALS_UNLIT:s[t]=new AI;break;case RI.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:s[t]=new ZI;break;case RI.KHR_DRACO_MESH_COMPRESSION:s[t]=new jI(a,this.dracoLoader);break;case RI.KHR_TEXTURE_TRANSFORM:s[t]=new VI;break;case RI.KHR_MESH_QUANTIZATION:s[t]=new YI;break;default:e.indexOf(t)>=0&&void 0===o[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}l.setExtensions(s),l.setPlugins(o),l.parse(n,i)}parseAsync(t,e){const n=this;return new Promise((function(i,r){n.parse(t,e,i,r)}))}}function SI(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const RI={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class CI{constructor(t){this.parser=t,this.name=RI.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,i=e.length;n<i;n++){const i=e[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&t._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let i=e.cache.get(n);if(i)return i;const r=e.json,s=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let o;const a=new pd(16777215);void 0!==s.color&&a.fromArray(s.color);const l=void 0!==s.range?s.range:0;switch(s.type){case"directional":o=new fT(a),o.target.position.set(0,0,-1),o.add(o.target);break;case"point":o=new pT(a),o.distance=l;break;case"spot":o=new aT(a),o.distance=l,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,o.angle=s.spot.outerConeAngle,o.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return o.position.set(0,0,0),o.decay=2,void 0!==s.intensity&&(o.intensity=s.intensity),o.name=e.createUniqueName(s.name||"light_"+t),i=Promise.resolve(o),e.cache.add(n,i),i}createNodeAttachment(t){const e=this,n=this.parser,i=n.json.nodes[t],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(t){return n._getNodeRef(e.cache,r,t)}))}}class AI{constructor(){this.name=RI.KHR_MATERIALS_UNLIT}getMaterialType(){return dd}extendParams(t,e,n){const i=[];t.color=new pd(1,1,1),t.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const e=r.baseColorFactor;t.color.fromArray(e),t.opacity=e[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(t,"map",r.baseColorTexture))}return Promise.all(i)}}class DI{constructor(t){this.parser=t,this.name=RI.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?b_:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];if(void 0!==s.clearcoatFactor&&(e.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&r.push(n.assignTexture(e,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(e.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&r.push(n.assignTexture(e,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(r.push(n.assignTexture(e,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const t=s.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new Du(t,t)}return Promise.all(r)}}class OI{constructor(t){this.parser=t,this.name=RI.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?b_:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new pd(0,0,0),e.sheenRoughness=0,e.sheen=1;const s=i.extensions[this.name];return void 0!==s.sheenColorFactor&&e.sheenColor.fromArray(s.sheenColorFactor),void 0!==s.sheenRoughnessFactor&&(e.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&r.push(n.assignTexture(e,"sheenColorMap",s.sheenColorTexture)),void 0!==s.sheenRoughnessTexture&&r.push(n.assignTexture(e,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(r)}}class NI{constructor(t){this.parser=t,this.name=RI.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?b_:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];return void 0!==s.transmissionFactor&&(e.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&r.push(n.assignTexture(e,"transmissionMap",s.transmissionTexture)),Promise.all(r)}}class MI{constructor(t){this.parser=t,this.name=RI.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?b_:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];e.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&r.push(n.assignTexture(e,"thicknessMap",s.thicknessTexture)),e.attenuationDistance=s.attenuationDistance||0;const o=s.attenuationColor||[1,1,1];return e.attenuationColor=new pd(o[0],o[1],o[2]),Promise.all(r)}}class PI{constructor(t){this.parser=t,this.name=RI.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?b_:null}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return e.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class FI{constructor(t){this.parser=t,this.name=RI.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?b_:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];e.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&r.push(n.assignTexture(e,"specularIntensityMap",s.specularTexture));const o=s.specularColorFactor||[1,1,1];return e.specularColor=new pd(o[0],o[1],o[2]),void 0!==s.specularColorTexture&&r.push(n.assignTexture(e,"specularColorMap",s.specularColorTexture).then((function(t){t.encoding=ru}))),Promise.all(r)}}class LI{constructor(t){this.parser=t,this.name=RI.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,i=n.textures[t];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],s=n.images[r.source],o=e.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,s,o)}}class kI{constructor(t){this.parser=t,this.name=RI.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,i=n.json,r=i.textures[t];if(!r.extensions||!r.extensions[e])return null;const s=r.extensions[e],o=i.images[s.source];let a=n.textureLoader;if(o.uri){const t=n.options.manager.getHandler(o.uri);null!==t&&(a=t)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(t,o,a);if(i.extensionsRequired&&i.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}class UI{constructor(t){this.name=RI.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const t=n.extensions[this.name],i=this.parser.getDependency("buffer",t.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,r.ready]).then((function(e){const n=t.byteOffset||0,i=t.byteLength||0,s=t.count,o=t.byteStride,a=new ArrayBuffer(s*o),l=new Uint8Array(e[0],n,i);return r.decodeGltfBuffer(new Uint8Array(a),s,o,l,t.mode,t.filter),a}))}return null}}const BI="glTF",zI=1313821514,GI=5130562;class HI{constructor(t){this.name=RI.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12);if(this.header={magic:_T.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==BI)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,i=new DataView(t,12);let r=0;for(;r<n;){const e=i.getUint32(r,!0);r+=4;const n=i.getUint32(r,!0);if(r+=4,n===zI){const n=new Uint8Array(t,12+r,e);this.content=_T.decodeText(n)}else if(n===GI){const n=12+r;this.body=t.slice(n,n+e)}r+=e}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class jI{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=RI.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,i=this.dracoLoader,r=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,o={},a={},l={};for(const h in s){const t=lw[h]||h.toLowerCase();o[t]=s[h]}for(const h in t.attributes){const e=lw[h]||h.toLowerCase();if(void 0!==s[h]){const i=n.accessors[t.attributes[h]],r=rw[i.componentType];l[e]=r,a[e]=!0===i.normalized}}return e.getDependency("bufferView",r).then((function(t){return new Promise((function(e){i.decodeDracoFile(t,(function(t){for(const e in t.attributes){const n=t.attributes[e],i=a[e];void 0!==i&&(n.normalized=i)}e(t)}),o,l)}))}))}}class VI{constructor(){this.name=RI.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class WI extends x_{constructor(t){super(),this.isGLTFSpecularGlossinessMaterial=!0;const e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),s=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),o={specular:{value:(new pd).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(t){for(const e in o)t.uniforms[e]=o[e];t.fragmentShader=t.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",s)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(t){o.specular.value=t}},specularMap:{get:function(){return o.specularMap.value},set:function(t){o.specularMap.value=t,t?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return o.glossiness.value},set:function(t){o.glossiness.value=t}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(t){o.glossinessMap.value=t,t?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class ZI{constructor(){this.name=RI.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return WI}extendParams(t,e,n){const i=e.extensions[this.name];t.color=new pd(1,1,1),t.opacity=1;const r=[];if(Array.isArray(i.diffuseFactor)){const e=i.diffuseFactor;t.color.fromArray(e),t.opacity=e[3]}if(void 0!==i.diffuseTexture&&r.push(n.assignTexture(t,"map",i.diffuseTexture)),t.emissive=new pd(0,0,0),t.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,t.specular=new pd(1,1,1),Array.isArray(i.specularFactor)&&t.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){const e=i.specularGlossinessTexture;r.push(n.assignTexture(t,"glossinessMap",e)),r.push(n.assignTexture(t,"specularMap",e))}return Promise.all(r)}createMaterial(t){const e=new WI(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=uu,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e}}class YI{constructor(){this.name=RI.KHR_MESH_QUANTIZATION}}class qI extends O_{constructor(t,e,n,i){super(t,e,n,i)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i*3+i;for(let s=0;s!==i;s++)e[s]=n[r+s];return e}}qI.prototype.beforeStart_=qI.prototype.copySampleValue_,qI.prototype.afterEnd_=qI.prototype.copySampleValue_,qI.prototype.interpolate_=function(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=2*o,l=3*o,h=i-e,c=(n-e)/h,u=c*c,p=u*c,d=t*l,f=d-l,m=-2*p+3*u,g=p-u,y=1-m,v=g-u+c;for(let _=0;_!==o;_++){const t=s[f+_+o],e=s[f+_+a]*h,n=s[d+_+o],i=s[d+_]*h;r[_]=y*t+v*e+m*n+g*i}return r};const XI=new ju;class KI extends qI{interpolate_(t,e,n,i){const r=super.interpolate_(t,e,n,i);return XI.fromArray(r).normalize().toArray(r),r}}const QI=0,JI=1,$I=2,tw=3,ew=4,nw=5,iw=6,rw={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},sw={9728:Dh,9729:Mh,9984:Oh,9985:Ph,9986:Nh,9987:Fh},ow={33071:Ch,33648:Ah,10497:Rh},aw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},lw={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},hw={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},cw={CUBICSPLINE:void 0,LINEAR:Xc,STEP:qc},uw="OPAQUE",pw="MASK",dw="BLEND";function fw(t,e,n){for(const i in n.extensions)void 0===t[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function mw(t,e){void 0!==e.extras&&("object"===typeof e.extras?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function gw(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let e=0,i=n.length;e<i;e++)t.morphTargetDictionary[n[e]]=e}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function yw(t){const e=t.extensions&&t.extensions[RI.KHR_DRACO_MESH_COMPRESSION];let n;return n=e?"draco:"+e.bufferView+":"+e.indices+":"+vw(e.attributes):t.indices+":"+vw(t.attributes)+":"+t.mode,n}function vw(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function _w(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Tw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new SI,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new ET(this.options.manager):this.textureLoader=new $_(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new K_(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all(this._invokeAll((function(t){return t.beforeRoot&&t.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(e){const s={scene:e[0][i.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:i.asset,parser:n,userData:{}};fw(r,s,i),mw(s,i),Promise.all(n._invokeAll((function(t){return t.afterRoot&&t.afterRoot(s)}))).then((function(){t(s)}))})).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let i=0,r=e.length;i<r;i++){const n=e[i].joints;for(let e=0,i=n.length;e<i;e++)t[n[e]].isBone=!0}for(let i=0,r=t.length;i<r;i++){const e=t[i];void 0!==e.mesh&&(this._addNodeRef(this.meshCache,e.mesh),void 0!==e.skin&&(n[e.mesh].isSkinnedMesh=!0)),void 0!==e.camera&&this._addNodeRef(this.cameraCache,e.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const i=n.clone(),r=(t,e)=>{const n=this.associations.get(t);null!=n&&this.associations.set(e,n);for(const[i,s]of t.children.entries())r(s,e.children[i])};return r(n,i),i.name+="_instance_"+t.uses[e]++,i}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const i=t(e[n]);if(i)return i}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let i=0;i<e.length;i++){const r=t(e[i]);r&&n.push(r)}return n}getDependency(t,e){const n=t+":"+e;let i=this.cache.get(n);if(!i){switch(t){case"scene":i=this.loadScene(e);break;case"node":i=this.loadNode(e);break;case"mesh":i=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":i=this.loadAccessor(e);break;case"bufferView":i=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":i=this.loadBuffer(e);break;case"material":i=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":i=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":i=this.loadSkin(e);break;case"animation":i=this.loadAnimation(e);break;case"camera":i=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(n,i)}return i}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,i=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(i.map((function(e,i){return n.getDependency(t,i)}))),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[RI.KHR_BINARY_GLTF].body);const i=this.options;return new Promise((function(t,r){n.load(_T.resolveURL(e.uri,i.path),t,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){const n=e.byteLength||0,i=e.byteOffset||0;return t.slice(i,i+n)}))}loadAccessor(t){const e=this,n=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);const r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then((function(t){const r=t[0],s=aw[i.type],o=rw[i.componentType],a=o.BYTES_PER_ELEMENT,l=a*s,h=i.byteOffset||0,c=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,u=!0===i.normalized;let p,d;if(c&&c!==l){const t=Math.floor(h/c),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+t+":"+i.count;let l=e.cache.get(n);l||(p=new o(r,t*c,i.count*c/a),l=new ly(p,c/a),e.cache.add(n,l)),d=new cy(l,s,h%c/a,u)}else p=null===r?new o(i.count*s):new o(r,h,i.count*s),d=new gd(p,s,u);if(void 0!==i.sparse){const e=aw.SCALAR,n=rw[i.sparse.indices.componentType],a=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,h=new n(t[1],a,i.sparse.count*e),c=new o(t[2],l,i.sparse.count*s);null!==r&&(d=new gd(d.array.slice(),d.itemSize,d.normalized));for(let t=0,i=h.length;t<i;t++){const e=h[t];if(d.setX(e,c[t*s]),s>=2&&d.setY(e,c[t*s+1]),s>=3&&d.setZ(e,c[t*s+2]),s>=4&&d.setW(e,c[t*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return d}))}loadTexture(t){const e=this.json,n=this.options,i=e.textures[t],r=e.images[i.source];let s=this.textureLoader;if(r.uri){const t=n.manager.getHandler(r.uri);null!==t&&(s=t)}return this.loadTextureImage(t,r,s)}loadTextureImage(t,e,n){const i=this,r=this.json,s=this.options,o=r.textures[t],a=(e.uri||e.bufferView)+":"+o.sampler;if(this.textureCache[a])return this.textureCache[a];const l=self.URL||self.webkitURL;let h=e.uri||"",c=!1;if(void 0!==e.bufferView)h=i.getDependency("bufferView",e.bufferView).then((function(t){c=!0;const n=new Blob([t],{type:e.mimeType});return h=l.createObjectURL(n),h}));else if(void 0===e.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const u=Promise.resolve(h).then((function(t){return new Promise((function(e,i){let r=e;!0===n.isImageBitmapLoader&&(r=function(t){const n=new Uu(t);n.needsUpdate=!0,e(n)}),n.load(_T.resolveURL(t,s.path),r,void 0,i)}))})).then((function(e){!0===c&&l.revokeObjectURL(h),e.flipY=!1,o.name&&(e.name=o.name);const n=(r.samplers||{})[o.sampler]||{};return e.magFilter=sw[n.magFilter]||Mh,e.minFilter=sw[n.minFilter]||Fh,e.wrapS=ow[n.wrapS]||Rh,e.wrapT=ow[n.wrapT]||Rh,i.associations.set(e,{textures:t}),e})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",h),null}));return this.textureCache[a]=u,u}assignTexture(t,e,n){const i=this;return this.getDependency("texture",n.index).then((function(r){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===e&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+e+" not yet supported."),i.extensions[RI.KHR_TEXTURE_TRANSFORM]){const t=void 0!==n.extensions?n.extensions[RI.KHR_TEXTURE_TRANSFORM]:void 0;if(t){const e=i.associations.get(r);r=i.extensions[RI.KHR_TEXTURE_TRANSFORM].extendTexture(r,t),i.associations.set(r,e)}}return t[e]=r,r}))}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const i=void 0===e.attributes.tangent,r=void 0!==e.attributes.color,s=void 0===e.attributes.normal;if(t.isPoints){const t="PointsMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new ev,sd.prototype.copy.call(e,n),e.color.copy(n.color),e.map=n.map,e.sizeAttenuation=!1,this.cache.add(t,e)),n=e}else if(t.isLine){const t="LineBasicMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new Vy,sd.prototype.copy.call(e,n),e.color.copy(n.color),this.cache.add(t,e)),n=e}if(i||r||s){let t="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(t+="specular-glossiness:"),i&&(t+="derivative-tangents:"),r&&(t+="vertex-colors:"),s&&(t+="flat-shading:");let e=this.cache.get(t);e||(e=n.clone(),r&&(e.vertexColors=!0),s&&(e.flatShading=!0),i&&(e.normalScale&&(e.normalScale.y*=-1),e.clearcoatNormalScale&&(e.clearcoatNormalScale.y*=-1)),this.cache.add(t,e),this.associations.set(e,this.associations.get(n))),n=e}n.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),t.material=n}getMaterialType(){return x_}loadMaterial(t){const e=this,n=this.json,i=this.extensions,r=n.materials[t];let s;const o={},a=r.extensions||{},l=[];if(a[RI.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const t=i[RI.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];s=t.getMaterialType(),l.push(t.extendParams(o,r,e))}else if(a[RI.KHR_MATERIALS_UNLIT]){const t=i[RI.KHR_MATERIALS_UNLIT];s=t.getMaterialType(),l.push(t.extendParams(o,r,e))}else{const n=r.pbrMetallicRoughness||{};if(o.color=new pd(1,1,1),o.opacity=1,Array.isArray(n.baseColorFactor)){const t=n.baseColorFactor;o.color.fromArray(t),o.opacity=t[3]}void 0!==n.baseColorTexture&&l.push(e.assignTexture(o,"map",n.baseColorTexture)),o.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,o.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(l.push(e.assignTexture(o,"metalnessMap",n.metallicRoughnessTexture)),l.push(e.assignTexture(o,"roughnessMap",n.metallicRoughnessTexture))),s=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),l.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,o)}))))}!0===r.doubleSided&&(o.side=Fl);const h=r.alphaMode||uw;if(h===dw?(o.transparent=!0,o.depthWrite=!1):(o.format=Xh,o.transparent=!1,h===pw&&(o.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&s!==dd&&(l.push(e.assignTexture(o,"normalMap",r.normalTexture)),o.normalScale=new Du(1,1),void 0!==r.normalTexture.scale)){const t=r.normalTexture.scale;o.normalScale.set(t,t)}return void 0!==r.occlusionTexture&&s!==dd&&(l.push(e.assignTexture(o,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(o.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&s!==dd&&(o.emissive=(new pd).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&s!==dd&&l.push(e.assignTexture(o,"emissiveMap",r.emissiveTexture)),Promise.all(l).then((function(){let n;return n=s===WI?i[RI.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new s(o),r.name&&(n.name=r.name),n.map&&(n.map.encoding=ru),n.emissiveMap&&(n.emissiveMap.encoding=ru),mw(n,r),e.associations.set(n,{materials:t}),r.extensions&&fw(i,n,r),n}))}createUniqueName(t){const e=BT.sanitizeNodeName(t||"");let n=e;for(let i=1;this.nodeNamesUsed[n];++i)n=e+"_"+i;return this.nodeNamesUsed[n]=!0,n}loadGeometries(t){const e=this,n=this.extensions,i=this.primitiveCache;function r(t){return n[RI.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(n){return xw(n,t,e)}))}const s=[];for(let o=0,a=t.length;o<a;o++){const n=t[o],a=yw(n),l=i[a];if(l)s.push(l.promise);else{let t;t=n.extensions&&n.extensions[RI.KHR_DRACO_MESH_COMPRESSION]?r(n):xw(new Rd,n,e),i[a]={primitive:n,promise:t},s.push(t)}}return Promise.all(s)}loadMesh(t){const e=this,n=this.json,i=this.extensions,r=n.meshes[t],s=r.primitives,o=[];for(let l=0,h=s.length;l<h;l++){const t=void 0===s[l].material?(void 0===(a=this.cache).DefaultMaterial&&(a.DefaultMaterial=new x_({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ml})),a.DefaultMaterial):this.getDependency("material",s[l].material);o.push(t)}var a;return o.push(e.loadGeometries(s)),Promise.all(o).then((function(n){const o=n.slice(0,n.length-1),a=n[n.length-1],l=[];for(let c=0,u=a.length;c<u;c++){const n=a[c],h=s[c];let u;const p=o[c];if(h.mode===ew||h.mode===nw||h.mode===iw||void 0===h.mode)u=!0===r.isSkinnedMesh?new Ny(n,p):new Wd(n,p),!0!==u.isSkinnedMesh||u.geometry.attributes.skinWeight.normalized||u.normalizeSkinWeights(),h.mode===nw?u.geometry=bw(u.geometry,1):h.mode===iw&&(u.geometry=bw(u.geometry,nu));else if(h.mode===JI)u=new $y(n,p);else if(h.mode===tw)u=new Ky(n,p);else if(h.mode===$I)u=new tv(n,p);else{if(h.mode!==QI)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+h.mode);u=new ov(n,p)}Object.keys(u.geometry.morphAttributes).length>0&&gw(u,r),u.name=e.createUniqueName(r.name||"mesh_"+t),mw(u,r),h.extensions&&fw(i,u,h),e.assignFinalMaterial(u),l.push(u)}for(let i=0,r=l.length;i<r;i++)e.associations.set(l[i],{meshes:t,primitives:i});if(1===l.length)return l[0];const h=new Jg;e.associations.set(h,{meshes:t});for(let t=0,e=l.length;t<e;t++)h.add(l[t]);return h}))}loadCamera(t){let e;const n=this.json.cameras[t],i=n[n.type];if(i)return"perspective"===n.type?e=new $d(Au.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(e=new If(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),mw(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],n={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then((function(t){return n.inverseBindMatrices=t,n}))}loadAnimation(t){const e=this.json.animations[t],n=[],i=[],r=[],s=[],o=[];for(let a=0,l=e.channels.length;a<l;a++){const t=e.channels[a],l=e.samplers[t.sampler],h=t.target,c=void 0!==h.node?h.node:h.id,u=void 0!==e.parameters?e.parameters[l.input]:l.input,p=void 0!==e.parameters?e.parameters[l.output]:l.output;n.push(this.getDependency("node",c)),i.push(this.getDependency("accessor",u)),r.push(this.getDependency("accessor",p)),s.push(l),o.push(h)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(r),Promise.all(s),Promise.all(o)]).then((function(n){const i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=[];for(let t=0,e=i.length;t<e;t++){const e=i[t],n=r[t],h=s[t],c=o[t],u=a[t];if(void 0===e)continue;let p;switch(e.updateMatrix(),e.matrixAutoUpdate=!0,hw[u.path]){case hw.weights:p=U_;break;case hw.rotation:p=z_;break;default:p=H_}const d=e.name?e.name:e.uuid,f=void 0!==c.interpolation?cw[c.interpolation]:Xc,m=[];hw[u.path]===hw.weights?e.traverse((function(t){t.morphTargetInfluences&&m.push(t.name?t.name:t.uuid)})):m.push(d);let g=h.array;if(h.normalized){const t=_w(g.constructor),e=new Float32Array(g.length);for(let n=0,i=g.length;n<i;n++)e[n]=g[n]*t;g=e}for(let t=0,i=m.length;t<i;t++){const e=new p(m[t]+"."+hw[u.path],n.array,g,f);"CUBICSPLINE"===c.interpolation&&(e.createInterpolant=function(t){return new(this instanceof z_?KI:qI)(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(e)}}const h=e.name?e.name:"animation_"+t;return new j_(h,void 0,l)}))}createNodeMesh(t){const e=this.json,n=this,i=e.nodes[t];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(t){const e=n._getNodeRef(n.meshCache,i.mesh,t);return void 0!==i.weights&&e.traverse((function(t){if(t.isMesh)for(let e=0,n=i.weights.length;e<n;e++)t.morphTargetInfluences[e]=i.weights[e]})),e}))}loadNode(t){const e=this.json,n=this.extensions,i=this,r=e.nodes[t],s=r.name?i.createUniqueName(r.name):"";return function(){const e=[],n=i._invokeOne((function(e){return e.createNodeMesh&&e.createNodeMesh(t)}));return n&&e.push(n),void 0!==r.camera&&e.push(i.getDependency("camera",r.camera).then((function(t){return i._getNodeRef(i.cameraCache,r.camera,t)}))),i._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){e.push(t)})),Promise.all(e)}().then((function(e){let o;if(o=!0===r.isBone?new My:e.length>1?new Jg:1===e.length?e[0]:new Zp,o!==e[0])for(let t=0,n=e.length;t<n;t++)o.add(e[t]);if(r.name&&(o.userData.name=r.name,o.name=s),mw(o,r),r.extensions&&fw(n,o,r),void 0!==r.matrix){const t=new Ep;t.fromArray(r.matrix),o.applyMatrix4(t)}else void 0!==r.translation&&o.position.fromArray(r.translation),void 0!==r.rotation&&o.quaternion.fromArray(r.rotation),void 0!==r.scale&&o.scale.fromArray(r.scale);return i.associations.has(o)||i.associations.set(o,{}),i.associations.get(o).nodes=t,o}))}loadScene(t){const e=this.json,n=this.extensions,i=this.json.scenes[t],r=this,s=new Jg;i.name&&(s.name=r.createUniqueName(i.name)),mw(s,i),i.extensions&&fw(n,s,i);const o=i.nodes||[],a=[];for(let l=0,h=o.length;l<h;l++)a.push(Ew(o[l],s,e,r));return Promise.all(a).then((function(){return r.associations=(t=>{const e=new Map;for(const[n,i]of r.associations)(n instanceof sd||n instanceof Uu)&&e.set(n,i);return t.traverse((t=>{const n=r.associations.get(t);null!=n&&e.set(t,n)})),e})(s),s}))}}function Ew(t,e,n,i){const r=n.nodes[t];return i.getDependency("node",t).then((function(t){if(void 0===r.skin)return t;let e;return i.getDependency("skin",r.skin).then((function(t){e=t;const n=[];for(let r=0,s=e.joints.length;r<s;r++)n.push(i.getDependency("node",e.joints[r]));return Promise.all(n)})).then((function(n){return t.traverse((function(t){if(!t.isMesh)return;const i=[],r=[];for(let s=0,o=n.length;s<o;s++){const t=n[s];if(t){i.push(t);const n=new Ep;void 0!==e.inverseBindMatrices&&n.fromArray(e.inverseBindMatrices.array,16*s),r.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[s])}t.bind(new ky(i,r),t.matrixWorld)})),t}))})).then((function(t){e.add(t);const s=[];if(r.children){const e=r.children;for(let r=0,o=e.length;r<o;r++){const o=e[r];s.push(Ew(o,t,n,i))}}return Promise.all(s)}))}function xw(t,e,n){const i=e.attributes,r=[];function s(e,i){return n.getDependency("accessor",e).then((function(e){t.setAttribute(i,e)}))}for(const o in i){const e=lw[o]||o.toLowerCase();e in t.attributes||r.push(s(i[o],e))}if(void 0!==e.indices&&!t.index){const i=n.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));r.push(i)}return mw(t,e),function(t,e,n){const i=e.attributes,r=new Yu;if(void 0===i.POSITION)return;{const t=n.json.accessors[i.POSITION],e=t.min,s=t.max;if(void 0===e||void 0===s)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new Vu(e[0],e[1],e[2]),new Vu(s[0],s[1],s[2])),t.normalized){const e=_w(rw[t.componentType]);r.min.multiplyScalar(e),r.max.multiplyScalar(e)}}const s=e.targets;if(void 0!==s){const t=new Vu,e=new Vu;for(let i=0,r=s.length;i<r;i++){const r=s[i];if(void 0!==r.POSITION){const i=n.json.accessors[r.POSITION],s=i.min,o=i.max;if(void 0!==s&&void 0!==o){if(e.setX(Math.max(Math.abs(s[0]),Math.abs(o[0]))),e.setY(Math.max(Math.abs(s[1]),Math.abs(o[1]))),e.setZ(Math.max(Math.abs(s[2]),Math.abs(o[2]))),i.normalized){const t=_w(rw[i.componentType]);e.multiplyScalar(t)}t.max(e)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(t)}t.boundingBox=r;const o=new pp;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=o}(t,e,n),Promise.all(r).then((function(){return void 0!==e.targets?function(t,e,n){let i=!1,r=!1;for(let a=0,l=e.length;a<l;a++){const t=e[a];if(void 0!==t.POSITION&&(i=!0),void 0!==t.NORMAL&&(r=!0),i&&r)break}if(!i&&!r)return Promise.resolve(t);const s=[],o=[];for(let a=0,l=e.length;a<l;a++){const l=e[a];if(i){const e=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION):t.attributes.position;s.push(e)}if(r){const e=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL):t.attributes.normal;o.push(e)}}return Promise.all([Promise.all(s),Promise.all(o)]).then((function(e){const n=e[0],s=e[1];return i&&(t.morphAttributes.position=n),r&&(t.morphAttributes.normal=s),t.morphTargetsRelative=!0,t}))}(t,e.targets,n):t}))}function bw(t,e){let n=t.getIndex();if(null===n){const e=[],i=t.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(let t=0;t<i.count;t++)e.push(t);t.setIndex(e),n=t.getIndex()}const i=n.count-2,r=[];if(e===nu)for(let o=1;o<=i;o++)r.push(n.getX(0)),r.push(n.getX(o)),r.push(n.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(n.getX(o)),r.push(n.getX(o+1)),r.push(n.getX(o+2))):(r.push(n.getX(o+2)),r.push(n.getX(o+1)),r.push(n.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(r),s}class Iw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*e+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*e+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*e+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const s=.01,o=.1,a=t.elements,l=a[0],h=a[4],c=a[8],u=a[1],p=a[5],d=a[9],f=a[2],m=a[6],g=a[10];if(Math.abs(h-u)<s&&Math.abs(c-f)<s&&Math.abs(d-m)<s){if(Math.abs(h+u)<o&&Math.abs(c+f)<o&&Math.abs(d+m)<o&&Math.abs(l+p+g-3)<o)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,a=(p+1)/2,y=(g+1)/2,v=(h+u)/4,_=(c+f)/4,T=(d+m)/4;return t>a&&t>y?t<s?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(t),i=v/n,r=_/n):a>y?a<s?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(a),n=v/i,r=T/i):y<s?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(y),n=_/r,i=T/r),this.set(n,i,r,e),this}let y=Math.sqrt((m-d)*(m-d)+(c-f)*(c-f)+(u-h)*(u-h));return Math.abs(y)<.001&&(y=1),this.x=(m-d)/y,this.y=(c-f)/y,this.z=(u-h)/y,this.w=Math.acos((l+p+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Iw.prototype.isVector4=!0;const ww=[];for(let n=0;n<256;n++)ww[n]=(n<16?"0":"")+n.toString(16);Math.PI,Math.PI;function Sw(t,e,n){return Math.max(e,Math.min(n,t))}function Rw(t,e){return(t%e+e)%e}function Cw(t,e,n){return(1-n)*t+n*e}class Aw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this._x=t,this._y=e,this._z=n,this._w=i}static slerp(t,e,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,i)}static slerpFlat(t,e,n,i,r,s,o){let a=n[i+0],l=n[i+1],h=n[i+2],c=n[i+3];const u=r[s+0],p=r[s+1],d=r[s+2],f=r[s+3];if(0===o)return t[e+0]=a,t[e+1]=l,t[e+2]=h,void(t[e+3]=c);if(1===o)return t[e+0]=u,t[e+1]=p,t[e+2]=d,void(t[e+3]=f);if(c!==f||a!==u||l!==p||h!==d){let t=1-o;const e=a*u+l*p+h*d+c*f,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),s=Math.atan2(r,e*n);t=Math.sin(t*s)/r,o=Math.sin(o*s)/r}const r=o*n;if(a=a*t+u*r,l=l*t+p*r,h=h*t+d*r,c=c*t+f*r,t===1-o){const t=1/Math.sqrt(a*a+l*l+h*h+c*c);a*=t,l*=t,h*=t,c*=t}}t[e]=a,t[e+1]=l,t[e+2]=h,t[e+3]=c}static multiplyQuaternionsFlat(t,e,n,i,r,s){const o=n[i],a=n[i+1],l=n[i+2],h=n[i+3],c=r[s],u=r[s+1],p=r[s+2],d=r[s+3];return t[e]=o*d+h*c+a*p-l*u,t[e+1]=a*d+h*u+l*c-o*p,t[e+2]=l*d+h*p+o*u-a*c,t[e+3]=h*d-o*c-a*u-l*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,i=t._y,r=t._z,s=t._order,o=Math.cos,a=Math.sin,l=o(n/2),h=o(i/2),c=o(r/2),u=a(n/2),p=a(i/2),d=a(r/2);switch(s){case"XYZ":this._x=u*h*c+l*p*d,this._y=l*p*c-u*h*d,this._z=l*h*d+u*p*c,this._w=l*h*c-u*p*d;break;case"YXZ":this._x=u*h*c+l*p*d,this._y=l*p*c-u*h*d,this._z=l*h*d-u*p*c,this._w=l*h*c+u*p*d;break;case"ZXY":this._x=u*h*c-l*p*d,this._y=l*p*c+u*h*d,this._z=l*h*d+u*p*c,this._w=l*h*c-u*p*d;break;case"ZYX":this._x=u*h*c-l*p*d,this._y=l*p*c+u*h*d,this._z=l*h*d-u*p*c,this._w=l*h*c+u*p*d;break;case"YZX":this._x=u*h*c+l*p*d,this._y=l*p*c+u*h*d,this._z=l*h*d-u*p*c,this._w=l*h*c-u*p*d;break;case"XZY":this._x=u*h*c-l*p*d,this._y=l*p*c-u*h*d,this._z=l*h*d+u*p*c,this._w=l*h*c+u*p*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],s=e[1],o=e[5],a=e[9],l=e[2],h=e[6],c=e[10],u=n+o+c;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(h-a)*t,this._y=(r-l)*t,this._z=(s-i)*t}else if(n>o&&n>c){const t=2*Math.sqrt(1+n-o-c);this._w=(h-a)/t,this._x=.25*t,this._y=(i+s)/t,this._z=(r+l)/t}else if(o>c){const t=2*Math.sqrt(1+o-n-c);this._w=(r-l)/t,this._x=(i+s)/t,this._y=.25*t,this._z=(a+h)/t}else{const t=2*Math.sqrt(1+c-n-o);this._w=(s-i)/t,this._x=(r+l)/t,this._y=(a+h)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Sw(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,s=t._w,o=e._x,a=e._y,l=e._z,h=e._w;return this._x=n*h+s*o+i*l-r*a,this._y=i*h+s*a+r*o-n*l,this._z=r*h+s*l+n*a-i*o,this._w=s*h-n*o-i*a-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,s=this._w;let o=s*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),h=Math.atan2(l,o),c=Math.sin((1-e)*h)/l,u=Math.sin(e*h)/l;return this._w=s*c+this._w*u,this._x=n*c+this._x*u,this._y=i*c+this._y*u,this._z=r*c+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,n){this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Aw.prototype.isQuaternion=!0;class Dw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Nw.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Nw.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z,a=t.w,l=a*e+s*i-o*n,h=a*n+o*e-r*i,c=a*i+r*n-s*e,u=-r*e-s*n-o*i;return this.x=l*a+u*-r+h*-o-c*-s,this.y=h*a+u*-s+c*-r-l*-o,this.z=c*a+u*-o+l*-s-h*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=i*a-r*o,this.y=r*s-n*a,this.z=n*o-i*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Ow.copy(this).projectOnVector(t),this.sub(Ow)}reflect(t){return this.sub(Ow.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Sw(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Dw.prototype.isVector3=!0;const Ow=new Dw,Nw=new Aw;class Mw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Mw.prototype.isVector2=!0;const Pw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fw={h:0,s:0,l:0},Lw={h:0,s:0,l:0};function kw(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function Uw(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Bw(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class zw{constructor(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this}setHSL(t,e,n){if(t=Rw(t,1),e=Sw(e,0,1),n=Sw(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=kw(r,i,t+1/3),this.g=kw(r,i,t),this.b=kw(r,i,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=n[1],r=n[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const n=parseFloat(t[1])/360,i=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100;return e(t[4]),this.setHSL(n,i,r)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=n[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=Pw[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=Uw(t.r),this.g=Uw(t.g),this.b=Uw(t.b),this}copyLinearToSRGB(t){return this.r=Bw(t.r),this.g=Bw(t.g),this.b=Bw(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const e=this.r,n=this.g,i=this.b,r=Math.max(e,n,i),s=Math.min(e,n,i);let o,a;const l=(s+r)/2;if(s===r)o=0,a=0;else{const t=r-s;switch(a=l<=.5?t/(r+s):t/(2-r-s),r){case e:o=(n-i)/t+(n<i?6:0);break;case n:o=(i-e)/t+2;break;case i:o=(e-n)/t+4}o/=6}return t.h=o,t.s=a,t.l=l,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,n){return this.getHSL(Fw),Fw.h+=t,Fw.s+=e,Fw.l+=n,this.setHSL(Fw.h,Fw.s,Fw.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Fw),t.getHSL(Lw);const n=Cw(Fw.h,Lw.h,e),i=Cw(Fw.s,Lw.s,e),r=Cw(Fw.l,Lw.l,e);return this.setHSL(n,i,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}zw.NAMES=Pw,zw.prototype.isColor=!0,zw.prototype.r=1,zw.prototype.g=1,zw.prototype.b=1;const Gw=new Dw,Hw=new Mw;class jw{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new zw),e[n++]=r.r,e[n++]=r.g,e[n++]=r.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new Mw),e[n++]=r.x,e[n++]=r.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new Dw),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new Iw),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n++]=r.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Hw.fromBufferAttribute(this,e),Hw.applyMatrix3(t),this.setXY(e,Hw.x,Hw.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Gw.fromBufferAttribute(this,e),Gw.applyMatrix3(t),this.setXYZ(e,Gw.x,Gw.y,Gw.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Gw.x=this.getX(e),Gw.y=this.getY(e),Gw.z=this.getZ(e),Gw.applyMatrix4(t),this.setXYZ(e,Gw.x,Gw.y,Gw.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Gw.x=this.getX(e),Gw.y=this.getY(e),Gw.z=this.getZ(e),Gw.applyNormalMatrix(t),this.setXYZ(e,Gw.x,Gw.y,Gw.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Gw.x=this.getX(e),Gw.y=this.getY(e),Gw.z=this.getZ(e),Gw.transformDirection(t),this.setXYZ(e,Gw.x,Gw.y,Gw.z);return this}set(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}jw.prototype.isBufferAttribute=!0;(class extends jw{constructor(t,e,n){super(new Uint16Array(t),e,n)}}).prototype.isFloat16BufferAttribute=!0;class Vw{constructor(){this.pluginCallbacks=[],this.register((function(t){return new vS(t)})),this.register((function(t){return new _S(t)})),this.register((function(t){return new TS(t)})),this.register((function(t){return new xS(t)})),this.register((function(t){return new bS(t)})),this.register((function(t){return new ES(t)}))}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,i){"object"===typeof n&&(console.warn("THREE.GLTFExporter: parse() expects options as the fourth argument now."),i=n);const r=new yS,s=[];for(let o=0,a=this.pluginCallbacks.length;o<a;o++)s.push(this.pluginCallbacks[o](r));r.setPlugins(s),r.write(t,e,i).catch(n)}parseAsync(t,e){const n=this;return new Promise((function(i,r){n.parse(t,i,r,e)}))}}const Ww=0,Zw=1,Yw=2,qw=3,Xw=4,Kw=5121,Qw=5123,Jw=5126,$w=5125,tS=34962,eS=34963,nS=9728,iS=9729,rS=9984,sS=9985,oS=9986,aS=9987,lS=33071,hS=33648,cS=10497,uS={};uS[Dh]=nS,uS[Oh]=rS,uS[Nh]=oS,uS[Mh]=iS,uS[Ph]=sS,uS[Fh]=aS,uS[Ch]=lS,uS[Rh]=cS,uS[Ah]=hS;const pS={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"};function dS(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))}function fS(t){return 4*Math.ceil(t/4)}function mS(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=fS(t.byteLength);if(n!==t.byteLength){const i=new Uint8Array(n);if(i.set(new Uint8Array(t)),0!==e)for(let r=t.byteLength;r<n;r++)i[r]=e;return i.buffer}return t}let gS=null;class yS{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(t){this.plugins=t}async write(t,e,n){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(t),await Promise.all(this.pending);const i=this,r=i.buffers,s=i.json;n=i.options;const o=i.extensionsUsed,a=new Blob(r,{type:"application/octet-stream"}),l=Object.keys(o);if(l.length>0&&(s.extensionsUsed=l),s.buffers&&s.buffers.length>0&&(s.buffers[0].byteLength=a.size),!0===n.binary){const t=new window.FileReader;t.readAsArrayBuffer(a),t.onloadend=function(){const n=mS(t.result),i=new DataView(new ArrayBuffer(8));i.setUint32(0,n.byteLength,!0),i.setUint32(4,5130562,!0);const r=mS(function(t){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(t).buffer;const e=new Uint8Array(new ArrayBuffer(t.length));for(let n=0,i=t.length;n<i;n++){const i=t.charCodeAt(n);e[n]=i>255?32:i}return e.buffer}(JSON.stringify(s)),32),o=new DataView(new ArrayBuffer(8));o.setUint32(0,r.byteLength,!0),o.setUint32(4,1313821514,!0);const a=new ArrayBuffer(12),l=new DataView(a);l.setUint32(0,1179937895,!0),l.setUint32(4,2,!0);const h=12+o.byteLength+r.byteLength+i.byteLength+n.byteLength;l.setUint32(8,h,!0);const c=new Blob([a,o,r,i,n],{type:"application/octet-stream"}),u=new window.FileReader;u.readAsArrayBuffer(c),u.onloadend=function(){e(u.result)}}}else if(s.buffers&&s.buffers.length>0){const t=new window.FileReader;t.readAsDataURL(a),t.onloadend=function(){const n=t.result;s.buffers[0].uri=n,e(s)}}else e(s)}serializeUserData(t,e){if(0===Object.keys(t.userData).length)return;const n=this.options,i=this.extensionsUsed;try{const r=JSON.parse(JSON.stringify(t.userData));if(n.includeCustomExtensions&&r.gltfExtensions){void 0===e.extensions&&(e.extensions={});for(const t in r.gltfExtensions)e.extensions[t]=r.gltfExtensions[t],i[t]=!0;delete r.gltfExtensions}Object.keys(r).length>0&&(e.extras=r)}catch(r){console.warn("THREE.GLTFExporter: userData of '"+t.name+"' won't be serialized because of JSON.stringify error - "+r.message)}}getUID(t){return this.uids.has(t)||this.uids.set(t,this.uid++),this.uids.get(t)}isNormalizedNormalAttribute(t){if(this.cache.attributesNormalized.has(t))return!1;const e=new Vu;for(let n=0,i=t.count;n<i;n++)if(Math.abs(e.fromBufferAttribute(t,n).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(t){const e=this.cache;if(e.attributesNormalized.has(t))return e.attributesNormalized.get(t);const n=t.clone(),i=new Vu;for(let r=0,s=n.count;r<s;r++)i.fromBufferAttribute(n,r),0===i.x&&0===i.y&&0===i.z?i.setX(1):i.normalize(),n.setXYZ(r,i.x,i.y,i.z);return e.attributesNormalized.set(t,n),n}applyTextureTransform(t,e){let n=!1;const i={};0===e.offset.x&&0===e.offset.y||(i.offset=e.offset.toArray(),n=!0),0!==e.rotation&&(i.rotation=e.rotation,n=!0),1===e.repeat.x&&1===e.repeat.y||(i.scale=e.repeat.toArray(),n=!0),n&&(t.extensions=t.extensions||{},t.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}processBuffer(t){const e=this.json,n=this.buffers;return e.buffers||(e.buffers=[{byteLength:0}]),n.push(t),0}processBufferView(t,e,n,i,r){const s=this.json;let o;s.bufferViews||(s.bufferViews=[]),o=e===Kw?1:e===Qw?2:4;const a=fS(i*t.itemSize*o),l=new DataView(new ArrayBuffer(a));let h=0;for(let u=n;u<n+i;u++)for(let n=0;n<t.itemSize;n++){let i;t.itemSize>4?i=t.array[u*t.itemSize+n]:0===n?i=t.getX(u):1===n?i=t.getY(u):2===n?i=t.getZ(u):3===n&&(i=t.getW(u)),e===Jw?l.setFloat32(h,i,!0):e===$w?l.setUint32(h,i,!0):e===Qw?l.setUint16(h,i,!0):e===Kw&&l.setUint8(h,i),h+=o}const c={buffer:this.processBuffer(l.buffer),byteOffset:this.byteOffset,byteLength:a};void 0!==r&&(c.target=r),r===tS&&(c.byteStride=t.itemSize*o),this.byteOffset+=a,s.bufferViews.push(c);return{id:s.bufferViews.length-1,byteLength:0}}processBufferViewImage(t){const e=this,n=e.json;return n.bufferViews||(n.bufferViews=[]),new Promise((function(i){const r=new window.FileReader;r.readAsArrayBuffer(t),r.onloadend=function(){const t=mS(r.result),s={buffer:e.processBuffer(t),byteOffset:e.byteOffset,byteLength:t.byteLength};e.byteOffset+=t.byteLength,i(n.bufferViews.push(s)-1)}}))}processAccessor(t,e,n,i){const r=this.options,s=this.json;let o;if(t.array.constructor===Float32Array)o=Jw;else if(t.array.constructor===Uint32Array)o=$w;else if(t.array.constructor===Uint16Array)o=Qw;else{if(t.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");o=Kw}if(void 0===n&&(n=0),void 0===i&&(i=t.count),r.truncateDrawRange&&void 0!==e&&null===e.index){const r=n+i,s=e.drawRange.count===1/0?t.count:e.drawRange.start+e.drawRange.count;n=Math.max(n,e.drawRange.start),(i=Math.min(r,s)-n)<0&&(i=0)}if(0===i)return null;const a=function(t,e,n){const i={min:new Array(t.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(t.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let r=e;r<e+n;r++)for(let e=0;e<t.itemSize;e++){let n;t.itemSize>4?n=t.array[r*t.itemSize+e]:0===e?n=t.getX(r):1===e?n=t.getY(r):2===e?n=t.getZ(r):3===e&&(n=t.getW(r)),i.min[e]=Math.min(i.min[e],n),i.max[e]=Math.max(i.max[e],n)}return i}(t,n,i);let l;void 0!==e&&(l=t===e.index?eS:tS);const h=this.processBufferView(t,o,n,i,l),c={bufferView:h.id,byteOffset:h.byteOffset,componentType:o,count:i,max:a.max,min:a.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[t.itemSize]};return!0===t.normalized&&(c.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(c)-1}processImage(t,e,n){const i=this,r=i.cache,s=i.json,o=i.options,a=i.pending;r.images.has(t)||r.images.set(t,{});const l=r.images.get(t),h=e===Kh?"image/png":"image/jpeg",c=h+":flipY/"+n.toString();if(void 0!==l[c])return l[c];s.images||(s.images=[]);const u={mimeType:h};if(o.embedImages){const r=gS=gS||document.createElement("canvas");r.width=Math.min(t.width,o.maxTextureSize),r.height=Math.min(t.height,o.maxTextureSize);const s=r.getContext("2d");if(!0===n&&(s.translate(0,r.height),s.scale(1,-1)),"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap)s.drawImage(t,0,0,r.width,r.height);else{e!==Kh&&e!==Xh&&console.error("GLTFExporter: Only RGB and RGBA formats are supported."),(t.width>o.maxTextureSize||t.height>o.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",t);const n=new Uint8ClampedArray(t.height*t.width*4);if(e===Kh)for(let e=0;e<n.length;e+=4)n[e+0]=t.data[e+0],n[e+1]=t.data[e+1],n[e+2]=t.data[e+2],n[e+3]=t.data[e+3];else for(let e=0,i=0;e<n.length;e+=4,i+=3)n[e+0]=t.data[i+0],n[e+1]=t.data[i+1],n[e+2]=t.data[i+2],n[e+3]=255;s.putImageData(new ImageData(n,t.width,t.height),0,0)}!0===o.binary?a.push(new Promise((function(t){r.toBlob((function(e){i.processBufferViewImage(e).then((function(e){u.bufferView=e,t()}))}),h)}))):u.uri=r.toDataURL(h)}else u.uri=t.src;const p=s.images.push(u)-1;return l[c]=p,p}processSampler(t){const e=this.json;e.samplers||(e.samplers=[]);const n={magFilter:uS[t.magFilter],minFilter:uS[t.minFilter],wrapS:uS[t.wrapS],wrapT:uS[t.wrapT]};return e.samplers.push(n)-1}processTexture(t){const e=this.cache,n=this.json;if(e.textures.has(t))return e.textures.get(t);n.textures||(n.textures=[]);const i={sampler:this.processSampler(t),source:this.processImage(t.image,t.format,t.flipY)};t.name&&(i.name=t.name),this._invokeAll((function(e){e.writeTexture&&e.writeTexture(t,i)}));const r=n.textures.push(i)-1;return e.textures.set(t,r),r}processMaterial(t){const e=this.cache,n=this.json;if(e.materials.has(t))return e.materials.get(t);if(t.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);const i={pbrMetallicRoughness:{}};!0!==t.isMeshStandardMaterial&&!0!==t.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const r=t.color.toArray().concat([t.opacity]);if(dS(r,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=r),t.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=t.metalness,i.pbrMetallicRoughness.roughnessFactor=t.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),t.metalnessMap||t.roughnessMap)if(t.metalnessMap===t.roughnessMap){const e={index:this.processTexture(t.metalnessMap)};this.applyTextureTransform(e,t.metalnessMap),i.pbrMetallicRoughness.metallicRoughnessTexture=e}else console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.");if(t.map){const e={index:this.processTexture(t.map)};this.applyTextureTransform(e,t.map),i.pbrMetallicRoughness.baseColorTexture=e}if(t.emissive){const e=t.emissive.clone().multiplyScalar(t.emissiveIntensity),n=Math.max(e.r,e.g,e.b);if(n>1&&(e.multiplyScalar(1/n),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),n>0&&(i.emissiveFactor=e.toArray()),t.emissiveMap){const e={index:this.processTexture(t.emissiveMap)};this.applyTextureTransform(e,t.emissiveMap),i.emissiveTexture=e}}if(t.normalMap){const e={index:this.processTexture(t.normalMap)};t.normalScale&&1!==t.normalScale.x&&(e.scale=t.normalScale.x),this.applyTextureTransform(e,t.normalMap),i.normalTexture=e}if(t.aoMap){const e={index:this.processTexture(t.aoMap),texCoord:1};1!==t.aoMapIntensity&&(e.strength=t.aoMapIntensity),this.applyTextureTransform(e,t.aoMap),i.occlusionTexture=e}t.transparent?i.alphaMode="BLEND":t.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=t.alphaTest),t.side===Fl&&(i.doubleSided=!0),""!==t.name&&(i.name=t.name),this.serializeUserData(t,i),this._invokeAll((function(e){e.writeMaterial&&e.writeMaterial(t,i)}));const s=n.materials.push(i)-1;return e.materials.set(t,s),s}processMesh(t){const e=this.cache,n=this.json,i=[t.geometry.uuid];if(Array.isArray(t.material))for(let v=0,_=t.material.length;v<_;v++)i.push(t.material[v].uuid);else i.push(t.material.uuid);const r=i.join(":");if(e.meshes.has(r))return e.meshes.get(r);const s=t.geometry;let o;if(o=t.isLineSegments?Zw:t.isLineLoop?Yw:t.isLine?qw:t.isPoints?Ww:t.material.wireframe?Zw:Xw,!0!==s.isBufferGeometry)throw new Error("THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.");const a={},l={},h=[],c=[],u={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},p=s.getAttribute("normal");void 0===p||this.isNormalizedNormalAttribute(p)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),s.setAttribute("normal",this.createNormalizedNormalAttribute(p)));let d=null;for(let v in s.attributes){if("morph"===v.substr(0,5))continue;const t=s.attributes[v];v=u[v]||v.toUpperCase();if(/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(v)||(v="_"+v),e.attributes.has(this.getUID(t))){l[v]=e.attributes.get(this.getUID(t));continue}d=null;const n=t.array;"JOINTS_0"!==v||n instanceof Uint16Array||n instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),d=new gd(new Uint16Array(n),t.itemSize,t.normalized));const i=this.processAccessor(d||t,s);null!==i&&(l[v]=i,e.attributes.set(this.getUID(t),i))}if(void 0!==p&&s.setAttribute("normal",p),0===Object.keys(l).length)return null;if(void 0!==t.morphTargetInfluences&&t.morphTargetInfluences.length>0){const n=[],i=[],r={};if(void 0!==t.morphTargetDictionary)for(const e in t.morphTargetDictionary)r[t.morphTargetDictionary[e]]=e;for(let o=0;o<t.morphTargetInfluences.length;++o){const a={};let l=!1;for(const t in s.morphAttributes){if("position"!==t&&"normal"!==t){l||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),l=!0);continue}const n=s.morphAttributes[t][o],i=t.toUpperCase(),r=s.attributes[t];if(e.attributes.has(this.getUID(n))){a[i]=e.attributes.get(this.getUID(n));continue}const h=n.clone();if(!s.morphTargetsRelative)for(let t=0,e=n.count;t<e;t++)h.setXYZ(t,n.getX(t)-r.getX(t),n.getY(t)-r.getY(t),n.getZ(t)-r.getZ(t));a[i]=this.processAccessor(h,s),e.attributes.set(this.getUID(r),a[i])}c.push(a),n.push(t.morphTargetInfluences[o]),void 0!==t.morphTargetDictionary&&i.push(r[o])}a.weights=n,i.length>0&&(a.extras={},a.extras.targetNames=i)}const f=Array.isArray(t.material);if(f&&0===s.groups.length)return null;const m=f?t.material:[t.material],g=f?s.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let v=0,_=g.length;v<_;v++){const t={mode:o,attributes:l};if(this.serializeUserData(s,t),c.length>0&&(t.targets=c),null!==s.index){let n=this.getUID(s.index);void 0===g[v].start&&void 0===g[v].count||(n+=":"+g[v].start+":"+g[v].count),e.attributes.has(n)?t.indices=e.attributes.get(n):(t.indices=this.processAccessor(s.index,s,g[v].start,g[v].count),e.attributes.set(n,t.indices)),null===t.indices&&delete t.indices}const n=this.processMaterial(m[g[v].materialIndex]);null!==n&&(t.material=n),h.push(t)}a.primitives=h,n.meshes||(n.meshes=[]),this._invokeAll((function(e){e.writeMesh&&e.writeMesh(t,a)}));const y=n.meshes.push(a)-1;return e.meshes.set(r,y),y}processCamera(t){const e=this.json;e.cameras||(e.cameras=[]);const n=t.isOrthographicCamera,i={type:n?"orthographic":"perspective"};return n?i.orthographic={xmag:2*t.right,ymag:2*t.top,zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near}:i.perspective={aspectRatio:t.aspect,yfov:Au.degToRad(t.fov),zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near},""!==t.name&&(i.name=t.type),e.cameras.push(i)-1}processAnimation(t,e){const n=this.json,i=this.nodeMap;n.animations||(n.animations=[]);const r=(t=Vw.Utils.mergeMorphTargetTracks(t.clone(),e)).tracks,s=[],o=[];for(let a=0;a<r.length;++a){const t=r[a],n=BT.parseTrackName(t.name);let l=BT.findNode(e,n.nodeName);const h=pS[n.propertyName];if("bones"===n.objectName&&(l=!0===l.isSkinnedMesh?l.skeleton.getBoneByName(n.objectIndex):void 0),!l||!h)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',t.name),null;const c=1;let u,p=t.values.length/t.times.length;h===pS.morphTargetInfluences&&(p/=l.morphTargetInfluences.length),!0===t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(u="CUBICSPLINE",p/=3):u=t.getInterpolation()===qc?"STEP":"LINEAR",o.push({input:this.processAccessor(new gd(t.times,c)),output:this.processAccessor(new gd(t.values,p)),interpolation:u}),s.push({sampler:o.length-1,target:{node:i.get(l),path:h}})}return n.animations.push({name:t.name||"clip_"+n.animations.length,samplers:o,channels:s}),n.animations.length-1}processSkin(t){const e=this.json,n=this.nodeMap,i=e.nodes[n.get(t)],r=t.skeleton;if(void 0===r)return null;const s=t.skeleton.bones[0];if(void 0===s)return null;const o=[],a=new Float32Array(16*r.bones.length),l=new Ep;for(let h=0;h<r.bones.length;++h)o.push(n.get(r.bones[h])),l.copy(r.boneInverses[h]),l.multiply(t.bindMatrix).toArray(a,16*h);void 0===e.skins&&(e.skins=[]),e.skins.push({inverseBindMatrices:this.processAccessor(new gd(a,16)),joints:o,skeleton:n.get(s)});return i.skin=e.skins.length-1}processNode(t){const e=this.json,n=this.options,i=this.nodeMap;e.nodes||(e.nodes=[]);const r={};if(n.trs){const e=t.quaternion.toArray(),n=t.position.toArray(),i=t.scale.toArray();dS(e,[0,0,0,1])||(r.rotation=e),dS(n,[0,0,0])||(r.translation=n),dS(i,[1,1,1])||(r.scale=i)}else t.matrixAutoUpdate&&t.updateMatrix(),!1===dS(t.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(r.matrix=t.matrix.elements);if(""!==t.name&&(r.name=String(t.name)),this.serializeUserData(t,r),t.isMesh||t.isLine||t.isPoints){const e=this.processMesh(t);null!==e&&(r.mesh=e)}else t.isCamera&&(r.camera=this.processCamera(t));if(t.isSkinnedMesh&&this.skins.push(t),t.children.length>0){const e=[];for(let i=0,r=t.children.length;i<r;i++){const r=t.children[i];if(r.visible||!1===n.onlyVisible){const t=this.processNode(r);null!==t&&e.push(t)}}e.length>0&&(r.children=e)}this._invokeAll((function(e){e.writeNode&&e.writeNode(t,r)}));const s=e.nodes.push(r)-1;return i.set(t,s),s}processScene(t){const e=this.json,n=this.options;e.scenes||(e.scenes=[],e.scene=0);const i={};""!==t.name&&(i.name=t.name),e.scenes.push(i);const r=[];for(let s=0,o=t.children.length;s<o;s++){const e=t.children[s];if(e.visible||!1===n.onlyVisible){const t=this.processNode(e);null!==t&&r.push(t)}}r.length>0&&(i.nodes=r),this.serializeUserData(t,i)}processObjects(t){const e=new ay;e.name="AuxScene";for(let n=0;n<t.length;n++)e.children.push(t[n]);this.processScene(e)}processInput(t){const e=this.options;t=t instanceof Array?t:[t],this._invokeAll((function(e){e.beforeParse&&e.beforeParse(t)}));const n=[];for(let i=0;i<t.length;i++)t[i]instanceof ay?this.processScene(t[i]):n.push(t[i]);n.length>0&&this.processObjects(n);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<e.animations.length;++i)this.processAnimation(e.animations[i],t[0]);this._invokeAll((function(e){e.afterParse&&e.afterParse(t)}))}_invokeAll(t){for(let e=0,n=this.plugins.length;e<n;e++)t(this.plugins[e])}}class vS{constructor(t){this.writer=t,this.name="KHR_lights_punctual"}writeNode(t,e){if(!t.isLight)return;if(!t.isDirectionalLight&&!t.isPointLight&&!t.isSpotLight)return void console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",t);const n=this.writer,i=n.json,r=n.extensionsUsed,s={};t.name&&(s.name=t.name),s.color=t.color.toArray(),s.intensity=t.intensity,t.isDirectionalLight?s.type="directional":t.isPointLight?(s.type="point",t.distance>0&&(s.range=t.distance)):t.isSpotLight&&(s.type="spot",t.distance>0&&(s.range=t.distance),s.spot={},s.spot.innerConeAngle=(t.penumbra-1)*t.angle*-1,s.spot.outerConeAngle=t.angle),void 0!==t.decay&&2!==t.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!t.target||t.target.parent===t&&0===t.target.position.x&&0===t.target.position.y&&-1===t.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),r[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},r[this.name]=!0);const o=i.extensions[this.name].lights;o.push(s),e.extensions=e.extensions||{},e.extensions[this.name]={light:o.length-1}}}class _S{constructor(t){this.writer=t,this.name="KHR_materials_unlit"}writeMaterial(t,e){if(!t.isMeshBasicMaterial)return;const n=this.writer.extensionsUsed;e.extensions=e.extensions||{},e.extensions[this.name]={},n[this.name]=!0,e.pbrMetallicRoughness.metallicFactor=0,e.pbrMetallicRoughness.roughnessFactor=.9}}class TS{constructor(t){this.writer=t,this.name="KHR_materials_pbrSpecularGlossiness"}writeMaterial(t,e){if(!t.isGLTFSpecularGlossinessMaterial)return;const n=this.writer,i=n.extensionsUsed,r={};e.pbrMetallicRoughness.baseColorFactor&&(r.diffuseFactor=e.pbrMetallicRoughness.baseColorFactor);const s=[1,1,1];if(t.specular.toArray(s,0),r.specularFactor=s,r.glossinessFactor=t.glossiness,e.pbrMetallicRoughness.baseColorTexture&&(r.diffuseTexture=e.pbrMetallicRoughness.baseColorTexture),t.specularMap){const e={index:n.processTexture(t.specularMap)};n.applyTextureTransform(e,t.specularMap),r.specularGlossinessTexture=e}e.extensions=e.extensions||{},e.extensions[this.name]=r,i[this.name]=!0}}class ES{constructor(t){this.writer=t,this.name="KHR_materials_clearcoat"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial)return;const n=this.writer,i=n.extensionsUsed,r={};if(r.clearcoatFactor=t.clearcoat,t.clearcoatMap){const e={index:n.processTexture(t.clearcoatMap)};n.applyTextureTransform(e,t.clearcoatMap),r.clearcoatTexture=e}if(r.clearcoatRoughnessFactor=t.clearcoatRoughness,t.clearcoatRoughnessMap){const e={index:n.processTexture(t.clearcoatRoughnessMap)};n.applyTextureTransform(e,t.clearcoatRoughnessMap),r.clearcoatRoughnessTexture=e}if(t.clearcoatNormalMap){const e={index:n.processTexture(t.clearcoatNormalMap)};n.applyTextureTransform(e,t.clearcoatNormalMap),r.clearcoatNormalTexture=e}e.extensions=e.extensions||{},e.extensions[this.name]=r,i[this.name]=!0}}class xS{constructor(t){this.writer=t,this.name="KHR_materials_transmission"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||0===t.transmission)return;const n=this.writer,i=n.extensionsUsed,r={};if(r.transmissionFactor=t.transmission,t.transmissionMap){const e={index:n.processTexture(t.transmissionMap)};n.applyTextureTransform(e,t.transmissionMap),r.transmissionTexture=e}e.extensions=e.extensions||{},e.extensions[this.name]=r,i[this.name]=!0}}class bS{constructor(t){this.writer=t,this.name="KHR_materials_volume"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||0===t.transmission)return;const n=this.writer,i=n.extensionsUsed,r={};if(r.thicknessFactor=t.thickness,t.thicknessMap){const e={index:n.processTexture(t.thicknessMap)};n.applyTextureTransform(e,t.thicknessMap),r.thicknessTexture=e}r.attenuationDistance=t.attenuationDistance,r.attenuationColor=t.attenuationColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=r,i[this.name]=!0}}Vw.Utils={insertKeyframe:function(t,e){const n=.001,i=t.getValueSize(),r=new t.TimeBufferType(t.times.length+1),s=new t.ValueBufferType(t.values.length+i),o=t.createInterpolant(new t.ValueBufferType(i));let a;if(0===t.times.length){r[0]=e;for(let t=0;t<i;t++)s[t]=0;a=0}else if(e<t.times[0]){if(Math.abs(t.times[0]-e)<n)return 0;r[0]=e,r.set(t.times,1),s.set(o.evaluate(e),0),s.set(t.values,i),a=0}else if(e>t.times[t.times.length-1]){if(Math.abs(t.times[t.times.length-1]-e)<n)return t.times.length-1;r[r.length-1]=e,r.set(t.times,0),s.set(t.values,0),s.set(o.evaluate(e),t.values.length),a=r.length-1}else for(let l=0;l<t.times.length;l++){if(Math.abs(t.times[l]-e)<n)return l;if(t.times[l]<e&&t.times[l+1]>e){r.set(t.times.slice(0,l+1),0),r[l+1]=e,r.set(t.times.slice(l+1),l+2),s.set(t.values.slice(0,(l+1)*i),0),s.set(o.evaluate(e),(l+1)*i),s.set(t.values.slice((l+1)*i),(l+2)*i),a=l+1;break}}return t.times=r,t.values=s,a},mergeMorphTargetTracks:function(t,e){const n=[],i={},r=t.tracks;for(let s=0;s<r.length;++s){let t=r[s];const o=BT.parseTrackName(t.name),a=BT.findNode(e,o.nodeName);if("morphTargetInfluences"!==o.propertyName||void 0===o.propertyIndex){n.push(t);continue}if(t.createInterpolant!==t.InterpolantFactoryMethodDiscrete&&t.createInterpolant!==t.InterpolantFactoryMethodLinear){if(t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),t=t.clone(),t.setInterpolation(Xc)}const l=a.morphTargetInfluences.length,h=a.morphTargetDictionary[o.propertyIndex];if(void 0===h)throw new Error("THREE.GLTFExporter: Morph target name not found: "+o.propertyIndex);let c;if(void 0===i[a.uuid]){c=t.clone();const e=new c.ValueBufferType(l*c.times.length);for(let t=0;t<c.times.length;t++)e[t*l+h]=c.values[t];c.name=(o.nodeName||"")+".morphTargetInfluences",c.values=e,i[a.uuid]=c,n.push(c);continue}const u=t.createInterpolant(new t.ValueBufferType(1));c=i[a.uuid];for(let e=0;e<c.times.length;e++)c.values[e*l+h]=u.evaluate(c.times[e]);for(let e=0;e<t.times.length;e++){const n=this.insertKeyframe(c,t.times[e]);c.values[n*l+h]=t.values[e]}}return t.tracks=n,t}};class IS extends jy{constructor(t,e,n){super(t,e,n),this.elementCount=0,this.exportOptions={trs:!1,onlyVisible:!1,truncateDrawRange:!0,binary:!0,maxTextureSize:0},this.exporter=new Vw,this.material=IS.newMaterialArray(e),this.geometry=this.newFragmentGeometry(t)}export(){const t=this;return new Promise((e=>{this.exporter.parse(t,(t=>e(t)),(t=>console.log(t)),this.exportOptions)}))}newFragmentGeometry(t){if(!t.index)throw new Error("The geometry must be indexed!");if(!t.attributes.blockID){const e=t.attributes.position.count,n=new Uint16Array(e);n.fill(this.elementCount++),t.attributes.blockID=new jw(n,1)}const e=t.index.count;return IS.initializeGroups(t,e),t}static initializeGroups(t,e){t.groups.length||t.groups.push({start:0,count:e,materialIndex:0})}static newMaterialArray(t){return Array.isArray(t)||(t=[t]),t}}class wS{constructor(t){this.indices=wS.initializeBlocks(t),this.generateGeometryIndexMap(t)}generateGeometryIndexMap(t){const e=t.mesh.geometry;for(const n of e.groups)this.fillBlocksMapWithGroupInfo(n,e)}getSubsetID(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DEFAULT";const i=t,r=e?e.uuid:"DEFAULT";return"".concat(i," - ").concat(r," - ").concat(n)}dispose(){this.indices=null}static initializeBlocks(t){const e=t.mesh.geometry;return{indexCache:e.index.array.slice(0,e.index.array.length),map:new Map}}fillBlocksMapWithGroupInfo(t,e){let n=-1;const i=t.materialIndex,r=t.start,s=r+t.count-1;let o=-1,a=-1;for(let l=r;l<=s;l++){const t=e.index.array[l],r=e.attributes.blockID.array[t];-1===n&&(n=r,o=l);if(l===s){this.getMaterialStore(r,i).push(o,s);break}if(n===r)continue;a=l-1,this.getMaterialStore(n,i).push(o,a),n=r,o=l}}getMaterialStore(t,e){void 0===this.indices.map.get(t)&&this.indices.map.set(t,{});const n=this.indices.map.get(t);if(void 0===n)throw new Error("Geometry map generation error");return void 0===n[e]&&(n[e]=[]),n[e]}}class SS{constructor(t){this.fragment=t,this.tempIndex=[],this.blocksMap=new wS(t),this.initializeSubsetGroups(t);const e=t.mesh.geometry.attributes.blockID.array;this.visibleIds=new Set(e),this.ids=new Set(e),this.add(Array.from(this.ids),!0)}get count(){return this.ids.size}reset(){this.add(Array.from(this.ids),!0)}add(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.filterIndices(e);const n=t.filter((t=>!this.visibleIds.has(t)));this.constructSubsetByMaterial(t),n.forEach((t=>this.visibleIds.add(t))),this.fragment.mesh.geometry.setIndex(this.tempIndex),this.tempIndex.length=0}remove(t){t.forEach((t=>this.visibleIds.has(t)&&this.visibleIds.delete(t)));const e=Array.from(this.visibleIds);this.add(e,!0)}dispose(){this.blocksMap.dispose(),this.tempIndex=[],this.visibleIds.clear(),this.visibleIds=null,this.ids.clear(),this.ids=null}initializeSubsetGroups(t){const e=t.mesh.geometry;e.groups=JSON.parse(JSON.stringify(e.groups)),this.resetGroups(e)}filterIndices(t){const e=this.fragment.mesh.geometry;t?(e.setIndex([]),this.resetGroups(e)):this.tempIndex=Array.from(e.index.array)}constructSubsetByMaterial(t){const e=this.fragment.mesh.geometry.groups.length,n={count:0};for(let i=0;i<e;i++)this.insertNewIndices(t,i,n)}insertNewIndices(t,e,n){const i=this.getAllIndicesOfGroup(t,e);this.insertIndicesAtGroup(i,e,n)}insertIndicesAtGroup(t,e,n){const i=this.getCurrentGroup(e);i.start+=n.count;const r=i.start+i.count;if(n.count+=t.length,t.length>0){const e=r,n=this.tempIndex.slice(0,e),s=this.tempIndex.slice(e);this.tempIndex=Array.prototype.concat.apply([],[n,t,s]),i.count+=t.length}}getCurrentGroup(t){return this.fragment.mesh.geometry.groups[t]}resetGroups(t){t.groups.forEach((t=>{t.start=0,t.count=0}))}getAllIndicesOfGroup(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=[];for(const r of t){const t=this.blocksMap.indices.map.get(r);if(!t)continue;const s=t[e];s&&this.getIndexChunk(s,i,e,n)}return i}getIndexChunk(t,e,n,i){const r=t.length/2;for(let s=0;s<r;s++){const r=2*s,o=t[r],a=t[r+1];for(let t=o;t<=a;t++)i?e.push(this.blocksMap.indices.indexCache[t]):(e[n]||(e[n]=[]),e[n].push(this.blocksMap.indices.indexCache[t]))}}}class RS{static apply(t){RS.initialized||(Rd.prototype.computeBoundsTree=Ox,Rd.prototype.disposeBoundsTree=Nx,Wd.prototype.raycast=Dx,RS.initialized=!0),t.boundsTree||t.computeBoundsTree()}static dispose(t){t.disposeBoundsTree()}}RS.initialized=!1;class CS{constructor(t,e,n){this.fragments={},this.items=[],this.hiddenInstances={},this.mesh=new IS(t,e,n),this.id=this.mesh.uuid,this.capacity=n,this.blocks=new SS(this),RS.apply(t)}dispose(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.items=null,t&&(this.mesh.material.forEach((t=>t.dispose())),RS.dispose(this.mesh.geometry),this.mesh.geometry.dispose()),this.mesh.removeFromParent(),this.mesh.dispose(),this.mesh=null,this.disposeNestedFragments()}getItemID(t,e){const n=this.getItemIndex(t,e);return this.items[n]}getInstanceAndBlockID(t){const e=this.items.indexOf(t);return{instanceID:this.getInstanceIDFromIndex(e),blockID:e%this.blocks.count}}getVertexBlockID(t,e){return t.attributes.blockID.array[e]}getItemData(t){const e=this.items.indexOf(t);return{instanceID:Math.ceil(e/this.blocks.count),blockID:e%this.blocks.count}}getInstance(t,e){return this.mesh.getMatrixAt(t,e)}setInstance(t,e){this.checkIfInstanceExist(t),this.mesh.setMatrixAt(t,e.transform),this.mesh.instanceMatrix.needsUpdate=!0,e.ids&&this.saveItemsInMap(e.ids,t)}addInstances(t){this.resizeCapacityIfNeeded(t.length);const e=this.mesh.count;this.mesh.count+=t.length;for(let n=0;n<t.length;n++)this.setInstance(e+n,t[n])}removeInstances(t){this.mesh.count<=1?this.clear():(this.deleteAndRearrangeInstances(t),this.mesh.count-=t.length,this.mesh.instanceMatrix.needsUpdate=!0)}clear(){this.mesh.clear(),this.mesh.count=0,this.items=[]}addFragment(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mesh.material;const n=this.initializeGeometry();e===this.mesh.material&&this.copyGroups(n);const i=new CS(n,e,this.capacity);return i.mesh.applyMatrix4(this.mesh.matrix),i.mesh.updateMatrix(),this.fragments[t]=i,this.fragments[t]}removeFragment(t){const e=this.fragments[t];e&&(e.dispose(!1),delete this.fragments[t])}resetVisibility(){if(this.blocks.count>1)this.blocks.reset();else{const t=Object.keys(this.hiddenInstances);this.makeInstancesVisible(t),this.hiddenInstances={}}}setVisibility(t,e){this.blocks.count>1?(this.toggleBlockVisibility(e,t),this.mesh.geometry.disposeBoundsTree(),RS.apply(this.mesh.geometry)):this.toggleInstanceVisibility(e,t)}resize(t){var e;const n=this.createFragmentMeshWithNewSize(t);this.capacity=t;const i=this.mesh;null===(e=i.parent)||void 0===e||e.add(n),i.removeFromParent(),this.mesh=n,i.dispose()}async export(){const t=await this.mesh.export(),e=new File([new Blob([t])],"".concat(this.id,".glb")),n={matrices:Array.from(this.mesh.instanceMatrix.array),ids:this.items,id:this.id},i=JSON.stringify(n);return{geometry:e,data:new File([new Blob([i])],"".concat(this.id,".json"))}}copyGroups(t){t.groups=[];for(const e of this.mesh.geometry.groups)t.groups.push({...e})}initializeGeometry(){const t=new Rd;return t.setAttribute("position",this.mesh.geometry.attributes.position),t.setAttribute("normal",this.mesh.geometry.attributes.normal),t.setAttribute("blockID",this.mesh.geometry.attributes.blockID),t.setIndex(Array.from(this.mesh.geometry.index.array)),t}saveItemsInMap(t,e){this.checkBlockNumberValid(t);let n=0;for(const i of t){const t=this.getItemIndex(e,n);this.items[t]=i,n++}}resizeCapacityIfNeeded(t){const e=t+this.mesh.count;e>this.capacity&&this.resize(e)}createFragmentMeshWithNewSize(t){const e=new IS(this.mesh.geometry,this.mesh.material,t);return e.count=this.mesh.count,e}disposeNestedFragments(){const t=Object.values(this.fragments);for(let e=0;e<t.length;e++)t[e].dispose();this.fragments={}}checkBlockNumberValid(t){if(t.length>this.blocks.count)throw new Error("You passed more items (".concat(t.length,") than blocks in this instance (").concat(this.blocks.count,")"))}checkIfInstanceExist(t){if(t>this.mesh.count)throw new Error("The given index (".concat(t,") exceeds the instances in this fragment (").concat(this.mesh.count,")"))}deleteAndRearrangeInstances(t){const e=[];for(const n of t){const t=this.deleteAndRearrange(n);t&&e.push(t)}for(const n of t)delete this.hiddenInstances[n];return e}deleteAndRearrange(t){const e=this.items.indexOf(t);if(-1===e)return null;this.mesh.count--;const n=e===this.mesh.count,i=this.getInstanceIDFromIndex(e),r=new Ep,s=new Ep;if(this.mesh.getMatrixAt(i,s),n)return this.items.pop(),{ids:[t],transform:s};const o=this.mesh.count;return this.items[e]=this.items[o],this.items.pop(),this.mesh.getMatrixAt(o,r),this.mesh.setMatrixAt(i,r),this.mesh.instanceMatrix.needsUpdate=!0,{ids:[t],transform:s}}getItemIndex(t,e){return t*this.blocks.count+e}getInstanceIDFromIndex(t){return Math.trunc(t/this.blocks.count)}toggleInstanceVisibility(t,e){t?this.makeInstancesVisible(e):this.makeInstancesInvisible(e)}makeInstancesInvisible(t){t=this.filterHiddenItems(t,!1);const e=this.deleteAndRearrangeInstances(t);for(const n of e)n.ids&&(this.hiddenInstances[n.ids[0]]=n)}makeInstancesVisible(t){const e=[];t=this.filterHiddenItems(t,!0);for(const n of t)e.push(this.hiddenInstances[n]),delete this.hiddenInstances[n];this.addInstances(e)}filterHiddenItems(t,e){const n=Object.keys(this.hiddenInstances);return t.filter((t=>e?n.includes(t):!n.includes(t)))}toggleBlockVisibility(t,e){const n=e.map((t=>this.getInstanceAndBlockID(t).blockID));t?this.blocks.add(n,!1):this.blocks.remove(n)}}function AS(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=null!==t[0].index,i=new Set(Object.keys(t[0].attributes)),r=new Set(Object.keys(t[0].morphAttributes)),s={},o={},a=t[0].morphTargetsRelative,l=new Rd;let h=0;for(let c=0;c<t.length;++c){const u=t[c];let p=0;if(n!==(null!==u.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const t in u.attributes){if(!i.has(t))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+t+'" attribute exists among all geometries, or in none of them.'),null;void 0===s[t]&&(s[t]=[]),s[t].push(u.attributes[t]),p++}if(p!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(a!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const t in u.morphAttributes){if(!r.has(t))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===o[t]&&(o[t]=[]),o[t].push(u.morphAttributes[t])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(u.userData),e){let t;if(n)t=u.index.count;else{if(void 0===u.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;t=u.attributes.position.count}l.addGroup(h,t,c),h+=t}}if(n){let e=0;const n=[];for(let i=0;i<t.length;++i){const r=t[i].index;for(let t=0;t<r.count;++t)n.push(r.getX(t)+e);e+=t[i].attributes.position.count}l.setIndex(n)}for(const c in s){const t=DS(s[c]);if(!t)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" attribute."),null;l.setAttribute(c,t)}for(const c in o){const t=o[c][0].length;if(0===t)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[c]=[];for(let e=0;e<t;++e){const t=[];for(let i=0;i<o[c].length;++i)t.push(o[c][i][e]);const n=DS(t);if(!n)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" morphAttribute."),null;l.morphAttributes[c].push(n)}}return l}function DS(t){let e,n,i,r=0;for(let a=0;a<t.length;++a){const s=t[a];if(s.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===e&&(e=s.array.constructor),e!==s.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=s.itemSize),n!==s.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===i&&(i=s.normalized),i!==s.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=s.array.length}const s=new e(r);let o=0;for(let a=0;a<t.length;++a)s.set(t[a].array,o),o+=t[a].array.length;return new gd(s,n,i)}class OS{static merge(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[],i=[];for(const s of t){const t=this.mergeGeomsOfSameMaterial(s,e);n.push(t),i.push(t.index.count)}const r=AS(n);return this.setupMaterialGroups(i,r),this.cleanUp(n),r}static async mergeGltfMeshes(t){const e=new Rd,n=t[0].geometry.attributes;return this.getMeshesAttributes(e,n),this.getMeshesIndices(e,t),e}static getMeshesAttributes(t,e){t.setAttribute("blockID",e._blockid),t.setAttribute("position",e.position),t.setAttribute("normal",e.normal),t.groups=[]}static getMeshesIndices(t,e){const n={index:0,material:0},i=[];for(const r of e){const e=r.geometry.index;this.getIndicesOfMesh(e,i),this.getMeshGroup(t,n,e),this.cleanUpMesh(r)}t.setIndex(i)}static getMeshGroup(t,e,n){t.groups.push({start:e.index,count:n.count,materialIndex:e.material++}),e.index+=n.count}static cleanUpMesh(t){t.geometry.setIndex([]),t.geometry.attributes={},t.geometry.dispose()}static getIndicesOfMesh(t,e){for(const n of t.array)e.push(n)}static cleanUp(t){t.forEach((t=>t.dispose())),t.length=0}static setupMaterialGroups(t,e){let n=0,i=0;for(const r of t){const t={start:n,count:r,materialIndex:i++};e.groups.push(t),n+=r}}static mergeGeomsOfSameMaterial(t,e){this.checkAllGeometriesAreIndexed(t),e&&this.splitByBlocks(t);const n=AS(t);return this.cleanUp(t),n}static splitByBlocks(t){let e=0;for(const n of t){const t=n.attributes.position.count,i=new Uint8Array(t).fill(e++);n.setAttribute("blockID",new gd(i,1))}}static checkAllGeometriesAreIndexed(t){for(const e of t)if(!e.index)throw new Error("All geometries must be indexed!")}}class NS{constructor(){this.loader=new wI}async load(t,e){const n=await this.loader.loadAsync(t),i=n.scene.children[0],r=!!i.children.length?i.children:[n.scene.children[0]],s=await OS.mergeGltfMeshes(r),o=this.getMaterials(r),a=await fetch(e),l=await a.json();return this.getFragment(s,o,l)}getFragment(t,e,n){const i=this.getInstances(n),r=new CS(t,e,i.length);n.id&&(r.id=n.id,r.mesh.uuid=n.id);for(let s=0;s<i.length;s++)r.setInstance(s,i[s]);return r}getInstances(t){let e=0;const n=[],i=16===t.matrices.length?t.ids.length:1;for(let r=0;r<t.matrices.length-15;r+=16){const s=[];for(let e=0;e<16;e++)s.push(t.matrices[e+r]);const o=(new Ep).fromArray(s),a=e*i,l=t.ids.slice(a,a+i);e++,n.push({ids:l,transform:o})}return n}getMaterials(t){return t.map((t=>{const e=t.material;return new R_({color:e.color,opacity:e.opacity,transparent:e.transparent})}))}}class MS{constructor(t,e){this.components=t,this.fragments=e,this.active=!1,this.highlightMats={},this.tempMatrix=new Ep,this.selection={}}dispose(){for(const t in this.highlightMats){const e=this.highlightMats[t]||[];for(const t of e)t.dispose()}this.highlightMats={}}add(t,e){if(this.highlightMats[t])throw new Error("A highlight with this name already exists.");this.highlightMats[t]=e,this.selection[t]={},this.update()}update(){for(const t in this.fragments.list){const e=this.fragments.list[t];this.addHighlightToFragment(e)}}highlight(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n;if(!this.active)return null;this.checkSelection(t);const i=this.fragments.meshes,r=this.components.raycaster.castRay(i);if(!r)return this.clear(t),null;const s=r.object,o=s.geometry,a=null===(n=r.face)||void 0===n?void 0:n.a,l=r.instanceId;if(!o||!a||void 0===l)return null;e&&this.clear(t),this.selection[t][s.uuid]||(this.selection[t][s.uuid]=new Set);const h=this.fragments.list[s.uuid],c=h.getVertexBlockID(o,a),u=h.getItemID(l,c);return this.selection[t][s.uuid].add(u),this.updateFragmentHighlight(t,s.uuid),{id:u,fragment:h}}highlightByID(t,e){(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.clear(t);const n=this.selection[t];for(const i in e){n[i]||(n[i]=new Set);for(const t of e[i])n[i].add(t);this.updateFragmentHighlight(t,i)}}clear(t){const e=t?[t]:Object.keys(this.selection);for(const n of e)this.clearStyle(n)}clearStyle(t){for(const e in this.selection[t]){const n=this.fragments.list[e];if(!n)continue;const i=n.fragments[t];i&&i.mesh.removeFromParent()}this.selection[t]={}}updateFragmentHighlight(t,e){const n=this.selection[t][e],i=this.fragments.list[e];if(!i)return;const r=i.fragments[t];if(!r)return;const s=this.components.scene.get(),o=r.blocks.count>1;if(s.add(r.mesh),o){const t=[];for(const e of n){const{blockID:n}=i.getInstanceAndBlockID(e);i.blocks.visibleIds.has(n)&&t.push(n)}i.getInstance(0,this.tempMatrix),r.setInstance(0,{ids:Array.from(n),transform:this.tempMatrix}),r.blocks.add(t,!0)}else{let t=0;for(const e of n){r.mesh.count=t+1;const{instanceID:n}=i.getInstanceAndBlockID(e);i.getInstance(n,this.tempMatrix),r.setInstance(t,{ids:[e],transform:this.tempMatrix}),t++}}}checkSelection(t){if(!this.selection[t])throw new Error("Selection ".concat(t," does not exist."))}addHighlightToFragment(t){for(const e in this.highlightMats)if(!t.fragments[e]){const n=this.highlightMats[e];t.addFragment(e,n),t.fragments[e].mesh.renderOrder=1}}}class PS{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:512,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:512,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.components=t,this.fragment=e,this.updateInterval=n,this.rtWidth=i,this.rtHeight=r,this.autoUpdate=s,this.enabled=!0,this.viewUpdated=new Mx,this.needsUpdate=!1,this.fragmentColorMap=new Map,this.renderDebugFrame=!1,this.visibleFragments=[],this.meshes=new Map,this._previouslyVisibleMeshes=new Set,this._transparentMat=new dd({transparent:!0,opacity:0}),this._disposer=new Pb,this._colors={r:0,g:0,b:0,i:0},this._scene=new ay,this.updateVisibility=t=>{if(!this.enabled)return;if(!this.needsUpdate&&!t)return;const e=this.components.camera.get();e.updateMatrix(),this.renderer.setSize(this.rtWidth,this.rtHeight),this.renderer.setRenderTarget(this.renderTarget),this.renderer.render(this._scene,e),this.renderer.readRenderTargetPixels(this.renderTarget,0,0,this.rtWidth,this.rtHeight,this._buffer),this.renderer.setRenderTarget(null),this.renderDebugFrame&&this.renderer.render(this._scene,e),this.worker.postMessage({buffer:this._buffer}),this.needsUpdate=!1,this.viewUpdated.trigger()},this.handleWorkerMessage=t=>{const e=t.data.colors,n=new Set(this._previouslyVisibleMeshes);this._previouslyVisibleMeshes.clear(),this.visibleFragments=[];for(const i of e.values()){const t=this.fragmentColorMap.get(i);t&&(this.visibleFragments.push(t),t.mesh.visible=!0,this._previouslyVisibleMeshes.add(t.id),n.delete(t.id),this.cullEdges(t,!0))}for(const i of n){const t=this.fragment.list[i];t.mesh.visible=!1,this.cullEdges(t,!1)}},this.renderer=new ry;const o=this.components.renderer.clippingPlanes;this.renderer.clippingPlanes=o,this.renderTarget=new Gu(i,r),this.bufferSize=i*r*4,this._buffer=new Uint8Array(this.bufferSize),this.materialCache=new Map;const a=new Blob(['\n      addEventListener("message", (event) => {\n        const { buffer } = event.data;\n        const colors = new Set();\n        for (let i = 0; i < buffer.length; i += 4) {\n            const r = buffer[i];\n            const g = buffer[i + 1];\n            const b = buffer[i + 2];\n            const code = "" + r + "-" + g + "-" + b;\n            colors.add(code);\n        }\n        postMessage({ colors });\n      });\n    '],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(a)),this.worker.addEventListener("message",this.handleWorkerMessage),s&&window.setInterval(this.updateVisibility,n)}dispose(){this.enabled=!1,this._scene.children.length=0,this.viewUpdated.reset(),this.worker.terminate(),this.renderer.dispose(),this.renderTarget.dispose(),this._buffer=null,this._transparentMat.dispose(),this.viewUpdated.reset(),this.fragmentColorMap.clear(),this.visibleFragments=[];for(const t in this.materialCache){const e=this.materialCache.get(t);e&&e.dispose()}for(const t in this.meshes){const e=this.meshes.get(t);e&&this._disposer.dispose(e)}this.meshes.clear()}add(t){if(!this.enabled)return;const{geometry:e,material:n}=t.mesh,{r:i,g:r,b:s,code:o}=this.getNextColor(),a=this.getMaterial(i,r,s);let l;if(Array.isArray(n)){let t=!0;const e=[];for(const i of n)this.isTransparent(i)?e.push(this._transparentMat):(t=!1,e.push(a));if(t)return void a.dispose();l=e}else{if(this.isTransparent(n))return void a.dispose();l=a}this.fragmentColorMap.set(o,t);const h=new jy(e,l,t.capacity);t.mesh.visible=!1,h.instanceMatrix=t.mesh.instanceMatrix,h.applyMatrix4(t.mesh.matrix),h.updateMatrix(),this._scene.add(h),this.meshes.set(t.id,h)}getMaterial(t,e,n){const i="rgb(".concat(t,", ").concat(e,", ").concat(n,")");let r=this.materialCache.get(i);const s=this.components.renderer.clippingPlanes;return r||(r=new dd({color:new pd(i),clippingPlanes:s}),this.materialCache.set(i,r)),r}isTransparent(t){return t.transparent&&t.opacity<1}getNextColor(){return 0===this._colors.i&&(this._colors.b++,256===this._colors.b&&(this._colors.b=0,this._colors.i=1)),1===this._colors.i&&(this._colors.g++,this._colors.i=0,256===this._colors.g&&(this._colors.g=0,this._colors.i=2)),2===this._colors.i&&(this._colors.r++,this._colors.i=1,256===this._colors.r&&(this._colors.r=0,this._colors.i=0)),{r:this._colors.r,g:this._colors.g,b:this._colors.b,code:"".concat(this._colors.r,"-").concat(this._colors.g,"-").concat(this._colors.b)}}cullEdges(t,e){e&&this.updateEdges(t),this.fragment.edges.edgesList[t.id]&&(this.fragment.edges.edgesList[t.id].visible=e)}updateEdges(t){this.fragment.edges.edgesToUpdate.has(t.id)&&(this.fragment.edges.generate(t),this.fragment.edges.edgesToUpdate.delete(t.id))}}class FS{constructor(t){this.groupSystems={category:{},floor:{}},this._fragments=t}dispose(){this.groupSystems={}}add(t,e){for(const n in e){this.groupSystems[n]||(this.groupSystems[n]={});const i=this.groupSystems[n],r=e[n];for(const e in r)i[e]||(i[e]={}),i[e][t]=r[e]}}setVisibility(t,e,n){const i=this.groupSystems[t][e];for(const r in i){const t=this._fragments.list[r],e=i[r];t.setVisibility(e,n)}}remove(t){for(const e in this.groupSystems){const n=this.groupSystems[e];for(const e in n){delete n[e][t]}}}get(t){const e=Object.keys(t).length,n={};for(const r in t){const e=t[r],i=this.groupSystems[r][e];if(i)for(const t in i){n[t]||(n[t]={});for(const e of i[t])n[t][e]?n[t][e]++:n[t][e]=1}}const i={};for(const r in n){const t=n[r];for(const n in t){t[n]===e&&(i[r]||(i[r]=[]),i[r].push(n))}}return i}}class LS{constructor(t){this.edgesList={},this.edgesToUpdate=new Set,this.threshold=80,this._mat4=new Ep,this._dummy=new Zp,this._pos=[],this._rot=[],this._scl=[],this.lineMat=new Vy({color:5592405,onBeforeCompile:t=>{t.vertexShader="\n    attribute vec3 instT;\n    attribute vec4 instR;\n    attribute vec3 instS;\n    \n    // http://barradeau.com/blog/?p=1109\n    vec3 trs( inout vec3 position, vec3 T, vec4 R, vec3 S ) {\n        position *= S;\n        position += 2.0 * cross( R.xyz, cross( R.xyz, position ) + R.w * position );\n        position += T;\n        return position;\n    }\n    ".concat(t.vertexShader,"\n").replace("#include <begin_vertex>","#include <begin_vertex>\n      transformed = trs(transformed, instT, instR, instS);\n")}}),this.disposer=new Pb,this._components=t}dispose(){for(const t in this.edgesList){const e=this.edgesList[t];this.disposer.dispose(e,!0)}this.lineMat.dispose(),this.edgesList={},this.edgesToUpdate.clear()}generate(t){if(this.edgesList[t.id]){const e=this.edgesList[t.id];e.removeFromParent(),e.geometry.dispose(),e.geometry=null,delete this.edgesList[t.id]}this.getInstanceTransforms(t);const e=new gv(t.mesh.geometry,this.threshold),n=(new TT).copy(e);n.instanceCount=1/0,this.setAttributes(n);const i=new $y(n,this.lineMat);i.frustumCulled=!1;return this._components.scene.get().add(i),this.edgesList[t.id]=i,this.updateInstancedEdges(t,n),i.visible=!1,i}updateInstancedEdges(t,e){for(let n=0;n<t.mesh.count;n++)t.mesh.getMatrixAt(n,this._mat4),this._mat4.decompose(this._dummy.position,this._dummy.quaternion,this._dummy.scale),this.linesTRS(n,this._dummy,e)}setAttributes(t){t.setAttribute("instT",new Uy(new Float32Array(this._pos),3)),t.setAttribute("instR",new Uy(new Float32Array(this._rot),4)),t.setAttribute("instS",new Uy(new Float32Array(this._scl),3)),this._pos.length=0,this._rot.length=0,this._scl.length=0}getInstanceTransforms(t){for(let e=0;e<t.mesh.count;e++)t.getInstance(e,this._dummy.matrix),this._dummy.updateMatrix(),this._pos.push(this._dummy.position.x,this._dummy.position.y,this._dummy.position.z),this._rot.push(this._dummy.quaternion.x,this._dummy.quaternion.y,this._dummy.quaternion.z,this._dummy.quaternion.w),this._scl.push(this._dummy.scale.x,this._dummy.scale.y,this._dummy.scale.z)}linesTRS(t,e,n){n.attributes.instT.setXYZ(t,e.position.x,e.position.y,e.position.z),n.attributes.instT.needsUpdate=!0,n.attributes.instR.setXYZW(t,e.quaternion.x,e.quaternion.y,e.quaternion.z,e.quaternion.w),n.attributes.instR.needsUpdate=!0,n.attributes.instS.setXYZ(t,e.scale.x,e.scale.y,e.scale.z),n.attributes.instS.needsUpdate=!0}}class kS{constructor(t){this.fragments=t,this.originals={},this.materials=new Set}dispose(){for(const t of this.materials)t.dispose();this.materials.clear()}apply(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.keys(this.fragments.list);this.materials.add(t);for(const n of e){const e=this.fragments.list[n];this.save(e),e.mesh.material=t}}reset(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(this.fragments.list);for(const e of t){const t=this.fragments.list[e],n=this.originals[e];n&&(t.mesh.material=n)}}save(t){this.originals[t.id]||(this.originals[t.id]=t.mesh.material)}}class US{constructor(){this.properties={},this.fragmentGuid=new Map}dispose(){this.properties={},this.fragmentGuid.clear()}add(t){const e=Object.values(t).find((t=>"IFCPROJECT"===t.type)).GlobalId;return this.properties[e]=t,e}assign(t,e){this.fragmentGuid.set(e,t)}getItemsOfType(t,e){const n=this.properties[t];return Object.values(n).filter((t=>t.type===e))}get(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)throw new Error("This fragment has no properties assigned.");const i=this.properties[t][e],r=i.expressID;return n&&this.getPropertySets(t,r,i),i}getPropertySets(t,e,n){this.getItemsOfType(t,"IFCRELDEFINESBYPROPERTIES");const i=this.getPsetDefinition(t,e),r=this.properties[t];for(const s of i)s.HasProperties&&(s.HasProperties=s.HasProperties.map((t=>r[t]))),s.Quantities&&(s.Quantities=s.Quantities.map((t=>r[t])));n.psets=i}getPsetDefinition(t,e){const n=this.getItemsOfType(t,"IFCRELDEFINESBYPROPERTIES").filter((t=>t.RelatedObjects.includes(e))),i=this.properties[t];return n.map((t=>i[t.RelatingPropertyDefinition]))}}class BS{constructor(t){this.props=t,this.relAggregates="IFCRELAGGREGATES",this.relSpatial="IFCRELCONTAINEDINSPATIALSTRUCTURE"}generate(t){const e={expressID:this.props.getItemsOfType(t,"IFCPROJECT")[0].expressID,type:"IFCPROJECT",children:[]},n=this.props.getItemsOfType(t,this.relAggregates),i=this.props.getItemsOfType(t,this.relSpatial);return this.constructSpatialNode(t,e,n,i),e}constructSpatialNode(t,e,n,i){const r=i.filter((t=>t.RelatingStructure===e.expressID)),s=n.filter((t=>t.RelatingObject===e.expressID)),o=[];for(const c of r)o.push(...c.RelatedElements);const a=[];for(const c of s)a.push(...c.RelatedObjects);const l=[...o,...a],h=[];for(let c=0;c<l.length;c++){const e=l[c],r=this.props.get(t,e.toString()),s={expressID:r.expressID,type:r.type,children:[]};this.constructSpatialNode(t,s,n,i),h.push(s)}e.children=h}}var zS="/index.js",GS=Object.defineProperty,HS=Object.getOwnPropertySymbols,jS=Object.prototype.hasOwnProperty,VS=Object.prototype.propertyIsEnumerable,WS=(t,e,n)=>e in t?GS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ZS=(t,e)=>{for(var n in e||(e={}))jS.call(e,n)&&WS(t,n,e[n]);if(HS)for(var n of HS(e))VS.call(e,n)&&WS(t,n,e[n]);return t},YS=t=>n(5671)(t),qS=(t,e)=>function(){return e||(0,t[Object.keys(t)[0]])((e={exports:{}}).exports,e),e.exports},XS=(t,e,n)=>new Promise(((i,r)=>{var s=t=>{try{a(n.next(t))}catch(uJ){r(uJ)}},o=t=>{try{a(n.throw(t))}catch(uJ){r(uJ)}},a=t=>t.done?i(t.value):Promise.resolve(t.value).then(s,o);a((n=n.apply(t,e)).next())})),KS=qS({"(disabled):crypto"(){}}),QS=qS({"dist/web-ifc-mt.js"(t,e){var i=function(){var t="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return t=t||zS,function(e){function i(){return U.buffer!=K&&dt(U.buffer),Q}function r(){return U.buffer!=K&&dt(U.buffer),J}function s(){return U.buffer!=K&&dt(U.buffer),$}function o(){return U.buffer!=K&&dt(U.buffer),tt}function a(){return U.buffer!=K&&dt(U.buffer),et}function l(){return U.buffer!=K&&dt(U.buffer),nt}function h(){return U.buffer!=K&&dt(U.buffer),rt}var c,u,p="undefined"!==typeof(e=e||{})?e:{};p.ready=new Promise((function(t,e){c=t,u=e}));var d,f={};for(d in p)p.hasOwnProperty(d)&&(f[d]=p[d]);var m,g,y,v,_,T=[],E="./this.program",x=function(t,e){throw e},b="object"===typeof window,I="function"===typeof importScripts,w="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node,S=p.ENVIRONMENT_IS_PTHREAD||!1,R="";function C(t){return p.locateFile?p.locateFile(t,R):R+t}if(w){var A;R=I?YS("path").dirname(R)+"/":"//",m=function(t,e){return v||(v=YS("fs")),_||(_=YS("path")),t=_.normalize(t),v.readFileSync(t,e?null:"utf8")},y=function(t){var e=m(t,!0);return e.buffer||(e=new Uint8Array(e)),H(e.buffer),e},g=function(t,e,n){v||(v=YS("fs")),_||(_=YS("path")),t=_.normalize(t),v.readFile(t,(function(t,i){t?n(t):e(i.buffer)}))},process.argv.length>1&&(E=process.argv[1].replace(/\\/g,"/")),T=process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof Gi))throw t})),process.on("unhandledRejection",Ot),x=function(t,e){if(xt())throw process.exitCode=t,e;process.exit(t)},p.inspect=function(){return"[Emscripten Module object]"};try{A=YS("worker_threads")}catch(uJ){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),uJ}n.g.Worker=A.Worker}else(b||I)&&(I?R=self.location.href:"undefined"!==typeof document&&document.currentScript&&(R=document.currentScript.src),t&&(R=t),R=0!==R.indexOf("blob:")?R.substr(0,R.lastIndexOf("/")+1):"",w?(m=function(t,e){return v||(v=YS("fs")),_||(_=YS("path")),t=_.normalize(t),v.readFileSync(t,e?null:"utf8")},y=function(t){var e=m(t,!0);return e.buffer||(e=new Uint8Array(e)),H(e.buffer),e},g=function(t,e,n){v||(v=YS("fs")),_||(_=YS("path")),t=_.normalize(t),v.readFile(t,(function(t,i){t?n(t):e(i.buffer)}))}):(m=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},I&&(y=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),g=function(t,e,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status||0==i.status&&i.response?e(i.response):n()},i.onerror=n,i.send(null)}),function(t){document.title=t});w&&"undefined"===typeof performance&&(n.g.performance=YS("perf_hooks").performance);var D=p.print||console.log.bind(console),O=p.printErr||console.warn.bind(console);for(d in f)f.hasOwnProperty(d)&&(p[d]=f[d]);f=null,p.arguments&&(T=p.arguments),p.thisProgram&&(E=p.thisProgram),p.quit&&(x=p.quit);var N=16;function M(t){M.shown||(M.shown={}),M.shown[t]||(M.shown[t]=1,O(t))}var P,F=0,L=function(t){F=t},k=function(){return F};Atomics.load,Atomics.store,Atomics.compareExchange;p.wasmBinary&&(P=p.wasmBinary);var U,B,z=p.noExitRuntime||!0;"object"!==typeof WebAssembly&&Ot("no native wasm support detected");var G=!1;function H(t,e){t||Ot("Assertion failed: "+e)}function j(t){var e=new TextDecoder(t);this.decode=function(t){return t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode.call(e,t)}}var V="undefined"!==typeof TextDecoder?new j("utf8"):void 0;function W(t,e,n){for(var i=(e>>>=0)+n,r=e;t[r>>>0]&&!(r>=i);)++r;if(r-e>16&&t.subarray&&V)return V.decode(t.subarray(e>>>0,r>>>0));for(var s="";e<r;){var o=t[e++>>>0];if(128&o){var a=63&t[e++>>>0];if(192!=(224&o)){var l=63&t[e++>>>0];if((o=224==(240&o)?(15&o)<<12|a<<6|l:(7&o)<<18|a<<12|l<<6|63&t[e++>>>0])<65536)s+=String.fromCharCode(o);else{var h=o-65536;s+=String.fromCharCode(55296|h>>10,56320|1023&h)}}else s+=String.fromCharCode((31&o)<<6|a)}else s+=String.fromCharCode(o)}return s}function Z(t,e){return(t>>>=0)?W(r(),t,e):""}function Y(t,e,n,i){if(!(i>0))return 0;for(var r=n>>>=0,s=n+i-1,o=0;o<t.length;++o){var a=t.charCodeAt(o);if(a>=55296&&a<=57343)a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o);if(a<=127){if(n>=s)break;e[n++>>>0]=a}else if(a<=2047){if(n+1>=s)break;e[n++>>>0]=192|a>>6,e[n++>>>0]=128|63&a}else if(a<=65535){if(n+2>=s)break;e[n++>>>0]=224|a>>12,e[n++>>>0]=128|a>>6&63,e[n++>>>0]=128|63&a}else{if(n+3>=s)break;e[n++>>>0]=240|a>>18,e[n++>>>0]=128|a>>12&63,e[n++>>>0]=128|a>>6&63,e[n++>>>0]=128|63&a}}return e[n>>>0]=0,n-r}function q(t,e,n){return Y(t,r(),e,n)}function X(t){for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++n)),i<=127?++e:e+=i<=2047?2:i<=65535?3:4}return e}var K,Q,J,$,tt,et,nt,it,rt,st="undefined"!==typeof TextDecoder?new j("utf-16le"):void 0;function ot(t,e){for(var n=t,i=n>>1,a=i+e/2;!(i>=a)&&o()[i>>>0];)++i;if((n=i<<1)-t>32&&st)return st.decode(r().subarray(t>>>0,n>>>0));for(var l="",h=0;!(h>=e/2);++h){var c=s()[t+2*h>>>1];if(0==c)break;l+=String.fromCharCode(c)}return l}function at(t,e,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var i=e,r=(n-=2)<2*t.length?n/2:t.length,o=0;o<r;++o){var a=t.charCodeAt(o);s()[e>>>1]=a,e+=2}return s()[e>>>1]=0,e-i}function lt(t){return 2*t.length}function ht(t,e){for(var n=0,i="";!(n>=e/4);){var r=a()[t+4*n>>>2];if(0==r)break;if(++n,r>=65536){var s=r-65536;i+=String.fromCharCode(55296|s>>10,56320|1023&s)}else i+=String.fromCharCode(r)}return i}function ct(t,e,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var i=e>>>=0,r=i+n-4,s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o>=55296&&o<=57343)o=65536+((1023&o)<<10)|1023&t.charCodeAt(++s);if(a()[e>>>2]=o,(e+=4)+4>r)break}return a()[e>>>2]=0,e-i}function ut(t){for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=55296&&i<=57343&&++n,e+=4}return e}function pt(t,e){return t%e>0&&(t+=e-t%e),t}function dt(t){K=t,p.HEAP8=Q=new Int8Array(t),p.HEAP16=$=new Int16Array(t),p.HEAP32=et=new Int32Array(t),p.HEAPU8=J=new Uint8Array(t),p.HEAPU16=tt=new Uint16Array(t),p.HEAPU32=nt=new Uint32Array(t),p.HEAPF32=it=new Float32Array(t),p.HEAPF64=rt=new Float64Array(t)}S&&(K=p.buffer);var ft,mt=p.INITIAL_MEMORY||16777216;if(S)U=p.wasmMemory,K=p.buffer;else if(p.wasmMemory)U=p.wasmMemory;else if(!((U=new WebAssembly.Memory({initial:mt/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw O("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),w&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");U&&(K=U.buffer),mt=K.byteLength,dt(K);var gt=[],yt=[],vt=[],_t=[],Tt=[],Et=0;function xt(){return z||Et>0}function bt(){!0,S||(p.noFSInit||ie.init.initialized||ie.init(),ie.ignorePermissions=!1,te.init(),zt(yt))}function It(t){gt.unshift(t)}function wt(t){Tt.unshift(t)}var St=0,Rt=null,Ct=null;function At(t){St++,p.monitorRunDependencies&&p.monitorRunDependencies(St)}function Dt(t){if(St--,p.monitorRunDependencies&&p.monitorRunDependencies(St),0==St&&(null!==Rt&&(clearInterval(Rt),Rt=null),Ct)){var e=Ct;Ct=null,e()}}function Ot(t){p.onAbort&&p.onAbort(t),S&&console.error("Pthread aborting at "+(new Error).stack),O(t+=""),G=!0,1,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.";var e=new WebAssembly.RuntimeError(t);throw u(e),e}p.preloadedImages={},p.preloadedAudios={};var Nt,Mt,Pt,Ft="data:application/octet-stream;base64,";function Lt(t){return t.startsWith(Ft)}function kt(t){return t.startsWith("file://")}function Ut(t){try{if(t==Nt&&P)return new Uint8Array(P);if(y)return y(t);throw"both async and sync fetching of the wasm failed"}catch(e){Ot(e)}}Lt(Nt="web-ifc-mt.wasm")||(Nt=C(Nt));var Bt={56684:function(){throw"Canceled!"},56702:function(t,e){setTimeout((function(){Ti(t,e)}),0)}};function zt(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var n=e.func;"number"===typeof n?void 0===e.arg?ft.get(n)():ft.get(n)(e.arg):n(void 0===e.arg?null:e.arg)}else e(p)}}function Gt(t,e){if(t<=0||t>i().length||!0&t||e<0)return-28;if(0==e)return 0;e>=2147483647&&(e=1/0);var n=Atomics.load(a(),zi>>2),r=0;if(n==t&&(Atomics.compareExchange(a(),zi>>2,n,0)==n&&(r=1,--e<=0)))return 1;var s=Atomics.notify(a(),t>>2,e);if(s>=0)return s+r;throw"Atomics.notify returned an unexpected value "+s}p._emscripten_futex_wake=Gt;var Ht,jt={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],initMainThreadBlock:function(){for(var t=navigator.hardwareConcurrency,e=0;e<t;++e)jt.allocateUnusedWorker()},initRuntime:function(){for(var t=gi(228),e=0;e<57;++e)l()[t/4+e>>>0]=0;a()[t+12>>>2]=t;var n=t+152;a()[n>>>2]=n;var i=gi(512);for(e=0;e<128;++e)l()[i/4+e>>>0]=0;Atomics.store(l(),t+100>>2,i),Atomics.store(l(),t+40>>2,t),wi(t,!I,1),_i(t)},initWorker:function(){},pthreads:{},threadExitHandlers:[],runExitHandlers:function(){for(;jt.threadExitHandlers.length>0;)jt.threadExitHandlers.pop()();Ai()},runExitHandlersAndDeinitThread:function(t,e){Atomics.store(l(),t+56>>2,1),Atomics.store(l(),t+60>>2,0),jt.runExitHandlers(),Atomics.store(l(),t+4>>2,e),Atomics.store(l(),t+0>>2,1),Gt(t+0,2147483647),wi(0,0,0)},setExitStatus:function(t){t},threadExit:function(t){var e=Ci();e&&(jt.runExitHandlersAndDeinitThread(e,t),S&&postMessage({cmd:"exit"}))},threadCancel:function(){jt.runExitHandlersAndDeinitThread(Ci(),-1),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var t in jt.pthreads){(i=jt.pthreads[t])&&i.worker&&jt.returnWorkerToPool(i.worker)}jt.pthreads={};for(var e=0;e<jt.unusedWorkers.length;++e){(n=jt.unusedWorkers[e]).terminate()}jt.unusedWorkers=[];for(e=0;e<jt.runningWorkers.length;++e){var n,i=(n=jt.runningWorkers[e]).pthread;jt.freeThreadData(i),n.terminate()}jt.runningWorkers=[]},freeThreadData:function(t){if(t){if(t.threadInfoStruct){var e=a()[t.threadInfoStruct+100>>>2];a()[t.threadInfoStruct+100>>>2]=0,yi(e),yi(t.threadInfoStruct)}t.threadInfoStruct=0,t.allocatedOwnStack&&t.stackBase&&yi(t.stackBase),t.stackBase=0,t.worker&&(t.worker.pthread=null)}},returnWorkerToPool:function(t){jt.runWithoutMainThreadQueuedCalls((function(){delete jt.pthreads[t.pthread.threadInfoStruct],jt.unusedWorkers.push(t),jt.runningWorkers.splice(jt.runningWorkers.indexOf(t),1),jt.freeThreadData(t.pthread),t.pthread=void 0}))},runWithoutMainThreadQueuedCalls:function(t){a()[Bi>>>2]=0;try{t()}finally{a()[Bi>>>2]=1}},receiveObjectTransfer:function(t){},threadInit:function(){for(var t in jt.tlsInitFunctions)jt.tlsInitFunctions[t]()},loadWasmModuleToWorker:function(e,n){e.onmessage=function(t){var i=t.data,r=i.cmd;if(e.pthread&&(jt.currentProxiedOperationCallerThread=e.pthread.threadInfoStruct),i.targetThread&&i.targetThread!=Ci()){var s=jt.pthreads[i.targetThread];return s?s.worker.postMessage(t.data,i.transferList):console.error('Internal error! Worker sent a message "'+r+'" to target pthread '+i.targetThread+", but that thread no longer exists!"),void(jt.currentProxiedOperationCallerThread=void 0)}if("processQueuedMainThreadWork"===r)xi();else if("spawnThread"===r)ei(t.data);else if("cleanupThread"===r)!function(t){if(S)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!t)throw"Internal Error! Null pthread_ptr in cleanupThread!";var e=jt.pthreads[t];if(e){a()[t+12>>>2]=0;var n=e.worker;jt.returnWorkerToPool(n)}}(i.thread);else if("killThread"===r)!function(t){if(S)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!t)throw"Internal Error! Null pthread_ptr in killThread!";a()[t+12>>>2]=0;var e=jt.pthreads[t];e.worker.terminate(),jt.freeThreadData(e),jt.runningWorkers.splice(jt.runningWorkers.indexOf(e.worker),1),e.worker.pthread=void 0}(i.thread);else if("cancelThread"===r)!function(t){if(S)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!t)throw"Internal Error! Null pthread_ptr in cancelThread!";jt.pthreads[t].worker.postMessage({cmd:"cancel"})}(i.thread);else if("loaded"===r)e.loaded=!0,n&&n(e),e.runPthread&&(e.runPthread(),delete e.runPthread);else if("print"===r)D("Thread "+i.threadId+": "+i.text);else if("printErr"===r)O("Thread "+i.threadId+": "+i.text);else if("alert"===r)alert("Thread "+i.threadId+": "+i.text);else if("exit"===r){e.pthread&&Atomics.load(l(),e.pthread.threadInfoStruct+64>>2)&&jt.returnWorkerToPool(e)}else if("exitProcess"===r)try{ji(i.returnCode)}catch(o){if(o instanceof Gi)return;throw o}else"cancelDone"===r?jt.returnWorkerToPool(e):"objectTransfer"===r?jt.receiveObjectTransfer(t.data):"setimmediate"===t.data.target?e.postMessage(t.data):O("worker sent an unknown command "+r);jt.currentProxiedOperationCallerThread=void 0},e.onerror=function(t){O("pthread sent an error! "+t.filename+":"+t.lineno+": "+t.message)},w&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})),e.on("exit",(function(t){}))),e.postMessage({cmd:"load",urlOrBlob:p.mainScriptUrlOrBlob||t,wasmMemory:U,wasmModule:B})},allocateUnusedWorker:function(){var t=C("web-ifc-mt.worker.js");jt.unusedWorkers.push(new Worker(t))},getNewWorker:function(){return 0==jt.unusedWorkers.length&&(jt.allocateUnusedWorker(),jt.loadWasmModuleToWorker(jt.unusedWorkers[0])),jt.unusedWorkers.pop()},busySpinWait:function(t){for(var e=performance.now()+t;performance.now()<e;);}};p.establishStackSpace=function(t,e){Mi(t,e),Oi(t)},p.invokeEntryPoint=function(t,e){return ft.get(t)(e)},Ht=w?function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:S?function(){return performance.now()-p.__performance_now_clock_drift}:function(){return performance.now()};var Vt=!0;function Wt(t){return a()[Ri()>>>2]=t,t}function Zt(t){this.excPtr=t,this.ptr=t-16,this.set_type=function(t){a()[this.ptr+4>>>2]=t},this.get_type=function(){return a()[this.ptr+4>>>2]},this.set_destructor=function(t){a()[this.ptr+8>>>2]=t},this.get_destructor=function(){return a()[this.ptr+8>>>2]},this.set_refcount=function(t){a()[this.ptr>>>2]=t},this.set_caught=function(t){t=t?1:0,i()[this.ptr+12>>>0]=t},this.get_caught=function(){return 0!=i()[this.ptr+12>>>0]},this.set_rethrown=function(t){t=t?1:0,i()[this.ptr+13>>>0]=t},this.get_rethrown=function(){return 0!=i()[this.ptr+13>>>0]},this.init=function(t,e){this.set_type(t),this.set_destructor(e),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){Atomics.add(a(),this.ptr+0>>2,1)},this.release_ref=function(){return 1===Atomics.sub(a(),this.ptr+0>>2,1)}}function Yt(t){this.free=function(){yi(this.ptr),this.ptr=0},this.set_base_ptr=function(t){a()[this.ptr>>>2]=t},this.get_base_ptr=function(){return a()[this.ptr>>>2]},this.set_adjusted_ptr=function(t){a()[this.ptr+4>>>2]=t},this.get_adjusted_ptr_addr=function(){return this.ptr+4},this.get_adjusted_ptr=function(){return a()[this.ptr+4>>>2]},this.get_exception_ptr=function(){if(Li(this.get_exception_info().get_type()))return a()[this.get_base_ptr()>>>2];var t=this.get_adjusted_ptr();return 0!==t?t:this.get_base_ptr()},this.get_exception_info=function(){return new Zt(this.get_base_ptr())},void 0===t?(this.ptr=gi(8),this.set_adjusted_ptr(0)):this.ptr=t}var qt=[];var Xt=0;var Kt=0;function Qt(t){return yi(new Zt(t).ptr)}var Jt={splitPath:function(t){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1)},normalizeArray:function(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n;n--)t.unshift("..");return t},normalize:function(t){var e="/"===t.charAt(0),n="/"===t.substr(-1);return t=Jt.normalizeArray(t.split("/").filter((function(t){return!!t})),!e).join("/"),t||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},dirname:function(t){var e=Jt.splitPath(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},basename:function(t){if("/"===t)return"/";var e=(t=(t=Jt.normalize(t)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?t:t.substr(e+1)},extname:function(t){return Jt.splitPath(t)[3]},join:function(){var t=Array.prototype.slice.call(arguments,0);return Jt.normalize(t.join("/"))},join2:function(t,e){return Jt.normalize(t+"/"+e)}};var $t={resolve:function(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var i=n>=0?arguments[n]:ie.cwd();if("string"!==typeof i)throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";t=i+"/"+t,e="/"===i.charAt(0)}return t=Jt.normalizeArray(t.split("/").filter((function(t){return!!t})),!e).join("/"),(e?"/":"")+t||"."},relative:function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=$t.resolve(t).substr(1),e=$t.resolve(e).substr(1);for(var i=n(t.split("/")),r=n(e.split("/")),s=Math.min(i.length,r.length),o=s,a=0;a<s;a++)if(i[a]!==r[a]){o=a;break}var l=[];for(a=o;a<i.length;a++)l.push("..");return(l=l.concat(r.slice(o))).join("/")}},te={ttys:[],init:function(){},shutdown:function(){},register:function(t,e){te.ttys[t]={input:[],output:[],ops:e},ie.registerDevice(t,te.stream_ops)},stream_ops:{open:function(t){var e=te.ttys[t.node.rdev];if(!e)throw new ie.ErrnoError(43);t.tty=e,t.seekable=!1},close:function(t){t.tty.ops.flush(t.tty)},flush:function(t){t.tty.ops.flush(t.tty)},read:function(t,e,n,i,r){if(!t.tty||!t.tty.ops.get_char)throw new ie.ErrnoError(60);for(var s=0,o=0;o<i;o++){var a;try{a=t.tty.ops.get_char(t.tty)}catch(uJ){throw new ie.ErrnoError(29)}if(void 0===a&&0===s)throw new ie.ErrnoError(6);if(null===a||void 0===a)break;s++,e[n+o]=a}return s&&(t.node.timestamp=Date.now()),s},write:function(t,e,n,i,r){if(!t.tty||!t.tty.ops.put_char)throw new ie.ErrnoError(60);try{for(var s=0;s<i;s++)t.tty.ops.put_char(t.tty,e[n+s])}catch(uJ){throw new ie.ErrnoError(29)}return i&&(t.node.timestamp=Date.now()),s}},default_tty_ops:{get_char:function(t){if(!t.input.length){var e=null;if(w){var n=Buffer.alloc(256),i=0;try{i=v.readSync(process.stdin.fd,n,0,256,null)}catch(uJ){if(!uJ.toString().includes("EOF"))throw uJ;i=0}e=i>0?n.slice(0,i).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\n");if(!e)return null;t.input=di(e,!0)}return t.input.shift()},put_char:function(t,e){null===e||10===e?(D(W(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&t.output.length>0&&(D(W(t.output,0)),t.output=[])}},default_tty1_ops:{put_char:function(t,e){null===e||10===e?(O(W(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&t.output.length>0&&(O(W(t.output,0)),t.output=[])}}};function ee(t){t=function(t,e){return e||(e=N),Math.ceil(t/e)*e}(t,65536);var e=ki(65536,t);return e?(function(t,e){r().fill(0,t,t+e)}(e,t),e):0}var ne={ops_table:null,mount:function(t){return ne.createNode(null,"/",16895,0)},createNode:function(t,e,n,i){if(ie.isBlkdev(n)||ie.isFIFO(n))throw new ie.ErrnoError(63);ne.ops_table||(ne.ops_table={dir:{node:{getattr:ne.node_ops.getattr,setattr:ne.node_ops.setattr,lookup:ne.node_ops.lookup,mknod:ne.node_ops.mknod,rename:ne.node_ops.rename,unlink:ne.node_ops.unlink,rmdir:ne.node_ops.rmdir,readdir:ne.node_ops.readdir,symlink:ne.node_ops.symlink},stream:{llseek:ne.stream_ops.llseek}},file:{node:{getattr:ne.node_ops.getattr,setattr:ne.node_ops.setattr},stream:{llseek:ne.stream_ops.llseek,read:ne.stream_ops.read,write:ne.stream_ops.write,allocate:ne.stream_ops.allocate,mmap:ne.stream_ops.mmap,msync:ne.stream_ops.msync}},link:{node:{getattr:ne.node_ops.getattr,setattr:ne.node_ops.setattr,readlink:ne.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ne.node_ops.getattr,setattr:ne.node_ops.setattr},stream:ie.chrdev_stream_ops}});var r=ie.createNode(t,e,n,i);return ie.isDir(r.mode)?(r.node_ops=ne.ops_table.dir.node,r.stream_ops=ne.ops_table.dir.stream,r.contents={}):ie.isFile(r.mode)?(r.node_ops=ne.ops_table.file.node,r.stream_ops=ne.ops_table.file.stream,r.usedBytes=0,r.contents=null):ie.isLink(r.mode)?(r.node_ops=ne.ops_table.link.node,r.stream_ops=ne.ops_table.link.stream):ie.isChrdev(r.mode)&&(r.node_ops=ne.ops_table.chrdev.node,r.stream_ops=ne.ops_table.chrdev.stream),r.timestamp=Date.now(),t&&(t.contents[e]=r,t.timestamp=r.timestamp),r},getFileDataAsTypedArray:function(t){return t.contents?t.contents.subarray?t.contents.subarray(0,t.usedBytes):new Uint8Array(t.contents):new Uint8Array(0)},expandFileStorage:function(t,e){e>>>=0;var n=t.contents?t.contents.length:0;if(!(n>=e)){e=Math.max(e,n*(n<1048576?2:1.125)>>>0),0!=n&&(e=Math.max(e,256));var i=t.contents;t.contents=new Uint8Array(e),t.usedBytes>0&&t.contents.set(i.subarray(0,t.usedBytes),0)}},resizeFileStorage:function(t,e){if(e>>>=0,t.usedBytes!=e)if(0==e)t.contents=null,t.usedBytes=0;else{var n=t.contents;t.contents=new Uint8Array(e),n&&t.contents.set(n.subarray(0,Math.min(e,t.usedBytes))),t.usedBytes=e}},node_ops:{getattr:function(t){var e={};return e.dev=ie.isChrdev(t.mode)?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,ie.isDir(t.mode)?e.size=4096:ie.isFile(t.mode)?e.size=t.usedBytes:ie.isLink(t.mode)?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr:function(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&ne.resizeFileStorage(t,e.size)},lookup:function(t,e){throw ie.genericErrors[44]},mknod:function(t,e,n,i){return ne.createNode(t,e,n,i)},rename:function(t,e,n){if(ie.isDir(t.mode)){var i;try{i=ie.lookupNode(e,n)}catch(uJ){}if(i)for(var r in i.contents)throw new ie.ErrnoError(55)}delete t.parent.contents[t.name],t.parent.timestamp=Date.now(),t.name=n,e.contents[n]=t,e.timestamp=t.parent.timestamp,t.parent=e},unlink:function(t,e){delete t.contents[e],t.timestamp=Date.now()},rmdir:function(t,e){var n=ie.lookupNode(t,e);for(var i in n.contents)throw new ie.ErrnoError(55);delete t.contents[e],t.timestamp=Date.now()},readdir:function(t){var e=[".",".."];for(var n in t.contents)t.contents.hasOwnProperty(n)&&e.push(n);return e},symlink:function(t,e,n){var i=ne.createNode(t,e,41471,0);return i.link=n,i},readlink:function(t){if(!ie.isLink(t.mode))throw new ie.ErrnoError(28);return t.link}},stream_ops:{read:function(t,e,n,i,r){var s=t.node.contents;if(r>=t.node.usedBytes)return 0;var o=Math.min(t.node.usedBytes-r,i);if(o>8&&s.subarray)e.set(s.subarray(r,r+o),n);else for(var a=0;a<o;a++)e[n+a]=s[r+a];return o},write:function(t,e,n,r,s,o){if(e.buffer===i().buffer&&(o=!1),!r)return 0;var a=t.node;if(a.timestamp=Date.now(),e.subarray&&(!a.contents||a.contents.subarray)){if(o)return a.contents=e.subarray(n,n+r),a.usedBytes=r,r;if(0===a.usedBytes&&0===s)return a.contents=e.slice(n,n+r),a.usedBytes=r,r;if(s+r<=a.usedBytes)return a.contents.set(e.subarray(n,n+r),s),r}if(ne.expandFileStorage(a,s+r),a.contents.subarray&&e.subarray)a.contents.set(e.subarray(n,n+r),s);else for(var l=0;l<r;l++)a.contents[s+l]=e[n+l];return a.usedBytes=Math.max(a.usedBytes,s+r),r},llseek:function(t,e,n){var i=e;if(1===n?i+=t.position:2===n&&ie.isFile(t.node.mode)&&(i+=t.node.usedBytes),i<0)throw new ie.ErrnoError(28);return i},allocate:function(t,e,n){ne.expandFileStorage(t.node,e+n),t.node.usedBytes=Math.max(t.node.usedBytes,e+n)},mmap:function(t,e,n,r,s,o){if(0!==e)throw new ie.ErrnoError(28);if(!ie.isFile(t.node.mode))throw new ie.ErrnoError(43);var a,l,h=t.node.contents;if(2&o||h.buffer!==K){if((r>0||r+n<h.length)&&(h=h.subarray?h.subarray(r,r+n):Array.prototype.slice.call(h,r,r+n)),l=!0,!(a=ee(n)))throw new ie.ErrnoError(48);a>>>=0,i().set(h,a>>>0)}else l=!1,a=h.byteOffset;return{ptr:a,allocated:l}},msync:function(t,e,n,i,r){if(!ie.isFile(t.node.mode))throw new ie.ErrnoError(43);if(2&r)return 0;ne.stream_ops.write(t,e,0,i,n,!1);return 0}}};var ie={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(t,e){if(e=e||{},!(t=$t.resolve(ie.cwd(),t)))return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var i in n)void 0===e[i]&&(e[i]=n[i]);if(e.recurse_count>8)throw new ie.ErrnoError(32);for(var r=Jt.normalizeArray(t.split("/").filter((function(t){return!!t})),!1),s=ie.root,o="/",a=0;a<r.length;a++){var l=a===r.length-1;if(l&&e.parent)break;if(s=ie.lookupNode(s,r[a]),o=Jt.join2(o,r[a]),ie.isMountpoint(s)&&(!l||l&&e.follow_mount)&&(s=s.mounted.root),!l||e.follow)for(var h=0;ie.isLink(s.mode);){var c=ie.readlink(o);if(o=$t.resolve(Jt.dirname(o),c),s=ie.lookupPath(o,{recurse_count:e.recurse_count}).node,h++>40)throw new ie.ErrnoError(32)}}return{path:o,node:s}},getPath:function(t){for(var e;;){if(ie.isRoot(t)){var n=t.mount.mountpoint;return e?"/"!==n[n.length-1]?n+"/"+e:n+e:n}e=e?t.name+"/"+e:t.name,t=t.parent}},hashName:function(t,e){for(var n=0,i=0;i<e.length;i++)n=(n<<5)-n+e.charCodeAt(i)|0;return(t+n>>>0)%ie.nameTable.length},hashAddNode:function(t){var e=ie.hashName(t.parent.id,t.name);t.name_next=ie.nameTable[e],ie.nameTable[e]=t},hashRemoveNode:function(t){var e=ie.hashName(t.parent.id,t.name);if(ie.nameTable[e]===t)ie.nameTable[e]=t.name_next;else for(var n=ie.nameTable[e];n;){if(n.name_next===t){n.name_next=t.name_next;break}n=n.name_next}},lookupNode:function(t,e){var n=ie.mayLookup(t);if(n)throw new ie.ErrnoError(n,t);for(var i=ie.hashName(t.id,e),r=ie.nameTable[i];r;r=r.name_next){var s=r.name;if(r.parent.id===t.id&&s===e)return r}return ie.lookup(t,e)},createNode:function(t,e,n,i){var r=new ie.FSNode(t,e,n,i);return ie.hashAddNode(r),r},destroyNode:function(t){ie.hashRemoveNode(t)},isRoot:function(t){return t===t.parent},isMountpoint:function(t){return!!t.mounted},isFile:function(t){return 32768===(61440&t)},isDir:function(t){return 16384===(61440&t)},isLink:function(t){return 40960===(61440&t)},isChrdev:function(t){return 8192===(61440&t)},isBlkdev:function(t){return 24576===(61440&t)},isFIFO:function(t){return 4096===(61440&t)},isSocket:function(t){return 49152===(49152&t)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(t){var e=ie.flagModes[t];if("undefined"===typeof e)throw new Error("Unknown file open mode: "+t);return e},flagsToPermissionString:function(t){var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e},nodePermissions:function(t,e){return ie.ignorePermissions||(!e.includes("r")||292&t.mode)&&(!e.includes("w")||146&t.mode)&&(!e.includes("x")||73&t.mode)?0:2},mayLookup:function(t){var e=ie.nodePermissions(t,"x");return e||(t.node_ops.lookup?0:2)},mayCreate:function(t,e){try{ie.lookupNode(t,e);return 20}catch(uJ){}return ie.nodePermissions(t,"wx")},mayDelete:function(t,e,n){var i;try{i=ie.lookupNode(t,e)}catch(uJ){return uJ.errno}var r=ie.nodePermissions(t,"wx");if(r)return r;if(n){if(!ie.isDir(i.mode))return 54;if(ie.isRoot(i)||ie.getPath(i)===ie.cwd())return 10}else if(ie.isDir(i.mode))return 31;return 0},mayOpen:function(t,e){return t?ie.isLink(t.mode)?32:ie.isDir(t.mode)&&("r"!==ie.flagsToPermissionString(e)||512&e)?31:ie.nodePermissions(t,ie.flagsToPermissionString(e)):44},MAX_OPEN_FDS:4096,nextfd:function(t,e){t=t||0,e=e||ie.MAX_OPEN_FDS;for(var n=t;n<=e;n++)if(!ie.streams[n])return n;throw new ie.ErrnoError(33)},getStream:function(t){return ie.streams[t]},createStream:function(t,e,n){ie.FSStream||(ie.FSStream=function(){},ie.FSStream.prototype={object:{get:function(){return this.node},set:function(t){this.node=t}},isRead:{get:function(){return 1!==(2097155&this.flags)}},isWrite:{get:function(){return 0!==(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var i=new ie.FSStream;for(var r in t)i[r]=t[r];t=i;var s=ie.nextfd(e,n);return t.fd=s,ie.streams[s]=t,t},closeStream:function(t){ie.streams[t]=null},chrdev_stream_ops:{open:function(t){var e=ie.getDevice(t.node.rdev);t.stream_ops=e.stream_ops,t.stream_ops.open&&t.stream_ops.open(t)},llseek:function(){throw new ie.ErrnoError(70)}},major:function(t){return t>>8},minor:function(t){return 255&t},makedev:function(t,e){return t<<8|e},registerDevice:function(t,e){ie.devices[t]={stream_ops:e}},getDevice:function(t){return ie.devices[t]},getMounts:function(t){for(var e=[],n=[t];n.length;){var i=n.pop();e.push(i),n.push.apply(n,i.mounts)}return e},syncfs:function(t,e){"function"===typeof t&&(e=t,t=!1),ie.syncFSRequests++,ie.syncFSRequests>1&&O("warning: "+ie.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=ie.getMounts(ie.root.mount),i=0;function r(t){return ie.syncFSRequests--,e(t)}function s(t){if(t)return s.errored?void 0:(s.errored=!0,r(t));++i>=n.length&&r(null)}n.forEach((function(e){if(!e.type.syncfs)return s(null);e.type.syncfs(e,t,s)}))},mount:function(t,e,n){var i,r="/"===n,s=!n;if(r&&ie.root)throw new ie.ErrnoError(10);if(!r&&!s){var o=ie.lookupPath(n,{follow_mount:!1});if(n=o.path,i=o.node,ie.isMountpoint(i))throw new ie.ErrnoError(10);if(!ie.isDir(i.mode))throw new ie.ErrnoError(54)}var a={type:t,opts:e,mountpoint:n,mounts:[]},l=t.mount(a);return l.mount=a,a.root=l,r?ie.root=l:i&&(i.mounted=a,i.mount&&i.mount.mounts.push(a)),l},unmount:function(t){var e=ie.lookupPath(t,{follow_mount:!1});if(!ie.isMountpoint(e.node))throw new ie.ErrnoError(28);var n=e.node,i=n.mounted,r=ie.getMounts(i);Object.keys(ie.nameTable).forEach((function(t){for(var e=ie.nameTable[t];e;){var n=e.name_next;r.includes(e.mount)&&ie.destroyNode(e),e=n}})),n.mounted=null;var s=n.mount.mounts.indexOf(i);n.mount.mounts.splice(s,1)},lookup:function(t,e){return t.node_ops.lookup(t,e)},mknod:function(t,e,n){var i=ie.lookupPath(t,{parent:!0}).node,r=Jt.basename(t);if(!r||"."===r||".."===r)throw new ie.ErrnoError(28);var s=ie.mayCreate(i,r);if(s)throw new ie.ErrnoError(s);if(!i.node_ops.mknod)throw new ie.ErrnoError(63);return i.node_ops.mknod(i,r,e,n)},create:function(t,e){return e=void 0!==e?e:438,e&=4095,e|=32768,ie.mknod(t,e,0)},mkdir:function(t,e){return e=void 0!==e?e:511,e&=1023,e|=16384,ie.mknod(t,e,0)},mkdirTree:function(t,e){for(var n=t.split("/"),i="",r=0;r<n.length;++r)if(n[r]){i+="/"+n[r];try{ie.mkdir(i,e)}catch(uJ){if(20!=uJ.errno)throw uJ}}},mkdev:function(t,e,n){return"undefined"===typeof n&&(n=e,e=438),e|=8192,ie.mknod(t,e,n)},symlink:function(t,e){if(!$t.resolve(t))throw new ie.ErrnoError(44);var n=ie.lookupPath(e,{parent:!0}).node;if(!n)throw new ie.ErrnoError(44);var i=Jt.basename(e),r=ie.mayCreate(n,i);if(r)throw new ie.ErrnoError(r);if(!n.node_ops.symlink)throw new ie.ErrnoError(63);return n.node_ops.symlink(n,i,t)},rename:function(t,e){var n,i,r=Jt.dirname(t),s=Jt.dirname(e),o=Jt.basename(t),a=Jt.basename(e);if(n=ie.lookupPath(t,{parent:!0}).node,i=ie.lookupPath(e,{parent:!0}).node,!n||!i)throw new ie.ErrnoError(44);if(n.mount!==i.mount)throw new ie.ErrnoError(75);var l,h=ie.lookupNode(n,o),c=$t.relative(t,s);if("."!==c.charAt(0))throw new ie.ErrnoError(28);if("."!==(c=$t.relative(e,r)).charAt(0))throw new ie.ErrnoError(55);try{l=ie.lookupNode(i,a)}catch(uJ){}if(h!==l){var u=ie.isDir(h.mode),p=ie.mayDelete(n,o,u);if(p)throw new ie.ErrnoError(p);if(p=l?ie.mayDelete(i,a,u):ie.mayCreate(i,a))throw new ie.ErrnoError(p);if(!n.node_ops.rename)throw new ie.ErrnoError(63);if(ie.isMountpoint(h)||l&&ie.isMountpoint(l))throw new ie.ErrnoError(10);if(i!==n&&(p=ie.nodePermissions(n,"w")))throw new ie.ErrnoError(p);try{ie.trackingDelegate.willMovePath&&ie.trackingDelegate.willMovePath(t,e)}catch(uJ){O("FS.trackingDelegate['willMovePath']('"+t+"', '"+e+"') threw an exception: "+uJ.message)}ie.hashRemoveNode(h);try{n.node_ops.rename(h,i,a)}catch(uJ){throw uJ}finally{ie.hashAddNode(h)}try{ie.trackingDelegate.onMovePath&&ie.trackingDelegate.onMovePath(t,e)}catch(uJ){O("FS.trackingDelegate['onMovePath']('"+t+"', '"+e+"') threw an exception: "+uJ.message)}}},rmdir:function(t){var e=ie.lookupPath(t,{parent:!0}).node,n=Jt.basename(t),i=ie.lookupNode(e,n),r=ie.mayDelete(e,n,!0);if(r)throw new ie.ErrnoError(r);if(!e.node_ops.rmdir)throw new ie.ErrnoError(63);if(ie.isMountpoint(i))throw new ie.ErrnoError(10);try{ie.trackingDelegate.willDeletePath&&ie.trackingDelegate.willDeletePath(t)}catch(uJ){O("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+uJ.message)}e.node_ops.rmdir(e,n),ie.destroyNode(i);try{ie.trackingDelegate.onDeletePath&&ie.trackingDelegate.onDeletePath(t)}catch(uJ){O("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+uJ.message)}},readdir:function(t){var e=ie.lookupPath(t,{follow:!0}).node;if(!e.node_ops.readdir)throw new ie.ErrnoError(54);return e.node_ops.readdir(e)},unlink:function(t){var e=ie.lookupPath(t,{parent:!0}).node,n=Jt.basename(t),i=ie.lookupNode(e,n),r=ie.mayDelete(e,n,!1);if(r)throw new ie.ErrnoError(r);if(!e.node_ops.unlink)throw new ie.ErrnoError(63);if(ie.isMountpoint(i))throw new ie.ErrnoError(10);try{ie.trackingDelegate.willDeletePath&&ie.trackingDelegate.willDeletePath(t)}catch(uJ){O("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+uJ.message)}e.node_ops.unlink(e,n),ie.destroyNode(i);try{ie.trackingDelegate.onDeletePath&&ie.trackingDelegate.onDeletePath(t)}catch(uJ){O("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+uJ.message)}},readlink:function(t){var e=ie.lookupPath(t).node;if(!e)throw new ie.ErrnoError(44);if(!e.node_ops.readlink)throw new ie.ErrnoError(28);return $t.resolve(ie.getPath(e.parent),e.node_ops.readlink(e))},stat:function(t,e){var n=ie.lookupPath(t,{follow:!e}).node;if(!n)throw new ie.ErrnoError(44);if(!n.node_ops.getattr)throw new ie.ErrnoError(63);return n.node_ops.getattr(n)},lstat:function(t){return ie.stat(t,!0)},chmod:function(t,e,n){var i;"string"===typeof t?i=ie.lookupPath(t,{follow:!n}).node:i=t;if(!i.node_ops.setattr)throw new ie.ErrnoError(63);i.node_ops.setattr(i,{mode:4095&e|-4096&i.mode,timestamp:Date.now()})},lchmod:function(t,e){ie.chmod(t,e,!0)},fchmod:function(t,e){var n=ie.getStream(t);if(!n)throw new ie.ErrnoError(8);ie.chmod(n.node,e)},chown:function(t,e,n,i){var r;"string"===typeof t?r=ie.lookupPath(t,{follow:!i}).node:r=t;if(!r.node_ops.setattr)throw new ie.ErrnoError(63);r.node_ops.setattr(r,{timestamp:Date.now()})},lchown:function(t,e,n){ie.chown(t,e,n,!0)},fchown:function(t,e,n){var i=ie.getStream(t);if(!i)throw new ie.ErrnoError(8);ie.chown(i.node,e,n)},truncate:function(t,e){if(e<0)throw new ie.ErrnoError(28);var n;"string"===typeof t?n=ie.lookupPath(t,{follow:!0}).node:n=t;if(!n.node_ops.setattr)throw new ie.ErrnoError(63);if(ie.isDir(n.mode))throw new ie.ErrnoError(31);if(!ie.isFile(n.mode))throw new ie.ErrnoError(28);var i=ie.nodePermissions(n,"w");if(i)throw new ie.ErrnoError(i);n.node_ops.setattr(n,{size:e,timestamp:Date.now()})},ftruncate:function(t,e){var n=ie.getStream(t);if(!n)throw new ie.ErrnoError(8);if(0===(2097155&n.flags))throw new ie.ErrnoError(28);ie.truncate(n.node,e)},utime:function(t,e,n){var i=ie.lookupPath(t,{follow:!0}).node;i.node_ops.setattr(i,{timestamp:Math.max(e,n)})},open:function(t,e,n,i,r){if(""===t)throw new ie.ErrnoError(44);var s;if(n="undefined"===typeof n?438:n,n=64&(e="string"===typeof e?ie.modeStringToFlags(e):e)?4095&n|32768:0,"object"===typeof t)s=t;else{t=Jt.normalize(t);try{s=ie.lookupPath(t,{follow:!(131072&e)}).node}catch(uJ){}}var o=!1;if(64&e)if(s){if(128&e)throw new ie.ErrnoError(20)}else s=ie.mknod(t,n,0),o=!0;if(!s)throw new ie.ErrnoError(44);if(ie.isChrdev(s.mode)&&(e&=-513),65536&e&&!ie.isDir(s.mode))throw new ie.ErrnoError(54);if(!o){var a=ie.mayOpen(s,e);if(a)throw new ie.ErrnoError(a)}512&e&&ie.truncate(s,0),e&=-131713;var l=ie.createStream({node:s,path:ie.getPath(s),flags:e,seekable:!0,position:0,stream_ops:s.stream_ops,ungotten:[],error:!1},i,r);l.stream_ops.open&&l.stream_ops.open(l),!p.logReadFiles||1&e||(ie.readFiles||(ie.readFiles={}),t in ie.readFiles||(ie.readFiles[t]=1,O("FS.trackingDelegate error on read file: "+t)));try{if(ie.trackingDelegate.onOpenFile){var h=0;1!==(2097155&e)&&(h|=ie.tracking.openFlags.READ),0!==(2097155&e)&&(h|=ie.tracking.openFlags.WRITE),ie.trackingDelegate.onOpenFile(t,h)}}catch(uJ){O("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+uJ.message)}return l},close:function(t){if(ie.isClosed(t))throw new ie.ErrnoError(8);t.getdents&&(t.getdents=null);try{t.stream_ops.close&&t.stream_ops.close(t)}catch(uJ){throw uJ}finally{ie.closeStream(t.fd)}t.fd=null},isClosed:function(t){return null===t.fd},llseek:function(t,e,n){if(ie.isClosed(t))throw new ie.ErrnoError(8);if(!t.seekable||!t.stream_ops.llseek)throw new ie.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new ie.ErrnoError(28);return t.position=t.stream_ops.llseek(t,e,n),t.ungotten=[],t.position},read:function(t,e,n,i,r){if(n>>>=0,i<0||r<0)throw new ie.ErrnoError(28);if(ie.isClosed(t))throw new ie.ErrnoError(8);if(1===(2097155&t.flags))throw new ie.ErrnoError(8);if(ie.isDir(t.node.mode))throw new ie.ErrnoError(31);if(!t.stream_ops.read)throw new ie.ErrnoError(28);var s="undefined"!==typeof r;if(s){if(!t.seekable)throw new ie.ErrnoError(70)}else r=t.position;var o=t.stream_ops.read(t,e,n,i,r);return s||(t.position+=o),o},write:function(t,e,n,i,r,s){if(n>>>=0,i<0||r<0)throw new ie.ErrnoError(28);if(ie.isClosed(t))throw new ie.ErrnoError(8);if(0===(2097155&t.flags))throw new ie.ErrnoError(8);if(ie.isDir(t.node.mode))throw new ie.ErrnoError(31);if(!t.stream_ops.write)throw new ie.ErrnoError(28);t.seekable&&1024&t.flags&&ie.llseek(t,0,2);var o="undefined"!==typeof r;if(o){if(!t.seekable)throw new ie.ErrnoError(70)}else r=t.position;var a=t.stream_ops.write(t,e,n,i,r,s);o||(t.position+=a);try{t.path&&ie.trackingDelegate.onWriteToFile&&ie.trackingDelegate.onWriteToFile(t.path)}catch(uJ){O("FS.trackingDelegate['onWriteToFile']('"+t.path+"') threw an exception: "+uJ.message)}return a},allocate:function(t,e,n){if(ie.isClosed(t))throw new ie.ErrnoError(8);if(e<0||n<=0)throw new ie.ErrnoError(28);if(0===(2097155&t.flags))throw new ie.ErrnoError(8);if(!ie.isFile(t.node.mode)&&!ie.isDir(t.node.mode))throw new ie.ErrnoError(43);if(!t.stream_ops.allocate)throw new ie.ErrnoError(138);t.stream_ops.allocate(t,e,n)},mmap:function(t,e,n,i,r,s){if(e>>>=0,0!==(2&r)&&0===(2&s)&&2!==(2097155&t.flags))throw new ie.ErrnoError(2);if(1===(2097155&t.flags))throw new ie.ErrnoError(2);if(!t.stream_ops.mmap)throw new ie.ErrnoError(43);return t.stream_ops.mmap(t,e,n,i,r,s)},msync:function(t,e,n,i,r){return n>>>=0,t&&t.stream_ops.msync?t.stream_ops.msync(t,e,n,i,r):0},munmap:function(t){return 0},ioctl:function(t,e,n){if(!t.stream_ops.ioctl)throw new ie.ErrnoError(59);return t.stream_ops.ioctl(t,e,n)},readFile:function(t,e){if((e=e||{}).flags=e.flags||0,e.encoding=e.encoding||"binary","utf8"!==e.encoding&&"binary"!==e.encoding)throw new Error('Invalid encoding type "'+e.encoding+'"');var n,i=ie.open(t,e.flags),r=ie.stat(t).size,s=new Uint8Array(r);return ie.read(i,s,0,r,0),"utf8"===e.encoding?n=W(s,0):"binary"===e.encoding&&(n=s),ie.close(i),n},writeFile:function(t,e,n){(n=n||{}).flags=n.flags||577;var i=ie.open(t,n.flags,n.mode);if("string"===typeof e){var r=new Uint8Array(X(e)+1),s=Y(e,r,0,r.length);ie.write(i,r,0,s,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(e))throw new Error("Unsupported data type");ie.write(i,e,0,e.byteLength,void 0,n.canOwn)}ie.close(i)},cwd:function(){return ie.currentPath},chdir:function(t){var e=ie.lookupPath(t,{follow:!0});if(null===e.node)throw new ie.ErrnoError(44);if(!ie.isDir(e.node.mode))throw new ie.ErrnoError(54);var n=ie.nodePermissions(e.node,"x");if(n)throw new ie.ErrnoError(n);ie.currentPath=e.path},createDefaultDirectories:function(){ie.mkdir("/tmp"),ie.mkdir("/home"),ie.mkdir("/home/web_user")},createDefaultDevices:function(){ie.mkdir("/dev"),ie.registerDevice(ie.makedev(1,3),{read:function(){return 0},write:function(t,e,n,i,r){return i}}),ie.mkdev("/dev/null",ie.makedev(1,3)),te.register(ie.makedev(5,0),te.default_tty_ops),te.register(ie.makedev(6,0),te.default_tty1_ops),ie.mkdev("/dev/tty",ie.makedev(5,0)),ie.mkdev("/dev/tty1",ie.makedev(6,0));var t=function(){if("object"===typeof crypto&&"function"===typeof crypto.getRandomValues){var t=new Uint8Array(1);return function(){return crypto.getRandomValues(t),t[0]}}if(w)try{var e=KS();return function(){return e.randomBytes(1)[0]}}catch(uJ){}return function(){Ot("randomDevice")}}();ie.createDevice("/dev","random",t),ie.createDevice("/dev","urandom",t),ie.mkdir("/dev/shm"),ie.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){ie.mkdir("/proc");var t=ie.mkdir("/proc/self");ie.mkdir("/proc/self/fd"),ie.mount({mount:function(){var e=ie.createNode(t,"fd",16895,73);return e.node_ops={lookup:function(t,e){var n=+e,i=ie.getStream(n);if(!i)throw new ie.ErrnoError(8);var r={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return i.path}}};return r.parent=r,r}},e}},{},"/proc/self/fd")},createStandardStreams:function(){p.stdin?ie.createDevice("/dev","stdin",p.stdin):ie.symlink("/dev/tty","/dev/stdin"),p.stdout?ie.createDevice("/dev","stdout",null,p.stdout):ie.symlink("/dev/tty","/dev/stdout"),p.stderr?ie.createDevice("/dev","stderr",null,p.stderr):ie.symlink("/dev/tty1","/dev/stderr");ie.open("/dev/stdin",0),ie.open("/dev/stdout",1),ie.open("/dev/stderr",1)},ensureErrnoError:function(){ie.ErrnoError||(ie.ErrnoError=function(t,e){this.node=e,this.setErrno=function(t){this.errno=t},this.setErrno(t),this.message="FS error"},ie.ErrnoError.prototype=new Error,ie.ErrnoError.prototype.constructor=ie.ErrnoError,[44].forEach((function(t){ie.genericErrors[t]=new ie.ErrnoError(t),ie.genericErrors[t].stack="<generic error, no stack>"})))},staticInit:function(){ie.ensureErrnoError(),ie.nameTable=new Array(4096),ie.mount(ne,{},"/"),ie.createDefaultDirectories(),ie.createDefaultDevices(),ie.createSpecialDirectories(),ie.filesystems={MEMFS:ne}},init:function(t,e,n){ie.init.initialized=!0,ie.ensureErrnoError(),p.stdin=t||p.stdin,p.stdout=e||p.stdout,p.stderr=n||p.stderr,ie.createStandardStreams()},quit:function(){ie.init.initialized=!1;var t=p._fflush;t&&t(0);for(var e=0;e<ie.streams.length;e++){var n=ie.streams[e];n&&ie.close(n)}},getMode:function(t,e){var n=0;return t&&(n|=365),e&&(n|=146),n},findObject:function(t,e){var n=ie.analyzePath(t,e);return n.exists?n.object:null},analyzePath:function(t,e){try{t=(i=ie.lookupPath(t,{follow:!e})).path}catch(uJ){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var i=ie.lookupPath(t,{parent:!0});n.parentExists=!0,n.parentPath=i.path,n.parentObject=i.node,n.name=Jt.basename(t),i=ie.lookupPath(t,{follow:!e}),n.exists=!0,n.path=i.path,n.object=i.node,n.name=i.node.name,n.isRoot="/"===i.path}catch(uJ){n.error=uJ.errno}return n},createPath:function(t,e,n,i){t="string"===typeof t?t:ie.getPath(t);for(var r=e.split("/").reverse();r.length;){var s=r.pop();if(s){var o=Jt.join2(t,s);try{ie.mkdir(o)}catch(uJ){}t=o}}return o},createFile:function(t,e,n,i,r){var s=Jt.join2("string"===typeof t?t:ie.getPath(t),e),o=ie.getMode(i,r);return ie.create(s,o)},createDataFile:function(t,e,n,i,r,s){var o=e?Jt.join2("string"===typeof t?t:ie.getPath(t),e):t,a=ie.getMode(i,r),l=ie.create(o,a);if(n){if("string"===typeof n){for(var h=new Array(n.length),c=0,u=n.length;c<u;++c)h[c]=n.charCodeAt(c);n=h}ie.chmod(l,146|a);var p=ie.open(l,577);ie.write(p,n,0,n.length,0,s),ie.close(p),ie.chmod(l,a)}return l},createDevice:function(t,e,n,i){var r=Jt.join2("string"===typeof t?t:ie.getPath(t),e),s=ie.getMode(!!n,!!i);ie.createDevice.major||(ie.createDevice.major=64);var o=ie.makedev(ie.createDevice.major++,0);return ie.registerDevice(o,{open:function(t){t.seekable=!1},close:function(t){i&&i.buffer&&i.buffer.length&&i(10)},read:function(t,e,i,r,s){for(var o=0,a=0;a<r;a++){var l;try{l=n()}catch(uJ){throw new ie.ErrnoError(29)}if(void 0===l&&0===o)throw new ie.ErrnoError(6);if(null===l||void 0===l)break;o++,e[i+a]=l}return o&&(t.node.timestamp=Date.now()),o},write:function(t,e,n,r,s){for(var o=0;o<r;o++)try{i(e[n+o])}catch(uJ){throw new ie.ErrnoError(29)}return r&&(t.node.timestamp=Date.now()),o}}),ie.mkdev(r,s,o)},forceLoadFile:function(t){if(t.isDevice||t.isFolder||t.link||t.contents)return!0;if("undefined"!==typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!m)throw new Error("Cannot load without read() or XMLHttpRequest.");try{t.contents=di(m(t.url),!0),t.usedBytes=t.contents.length}catch(uJ){throw new ie.ErrnoError(29)}},createLazyFile:function(t,e,n,i,r){function s(){this.lengthKnown=!1,this.chunks=[]}if(s.prototype.get=function(t){if(!(t>this.length-1||t<0)){var e=t%this.chunkSize,n=t/this.chunkSize|0;return this.getter(n)[e]}},s.prototype.setDataGetter=function(t){this.getter=t},s.prototype.cacheLength=function(){var t=new XMLHttpRequest;if(t.open("HEAD",n,!1),t.send(null),!(t.status>=200&&t.status<300||304===t.status))throw new Error("Couldn't load "+n+". Status: "+t.status);var e,i=Number(t.getResponseHeader("Content-length")),r=(e=t.getResponseHeader("Accept-Ranges"))&&"bytes"===e,s=(e=t.getResponseHeader("Content-Encoding"))&&"gzip"===e,o=1048576;r||(o=i);var a=this;a.setDataGetter((function(t){var e=t*o,r=(t+1)*o-1;if(r=Math.min(r,i-1),"undefined"===typeof a.chunks[t]&&(a.chunks[t]=function(t,e){if(t>e)throw new Error("invalid range ("+t+", "+e+") or no bytes requested!");if(e>i-1)throw new Error("only "+i+" bytes available! programmer error!");var r=new XMLHttpRequest;if(r.open("GET",n,!1),i!==o&&r.setRequestHeader("Range","bytes="+t+"-"+e),"undefined"!=typeof Uint8Array&&(r.responseType="arraybuffer"),r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.send(null),!(r.status>=200&&r.status<300||304===r.status))throw new Error("Couldn't load "+n+". Status: "+r.status);return void 0!==r.response?new Uint8Array(r.response||[]):di(r.responseText||"",!0)}(e,r)),"undefined"===typeof a.chunks[t])throw new Error("doXHR failed!");return a.chunks[t]})),!s&&i||(o=i=1,i=this.getter(0).length,o=i,D("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=i,this._chunkSize=o,this.lengthKnown=!0},"undefined"!==typeof XMLHttpRequest){if(!I)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o=new s;Object.defineProperties(o,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var a={isDevice:!1,contents:o}}else a={isDevice:!1,url:n};var l=ie.createFile(t,e,a,i,r);a.contents?l.contents=a.contents:a.url&&(l.contents=null,l.url=a.url),Object.defineProperties(l,{usedBytes:{get:function(){return this.contents.length}}});var h={};return Object.keys(l.stream_ops).forEach((function(t){var e=l.stream_ops[t];h[t]=function(){return ie.forceLoadFile(l),e.apply(null,arguments)}})),h.read=function(t,e,n,i,r){ie.forceLoadFile(l);var s=t.node.contents;if(r>=s.length)return 0;var o=Math.min(s.length-r,i);if(s.slice)for(var a=0;a<o;a++)e[n+a]=s[r+a];else for(a=0;a<o;a++)e[n+a]=s.get(r+a);return o},l.stream_ops=h,l},createPreloadedFile:function(t,e,n,i,r,s,o,a,l,h){Browser.init();var c=e?$t.resolve(Jt.join2(t,e)):t;function u(n){function u(n){h&&h(),a||ie.createDataFile(t,e,n,i,r,l),s&&s(),Dt()}var d=!1;p.preloadPlugins.forEach((function(t){d||t.canHandle(c)&&(t.handle(n,c,u,(function(){o&&o(),Dt()})),d=!0)})),d||u(n)}At(),"string"==typeof n?function(t,e,n,i){var r=i?"":"al "+t;g(t,(function(n){H(n,'Loading data file "'+t+'" failed (no arrayBuffer).'),e(new Uint8Array(n)),r&&Dt()}),(function(e){if(!n)throw'Loading data file "'+t+'" failed.';n()})),r&&At()}(n,(function(t){u(t)}),o):u(n)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(t,e,n){e=e||function(){},n=n||function(){};var i=ie.indexedDB();try{var r=i.open(ie.DB_NAME(),ie.DB_VERSION)}catch(uJ){return n(uJ)}r.onupgradeneeded=function(){D("creating db"),r.result.createObjectStore(ie.DB_STORE_NAME)},r.onsuccess=function(){var i=r.result.transaction([ie.DB_STORE_NAME],"readwrite"),s=i.objectStore(ie.DB_STORE_NAME),o=0,a=0,l=t.length;function h(){0==a?e():n()}t.forEach((function(t){var e=s.put(ie.analyzePath(t).object.contents,t);e.onsuccess=function(){++o+a==l&&h()},e.onerror=function(){a++,o+a==l&&h()}})),i.onerror=n},r.onerror=n},loadFilesFromDB:function(t,e,n){e=e||function(){},n=n||function(){};var i=ie.indexedDB();try{var r=i.open(ie.DB_NAME(),ie.DB_VERSION)}catch(uJ){return n(uJ)}r.onupgradeneeded=n,r.onsuccess=function(){var i=r.result;try{var s=i.transaction([ie.DB_STORE_NAME],"readonly")}catch(uJ){return void n(uJ)}var o=s.objectStore(ie.DB_STORE_NAME),a=0,l=0,h=t.length;function c(){0==l?e():n()}t.forEach((function(t){var e=o.get(t);e.onsuccess=function(){ie.analyzePath(t).exists&&ie.unlink(t),ie.createDataFile(Jt.dirname(t),Jt.basename(t),e.result,!0,!0,!0),++a+l==h&&c()},e.onerror=function(){l++,a+l==h&&c()}})),s.onerror=n},r.onerror=n}},re={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(t,e,n){if("/"===e[0])return e;var i;if(-100===t)i=ie.cwd();else{var r=ie.getStream(t);if(!r)throw new ie.ErrnoError(8);i=r.path}if(0==e.length){if(!n)throw new ie.ErrnoError(44);return i}return Jt.join2(i,e)},doStat:function(t,e,n){try{var i=t(e)}catch(uJ){if(uJ&&uJ.node&&Jt.normalize(e)!==Jt.normalize(ie.getPath(uJ.node)))return-54;throw uJ}return a()[n>>>2]=i.dev,a()[n+4>>>2]=0,a()[n+8>>>2]=i.ino,a()[n+12>>>2]=i.mode,a()[n+16>>>2]=i.nlink,a()[n+20>>>2]=i.uid,a()[n+24>>>2]=i.gid,a()[n+28>>>2]=i.rdev,a()[n+32>>>2]=0,Pt=[i.size>>>0,(Mt=i.size,+Math.abs(Mt)>=1?Mt>0?(0|Math.min(+Math.floor(Mt/4294967296),4294967295))>>>0:~~+Math.ceil((Mt-+(~~Mt>>>0))/4294967296)>>>0:0)],a()[n+40>>>2]=Pt[0],a()[n+44>>>2]=Pt[1],a()[n+48>>>2]=4096,a()[n+52>>>2]=i.blocks,a()[n+56>>>2]=i.atime.getTime()/1e3|0,a()[n+60>>>2]=0,a()[n+64>>>2]=i.mtime.getTime()/1e3|0,a()[n+68>>>2]=0,a()[n+72>>>2]=i.ctime.getTime()/1e3|0,a()[n+76>>>2]=0,Pt=[i.ino>>>0,(Mt=i.ino,+Math.abs(Mt)>=1?Mt>0?(0|Math.min(+Math.floor(Mt/4294967296),4294967295))>>>0:~~+Math.ceil((Mt-+(~~Mt>>>0))/4294967296)>>>0:0)],a()[n+80>>>2]=Pt[0],a()[n+84>>>2]=Pt[1],0},doMsync:function(t,e,n,i,s){var o=r().slice(t,t+n);ie.msync(e,o,s,n,i)},doMkdir:function(t,e){return"/"===(t=Jt.normalize(t))[t.length-1]&&(t=t.substr(0,t.length-1)),ie.mkdir(t,e,0),0},doMknod:function(t,e,n){switch(61440&e){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return ie.mknod(t,e,n),0},doReadlink:function(t,e,n){if(n<=0)return-28;var r=ie.readlink(t),s=Math.min(n,X(r)),o=i()[e+s>>>0];return q(r,e,n+1),i()[e+s>>>0]=o,s},doAccess:function(t,e){if(-8&e)return-28;var n;if(!(n=ie.lookupPath(t,{follow:!0}).node))return-44;var i="";return 4&e&&(i+="r"),2&e&&(i+="w"),1&e&&(i+="x"),i&&ie.nodePermissions(n,i)?-2:0},doDup:function(t,e,n){var i=ie.getStream(n);return i&&ie.close(i),ie.open(t,e,0,n,n).fd},doReadv:function(t,e,n,r){for(var s=0,o=0;o<n;o++){var l=a()[e+8*o>>>2],h=a()[e+(8*o+4)>>>2],c=ie.read(t,i(),l,h,r);if(c<0)return-1;if(s+=c,c<h)break}return s},doWritev:function(t,e,n,r){for(var s=0,o=0;o<n;o++){var l=a()[e+8*o>>>2],h=a()[e+(8*o+4)>>>2],c=ie.write(t,i(),l,h,r);if(c<0)return-1;s+=c}return s},varargs:void 0,get:function(){return re.varargs+=4,a()[re.varargs-4>>>2]},getStr:function(t){return Z(t)},getStreamFromFD:function(t){var e=ie.getStream(t);if(!e)throw new ie.ErrnoError(8);return e},get64:function(t,e){return t}};function se(t,e,n){if(S)return Fn(2,1,t,e,n);re.varargs=n;try{var i=re.getStreamFromFD(t);switch(e){case 0:return(r=re.get())<0?-28:ie.open(i.path,i.flags,0,r).fd;case 1:case 2:case 13:case 14:return 0;case 3:return i.flags;case 4:var r=re.get();return i.flags|=r,0;case 12:r=re.get();return s()[r+0>>>1]=2,0;case 16:case 8:default:return-28;case 9:return Wt(28),-1}}catch(uJ){return"undefined"!==typeof ie&&uJ instanceof ie.ErrnoError||Ot(uJ),-uJ.errno}}function oe(t,e,n){if(S)return Fn(3,1,t,e,n);re.varargs=n;try{var i=re.getStreamFromFD(t);switch(e){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return i.tty?0:-59;case 21519:if(!i.tty)return-59;var r=re.get();return a()[r>>>2]=0,0;case 21520:return i.tty?-28:-59;case 21531:r=re.get();return ie.ioctl(i,e,r);default:Ot("bad ioctl syscall "+e)}}catch(uJ){return"undefined"!==typeof ie&&uJ instanceof ie.ErrnoError||Ot(uJ),-uJ.errno}}function ae(t,e,n){if(S)return Fn(4,1,t,e,n);re.varargs=n;try{var i=re.getStr(t),r=n?re.get():0;return ie.open(i,e,r).fd}catch(uJ){return"undefined"!==typeof ie&&uJ instanceof ie.ErrnoError||Ot(uJ),-uJ.errno}}var le={};function he(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function ce(t){return this.fromWireType(l()[t>>>2])}var ue={},pe={},de={},fe=48,me=57;function ge(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=fe&&e<=me?"_"+t:t}function ye(t,e){return t=ge(t),new Function("body","return function "+t+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(e)}function ve(t,e){var n=ye(e,(function(t){this.name=e,this.message=t;var n=new Error(t).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var _e=void 0;function Te(t){throw new _e(t)}function Ee(t,e,n){function i(e){var i=n(e);i.length!==t.length&&Te("Mismatched type converter count");for(var r=0;r<t.length;++r)Ce(t[r],i[r])}t.forEach((function(t){de[t]=e}));var r=new Array(e.length),s=[],o=0;e.forEach((function(t,e){pe.hasOwnProperty(t)?r[e]=pe[t]:(s.push(t),ue.hasOwnProperty(t)||(ue[t]=[]),ue[t].push((function(){r[e]=pe[t],++o===s.length&&i(r)})))})),0===s.length&&i(r)}var xe={};function be(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}var Ie=void 0;function we(t){for(var e="",n=t;r()[n>>>0];)e+=Ie[r()[n++>>>0]];return e}var Se=void 0;function Re(t){throw new Se(t)}function Ce(t,e,n){if(n=n||{},!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var i=e.name;if(t||Re('type "'+i+'" must have a positive integer typeid pointer'),pe.hasOwnProperty(t)){if(n.ignoreDuplicateRegistrations)return;Re("Cannot register type '"+i+"' twice")}if(pe[t]=e,delete de[t],ue.hasOwnProperty(t)){var r=ue[t];delete ue[t],r.forEach((function(t){t()}))}}function Ae(t){if(!(this instanceof je))return!1;if(!(t instanceof je))return!1;for(var e=this.$$.ptrType.registeredClass,n=this.$$.ptr,i=t.$$.ptrType.registeredClass,r=t.$$.ptr;e.baseClass;)n=e.upcast(n),e=e.baseClass;for(;i.baseClass;)r=i.upcast(r),i=i.baseClass;return e===i&&n===r}function De(t){return{count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}}function Oe(t){Re(t.$$.ptrType.registeredClass.name+" instance already deleted")}var Ne=!1;function Me(t){}function Pe(t){t.count.value-=1,0===t.count.value&&function(t){t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)}(t)}function Fe(t){return"undefined"===typeof FinalizationGroup?(Fe=function(t){return t},t):(Ne=new FinalizationGroup((function(t){for(var e=t.next();!e.done;e=t.next()){var n=e.value;n.ptr?Pe(n):console.warn("object already deleted: "+n.ptr)}})),Me=function(t){Ne.unregister(t.$$)},(Fe=function(t){return Ne.register(t,t.$$,t.$$),t})(t))}function Le(){if(this.$$.ptr||Oe(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=Fe(Object.create(Object.getPrototypeOf(this),{$$:{value:De(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function ke(){this.$$.ptr||Oe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Re("Object already scheduled for deletion"),Me(this),Pe(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Ue(){return!this.$$.ptr}var Be=void 0,ze=[];function Ge(){for(;ze.length;){var t=ze.pop();t.$$.deleteScheduled=!1,t.delete()}}function He(){return this.$$.ptr||Oe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Re("Object already scheduled for deletion"),ze.push(this),1===ze.length&&Be&&Be(Ge),this.$$.deleteScheduled=!0,this}function je(){}var Ve={};function We(t,e,n){if(void 0===t[e].overloadTable){var i=t[e];t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||Re("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[e].overloadTable+")!"),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[i.argCount]=i}}function Ze(t,e,n){p.hasOwnProperty(t)?((void 0===n||void 0!==p[t].overloadTable&&void 0!==p[t].overloadTable[n])&&Re("Cannot register public name '"+t+"' twice"),We(p,t,t),p.hasOwnProperty(n)&&Re("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),p[t].overloadTable[n]=e):(p[t]=e,void 0!==n&&(p[t].numArguments=n))}function Ye(t,e,n,i,r,s,o,a){this.name=t,this.constructor=e,this.instancePrototype=n,this.rawDestructor=i,this.baseClass=r,this.getActualType=s,this.upcast=o,this.downcast=a,this.pureVirtualFunctions=[]}function qe(t,e,n){for(;e!==n;)e.upcast||Re("Expected null or instance of "+n.name+", got an instance of "+e.name),t=e.upcast(t),e=e.baseClass;return t}function Xe(t,e){if(null===e)return this.isReference&&Re("null is not a valid "+this.name),0;e.$$||Re('Cannot pass "'+Rn(e)+'" as a '+this.name),e.$$.ptr||Re("Cannot pass deleted object as a pointer of type "+this.name);var n=e.$$.ptrType.registeredClass;return qe(e.$$.ptr,n,this.registeredClass)}function Ke(t,e){var n;if(null===e)return this.isReference&&Re("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==t&&t.push(this.rawDestructor,n),n):0;e.$$||Re('Cannot pass "'+Rn(e)+'" as a '+this.name),e.$$.ptr||Re("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&e.$$.ptrType.isConst&&Re("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);var i=e.$$.ptrType.registeredClass;if(n=qe(e.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(void 0===e.$$.smartPtr&&Re("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?n=e.$$.smartPtr:Re("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)n=e.$$.smartPtr;else{var r=e.clone();n=this.rawShare(n,In((function(){r.delete()}))),null!==t&&t.push(this.rawDestructor,n)}break;default:Re("Unsupporting sharing policy")}return n}function Qe(t,e){if(null===e)return this.isReference&&Re("null is not a valid "+this.name),0;e.$$||Re('Cannot pass "'+Rn(e)+'" as a '+this.name),e.$$.ptr||Re("Cannot pass deleted object as a pointer of type "+this.name),e.$$.ptrType.isConst&&Re("Cannot convert argument of type "+e.$$.ptrType.name+" to parameter type "+this.name);var n=e.$$.ptrType.registeredClass;return qe(e.$$.ptr,n,this.registeredClass)}function Je(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t}function $e(t){this.rawDestructor&&this.rawDestructor(t)}function tn(t){null!==t&&t.delete()}function en(t,e,n){if(e===n)return t;if(void 0===n.baseClass)return null;var i=en(t,e,n.baseClass);return null===i?null:n.downcast(i)}function nn(){return Object.keys(on).length}function rn(){var t=[];for(var e in on)on.hasOwnProperty(e)&&t.push(on[e]);return t}function sn(t){Be=t,ze.length&&Be&&Be(Ge)}var on={};function an(t,e){return e=function(t,e){for(void 0===e&&Re("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e}(t,e),on[e]}function ln(t,e){return e.ptrType&&e.ptr||Te("makeClassHandle requires ptr and ptrType"),!!e.smartPtrType!==!!e.smartPtr&&Te("Both smartPtrType and smartPtr must be specified"),e.count={value:1},Fe(Object.create(t,{$$:{value:e}}))}function hn(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var n=an(this.registeredClass,e);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=e,n.$$.smartPtr=t,n.clone();var i=n.clone();return this.destructor(t),i}function r(){return this.isSmartPointer?ln(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):ln(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var s,o=this.registeredClass.getActualType(e),a=Ve[o];if(!a)return r.call(this);s=this.isConst?a.constPointerType:a.pointerType;var l=en(e,this.registeredClass,s.registeredClass);return null===l?r.call(this):this.isSmartPointer?ln(s.registeredClass.instancePrototype,{ptrType:s,ptr:l,smartPtrType:this,smartPtr:t}):ln(s.registeredClass.instancePrototype,{ptrType:s,ptr:l})}function cn(t,e,n,i,r,s,o,a,l,h,c){this.name=t,this.registeredClass=e,this.isReference=n,this.isConst=i,this.isSmartPointer=r,this.pointeeType=s,this.sharingPolicy=o,this.rawGetPointee=a,this.rawConstructor=l,this.rawShare=h,this.rawDestructor=c,r||void 0!==e.baseClass?this.toWireType=Ke:i?(this.toWireType=Xe,this.destructorFunction=null):(this.toWireType=Qe,this.destructorFunction=null)}function un(t,e,n){p.hasOwnProperty(t)||Te("Replacing nonexistant public symbol"),void 0!==p[t].overloadTable&&void 0!==n?p[t].overloadTable[n]=e:(p[t]=e,p[t].argCount=n)}function pn(t,e,n){return t.includes("j")?function(t,e,n){var i=p["dynCall_"+t];return n&&n.length?i.apply(null,[e].concat(n)):i.call(null,e)}(t,e,n):ft.get(e).apply(null,n)}function dn(t,e){var n=(t=we(t)).includes("j")?function(t,e){var n=[];return function(){n.length=arguments.length;for(var i=0;i<arguments.length;i++)n[i]=arguments[i];return pn(t,e,n)}}(t,e):ft.get(e);return"function"!==typeof n&&Re("unknown function pointer with signature "+t+": "+e),n}var fn=void 0;function mn(t){var e=vi(t),n=we(e);return yi(e),n}function gn(t,e){var n=[],i={};throw e.forEach((function t(e){i[e]||pe[e]||(de[e]?de[e].forEach(t):(n.push(e),i[e]=!0))})),new fn(t+": "+n.map(mn).join([", "]))}function yn(t,e){for(var n=[],i=0;i<t;i++)n.push(a()[(e>>2)+i>>>0]);return n}function vn(t,e,n,i,r){var s=e.length;s<2&&Re("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==e[1]&&null!==n,a=!1,l=1;l<e.length;++l)if(null!==e[l]&&void 0===e[l].destructorFunction){a=!0;break}var h="void"!==e[0].name,c="",u="";for(l=0;l<s-2;++l)c+=(0!==l?", ":"")+"arg"+l,u+=(0!==l?", ":"")+"arg"+l+"Wired";var p="return function "+ge(t)+"("+c+") {\nif (arguments.length !== "+(s-2)+") {\nthrowBindingError('function "+t+" called with ' + arguments.length + ' arguments, expected "+(s-2)+" args!');\n}\n";a&&(p+="var destructors = [];\n");var d=a?"destructors":"null",f=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[Re,i,r,he,e[0],e[1]];o&&(p+="var thisWired = classParam.toWireType("+d+", this);\n");for(l=0;l<s-2;++l)p+="var arg"+l+"Wired = argType"+l+".toWireType("+d+", arg"+l+"); // "+e[l+2].name+"\n",f.push("argType"+l),m.push(e[l+2]);if(o&&(u="thisWired"+(u.length>0?", ":"")+u),p+=(h?"var rv = ":"")+"invoker(fn"+(u.length>0?", ":"")+u+");\n",a)p+="runDestructors(destructors);\n";else for(l=o?1:2;l<e.length;++l){var g=1===l?"thisWired":"arg"+(l-2)+"Wired";null!==e[l].destructorFunction&&(p+=g+"_dtor("+g+"); // "+e[l].name+"\n",f.push(g+"_dtor"),m.push(e[l].destructorFunction))}h&&(p+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),p+="}\n",f.push(p);var y=function(t,e){if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var n=ye(t.name||"unknownFunctionName",(function(){}));n.prototype=t.prototype;var i=new n,r=t.apply(i,e);return r instanceof Object?r:i}(Function,f).apply(null,m);return y}var _n=[],Tn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function En(t){t>4&&0===--Tn[t].refcount&&(Tn[t]=void 0,_n.push(t))}function xn(){for(var t=0,e=5;e<Tn.length;++e)void 0!==Tn[e]&&++t;return t}function bn(){for(var t=5;t<Tn.length;++t)if(void 0!==Tn[t])return Tn[t];return null}function In(t){switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=_n.length?_n.pop():Tn.length;return Tn[e]={refcount:1,value:t},e}}function wn(t,e,n){switch(e){case 0:return function(t){var e=n?i():r();return this.fromWireType(e[t>>>0])};case 1:return function(t){var e=n?s():o();return this.fromWireType(e[t>>>1])};case 2:return function(t){var e=n?a():l();return this.fromWireType(e[t>>>2])};default:throw new TypeError("Unknown integer type: "+t)}}function Sn(t,e){var n=pe[t];return void 0===n&&Re(e+" has unknown type "+mn(t)),n}function Rn(t){if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t}function Cn(t,e){switch(e){case 2:return function(t){return this.fromWireType((U.buffer!=K&&dt(U.buffer),it)[t>>>2])};case 3:return function(t){return this.fromWireType(h()[t>>>3])};default:throw new TypeError("Unknown float type: "+t)}}function An(t,e,n){switch(e){case 0:return n?function(t){return i()[t>>>0]}:function(t){return r()[t>>>0]};case 1:return n?function(t){return s()[t>>>1]}:function(t){return o()[t>>>1]};case 2:return n?function(t){return a()[t>>>2]}:function(t){return l()[t>>>2]};default:throw new TypeError("Unknown integer type: "+t)}}function Dn(t){return t||Re("Cannot use deleted val. handle = "+t),Tn[t].value}var On={};function Nn(t){var e=On[t];return void 0===e?we(t):e}function Mn(){return"object"===typeof globalThis?globalThis:Function("return this")()}var Pn=[];function Fn(t,e){for(var n=arguments.length-2,i=Di(),r=n,s=Ni(8*r),o=s>>3,a=0;a<n;a++){var l=arguments[2+a];h()[o+a>>>0]=l}var c=bi(t,r,s,e);return Oi(i),c}var Ln=[];function kn(t){try{return U.grow(t-K.byteLength+65535>>>16),dt(U.buffer),1}catch(uJ){}}var Un={inEventHandler:0,removeAllEventListeners:function(){for(var t=Un.eventHandlers.length-1;t>=0;--t)Un._removeHandler(t);Un.eventHandlers=[],Un.deferredCalls=[]},registerRemoveEventListeners:function(){Un.removeEventListenersRegistered||(_t.push(Un.removeAllEventListeners),Un.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(t,e,n){function i(t,e){if(t.length!=e.length)return!1;for(var n in t)if(t[n]!=e[n])return!1;return!0}for(var r in Un.deferredCalls){var s=Un.deferredCalls[r];if(s.targetFunction==t&&i(s.argsList,n))return}Un.deferredCalls.push({targetFunction:t,precedence:e,argsList:n}),Un.deferredCalls.sort((function(t,e){return t.precedence<e.precedence}))},removeDeferredCalls:function(t){for(var e=0;e<Un.deferredCalls.length;++e)Un.deferredCalls[e].targetFunction==t&&(Un.deferredCalls.splice(e,1),--e)},canPerformEventHandlerRequests:function(){return Un.inEventHandler&&Un.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(Un.canPerformEventHandlerRequests())for(var t=0;t<Un.deferredCalls.length;++t){var e=Un.deferredCalls[t];Un.deferredCalls.splice(t,1),--t,e.targetFunction.apply(null,e.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(t,e){for(var n=0;n<Un.eventHandlers.length;++n)Un.eventHandlers[n].target!=t||e&&e!=Un.eventHandlers[n].eventTypeString||Un._removeHandler(n--)},_removeHandler:function(t){var e=Un.eventHandlers[t];e.target.removeEventListener(e.eventTypeString,e.eventListenerFunc,e.useCapture),Un.eventHandlers.splice(t,1)},registerOrRemoveHandler:function(t){var e=function(e){++Un.inEventHandler,Un.currentEventHandler=t,Un.runDeferredCalls(),t.handlerFunc(e),Un.runDeferredCalls(),--Un.inEventHandler};if(t.callbackfunc)t.eventListenerFunc=e,t.target.addEventListener(t.eventTypeString,e,t.useCapture),Un.eventHandlers.push(t),Un.registerRemoveEventListeners();else for(var n=0;n<Un.eventHandlers.length;++n)Un.eventHandlers[n].target==t.target&&Un.eventHandlers[n].eventTypeString==t.eventTypeString&&Un._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(t,e,n,i,r){var s=Di(),o=Ni(12);a()[o>>>2]=n,a()[o+4>>>2]=i,a()[o+8>>>2]=r,Ii(0,t,637534208,e,i,o),Oi(s)},getTargetThreadForEventCallback:function(t){switch(t){case 1:return 0;case 2:return jt.currentProxiedOperationCallerThread;default:return t}},getNodeNameForTarget:function(t){return t?t==window?"#window":t==screen?"#screen":t&&t.nodeName?t.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function Bn(t,e,n,i){var r=Di(),s=Ni(12),o=0;e&&(o=function(t){var e=X(t)+1,n=gi(e);return q(t,n,e),n}(e)),a()[s>>>2]=o,a()[s+4>>>2]=n,a()[s+8>>>2]=i,Ii(0,t,657457152,0,o,s),Oi(r)}var zn=[0,"undefined"!==typeof document?document:0,"undefined"!==typeof window?window:0];function Gn(t){var e;return t=(e=t)>2?Z(e):e,zn[t]||("undefined"!==typeof document?document.querySelector(t):void 0)}function Hn(t){return Gn(t)}function jn(t,e,n){var i=Hn(t);if(!i)return-4;if(i.canvasSharedPtr&&(a()[i.canvasSharedPtr>>>2]=e,a()[i.canvasSharedPtr+4>>>2]=n),!i.offscreenCanvas&&i.controlTransferredOffscreen)return i.canvasSharedPtr?(function(t,e,n,i){Bn(t,e=e?Z(e):"",n,i)}(a()[i.canvasSharedPtr+8>>>2],t,e,n),1):-4;i.offscreenCanvas&&(i=i.offscreenCanvas);var r=!1;if(i.GLctxObject&&i.GLctxObject.GLctx){var s=i.GLctxObject.GLctx.getParameter(2978);r=0===s[0]&&0===s[1]&&s[2]===i.width&&s[3]===i.height}return i.width=e,i.height=n,r&&i.GLctxObject.GLctx.viewport(0,0,e,n),0}function Vn(t,e,n){return S?Fn(5,1,t,e,n):jn(t,e,n)}var Wn={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function(t){Wn.lastError||(Wn.lastError=t)},getNewId:function(t){for(var e=Wn.counter++,n=t.length;n<e;n++)t[n]=null;return e},getSource:function(t,e,n,i){for(var r="",s=0;s<e;++s){var o=i?a()[i+4*s>>>2]:-1;r+=Z(a()[n+4*s>>>2],o<0?void 0:o)}return r},createContext:function(t,e){t.getContextSafariWebGL2Fixed||(t.getContextSafariWebGL2Fixed=t.getContext,t.getContext=function(e,n){var i=t.getContextSafariWebGL2Fixed(e,n);return"webgl"==e==i instanceof WebGLRenderingContext?i:null});var n=t.getContext("webgl",e);return n?Wn.registerContext(n,e):0},registerContext:function(t,e){var n=gi(8);a()[n+4>>>2]=Ci();var i={handle:n,attributes:e,version:e.majorVersion,GLctx:t};return t.canvas&&(t.canvas.GLctxObject=i),Wn.contexts[n]=i,("undefined"===typeof e.enableExtensionsByDefault||e.enableExtensionsByDefault)&&Wn.initExtensions(i),n},makeContextCurrent:function(t){return Wn.currentContext=Wn.contexts[t],p.ctx=li=Wn.currentContext&&Wn.currentContext.GLctx,!(t&&!li)},getContext:function(t){return Wn.contexts[t]},deleteContext:function(t){Wn.currentContext===Wn.contexts[t]&&(Wn.currentContext=null),"object"===typeof Un&&Un.removeAllHandlersOnTarget(Wn.contexts[t].GLctx.canvas),Wn.contexts[t]&&Wn.contexts[t].GLctx.canvas&&(Wn.contexts[t].GLctx.canvas.GLctxObject=void 0),yi(Wn.contexts[t].handle),Wn.contexts[t]=null},initExtensions:function(t){if(t||(t=Wn.currentContext),!t.initExtensionsDone){t.initExtensionsDone=!0;var e,n=t.GLctx;!function(t){var e=t.getExtension("ANGLE_instanced_arrays");if(e)t.vertexAttribDivisor=function(t,n){e.vertexAttribDivisorANGLE(t,n)},t.drawArraysInstanced=function(t,n,i,r){e.drawArraysInstancedANGLE(t,n,i,r)},t.drawElementsInstanced=function(t,n,i,r,s){e.drawElementsInstancedANGLE(t,n,i,r,s)}}(n),function(t){var e=t.getExtension("OES_vertex_array_object");if(e)t.createVertexArray=function(){return e.createVertexArrayOES()},t.deleteVertexArray=function(t){e.deleteVertexArrayOES(t)},t.bindVertexArray=function(t){e.bindVertexArrayOES(t)},t.isVertexArray=function(t){return e.isVertexArrayOES(t)}}(n),function(t){var e=t.getExtension("WEBGL_draw_buffers");if(e)t.drawBuffers=function(t,n){e.drawBuffersWEBGL(t,n)}}(n),n.disjointTimerQueryExt=n.getExtension("EXT_disjoint_timer_query"),(e=n).multiDrawWebgl=e.getExtension("WEBGL_multi_draw"),(n.getSupportedExtensions()||[]).forEach((function(t){t.includes("lose_context")||t.includes("debug")||n.getExtension(t)}))}}},Zn=["default","low-power","high-performance"];var Yn={};function qn(){if(!qn.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"===typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:E||"./this.program"};for(var e in Yn)void 0===Yn[e]?delete t[e]:t[e]=Yn[e];var n=[];for(var e in t)n.push(e+"="+t[e]);qn.strings=n}return qn.strings}function Xn(t,e){if(S)return Fn(6,1,t,e);try{var n=0;return qn().forEach((function(r,s){var o=e+n;a()[t+4*s>>>2]=o,function(t,e,n){for(var r=0;r<t.length;++r)i()[e++>>>0]=t.charCodeAt(r);n||(i()[e>>>0]=0)}(r,o),n+=r.length+1})),0}catch(uJ){return"undefined"!==typeof ie&&uJ instanceof ie.ErrnoError||Ot(uJ),uJ.errno}}function Kn(t,e){if(S)return Fn(7,1,t,e);try{var n=qn();a()[t>>>2]=n.length;var i=0;return n.forEach((function(t){i+=t.length+1})),a()[e>>>2]=i,0}catch(uJ){return"undefined"!==typeof ie&&uJ instanceof ie.ErrnoError||Ot(uJ),uJ.errno}}function Qn(t){if(S)return Fn(8,1,t);try{var e=re.getStreamFromFD(t);return ie.close(e),0}catch(uJ){return"undefined"!==typeof ie&&uJ instanceof ie.ErrnoError||Ot(uJ),uJ.errno}}function Jn(t,e,n,i){if(S)return Fn(9,1,t,e,n,i);try{var r=re.getStreamFromFD(t),s=re.doReadv(r,e,n);return a()[i>>>2]=s,0}catch(uJ){return"undefined"!==typeof ie&&uJ instanceof ie.ErrnoError||Ot(uJ),uJ.errno}}function $n(t,e,n,i,r){if(S)return Fn(10,1,t,e,n,i,r);try{var s=re.getStreamFromFD(t),o=4294967296*n+(e>>>0),l=9007199254740992;return o<=-l||o>=l?-61:(ie.llseek(s,o,i),Pt=[s.position>>>0,(Mt=s.position,+Math.abs(Mt)>=1?Mt>0?(0|Math.min(+Math.floor(Mt/4294967296),4294967295))>>>0:~~+Math.ceil((Mt-+(~~Mt>>>0))/4294967296)>>>0:0)],a()[r>>>2]=Pt[0],a()[r+4>>>2]=Pt[1],s.getdents&&0===o&&0===i&&(s.getdents=null),0)}catch(uJ){return"undefined"!==typeof ie&&uJ instanceof ie.ErrnoError||Ot(uJ),uJ.errno}}function ti(t,e,n,i){if(S)return Fn(11,1,t,e,n,i);try{var r=re.getStreamFromFD(t),s=re.doWritev(r,e,n);return a()[i>>>2]=s,0}catch(uJ){return"undefined"!==typeof ie&&uJ instanceof ie.ErrnoError||Ot(uJ),uJ.errno}}function ei(t){if(S)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var e=jt.getNewWorker();if(!e)return 6;if(void 0!==e.pthread)throw"Internal error!";if(!t.pthread_ptr)throw"Internal error, no pthread ptr!";jt.runningWorkers.push(e);for(var n=gi(512),i=0;i<128;++i)a()[n+4*i>>>2]=0;var r=t.stackBase+t.stackSize,s=jt.pthreads[t.pthread_ptr]={worker:e,stackBase:t.stackBase,stackSize:t.stackSize,allocatedOwnStack:t.allocatedOwnStack,threadInfoStruct:t.pthread_ptr},o=s.threadInfoStruct>>2;Atomics.store(l(),o+16,t.detached),Atomics.store(l(),o+25,n),Atomics.store(l(),o+10,s.threadInfoStruct),Atomics.store(l(),o+20,t.stackSize),Atomics.store(l(),o+19,r),Atomics.store(l(),o+26,t.stackSize),Atomics.store(l(),o+28,r),Atomics.store(l(),o+29,t.detached);var h=Si()+40;Atomics.store(l(),o+43,h),e.pthread=s;var c={cmd:"run",start_routine:t.startRoutine,arg:t.arg,threadInfoStruct:t.pthread_ptr,stackBase:t.stackBase,stackSize:t.stackSize};return e.runPthread=function(){c.time=performance.now(),e.postMessage(c,t.transferList)},e.loaded&&(e.runPthread(),delete e.runPthread),0}function ni(t){return t%4===0&&(t%100!==0||t%400===0)}function ii(t,e){for(var n=0,i=0;i<=e;n+=t[i++]);return n}var ri=[31,29,31,30,31,30,31,31,30,31,30,31],si=[31,28,31,30,31,30,31,31,30,31,30,31];function oi(t,e){for(var n=new Date(t.getTime());e>0;){var i=ni(n.getFullYear()),r=n.getMonth(),s=(i?ri:si)[r];if(!(e>s-n.getDate()))return n.setDate(n.getDate()+e),n;e-=s-n.getDate()+1,n.setDate(1),r<11?n.setMonth(r+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}function ai(t,e,n,r){var s=a()[r+40>>>2],o={tm_sec:a()[r>>>2],tm_min:a()[r+4>>>2],tm_hour:a()[r+8>>>2],tm_mday:a()[r+12>>>2],tm_mon:a()[r+16>>>2],tm_year:a()[r+20>>>2],tm_wday:a()[r+24>>>2],tm_yday:a()[r+28>>>2],tm_isdst:a()[r+32>>>2],tm_gmtoff:a()[r+36>>>2],tm_zone:s?Z(s):""},l=Z(n),h={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in h)l=l.replace(new RegExp(c,"g"),h[c]);var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(t,e,n){for(var i="number"===typeof t?t.toString():t||"";i.length<e;)i=n[0]+i;return i}function f(t,e){return d(t,e,"0")}function m(t,e){function n(t){return t<0?-1:t>0?1:0}var i;return 0===(i=n(t.getFullYear()-e.getFullYear()))&&0===(i=n(t.getMonth()-e.getMonth()))&&(i=n(t.getDate()-e.getDate())),i}function g(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function y(t){var e=oi(new Date(t.tm_year+1900,0,1),t.tm_yday),n=new Date(e.getFullYear(),0,4),i=new Date(e.getFullYear()+1,0,4),r=g(n),s=g(i);return m(r,e)<=0?m(s,e)<=0?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var v={"%a":function(t){return u[t.tm_wday].substring(0,3)},"%A":function(t){return u[t.tm_wday]},"%b":function(t){return p[t.tm_mon].substring(0,3)},"%B":function(t){return p[t.tm_mon]},"%C":function(t){return f((t.tm_year+1900)/100|0,2)},"%d":function(t){return f(t.tm_mday,2)},"%e":function(t){return d(t.tm_mday,2," ")},"%g":function(t){return y(t).toString().substring(2)},"%G":function(t){return y(t)},"%H":function(t){return f(t.tm_hour,2)},"%I":function(t){var e=t.tm_hour;return 0==e?e=12:e>12&&(e-=12),f(e,2)},"%j":function(t){return f(t.tm_mday+ii(ni(t.tm_year+1900)?ri:si,t.tm_mon-1),3)},"%m":function(t){return f(t.tm_mon+1,2)},"%M":function(t){return f(t.tm_min,2)},"%n":function(){return"\n"},"%p":function(t){return t.tm_hour>=0&&t.tm_hour<12?"AM":"PM"},"%S":function(t){return f(t.tm_sec,2)},"%t":function(){return"\t"},"%u":function(t){return t.tm_wday||7},"%U":function(t){var e=new Date(t.tm_year+1900,0,1),n=0===e.getDay()?e:oi(e,7-e.getDay()),i=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(m(n,i)<0){var r=ii(ni(i.getFullYear())?ri:si,i.getMonth()-1)-31,s=31-n.getDate()+r+i.getDate();return f(Math.ceil(s/7),2)}return 0===m(n,e)?"01":"00"},"%V":function(t){var e,n=new Date(t.tm_year+1900,0,4),i=new Date(t.tm_year+1901,0,4),r=g(n),s=g(i),o=oi(new Date(t.tm_year+1900,0,1),t.tm_yday);return m(o,r)<0?"53":m(s,o)<=0?"01":(e=r.getFullYear()<t.tm_year+1900?t.tm_yday+32-r.getDate():t.tm_yday+1-r.getDate(),f(Math.ceil(e/7),2))},"%w":function(t){return t.tm_wday},"%W":function(t){var e=new Date(t.tm_year,0,1),n=1===e.getDay()?e:oi(e,0===e.getDay()?1:7-e.getDay()+1),i=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(m(n,i)<0){var r=ii(ni(i.getFullYear())?ri:si,i.getMonth()-1)-31,s=31-n.getDate()+r+i.getDate();return f(Math.ceil(s/7),2)}return 0===m(n,e)?"01":"00"},"%y":function(t){return(t.tm_year+1900).toString().substring(2)},"%Y":function(t){return t.tm_year+1900},"%z":function(t){var e=t.tm_gmtoff,n=e>=0;return e=(e=Math.abs(e)/60)/60*100+e%60,(n?"+":"-")+String("0000"+e).slice(-4)},"%Z":function(t){return t.tm_zone},"%%":function(){return"%"}};for(var c in v)l.includes(c)&&(l=l.replace(new RegExp(c,"g"),v[c](o)));var _,T,E=di(l,!1);return E.length>e?0:(_=E,T=t,i().set(_,T>>>0),E.length-1)}S||jt.initMainThreadBlock();var li,hi=function(t,e,n,i){t||(t=this),this.parent=t,this.mount=t.mount,this.mounted=null,this.id=ie.nextInode++,this.name=e,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=i},ci=365,ui=146;Object.defineProperties(hi.prototype,{read:{get:function(){return(this.mode&ci)===ci},set:function(t){t?this.mode|=ci:this.mode&=-366}},write:{get:function(){return(this.mode&ui)===ui},set:function(t){t?this.mode|=ui:this.mode&=-147}},isFolder:{get:function(){return ie.isDir(this.mode)}},isDevice:{get:function(){return ie.isChrdev(this.mode)}}}),ie.FSNode=hi,ie.staticInit(),p.FS_createPath=ie.createPath,p.FS_createDataFile=ie.createDataFile,p.FS_createPreloadedFile=ie.createPreloadedFile,p.FS_createLazyFile=ie.createLazyFile,p.FS_createDevice=ie.createDevice,p.FS_unlink=ie.unlink,_e=p.InternalError=ve(Error,"InternalError"),function(){for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);Ie=t}(),Se=p.BindingError=ve(Error,"BindingError"),je.prototype.isAliasOf=Ae,je.prototype.clone=Le,je.prototype.delete=ke,je.prototype.isDeleted=Ue,je.prototype.deleteLater=He,cn.prototype.getPointee=Je,cn.prototype.destructor=$e,cn.prototype.argPackAdvance=8,cn.prototype.readValueFromPointer=ce,cn.prototype.deleteObject=tn,cn.prototype.fromWireType=hn,p.getInheritedInstanceCount=nn,p.getLiveInheritedInstances=rn,p.flushPendingDeletes=Ge,p.setDelayFunction=sn,fn=p.UnboundTypeError=ve(Error,"UnboundTypeError"),p.count_emval_handles=xn,p.get_first_emval=bn;var pi=[null,function(t,e){if(S)return Fn(1,1,t,e)},se,oe,ae,Vn,Xn,Kn,Qn,Jn,$n,ti];function di(t,e,n){var i=n>0?n:X(t)+1,r=new Array(i),s=Y(t,r,0,r.length);return e&&(r.length=s),r}var fi,mi={z:function(t,e,n,i){Ot("Assertion failed: "+Z(t)+", at: "+[e?Z(e):"unknown filename",n,i?Z(i):"unknown function"])},n:function(t){return gi(t+16)+16},v:function(t){var e=new Yt(t),n=e.get_exception_info();return n.get_caught()||(n.set_caught(!0),Xt--),n.set_rethrown(!1),qt.push(e),function(t){t.add_ref()}(n),e.get_exception_ptr()},y:function(){Pi(0);var t=qt.pop();!function(t){if(t.release_ref()&&!t.get_rethrown()){var e=t.get_destructor();e&&ft.get(e)(t.excPtr),Qt(t.excPtr)}}(t.get_exception_info()),t.free(),Kt=0},c:function(){var t=Kt;if(!t)return L(0),0;var e=new Zt(t).get_type(),n=new Yt;if(n.set_base_ptr(t),n.set_adjusted_ptr(t),!e)return L(0),0|n.ptr;for(var i=Array.prototype.slice.call(arguments),r=0;r<i.length;r++){var s=i[r];if(0===s||s===e)break;if(Fi(s,e,n.get_adjusted_ptr_addr()))return L(s),0|n.ptr}return L(e),0|n.ptr},m:function(){var t=Kt;if(!t)return L(0),0;var e=new Zt(t).get_type(),n=new Yt;if(n.set_base_ptr(t),n.set_adjusted_ptr(t),!e)return L(0),0|n.ptr;for(var i=Array.prototype.slice.call(arguments),r=0;r<i.length;r++){var s=i[r];if(0===s||s===e)break;if(Fi(s,e,n.get_adjusted_ptr_addr()))return L(s),0|n.ptr}return L(e),0|n.ptr},C:Qt,ba:function(){var t=qt.pop();t||Ot("no exception to throw");var e=t.get_exception_info(),n=t.get_base_ptr();throw e.get_rethrown()?t.free():(qt.push(t),e.set_rethrown(!0),e.set_caught(!1),Xt++),Kt=n,n},La:function(t,e){jt.threadExitHandlers.push((function(){ft.get(t)(e)}))},o:function(t,e,n){throw new Zt(t).init(e,n),Kt=t,Xt++,t},ta:function(){return Xt},i:function(t){var e=new Yt(t),n=e.get_base_ptr();throw Kt||(Kt=n),e.free(),n},da:se,ua:oe,va:ae,Oa:function(t){var e=le[t];delete le[t];var n=e.elements,i=n.length,r=n.map((function(t){return t.getterReturnType})).concat(n.map((function(t){return t.setterArgumentType}))),s=e.rawConstructor,o=e.rawDestructor;Ee([t],r,(function(t){return n.forEach((function(e,n){var r=t[n],s=e.getter,o=e.getterContext,a=t[n+i],l=e.setter,h=e.setterContext;e.read=function(t){return r.fromWireType(s(o,t))},e.write=function(t,e){var n=[];l(h,t,a.toWireType(n,e)),he(n)}})),[{name:e.name,fromWireType:function(t){for(var e=new Array(i),r=0;r<i;++r)e[r]=n[r].read(t);return o(t),e},toWireType:function(t,r){if(i!==r.length)throw new TypeError("Incorrect number of tuple elements for "+e.name+": expected="+i+", actual="+r.length);for(var a=s(),l=0;l<i;++l)n[l].write(a,r[l]);return null!==t&&t.push(o,a),a},argPackAdvance:8,readValueFromPointer:ce,destructorFunction:o}]}))},Ra:function(t){var e=xe[t];delete xe[t];var n=e.rawConstructor,i=e.rawDestructor,r=e.fields;Ee([t],r.map((function(t){return t.getterReturnType})).concat(r.map((function(t){return t.setterArgumentType}))),(function(t){var s={};return r.forEach((function(e,n){var i=e.fieldName,o=t[n],a=e.getter,l=e.getterContext,h=t[n+r.length],c=e.setter,u=e.setterContext;s[i]={read:function(t){return o.fromWireType(a(l,t))},write:function(t,e){var n=[];c(u,t,h.toWireType(n,e)),he(n)}}})),[{name:e.name,fromWireType:function(t){var e={};for(var n in s)e[n]=s[n].read(t);return i(t),e},toWireType:function(t,e){for(var r in s)if(!(r in e))throw new TypeError('Missing field:  "'+r+'"');var o=n();for(r in s)s[r].write(o,e[r]);return null!==t&&t.push(i,o),o},argPackAdvance:8,readValueFromPointer:ce,destructorFunction:i}]}))},_a:function(t,e,n,i,r){},Ja:function(t,e,n,r,o){var l=be(n);Ce(t,{name:e=we(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?r:o},argPackAdvance:8,readValueFromPointer:function(t){var r;if(1===n)r=i();else if(2===n)r=s();else{if(4!==n)throw new TypeError("Unknown boolean type size: "+e);r=a()}return this.fromWireType(r[t>>>l])},destructorFunction:null})},O:function(t,e,n,i,r,s,o,a,l,h,c,u,p){c=we(c),s=dn(r,s),a&&(a=dn(o,a)),h&&(h=dn(l,h)),p=dn(u,p);var d=ge(c);Ze(d,(function(){gn("Cannot construct "+c+" due to unbound types",[i])})),Ee([t,e,n],i?[i]:[],(function(e){var n,r;e=e[0],r=i?(n=e.registeredClass).instancePrototype:je.prototype;var o=ye(d,(function(){if(Object.getPrototypeOf(this)!==l)throw new Se("Use 'new' to construct "+c);if(void 0===u.constructor_body)throw new Se(c+" has no accessible constructor");var t=u.constructor_body[arguments.length];if(void 0===t)throw new Se("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(u.constructor_body).toString()+") parameters instead!");return t.apply(this,arguments)})),l=Object.create(r,{constructor:{value:o}});o.prototype=l;var u=new Ye(c,o,l,p,n,s,a,h),f=new cn(c,u,!0,!1,!1),m=new cn(c+"*",u,!1,!1,!1),g=new cn(c+" const*",u,!1,!0,!1);return Ve[t]={pointerType:m,constPointerType:g},un(d,o),[f,m,g]}))},N:function(t,e,n,i,r,s){H(e>0);var o=yn(e,n);r=dn(i,r);var a=[s],l=[];Ee([],[t],(function(t){var n="constructor "+(t=t[0]).name;if(void 0===t.registeredClass.constructor_body&&(t.registeredClass.constructor_body=[]),void 0!==t.registeredClass.constructor_body[e-1])throw new Se("Cannot register multiple constructors with identical number of parameters ("+(e-1)+") for class '"+t.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return t.registeredClass.constructor_body[e-1]=function(){gn("Cannot construct "+t.name+" due to unbound types",o)},Ee([],o,(function(i){return t.registeredClass.constructor_body[e-1]=function(){arguments.length!==e-1&&Re(n+" called with "+arguments.length+" arguments, expected "+(e-1)),l.length=0,a.length=e;for(var t=1;t<e;++t)a[t]=i[t].toWireType(l,arguments[t-1]);var s=r.apply(null,a);return he(l),i[0].fromWireType(s)},[]})),[]}))},q:function(t,e,n,i,r,s,o,a){var l=yn(n,i);e=we(e),s=dn(r,s),Ee([],[t],(function(t){var i=(t=t[0]).name+"."+e;function r(){gn("Cannot call "+i+" due to unbound types",l)}e.startsWith("@@")&&(e=Symbol[e.substring(2)]),a&&t.registeredClass.pureVirtualFunctions.push(e);var h=t.registeredClass.instancePrototype,c=h[e];return void 0===c||void 0===c.overloadTable&&c.className!==t.name&&c.argCount===n-2?(r.argCount=n-2,r.className=t.name,h[e]=r):(We(h,e,i),h[e].overloadTable[n-2]=r),Ee([],l,(function(r){var a=vn(i,r,t,s,o);return void 0===h[e].overloadTable?(a.argCount=n-2,h[e]=a):h[e].overloadTable[n-2]=a,[]})),[]}))},Ia:function(t,e){Ce(t,{name:e=we(e),fromWireType:function(t){var e=Tn[t].value;return En(t),e},toWireType:function(t,e){return In(e)},argPackAdvance:8,readValueFromPointer:ce,destructorFunction:null})},Ma:function(t,e,n,i){var r=be(n);function s(){}e=we(e),s.values={},Ce(t,{name:e,constructor:s,fromWireType:function(t){return this.constructor.values[t]},toWireType:function(t,e){return e.value},argPackAdvance:8,readValueFromPointer:wn(e,r,i),destructorFunction:null}),Ze(e,s)},T:function(t,e,n){var i=Sn(t,"enum");e=we(e);var r=i.constructor,s=Object.create(i.constructor.prototype,{value:{value:n},constructor:{value:ye(i.name+"_"+e,(function(){}))}});r.values[n]=s,r[e]=s},ja:function(t,e,n){var i=be(n);Ce(t,{name:e=we(e),fromWireType:function(t){return t},toWireType:function(t,e){if("number"!==typeof e&&"boolean"!==typeof e)throw new TypeError('Cannot convert "'+Rn(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:Cn(e,i),destructorFunction:null})},t:function(t,e,n,i,r,s){var o=yn(e,n);t=we(t),r=dn(i,r),Ze(t,(function(){gn("Cannot call "+t+" due to unbound types",o)}),e-1),Ee([],o,(function(n){var i=[n[0],null].concat(n.slice(1));return un(t,vn(t,i,null,r,s),e-1),[]}))},B:function(t,e,n,i,r){e=we(e),-1===r&&(r=4294967295);var s=be(n),o=function(t){return t};if(0===i){var a=32-8*n;o=function(t){return t<<a>>>a}}var l=e.includes("unsigned");Ce(t,{name:e,fromWireType:o,toWireType:function(t,n){if("number"!==typeof n&&"boolean"!==typeof n)throw new TypeError('Cannot convert "'+Rn(n)+'" to '+this.name);if(n<i||n>r)throw new TypeError('Passing a number "'+Rn(n)+'" from JS side to C/C++ side to an argument of type "'+e+'", which is outside the valid range ['+i+", "+r+"]!");return l?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:An(e,s,0!==i),destructorFunction:null})},x:function(t,e,n){var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function r(t){t>>=2;var e=l(),n=e[t>>>0],r=e[t+1>>>0];return new i(K,r,n)}Ce(t,{name:n=we(n),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{ignoreDuplicateRegistrations:!0})},ka:function(t,e){var n="std::string"===(e=we(e));Ce(t,{name:e,fromWireType:function(t){var e,i=l()[t>>>2];if(n)for(var s=t+4,o=0;o<=i;++o){var a=t+4+o;if(o==i||0==r()[a>>>0]){var h=Z(s,a-s);void 0===e?e=h:(e+=String.fromCharCode(0),e+=h),s=a+1}}else{var c=new Array(i);for(o=0;o<i;++o)c[o]=String.fromCharCode(r()[t+4+o>>>0]);e=c.join("")}return yi(t),e},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var i="string"===typeof e;i||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||Re("Cannot pass non-string to std::string");var s=(n&&i?function(){return X(e)}:function(){return e.length})(),o=gi(4+s+1);if(o>>>=0,l()[o>>>2]=s,n&&i)q(e,o+4,s+1);else if(i)for(var a=0;a<s;++a){var h=e.charCodeAt(a);h>255&&(yi(o),Re("String has UTF-16 code units that do not fit in 8 bits")),r()[o+4+a>>>0]=h}else for(a=0;a<s;++a)r()[o+4+a>>>0]=e[a];return null!==t&&t.push(yi,o),o},argPackAdvance:8,readValueFromPointer:ce,destructorFunction:function(t){yi(t)}})},Y:function(t,e,n){var i,r,s,a,h;n=we(n),2===e?(i=ot,r=at,a=lt,s=function(){return o()},h=1):4===e&&(i=ht,r=ct,a=ut,s=function(){return l()},h=2),Ce(t,{name:n,fromWireType:function(t){for(var n,r=l()[t>>>2],o=s(),a=t+4,c=0;c<=r;++c){var u=t+4+c*e;if(c==r||0==o[u>>>h]){var p=i(a,u-a);void 0===n?n=p:(n+=String.fromCharCode(0),n+=p),a=u+e}}return yi(t),n},toWireType:function(t,i){"string"!==typeof i&&Re("Cannot pass non-string to C++ string type "+n);var s=a(i),o=gi(4+s+e);return o>>>=0,l()[o>>>2]=s>>h,r(i,o+4,s+e),null!==t&&t.push(yi,o),o},argPackAdvance:8,readValueFromPointer:ce,destructorFunction:function(t){yi(t)}})},Pa:function(t,e,n,i,r,s){le[t]={name:we(e),rawConstructor:dn(n,i),rawDestructor:dn(r,s),elements:[]}},Na:function(t,e,n,i,r,s,o,a,l){le[t].elements.push({getterReturnType:e,getter:dn(n,i),getterContext:r,setterArgumentType:s,setter:dn(o,a),setterContext:l})},M:function(t,e,n,i,r,s){xe[t]={name:we(e),rawConstructor:dn(n,i),rawDestructor:dn(r,s),fields:[]}},Qa:function(t,e,n,i,r,s,o,a,l,h){xe[t].fields.push({fieldName:we(e),getterReturnType:n,getter:dn(i,r),getterContext:s,setterArgumentType:o,setter:dn(a,l),setterContext:h})},Ka:function(t,e){Ce(t,{isVoid:!0,name:e=we(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(t,e){}})},Ca:function(t,e){if(t==e)postMessage({cmd:"processQueuedMainThreadWork"});else if(S)postMessage({targetThread:t,cmd:"processThreadQueue"});else{var n=jt.pthreads[t],i=n&&n.worker;if(!i)return;i.postMessage({cmd:"processThreadQueue"})}return 1},U:function(t,e,n){t=Dn(t),e=Sn(e,"emval::as");var i=[],r=In(i);return a()[n>>>2]=r,e.toWireType(i,t)},la:function(t,e,n,i){t=Dn(t);for(var r=function(t,e){for(var n=new Array(t),i=0;i<t;++i)n[i]=Sn(a()[(e>>2)+i>>>0],"parameter "+i);return n}(e,n),s=new Array(e),o=0;o<e;++o){var l=r[o];s[o]=l.readValueFromPointer(i),i+=l.argPackAdvance}return In(t.apply(void 0,s))},xa:En,$a:function(t){return 0===t?In(Mn()):(t=Nn(t),In(Mn()[t]))},Ua:function(t,e){return In((t=Dn(t))[e=Dn(e)])},aa:function(t){t>4&&(Tn[t].refcount+=1)},pa:function(t,e){return(t=Dn(t))instanceof(e=Dn(e))},Xa:function(t){return"number"===typeof(t=Dn(t))},Wa:function(){return In([])},Z:function(t){return In(Nn(t))},Va:function(){return In({})},Ta:function(t){he(Tn[t].value),En(t)},Sa:function(t,e,n){t=Dn(t),e=Dn(e),n=Dn(n),t[e]=n},D:function(t,e){return In((t=Sn(t,"_emval_take_value")).readValueFromPointer(e))},ia:function(){Ot()},ca:function(t,e){var n;if(0===t)n=Date.now();else{if(1!==t&&4!==t||!Vt)return Wt(28),-1;n=Ht()}return a()[e>>>2]=n/1e3|0,a()[e+4>>>2]=n%1e3*1e3*1e3|0,0},ga:function(t,e,n){var i=function(t,e){var n;for(Pn.length=0,e>>=2;n=r()[t++>>>0];){var i=n<105;i&&1&e&&e++,Pn.push(i?h()[e++>>>1]:a()[e>>>0]),++e}return Pn}(e,n);return Bt[t].apply(null,i)},wa:function(){w||I||M("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},fa:function(t,e){},K:function(t,e,n){if(t<=0||t>i().length||!0&t)return-28;if(b){if(Atomics.load(a(),t>>2)!=e)return-6;var r=performance.now(),s=r+n;for(Atomics.exchange(a(),zi>>2,t);;){if((r=performance.now())>s)return Atomics.exchange(a(),zi>>2,0),-73;if(0==Atomics.exchange(a(),zi>>2,0))break;if(xi(),Atomics.load(a(),t>>2)!=e)return-6;Atomics.exchange(a(),zi>>2,t)}return 0}var o=Atomics.wait(a(),t>>2,e,n);if("timed-out"===o)return-73;if("not-equal"===o)return-6;if("ok"===o)return 0;throw"Atomics.wait returned an unexpected value "+o},J:Gt,S:Ht,ra:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},ya:function(t,e,n){Ln.length=e;for(var i=n>>3,r=0;r<e;r++)Ln[r]=h()[i+r>>>0];return(t<0?Bt[-t-1]:pi[t]).apply(null,Ln)},sa:function(t){var e=r().length;if((t>>>=0)<=e)return!1;var n=4294901760;if(t>n)return!1;for(var i=1;i<=4;i*=2){var s=e*(1+.2/i);if(s=Math.min(s,t+100663296),kn(Math.min(n,pt(Math.max(t,s),65536))))return!0}return!1},za:function(t,e,n){return Hn(t)?jn(t,e,n):Vn(t,e,n)},ea:function(t){},Aa:function(t,e){return function(t,e){var n=e>>2,i=a()[n+6>>>0],r={alpha:!!a()[n+0>>>0],depth:!!a()[n+1>>>0],stencil:!!a()[n+2>>>0],antialias:!!a()[n+3>>>0],premultipliedAlpha:!!a()[n+4>>>0],preserveDrawingBuffer:!!a()[n+5>>>0],powerPreference:Zn[i],failIfMajorPerformanceCaveat:!!a()[n+7>>>0],majorVersion:a()[n+8>>>0],minorVersion:a()[n+9>>>0],enableExtensionsByDefault:a()[n+10>>>0],explicitSwapControl:a()[n+11>>>0],proxyContextToMainThread:a()[n+12>>>0],renderViaOffscreenBackBuffer:a()[n+13>>>0]},s=Hn(t);return s?r.explicitSwapControl?0:Wn.createContext(s,r):0}(t,e)},Ea:Xn,Fa:Kn,ha:Qn,Ha:Jn,Za:$n,Ga:ti,b:function(){return k()},qa:function(){jt.initRuntime()},I:function(t,e,n,i){var r=Di();try{return ft.get(t)(e,n,i)}catch(uJ){if(Oi(r),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},E:function(t){var e=Di();try{return ft.get(t)()}catch(uJ){if(Oi(e),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},d:function(t,e){var n=Di();try{return ft.get(t)(e)}catch(uJ){if(Oi(n),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},Q:function(t,e,n){var i=Di();try{return ft.get(t)(e,n)}catch(uJ){if(Oi(i),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},j:function(t,e,n){var i=Di();try{return ft.get(t)(e,n)}catch(uJ){if(Oi(i),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},k:function(t,e,n,i){var r=Di();try{return ft.get(t)(e,n,i)}catch(uJ){if(Oi(r),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},R:function(t,e,n,i,r){var s=Di();try{return ft.get(t)(e,n,i,r)}catch(uJ){if(Oi(s),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},na:function(t,e,n,i,r,s){var o=Di();try{return ft.get(t)(e,n,i,r,s)}catch(uJ){if(Oi(o),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},G:function(t,e,n,i,r,s){var o=Di();try{return ft.get(t)(e,n,i,r,s)}catch(uJ){if(Oi(o),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},A:function(t,e,n,i,r,s,o){var a=Di();try{return ft.get(t)(e,n,i,r,s,o)}catch(uJ){if(Oi(a),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},_:function(t,e,n,i,r,s,o,a){var l=Di();try{return ft.get(t)(e,n,i,r,s,o,a)}catch(uJ){if(Oi(l),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},P:function(t,e,n,i,r,s,o,a,l){var h=Di();try{return ft.get(t)(e,n,i,r,s,o,a,l)}catch(uJ){if(Oi(h),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},W:function(t,e,n,i,r,s,o,a,l,h,c,u){var p=Di();try{return ft.get(t)(e,n,i,r,s,o,a,l,h,c,u)}catch(uJ){if(Oi(p),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},Ya:function(t){var e=Di();try{return Ui(t)}catch(uJ){if(Oi(e),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},g:function(t){var e=Di();try{ft.get(t)()}catch(uJ){if(Oi(e),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},f:function(t,e){var n=Di();try{ft.get(t)(e)}catch(uJ){if(Oi(n),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},L:function(t,e,n,i,r){var s=Di();try{ft.get(t)(e,n,i,r)}catch(uJ){if(Oi(s),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},H:function(t,e,n,i,r,s,o){var a=Di();try{ft.get(t)(e,n,i,r,s,o)}catch(uJ){if(Oi(a),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},h:function(t,e,n){var i=Di();try{ft.get(t)(e,n)}catch(uJ){if(Oi(i),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},s:function(t,e,n,i,r){var s=Di();try{ft.get(t)(e,n,i,r)}catch(uJ){if(Oi(s),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},e:function(t,e,n,i){var r=Di();try{ft.get(t)(e,n,i)}catch(uJ){if(Oi(r),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},l:function(t,e,n,i,r){var s=Di();try{ft.get(t)(e,n,i,r)}catch(uJ){if(Oi(s),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},$:function(t,e,n,i,r,s){var o=Di();try{ft.get(t)(e,n,i,r,s)}catch(uJ){if(Oi(o),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},X:function(t,e,n,i,r,s,o,a){var l=Di();try{ft.get(t)(e,n,i,r,s,o,a)}catch(uJ){if(Oi(l),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},F:function(t,e,n,i,r,s){var o=Di();try{ft.get(t)(e,n,i,r,s)}catch(uJ){if(Oi(o),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},w:function(t,e,n,i,r,s,o){var a=Di();try{ft.get(t)(e,n,i,r,s,o)}catch(uJ){if(Oi(a),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},r:function(t,e,n,i,r,s,o,a){var l=Di();try{ft.get(t)(e,n,i,r,s,o,a)}catch(uJ){if(Oi(l),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},u:function(t,e,n,i,r,s,o,a,l,h){var c=Di();try{ft.get(t)(e,n,i,r,s,o,a,l,h)}catch(uJ){if(Oi(c),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},p:function(t,e,n,i,r,s,o,a,l,h,c){var u=Di();try{ft.get(t)(e,n,i,r,s,o,a,l,h,c)}catch(uJ){if(Oi(u),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},V:function(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){var g=Di();try{ft.get(t)(e,n,i,r,s,o,a,l,h,c,u,p,d,f,m)}catch(uJ){if(Oi(g),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;Pi(1,0)}},oa:function(t){return t},a:U||p.wasmMemory,Ba:function(t,e,n,i){if("undefined"===typeof SharedArrayBuffer)return O("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!t)return O("pthread_create called with a null thread pointer!"),28;var r=[];if(S&&0===r.length)return Ei(687865856,t,e,n,i);var s=0,o=0,h=0;e&&-1!=e?(s=a()[e>>>2],s+=81920,o=a()[e+8>>>2],h=0!==a()[e+12>>>2]):s=2097152;var c=0==o;c?o=ki(16,s):H((o-=s)>0);for(var u=gi(228),p=0;p<57;++p)l()[(u>>2)+p>>>0]=0;a()[t>>>2]=u,a()[u+12>>>2]=u;var d=u+152;a()[d>>>2]=d;var f={stackBase:o,stackSize:s,allocatedOwnStack:c,detached:h,startRoutine:n,pthread_ptr:u,arg:i,transferList:r};return S?(f.cmd="spawnThread",postMessage(f,r),0):ei(f)},ma:function(t){L(t)},Da:function(t,e,n,i){return ai(t,e,n,i)}},gi=(function(){var t={a:mi};function e(t,e){var n=t.exports;if(p.asm=n,ft=p.asm.db,function(t){yt.unshift(t)}(p.asm.ab),jt.tlsInitFunctions.push(p.asm.fb),B=e,!S){var i=jt.unusedWorkers.length;jt.unusedWorkers.forEach((function(t){jt.loadWasmModuleToWorker(t,(function(){--i||Dt()}))}))}}function n(t){e(t.instance,t.module)}function i(e){return function(){if(!P&&(b||I)){if("function"===typeof fetch&&!kt(Nt))return fetch(Nt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+Nt+"'";return t.arrayBuffer()})).catch((function(){return Ut(Nt)}));if(g)return new Promise((function(t,e){g(Nt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return Ut(Nt)}))}().then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(t){O("failed to asynchronously prepare wasm: "+t),Ot(t)}))}if(S||At(),p.instantiateWasm)try{return p.instantiateWasm(t,e)}catch(uJ){return O("Module.instantiateWasm callback failed with error: "+uJ),!1}(P||"function"!==typeof WebAssembly.instantiateStreaming||Lt(Nt)||kt(Nt)||"function"!==typeof fetch?i(n):fetch(Nt,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(n,(function(t){return O("wasm streaming compile failed: "+t),O("falling back to ArrayBuffer instantiation"),i(n)}))}))).catch(u)}(),p.___wasm_call_ctors=function(){return(p.___wasm_call_ctors=p.asm.ab).apply(null,arguments)},p._main=function(){return(p._main=p.asm.bb).apply(null,arguments)},p._malloc=function(){return(gi=p._malloc=p.asm.cb).apply(null,arguments)}),yi=p._free=function(){return(yi=p._free=p.asm.eb).apply(null,arguments)},vi=(p._emscripten_tls_init=function(){return(p._emscripten_tls_init=p.asm.fb).apply(null,arguments)},p.___getTypeName=function(){return(vi=p.___getTypeName=p.asm.gb).apply(null,arguments)}),_i=(p.___embind_register_native_and_builtin_types=function(){return(p.___embind_register_native_and_builtin_types=p.asm.hb).apply(null,arguments)},p._emscripten_current_thread_process_queued_calls=function(){return(p._emscripten_current_thread_process_queued_calls=p.asm.ib).apply(null,arguments)},p._emscripten_register_main_browser_thread_id=function(){return(_i=p._emscripten_register_main_browser_thread_id=p.asm.jb).apply(null,arguments)}),Ti=p.__emscripten_do_dispatch_to_thread=function(){return(Ti=p.__emscripten_do_dispatch_to_thread=p.asm.kb).apply(null,arguments)},Ei=p._emscripten_sync_run_in_main_thread_4=function(){return(Ei=p._emscripten_sync_run_in_main_thread_4=p.asm.lb).apply(null,arguments)},xi=p._emscripten_main_thread_process_queued_calls=function(){return(xi=p._emscripten_main_thread_process_queued_calls=p.asm.mb).apply(null,arguments)},bi=p._emscripten_run_in_main_runtime_thread_js=function(){return(bi=p._emscripten_run_in_main_runtime_thread_js=p.asm.nb).apply(null,arguments)},Ii=p.__emscripten_call_on_thread=function(){return(Ii=p.__emscripten_call_on_thread=p.asm.ob).apply(null,arguments)},wi=p.__emscripten_thread_init=function(){return(wi=p.__emscripten_thread_init=p.asm.pb).apply(null,arguments)},Si=p._emscripten_get_global_libc=function(){return(Si=p._emscripten_get_global_libc=p.asm.qb).apply(null,arguments)},Ri=p.___errno_location=function(){return(Ri=p.___errno_location=p.asm.rb).apply(null,arguments)},Ci=p._pthread_self=function(){return(Ci=p._pthread_self=p.asm.sb).apply(null,arguments)},Ai=p.___pthread_tsd_run_dtors=function(){return(Ai=p.___pthread_tsd_run_dtors=p.asm.tb).apply(null,arguments)},Di=p.stackSave=function(){return(Di=p.stackSave=p.asm.ub).apply(null,arguments)},Oi=p.stackRestore=function(){return(Oi=p.stackRestore=p.asm.vb).apply(null,arguments)},Ni=p.stackAlloc=function(){return(Ni=p.stackAlloc=p.asm.wb).apply(null,arguments)},Mi=p._emscripten_stack_set_limits=function(){return(Mi=p._emscripten_stack_set_limits=p.asm.xb).apply(null,arguments)},Pi=p._setThrew=function(){return(Pi=p._setThrew=p.asm.yb).apply(null,arguments)},Fi=p.___cxa_can_catch=function(){return(Fi=p.___cxa_can_catch=p.asm.zb).apply(null,arguments)},Li=p.___cxa_is_pointer_type=function(){return(Li=p.___cxa_is_pointer_type=p.asm.Ab).apply(null,arguments)},ki=p._memalign=function(){return(ki=p._memalign=p.asm.Bb).apply(null,arguments)},Ui=(p.dynCall_jiji=function(){return(p.dynCall_jiji=p.asm.Cb).apply(null,arguments)},p.dynCall_j=function(){return(Ui=p.dynCall_j=p.asm.Db).apply(null,arguments)}),Bi=(p.dynCall_viijii=function(){return(p.dynCall_viijii=p.asm.Eb).apply(null,arguments)},p.dynCall_iiiiij=function(){return(p.dynCall_iiiiij=p.asm.Fb).apply(null,arguments)},p.dynCall_iiiiijj=function(){return(p.dynCall_iiiiijj=p.asm.Gb).apply(null,arguments)},p.dynCall_iiiiiijj=function(){return(p.dynCall_iiiiiijj=p.asm.Hb).apply(null,arguments)},p.__emscripten_allow_main_runtime_queued_calls=56672),zi=p.__emscripten_main_thread_futex=60132;function Gi(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}p.addRunDependency=At,p.removeRunDependency=Dt,p.FS_createPath=ie.createPath,p.FS_createDataFile=ie.createDataFile,p.FS_createPreloadedFile=ie.createPreloadedFile,p.FS_createLazyFile=ie.createLazyFile,p.FS_createDevice=ie.createDevice,p.FS_unlink=ie.unlink,p.keepRuntimeAlive=xt,p.FS=ie,p.PThread=jt,p.PThread=jt,p.wasmMemory=U,p.ExitStatus=Gi;function Hi(t){if(t=t||T,!(St>0)){if(S)return c(p),bt(),void postMessage({cmd:"loaded"});!function(){if(!S){if(p.preRun)for("function"==typeof p.preRun&&(p.preRun=[p.preRun]);p.preRun.length;)It(p.preRun.shift());zt(gt)}}(),St>0||(p.setStatus?(p.setStatus("Running..."),setTimeout((function(){setTimeout((function(){p.setStatus("")}),1),e()}),1)):e())}function e(){fi||(fi=!0,p.calledRun=!0,G||(bt(),S||zt(vt),c(p),p.onRuntimeInitialized&&p.onRuntimeInitialized(),Vi&&function(t){var e=p._main;try{ji(e(0,0),!0)}catch(uJ){if(uJ instanceof Gi||"unwind"==uJ)return;var n=uJ;uJ&&"object"===typeof uJ&&uJ.stack&&(n=[uJ,uJ.stack]),O("exception thrown: "+n),x(1,uJ)}finally{!0}}(),function(){if(!S){if(p.postRun)for("function"==typeof p.postRun&&(p.postRun=[p.postRun]);p.postRun.length;)wt(p.postRun.shift());zt(Tt)}}()))}}function ji(t,e){if(t,!e&&S)throw postMessage({cmd:"exitProcess",returnCode:t}),new Gi(t);xt()||(jt.terminateAllThreads(),S||!0,p.onExit&&p.onExit(t),G=!0),x(t,new Gi(t))}if(Ct=function t(){fi||Hi(),fi||(Ct=t)},p.run=Hi,p.preInit)for("function"==typeof p.preInit&&(p.preInit=[p.preInit]);p.preInit.length>0;)p.preInit.pop()();var Vi=!0;return p.noInitialRun&&(Vi=!1),S&&(z=!1,jt.initWorker()),Hi(),e.ready}}();"object"===typeof t&&"object"===typeof e?e.exports=i:"function"===typeof define&&n.amdO?define([],(function(){return i})):"object"===typeof t&&(t.WebIFCWasm=i)}}),JS=qS({"dist/web-ifc.js"(t,e){var i=function(){var t="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return t=t||zS,function(e){var n,i,r="undefined"!==typeof(e=e||{})?e:{};r.ready=new Promise((function(t,e){n=t,i=e}));var s,o={};for(s in r)r.hasOwnProperty(s)&&(o[s]=r[s]);var a,l,h,c,u,p=[],d="./this.program",f=function(t,e){throw e},m="object"===typeof window,g="function"===typeof importScripts,y="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node,v="";y?(v=g?YS("path").dirname(v)+"/":"//",a=function(t,e){return c||(c=YS("fs")),u||(u=YS("path")),t=u.normalize(t),c.readFileSync(t,e?null:"utf8")},h=function(t){var e=a(t,!0);return e.buffer||(e=new Uint8Array(e)),C(e.buffer),e},l=function(t,e,n){c||(c=YS("fs")),u||(u=YS("path")),t=u.normalize(t),c.readFile(t,(function(t,i){t?n(t):e(i.buffer)}))},process.argv.length>1&&(d=process.argv[1].replace(/\\/g,"/")),p=process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof Fn))throw t})),process.on("unhandledRejection",dt),f=function(t,e){if(st())throw process.exitCode=t,e;process.exit(t)},r.inspect=function(){return"[Emscripten Module object]"}):(m||g)&&(g?v=self.location.href:"undefined"!==typeof document&&document.currentScript&&(v=document.currentScript.src),t&&(v=t),v=0!==v.indexOf("blob:")?v.substr(0,v.lastIndexOf("/")+1):"",a=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},g&&(h=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),l=function(t,e,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status||0==i.status&&i.response?e(i.response):n()},i.onerror=n,i.send(null)});var _=r.print||console.log.bind(console),T=r.printErr||console.warn.bind(console);for(s in o)o.hasOwnProperty(s)&&(r[s]=o[s]);o=null,r.arguments&&(p=r.arguments),r.thisProgram&&(d=r.thisProgram),r.quit&&(f=r.quit);var E,x=0,b=function(t){x=t},I=function(){return x};r.wasmBinary&&(E=r.wasmBinary);var w,S=r.noExitRuntime||!0;"object"!==typeof WebAssembly&&dt("no native wasm support detected");var R=!1;function C(t,e){t||dt("Assertion failed: "+e)}var A="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function D(t,e,n){for(var i=(e>>>=0)+n,r=e;t[r>>>0]&&!(r>=i);)++r;if(r-e>16&&t.subarray&&A)return A.decode(t.subarray(e>>>0,r>>>0));for(var s="";e<r;){var o=t[e++>>>0];if(128&o){var a=63&t[e++>>>0];if(192!=(224&o)){var l=63&t[e++>>>0];if((o=224==(240&o)?(15&o)<<12|a<<6|l:(7&o)<<18|a<<12|l<<6|63&t[e++>>>0])<65536)s+=String.fromCharCode(o);else{var h=o-65536;s+=String.fromCharCode(55296|h>>10,56320|1023&h)}}else s+=String.fromCharCode((31&o)<<6|a)}else s+=String.fromCharCode(o)}return s}function O(t,e){return(t>>>=0)?D(k,t,e):""}function N(t,e,n,i){if(!(i>0))return 0;for(var r=n>>>=0,s=n+i-1,o=0;o<t.length;++o){var a=t.charCodeAt(o);if(a>=55296&&a<=57343)a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o);if(a<=127){if(n>=s)break;e[n++>>>0]=a}else if(a<=2047){if(n+1>=s)break;e[n++>>>0]=192|a>>6,e[n++>>>0]=128|63&a}else if(a<=65535){if(n+2>=s)break;e[n++>>>0]=224|a>>12,e[n++>>>0]=128|a>>6&63,e[n++>>>0]=128|63&a}else{if(n+3>=s)break;e[n++>>>0]=240|a>>18,e[n++>>>0]=128|a>>12&63,e[n++>>>0]=128|a>>6&63,e[n++>>>0]=128|63&a}}return e[n>>>0]=0,n-r}function M(t,e,n){return N(t,k,e,n)}function P(t){for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++n)),i<=127?++e:e+=i<=2047?2:i<=65535?3:4}return e}var F,L,k,U,B,z,G,H,j,V="undefined"!==typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function W(t,e){for(var n=t,i=n>>1,r=i+e/2;!(i>=r)&&B[i>>>0];)++i;if((n=i<<1)-t>32&&V)return V.decode(k.subarray(t>>>0,n>>>0));for(var s="",o=0;!(o>=e/2);++o){var a=U[t+2*o>>>1];if(0==a)break;s+=String.fromCharCode(a)}return s}function Z(t,e,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var i=e,r=(n-=2)<2*t.length?n/2:t.length,s=0;s<r;++s){var o=t.charCodeAt(s);U[e>>>1]=o,e+=2}return U[e>>>1]=0,e-i}function Y(t){return 2*t.length}function q(t,e){for(var n=0,i="";!(n>=e/4);){var r=z[t+4*n>>>2];if(0==r)break;if(++n,r>=65536){var s=r-65536;i+=String.fromCharCode(55296|s>>10,56320|1023&s)}else i+=String.fromCharCode(r)}return i}function X(t,e,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var i=e>>>=0,r=i+n-4,s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o>=55296&&o<=57343)o=65536+((1023&o)<<10)|1023&t.charCodeAt(++s);if(z[e>>>2]=o,(e+=4)+4>r)break}return z[e>>>2]=0,e-i}function K(t){for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=55296&&i<=57343&&++n,e+=4}return e}function Q(t,e){return t%e>0&&(t+=e-t%e),t}function J(t){F=t,r.HEAP8=L=new Int8Array(t),r.HEAP16=U=new Int16Array(t),r.HEAP32=z=new Int32Array(t),r.HEAPU8=k=new Uint8Array(t),r.HEAPU16=B=new Uint16Array(t),r.HEAPU32=G=new Uint32Array(t),r.HEAPF32=H=new Float32Array(t),r.HEAPF64=j=new Float64Array(t)}r.INITIAL_MEMORY;var $,tt=[],et=[],nt=[],it=[],rt=0;function st(){return S||rt>0}function ot(t){tt.unshift(t)}function at(t){it.unshift(t)}var lt=0,ht=null,ct=null;function ut(t){lt++,r.monitorRunDependencies&&r.monitorRunDependencies(lt)}function pt(t){if(lt--,r.monitorRunDependencies&&r.monitorRunDependencies(lt),0==lt&&(null!==ht&&(clearInterval(ht),ht=null),ct)){var e=ct;ct=null,e()}}function dt(t){r.onAbort&&r.onAbort(t),T(t+=""),R=!0,1,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.";var e=new WebAssembly.RuntimeError(t);throw i(e),e}r.preloadedImages={},r.preloadedAudios={};var ft,mt,gt,yt,vt="data:application/octet-stream;base64,";function _t(t){return t.startsWith(vt)}function Tt(t){return t.startsWith("file://")}function Et(t){try{if(t==ft&&E)return new Uint8Array(E);if(h)return h(t);throw"both async and sync fetching of the wasm failed"}catch(e){dt(e)}}function xt(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var n=e.func;"number"===typeof n?void 0===e.arg?$.get(n)():$.get(n)(e.arg):n(void 0===e.arg?null:e.arg)}else e(r)}}function bt(t){this.excPtr=t,this.ptr=t-16,this.set_type=function(t){z[this.ptr+4>>>2]=t},this.get_type=function(){return z[this.ptr+4>>>2]},this.set_destructor=function(t){z[this.ptr+8>>>2]=t},this.get_destructor=function(){return z[this.ptr+8>>>2]},this.set_refcount=function(t){z[this.ptr>>>2]=t},this.set_caught=function(t){t=t?1:0,L[this.ptr+12>>>0]=t},this.get_caught=function(){return 0!=L[this.ptr+12>>>0]},this.set_rethrown=function(t){t=t?1:0,L[this.ptr+13>>>0]=t},this.get_rethrown=function(){return 0!=L[this.ptr+13>>>0]},this.init=function(t,e){this.set_type(t),this.set_destructor(e),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var t=z[this.ptr>>>2];z[this.ptr>>>2]=t+1},this.release_ref=function(){var t=z[this.ptr>>>2];return z[this.ptr>>>2]=t-1,1===t}}function It(t){this.free=function(){Sn(this.ptr),this.ptr=0},this.set_base_ptr=function(t){z[this.ptr>>>2]=t},this.get_base_ptr=function(){return z[this.ptr>>>2]},this.set_adjusted_ptr=function(t){z[this.ptr+4>>>2]=t},this.get_adjusted_ptr_addr=function(){return this.ptr+4},this.get_adjusted_ptr=function(){return z[this.ptr+4>>>2]},this.get_exception_ptr=function(){if(Mn(this.get_exception_info().get_type()))return z[this.get_base_ptr()>>>2];var t=this.get_adjusted_ptr();return 0!==t?t:this.get_base_ptr()},this.get_exception_info=function(){return new bt(this.get_base_ptr())},void 0===t?(this.ptr=wn(8),this.set_adjusted_ptr(0)):this.ptr=t}_t(ft="web-ifc.wasm")||(mt=ft,ft=r.locateFile?r.locateFile(mt,v):v+mt);var wt=[];var St=0;var Rt=0;function Ct(t){return Sn(new bt(t).ptr)}function At(t){return z[Cn()>>>2]=t,t}var Dt={splitPath:function(t){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1)},normalizeArray:function(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n;n--)t.unshift("..");return t},normalize:function(t){var e="/"===t.charAt(0),n="/"===t.substr(-1);return t=Dt.normalizeArray(t.split("/").filter((function(t){return!!t})),!e).join("/"),t||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},dirname:function(t){var e=Dt.splitPath(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},basename:function(t){if("/"===t)return"/";var e=(t=(t=Dt.normalize(t)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?t:t.substr(e+1)},extname:function(t){return Dt.splitPath(t)[3]},join:function(){var t=Array.prototype.slice.call(arguments,0);return Dt.normalize(t.join("/"))},join2:function(t,e){return Dt.normalize(t+"/"+e)}};var Ot={resolve:function(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var i=n>=0?arguments[n]:Pt.cwd();if("string"!==typeof i)throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";t=i+"/"+t,e="/"===i.charAt(0)}return t=Dt.normalizeArray(t.split("/").filter((function(t){return!!t})),!e).join("/"),(e?"/":"")+t||"."},relative:function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=Ot.resolve(t).substr(1),e=Ot.resolve(e).substr(1);for(var i=n(t.split("/")),r=n(e.split("/")),s=Math.min(i.length,r.length),o=s,a=0;a<s;a++)if(i[a]!==r[a]){o=a;break}var l=[];for(a=o;a<i.length;a++)l.push("..");return(l=l.concat(r.slice(o))).join("/")}},Nt={ttys:[],init:function(){},shutdown:function(){},register:function(t,e){Nt.ttys[t]={input:[],output:[],ops:e},Pt.registerDevice(t,Nt.stream_ops)},stream_ops:{open:function(t){var e=Nt.ttys[t.node.rdev];if(!e)throw new Pt.ErrnoError(43);t.tty=e,t.seekable=!1},close:function(t){t.tty.ops.flush(t.tty)},flush:function(t){t.tty.ops.flush(t.tty)},read:function(t,e,n,i,r){if(!t.tty||!t.tty.ops.get_char)throw new Pt.ErrnoError(60);for(var s=0,o=0;o<i;o++){var a;try{a=t.tty.ops.get_char(t.tty)}catch(uJ){throw new Pt.ErrnoError(29)}if(void 0===a&&0===s)throw new Pt.ErrnoError(6);if(null===a||void 0===a)break;s++,e[n+o]=a}return s&&(t.node.timestamp=Date.now()),s},write:function(t,e,n,i,r){if(!t.tty||!t.tty.ops.put_char)throw new Pt.ErrnoError(60);try{for(var s=0;s<i;s++)t.tty.ops.put_char(t.tty,e[n+s])}catch(uJ){throw new Pt.ErrnoError(29)}return i&&(t.node.timestamp=Date.now()),s}},default_tty_ops:{get_char:function(t){if(!t.input.length){var e=null;if(y){var n=Buffer.alloc(256),i=0;try{i=c.readSync(process.stdin.fd,n,0,256,null)}catch(uJ){if(!uJ.toString().includes("EOF"))throw uJ;i=0}e=i>0?n.slice(0,i).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\n");if(!e)return null;t.input=xn(e,!0)}return t.input.shift()},put_char:function(t,e){null===e||10===e?(_(D(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&t.output.length>0&&(_(D(t.output,0)),t.output=[])}},default_tty1_ops:{put_char:function(t,e){null===e||10===e?(T(D(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&t.output.length>0&&(T(D(t.output,0)),t.output=[])}}};var Mt={ops_table:null,mount:function(t){return Mt.createNode(null,"/",16895,0)},createNode:function(t,e,n,i){if(Pt.isBlkdev(n)||Pt.isFIFO(n))throw new Pt.ErrnoError(63);Mt.ops_table||(Mt.ops_table={dir:{node:{getattr:Mt.node_ops.getattr,setattr:Mt.node_ops.setattr,lookup:Mt.node_ops.lookup,mknod:Mt.node_ops.mknod,rename:Mt.node_ops.rename,unlink:Mt.node_ops.unlink,rmdir:Mt.node_ops.rmdir,readdir:Mt.node_ops.readdir,symlink:Mt.node_ops.symlink},stream:{llseek:Mt.stream_ops.llseek}},file:{node:{getattr:Mt.node_ops.getattr,setattr:Mt.node_ops.setattr},stream:{llseek:Mt.stream_ops.llseek,read:Mt.stream_ops.read,write:Mt.stream_ops.write,allocate:Mt.stream_ops.allocate,mmap:Mt.stream_ops.mmap,msync:Mt.stream_ops.msync}},link:{node:{getattr:Mt.node_ops.getattr,setattr:Mt.node_ops.setattr,readlink:Mt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Mt.node_ops.getattr,setattr:Mt.node_ops.setattr},stream:Pt.chrdev_stream_ops}});var r=Pt.createNode(t,e,n,i);return Pt.isDir(r.mode)?(r.node_ops=Mt.ops_table.dir.node,r.stream_ops=Mt.ops_table.dir.stream,r.contents={}):Pt.isFile(r.mode)?(r.node_ops=Mt.ops_table.file.node,r.stream_ops=Mt.ops_table.file.stream,r.usedBytes=0,r.contents=null):Pt.isLink(r.mode)?(r.node_ops=Mt.ops_table.link.node,r.stream_ops=Mt.ops_table.link.stream):Pt.isChrdev(r.mode)&&(r.node_ops=Mt.ops_table.chrdev.node,r.stream_ops=Mt.ops_table.chrdev.stream),r.timestamp=Date.now(),t&&(t.contents[e]=r,t.timestamp=r.timestamp),r},getFileDataAsTypedArray:function(t){return t.contents?t.contents.subarray?t.contents.subarray(0,t.usedBytes):new Uint8Array(t.contents):new Uint8Array(0)},expandFileStorage:function(t,e){e>>>=0;var n=t.contents?t.contents.length:0;if(!(n>=e)){e=Math.max(e,n*(n<1048576?2:1.125)>>>0),0!=n&&(e=Math.max(e,256));var i=t.contents;t.contents=new Uint8Array(e),t.usedBytes>0&&t.contents.set(i.subarray(0,t.usedBytes),0)}},resizeFileStorage:function(t,e){if(e>>>=0,t.usedBytes!=e)if(0==e)t.contents=null,t.usedBytes=0;else{var n=t.contents;t.contents=new Uint8Array(e),n&&t.contents.set(n.subarray(0,Math.min(e,t.usedBytes))),t.usedBytes=e}},node_ops:{getattr:function(t){var e={};return e.dev=Pt.isChrdev(t.mode)?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,Pt.isDir(t.mode)?e.size=4096:Pt.isFile(t.mode)?e.size=t.usedBytes:Pt.isLink(t.mode)?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr:function(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&Mt.resizeFileStorage(t,e.size)},lookup:function(t,e){throw Pt.genericErrors[44]},mknod:function(t,e,n,i){return Mt.createNode(t,e,n,i)},rename:function(t,e,n){if(Pt.isDir(t.mode)){var i;try{i=Pt.lookupNode(e,n)}catch(uJ){}if(i)for(var r in i.contents)throw new Pt.ErrnoError(55)}delete t.parent.contents[t.name],t.parent.timestamp=Date.now(),t.name=n,e.contents[n]=t,e.timestamp=t.parent.timestamp,t.parent=e},unlink:function(t,e){delete t.contents[e],t.timestamp=Date.now()},rmdir:function(t,e){var n=Pt.lookupNode(t,e);for(var i in n.contents)throw new Pt.ErrnoError(55);delete t.contents[e],t.timestamp=Date.now()},readdir:function(t){var e=[".",".."];for(var n in t.contents)t.contents.hasOwnProperty(n)&&e.push(n);return e},symlink:function(t,e,n){var i=Mt.createNode(t,e,41471,0);return i.link=n,i},readlink:function(t){if(!Pt.isLink(t.mode))throw new Pt.ErrnoError(28);return t.link}},stream_ops:{read:function(t,e,n,i,r){var s=t.node.contents;if(r>=t.node.usedBytes)return 0;var o=Math.min(t.node.usedBytes-r,i);if(o>8&&s.subarray)e.set(s.subarray(r,r+o),n);else for(var a=0;a<o;a++)e[n+a]=s[r+a];return o},write:function(t,e,n,i,r,s){if(e.buffer===L.buffer&&(s=!1),!i)return 0;var o=t.node;if(o.timestamp=Date.now(),e.subarray&&(!o.contents||o.contents.subarray)){if(s)return o.contents=e.subarray(n,n+i),o.usedBytes=i,i;if(0===o.usedBytes&&0===r)return o.contents=e.slice(n,n+i),o.usedBytes=i,i;if(r+i<=o.usedBytes)return o.contents.set(e.subarray(n,n+i),r),i}if(Mt.expandFileStorage(o,r+i),o.contents.subarray&&e.subarray)o.contents.set(e.subarray(n,n+i),r);else for(var a=0;a<i;a++)o.contents[r+a]=e[n+a];return o.usedBytes=Math.max(o.usedBytes,r+i),i},llseek:function(t,e,n){var i=e;if(1===n?i+=t.position:2===n&&Pt.isFile(t.node.mode)&&(i+=t.node.usedBytes),i<0)throw new Pt.ErrnoError(28);return i},allocate:function(t,e,n){Mt.expandFileStorage(t.node,e+n),t.node.usedBytes=Math.max(t.node.usedBytes,e+n)},mmap:function(t,e,n,i,r,s){if(0!==e)throw new Pt.ErrnoError(28);if(!Pt.isFile(t.node.mode))throw new Pt.ErrnoError(43);var o,a,l=t.node.contents;if(2&s||l.buffer!==F){if((i>0||i+n<l.length)&&(l=l.subarray?l.subarray(i,i+n):Array.prototype.slice.call(l,i,i+n)),a=!0,!(o=void dt()))throw new Pt.ErrnoError(48);o>>>=0,L.set(l,o>>>0)}else a=!1,o=l.byteOffset;return{ptr:o,allocated:a}},msync:function(t,e,n,i,r){if(!Pt.isFile(t.node.mode))throw new Pt.ErrnoError(43);if(2&r)return 0;Mt.stream_ops.write(t,e,0,i,n,!1);return 0}}};var Pt={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(t,e){if(e=e||{},!(t=Ot.resolve(Pt.cwd(),t)))return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var i in n)void 0===e[i]&&(e[i]=n[i]);if(e.recurse_count>8)throw new Pt.ErrnoError(32);for(var r=Dt.normalizeArray(t.split("/").filter((function(t){return!!t})),!1),s=Pt.root,o="/",a=0;a<r.length;a++){var l=a===r.length-1;if(l&&e.parent)break;if(s=Pt.lookupNode(s,r[a]),o=Dt.join2(o,r[a]),Pt.isMountpoint(s)&&(!l||l&&e.follow_mount)&&(s=s.mounted.root),!l||e.follow)for(var h=0;Pt.isLink(s.mode);){var c=Pt.readlink(o);if(o=Ot.resolve(Dt.dirname(o),c),s=Pt.lookupPath(o,{recurse_count:e.recurse_count}).node,h++>40)throw new Pt.ErrnoError(32)}}return{path:o,node:s}},getPath:function(t){for(var e;;){if(Pt.isRoot(t)){var n=t.mount.mountpoint;return e?"/"!==n[n.length-1]?n+"/"+e:n+e:n}e=e?t.name+"/"+e:t.name,t=t.parent}},hashName:function(t,e){for(var n=0,i=0;i<e.length;i++)n=(n<<5)-n+e.charCodeAt(i)|0;return(t+n>>>0)%Pt.nameTable.length},hashAddNode:function(t){var e=Pt.hashName(t.parent.id,t.name);t.name_next=Pt.nameTable[e],Pt.nameTable[e]=t},hashRemoveNode:function(t){var e=Pt.hashName(t.parent.id,t.name);if(Pt.nameTable[e]===t)Pt.nameTable[e]=t.name_next;else for(var n=Pt.nameTable[e];n;){if(n.name_next===t){n.name_next=t.name_next;break}n=n.name_next}},lookupNode:function(t,e){var n=Pt.mayLookup(t);if(n)throw new Pt.ErrnoError(n,t);for(var i=Pt.hashName(t.id,e),r=Pt.nameTable[i];r;r=r.name_next){var s=r.name;if(r.parent.id===t.id&&s===e)return r}return Pt.lookup(t,e)},createNode:function(t,e,n,i){var r=new Pt.FSNode(t,e,n,i);return Pt.hashAddNode(r),r},destroyNode:function(t){Pt.hashRemoveNode(t)},isRoot:function(t){return t===t.parent},isMountpoint:function(t){return!!t.mounted},isFile:function(t){return 32768===(61440&t)},isDir:function(t){return 16384===(61440&t)},isLink:function(t){return 40960===(61440&t)},isChrdev:function(t){return 8192===(61440&t)},isBlkdev:function(t){return 24576===(61440&t)},isFIFO:function(t){return 4096===(61440&t)},isSocket:function(t){return 49152===(49152&t)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(t){var e=Pt.flagModes[t];if("undefined"===typeof e)throw new Error("Unknown file open mode: "+t);return e},flagsToPermissionString:function(t){var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e},nodePermissions:function(t,e){return Pt.ignorePermissions||(!e.includes("r")||292&t.mode)&&(!e.includes("w")||146&t.mode)&&(!e.includes("x")||73&t.mode)?0:2},mayLookup:function(t){var e=Pt.nodePermissions(t,"x");return e||(t.node_ops.lookup?0:2)},mayCreate:function(t,e){try{Pt.lookupNode(t,e);return 20}catch(uJ){}return Pt.nodePermissions(t,"wx")},mayDelete:function(t,e,n){var i;try{i=Pt.lookupNode(t,e)}catch(uJ){return uJ.errno}var r=Pt.nodePermissions(t,"wx");if(r)return r;if(n){if(!Pt.isDir(i.mode))return 54;if(Pt.isRoot(i)||Pt.getPath(i)===Pt.cwd())return 10}else if(Pt.isDir(i.mode))return 31;return 0},mayOpen:function(t,e){return t?Pt.isLink(t.mode)?32:Pt.isDir(t.mode)&&("r"!==Pt.flagsToPermissionString(e)||512&e)?31:Pt.nodePermissions(t,Pt.flagsToPermissionString(e)):44},MAX_OPEN_FDS:4096,nextfd:function(t,e){t=t||0,e=e||Pt.MAX_OPEN_FDS;for(var n=t;n<=e;n++)if(!Pt.streams[n])return n;throw new Pt.ErrnoError(33)},getStream:function(t){return Pt.streams[t]},createStream:function(t,e,n){Pt.FSStream||(Pt.FSStream=function(){},Pt.FSStream.prototype={object:{get:function(){return this.node},set:function(t){this.node=t}},isRead:{get:function(){return 1!==(2097155&this.flags)}},isWrite:{get:function(){return 0!==(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var i=new Pt.FSStream;for(var r in t)i[r]=t[r];t=i;var s=Pt.nextfd(e,n);return t.fd=s,Pt.streams[s]=t,t},closeStream:function(t){Pt.streams[t]=null},chrdev_stream_ops:{open:function(t){var e=Pt.getDevice(t.node.rdev);t.stream_ops=e.stream_ops,t.stream_ops.open&&t.stream_ops.open(t)},llseek:function(){throw new Pt.ErrnoError(70)}},major:function(t){return t>>8},minor:function(t){return 255&t},makedev:function(t,e){return t<<8|e},registerDevice:function(t,e){Pt.devices[t]={stream_ops:e}},getDevice:function(t){return Pt.devices[t]},getMounts:function(t){for(var e=[],n=[t];n.length;){var i=n.pop();e.push(i),n.push.apply(n,i.mounts)}return e},syncfs:function(t,e){"function"===typeof t&&(e=t,t=!1),Pt.syncFSRequests++,Pt.syncFSRequests>1&&T("warning: "+Pt.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=Pt.getMounts(Pt.root.mount),i=0;function r(t){return Pt.syncFSRequests--,e(t)}function s(t){if(t)return s.errored?void 0:(s.errored=!0,r(t));++i>=n.length&&r(null)}n.forEach((function(e){if(!e.type.syncfs)return s(null);e.type.syncfs(e,t,s)}))},mount:function(t,e,n){var i,r="/"===n,s=!n;if(r&&Pt.root)throw new Pt.ErrnoError(10);if(!r&&!s){var o=Pt.lookupPath(n,{follow_mount:!1});if(n=o.path,i=o.node,Pt.isMountpoint(i))throw new Pt.ErrnoError(10);if(!Pt.isDir(i.mode))throw new Pt.ErrnoError(54)}var a={type:t,opts:e,mountpoint:n,mounts:[]},l=t.mount(a);return l.mount=a,a.root=l,r?Pt.root=l:i&&(i.mounted=a,i.mount&&i.mount.mounts.push(a)),l},unmount:function(t){var e=Pt.lookupPath(t,{follow_mount:!1});if(!Pt.isMountpoint(e.node))throw new Pt.ErrnoError(28);var n=e.node,i=n.mounted,r=Pt.getMounts(i);Object.keys(Pt.nameTable).forEach((function(t){for(var e=Pt.nameTable[t];e;){var n=e.name_next;r.includes(e.mount)&&Pt.destroyNode(e),e=n}})),n.mounted=null;var s=n.mount.mounts.indexOf(i);n.mount.mounts.splice(s,1)},lookup:function(t,e){return t.node_ops.lookup(t,e)},mknod:function(t,e,n){var i=Pt.lookupPath(t,{parent:!0}).node,r=Dt.basename(t);if(!r||"."===r||".."===r)throw new Pt.ErrnoError(28);var s=Pt.mayCreate(i,r);if(s)throw new Pt.ErrnoError(s);if(!i.node_ops.mknod)throw new Pt.ErrnoError(63);return i.node_ops.mknod(i,r,e,n)},create:function(t,e){return e=void 0!==e?e:438,e&=4095,e|=32768,Pt.mknod(t,e,0)},mkdir:function(t,e){return e=void 0!==e?e:511,e&=1023,e|=16384,Pt.mknod(t,e,0)},mkdirTree:function(t,e){for(var n=t.split("/"),i="",r=0;r<n.length;++r)if(n[r]){i+="/"+n[r];try{Pt.mkdir(i,e)}catch(uJ){if(20!=uJ.errno)throw uJ}}},mkdev:function(t,e,n){return"undefined"===typeof n&&(n=e,e=438),e|=8192,Pt.mknod(t,e,n)},symlink:function(t,e){if(!Ot.resolve(t))throw new Pt.ErrnoError(44);var n=Pt.lookupPath(e,{parent:!0}).node;if(!n)throw new Pt.ErrnoError(44);var i=Dt.basename(e),r=Pt.mayCreate(n,i);if(r)throw new Pt.ErrnoError(r);if(!n.node_ops.symlink)throw new Pt.ErrnoError(63);return n.node_ops.symlink(n,i,t)},rename:function(t,e){var n,i,r=Dt.dirname(t),s=Dt.dirname(e),o=Dt.basename(t),a=Dt.basename(e);if(n=Pt.lookupPath(t,{parent:!0}).node,i=Pt.lookupPath(e,{parent:!0}).node,!n||!i)throw new Pt.ErrnoError(44);if(n.mount!==i.mount)throw new Pt.ErrnoError(75);var l,h=Pt.lookupNode(n,o),c=Ot.relative(t,s);if("."!==c.charAt(0))throw new Pt.ErrnoError(28);if("."!==(c=Ot.relative(e,r)).charAt(0))throw new Pt.ErrnoError(55);try{l=Pt.lookupNode(i,a)}catch(uJ){}if(h!==l){var u=Pt.isDir(h.mode),p=Pt.mayDelete(n,o,u);if(p)throw new Pt.ErrnoError(p);if(p=l?Pt.mayDelete(i,a,u):Pt.mayCreate(i,a))throw new Pt.ErrnoError(p);if(!n.node_ops.rename)throw new Pt.ErrnoError(63);if(Pt.isMountpoint(h)||l&&Pt.isMountpoint(l))throw new Pt.ErrnoError(10);if(i!==n&&(p=Pt.nodePermissions(n,"w")))throw new Pt.ErrnoError(p);try{Pt.trackingDelegate.willMovePath&&Pt.trackingDelegate.willMovePath(t,e)}catch(uJ){T("FS.trackingDelegate['willMovePath']('"+t+"', '"+e+"') threw an exception: "+uJ.message)}Pt.hashRemoveNode(h);try{n.node_ops.rename(h,i,a)}catch(uJ){throw uJ}finally{Pt.hashAddNode(h)}try{Pt.trackingDelegate.onMovePath&&Pt.trackingDelegate.onMovePath(t,e)}catch(uJ){T("FS.trackingDelegate['onMovePath']('"+t+"', '"+e+"') threw an exception: "+uJ.message)}}},rmdir:function(t){var e=Pt.lookupPath(t,{parent:!0}).node,n=Dt.basename(t),i=Pt.lookupNode(e,n),r=Pt.mayDelete(e,n,!0);if(r)throw new Pt.ErrnoError(r);if(!e.node_ops.rmdir)throw new Pt.ErrnoError(63);if(Pt.isMountpoint(i))throw new Pt.ErrnoError(10);try{Pt.trackingDelegate.willDeletePath&&Pt.trackingDelegate.willDeletePath(t)}catch(uJ){T("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+uJ.message)}e.node_ops.rmdir(e,n),Pt.destroyNode(i);try{Pt.trackingDelegate.onDeletePath&&Pt.trackingDelegate.onDeletePath(t)}catch(uJ){T("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+uJ.message)}},readdir:function(t){var e=Pt.lookupPath(t,{follow:!0}).node;if(!e.node_ops.readdir)throw new Pt.ErrnoError(54);return e.node_ops.readdir(e)},unlink:function(t){var e=Pt.lookupPath(t,{parent:!0}).node,n=Dt.basename(t),i=Pt.lookupNode(e,n),r=Pt.mayDelete(e,n,!1);if(r)throw new Pt.ErrnoError(r);if(!e.node_ops.unlink)throw new Pt.ErrnoError(63);if(Pt.isMountpoint(i))throw new Pt.ErrnoError(10);try{Pt.trackingDelegate.willDeletePath&&Pt.trackingDelegate.willDeletePath(t)}catch(uJ){T("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+uJ.message)}e.node_ops.unlink(e,n),Pt.destroyNode(i);try{Pt.trackingDelegate.onDeletePath&&Pt.trackingDelegate.onDeletePath(t)}catch(uJ){T("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+uJ.message)}},readlink:function(t){var e=Pt.lookupPath(t).node;if(!e)throw new Pt.ErrnoError(44);if(!e.node_ops.readlink)throw new Pt.ErrnoError(28);return Ot.resolve(Pt.getPath(e.parent),e.node_ops.readlink(e))},stat:function(t,e){var n=Pt.lookupPath(t,{follow:!e}).node;if(!n)throw new Pt.ErrnoError(44);if(!n.node_ops.getattr)throw new Pt.ErrnoError(63);return n.node_ops.getattr(n)},lstat:function(t){return Pt.stat(t,!0)},chmod:function(t,e,n){var i;"string"===typeof t?i=Pt.lookupPath(t,{follow:!n}).node:i=t;if(!i.node_ops.setattr)throw new Pt.ErrnoError(63);i.node_ops.setattr(i,{mode:4095&e|-4096&i.mode,timestamp:Date.now()})},lchmod:function(t,e){Pt.chmod(t,e,!0)},fchmod:function(t,e){var n=Pt.getStream(t);if(!n)throw new Pt.ErrnoError(8);Pt.chmod(n.node,e)},chown:function(t,e,n,i){var r;"string"===typeof t?r=Pt.lookupPath(t,{follow:!i}).node:r=t;if(!r.node_ops.setattr)throw new Pt.ErrnoError(63);r.node_ops.setattr(r,{timestamp:Date.now()})},lchown:function(t,e,n){Pt.chown(t,e,n,!0)},fchown:function(t,e,n){var i=Pt.getStream(t);if(!i)throw new Pt.ErrnoError(8);Pt.chown(i.node,e,n)},truncate:function(t,e){if(e<0)throw new Pt.ErrnoError(28);var n;"string"===typeof t?n=Pt.lookupPath(t,{follow:!0}).node:n=t;if(!n.node_ops.setattr)throw new Pt.ErrnoError(63);if(Pt.isDir(n.mode))throw new Pt.ErrnoError(31);if(!Pt.isFile(n.mode))throw new Pt.ErrnoError(28);var i=Pt.nodePermissions(n,"w");if(i)throw new Pt.ErrnoError(i);n.node_ops.setattr(n,{size:e,timestamp:Date.now()})},ftruncate:function(t,e){var n=Pt.getStream(t);if(!n)throw new Pt.ErrnoError(8);if(0===(2097155&n.flags))throw new Pt.ErrnoError(28);Pt.truncate(n.node,e)},utime:function(t,e,n){var i=Pt.lookupPath(t,{follow:!0}).node;i.node_ops.setattr(i,{timestamp:Math.max(e,n)})},open:function(t,e,n,i,s){if(""===t)throw new Pt.ErrnoError(44);var o;if(n="undefined"===typeof n?438:n,n=64&(e="string"===typeof e?Pt.modeStringToFlags(e):e)?4095&n|32768:0,"object"===typeof t)o=t;else{t=Dt.normalize(t);try{o=Pt.lookupPath(t,{follow:!(131072&e)}).node}catch(uJ){}}var a=!1;if(64&e)if(o){if(128&e)throw new Pt.ErrnoError(20)}else o=Pt.mknod(t,n,0),a=!0;if(!o)throw new Pt.ErrnoError(44);if(Pt.isChrdev(o.mode)&&(e&=-513),65536&e&&!Pt.isDir(o.mode))throw new Pt.ErrnoError(54);if(!a){var l=Pt.mayOpen(o,e);if(l)throw new Pt.ErrnoError(l)}512&e&&Pt.truncate(o,0),e&=-131713;var h=Pt.createStream({node:o,path:Pt.getPath(o),flags:e,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1},i,s);h.stream_ops.open&&h.stream_ops.open(h),!r.logReadFiles||1&e||(Pt.readFiles||(Pt.readFiles={}),t in Pt.readFiles||(Pt.readFiles[t]=1,T("FS.trackingDelegate error on read file: "+t)));try{if(Pt.trackingDelegate.onOpenFile){var c=0;1!==(2097155&e)&&(c|=Pt.tracking.openFlags.READ),0!==(2097155&e)&&(c|=Pt.tracking.openFlags.WRITE),Pt.trackingDelegate.onOpenFile(t,c)}}catch(uJ){T("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+uJ.message)}return h},close:function(t){if(Pt.isClosed(t))throw new Pt.ErrnoError(8);t.getdents&&(t.getdents=null);try{t.stream_ops.close&&t.stream_ops.close(t)}catch(uJ){throw uJ}finally{Pt.closeStream(t.fd)}t.fd=null},isClosed:function(t){return null===t.fd},llseek:function(t,e,n){if(Pt.isClosed(t))throw new Pt.ErrnoError(8);if(!t.seekable||!t.stream_ops.llseek)throw new Pt.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new Pt.ErrnoError(28);return t.position=t.stream_ops.llseek(t,e,n),t.ungotten=[],t.position},read:function(t,e,n,i,r){if(n>>>=0,i<0||r<0)throw new Pt.ErrnoError(28);if(Pt.isClosed(t))throw new Pt.ErrnoError(8);if(1===(2097155&t.flags))throw new Pt.ErrnoError(8);if(Pt.isDir(t.node.mode))throw new Pt.ErrnoError(31);if(!t.stream_ops.read)throw new Pt.ErrnoError(28);var s="undefined"!==typeof r;if(s){if(!t.seekable)throw new Pt.ErrnoError(70)}else r=t.position;var o=t.stream_ops.read(t,e,n,i,r);return s||(t.position+=o),o},write:function(t,e,n,i,r,s){if(n>>>=0,i<0||r<0)throw new Pt.ErrnoError(28);if(Pt.isClosed(t))throw new Pt.ErrnoError(8);if(0===(2097155&t.flags))throw new Pt.ErrnoError(8);if(Pt.isDir(t.node.mode))throw new Pt.ErrnoError(31);if(!t.stream_ops.write)throw new Pt.ErrnoError(28);t.seekable&&1024&t.flags&&Pt.llseek(t,0,2);var o="undefined"!==typeof r;if(o){if(!t.seekable)throw new Pt.ErrnoError(70)}else r=t.position;var a=t.stream_ops.write(t,e,n,i,r,s);o||(t.position+=a);try{t.path&&Pt.trackingDelegate.onWriteToFile&&Pt.trackingDelegate.onWriteToFile(t.path)}catch(uJ){T("FS.trackingDelegate['onWriteToFile']('"+t.path+"') threw an exception: "+uJ.message)}return a},allocate:function(t,e,n){if(Pt.isClosed(t))throw new Pt.ErrnoError(8);if(e<0||n<=0)throw new Pt.ErrnoError(28);if(0===(2097155&t.flags))throw new Pt.ErrnoError(8);if(!Pt.isFile(t.node.mode)&&!Pt.isDir(t.node.mode))throw new Pt.ErrnoError(43);if(!t.stream_ops.allocate)throw new Pt.ErrnoError(138);t.stream_ops.allocate(t,e,n)},mmap:function(t,e,n,i,r,s){if(e>>>=0,0!==(2&r)&&0===(2&s)&&2!==(2097155&t.flags))throw new Pt.ErrnoError(2);if(1===(2097155&t.flags))throw new Pt.ErrnoError(2);if(!t.stream_ops.mmap)throw new Pt.ErrnoError(43);return t.stream_ops.mmap(t,e,n,i,r,s)},msync:function(t,e,n,i,r){return n>>>=0,t&&t.stream_ops.msync?t.stream_ops.msync(t,e,n,i,r):0},munmap:function(t){return 0},ioctl:function(t,e,n){if(!t.stream_ops.ioctl)throw new Pt.ErrnoError(59);return t.stream_ops.ioctl(t,e,n)},readFile:function(t,e){if((e=e||{}).flags=e.flags||0,e.encoding=e.encoding||"binary","utf8"!==e.encoding&&"binary"!==e.encoding)throw new Error('Invalid encoding type "'+e.encoding+'"');var n,i=Pt.open(t,e.flags),r=Pt.stat(t).size,s=new Uint8Array(r);return Pt.read(i,s,0,r,0),"utf8"===e.encoding?n=D(s,0):"binary"===e.encoding&&(n=s),Pt.close(i),n},writeFile:function(t,e,n){(n=n||{}).flags=n.flags||577;var i=Pt.open(t,n.flags,n.mode);if("string"===typeof e){var r=new Uint8Array(P(e)+1),s=N(e,r,0,r.length);Pt.write(i,r,0,s,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(e))throw new Error("Unsupported data type");Pt.write(i,e,0,e.byteLength,void 0,n.canOwn)}Pt.close(i)},cwd:function(){return Pt.currentPath},chdir:function(t){var e=Pt.lookupPath(t,{follow:!0});if(null===e.node)throw new Pt.ErrnoError(44);if(!Pt.isDir(e.node.mode))throw new Pt.ErrnoError(54);var n=Pt.nodePermissions(e.node,"x");if(n)throw new Pt.ErrnoError(n);Pt.currentPath=e.path},createDefaultDirectories:function(){Pt.mkdir("/tmp"),Pt.mkdir("/home"),Pt.mkdir("/home/web_user")},createDefaultDevices:function(){Pt.mkdir("/dev"),Pt.registerDevice(Pt.makedev(1,3),{read:function(){return 0},write:function(t,e,n,i,r){return i}}),Pt.mkdev("/dev/null",Pt.makedev(1,3)),Nt.register(Pt.makedev(5,0),Nt.default_tty_ops),Nt.register(Pt.makedev(6,0),Nt.default_tty1_ops),Pt.mkdev("/dev/tty",Pt.makedev(5,0)),Pt.mkdev("/dev/tty1",Pt.makedev(6,0));var t=function(){if("object"===typeof crypto&&"function"===typeof crypto.getRandomValues){var t=new Uint8Array(1);return function(){return crypto.getRandomValues(t),t[0]}}if(y)try{var e=KS();return function(){return e.randomBytes(1)[0]}}catch(uJ){}return function(){dt("randomDevice")}}();Pt.createDevice("/dev","random",t),Pt.createDevice("/dev","urandom",t),Pt.mkdir("/dev/shm"),Pt.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){Pt.mkdir("/proc");var t=Pt.mkdir("/proc/self");Pt.mkdir("/proc/self/fd"),Pt.mount({mount:function(){var e=Pt.createNode(t,"fd",16895,73);return e.node_ops={lookup:function(t,e){var n=+e,i=Pt.getStream(n);if(!i)throw new Pt.ErrnoError(8);var r={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return i.path}}};return r.parent=r,r}},e}},{},"/proc/self/fd")},createStandardStreams:function(){r.stdin?Pt.createDevice("/dev","stdin",r.stdin):Pt.symlink("/dev/tty","/dev/stdin"),r.stdout?Pt.createDevice("/dev","stdout",null,r.stdout):Pt.symlink("/dev/tty","/dev/stdout"),r.stderr?Pt.createDevice("/dev","stderr",null,r.stderr):Pt.symlink("/dev/tty1","/dev/stderr");Pt.open("/dev/stdin",0),Pt.open("/dev/stdout",1),Pt.open("/dev/stderr",1)},ensureErrnoError:function(){Pt.ErrnoError||(Pt.ErrnoError=function(t,e){this.node=e,this.setErrno=function(t){this.errno=t},this.setErrno(t),this.message="FS error"},Pt.ErrnoError.prototype=new Error,Pt.ErrnoError.prototype.constructor=Pt.ErrnoError,[44].forEach((function(t){Pt.genericErrors[t]=new Pt.ErrnoError(t),Pt.genericErrors[t].stack="<generic error, no stack>"})))},staticInit:function(){Pt.ensureErrnoError(),Pt.nameTable=new Array(4096),Pt.mount(Mt,{},"/"),Pt.createDefaultDirectories(),Pt.createDefaultDevices(),Pt.createSpecialDirectories(),Pt.filesystems={MEMFS:Mt}},init:function(t,e,n){Pt.init.initialized=!0,Pt.ensureErrnoError(),r.stdin=t||r.stdin,r.stdout=e||r.stdout,r.stderr=n||r.stderr,Pt.createStandardStreams()},quit:function(){Pt.init.initialized=!1;var t=r._fflush;t&&t(0);for(var e=0;e<Pt.streams.length;e++){var n=Pt.streams[e];n&&Pt.close(n)}},getMode:function(t,e){var n=0;return t&&(n|=365),e&&(n|=146),n},findObject:function(t,e){var n=Pt.analyzePath(t,e);return n.exists?n.object:null},analyzePath:function(t,e){try{t=(i=Pt.lookupPath(t,{follow:!e})).path}catch(uJ){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var i=Pt.lookupPath(t,{parent:!0});n.parentExists=!0,n.parentPath=i.path,n.parentObject=i.node,n.name=Dt.basename(t),i=Pt.lookupPath(t,{follow:!e}),n.exists=!0,n.path=i.path,n.object=i.node,n.name=i.node.name,n.isRoot="/"===i.path}catch(uJ){n.error=uJ.errno}return n},createPath:function(t,e,n,i){t="string"===typeof t?t:Pt.getPath(t);for(var r=e.split("/").reverse();r.length;){var s=r.pop();if(s){var o=Dt.join2(t,s);try{Pt.mkdir(o)}catch(uJ){}t=o}}return o},createFile:function(t,e,n,i,r){var s=Dt.join2("string"===typeof t?t:Pt.getPath(t),e),o=Pt.getMode(i,r);return Pt.create(s,o)},createDataFile:function(t,e,n,i,r,s){var o=e?Dt.join2("string"===typeof t?t:Pt.getPath(t),e):t,a=Pt.getMode(i,r),l=Pt.create(o,a);if(n){if("string"===typeof n){for(var h=new Array(n.length),c=0,u=n.length;c<u;++c)h[c]=n.charCodeAt(c);n=h}Pt.chmod(l,146|a);var p=Pt.open(l,577);Pt.write(p,n,0,n.length,0,s),Pt.close(p),Pt.chmod(l,a)}return l},createDevice:function(t,e,n,i){var r=Dt.join2("string"===typeof t?t:Pt.getPath(t),e),s=Pt.getMode(!!n,!!i);Pt.createDevice.major||(Pt.createDevice.major=64);var o=Pt.makedev(Pt.createDevice.major++,0);return Pt.registerDevice(o,{open:function(t){t.seekable=!1},close:function(t){i&&i.buffer&&i.buffer.length&&i(10)},read:function(t,e,i,r,s){for(var o=0,a=0;a<r;a++){var l;try{l=n()}catch(uJ){throw new Pt.ErrnoError(29)}if(void 0===l&&0===o)throw new Pt.ErrnoError(6);if(null===l||void 0===l)break;o++,e[i+a]=l}return o&&(t.node.timestamp=Date.now()),o},write:function(t,e,n,r,s){for(var o=0;o<r;o++)try{i(e[n+o])}catch(uJ){throw new Pt.ErrnoError(29)}return r&&(t.node.timestamp=Date.now()),o}}),Pt.mkdev(r,s,o)},forceLoadFile:function(t){if(t.isDevice||t.isFolder||t.link||t.contents)return!0;if("undefined"!==typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!a)throw new Error("Cannot load without read() or XMLHttpRequest.");try{t.contents=xn(a(t.url),!0),t.usedBytes=t.contents.length}catch(uJ){throw new Pt.ErrnoError(29)}},createLazyFile:function(t,e,n,i,r){function s(){this.lengthKnown=!1,this.chunks=[]}if(s.prototype.get=function(t){if(!(t>this.length-1||t<0)){var e=t%this.chunkSize,n=t/this.chunkSize|0;return this.getter(n)[e]}},s.prototype.setDataGetter=function(t){this.getter=t},s.prototype.cacheLength=function(){var t=new XMLHttpRequest;if(t.open("HEAD",n,!1),t.send(null),!(t.status>=200&&t.status<300||304===t.status))throw new Error("Couldn't load "+n+". Status: "+t.status);var e,i=Number(t.getResponseHeader("Content-length")),r=(e=t.getResponseHeader("Accept-Ranges"))&&"bytes"===e,s=(e=t.getResponseHeader("Content-Encoding"))&&"gzip"===e,o=1048576;r||(o=i);var a=this;a.setDataGetter((function(t){var e=t*o,r=(t+1)*o-1;if(r=Math.min(r,i-1),"undefined"===typeof a.chunks[t]&&(a.chunks[t]=function(t,e){if(t>e)throw new Error("invalid range ("+t+", "+e+") or no bytes requested!");if(e>i-1)throw new Error("only "+i+" bytes available! programmer error!");var r=new XMLHttpRequest;if(r.open("GET",n,!1),i!==o&&r.setRequestHeader("Range","bytes="+t+"-"+e),"undefined"!=typeof Uint8Array&&(r.responseType="arraybuffer"),r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.send(null),!(r.status>=200&&r.status<300||304===r.status))throw new Error("Couldn't load "+n+". Status: "+r.status);return void 0!==r.response?new Uint8Array(r.response||[]):xn(r.responseText||"",!0)}(e,r)),"undefined"===typeof a.chunks[t])throw new Error("doXHR failed!");return a.chunks[t]})),!s&&i||(o=i=1,i=this.getter(0).length,o=i,_("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=i,this._chunkSize=o,this.lengthKnown=!0},"undefined"!==typeof XMLHttpRequest){if(!g)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o=new s;Object.defineProperties(o,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var a={isDevice:!1,contents:o}}else a={isDevice:!1,url:n};var l=Pt.createFile(t,e,a,i,r);a.contents?l.contents=a.contents:a.url&&(l.contents=null,l.url=a.url),Object.defineProperties(l,{usedBytes:{get:function(){return this.contents.length}}});var h={};return Object.keys(l.stream_ops).forEach((function(t){var e=l.stream_ops[t];h[t]=function(){return Pt.forceLoadFile(l),e.apply(null,arguments)}})),h.read=function(t,e,n,i,r){Pt.forceLoadFile(l);var s=t.node.contents;if(r>=s.length)return 0;var o=Math.min(s.length-r,i);if(s.slice)for(var a=0;a<o;a++)e[n+a]=s[r+a];else for(a=0;a<o;a++)e[n+a]=s.get(r+a);return o},l.stream_ops=h,l},createPreloadedFile:function(t,e,n,i,s,o,a,h,c,u){Browser.init();var p=e?Ot.resolve(Dt.join2(t,e)):t;function d(n){function l(n){u&&u(),h||Pt.createDataFile(t,e,n,i,s,c),o&&o(),pt()}var d=!1;r.preloadPlugins.forEach((function(t){d||t.canHandle(p)&&(t.handle(n,p,l,(function(){a&&a(),pt()})),d=!0)})),d||l(n)}ut(),"string"==typeof n?function(t,e,n,i){var r=i?"":"al "+t;l(t,(function(n){C(n,'Loading data file "'+t+'" failed (no arrayBuffer).'),e(new Uint8Array(n)),r&&pt()}),(function(e){if(!n)throw'Loading data file "'+t+'" failed.';n()})),r&&ut()}(n,(function(t){d(t)}),a):d(n)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(t,e,n){e=e||function(){},n=n||function(){};var i=Pt.indexedDB();try{var r=i.open(Pt.DB_NAME(),Pt.DB_VERSION)}catch(uJ){return n(uJ)}r.onupgradeneeded=function(){_("creating db"),r.result.createObjectStore(Pt.DB_STORE_NAME)},r.onsuccess=function(){var i=r.result.transaction([Pt.DB_STORE_NAME],"readwrite"),s=i.objectStore(Pt.DB_STORE_NAME),o=0,a=0,l=t.length;function h(){0==a?e():n()}t.forEach((function(t){var e=s.put(Pt.analyzePath(t).object.contents,t);e.onsuccess=function(){++o+a==l&&h()},e.onerror=function(){a++,o+a==l&&h()}})),i.onerror=n},r.onerror=n},loadFilesFromDB:function(t,e,n){e=e||function(){},n=n||function(){};var i=Pt.indexedDB();try{var r=i.open(Pt.DB_NAME(),Pt.DB_VERSION)}catch(uJ){return n(uJ)}r.onupgradeneeded=n,r.onsuccess=function(){var i=r.result;try{var s=i.transaction([Pt.DB_STORE_NAME],"readonly")}catch(uJ){return void n(uJ)}var o=s.objectStore(Pt.DB_STORE_NAME),a=0,l=0,h=t.length;function c(){0==l?e():n()}t.forEach((function(t){var e=o.get(t);e.onsuccess=function(){Pt.analyzePath(t).exists&&Pt.unlink(t),Pt.createDataFile(Dt.dirname(t),Dt.basename(t),e.result,!0,!0,!0),++a+l==h&&c()},e.onerror=function(){l++,a+l==h&&c()}})),s.onerror=n},r.onerror=n}},Ft={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(t,e,n){if("/"===e[0])return e;var i;if(-100===t)i=Pt.cwd();else{var r=Pt.getStream(t);if(!r)throw new Pt.ErrnoError(8);i=r.path}if(0==e.length){if(!n)throw new Pt.ErrnoError(44);return i}return Dt.join2(i,e)},doStat:function(t,e,n){try{var i=t(e)}catch(uJ){if(uJ&&uJ.node&&Dt.normalize(e)!==Dt.normalize(Pt.getPath(uJ.node)))return-54;throw uJ}return z[n>>>2]=i.dev,z[n+4>>>2]=0,z[n+8>>>2]=i.ino,z[n+12>>>2]=i.mode,z[n+16>>>2]=i.nlink,z[n+20>>>2]=i.uid,z[n+24>>>2]=i.gid,z[n+28>>>2]=i.rdev,z[n+32>>>2]=0,yt=[i.size>>>0,(gt=i.size,+Math.abs(gt)>=1?gt>0?(0|Math.min(+Math.floor(gt/4294967296),4294967295))>>>0:~~+Math.ceil((gt-+(~~gt>>>0))/4294967296)>>>0:0)],z[n+40>>>2]=yt[0],z[n+44>>>2]=yt[1],z[n+48>>>2]=4096,z[n+52>>>2]=i.blocks,z[n+56>>>2]=i.atime.getTime()/1e3|0,z[n+60>>>2]=0,z[n+64>>>2]=i.mtime.getTime()/1e3|0,z[n+68>>>2]=0,z[n+72>>>2]=i.ctime.getTime()/1e3|0,z[n+76>>>2]=0,yt=[i.ino>>>0,(gt=i.ino,+Math.abs(gt)>=1?gt>0?(0|Math.min(+Math.floor(gt/4294967296),4294967295))>>>0:~~+Math.ceil((gt-+(~~gt>>>0))/4294967296)>>>0:0)],z[n+80>>>2]=yt[0],z[n+84>>>2]=yt[1],0},doMsync:function(t,e,n,i,r){var s=k.slice(t,t+n);Pt.msync(e,s,r,n,i)},doMkdir:function(t,e){return"/"===(t=Dt.normalize(t))[t.length-1]&&(t=t.substr(0,t.length-1)),Pt.mkdir(t,e,0),0},doMknod:function(t,e,n){switch(61440&e){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return Pt.mknod(t,e,n),0},doReadlink:function(t,e,n){if(n<=0)return-28;var i=Pt.readlink(t),r=Math.min(n,P(i)),s=L[e+r>>>0];return M(i,e,n+1),L[e+r>>>0]=s,r},doAccess:function(t,e){if(-8&e)return-28;var n;if(!(n=Pt.lookupPath(t,{follow:!0}).node))return-44;var i="";return 4&e&&(i+="r"),2&e&&(i+="w"),1&e&&(i+="x"),i&&Pt.nodePermissions(n,i)?-2:0},doDup:function(t,e,n){var i=Pt.getStream(n);return i&&Pt.close(i),Pt.open(t,e,0,n,n).fd},doReadv:function(t,e,n,i){for(var r=0,s=0;s<n;s++){var o=z[e+8*s>>>2],a=z[e+(8*s+4)>>>2],l=Pt.read(t,L,o,a,i);if(l<0)return-1;if(r+=l,l<a)break}return r},doWritev:function(t,e,n,i){for(var r=0,s=0;s<n;s++){var o=z[e+8*s>>>2],a=z[e+(8*s+4)>>>2],l=Pt.write(t,L,o,a,i);if(l<0)return-1;r+=l}return r},varargs:void 0,get:function(){return Ft.varargs+=4,z[Ft.varargs-4>>>2]},getStr:function(t){return O(t)},getStreamFromFD:function(t){var e=Pt.getStream(t);if(!e)throw new Pt.ErrnoError(8);return e},get64:function(t,e){return t}};var Lt={};function kt(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function Ut(t){return this.fromWireType(G[t>>>2])}var Bt={},zt={},Gt={},Ht=48,jt=57;function Vt(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=Ht&&e<=jt?"_"+t:t}function Wt(t,e){return t=Vt(t),new Function("body","return function "+t+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(e)}function Zt(t,e){var n=Wt(e,(function(t){this.name=e,this.message=t;var n=new Error(t).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var Yt=void 0;function qt(t){throw new Yt(t)}function Xt(t,e,n){function i(e){var i=n(e);i.length!==t.length&&qt("Mismatched type converter count");for(var r=0;r<t.length;++r)ne(t[r],i[r])}t.forEach((function(t){Gt[t]=e}));var r=new Array(e.length),s=[],o=0;e.forEach((function(t,e){zt.hasOwnProperty(t)?r[e]=zt[t]:(s.push(t),Bt.hasOwnProperty(t)||(Bt[t]=[]),Bt[t].push((function(){r[e]=zt[t],++o===s.length&&i(r)})))})),0===s.length&&i(r)}var Kt={};function Qt(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}var Jt=void 0;function $t(t){for(var e="",n=t;k[n>>>0];)e+=Jt[k[n++>>>0]];return e}var te=void 0;function ee(t){throw new te(t)}function ne(t,e,n){if(n=n||{},!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var i=e.name;if(t||ee('type "'+i+'" must have a positive integer typeid pointer'),zt.hasOwnProperty(t)){if(n.ignoreDuplicateRegistrations)return;ee("Cannot register type '"+i+"' twice")}if(zt[t]=e,delete Gt[t],Bt.hasOwnProperty(t)){var r=Bt[t];delete Bt[t],r.forEach((function(t){t()}))}}function ie(t){if(!(this instanceof ye))return!1;if(!(t instanceof ye))return!1;for(var e=this.$$.ptrType.registeredClass,n=this.$$.ptr,i=t.$$.ptrType.registeredClass,r=t.$$.ptr;e.baseClass;)n=e.upcast(n),e=e.baseClass;for(;i.baseClass;)r=i.upcast(r),i=i.baseClass;return e===i&&n===r}function re(t){return{count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}}function se(t){ee(t.$$.ptrType.registeredClass.name+" instance already deleted")}var oe=!1;function ae(t){}function le(t){t.count.value-=1,0===t.count.value&&function(t){t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)}(t)}function he(t){return"undefined"===typeof FinalizationGroup?(he=function(t){return t},t):(oe=new FinalizationGroup((function(t){for(var e=t.next();!e.done;e=t.next()){var n=e.value;n.ptr?le(n):console.warn("object already deleted: "+n.ptr)}})),ae=function(t){oe.unregister(t.$$)},(he=function(t){return oe.register(t,t.$$,t.$$),t})(t))}function ce(){if(this.$$.ptr||se(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=he(Object.create(Object.getPrototypeOf(this),{$$:{value:re(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function ue(){this.$$.ptr||se(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ee("Object already scheduled for deletion"),ae(this),le(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function pe(){return!this.$$.ptr}var de=void 0,fe=[];function me(){for(;fe.length;){var t=fe.pop();t.$$.deleteScheduled=!1,t.delete()}}function ge(){return this.$$.ptr||se(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ee("Object already scheduled for deletion"),fe.push(this),1===fe.length&&de&&de(me),this.$$.deleteScheduled=!0,this}function ye(){}var ve={};function _e(t,e,n){if(void 0===t[e].overloadTable){var i=t[e];t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||ee("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[e].overloadTable+")!"),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[i.argCount]=i}}function Te(t,e,n){r.hasOwnProperty(t)?((void 0===n||void 0!==r[t].overloadTable&&void 0!==r[t].overloadTable[n])&&ee("Cannot register public name '"+t+"' twice"),_e(r,t,t),r.hasOwnProperty(n)&&ee("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),r[t].overloadTable[n]=e):(r[t]=e,void 0!==n&&(r[t].numArguments=n))}function Ee(t,e,n,i,r,s,o,a){this.name=t,this.constructor=e,this.instancePrototype=n,this.rawDestructor=i,this.baseClass=r,this.getActualType=s,this.upcast=o,this.downcast=a,this.pureVirtualFunctions=[]}function xe(t,e,n){for(;e!==n;)e.upcast||ee("Expected null or instance of "+n.name+", got an instance of "+e.name),t=e.upcast(t),e=e.baseClass;return t}function be(t,e){if(null===e)return this.isReference&&ee("null is not a valid "+this.name),0;e.$$||ee('Cannot pass "'+tn(e)+'" as a '+this.name),e.$$.ptr||ee("Cannot pass deleted object as a pointer of type "+this.name);var n=e.$$.ptrType.registeredClass;return xe(e.$$.ptr,n,this.registeredClass)}function Ie(t,e){var n;if(null===e)return this.isReference&&ee("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==t&&t.push(this.rawDestructor,n),n):0;e.$$||ee('Cannot pass "'+tn(e)+'" as a '+this.name),e.$$.ptr||ee("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&e.$$.ptrType.isConst&&ee("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);var i=e.$$.ptrType.registeredClass;if(n=xe(e.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(void 0===e.$$.smartPtr&&ee("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?n=e.$$.smartPtr:ee("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)n=e.$$.smartPtr;else{var r=e.clone();n=this.rawShare(n,Qe((function(){r.delete()}))),null!==t&&t.push(this.rawDestructor,n)}break;default:ee("Unsupporting sharing policy")}return n}function we(t,e){if(null===e)return this.isReference&&ee("null is not a valid "+this.name),0;e.$$||ee('Cannot pass "'+tn(e)+'" as a '+this.name),e.$$.ptr||ee("Cannot pass deleted object as a pointer of type "+this.name),e.$$.ptrType.isConst&&ee("Cannot convert argument of type "+e.$$.ptrType.name+" to parameter type "+this.name);var n=e.$$.ptrType.registeredClass;return xe(e.$$.ptr,n,this.registeredClass)}function Se(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t}function Re(t){this.rawDestructor&&this.rawDestructor(t)}function Ce(t){null!==t&&t.delete()}function Ae(t,e,n){if(e===n)return t;if(void 0===n.baseClass)return null;var i=Ae(t,e,n.baseClass);return null===i?null:n.downcast(i)}function De(){return Object.keys(Me).length}function Oe(){var t=[];for(var e in Me)Me.hasOwnProperty(e)&&t.push(Me[e]);return t}function Ne(t){de=t,fe.length&&de&&de(me)}var Me={};function Pe(t,e){return e=function(t,e){for(void 0===e&&ee("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e}(t,e),Me[e]}function Fe(t,e){return e.ptrType&&e.ptr||qt("makeClassHandle requires ptr and ptrType"),!!e.smartPtrType!==!!e.smartPtr&&qt("Both smartPtrType and smartPtr must be specified"),e.count={value:1},he(Object.create(t,{$$:{value:e}}))}function Le(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var n=Pe(this.registeredClass,e);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=e,n.$$.smartPtr=t,n.clone();var i=n.clone();return this.destructor(t),i}function r(){return this.isSmartPointer?Fe(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):Fe(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var s,o=this.registeredClass.getActualType(e),a=ve[o];if(!a)return r.call(this);s=this.isConst?a.constPointerType:a.pointerType;var l=Ae(e,this.registeredClass,s.registeredClass);return null===l?r.call(this):this.isSmartPointer?Fe(s.registeredClass.instancePrototype,{ptrType:s,ptr:l,smartPtrType:this,smartPtr:t}):Fe(s.registeredClass.instancePrototype,{ptrType:s,ptr:l})}function ke(t,e,n,i,r,s,o,a,l,h,c){this.name=t,this.registeredClass=e,this.isReference=n,this.isConst=i,this.isSmartPointer=r,this.pointeeType=s,this.sharingPolicy=o,this.rawGetPointee=a,this.rawConstructor=l,this.rawShare=h,this.rawDestructor=c,r||void 0!==e.baseClass?this.toWireType=Ie:i?(this.toWireType=be,this.destructorFunction=null):(this.toWireType=we,this.destructorFunction=null)}function Ue(t,e,n){r.hasOwnProperty(t)||qt("Replacing nonexistant public symbol"),void 0!==r[t].overloadTable&&void 0!==n?r[t].overloadTable[n]=e:(r[t]=e,r[t].argCount=n)}function Be(t,e,n){return t.includes("j")?function(t,e,n){var i=r["dynCall_"+t];return n&&n.length?i.apply(null,[e].concat(n)):i.call(null,e)}(t,e,n):$.get(e).apply(null,n)}function ze(t,e){var n=(t=$t(t)).includes("j")?function(t,e){var n=[];return function(){n.length=arguments.length;for(var i=0;i<arguments.length;i++)n[i]=arguments[i];return Be(t,e,n)}}(t,e):$.get(e);return"function"!==typeof n&&ee("unknown function pointer with signature "+t+": "+e),n}var Ge=void 0;function He(t){var e=Rn(t),n=$t(e);return Sn(e),n}function je(t,e){var n=[],i={};throw e.forEach((function t(e){i[e]||zt[e]||(Gt[e]?Gt[e].forEach(t):(n.push(e),i[e]=!0))})),new Ge(t+": "+n.map(He).join([", "]))}function Ve(t,e){for(var n=[],i=0;i<t;i++)n.push(z[(e>>2)+i>>>0]);return n}function We(t,e,n,i,r){var s=e.length;s<2&&ee("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==e[1]&&null!==n,a=!1,l=1;l<e.length;++l)if(null!==e[l]&&void 0===e[l].destructorFunction){a=!0;break}var h="void"!==e[0].name,c="",u="";for(l=0;l<s-2;++l)c+=(0!==l?", ":"")+"arg"+l,u+=(0!==l?", ":"")+"arg"+l+"Wired";var p="return function "+Vt(t)+"("+c+") {\nif (arguments.length !== "+(s-2)+") {\nthrowBindingError('function "+t+" called with ' + arguments.length + ' arguments, expected "+(s-2)+" args!');\n}\n";a&&(p+="var destructors = [];\n");var d=a?"destructors":"null",f=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[ee,i,r,kt,e[0],e[1]];o&&(p+="var thisWired = classParam.toWireType("+d+", this);\n");for(l=0;l<s-2;++l)p+="var arg"+l+"Wired = argType"+l+".toWireType("+d+", arg"+l+"); // "+e[l+2].name+"\n",f.push("argType"+l),m.push(e[l+2]);if(o&&(u="thisWired"+(u.length>0?", ":"")+u),p+=(h?"var rv = ":"")+"invoker(fn"+(u.length>0?", ":"")+u+");\n",a)p+="runDestructors(destructors);\n";else for(l=o?1:2;l<e.length;++l){var g=1===l?"thisWired":"arg"+(l-2)+"Wired";null!==e[l].destructorFunction&&(p+=g+"_dtor("+g+"); // "+e[l].name+"\n",f.push(g+"_dtor"),m.push(e[l].destructorFunction))}h&&(p+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),p+="}\n",f.push(p);var y=function(t,e){if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var n=Wt(t.name||"unknownFunctionName",(function(){}));n.prototype=t.prototype;var i=new n,r=t.apply(i,e);return r instanceof Object?r:i}(Function,f).apply(null,m);return y}var Ze=[],Ye=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function qe(t){t>4&&0===--Ye[t].refcount&&(Ye[t]=void 0,Ze.push(t))}function Xe(){for(var t=0,e=5;e<Ye.length;++e)void 0!==Ye[e]&&++t;return t}function Ke(){for(var t=5;t<Ye.length;++t)if(void 0!==Ye[t])return Ye[t];return null}function Qe(t){switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=Ze.length?Ze.pop():Ye.length;return Ye[e]={refcount:1,value:t},e}}function Je(t,e,n){switch(e){case 0:return function(t){var e=n?L:k;return this.fromWireType(e[t>>>0])};case 1:return function(t){var e=n?U:B;return this.fromWireType(e[t>>>1])};case 2:return function(t){var e=n?z:G;return this.fromWireType(e[t>>>2])};default:throw new TypeError("Unknown integer type: "+t)}}function $e(t,e){var n=zt[t];return void 0===n&&ee(e+" has unknown type "+He(t)),n}function tn(t){if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t}function en(t,e){switch(e){case 2:return function(t){return this.fromWireType(H[t>>>2])};case 3:return function(t){return this.fromWireType(j[t>>>3])};default:throw new TypeError("Unknown float type: "+t)}}function nn(t,e,n){switch(e){case 0:return n?function(t){return L[t>>>0]}:function(t){return k[t>>>0]};case 1:return n?function(t){return U[t>>>1]}:function(t){return B[t>>>1]};case 2:return n?function(t){return z[t>>>2]}:function(t){return G[t>>>2]};default:throw new TypeError("Unknown integer type: "+t)}}function rn(t){return t||ee("Cannot use deleted val. handle = "+t),Ye[t].value}var sn,on={};function an(t){var e=on[t];return void 0===e?$t(t):e}function ln(){return"object"===typeof globalThis?globalThis:Function("return this")()}sn=y?function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:function(){return performance.now()};var hn=!0;function cn(t){try{return w.grow(t-F.byteLength+65535>>>16),J(w.buffer),1}catch(uJ){}}var un={};function pn(){if(!pn.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"===typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"};for(var e in un)void 0===un[e]?delete t[e]:t[e]=un[e];var n=[];for(var e in t)n.push(e+"="+t[e]);pn.strings=n}return pn.strings}function dn(t){return t%4===0&&(t%100!==0||t%400===0)}function fn(t,e){for(var n=0,i=0;i<=e;n+=t[i++]);return n}var mn=[31,29,31,30,31,30,31,31,30,31,30,31],gn=[31,28,31,30,31,30,31,31,30,31,30,31];function yn(t,e){for(var n=new Date(t.getTime());e>0;){var i=dn(n.getFullYear()),r=n.getMonth(),s=(i?mn:gn)[r];if(!(e>s-n.getDate()))return n.setDate(n.getDate()+e),n;e-=s-n.getDate()+1,n.setDate(1),r<11?n.setMonth(r+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}function vn(t,e,n,i){var r=z[i+40>>>2],s={tm_sec:z[i>>>2],tm_min:z[i+4>>>2],tm_hour:z[i+8>>>2],tm_mday:z[i+12>>>2],tm_mon:z[i+16>>>2],tm_year:z[i+20>>>2],tm_wday:z[i+24>>>2],tm_yday:z[i+28>>>2],tm_isdst:z[i+32>>>2],tm_gmtoff:z[i+36>>>2],tm_zone:r?O(r):""},o=O(n),a={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var l in a)o=o.replace(new RegExp(l,"g"),a[l]);var h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"];function u(t,e,n){for(var i="number"===typeof t?t.toString():t||"";i.length<e;)i=n[0]+i;return i}function p(t,e){return u(t,e,"0")}function d(t,e){function n(t){return t<0?-1:t>0?1:0}var i;return 0===(i=n(t.getFullYear()-e.getFullYear()))&&0===(i=n(t.getMonth()-e.getMonth()))&&(i=n(t.getDate()-e.getDate())),i}function f(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function m(t){var e=yn(new Date(t.tm_year+1900,0,1),t.tm_yday),n=new Date(e.getFullYear(),0,4),i=new Date(e.getFullYear()+1,0,4),r=f(n),s=f(i);return d(r,e)<=0?d(s,e)<=0?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var g={"%a":function(t){return h[t.tm_wday].substring(0,3)},"%A":function(t){return h[t.tm_wday]},"%b":function(t){return c[t.tm_mon].substring(0,3)},"%B":function(t){return c[t.tm_mon]},"%C":function(t){return p((t.tm_year+1900)/100|0,2)},"%d":function(t){return p(t.tm_mday,2)},"%e":function(t){return u(t.tm_mday,2," ")},"%g":function(t){return m(t).toString().substring(2)},"%G":function(t){return m(t)},"%H":function(t){return p(t.tm_hour,2)},"%I":function(t){var e=t.tm_hour;return 0==e?e=12:e>12&&(e-=12),p(e,2)},"%j":function(t){return p(t.tm_mday+fn(dn(t.tm_year+1900)?mn:gn,t.tm_mon-1),3)},"%m":function(t){return p(t.tm_mon+1,2)},"%M":function(t){return p(t.tm_min,2)},"%n":function(){return"\n"},"%p":function(t){return t.tm_hour>=0&&t.tm_hour<12?"AM":"PM"},"%S":function(t){return p(t.tm_sec,2)},"%t":function(){return"\t"},"%u":function(t){return t.tm_wday||7},"%U":function(t){var e=new Date(t.tm_year+1900,0,1),n=0===e.getDay()?e:yn(e,7-e.getDay()),i=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(d(n,i)<0){var r=fn(dn(i.getFullYear())?mn:gn,i.getMonth()-1)-31,s=31-n.getDate()+r+i.getDate();return p(Math.ceil(s/7),2)}return 0===d(n,e)?"01":"00"},"%V":function(t){var e,n=new Date(t.tm_year+1900,0,4),i=new Date(t.tm_year+1901,0,4),r=f(n),s=f(i),o=yn(new Date(t.tm_year+1900,0,1),t.tm_yday);return d(o,r)<0?"53":d(s,o)<=0?"01":(e=r.getFullYear()<t.tm_year+1900?t.tm_yday+32-r.getDate():t.tm_yday+1-r.getDate(),p(Math.ceil(e/7),2))},"%w":function(t){return t.tm_wday},"%W":function(t){var e=new Date(t.tm_year,0,1),n=1===e.getDay()?e:yn(e,0===e.getDay()?1:7-e.getDay()+1),i=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(d(n,i)<0){var r=fn(dn(i.getFullYear())?mn:gn,i.getMonth()-1)-31,s=31-n.getDate()+r+i.getDate();return p(Math.ceil(s/7),2)}return 0===d(n,e)?"01":"00"},"%y":function(t){return(t.tm_year+1900).toString().substring(2)},"%Y":function(t){return t.tm_year+1900},"%z":function(t){var e=t.tm_gmtoff,n=e>=0;return e=(e=Math.abs(e)/60)/60*100+e%60,(n?"+":"-")+String("0000"+e).slice(-4)},"%Z":function(t){return t.tm_zone},"%%":function(){return"%"}};for(var l in g)o.includes(l)&&(o=o.replace(new RegExp(l,"g"),g[l](s)));var y,v,_=xn(o,!1);return _.length>e?0:(y=_,v=t,L.set(y,v>>>0),_.length-1)}var _n=function(t,e,n,i){t||(t=this),this.parent=t,this.mount=t.mount,this.mounted=null,this.id=Pt.nextInode++,this.name=e,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=i},Tn=365,En=146;function xn(t,e,n){var i=n>0?n:P(t)+1,r=new Array(i),s=N(t,r,0,r.length);return e&&(r.length=s),r}Object.defineProperties(_n.prototype,{read:{get:function(){return(this.mode&Tn)===Tn},set:function(t){t?this.mode|=Tn:this.mode&=-366}},write:{get:function(){return(this.mode&En)===En},set:function(t){t?this.mode|=En:this.mode&=-147}},isFolder:{get:function(){return Pt.isDir(this.mode)}},isDevice:{get:function(){return Pt.isChrdev(this.mode)}}}),Pt.FSNode=_n,Pt.staticInit(),r.FS_createPath=Pt.createPath,r.FS_createDataFile=Pt.createDataFile,r.FS_createPreloadedFile=Pt.createPreloadedFile,r.FS_createLazyFile=Pt.createLazyFile,r.FS_createDevice=Pt.createDevice,r.FS_unlink=Pt.unlink,Yt=r.InternalError=Zt(Error,"InternalError"),function(){for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);Jt=t}(),te=r.BindingError=Zt(Error,"BindingError"),ye.prototype.isAliasOf=ie,ye.prototype.clone=ce,ye.prototype.delete=ue,ye.prototype.isDeleted=pe,ye.prototype.deleteLater=ge,ke.prototype.getPointee=Se,ke.prototype.destructor=Re,ke.prototype.argPackAdvance=8,ke.prototype.readValueFromPointer=Ut,ke.prototype.deleteObject=Ce,ke.prototype.fromWireType=Le,r.getInheritedInstanceCount=De,r.getLiveInheritedInstances=Oe,r.flushPendingDeletes=me,r.setDelayFunction=Ne,Ge=r.UnboundTypeError=Zt(Error,"UnboundTypeError"),r.count_emval_handles=Xe,r.get_first_emval=Ke;var bn,In={ga:function(t,e,n,i){dt("Assertion failed: "+O(t)+", at: "+[e?O(e):"unknown filename",n,i?O(i):"unknown function"])},m:function(t){return wn(t+16)+16},u:function(t){var e=new It(t),n=e.get_exception_info();return n.get_caught()||(n.set_caught(!0),St--),n.set_rethrown(!1),wt.push(e),function(t){t.add_ref()}(n),e.get_exception_ptr()},x:function(){On(0);var t=wt.pop();!function(t){if(t.release_ref()&&!t.get_rethrown()){var e=t.get_destructor();e&&$.get(e)(t.excPtr),Ct(t.excPtr)}}(t.get_exception_info()),t.free(),Rt=0},b:function(){var t=Rt;if(!t)return b(0),0;var e=new bt(t).get_type(),n=new It;if(n.set_base_ptr(t),n.set_adjusted_ptr(t),!e)return b(0),0|n.ptr;for(var i=Array.prototype.slice.call(arguments),r=0;r<i.length;r++){var s=i[r];if(0===s||s===e)break;if(Nn(s,e,n.get_adjusted_ptr_addr()))return b(s),0|n.ptr}return b(e),0|n.ptr},l:function(){var t=Rt;if(!t)return b(0),0;var e=new bt(t).get_type(),n=new It;if(n.set_base_ptr(t),n.set_adjusted_ptr(t),!e)return b(0),0|n.ptr;for(var i=Array.prototype.slice.call(arguments),r=0;r<i.length;r++){var s=i[r];if(0===s||s===e)break;if(Nn(s,e,n.get_adjusted_ptr_addr()))return b(s),0|n.ptr}return b(e),0|n.ptr},A:Ct,$:function(){var t=wt.pop();t||dt("no exception to throw");var e=t.get_exception_info(),n=t.get_base_ptr();throw e.get_rethrown()?t.free():(wt.push(t),e.set_rethrown(!0),e.set_caught(!1),St++),Rt=n,n},n:function(t,e,n){throw new bt(t).init(e,n),Rt=t,St++,t},pa:function(){return St},h:function(t){var e=new It(t),n=e.get_base_ptr();throw Rt||(Rt=n),e.free(),n},ba:function(t,e,n){Ft.varargs=n;try{var i=Ft.getStreamFromFD(t);switch(e){case 0:return(r=Ft.get())<0?-28:Pt.open(i.path,i.flags,0,r).fd;case 1:case 2:case 13:case 14:return 0;case 3:return i.flags;case 4:var r=Ft.get();return i.flags|=r,0;case 12:r=Ft.get();return U[r+0>>>1]=2,0;case 16:case 8:default:return-28;case 9:return At(28),-1}}catch(uJ){return"undefined"!==typeof Pt&&uJ instanceof Pt.ErrnoError||dt(uJ),-uJ.errno}},qa:function(t,e,n){Ft.varargs=n;try{var i=Ft.getStreamFromFD(t);switch(e){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return i.tty?0:-59;case 21519:if(!i.tty)return-59;var r=Ft.get();return z[r>>>2]=0,0;case 21520:return i.tty?-28:-59;case 21531:r=Ft.get();return Pt.ioctl(i,e,r);default:dt("bad ioctl syscall "+e)}}catch(uJ){return"undefined"!==typeof Pt&&uJ instanceof Pt.ErrnoError||dt(uJ),-uJ.errno}},ra:function(t,e,n){Ft.varargs=n;try{var i=Ft.getStr(t),r=n?Ft.get():0;return Pt.open(i,e,r).fd}catch(uJ){return"undefined"!==typeof Pt&&uJ instanceof Pt.ErrnoError||dt(uJ),-uJ.errno}},Ca:function(t){var e=Lt[t];delete Lt[t];var n=e.elements,i=n.length,r=n.map((function(t){return t.getterReturnType})).concat(n.map((function(t){return t.setterArgumentType}))),s=e.rawConstructor,o=e.rawDestructor;Xt([t],r,(function(t){return n.forEach((function(e,n){var r=t[n],s=e.getter,o=e.getterContext,a=t[n+i],l=e.setter,h=e.setterContext;e.read=function(t){return r.fromWireType(s(o,t))},e.write=function(t,e){var n=[];l(h,t,a.toWireType(n,e)),kt(n)}})),[{name:e.name,fromWireType:function(t){for(var e=new Array(i),r=0;r<i;++r)e[r]=n[r].read(t);return o(t),e},toWireType:function(t,r){if(i!==r.length)throw new TypeError("Incorrect number of tuple elements for "+e.name+": expected="+i+", actual="+r.length);for(var a=s(),l=0;l<i;++l)n[l].write(a,r[l]);return null!==t&&t.push(o,a),a},argPackAdvance:8,readValueFromPointer:Ut,destructorFunction:o}]}))},Fa:function(t){var e=Kt[t];delete Kt[t];var n=e.rawConstructor,i=e.rawDestructor,r=e.fields;Xt([t],r.map((function(t){return t.getterReturnType})).concat(r.map((function(t){return t.setterArgumentType}))),(function(t){var s={};return r.forEach((function(e,n){var i=e.fieldName,o=t[n],a=e.getter,l=e.getterContext,h=t[n+r.length],c=e.setter,u=e.setterContext;s[i]={read:function(t){return o.fromWireType(a(l,t))},write:function(t,e){var n=[];c(u,t,h.toWireType(n,e)),kt(n)}}})),[{name:e.name,fromWireType:function(t){var e={};for(var n in s)e[n]=s[n].read(t);return i(t),e},toWireType:function(t,e){for(var r in s)if(!(r in e))throw new TypeError('Missing field:  "'+r+'"');var o=n();for(r in s)s[r].write(o,e[r]);return null!==t&&t.push(i,o),o},argPackAdvance:8,readValueFromPointer:Ut,destructorFunction:i}]}))},ka:function(t,e,n,i,r){},ya:function(t,e,n,i,r){var s=Qt(n);ne(t,{name:e=$t(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?i:r},argPackAdvance:8,readValueFromPointer:function(t){var i;if(1===n)i=L;else if(2===n)i=U;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+e);i=z}return this.fromWireType(i[t>>>s])},destructorFunction:null})},K:function(t,e,n,i,r,s,o,a,l,h,c,u,p){c=$t(c),s=ze(r,s),a&&(a=ze(o,a)),h&&(h=ze(l,h)),p=ze(u,p);var d=Vt(c);Te(d,(function(){je("Cannot construct "+c+" due to unbound types",[i])})),Xt([t,e,n],i?[i]:[],(function(e){var n,r;e=e[0],r=i?(n=e.registeredClass).instancePrototype:ye.prototype;var o=Wt(d,(function(){if(Object.getPrototypeOf(this)!==l)throw new te("Use 'new' to construct "+c);if(void 0===u.constructor_body)throw new te(c+" has no accessible constructor");var t=u.constructor_body[arguments.length];if(void 0===t)throw new te("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(u.constructor_body).toString()+") parameters instead!");return t.apply(this,arguments)})),l=Object.create(r,{constructor:{value:o}});o.prototype=l;var u=new Ee(c,o,l,p,n,s,a,h),f=new ke(c,u,!0,!1,!1),m=new ke(c+"*",u,!1,!1,!1),g=new ke(c+" const*",u,!1,!0,!1);return ve[t]={pointerType:m,constPointerType:g},Ue(d,o),[f,m,g]}))},J:function(t,e,n,i,r,s){C(e>0);var o=Ve(e,n);r=ze(i,r);var a=[s],l=[];Xt([],[t],(function(t){var n="constructor "+(t=t[0]).name;if(void 0===t.registeredClass.constructor_body&&(t.registeredClass.constructor_body=[]),void 0!==t.registeredClass.constructor_body[e-1])throw new te("Cannot register multiple constructors with identical number of parameters ("+(e-1)+") for class '"+t.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return t.registeredClass.constructor_body[e-1]=function(){je("Cannot construct "+t.name+" due to unbound types",o)},Xt([],o,(function(i){return t.registeredClass.constructor_body[e-1]=function(){arguments.length!==e-1&&ee(n+" called with "+arguments.length+" arguments, expected "+(e-1)),l.length=0,a.length=e;for(var t=1;t<e;++t)a[t]=i[t].toWireType(l,arguments[t-1]);var s=r.apply(null,a);return kt(l),i[0].fromWireType(s)},[]})),[]}))},p:function(t,e,n,i,r,s,o,a){var l=Ve(n,i);e=$t(e),s=ze(r,s),Xt([],[t],(function(t){var i=(t=t[0]).name+"."+e;function r(){je("Cannot call "+i+" due to unbound types",l)}e.startsWith("@@")&&(e=Symbol[e.substring(2)]),a&&t.registeredClass.pureVirtualFunctions.push(e);var h=t.registeredClass.instancePrototype,c=h[e];return void 0===c||void 0===c.overloadTable&&c.className!==t.name&&c.argCount===n-2?(r.argCount=n-2,r.className=t.name,h[e]=r):(_e(h,e,i),h[e].overloadTable[n-2]=r),Xt([],l,(function(r){var a=We(i,r,t,s,o);return void 0===h[e].overloadTable?(a.argCount=n-2,h[e]=a):h[e].overloadTable[n-2]=a,[]})),[]}))},xa:function(t,e){ne(t,{name:e=$t(e),fromWireType:function(t){var e=Ye[t].value;return qe(t),e},toWireType:function(t,e){return Qe(e)},argPackAdvance:8,readValueFromPointer:Ut,destructorFunction:null})},Aa:function(t,e,n,i){var r=Qt(n);function s(){}e=$t(e),s.values={},ne(t,{name:e,constructor:s,fromWireType:function(t){return this.constructor.values[t]},toWireType:function(t,e){return e.value},argPackAdvance:8,readValueFromPointer:Je(e,r,i),destructorFunction:null}),Te(e,s)},Q:function(t,e,n){var i=$e(t,"enum");e=$t(e);var r=i.constructor,s=Object.create(i.constructor.prototype,{value:{value:n},constructor:{value:Wt(i.name+"_"+e,(function(){}))}});r.values[n]=s,r[e]=s},ea:function(t,e,n){var i=Qt(n);ne(t,{name:e=$t(e),fromWireType:function(t){return t},toWireType:function(t,e){if("number"!==typeof e&&"boolean"!==typeof e)throw new TypeError('Cannot convert "'+tn(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:en(e,i),destructorFunction:null})},s:function(t,e,n,i,r,s){var o=Ve(e,n);t=$t(t),r=ze(i,r),Te(t,(function(){je("Cannot call "+t+" due to unbound types",o)}),e-1),Xt([],o,(function(n){var i=[n[0],null].concat(n.slice(1));return Ue(t,We(t,i,null,r,s),e-1),[]}))},z:function(t,e,n,i,r){e=$t(e),-1===r&&(r=4294967295);var s=Qt(n),o=function(t){return t};if(0===i){var a=32-8*n;o=function(t){return t<<a>>>a}}var l=e.includes("unsigned");ne(t,{name:e,fromWireType:o,toWireType:function(t,n){if("number"!==typeof n&&"boolean"!==typeof n)throw new TypeError('Cannot convert "'+tn(n)+'" to '+this.name);if(n<i||n>r)throw new TypeError('Passing a number "'+tn(n)+'" from JS side to C/C++ side to an argument of type "'+e+'", which is outside the valid range ['+i+", "+r+"]!");return l?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:nn(e,s,0!==i),destructorFunction:null})},w:function(t,e,n){var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function r(t){var e=G,n=e[(t>>=2)>>>0],r=e[t+1>>>0];return new i(F,r,n)}ne(t,{name:n=$t(n),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{ignoreDuplicateRegistrations:!0})},fa:function(t,e){var n="std::string"===(e=$t(e));ne(t,{name:e,fromWireType:function(t){var e,i=G[t>>>2];if(n)for(var r=t+4,s=0;s<=i;++s){var o=t+4+s;if(s==i||0==k[o>>>0]){var a=O(r,o-r);void 0===e?e=a:(e+=String.fromCharCode(0),e+=a),r=o+1}}else{var l=new Array(i);for(s=0;s<i;++s)l[s]=String.fromCharCode(k[t+4+s>>>0]);e=l.join("")}return Sn(t),e},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var i="string"===typeof e;i||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||ee("Cannot pass non-string to std::string");var r=(n&&i?function(){return P(e)}:function(){return e.length})(),s=wn(4+r+1);if(G[(s>>>=0)>>>2]=r,n&&i)M(e,s+4,r+1);else if(i)for(var o=0;o<r;++o){var a=e.charCodeAt(o);a>255&&(Sn(s),ee("String has UTF-16 code units that do not fit in 8 bits")),k[s+4+o>>>0]=a}else for(o=0;o<r;++o)k[s+4+o>>>0]=e[o];return null!==t&&t.push(Sn,s),s},argPackAdvance:8,readValueFromPointer:Ut,destructorFunction:function(t){Sn(t)}})},U:function(t,e,n){var i,r,s,o,a;n=$t(n),2===e?(i=W,r=Z,o=Y,s=function(){return B},a=1):4===e&&(i=q,r=X,o=K,s=function(){return G},a=2),ne(t,{name:n,fromWireType:function(t){for(var n,r=G[t>>>2],o=s(),l=t+4,h=0;h<=r;++h){var c=t+4+h*e;if(h==r||0==o[c>>>a]){var u=i(l,c-l);void 0===n?n=u:(n+=String.fromCharCode(0),n+=u),l=c+e}}return Sn(t),n},toWireType:function(t,i){"string"!==typeof i&&ee("Cannot pass non-string to C++ string type "+n);var s=o(i),l=wn(4+s+e);return G[(l>>>=0)>>>2]=s>>a,r(i,l+4,s+e),null!==t&&t.push(Sn,l),l},argPackAdvance:8,readValueFromPointer:Ut,destructorFunction:function(t){Sn(t)}})},Da:function(t,e,n,i,r,s){Lt[t]={name:$t(e),rawConstructor:ze(n,i),rawDestructor:ze(r,s),elements:[]}},Ba:function(t,e,n,i,r,s,o,a,l){Lt[t].elements.push({getterReturnType:e,getter:ze(n,i),getterContext:r,setterArgumentType:s,setter:ze(o,a),setterContext:l})},I:function(t,e,n,i,r,s){Kt[t]={name:$t(e),rawConstructor:ze(n,i),rawDestructor:ze(r,s),fields:[]}},Ea:function(t,e,n,i,r,s,o,a,l,h){Kt[t].fields.push({fieldName:$t(e),getterReturnType:n,getter:ze(i,r),getterContext:s,setterArgumentType:o,setter:ze(a,l),setterContext:h})},za:function(t,e){ne(t,{isVoid:!0,name:e=$t(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(t,e){}})},R:function(t,e,n){t=rn(t),e=$e(e,"emval::as");var i=[],r=Qe(i);return z[n>>>2]=r,e.toWireType(i,t)},ha:function(t,e,n,i){t=rn(t);for(var r=function(t,e){for(var n=new Array(t),i=0;i<t;++i)n[i]=$e(z[(e>>2)+i>>>0],"parameter "+i);return n}(e,n),s=new Array(e),o=0;o<e;++o){var a=r[o];s[o]=a.readValueFromPointer(i),i+=a.argPackAdvance}return Qe(t.apply(void 0,s))},na:qe,Ma:function(t){return 0===t?Qe(ln()):(t=an(t),Qe(ln()[t]))},Ia:function(t,e){return Qe((t=rn(t))[e=rn(e)])},_:function(t){t>4&&(Ye[t].refcount+=1)},la:function(t,e){return(t=rn(t))instanceof(e=rn(e))},La:function(t){return"number"===typeof(t=rn(t))},Ka:function(){return Qe([])},V:function(t){return Qe(an(t))},Ja:function(){return Qe({})},Ha:function(t){kt(Ye[t].value),qe(t)},Ga:function(t,e,n){t=rn(t),e=rn(e),n=rn(n),t[e]=n},B:function(t,e){return Qe((t=$e(t,"_emval_take_value")).readValueFromPointer(e))},da:function(){dt()},aa:function(t,e){var n;if(0===t)n=Date.now();else{if(1!==t&&4!==t||!hn)return At(28),-1;n=sn()}return z[e>>>2]=n/1e3|0,z[e+4>>>2]=n%1e3*1e3*1e3|0,0},oa:function(t,e,n){k.copyWithin(t>>>0,e>>>0,e+n>>>0)},T:function(t){var e=k.length,n=4294901760;if((t>>>=0)>n)return!1;for(var i=1;i<=4;i*=2){var r=e*(1+.2/i);if(r=Math.min(r,t+100663296),cn(Math.min(n,Q(Math.max(t,r),65536))))return!0}return!1},ta:function(t,e){try{var n=0;return pn().forEach((function(i,r){var s=e+n;z[t+4*r>>>2]=s,function(t,e,n){for(var i=0;i<t.length;++i)L[e++>>>0]=t.charCodeAt(i);n||(L[e>>>0]=0)}(i,s),n+=i.length+1})),0}catch(uJ){return"undefined"!==typeof Pt&&uJ instanceof Pt.ErrnoError||dt(uJ),uJ.errno}},ua:function(t,e){try{var n=pn();z[t>>>2]=n.length;var i=0;return n.forEach((function(t){i+=t.length+1})),z[e>>>2]=i,0}catch(uJ){return"undefined"!==typeof Pt&&uJ instanceof Pt.ErrnoError||dt(uJ),uJ.errno}},ca:function(t){try{var e=Ft.getStreamFromFD(t);return Pt.close(e),0}catch(uJ){return"undefined"!==typeof Pt&&uJ instanceof Pt.ErrnoError||dt(uJ),uJ.errno}},wa:function(t,e,n,i){try{var r=Ft.getStreamFromFD(t),s=Ft.doReadv(r,e,n);return z[i>>>2]=s,0}catch(uJ){return"undefined"!==typeof Pt&&uJ instanceof Pt.ErrnoError||dt(uJ),uJ.errno}},ja:function(t,e,n,i,r){try{var s=Ft.getStreamFromFD(t),o=4294967296*n+(e>>>0),a=9007199254740992;return o<=-a||o>=a?-61:(Pt.llseek(s,o,i),yt=[s.position>>>0,(gt=s.position,+Math.abs(gt)>=1?gt>0?(0|Math.min(+Math.floor(gt/4294967296),4294967295))>>>0:~~+Math.ceil((gt-+(~~gt>>>0))/4294967296)>>>0:0)],z[r>>>2]=yt[0],z[r+4>>>2]=yt[1],s.getdents&&0===o&&0===i&&(s.getdents=null),0)}catch(uJ){return"undefined"!==typeof Pt&&uJ instanceof Pt.ErrnoError||dt(uJ),uJ.errno}},va:function(t,e,n,i){try{var r=Ft.getStreamFromFD(t),s=Ft.doWritev(r,e,n);return z[i>>>2]=s,0}catch(uJ){return"undefined"!==typeof Pt&&uJ instanceof Pt.ErrnoError||dt(uJ),uJ.errno}},a:function(){return I()},G:function(t,e,n,i){var r=An();try{return $.get(t)(e,n,i)}catch(uJ){if(Dn(r),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},C:function(t){var e=An();try{return $.get(t)()}catch(uJ){if(Dn(e),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},c:function(t,e){var n=An();try{return $.get(t)(e)}catch(uJ){if(Dn(n),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},O:function(t,e,n){var i=An();try{return $.get(t)(e,n)}catch(uJ){if(Dn(i),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},i:function(t,e,n){var i=An();try{return $.get(t)(e,n)}catch(uJ){if(Dn(i),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},j:function(t,e,n,i){var r=An();try{return $.get(t)(e,n,i)}catch(uJ){if(Dn(r),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},P:function(t,e,n,i,r){var s=An();try{return $.get(t)(e,n,i,r)}catch(uJ){if(Dn(s),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},X:function(t,e,n,i,r,s){var o=An();try{return $.get(t)(e,n,i,r,s)}catch(uJ){if(Dn(o),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},E:function(t,e,n,i,r,s){var o=An();try{return $.get(t)(e,n,i,r,s)}catch(uJ){if(Dn(o),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},y:function(t,e,n,i,r,s,o){var a=An();try{return $.get(t)(e,n,i,r,s,o)}catch(uJ){if(Dn(a),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},Y:function(t,e,n,i,r,s,o,a){var l=An();try{return $.get(t)(e,n,i,r,s,o,a)}catch(uJ){if(Dn(l),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},N:function(t,e,n,i,r,s,o,a,l){var h=An();try{return $.get(t)(e,n,i,r,s,o,a,l)}catch(uJ){if(Dn(h),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},M:function(t,e,n,i,r,s,o,a,l,h,c,u){var p=An();try{return $.get(t)(e,n,i,r,s,o,a,l,h,c,u)}catch(uJ){if(Dn(p),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},ia:function(t){var e=An();try{return Pn(t)}catch(uJ){if(Dn(e),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},f:function(t){var e=An();try{$.get(t)()}catch(uJ){if(Dn(e),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},e:function(t,e){var n=An();try{$.get(t)(e)}catch(uJ){if(Dn(n),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},H:function(t,e,n,i,r){var s=An();try{$.get(t)(e,n,i,r)}catch(uJ){if(Dn(s),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},F:function(t,e,n,i,r,s,o){var a=An();try{$.get(t)(e,n,i,r,s,o)}catch(uJ){if(Dn(a),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},g:function(t,e,n){var i=An();try{$.get(t)(e,n)}catch(uJ){if(Dn(i),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},r:function(t,e,n,i,r){var s=An();try{$.get(t)(e,n,i,r)}catch(uJ){if(Dn(s),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},d:function(t,e,n,i){var r=An();try{$.get(t)(e,n,i)}catch(uJ){if(Dn(r),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},k:function(t,e,n,i,r){var s=An();try{$.get(t)(e,n,i,r)}catch(uJ){if(Dn(s),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},Z:function(t,e,n,i,r,s){var o=An();try{$.get(t)(e,n,i,r,s)}catch(uJ){if(Dn(o),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},S:function(t,e,n,i,r,s,o,a){var l=An();try{$.get(t)(e,n,i,r,s,o,a)}catch(uJ){if(Dn(l),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},D:function(t,e,n,i,r,s){var o=An();try{$.get(t)(e,n,i,r,s)}catch(uJ){if(Dn(o),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},v:function(t,e,n,i,r,s,o){var a=An();try{$.get(t)(e,n,i,r,s,o)}catch(uJ){if(Dn(a),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},q:function(t,e,n,i,r,s,o,a){var l=An();try{$.get(t)(e,n,i,r,s,o,a)}catch(uJ){if(Dn(l),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},t:function(t,e,n,i,r,s,o,a,l,h){var c=An();try{$.get(t)(e,n,i,r,s,o,a,l,h)}catch(uJ){if(Dn(c),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},o:function(t,e,n,i,r,s,o,a,l,h,c){var u=An();try{$.get(t)(e,n,i,r,s,o,a,l,h,c)}catch(uJ){if(Dn(u),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},L:function(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){var g=An();try{$.get(t)(e,n,i,r,s,o,a,l,h,c,u,p,d,f,m)}catch(uJ){if(Dn(g),uJ!==uJ+0&&"longjmp"!==uJ)throw uJ;On(1,0)}},ma:function(t){return t},W:function(t){b(t)},sa:function(t,e,n,i){return vn(t,e,n,i)}},wn=(function(){var t={a:In};function e(t,e){var n=t.exports;r.asm=n,J((w=r.asm.Na).buffer),$=r.asm.Ra,function(t){et.unshift(t)}(r.asm.Oa),pt()}function n(t){e(t.instance)}function s(e){return function(){if(!E&&(m||g)){if("function"===typeof fetch&&!Tt(ft))return fetch(ft,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+ft+"'";return t.arrayBuffer()})).catch((function(){return Et(ft)}));if(l)return new Promise((function(t,e){l(ft,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return Et(ft)}))}().then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(t){T("failed to asynchronously prepare wasm: "+t),dt(t)}))}if(ut(),r.instantiateWasm)try{return r.instantiateWasm(t,e)}catch(uJ){return T("Module.instantiateWasm callback failed with error: "+uJ),!1}(E||"function"!==typeof WebAssembly.instantiateStreaming||_t(ft)||Tt(ft)||"function"!==typeof fetch?s(n):fetch(ft,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(n,(function(t){return T("wasm streaming compile failed: "+t),T("falling back to ArrayBuffer instantiation"),s(n)}))}))).catch(i)}(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.Oa).apply(null,arguments)},r._main=function(){return(r._main=r.asm.Pa).apply(null,arguments)},r._malloc=function(){return(wn=r._malloc=r.asm.Qa).apply(null,arguments)}),Sn=r._free=function(){return(Sn=r._free=r.asm.Sa).apply(null,arguments)},Rn=r.___getTypeName=function(){return(Rn=r.___getTypeName=r.asm.Ta).apply(null,arguments)},Cn=(r.___embind_register_native_and_builtin_types=function(){return(r.___embind_register_native_and_builtin_types=r.asm.Ua).apply(null,arguments)},r.___errno_location=function(){return(Cn=r.___errno_location=r.asm.Va).apply(null,arguments)}),An=r.stackSave=function(){return(An=r.stackSave=r.asm.Wa).apply(null,arguments)},Dn=r.stackRestore=function(){return(Dn=r.stackRestore=r.asm.Xa).apply(null,arguments)},On=r._setThrew=function(){return(On=r._setThrew=r.asm.Ya).apply(null,arguments)},Nn=r.___cxa_can_catch=function(){return(Nn=r.___cxa_can_catch=r.asm.Za).apply(null,arguments)},Mn=r.___cxa_is_pointer_type=function(){return(Mn=r.___cxa_is_pointer_type=r.asm._a).apply(null,arguments)},Pn=(r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.$a).apply(null,arguments)},r.dynCall_j=function(){return(Pn=r.dynCall_j=r.asm.ab).apply(null,arguments)});r.dynCall_viijii=function(){return(r.dynCall_viijii=r.asm.bb).apply(null,arguments)},r.dynCall_iiiiij=function(){return(r.dynCall_iiiiij=r.asm.cb).apply(null,arguments)},r.dynCall_iiiiijj=function(){return(r.dynCall_iiiiijj=r.asm.db).apply(null,arguments)},r.dynCall_iiiiiijj=function(){return(r.dynCall_iiiiiijj=r.asm.eb).apply(null,arguments)};function Fn(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}r.addRunDependency=ut,r.removeRunDependency=pt,r.FS_createPath=Pt.createPath,r.FS_createDataFile=Pt.createDataFile,r.FS_createPreloadedFile=Pt.createPreloadedFile,r.FS_createLazyFile=Pt.createLazyFile,r.FS_createDevice=Pt.createDevice,r.FS_unlink=Pt.unlink,r.FS=Pt;function Ln(t){var e=r._main;try{!function(t,e){t,st()||(!0,r.onExit&&r.onExit(t),R=!0);f(t,new Fn(t))}(e(0,0))}catch(uJ){if(uJ instanceof Fn||"unwind"==uJ)return;var n=uJ;uJ&&"object"===typeof uJ&&uJ.stack&&(n=[uJ,uJ.stack]),T("exception thrown: "+n),f(1,uJ)}finally{!0}}function kn(t){function e(){bn||(bn=!0,r.calledRun=!0,R||(!0,r.noFSInit||Pt.init.initialized||Pt.init(),Pt.ignorePermissions=!1,Nt.init(),xt(et),xt(nt),n(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),Un&&Ln(),function(){if(r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)at(r.postRun.shift());xt(it)}()))}t=t||p,lt>0||(!function(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)ot(r.preRun.shift());xt(tt)}(),lt>0||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),e()}),1)):e()))}if(ct=function t(){bn||kn(),bn||(ct=t)},r.run=kn,r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();var Un=!0;return r.noInitialRun&&(Un=!1),kn(),e.ready}}();"object"===typeof t&&"object"===typeof e?e.exports=i:"function"===typeof define&&n.amdO?define([],(function(){return i})):"object"===typeof t&&(t.WebIFCWasm=i)}}),$S=4288193352,tR=1634111441,eR=177149247,nR=2056796094,iR=3087945054,rR=325726236,sR=1674181508,oR=277319702,aR=753842376,lR=2906023776,hR=4196446775,cR=32344328,uR=644574406,pR=963979645,dR=4031249490,fR=3299480353,mR=2979338954,gR=1095909175,yR=3124254112,vR=2938176219,_R=635142910,TR=3758799889,ER=1051757585,xR=4217484030,bR=3999819293,IR=3902619387,wR=3296154744,SR=1677625105,RR=639361253,CR=843113511,AR=905975707,DR=3221913625,OR=3571504051,NR=2272882330,MR=25142252,PR=4136498852,FR=3640358203,LR=1973544240,kR=3495092785,UR=4074379575,BR=3426335179,zR=1335981549,GR=1052013943,HR=1062813311,jR=1945004755,VR=3040386961,WR=3041715199,ZR=395920057,YR=3242481149,qR=342316401,XR=3518393246,KR=1360408905,QR=1904799276,JR=862014818,$R=3310460725,tC=264262732,eC=402227799,nC=1003880860,iC=1758889154,rC=4123344466,sC=1623761950,oC=1658829314,aC=2814081492,lC=3747195512,hC=484807127,cC=1209101575,uC=2853485674,pC=24185140,dC=1310830890,fC=3415622556,mC=647756555,gC=2827207264,yC=2143335405,vC=1287392070,_C=819412036,TC=1426591983,EC=2058353004,xC=4278956645,bC=182646315,IC=2188021234,wC=3132237377,SC=987401354,RC=707683696,CC=2223149337,AC=3508470533,DC=900683007,OC=263784265,NC=1509553395,MC=3493046030,PC=3009204131,FC=3319311131,LC=2068733104,kC=4175244083,UC=2176052936,BC=76236018,zC=629592764,GC=1154579445,HC=377706215,jC=1437502449,VC=1073191201,WC=1911478936,ZC=2474470126,YC=3588315303,qC=3079942009,XC=3694346114,KC=1687234759,QC=310824031,JC=3612865200,$C=3171933400,tA=1156407060,eA=3740093272,nA=1946335990,iA=103090709,rA=3651124850,sA=738039164,oA=2295281155,aA=3219374653,lA=90941305,hA=2262370178,cA=3024970846,uA=3283111854,pA=4021432810,dA=979691226,fA=3027567501,mA=2320036040,gA=160246688,yA=2655215786,vA=3242617779,_A=4186316022,TA=781010003,EA=1401173127,xA=2016517767,bA=3053780830,IA=4086658281,wA=1329646415,SA=4097777520,RA=1529196076,CA=3127900445,AA=3027962421,DA=3420628829,OA=3856911033,NA=1999602285,MA=1412071761,PA=2706606064,FA=463610769,LA=1404847402,kA=331165859,UA=4252922144,BA=682877961,zA=3544373492,GA=1179482911,HA=1004757350,jA=4243806635,VA=214636428,WA=2445595289,ZA=2757150158,YA=3136571912,qA=1807405624,XA=530289379,KA=1621171031,QA=2082059205,JA=734778138,$A=1235345126,tD=3689010777,eD=3657597509,nD=1975003073,iD=3979015343,rD=2218152070,sD=603775116,oD=3101698114,aD=1162798199,lD=413509423,hD=812556717,cD=3824725483,uD=2347447852,pD=3663046924,dD=3825984169,fD=1620046519,mD=3026737570,gD=180925521,yD=630975310,vD=4292641817,_D=4207607924,TD=1530820697,ED=2391383451,xD=2769231204,bD=926996030,ID=2391406946,wD=4156078855,SD=3512223829,RD=4237592921,CD=3304561284,AD=486154966,DD=[$S,tR,eR,nR,iR,rR,sR,oR,aR,lR,hR,cR,uR,pR,dR,fR,mR,gR,yR,vR,_R,TR,ER,xR,bR,IR,wR,SR,RR,CR,AR,DR,OR,NR,MR,PR,FR,LR,kR,UR,BR,zR,GR,HR,jR,VR,WR,ZR,YR,qR,XR,KR,QR,JR,$R,tC,eC,nC,iC,rC,sC,oC,aC,lC,hC,cC,uC,pC,dC,fC,mC,gC,yC,vC,_C,TC,EC,xC,bC,IC,wC,SC,RC,CC,AC,DC,OC,NC,MC,PC,FC,LC,kC,UC,BC,zC,GC,HC,jC,VC,WC,ZC,YC,qC,XC,KC,QC,JC,$C,tA,eA,nA,rA,sA,oA,aA,lA,hA,cA,uA,pA,dA,fA,mA,xA,bA,IA,wA,SA,RA,CA,AA,DA,OA,NA,MA,PA,FA,LA,kA,UA,BA,zA,GA,HA,jA,VA,WA,ZA,YA,qA,XA,KA,QA,JA,$A,tD,eD,nD,iD,rD,sD,oD,aD,lD,hD,cD,uD,pD,dD,fD,mD,yD,vD,_D,TD,ED,xD,bD,ID,wD,SD,RD,CD,AD],OD={3821786052:t=>MP.FromTape(t.ID,t.type,t.arguments),2296667514:t=>PP.FromTape(t.ID,t.type,t.arguments),3630933823:t=>FP.FromTape(t.ID,t.type,t.arguments),4288193352:t=>LP.FromTape(t.ID,t.type,t.arguments),2874132201:t=>kP.FromTape(t.ID,t.type,t.arguments),618182010:t=>UP.FromTape(t.ID,t.type,t.arguments),1635779807:t=>BP.FromTape(t.ID,t.type,t.arguments),2603310189:t=>zP.FromTape(t.ID,t.type,t.arguments),3406155212:t=>GP.FromTape(t.ID,t.type,t.arguments),1634111441:t=>HP.FromTape(t.ID,t.type,t.arguments),177149247:t=>jP.FromTape(t.ID,t.type,t.arguments),1411407467:t=>VP.FromTape(t.ID,t.type,t.arguments),3352864051:t=>WP.FromTape(t.ID,t.type,t.arguments),2056796094:t=>ZP.FromTape(t.ID,t.type,t.arguments),1871374353:t=>YP.FromTape(t.ID,t.type,t.arguments),3087945054:t=>qP.FromTape(t.ID,t.type,t.arguments),3001207471:t=>XP.FromTape(t.ID,t.type,t.arguments),325726236:t=>KP.FromTape(t.ID,t.type,t.arguments),749761778:t=>QP.FromTape(t.ID,t.type,t.arguments),3199563722:t=>JP.FromTape(t.ID,t.type,t.arguments),2483840362:t=>$P.FromTape(t.ID,t.type,t.arguments),3379348081:t=>tF.FromTape(t.ID,t.type,t.arguments),3239324667:t=>eF.FromTape(t.ID,t.type,t.arguments),4263986512:t=>nF.FromTape(t.ID,t.type,t.arguments),53199957:t=>iF.FromTape(t.ID,t.type,t.arguments),2029264950:t=>rF.FromTape(t.ID,t.type,t.arguments),3512275521:t=>sF.FromTape(t.ID,t.type,t.arguments),1674181508:t=>oF.FromTape(t.ID,t.type,t.arguments),669184980:t=>aF.FromTape(t.ID,t.type,t.arguments),639542469:t=>lF.FromTape(t.ID,t.type,t.arguments),411424972:t=>hF.FromTape(t.ID,t.type,t.arguments),130549933:t=>cF.FromTape(t.ID,t.type,t.arguments),3869604511:t=>uF.FromTape(t.ID,t.type,t.arguments),3798115385:t=>pF.FromTape(t.ID,t.type,t.arguments),1310608509:t=>dF.FromTape(t.ID,t.type,t.arguments),2705031697:t=>fF.FromTape(t.ID,t.type,t.arguments),3460190687:t=>mF.FromTape(t.ID,t.type,t.arguments),3207858831:t=>gF.FromTape(t.ID,t.type,t.arguments),277319702:t=>yF.FromTape(t.ID,t.type,t.arguments),1532957894:t=>vF.FromTape(t.ID,t.type,t.arguments),4261334040:t=>_F.FromTape(t.ID,t.type,t.arguments),3125803723:t=>TF.FromTape(t.ID,t.type,t.arguments),2740243338:t=>EF.FromTape(t.ID,t.type,t.arguments),1967976161:t=>xF.FromTape(t.ID,t.type,t.arguments),2461110595:t=>bF.FromTape(t.ID,t.type,t.arguments),2887950389:t=>IF.FromTape(t.ID,t.type,t.arguments),167062518:t=>wF.FromTape(t.ID,t.type,t.arguments),753842376:t=>SF.FromTape(t.ID,t.type,t.arguments),2906023776:t=>RF.FromTape(t.ID,t.type,t.arguments),819618141:t=>CF.FromTape(t.ID,t.type,t.arguments),4196446775:t=>AF.FromTape(t.ID,t.type,t.arguments),3649138523:t=>DF.FromTape(t.ID,t.type,t.arguments),616511568:t=>OF.FromTape(t.ID,t.type,t.arguments),1334484129:t=>NF.FromTape(t.ID,t.type,t.arguments),32344328:t=>MF.FromTape(t.ID,t.type,t.arguments),231477066:t=>PF.FromTape(t.ID,t.type,t.arguments),3649129432:t=>FF.FromTape(t.ID,t.type,t.arguments),2736907675:t=>LF.FromTape(t.ID,t.type,t.arguments),4037036970:t=>kF.FromTape(t.ID,t.type,t.arguments),1136057603:t=>UF.FromTape(t.ID,t.type,t.arguments),1560379544:t=>BF.FromTape(t.ID,t.type,t.arguments),3367102660:t=>zF.FromTape(t.ID,t.type,t.arguments),1387855156:t=>GF.FromTape(t.ID,t.type,t.arguments),2069777674:t=>HF.FromTape(t.ID,t.type,t.arguments),1260505505:t=>jF.FromTape(t.ID,t.type,t.arguments),4182860854:t=>VF.FromTape(t.ID,t.type,t.arguments),2581212453:t=>WF.FromTape(t.ID,t.type,t.arguments),2713105998:t=>ZF.FromTape(t.ID,t.type,t.arguments),644574406:t=>YF.FromTape(t.ID,t.type,t.arguments),963979645:t=>qF.FromTape(t.ID,t.type,t.arguments),4031249490:t=>XF.FromTape(t.ID,t.type,t.arguments),3299480353:t=>KF.FromTape(t.ID,t.type,t.arguments),2979338954:t=>QF.FromTape(t.ID,t.type,t.arguments),39481116:t=>JF.FromTape(t.ID,t.type,t.arguments),1095909175:t=>$F.FromTape(t.ID,t.type,t.arguments),1909888760:t=>tL.FromTape(t.ID,t.type,t.arguments),1950629157:t=>eL.FromTape(t.ID,t.type,t.arguments),3124254112:t=>nL.FromTape(t.ID,t.type,t.arguments),1177604601:t=>iL.FromTape(t.ID,t.type,t.arguments),2938176219:t=>rL.FromTape(t.ID,t.type,t.arguments),2188180465:t=>sL.FromTape(t.ID,t.type,t.arguments),2898889636:t=>oL.FromTape(t.ID,t.type,t.arguments),635142910:t=>aL.FromTape(t.ID,t.type,t.arguments),395041908:t=>lL.FromTape(t.ID,t.type,t.arguments),3758799889:t=>hL.FromTape(t.ID,t.type,t.arguments),3293546465:t=>cL.FromTape(t.ID,t.type,t.arguments),1051757585:t=>uL.FromTape(t.ID,t.type,t.arguments),2674252688:t=>pL.FromTape(t.ID,t.type,t.arguments),4217484030:t=>dL.FromTape(t.ID,t.type,t.arguments),1285652485:t=>fL.FromTape(t.ID,t.type,t.arguments),3999819293:t=>mL.FromTape(t.ID,t.type,t.arguments),3203706013:t=>gL.FromTape(t.ID,t.type,t.arguments),1123145078:t=>yL.FromTape(t.ID,t.type,t.arguments),574549367:t=>vL.FromTape(t.ID,t.type,t.arguments),1675464909:t=>_L.FromTape(t.ID,t.type,t.arguments),2059837836:t=>TL.FromTape(t.ID,t.type,t.arguments),59481748:t=>EL.FromTape(t.ID,t.type,t.arguments),3749851601:t=>xL.FromTape(t.ID,t.type,t.arguments),3486308946:t=>bL.FromTape(t.ID,t.type,t.arguments),3331915920:t=>IL.FromTape(t.ID,t.type,t.arguments),1416205885:t=>wL.FromTape(t.ID,t.type,t.arguments),3150382593:t=>SL.FromTape(t.ID,t.type,t.arguments),3902619387:t=>RL.FromTape(t.ID,t.type,t.arguments),2951183804:t=>CL.FromTape(t.ID,t.type,t.arguments),3296154744:t=>AL.FromTape(t.ID,t.type,t.arguments),2197970202:t=>DL.FromTape(t.ID,t.type,t.arguments),2611217952:t=>OL.FromTape(t.ID,t.type,t.arguments),2937912522:t=>NL.FromTape(t.ID,t.type,t.arguments),1383045692:t=>ML.FromTape(t.ID,t.type,t.arguments),1062206242:t=>PL.FromTape(t.ID,t.type,t.arguments),1677625105:t=>FL.FromTape(t.ID,t.type,t.arguments),3893394355:t=>LL.FromTape(t.ID,t.type,t.arguments),747523909:t=>kL.FromTape(t.ID,t.type,t.arguments),647927063:t=>UL.FromTape(t.ID,t.type,t.arguments),2205249479:t=>BL.FromTape(t.ID,t.type,t.arguments),639361253:t=>zL.FromTape(t.ID,t.type,t.arguments),2301859152:t=>GL.FromTape(t.ID,t.type,t.arguments),776857604:t=>HL.FromTape(t.ID,t.type,t.arguments),3285139300:t=>jL.FromTape(t.ID,t.type,t.arguments),3264961684:t=>VL.FromTape(t.ID,t.type,t.arguments),843113511:t=>WL.FromTape(t.ID,t.type,t.arguments),905975707:t=>ZL.FromTape(t.ID,t.type,t.arguments),300633059:t=>YL.FromTape(t.ID,t.type,t.arguments),3221913625:t=>qL.FromTape(t.ID,t.type,t.arguments),400855858:t=>XL.FromTape(t.ID,t.type,t.arguments),2542286263:t=>KL.FromTape(t.ID,t.type,t.arguments),3875453745:t=>QL.FromTape(t.ID,t.type,t.arguments),3732776249:t=>JL.FromTape(t.ID,t.type,t.arguments),15328376:t=>$L.FromTape(t.ID,t.type,t.arguments),2485617015:t=>tk.FromTape(t.ID,t.type,t.arguments),1485152156:t=>ek.FromTape(t.ID,t.type,t.arguments),3571504051:t=>nk.FromTape(t.ID,t.type,t.arguments),3850581409:t=>ik.FromTape(t.ID,t.type,t.arguments),2272882330:t=>rk.FromTape(t.ID,t.type,t.arguments),2816379211:t=>sk.FromTape(t.ID,t.type,t.arguments),2510884976:t=>ok.FromTape(t.ID,t.type,t.arguments),370225590:t=>ak.FromTape(t.ID,t.type,t.arguments),1981873012:t=>lk.FromTape(t.ID,t.type,t.arguments),2859738748:t=>hk.FromTape(t.ID,t.type,t.arguments),45288368:t=>ck.FromTape(t.ID,t.type,t.arguments),2614616156:t=>uk.FromTape(t.ID,t.type,t.arguments),2732653382:t=>pk.FromTape(t.ID,t.type,t.arguments),775493141:t=>dk.FromTape(t.ID,t.type,t.arguments),1959218052:t=>fk.FromTape(t.ID,t.type,t.arguments),3898045240:t=>mk.FromTape(t.ID,t.type,t.arguments),2185764099:t=>gk.FromTape(t.ID,t.type,t.arguments),1060000209:t=>yk.FromTape(t.ID,t.type,t.arguments),4105962743:t=>vk.FromTape(t.ID,t.type,t.arguments),488727124:t=>_k.FromTape(t.ID,t.type,t.arguments),1525564444:t=>Tk.FromTape(t.ID,t.type,t.arguments),2559216714:t=>Ek.FromTape(t.ID,t.type,t.arguments),2574617495:t=>xk.FromTape(t.ID,t.type,t.arguments),3419103109:t=>bk.FromTape(t.ID,t.type,t.arguments),3050246964:t=>Ik.FromTape(t.ID,t.type,t.arguments),3293443760:t=>wk.FromTape(t.ID,t.type,t.arguments),25142252:t=>Sk.FromTape(t.ID,t.type,t.arguments),578613899:t=>Rk.FromTape(t.ID,t.type,t.arguments),2889183280:t=>Ck.FromTape(t.ID,t.type,t.arguments),2713554722:t=>Ak.FromTape(t.ID,t.type,t.arguments),4136498852:t=>Dk.FromTape(t.ID,t.type,t.arguments),335055490:t=>Ok.FromTape(t.ID,t.type,t.arguments),3640358203:t=>Nk.FromTape(t.ID,t.type,t.arguments),2954562838:t=>Mk.FromTape(t.ID,t.type,t.arguments),1785450214:t=>Pk.FromTape(t.ID,t.type,t.arguments),1466758467:t=>Fk.FromTape(t.ID,t.type,t.arguments),3895139033:t=>Lk.FromTape(t.ID,t.type,t.arguments),1419761937:t=>kk.FromTape(t.ID,t.type,t.arguments),602808272:t=>Uk.FromTape(t.ID,t.type,t.arguments),1973544240:t=>Bk.FromTape(t.ID,t.type,t.arguments),1916426348:t=>zk.FromTape(t.ID,t.type,t.arguments),3295246426:t=>Gk.FromTape(t.ID,t.type,t.arguments),1815067380:t=>Hk.FromTape(t.ID,t.type,t.arguments),2506170314:t=>jk.FromTape(t.ID,t.type,t.arguments),2147822146:t=>Vk.FromTape(t.ID,t.type,t.arguments),539742890:t=>Wk.FromTape(t.ID,t.type,t.arguments),3495092785:t=>Zk.FromTape(t.ID,t.type,t.arguments),1457835157:t=>Yk.FromTape(t.ID,t.type,t.arguments),2601014836:t=>qk.FromTape(t.ID,t.type,t.arguments),2827736869:t=>Xk.FromTape(t.ID,t.type,t.arguments),2629017746:t=>Kk.FromTape(t.ID,t.type,t.arguments),1186437898:t=>Qk.FromTape(t.ID,t.type,t.arguments),3800577675:t=>Jk.FromTape(t.ID,t.type,t.arguments),1105321065:t=>$k.FromTape(t.ID,t.type,t.arguments),2367409068:t=>tU.FromTape(t.ID,t.type,t.arguments),3510044353:t=>eU.FromTape(t.ID,t.type,t.arguments),1213902940:t=>nU.FromTape(t.ID,t.type,t.arguments),4074379575:t=>iU.FromTape(t.ID,t.type,t.arguments),3961806047:t=>rU.FromTape(t.ID,t.type,t.arguments),3426335179:t=>sU.FromTape(t.ID,t.type,t.arguments),1306400036:t=>oU.FromTape(t.ID,t.type,t.arguments),3632507154:t=>aU.FromTape(t.ID,t.type,t.arguments),1765591967:t=>lU.FromTape(t.ID,t.type,t.arguments),1045800335:t=>hU.FromTape(t.ID,t.type,t.arguments),2949456006:t=>cU.FromTape(t.ID,t.type,t.arguments),32440307:t=>uU.FromTape(t.ID,t.type,t.arguments),1335981549:t=>pU.FromTape(t.ID,t.type,t.arguments),2635815018:t=>dU.FromTape(t.ID,t.type,t.arguments),1945343521:t=>fU.FromTape(t.ID,t.type,t.arguments),1052013943:t=>mU.FromTape(t.ID,t.type,t.arguments),1599208980:t=>gU.FromTape(t.ID,t.type,t.arguments),562808652:t=>yU.FromTape(t.ID,t.type,t.arguments),1062813311:t=>vU.FromTape(t.ID,t.type,t.arguments),2063403501:t=>_U.FromTape(t.ID,t.type,t.arguments),1945004755:t=>TU.FromTape(t.ID,t.type,t.arguments),3256556792:t=>EU.FromTape(t.ID,t.type,t.arguments),3040386961:t=>xU.FromTape(t.ID,t.type,t.arguments),3849074793:t=>bU.FromTape(t.ID,t.type,t.arguments),3041715199:t=>IU.FromTape(t.ID,t.type,t.arguments),3205830791:t=>wU.FromTape(t.ID,t.type,t.arguments),1154170062:t=>SU.FromTape(t.ID,t.type,t.arguments),770865208:t=>RU.FromTape(t.ID,t.type,t.arguments),3732053477:t=>CU.FromTape(t.ID,t.type,t.arguments),395920057:t=>AU.FromTape(t.ID,t.type,t.arguments),2963535650:t=>DU.FromTape(t.ID,t.type,t.arguments),1714330368:t=>OU.FromTape(t.ID,t.type,t.arguments),3242481149:t=>NU.FromTape(t.ID,t.type,t.arguments),526551008:t=>MU.FromTape(t.ID,t.type,t.arguments),2323601079:t=>PU.FromTape(t.ID,t.type,t.arguments),445594917:t=>FU.FromTape(t.ID,t.type,t.arguments),4006246654:t=>LU.FromTape(t.ID,t.type,t.arguments),342316401:t=>kU.FromTape(t.ID,t.type,t.arguments),869906466:t=>UU.FromTape(t.ID,t.type,t.arguments),3518393246:t=>BU.FromTape(t.ID,t.type,t.arguments),3760055223:t=>zU.FromTape(t.ID,t.type,t.arguments),1360408905:t=>GU.FromTape(t.ID,t.type,t.arguments),2030761528:t=>HU.FromTape(t.ID,t.type,t.arguments),3900360178:t=>jU.FromTape(t.ID,t.type,t.arguments),476780140:t=>VU.FromTape(t.ID,t.type,t.arguments),1472233963:t=>WU.FromTape(t.ID,t.type,t.arguments),1904799276:t=>ZU.FromTape(t.ID,t.type,t.arguments),663422040:t=>YU.FromTape(t.ID,t.type,t.arguments),862014818:t=>qU.FromTape(t.ID,t.type,t.arguments),2417008758:t=>XU.FromTape(t.ID,t.type,t.arguments),3310460725:t=>KU.FromTape(t.ID,t.type,t.arguments),3277789161:t=>QU.FromTape(t.ID,t.type,t.arguments),264262732:t=>JU.FromTape(t.ID,t.type,t.arguments),1534661035:t=>$U.FromTape(t.ID,t.type,t.arguments),402227799:t=>tB.FromTape(t.ID,t.type,t.arguments),1217240411:t=>eB.FromTape(t.ID,t.type,t.arguments),1003880860:t=>nB.FromTape(t.ID,t.type,t.arguments),712377611:t=>iB.FromTape(t.ID,t.type,t.arguments),1758889154:t=>rB.FromTape(t.ID,t.type,t.arguments),4123344466:t=>sB.FromTape(t.ID,t.type,t.arguments),2397081782:t=>oB.FromTape(t.ID,t.type,t.arguments),1623761950:t=>aB.FromTape(t.ID,t.type,t.arguments),2590856083:t=>lB.FromTape(t.ID,t.type,t.arguments),1883228015:t=>hB.FromTape(t.ID,t.type,t.arguments),339256511:t=>cB.FromTape(t.ID,t.type,t.arguments),2777663545:t=>uB.FromTape(t.ID,t.type,t.arguments),1704287377:t=>pB.FromTape(t.ID,t.type,t.arguments),2835456948:t=>dB.FromTape(t.ID,t.type,t.arguments),1658829314:t=>fB.FromTape(t.ID,t.type,t.arguments),2107101300:t=>mB.FromTape(t.ID,t.type,t.arguments),2814081492:t=>gB.FromTape(t.ID,t.type,t.arguments),132023988:t=>yB.FromTape(t.ID,t.type,t.arguments),3747195512:t=>vB.FromTape(t.ID,t.type,t.arguments),3174744832:t=>_B.FromTape(t.ID,t.type,t.arguments),484807127:t=>TB.FromTape(t.ID,t.type,t.arguments),3390157468:t=>EB.FromTape(t.ID,t.type,t.arguments),4148101412:t=>xB.FromTape(t.ID,t.type,t.arguments),211053100:t=>bB.FromTape(t.ID,t.type,t.arguments),4024345920:t=>IB.FromTape(t.ID,t.type,t.arguments),297599258:t=>wB.FromTape(t.ID,t.type,t.arguments),4294318154:t=>SB.FromTape(t.ID,t.type,t.arguments),3200245327:t=>RB.FromTape(t.ID,t.type,t.arguments),1437805879:t=>CB.FromTape(t.ID,t.type,t.arguments),1209101575:t=>AB.FromTape(t.ID,t.type,t.arguments),2853485674:t=>DB.FromTape(t.ID,t.type,t.arguments),2242383968:t=>OB.FromTape(t.ID,t.type,t.arguments),1040185647:t=>NB.FromTape(t.ID,t.type,t.arguments),3548104201:t=>MB.FromTape(t.ID,t.type,t.arguments),477187591:t=>PB.FromTape(t.ID,t.type,t.arguments),2804161546:t=>FB.FromTape(t.ID,t.type,t.arguments),2556980723:t=>LB.FromTape(t.ID,t.type,t.arguments),2047409740:t=>kB.FromTape(t.ID,t.type,t.arguments),1809719519:t=>UB.FromTape(t.ID,t.type,t.arguments),803316827:t=>BB.FromTape(t.ID,t.type,t.arguments),3008276851:t=>zB.FromTape(t.ID,t.type,t.arguments),807026263:t=>GB.FromTape(t.ID,t.type,t.arguments),3737207727:t=>HB.FromTape(t.ID,t.type,t.arguments),24185140:t=>jB.FromTape(t.ID,t.type,t.arguments),1310830890:t=>VB.FromTape(t.ID,t.type,t.arguments),4219587988:t=>WB.FromTape(t.ID,t.type,t.arguments),3415622556:t=>ZB.FromTape(t.ID,t.type,t.arguments),346874300:t=>YB.FromTape(t.ID,t.type,t.arguments),647756555:t=>qB.FromTape(t.ID,t.type,t.arguments),2489546625:t=>XB.FromTape(t.ID,t.type,t.arguments),2827207264:t=>KB.FromTape(t.ID,t.type,t.arguments),2143335405:t=>QB.FromTape(t.ID,t.type,t.arguments),1287392070:t=>JB.FromTape(t.ID,t.type,t.arguments),738692330:t=>$B.FromTape(t.ID,t.type,t.arguments),374418227:t=>tz.FromTape(t.ID,t.type,t.arguments),315944413:t=>ez.FromTape(t.ID,t.type,t.arguments),819412036:t=>nz.FromTape(t.ID,t.type,t.arguments),1810631287:t=>iz.FromTape(t.ID,t.type,t.arguments),1426591983:t=>rz.FromTape(t.ID,t.type,t.arguments),4222183408:t=>sz.FromTape(t.ID,t.type,t.arguments),2652556860:t=>oz.FromTape(t.ID,t.type,t.arguments),2058353004:t=>az.FromTape(t.ID,t.type,t.arguments),3907093117:t=>lz.FromTape(t.ID,t.type,t.arguments),4278956645:t=>hz.FromTape(t.ID,t.type,t.arguments),3198132628:t=>cz.FromTape(t.ID,t.type,t.arguments),182646315:t=>uz.FromTape(t.ID,t.type,t.arguments),4037862832:t=>pz.FromTape(t.ID,t.type,t.arguments),2188021234:t=>dz.FromTape(t.ID,t.type,t.arguments),3815607619:t=>fz.FromTape(t.ID,t.type,t.arguments),3132237377:t=>mz.FromTape(t.ID,t.type,t.arguments),1482959167:t=>gz.FromTape(t.ID,t.type,t.arguments),987401354:t=>yz.FromTape(t.ID,t.type,t.arguments),1834744321:t=>vz.FromTape(t.ID,t.type,t.arguments),707683696:t=>_z.FromTape(t.ID,t.type,t.arguments),1339347760:t=>Tz.FromTape(t.ID,t.type,t.arguments),2223149337:t=>Ez.FromTape(t.ID,t.type,t.arguments),2297155007:t=>xz.FromTape(t.ID,t.type,t.arguments),3508470533:t=>bz.FromTape(t.ID,t.type,t.arguments),3009222698:t=>Iz.FromTape(t.ID,t.type,t.arguments),900683007:t=>wz.FromTape(t.ID,t.type,t.arguments),1893162501:t=>Sz.FromTape(t.ID,t.type,t.arguments),263784265:t=>Rz.FromTape(t.ID,t.type,t.arguments),4238390223:t=>Cz.FromTape(t.ID,t.type,t.arguments),1509553395:t=>Az.FromTape(t.ID,t.type,t.arguments),1268542332:t=>Dz.FromTape(t.ID,t.type,t.arguments),3493046030:t=>Oz.FromTape(t.ID,t.type,t.arguments),4095422895:t=>Nz.FromTape(t.ID,t.type,t.arguments),987898635:t=>Mz.FromTape(t.ID,t.type,t.arguments),3448662350:t=>Pz.FromTape(t.ID,t.type,t.arguments),2453401579:t=>Fz.FromTape(t.ID,t.type,t.arguments),4142052618:t=>Lz.FromTape(t.ID,t.type,t.arguments),3590301190:t=>kz.FromTape(t.ID,t.type,t.arguments),3009204131:t=>Uz.FromTape(t.ID,t.type,t.arguments),852622518:t=>Bz.FromTape(t.ID,t.type,t.arguments),178086475:t=>zz.FromTape(t.ID,t.type,t.arguments),2706460486:t=>Gz.FromTape(t.ID,t.type,t.arguments),812098782:t=>Hz.FromTape(t.ID,t.type,t.arguments),3319311131:t=>jz.FromTape(t.ID,t.type,t.arguments),1251058090:t=>Vz.FromTape(t.ID,t.type,t.arguments),2068733104:t=>Wz.FromTape(t.ID,t.type,t.arguments),1806887404:t=>Zz.FromTape(t.ID,t.type,t.arguments),1484403080:t=>Yz.FromTape(t.ID,t.type,t.arguments),3905492369:t=>qz.FromTape(t.ID,t.type,t.arguments),3570813810:t=>Xz.FromTape(t.ID,t.type,t.arguments),2571569899:t=>Kz.FromTape(t.ID,t.type,t.arguments),178912537:t=>Qz.FromTape(t.ID,t.type,t.arguments),2294589976:t=>Jz.FromTape(t.ID,t.type,t.arguments),1437953363:t=>$z.FromTape(t.ID,t.type,t.arguments),2133299955:t=>tG.FromTape(t.ID,t.type,t.arguments),4175244083:t=>eG.FromTape(t.ID,t.type,t.arguments),3946677679:t=>nG.FromTape(t.ID,t.type,t.arguments),3113134337:t=>iG.FromTape(t.ID,t.type,t.arguments),2391368822:t=>rG.FromTape(t.ID,t.type,t.arguments),3741457305:t=>sG.FromTape(t.ID,t.type,t.arguments),3020489413:t=>oG.FromTape(t.ID,t.type,t.arguments),2176052936:t=>aG.FromTape(t.ID,t.type,t.arguments),4288270099:t=>lG.FromTape(t.ID,t.type,t.arguments),572779678:t=>hG.FromTape(t.ID,t.type,t.arguments),3827777499:t=>cG.FromTape(t.ID,t.type,t.arguments),428585644:t=>uG.FromTape(t.ID,t.type,t.arguments),1585845231:t=>pG.FromTape(t.ID,t.type,t.arguments),76236018:t=>dG.FromTape(t.ID,t.type,t.arguments),1051575348:t=>fG.FromTape(t.ID,t.type,t.arguments),2655187982:t=>mG.FromTape(t.ID,t.type,t.arguments),3452421091:t=>gG.FromTape(t.ID,t.type,t.arguments),4162380809:t=>yG.FromTape(t.ID,t.type,t.arguments),629592764:t=>vG.FromTape(t.ID,t.type,t.arguments),1161773419:t=>_G.FromTape(t.ID,t.type,t.arguments),1566485204:t=>TG.FromTape(t.ID,t.type,t.arguments),1402838566:t=>EG.FromTape(t.ID,t.type,t.arguments),125510826:t=>xG.FromTape(t.ID,t.type,t.arguments),2604431987:t=>bG.FromTape(t.ID,t.type,t.arguments),4266656042:t=>IG.FromTape(t.ID,t.type,t.arguments),1520743889:t=>wG.FromTape(t.ID,t.type,t.arguments),3422422726:t=>SG.FromTape(t.ID,t.type,t.arguments),1281925730:t=>RG.FromTape(t.ID,t.type,t.arguments),3092502836:t=>CG.FromTape(t.ID,t.type,t.arguments),388784114:t=>AG.FromTape(t.ID,t.type,t.arguments),1154579445:t=>DG.FromTape(t.ID,t.type,t.arguments),2624227202:t=>OG.FromTape(t.ID,t.type,t.arguments),1008929658:t=>NG.FromTape(t.ID,t.type,t.arguments),1425443689:t=>MG.FromTape(t.ID,t.type,t.arguments),3057273783:t=>PG.FromTape(t.ID,t.type,t.arguments),2347385850:t=>FG.FromTape(t.ID,t.type,t.arguments),1838606355:t=>LG.FromTape(t.ID,t.type,t.arguments),1847130766:t=>kG.FromTape(t.ID,t.type,t.arguments),3708119e3:t=>UG.FromTape(t.ID,t.type,t.arguments),2852063980:t=>BG.FromTape(t.ID,t.type,t.arguments),760658860:t=>zG.FromTape(t.ID,t.type,t.arguments),2022407955:t=>GG.FromTape(t.ID,t.type,t.arguments),248100487:t=>HG.FromTape(t.ID,t.type,t.arguments),3303938423:t=>jG.FromTape(t.ID,t.type,t.arguments),1303795690:t=>VG.FromTape(t.ID,t.type,t.arguments),1847252529:t=>WG.FromTape(t.ID,t.type,t.arguments),2199411900:t=>ZG.FromTape(t.ID,t.type,t.arguments),2235152071:t=>YG.FromTape(t.ID,t.type,t.arguments),164193824:t=>qG.FromTape(t.ID,t.type,t.arguments),3079605661:t=>XG.FromTape(t.ID,t.type,t.arguments),3404854881:t=>KG.FromTape(t.ID,t.type,t.arguments),552965576:t=>QG.FromTape(t.ID,t.type,t.arguments),3265635763:t=>JG.FromTape(t.ID,t.type,t.arguments),853536259:t=>$G.FromTape(t.ID,t.type,t.arguments),1507914824:t=>tH.FromTape(t.ID,t.type,t.arguments),2597039031:t=>eH.FromTape(t.ID,t.type,t.arguments),377706215:t=>nH.FromTape(t.ID,t.type,t.arguments),2108223431:t=>iH.FromTape(t.ID,t.type,t.arguments),1437502449:t=>rH.FromTape(t.ID,t.type,t.arguments),1114901282:t=>sH.FromTape(t.ID,t.type,t.arguments),1073191201:t=>oH.FromTape(t.ID,t.type,t.arguments),1911478936:t=>aH.FromTape(t.ID,t.type,t.arguments),3181161470:t=>lH.FromTape(t.ID,t.type,t.arguments),3368373690:t=>hH.FromTape(t.ID,t.type,t.arguments),2998442950:t=>cH.FromTape(t.ID,t.type,t.arguments),2706619895:t=>uH.FromTape(t.ID,t.type,t.arguments),2474470126:t=>pH.FromTape(t.ID,t.type,t.arguments),977012517:t=>dH.FromTape(t.ID,t.type,t.arguments),1918398963:t=>fH.FromTape(t.ID,t.type,t.arguments),3888040117:t=>mH.FromTape(t.ID,t.type,t.arguments),219451334:t=>gH.FromTape(t.ID,t.type,t.arguments),3701648758:t=>yH.FromTape(t.ID,t.type,t.arguments),2251480897:t=>vH.FromTape(t.ID,t.type,t.arguments),4143007308:t=>_H.FromTape(t.ID,t.type,t.arguments),590820931:t=>TH.FromTape(t.ID,t.type,t.arguments),3388369263:t=>EH.FromTape(t.ID,t.type,t.arguments),3505215534:t=>xH.FromTape(t.ID,t.type,t.arguments),2485787929:t=>bH.FromTape(t.ID,t.type,t.arguments),2665983363:t=>IH.FromTape(t.ID,t.type,t.arguments),3588315303:t=>wH.FromTape(t.ID,t.type,t.arguments),3079942009:t=>SH.FromTape(t.ID,t.type,t.arguments),4251960020:t=>RH.FromTape(t.ID,t.type,t.arguments),1411181986:t=>CH.FromTape(t.ID,t.type,t.arguments),643959842:t=>AH.FromTape(t.ID,t.type,t.arguments),1029017970:t=>DH.FromTape(t.ID,t.type,t.arguments),144952367:t=>OH.FromTape(t.ID,t.type,t.arguments),3694346114:t=>NH.FromTape(t.ID,t.type,t.arguments),2837617999:t=>MH.FromTape(t.ID,t.type,t.arguments),1207048766:t=>PH.FromTape(t.ID,t.type,t.arguments),2529465313:t=>FH.FromTape(t.ID,t.type,t.arguments),2519244187:t=>LH.FromTape(t.ID,t.type,t.arguments),1682466193:t=>kH.FromTape(t.ID,t.type,t.arguments),2382730787:t=>UH.FromTape(t.ID,t.type,t.arguments),3566463478:t=>BH.FromTape(t.ID,t.type,t.arguments),3327091369:t=>zH.FromTape(t.ID,t.type,t.arguments),2077209135:t=>GH.FromTape(t.ID,t.type,t.arguments),101040310:t=>HH.FromTape(t.ID,t.type,t.arguments),3021840470:t=>jH.FromTape(t.ID,t.type,t.arguments),2483315170:t=>VH.FromTape(t.ID,t.type,t.arguments),2226359599:t=>WH.FromTape(t.ID,t.type,t.arguments),1687234759:t=>ZH.FromTape(t.ID,t.type,t.arguments),1158309216:t=>YH.FromTape(t.ID,t.type,t.arguments),310824031:t=>qH.FromTape(t.ID,t.type,t.arguments),804291784:t=>XH.FromTape(t.ID,t.type,t.arguments),3612865200:t=>KH.FromTape(t.ID,t.type,t.arguments),4231323485:t=>QH.FromTape(t.ID,t.type,t.arguments),597895409:t=>JH.FromTape(t.ID,t.type,t.arguments),2004835150:t=>$H.FromTape(t.ID,t.type,t.arguments),603570806:t=>tj.FromTape(t.ID,t.type,t.arguments),1663979128:t=>ej.FromTape(t.ID,t.type,t.arguments),220341763:t=>nj.FromTape(t.ID,t.type,t.arguments),3171933400:t=>ij.FromTape(t.ID,t.type,t.arguments),1156407060:t=>rj.FromTape(t.ID,t.type,t.arguments),4017108033:t=>sj.FromTape(t.ID,t.type,t.arguments),2067069095:t=>oj.FromTape(t.ID,t.type,t.arguments),4022376103:t=>aj.FromTape(t.ID,t.type,t.arguments),1423911732:t=>lj.FromTape(t.ID,t.type,t.arguments),2924175390:t=>hj.FromTape(t.ID,t.type,t.arguments),2775532180:t=>cj.FromTape(t.ID,t.type,t.arguments),2839578677:t=>uj.FromTape(t.ID,t.type,t.arguments),3724593414:t=>pj.FromTape(t.ID,t.type,t.arguments),3740093272:t=>dj.FromTape(t.ID,t.type,t.arguments),1946335990:t=>fj.FromTape(t.ID,t.type,t.arguments),3355820592:t=>mj.FromTape(t.ID,t.type,t.arguments),759155922:t=>gj.FromTape(t.ID,t.type,t.arguments),2559016684:t=>yj.FromTape(t.ID,t.type,t.arguments),3727388367:t=>vj.FromTape(t.ID,t.type,t.arguments),3778827333:t=>_j.FromTape(t.ID,t.type,t.arguments),3967405729:t=>Tj.FromTape(t.ID,t.type,t.arguments),1775413392:t=>Ej.FromTape(t.ID,t.type,t.arguments),677532197:t=>xj.FromTape(t.ID,t.type,t.arguments),2022622350:t=>bj.FromTape(t.ID,t.type,t.arguments),1304840413:t=>Ij.FromTape(t.ID,t.type,t.arguments),3119450353:t=>wj.FromTape(t.ID,t.type,t.arguments),2417041796:t=>Sj.FromTape(t.ID,t.type,t.arguments),2744685151:t=>Rj.FromTape(t.ID,t.type,t.arguments),569719735:t=>Cj.FromTape(t.ID,t.type,t.arguments),2945172077:t=>Aj.FromTape(t.ID,t.type,t.arguments),4208778838:t=>Dj.FromTape(t.ID,t.type,t.arguments),673634403:t=>Oj.FromTape(t.ID,t.type,t.arguments),2095639259:t=>Nj.FromTape(t.ID,t.type,t.arguments),3958567839:t=>Mj.FromTape(t.ID,t.type,t.arguments),2802850158:t=>Pj.FromTape(t.ID,t.type,t.arguments),103090709:t=>Fj.FromTape(t.ID,t.type,t.arguments),653396225:t=>Lj.FromTape(t.ID,t.type,t.arguments),2904328755:t=>kj.FromTape(t.ID,t.type,t.arguments),3843373140:t=>Uj.FromTape(t.ID,t.type,t.arguments),3651124850:t=>Bj.FromTape(t.ID,t.type,t.arguments),2598011224:t=>zj.FromTape(t.ID,t.type,t.arguments),986844984:t=>Gj.FromTape(t.ID,t.type,t.arguments),871118103:t=>Hj.FromTape(t.ID,t.type,t.arguments),1680319473:t=>jj.FromTape(t.ID,t.type,t.arguments),148025276:t=>Vj.FromTape(t.ID,t.type,t.arguments),4166981789:t=>Wj.FromTape(t.ID,t.type,t.arguments),3710013099:t=>Zj.FromTape(t.ID,t.type,t.arguments),2752243245:t=>Yj.FromTape(t.ID,t.type,t.arguments),941946838:t=>qj.FromTape(t.ID,t.type,t.arguments),1451395588:t=>Xj.FromTape(t.ID,t.type,t.arguments),3357820518:t=>Kj.FromTape(t.ID,t.type,t.arguments),492091185:t=>Qj.FromTape(t.ID,t.type,t.arguments),3650150729:t=>Jj.FromTape(t.ID,t.type,t.arguments),110355661:t=>$j.FromTape(t.ID,t.type,t.arguments),3521284610:t=>tV.FromTape(t.ID,t.type,t.arguments),1482703590:t=>eV.FromTape(t.ID,t.type,t.arguments),738039164:t=>nV.FromTape(t.ID,t.type,t.arguments),2295281155:t=>iV.FromTape(t.ID,t.type,t.arguments),655969474:t=>rV.FromTape(t.ID,t.type,t.arguments),1842657554:t=>sV.FromTape(t.ID,t.type,t.arguments),3219374653:t=>oV.FromTape(t.ID,t.type,t.arguments),90941305:t=>aV.FromTape(t.ID,t.type,t.arguments),2250791053:t=>lV.FromTape(t.ID,t.type,t.arguments),2044713172:t=>hV.FromTape(t.ID,t.type,t.arguments),2093928680:t=>cV.FromTape(t.ID,t.type,t.arguments),931644368:t=>uV.FromTape(t.ID,t.type,t.arguments),2090586900:t=>pV.FromTape(t.ID,t.type,t.arguments),3252649465:t=>dV.FromTape(t.ID,t.type,t.arguments),2405470396:t=>fV.FromTape(t.ID,t.type,t.arguments),825690147:t=>mV.FromTape(t.ID,t.type,t.arguments),2262370178:t=>gV.FromTape(t.ID,t.type,t.arguments),2893384427:t=>yV.FromTape(t.ID,t.type,t.arguments),3024970846:t=>vV.FromTape(t.ID,t.type,t.arguments),3283111854:t=>_V.FromTape(t.ID,t.type,t.arguments),2324767716:t=>TV.FromTape(t.ID,t.type,t.arguments),1469900589:t=>EV.FromTape(t.ID,t.type,t.arguments),1232101972:t=>xV.FromTape(t.ID,t.type,t.arguments),683857671:t=>bV.FromTape(t.ID,t.type,t.arguments),2770003689:t=>IV.FromTape(t.ID,t.type,t.arguments),3615266464:t=>wV.FromTape(t.ID,t.type,t.arguments),2798486643:t=>SV.FromTape(t.ID,t.type,t.arguments),3454111270:t=>RV.FromTape(t.ID,t.type,t.arguments),3915482550:t=>CV.FromTape(t.ID,t.type,t.arguments),2433181523:t=>AV.FromTape(t.ID,t.type,t.arguments),4021432810:t=>DV.FromTape(t.ID,t.type,t.arguments),3413951693:t=>OV.FromTape(t.ID,t.type,t.arguments),1580146022:t=>NV.FromTape(t.ID,t.type,t.arguments),3765753017:t=>MV.FromTape(t.ID,t.type,t.arguments),979691226:t=>PV.FromTape(t.ID,t.type,t.arguments),2572171363:t=>FV.FromTape(t.ID,t.type,t.arguments),3027567501:t=>LV.FromTape(t.ID,t.type,t.arguments),964333572:t=>kV.FromTape(t.ID,t.type,t.arguments),2320036040:t=>UV.FromTape(t.ID,t.type,t.arguments),2310774935:t=>BV.FromTape(t.ID,t.type,t.arguments),160246688:t=>zV.FromTape(t.ID,t.type,t.arguments),3939117080:t=>GV.FromTape(t.ID,t.type,t.arguments),1683148259:t=>HV.FromTape(t.ID,t.type,t.arguments),2495723537:t=>jV.FromTape(t.ID,t.type,t.arguments),1307041759:t=>VV.FromTape(t.ID,t.type,t.arguments),1027710054:t=>WV.FromTape(t.ID,t.type,t.arguments),4278684876:t=>ZV.FromTape(t.ID,t.type,t.arguments),2857406711:t=>YV.FromTape(t.ID,t.type,t.arguments),205026976:t=>qV.FromTape(t.ID,t.type,t.arguments),1865459582:t=>XV.FromTape(t.ID,t.type,t.arguments),4095574036:t=>KV.FromTape(t.ID,t.type,t.arguments),919958153:t=>QV.FromTape(t.ID,t.type,t.arguments),2728634034:t=>JV.FromTape(t.ID,t.type,t.arguments),982818633:t=>$V.FromTape(t.ID,t.type,t.arguments),3840914261:t=>tW.FromTape(t.ID,t.type,t.arguments),2655215786:t=>eW.FromTape(t.ID,t.type,t.arguments),826625072:t=>nW.FromTape(t.ID,t.type,t.arguments),1204542856:t=>iW.FromTape(t.ID,t.type,t.arguments),3945020480:t=>rW.FromTape(t.ID,t.type,t.arguments),4201705270:t=>sW.FromTape(t.ID,t.type,t.arguments),3190031847:t=>oW.FromTape(t.ID,t.type,t.arguments),2127690289:t=>aW.FromTape(t.ID,t.type,t.arguments),1638771189:t=>lW.FromTape(t.ID,t.type,t.arguments),504942748:t=>hW.FromTape(t.ID,t.type,t.arguments),3678494232:t=>cW.FromTape(t.ID,t.type,t.arguments),3242617779:t=>uW.FromTape(t.ID,t.type,t.arguments),886880790:t=>pW.FromTape(t.ID,t.type,t.arguments),2802773753:t=>dW.FromTape(t.ID,t.type,t.arguments),2565941209:t=>fW.FromTape(t.ID,t.type,t.arguments),2551354335:t=>mW.FromTape(t.ID,t.type,t.arguments),693640335:t=>gW.FromTape(t.ID,t.type,t.arguments),1462361463:t=>yW.FromTape(t.ID,t.type,t.arguments),4186316022:t=>vW.FromTape(t.ID,t.type,t.arguments),307848117:t=>_W.FromTape(t.ID,t.type,t.arguments),781010003:t=>TW.FromTape(t.ID,t.type,t.arguments),3940055652:t=>EW.FromTape(t.ID,t.type,t.arguments),279856033:t=>xW.FromTape(t.ID,t.type,t.arguments),427948657:t=>bW.FromTape(t.ID,t.type,t.arguments),3268803585:t=>IW.FromTape(t.ID,t.type,t.arguments),1441486842:t=>wW.FromTape(t.ID,t.type,t.arguments),750771296:t=>SW.FromTape(t.ID,t.type,t.arguments),1245217292:t=>RW.FromTape(t.ID,t.type,t.arguments),4122056220:t=>CW.FromTape(t.ID,t.type,t.arguments),366585022:t=>AW.FromTape(t.ID,t.type,t.arguments),3451746338:t=>DW.FromTape(t.ID,t.type,t.arguments),3523091289:t=>OW.FromTape(t.ID,t.type,t.arguments),1521410863:t=>NW.FromTape(t.ID,t.type,t.arguments),1401173127:t=>MW.FromTape(t.ID,t.type,t.arguments),478536968:t=>PW.FromTape(t.ID,t.type,t.arguments),816062949:t=>FW.FromTape(t.ID,t.type,t.arguments),1076942058:t=>LW.FromTape(t.ID,t.type,t.arguments),3377609919:t=>kW.FromTape(t.ID,t.type,t.arguments),3008791417:t=>UW.FromTape(t.ID,t.type,t.arguments),1660063152:t=>BW.FromTape(t.ID,t.type,t.arguments),2914609552:t=>zW.FromTape(t.ID,t.type,t.arguments),2943643501:t=>GW.FromTape(t.ID,t.type,t.arguments),1608871552:t=>HW.FromTape(t.ID,t.type,t.arguments),2439245199:t=>jW.FromTape(t.ID,t.type,t.arguments),1042787934:t=>VW.FromTape(t.ID,t.type,t.arguments),1856042241:t=>WW.FromTape(t.ID,t.type,t.arguments),3243963512:t=>ZW.FromTape(t.ID,t.type,t.arguments),4158566097:t=>YW.FromTape(t.ID,t.type,t.arguments),3626867408:t=>qW.FromTape(t.ID,t.type,t.arguments),2016517767:t=>XW.FromTape(t.ID,t.type,t.arguments),2781568857:t=>KW.FromTape(t.ID,t.type,t.arguments),2341007311:t=>QW.FromTape(t.ID,t.type,t.arguments),2778083089:t=>JW.FromTape(t.ID,t.type,t.arguments),448429030:t=>$W.FromTape(t.ID,t.type,t.arguments),3053780830:t=>tZ.FromTape(t.ID,t.type,t.arguments),1768891740:t=>eZ.FromTape(t.ID,t.type,t.arguments),1054537805:t=>nZ.FromTape(t.ID,t.type,t.arguments),2157484638:t=>iZ.FromTape(t.ID,t.type,t.arguments),2042790032:t=>rZ.FromTape(t.ID,t.type,t.arguments),4165799628:t=>sZ.FromTape(t.ID,t.type,t.arguments),1862484736:t=>oZ.FromTape(t.ID,t.type,t.arguments),1290935644:t=>aZ.FromTape(t.ID,t.type,t.arguments),1509187699:t=>lZ.FromTape(t.ID,t.type,t.arguments),4086658281:t=>hZ.FromTape(t.ID,t.type,t.arguments),1783015770:t=>cZ.FromTape(t.ID,t.type,t.arguments),1329646415:t=>uZ.FromTape(t.ID,t.type,t.arguments),4074543187:t=>pZ.FromTape(t.ID,t.type,t.arguments),867548509:t=>dZ.FromTape(t.ID,t.type,t.arguments),3982875396:t=>fZ.FromTape(t.ID,t.type,t.arguments),4240577450:t=>mZ.FromTape(t.ID,t.type,t.arguments),4124623270:t=>gZ.FromTape(t.ID,t.type,t.arguments),3692461612:t=>yZ.FromTape(t.ID,t.type,t.arguments),3663146110:t=>vZ.FromTape(t.ID,t.type,t.arguments),4097777520:t=>_Z.FromTape(t.ID,t.type,t.arguments),1529196076:t=>TZ.FromTape(t.ID,t.type,t.arguments),3127900445:t=>EZ.FromTape(t.ID,t.type,t.arguments),3027962421:t=>xZ.FromTape(t.ID,t.type,t.arguments),2533589738:t=>bZ.FromTape(t.ID,t.type,t.arguments),2609359061:t=>IZ.FromTape(t.ID,t.type,t.arguments),3420628829:t=>wZ.FromTape(t.ID,t.type,t.arguments),1072016465:t=>SZ.FromTape(t.ID,t.type,t.arguments),723233188:t=>RZ.FromTape(t.ID,t.type,t.arguments),3856911033:t=>CZ.FromTape(t.ID,t.type,t.arguments),1999602285:t=>AZ.FromTape(t.ID,t.type,t.arguments),1305183839:t=>DZ.FromTape(t.ID,t.type,t.arguments),3812236995:t=>OZ.FromTape(t.ID,t.type,t.arguments),1412071761:t=>NZ.FromTape(t.ID,t.type,t.arguments),710998568:t=>MZ.FromTape(t.ID,t.type,t.arguments),2706606064:t=>PZ.FromTape(t.ID,t.type,t.arguments),3893378262:t=>FZ.FromTape(t.ID,t.type,t.arguments),463610769:t=>LZ.FromTape(t.ID,t.type,t.arguments),2481509218:t=>kZ.FromTape(t.ID,t.type,t.arguments),451544542:t=>UZ.FromTape(t.ID,t.type,t.arguments),4015995234:t=>BZ.FromTape(t.ID,t.type,t.arguments),1404847402:t=>zZ.FromTape(t.ID,t.type,t.arguments),3112655638:t=>GZ.FromTape(t.ID,t.type,t.arguments),331165859:t=>HZ.FromTape(t.ID,t.type,t.arguments),4252922144:t=>jZ.FromTape(t.ID,t.type,t.arguments),1039846685:t=>VZ.FromTape(t.ID,t.type,t.arguments),338393293:t=>WZ.FromTape(t.ID,t.type,t.arguments),682877961:t=>ZZ.FromTape(t.ID,t.type,t.arguments),3544373492:t=>YZ.FromTape(t.ID,t.type,t.arguments),2515109513:t=>qZ.FromTape(t.ID,t.type,t.arguments),1179482911:t=>XZ.FromTape(t.ID,t.type,t.arguments),2273995522:t=>KZ.FromTape(t.ID,t.type,t.arguments),1004757350:t=>QZ.FromTape(t.ID,t.type,t.arguments),4243806635:t=>JZ.FromTape(t.ID,t.type,t.arguments),214636428:t=>$Z.FromTape(t.ID,t.type,t.arguments),2445595289:t=>tY.FromTape(t.ID,t.type,t.arguments),2757150158:t=>eY.FromTape(t.ID,t.type,t.arguments),3136571912:t=>nY.FromTape(t.ID,t.type,t.arguments),1807405624:t=>iY.FromTape(t.ID,t.type,t.arguments),2162789131:t=>rY.FromTape(t.ID,t.type,t.arguments),385403989:t=>sY.FromTape(t.ID,t.type,t.arguments),3478079324:t=>oY.FromTape(t.ID,t.type,t.arguments),1252848954:t=>aY.FromTape(t.ID,t.type,t.arguments),1595516126:t=>lY.FromTape(t.ID,t.type,t.arguments),609421318:t=>hY.FromTape(t.ID,t.type,t.arguments),2668620305:t=>cY.FromTape(t.ID,t.type,t.arguments),2473145415:t=>uY.FromTape(t.ID,t.type,t.arguments),1973038258:t=>pY.FromTape(t.ID,t.type,t.arguments),1597423693:t=>dY.FromTape(t.ID,t.type,t.arguments),1190533807:t=>fY.FromTape(t.ID,t.type,t.arguments),2525727697:t=>mY.FromTape(t.ID,t.type,t.arguments),3408363356:t=>gY.FromTape(t.ID,t.type,t.arguments),530289379:t=>yY.FromTape(t.ID,t.type,t.arguments),1621171031:t=>vY.FromTape(t.ID,t.type,t.arguments),2082059205:t=>_Y.FromTape(t.ID,t.type,t.arguments),734778138:t=>TY.FromTape(t.ID,t.type,t.arguments),1235345126:t=>EY.FromTape(t.ID,t.type,t.arguments),3689010777:t=>xY.FromTape(t.ID,t.type,t.arguments),2986769608:t=>bY.FromTape(t.ID,t.type,t.arguments),3657597509:t=>IY.FromTape(t.ID,t.type,t.arguments),1975003073:t=>wY.FromTape(t.ID,t.type,t.arguments),3979015343:t=>SY.FromTape(t.ID,t.type,t.arguments),2218152070:t=>RY.FromTape(t.ID,t.type,t.arguments),603775116:t=>CY.FromTape(t.ID,t.type,t.arguments),2830218821:t=>AY.FromTape(t.ID,t.type,t.arguments),3958052878:t=>DY.FromTape(t.ID,t.type,t.arguments),3049322572:t=>OY.FromTape(t.ID,t.type,t.arguments),148013059:t=>NY.FromTape(t.ID,t.type,t.arguments),4095615324:t=>MY.FromTape(t.ID,t.type,t.arguments),2233826070:t=>PY.FromTape(t.ID,t.type,t.arguments),2513912981:t=>FY.FromTape(t.ID,t.type,t.arguments),699246055:t=>LY.FromTape(t.ID,t.type,t.arguments),2028607225:t=>kY.FromTape(t.ID,t.type,t.arguments),3101698114:t=>UY.FromTape(t.ID,t.type,t.arguments),2809605785:t=>BY.FromTape(t.ID,t.type,t.arguments),4124788165:t=>zY.FromTape(t.ID,t.type,t.arguments),2934153892:t=>GY.FromTape(t.ID,t.type,t.arguments),1300840506:t=>HY.FromTape(t.ID,t.type,t.arguments),3303107099:t=>jY.FromTape(t.ID,t.type,t.arguments),1607154358:t=>VY.FromTape(t.ID,t.type,t.arguments),1878645084:t=>WY.FromTape(t.ID,t.type,t.arguments),846575682:t=>ZY.FromTape(t.ID,t.type,t.arguments),1351298697:t=>YY.FromTape(t.ID,t.type,t.arguments),626085974:t=>qY.FromTape(t.ID,t.type,t.arguments),2247615214:t=>XY.FromTape(t.ID,t.type,t.arguments),1260650574:t=>KY.FromTape(t.ID,t.type,t.arguments),1096409881:t=>QY.FromTape(t.ID,t.type,t.arguments),230924584:t=>JY.FromTape(t.ID,t.type,t.arguments),1162798199:t=>$Y.FromTape(t.ID,t.type,t.arguments),2315554128:t=>tq.FromTape(t.ID,t.type,t.arguments),2254336722:t=>eq.FromTape(t.ID,t.type,t.arguments),413509423:t=>nq.FromTape(t.ID,t.type,t.arguments),1580310250:t=>iq.FromTape(t.ID,t.type,t.arguments),3071757647:t=>rq.FromTape(t.ID,t.type,t.arguments),985171141:t=>sq.FromTape(t.ID,t.type,t.arguments),2043862942:t=>oq.FromTape(t.ID,t.type,t.arguments),531007025:t=>aq.FromTape(t.ID,t.type,t.arguments),812556717:t=>lq.FromTape(t.ID,t.type,t.arguments),5716631:t=>hq.FromTape(t.ID,t.type,t.arguments),3473067441:t=>cq.FromTape(t.ID,t.type,t.arguments),1549132990:t=>uq.FromTape(t.ID,t.type,t.arguments),2771591690:t=>pq.FromTape(t.ID,t.type,t.arguments),3206491090:t=>dq.FromTape(t.ID,t.type,t.arguments),912023232:t=>fq.FromTape(t.ID,t.type,t.arguments),3824725483:t=>mq.FromTape(t.ID,t.type,t.arguments),2347447852:t=>gq.FromTape(t.ID,t.type,t.arguments),3081323446:t=>yq.FromTape(t.ID,t.type,t.arguments),3663046924:t=>vq.FromTape(t.ID,t.type,t.arguments),2281632017:t=>_q.FromTape(t.ID,t.type,t.arguments),2415094496:t=>Tq.FromTape(t.ID,t.type,t.arguments),2387106220:t=>Eq.FromTape(t.ID,t.type,t.arguments),901063453:t=>xq.FromTape(t.ID,t.type,t.arguments),4282788508:t=>bq.FromTape(t.ID,t.type,t.arguments),3124975700:t=>Iq.FromTape(t.ID,t.type,t.arguments),1447204868:t=>wq.FromTape(t.ID,t.type,t.arguments),1983826977:t=>Sq.FromTape(t.ID,t.type,t.arguments),2636378356:t=>Rq.FromTape(t.ID,t.type,t.arguments),1640371178:t=>Cq.FromTape(t.ID,t.type,t.arguments),280115917:t=>Aq.FromTape(t.ID,t.type,t.arguments),1742049831:t=>Dq.FromTape(t.ID,t.type,t.arguments),2552916305:t=>Oq.FromTape(t.ID,t.type,t.arguments),1210645708:t=>Nq.FromTape(t.ID,t.type,t.arguments),3611470254:t=>Mq.FromTape(t.ID,t.type,t.arguments),1199560280:t=>Pq.FromTape(t.ID,t.type,t.arguments),3101149627:t=>Fq.FromTape(t.ID,t.type,t.arguments),581633288:t=>Lq.FromTape(t.ID,t.type,t.arguments),1377556343:t=>kq.FromTape(t.ID,t.type,t.arguments),1735638870:t=>Uq.FromTape(t.ID,t.type,t.arguments),1935646853:t=>Bq.FromTape(t.ID,t.type,t.arguments),3825984169:t=>zq.FromTape(t.ID,t.type,t.arguments),1692211062:t=>Gq.FromTape(t.ID,t.type,t.arguments),2595432518:t=>Hq.FromTape(t.ID,t.type,t.arguments),1620046519:t=>jq.FromTape(t.ID,t.type,t.arguments),2097647324:t=>Vq.FromTape(t.ID,t.type,t.arguments),2715220739:t=>Wq.FromTape(t.ID,t.type,t.arguments),2916149573:t=>Zq.FromTape(t.ID,t.type,t.arguments),1229763772:t=>Yq.FromTape(t.ID,t.type,t.arguments),3593883385:t=>qq.FromTape(t.ID,t.type,t.arguments),3026737570:t=>Xq.FromTape(t.ID,t.type,t.arguments),1600972822:t=>Kq.FromTape(t.ID,t.type,t.arguments),1628702193:t=>Qq.FromTape(t.ID,t.type,t.arguments),3736923433:t=>Jq.FromTape(t.ID,t.type,t.arguments),2347495698:t=>$q.FromTape(t.ID,t.type,t.arguments),3698973494:t=>tX.FromTape(t.ID,t.type,t.arguments),427810014:t=>eX.FromTape(t.ID,t.type,t.arguments),180925521:t=>nX.FromTape(t.ID,t.type,t.arguments),630975310:t=>iX.FromTape(t.ID,t.type,t.arguments),3179687236:t=>rX.FromTape(t.ID,t.type,t.arguments),4292641817:t=>sX.FromTape(t.ID,t.type,t.arguments),1911125066:t=>oX.FromTape(t.ID,t.type,t.arguments),4207607924:t=>aX.FromTape(t.ID,t.type,t.arguments),728799441:t=>lX.FromTape(t.ID,t.type,t.arguments),1417489154:t=>hX.FromTape(t.ID,t.type,t.arguments),2799835756:t=>cX.FromTape(t.ID,t.type,t.arguments),2759199220:t=>uX.FromTape(t.ID,t.type,t.arguments),1907098498:t=>pX.FromTape(t.ID,t.type,t.arguments),1530820697:t=>dX.FromTape(t.ID,t.type,t.arguments),3956297820:t=>fX.FromTape(t.ID,t.type,t.arguments),2391383451:t=>mX.FromTape(t.ID,t.type,t.arguments),3313531582:t=>gX.FromTape(t.ID,t.type,t.arguments),2769231204:t=>yX.FromTape(t.ID,t.type,t.arguments),891718957:t=>vX.FromTape(t.ID,t.type,t.arguments),926996030:t=>_X.FromTape(t.ID,t.type,t.arguments),2391406946:t=>TX.FromTape(t.ID,t.type,t.arguments),4156078855:t=>EX.FromTape(t.ID,t.type,t.arguments),3512223829:t=>xX.FromTape(t.ID,t.type,t.arguments),1898987631:t=>bX.FromTape(t.ID,t.type,t.arguments),4237592921:t=>IX.FromTape(t.ID,t.type,t.arguments),1133259667:t=>wX.FromTape(t.ID,t.type,t.arguments),3304561284:t=>SX.FromTape(t.ID,t.type,t.arguments),336235671:t=>RX.FromTape(t.ID,t.type,t.arguments),512836454:t=>CX.FromTape(t.ID,t.type,t.arguments),486154966:t=>AX.FromTape(t.ID,t.type,t.arguments),1299126871:t=>DX.FromTape(t.ID,t.type,t.arguments),4009809668:t=>OX.FromTape(t.ID,t.type,t.arguments),4088093105:t=>NX.FromTape(t.ID,t.type,t.arguments),1028945134:t=>MX.FromTape(t.ID,t.type,t.arguments),4218914973:t=>PX.FromTape(t.ID,t.type,t.arguments),3342526732:t=>FX.FromTape(t.ID,t.type,t.arguments),1236880293:t=>LX.FromTape(t.ID,t.type,t.arguments),2543172580:t=>kX.FromTape(t.ID,t.type,t.arguments),1033361043:t=>UX.FromTape(t.ID,t.type,t.arguments)};var ND=class{constructor(t){this.value=t}};ND.EMAIL="EMAIL",ND.FAX="FAX",ND.PHONE="PHONE",ND.POST="POST",ND.VERBAL="VERBAL",ND.USERDEFINED="USERDEFINED",ND.NOTDEFINED="NOTDEFINED";var MD=class{constructor(t){this.value=t}};MD.DEAD_LOAD_G="DEAD_LOAD_G",MD.COMPLETION_G1="COMPLETION_G1",MD.LIVE_LOAD_Q="LIVE_LOAD_Q",MD.SNOW_S="SNOW_S",MD.WIND_W="WIND_W",MD.PRESTRESSING_P="PRESTRESSING_P",MD.SETTLEMENT_U="SETTLEMENT_U",MD.TEMPERATURE_T="TEMPERATURE_T",MD.EARTHQUAKE_E="EARTHQUAKE_E",MD.FIRE="FIRE",MD.IMPULSE="IMPULSE",MD.IMPACT="IMPACT",MD.TRANSPORT="TRANSPORT",MD.ERECTION="ERECTION",MD.PROPPING="PROPPING",MD.SYSTEM_IMPERFECTION="SYSTEM_IMPERFECTION",MD.SHRINKAGE="SHRINKAGE",MD.CREEP="CREEP",MD.LACK_OF_FIT="LACK_OF_FIT",MD.BUOYANCY="BUOYANCY",MD.ICE="ICE",MD.CURRENT="CURRENT",MD.WAVE="WAVE",MD.RAIN="RAIN",MD.BRAKES="BRAKES",MD.USERDEFINED="USERDEFINED",MD.NOTDEFINED="NOTDEFINED";var PD=class{constructor(t){this.value=t}};PD.PERMANENT_G="PERMANENT_G",PD.VARIABLE_Q="VARIABLE_Q",PD.EXTRAORDINARY_A="EXTRAORDINARY_A",PD.USERDEFINED="USERDEFINED",PD.NOTDEFINED="NOTDEFINED";var FD=class{constructor(t){this.value=t}};FD.ELECTRICACTUATOR="ELECTRICACTUATOR",FD.HANDOPERATEDACTUATOR="HANDOPERATEDACTUATOR",FD.HYDRAULICACTUATOR="HYDRAULICACTUATOR",FD.PNEUMATICACTUATOR="PNEUMATICACTUATOR",FD.THERMOSTATICACTUATOR="THERMOSTATICACTUATOR",FD.USERDEFINED="USERDEFINED",FD.NOTDEFINED="NOTDEFINED";var LD=class{constructor(t){this.value=t}};LD.OFFICE="OFFICE",LD.SITE="SITE",LD.HOME="HOME",LD.DISTRIBUTIONPOINT="DISTRIBUTIONPOINT",LD.USERDEFINED="USERDEFINED";var kD=class{constructor(t){this.value=t}};kD.CONSTANTFLOW="CONSTANTFLOW",kD.VARIABLEFLOWPRESSUREDEPENDANT="VARIABLEFLOWPRESSUREDEPENDANT",kD.VARIABLEFLOWPRESSUREINDEPENDANT="VARIABLEFLOWPRESSUREINDEPENDANT",kD.USERDEFINED="USERDEFINED",kD.NOTDEFINED="NOTDEFINED";var UD=class{constructor(t){this.value=t}};UD.DIFFUSER="DIFFUSER",UD.GRILLE="GRILLE",UD.LOUVRE="LOUVRE",UD.REGISTER="REGISTER",UD.USERDEFINED="USERDEFINED",UD.NOTDEFINED="NOTDEFINED";var BD=class{constructor(t){this.value=t}};BD.FIXEDPLATECOUNTERFLOWEXCHANGER="FIXEDPLATECOUNTERFLOWEXCHANGER",BD.FIXEDPLATECROSSFLOWEXCHANGER="FIXEDPLATECROSSFLOWEXCHANGER",BD.FIXEDPLATEPARALLELFLOWEXCHANGER="FIXEDPLATEPARALLELFLOWEXCHANGER",BD.ROTARYWHEEL="ROTARYWHEEL",BD.RUNAROUNDCOILLOOP="RUNAROUNDCOILLOOP",BD.HEATPIPE="HEATPIPE",BD.TWINTOWERENTHALPYRECOVERYLOOPS="TWINTOWERENTHALPYRECOVERYLOOPS",BD.THERMOSIPHONSEALEDTUBEHEATEXCHANGERS="THERMOSIPHONSEALEDTUBEHEATEXCHANGERS",BD.THERMOSIPHONCOILTYPEHEATEXCHANGERS="THERMOSIPHONCOILTYPEHEATEXCHANGERS",BD.USERDEFINED="USERDEFINED",BD.NOTDEFINED="NOTDEFINED";var zD=class{constructor(t){this.value=t}};zD.BELL="BELL",zD.BREAKGLASSBUTTON="BREAKGLASSBUTTON",zD.LIGHT="LIGHT",zD.MANUALPULLBOX="MANUALPULLBOX",zD.SIREN="SIREN",zD.WHISTLE="WHISTLE",zD.USERDEFINED="USERDEFINED",zD.NOTDEFINED="NOTDEFINED";var GD=class{constructor(t){this.value=t}};GD.USERDEFINED="USERDEFINED",GD.NOTDEFINED="NOTDEFINED";var HD=class{constructor(t){this.value=t}};HD.IN_PLANE_LOADING_2D="IN_PLANE_LOADING_2D",HD.OUT_PLANE_LOADING_2D="OUT_PLANE_LOADING_2D",HD.LOADING_3D="LOADING_3D",HD.USERDEFINED="USERDEFINED",HD.NOTDEFINED="NOTDEFINED";var jD=class{constructor(t){this.value=t}};jD.FIRST_ORDER_THEORY="FIRST_ORDER_THEORY",jD.SECOND_ORDER_THEORY="SECOND_ORDER_THEORY",jD.THIRD_ORDER_THEORY="THIRD_ORDER_THEORY",jD.FULL_NONLINEAR_THEORY="FULL_NONLINEAR_THEORY",jD.USERDEFINED="USERDEFINED",jD.NOTDEFINED="NOTDEFINED";var VD=class{constructor(t){this.value=t}};VD.ADD="ADD",VD.DIVIDE="DIVIDE",VD.MULTIPLY="MULTIPLY",VD.SUBTRACT="SUBTRACT";var WD=class{constructor(t){this.value=t}};WD.SITE="SITE",WD.FACTORY="FACTORY",WD.NOTDEFINED="NOTDEFINED";var ZD=class{constructor(t){this.value=t}};ZD.AMPLIFIER="AMPLIFIER",ZD.CAMERA="CAMERA",ZD.DISPLAY="DISPLAY",ZD.MICROPHONE="MICROPHONE",ZD.PLAYER="PLAYER",ZD.PROJECTOR="PROJECTOR",ZD.RECEIVER="RECEIVER",ZD.SPEAKER="SPEAKER",ZD.SWITCHER="SWITCHER",ZD.TELEPHONE="TELEPHONE",ZD.TUNER="TUNER",ZD.USERDEFINED="USERDEFINED",ZD.NOTDEFINED="NOTDEFINED";var YD=class{constructor(t){this.value=t}};YD.POLYLINE_FORM="POLYLINE_FORM",YD.CIRCULAR_ARC="CIRCULAR_ARC",YD.ELLIPTIC_ARC="ELLIPTIC_ARC",YD.PARABOLIC_ARC="PARABOLIC_ARC",YD.HYPERBOLIC_ARC="HYPERBOLIC_ARC",YD.UNSPECIFIED="UNSPECIFIED";var qD=class{constructor(t){this.value=t}};qD.PLANE_SURF="PLANE_SURF",qD.CYLINDRICAL_SURF="CYLINDRICAL_SURF",qD.CONICAL_SURF="CONICAL_SURF",qD.SPHERICAL_SURF="SPHERICAL_SURF",qD.TOROIDAL_SURF="TOROIDAL_SURF",qD.SURF_OF_REVOLUTION="SURF_OF_REVOLUTION",qD.RULED_SURF="RULED_SURF",qD.GENERALISED_CONE="GENERALISED_CONE",qD.QUADRIC_SURF="QUADRIC_SURF",qD.SURF_OF_LINEAR_EXTRUSION="SURF_OF_LINEAR_EXTRUSION",qD.UNSPECIFIED="UNSPECIFIED";var XD=class{constructor(t){this.value=t}};XD.BEAM="BEAM",XD.JOIST="JOIST",XD.HOLLOWCORE="HOLLOWCORE",XD.LINTEL="LINTEL",XD.SPANDREL="SPANDREL",XD.T_BEAM="T_BEAM",XD.GIRDER_SEGMENT="GIRDER_SEGMENT",XD.DIAPHRAGM="DIAPHRAGM",XD.PIERCAP="PIERCAP",XD.HATSTONE="HATSTONE",XD.CORNICE="CORNICE",XD.EDGEBEAM="EDGEBEAM",XD.USERDEFINED="USERDEFINED",XD.NOTDEFINED="NOTDEFINED";var KD=class{constructor(t){this.value=t}};KD.FIXED_MOVEMENT="FIXED_MOVEMENT",KD.GUIDED_LONGITUDINAL="GUIDED_LONGITUDINAL",KD.GUIDED_TRANSVERSAL="GUIDED_TRANSVERSAL",KD.FREE_MOVEMENT="FREE_MOVEMENT",KD.NOTDEFINED="NOTDEFINED";var QD=class{constructor(t){this.value=t}};QD.CYLINDRICAL="CYLINDRICAL",QD.SPHERICAL="SPHERICAL",QD.ELASTOMERIC="ELASTOMERIC",QD.POT="POT",QD.GUIDE="GUIDE",QD.ROCKER="ROCKER",QD.ROLLER="ROLLER",QD.DISK="DISK",QD.USERDEFINED="USERDEFINED",QD.NOTDEFINED="NOTDEFINED";var JD=class{constructor(t){this.value=t}};JD.GREATERTHAN="GREATERTHAN",JD.GREATERTHANOREQUALTO="GREATERTHANOREQUALTO",JD.LESSTHAN="LESSTHAN",JD.LESSTHANOREQUALTO="LESSTHANOREQUALTO",JD.EQUALTO="EQUALTO",JD.NOTEQUALTO="NOTEQUALTO",JD.INCLUDES="INCLUDES",JD.NOTINCLUDES="NOTINCLUDES",JD.INCLUDEDIN="INCLUDEDIN",JD.NOTINCLUDEDIN="NOTINCLUDEDIN";var $D=class{constructor(t){this.value=t}};$D.WATER="WATER",$D.STEAM="STEAM",$D.USERDEFINED="USERDEFINED",$D.NOTDEFINED="NOTDEFINED";var tO=class{constructor(t){this.value=t}};tO.UNION="UNION",tO.INTERSECTION="INTERSECTION",tO.DIFFERENCE="DIFFERENCE";var eO=class{constructor(t){this.value=t}};eO.ABUTMENT="ABUTMENT",eO.DECK="DECK",eO.DECK_SEGMENT="DECK_SEGMENT",eO.FOUNDATION="FOUNDATION",eO.PIER="PIER",eO.PIER_SEGMENT="PIER_SEGMENT",eO.PYLON="PYLON",eO.SUBSTRUCTURE="SUBSTRUCTURE",eO.SUPERSTRUCTURE="SUPERSTRUCTURE",eO.SURFACESTRUCTURE="SURFACESTRUCTURE",eO.USERDEFINED="USERDEFINED",eO.NOTDEFINED="NOTDEFINED";var nO=class{constructor(t){this.value=t}};nO.ARCHED="ARCHED",nO.CABLE_STAYED="CABLE_STAYED",nO.CANTILEVER="CANTILEVER",nO.CULVERT="CULVERT",nO.FRAMEWORK="FRAMEWORK",nO.GIRDER="GIRDER",nO.SUSPENSION="SUSPENSION",nO.TRUSS="TRUSS",nO.USERDEFINED="USERDEFINED",nO.NOTDEFINED="NOTDEFINED";var iO=class{constructor(t){this.value=t}};iO.INSULATION="INSULATION",iO.PRECASTPANEL="PRECASTPANEL",iO.APRON="APRON",iO.USERDEFINED="USERDEFINED",iO.NOTDEFINED="NOTDEFINED";var rO=class{constructor(t){this.value=t}};rO.COMPLEX="COMPLEX",rO.ELEMENT="ELEMENT",rO.PARTIAL="PARTIAL",rO.PROVISIONFORVOID="PROVISIONFORVOID",rO.PROVISIONFORSPACE="PROVISIONFORSPACE",rO.USERDEFINED="USERDEFINED",rO.NOTDEFINED="NOTDEFINED";var sO=class{constructor(t){this.value=t}};sO.FENESTRATION="FENESTRATION",sO.FOUNDATION="FOUNDATION",sO.LOADBEARING="LOADBEARING",sO.OUTERSHELL="OUTERSHELL",sO.SHADING="SHADING",sO.TRANSPORT="TRANSPORT",sO.REINFORCING="REINFORCING",sO.PRESTRESSING="PRESTRESSING",sO.USERDEFINED="USERDEFINED",sO.NOTDEFINED="NOTDEFINED";var oO=class{constructor(t){this.value=t}};oO.USERDEFINED="USERDEFINED",oO.NOTDEFINED="NOTDEFINED";var aO=class{constructor(t){this.value=t}};aO.BEND="BEND",aO.CROSS="CROSS",aO.REDUCER="REDUCER",aO.TEE="TEE",aO.USERDEFINED="USERDEFINED",aO.NOTDEFINED="NOTDEFINED";var lO=class{constructor(t){this.value=t}};lO.CABLELADDERSEGMENT="CABLELADDERSEGMENT",lO.CABLETRAYSEGMENT="CABLETRAYSEGMENT",lO.CABLETRUNKINGSEGMENT="CABLETRUNKINGSEGMENT",lO.CONDUITSEGMENT="CONDUITSEGMENT",lO.USERDEFINED="USERDEFINED",lO.NOTDEFINED="NOTDEFINED";var hO=class{constructor(t){this.value=t}};hO.CONNECTOR="CONNECTOR",hO.ENTRY="ENTRY",hO.EXIT="EXIT",hO.JUNCTION="JUNCTION",hO.TRANSITION="TRANSITION",hO.USERDEFINED="USERDEFINED",hO.NOTDEFINED="NOTDEFINED";var cO=class{constructor(t){this.value=t}};cO.BUSBARSEGMENT="BUSBARSEGMENT",cO.CABLESEGMENT="CABLESEGMENT",cO.CONDUCTORSEGMENT="CONDUCTORSEGMENT",cO.CORESEGMENT="CORESEGMENT",cO.USERDEFINED="USERDEFINED",cO.NOTDEFINED="NOTDEFINED";var uO=class{constructor(t){this.value=t}};uO.WELL="WELL",uO.CAISSON="CAISSON",uO.USERDEFINED="USERDEFINED",uO.NOTDEFINED="NOTDEFINED";var pO=class{constructor(t){this.value=t}};pO.NOCHANGE="NOCHANGE",pO.MODIFIED="MODIFIED",pO.ADDED="ADDED",pO.DELETED="DELETED",pO.NOTDEFINED="NOTDEFINED";var dO=class{constructor(t){this.value=t}};dO.AIRCOOLED="AIRCOOLED",dO.WATERCOOLED="WATERCOOLED",dO.HEATRECOVERY="HEATRECOVERY",dO.USERDEFINED="USERDEFINED",dO.NOTDEFINED="NOTDEFINED";var fO=class{constructor(t){this.value=t}};fO.USERDEFINED="USERDEFINED",fO.NOTDEFINED="NOTDEFINED";var mO=class{constructor(t){this.value=t}};mO.DXCOOLINGCOIL="DXCOOLINGCOIL",mO.ELECTRICHEATINGCOIL="ELECTRICHEATINGCOIL",mO.GASHEATINGCOIL="GASHEATINGCOIL",mO.HYDRONICCOIL="HYDRONICCOIL",mO.STEAMHEATINGCOIL="STEAMHEATINGCOIL",mO.WATERCOOLINGCOIL="WATERCOOLINGCOIL",mO.WATERHEATINGCOIL="WATERHEATINGCOIL",mO.USERDEFINED="USERDEFINED",mO.NOTDEFINED="NOTDEFINED";var gO=class{constructor(t){this.value=t}};gO.COLUMN="COLUMN",gO.PILASTER="PILASTER",gO.PIERSTEM="PIERSTEM",gO.PIERSTEM_SEGMENT="PIERSTEM_SEGMENT",gO.STANDCOLUMN="STANDCOLUMN",gO.USERDEFINED="USERDEFINED",gO.NOTDEFINED="NOTDEFINED";var yO=class{constructor(t){this.value=t}};yO.ANTENNA="ANTENNA",yO.COMPUTER="COMPUTER",yO.FAX="FAX",yO.GATEWAY="GATEWAY",yO.MODEM="MODEM",yO.NETWORKAPPLIANCE="NETWORKAPPLIANCE",yO.NETWORKBRIDGE="NETWORKBRIDGE",yO.NETWORKHUB="NETWORKHUB",yO.PRINTER="PRINTER",yO.REPEATER="REPEATER",yO.ROUTER="ROUTER",yO.SCANNER="SCANNER",yO.USERDEFINED="USERDEFINED",yO.NOTDEFINED="NOTDEFINED";var vO=class{constructor(t){this.value=t}};vO.P_COMPLEX="P_COMPLEX",vO.Q_COMPLEX="Q_COMPLEX";var _O=class{constructor(t){this.value=t}};_O.DYNAMIC="DYNAMIC",_O.RECIPROCATING="RECIPROCATING",_O.ROTARY="ROTARY",_O.SCROLL="SCROLL",_O.TROCHOIDAL="TROCHOIDAL",_O.SINGLESTAGE="SINGLESTAGE",_O.BOOSTER="BOOSTER",_O.OPENTYPE="OPENTYPE",_O.HERMETIC="HERMETIC",_O.SEMIHERMETIC="SEMIHERMETIC",_O.WELDEDSHELLHERMETIC="WELDEDSHELLHERMETIC",_O.ROLLINGPISTON="ROLLINGPISTON",_O.ROTARYVANE="ROTARYVANE",_O.SINGLESCREW="SINGLESCREW",_O.TWINSCREW="TWINSCREW",_O.USERDEFINED="USERDEFINED",_O.NOTDEFINED="NOTDEFINED";var TO=class{constructor(t){this.value=t}};TO.AIRCOOLED="AIRCOOLED",TO.EVAPORATIVECOOLED="EVAPORATIVECOOLED",TO.WATERCOOLED="WATERCOOLED",TO.WATERCOOLEDBRAZEDPLATE="WATERCOOLEDBRAZEDPLATE",TO.WATERCOOLEDSHELLCOIL="WATERCOOLEDSHELLCOIL",TO.WATERCOOLEDSHELLTUBE="WATERCOOLEDSHELLTUBE",TO.WATERCOOLEDTUBEINTUBE="WATERCOOLEDTUBEINTUBE",TO.USERDEFINED="USERDEFINED",TO.NOTDEFINED="NOTDEFINED";var EO=class{constructor(t){this.value=t}};EO.ATPATH="ATPATH",EO.ATSTART="ATSTART",EO.ATEND="ATEND",EO.NOTDEFINED="NOTDEFINED";var xO=class{constructor(t){this.value=t}};xO.HARD="HARD",xO.SOFT="SOFT",xO.ADVISORY="ADVISORY",xO.USERDEFINED="USERDEFINED",xO.NOTDEFINED="NOTDEFINED";var bO=class{constructor(t){this.value=t}};bO.DEMOLISHING="DEMOLISHING",bO.EARTHMOVING="EARTHMOVING",bO.ERECTING="ERECTING",bO.HEATING="HEATING",bO.LIGHTING="LIGHTING",bO.PAVING="PAVING",bO.PUMPING="PUMPING",bO.TRANSPORTING="TRANSPORTING",bO.USERDEFINED="USERDEFINED",bO.NOTDEFINED="NOTDEFINED";var IO=class{constructor(t){this.value=t}};IO.AGGREGATES="AGGREGATES",IO.CONCRETE="CONCRETE",IO.DRYWALL="DRYWALL",IO.FUEL="FUEL",IO.GYPSUM="GYPSUM",IO.MASONRY="MASONRY",IO.METAL="METAL",IO.PLASTIC="PLASTIC",IO.WOOD="WOOD",IO.NOTDEFINED="NOTDEFINED",IO.USERDEFINED="USERDEFINED";var wO=class{constructor(t){this.value=t}};wO.ASSEMBLY="ASSEMBLY",wO.FORMWORK="FORMWORK",wO.USERDEFINED="USERDEFINED",wO.NOTDEFINED="NOTDEFINED";var SO=class{constructor(t){this.value=t}};SO.FLOATING="FLOATING",SO.PROGRAMMABLE="PROGRAMMABLE",SO.PROPORTIONAL="PROPORTIONAL",SO.MULTIPOSITION="MULTIPOSITION",SO.TWOPOSITION="TWOPOSITION",SO.USERDEFINED="USERDEFINED",SO.NOTDEFINED="NOTDEFINED";var RO=class{constructor(t){this.value=t}};RO.ACTIVE="ACTIVE",RO.PASSIVE="PASSIVE",RO.USERDEFINED="USERDEFINED",RO.NOTDEFINED="NOTDEFINED";var CO=class{constructor(t){this.value=t}};CO.NATURALDRAFT="NATURALDRAFT",CO.MECHANICALINDUCEDDRAFT="MECHANICALINDUCEDDRAFT",CO.MECHANICALFORCEDDRAFT="MECHANICALFORCEDDRAFT",CO.USERDEFINED="USERDEFINED",CO.NOTDEFINED="NOTDEFINED";var AO=class{constructor(t){this.value=t}};AO.USERDEFINED="USERDEFINED",AO.NOTDEFINED="NOTDEFINED";var DO=class{constructor(t){this.value=t}};DO.BUDGET="BUDGET",DO.COSTPLAN="COSTPLAN",DO.ESTIMATE="ESTIMATE",DO.TENDER="TENDER",DO.PRICEDBILLOFQUANTITIES="PRICEDBILLOFQUANTITIES",DO.UNPRICEDBILLOFQUANTITIES="UNPRICEDBILLOFQUANTITIES",DO.SCHEDULEOFRATES="SCHEDULEOFRATES",DO.USERDEFINED="USERDEFINED",DO.NOTDEFINED="NOTDEFINED";var OO=class{constructor(t){this.value=t}};OO.CEILING="CEILING",OO.FLOORING="FLOORING",OO.CLADDING="CLADDING",OO.ROOFING="ROOFING",OO.MOLDING="MOLDING",OO.SKIRTINGBOARD="SKIRTINGBOARD",OO.INSULATION="INSULATION",OO.MEMBRANE="MEMBRANE",OO.SLEEVING="SLEEVING",OO.WRAPPING="WRAPPING",OO.COPING="COPING",OO.USERDEFINED="USERDEFINED",OO.NOTDEFINED="NOTDEFINED";var NO=class{constructor(t){this.value=t}};NO.OFFICE="OFFICE",NO.SITE="SITE",NO.USERDEFINED="USERDEFINED",NO.NOTDEFINED="NOTDEFINED";var MO=class{constructor(t){this.value=t}};MO.USERDEFINED="USERDEFINED",MO.NOTDEFINED="NOTDEFINED";var PO=class{constructor(t){this.value=t}};PO.LINEAR="LINEAR",PO.LOG_LINEAR="LOG_LINEAR",PO.LOG_LOG="LOG_LOG",PO.NOTDEFINED="NOTDEFINED";var FO=class{constructor(t){this.value=t}};FO.BACKDRAFTDAMPER="BACKDRAFTDAMPER",FO.BALANCINGDAMPER="BALANCINGDAMPER",FO.BLASTDAMPER="BLASTDAMPER",FO.CONTROLDAMPER="CONTROLDAMPER",FO.FIREDAMPER="FIREDAMPER",FO.FIRESMOKEDAMPER="FIRESMOKEDAMPER",FO.FUMEHOODEXHAUST="FUMEHOODEXHAUST",FO.GRAVITYDAMPER="GRAVITYDAMPER",FO.GRAVITYRELIEFDAMPER="GRAVITYRELIEFDAMPER",FO.RELIEFDAMPER="RELIEFDAMPER",FO.SMOKEDAMPER="SMOKEDAMPER",FO.USERDEFINED="USERDEFINED",FO.NOTDEFINED="NOTDEFINED";var LO=class{constructor(t){this.value=t}};LO.MEASURED="MEASURED",LO.PREDICTED="PREDICTED",LO.SIMULATED="SIMULATED",LO.USERDEFINED="USERDEFINED",LO.NOTDEFINED="NOTDEFINED";var kO=class{constructor(t){this.value=t}};kO.ANGULARVELOCITYUNIT="ANGULARVELOCITYUNIT",kO.AREADENSITYUNIT="AREADENSITYUNIT",kO.COMPOUNDPLANEANGLEUNIT="COMPOUNDPLANEANGLEUNIT",kO.DYNAMICVISCOSITYUNIT="DYNAMICVISCOSITYUNIT",kO.HEATFLUXDENSITYUNIT="HEATFLUXDENSITYUNIT",kO.INTEGERCOUNTRATEUNIT="INTEGERCOUNTRATEUNIT",kO.ISOTHERMALMOISTURECAPACITYUNIT="ISOTHERMALMOISTURECAPACITYUNIT",kO.KINEMATICVISCOSITYUNIT="KINEMATICVISCOSITYUNIT",kO.LINEARVELOCITYUNIT="LINEARVELOCITYUNIT",kO.MASSDENSITYUNIT="MASSDENSITYUNIT",kO.MASSFLOWRATEUNIT="MASSFLOWRATEUNIT",kO.MOISTUREDIFFUSIVITYUNIT="MOISTUREDIFFUSIVITYUNIT",kO.MOLECULARWEIGHTUNIT="MOLECULARWEIGHTUNIT",kO.SPECIFICHEATCAPACITYUNIT="SPECIFICHEATCAPACITYUNIT",kO.THERMALADMITTANCEUNIT="THERMALADMITTANCEUNIT",kO.THERMALCONDUCTANCEUNIT="THERMALCONDUCTANCEUNIT",kO.THERMALRESISTANCEUNIT="THERMALRESISTANCEUNIT",kO.THERMALTRANSMITTANCEUNIT="THERMALTRANSMITTANCEUNIT",kO.VAPORPERMEABILITYUNIT="VAPORPERMEABILITYUNIT",kO.VOLUMETRICFLOWRATEUNIT="VOLUMETRICFLOWRATEUNIT",kO.ROTATIONALFREQUENCYUNIT="ROTATIONALFREQUENCYUNIT",kO.TORQUEUNIT="TORQUEUNIT",kO.MOMENTOFINERTIAUNIT="MOMENTOFINERTIAUNIT",kO.LINEARMOMENTUNIT="LINEARMOMENTUNIT",kO.LINEARFORCEUNIT="LINEARFORCEUNIT",kO.PLANARFORCEUNIT="PLANARFORCEUNIT",kO.MODULUSOFELASTICITYUNIT="MODULUSOFELASTICITYUNIT",kO.SHEARMODULUSUNIT="SHEARMODULUSUNIT",kO.LINEARSTIFFNESSUNIT="LINEARSTIFFNESSUNIT",kO.ROTATIONALSTIFFNESSUNIT="ROTATIONALSTIFFNESSUNIT",kO.MODULUSOFSUBGRADEREACTIONUNIT="MODULUSOFSUBGRADEREACTIONUNIT",kO.ACCELERATIONUNIT="ACCELERATIONUNIT",kO.CURVATUREUNIT="CURVATUREUNIT",kO.HEATINGVALUEUNIT="HEATINGVALUEUNIT",kO.IONCONCENTRATIONUNIT="IONCONCENTRATIONUNIT",kO.LUMINOUSINTENSITYDISTRIBUTIONUNIT="LUMINOUSINTENSITYDISTRIBUTIONUNIT",kO.MASSPERLENGTHUNIT="MASSPERLENGTHUNIT",kO.MODULUSOFLINEARSUBGRADEREACTIONUNIT="MODULUSOFLINEARSUBGRADEREACTIONUNIT",kO.MODULUSOFROTATIONALSUBGRADEREACTIONUNIT="MODULUSOFROTATIONALSUBGRADEREACTIONUNIT",kO.PHUNIT="PHUNIT",kO.ROTATIONALMASSUNIT="ROTATIONALMASSUNIT",kO.SECTIONAREAINTEGRALUNIT="SECTIONAREAINTEGRALUNIT",kO.SECTIONMODULUSUNIT="SECTIONMODULUSUNIT",kO.SOUNDPOWERLEVELUNIT="SOUNDPOWERLEVELUNIT",kO.SOUNDPOWERUNIT="SOUNDPOWERUNIT",kO.SOUNDPRESSURELEVELUNIT="SOUNDPRESSURELEVELUNIT",kO.SOUNDPRESSUREUNIT="SOUNDPRESSUREUNIT",kO.TEMPERATUREGRADIENTUNIT="TEMPERATUREGRADIENTUNIT",kO.TEMPERATURERATEOFCHANGEUNIT="TEMPERATURERATEOFCHANGEUNIT",kO.THERMALEXPANSIONCOEFFICIENTUNIT="THERMALEXPANSIONCOEFFICIENTUNIT",kO.WARPINGCONSTANTUNIT="WARPINGCONSTANTUNIT",kO.WARPINGMOMENTUNIT="WARPINGMOMENTUNIT",kO.USERDEFINED="USERDEFINED";var UO=class{constructor(t){this.value=t}};UO.POSITIVE="POSITIVE",UO.NEGATIVE="NEGATIVE";var BO=class{constructor(t){this.value=t}};BO.ANCHORPLATE="ANCHORPLATE",BO.BRACKET="BRACKET",BO.SHOE="SHOE",BO.EXPANSION_JOINT_DEVICE="EXPANSION_JOINT_DEVICE",BO.USERDEFINED="USERDEFINED",BO.NOTDEFINED="NOTDEFINED";var zO=class{constructor(t){this.value=t}};zO.FORMEDDUCT="FORMEDDUCT",zO.INSPECTIONCHAMBER="INSPECTIONCHAMBER",zO.INSPECTIONPIT="INSPECTIONPIT",zO.MANHOLE="MANHOLE",zO.METERCHAMBER="METERCHAMBER",zO.SUMP="SUMP",zO.TRENCH="TRENCH",zO.VALVECHAMBER="VALVECHAMBER",zO.USERDEFINED="USERDEFINED",zO.NOTDEFINED="NOTDEFINED";var GO=class{constructor(t){this.value=t}};GO.CABLE="CABLE",GO.CABLECARRIER="CABLECARRIER",GO.DUCT="DUCT",GO.PIPE="PIPE",GO.USERDEFINED="USERDEFINED",GO.NOTDEFINED="NOTDEFINED";var HO=class{constructor(t){this.value=t}};HO.AIRCONDITIONING="AIRCONDITIONING",HO.AUDIOVISUAL="AUDIOVISUAL",HO.CHEMICAL="CHEMICAL",HO.CHILLEDWATER="CHILLEDWATER",HO.COMMUNICATION="COMMUNICATION",HO.COMPRESSEDAIR="COMPRESSEDAIR",HO.CONDENSERWATER="CONDENSERWATER",HO.CONTROL="CONTROL",HO.CONVEYING="CONVEYING",HO.DATA="DATA",HO.DISPOSAL="DISPOSAL",HO.DOMESTICCOLDWATER="DOMESTICCOLDWATER",HO.DOMESTICHOTWATER="DOMESTICHOTWATER",HO.DRAINAGE="DRAINAGE",HO.EARTHING="EARTHING",HO.ELECTRICAL="ELECTRICAL",HO.ELECTROACOUSTIC="ELECTROACOUSTIC",HO.EXHAUST="EXHAUST",HO.FIREPROTECTION="FIREPROTECTION",HO.FUEL="FUEL",HO.GAS="GAS",HO.HAZARDOUS="HAZARDOUS",HO.HEATING="HEATING",HO.LIGHTING="LIGHTING",HO.LIGHTNINGPROTECTION="LIGHTNINGPROTECTION",HO.MUNICIPALSOLIDWASTE="MUNICIPALSOLIDWASTE",HO.OIL="OIL",HO.OPERATIONAL="OPERATIONAL",HO.POWERGENERATION="POWERGENERATION",HO.RAINWATER="RAINWATER",HO.REFRIGERATION="REFRIGERATION",HO.SECURITY="SECURITY",HO.SEWAGE="SEWAGE",HO.SIGNAL="SIGNAL",HO.STORMWATER="STORMWATER",HO.TELEPHONE="TELEPHONE",HO.TV="TV",HO.VACUUM="VACUUM",HO.VENT="VENT",HO.VENTILATION="VENTILATION",HO.WASTEWATER="WASTEWATER",HO.WATERSUPPLY="WATERSUPPLY",HO.USERDEFINED="USERDEFINED",HO.NOTDEFINED="NOTDEFINED";var jO=class{constructor(t){this.value=t}};jO.PUBLIC="PUBLIC",jO.RESTRICTED="RESTRICTED",jO.CONFIDENTIAL="CONFIDENTIAL",jO.PERSONAL="PERSONAL",jO.USERDEFINED="USERDEFINED",jO.NOTDEFINED="NOTDEFINED";var VO=class{constructor(t){this.value=t}};VO.DRAFT="DRAFT",VO.FINALDRAFT="FINALDRAFT",VO.FINAL="FINAL",VO.REVISION="REVISION",VO.NOTDEFINED="NOTDEFINED";var WO=class{constructor(t){this.value=t}};WO.SWINGING="SWINGING",WO.DOUBLE_ACTING="DOUBLE_ACTING",WO.SLIDING="SLIDING",WO.FOLDING="FOLDING",WO.REVOLVING="REVOLVING",WO.ROLLINGUP="ROLLINGUP",WO.FIXEDPANEL="FIXEDPANEL",WO.USERDEFINED="USERDEFINED",WO.NOTDEFINED="NOTDEFINED";var ZO=class{constructor(t){this.value=t}};ZO.LEFT="LEFT",ZO.MIDDLE="MIDDLE",ZO.RIGHT="RIGHT",ZO.NOTDEFINED="NOTDEFINED";var YO=class{constructor(t){this.value=t}};YO.ALUMINIUM="ALUMINIUM",YO.HIGH_GRADE_STEEL="HIGH_GRADE_STEEL",YO.STEEL="STEEL",YO.WOOD="WOOD",YO.ALUMINIUM_WOOD="ALUMINIUM_WOOD",YO.ALUMINIUM_PLASTIC="ALUMINIUM_PLASTIC",YO.PLASTIC="PLASTIC",YO.USERDEFINED="USERDEFINED",YO.NOTDEFINED="NOTDEFINED";var qO=class{constructor(t){this.value=t}};qO.SINGLE_SWING_LEFT="SINGLE_SWING_LEFT",qO.SINGLE_SWING_RIGHT="SINGLE_SWING_RIGHT",qO.DOUBLE_DOOR_SINGLE_SWING="DOUBLE_DOOR_SINGLE_SWING",qO.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT="DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT",qO.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT="DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT",qO.DOUBLE_SWING_LEFT="DOUBLE_SWING_LEFT",qO.DOUBLE_SWING_RIGHT="DOUBLE_SWING_RIGHT",qO.DOUBLE_DOOR_DOUBLE_SWING="DOUBLE_DOOR_DOUBLE_SWING",qO.SLIDING_TO_LEFT="SLIDING_TO_LEFT",qO.SLIDING_TO_RIGHT="SLIDING_TO_RIGHT",qO.DOUBLE_DOOR_SLIDING="DOUBLE_DOOR_SLIDING",qO.FOLDING_TO_LEFT="FOLDING_TO_LEFT",qO.FOLDING_TO_RIGHT="FOLDING_TO_RIGHT",qO.DOUBLE_DOOR_FOLDING="DOUBLE_DOOR_FOLDING",qO.REVOLVING="REVOLVING",qO.ROLLINGUP="ROLLINGUP",qO.USERDEFINED="USERDEFINED",qO.NOTDEFINED="NOTDEFINED";var XO=class{constructor(t){this.value=t}};XO.DOOR="DOOR",XO.GATE="GATE",XO.TRAPDOOR="TRAPDOOR",XO.USERDEFINED="USERDEFINED",XO.NOTDEFINED="NOTDEFINED";var KO=class{constructor(t){this.value=t}};KO.SINGLE_SWING_LEFT="SINGLE_SWING_LEFT",KO.SINGLE_SWING_RIGHT="SINGLE_SWING_RIGHT",KO.DOUBLE_DOOR_SINGLE_SWING="DOUBLE_DOOR_SINGLE_SWING",KO.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT="DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT",KO.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT="DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT",KO.DOUBLE_SWING_LEFT="DOUBLE_SWING_LEFT",KO.DOUBLE_SWING_RIGHT="DOUBLE_SWING_RIGHT",KO.DOUBLE_DOOR_DOUBLE_SWING="DOUBLE_DOOR_DOUBLE_SWING",KO.SLIDING_TO_LEFT="SLIDING_TO_LEFT",KO.SLIDING_TO_RIGHT="SLIDING_TO_RIGHT",KO.DOUBLE_DOOR_SLIDING="DOUBLE_DOOR_SLIDING",KO.FOLDING_TO_LEFT="FOLDING_TO_LEFT",KO.FOLDING_TO_RIGHT="FOLDING_TO_RIGHT",KO.DOUBLE_DOOR_FOLDING="DOUBLE_DOOR_FOLDING",KO.REVOLVING="REVOLVING",KO.ROLLINGUP="ROLLINGUP",KO.SWING_FIXED_LEFT="SWING_FIXED_LEFT",KO.SWING_FIXED_RIGHT="SWING_FIXED_RIGHT",KO.USERDEFINED="USERDEFINED",KO.NOTDEFINED="NOTDEFINED";var QO=class{constructor(t){this.value=t}};QO.BEND="BEND",QO.CONNECTOR="CONNECTOR",QO.ENTRY="ENTRY",QO.EXIT="EXIT",QO.JUNCTION="JUNCTION",QO.OBSTRUCTION="OBSTRUCTION",QO.TRANSITION="TRANSITION",QO.USERDEFINED="USERDEFINED",QO.NOTDEFINED="NOTDEFINED";var JO=class{constructor(t){this.value=t}};JO.RIGIDSEGMENT="RIGIDSEGMENT",JO.FLEXIBLESEGMENT="FLEXIBLESEGMENT",JO.USERDEFINED="USERDEFINED",JO.NOTDEFINED="NOTDEFINED";var $O=class{constructor(t){this.value=t}};$O.FLATOVAL="FLATOVAL",$O.RECTANGULAR="RECTANGULAR",$O.ROUND="ROUND",$O.USERDEFINED="USERDEFINED",$O.NOTDEFINED="NOTDEFINED";var tN=class{constructor(t){this.value=t}};tN.DISHWASHER="DISHWASHER",tN.ELECTRICCOOKER="ELECTRICCOOKER",tN.FREESTANDINGELECTRICHEATER="FREESTANDINGELECTRICHEATER",tN.FREESTANDINGFAN="FREESTANDINGFAN",tN.FREESTANDINGWATERHEATER="FREESTANDINGWATERHEATER",tN.FREESTANDINGWATERCOOLER="FREESTANDINGWATERCOOLER",tN.FREEZER="FREEZER",tN.FRIDGE_FREEZER="FRIDGE_FREEZER",tN.HANDDRYER="HANDDRYER",tN.KITCHENMACHINE="KITCHENMACHINE",tN.MICROWAVE="MICROWAVE",tN.PHOTOCOPIER="PHOTOCOPIER",tN.REFRIGERATOR="REFRIGERATOR",tN.TUMBLEDRYER="TUMBLEDRYER",tN.VENDINGMACHINE="VENDINGMACHINE",tN.WASHINGMACHINE="WASHINGMACHINE",tN.USERDEFINED="USERDEFINED",tN.NOTDEFINED="NOTDEFINED";var eN=class{constructor(t){this.value=t}};eN.CONSUMERUNIT="CONSUMERUNIT",eN.DISTRIBUTIONBOARD="DISTRIBUTIONBOARD",eN.MOTORCONTROLCENTRE="MOTORCONTROLCENTRE",eN.SWITCHBOARD="SWITCHBOARD",eN.USERDEFINED="USERDEFINED",eN.NOTDEFINED="NOTDEFINED";var nN=class{constructor(t){this.value=t}};nN.BATTERY="BATTERY",nN.CAPACITORBANK="CAPACITORBANK",nN.HARMONICFILTER="HARMONICFILTER",nN.INDUCTORBANK="INDUCTORBANK",nN.UPS="UPS",nN.USERDEFINED="USERDEFINED",nN.NOTDEFINED="NOTDEFINED";var iN=class{constructor(t){this.value=t}};iN.CHP="CHP",iN.ENGINEGENERATOR="ENGINEGENERATOR",iN.STANDALONE="STANDALONE",iN.USERDEFINED="USERDEFINED",iN.NOTDEFINED="NOTDEFINED";var rN=class{constructor(t){this.value=t}};rN.DC="DC",rN.INDUCTION="INDUCTION",rN.POLYPHASE="POLYPHASE",rN.RELUCTANCESYNCHRONOUS="RELUCTANCESYNCHRONOUS",rN.SYNCHRONOUS="SYNCHRONOUS",rN.USERDEFINED="USERDEFINED",rN.NOTDEFINED="NOTDEFINED";var sN=class{constructor(t){this.value=t}};sN.TIMECLOCK="TIMECLOCK",sN.TIMEDELAY="TIMEDELAY",sN.RELAY="RELAY",sN.USERDEFINED="USERDEFINED",sN.NOTDEFINED="NOTDEFINED";var oN=class{constructor(t){this.value=t}};oN.ACCESSORY_ASSEMBLY="ACCESSORY_ASSEMBLY",oN.ARCH="ARCH",oN.BEAM_GRID="BEAM_GRID",oN.BRACED_FRAME="BRACED_FRAME",oN.GIRDER="GIRDER",oN.REINFORCEMENT_UNIT="REINFORCEMENT_UNIT",oN.RIGID_FRAME="RIGID_FRAME",oN.SLAB_FIELD="SLAB_FIELD",oN.TRUSS="TRUSS",oN.ABUTMENT="ABUTMENT",oN.PIER="PIER",oN.PYLON="PYLON",oN.CROSS_BRACING="CROSS_BRACING",oN.DECK="DECK",oN.USERDEFINED="USERDEFINED",oN.NOTDEFINED="NOTDEFINED";var aN=class{constructor(t){this.value=t}};aN.COMPLEX="COMPLEX",aN.ELEMENT="ELEMENT",aN.PARTIAL="PARTIAL";var lN=class{constructor(t){this.value=t}};lN.EXTERNALCOMBUSTION="EXTERNALCOMBUSTION",lN.INTERNALCOMBUSTION="INTERNALCOMBUSTION",lN.USERDEFINED="USERDEFINED",lN.NOTDEFINED="NOTDEFINED";var hN=class{constructor(t){this.value=t}};hN.DIRECTEVAPORATIVERANDOMMEDIAAIRCOOLER="DIRECTEVAPORATIVERANDOMMEDIAAIRCOOLER",hN.DIRECTEVAPORATIVERIGIDMEDIAAIRCOOLER="DIRECTEVAPORATIVERIGIDMEDIAAIRCOOLER",hN.DIRECTEVAPORATIVESLINGERSPACKAGEDAIRCOOLER="DIRECTEVAPORATIVESLINGERSPACKAGEDAIRCOOLER",hN.DIRECTEVAPORATIVEPACKAGEDROTARYAIRCOOLER="DIRECTEVAPORATIVEPACKAGEDROTARYAIRCOOLER",hN.DIRECTEVAPORATIVEAIRWASHER="DIRECTEVAPORATIVEAIRWASHER",hN.INDIRECTEVAPORATIVEPACKAGEAIRCOOLER="INDIRECTEVAPORATIVEPACKAGEAIRCOOLER",hN.INDIRECTEVAPORATIVEWETCOIL="INDIRECTEVAPORATIVEWETCOIL",hN.INDIRECTEVAPORATIVECOOLINGTOWERORCOILCOOLER="INDIRECTEVAPORATIVECOOLINGTOWERORCOILCOOLER",hN.INDIRECTDIRECTCOMBINATION="INDIRECTDIRECTCOMBINATION",hN.USERDEFINED="USERDEFINED",hN.NOTDEFINED="NOTDEFINED";var cN=class{constructor(t){this.value=t}};cN.DIRECTEXPANSION="DIRECTEXPANSION",cN.DIRECTEXPANSIONSHELLANDTUBE="DIRECTEXPANSIONSHELLANDTUBE",cN.DIRECTEXPANSIONTUBEINTUBE="DIRECTEXPANSIONTUBEINTUBE",cN.DIRECTEXPANSIONBRAZEDPLATE="DIRECTEXPANSIONBRAZEDPLATE",cN.FLOODEDSHELLANDTUBE="FLOODEDSHELLANDTUBE",cN.SHELLANDCOIL="SHELLANDCOIL",cN.USERDEFINED="USERDEFINED",cN.NOTDEFINED="NOTDEFINED";var uN=class{constructor(t){this.value=t}};uN.EVENTRULE="EVENTRULE",uN.EVENTMESSAGE="EVENTMESSAGE",uN.EVENTTIME="EVENTTIME",uN.EVENTCOMPLEX="EVENTCOMPLEX",uN.USERDEFINED="USERDEFINED",uN.NOTDEFINED="NOTDEFINED";var pN=class{constructor(t){this.value=t}};pN.STARTEVENT="STARTEVENT",pN.ENDEVENT="ENDEVENT",pN.INTERMEDIATEEVENT="INTERMEDIATEEVENT",pN.USERDEFINED="USERDEFINED",pN.NOTDEFINED="NOTDEFINED";var dN=class{constructor(t){this.value=t}};dN.EXTERNAL="EXTERNAL",dN.EXTERNAL_EARTH="EXTERNAL_EARTH",dN.EXTERNAL_WATER="EXTERNAL_WATER",dN.EXTERNAL_FIRE="EXTERNAL_FIRE",dN.USERDEFINED="USERDEFINED",dN.NOTDEFINED="NOTDEFINED";var fN=class{constructor(t){this.value=t}};fN.CENTRIFUGALFORWARDCURVED="CENTRIFUGALFORWARDCURVED",fN.CENTRIFUGALRADIAL="CENTRIFUGALRADIAL",fN.CENTRIFUGALBACKWARDINCLINEDCURVED="CENTRIFUGALBACKWARDINCLINEDCURVED",fN.CENTRIFUGALAIRFOIL="CENTRIFUGALAIRFOIL",fN.TUBEAXIAL="TUBEAXIAL",fN.VANEAXIAL="VANEAXIAL",fN.PROPELLORAXIAL="PROPELLORAXIAL",fN.USERDEFINED="USERDEFINED",fN.NOTDEFINED="NOTDEFINED";var mN=class{constructor(t){this.value=t}};mN.GLUE="GLUE",mN.MORTAR="MORTAR",mN.WELD="WELD",mN.USERDEFINED="USERDEFINED",mN.NOTDEFINED="NOTDEFINED";var gN=class{constructor(t){this.value=t}};gN.AIRPARTICLEFILTER="AIRPARTICLEFILTER",gN.COMPRESSEDAIRFILTER="COMPRESSEDAIRFILTER",gN.ODORFILTER="ODORFILTER",gN.OILFILTER="OILFILTER",gN.STRAINER="STRAINER",gN.WATERFILTER="WATERFILTER",gN.USERDEFINED="USERDEFINED",gN.NOTDEFINED="NOTDEFINED";var yN=class{constructor(t){this.value=t}};yN.BREECHINGINLET="BREECHINGINLET",yN.FIREHYDRANT="FIREHYDRANT",yN.HOSEREEL="HOSEREEL",yN.SPRINKLER="SPRINKLER",yN.SPRINKLERDEFLECTOR="SPRINKLERDEFLECTOR",yN.USERDEFINED="USERDEFINED",yN.NOTDEFINED="NOTDEFINED";var vN=class{constructor(t){this.value=t}};vN.SOURCE="SOURCE",vN.SINK="SINK",vN.SOURCEANDSINK="SOURCEANDSINK",vN.NOTDEFINED="NOTDEFINED";var _N=class{constructor(t){this.value=t}};_N.PRESSUREGAUGE="PRESSUREGAUGE",_N.THERMOMETER="THERMOMETER",_N.AMMETER="AMMETER",_N.FREQUENCYMETER="FREQUENCYMETER",_N.POWERFACTORMETER="POWERFACTORMETER",_N.PHASEANGLEMETER="PHASEANGLEMETER",_N.VOLTMETER_PEAK="VOLTMETER_PEAK",_N.VOLTMETER_RMS="VOLTMETER_RMS",_N.USERDEFINED="USERDEFINED",_N.NOTDEFINED="NOTDEFINED";var TN=class{constructor(t){this.value=t}};TN.ENERGYMETER="ENERGYMETER",TN.GASMETER="GASMETER",TN.OILMETER="OILMETER",TN.WATERMETER="WATERMETER",TN.USERDEFINED="USERDEFINED",TN.NOTDEFINED="NOTDEFINED";var EN=class{constructor(t){this.value=t}};EN.CAISSON_FOUNDATION="CAISSON_FOUNDATION",EN.FOOTING_BEAM="FOOTING_BEAM",EN.PAD_FOOTING="PAD_FOOTING",EN.PILE_CAP="PILE_CAP",EN.STRIP_FOOTING="STRIP_FOOTING",EN.USERDEFINED="USERDEFINED",EN.NOTDEFINED="NOTDEFINED";var xN=class{constructor(t){this.value=t}};xN.CHAIR="CHAIR",xN.TABLE="TABLE",xN.DESK="DESK",xN.BED="BED",xN.FILECABINET="FILECABINET",xN.SHELF="SHELF",xN.SOFA="SOFA",xN.USERDEFINED="USERDEFINED",xN.NOTDEFINED="NOTDEFINED";var bN=class{constructor(t){this.value=t}};bN.TERRAIN="TERRAIN",bN.SOIL_BORING_POINT="SOIL_BORING_POINT",bN.USERDEFINED="USERDEFINED",bN.NOTDEFINED="NOTDEFINED";var IN=class{constructor(t){this.value=t}};IN.GRAPH_VIEW="GRAPH_VIEW",IN.SKETCH_VIEW="SKETCH_VIEW",IN.MODEL_VIEW="MODEL_VIEW",IN.PLAN_VIEW="PLAN_VIEW",IN.REFLECTED_PLAN_VIEW="REFLECTED_PLAN_VIEW",IN.SECTION_VIEW="SECTION_VIEW",IN.ELEVATION_VIEW="ELEVATION_VIEW",IN.USERDEFINED="USERDEFINED",IN.NOTDEFINED="NOTDEFINED";var wN=class{constructor(t){this.value=t}};wN.GLOBAL_COORDS="GLOBAL_COORDS",wN.LOCAL_COORDS="LOCAL_COORDS";var SN=class{constructor(t){this.value=t}};SN.RECTANGULAR="RECTANGULAR",SN.RADIAL="RADIAL",SN.TRIANGULAR="TRIANGULAR",SN.IRREGULAR="IRREGULAR",SN.USERDEFINED="USERDEFINED",SN.NOTDEFINED="NOTDEFINED";var RN=class{constructor(t){this.value=t}};RN.PLATE="PLATE",RN.SHELLANDTUBE="SHELLANDTUBE",RN.USERDEFINED="USERDEFINED",RN.NOTDEFINED="NOTDEFINED";var CN=class{constructor(t){this.value=t}};CN.STEAMINJECTION="STEAMINJECTION",CN.ADIABATICAIRWASHER="ADIABATICAIRWASHER",CN.ADIABATICPAN="ADIABATICPAN",CN.ADIABATICWETTEDELEMENT="ADIABATICWETTEDELEMENT",CN.ADIABATICATOMIZING="ADIABATICATOMIZING",CN.ADIABATICULTRASONIC="ADIABATICULTRASONIC",CN.ADIABATICRIGIDMEDIA="ADIABATICRIGIDMEDIA",CN.ADIABATICCOMPRESSEDAIRNOZZLE="ADIABATICCOMPRESSEDAIRNOZZLE",CN.ASSISTEDELECTRIC="ASSISTEDELECTRIC",CN.ASSISTEDNATURALGAS="ASSISTEDNATURALGAS",CN.ASSISTEDPROPANE="ASSISTEDPROPANE",CN.ASSISTEDBUTANE="ASSISTEDBUTANE",CN.ASSISTEDSTEAM="ASSISTEDSTEAM",CN.USERDEFINED="USERDEFINED",CN.NOTDEFINED="NOTDEFINED";var AN=class{constructor(t){this.value=t}};AN.CYCLONIC="CYCLONIC",AN.GREASE="GREASE",AN.OIL="OIL",AN.PETROL="PETROL",AN.USERDEFINED="USERDEFINED",AN.NOTDEFINED="NOTDEFINED";var DN=class{constructor(t){this.value=t}};DN.INTERNAL="INTERNAL",DN.EXTERNAL="EXTERNAL",DN.EXTERNAL_EARTH="EXTERNAL_EARTH",DN.EXTERNAL_WATER="EXTERNAL_WATER",DN.EXTERNAL_FIRE="EXTERNAL_FIRE",DN.NOTDEFINED="NOTDEFINED";var ON=class{constructor(t){this.value=t}};ON.ASSETINVENTORY="ASSETINVENTORY",ON.SPACEINVENTORY="SPACEINVENTORY",ON.FURNITUREINVENTORY="FURNITUREINVENTORY",ON.USERDEFINED="USERDEFINED",ON.NOTDEFINED="NOTDEFINED";var NN=class{constructor(t){this.value=t}};NN.DATA="DATA",NN.POWER="POWER",NN.USERDEFINED="USERDEFINED",NN.NOTDEFINED="NOTDEFINED";var MN=class{constructor(t){this.value=t}};MN.UNIFORM_KNOTS="UNIFORM_KNOTS",MN.QUASI_UNIFORM_KNOTS="QUASI_UNIFORM_KNOTS",MN.PIECEWISE_BEZIER_KNOTS="PIECEWISE_BEZIER_KNOTS",MN.UNSPECIFIED="UNSPECIFIED";var PN=class{constructor(t){this.value=t}};PN.ADMINISTRATION="ADMINISTRATION",PN.CARPENTRY="CARPENTRY",PN.CLEANING="CLEANING",PN.CONCRETE="CONCRETE",PN.DRYWALL="DRYWALL",PN.ELECTRIC="ELECTRIC",PN.FINISHING="FINISHING",PN.FLOORING="FLOORING",PN.GENERAL="GENERAL",PN.HVAC="HVAC",PN.LANDSCAPING="LANDSCAPING",PN.MASONRY="MASONRY",PN.PAINTING="PAINTING",PN.PAVING="PAVING",PN.PLUMBING="PLUMBING",PN.ROOFING="ROOFING",PN.SITEGRADING="SITEGRADING",PN.STEELWORK="STEELWORK",PN.SURVEYING="SURVEYING",PN.USERDEFINED="USERDEFINED",PN.NOTDEFINED="NOTDEFINED";var FN=class{constructor(t){this.value=t}};FN.COMPACTFLUORESCENT="COMPACTFLUORESCENT",FN.FLUORESCENT="FLUORESCENT",FN.HALOGEN="HALOGEN",FN.HIGHPRESSUREMERCURY="HIGHPRESSUREMERCURY",FN.HIGHPRESSURESODIUM="HIGHPRESSURESODIUM",FN.LED="LED",FN.METALHALIDE="METALHALIDE",FN.OLED="OLED",FN.TUNGSTENFILAMENT="TUNGSTENFILAMENT",FN.USERDEFINED="USERDEFINED",FN.NOTDEFINED="NOTDEFINED";var LN=class{constructor(t){this.value=t}};LN.AXIS1="AXIS1",LN.AXIS2="AXIS2",LN.AXIS3="AXIS3";var kN=class{constructor(t){this.value=t}};kN.TYPE_A="TYPE_A",kN.TYPE_B="TYPE_B",kN.TYPE_C="TYPE_C",kN.NOTDEFINED="NOTDEFINED";var UN=class{constructor(t){this.value=t}};UN.COMPACTFLUORESCENT="COMPACTFLUORESCENT",UN.FLUORESCENT="FLUORESCENT",UN.HIGHPRESSUREMERCURY="HIGHPRESSUREMERCURY",UN.HIGHPRESSURESODIUM="HIGHPRESSURESODIUM",UN.LIGHTEMITTINGDIODE="LIGHTEMITTINGDIODE",UN.LOWPRESSURESODIUM="LOWPRESSURESODIUM",UN.LOWVOLTAGEHALOGEN="LOWVOLTAGEHALOGEN",UN.MAINVOLTAGEHALOGEN="MAINVOLTAGEHALOGEN",UN.METALHALIDE="METALHALIDE",UN.TUNGSTENFILAMENT="TUNGSTENFILAMENT",UN.NOTDEFINED="NOTDEFINED";var BN=class{constructor(t){this.value=t}};BN.POINTSOURCE="POINTSOURCE",BN.DIRECTIONSOURCE="DIRECTIONSOURCE",BN.SECURITYLIGHTING="SECURITYLIGHTING",BN.USERDEFINED="USERDEFINED",BN.NOTDEFINED="NOTDEFINED";var zN=class{constructor(t){this.value=t}};zN.LOAD_GROUP="LOAD_GROUP",zN.LOAD_CASE="LOAD_CASE",zN.LOAD_COMBINATION="LOAD_COMBINATION",zN.USERDEFINED="USERDEFINED",zN.NOTDEFINED="NOTDEFINED";var GN=class{constructor(t){this.value=t}};GN.LOGICALAND="LOGICALAND",GN.LOGICALOR="LOGICALOR",GN.LOGICALXOR="LOGICALXOR",GN.LOGICALNOTAND="LOGICALNOTAND",GN.LOGICALNOTOR="LOGICALNOTOR";var HN=class{constructor(t){this.value=t}};HN.ANCHORBOLT="ANCHORBOLT",HN.BOLT="BOLT",HN.DOWEL="DOWEL",HN.NAIL="NAIL",HN.NAILPLATE="NAILPLATE",HN.RIVET="RIVET",HN.SCREW="SCREW",HN.SHEARCONNECTOR="SHEARCONNECTOR",HN.STAPLE="STAPLE",HN.STUDSHEARCONNECTOR="STUDSHEARCONNECTOR",HN.COUPLER="COUPLER",HN.USERDEFINED="USERDEFINED",HN.NOTDEFINED="NOTDEFINED";var jN=class{constructor(t){this.value=t}};jN.AIRSTATION="AIRSTATION",jN.FEEDAIRUNIT="FEEDAIRUNIT",jN.OXYGENGENERATOR="OXYGENGENERATOR",jN.OXYGENPLANT="OXYGENPLANT",jN.VACUUMSTATION="VACUUMSTATION",jN.USERDEFINED="USERDEFINED",jN.NOTDEFINED="NOTDEFINED";var VN=class{constructor(t){this.value=t}};VN.BRACE="BRACE",VN.CHORD="CHORD",VN.COLLAR="COLLAR",VN.MEMBER="MEMBER",VN.MULLION="MULLION",VN.PLATE="PLATE",VN.POST="POST",VN.PURLIN="PURLIN",VN.RAFTER="RAFTER",VN.STRINGER="STRINGER",VN.STRUT="STRUT",VN.STUD="STUD",VN.STIFFENING_RIB="STIFFENING_RIB",VN.ARCH_SEGMENT="ARCH_SEGMENT",VN.SUSPENSION_CABLE="SUSPENSION_CABLE",VN.SUSPENDER="SUSPENDER",VN.STAY_CABLE="STAY_CABLE",VN.USERDEFINED="USERDEFINED",VN.NOTDEFINED="NOTDEFINED";var WN=class{constructor(t){this.value=t}};WN.BELTDRIVE="BELTDRIVE",WN.COUPLING="COUPLING",WN.DIRECTDRIVE="DIRECTDRIVE",WN.USERDEFINED="USERDEFINED",WN.NOTDEFINED="NOTDEFINED";var ZN=class{constructor(t){this.value=t}};ZN.PRODUCT="PRODUCT",ZN.PROCESS="PROCESS",ZN.CONTROL="CONTROL",ZN.RESOURCE="RESOURCE",ZN.ACTOR="ACTOR",ZN.GROUP="GROUP",ZN.PROJECT="PROJECT",ZN.NOTDEFINED="NOTDEFINED";var YN=class{constructor(t){this.value=t}};YN.CODECOMPLIANCE="CODECOMPLIANCE",YN.CODEWAIVER="CODEWAIVER",YN.DESIGNINTENT="DESIGNINTENT",YN.EXTERNAL="EXTERNAL",YN.HEALTHANDSAFETY="HEALTHANDSAFETY",YN.MERGECONFLICT="MERGECONFLICT",YN.MODELVIEW="MODELVIEW",YN.PARAMETER="PARAMETER",YN.REQUIREMENT="REQUIREMENT",YN.SPECIFICATION="SPECIFICATION",YN.TRIGGERCONDITION="TRIGGERCONDITION",YN.USERDEFINED="USERDEFINED",YN.NOTDEFINED="NOTDEFINED";var qN=class{constructor(t){this.value=t}};qN.ASSIGNEE="ASSIGNEE",qN.ASSIGNOR="ASSIGNOR",qN.LESSEE="LESSEE",qN.LESSOR="LESSOR",qN.LETTINGAGENT="LETTINGAGENT",qN.OWNER="OWNER",qN.TENANT="TENANT",qN.USERDEFINED="USERDEFINED",qN.NOTDEFINED="NOTDEFINED";var XN=class{constructor(t){this.value=t}};XN.OPENING="OPENING",XN.RECESS="RECESS",XN.USERDEFINED="USERDEFINED",XN.NOTDEFINED="NOTDEFINED";var KN=class{constructor(t){this.value=t}};KN.AUDIOVISUALOUTLET="AUDIOVISUALOUTLET",KN.COMMUNICATIONSOUTLET="COMMUNICATIONSOUTLET",KN.POWEROUTLET="POWEROUTLET",KN.DATAOUTLET="DATAOUTLET",KN.TELEPHONEOUTLET="TELEPHONEOUTLET",KN.USERDEFINED="USERDEFINED",KN.NOTDEFINED="NOTDEFINED";var QN=class{constructor(t){this.value=t}};QN.USERDEFINED="USERDEFINED",QN.NOTDEFINED="NOTDEFINED";var JN=class{constructor(t){this.value=t}};JN.GRILL="GRILL",JN.LOUVER="LOUVER",JN.SCREEN="SCREEN",JN.USERDEFINED="USERDEFINED",JN.NOTDEFINED="NOTDEFINED";var $N=class{constructor(t){this.value=t}};$N.ACCESS="ACCESS",$N.BUILDING="BUILDING",$N.WORK="WORK",$N.USERDEFINED="USERDEFINED",$N.NOTDEFINED="NOTDEFINED";var tM=class{constructor(t){this.value=t}};tM.PHYSICAL="PHYSICAL",tM.VIRTUAL="VIRTUAL",tM.NOTDEFINED="NOTDEFINED";var eM=class{constructor(t){this.value=t}};eM.CAST_IN_PLACE="CAST_IN_PLACE",eM.COMPOSITE="COMPOSITE",eM.PRECAST_CONCRETE="PRECAST_CONCRETE",eM.PREFAB_STEEL="PREFAB_STEEL",eM.USERDEFINED="USERDEFINED",eM.NOTDEFINED="NOTDEFINED";var nM=class{constructor(t){this.value=t}};nM.BORED="BORED",nM.DRIVEN="DRIVEN",nM.JETGROUTING="JETGROUTING",nM.COHESION="COHESION",nM.FRICTION="FRICTION",nM.SUPPORT="SUPPORT",nM.USERDEFINED="USERDEFINED",nM.NOTDEFINED="NOTDEFINED";var iM=class{constructor(t){this.value=t}};iM.BEND="BEND",iM.CONNECTOR="CONNECTOR",iM.ENTRY="ENTRY",iM.EXIT="EXIT",iM.JUNCTION="JUNCTION",iM.OBSTRUCTION="OBSTRUCTION",iM.TRANSITION="TRANSITION",iM.USERDEFINED="USERDEFINED",iM.NOTDEFINED="NOTDEFINED";var rM=class{constructor(t){this.value=t}};rM.CULVERT="CULVERT",rM.FLEXIBLESEGMENT="FLEXIBLESEGMENT",rM.RIGIDSEGMENT="RIGIDSEGMENT",rM.GUTTER="GUTTER",rM.SPOOL="SPOOL",rM.USERDEFINED="USERDEFINED",rM.NOTDEFINED="NOTDEFINED";var sM=class{constructor(t){this.value=t}};sM.CURTAIN_PANEL="CURTAIN_PANEL",sM.SHEET="SHEET",sM.FLANGE_PLATE="FLANGE_PLATE",sM.WEB_PLATE="WEB_PLATE",sM.STIFFENER_PLATE="STIFFENER_PLATE",sM.GUSSET_PLATE="GUSSET_PLATE",sM.COVER_PLATE="COVER_PLATE",sM.SPLICE_PLATE="SPLICE_PLATE",sM.BASE_PLATE="BASE_PLATE",sM.USERDEFINED="USERDEFINED",sM.NOTDEFINED="NOTDEFINED";var oM=class{constructor(t){this.value=t}};oM.CURVE3D="CURVE3D",oM.PCURVE_S1="PCURVE_S1",oM.PCURVE_S2="PCURVE_S2";var aM=class{constructor(t){this.value=t}};aM.ADVICE_CAUTION="ADVICE_CAUTION",aM.ADVICE_NOTE="ADVICE_NOTE",aM.ADVICE_WARNING="ADVICE_WARNING",aM.CALIBRATION="CALIBRATION",aM.DIAGNOSTIC="DIAGNOSTIC",aM.SHUTDOWN="SHUTDOWN",aM.STARTUP="STARTUP",aM.USERDEFINED="USERDEFINED",aM.NOTDEFINED="NOTDEFINED";var lM=class{constructor(t){this.value=t}};lM.CURVE="CURVE",lM.AREA="AREA";var hM=class{constructor(t){this.value=t}};hM.CHANGEORDER="CHANGEORDER",hM.MAINTENANCEWORKORDER="MAINTENANCEWORKORDER",hM.MOVEORDER="MOVEORDER",hM.PURCHASEORDER="PURCHASEORDER",hM.WORKORDER="WORKORDER",hM.USERDEFINED="USERDEFINED",hM.NOTDEFINED="NOTDEFINED";var cM=class{constructor(t){this.value=t}};cM.PROJECTED_LENGTH="PROJECTED_LENGTH",cM.TRUE_LENGTH="TRUE_LENGTH";var uM=class{constructor(t){this.value=t}};uM.BLISTER="BLISTER",uM.DEVIATOR="DEVIATOR",uM.USERDEFINED="USERDEFINED",uM.NOTDEFINED="NOTDEFINED";var pM=class{constructor(t){this.value=t}};pM.PSET_TYPEDRIVENONLY="PSET_TYPEDRIVENONLY",pM.PSET_TYPEDRIVENOVERRIDE="PSET_TYPEDRIVENOVERRIDE",pM.PSET_OCCURRENCEDRIVEN="PSET_OCCURRENCEDRIVEN",pM.PSET_PERFORMANCEDRIVEN="PSET_PERFORMANCEDRIVEN",pM.QTO_TYPEDRIVENONLY="QTO_TYPEDRIVENONLY",pM.QTO_TYPEDRIVENOVERRIDE="QTO_TYPEDRIVENOVERRIDE",pM.QTO_OCCURRENCEDRIVEN="QTO_OCCURRENCEDRIVEN",pM.NOTDEFINED="NOTDEFINED";var dM=class{constructor(t){this.value=t}};dM.ELECTRONIC="ELECTRONIC",dM.ELECTROMAGNETIC="ELECTROMAGNETIC",dM.RESIDUALCURRENT="RESIDUALCURRENT",dM.THERMAL="THERMAL",dM.USERDEFINED="USERDEFINED",dM.NOTDEFINED="NOTDEFINED";var fM=class{constructor(t){this.value=t}};fM.CIRCUITBREAKER="CIRCUITBREAKER",fM.EARTHLEAKAGECIRCUITBREAKER="EARTHLEAKAGECIRCUITBREAKER",fM.EARTHINGSWITCH="EARTHINGSWITCH",fM.FUSEDISCONNECTOR="FUSEDISCONNECTOR",fM.RESIDUALCURRENTCIRCUITBREAKER="RESIDUALCURRENTCIRCUITBREAKER",fM.RESIDUALCURRENTSWITCH="RESIDUALCURRENTSWITCH",fM.VARISTOR="VARISTOR",fM.USERDEFINED="USERDEFINED",fM.NOTDEFINED="NOTDEFINED";var mM=class{constructor(t){this.value=t}};mM.CIRCULATOR="CIRCULATOR",mM.ENDSUCTION="ENDSUCTION",mM.SPLITCASE="SPLITCASE",mM.SUBMERSIBLEPUMP="SUBMERSIBLEPUMP",mM.SUMPPUMP="SUMPPUMP",mM.VERTICALINLINE="VERTICALINLINE",mM.VERTICALTURBINE="VERTICALTURBINE",mM.USERDEFINED="USERDEFINED",mM.NOTDEFINED="NOTDEFINED";var gM=class{constructor(t){this.value=t}};gM.HANDRAIL="HANDRAIL",gM.GUARDRAIL="GUARDRAIL",gM.BALUSTRADE="BALUSTRADE",gM.USERDEFINED="USERDEFINED",gM.NOTDEFINED="NOTDEFINED";var yM=class{constructor(t){this.value=t}};yM.STRAIGHT="STRAIGHT",yM.SPIRAL="SPIRAL",yM.USERDEFINED="USERDEFINED",yM.NOTDEFINED="NOTDEFINED";var vM=class{constructor(t){this.value=t}};vM.STRAIGHT_RUN_RAMP="STRAIGHT_RUN_RAMP",vM.TWO_STRAIGHT_RUN_RAMP="TWO_STRAIGHT_RUN_RAMP",vM.QUARTER_TURN_RAMP="QUARTER_TURN_RAMP",vM.TWO_QUARTER_TURN_RAMP="TWO_QUARTER_TURN_RAMP",vM.HALF_TURN_RAMP="HALF_TURN_RAMP",vM.SPIRAL_RAMP="SPIRAL_RAMP",vM.USERDEFINED="USERDEFINED",vM.NOTDEFINED="NOTDEFINED";var _M=class{constructor(t){this.value=t}};_M.DAILY="DAILY",_M.WEEKLY="WEEKLY",_M.MONTHLY_BY_DAY_OF_MONTH="MONTHLY_BY_DAY_OF_MONTH",_M.MONTHLY_BY_POSITION="MONTHLY_BY_POSITION",_M.BY_DAY_COUNT="BY_DAY_COUNT",_M.BY_WEEKDAY_COUNT="BY_WEEKDAY_COUNT",_M.YEARLY_BY_DAY_OF_MONTH="YEARLY_BY_DAY_OF_MONTH",_M.YEARLY_BY_POSITION="YEARLY_BY_POSITION";var TM=class{constructor(t){this.value=t}};TM.KILOPOINT="KILOPOINT",TM.MILEPOINT="MILEPOINT",TM.STATION="STATION",TM.USERDEFINED="USERDEFINED",TM.NOTDEFINED="NOTDEFINED";var EM=class{constructor(t){this.value=t}};EM.BLINN="BLINN",EM.FLAT="FLAT",EM.GLASS="GLASS",EM.MATT="MATT",EM.METAL="METAL",EM.MIRROR="MIRROR",EM.PHONG="PHONG",EM.PLASTIC="PLASTIC",EM.STRAUSS="STRAUSS",EM.NOTDEFINED="NOTDEFINED";var xM=class{constructor(t){this.value=t}};xM.MAIN="MAIN",xM.SHEAR="SHEAR",xM.LIGATURE="LIGATURE",xM.STUD="STUD",xM.PUNCHING="PUNCHING",xM.EDGE="EDGE",xM.RING="RING",xM.ANCHORING="ANCHORING",xM.USERDEFINED="USERDEFINED",xM.NOTDEFINED="NOTDEFINED";var bM=class{constructor(t){this.value=t}};bM.PLAIN="PLAIN",bM.TEXTURED="TEXTURED";var IM=class{constructor(t){this.value=t}};IM.ANCHORING="ANCHORING",IM.EDGE="EDGE",IM.LIGATURE="LIGATURE",IM.MAIN="MAIN",IM.PUNCHING="PUNCHING",IM.RING="RING",IM.SHEAR="SHEAR",IM.STUD="STUD",IM.SPACEBAR="SPACEBAR",IM.USERDEFINED="USERDEFINED",IM.NOTDEFINED="NOTDEFINED";var wM=class{constructor(t){this.value=t}};wM.USERDEFINED="USERDEFINED",wM.NOTDEFINED="NOTDEFINED";var SM=class{constructor(t){this.value=t}};SM.SUPPLIER="SUPPLIER",SM.MANUFACTURER="MANUFACTURER",SM.CONTRACTOR="CONTRACTOR",SM.SUBCONTRACTOR="SUBCONTRACTOR",SM.ARCHITECT="ARCHITECT",SM.STRUCTURALENGINEER="STRUCTURALENGINEER",SM.COSTENGINEER="COSTENGINEER",SM.CLIENT="CLIENT",SM.BUILDINGOWNER="BUILDINGOWNER",SM.BUILDINGOPERATOR="BUILDINGOPERATOR",SM.MECHANICALENGINEER="MECHANICALENGINEER",SM.ELECTRICALENGINEER="ELECTRICALENGINEER",SM.PROJECTMANAGER="PROJECTMANAGER",SM.FACILITIESMANAGER="FACILITIESMANAGER",SM.CIVILENGINEER="CIVILENGINEER",SM.COMMISSIONINGENGINEER="COMMISSIONINGENGINEER",SM.ENGINEER="ENGINEER",SM.OWNER="OWNER",SM.CONSULTANT="CONSULTANT",SM.CONSTRUCTIONMANAGER="CONSTRUCTIONMANAGER",SM.FIELDCONSTRUCTIONMANAGER="FIELDCONSTRUCTIONMANAGER",SM.RESELLER="RESELLER",SM.USERDEFINED="USERDEFINED";var RM=class{constructor(t){this.value=t}};RM.FLAT_ROOF="FLAT_ROOF",RM.SHED_ROOF="SHED_ROOF",RM.GABLE_ROOF="GABLE_ROOF",RM.HIP_ROOF="HIP_ROOF",RM.HIPPED_GABLE_ROOF="HIPPED_GABLE_ROOF",RM.GAMBREL_ROOF="GAMBREL_ROOF",RM.MANSARD_ROOF="MANSARD_ROOF",RM.BARREL_ROOF="BARREL_ROOF",RM.RAINBOW_ROOF="RAINBOW_ROOF",RM.BUTTERFLY_ROOF="BUTTERFLY_ROOF",RM.PAVILION_ROOF="PAVILION_ROOF",RM.DOME_ROOF="DOME_ROOF",RM.FREEFORM="FREEFORM",RM.USERDEFINED="USERDEFINED",RM.NOTDEFINED="NOTDEFINED";var CM=class{constructor(t){this.value=t}};CM.EXA="EXA",CM.PETA="PETA",CM.TERA="TERA",CM.GIGA="GIGA",CM.MEGA="MEGA",CM.KILO="KILO",CM.HECTO="HECTO",CM.DECA="DECA",CM.DECI="DECI",CM.CENTI="CENTI",CM.MILLI="MILLI",CM.MICRO="MICRO",CM.NANO="NANO",CM.PICO="PICO",CM.FEMTO="FEMTO",CM.ATTO="ATTO";var AM=class{constructor(t){this.value=t}};AM.AMPERE="AMPERE",AM.BECQUEREL="BECQUEREL",AM.CANDELA="CANDELA",AM.COULOMB="COULOMB",AM.CUBIC_METRE="CUBIC_METRE",AM.DEGREE_CELSIUS="DEGREE_CELSIUS",AM.FARAD="FARAD",AM.GRAM="GRAM",AM.GRAY="GRAY",AM.HENRY="HENRY",AM.HERTZ="HERTZ",AM.JOULE="JOULE",AM.KELVIN="KELVIN",AM.LUMEN="LUMEN",AM.LUX="LUX",AM.METRE="METRE",AM.MOLE="MOLE",AM.NEWTON="NEWTON",AM.OHM="OHM",AM.PASCAL="PASCAL",AM.RADIAN="RADIAN",AM.SECOND="SECOND",AM.SIEMENS="SIEMENS",AM.SIEVERT="SIEVERT",AM.SQUARE_METRE="SQUARE_METRE",AM.STERADIAN="STERADIAN",AM.TESLA="TESLA",AM.VOLT="VOLT",AM.WATT="WATT",AM.WEBER="WEBER";var DM=class{constructor(t){this.value=t}};DM.BATH="BATH",DM.BIDET="BIDET",DM.CISTERN="CISTERN",DM.SHOWER="SHOWER",DM.SINK="SINK",DM.SANITARYFOUNTAIN="SANITARYFOUNTAIN",DM.TOILETPAN="TOILETPAN",DM.URINAL="URINAL",DM.WASHHANDBASIN="WASHHANDBASIN",DM.WCSEAT="WCSEAT",DM.USERDEFINED="USERDEFINED",DM.NOTDEFINED="NOTDEFINED";var OM=class{constructor(t){this.value=t}};OM.UNIFORM="UNIFORM",OM.TAPERED="TAPERED";var NM=class{constructor(t){this.value=t}};NM.COSENSOR="COSENSOR",NM.CO2SENSOR="CO2SENSOR",NM.CONDUCTANCESENSOR="CONDUCTANCESENSOR",NM.CONTACTSENSOR="CONTACTSENSOR",NM.FIRESENSOR="FIRESENSOR",NM.FLOWSENSOR="FLOWSENSOR",NM.FROSTSENSOR="FROSTSENSOR",NM.GASSENSOR="GASSENSOR",NM.HEATSENSOR="HEATSENSOR",NM.HUMIDITYSENSOR="HUMIDITYSENSOR",NM.IDENTIFIERSENSOR="IDENTIFIERSENSOR",NM.IONCONCENTRATIONSENSOR="IONCONCENTRATIONSENSOR",NM.LEVELSENSOR="LEVELSENSOR",NM.LIGHTSENSOR="LIGHTSENSOR",NM.MOISTURESENSOR="MOISTURESENSOR",NM.MOVEMENTSENSOR="MOVEMENTSENSOR",NM.PHSENSOR="PHSENSOR",NM.PRESSURESENSOR="PRESSURESENSOR",NM.RADIATIONSENSOR="RADIATIONSENSOR",NM.RADIOACTIVITYSENSOR="RADIOACTIVITYSENSOR",NM.SMOKESENSOR="SMOKESENSOR",NM.SOUNDSENSOR="SOUNDSENSOR",NM.TEMPERATURESENSOR="TEMPERATURESENSOR",NM.WINDSENSOR="WINDSENSOR",NM.USERDEFINED="USERDEFINED",NM.NOTDEFINED="NOTDEFINED";var MM=class{constructor(t){this.value=t}};MM.START_START="START_START",MM.START_FINISH="START_FINISH",MM.FINISH_START="FINISH_START",MM.FINISH_FINISH="FINISH_FINISH",MM.USERDEFINED="USERDEFINED",MM.NOTDEFINED="NOTDEFINED";var PM=class{constructor(t){this.value=t}};PM.JALOUSIE="JALOUSIE",PM.SHUTTER="SHUTTER",PM.AWNING="AWNING",PM.USERDEFINED="USERDEFINED",PM.NOTDEFINED="NOTDEFINED";var FM=class{constructor(t){this.value=t}};FM.P_SINGLEVALUE="P_SINGLEVALUE",FM.P_ENUMERATEDVALUE="P_ENUMERATEDVALUE",FM.P_BOUNDEDVALUE="P_BOUNDEDVALUE",FM.P_LISTVALUE="P_LISTVALUE",FM.P_TABLEVALUE="P_TABLEVALUE",FM.P_REFERENCEVALUE="P_REFERENCEVALUE",FM.Q_LENGTH="Q_LENGTH",FM.Q_AREA="Q_AREA",FM.Q_VOLUME="Q_VOLUME",FM.Q_COUNT="Q_COUNT",FM.Q_WEIGHT="Q_WEIGHT",FM.Q_TIME="Q_TIME";var LM=class{constructor(t){this.value=t}};LM.FLOOR="FLOOR",LM.ROOF="ROOF",LM.LANDING="LANDING",LM.BASESLAB="BASESLAB",LM.APPROACH_SLAB="APPROACH_SLAB",LM.PAVING="PAVING",LM.WEARING="WEARING",LM.SIDEWALK="SIDEWALK",LM.USERDEFINED="USERDEFINED",LM.NOTDEFINED="NOTDEFINED";var kM=class{constructor(t){this.value=t}};kM.SOLARCOLLECTOR="SOLARCOLLECTOR",kM.SOLARPANEL="SOLARPANEL",kM.USERDEFINED="USERDEFINED",kM.NOTDEFINED="NOTDEFINED";var UM=class{constructor(t){this.value=t}};UM.CONVECTOR="CONVECTOR",UM.RADIATOR="RADIATOR",UM.USERDEFINED="USERDEFINED",UM.NOTDEFINED="NOTDEFINED";var BM=class{constructor(t){this.value=t}};BM.SPACE="SPACE",BM.PARKING="PARKING",BM.GFA="GFA",BM.INTERNAL="INTERNAL",BM.EXTERNAL="EXTERNAL",BM.USERDEFINED="USERDEFINED",BM.NOTDEFINED="NOTDEFINED";var zM=class{constructor(t){this.value=t}};zM.CONSTRUCTION="CONSTRUCTION",zM.FIRESAFETY="FIRESAFETY",zM.LIGHTING="LIGHTING",zM.OCCUPANCY="OCCUPANCY",zM.SECURITY="SECURITY",zM.THERMAL="THERMAL",zM.TRANSPORT="TRANSPORT",zM.VENTILATION="VENTILATION",zM.USERDEFINED="USERDEFINED",zM.NOTDEFINED="NOTDEFINED";var GM=class{constructor(t){this.value=t}};GM.BIRDCAGE="BIRDCAGE",GM.COWL="COWL",GM.RAINWATERHOPPER="RAINWATERHOPPER",GM.USERDEFINED="USERDEFINED",GM.NOTDEFINED="NOTDEFINED";var HM=class{constructor(t){this.value=t}};HM.STRAIGHT="STRAIGHT",HM.WINDER="WINDER",HM.SPIRAL="SPIRAL",HM.CURVED="CURVED",HM.FREEFORM="FREEFORM",HM.USERDEFINED="USERDEFINED",HM.NOTDEFINED="NOTDEFINED";var jM=class{constructor(t){this.value=t}};jM.STRAIGHT_RUN_STAIR="STRAIGHT_RUN_STAIR",jM.TWO_STRAIGHT_RUN_STAIR="TWO_STRAIGHT_RUN_STAIR",jM.QUARTER_WINDING_STAIR="QUARTER_WINDING_STAIR",jM.QUARTER_TURN_STAIR="QUARTER_TURN_STAIR",jM.HALF_WINDING_STAIR="HALF_WINDING_STAIR",jM.HALF_TURN_STAIR="HALF_TURN_STAIR",jM.TWO_QUARTER_WINDING_STAIR="TWO_QUARTER_WINDING_STAIR",jM.TWO_QUARTER_TURN_STAIR="TWO_QUARTER_TURN_STAIR",jM.THREE_QUARTER_WINDING_STAIR="THREE_QUARTER_WINDING_STAIR",jM.THREE_QUARTER_TURN_STAIR="THREE_QUARTER_TURN_STAIR",jM.SPIRAL_STAIR="SPIRAL_STAIR",jM.DOUBLE_RETURN_STAIR="DOUBLE_RETURN_STAIR",jM.CURVED_RUN_STAIR="CURVED_RUN_STAIR",jM.TWO_CURVED_RUN_STAIR="TWO_CURVED_RUN_STAIR",jM.USERDEFINED="USERDEFINED",jM.NOTDEFINED="NOTDEFINED";var VM=class{constructor(t){this.value=t}};VM.READWRITE="READWRITE",VM.READONLY="READONLY",VM.LOCKED="LOCKED",VM.READWRITELOCKED="READWRITELOCKED",VM.READONLYLOCKED="READONLYLOCKED";var WM=class{constructor(t){this.value=t}};WM.CONST="CONST",WM.LINEAR="LINEAR",WM.POLYGONAL="POLYGONAL",WM.EQUIDISTANT="EQUIDISTANT",WM.SINUS="SINUS",WM.PARABOLA="PARABOLA",WM.DISCRETE="DISCRETE",WM.USERDEFINED="USERDEFINED",WM.NOTDEFINED="NOTDEFINED";var ZM=class{constructor(t){this.value=t}};ZM.RIGID_JOINED_MEMBER="RIGID_JOINED_MEMBER",ZM.PIN_JOINED_MEMBER="PIN_JOINED_MEMBER",ZM.CABLE="CABLE",ZM.TENSION_MEMBER="TENSION_MEMBER",ZM.COMPRESSION_MEMBER="COMPRESSION_MEMBER",ZM.USERDEFINED="USERDEFINED",ZM.NOTDEFINED="NOTDEFINED";var YM=class{constructor(t){this.value=t}};YM.CONST="CONST",YM.BILINEAR="BILINEAR",YM.DISCRETE="DISCRETE",YM.ISOCONTOUR="ISOCONTOUR",YM.USERDEFINED="USERDEFINED",YM.NOTDEFINED="NOTDEFINED";var qM=class{constructor(t){this.value=t}};qM.BENDING_ELEMENT="BENDING_ELEMENT",qM.MEMBRANE_ELEMENT="MEMBRANE_ELEMENT",qM.SHELL="SHELL",qM.USERDEFINED="USERDEFINED",qM.NOTDEFINED="NOTDEFINED";var XM=class{constructor(t){this.value=t}};XM.PURCHASE="PURCHASE",XM.WORK="WORK",XM.USERDEFINED="USERDEFINED",XM.NOTDEFINED="NOTDEFINED";var KM=class{constructor(t){this.value=t}};KM.MARK="MARK",KM.TAG="TAG",KM.TREATMENT="TREATMENT",KM.DEFECT="DEFECT",KM.USERDEFINED="USERDEFINED",KM.NOTDEFINED="NOTDEFINED";var QM=class{constructor(t){this.value=t}};QM.POSITIVE="POSITIVE",QM.NEGATIVE="NEGATIVE",QM.BOTH="BOTH";var JM=class{constructor(t){this.value=t}};JM.CONTACTOR="CONTACTOR",JM.DIMMERSWITCH="DIMMERSWITCH",JM.EMERGENCYSTOP="EMERGENCYSTOP",JM.KEYPAD="KEYPAD",JM.MOMENTARYSWITCH="MOMENTARYSWITCH",JM.SELECTORSWITCH="SELECTORSWITCH",JM.STARTER="STARTER",JM.SWITCHDISCONNECTOR="SWITCHDISCONNECTOR",JM.TOGGLESWITCH="TOGGLESWITCH",JM.USERDEFINED="USERDEFINED",JM.NOTDEFINED="NOTDEFINED";var $M=class{constructor(t){this.value=t}};$M.PANEL="PANEL",$M.WORKSURFACE="WORKSURFACE",$M.USERDEFINED="USERDEFINED",$M.NOTDEFINED="NOTDEFINED";var tP=class{constructor(t){this.value=t}};tP.BASIN="BASIN",tP.BREAKPRESSURE="BREAKPRESSURE",tP.EXPANSION="EXPANSION",tP.FEEDANDEXPANSION="FEEDANDEXPANSION",tP.PRESSUREVESSEL="PRESSUREVESSEL",tP.STORAGE="STORAGE",tP.VESSEL="VESSEL",tP.USERDEFINED="USERDEFINED",tP.NOTDEFINED="NOTDEFINED";var eP=class{constructor(t){this.value=t}};eP.ELAPSEDTIME="ELAPSEDTIME",eP.WORKTIME="WORKTIME",eP.NOTDEFINED="NOTDEFINED";var nP=class{constructor(t){this.value=t}};nP.ATTENDANCE="ATTENDANCE",nP.CONSTRUCTION="CONSTRUCTION",nP.DEMOLITION="DEMOLITION",nP.DISMANTLE="DISMANTLE",nP.DISPOSAL="DISPOSAL",nP.INSTALLATION="INSTALLATION",nP.LOGISTIC="LOGISTIC",nP.MAINTENANCE="MAINTENANCE",nP.MOVE="MOVE",nP.OPERATION="OPERATION",nP.REMOVAL="REMOVAL",nP.RENOVATION="RENOVATION",nP.USERDEFINED="USERDEFINED",nP.NOTDEFINED="NOTDEFINED";var iP=class{constructor(t){this.value=t}};iP.COUPLER="COUPLER",iP.FIXED_END="FIXED_END",iP.TENSIONING_END="TENSIONING_END",iP.USERDEFINED="USERDEFINED",iP.NOTDEFINED="NOTDEFINED";var rP=class{constructor(t){this.value=t}};rP.DUCT="DUCT",rP.COUPLER="COUPLER",rP.GROUTING_DUCT="GROUTING_DUCT",rP.TRUMPET="TRUMPET",rP.DIABOLO="DIABOLO",rP.USERDEFINED="USERDEFINED",rP.NOTDEFINED="NOTDEFINED";var sP=class{constructor(t){this.value=t}};sP.BAR="BAR",sP.COATED="COATED",sP.STRAND="STRAND",sP.WIRE="WIRE",sP.USERDEFINED="USERDEFINED",sP.NOTDEFINED="NOTDEFINED";var oP=class{constructor(t){this.value=t}};oP.LEFT="LEFT",oP.RIGHT="RIGHT",oP.UP="UP",oP.DOWN="DOWN";var aP=class{constructor(t){this.value=t}};aP.CONTINUOUS="CONTINUOUS",aP.DISCRETE="DISCRETE",aP.DISCRETEBINARY="DISCRETEBINARY",aP.PIECEWISEBINARY="PIECEWISEBINARY",aP.PIECEWISECONSTANT="PIECEWISECONSTANT",aP.PIECEWISECONTINUOUS="PIECEWISECONTINUOUS",aP.NOTDEFINED="NOTDEFINED";var lP=class{constructor(t){this.value=t}};lP.CURRENT="CURRENT",lP.FREQUENCY="FREQUENCY",lP.INVERTER="INVERTER",lP.RECTIFIER="RECTIFIER",lP.VOLTAGE="VOLTAGE",lP.USERDEFINED="USERDEFINED",lP.NOTDEFINED="NOTDEFINED";var hP=class{constructor(t){this.value=t}};hP.DISCONTINUOUS="DISCONTINUOUS",hP.CONTINUOUS="CONTINUOUS",hP.CONTSAMEGRADIENT="CONTSAMEGRADIENT",hP.CONTSAMEGRADIENTSAMECURVATURE="CONTSAMEGRADIENTSAMECURVATURE";var cP=class{constructor(t){this.value=t}};cP.BIQUADRATICPARABOLA="BIQUADRATICPARABOLA",cP.BLOSSCURVE="BLOSSCURVE",cP.CLOTHOIDCURVE="CLOTHOIDCURVE",cP.COSINECURVE="COSINECURVE",cP.CUBICPARABOLA="CUBICPARABOLA",cP.SINECURVE="SINECURVE";var uP=class{constructor(t){this.value=t}};uP.ELEVATOR="ELEVATOR",uP.ESCALATOR="ESCALATOR",uP.MOVINGWALKWAY="MOVINGWALKWAY",uP.CRANEWAY="CRANEWAY",uP.LIFTINGGEAR="LIFTINGGEAR",uP.USERDEFINED="USERDEFINED",uP.NOTDEFINED="NOTDEFINED";var pP=class{constructor(t){this.value=t}};pP.CARTESIAN="CARTESIAN",pP.PARAMETER="PARAMETER",pP.UNSPECIFIED="UNSPECIFIED";var dP=class{constructor(t){this.value=t}};dP.FINNED="FINNED",dP.USERDEFINED="USERDEFINED",dP.NOTDEFINED="NOTDEFINED";var fP=class{constructor(t){this.value=t}};fP.ABSORBEDDOSEUNIT="ABSORBEDDOSEUNIT",fP.AMOUNTOFSUBSTANCEUNIT="AMOUNTOFSUBSTANCEUNIT",fP.AREAUNIT="AREAUNIT",fP.DOSEEQUIVALENTUNIT="DOSEEQUIVALENTUNIT",fP.ELECTRICCAPACITANCEUNIT="ELECTRICCAPACITANCEUNIT",fP.ELECTRICCHARGEUNIT="ELECTRICCHARGEUNIT",fP.ELECTRICCONDUCTANCEUNIT="ELECTRICCONDUCTANCEUNIT",fP.ELECTRICCURRENTUNIT="ELECTRICCURRENTUNIT",fP.ELECTRICRESISTANCEUNIT="ELECTRICRESISTANCEUNIT",fP.ELECTRICVOLTAGEUNIT="ELECTRICVOLTAGEUNIT",fP.ENERGYUNIT="ENERGYUNIT",fP.FORCEUNIT="FORCEUNIT",fP.FREQUENCYUNIT="FREQUENCYUNIT",fP.ILLUMINANCEUNIT="ILLUMINANCEUNIT",fP.INDUCTANCEUNIT="INDUCTANCEUNIT",fP.LENGTHUNIT="LENGTHUNIT",fP.LUMINOUSFLUXUNIT="LUMINOUSFLUXUNIT",fP.LUMINOUSINTENSITYUNIT="LUMINOUSINTENSITYUNIT",fP.MAGNETICFLUXDENSITYUNIT="MAGNETICFLUXDENSITYUNIT",fP.MAGNETICFLUXUNIT="MAGNETICFLUXUNIT",fP.MASSUNIT="MASSUNIT",fP.PLANEANGLEUNIT="PLANEANGLEUNIT",fP.POWERUNIT="POWERUNIT",fP.PRESSUREUNIT="PRESSUREUNIT",fP.RADIOACTIVITYUNIT="RADIOACTIVITYUNIT",fP.SOLIDANGLEUNIT="SOLIDANGLEUNIT",fP.THERMODYNAMICTEMPERATUREUNIT="THERMODYNAMICTEMPERATUREUNIT",fP.TIMEUNIT="TIMEUNIT",fP.VOLUMEUNIT="VOLUMEUNIT",fP.USERDEFINED="USERDEFINED";var mP=class{constructor(t){this.value=t}};mP.ALARMPANEL="ALARMPANEL",mP.CONTROLPANEL="CONTROLPANEL",mP.GASDETECTIONPANEL="GASDETECTIONPANEL",mP.INDICATORPANEL="INDICATORPANEL",mP.MIMICPANEL="MIMICPANEL",mP.HUMIDISTAT="HUMIDISTAT",mP.THERMOSTAT="THERMOSTAT",mP.WEATHERSTATION="WEATHERSTATION",mP.USERDEFINED="USERDEFINED",mP.NOTDEFINED="NOTDEFINED";var gP=class{constructor(t){this.value=t}};gP.AIRHANDLER="AIRHANDLER",gP.AIRCONDITIONINGUNIT="AIRCONDITIONINGUNIT",gP.DEHUMIDIFIER="DEHUMIDIFIER",gP.SPLITSYSTEM="SPLITSYSTEM",gP.ROOFTOPUNIT="ROOFTOPUNIT",gP.USERDEFINED="USERDEFINED",gP.NOTDEFINED="NOTDEFINED";var yP=class{constructor(t){this.value=t}};yP.AIRRELEASE="AIRRELEASE",yP.ANTIVACUUM="ANTIVACUUM",yP.CHANGEOVER="CHANGEOVER",yP.CHECK="CHECK",yP.COMMISSIONING="COMMISSIONING",yP.DIVERTING="DIVERTING",yP.DRAWOFFCOCK="DRAWOFFCOCK",yP.DOUBLECHECK="DOUBLECHECK",yP.DOUBLEREGULATING="DOUBLEREGULATING",yP.FAUCET="FAUCET",yP.FLUSHING="FLUSHING",yP.GASCOCK="GASCOCK",yP.GASTAP="GASTAP",yP.ISOLATING="ISOLATING",yP.MIXING="MIXING",yP.PRESSUREREDUCING="PRESSUREREDUCING",yP.PRESSURERELIEF="PRESSURERELIEF",yP.REGULATING="REGULATING",yP.SAFETYCUTOFF="SAFETYCUTOFF",yP.STEAMTRAP="STEAMTRAP",yP.STOPCOCK="STOPCOCK",yP.USERDEFINED="USERDEFINED",yP.NOTDEFINED="NOTDEFINED";var vP=class{constructor(t){this.value=t}};vP.BENDING_YIELD="BENDING_YIELD",vP.SHEAR_YIELD="SHEAR_YIELD",vP.AXIAL_YIELD="AXIAL_YIELD",vP.FRICTION="FRICTION",vP.VISCOUS="VISCOUS",vP.RUBBER="RUBBER",vP.USERDEFINED="USERDEFINED",vP.NOTDEFINED="NOTDEFINED";var _P=class{constructor(t){this.value=t}};_P.COMPRESSION="COMPRESSION",_P.SPRING="SPRING",_P.BASE="BASE",_P.USERDEFINED="USERDEFINED",_P.NOTDEFINED="NOTDEFINED";var TP=class{constructor(t){this.value=t}};TP.CUTOUT="CUTOUT",TP.NOTCH="NOTCH",TP.HOLE="HOLE",TP.MITER="MITER",TP.CHAMFER="CHAMFER",TP.EDGE="EDGE",TP.USERDEFINED="USERDEFINED",TP.NOTDEFINED="NOTDEFINED";var EP=class{constructor(t){this.value=t}};EP.MOVABLE="MOVABLE",EP.PARAPET="PARAPET",EP.PARTITIONING="PARTITIONING",EP.PLUMBINGWALL="PLUMBINGWALL",EP.SHEAR="SHEAR",EP.SOLIDWALL="SOLIDWALL",EP.STANDARD="STANDARD",EP.POLYGONAL="POLYGONAL",EP.ELEMENTEDWALL="ELEMENTEDWALL",EP.RETAININGWALL="RETAININGWALL",EP.USERDEFINED="USERDEFINED",EP.NOTDEFINED="NOTDEFINED";var xP=class{constructor(t){this.value=t}};xP.FLOORTRAP="FLOORTRAP",xP.FLOORWASTE="FLOORWASTE",xP.GULLYSUMP="GULLYSUMP",xP.GULLYTRAP="GULLYTRAP",xP.ROOFDRAIN="ROOFDRAIN",xP.WASTEDISPOSALUNIT="WASTEDISPOSALUNIT",xP.WASTETRAP="WASTETRAP",xP.USERDEFINED="USERDEFINED",xP.NOTDEFINED="NOTDEFINED";var bP=class{constructor(t){this.value=t}};bP.SIDEHUNGRIGHTHAND="SIDEHUNGRIGHTHAND",bP.SIDEHUNGLEFTHAND="SIDEHUNGLEFTHAND",bP.TILTANDTURNRIGHTHAND="TILTANDTURNRIGHTHAND",bP.TILTANDTURNLEFTHAND="TILTANDTURNLEFTHAND",bP.TOPHUNG="TOPHUNG",bP.BOTTOMHUNG="BOTTOMHUNG",bP.PIVOTHORIZONTAL="PIVOTHORIZONTAL",bP.PIVOTVERTICAL="PIVOTVERTICAL",bP.SLIDINGHORIZONTAL="SLIDINGHORIZONTAL",bP.SLIDINGVERTICAL="SLIDINGVERTICAL",bP.REMOVABLECASEMENT="REMOVABLECASEMENT",bP.FIXEDCASEMENT="FIXEDCASEMENT",bP.OTHEROPERATION="OTHEROPERATION",bP.NOTDEFINED="NOTDEFINED";var IP=class{constructor(t){this.value=t}};IP.LEFT="LEFT",IP.MIDDLE="MIDDLE",IP.RIGHT="RIGHT",IP.BOTTOM="BOTTOM",IP.TOP="TOP",IP.NOTDEFINED="NOTDEFINED";var wP=class{constructor(t){this.value=t}};wP.ALUMINIUM="ALUMINIUM",wP.HIGH_GRADE_STEEL="HIGH_GRADE_STEEL",wP.STEEL="STEEL",wP.WOOD="WOOD",wP.ALUMINIUM_WOOD="ALUMINIUM_WOOD",wP.PLASTIC="PLASTIC",wP.OTHER_CONSTRUCTION="OTHER_CONSTRUCTION",wP.NOTDEFINED="NOTDEFINED";var SP=class{constructor(t){this.value=t}};SP.SINGLE_PANEL="SINGLE_PANEL",SP.DOUBLE_PANEL_VERTICAL="DOUBLE_PANEL_VERTICAL",SP.DOUBLE_PANEL_HORIZONTAL="DOUBLE_PANEL_HORIZONTAL",SP.TRIPLE_PANEL_VERTICAL="TRIPLE_PANEL_VERTICAL",SP.TRIPLE_PANEL_BOTTOM="TRIPLE_PANEL_BOTTOM",SP.TRIPLE_PANEL_TOP="TRIPLE_PANEL_TOP",SP.TRIPLE_PANEL_LEFT="TRIPLE_PANEL_LEFT",SP.TRIPLE_PANEL_RIGHT="TRIPLE_PANEL_RIGHT",SP.TRIPLE_PANEL_HORIZONTAL="TRIPLE_PANEL_HORIZONTAL",SP.USERDEFINED="USERDEFINED",SP.NOTDEFINED="NOTDEFINED";var RP=class{constructor(t){this.value=t}};RP.WINDOW="WINDOW",RP.SKYLIGHT="SKYLIGHT",RP.LIGHTDOME="LIGHTDOME",RP.USERDEFINED="USERDEFINED",RP.NOTDEFINED="NOTDEFINED";var CP=class{constructor(t){this.value=t}};CP.SINGLE_PANEL="SINGLE_PANEL",CP.DOUBLE_PANEL_VERTICAL="DOUBLE_PANEL_VERTICAL",CP.DOUBLE_PANEL_HORIZONTAL="DOUBLE_PANEL_HORIZONTAL",CP.TRIPLE_PANEL_VERTICAL="TRIPLE_PANEL_VERTICAL",CP.TRIPLE_PANEL_BOTTOM="TRIPLE_PANEL_BOTTOM",CP.TRIPLE_PANEL_TOP="TRIPLE_PANEL_TOP",CP.TRIPLE_PANEL_LEFT="TRIPLE_PANEL_LEFT",CP.TRIPLE_PANEL_RIGHT="TRIPLE_PANEL_RIGHT",CP.TRIPLE_PANEL_HORIZONTAL="TRIPLE_PANEL_HORIZONTAL",CP.USERDEFINED="USERDEFINED",CP.NOTDEFINED="NOTDEFINED";var AP=class{constructor(t){this.value=t}};AP.FIRSTSHIFT="FIRSTSHIFT",AP.SECONDSHIFT="SECONDSHIFT",AP.THIRDSHIFT="THIRDSHIFT",AP.USERDEFINED="USERDEFINED",AP.NOTDEFINED="NOTDEFINED";var DP=class{constructor(t){this.value=t}};DP.ACTUAL="ACTUAL",DP.BASELINE="BASELINE",DP.PLANNED="PLANNED",DP.USERDEFINED="USERDEFINED",DP.NOTDEFINED="NOTDEFINED";var OP=class{constructor(t){this.value=t}};OP.ACTUAL="ACTUAL",OP.BASELINE="BASELINE",OP.PLANNED="PLANNED",OP.USERDEFINED="USERDEFINED",OP.NOTDEFINED="NOTDEFINED";var NP,MP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.PredefinedType=l,this.Status=h,this.LongDescription=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new MP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.PredefinedType),t.push(this.Status),t.push(this.LongDescription),t}},PP=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.TheActor=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new PP(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.TheActor),t}},FP=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Role=n,this.UserDefinedRole=i,this.Description=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new FP(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Role),t.push(this.UserDefinedRole),t.push(this.Description),t}},LP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new LP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},kP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new kP(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},UP=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Purpose=n,this.Description=i,this.UserDefinedPurpose=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new UP(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Purpose),t.push(this.Description),t.push(this.UserDefinedPurpose),t}},BP=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Outer=n}static FromTape(t,e,n){let i=0,r=n[i++];return new BP(t,e,r)}ToTape(){let t=[];return t.push(this.Outer),t}},zP=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Outer=n,this.Voids=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new zP(t,e,r,s)}ToTape(){let t=[];return t.push(this.Outer),t.push(this.Voids),t}},GP=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Bounds=n,this.FaceSurface=i,this.SameSense=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new GP(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Bounds),t.push(this.FaceSurface),t.push(this.SameSense),t}},HP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new HP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},jP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new jP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},VP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new VP(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},WP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new WP(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},ZP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new ZP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},YP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new YP(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},qP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new qP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},XP=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new XP(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},KP=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Axis=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new KP(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Axis),t.push(this.PredefinedType),t}},QP=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.StartDistAlong=n,this.Segments=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new QP(t,e,r,s)}ToTape(){let t=[];return t.push(this.StartDistAlong),t.push(this.Segments),t}},JP=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.TangentialContinuity=n,this.StartTag=i,this.EndTag=r,this.CurveGeometry=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new JP(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t.push(this.CurveGeometry),t}},$P=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.TangentialContinuity=n,this.StartTag=i,this.EndTag=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new $P(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t}},tF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.TangentialContinuity=n,this.StartTag=i,this.EndTag=r,this.StartDistAlong=s,this.HorizontalLength=o,this.StartHeight=a,this.StartGradient=l,this.Radius=h,this.IsConvex=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new tF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t.push(this.StartDistAlong),t.push(this.HorizontalLength),t.push(this.StartHeight),t.push(this.StartGradient),t.push(this.Radius),t.push(this.IsConvex),t}},eF=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.TangentialContinuity=n,this.StartTag=i,this.EndTag=r,this.StartDistAlong=s,this.HorizontalLength=o,this.StartHeight=a,this.StartGradient=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new eF(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t.push(this.StartDistAlong),t.push(this.HorizontalLength),t.push(this.StartHeight),t.push(this.StartGradient),t}},nF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.TangentialContinuity=n,this.StartTag=i,this.EndTag=r,this.StartDistAlong=s,this.HorizontalLength=o,this.StartHeight=a,this.StartGradient=l,this.ParabolaConstant=h,this.IsConvex=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new nF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t.push(this.StartDistAlong),t.push(this.HorizontalLength),t.push(this.StartHeight),t.push(this.StartGradient),t.push(this.ParabolaConstant),t.push(this.IsConvex),t}},iF=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Segments=n}static FromTape(t,e,n){let i=0,r=n[i++];return new iF(t,e,r)}ToTape(){let t=[];return t.push(this.Segments),t}},rF=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.TangentialContinuity=n,this.StartTag=i,this.EndTag=r,this.StartDistAlong=s,this.HorizontalLength=o,this.StartHeight=a,this.StartGradient=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new rF(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.TangentialContinuity),t.push(this.StartTag),t.push(this.EndTag),t.push(this.StartDistAlong),t.push(this.HorizontalLength),t.push(this.StartHeight),t.push(this.StartGradient),t}},sF=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Horizontal=n,this.Vertical=i,this.Tag=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new sF(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Horizontal),t.push(this.Vertical),t.push(this.Tag),t}},oF=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new oF(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},aF=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.OuterBoundary=n,this.InnerBoundaries=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new aF(t,e,r,s)}ToTape(){let t=[];return t.push(this.OuterBoundary),t.push(this.InnerBoundaries),t}},lF=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ApplicationDeveloper=n,this.Version=i,this.ApplicationFullName=r,this.ApplicationIdentifier=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new lF(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ApplicationDeveloper),t.push(this.Version),t.push(this.ApplicationFullName),t.push(this.ApplicationIdentifier),t}},hF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.AppliedValue=r,this.UnitBasis=s,this.ApplicableDate=o,this.FixedUntilDate=a,this.Category=l,this.Condition=h,this.ArithmeticOperator=c,this.Components=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new hF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.AppliedValue),t.push(this.UnitBasis),t.push(this.ApplicableDate),t.push(this.FixedUntilDate),t.push(this.Category),t.push(this.Condition),t.push(this.ArithmeticOperator),t.push(this.Components),t}},cF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.Identifier=n,this.Name=i,this.Description=r,this.TimeOfApproval=s,this.Status=o,this.Level=a,this.Qualifier=l,this.RequestingApproval=h,this.GivingApproval=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new cF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.Identifier),t.push(this.Name),t.push(this.Description),t.push(this.TimeOfApproval),t.push(this.Status),t.push(this.Level),t.push(this.Qualifier),t.push(this.RequestingApproval),t.push(this.GivingApproval),t}},uF=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.RelatingApproval=r,this.RelatedApprovals=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new uF(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingApproval),t.push(this.RelatedApprovals),t}},pF=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.OuterCurve=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new pF(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.OuterCurve),t}},dF=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Curve=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new dF(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Curve),t}},fF=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.OuterCurve=r,this.InnerCurves=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new fF(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.OuterCurve),t.push(this.InnerCurves),t}},mF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.OriginalValue=l,this.CurrentValue=h,this.TotalReplacementCost=c,this.Owner=u,this.User=p,this.ResponsiblePerson=d,this.IncorporationDate=f,this.DepreciatedValue=m}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++];return new mF(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.OriginalValue),t.push(this.CurrentValue),t.push(this.TotalReplacementCost),t.push(this.Owner),t.push(this.User),t.push(this.ResponsiblePerson),t.push(this.IncorporationDate),t.push(this.DepreciatedValue),t}},gF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.BottomFlangeWidth=s,this.OverallDepth=o,this.WebThickness=a,this.BottomFlangeThickness=l,this.BottomFlangeFilletRadius=h,this.TopFlangeWidth=c,this.TopFlangeThickness=u,this.TopFlangeFilletRadius=p,this.BottomFlangeEdgeRadius=d,this.BottomFlangeSlope=f,this.TopFlangeEdgeRadius=m,this.TopFlangeSlope=g}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],v=n[i++];return new gF(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.BottomFlangeWidth),t.push(this.OverallDepth),t.push(this.WebThickness),t.push(this.BottomFlangeThickness),t.push(this.BottomFlangeFilletRadius),t.push(this.TopFlangeWidth),t.push(this.TopFlangeThickness),t.push(this.TopFlangeFilletRadius),t.push(this.BottomFlangeEdgeRadius),t.push(this.BottomFlangeSlope),t.push(this.TopFlangeEdgeRadius),t.push(this.TopFlangeSlope),t}},yF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new yF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},vF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new vF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},_F=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Location=n,this.Axis=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new _F(t,e,r,s)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Axis),t}},TF=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Location=n,this.RefDirection=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new TF(t,e,r,s)}ToTape(){let t=[];return t.push(this.Location),t.push(this.RefDirection),t}},EF=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Location=n,this.Axis=i,this.RefDirection=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new EF(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Axis),t.push(this.RefDirection),t}},xF=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Degree=n,this.ControlPointsList=i,this.CurveForm=r,this.ClosedCurve=s,this.SelfIntersect=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new xF(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Degree),t.push(this.ControlPointsList),t.push(this.CurveForm),t.push(this.ClosedCurve),t.push(this.SelfIntersect),t}},bF=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.Degree=n,this.ControlPointsList=i,this.CurveForm=r,this.ClosedCurve=s,this.SelfIntersect=o,this.KnotMultiplicities=a,this.Knots=l,this.KnotSpec=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new bF(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.Degree),t.push(this.ControlPointsList),t.push(this.CurveForm),t.push(this.ClosedCurve),t.push(this.SelfIntersect),t.push(this.KnotMultiplicities),t.push(this.Knots),t.push(this.KnotSpec),t}},IF=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.UDegree=n,this.VDegree=i,this.ControlPointsList=r,this.SurfaceForm=s,this.UClosed=o,this.VClosed=a,this.SelfIntersect=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new IF(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.UDegree),t.push(this.VDegree),t.push(this.ControlPointsList),t.push(this.SurfaceForm),t.push(this.UClosed),t.push(this.VClosed),t.push(this.SelfIntersect),t}},wF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.UDegree=n,this.VDegree=i,this.ControlPointsList=r,this.SurfaceForm=s,this.UClosed=o,this.VClosed=a,this.SelfIntersect=l,this.UMultiplicities=h,this.VMultiplicities=c,this.UKnots=u,this.VKnots=p,this.KnotSpec=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new wF(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.UDegree),t.push(this.VDegree),t.push(this.ControlPointsList),t.push(this.SurfaceForm),t.push(this.UClosed),t.push(this.VClosed),t.push(this.SelfIntersect),t.push(this.UMultiplicities),t.push(this.VMultiplicities),t.push(this.UKnots),t.push(this.VKnots),t.push(this.KnotSpec),t}},SF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new SF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},RF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new RF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},CF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new CF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},AF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new AF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},DF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new DF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},OF=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.RepeatS=n,this.RepeatT=i,this.Mode=r,this.TextureTransform=s,this.Parameter=o,this.RasterFormat=a,this.RasterCode=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new OF(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.RepeatS),t.push(this.RepeatT),t.push(this.Mode),t.push(this.TextureTransform),t.push(this.Parameter),t.push(this.RasterFormat),t.push(this.RasterCode),t}},NF=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Position=n,this.XLength=i,this.YLength=r,this.ZLength=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new NF(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Position),t.push(this.XLength),t.push(this.YLength),t.push(this.ZLength),t}},MF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new MF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},PF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new PF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},FF=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Operator=n,this.FirstOperand=i,this.SecondOperand=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new FF(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Operator),t.push(this.FirstOperand),t.push(this.SecondOperand),t}},LF=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Operator=n,this.FirstOperand=i,this.SecondOperand=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new LF(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Operator),t.push(this.FirstOperand),t.push(this.SecondOperand),t}},kF=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new kF(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},UF=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Segments=n,this.SelfIntersect=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new UF(t,e,r,s)}ToTape(){let t=[];return t.push(this.Segments),t.push(this.SelfIntersect),t}},BF=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.TranslationalStiffnessByLengthX=i,this.TranslationalStiffnessByLengthY=r,this.TranslationalStiffnessByLengthZ=s,this.RotationalStiffnessByLengthX=o,this.RotationalStiffnessByLengthY=a,this.RotationalStiffnessByLengthZ=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new BF(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TranslationalStiffnessByLengthX),t.push(this.TranslationalStiffnessByLengthY),t.push(this.TranslationalStiffnessByLengthZ),t.push(this.RotationalStiffnessByLengthX),t.push(this.RotationalStiffnessByLengthY),t.push(this.RotationalStiffnessByLengthZ),t}},zF=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.TranslationalStiffnessByAreaX=i,this.TranslationalStiffnessByAreaY=r,this.TranslationalStiffnessByAreaZ=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new zF(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TranslationalStiffnessByAreaX),t.push(this.TranslationalStiffnessByAreaY),t.push(this.TranslationalStiffnessByAreaZ),t}},GF=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.TranslationalStiffnessX=i,this.TranslationalStiffnessY=r,this.TranslationalStiffnessZ=s,this.RotationalStiffnessX=o,this.RotationalStiffnessY=a,this.RotationalStiffnessZ=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new GF(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TranslationalStiffnessX),t.push(this.TranslationalStiffnessY),t.push(this.TranslationalStiffnessZ),t.push(this.RotationalStiffnessX),t.push(this.RotationalStiffnessY),t.push(this.RotationalStiffnessZ),t}},HF=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.Name=n,this.TranslationalStiffnessX=i,this.TranslationalStiffnessY=r,this.TranslationalStiffnessZ=s,this.RotationalStiffnessX=o,this.RotationalStiffnessY=a,this.RotationalStiffnessZ=l,this.WarpingStiffness=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new HF(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TranslationalStiffnessX),t.push(this.TranslationalStiffnessY),t.push(this.TranslationalStiffnessZ),t.push(this.RotationalStiffnessX),t.push(this.RotationalStiffnessY),t.push(this.RotationalStiffnessZ),t.push(this.WarpingStiffness),t}},jF=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new jF(t,e)}ToTape(){return[]}},VF=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new VF(t,e)}ToTape(){return[]}},WF=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Corner=n,this.XDim=i,this.YDim=r,this.ZDim=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new WF(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Corner),t.push(this.XDim),t.push(this.YDim),t.push(this.ZDim),t}},ZF=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.BaseSurface=n,this.AgreementFlag=i,this.Enclosure=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new ZF(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.BaseSurface),t.push(this.AgreementFlag),t.push(this.Enclosure),t}},YF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new YF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.PredefinedType),t}},qF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new qF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.PredefinedType),t}},XF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c,this.ElevationOfRefHeight=u,this.ElevationOfTerrain=p,this.BuildingAddress=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new XF(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.ElevationOfRefHeight),t.push(this.ElevationOfTerrain),t.push(this.BuildingAddress),t}},KF=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new KF(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},QF=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new QF(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},JF=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new JF(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},$F=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new $F(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},tL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new tL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},eL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new eL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},nL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c,this.Elevation=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new nL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.Elevation),t}},iL=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.PredefinedType=a,this.LongName=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new iL(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.PredefinedType),t.push(this.LongName),t}},rL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new rL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},sL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new sL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},oL=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.Depth=s,this.Width=o,this.WallThickness=a,this.Girth=l,this.InternalFilletRadius=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new oL(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Depth),t.push(this.Width),t.push(this.WallThickness),t.push(this.Girth),t.push(this.InternalFilletRadius),t}},aL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new aL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},lL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new lL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},hL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new hL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},cL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new cL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},uL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new uL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},pL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new pL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},dL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new dL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},fL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new fL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},mL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new mL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},gL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new gL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},yL=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Coordinates=n}static FromTape(t,e,n){let i=0,r=n[i++];return new yL(t,e,r)}ToTape(){let t=[];return t.push(this.Coordinates),t}},vL=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new vL(t,e)}ToTape(){return[]}},_L=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.CoordList=n,this.TagList=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new _L(t,e,r,s)}ToTape(){let t=[];return t.push(this.CoordList),t.push(this.TagList),t}},TL=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.CoordList=n,this.TagList=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new TL(t,e,r,s)}ToTape(){let t=[];return t.push(this.CoordList),t.push(this.TagList),t}},EL=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Axis1=n,this.Axis2=i,this.LocalOrigin=r,this.Scale=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new EL(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Axis1),t.push(this.Axis2),t.push(this.LocalOrigin),t.push(this.Scale),t}},xL=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Axis1=n,this.Axis2=i,this.LocalOrigin=r,this.Scale=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new xL(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Axis1),t.push(this.Axis2),t.push(this.LocalOrigin),t.push(this.Scale),t}},bL=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Axis1=n,this.Axis2=i,this.LocalOrigin=r,this.Scale=s,this.Scale2=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new bL(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Axis1),t.push(this.Axis2),t.push(this.LocalOrigin),t.push(this.Scale),t.push(this.Scale2),t}},IL=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Axis1=n,this.Axis2=i,this.LocalOrigin=r,this.Scale=s,this.Axis3=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new IL(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Axis1),t.push(this.Axis2),t.push(this.LocalOrigin),t.push(this.Scale),t.push(this.Axis3),t}},wL=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Axis1=n,this.Axis2=i,this.LocalOrigin=r,this.Scale=s,this.Axis3=o,this.Scale2=a,this.Scale3=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new wL(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Axis1),t.push(this.Axis2),t.push(this.LocalOrigin),t.push(this.Scale),t.push(this.Axis3),t.push(this.Scale2),t.push(this.Scale3),t}},SL=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Curve=r,this.Thickness=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new SL(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Curve),t.push(this.Thickness),t}},RL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new RL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},CL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new CL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},AL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new AL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},DL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new DL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},OL=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Position=n,this.Radius=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new OL(t,e,r,s)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Radius),t}},NL=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.Radius=s,this.WallThickness=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new NL(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Radius),t.push(this.WallThickness),t}},ML=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.Radius=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new ML(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Radius),t}},PL=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.StartPoint=n,this.StartDirection=i,this.SegmentLength=r,this.Radius=s,this.IsCCW=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new PL(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.StartPoint),t.push(this.StartDirection),t.push(this.SegmentLength),t.push(this.Radius),t.push(this.IsCCW),t}},FL=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new FL(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},LL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new LL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},kL=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Source=n,this.Edition=i,this.EditionDate=r,this.Name=s,this.Description=o,this.Location=a,this.ReferenceTokens=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new kL(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Source),t.push(this.Edition),t.push(this.EditionDate),t.push(this.Name),t.push(this.Description),t.push(this.Location),t.push(this.ReferenceTokens),t}},UL=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Location=n,this.Identification=i,this.Name=r,this.ReferencedSource=s,this.Description=o,this.Sort=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new UL(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t.push(this.ReferencedSource),t.push(this.Description),t.push(this.Sort),t}},BL=class{constructor(t,e,n){this.expressID=t,this.type=e,this.CfsFaces=n}static FromTape(t,e,n){let i=0,r=n[i++];return new BL(t,e,r)}ToTape(){let t=[];return t.push(this.CfsFaces),t}},zL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new zL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},GL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new GL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},HL=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Red=i,this.Green=r,this.Blue=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new HL(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Red),t.push(this.Green),t.push(this.Blue),t}},jL=class{constructor(t,e,n){this.expressID=t,this.type=e,this.ColourList=n}static FromTape(t,e,n){let i=0,r=n[i++];return new jL(t,e,r)}ToTape(){let t=[];return t.push(this.ColourList),t}},VL=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new VL(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},WL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new WL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},ZL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new ZL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},YL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new YL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},qL=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new qL(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},XL=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new XL(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},KL=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.UsageName=r,this.HasProperties=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new KL(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.UsageName),t.push(this.HasProperties),t}},QL=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.UsageName=o,this.TemplateType=a,this.HasPropertyTemplates=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new QL(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.UsageName),t.push(this.TemplateType),t.push(this.HasPropertyTemplates),t}},JL=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Segments=n,this.SelfIntersect=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new JL(t,e,r,s)}ToTape(){let t=[];return t.push(this.Segments),t.push(this.SelfIntersect),t}},$L=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Segments=n,this.SelfIntersect=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new $L(t,e,r,s)}ToTape(){let t=[];return t.push(this.Segments),t.push(this.SelfIntersect),t}},tk=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Transition=n,this.SameSense=i,this.ParentCurve=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new tk(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Transition),t.push(this.SameSense),t.push(this.ParentCurve),t}},ek=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Profiles=r,this.Label=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new ek(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Profiles),t.push(this.Label),t}},nk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new nk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},ik=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new ik(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},rk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new rk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},sk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new sk(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},ok=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Position=n}static FromTape(t,e,n){let i=0,r=n[i++];return new ok(t,e,r)}ToTape(){let t=[];return t.push(this.Position),t}},ak=class{constructor(t,e,n){this.expressID=t,this.type=e,this.CfsFaces=n}static FromTape(t,e,n){let i=0,r=n[i++];return new ak(t,e,r)}ToTape(){let t=[];return t.push(this.CfsFaces),t}},lk=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.CurveOnRelatingElement=n,this.CurveOnRelatedElement=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new lk(t,e,r,s)}ToTape(){let t=[];return t.push(this.CurveOnRelatingElement),t.push(this.CurveOnRelatedElement),t}},hk=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new hk(t,e)}ToTape(){return[]}},ck=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.PointOnRelatingElement=n,this.PointOnRelatedElement=i,this.EccentricityInX=r,this.EccentricityInY=s,this.EccentricityInZ=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new ck(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.PointOnRelatingElement),t.push(this.PointOnRelatedElement),t.push(this.EccentricityInX),t.push(this.EccentricityInY),t.push(this.EccentricityInZ),t}},uk=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.PointOnRelatingElement=n,this.PointOnRelatedElement=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new uk(t,e,r,s)}ToTape(){let t=[];return t.push(this.PointOnRelatingElement),t.push(this.PointOnRelatedElement),t}},pk=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.SurfaceOnRelatingElement=n,this.SurfaceOnRelatedElement=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new pk(t,e,r,s)}ToTape(){let t=[];return t.push(this.SurfaceOnRelatingElement),t.push(this.SurfaceOnRelatedElement),t}},dk=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.VolumeOnRelatingElement=n,this.VolumeOnRelatedElement=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new dk(t,e,r,s)}ToTape(){let t=[];return t.push(this.VolumeOnRelatingElement),t.push(this.VolumeOnRelatedElement),t}},fk=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.ConstraintGrade=r,this.ConstraintSource=s,this.CreatingActor=o,this.CreationTime=a,this.UserDefinedGrade=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new fk(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.ConstraintGrade),t.push(this.ConstraintSource),t.push(this.CreatingActor),t.push(this.CreationTime),t.push(this.UserDefinedGrade),t}},mk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.Usage=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new mk(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},gk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ResourceType=c,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new gk(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},yk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.Usage=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new yk(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},vk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ResourceType=c,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new vk(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},_k=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.Usage=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new _k(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},Tk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ResourceType=c,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new Tk(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},Ek=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.Usage=h,this.BaseCosts=c,this.BaseQuantity=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Ek(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t}},xk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ResourceType=c,this.BaseCosts=u,this.BaseQuantity=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new xk(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t}},bk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.LongName=a,this.Phase=l,this.RepresentationContexts=h,this.UnitsInContext=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new bk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t.push(this.Phase),t.push(this.RepresentationContexts),t.push(this.UnitsInContext),t}},Ik=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Dimensions=n,this.UnitType=i,this.Name=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Ik(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Dimensions),t.push(this.UnitType),t.push(this.Name),t}},wk=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new wk(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t}},Sk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Sk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Rk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Rk(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Ck=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Dimensions=n,this.UnitType=i,this.Name=r,this.ConversionFactor=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Ck(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Dimensions),t.push(this.UnitType),t.push(this.Name),t.push(this.ConversionFactor),t}},Ak=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Dimensions=n,this.UnitType=i,this.Name=r,this.ConversionFactor=s,this.ConversionOffset=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Ak(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Dimensions),t.push(this.UnitType),t.push(this.Name),t.push(this.ConversionFactor),t.push(this.ConversionOffset),t}},Dk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Dk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Ok=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Ok(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Nk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Nk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Mk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Mk(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Pk=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.SourceCRS=n,this.TargetCRS=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new Pk(t,e,r,s)}ToTape(){let t=[];return t.push(this.SourceCRS),t.push(this.TargetCRS),t}},Fk=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.GeodeticDatum=r,this.VerticalDatum=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Fk(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.GeodeticDatum),t.push(this.VerticalDatum),t}},Lk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.PredefinedType=l,this.CostValues=h,this.CostQuantities=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Lk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.PredefinedType),t.push(this.CostValues),t.push(this.CostQuantities),t}},kk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.PredefinedType=l,this.Status=h,this.SubmittedOn=c,this.UpdateDate=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new kk(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.PredefinedType),t.push(this.Status),t.push(this.SubmittedOn),t.push(this.UpdateDate),t}},Uk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.AppliedValue=r,this.UnitBasis=s,this.ApplicableDate=o,this.FixedUntilDate=a,this.Category=l,this.Condition=h,this.ArithmeticOperator=c,this.Components=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Uk(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.AppliedValue),t.push(this.UnitBasis),t.push(this.ApplicableDate),t.push(this.FixedUntilDate),t.push(this.Category),t.push(this.Condition),t.push(this.ArithmeticOperator),t.push(this.Components),t}},Bk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Bk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},zk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new zk(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Gk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.Usage=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new Gk(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},Hk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ResourceType=c,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new Hk(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},jk=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Position=n}static FromTape(t,e,n){let i=0,r=n[i++];return new jk(t,e,r)}ToTape(){let t=[];return t.push(this.Position),t}},Vk=class{constructor(t,e,n){this.expressID=t,this.type=e,this.TreeRootExpression=n}static FromTape(t,e,n){let i=0,r=n[i++];return new Vk(t,e,r)}ToTape(){let t=[];return t.push(this.TreeRootExpression),t}},Wk=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.RelatingMonetaryUnit=r,this.RelatedMonetaryUnit=s,this.ExchangeRate=o,this.RateDateTime=a,this.RateSource=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new Wk(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingMonetaryUnit),t.push(this.RelatedMonetaryUnit),t.push(this.ExchangeRate),t.push(this.RateDateTime),t.push(this.RateSource),t}},Zk=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Zk(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Yk=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Yk(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},qk=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new qk(t,e)}ToTape(){return[]}},Xk=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.BasisSurface=n,this.OuterBoundary=i,this.InnerBoundaries=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Xk(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.BasisSurface),t.push(this.OuterBoundary),t.push(this.InnerBoundaries),t}},Kk=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.BasisSurface=n,this.Boundaries=i,this.ImplicitOuter=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Kk(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.BasisSurface),t.push(this.Boundaries),t.push(this.ImplicitOuter),t}},Qk=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.StartPoint=n,this.StartDirection=i,this.SegmentLength=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Qk(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.StartPoint),t.push(this.StartDirection),t.push(this.SegmentLength),t}},Jk=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.CurveFont=i,this.CurveWidth=r,this.CurveColour=s,this.ModelOrDraughting=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Jk(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.CurveFont),t.push(this.CurveWidth),t.push(this.CurveColour),t.push(this.ModelOrDraughting),t}},$k=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Name=n,this.PatternList=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new $k(t,e,r,s)}ToTape(){let t=[];return t.push(this.Name),t.push(this.PatternList),t}},tU=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.CurveFont=i,this.CurveFontScaling=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new tU(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.CurveFont),t.push(this.CurveFontScaling),t}},eU=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.VisibleSegmentLength=n,this.InvisibleSegmentLength=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new eU(t,e,r,s)}ToTape(){let t=[];return t.push(this.VisibleSegmentLength),t.push(this.InvisibleSegmentLength),t}},nU=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Position=n,this.Radius=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new nU(t,e,r,s)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Radius),t}},iU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new iU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},rU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new rU(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},sU=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new sU(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},oU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new oU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},aU=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.ParentProfile=r,this.Operator=s,this.Label=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new aU(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.ParentProfile),t.push(this.Operator),t.push(this.Label),t}},lU=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Elements=n,this.UnitType=i,this.UserDefinedType=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new lU(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Elements),t.push(this.UnitType),t.push(this.UserDefinedType),t}},hU=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Unit=n,this.Exponent=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new hU(t,e,r,s)}ToTape(){let t=[];return t.push(this.Unit),t.push(this.Exponent),t}},cU=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.LengthExponent=n,this.MassExponent=i,this.TimeExponent=r,this.ElectricCurrentExponent=s,this.ThermodynamicTemperatureExponent=o,this.AmountOfSubstanceExponent=a,this.LuminousIntensityExponent=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new cU(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.LengthExponent),t.push(this.MassExponent),t.push(this.TimeExponent),t.push(this.ElectricCurrentExponent),t.push(this.ThermodynamicTemperatureExponent),t.push(this.AmountOfSubstanceExponent),t.push(this.LuminousIntensityExponent),t}},uU=class{constructor(t,e,n){this.expressID=t,this.type=e,this.DirectionRatios=n}static FromTape(t,e,n){let i=0,r=n[i++];return new uU(t,e,r)}ToTape(){let t=[];return t.push(this.DirectionRatios),t}},pU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new pU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},dU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new dU(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},fU=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.DistanceAlong=n,this.OffsetLateral=i,this.OffsetVertical=r,this.OffsetLongitudinal=s,this.AlongHorizontal=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new fU(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.DistanceAlong),t.push(this.OffsetLateral),t.push(this.OffsetVertical),t.push(this.OffsetLongitudinal),t.push(this.AlongHorizontal),t}},mU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new mU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},gU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new gU(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},yU=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.LongName=a,this.PredefinedType=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new yU(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t.push(this.PredefinedType),t}},vU=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new vU(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},_U=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new _U(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},TU=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new TU(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},EU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new EU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},xU=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new xU(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},bU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new bU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},IU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.FlowDirection=h,this.PredefinedType=c,this.SystemType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new IU(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.FlowDirection),t.push(this.PredefinedType),t.push(this.SystemType),t}},wU=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.LongName=a,this.PredefinedType=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new wU(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t.push(this.PredefinedType),t}},SU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v){this.expressID=t,this.type=e,this.Identification=n,this.Name=i,this.Description=r,this.Location=s,this.Purpose=o,this.IntendedUse=a,this.Scope=l,this.Revision=h,this.DocumentOwner=c,this.Editors=u,this.CreationTime=p,this.LastRevisionTime=d,this.ElectronicFormat=f,this.ValidFrom=m,this.ValidUntil=g,this.Confidentiality=y,this.Status=v}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],v=n[i++],_=n[i++],T=n[i++];return new SU(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T)}ToTape(){let t=[];return t.push(this.Identification),t.push(this.Name),t.push(this.Description),t.push(this.Location),t.push(this.Purpose),t.push(this.IntendedUse),t.push(this.Scope),t.push(this.Revision),t.push(this.DocumentOwner),t.push(this.Editors),t.push(this.CreationTime),t.push(this.LastRevisionTime),t.push(this.ElectronicFormat),t.push(this.ValidFrom),t.push(this.ValidUntil),t.push(this.Confidentiality),t.push(this.Status),t}},RU=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.RelatingDocument=r,this.RelatedDocuments=s,this.RelationshipType=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new RU(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingDocument),t.push(this.RelatedDocuments),t.push(this.RelationshipType),t}},CU=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Location=n,this.Identification=i,this.Name=r,this.Description=s,this.ReferencedDocument=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new CU(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t.push(this.Description),t.push(this.ReferencedDocument),t}},AU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.OverallHeight=c,this.OverallWidth=u,this.PredefinedType=p,this.OperationType=d,this.UserDefinedOperationType=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new AU(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.OverallHeight),t.push(this.OverallWidth),t.push(this.PredefinedType),t.push(this.OperationType),t.push(this.UserDefinedOperationType),t}},DU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.LiningDepth=o,this.LiningThickness=a,this.ThresholdDepth=l,this.ThresholdThickness=h,this.TransomThickness=c,this.TransomOffset=u,this.LiningOffset=p,this.ThresholdOffset=d,this.CasingThickness=f,this.CasingDepth=m,this.ShapeAspectStyle=g,this.LiningToPanelOffsetX=y,this.LiningToPanelOffsetY=v}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],v=n[i++],_=n[i++],T=n[i++];return new DU(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.LiningDepth),t.push(this.LiningThickness),t.push(this.ThresholdDepth),t.push(this.ThresholdThickness),t.push(this.TransomThickness),t.push(this.TransomOffset),t.push(this.LiningOffset),t.push(this.ThresholdOffset),t.push(this.CasingThickness),t.push(this.CasingDepth),t.push(this.ShapeAspectStyle),t.push(this.LiningToPanelOffsetX),t.push(this.LiningToPanelOffsetY),t}},OU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.PanelDepth=o,this.PanelOperation=a,this.PanelWidth=l,this.PanelPosition=h,this.ShapeAspectStyle=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new OU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.PanelDepth),t.push(this.PanelOperation),t.push(this.PanelWidth),t.push(this.PanelPosition),t.push(this.ShapeAspectStyle),t}},NU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.OverallHeight=c,this.OverallWidth=u,this.PredefinedType=p,this.OperationType=d,this.UserDefinedOperationType=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new NU(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.OverallHeight),t.push(this.OverallWidth),t.push(this.PredefinedType),t.push(this.OperationType),t.push(this.UserDefinedOperationType),t}},MU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.OperationType=c,this.ConstructionType=u,this.ParameterTakesPrecedence=p,this.Sizeable=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new MU(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.OperationType),t.push(this.ConstructionType),t.push(this.ParameterTakesPrecedence),t.push(this.Sizeable),t}},PU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u,this.OperationType=p,this.ParameterTakesPrecedence=d,this.UserDefinedOperationType=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new PU(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.OperationType),t.push(this.ParameterTakesPrecedence),t.push(this.UserDefinedOperationType),t}},FU=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new FU(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},LU=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new LU(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},kU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new kU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},UU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new UU(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},BU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new BU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},zU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new zU(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},GU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new GU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},HU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new HU(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},jU=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.EdgeStart=n,this.EdgeEnd=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new jU(t,e,r,s)}ToTape(){let t=[];return t.push(this.EdgeStart),t.push(this.EdgeEnd),t}},VU=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.EdgeStart=n,this.EdgeEnd=i,this.EdgeGeometry=r,this.SameSense=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new VU(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.EdgeStart),t.push(this.EdgeEnd),t.push(this.EdgeGeometry),t.push(this.SameSense),t}},WU=class{constructor(t,e,n){this.expressID=t,this.type=e,this.EdgeList=n}static FromTape(t,e,n){let i=0,r=n[i++];return new WU(t,e,r)}ToTape(){let t=[];return t.push(this.EdgeList),t}},ZU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new ZU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},YU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new YU(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},qU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new qU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},XU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new XU(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},KU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new KU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},QU=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new QU(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},JU=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new JU(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},$U=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new $U(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},tB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new tB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},eB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new eB(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},nB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new nB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},iB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new iB(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},rB=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new rB(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},sB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.AssemblyPlace=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new sB(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.AssemblyPlace),t.push(this.PredefinedType),t}},oB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new oB(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},aB=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new aB(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},lB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new lB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},hB=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.MethodOfMeasurement=o,this.Quantities=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new hB(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.MethodOfMeasurement),t.push(this.Quantities),t}},cB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new cB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},uB=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Position=n}static FromTape(t,e,n){let i=0,r=n[i++];return new uB(t,e,r)}ToTape(){let t=[];return t.push(this.Position),t}},pB=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Position=n,this.SemiAxis1=i,this.SemiAxis2=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new pB(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Position),t.push(this.SemiAxis1),t.push(this.SemiAxis2),t}},dB=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.SemiAxis1=s,this.SemiAxis2=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new dB(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.SemiAxis1),t.push(this.SemiAxis2),t}},fB=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new fB(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},mB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new mB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},gB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new gB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},yB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new yB(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},vB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new vB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},_B=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new _B(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},TB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new TB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},EB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new EB(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},xB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.PredefinedType=h,this.EventTriggerType=c,this.UserDefinedEventTriggerType=u,this.EventOccurenceTime=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new xB(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.PredefinedType),t.push(this.EventTriggerType),t.push(this.UserDefinedEventTriggerType),t.push(this.EventOccurenceTime),t}},bB=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.DataOrigin=i,this.UserDefinedDataOrigin=r,this.ActualDate=s,this.EarlyDate=o,this.LateDate=a,this.ScheduleDate=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new bB(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.ActualDate),t.push(this.EarlyDate),t.push(this.LateDate),t.push(this.ScheduleDate),t}},IB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ProcessType=c,this.PredefinedType=u,this.EventTriggerType=p,this.UserDefinedEventTriggerType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new IB(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ProcessType),t.push(this.PredefinedType),t.push(this.EventTriggerType),t.push(this.UserDefinedEventTriggerType),t}},wB=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Properties=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new wB(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Properties),t}},SB=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new SB(t,e)}ToTape(){return[]}},RB=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Location=n,this.Identification=i,this.Name=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new RB(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t}},CB=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.RelatingReference=r,this.RelatedResourceObjects=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new CB(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingReference),t.push(this.RelatedResourceObjects),t}},AB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new AB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.PredefinedType),t}},DB=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new DB(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t}},OB=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Location=n,this.Identification=i,this.Name=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new OB(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t}},NB=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Location=n,this.Identification=i,this.Name=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new NB(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t}},MB=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Location=n,this.Identification=i,this.Name=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new MB(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t}},PB=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.SweptArea=n,this.Position=i,this.ExtrudedDirection=r,this.Depth=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new PB(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.ExtrudedDirection),t.push(this.Depth),t}},FB=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.SweptArea=n,this.Position=i,this.ExtrudedDirection=r,this.Depth=s,this.EndSweptArea=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new FB(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.ExtrudedDirection),t.push(this.Depth),t.push(this.EndSweptArea),t}},LB=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Bounds=n}static FromTape(t,e,n){let i=0,r=n[i++];return new LB(t,e,r)}ToTape(){let t=[];return t.push(this.Bounds),t}},kB=class{constructor(t,e,n){this.expressID=t,this.type=e,this.FbsmFaces=n}static FromTape(t,e,n){let i=0,r=n[i++];return new kB(t,e,r)}ToTape(){let t=[];return t.push(this.FbsmFaces),t}},UB=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Bound=n,this.Orientation=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new UB(t,e,r,s)}ToTape(){let t=[];return t.push(this.Bound),t.push(this.Orientation),t}},BB=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Bound=n,this.Orientation=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new BB(t,e,r,s)}ToTape(){let t=[];return t.push(this.Bound),t.push(this.Orientation),t}},zB=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Bounds=n,this.FaceSurface=i,this.SameSense=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new zB(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Bounds),t.push(this.FaceSurface),t.push(this.SameSense),t}},GB=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Outer=n}static FromTape(t,e,n){let i=0,r=n[i++];return new GB(t,e,r)}ToTape(){let t=[];return t.push(this.Outer),t}},HB=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Outer=n,this.Voids=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new HB(t,e,r,s)}ToTape(){let t=[];return t.push(this.Outer),t.push(this.Voids),t}},jB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new jB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t}},VB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new VB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t}},WB=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.TensionFailureX=i,this.TensionFailureY=r,this.TensionFailureZ=s,this.CompressionFailureX=o,this.CompressionFailureY=a,this.CompressionFailureZ=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new WB(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TensionFailureX),t.push(this.TensionFailureY),t.push(this.TensionFailureZ),t.push(this.CompressionFailureX),t.push(this.CompressionFailureY),t.push(this.CompressionFailureZ),t}},ZB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new ZB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},YB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new YB(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},qB=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new qB(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},XB=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new XB(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},KB=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new KB(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},QB=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new QB(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},JB=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new JB(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},$B=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.FillStyles=i,this.ModelorDraughting=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new $B(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.FillStyles),t.push(this.ModelorDraughting),t}},tz=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.HatchLineAppearance=n,this.StartOfNextHatchLine=i,this.PointOfReferenceHatchLine=r,this.PatternStart=s,this.HatchLineAngle=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new tz(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.HatchLineAppearance),t.push(this.StartOfNextHatchLine),t.push(this.PointOfReferenceHatchLine),t.push(this.PatternStart),t.push(this.HatchLineAngle),t}},ez=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.TilingPattern=n,this.Tiles=i,this.TilingScale=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new ez(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.TilingPattern),t.push(this.Tiles),t.push(this.TilingScale),t}},nz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new nz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},iz=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new iz(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},rz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new rz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},sz=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new sz(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},oz=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.SweptArea=n,this.Position=i,this.Directrix=r,this.StartParam=s,this.EndParam=o,this.FixedReference=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new oz(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.Directrix),t.push(this.StartParam),t.push(this.EndParam),t.push(this.FixedReference),t}},az=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new az(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},lz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new lz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},hz=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new hz(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},cz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new cz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},uz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new uz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},pz=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new pz(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},dz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new dz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},fz=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new fz(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},mz=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new mz(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},gz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new gz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},yz=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new yz(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},vz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new vz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},_z=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new _z(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},Tz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Tz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},Ez=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new Ez(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},xz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new xz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},bz=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new bz(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},Iz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Iz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},wz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new wz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Sz=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Sz(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Rz=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new Rz(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},Cz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Cz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},Az=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Az(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Dz=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.AssemblyPlace=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new Dz(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.AssemblyPlace),t.push(this.PredefinedType),t}},Oz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Oz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Nz=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Nz(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Mz=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Elements=n}static FromTape(t,e,n){let i=0,r=n[i++];return new Mz(t,e,r)}ToTape(){let t=[];return t.push(this.Elements),t}},Pz=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.ContextIdentifier=n,this.ContextType=i,this.CoordinateSpaceDimension=r,this.Precision=s,this.WorldCoordinateSystem=o,this.TrueNorth=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new Pz(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.ContextIdentifier),t.push(this.ContextType),t.push(this.CoordinateSpaceDimension),t.push(this.Precision),t.push(this.WorldCoordinateSystem),t.push(this.TrueNorth),t}},Fz=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new Fz(t,e)}ToTape(){return[]}},Lz=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.ContextIdentifier=n,this.ContextType=i,this.CoordinateSpaceDimension=r,this.Precision=s,this.WorldCoordinateSystem=o,this.TrueNorth=a,this.ParentContext=l,this.TargetScale=h,this.TargetView=c,this.UserDefinedTargetView=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Lz(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.ContextIdentifier),t.push(this.ContextType),t.push(this.CoordinateSpaceDimension),t.push(this.Precision),t.push(this.WorldCoordinateSystem),t.push(this.TrueNorth),t.push(this.ParentContext),t.push(this.TargetScale),t.push(this.TargetView),t.push(this.UserDefinedTargetView),t}},kz=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Elements=n}static FromTape(t,e,n){let i=0,r=n[i++];return new kz(t,e,r)}ToTape(){let t=[];return t.push(this.Elements),t}},Uz=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.UAxes=h,this.VAxes=c,this.WAxes=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new Uz(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.UAxes),t.push(this.VAxes),t.push(this.WAxes),t.push(this.PredefinedType),t}},Bz=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.AxisTag=n,this.AxisCurve=i,this.SameSense=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Bz(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.AxisTag),t.push(this.AxisCurve),t.push(this.SameSense),t}},zz=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.PlacementRelTo=n,this.PlacementLocation=i,this.PlacementRefDirection=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new zz(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.PlacementRelTo),t.push(this.PlacementLocation),t.push(this.PlacementRefDirection),t}},Gz=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Gz(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t}},Hz=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.BaseSurface=n,this.AgreementFlag=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new Hz(t,e,r,s)}ToTape(){let t=[];return t.push(this.BaseSurface),t.push(this.AgreementFlag),t}},jz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new jz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Vz=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Vz(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Wz=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Wz(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Zz=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Zz(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Yz=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.OverallWidth=s,this.OverallDepth=o,this.WebThickness=a,this.FlangeThickness=l,this.FilletRadius=h,this.FlangeEdgeRadius=c,this.FlangeSlope=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Yz(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.OverallWidth),t.push(this.OverallDepth),t.push(this.WebThickness),t.push(this.FlangeThickness),t.push(this.FilletRadius),t.push(this.FlangeEdgeRadius),t.push(this.FlangeSlope),t}},qz=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.RepeatS=n,this.RepeatT=i,this.Mode=r,this.TextureTransform=s,this.Parameter=o,this.URLReference=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new qz(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.RepeatS),t.push(this.RepeatT),t.push(this.Mode),t.push(this.TextureTransform),t.push(this.Parameter),t.push(this.URLReference),t}},Xz=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.MappedTo=n,this.Opacity=i,this.Colours=r,this.ColourIndex=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Xz(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.MappedTo),t.push(this.Opacity),t.push(this.Colours),t.push(this.ColourIndex),t}},Kz=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Points=n,this.Segments=i,this.SelfIntersect=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Kz(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Points),t.push(this.Segments),t.push(this.SelfIntersect),t}},Qz=class{constructor(t,e,n){this.expressID=t,this.type=e,this.CoordIndex=n}static FromTape(t,e,n){let i=0,r=n[i++];return new Qz(t,e,r)}ToTape(){let t=[];return t.push(this.CoordIndex),t}},Jz=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.CoordIndex=n,this.InnerCoordIndices=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new Jz(t,e,r,s)}ToTape(){let t=[];return t.push(this.CoordIndex),t.push(this.InnerCoordIndices),t}},$z=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Maps=n,this.MappedTo=i,this.TexCoords=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new $z(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Maps),t.push(this.MappedTo),t.push(this.TexCoords),t}},tG=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Maps=n,this.MappedTo=i,this.TexCoords=r,this.TexCoordIndex=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new tG(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Maps),t.push(this.MappedTo),t.push(this.TexCoords),t.push(this.TexCoordIndex),t}},eG=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new eG(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},nG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new nG(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},iG=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Curve3D=n,this.AssociatedGeometry=i,this.MasterRepresentation=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new iG(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Curve3D),t.push(this.AssociatedGeometry),t.push(this.MasterRepresentation),t}},rG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.PredefinedType=a,this.Jurisdiction=l,this.ResponsiblePersons=h,this.LastUpdateDate=c,this.CurrentValue=u,this.OriginalValue=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new rG(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.PredefinedType),t.push(this.Jurisdiction),t.push(this.ResponsiblePersons),t.push(this.LastUpdateDate),t.push(this.CurrentValue),t.push(this.OriginalValue),t}},sG=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.StartTime=r,this.EndTime=s,this.TimeSeriesDataType=o,this.DataOrigin=a,this.UserDefinedDataOrigin=l,this.Unit=h,this.Values=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new sG(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.StartTime),t.push(this.EndTime),t.push(this.TimeSeriesDataType),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.Unit),t.push(this.Values),t}},oG=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.TimeStamp=n,this.ListValues=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new oG(t,e,r,s)}ToTape(){let t=[];return t.push(this.TimeStamp),t.push(this.ListValues),t}},aG=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new aG(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},lG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new lG(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},hG=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.Depth=s,this.Width=o,this.Thickness=a,this.FilletRadius=l,this.EdgeRadius=h,this.LegSlope=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new hG(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Depth),t.push(this.Width),t.push(this.Thickness),t.push(this.FilletRadius),t.push(this.EdgeRadius),t.push(this.LegSlope),t}},cG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.Usage=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new cG(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},uG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ResourceType=c,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new uG(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},pG=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.DataOrigin=i,this.UserDefinedDataOrigin=r,this.LagValue=s,this.DurationType=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new pG(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.LagValue),t.push(this.DurationType),t}},dG=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new dG(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},fG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new fG(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},mG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Name=n,this.Version=i,this.Publisher=r,this.VersionDate=s,this.Location=o,this.Description=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new mG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Version),t.push(this.Publisher),t.push(this.VersionDate),t.push(this.Location),t.push(this.Description),t}},gG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Location=n,this.Identification=i,this.Name=r,this.Description=s,this.Language=o,this.ReferencedLibrary=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new gG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Location),t.push(this.Identification),t.push(this.Name),t.push(this.Description),t.push(this.Language),t.push(this.ReferencedLibrary),t}},yG=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.MainPlaneAngle=n,this.SecondaryPlaneAngle=i,this.LuminousIntensity=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new yG(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.MainPlaneAngle),t.push(this.SecondaryPlaneAngle),t.push(this.LuminousIntensity),t}},vG=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new vG(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},_G=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new _G(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},TG=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.LightDistributionCurve=n,this.DistributionData=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new TG(t,e,r,s)}ToTape(){let t=[];return t.push(this.LightDistributionCurve),t.push(this.DistributionData),t}},EG=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.LightColour=i,this.AmbientIntensity=r,this.Intensity=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new EG(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t}},xG=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.LightColour=i,this.AmbientIntensity=r,this.Intensity=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new xG(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t}},bG=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.LightColour=i,this.AmbientIntensity=r,this.Intensity=s,this.Orientation=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new bG(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t.push(this.Orientation),t}},IG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.Name=n,this.LightColour=i,this.AmbientIntensity=r,this.Intensity=s,this.Position=o,this.ColourAppearance=a,this.ColourTemperature=l,this.LuminousFlux=h,this.LightEmissionSource=c,this.LightDistributionDataSource=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new IG(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t.push(this.Position),t.push(this.ColourAppearance),t.push(this.ColourTemperature),t.push(this.LuminousFlux),t.push(this.LightEmissionSource),t.push(this.LightDistributionDataSource),t}},wG=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.Name=n,this.LightColour=i,this.AmbientIntensity=r,this.Intensity=s,this.Position=o,this.Radius=a,this.ConstantAttenuation=l,this.DistanceAttenuation=h,this.QuadricAttenuation=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new wG(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t.push(this.Position),t.push(this.Radius),t.push(this.ConstantAttenuation),t.push(this.DistanceAttenuation),t.push(this.QuadricAttenuation),t}},SG=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.Name=n,this.LightColour=i,this.AmbientIntensity=r,this.Intensity=s,this.Position=o,this.Radius=a,this.ConstantAttenuation=l,this.DistanceAttenuation=h,this.QuadricAttenuation=c,this.Orientation=u,this.ConcentrationExponent=p,this.SpreadAngle=d,this.BeamWidthAngle=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new SG(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LightColour),t.push(this.AmbientIntensity),t.push(this.Intensity),t.push(this.Position),t.push(this.Radius),t.push(this.ConstantAttenuation),t.push(this.DistanceAttenuation),t.push(this.QuadricAttenuation),t.push(this.Orientation),t.push(this.ConcentrationExponent),t.push(this.SpreadAngle),t.push(this.BeamWidthAngle),t}},RG=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Pnt=n,this.Dir=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new RG(t,e,r,s)}ToTape(){let t=[];return t.push(this.Pnt),t.push(this.Dir),t}},CG=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.StartPoint=n,this.StartDirection=i,this.SegmentLength=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new CG(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.StartPoint),t.push(this.StartDirection),t.push(this.SegmentLength),t}},AG=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.PlacementRelTo=n,this.PlacementMeasuredAlong=i,this.Distance=r,this.Orientation=s,this.CartesianPosition=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new AG(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.PlacementRelTo),t.push(this.PlacementMeasuredAlong),t.push(this.Distance),t.push(this.Orientation),t.push(this.CartesianPosition),t}},DG=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Axis=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new DG(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Axis),t}},OG=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.PlacementRelTo=n,this.RelativePlacement=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new OG(t,e,r,s)}ToTape(){let t=[];return t.push(this.PlacementRelTo),t.push(this.RelativePlacement),t}},NG=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new NG(t,e)}ToTape(){return[]}},MG=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Outer=n}static FromTape(t,e,n){let i=0,r=n[i++];return new MG(t,e,r)}ToTape(){let t=[];return t.push(this.Outer),t}},PG=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.SourceCRS=n,this.TargetCRS=i,this.Eastings=r,this.Northings=s,this.OrthogonalHeight=o,this.XAxisAbscissa=a,this.XAxisOrdinate=l,this.Scale=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new PG(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.SourceCRS),t.push(this.TargetCRS),t.push(this.Eastings),t.push(this.Northings),t.push(this.OrthogonalHeight),t.push(this.XAxisAbscissa),t.push(this.XAxisOrdinate),t.push(this.Scale),t}},FG=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.MappingSource=n,this.MappingTarget=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new FG(t,e,r,s)}ToTape(){let t=[];return t.push(this.MappingSource),t.push(this.MappingTarget),t}},LG=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Category=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new LG(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Category),t}},kG=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.MaterialClassifications=n,this.ClassifiedMaterial=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new kG(t,e,r,s)}ToTape(){let t=[];return t.push(this.MaterialClassifications),t.push(this.ClassifiedMaterial),t}},UG=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Material=r,this.Fraction=s,this.Category=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new UG(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Material),t.push(this.Fraction),t.push(this.Category),t}},BG=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.MaterialConstituents=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new BG(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.MaterialConstituents),t}},zG=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new zG(t,e)}ToTape(){return[]}},GG=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Representations=r,this.RepresentedMaterial=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new GG(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Representations),t.push(this.RepresentedMaterial),t}},HG=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Material=n,this.LayerThickness=i,this.IsVentilated=r,this.Name=s,this.Description=o,this.Category=a,this.Priority=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new HG(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Material),t.push(this.LayerThickness),t.push(this.IsVentilated),t.push(this.Name),t.push(this.Description),t.push(this.Category),t.push(this.Priority),t}},jG=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.MaterialLayers=n,this.LayerSetName=i,this.Description=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new jG(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.MaterialLayers),t.push(this.LayerSetName),t.push(this.Description),t}},VG=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.ForLayerSet=n,this.LayerSetDirection=i,this.DirectionSense=r,this.OffsetFromReferenceLine=s,this.ReferenceExtent=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new VG(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.ForLayerSet),t.push(this.LayerSetDirection),t.push(this.DirectionSense),t.push(this.OffsetFromReferenceLine),t.push(this.ReferenceExtent),t}},WG=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.Material=n,this.LayerThickness=i,this.IsVentilated=r,this.Name=s,this.Description=o,this.Category=a,this.Priority=l,this.OffsetDirection=h,this.OffsetValues=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new WG(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.Material),t.push(this.LayerThickness),t.push(this.IsVentilated),t.push(this.Name),t.push(this.Description),t.push(this.Category),t.push(this.Priority),t.push(this.OffsetDirection),t.push(this.OffsetValues),t}},ZG=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Materials=n}static FromTape(t,e,n){let i=0,r=n[i++];return new ZG(t,e,r)}ToTape(){let t=[];return t.push(this.Materials),t}},YG=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Material=r,this.Profile=s,this.Priority=o,this.Category=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new YG(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Material),t.push(this.Profile),t.push(this.Priority),t.push(this.Category),t}},qG=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.MaterialProfiles=r,this.CompositeProfile=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new qG(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.MaterialProfiles),t.push(this.CompositeProfile),t}},XG=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.ForProfileSet=n,this.CardinalPoint=i,this.ReferenceExtent=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new XG(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.ForProfileSet),t.push(this.CardinalPoint),t.push(this.ReferenceExtent),t}},KG=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.ForProfileSet=n,this.CardinalPoint=i,this.ReferenceExtent=r,this.ForProfileEndSet=s,this.CardinalEndPoint=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new KG(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.ForProfileSet),t.push(this.CardinalPoint),t.push(this.ReferenceExtent),t.push(this.ForProfileEndSet),t.push(this.CardinalEndPoint),t}},QG=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Material=r,this.Profile=s,this.Priority=o,this.Category=a,this.OffsetValues=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new QG(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Material),t.push(this.Profile),t.push(this.Priority),t.push(this.Category),t.push(this.OffsetValues),t}},JG=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Properties=r,this.Material=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new JG(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Properties),t.push(this.Material),t}},$G=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.RelatingMaterial=r,this.RelatedMaterials=s,this.Expression=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new $G(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingMaterial),t.push(this.RelatedMaterials),t.push(this.Expression),t}},tH=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new tH(t,e)}ToTape(){return[]}},eH=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.ValueComponent=n,this.UnitComponent=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new eH(t,e,r,s)}ToTape(){let t=[];return t.push(this.ValueComponent),t.push(this.UnitComponent),t}},nH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.NominalDiameter=c,this.NominalLength=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new nH(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.NominalDiameter),t.push(this.NominalLength),t.push(this.PredefinedType),t}},iH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u,this.NominalDiameter=p,this.NominalLength=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new iH(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.NominalDiameter),t.push(this.NominalLength),t}},rH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new rH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},sH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new sH(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},oH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new oH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},aH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new aH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},lH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new lH(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},hH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.ConstraintGrade=r,this.ConstraintSource=s,this.CreatingActor=o,this.CreationTime=a,this.UserDefinedGrade=l,this.Benchmark=h,this.ValueSource=c,this.DataValue=u,this.ReferencePath=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new hH(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.ConstraintGrade),t.push(this.ConstraintSource),t.push(this.CreatingActor),t.push(this.CreationTime),t.push(this.UserDefinedGrade),t.push(this.Benchmark),t.push(this.ValueSource),t.push(this.DataValue),t.push(this.ReferencePath),t}},cH=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.ParentProfile=r,this.Operator=s,this.Label=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new cH(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.ParentProfile),t.push(this.Operator),t.push(this.Label),t}},uH=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Currency=n}static FromTape(t,e,n){let i=0,r=n[i++];return new uH(t,e,r)}ToTape(){let t=[];return t.push(this.Currency),t}},pH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new pH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},dH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new dH(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},fH=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Dimensions=n,this.UnitType=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new fH(t,e,r,s)}ToTape(){let t=[];return t.push(this.Dimensions),t.push(this.UnitType),t}},mH=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new mH(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t}},gH=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new gH(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},yH=class{constructor(t,e,n){this.expressID=t,this.type=e,this.PlacementRelTo=n}static FromTape(t,e,n){let i=0,r=n[i++];return new yH(t,e,r)}ToTape(){let t=[];return t.push(this.PlacementRelTo),t}},vH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.ConstraintGrade=r,this.ConstraintSource=s,this.CreatingActor=o,this.CreationTime=a,this.UserDefinedGrade=l,this.BenchmarkValues=h,this.LogicalAggregator=c,this.ObjectiveQualifier=u,this.UserDefinedQualifier=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new vH(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.ConstraintGrade),t.push(this.ConstraintSource),t.push(this.CreatingActor),t.push(this.CreationTime),t.push(this.UserDefinedGrade),t.push(this.BenchmarkValues),t.push(this.LogicalAggregator),t.push(this.ObjectiveQualifier),t.push(this.UserDefinedQualifier),t}},_H=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.TheActor=a,this.PredefinedType=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new _H(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.TheActor),t.push(this.PredefinedType),t}},TH=class{constructor(t,e,n){this.expressID=t,this.type=e,this.BasisCurve=n}static FromTape(t,e,n){let i=0,r=n[i++];return new TH(t,e,r)}ToTape(){let t=[];return t.push(this.BasisCurve),t}},EH=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.BasisCurve=n,this.Distance=i,this.SelfIntersect=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new EH(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.BasisCurve),t.push(this.Distance),t.push(this.SelfIntersect),t}},xH=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.BasisCurve=n,this.Distance=i,this.SelfIntersect=r,this.RefDirection=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new xH(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.BasisCurve),t.push(this.Distance),t.push(this.SelfIntersect),t.push(this.RefDirection),t}},bH=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.BasisCurve=n,this.OffsetValues=i,this.Tag=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new bH(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.BasisCurve),t.push(this.OffsetValues),t.push(this.Tag),t}},IH=class{constructor(t,e,n){this.expressID=t,this.type=e,this.CfsFaces=n}static FromTape(t,e,n){let i=0,r=n[i++];return new IH(t,e,r)}ToTape(){let t=[];return t.push(this.CfsFaces),t}},wH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new wH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},SH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new SH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},RH=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Identification=n,this.Name=i,this.Description=r,this.Roles=s,this.Addresses=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new RH(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Identification),t.push(this.Name),t.push(this.Description),t.push(this.Roles),t.push(this.Addresses),t}},CH=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.RelatingOrganization=r,this.RelatedOrganizations=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new CH(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingOrganization),t.push(this.RelatedOrganizations),t}},AH=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.LateralAxisDirection=n,this.VerticalAxisDirection=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new AH(t,e,r,s)}ToTape(){let t=[];return t.push(this.LateralAxisDirection),t.push(this.VerticalAxisDirection),t}},DH=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.EdgeStart=n,this.EdgeEnd=i,this.EdgeElement=r,this.Orientation=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new DH(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.EdgeStart),t.push(this.EdgeEnd),t.push(this.EdgeElement),t.push(this.Orientation),t}},OH=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Segments=n,this.SelfIntersect=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new OH(t,e,r,s)}ToTape(){let t=[];return t.push(this.Segments),t.push(this.SelfIntersect),t}},NH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new NH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},MH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new MH(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},PH=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.OwningUser=n,this.OwningApplication=i,this.State=r,this.ChangeAction=s,this.LastModifiedDate=o,this.LastModifyingUser=a,this.LastModifyingApplication=l,this.CreationDate=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new PH(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.OwningUser),t.push(this.OwningApplication),t.push(this.State),t.push(this.ChangeAction),t.push(this.LastModifiedDate),t.push(this.LastModifyingUser),t.push(this.LastModifyingApplication),t.push(this.CreationDate),t}},FH=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new FH(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t}},LH=class{constructor(t,e,n){this.expressID=t,this.type=e,this.EdgeList=n}static FromTape(t,e,n){let i=0,r=n[i++];return new LH(t,e,r)}ToTape(){let t=[];return t.push(this.EdgeList),t}},kH=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.BasisSurface=n,this.ReferenceCurve=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new kH(t,e,r,s)}ToTape(){let t=[];return t.push(this.BasisSurface),t.push(this.ReferenceCurve),t}},UH=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LifeCyclePhase=l,this.PredefinedType=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new UH(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LifeCyclePhase),t.push(this.PredefinedType),t}},BH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.OperationType=o,this.PanelPosition=a,this.FrameDepth=l,this.FrameThickness=h,this.ShapeAspectStyle=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new BH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.OperationType),t.push(this.PanelPosition),t.push(this.FrameDepth),t.push(this.FrameThickness),t.push(this.ShapeAspectStyle),t}},zH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.PredefinedType=l,this.Status=h,this.LongDescription=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new zH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.PredefinedType),t.push(this.Status),t.push(this.LongDescription),t}},GH=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.Identification=n,this.FamilyName=i,this.GivenName=r,this.MiddleNames=s,this.PrefixTitles=o,this.SuffixTitles=a,this.Roles=l,this.Addresses=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new GH(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.Identification),t.push(this.FamilyName),t.push(this.GivenName),t.push(this.MiddleNames),t.push(this.PrefixTitles),t.push(this.SuffixTitles),t.push(this.Roles),t.push(this.Addresses),t}},HH=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.ThePerson=n,this.TheOrganization=i,this.Roles=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new HH(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.ThePerson),t.push(this.TheOrganization),t.push(this.Roles),t}},jH=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.HasQuantities=r,this.Discrimination=s,this.Quality=o,this.Usage=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new jH(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.HasQuantities),t.push(this.Discrimination),t.push(this.Quality),t.push(this.Usage),t}},VH=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Name=n,this.Description=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new VH(t,e,r,s)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t}},WH=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Unit=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new WH(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t}},ZH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c,this.ConstructionType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new ZH(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t.push(this.ConstructionType),t}},YH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new YH(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},qH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new qH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},XH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new XH(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},KH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new KH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},QH=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new QH(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},JH=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.RepeatS=n,this.RepeatT=i,this.Mode=r,this.TextureTransform=s,this.Parameter=o,this.Width=a,this.Height=l,this.ColourComponents=h,this.Pixel=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new JH(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.RepeatS),t.push(this.RepeatT),t.push(this.Mode),t.push(this.TextureTransform),t.push(this.Parameter),t.push(this.Width),t.push(this.Height),t.push(this.ColourComponents),t.push(this.Pixel),t}},$H=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Location=n}static FromTape(t,e,n){let i=0,r=n[i++];return new $H(t,e,r)}ToTape(){let t=[];return t.push(this.Location),t}},tj=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.SizeInX=n,this.SizeInY=i,this.Placement=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new tj(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.SizeInX),t.push(this.SizeInY),t.push(this.Placement),t}},ej=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.SizeInX=n,this.SizeInY=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new ej(t,e,r,s)}ToTape(){let t=[];return t.push(this.SizeInX),t.push(this.SizeInY),t}},nj=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Position=n}static FromTape(t,e,n){let i=0,r=n[i++];return new nj(t,e,r)}ToTape(){let t=[];return t.push(this.Position),t}},ij=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new ij(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},rj=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new rj(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},sj=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new sj(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},oj=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new oj(t,e)}ToTape(){return[]}},aj=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.BasisCurve=n,this.PointParameter=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new aj(t,e,r,s)}ToTape(){let t=[];return t.push(this.BasisCurve),t.push(this.PointParameter),t}},lj=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.BasisSurface=n,this.PointParameterU=i,this.PointParameterV=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new lj(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.BasisSurface),t.push(this.PointParameterU),t.push(this.PointParameterV),t}},hj=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Polygon=n}static FromTape(t,e,n){let i=0,r=n[i++];return new hj(t,e,r)}ToTape(){let t=[];return t.push(this.Polygon),t}},cj=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.BaseSurface=n,this.AgreementFlag=i,this.Position=r,this.PolygonalBoundary=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new cj(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.BaseSurface),t.push(this.AgreementFlag),t.push(this.Position),t.push(this.PolygonalBoundary),t}},uj=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Coordinates=n,this.Closed=i,this.Faces=r,this.PnIndex=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new uj(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Coordinates),t.push(this.Closed),t.push(this.Faces),t.push(this.PnIndex),t}},pj=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Points=n}static FromTape(t,e,n){let i=0,r=n[i++];return new pj(t,e,r)}ToTape(){let t=[];return t.push(this.Points),t}},dj=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new dj(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},fj=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new fj(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},mj=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.Purpose=n,this.Description=i,this.UserDefinedPurpose=r,this.InternalLocation=s,this.AddressLines=o,this.PostalBox=a,this.Town=l,this.Region=h,this.PostalCode=c,this.Country=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new mj(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.Purpose),t.push(this.Description),t.push(this.UserDefinedPurpose),t.push(this.InternalLocation),t.push(this.AddressLines),t.push(this.PostalBox),t.push(this.Town),t.push(this.Region),t.push(this.PostalCode),t.push(this.Country),t}},gj=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new gj(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},yj=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new yj(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},vj=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new vj(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},_j=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new _j(t,e)}ToTape(){return[]}},Tj=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Tj(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},Ej=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new Ej(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},xj=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new xj(t,e)}ToTape(){return[]}},bj=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.AssignedItems=r,this.Identifier=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new bj(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.AssignedItems),t.push(this.Identifier),t}},Ij=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.AssignedItems=r,this.Identifier=s,this.LayerOn=o,this.LayerFrozen=a,this.LayerBlocked=l,this.LayerStyles=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new Ij(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.AssignedItems),t.push(this.Identifier),t.push(this.LayerOn),t.push(this.LayerFrozen),t.push(this.LayerBlocked),t.push(this.LayerStyles),t}},wj=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new wj(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},Sj=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Styles=n}static FromTape(t,e,n){let i=0,r=n[i++];return new Sj(t,e,r)}ToTape(){let t=[];return t.push(this.Styles),t}},Rj=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.PredefinedType=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new Rj(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.PredefinedType),t}},Cj=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ProcessType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Cj(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ProcessType),t.push(this.PredefinedType),t}},Aj=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new Aj(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t}},Dj=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new Dj(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},Oj=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Representations=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Oj(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Representations),t}},Nj=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Representations=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Nj(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Representations),t}},Mj=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new Mj(t,e,r,s)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t}},Pj=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Properties=r,this.ProfileDefinition=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Pj(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Properties),t.push(this.ProfileDefinition),t}},Fj=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.LongName=a,this.Phase=l,this.RepresentationContexts=h,this.UnitsInContext=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Fj(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t.push(this.Phase),t.push(this.RepresentationContexts),t.push(this.UnitsInContext),t}},Lj=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.LongName=a,this.Phase=l,this.RepresentationContexts=h,this.UnitsInContext=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Lj(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t.push(this.Phase),t.push(this.RepresentationContexts),t.push(this.UnitsInContext),t}},kj=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.PredefinedType=l,this.Status=h,this.LongDescription=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new kj(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.PredefinedType),t.push(this.Status),t.push(this.LongDescription),t}},Uj=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.GeodeticDatum=r,this.VerticalDatum=s,this.MapProjection=o,this.MapZone=a,this.MapUnit=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new Uj(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.GeodeticDatum),t.push(this.VerticalDatum),t.push(this.MapProjection),t.push(this.MapZone),t.push(this.MapUnit),t}},Bj=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Bj(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},zj=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Name=n,this.Description=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new zj(t,e,r,s)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t}},Gj=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new Gj(t,e)}ToTape(){return[]}},Hj=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.UpperBoundValue=r,this.LowerBoundValue=s,this.Unit=o,this.SetPointValue=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new Hj(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.UpperBoundValue),t.push(this.LowerBoundValue),t.push(this.Unit),t.push(this.SetPointValue),t}},jj=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new jj(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},Vj=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.DependingProperty=r,this.DependantProperty=s,this.Expression=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Vj(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.DependingProperty),t.push(this.DependantProperty),t.push(this.Expression),t}},Wj=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.EnumerationValues=r,this.EnumerationReference=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Wj(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.EnumerationValues),t.push(this.EnumerationReference),t}},Zj=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.EnumerationValues=i,this.Unit=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Zj(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.EnumerationValues),t.push(this.Unit),t}},Yj=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.ListValues=r,this.Unit=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Yj(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.ListValues),t.push(this.Unit),t}},qj=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.UsageName=r,this.PropertyReference=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new qj(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.UsageName),t.push(this.PropertyReference),t}},Xj=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.HasProperties=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Xj(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.HasProperties),t}},Kj=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Kj(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},Qj=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.TemplateType=o,this.ApplicableEntity=a,this.HasPropertyTemplates=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new Qj(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.TemplateType),t.push(this.ApplicableEntity),t.push(this.HasPropertyTemplates),t}},Jj=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.NominalValue=r,this.Unit=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Jj(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.NominalValue),t.push(this.Unit),t}},$j=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.DefiningValues=r,this.DefinedValues=s,this.Expression=o,this.DefiningUnit=a,this.DefinedUnit=l,this.CurveInterpolation=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new $j(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.DefiningValues),t.push(this.DefinedValues),t.push(this.Expression),t.push(this.DefiningUnit),t.push(this.DefinedUnit),t.push(this.CurveInterpolation),t}},tV=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new tV(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},eV=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new eV(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},nV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new nV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},iV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new iV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},rV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new rV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},sV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new sV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},oV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.ProxyType=h,this.Tag=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new oV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.ProxyType),t.push(this.Tag),t}},aV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new aV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},lV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new lV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},hV=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Unit=r,this.AreaValue=s,this.Formula=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new hV(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.AreaValue),t.push(this.Formula),t}},cV=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Unit=r,this.CountValue=s,this.Formula=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new cV(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.CountValue),t.push(this.Formula),t}},uV=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Unit=r,this.LengthValue=s,this.Formula=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new uV(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.LengthValue),t.push(this.Formula),t}},pV=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new pV(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},dV=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Unit=r,this.TimeValue=s,this.Formula=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new dV(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.TimeValue),t.push(this.Formula),t}},fV=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Unit=r,this.VolumeValue=s,this.Formula=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new fV(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.VolumeValue),t.push(this.Formula),t}},mV=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.Unit=r,this.WeightValue=s,this.Formula=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new mV(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.WeightValue),t.push(this.Formula),t}},gV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new gV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},yV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new yV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},vV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new vV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},_V=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new _V(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},TV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new TV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},EV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new EV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},xV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.Degree=n,this.ControlPointsList=i,this.CurveForm=r,this.ClosedCurve=s,this.SelfIntersect=o,this.KnotMultiplicities=a,this.Knots=l,this.KnotSpec=h,this.WeightsData=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new xV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.Degree),t.push(this.ControlPointsList),t.push(this.CurveForm),t.push(this.ClosedCurve),t.push(this.SelfIntersect),t.push(this.KnotMultiplicities),t.push(this.Knots),t.push(this.KnotSpec),t.push(this.WeightsData),t}},bV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.UDegree=n,this.VDegree=i,this.ControlPointsList=r,this.SurfaceForm=s,this.UClosed=o,this.VClosed=a,this.SelfIntersect=l,this.UMultiplicities=h,this.VMultiplicities=c,this.UKnots=u,this.VKnots=p,this.KnotSpec=d,this.WeightsData=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new bV(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.UDegree),t.push(this.VDegree),t.push(this.ControlPointsList),t.push(this.SurfaceForm),t.push(this.UClosed),t.push(this.VClosed),t.push(this.SelfIntersect),t.push(this.UMultiplicities),t.push(this.VMultiplicities),t.push(this.UKnots),t.push(this.VKnots),t.push(this.KnotSpec),t.push(this.WeightsData),t}},IV=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.XDim=s,this.YDim=o,this.WallThickness=a,this.InnerFilletRadius=l,this.OuterFilletRadius=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new IV(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.XDim),t.push(this.YDim),t.push(this.WallThickness),t.push(this.InnerFilletRadius),t.push(this.OuterFilletRadius),t}},wV=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.XDim=s,this.YDim=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new wV(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.XDim),t.push(this.YDim),t}},SV=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Position=n,this.XLength=i,this.YLength=r,this.Height=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new SV(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Position),t.push(this.XLength),t.push(this.YLength),t.push(this.Height),t}},RV=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.BasisSurface=n,this.U1=i,this.V1=r,this.U2=s,this.V2=o,this.Usense=a,this.Vsense=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new RV(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.BasisSurface),t.push(this.U1),t.push(this.V1),t.push(this.U2),t.push(this.V2),t.push(this.Usense),t.push(this.Vsense),t}},CV=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.RecurrenceType=n,this.DayComponent=i,this.WeekdayComponent=r,this.MonthComponent=s,this.Position=o,this.Interval=a,this.Occurrences=l,this.TimePeriods=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new CV(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.RecurrenceType),t.push(this.DayComponent),t.push(this.WeekdayComponent),t.push(this.MonthComponent),t.push(this.Position),t.push(this.Interval),t.push(this.Occurrences),t.push(this.TimePeriods),t}},AV=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.TypeIdentifier=n,this.AttributeIdentifier=i,this.InstanceName=r,this.ListPositions=s,this.InnerReference=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new AV(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.TypeIdentifier),t.push(this.AttributeIdentifier),t.push(this.InstanceName),t.push(this.ListPositions),t.push(this.InnerReference),t}},DV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.PredefinedType=h,this.RestartDistance=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new DV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.PredefinedType),t.push(this.RestartDistance),t}},OV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.StartTime=r,this.EndTime=s,this.TimeSeriesDataType=o,this.DataOrigin=a,this.UserDefinedDataOrigin=l,this.Unit=h,this.TimeStep=c,this.Values=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new OV(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.StartTime),t.push(this.EndTime),t.push(this.TimeSeriesDataType),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.Unit),t.push(this.TimeStep),t.push(this.Values),t}},NV=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.TotalCrossSectionArea=n,this.SteelGrade=i,this.BarSurface=r,this.EffectiveDepth=s,this.NominalBarDiameter=o,this.BarCount=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new NV(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.TotalCrossSectionArea),t.push(this.SteelGrade),t.push(this.BarSurface),t.push(this.EffectiveDepth),t.push(this.NominalBarDiameter),t.push(this.BarCount),t}},MV=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.DefinitionType=o,this.ReinforcementSectionDefinitions=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new MV(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.DefinitionType),t.push(this.ReinforcementSectionDefinitions),t}},PV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.SteelGrade=c,this.NominalDiameter=u,this.CrossSectionArea=p,this.BarLength=d,this.PredefinedType=f,this.BarSurface=m}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++];return new PV(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t.push(this.NominalDiameter),t.push(this.CrossSectionArea),t.push(this.BarLength),t.push(this.PredefinedType),t.push(this.BarSurface),t}},FV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u,this.NominalDiameter=p,this.CrossSectionArea=d,this.BarLength=f,this.BarSurface=m,this.BendingShapeCode=g,this.BendingParameters=y}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],v=n[i++],_=n[i++];return new FV(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.NominalDiameter),t.push(this.CrossSectionArea),t.push(this.BarLength),t.push(this.BarSurface),t.push(this.BendingShapeCode),t.push(this.BendingParameters),t}},LV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.SteelGrade=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new LV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t}},kV=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new kV(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},UV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.SteelGrade=c,this.MeshLength=u,this.MeshWidth=p,this.LongitudinalBarNominalDiameter=d,this.TransverseBarNominalDiameter=f,this.LongitudinalBarCrossSectionArea=m,this.TransverseBarCrossSectionArea=g,this.LongitudinalBarSpacing=y,this.TransverseBarSpacing=v,this.PredefinedType=_}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],v=n[i++],_=n[i++],T=n[i++],E=n[i++];return new UV(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T,E)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t.push(this.MeshLength),t.push(this.MeshWidth),t.push(this.LongitudinalBarNominalDiameter),t.push(this.TransverseBarNominalDiameter),t.push(this.LongitudinalBarCrossSectionArea),t.push(this.TransverseBarCrossSectionArea),t.push(this.LongitudinalBarSpacing),t.push(this.TransverseBarSpacing),t.push(this.PredefinedType),t}},BV=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T,E){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u,this.MeshLength=p,this.MeshWidth=d,this.LongitudinalBarNominalDiameter=f,this.TransverseBarNominalDiameter=m,this.LongitudinalBarCrossSectionArea=g,this.TransverseBarCrossSectionArea=y,this.LongitudinalBarSpacing=v,this.TransverseBarSpacing=_,this.BendingShapeCode=T,this.BendingParameters=E}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],v=n[i++],_=n[i++],T=n[i++],E=n[i++],x=n[i++],b=n[i++];return new BV(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T,E,x,b)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.MeshLength),t.push(this.MeshWidth),t.push(this.LongitudinalBarNominalDiameter),t.push(this.TransverseBarNominalDiameter),t.push(this.LongitudinalBarCrossSectionArea),t.push(this.TransverseBarCrossSectionArea),t.push(this.LongitudinalBarSpacing),t.push(this.TransverseBarSpacing),t.push(this.BendingShapeCode),t.push(this.BendingParameters),t}},zV=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingObject=o,this.RelatedObjects=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new zV(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingObject),t.push(this.RelatedObjects),t}},GV=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatedObjectsType=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new GV(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t}},HV=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingActor=l,this.ActingRole=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new HV(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingActor),t.push(this.ActingRole),t}},jV=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingControl=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new jV(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingControl),t}},VV=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingGroup=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new VV(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingGroup),t}},WV=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingGroup=l,this.Factor=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new WV(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingGroup),t.push(this.Factor),t}},ZV=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingProcess=l,this.QuantityInProcess=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new ZV(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingProcess),t.push(this.QuantityInProcess),t}},YV=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingProduct=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new YV(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingProduct),t}},qV=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatedObjectsType=a,this.RelatingResource=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new qV(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatedObjectsType),t.push(this.RelatingResource),t}},XV=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new XV(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t}},KV=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatingApproval=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new KV(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingApproval),t}},QV=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatingClassification=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new QV(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingClassification),t}},JV=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.Intent=a,this.RelatingConstraint=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new JV(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.Intent),t.push(this.RelatingConstraint),t}},$V=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatingDocument=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new $V(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingDocument),t}},tW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatingLibrary=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new tW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingLibrary),t}},eW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatingMaterial=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new eW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingMaterial),t}},nW=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new nW(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},iW=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ConnectionGeometry=o,this.RelatingElement=a,this.RelatedElement=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new iW(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ConnectionGeometry),t.push(this.RelatingElement),t.push(this.RelatedElement),t}},rW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ConnectionGeometry=o,this.RelatingElement=a,this.RelatedElement=l,this.RelatingPriorities=h,this.RelatedPriorities=c,this.RelatedConnectionType=u,this.RelatingConnectionType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new rW(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ConnectionGeometry),t.push(this.RelatingElement),t.push(this.RelatedElement),t.push(this.RelatingPriorities),t.push(this.RelatedPriorities),t.push(this.RelatedConnectionType),t.push(this.RelatingConnectionType),t}},sW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingPort=o,this.RelatedElement=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new sW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingPort),t.push(this.RelatedElement),t}},oW=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingPort=o,this.RelatedPort=a,this.RealizingElement=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new oW(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingPort),t.push(this.RelatedPort),t.push(this.RealizingElement),t}},aW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingElement=o,this.RelatedStructuralActivity=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new aW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingElement),t.push(this.RelatedStructuralActivity),t}},lW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingStructuralMember=o,this.RelatedStructuralConnection=a,this.AppliedCondition=l,this.AdditionalConditions=h,this.SupportedLength=c,this.ConditionCoordinateSystem=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new lW(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingStructuralMember),t.push(this.RelatedStructuralConnection),t.push(this.AppliedCondition),t.push(this.AdditionalConditions),t.push(this.SupportedLength),t.push(this.ConditionCoordinateSystem),t}},hW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingStructuralMember=o,this.RelatedStructuralConnection=a,this.AppliedCondition=l,this.AdditionalConditions=h,this.SupportedLength=c,this.ConditionCoordinateSystem=u,this.ConnectionConstraint=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new hW(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingStructuralMember),t.push(this.RelatedStructuralConnection),t.push(this.AppliedCondition),t.push(this.AdditionalConditions),t.push(this.SupportedLength),t.push(this.ConditionCoordinateSystem),t.push(this.ConnectionConstraint),t}},cW=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ConnectionGeometry=o,this.RelatingElement=a,this.RelatedElement=l,this.RealizingElements=h,this.ConnectionType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new cW(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ConnectionGeometry),t.push(this.RelatingElement),t.push(this.RelatedElement),t.push(this.RealizingElements),t.push(this.ConnectionType),t}},uW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedElements=o,this.RelatingStructure=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new uW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedElements),t.push(this.RelatingStructure),t}},pW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingBuildingElement=o,this.RelatedCoverings=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new pW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingBuildingElement),t.push(this.RelatedCoverings),t}},dW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingSpace=o,this.RelatedCoverings=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new dW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingSpace),t.push(this.RelatedCoverings),t}},fW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingContext=o,this.RelatedDefinitions=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new fW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingContext),t.push(this.RelatedDefinitions),t}},mW=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new mW(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},gW=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new gW(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},yW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatingObject=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new yW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingObject),t}},vW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatingPropertyDefinition=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new vW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingPropertyDefinition),t}},_W=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedPropertySets=o,this.RelatingTemplate=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new _W(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedPropertySets),t.push(this.RelatingTemplate),t}},TW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedObjects=o,this.RelatingType=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new TW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedObjects),t.push(this.RelatingType),t}},EW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingOpeningElement=o,this.RelatedBuildingElement=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new EW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingOpeningElement),t.push(this.RelatedBuildingElement),t}},xW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedControlElements=o,this.RelatingFlowElement=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new xW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedControlElements),t.push(this.RelatingFlowElement),t}},bW=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingElement=o,this.RelatedElement=a,this.InterferenceGeometry=l,this.InterferenceType=h,this.ImpliedOrder=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new bW(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingElement),t.push(this.RelatedElement),t.push(this.InterferenceGeometry),t.push(this.InterferenceType),t.push(this.ImpliedOrder),t}},IW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingObject=o,this.RelatedObjects=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new IW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingObject),t.push(this.RelatedObjects),t}},wW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingPositioningElement=o,this.RelatedProducts=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new wW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingPositioningElement),t.push(this.RelatedProducts),t}},SW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingElement=o,this.RelatedFeatureElement=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new SW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingElement),t.push(this.RelatedFeatureElement),t}},RW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatedElements=o,this.RelatingStructure=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new RW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatedElements),t.push(this.RelatingStructure),t}},CW=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingProcess=o,this.RelatedProcess=a,this.TimeLag=l,this.SequenceType=h,this.UserDefinedSequenceType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new CW(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingProcess),t.push(this.RelatedProcess),t.push(this.TimeLag),t.push(this.SequenceType),t.push(this.UserDefinedSequenceType),t}},AW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingSystem=o,this.RelatedBuildings=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new AW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingSystem),t.push(this.RelatedBuildings),t}},DW=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingSpace=o,this.RelatedBuildingElement=a,this.ConnectionGeometry=l,this.PhysicalOrVirtualBoundary=h,this.InternalOrExternalBoundary=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new DW(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingSpace),t.push(this.RelatedBuildingElement),t.push(this.ConnectionGeometry),t.push(this.PhysicalOrVirtualBoundary),t.push(this.InternalOrExternalBoundary),t}},OW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingSpace=o,this.RelatedBuildingElement=a,this.ConnectionGeometry=l,this.PhysicalOrVirtualBoundary=h,this.InternalOrExternalBoundary=c,this.ParentBoundary=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new OW(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingSpace),t.push(this.RelatedBuildingElement),t.push(this.ConnectionGeometry),t.push(this.PhysicalOrVirtualBoundary),t.push(this.InternalOrExternalBoundary),t.push(this.ParentBoundary),t}},NW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingSpace=o,this.RelatedBuildingElement=a,this.ConnectionGeometry=l,this.PhysicalOrVirtualBoundary=h,this.InternalOrExternalBoundary=c,this.ParentBoundary=u,this.CorrespondingBoundary=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new NW(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingSpace),t.push(this.RelatedBuildingElement),t.push(this.ConnectionGeometry),t.push(this.PhysicalOrVirtualBoundary),t.push(this.InternalOrExternalBoundary),t.push(this.ParentBoundary),t.push(this.CorrespondingBoundary),t}},MW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.RelatingBuildingElement=o,this.RelatedOpeningElement=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new MW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.RelatingBuildingElement),t.push(this.RelatedOpeningElement),t}},PW=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new PW(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},FW=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Transition=n,this.SameSense=i,this.ParentCurve=r,this.ParamLength=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new FW(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Transition),t.push(this.SameSense),t.push(this.ParentCurve),t.push(this.ParamLength),t}},LW=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ContextOfItems=n,this.RepresentationIdentifier=i,this.RepresentationType=r,this.Items=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new LW(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},kW=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.ContextIdentifier=n,this.ContextType=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new kW(t,e,r,s)}ToTape(){let t=[];return t.push(this.ContextIdentifier),t.push(this.ContextType),t}},UW=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new UW(t,e)}ToTape(){return[]}},BW=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.MappingOrigin=n,this.MappedRepresentation=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new BW(t,e,r,s)}ToTape(){let t=[];return t.push(this.MappingOrigin),t.push(this.MappedRepresentation),t}},zW=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new zW(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t}},GW=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.RelatedResourceObjects=r,this.RelatingApproval=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new GW(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatedResourceObjects),t.push(this.RelatingApproval),t}},HW=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.RelatingConstraint=r,this.RelatedResourceObjects=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new HW(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.RelatingConstraint),t.push(this.RelatedResourceObjects),t}},jW=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Name=n,this.Description=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new jW(t,e,r,s)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t}},VW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_){this.expressID=t,this.type=e,this.Name=n,this.DataOrigin=i,this.UserDefinedDataOrigin=r,this.ScheduleWork=s,this.ScheduleUsage=o,this.ScheduleStart=a,this.ScheduleFinish=l,this.ScheduleContour=h,this.LevelingDelay=c,this.IsOverAllocated=u,this.StatusTime=p,this.ActualWork=d,this.ActualUsage=f,this.ActualStart=m,this.ActualFinish=g,this.RemainingWork=y,this.RemainingUsage=v,this.Completion=_}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],v=n[i++],_=n[i++],T=n[i++],E=n[i++];return new VW(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T,E)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.ScheduleWork),t.push(this.ScheduleUsage),t.push(this.ScheduleStart),t.push(this.ScheduleFinish),t.push(this.ScheduleContour),t.push(this.LevelingDelay),t.push(this.IsOverAllocated),t.push(this.StatusTime),t.push(this.ActualWork),t.push(this.ActualUsage),t.push(this.ActualStart),t.push(this.ActualFinish),t.push(this.RemainingWork),t.push(this.RemainingUsage),t.push(this.Completion),t}},WW=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.SweptArea=n,this.Position=i,this.Axis=r,this.Angle=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new WW(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.Axis),t.push(this.Angle),t}},ZW=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.SweptArea=n,this.Position=i,this.Axis=r,this.Angle=s,this.EndSweptArea=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new ZW(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.Axis),t.push(this.Angle),t.push(this.EndSweptArea),t}},YW=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Position=n,this.Height=i,this.BottomRadius=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new YW(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Height),t.push(this.BottomRadius),t}},qW=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Position=n,this.Height=i,this.Radius=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new qW(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Height),t.push(this.Radius),t}},XW=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new XW(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},KW=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new KW(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},QW=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new QW(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t}},JW=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.XDim=s,this.YDim=o,this.RoundingRadius=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new JW(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.XDim),t.push(this.YDim),t.push(this.RoundingRadius),t}},$W=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Dimensions=n,this.UnitType=i,this.Prefix=r,this.Name=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new $W(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Dimensions),t.push(this.UnitType),t.push(this.Prefix),t.push(this.Name),t}},tZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new tZ(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},eZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new eZ(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},nZ=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.DataOrigin=i,this.UserDefinedDataOrigin=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new nZ(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t}},iZ=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Curve3D=n,this.AssociatedGeometry=i,this.MasterRepresentation=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new iZ(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Curve3D),t.push(this.AssociatedGeometry),t.push(this.MasterRepresentation),t}},rZ=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.SectionType=n,this.StartProfile=i,this.EndProfile=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new rZ(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.SectionType),t.push(this.StartProfile),t.push(this.EndProfile),t}},sZ=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.LongitudinalStartPosition=n,this.LongitudinalEndPosition=i,this.TransversePosition=r,this.ReinforcementRole=s,this.SectionDefinition=o,this.CrossSectionReinforcementDefinitions=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new sZ(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.LongitudinalStartPosition),t.push(this.LongitudinalEndPosition),t.push(this.TransversePosition),t.push(this.ReinforcementRole),t.push(this.SectionDefinition),t.push(this.CrossSectionReinforcementDefinitions),t}},oZ=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Directrix=n,this.CrossSections=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new oZ(t,e,r,s)}ToTape(){let t=[];return t.push(this.Directrix),t.push(this.CrossSections),t}},aZ=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Directrix=n,this.CrossSections=i,this.CrossSectionPositions=r,this.FixedAxisVertical=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new aZ(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Directrix),t.push(this.CrossSections),t.push(this.CrossSectionPositions),t.push(this.FixedAxisVertical),t}},lZ=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.SpineCurve=n,this.CrossSections=i,this.CrossSectionPositions=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new lZ(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.SpineCurve),t.push(this.CrossSections),t.push(this.CrossSectionPositions),t}},hZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new hZ(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},cZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new cZ(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},uZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new uZ(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},pZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new pZ(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},dZ=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.ShapeRepresentations=n,this.Name=i,this.Description=r,this.ProductDefinitional=s,this.PartOfProductDefinitionShape=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new dZ(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.ShapeRepresentations),t.push(this.Name),t.push(this.Description),t.push(this.ProductDefinitional),t.push(this.PartOfProductDefinitionShape),t}},fZ=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ContextOfItems=n,this.RepresentationIdentifier=i,this.RepresentationType=r,this.Items=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new fZ(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},mZ=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ContextOfItems=n,this.RepresentationIdentifier=i,this.RepresentationType=r,this.Items=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new mZ(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},gZ=class{constructor(t,e,n){this.expressID=t,this.type=e,this.SbsmBoundary=n}static FromTape(t,e,n){let i=0,r=n[i++];return new gZ(t,e,r)}ToTape(){let t=[];return t.push(this.SbsmBoundary),t}},yZ=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Name=n,this.Description=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new yZ(t,e,r,s)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t}},vZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.TemplateType=o,this.PrimaryMeasureType=a,this.SecondaryMeasureType=l,this.Enumerators=h,this.PrimaryUnit=c,this.SecondaryUnit=u,this.Expression=p,this.AccessState=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new vZ(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.TemplateType),t.push(this.PrimaryMeasureType),t.push(this.SecondaryMeasureType),t.push(this.Enumerators),t.push(this.PrimaryUnit),t.push(this.SecondaryUnit),t.push(this.Expression),t.push(this.AccessState),t}},_Z=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c,this.RefLatitude=u,this.RefLongitude=p,this.RefElevation=d,this.LandTitleNumber=f,this.SiteAddress=m}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++];return new _Z(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.RefLatitude),t.push(this.RefLongitude),t.push(this.RefElevation),t.push(this.LandTitleNumber),t.push(this.SiteAddress),t}},TZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new TZ(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},EZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new EZ(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},xZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new xZ(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},bZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new bZ(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},IZ=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.SlippageX=i,this.SlippageY=r,this.SlippageZ=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new IZ(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.SlippageX),t.push(this.SlippageY),t.push(this.SlippageZ),t}},wZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new wZ(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},SZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new SZ(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},RZ=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new RZ(t,e)}ToTape(){return[]}},CZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c,this.PredefinedType=u,this.ElevationWithFlooring=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new CZ(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t.push(this.PredefinedType),t.push(this.ElevationWithFlooring),t}},AZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new AZ(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},DZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new DZ(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},OZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u,this.LongName=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new OZ(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.LongName),t}},NZ=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new NZ(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t}},MZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new MZ(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},PZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.CompositionType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new PZ(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.CompositionType),t}},FZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new FZ(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t}},LZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.LongName=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new LZ(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.LongName),t.push(this.PredefinedType),t}},kZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u,this.LongName=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new kZ(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.LongName),t}},UZ=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Position=n,this.Radius=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new UZ(t,e,r,s)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Radius),t}},BZ=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Position=n,this.Radius=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new BZ(t,e,r,s)}ToTape(){let t=[];return t.push(this.Position),t.push(this.Radius),t}},zZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new zZ(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},GZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new GZ(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},HZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new HZ(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},jZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.NumberOfRisers=c,this.NumberOfTreads=u,this.RiserHeight=p,this.TreadLength=d,this.PredefinedType=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new jZ(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.NumberOfRisers),t.push(this.NumberOfTreads),t.push(this.RiserHeight),t.push(this.TreadLength),t.push(this.PredefinedType),t}},VZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new VZ(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},WZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new WZ(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},ZZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c,this.DestabilizingLoad=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new ZZ(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t}},YZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new YZ(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t}},qZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.PredefinedType=a,this.OrientationOf2DPlane=l,this.LoadedBy=h,this.HasResults=c,this.SharedPlacement=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new qZ(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.PredefinedType),t.push(this.OrientationOf2DPlane),t.push(this.LoadedBy),t.push(this.HasResults),t.push(this.SharedPlacement),t}},XZ=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedCondition=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new XZ(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedCondition),t}},KZ=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new KZ(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},QZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c,this.DestabilizingLoad=u,this.ProjectedOrTrue=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new QZ(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t.push(this.ProjectedOrTrue),t.push(this.PredefinedType),t}},JZ=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedCondition=h,this.Axis=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new JZ(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedCondition),t.push(this.Axis),t}},$Z=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.PredefinedType=h,this.Axis=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new $Z(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.PredefinedType),t.push(this.Axis),t}},tY=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.PredefinedType=h,this.Axis=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new tY(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.PredefinedType),t.push(this.Axis),t}},eY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new eY(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.PredefinedType),t}},nY=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new nY(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},iY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c,this.DestabilizingLoad=u,this.ProjectedOrTrue=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new iY(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t.push(this.ProjectedOrTrue),t.push(this.PredefinedType),t}},rY=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new rY(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},sY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.PredefinedType=a,this.ActionType=l,this.ActionSource=h,this.Coefficient=c,this.Purpose=u,this.SelfWeightCoefficients=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new sY(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.PredefinedType),t.push(this.ActionType),t.push(this.ActionSource),t.push(this.Coefficient),t.push(this.Purpose),t.push(this.SelfWeightCoefficients),t}},oY=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Values=i,this.Locations=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new oY(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Values),t.push(this.Locations),t}},aY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.PredefinedType=a,this.ActionType=l,this.ActionSource=h,this.Coefficient=c,this.Purpose=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new aY(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.PredefinedType),t.push(this.ActionType),t.push(this.ActionSource),t.push(this.Coefficient),t.push(this.Purpose),t}},lY=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.LinearForceX=i,this.LinearForceY=r,this.LinearForceZ=s,this.LinearMomentX=o,this.LinearMomentY=a,this.LinearMomentZ=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new lY(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.LinearForceX),t.push(this.LinearForceY),t.push(this.LinearForceZ),t.push(this.LinearMomentX),t.push(this.LinearMomentY),t.push(this.LinearMomentZ),t}},hY=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new hY(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},cY=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.PlanarForceX=i,this.PlanarForceY=r,this.PlanarForceZ=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new cY(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.PlanarForceX),t.push(this.PlanarForceY),t.push(this.PlanarForceZ),t}},uY=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.DisplacementX=i,this.DisplacementY=r,this.DisplacementZ=s,this.RotationalDisplacementRX=o,this.RotationalDisplacementRY=a,this.RotationalDisplacementRZ=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new uY(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DisplacementX),t.push(this.DisplacementY),t.push(this.DisplacementZ),t.push(this.RotationalDisplacementRX),t.push(this.RotationalDisplacementRY),t.push(this.RotationalDisplacementRZ),t}},pY=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.Name=n,this.DisplacementX=i,this.DisplacementY=r,this.DisplacementZ=s,this.RotationalDisplacementRX=o,this.RotationalDisplacementRY=a,this.RotationalDisplacementRZ=l,this.Distortion=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new pY(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DisplacementX),t.push(this.DisplacementY),t.push(this.DisplacementZ),t.push(this.RotationalDisplacementRX),t.push(this.RotationalDisplacementRY),t.push(this.RotationalDisplacementRZ),t.push(this.Distortion),t}},dY=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.Name=n,this.ForceX=i,this.ForceY=r,this.ForceZ=s,this.MomentX=o,this.MomentY=a,this.MomentZ=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new dY(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.Name),t.push(this.ForceX),t.push(this.ForceY),t.push(this.ForceZ),t.push(this.MomentX),t.push(this.MomentY),t.push(this.MomentZ),t}},fY=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.Name=n,this.ForceX=i,this.ForceY=r,this.ForceZ=s,this.MomentX=o,this.MomentY=a,this.MomentZ=l,this.WarpingMoment=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new fY(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.ForceX),t.push(this.ForceY),t.push(this.ForceZ),t.push(this.MomentX),t.push(this.MomentY),t.push(this.MomentZ),t.push(this.WarpingMoment),t}},mY=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Name=n}static FromTape(t,e,n){let i=0,r=n[i++];return new mY(t,e,r)}ToTape(){let t=[];return t.push(this.Name),t}},gY=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.DeltaTConstant=i,this.DeltaTY=r,this.DeltaTZ=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new gY(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DeltaTConstant),t.push(this.DeltaTY),t.push(this.DeltaTZ),t}},yY=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new yY(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t}},vY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c,this.DestabilizingLoad=u,this.ProjectedOrTrue=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new vY(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t.push(this.ProjectedOrTrue),t.push(this.PredefinedType),t}},_Y=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c,this.DestabilizingLoad=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new _Y(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t}},TY=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedCondition=h,this.ConditionCoordinateSystem=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new TY(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedCondition),t.push(this.ConditionCoordinateSystem),t}},EY=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new EY(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t}},xY=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new xY(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t}},bY=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.TheoryType=a,this.ResultForLoadGroup=l,this.IsLinear=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new bY(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.TheoryType),t.push(this.ResultForLoadGroup),t.push(this.IsLinear),t}},IY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c,this.DestabilizingLoad=u,this.ProjectedOrTrue=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new IY(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.DestabilizingLoad),t.push(this.ProjectedOrTrue),t.push(this.PredefinedType),t}},wY=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedCondition=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new wY(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedCondition),t}},SY=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.PredefinedType=h,this.Thickness=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new SY(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.PredefinedType),t.push(this.Thickness),t}},RY=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.PredefinedType=h,this.Thickness=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new RY(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.PredefinedType),t.push(this.Thickness),t}},CY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.AppliedLoad=h,this.GlobalOrLocal=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new CY(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.AppliedLoad),t.push(this.GlobalOrLocal),t.push(this.PredefinedType),t}},AY=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ContextOfItems=n,this.RepresentationIdentifier=i,this.RepresentationType=r,this.Items=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new AY(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},DY=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Item=n,this.Styles=i,this.Name=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new DY(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Item),t.push(this.Styles),t.push(this.Name),t}},OY=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ContextOfItems=n,this.RepresentationIdentifier=i,this.RepresentationType=r,this.Items=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new OY(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},NY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.Usage=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new NY(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Usage),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},MY=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ResourceType=c,this.BaseCosts=u,this.BaseQuantity=p,this.PredefinedType=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new MY(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t.push(this.BaseCosts),t.push(this.BaseQuantity),t.push(this.PredefinedType),t}},PY=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.EdgeStart=n,this.EdgeEnd=i,this.ParentEdge=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new PY(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.EdgeStart),t.push(this.EdgeEnd),t.push(this.ParentEdge),t}},FY=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new FY(t,e)}ToTape(){return[]}},LY=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Curve3D=n,this.AssociatedGeometry=i,this.MasterRepresentation=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new LY(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Curve3D),t.push(this.AssociatedGeometry),t.push(this.MasterRepresentation),t}},kY=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.SweptArea=n,this.Position=i,this.Directrix=r,this.StartParam=s,this.EndParam=o,this.ReferenceSurface=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new kY(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t.push(this.Directrix),t.push(this.StartParam),t.push(this.EndParam),t.push(this.ReferenceSurface),t}},UY=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new UY(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},BY=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.SweptCurve=n,this.Position=i,this.ExtrudedDirection=r,this.Depth=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new BY(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.SweptCurve),t.push(this.Position),t.push(this.ExtrudedDirection),t.push(this.Depth),t}},zY=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.SweptCurve=n,this.Position=i,this.AxisPosition=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new zY(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.SweptCurve),t.push(this.Position),t.push(this.AxisPosition),t}},GY=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.Name=n,this.SurfaceReinforcement1=i,this.SurfaceReinforcement2=r,this.ShearReinforcement=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new GY(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.Name),t.push(this.SurfaceReinforcement1),t.push(this.SurfaceReinforcement2),t.push(this.ShearReinforcement),t}},HY=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Side=i,this.Styles=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new HY(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Side),t.push(this.Styles),t}},jY=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.DiffuseTransmissionColour=n,this.DiffuseReflectionColour=i,this.TransmissionColour=r,this.ReflectanceColour=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new jY(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.DiffuseTransmissionColour),t.push(this.DiffuseReflectionColour),t.push(this.TransmissionColour),t.push(this.ReflectanceColour),t}},VY=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.RefractionIndex=n,this.DispersionFactor=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new VY(t,e,r,s)}ToTape(){let t=[];return t.push(this.RefractionIndex),t.push(this.DispersionFactor),t}},WY=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.SurfaceColour=n,this.Transparency=i,this.DiffuseColour=r,this.TransmissionColour=s,this.DiffuseTransmissionColour=o,this.ReflectionColour=a,this.SpecularColour=l,this.SpecularHighlight=h,this.ReflectanceMethod=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new WY(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.SurfaceColour),t.push(this.Transparency),t.push(this.DiffuseColour),t.push(this.TransmissionColour),t.push(this.DiffuseTransmissionColour),t.push(this.ReflectionColour),t.push(this.SpecularColour),t.push(this.SpecularHighlight),t.push(this.ReflectanceMethod),t}},ZY=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.SurfaceColour=n,this.Transparency=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new ZY(t,e,r,s)}ToTape(){let t=[];return t.push(this.SurfaceColour),t.push(this.Transparency),t}},YY=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Textures=n}static FromTape(t,e,n){let i=0,r=n[i++];return new YY(t,e,r)}ToTape(){let t=[];return t.push(this.Textures),t}},qY=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.RepeatS=n,this.RepeatT=i,this.Mode=r,this.TextureTransform=s,this.Parameter=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new qY(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.RepeatS),t.push(this.RepeatT),t.push(this.Mode),t.push(this.TextureTransform),t.push(this.Parameter),t}},XY=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.SweptArea=n,this.Position=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new XY(t,e,r,s)}ToTape(){let t=[];return t.push(this.SweptArea),t.push(this.Position),t}},KY=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Directrix=n,this.Radius=i,this.InnerRadius=r,this.StartParam=s,this.EndParam=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new KY(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Directrix),t.push(this.Radius),t.push(this.InnerRadius),t.push(this.StartParam),t.push(this.EndParam),t}},QY=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Directrix=n,this.Radius=i,this.InnerRadius=r,this.StartParam=s,this.EndParam=o,this.FilletRadius=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new QY(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Directrix),t.push(this.Radius),t.push(this.InnerRadius),t.push(this.StartParam),t.push(this.EndParam),t.push(this.FilletRadius),t}},JY=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.SweptCurve=n,this.Position=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new JY(t,e,r,s)}ToTape(){let t=[];return t.push(this.SweptCurve),t.push(this.Position),t}},$Y=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new $Y(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},tq=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new tq(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},eq=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new eq(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t}},nq=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new nq(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},iq=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new iq(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},rq=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.Depth=s,this.FlangeWidth=o,this.WebThickness=a,this.FlangeThickness=l,this.FilletRadius=h,this.FlangeEdgeRadius=c,this.WebEdgeRadius=u,this.WebSlope=p,this.FlangeSlope=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new rq(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Depth),t.push(this.FlangeWidth),t.push(this.WebThickness),t.push(this.FlangeThickness),t.push(this.FilletRadius),t.push(this.FlangeEdgeRadius),t.push(this.WebEdgeRadius),t.push(this.WebSlope),t.push(this.FlangeSlope),t}},sq=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Name=n,this.Rows=i,this.Columns=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new sq(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Rows),t.push(this.Columns),t}},oq=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Identifier=n,this.Name=i,this.Description=r,this.Unit=s,this.ReferencePath=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new oq(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Identifier),t.push(this.Name),t.push(this.Description),t.push(this.Unit),t.push(this.ReferencePath),t}},aq=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.RowCells=n,this.IsHeading=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new aq(t,e,r,s)}ToTape(){let t=[];return t.push(this.RowCells),t.push(this.IsHeading),t}},lq=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new lq(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},hq=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new hq(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},cq=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.LongDescription=l,this.Status=h,this.WorkMethod=c,this.IsMilestone=u,this.Priority=p,this.TaskTime=d,this.PredefinedType=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new cq(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.LongDescription),t.push(this.Status),t.push(this.WorkMethod),t.push(this.IsMilestone),t.push(this.Priority),t.push(this.TaskTime),t.push(this.PredefinedType),t}},uq=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T,E){this.expressID=t,this.type=e,this.Name=n,this.DataOrigin=i,this.UserDefinedDataOrigin=r,this.DurationType=s,this.ScheduleDuration=o,this.ScheduleStart=a,this.ScheduleFinish=l,this.EarlyStart=h,this.EarlyFinish=c,this.LateStart=u,this.LateFinish=p,this.FreeFloat=d,this.TotalFloat=f,this.IsCritical=m,this.StatusTime=g,this.ActualDuration=y,this.ActualStart=v,this.ActualFinish=_,this.RemainingTime=T,this.Completion=E}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],v=n[i++],_=n[i++],T=n[i++],E=n[i++],x=n[i++],b=n[i++];return new uq(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T,E,x,b)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.DurationType),t.push(this.ScheduleDuration),t.push(this.ScheduleStart),t.push(this.ScheduleFinish),t.push(this.EarlyStart),t.push(this.EarlyFinish),t.push(this.LateStart),t.push(this.LateFinish),t.push(this.FreeFloat),t.push(this.TotalFloat),t.push(this.IsCritical),t.push(this.StatusTime),t.push(this.ActualDuration),t.push(this.ActualStart),t.push(this.ActualFinish),t.push(this.RemainingTime),t.push(this.Completion),t}},pq=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T,E,x){this.expressID=t,this.type=e,this.Name=n,this.DataOrigin=i,this.UserDefinedDataOrigin=r,this.DurationType=s,this.ScheduleDuration=o,this.ScheduleStart=a,this.ScheduleFinish=l,this.EarlyStart=h,this.EarlyFinish=c,this.LateStart=u,this.LateFinish=p,this.FreeFloat=d,this.TotalFloat=f,this.IsCritical=m,this.StatusTime=g,this.ActualDuration=y,this.ActualStart=v,this.ActualFinish=_,this.RemainingTime=T,this.Completion=E,this.Recurrence=x}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],v=n[i++],_=n[i++],T=n[i++],E=n[i++],x=n[i++],b=n[i++],I=n[i++];return new pq(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T,E,x,b,I)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.DurationType),t.push(this.ScheduleDuration),t.push(this.ScheduleStart),t.push(this.ScheduleFinish),t.push(this.EarlyStart),t.push(this.EarlyFinish),t.push(this.LateStart),t.push(this.LateFinish),t.push(this.FreeFloat),t.push(this.TotalFloat),t.push(this.IsCritical),t.push(this.StatusTime),t.push(this.ActualDuration),t.push(this.ActualStart),t.push(this.ActualFinish),t.push(this.RemainingTime),t.push(this.Completion),t.push(this.Recurrence),t}},dq=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ProcessType=c,this.PredefinedType=u,this.WorkMethod=p}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++];return new dq(t,e,r,s,o,a,l,h,c,u,p,d,f)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ProcessType),t.push(this.PredefinedType),t.push(this.WorkMethod),t}},fq=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.Purpose=n,this.Description=i,this.UserDefinedPurpose=r,this.TelephoneNumbers=s,this.FacsimileNumbers=o,this.PagerNumber=a,this.ElectronicMailAddresses=l,this.WWWHomePageURL=h,this.MessagingIDs=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new fq(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.Purpose),t.push(this.Description),t.push(this.UserDefinedPurpose),t.push(this.TelephoneNumbers),t.push(this.FacsimileNumbers),t.push(this.PagerNumber),t.push(this.ElectronicMailAddresses),t.push(this.WWWHomePageURL),t.push(this.MessagingIDs),t}},mq=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.SteelGrade=c,this.PredefinedType=u,this.NominalDiameter=p,this.CrossSectionArea=d,this.TensionForce=f,this.PreStress=m,this.FrictionCoefficient=g,this.AnchorageSlip=y,this.MinCurvatureRadius=v}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],v=n[i++],_=n[i++],T=n[i++];return new mq(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_,T)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t.push(this.PredefinedType),t.push(this.NominalDiameter),t.push(this.CrossSectionArea),t.push(this.TensionForce),t.push(this.PreStress),t.push(this.FrictionCoefficient),t.push(this.AnchorageSlip),t.push(this.MinCurvatureRadius),t}},gq=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.SteelGrade=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new gq(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t.push(this.PredefinedType),t}},yq=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new yq(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},vq=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.SteelGrade=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new vq(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.SteelGrade),t.push(this.PredefinedType),t}},_q=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new _q(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Tq=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u,this.NominalDiameter=p,this.CrossSectionArea=d,this.SheathDiameter=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new Tq(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.NominalDiameter),t.push(this.CrossSectionArea),t.push(this.SheathDiameter),t}},Eq=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Coordinates=n}static FromTape(t,e,n){let i=0,r=n[i++];return new Eq(t,e,r)}ToTape(){let t=[];return t.push(this.Coordinates),t}},xq=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new xq(t,e)}ToTape(){return[]}},bq=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Literal=n,this.Placement=i,this.Path=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new bq(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Literal),t.push(this.Placement),t.push(this.Path),t}},Iq=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Literal=n,this.Placement=i,this.Path=r,this.Extent=s,this.BoxAlignment=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Iq(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Literal),t.push(this.Placement),t.push(this.Path),t.push(this.Extent),t.push(this.BoxAlignment),t}},wq=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Name=n,this.TextCharacterAppearance=i,this.TextStyle=r,this.TextFontStyle=s,this.ModelOrDraughting=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new wq(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Name),t.push(this.TextCharacterAppearance),t.push(this.TextStyle),t.push(this.TextFontStyle),t.push(this.ModelOrDraughting),t}},Sq=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Name=n,this.FontFamily=i,this.FontStyle=r,this.FontVariant=s,this.FontWeight=o,this.FontSize=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new Sq(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.FontFamily),t.push(this.FontStyle),t.push(this.FontVariant),t.push(this.FontWeight),t.push(this.FontSize),t}},Rq=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Colour=n,this.BackgroundColour=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new Rq(t,e,r,s)}ToTape(){let t=[];return t.push(this.Colour),t.push(this.BackgroundColour),t}},Cq=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.TextIndent=n,this.TextAlign=i,this.TextDecoration=r,this.LetterSpacing=s,this.WordSpacing=o,this.TextTransform=a,this.LineHeight=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new Cq(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.TextIndent),t.push(this.TextAlign),t.push(this.TextDecoration),t.push(this.LetterSpacing),t.push(this.WordSpacing),t.push(this.TextTransform),t.push(this.LineHeight),t}},Aq=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Maps=n}static FromTape(t,e,n){let i=0,r=n[i++];return new Aq(t,e,r)}ToTape(){let t=[];return t.push(this.Maps),t}},Dq=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Maps=n,this.Mode=i,this.Parameter=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Dq(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Maps),t.push(this.Mode),t.push(this.Parameter),t}},Oq=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Maps=n,this.Vertices=i,this.MappedTo=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Oq(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Maps),t.push(this.Vertices),t.push(this.MappedTo),t}},Nq=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Coordinates=n}static FromTape(t,e,n){let i=0,r=n[i++];return new Nq(t,e,r)}ToTape(){let t=[];return t.push(this.Coordinates),t}},Mq=class{constructor(t,e,n){this.expressID=t,this.type=e,this.TexCoordsList=n}static FromTape(t,e,n){let i=0,r=n[i++];return new Mq(t,e,r)}ToTape(){let t=[];return t.push(this.TexCoordsList),t}},Pq=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.StartTime=n,this.EndTime=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new Pq(t,e,r,s)}ToTape(){let t=[];return t.push(this.StartTime),t.push(this.EndTime),t}},Fq=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.Name=n,this.Description=i,this.StartTime=r,this.EndTime=s,this.TimeSeriesDataType=o,this.DataOrigin=a,this.UserDefinedDataOrigin=l,this.Unit=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new Fq(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.Name),t.push(this.Description),t.push(this.StartTime),t.push(this.EndTime),t.push(this.TimeSeriesDataType),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.Unit),t}},Lq=class{constructor(t,e,n){this.expressID=t,this.type=e,this.ListValues=n}static FromTape(t,e,n){let i=0,r=n[i++];return new Lq(t,e,r)}ToTape(){let t=[];return t.push(this.ListValues),t}},kq=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new kq(t,e)}ToTape(){return[]}},Uq=class{constructor(t,e,n,i,r,s){this.expressID=t,this.type=e,this.ContextOfItems=n,this.RepresentationIdentifier=i,this.RepresentationType=r,this.Items=s}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++];return new Uq(t,e,r,s,o,a)}ToTape(){let t=[];return t.push(this.ContextOfItems),t.push(this.RepresentationIdentifier),t.push(this.RepresentationType),t.push(this.Items),t}},Bq=class{constructor(t,e,n,i,r){this.expressID=t,this.type=e,this.Position=n,this.MajorRadius=i,this.MinorRadius=r}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++];return new Bq(t,e,r,s,o)}ToTape(){let t=[];return t.push(this.Position),t.push(this.MajorRadius),t.push(this.MinorRadius),t}},zq=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new zq(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Gq=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Gq(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Hq=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.StartPoint=n,this.StartDirection=i,this.SegmentLength=r,this.StartRadius=s,this.EndRadius=o,this.IsStartRadiusCCW=a,this.IsEndRadiusCCW=l,this.TransitionCurveType=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new Hq(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.StartPoint),t.push(this.StartDirection),t.push(this.SegmentLength),t.push(this.StartRadius),t.push(this.EndRadius),t.push(this.IsStartRadiusCCW),t.push(this.IsEndRadiusCCW),t.push(this.TransitionCurveType),t}},jq=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new jq(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Vq=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Vq(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Wq=class{constructor(t,e,n,i,r,s,o,a,l){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.BottomXDim=s,this.TopXDim=o,this.YDim=a,this.TopXOffset=l}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++];return new Wq(t,e,r,s,o,a,l,h,c)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.BottomXDim),t.push(this.TopXDim),t.push(this.YDim),t.push(this.TopXOffset),t}},Zq=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.Coordinates=n,this.Normals=i,this.Closed=r,this.CoordIndex=s,this.PnIndex=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new Zq(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.Coordinates),t.push(this.Normals),t.push(this.Closed),t.push(this.CoordIndex),t.push(this.PnIndex),t}},Yq=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Coordinates=n,this.Normals=i,this.Closed=r,this.CoordIndex=s,this.PnIndex=o,this.Flags=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new Yq(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Coordinates),t.push(this.Normals),t.push(this.Closed),t.push(this.CoordIndex),t.push(this.PnIndex),t.push(this.Flags),t}},qq=class{constructor(t,e,n,i,r,s,o){this.expressID=t,this.type=e,this.BasisCurve=n,this.Trim1=i,this.Trim2=r,this.SenseAgreement=s,this.MasterRepresentation=o}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++];return new qq(t,e,r,s,o,a,l)}ToTape(){let t=[];return t.push(this.BasisCurve),t.push(this.Trim1),t.push(this.Trim2),t.push(this.SenseAgreement),t.push(this.MasterRepresentation),t}},Xq=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Xq(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},Kq=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new Kq(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},Qq=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new Qq(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t}},Jq=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ProcessType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new Jq(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ProcessType),t}},$q=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new $q(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t}},tX=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.Identification=l,this.LongDescription=h,this.ResourceType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new tX(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.Identification),t.push(this.LongDescription),t.push(this.ResourceType),t}},eX=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.Depth=s,this.FlangeWidth=o,this.WebThickness=a,this.FlangeThickness=l,this.FilletRadius=h,this.EdgeRadius=c,this.FlangeSlope=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new eX(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Depth),t.push(this.FlangeWidth),t.push(this.WebThickness),t.push(this.FlangeThickness),t.push(this.FilletRadius),t.push(this.EdgeRadius),t.push(this.FlangeSlope),t}},nX=class{constructor(t,e,n){this.expressID=t,this.type=e,this.Units=n}static FromTape(t,e,n){let i=0,r=n[i++];return new nX(t,e,r)}ToTape(){let t=[];return t.push(this.Units),t}},iX=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new iX(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},rX=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new rX(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},sX=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new sX(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},oX=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new oX(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},aX=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new aX(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},lX=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new lX(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},hX=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.Orientation=n,this.Magnitude=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new hX(t,e,r,s)}ToTape(){let t=[];return t.push(this.Orientation),t.push(this.Magnitude),t}},cX=class{constructor(t,e){this.expressID=t,this.type=e}static FromTape(t,e,n){return new cX(t,e)}ToTape(){return[]}},uX=class{constructor(t,e,n){this.expressID=t,this.type=e,this.LoopVertex=n}static FromTape(t,e,n){let i=0,r=n[i++];return new uX(t,e,r)}ToTape(){let t=[];return t.push(this.LoopVertex),t}},pX=class{constructor(t,e,n){this.expressID=t,this.type=e,this.VertexGeometry=n}static FromTape(t,e,n){let i=0,r=n[i++];return new pX(t,e,r)}ToTape(){let t=[];return t.push(this.VertexGeometry),t}},dX=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new dX(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},fX=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new fX(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},mX=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new mX(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},gX=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new gX(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},yX=class{constructor(t,e,n,i,r,s,o,a,l,h){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++];return new yX(t,e,r,s,o,a,l,h,c,u)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t}},vX=class{constructor(t,e,n,i){this.expressID=t,this.type=e,this.IntersectingAxes=n,this.OffsetDistances=i}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++];return new vX(t,e,r,s)}ToTape(){let t=[];return t.push(this.IntersectingAxes),t.push(this.OffsetDistances),t}},_X=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new _X(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},TX=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new TX(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},EX=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new EX(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},xX=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new xX(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},bX=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new bX(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},IX=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new IX(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.PredefinedType),t}},wX=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++];return new wX(t,e,r,s,o,a,l,h,c,u,p,d)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t}},SX=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.OverallHeight=c,this.OverallWidth=u,this.PredefinedType=p,this.PartitioningType=d,this.UserDefinedPartitioningType=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new SX(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.OverallHeight),t.push(this.OverallWidth),t.push(this.PredefinedType),t.push(this.PartitioningType),t.push(this.UserDefinedPartitioningType),t}},RX=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m,g,y){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.LiningDepth=o,this.LiningThickness=a,this.TransomThickness=l,this.MullionThickness=h,this.FirstTransomOffset=c,this.SecondTransomOffset=u,this.FirstMullionOffset=p,this.SecondMullionOffset=d,this.ShapeAspectStyle=f,this.LiningOffset=m,this.LiningToPanelOffsetX=g,this.LiningToPanelOffsetY=y}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++],v=n[i++],_=n[i++];return new RX(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y,v,_)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.LiningDepth),t.push(this.LiningThickness),t.push(this.TransomThickness),t.push(this.MullionThickness),t.push(this.FirstTransomOffset),t.push(this.SecondTransomOffset),t.push(this.FirstMullionOffset),t.push(this.SecondMullionOffset),t.push(this.ShapeAspectStyle),t.push(this.LiningOffset),t.push(this.LiningToPanelOffsetX),t.push(this.LiningToPanelOffsetY),t}},CX=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.OperationType=o,this.PanelPosition=a,this.FrameDepth=l,this.FrameThickness=h,this.ShapeAspectStyle=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new CX(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.OperationType),t.push(this.PanelPosition),t.push(this.FrameDepth),t.push(this.FrameThickness),t.push(this.ShapeAspectStyle),t}},AX=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.ObjectPlacement=a,this.Representation=l,this.Tag=h,this.OverallHeight=c,this.OverallWidth=u,this.PredefinedType=p,this.PartitioningType=d,this.UserDefinedPartitioningType=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new AX(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.ObjectPlacement),t.push(this.Representation),t.push(this.Tag),t.push(this.OverallHeight),t.push(this.OverallWidth),t.push(this.PredefinedType),t.push(this.PartitioningType),t.push(this.UserDefinedPartitioningType),t}},DX=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ConstructionType=c,this.OperationType=u,this.ParameterTakesPrecedence=p,this.Sizeable=d}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++];return new DX(t,e,r,s,o,a,l,h,c,u,p,d,f,m)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ConstructionType),t.push(this.OperationType),t.push(this.ParameterTakesPrecedence),t.push(this.Sizeable),t}},OX=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ApplicableOccurrence=o,this.HasPropertySets=a,this.RepresentationMaps=l,this.Tag=h,this.ElementType=c,this.PredefinedType=u,this.PartitioningType=p,this.ParameterTakesPrecedence=d,this.UserDefinedPartitioningType=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new OX(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ApplicableOccurrence),t.push(this.HasPropertySets),t.push(this.RepresentationMaps),t.push(this.Tag),t.push(this.ElementType),t.push(this.PredefinedType),t.push(this.PartitioningType),t.push(this.ParameterTakesPrecedence),t.push(this.UserDefinedPartitioningType),t}},NX=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.WorkingTimes=l,this.ExceptionTimes=h,this.PredefinedType=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new NX(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.WorkingTimes),t.push(this.ExceptionTimes),t.push(this.PredefinedType),t}},MX=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.CreationDate=l,this.Creators=h,this.Purpose=c,this.Duration=u,this.TotalFloat=p,this.StartTime=d,this.FinishTime=f}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++];return new MX(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.CreationDate),t.push(this.Creators),t.push(this.Purpose),t.push(this.Duration),t.push(this.TotalFloat),t.push(this.StartTime),t.push(this.FinishTime),t}},PX=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.CreationDate=l,this.Creators=h,this.Purpose=c,this.Duration=u,this.TotalFloat=p,this.StartTime=d,this.FinishTime=f,this.PredefinedType=m}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++];return new PX(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.CreationDate),t.push(this.Creators),t.push(this.Purpose),t.push(this.Duration),t.push(this.TotalFloat),t.push(this.StartTime),t.push(this.FinishTime),t.push(this.PredefinedType),t}},FX=class{constructor(t,e,n,i,r,s,o,a,l,h,c,u,p,d,f,m){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.Identification=a,this.CreationDate=l,this.Creators=h,this.Purpose=c,this.Duration=u,this.TotalFloat=p,this.StartTime=d,this.FinishTime=f,this.PredefinedType=m}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++],d=n[i++],f=n[i++],m=n[i++],g=n[i++],y=n[i++];return new FX(t,e,r,s,o,a,l,h,c,u,p,d,f,m,g,y)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.Identification),t.push(this.CreationDate),t.push(this.Creators),t.push(this.Purpose),t.push(this.Duration),t.push(this.TotalFloat),t.push(this.StartTime),t.push(this.FinishTime),t.push(this.PredefinedType),t}},LX=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.Name=n,this.DataOrigin=i,this.UserDefinedDataOrigin=r,this.RecurrencePattern=s,this.Start=o,this.Finish=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new LX(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.Name),t.push(this.DataOrigin),t.push(this.UserDefinedDataOrigin),t.push(this.RecurrencePattern),t.push(this.Start),t.push(this.Finish),t}},kX=class{constructor(t,e,n,i,r,s,o,a,l,h,c){this.expressID=t,this.type=e,this.ProfileType=n,this.ProfileName=i,this.Position=r,this.Depth=s,this.FlangeWidth=o,this.WebThickness=a,this.FlangeThickness=l,this.FilletRadius=h,this.EdgeRadius=c}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++],c=n[i++],u=n[i++],p=n[i++];return new kX(t,e,r,s,o,a,l,h,c,u,p)}ToTape(){let t=[];return t.push(this.ProfileType),t.push(this.ProfileName),t.push(this.Position),t.push(this.Depth),t.push(this.FlangeWidth),t.push(this.WebThickness),t.push(this.FlangeThickness),t.push(this.FilletRadius),t.push(this.EdgeRadius),t}},UX=class{constructor(t,e,n,i,r,s,o,a){this.expressID=t,this.type=e,this.GlobalId=n,this.OwnerHistory=i,this.Name=r,this.Description=s,this.ObjectType=o,this.LongName=a}static FromTape(t,e,n){let i=0,r=n[i++],s=n[i++],o=n[i++],a=n[i++],l=n[i++],h=n[i++];return new UX(t,e,r,s,o,a,l,h)}ToTape(){let t=[];return t.push(this.GlobalId),t.push(this.OwnerHistory),t.push(this.Name),t.push(this.Description),t.push(this.ObjectType),t.push(this.LongName),t}},BX={103090709:"IFCPROJECT",4097777520:"IFCSITE",4031249490:"IFCBUILDING",3124254112:"IFCBUILDINGSTOREY",3856911033:"IFCSPACE",1674181508:"IFCANNOTATION",25142252:"IFCCONTROLLER",32344328:"IFCBOILER",76236018:"IFCLAMP",90941305:"IFCPUMP",177149247:"IFCAIRTERMINALBOX",182646315:"IFCFLOWINSTRUMENT",263784265:"IFCFURNISHINGELEMENT",264262732:"IFCELECTRICGENERATOR",277319702:"IFCAUDIOVISUALAPPLIANCE",310824031:"IFCPIPEFITTING",331165859:"IFCSTAIR",342316401:"IFCDUCTFITTING",377706215:"IFCMECHANICALFASTENER",395920057:"IFCDOOR",402227799:"IFCELECTRICMOTOR",413509423:"IFCSYSTEMFURNITUREELEMENT",484807127:"IFCEVAPORATOR",486154966:"IFCWINDOWSTANDARDCASE",629592764:"IFCLIGHTFIXTURE",630975310:"IFCUNITARYCONTROLELEMENT",635142910:"IFCCABLECARRIERFITTING",639361253:"IFCCOIL",647756555:"IFCFASTENER",707683696:"IFCFLOWSTORAGEDEVICE",738039164:"IFCPROTECTIVEDEVICE",753842376:"IFCBEAM",812556717:"IFCTANK",819412036:"IFCFILTER",843113511:"IFCCOLUMN",862014818:"IFCELECTRICDISTRIBUTIONBOARD",900683007:"IFCFOOTING",905975707:"IFCCOLUMNSTANDARDCASE",926996030:"IFCVOIDINGFEATURE",979691226:"IFCREINFORCINGBAR",987401354:"IFCFLOWSEGMENT",1003880860:"IFCELECTRICTIMECONTROL",1051757585:"IFCCABLEFITTING",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",1073191201:"IFCMEMBER",1095909175:"IFCBUILDINGELEMENTPROXY",1156407060:"IFCPLATESTANDARDCASE",1162798199:"IFCSWITCHINGDEVICE",1329646415:"IFCSHADINGDEVICE",1335981549:"IFCDISCRETEACCESSORY",1360408905:"IFCDUCTSILENCER",1404847402:"IFCSTACKTERMINAL",1426591983:"IFCFIRESUPPRESSIONTERMINAL",1437502449:"IFCMEDICALDEVICE",1509553395:"IFCFURNITURE",1529196076:"IFCSLAB",1620046519:"IFCTRANSPORTELEMENT",1634111441:"IFCAIRTERMINAL",1658829314:"IFCENERGYCONVERSIONDEVICE",1677625105:"IFCCIVILELEMENT",1687234759:"IFCPILE",1904799276:"IFCELECTRICAPPLIANCE",1911478936:"IFCMEMBERSTANDARDCASE",1945004755:"IFCDISTRIBUTIONELEMENT",1973544240:"IFCCOVERING",1999602285:"IFCSPACEHEATER",2016517767:"IFCROOF",2056796094:"IFCAIRTOAIRHEATRECOVERY",2058353004:"IFCFLOWCONTROLLER",2068733104:"IFCHUMIDIFIER",2176052936:"IFCJUNCTIONBOX",2188021234:"IFCFLOWMETER",2223149337:"IFCFLOWTERMINAL",2262370178:"IFCRAILING",2272882330:"IFCCONDENSER",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",2320036040:"IFCREINFORCINGMESH",2347447852:"IFCTENDONANCHOR",2391383451:"IFCVIBRATIONISOLATOR",2391406946:"IFCWALL",2474470126:"IFCMOTORCONNECTION",2769231204:"IFCVIRTUALELEMENT",2814081492:"IFCENGINE",2906023776:"IFCBEAMSTANDARDCASE",2938176219:"IFCBURNER",2979338954:"IFCBUILDINGELEMENTPART",3024970846:"IFCRAMP",3026737570:"IFCTUBEBUNDLE",3027962421:"IFCSLABSTANDARDCASE",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",3053780830:"IFCSANITARYTERMINAL",3079942009:"IFCOPENINGSTANDARDCASE",3087945054:"IFCALARM",3101698114:"IFCSURFACEFEATURE",3127900445:"IFCSLABELEMENTEDCASE",3132237377:"IFCFLOWMOVINGDEVICE",3171933400:"IFCPLATE",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",3242481149:"IFCDOORSTANDARDCASE",3283111854:"IFCRAMPFLIGHT",3296154744:"IFCCHIMNEY",3304561284:"IFCWINDOW",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",3319311131:"IFCHEATEXCHANGER",3415622556:"IFCFAN",3420628829:"IFCSOLARDEVICE",3493046030:"IFCGEOGRAPHICELEMENT",3495092785:"IFCCURTAINWALL",3508470533:"IFCFLOWTREATMENTDEVICE",3512223829:"IFCWALLSTANDARDCASE",3518393246:"IFCDUCTSEGMENT",3571504051:"IFCCOMPRESSOR",3588315303:"IFCOPENINGELEMENT",3612865200:"IFCPIPESEGMENT",3640358203:"IFCCOOLINGTOWER",3651124850:"IFCPROJECTIONELEMENT",3694346114:"IFCOUTLET",3747195512:"IFCEVAPORATIVECOOLER",3758799889:"IFCCABLECARRIERSEGMENT",3824725483:"IFCTENDON",3825984169:"IFCTRANSFORMER",3902619387:"IFCCHILLER",4074379575:"IFCDAMPER",4086658281:"IFCSENSOR",4123344466:"IFCELEMENTASSEMBLY",4136498852:"IFCCOOLEDBEAM",4156078855:"IFCWALLELEMENTEDCASE",4175244083:"IFCINTERCEPTOR",4207607924:"IFCVALVE",4217484030:"IFCCABLESEGMENT",4237592921:"IFCWASTETERMINAL",4252922144:"IFCSTAIRFLIGHT",4278956645:"IFCFLOWFITTING",4288193352:"IFCACTUATOR",4292641817:"IFCUNITARYEQUIPMENT",3009204131:"IFCGRID"},zX={3821786052:"IFCACTIONREQUEST",2296667514:"IFCACTOR",3630933823:"IFCACTORROLE",4288193352:"IFCACTUATOR",2874132201:"IFCACTUATORTYPE",618182010:"IFCADDRESS",1635779807:"IFCADVANCEDBREP",2603310189:"IFCADVANCEDBREPWITHVOIDS",3406155212:"IFCADVANCEDFACE",1634111441:"IFCAIRTERMINAL",177149247:"IFCAIRTERMINALBOX",1411407467:"IFCAIRTERMINALBOXTYPE",3352864051:"IFCAIRTERMINALTYPE",2056796094:"IFCAIRTOAIRHEATRECOVERY",1871374353:"IFCAIRTOAIRHEATRECOVERYTYPE",3087945054:"IFCALARM",3001207471:"IFCALARMTYPE",325726236:"IFCALIGNMENT",749761778:"IFCALIGNMENT2DHORIZONTAL",3199563722:"IFCALIGNMENT2DHORIZONTALSEGMENT",2483840362:"IFCALIGNMENT2DSEGMENT",3379348081:"IFCALIGNMENT2DVERSEGCIRCULARARC",3239324667:"IFCALIGNMENT2DVERSEGLINE",4263986512:"IFCALIGNMENT2DVERSEGPARABOLICARC",53199957:"IFCALIGNMENT2DVERTICAL",2029264950:"IFCALIGNMENT2DVERTICALSEGMENT",3512275521:"IFCALIGNMENTCURVE",1674181508:"IFCANNOTATION",669184980:"IFCANNOTATIONFILLAREA",639542469:"IFCAPPLICATION",411424972:"IFCAPPLIEDVALUE",130549933:"IFCAPPROVAL",3869604511:"IFCAPPROVALRELATIONSHIP",3798115385:"IFCARBITRARYCLOSEDPROFILEDEF",1310608509:"IFCARBITRARYOPENPROFILEDEF",2705031697:"IFCARBITRARYPROFILEDEFWITHVOIDS",3460190687:"IFCASSET",3207858831:"IFCASYMMETRICISHAPEPROFILEDEF",277319702:"IFCAUDIOVISUALAPPLIANCE",1532957894:"IFCAUDIOVISUALAPPLIANCETYPE",4261334040:"IFCAXIS1PLACEMENT",3125803723:"IFCAXIS2PLACEMENT2D",2740243338:"IFCAXIS2PLACEMENT3D",1967976161:"IFCBSPLINECURVE",2461110595:"IFCBSPLINECURVEWITHKNOTS",2887950389:"IFCBSPLINESURFACE",167062518:"IFCBSPLINESURFACEWITHKNOTS",753842376:"IFCBEAM",2906023776:"IFCBEAMSTANDARDCASE",819618141:"IFCBEAMTYPE",4196446775:"IFCBEARING",3649138523:"IFCBEARINGTYPE",616511568:"IFCBLOBTEXTURE",1334484129:"IFCBLOCK",32344328:"IFCBOILER",231477066:"IFCBOILERTYPE",3649129432:"IFCBOOLEANCLIPPINGRESULT",2736907675:"IFCBOOLEANRESULT",4037036970:"IFCBOUNDARYCONDITION",1136057603:"IFCBOUNDARYCURVE",1560379544:"IFCBOUNDARYEDGECONDITION",3367102660:"IFCBOUNDARYFACECONDITION",1387855156:"IFCBOUNDARYNODECONDITION",2069777674:"IFCBOUNDARYNODECONDITIONWARPING",1260505505:"IFCBOUNDEDCURVE",4182860854:"IFCBOUNDEDSURFACE",2581212453:"IFCBOUNDINGBOX",2713105998:"IFCBOXEDHALFSPACE",644574406:"IFCBRIDGE",963979645:"IFCBRIDGEPART",4031249490:"IFCBUILDING",3299480353:"IFCBUILDINGELEMENT",2979338954:"IFCBUILDINGELEMENTPART",39481116:"IFCBUILDINGELEMENTPARTTYPE",1095909175:"IFCBUILDINGELEMENTPROXY",1909888760:"IFCBUILDINGELEMENTPROXYTYPE",1950629157:"IFCBUILDINGELEMENTTYPE",3124254112:"IFCBUILDINGSTOREY",1177604601:"IFCBUILDINGSYSTEM",2938176219:"IFCBURNER",2188180465:"IFCBURNERTYPE",2898889636:"IFCCSHAPEPROFILEDEF",635142910:"IFCCABLECARRIERFITTING",395041908:"IFCCABLECARRIERFITTINGTYPE",3758799889:"IFCCABLECARRIERSEGMENT",3293546465:"IFCCABLECARRIERSEGMENTTYPE",1051757585:"IFCCABLEFITTING",2674252688:"IFCCABLEFITTINGTYPE",4217484030:"IFCCABLESEGMENT",1285652485:"IFCCABLESEGMENTTYPE",3999819293:"IFCCAISSONFOUNDATION",3203706013:"IFCCAISSONFOUNDATIONTYPE",1123145078:"IFCCARTESIANPOINT",574549367:"IFCCARTESIANPOINTLIST",1675464909:"IFCCARTESIANPOINTLIST2D",2059837836:"IFCCARTESIANPOINTLIST3D",59481748:"IFCCARTESIANTRANSFORMATIONOPERATOR",3749851601:"IFCCARTESIANTRANSFORMATIONOPERATOR2D",3486308946:"IFCCARTESIANTRANSFORMATIONOPERATOR2DNONUNIFORM",3331915920:"IFCCARTESIANTRANSFORMATIONOPERATOR3D",1416205885:"IFCCARTESIANTRANSFORMATIONOPERATOR3DNONUNIFORM",3150382593:"IFCCENTERLINEPROFILEDEF",3902619387:"IFCCHILLER",2951183804:"IFCCHILLERTYPE",3296154744:"IFCCHIMNEY",2197970202:"IFCCHIMNEYTYPE",2611217952:"IFCCIRCLE",2937912522:"IFCCIRCLEHOLLOWPROFILEDEF",1383045692:"IFCCIRCLEPROFILEDEF",1062206242:"IFCCIRCULARARCSEGMENT2D",1677625105:"IFCCIVILELEMENT",3893394355:"IFCCIVILELEMENTTYPE",747523909:"IFCCLASSIFICATION",647927063:"IFCCLASSIFICATIONREFERENCE",2205249479:"IFCCLOSEDSHELL",639361253:"IFCCOIL",2301859152:"IFCCOILTYPE",776857604:"IFCCOLOURRGB",3285139300:"IFCCOLOURRGBLIST",3264961684:"IFCCOLOURSPECIFICATION",843113511:"IFCCOLUMN",905975707:"IFCCOLUMNSTANDARDCASE",300633059:"IFCCOLUMNTYPE",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",400855858:"IFCCOMMUNICATIONSAPPLIANCETYPE",2542286263:"IFCCOMPLEXPROPERTY",3875453745:"IFCCOMPLEXPROPERTYTEMPLATE",3732776249:"IFCCOMPOSITECURVE",15328376:"IFCCOMPOSITECURVEONSURFACE",2485617015:"IFCCOMPOSITECURVESEGMENT",1485152156:"IFCCOMPOSITEPROFILEDEF",3571504051:"IFCCOMPRESSOR",3850581409:"IFCCOMPRESSORTYPE",2272882330:"IFCCONDENSER",2816379211:"IFCCONDENSERTYPE",2510884976:"IFCCONIC",370225590:"IFCCONNECTEDFACESET",1981873012:"IFCCONNECTIONCURVEGEOMETRY",2859738748:"IFCCONNECTIONGEOMETRY",45288368:"IFCCONNECTIONPOINTECCENTRICITY",2614616156:"IFCCONNECTIONPOINTGEOMETRY",2732653382:"IFCCONNECTIONSURFACEGEOMETRY",775493141:"IFCCONNECTIONVOLUMEGEOMETRY",1959218052:"IFCCONSTRAINT",3898045240:"IFCCONSTRUCTIONEQUIPMENTRESOURCE",2185764099:"IFCCONSTRUCTIONEQUIPMENTRESOURCETYPE",1060000209:"IFCCONSTRUCTIONMATERIALRESOURCE",4105962743:"IFCCONSTRUCTIONMATERIALRESOURCETYPE",488727124:"IFCCONSTRUCTIONPRODUCTRESOURCE",1525564444:"IFCCONSTRUCTIONPRODUCTRESOURCETYPE",2559216714:"IFCCONSTRUCTIONRESOURCE",2574617495:"IFCCONSTRUCTIONRESOURCETYPE",3419103109:"IFCCONTEXT",3050246964:"IFCCONTEXTDEPENDENTUNIT",3293443760:"IFCCONTROL",25142252:"IFCCONTROLLER",578613899:"IFCCONTROLLERTYPE",2889183280:"IFCCONVERSIONBASEDUNIT",2713554722:"IFCCONVERSIONBASEDUNITWITHOFFSET",4136498852:"IFCCOOLEDBEAM",335055490:"IFCCOOLEDBEAMTYPE",3640358203:"IFCCOOLINGTOWER",2954562838:"IFCCOOLINGTOWERTYPE",1785450214:"IFCCOORDINATEOPERATION",1466758467:"IFCCOORDINATEREFERENCESYSTEM",3895139033:"IFCCOSTITEM",1419761937:"IFCCOSTSCHEDULE",602808272:"IFCCOSTVALUE",1973544240:"IFCCOVERING",1916426348:"IFCCOVERINGTYPE",3295246426:"IFCCREWRESOURCE",1815067380:"IFCCREWRESOURCETYPE",2506170314:"IFCCSGPRIMITIVE3D",2147822146:"IFCCSGSOLID",539742890:"IFCCURRENCYRELATIONSHIP",3495092785:"IFCCURTAINWALL",1457835157:"IFCCURTAINWALLTYPE",2601014836:"IFCCURVE",2827736869:"IFCCURVEBOUNDEDPLANE",2629017746:"IFCCURVEBOUNDEDSURFACE",1186437898:"IFCCURVESEGMENT2D",3800577675:"IFCCURVESTYLE",1105321065:"IFCCURVESTYLEFONT",2367409068:"IFCCURVESTYLEFONTANDSCALING",3510044353:"IFCCURVESTYLEFONTPATTERN",1213902940:"IFCCYLINDRICALSURFACE",4074379575:"IFCDAMPER",3961806047:"IFCDAMPERTYPE",3426335179:"IFCDEEPFOUNDATION",1306400036:"IFCDEEPFOUNDATIONTYPE",3632507154:"IFCDERIVEDPROFILEDEF",1765591967:"IFCDERIVEDUNIT",1045800335:"IFCDERIVEDUNITELEMENT",2949456006:"IFCDIMENSIONALEXPONENTS",32440307:"IFCDIRECTION",1335981549:"IFCDISCRETEACCESSORY",2635815018:"IFCDISCRETEACCESSORYTYPE",1945343521:"IFCDISTANCEEXPRESSION",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",1599208980:"IFCDISTRIBUTIONCHAMBERELEMENTTYPE",562808652:"IFCDISTRIBUTIONCIRCUIT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",2063403501:"IFCDISTRIBUTIONCONTROLELEMENTTYPE",1945004755:"IFCDISTRIBUTIONELEMENT",3256556792:"IFCDISTRIBUTIONELEMENTTYPE",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",3849074793:"IFCDISTRIBUTIONFLOWELEMENTTYPE",3041715199:"IFCDISTRIBUTIONPORT",3205830791:"IFCDISTRIBUTIONSYSTEM",1154170062:"IFCDOCUMENTINFORMATION",770865208:"IFCDOCUMENTINFORMATIONRELATIONSHIP",3732053477:"IFCDOCUMENTREFERENCE",395920057:"IFCDOOR",2963535650:"IFCDOORLININGPROPERTIES",1714330368:"IFCDOORPANELPROPERTIES",3242481149:"IFCDOORSTANDARDCASE",526551008:"IFCDOORSTYLE",2323601079:"IFCDOORTYPE",445594917:"IFCDRAUGHTINGPREDEFINEDCOLOUR",4006246654:"IFCDRAUGHTINGPREDEFINEDCURVEFONT",342316401:"IFCDUCTFITTING",869906466:"IFCDUCTFITTINGTYPE",3518393246:"IFCDUCTSEGMENT",3760055223:"IFCDUCTSEGMENTTYPE",1360408905:"IFCDUCTSILENCER",2030761528:"IFCDUCTSILENCERTYPE",3900360178:"IFCEDGE",476780140:"IFCEDGECURVE",1472233963:"IFCEDGELOOP",1904799276:"IFCELECTRICAPPLIANCE",663422040:"IFCELECTRICAPPLIANCETYPE",862014818:"IFCELECTRICDISTRIBUTIONBOARD",2417008758:"IFCELECTRICDISTRIBUTIONBOARDTYPE",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",3277789161:"IFCELECTRICFLOWSTORAGEDEVICETYPE",264262732:"IFCELECTRICGENERATOR",1534661035:"IFCELECTRICGENERATORTYPE",402227799:"IFCELECTRICMOTOR",1217240411:"IFCELECTRICMOTORTYPE",1003880860:"IFCELECTRICTIMECONTROL",712377611:"IFCELECTRICTIMECONTROLTYPE",1758889154:"IFCELEMENT",4123344466:"IFCELEMENTASSEMBLY",2397081782:"IFCELEMENTASSEMBLYTYPE",1623761950:"IFCELEMENTCOMPONENT",2590856083:"IFCELEMENTCOMPONENTTYPE",1883228015:"IFCELEMENTQUANTITY",339256511:"IFCELEMENTTYPE",2777663545:"IFCELEMENTARYSURFACE",1704287377:"IFCELLIPSE",2835456948:"IFCELLIPSEPROFILEDEF",1658829314:"IFCENERGYCONVERSIONDEVICE",2107101300:"IFCENERGYCONVERSIONDEVICETYPE",2814081492:"IFCENGINE",132023988:"IFCENGINETYPE",3747195512:"IFCEVAPORATIVECOOLER",3174744832:"IFCEVAPORATIVECOOLERTYPE",484807127:"IFCEVAPORATOR",3390157468:"IFCEVAPORATORTYPE",4148101412:"IFCEVENT",211053100:"IFCEVENTTIME",4024345920:"IFCEVENTTYPE",297599258:"IFCEXTENDEDPROPERTIES",4294318154:"IFCEXTERNALINFORMATION",3200245327:"IFCEXTERNALREFERENCE",1437805879:"IFCEXTERNALREFERENCERELATIONSHIP",1209101575:"IFCEXTERNALSPATIALELEMENT",2853485674:"IFCEXTERNALSPATIALSTRUCTUREELEMENT",2242383968:"IFCEXTERNALLYDEFINEDHATCHSTYLE",1040185647:"IFCEXTERNALLYDEFINEDSURFACESTYLE",3548104201:"IFCEXTERNALLYDEFINEDTEXTFONT",477187591:"IFCEXTRUDEDAREASOLID",2804161546:"IFCEXTRUDEDAREASOLIDTAPERED",2556980723:"IFCFACE",2047409740:"IFCFACEBASEDSURFACEMODEL",1809719519:"IFCFACEBOUND",803316827:"IFCFACEOUTERBOUND",3008276851:"IFCFACESURFACE",807026263:"IFCFACETEDBREP",3737207727:"IFCFACETEDBREPWITHVOIDS",24185140:"IFCFACILITY",1310830890:"IFCFACILITYPART",4219587988:"IFCFAILURECONNECTIONCONDITION",3415622556:"IFCFAN",346874300:"IFCFANTYPE",647756555:"IFCFASTENER",2489546625:"IFCFASTENERTYPE",2827207264:"IFCFEATUREELEMENT",2143335405:"IFCFEATUREELEMENTADDITION",1287392070:"IFCFEATUREELEMENTSUBTRACTION",738692330:"IFCFILLAREASTYLE",374418227:"IFCFILLAREASTYLEHATCHING",315944413:"IFCFILLAREASTYLETILES",819412036:"IFCFILTER",1810631287:"IFCFILTERTYPE",1426591983:"IFCFIRESUPPRESSIONTERMINAL",4222183408:"IFCFIRESUPPRESSIONTERMINALTYPE",2652556860:"IFCFIXEDREFERENCESWEPTAREASOLID",2058353004:"IFCFLOWCONTROLLER",3907093117:"IFCFLOWCONTROLLERTYPE",4278956645:"IFCFLOWFITTING",3198132628:"IFCFLOWFITTINGTYPE",182646315:"IFCFLOWINSTRUMENT",4037862832:"IFCFLOWINSTRUMENTTYPE",2188021234:"IFCFLOWMETER",3815607619:"IFCFLOWMETERTYPE",3132237377:"IFCFLOWMOVINGDEVICE",1482959167:"IFCFLOWMOVINGDEVICETYPE",987401354:"IFCFLOWSEGMENT",1834744321:"IFCFLOWSEGMENTTYPE",707683696:"IFCFLOWSTORAGEDEVICE",1339347760:"IFCFLOWSTORAGEDEVICETYPE",2223149337:"IFCFLOWTERMINAL",2297155007:"IFCFLOWTERMINALTYPE",3508470533:"IFCFLOWTREATMENTDEVICE",3009222698:"IFCFLOWTREATMENTDEVICETYPE",900683007:"IFCFOOTING",1893162501:"IFCFOOTINGTYPE",263784265:"IFCFURNISHINGELEMENT",4238390223:"IFCFURNISHINGELEMENTTYPE",1509553395:"IFCFURNITURE",1268542332:"IFCFURNITURETYPE",3493046030:"IFCGEOGRAPHICELEMENT",4095422895:"IFCGEOGRAPHICELEMENTTYPE",987898635:"IFCGEOMETRICCURVESET",3448662350:"IFCGEOMETRICREPRESENTATIONCONTEXT",2453401579:"IFCGEOMETRICREPRESENTATIONITEM",4142052618:"IFCGEOMETRICREPRESENTATIONSUBCONTEXT",3590301190:"IFCGEOMETRICSET",3009204131:"IFCGRID",852622518:"IFCGRIDAXIS",178086475:"IFCGRIDPLACEMENT",2706460486:"IFCGROUP",812098782:"IFCHALFSPACESOLID",3319311131:"IFCHEATEXCHANGER",1251058090:"IFCHEATEXCHANGERTYPE",2068733104:"IFCHUMIDIFIER",1806887404:"IFCHUMIDIFIERTYPE",1484403080:"IFCISHAPEPROFILEDEF",3905492369:"IFCIMAGETEXTURE",3570813810:"IFCINDEXEDCOLOURMAP",2571569899:"IFCINDEXEDPOLYCURVE",178912537:"IFCINDEXEDPOLYGONALFACE",2294589976:"IFCINDEXEDPOLYGONALFACEWITHVOIDS",1437953363:"IFCINDEXEDTEXTUREMAP",2133299955:"IFCINDEXEDTRIANGLETEXTUREMAP",4175244083:"IFCINTERCEPTOR",3946677679:"IFCINTERCEPTORTYPE",3113134337:"IFCINTERSECTIONCURVE",2391368822:"IFCINVENTORY",3741457305:"IFCIRREGULARTIMESERIES",3020489413:"IFCIRREGULARTIMESERIESVALUE",2176052936:"IFCJUNCTIONBOX",4288270099:"IFCJUNCTIONBOXTYPE",572779678:"IFCLSHAPEPROFILEDEF",3827777499:"IFCLABORRESOURCE",428585644:"IFCLABORRESOURCETYPE",1585845231:"IFCLAGTIME",76236018:"IFCLAMP",1051575348:"IFCLAMPTYPE",2655187982:"IFCLIBRARYINFORMATION",3452421091:"IFCLIBRARYREFERENCE",4162380809:"IFCLIGHTDISTRIBUTIONDATA",629592764:"IFCLIGHTFIXTURE",1161773419:"IFCLIGHTFIXTURETYPE",1566485204:"IFCLIGHTINTENSITYDISTRIBUTION",1402838566:"IFCLIGHTSOURCE",125510826:"IFCLIGHTSOURCEAMBIENT",2604431987:"IFCLIGHTSOURCEDIRECTIONAL",4266656042:"IFCLIGHTSOURCEGONIOMETRIC",1520743889:"IFCLIGHTSOURCEPOSITIONAL",3422422726:"IFCLIGHTSOURCESPOT",1281925730:"IFCLINE",3092502836:"IFCLINESEGMENT2D",388784114:"IFCLINEARPLACEMENT",1154579445:"IFCLINEARPOSITIONINGELEMENT",2624227202:"IFCLOCALPLACEMENT",1008929658:"IFCLOOP",1425443689:"IFCMANIFOLDSOLIDBREP",3057273783:"IFCMAPCONVERSION",2347385850:"IFCMAPPEDITEM",1838606355:"IFCMATERIAL",1847130766:"IFCMATERIALCLASSIFICATIONRELATIONSHIP",3708119e3:"IFCMATERIALCONSTITUENT",2852063980:"IFCMATERIALCONSTITUENTSET",760658860:"IFCMATERIALDEFINITION",2022407955:"IFCMATERIALDEFINITIONREPRESENTATION",248100487:"IFCMATERIALLAYER",3303938423:"IFCMATERIALLAYERSET",1303795690:"IFCMATERIALLAYERSETUSAGE",1847252529:"IFCMATERIALLAYERWITHOFFSETS",2199411900:"IFCMATERIALLIST",2235152071:"IFCMATERIALPROFILE",164193824:"IFCMATERIALPROFILESET",3079605661:"IFCMATERIALPROFILESETUSAGE",3404854881:"IFCMATERIALPROFILESETUSAGETAPERING",552965576:"IFCMATERIALPROFILEWITHOFFSETS",3265635763:"IFCMATERIALPROPERTIES",853536259:"IFCMATERIALRELATIONSHIP",1507914824:"IFCMATERIALUSAGEDEFINITION",2597039031:"IFCMEASUREWITHUNIT",377706215:"IFCMECHANICALFASTENER",2108223431:"IFCMECHANICALFASTENERTYPE",1437502449:"IFCMEDICALDEVICE",1114901282:"IFCMEDICALDEVICETYPE",1073191201:"IFCMEMBER",1911478936:"IFCMEMBERSTANDARDCASE",3181161470:"IFCMEMBERTYPE",3368373690:"IFCMETRIC",2998442950:"IFCMIRROREDPROFILEDEF",2706619895:"IFCMONETARYUNIT",2474470126:"IFCMOTORCONNECTION",977012517:"IFCMOTORCONNECTIONTYPE",1918398963:"IFCNAMEDUNIT",3888040117:"IFCOBJECT",219451334:"IFCOBJECTDEFINITION",3701648758:"IFCOBJECTPLACEMENT",2251480897:"IFCOBJECTIVE",4143007308:"IFCOCCUPANT",590820931:"IFCOFFSETCURVE",3388369263:"IFCOFFSETCURVE2D",3505215534:"IFCOFFSETCURVE3D",2485787929:"IFCOFFSETCURVEBYDISTANCES",2665983363:"IFCOPENSHELL",3588315303:"IFCOPENINGELEMENT",3079942009:"IFCOPENINGSTANDARDCASE",4251960020:"IFCORGANIZATION",1411181986:"IFCORGANIZATIONRELATIONSHIP",643959842:"IFCORIENTATIONEXPRESSION",1029017970:"IFCORIENTEDEDGE",144952367:"IFCOUTERBOUNDARYCURVE",3694346114:"IFCOUTLET",2837617999:"IFCOUTLETTYPE",1207048766:"IFCOWNERHISTORY",2529465313:"IFCPARAMETERIZEDPROFILEDEF",2519244187:"IFCPATH",1682466193:"IFCPCURVE",2382730787:"IFCPERFORMANCEHISTORY",3566463478:"IFCPERMEABLECOVERINGPROPERTIES",3327091369:"IFCPERMIT",2077209135:"IFCPERSON",101040310:"IFCPERSONANDORGANIZATION",3021840470:"IFCPHYSICALCOMPLEXQUANTITY",2483315170:"IFCPHYSICALQUANTITY",2226359599:"IFCPHYSICALSIMPLEQUANTITY",1687234759:"IFCPILE",1158309216:"IFCPILETYPE",310824031:"IFCPIPEFITTING",804291784:"IFCPIPEFITTINGTYPE",3612865200:"IFCPIPESEGMENT",4231323485:"IFCPIPESEGMENTTYPE",597895409:"IFCPIXELTEXTURE",2004835150:"IFCPLACEMENT",603570806:"IFCPLANARBOX",1663979128:"IFCPLANAREXTENT",220341763:"IFCPLANE",3171933400:"IFCPLATE",1156407060:"IFCPLATESTANDARDCASE",4017108033:"IFCPLATETYPE",2067069095:"IFCPOINT",4022376103:"IFCPOINTONCURVE",1423911732:"IFCPOINTONSURFACE",2924175390:"IFCPOLYLOOP",2775532180:"IFCPOLYGONALBOUNDEDHALFSPACE",2839578677:"IFCPOLYGONALFACESET",3724593414:"IFCPOLYLINE",3740093272:"IFCPORT",1946335990:"IFCPOSITIONINGELEMENT",3355820592:"IFCPOSTALADDRESS",759155922:"IFCPREDEFINEDCOLOUR",2559016684:"IFCPREDEFINEDCURVEFONT",3727388367:"IFCPREDEFINEDITEM",3778827333:"IFCPREDEFINEDPROPERTIES",3967405729:"IFCPREDEFINEDPROPERTYSET",1775413392:"IFCPREDEFINEDTEXTFONT",677532197:"IFCPRESENTATIONITEM",2022622350:"IFCPRESENTATIONLAYERASSIGNMENT",1304840413:"IFCPRESENTATIONLAYERWITHSTYLE",3119450353:"IFCPRESENTATIONSTYLE",2417041796:"IFCPRESENTATIONSTYLEASSIGNMENT",2744685151:"IFCPROCEDURE",569719735:"IFCPROCEDURETYPE",2945172077:"IFCPROCESS",4208778838:"IFCPRODUCT",673634403:"IFCPRODUCTDEFINITIONSHAPE",2095639259:"IFCPRODUCTREPRESENTATION",3958567839:"IFCPROFILEDEF",2802850158:"IFCPROFILEPROPERTIES",103090709:"IFCPROJECT",653396225:"IFCPROJECTLIBRARY",2904328755:"IFCPROJECTORDER",3843373140:"IFCPROJECTEDCRS",3651124850:"IFCPROJECTIONELEMENT",2598011224:"IFCPROPERTY",986844984:"IFCPROPERTYABSTRACTION",871118103:"IFCPROPERTYBOUNDEDVALUE",1680319473:"IFCPROPERTYDEFINITION",148025276:"IFCPROPERTYDEPENDENCYRELATIONSHIP",4166981789:"IFCPROPERTYENUMERATEDVALUE",3710013099:"IFCPROPERTYENUMERATION",2752243245:"IFCPROPERTYLISTVALUE",941946838:"IFCPROPERTYREFERENCEVALUE",1451395588:"IFCPROPERTYSET",3357820518:"IFCPROPERTYSETDEFINITION",492091185:"IFCPROPERTYSETTEMPLATE",3650150729:"IFCPROPERTYSINGLEVALUE",110355661:"IFCPROPERTYTABLEVALUE",3521284610:"IFCPROPERTYTEMPLATE",1482703590:"IFCPROPERTYTEMPLATEDEFINITION",738039164:"IFCPROTECTIVEDEVICE",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",655969474:"IFCPROTECTIVEDEVICETRIPPINGUNITTYPE",1842657554:"IFCPROTECTIVEDEVICETYPE",3219374653:"IFCPROXY",90941305:"IFCPUMP",2250791053:"IFCPUMPTYPE",2044713172:"IFCQUANTITYAREA",2093928680:"IFCQUANTITYCOUNT",931644368:"IFCQUANTITYLENGTH",2090586900:"IFCQUANTITYSET",3252649465:"IFCQUANTITYTIME",2405470396:"IFCQUANTITYVOLUME",825690147:"IFCQUANTITYWEIGHT",2262370178:"IFCRAILING",2893384427:"IFCRAILINGTYPE",3024970846:"IFCRAMP",3283111854:"IFCRAMPFLIGHT",2324767716:"IFCRAMPFLIGHTTYPE",1469900589:"IFCRAMPTYPE",1232101972:"IFCRATIONALBSPLINECURVEWITHKNOTS",683857671:"IFCRATIONALBSPLINESURFACEWITHKNOTS",2770003689:"IFCRECTANGLEHOLLOWPROFILEDEF",3615266464:"IFCRECTANGLEPROFILEDEF",2798486643:"IFCRECTANGULARPYRAMID",3454111270:"IFCRECTANGULARTRIMMEDSURFACE",3915482550:"IFCRECURRENCEPATTERN",2433181523:"IFCREFERENCE",4021432810:"IFCREFERENT",3413951693:"IFCREGULARTIMESERIES",1580146022:"IFCREINFORCEMENTBARPROPERTIES",3765753017:"IFCREINFORCEMENTDEFINITIONPROPERTIES",979691226:"IFCREINFORCINGBAR",2572171363:"IFCREINFORCINGBARTYPE",3027567501:"IFCREINFORCINGELEMENT",964333572:"IFCREINFORCINGELEMENTTYPE",2320036040:"IFCREINFORCINGMESH",2310774935:"IFCREINFORCINGMESHTYPE",160246688:"IFCRELAGGREGATES",3939117080:"IFCRELASSIGNS",1683148259:"IFCRELASSIGNSTOACTOR",2495723537:"IFCRELASSIGNSTOCONTROL",1307041759:"IFCRELASSIGNSTOGROUP",1027710054:"IFCRELASSIGNSTOGROUPBYFACTOR",4278684876:"IFCRELASSIGNSTOPROCESS",2857406711:"IFCRELASSIGNSTOPRODUCT",205026976:"IFCRELASSIGNSTORESOURCE",1865459582:"IFCRELASSOCIATES",4095574036:"IFCRELASSOCIATESAPPROVAL",919958153:"IFCRELASSOCIATESCLASSIFICATION",2728634034:"IFCRELASSOCIATESCONSTRAINT",982818633:"IFCRELASSOCIATESDOCUMENT",3840914261:"IFCRELASSOCIATESLIBRARY",2655215786:"IFCRELASSOCIATESMATERIAL",826625072:"IFCRELCONNECTS",1204542856:"IFCRELCONNECTSELEMENTS",3945020480:"IFCRELCONNECTSPATHELEMENTS",4201705270:"IFCRELCONNECTSPORTTOELEMENT",3190031847:"IFCRELCONNECTSPORTS",2127690289:"IFCRELCONNECTSSTRUCTURALACTIVITY",1638771189:"IFCRELCONNECTSSTRUCTURALMEMBER",504942748:"IFCRELCONNECTSWITHECCENTRICITY",3678494232:"IFCRELCONNECTSWITHREALIZINGELEMENTS",3242617779:"IFCRELCONTAINEDINSPATIALSTRUCTURE",886880790:"IFCRELCOVERSBLDGELEMENTS",2802773753:"IFCRELCOVERSSPACES",2565941209:"IFCRELDECLARES",2551354335:"IFCRELDECOMPOSES",693640335:"IFCRELDEFINES",1462361463:"IFCRELDEFINESBYOBJECT",4186316022:"IFCRELDEFINESBYPROPERTIES",307848117:"IFCRELDEFINESBYTEMPLATE",781010003:"IFCRELDEFINESBYTYPE",3940055652:"IFCRELFILLSELEMENT",279856033:"IFCRELFLOWCONTROLELEMENTS",427948657:"IFCRELINTERFERESELEMENTS",3268803585:"IFCRELNESTS",1441486842:"IFCRELPOSITIONS",750771296:"IFCRELPROJECTSELEMENT",1245217292:"IFCRELREFERENCEDINSPATIALSTRUCTURE",4122056220:"IFCRELSEQUENCE",366585022:"IFCRELSERVICESBUILDINGS",3451746338:"IFCRELSPACEBOUNDARY",3523091289:"IFCRELSPACEBOUNDARY1STLEVEL",1521410863:"IFCRELSPACEBOUNDARY2NDLEVEL",1401173127:"IFCRELVOIDSELEMENT",478536968:"IFCRELATIONSHIP",816062949:"IFCREPARAMETRISEDCOMPOSITECURVESEGMENT",1076942058:"IFCREPRESENTATION",3377609919:"IFCREPRESENTATIONCONTEXT",3008791417:"IFCREPRESENTATIONITEM",1660063152:"IFCREPRESENTATIONMAP",2914609552:"IFCRESOURCE",2943643501:"IFCRESOURCEAPPROVALRELATIONSHIP",1608871552:"IFCRESOURCECONSTRAINTRELATIONSHIP",2439245199:"IFCRESOURCELEVELRELATIONSHIP",1042787934:"IFCRESOURCETIME",1856042241:"IFCREVOLVEDAREASOLID",3243963512:"IFCREVOLVEDAREASOLIDTAPERED",4158566097:"IFCRIGHTCIRCULARCONE",3626867408:"IFCRIGHTCIRCULARCYLINDER",2016517767:"IFCROOF",2781568857:"IFCROOFTYPE",2341007311:"IFCROOT",2778083089:"IFCROUNDEDRECTANGLEPROFILEDEF",448429030:"IFCSIUNIT",3053780830:"IFCSANITARYTERMINAL",1768891740:"IFCSANITARYTERMINALTYPE",1054537805:"IFCSCHEDULINGTIME",2157484638:"IFCSEAMCURVE",2042790032:"IFCSECTIONPROPERTIES",4165799628:"IFCSECTIONREINFORCEMENTPROPERTIES",1862484736:"IFCSECTIONEDSOLID",1290935644:"IFCSECTIONEDSOLIDHORIZONTAL",1509187699:"IFCSECTIONEDSPINE",4086658281:"IFCSENSOR",1783015770:"IFCSENSORTYPE",1329646415:"IFCSHADINGDEVICE",4074543187:"IFCSHADINGDEVICETYPE",867548509:"IFCSHAPEASPECT",3982875396:"IFCSHAPEMODEL",4240577450:"IFCSHAPEREPRESENTATION",4124623270:"IFCSHELLBASEDSURFACEMODEL",3692461612:"IFCSIMPLEPROPERTY",3663146110:"IFCSIMPLEPROPERTYTEMPLATE",4097777520:"IFCSITE",1529196076:"IFCSLAB",3127900445:"IFCSLABELEMENTEDCASE",3027962421:"IFCSLABSTANDARDCASE",2533589738:"IFCSLABTYPE",2609359061:"IFCSLIPPAGECONNECTIONCONDITION",3420628829:"IFCSOLARDEVICE",1072016465:"IFCSOLARDEVICETYPE",723233188:"IFCSOLIDMODEL",3856911033:"IFCSPACE",1999602285:"IFCSPACEHEATER",1305183839:"IFCSPACEHEATERTYPE",3812236995:"IFCSPACETYPE",1412071761:"IFCSPATIALELEMENT",710998568:"IFCSPATIALELEMENTTYPE",2706606064:"IFCSPATIALSTRUCTUREELEMENT",3893378262:"IFCSPATIALSTRUCTUREELEMENTTYPE",463610769:"IFCSPATIALZONE",2481509218:"IFCSPATIALZONETYPE",451544542:"IFCSPHERE",4015995234:"IFCSPHERICALSURFACE",1404847402:"IFCSTACKTERMINAL",3112655638:"IFCSTACKTERMINALTYPE",331165859:"IFCSTAIR",4252922144:"IFCSTAIRFLIGHT",1039846685:"IFCSTAIRFLIGHTTYPE",338393293:"IFCSTAIRTYPE",682877961:"IFCSTRUCTURALACTION",3544373492:"IFCSTRUCTURALACTIVITY",2515109513:"IFCSTRUCTURALANALYSISMODEL",1179482911:"IFCSTRUCTURALCONNECTION",2273995522:"IFCSTRUCTURALCONNECTIONCONDITION",1004757350:"IFCSTRUCTURALCURVEACTION",4243806635:"IFCSTRUCTURALCURVECONNECTION",214636428:"IFCSTRUCTURALCURVEMEMBER",2445595289:"IFCSTRUCTURALCURVEMEMBERVARYING",2757150158:"IFCSTRUCTURALCURVEREACTION",3136571912:"IFCSTRUCTURALITEM",1807405624:"IFCSTRUCTURALLINEARACTION",2162789131:"IFCSTRUCTURALLOAD",385403989:"IFCSTRUCTURALLOADCASE",3478079324:"IFCSTRUCTURALLOADCONFIGURATION",1252848954:"IFCSTRUCTURALLOADGROUP",1595516126:"IFCSTRUCTURALLOADLINEARFORCE",609421318:"IFCSTRUCTURALLOADORRESULT",2668620305:"IFCSTRUCTURALLOADPLANARFORCE",2473145415:"IFCSTRUCTURALLOADSINGLEDISPLACEMENT",1973038258:"IFCSTRUCTURALLOADSINGLEDISPLACEMENTDISTORTION",1597423693:"IFCSTRUCTURALLOADSINGLEFORCE",1190533807:"IFCSTRUCTURALLOADSINGLEFORCEWARPING",2525727697:"IFCSTRUCTURALLOADSTATIC",3408363356:"IFCSTRUCTURALLOADTEMPERATURE",530289379:"IFCSTRUCTURALMEMBER",1621171031:"IFCSTRUCTURALPLANARACTION",2082059205:"IFCSTRUCTURALPOINTACTION",734778138:"IFCSTRUCTURALPOINTCONNECTION",1235345126:"IFCSTRUCTURALPOINTREACTION",3689010777:"IFCSTRUCTURALREACTION",2986769608:"IFCSTRUCTURALRESULTGROUP",3657597509:"IFCSTRUCTURALSURFACEACTION",1975003073:"IFCSTRUCTURALSURFACECONNECTION",3979015343:"IFCSTRUCTURALSURFACEMEMBER",2218152070:"IFCSTRUCTURALSURFACEMEMBERVARYING",603775116:"IFCSTRUCTURALSURFACEREACTION",2830218821:"IFCSTYLEMODEL",3958052878:"IFCSTYLEDITEM",3049322572:"IFCSTYLEDREPRESENTATION",148013059:"IFCSUBCONTRACTRESOURCE",4095615324:"IFCSUBCONTRACTRESOURCETYPE",2233826070:"IFCSUBEDGE",2513912981:"IFCSURFACE",699246055:"IFCSURFACECURVE",2028607225:"IFCSURFACECURVESWEPTAREASOLID",3101698114:"IFCSURFACEFEATURE",2809605785:"IFCSURFACEOFLINEAREXTRUSION",4124788165:"IFCSURFACEOFREVOLUTION",2934153892:"IFCSURFACEREINFORCEMENTAREA",1300840506:"IFCSURFACESTYLE",3303107099:"IFCSURFACESTYLELIGHTING",1607154358:"IFCSURFACESTYLEREFRACTION",1878645084:"IFCSURFACESTYLERENDERING",846575682:"IFCSURFACESTYLESHADING",1351298697:"IFCSURFACESTYLEWITHTEXTURES",626085974:"IFCSURFACETEXTURE",2247615214:"IFCSWEPTAREASOLID",1260650574:"IFCSWEPTDISKSOLID",1096409881:"IFCSWEPTDISKSOLIDPOLYGONAL",230924584:"IFCSWEPTSURFACE",1162798199:"IFCSWITCHINGDEVICE",2315554128:"IFCSWITCHINGDEVICETYPE",2254336722:"IFCSYSTEM",413509423:"IFCSYSTEMFURNITUREELEMENT",1580310250:"IFCSYSTEMFURNITUREELEMENTTYPE",3071757647:"IFCTSHAPEPROFILEDEF",985171141:"IFCTABLE",2043862942:"IFCTABLECOLUMN",531007025:"IFCTABLEROW",812556717:"IFCTANK",5716631:"IFCTANKTYPE",3473067441:"IFCTASK",1549132990:"IFCTASKTIME",2771591690:"IFCTASKTIMERECURRING",3206491090:"IFCTASKTYPE",912023232:"IFCTELECOMADDRESS",3824725483:"IFCTENDON",2347447852:"IFCTENDONANCHOR",3081323446:"IFCTENDONANCHORTYPE",3663046924:"IFCTENDONCONDUIT",2281632017:"IFCTENDONCONDUITTYPE",2415094496:"IFCTENDONTYPE",2387106220:"IFCTESSELLATEDFACESET",901063453:"IFCTESSELLATEDITEM",4282788508:"IFCTEXTLITERAL",3124975700:"IFCTEXTLITERALWITHEXTENT",1447204868:"IFCTEXTSTYLE",1983826977:"IFCTEXTSTYLEFONTMODEL",2636378356:"IFCTEXTSTYLEFORDEFINEDFONT",1640371178:"IFCTEXTSTYLETEXTMODEL",280115917:"IFCTEXTURECOORDINATE",1742049831:"IFCTEXTURECOORDINATEGENERATOR",2552916305:"IFCTEXTUREMAP",1210645708:"IFCTEXTUREVERTEX",3611470254:"IFCTEXTUREVERTEXLIST",1199560280:"IFCTIMEPERIOD",3101149627:"IFCTIMESERIES",581633288:"IFCTIMESERIESVALUE",1377556343:"IFCTOPOLOGICALREPRESENTATIONITEM",1735638870:"IFCTOPOLOGYREPRESENTATION",1935646853:"IFCTOROIDALSURFACE",3825984169:"IFCTRANSFORMER",1692211062:"IFCTRANSFORMERTYPE",2595432518:"IFCTRANSITIONCURVESEGMENT2D",1620046519:"IFCTRANSPORTELEMENT",2097647324:"IFCTRANSPORTELEMENTTYPE",2715220739:"IFCTRAPEZIUMPROFILEDEF",2916149573:"IFCTRIANGULATEDFACESET",1229763772:"IFCTRIANGULATEDIRREGULARNETWORK",3593883385:"IFCTRIMMEDCURVE",3026737570:"IFCTUBEBUNDLE",1600972822:"IFCTUBEBUNDLETYPE",1628702193:"IFCTYPEOBJECT",3736923433:"IFCTYPEPROCESS",2347495698:"IFCTYPEPRODUCT",3698973494:"IFCTYPERESOURCE",427810014:"IFCUSHAPEPROFILEDEF",180925521:"IFCUNITASSIGNMENT",630975310:"IFCUNITARYCONTROLELEMENT",3179687236:"IFCUNITARYCONTROLELEMENTTYPE",4292641817:"IFCUNITARYEQUIPMENT",1911125066:"IFCUNITARYEQUIPMENTTYPE",4207607924:"IFCVALVE",728799441:"IFCVALVETYPE",1417489154:"IFCVECTOR",2799835756:"IFCVERTEX",2759199220:"IFCVERTEXLOOP",1907098498:"IFCVERTEXPOINT",1530820697:"IFCVIBRATIONDAMPER",3956297820:"IFCVIBRATIONDAMPERTYPE",2391383451:"IFCVIBRATIONISOLATOR",3313531582:"IFCVIBRATIONISOLATORTYPE",2769231204:"IFCVIRTUALELEMENT",891718957:"IFCVIRTUALGRIDINTERSECTION",926996030:"IFCVOIDINGFEATURE",2391406946:"IFCWALL",4156078855:"IFCWALLELEMENTEDCASE",3512223829:"IFCWALLSTANDARDCASE",1898987631:"IFCWALLTYPE",4237592921:"IFCWASTETERMINAL",1133259667:"IFCWASTETERMINALTYPE",3304561284:"IFCWINDOW",336235671:"IFCWINDOWLININGPROPERTIES",512836454:"IFCWINDOWPANELPROPERTIES",486154966:"IFCWINDOWSTANDARDCASE",1299126871:"IFCWINDOWSTYLE",4009809668:"IFCWINDOWTYPE",4088093105:"IFCWORKCALENDAR",1028945134:"IFCWORKCONTROL",4218914973:"IFCWORKPLAN",3342526732:"IFCWORKSCHEDULE",1236880293:"IFCWORKTIME",2543172580:"IFCZSHAPEPROFILEDEF",1033361043:"IFCZONE"},GX={aggregates:{name:gA,relating:"RelatingObject",related:"RelatedObjects",key:"children"},spatial:{name:vA,relating:"RelatingStructure",related:"RelatedElements",key:"children"},psets:{name:_A,relating:"RelatingPropertyDefinition",related:"RelatedObjects",key:"hasPsets"},materials:{name:yA,relating:"RelatingMaterial",related:"RelatedObjects",key:"hasMaterial"},type:{name:TA,relating:"RelatingType",related:"RelatedObjects",key:"hasType"}},HX=class{constructor(t){this.api=t}getIfcType(t){return zX[t]}getItemProperties(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return XS(this,null,(function*(){return this.api.GetLine(t,e,n)}))}getPropertySets(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return XS(this,null,(function*(){return yield this.getProperty(t,e,n,GX.psets)}))}getTypeProperties(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return XS(this,null,(function*(){return yield this.getProperty(t,e,n,GX.type)}))}getMaterialsProperties(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return XS(this,null,(function*(){return yield this.getProperty(t,e,n,GX.materials)}))}getSpatialStructure(t,e){return XS(this,null,(function*(){yield this.getAllTypesOfModel(t);const n=yield this.getSpatialTreeChunks(t),i=(yield this.api.GetLineIDsWithType(t,iA)).get(0),r=HX.newIfcProject(i);return yield this.getSpatialNode(t,r,n,e),this.cleanupTypes(),r}))}getAllItemsOfType(t,e,n){return XS(this,null,(function*(){let i=[];const r=yield this.api.GetLineIDsWithType(t,e);for(let t=0;t<r.size();t++)i.push(r.get(t));if(!n)return i;const s=[];for(let e=0;e<i.length;e++)s.push(yield this.api.GetLine(t,i[e]));return s}))}getProperty(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;return XS(this,null,(function*(){const r=yield this.getAllRelatedItemsOfType(t,e,i),s=[];for(let e=0;e<r.length;e++)s.push(yield this.api.GetLine(t,r[e],n));return s}))}getChunks(t,e,n){return XS(this,null,(function*(){const i=yield this.api.GetLineIDsWithType(t,n.name);for(let r=0;r<i.size();r++){const s=yield this.api.GetLine(t,i.get(r),!1);this.saveChunk(e,n,s)}}))}static isRelated(t,e,n){const i=e[n.related];if(Array.isArray(i)){return i.map((t=>t.value)).includes(t)}return i.value===t}static newIfcProject(t){return{expressID:t,type:"IFCPROJECT",children:[]}}getSpatialNode(t,e,n,i){return XS(this,null,(function*(){yield this.getChildren(t,e,n,GX.aggregates,i),yield this.getChildren(t,e,n,GX.spatial,i)}))}getChildren(t,e,n,i,r){return XS(this,null,(function*(){const s=n[e.expressID];if(void 0==s)return;const o=i.key,a=[];for(let e=0;e<s.length;e++){const i=s[e];let o=this.newNode(i);if(r){const e=yield this.getItemProperties(t,o.expressID);o=ZS(ZS({},e),o)}yield this.getSpatialNode(t,o,n,r),a.push(o)}e[o]=a}))}newNode(t){return{expressID:t,type:this.getNodeType(t),children:[]}}getNodeType(t){const e=this.types[t];return BX[e]}getSpatialTreeChunks(t){return XS(this,null,(function*(){const e={};return yield this.getChunks(t,e,GX.aggregates),yield this.getChunks(t,e,GX.spatial),e}))}saveChunk(t,e,n){const i=n[e.relating].value,r=n[e.related].map((t=>t.value));void 0==t[i]?t[i]=r:t[i]=t[i].concat(r)}getRelated(t,e,n){const i=t[e.relating];Array.isArray(i)?i.forEach((t=>n.push(t.value))):n.push(i.value)}getAllRelatedItemsOfType(t,e,n){return XS(this,null,(function*(){const i=yield this.api.GetLineIDsWithType(t,n.name),r=[];for(let s=0;s<i.size();s++){const o=yield this.api.GetLine(t,i.get(s));HX.isRelated(e,o,n)&&this.getRelated(o,n,r)}return r}))}cleanupTypes(){this.types={}}getAllTypesOfModel(t){return XS(this,null,(function*(){const e={},n=Object.keys(BX).map((t=>parseInt(t)));for(let i=0;i<n.length;i++){const r=n[i],s=yield this.api.GetLineIDsWithType(t,r),o=s.size();for(let t=0;t<o;t++)e[s.get(t)]=r}this.types=e}))}};NP="undefined"!==typeof self&&self.crossOriginIsolated?QS():JS();var jX=class{constructor(){this.wasmModule=void 0,this.fs=void 0,this.wasmPath="",this.isWasmPathAbsolute=!1,this.ifcGuidMap=new Map,this.properties=new HX(this)}Init(t){return XS(this,null,(function*(){if(NP){let e=(t,e)=>t.endsWith(".wasm")?this.isWasmPathAbsolute?this.wasmPath+t:e+this.wasmPath+t:e+t;this.wasmModule=yield NP({noInitialRun:!0,locateFile:t||e}),this.fs=this.wasmModule.FS}else console.error("Could not find wasm module at './web-ifc' from web-ifc-api.ts")}))}OpenModel(t,e){let n=ZS({COORDINATE_TO_ORIGIN:!1,USE_FAST_BOOLS:!1,CIRCLE_SEGMENTS_LOW:5,CIRCLE_SEGMENTS_MEDIUM:8,CIRCLE_SEGMENTS_HIGH:12,BOOL_ABORT_THRESHOLD:1e4},e),i=0;return this.wasmModule.OpenModel(n,((e,n)=>{let r=Math.min(t.byteLength-i,n),s=this.wasmModule.HEAPU8.subarray(e,e+n),o=t.subarray(i,i+r);return s.set(o),i+=r,r}))}CreateModel(t){let e=ZS({COORDINATE_TO_ORIGIN:!1,USE_FAST_BOOLS:!1,CIRCLE_SEGMENTS_LOW:5,CIRCLE_SEGMENTS_MEDIUM:8,CIRCLE_SEGMENTS_HIGH:12,BOOL_ABORT_THRESHOLD:1e4},t);return this.wasmModule.CreateModel(e)}ExportFileAsIFC(t){this.wasmModule.ExportFileAsIFC(t);let e=this.fs.readFile("/export.ifc");return this.wasmModule.FS_unlink("/export.ifc"),e}GetGeometry(t,e){return this.wasmModule.GetGeometry(t,e)}GetLine(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.GetRawLineData(t,e),r=OD[i.type](i);return n&&this.FlattenLine(t,r),r}GetAndClearErrors(t){return this.wasmModule.GetAndClearErrors(t)}WriteLine(t,e){if(Object.keys(e).forEach((n=>{let i=e[n];if(i&&void 0!==i.expressID)this.WriteLine(t,i),e[n]={type:5,value:i.expressID};else if(Array.isArray(i)&&i.length>0)for(let r=0;r<i.length;r++)void 0!==i[r].expressID&&(this.WriteLine(t,i[r]),e[n][r]={type:5,value:i[r].expressID})})),void 0==e.expressID||void 0==e.type||void 0===e.ToType)return void console.warn("Line object cannot be serialized: ",e);let n={ID:e.expressID,type:e.type,arguments:e.ToTape()};this.WriteRawLineData(t,n)}FlattenLine(t,e){Object.keys(e).forEach((n=>{let i=e[n];if(i&&5===i.type)e[n]=this.GetLine(t,i.value,!0);else if(Array.isArray(i)&&i.length>0&&5===i[0].type)for(let r=0;r<i.length;r++)e[n][r]=this.GetLine(t,i[r].value,!0)}))}GetRawLineData(t,e){return this.wasmModule.GetLine(t,e)}WriteRawLineData(t,e){return this.wasmModule.WriteLine(t,e.ID,e.type,e.arguments)}GetLineIDsWithType(t,e){return this.wasmModule.GetLineIDsWithType(t,e)}GetAllLines(t){return this.wasmModule.GetAllLines(t)}SetGeometryTransformation(t,e){16==e.length?this.wasmModule.SetGeometryTransformation(t,e):console.log("Bad transformation matrix size: ".concat(e.length))}GetCoordinationMatrix(t){return this.wasmModule.GetCoordinationMatrix(t)}GetVertexArray(t,e){return this.getSubArray(this.wasmModule.HEAPF32,t,e)}GetIndexArray(t,e){return this.getSubArray(this.wasmModule.HEAPU32,t,e)}getSubArray(t,e,n){return t.subarray(e/4,e/4+n).slice(0)}CloseModel(t){this.ifcGuidMap.delete(t),this.wasmModule.CloseModel(t)}StreamAllMeshes(t,e){this.wasmModule.StreamAllMeshes(t,e)}StreamAllMeshesWithTypes(t,e,n){this.wasmModule.StreamAllMeshesWithTypes(t,e,n)}IsModelOpen(t){return this.wasmModule.IsModelOpen(t)}LoadAllGeometry(t){return this.wasmModule.LoadAllGeometry(t)}GetFlatMesh(t,e){return this.wasmModule.GetFlatMesh(t,e)}CreateIfcGuidToExpressIdMapping(t){const e=new Map;for(let n=0;n<DD.length;n++){const i=DD[n],r=this.GetLineIDsWithType(t,i),s=r.size();for(let n=0;n<s;n++){const i=r.get(n),s=this.GetLine(t,i).GlobalId.value;e.set(i,s),e.set(s,i)}}this.ifcGuidMap.set(t,e)}SetWasmPath(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.wasmPath=t,this.isWasmPathAbsolute=e}};class VX{constructor(){this.instancedCategories=new Set,this.includeProperties=!0,this.optionalCategories=[OA],this.wasm={path:"",absolute:!1},this.webIfc={COORDINATE_TO_ORIGIN:!0,USE_FAST_BOOLS:!0},this.instancedCategories.add(OC),this.instancedCategories.add(CD),this.instancedCategories.add(ZR)}}class WX{constructor(t,e,n){this._referenceMatrix=new Ep,this._isFirstMatrix=!0,this._voids=new Set,this._geometriesByMaterial={},this._items={},this._webIfc=t,this._items=e,this._materials=n}streamMesh(t,e){this.reset(t);const n=WX.getGeometryID(e);!this._items[n]?this.generateBufferGeometries(e,n):this.getGeometryTransformation(e,n)}cleanUp(){this._geometriesByMaterial={},this._voids.clear()}addVoid(t){this._voids.add(t)}reset(t){this._geometriesByMaterial={},this._referenceMatrix=new Ep,this._isFirstMatrix=!0,this._webIfc=null,this._webIfc=t}getGeometryTransformation(t,e){const n=this._items[e].referenceMatrix,i=t.geometries.get(0),r=WX.getMeshMatrix(i);r.multiply(n),this._items[e].instances.push({id:t.expressID,matrix:r,hasVoids:this._voids.has(t.expressID)})}generateBufferGeometries(t,e){const n=t.geometries.size();for(let i=0;i<n;i++){const e=t.geometries.get(i),n=this.getBufferGeometry(e.geometryExpressID);if(!n)return;this.applyTransform(e,n),this.sortGeometriesByMaterials(e,n)}this.saveGeometryInstances(e,t)}saveGeometryInstances(t,e){this._items[t]={instances:[{id:e.expressID,matrix:new Ep,hasVoids:this._voids.has(e.expressID)}],geometriesByMaterial:this._geometriesByMaterial,referenceMatrix:this._referenceMatrix}}sortGeometriesByMaterials(t,e){const n=this.saveMaterials(t);this._geometriesByMaterial[n]?this._geometriesByMaterial[n].push(e):this._geometriesByMaterial[n]=[e]}saveMaterials(t){const e=t.color,n="".concat(e.x).concat(e.y).concat(e.z).concat(e.w);return void 0!==this._materials[n]||this.saveNewMaterial(n,e),n}saveNewMaterial(t,e){this._materials[t]=new R_({color:new pd(e.x,e.y,e.z),transparent:1!==e.w,opacity:e.w,side:Fl})}applyTransform(t,e){const n=WX.getMeshMatrix(t);e.applyMatrix4(n),this._isFirstMatrix&&(this._referenceMatrix=(new Ep).copy(n).invert(),this._isFirstMatrix=!1)}getBufferGeometry(t){const e=this._webIfc.GetGeometry(0,t),n=this.getVertices(e);if(!n.length)return null;const i=this.getIndices(e);if(!i.length)return null;const r=this.constructGeometry(n,i);return e.delete(),r}getIndices(t){return this._webIfc.GetIndexArray(t.GetIndexData(),t.GetIndexDataSize())}getVertices(t){return this._webIfc.GetVertexArray(t.GetVertexData(),t.GetVertexDataSize())}constructGeometry(t,e){const n=new Rd,i=new Float32Array(t.length/2),r=new Float32Array(t.length/2);for(let s=0;s<t.length;s+=6)i[s/2]=t[s],i[s/2+1]=t[s+1],i[s/2+2]=t[s+2],r[s/2]=t[s+3],r[s/2+1]=t[s+4],r[s/2+2]=t[s+5];return n.setAttribute("position",new gd(i,3)),n.setAttribute("normal",new gd(r,3)),n.setIndex(new gd(e,1)),n}static getMeshMatrix(t){const e=t.flatTransformation,n=new Ep;return n.fromArray(e),n}static getGeometryID(t){let e="";const n=t.geometries.size();for(let i=0;i<n;i++){e+=t.geometries.get(i).geometryExpressID}return e}}const ZX={103090709:"IFCPROJECT",4097777520:"IFCSITE",4031249490:"IFCBUILDING",3124254112:"IFCBUILDINGSTOREY",3856911033:"IFCSPACE",1674181508:"IFCANNOTATION",25142252:"IFCCONTROLLER",32344328:"IFCBOILER",76236018:"IFCLAMP",90941305:"IFCPUMP",177149247:"IFCAIRTERMINALBOX",182646315:"IFCFLOWINSTRUMENT",263784265:"IFCFURNISHINGELEMENT",264262732:"IFCELECTRICGENERATOR",277319702:"IFCAUDIOVISUALAPPLIANCE",310824031:"IFCPIPEFITTING",331165859:"IFCSTAIR",342316401:"IFCDUCTFITTING",377706215:"IFCMECHANICALFASTENER",395920057:"IFCDOOR",402227799:"IFCELECTRICMOTOR",413509423:"IFCSYSTEMFURNITUREELEMENT",484807127:"IFCEVAPORATOR",486154966:"IFCWINDOWSTANDARDCASE",629592764:"IFCLIGHTFIXTURE",630975310:"IFCUNITARYCONTROLELEMENT",635142910:"IFCCABLECARRIERFITTING",639361253:"IFCCOIL",647756555:"IFCFASTENER",707683696:"IFCFLOWSTORAGEDEVICE",738039164:"IFCPROTECTIVEDEVICE",753842376:"IFCBEAM",812556717:"IFCTANK",819412036:"IFCFILTER",843113511:"IFCCOLUMN",862014818:"IFCELECTRICDISTRIBUTIONBOARD",900683007:"IFCFOOTING",905975707:"IFCCOLUMNSTANDARDCASE",926996030:"IFCVOIDINGFEATURE",979691226:"IFCREINFORCINGBAR",987401354:"IFCFLOWSEGMENT",1003880860:"IFCELECTRICTIMECONTROL",1051757585:"IFCCABLEFITTING",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",1073191201:"IFCMEMBER",1095909175:"IFCBUILDINGELEMENTPROXY",1156407060:"IFCPLATESTANDARDCASE",1162798199:"IFCSWITCHINGDEVICE",1329646415:"IFCSHADINGDEVICE",1335981549:"IFCDISCRETEACCESSORY",1360408905:"IFCDUCTSILENCER",1404847402:"IFCSTACKTERMINAL",1426591983:"IFCFIRESUPPRESSIONTERMINAL",1437502449:"IFCMEDICALDEVICE",1509553395:"IFCFURNITURE",1529196076:"IFCSLAB",1620046519:"IFCTRANSPORTELEMENT",1634111441:"IFCAIRTERMINAL",1658829314:"IFCENERGYCONVERSIONDEVICE",1677625105:"IFCCIVILELEMENT",1687234759:"IFCPILE",1904799276:"IFCELECTRICAPPLIANCE",1911478936:"IFCMEMBERSTANDARDCASE",1945004755:"IFCDISTRIBUTIONELEMENT",1973544240:"IFCCOVERING",1999602285:"IFCSPACEHEATER",2016517767:"IFCROOF",2056796094:"IFCAIRTOAIRHEATRECOVERY",2058353004:"IFCFLOWCONTROLLER",2068733104:"IFCHUMIDIFIER",2176052936:"IFCJUNCTIONBOX",2188021234:"IFCFLOWMETER",2223149337:"IFCFLOWTERMINAL",2262370178:"IFCRAILING",2272882330:"IFCCONDENSER",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",2320036040:"IFCREINFORCINGMESH",2347447852:"IFCTENDONANCHOR",2391383451:"IFCVIBRATIONISOLATOR",2391406946:"IFCWALL",2474470126:"IFCMOTORCONNECTION",2769231204:"IFCVIRTUALELEMENT",2814081492:"IFCENGINE",2906023776:"IFCBEAMSTANDARDCASE",2938176219:"IFCBURNER",2979338954:"IFCBUILDINGELEMENTPART",3024970846:"IFCRAMP",3026737570:"IFCTUBEBUNDLE",3027962421:"IFCSLABSTANDARDCASE",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",3053780830:"IFCSANITARYTERMINAL",3079942009:"IFCOPENINGSTANDARDCASE",3087945054:"IFCALARM",3101698114:"IFCSURFACEFEATURE",3127900445:"IFCSLABELEMENTEDCASE",3132237377:"IFCFLOWMOVINGDEVICE",3171933400:"IFCPLATE",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",3242481149:"IFCDOORSTANDARDCASE",3283111854:"IFCRAMPFLIGHT",3296154744:"IFCCHIMNEY",3304561284:"IFCWINDOW",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",3319311131:"IFCHEATEXCHANGER",3415622556:"IFCFAN",3420628829:"IFCSOLARDEVICE",3493046030:"IFCGEOGRAPHICELEMENT",3495092785:"IFCCURTAINWALL",3508470533:"IFCFLOWTREATMENTDEVICE",3512223829:"IFCWALLSTANDARDCASE",3518393246:"IFCDUCTSEGMENT",3571504051:"IFCCOMPRESSOR",3588315303:"IFCOPENINGELEMENT",3612865200:"IFCPIPESEGMENT",3640358203:"IFCCOOLINGTOWER",3651124850:"IFCPROJECTIONELEMENT",3694346114:"IFCOUTLET",3747195512:"IFCEVAPORATIVECOOLER",3758799889:"IFCCABLECARRIERSEGMENT",3824725483:"IFCTENDON",3825984169:"IFCTRANSFORMER",3902619387:"IFCCHILLER",4074379575:"IFCDAMPER",4086658281:"IFCSENSOR",4123344466:"IFCELEMENTASSEMBLY",4136498852:"IFCCOOLEDBEAM",4156078855:"IFCWALLELEMENTEDCASE",4175244083:"IFCINTERCEPTOR",4207607924:"IFCVALVE",4217484030:"IFCCABLESEGMENT",4237592921:"IFCWASTETERMINAL",4252922144:"IFCSTAIRFLIGHT",4278956645:"IFCFLOWFITTING",4288193352:"IFCACTUATOR",4292641817:"IFCUNITARYEQUIPMENT",3009204131:"IFCGRID"};class YX{getAll(t,e){const n={},i=this.getCategories();for(let r=0;r<i.length;r++){const s=i[r],o=t.GetLineIDsWithType(e,s),a=o.size();for(let t=0;t<a;t++)n[o.get(t)]=s}return n}getCategories(){const t=Object.keys(ZX).map((t=>parseInt(t,10)));return t}}const qX={3821786052:"IFCACTIONREQUEST",2296667514:"IFCACTOR",3630933823:"IFCACTORROLE",4288193352:"IFCACTUATOR",2874132201:"IFCACTUATORTYPE",618182010:"IFCADDRESS",1635779807:"IFCADVANCEDBREP",2603310189:"IFCADVANCEDBREPWITHVOIDS",3406155212:"IFCADVANCEDFACE",1634111441:"IFCAIRTERMINAL",177149247:"IFCAIRTERMINALBOX",1411407467:"IFCAIRTERMINALBOXTYPE",3352864051:"IFCAIRTERMINALTYPE",2056796094:"IFCAIRTOAIRHEATRECOVERY",1871374353:"IFCAIRTOAIRHEATRECOVERYTYPE",3087945054:"IFCALARM",3001207471:"IFCALARMTYPE",325726236:"IFCALIGNMENT",749761778:"IFCALIGNMENT2DHORIZONTAL",3199563722:"IFCALIGNMENT2DHORIZONTALSEGMENT",2483840362:"IFCALIGNMENT2DSEGMENT",3379348081:"IFCALIGNMENT2DVERSEGCIRCULARARC",3239324667:"IFCALIGNMENT2DVERSEGLINE",4263986512:"IFCALIGNMENT2DVERSEGPARABOLICARC",53199957:"IFCALIGNMENT2DVERTICAL",2029264950:"IFCALIGNMENT2DVERTICALSEGMENT",3512275521:"IFCALIGNMENTCURVE",1674181508:"IFCANNOTATION",669184980:"IFCANNOTATIONFILLAREA",639542469:"IFCAPPLICATION",411424972:"IFCAPPLIEDVALUE",130549933:"IFCAPPROVAL",3869604511:"IFCAPPROVALRELATIONSHIP",3798115385:"IFCARBITRARYCLOSEDPROFILEDEF",1310608509:"IFCARBITRARYOPENPROFILEDEF",2705031697:"IFCARBITRARYPROFILEDEFWITHVOIDS",3460190687:"IFCASSET",3207858831:"IFCASYMMETRICISHAPEPROFILEDEF",277319702:"IFCAUDIOVISUALAPPLIANCE",1532957894:"IFCAUDIOVISUALAPPLIANCETYPE",4261334040:"IFCAXIS1PLACEMENT",3125803723:"IFCAXIS2PLACEMENT2D",2740243338:"IFCAXIS2PLACEMENT3D",1967976161:"IFCBSPLINECURVE",2461110595:"IFCBSPLINECURVEWITHKNOTS",2887950389:"IFCBSPLINESURFACE",167062518:"IFCBSPLINESURFACEWITHKNOTS",753842376:"IFCBEAM",2906023776:"IFCBEAMSTANDARDCASE",819618141:"IFCBEAMTYPE",4196446775:"IFCBEARING",3649138523:"IFCBEARINGTYPE",616511568:"IFCBLOBTEXTURE",1334484129:"IFCBLOCK",32344328:"IFCBOILER",231477066:"IFCBOILERTYPE",3649129432:"IFCBOOLEANCLIPPINGRESULT",2736907675:"IFCBOOLEANRESULT",4037036970:"IFCBOUNDARYCONDITION",1136057603:"IFCBOUNDARYCURVE",1560379544:"IFCBOUNDARYEDGECONDITION",3367102660:"IFCBOUNDARYFACECONDITION",1387855156:"IFCBOUNDARYNODECONDITION",2069777674:"IFCBOUNDARYNODECONDITIONWARPING",1260505505:"IFCBOUNDEDCURVE",4182860854:"IFCBOUNDEDSURFACE",2581212453:"IFCBOUNDINGBOX",2713105998:"IFCBOXEDHALFSPACE",644574406:"IFCBRIDGE",963979645:"IFCBRIDGEPART",4031249490:"IFCBUILDING",3299480353:"IFCBUILDINGELEMENT",2979338954:"IFCBUILDINGELEMENTPART",39481116:"IFCBUILDINGELEMENTPARTTYPE",1095909175:"IFCBUILDINGELEMENTPROXY",1909888760:"IFCBUILDINGELEMENTPROXYTYPE",1950629157:"IFCBUILDINGELEMENTTYPE",3124254112:"IFCBUILDINGSTOREY",1177604601:"IFCBUILDINGSYSTEM",2938176219:"IFCBURNER",2188180465:"IFCBURNERTYPE",2898889636:"IFCCSHAPEPROFILEDEF",635142910:"IFCCABLECARRIERFITTING",395041908:"IFCCABLECARRIERFITTINGTYPE",3758799889:"IFCCABLECARRIERSEGMENT",3293546465:"IFCCABLECARRIERSEGMENTTYPE",1051757585:"IFCCABLEFITTING",2674252688:"IFCCABLEFITTINGTYPE",4217484030:"IFCCABLESEGMENT",1285652485:"IFCCABLESEGMENTTYPE",3999819293:"IFCCAISSONFOUNDATION",3203706013:"IFCCAISSONFOUNDATIONTYPE",1123145078:"IFCCARTESIANPOINT",574549367:"IFCCARTESIANPOINTLIST",1675464909:"IFCCARTESIANPOINTLIST2D",2059837836:"IFCCARTESIANPOINTLIST3D",59481748:"IFCCARTESIANTRANSFORMATIONOPERATOR",3749851601:"IFCCARTESIANTRANSFORMATIONOPERATOR2D",3486308946:"IFCCARTESIANTRANSFORMATIONOPERATOR2DNONUNIFORM",3331915920:"IFCCARTESIANTRANSFORMATIONOPERATOR3D",1416205885:"IFCCARTESIANTRANSFORMATIONOPERATOR3DNONUNIFORM",3150382593:"IFCCENTERLINEPROFILEDEF",3902619387:"IFCCHILLER",2951183804:"IFCCHILLERTYPE",3296154744:"IFCCHIMNEY",2197970202:"IFCCHIMNEYTYPE",2611217952:"IFCCIRCLE",2937912522:"IFCCIRCLEHOLLOWPROFILEDEF",1383045692:"IFCCIRCLEPROFILEDEF",1062206242:"IFCCIRCULARARCSEGMENT2D",1677625105:"IFCCIVILELEMENT",3893394355:"IFCCIVILELEMENTTYPE",747523909:"IFCCLASSIFICATION",647927063:"IFCCLASSIFICATIONREFERENCE",2205249479:"IFCCLOSEDSHELL",639361253:"IFCCOIL",2301859152:"IFCCOILTYPE",776857604:"IFCCOLOURRGB",3285139300:"IFCCOLOURRGBLIST",3264961684:"IFCCOLOURSPECIFICATION",843113511:"IFCCOLUMN",905975707:"IFCCOLUMNSTANDARDCASE",300633059:"IFCCOLUMNTYPE",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",400855858:"IFCCOMMUNICATIONSAPPLIANCETYPE",2542286263:"IFCCOMPLEXPROPERTY",3875453745:"IFCCOMPLEXPROPERTYTEMPLATE",3732776249:"IFCCOMPOSITECURVE",15328376:"IFCCOMPOSITECURVEONSURFACE",2485617015:"IFCCOMPOSITECURVESEGMENT",1485152156:"IFCCOMPOSITEPROFILEDEF",3571504051:"IFCCOMPRESSOR",3850581409:"IFCCOMPRESSORTYPE",2272882330:"IFCCONDENSER",2816379211:"IFCCONDENSERTYPE",2510884976:"IFCCONIC",370225590:"IFCCONNECTEDFACESET",1981873012:"IFCCONNECTIONCURVEGEOMETRY",2859738748:"IFCCONNECTIONGEOMETRY",45288368:"IFCCONNECTIONPOINTECCENTRICITY",2614616156:"IFCCONNECTIONPOINTGEOMETRY",2732653382:"IFCCONNECTIONSURFACEGEOMETRY",775493141:"IFCCONNECTIONVOLUMEGEOMETRY",1959218052:"IFCCONSTRAINT",3898045240:"IFCCONSTRUCTIONEQUIPMENTRESOURCE",2185764099:"IFCCONSTRUCTIONEQUIPMENTRESOURCETYPE",1060000209:"IFCCONSTRUCTIONMATERIALRESOURCE",4105962743:"IFCCONSTRUCTIONMATERIALRESOURCETYPE",488727124:"IFCCONSTRUCTIONPRODUCTRESOURCE",1525564444:"IFCCONSTRUCTIONPRODUCTRESOURCETYPE",2559216714:"IFCCONSTRUCTIONRESOURCE",2574617495:"IFCCONSTRUCTIONRESOURCETYPE",3419103109:"IFCCONTEXT",3050246964:"IFCCONTEXTDEPENDENTUNIT",3293443760:"IFCCONTROL",25142252:"IFCCONTROLLER",578613899:"IFCCONTROLLERTYPE",2889183280:"IFCCONVERSIONBASEDUNIT",2713554722:"IFCCONVERSIONBASEDUNITWITHOFFSET",4136498852:"IFCCOOLEDBEAM",335055490:"IFCCOOLEDBEAMTYPE",3640358203:"IFCCOOLINGTOWER",2954562838:"IFCCOOLINGTOWERTYPE",1785450214:"IFCCOORDINATEOPERATION",1466758467:"IFCCOORDINATEREFERENCESYSTEM",3895139033:"IFCCOSTITEM",1419761937:"IFCCOSTSCHEDULE",602808272:"IFCCOSTVALUE",1973544240:"IFCCOVERING",1916426348:"IFCCOVERINGTYPE",3295246426:"IFCCREWRESOURCE",1815067380:"IFCCREWRESOURCETYPE",2506170314:"IFCCSGPRIMITIVE3D",2147822146:"IFCCSGSOLID",539742890:"IFCCURRENCYRELATIONSHIP",3495092785:"IFCCURTAINWALL",1457835157:"IFCCURTAINWALLTYPE",2601014836:"IFCCURVE",2827736869:"IFCCURVEBOUNDEDPLANE",2629017746:"IFCCURVEBOUNDEDSURFACE",1186437898:"IFCCURVESEGMENT2D",3800577675:"IFCCURVESTYLE",1105321065:"IFCCURVESTYLEFONT",2367409068:"IFCCURVESTYLEFONTANDSCALING",3510044353:"IFCCURVESTYLEFONTPATTERN",1213902940:"IFCCYLINDRICALSURFACE",4074379575:"IFCDAMPER",3961806047:"IFCDAMPERTYPE",3426335179:"IFCDEEPFOUNDATION",1306400036:"IFCDEEPFOUNDATIONTYPE",3632507154:"IFCDERIVEDPROFILEDEF",1765591967:"IFCDERIVEDUNIT",1045800335:"IFCDERIVEDUNITELEMENT",2949456006:"IFCDIMENSIONALEXPONENTS",32440307:"IFCDIRECTION",1335981549:"IFCDISCRETEACCESSORY",2635815018:"IFCDISCRETEACCESSORYTYPE",1945343521:"IFCDISTANCEEXPRESSION",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",1599208980:"IFCDISTRIBUTIONCHAMBERELEMENTTYPE",562808652:"IFCDISTRIBUTIONCIRCUIT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",2063403501:"IFCDISTRIBUTIONCONTROLELEMENTTYPE",1945004755:"IFCDISTRIBUTIONELEMENT",3256556792:"IFCDISTRIBUTIONELEMENTTYPE",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",3849074793:"IFCDISTRIBUTIONFLOWELEMENTTYPE",3041715199:"IFCDISTRIBUTIONPORT",3205830791:"IFCDISTRIBUTIONSYSTEM",1154170062:"IFCDOCUMENTINFORMATION",770865208:"IFCDOCUMENTINFORMATIONRELATIONSHIP",3732053477:"IFCDOCUMENTREFERENCE",395920057:"IFCDOOR",2963535650:"IFCDOORLININGPROPERTIES",1714330368:"IFCDOORPANELPROPERTIES",3242481149:"IFCDOORSTANDARDCASE",526551008:"IFCDOORSTYLE",2323601079:"IFCDOORTYPE",445594917:"IFCDRAUGHTINGPREDEFINEDCOLOUR",4006246654:"IFCDRAUGHTINGPREDEFINEDCURVEFONT",342316401:"IFCDUCTFITTING",869906466:"IFCDUCTFITTINGTYPE",3518393246:"IFCDUCTSEGMENT",3760055223:"IFCDUCTSEGMENTTYPE",1360408905:"IFCDUCTSILENCER",2030761528:"IFCDUCTSILENCERTYPE",3900360178:"IFCEDGE",476780140:"IFCEDGECURVE",1472233963:"IFCEDGELOOP",1904799276:"IFCELECTRICAPPLIANCE",663422040:"IFCELECTRICAPPLIANCETYPE",862014818:"IFCELECTRICDISTRIBUTIONBOARD",2417008758:"IFCELECTRICDISTRIBUTIONBOARDTYPE",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",3277789161:"IFCELECTRICFLOWSTORAGEDEVICETYPE",264262732:"IFCELECTRICGENERATOR",1534661035:"IFCELECTRICGENERATORTYPE",402227799:"IFCELECTRICMOTOR",1217240411:"IFCELECTRICMOTORTYPE",1003880860:"IFCELECTRICTIMECONTROL",712377611:"IFCELECTRICTIMECONTROLTYPE",1758889154:"IFCELEMENT",4123344466:"IFCELEMENTASSEMBLY",2397081782:"IFCELEMENTASSEMBLYTYPE",1623761950:"IFCELEMENTCOMPONENT",2590856083:"IFCELEMENTCOMPONENTTYPE",1883228015:"IFCELEMENTQUANTITY",339256511:"IFCELEMENTTYPE",2777663545:"IFCELEMENTARYSURFACE",1704287377:"IFCELLIPSE",2835456948:"IFCELLIPSEPROFILEDEF",1658829314:"IFCENERGYCONVERSIONDEVICE",2107101300:"IFCENERGYCONVERSIONDEVICETYPE",2814081492:"IFCENGINE",132023988:"IFCENGINETYPE",3747195512:"IFCEVAPORATIVECOOLER",3174744832:"IFCEVAPORATIVECOOLERTYPE",484807127:"IFCEVAPORATOR",3390157468:"IFCEVAPORATORTYPE",4148101412:"IFCEVENT",211053100:"IFCEVENTTIME",4024345920:"IFCEVENTTYPE",297599258:"IFCEXTENDEDPROPERTIES",4294318154:"IFCEXTERNALINFORMATION",3200245327:"IFCEXTERNALREFERENCE",1437805879:"IFCEXTERNALREFERENCERELATIONSHIP",1209101575:"IFCEXTERNALSPATIALELEMENT",2853485674:"IFCEXTERNALSPATIALSTRUCTUREELEMENT",2242383968:"IFCEXTERNALLYDEFINEDHATCHSTYLE",1040185647:"IFCEXTERNALLYDEFINEDSURFACESTYLE",3548104201:"IFCEXTERNALLYDEFINEDTEXTFONT",477187591:"IFCEXTRUDEDAREASOLID",2804161546:"IFCEXTRUDEDAREASOLIDTAPERED",2556980723:"IFCFACE",2047409740:"IFCFACEBASEDSURFACEMODEL",1809719519:"IFCFACEBOUND",803316827:"IFCFACEOUTERBOUND",3008276851:"IFCFACESURFACE",807026263:"IFCFACETEDBREP",3737207727:"IFCFACETEDBREPWITHVOIDS",24185140:"IFCFACILITY",1310830890:"IFCFACILITYPART",4219587988:"IFCFAILURECONNECTIONCONDITION",3415622556:"IFCFAN",346874300:"IFCFANTYPE",647756555:"IFCFASTENER",2489546625:"IFCFASTENERTYPE",2827207264:"IFCFEATUREELEMENT",2143335405:"IFCFEATUREELEMENTADDITION",1287392070:"IFCFEATUREELEMENTSUBTRACTION",738692330:"IFCFILLAREASTYLE",374418227:"IFCFILLAREASTYLEHATCHING",315944413:"IFCFILLAREASTYLETILES",819412036:"IFCFILTER",1810631287:"IFCFILTERTYPE",1426591983:"IFCFIRESUPPRESSIONTERMINAL",4222183408:"IFCFIRESUPPRESSIONTERMINALTYPE",2652556860:"IFCFIXEDREFERENCESWEPTAREASOLID",2058353004:"IFCFLOWCONTROLLER",3907093117:"IFCFLOWCONTROLLERTYPE",4278956645:"IFCFLOWFITTING",3198132628:"IFCFLOWFITTINGTYPE",182646315:"IFCFLOWINSTRUMENT",4037862832:"IFCFLOWINSTRUMENTTYPE",2188021234:"IFCFLOWMETER",3815607619:"IFCFLOWMETERTYPE",3132237377:"IFCFLOWMOVINGDEVICE",1482959167:"IFCFLOWMOVINGDEVICETYPE",987401354:"IFCFLOWSEGMENT",1834744321:"IFCFLOWSEGMENTTYPE",707683696:"IFCFLOWSTORAGEDEVICE",1339347760:"IFCFLOWSTORAGEDEVICETYPE",2223149337:"IFCFLOWTERMINAL",2297155007:"IFCFLOWTERMINALTYPE",3508470533:"IFCFLOWTREATMENTDEVICE",3009222698:"IFCFLOWTREATMENTDEVICETYPE",900683007:"IFCFOOTING",1893162501:"IFCFOOTINGTYPE",263784265:"IFCFURNISHINGELEMENT",4238390223:"IFCFURNISHINGELEMENTTYPE",1509553395:"IFCFURNITURE",1268542332:"IFCFURNITURETYPE",3493046030:"IFCGEOGRAPHICELEMENT",4095422895:"IFCGEOGRAPHICELEMENTTYPE",987898635:"IFCGEOMETRICCURVESET",3448662350:"IFCGEOMETRICREPRESENTATIONCONTEXT",2453401579:"IFCGEOMETRICREPRESENTATIONITEM",4142052618:"IFCGEOMETRICREPRESENTATIONSUBCONTEXT",3590301190:"IFCGEOMETRICSET",3009204131:"IFCGRID",852622518:"IFCGRIDAXIS",178086475:"IFCGRIDPLACEMENT",2706460486:"IFCGROUP",812098782:"IFCHALFSPACESOLID",3319311131:"IFCHEATEXCHANGER",1251058090:"IFCHEATEXCHANGERTYPE",2068733104:"IFCHUMIDIFIER",1806887404:"IFCHUMIDIFIERTYPE",1484403080:"IFCISHAPEPROFILEDEF",3905492369:"IFCIMAGETEXTURE",3570813810:"IFCINDEXEDCOLOURMAP",2571569899:"IFCINDEXEDPOLYCURVE",178912537:"IFCINDEXEDPOLYGONALFACE",2294589976:"IFCINDEXEDPOLYGONALFACEWITHVOIDS",1437953363:"IFCINDEXEDTEXTUREMAP",2133299955:"IFCINDEXEDTRIANGLETEXTUREMAP",4175244083:"IFCINTERCEPTOR",3946677679:"IFCINTERCEPTORTYPE",3113134337:"IFCINTERSECTIONCURVE",2391368822:"IFCINVENTORY",3741457305:"IFCIRREGULARTIMESERIES",3020489413:"IFCIRREGULARTIMESERIESVALUE",2176052936:"IFCJUNCTIONBOX",4288270099:"IFCJUNCTIONBOXTYPE",572779678:"IFCLSHAPEPROFILEDEF",3827777499:"IFCLABORRESOURCE",428585644:"IFCLABORRESOURCETYPE",1585845231:"IFCLAGTIME",76236018:"IFCLAMP",1051575348:"IFCLAMPTYPE",2655187982:"IFCLIBRARYINFORMATION",3452421091:"IFCLIBRARYREFERENCE",4162380809:"IFCLIGHTDISTRIBUTIONDATA",629592764:"IFCLIGHTFIXTURE",1161773419:"IFCLIGHTFIXTURETYPE",1566485204:"IFCLIGHTINTENSITYDISTRIBUTION",1402838566:"IFCLIGHTSOURCE",125510826:"IFCLIGHTSOURCEAMBIENT",2604431987:"IFCLIGHTSOURCEDIRECTIONAL",4266656042:"IFCLIGHTSOURCEGONIOMETRIC",1520743889:"IFCLIGHTSOURCEPOSITIONAL",3422422726:"IFCLIGHTSOURCESPOT",1281925730:"IFCLINE",3092502836:"IFCLINESEGMENT2D",388784114:"IFCLINEARPLACEMENT",1154579445:"IFCLINEARPOSITIONINGELEMENT",2624227202:"IFCLOCALPLACEMENT",1008929658:"IFCLOOP",1425443689:"IFCMANIFOLDSOLIDBREP",3057273783:"IFCMAPCONVERSION",2347385850:"IFCMAPPEDITEM",1838606355:"IFCMATERIAL",1847130766:"IFCMATERIALCLASSIFICATIONRELATIONSHIP",3708119e3:"IFCMATERIALCONSTITUENT",2852063980:"IFCMATERIALCONSTITUENTSET",760658860:"IFCMATERIALDEFINITION",2022407955:"IFCMATERIALDEFINITIONREPRESENTATION",248100487:"IFCMATERIALLAYER",3303938423:"IFCMATERIALLAYERSET",1303795690:"IFCMATERIALLAYERSETUSAGE",1847252529:"IFCMATERIALLAYERWITHOFFSETS",2199411900:"IFCMATERIALLIST",2235152071:"IFCMATERIALPROFILE",164193824:"IFCMATERIALPROFILESET",3079605661:"IFCMATERIALPROFILESETUSAGE",3404854881:"IFCMATERIALPROFILESETUSAGETAPERING",552965576:"IFCMATERIALPROFILEWITHOFFSETS",3265635763:"IFCMATERIALPROPERTIES",853536259:"IFCMATERIALRELATIONSHIP",1507914824:"IFCMATERIALUSAGEDEFINITION",2597039031:"IFCMEASUREWITHUNIT",377706215:"IFCMECHANICALFASTENER",2108223431:"IFCMECHANICALFASTENERTYPE",1437502449:"IFCMEDICALDEVICE",1114901282:"IFCMEDICALDEVICETYPE",1073191201:"IFCMEMBER",1911478936:"IFCMEMBERSTANDARDCASE",3181161470:"IFCMEMBERTYPE",3368373690:"IFCMETRIC",2998442950:"IFCMIRROREDPROFILEDEF",2706619895:"IFCMONETARYUNIT",2474470126:"IFCMOTORCONNECTION",977012517:"IFCMOTORCONNECTIONTYPE",1918398963:"IFCNAMEDUNIT",3888040117:"IFCOBJECT",219451334:"IFCOBJECTDEFINITION",3701648758:"IFCOBJECTPLACEMENT",2251480897:"IFCOBJECTIVE",4143007308:"IFCOCCUPANT",590820931:"IFCOFFSETCURVE",3388369263:"IFCOFFSETCURVE2D",3505215534:"IFCOFFSETCURVE3D",2485787929:"IFCOFFSETCURVEBYDISTANCES",2665983363:"IFCOPENSHELL",3588315303:"IFCOPENINGELEMENT",3079942009:"IFCOPENINGSTANDARDCASE",4251960020:"IFCORGANIZATION",1411181986:"IFCORGANIZATIONRELATIONSHIP",643959842:"IFCORIENTATIONEXPRESSION",1029017970:"IFCORIENTEDEDGE",144952367:"IFCOUTERBOUNDARYCURVE",3694346114:"IFCOUTLET",2837617999:"IFCOUTLETTYPE",1207048766:"IFCOWNERHISTORY",2529465313:"IFCPARAMETERIZEDPROFILEDEF",2519244187:"IFCPATH",1682466193:"IFCPCURVE",2382730787:"IFCPERFORMANCEHISTORY",3566463478:"IFCPERMEABLECOVERINGPROPERTIES",3327091369:"IFCPERMIT",2077209135:"IFCPERSON",101040310:"IFCPERSONANDORGANIZATION",3021840470:"IFCPHYSICALCOMPLEXQUANTITY",2483315170:"IFCPHYSICALQUANTITY",2226359599:"IFCPHYSICALSIMPLEQUANTITY",1687234759:"IFCPILE",1158309216:"IFCPILETYPE",310824031:"IFCPIPEFITTING",804291784:"IFCPIPEFITTINGTYPE",3612865200:"IFCPIPESEGMENT",4231323485:"IFCPIPESEGMENTTYPE",597895409:"IFCPIXELTEXTURE",2004835150:"IFCPLACEMENT",603570806:"IFCPLANARBOX",1663979128:"IFCPLANAREXTENT",220341763:"IFCPLANE",3171933400:"IFCPLATE",1156407060:"IFCPLATESTANDARDCASE",4017108033:"IFCPLATETYPE",2067069095:"IFCPOINT",4022376103:"IFCPOINTONCURVE",1423911732:"IFCPOINTONSURFACE",2924175390:"IFCPOLYLOOP",2775532180:"IFCPOLYGONALBOUNDEDHALFSPACE",2839578677:"IFCPOLYGONALFACESET",3724593414:"IFCPOLYLINE",3740093272:"IFCPORT",1946335990:"IFCPOSITIONINGELEMENT",3355820592:"IFCPOSTALADDRESS",759155922:"IFCPREDEFINEDCOLOUR",2559016684:"IFCPREDEFINEDCURVEFONT",3727388367:"IFCPREDEFINEDITEM",3778827333:"IFCPREDEFINEDPROPERTIES",3967405729:"IFCPREDEFINEDPROPERTYSET",1775413392:"IFCPREDEFINEDTEXTFONT",677532197:"IFCPRESENTATIONITEM",2022622350:"IFCPRESENTATIONLAYERASSIGNMENT",1304840413:"IFCPRESENTATIONLAYERWITHSTYLE",3119450353:"IFCPRESENTATIONSTYLE",2417041796:"IFCPRESENTATIONSTYLEASSIGNMENT",2744685151:"IFCPROCEDURE",569719735:"IFCPROCEDURETYPE",2945172077:"IFCPROCESS",4208778838:"IFCPRODUCT",673634403:"IFCPRODUCTDEFINITIONSHAPE",2095639259:"IFCPRODUCTREPRESENTATION",3958567839:"IFCPROFILEDEF",2802850158:"IFCPROFILEPROPERTIES",103090709:"IFCPROJECT",653396225:"IFCPROJECTLIBRARY",2904328755:"IFCPROJECTORDER",3843373140:"IFCPROJECTEDCRS",3651124850:"IFCPROJECTIONELEMENT",2598011224:"IFCPROPERTY",986844984:"IFCPROPERTYABSTRACTION",871118103:"IFCPROPERTYBOUNDEDVALUE",1680319473:"IFCPROPERTYDEFINITION",148025276:"IFCPROPERTYDEPENDENCYRELATIONSHIP",4166981789:"IFCPROPERTYENUMERATEDVALUE",3710013099:"IFCPROPERTYENUMERATION",2752243245:"IFCPROPERTYLISTVALUE",941946838:"IFCPROPERTYREFERENCEVALUE",1451395588:"IFCPROPERTYSET",3357820518:"IFCPROPERTYSETDEFINITION",492091185:"IFCPROPERTYSETTEMPLATE",3650150729:"IFCPROPERTYSINGLEVALUE",110355661:"IFCPROPERTYTABLEVALUE",3521284610:"IFCPROPERTYTEMPLATE",1482703590:"IFCPROPERTYTEMPLATEDEFINITION",738039164:"IFCPROTECTIVEDEVICE",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",655969474:"IFCPROTECTIVEDEVICETRIPPINGUNITTYPE",1842657554:"IFCPROTECTIVEDEVICETYPE",3219374653:"IFCPROXY",90941305:"IFCPUMP",2250791053:"IFCPUMPTYPE",2044713172:"IFCQUANTITYAREA",2093928680:"IFCQUANTITYCOUNT",931644368:"IFCQUANTITYLENGTH",2090586900:"IFCQUANTITYSET",3252649465:"IFCQUANTITYTIME",2405470396:"IFCQUANTITYVOLUME",825690147:"IFCQUANTITYWEIGHT",2262370178:"IFCRAILING",2893384427:"IFCRAILINGTYPE",3024970846:"IFCRAMP",3283111854:"IFCRAMPFLIGHT",2324767716:"IFCRAMPFLIGHTTYPE",1469900589:"IFCRAMPTYPE",1232101972:"IFCRATIONALBSPLINECURVEWITHKNOTS",683857671:"IFCRATIONALBSPLINESURFACEWITHKNOTS",2770003689:"IFCRECTANGLEHOLLOWPROFILEDEF",3615266464:"IFCRECTANGLEPROFILEDEF",2798486643:"IFCRECTANGULARPYRAMID",3454111270:"IFCRECTANGULARTRIMMEDSURFACE",3915482550:"IFCRECURRENCEPATTERN",2433181523:"IFCREFERENCE",4021432810:"IFCREFERENT",3413951693:"IFCREGULARTIMESERIES",1580146022:"IFCREINFORCEMENTBARPROPERTIES",3765753017:"IFCREINFORCEMENTDEFINITIONPROPERTIES",979691226:"IFCREINFORCINGBAR",2572171363:"IFCREINFORCINGBARTYPE",3027567501:"IFCREINFORCINGELEMENT",964333572:"IFCREINFORCINGELEMENTTYPE",2320036040:"IFCREINFORCINGMESH",2310774935:"IFCREINFORCINGMESHTYPE",160246688:"IFCRELAGGREGATES",3939117080:"IFCRELASSIGNS",1683148259:"IFCRELASSIGNSTOACTOR",2495723537:"IFCRELASSIGNSTOCONTROL",1307041759:"IFCRELASSIGNSTOGROUP",1027710054:"IFCRELASSIGNSTOGROUPBYFACTOR",4278684876:"IFCRELASSIGNSTOPROCESS",2857406711:"IFCRELASSIGNSTOPRODUCT",205026976:"IFCRELASSIGNSTORESOURCE",1865459582:"IFCRELASSOCIATES",4095574036:"IFCRELASSOCIATESAPPROVAL",919958153:"IFCRELASSOCIATESCLASSIFICATION",2728634034:"IFCRELASSOCIATESCONSTRAINT",982818633:"IFCRELASSOCIATESDOCUMENT",3840914261:"IFCRELASSOCIATESLIBRARY",2655215786:"IFCRELASSOCIATESMATERIAL",826625072:"IFCRELCONNECTS",1204542856:"IFCRELCONNECTSELEMENTS",3945020480:"IFCRELCONNECTSPATHELEMENTS",4201705270:"IFCRELCONNECTSPORTTOELEMENT",3190031847:"IFCRELCONNECTSPORTS",2127690289:"IFCRELCONNECTSSTRUCTURALACTIVITY",1638771189:"IFCRELCONNECTSSTRUCTURALMEMBER",504942748:"IFCRELCONNECTSWITHECCENTRICITY",3678494232:"IFCRELCONNECTSWITHREALIZINGELEMENTS",3242617779:"IFCRELCONTAINEDINSPATIALSTRUCTURE",886880790:"IFCRELCOVERSBLDGELEMENTS",2802773753:"IFCRELCOVERSSPACES",2565941209:"IFCRELDECLARES",2551354335:"IFCRELDECOMPOSES",693640335:"IFCRELDEFINES",1462361463:"IFCRELDEFINESBYOBJECT",4186316022:"IFCRELDEFINESBYPROPERTIES",307848117:"IFCRELDEFINESBYTEMPLATE",781010003:"IFCRELDEFINESBYTYPE",3940055652:"IFCRELFILLSELEMENT",279856033:"IFCRELFLOWCONTROLELEMENTS",427948657:"IFCRELINTERFERESELEMENTS",3268803585:"IFCRELNESTS",1441486842:"IFCRELPOSITIONS",750771296:"IFCRELPROJECTSELEMENT",1245217292:"IFCRELREFERENCEDINSPATIALSTRUCTURE",4122056220:"IFCRELSEQUENCE",366585022:"IFCRELSERVICESBUILDINGS",3451746338:"IFCRELSPACEBOUNDARY",3523091289:"IFCRELSPACEBOUNDARY1STLEVEL",1521410863:"IFCRELSPACEBOUNDARY2NDLEVEL",1401173127:"IFCRELVOIDSELEMENT",478536968:"IFCRELATIONSHIP",816062949:"IFCREPARAMETRISEDCOMPOSITECURVESEGMENT",1076942058:"IFCREPRESENTATION",3377609919:"IFCREPRESENTATIONCONTEXT",3008791417:"IFCREPRESENTATIONITEM",1660063152:"IFCREPRESENTATIONMAP",2914609552:"IFCRESOURCE",2943643501:"IFCRESOURCEAPPROVALRELATIONSHIP",1608871552:"IFCRESOURCECONSTRAINTRELATIONSHIP",2439245199:"IFCRESOURCELEVELRELATIONSHIP",1042787934:"IFCRESOURCETIME",1856042241:"IFCREVOLVEDAREASOLID",3243963512:"IFCREVOLVEDAREASOLIDTAPERED",4158566097:"IFCRIGHTCIRCULARCONE",3626867408:"IFCRIGHTCIRCULARCYLINDER",2016517767:"IFCROOF",2781568857:"IFCROOFTYPE",2341007311:"IFCROOT",2778083089:"IFCROUNDEDRECTANGLEPROFILEDEF",448429030:"IFCSIUNIT",3053780830:"IFCSANITARYTERMINAL",1768891740:"IFCSANITARYTERMINALTYPE",1054537805:"IFCSCHEDULINGTIME",2157484638:"IFCSEAMCURVE",2042790032:"IFCSECTIONPROPERTIES",4165799628:"IFCSECTIONREINFORCEMENTPROPERTIES",1862484736:"IFCSECTIONEDSOLID",1290935644:"IFCSECTIONEDSOLIDHORIZONTAL",1509187699:"IFCSECTIONEDSPINE",4086658281:"IFCSENSOR",1783015770:"IFCSENSORTYPE",1329646415:"IFCSHADINGDEVICE",4074543187:"IFCSHADINGDEVICETYPE",867548509:"IFCSHAPEASPECT",3982875396:"IFCSHAPEMODEL",4240577450:"IFCSHAPEREPRESENTATION",4124623270:"IFCSHELLBASEDSURFACEMODEL",3692461612:"IFCSIMPLEPROPERTY",3663146110:"IFCSIMPLEPROPERTYTEMPLATE",4097777520:"IFCSITE",1529196076:"IFCSLAB",3127900445:"IFCSLABELEMENTEDCASE",3027962421:"IFCSLABSTANDARDCASE",2533589738:"IFCSLABTYPE",2609359061:"IFCSLIPPAGECONNECTIONCONDITION",3420628829:"IFCSOLARDEVICE",1072016465:"IFCSOLARDEVICETYPE",723233188:"IFCSOLIDMODEL",3856911033:"IFCSPACE",1999602285:"IFCSPACEHEATER",1305183839:"IFCSPACEHEATERTYPE",3812236995:"IFCSPACETYPE",1412071761:"IFCSPATIALELEMENT",710998568:"IFCSPATIALELEMENTTYPE",2706606064:"IFCSPATIALSTRUCTUREELEMENT",3893378262:"IFCSPATIALSTRUCTUREELEMENTTYPE",463610769:"IFCSPATIALZONE",2481509218:"IFCSPATIALZONETYPE",451544542:"IFCSPHERE",4015995234:"IFCSPHERICALSURFACE",1404847402:"IFCSTACKTERMINAL",3112655638:"IFCSTACKTERMINALTYPE",331165859:"IFCSTAIR",4252922144:"IFCSTAIRFLIGHT",1039846685:"IFCSTAIRFLIGHTTYPE",338393293:"IFCSTAIRTYPE",682877961:"IFCSTRUCTURALACTION",3544373492:"IFCSTRUCTURALACTIVITY",2515109513:"IFCSTRUCTURALANALYSISMODEL",1179482911:"IFCSTRUCTURALCONNECTION",2273995522:"IFCSTRUCTURALCONNECTIONCONDITION",1004757350:"IFCSTRUCTURALCURVEACTION",4243806635:"IFCSTRUCTURALCURVECONNECTION",214636428:"IFCSTRUCTURALCURVEMEMBER",2445595289:"IFCSTRUCTURALCURVEMEMBERVARYING",2757150158:"IFCSTRUCTURALCURVEREACTION",3136571912:"IFCSTRUCTURALITEM",1807405624:"IFCSTRUCTURALLINEARACTION",2162789131:"IFCSTRUCTURALLOAD",385403989:"IFCSTRUCTURALLOADCASE",3478079324:"IFCSTRUCTURALLOADCONFIGURATION",1252848954:"IFCSTRUCTURALLOADGROUP",1595516126:"IFCSTRUCTURALLOADLINEARFORCE",609421318:"IFCSTRUCTURALLOADORRESULT",2668620305:"IFCSTRUCTURALLOADPLANARFORCE",2473145415:"IFCSTRUCTURALLOADSINGLEDISPLACEMENT",1973038258:"IFCSTRUCTURALLOADSINGLEDISPLACEMENTDISTORTION",1597423693:"IFCSTRUCTURALLOADSINGLEFORCE",1190533807:"IFCSTRUCTURALLOADSINGLEFORCEWARPING",2525727697:"IFCSTRUCTURALLOADSTATIC",3408363356:"IFCSTRUCTURALLOADTEMPERATURE",530289379:"IFCSTRUCTURALMEMBER",1621171031:"IFCSTRUCTURALPLANARACTION",2082059205:"IFCSTRUCTURALPOINTACTION",734778138:"IFCSTRUCTURALPOINTCONNECTION",1235345126:"IFCSTRUCTURALPOINTREACTION",3689010777:"IFCSTRUCTURALREACTION",2986769608:"IFCSTRUCTURALRESULTGROUP",3657597509:"IFCSTRUCTURALSURFACEACTION",1975003073:"IFCSTRUCTURALSURFACECONNECTION",3979015343:"IFCSTRUCTURALSURFACEMEMBER",2218152070:"IFCSTRUCTURALSURFACEMEMBERVARYING",603775116:"IFCSTRUCTURALSURFACEREACTION",2830218821:"IFCSTYLEMODEL",3958052878:"IFCSTYLEDITEM",3049322572:"IFCSTYLEDREPRESENTATION",148013059:"IFCSUBCONTRACTRESOURCE",4095615324:"IFCSUBCONTRACTRESOURCETYPE",2233826070:"IFCSUBEDGE",2513912981:"IFCSURFACE",699246055:"IFCSURFACECURVE",2028607225:"IFCSURFACECURVESWEPTAREASOLID",3101698114:"IFCSURFACEFEATURE",2809605785:"IFCSURFACEOFLINEAREXTRUSION",4124788165:"IFCSURFACEOFREVOLUTION",2934153892:"IFCSURFACEREINFORCEMENTAREA",1300840506:"IFCSURFACESTYLE",3303107099:"IFCSURFACESTYLELIGHTING",1607154358:"IFCSURFACESTYLEREFRACTION",1878645084:"IFCSURFACESTYLERENDERING",846575682:"IFCSURFACESTYLESHADING",1351298697:"IFCSURFACESTYLEWITHTEXTURES",626085974:"IFCSURFACETEXTURE",2247615214:"IFCSWEPTAREASOLID",1260650574:"IFCSWEPTDISKSOLID",1096409881:"IFCSWEPTDISKSOLIDPOLYGONAL",230924584:"IFCSWEPTSURFACE",1162798199:"IFCSWITCHINGDEVICE",2315554128:"IFCSWITCHINGDEVICETYPE",2254336722:"IFCSYSTEM",413509423:"IFCSYSTEMFURNITUREELEMENT",1580310250:"IFCSYSTEMFURNITUREELEMENTTYPE",3071757647:"IFCTSHAPEPROFILEDEF",985171141:"IFCTABLE",2043862942:"IFCTABLECOLUMN",531007025:"IFCTABLEROW",812556717:"IFCTANK",5716631:"IFCTANKTYPE",3473067441:"IFCTASK",1549132990:"IFCTASKTIME",2771591690:"IFCTASKTIMERECURRING",3206491090:"IFCTASKTYPE",912023232:"IFCTELECOMADDRESS",3824725483:"IFCTENDON",2347447852:"IFCTENDONANCHOR",3081323446:"IFCTENDONANCHORTYPE",3663046924:"IFCTENDONCONDUIT",2281632017:"IFCTENDONCONDUITTYPE",2415094496:"IFCTENDONTYPE",2387106220:"IFCTESSELLATEDFACESET",901063453:"IFCTESSELLATEDITEM",4282788508:"IFCTEXTLITERAL",3124975700:"IFCTEXTLITERALWITHEXTENT",1447204868:"IFCTEXTSTYLE",1983826977:"IFCTEXTSTYLEFONTMODEL",2636378356:"IFCTEXTSTYLEFORDEFINEDFONT",1640371178:"IFCTEXTSTYLETEXTMODEL",280115917:"IFCTEXTURECOORDINATE",1742049831:"IFCTEXTURECOORDINATEGENERATOR",2552916305:"IFCTEXTUREMAP",1210645708:"IFCTEXTUREVERTEX",3611470254:"IFCTEXTUREVERTEXLIST",1199560280:"IFCTIMEPERIOD",3101149627:"IFCTIMESERIES",581633288:"IFCTIMESERIESVALUE",1377556343:"IFCTOPOLOGICALREPRESENTATIONITEM",1735638870:"IFCTOPOLOGYREPRESENTATION",1935646853:"IFCTOROIDALSURFACE",3825984169:"IFCTRANSFORMER",1692211062:"IFCTRANSFORMERTYPE",2595432518:"IFCTRANSITIONCURVESEGMENT2D",1620046519:"IFCTRANSPORTELEMENT",2097647324:"IFCTRANSPORTELEMENTTYPE",2715220739:"IFCTRAPEZIUMPROFILEDEF",2916149573:"IFCTRIANGULATEDFACESET",1229763772:"IFCTRIANGULATEDIRREGULARNETWORK",3593883385:"IFCTRIMMEDCURVE",3026737570:"IFCTUBEBUNDLE",1600972822:"IFCTUBEBUNDLETYPE",1628702193:"IFCTYPEOBJECT",3736923433:"IFCTYPEPROCESS",2347495698:"IFCTYPEPRODUCT",3698973494:"IFCTYPERESOURCE",427810014:"IFCUSHAPEPROFILEDEF",180925521:"IFCUNITASSIGNMENT",630975310:"IFCUNITARYCONTROLELEMENT",3179687236:"IFCUNITARYCONTROLELEMENTTYPE",4292641817:"IFCUNITARYEQUIPMENT",1911125066:"IFCUNITARYEQUIPMENTTYPE",4207607924:"IFCVALVE",728799441:"IFCVALVETYPE",1417489154:"IFCVECTOR",2799835756:"IFCVERTEX",2759199220:"IFCVERTEXLOOP",1907098498:"IFCVERTEXPOINT",1530820697:"IFCVIBRATIONDAMPER",3956297820:"IFCVIBRATIONDAMPERTYPE",2391383451:"IFCVIBRATIONISOLATOR",3313531582:"IFCVIBRATIONISOLATORTYPE",2769231204:"IFCVIRTUALELEMENT",891718957:"IFCVIRTUALGRIDINTERSECTION",926996030:"IFCVOIDINGFEATURE",2391406946:"IFCWALL",4156078855:"IFCWALLELEMENTEDCASE",3512223829:"IFCWALLSTANDARDCASE",1898987631:"IFCWALLTYPE",4237592921:"IFCWASTETERMINAL",1133259667:"IFCWASTETERMINALTYPE",3304561284:"IFCWINDOW",336235671:"IFCWINDOWLININGPROPERTIES",512836454:"IFCWINDOWPANELPROPERTIES",486154966:"IFCWINDOWSTANDARDCASE",1299126871:"IFCWINDOWSTYLE",4009809668:"IFCWINDOWTYPE",4088093105:"IFCWORKCALENDAR",1028945134:"IFCWORKCONTROL",4218914973:"IFCWORKPLAN",3342526732:"IFCWORKSCHEDULE",1236880293:"IFCWORKTIME",2543172580:"IFCZSHAPEPROFILEDEF",1033361043:"IFCZONE"},XX=new Set([1123145078,574549367,1675464909,2059837836,3798115385,32440307,3125803723,3207858831,2740243338,2624227202,4240577450,3615266464,3724593414,220341763,477187591,1878645084,1300840506,3303107099,1607154358,1878645084,846575682,1351298697,2417041796,3049322572,3331915920,1416205885,776857604,3285139300,3958052878,2827736869,2732653382,673634403,3448662350,4142052618,2924175390,803316827,2556980723,1809719519,2205249479,807026263,3737207727,1660063152,2347385850,3940055652,2705031697,3732776249,2485617015,2611217952,1704287377,2937912522,2770003689,1281925730,1484403080,3448662350,4142052618,3800577675,4006246654,3590301190,1383045692,2775532180,2047409740,370225590,3593883385,2665983363,4124623270,812098782,3649129432,987898635,1105321065,3510044353,1635779807,2603310189,3406155212,1310608509,4261334040,2736907675,3649129432,1136057603,1260505505,4182860854,2713105998,2898889636,59481748,3749851601,3486308946,3150382593,1062206242,3264961684,15328376,1485152156,370225590,1981873012,2859738748,45288368,2614616156,2732653382,775493141,2147822146,2601014836,2629017746,1186437898,2367409068,1213902940,3632507154,3900360178,476780140,1472233963,2804161546,3008276851,738692330,374418227,315944413,3905492369,3570813810,2571569899,178912537,2294589976,1437953363,2133299955,572779678,3092502836,388784114,2624227202,1425443689,3057273783,2347385850,1682466193,2519244187,2839578677,3958567839,2513912981,2830218821,427810014]);class KX{constructor(){this.loadProgress=new Mx,this.propertiesSerialized=new Mx,this._progress=0}async export(t,e){const n=await this.getAllGeometriesIDs(e,t);let i={};i.coordinationMatrix=t.GetCoordinationMatrix(e);const r=await t.GetAllLines(e),s=r.size();this._progress=.1;let o=0;for(let a=0;a<s;a++){const l=r.get(a);if(!n.has(l)){try{i[l]=await t.GetLine(e,l)}catch(uJ){console.log("Properties of the element ".concat(l," could not be processed"))}o++}void 0!==this.size&&o>this.size&&(this.propertiesSerialized.trigger(i),i=null,i={},o=0),a/s>this._progress&&(this.loadProgress.trigger({progress:a,total:s}),this._progress+=.1)}this.propertiesSerialized.trigger(i),i=null}async getAllGeometriesIDs(t,e){const n=new Set,i=Array.from(XX);for(let r=0;r<i.length;r++){const s=i[r],o=await e.GetLineIDsWithType(t,s),a=o.size();for(let t=0;t<a;t++)n.add(o.get(t))}return n}}class QX{constructor(){this.floorProperties=[],this.itemsByFloor={}}async setupFloors(t,e){this.reset();const n=await this.getFloors(t);for(const i of n)await this.getFloorProperties(t,i,e),this.saveFloorRelations(i)}cleanUp(){this.floorProperties=[],this.itemsByFloor={}}reset(){this.floorProperties=[],this.itemsByFloor={}}async getFloorProperties(t,e,n){const i=e.expressID,r=t.properties,s=await r.getItemProperties(0,i,!1);s.SceneHeight=await this.getHeight(s,t,r,n),this.floorProperties.push(s)}async getHeight(t,e,n,i){const r=t.ObjectPlacement.value,s=e.GetCoordinationMatrix(0)[13]*i.factor,o=await n.getItemProperties(0,r,!0);return this.getPlacementHeight(o,i)+s}getPlacementHeight(t,e){var n,i;let r=0;const s=null===(i=null===(n=t.RelativePlacement)||void 0===n?void 0:n.Location)||void 0===i?void 0:i.Coordinates;return s&&(r+=s[2].value*e.complement*e.factor),t.PlacementRelTo&&(r+=this.getPlacementHeight(t.PlacementRelTo,e)),r}saveFloorRelations(t){for(const e of t.children)if(this.itemsByFloor[e.expressID]=t.expressID,e.children.length)for(const n of e.children)this.itemsByFloor[n.expressID]=t.expressID}async getFloors(t){return(await t.properties.getSpatialStructure(0)).children[0].children[0].children}}class JX{constructor(){this.factor=1,this.complement=1}apply(t){const e=this.getScaleMatrix().multiply(t);t.copy(e)}setUp(t){var e;this.factor=1;const n=this.getLengthUnits(t);"FOOT"===n.Name.value?this.factor=.3048:"MILLI"===(null===(e=n.Prefix)||void 0===e?void 0:e.value)&&(this.complement=.001)}getLengthUnits(t){const e=t.GetLineIDsWithType(0,gD).get(0),n=t.GetLine(0,e).Units[0].value;return t.GetLine(0,n)}getScaleMatrix(){return(new Ep).fromArray([this.factor,0,0,0,0,this.factor,0,0,0,0,this.factor,0,0,0,0,1])}}class $X extends Jg{constructor(){super(...arguments),this.fragments=[]}}class tK{getHelper(t){const e=new Zp;let n=0,i=0,r=0,s=0;for(const y of t){const t=y.attributes.position.array;for(let e=0;e<t.length;e+=3)n+=t[e],i+=t[e+1],r+=t[e+2],s++}s>0&&(n/=s,i/=s,r/=s);const o=new Vu(n,i,r);let a=new Vu,l=new Vu,h=new Vu,c=0,u=0,p=0,d=0,f=0,m=0,g=1e13;for(let y=0;y<15;y++){let e=new Vu;0===y&&(e=new Vu(1,0,0)),1===y&&(e=new Vu(1,0,1)),2===y&&(e=new Vu(1,1,0)),3===y&&(e=new Vu(1,1,1)),4===y&&(e=new Vu(0,1,1)),5===y&&(e=new Vu(1,0,.5)),6===y&&(e=new Vu(1,.5,0)),7===y&&(e=new Vu(1,1,.5)),8===y&&(e=new Vu(0,1,.5)),9===y&&(e=new Vu(.5,0,1)),10===y&&(e=new Vu(.5,1,0)),11===y&&(e=new Vu(.5,1,1)),12===y&&(e=new Vu(0,.5,1)),13===y&&(e=new Vu(.5,.5,1)),14===y&&(e=new Vu(1,.5,.5)),e.normalize();const n=new Vu(e.x,e.y,e.z);n.cross(new Vu(0,0,1));const i=new Vu(n.x,n.y,n.z);i.cross(e),e.normalize(),n.normalize(),i.normalize();let r=-1e10,s=-1e10,v=-1e10,_=1e10,T=1e10,E=1e10;for(const a of t){const t=a.attributes.position.array;for(let a=0;a<t.length;a+=3){const l=t[a],h=t[a+1],c=t[a+2],u=l-o.x,p=h-o.y,d=c-o.z,f=new Vu(u,p,d),m=e.dot(f),g=n.dot(f),y=i.dot(f);m>r&&(r=m),g>s&&(s=g),y>v&&(v=y),m<_&&(_=m),g<T&&(T=g),y<E&&(E=y)}}const x=r-_,b=s-T,I=v-E,w=x*b*I;w<g&&(g=w,a=e,l=n,h=i,c=x,u=b,p=I,d=(r+_)/2,f=(s+T)/2,m=(v+E)/2)}return o.x+=d*a.x,o.y+=d*a.y,o.z+=d*a.z,o.x+=f*l.x,o.y+=f*l.y,o.z+=f*l.z,o.x+=m*h.x,o.y+=m*h.y,o.z+=m*h.z,a=a.setLength(c),l=l.setLength(u),h=h.setLength(p),e.matrix=new Ep,e.matrix.set(a.x,a.y,a.z,0,l.x,l.y,l.z,0,h.x,h.y,h.z,0,o.x,o.y,o.z,1),e.matrix.transpose(),e}}class eK{constructor(t,e,n){this._categories={},this._model=new $X,this._ifcCategories=new YX,this._uniqueItems={},this._units=new JX,this._boundingBoxes={},this._transparentBoundingBoxes={},this._expressIDfragmentIDMap={},this._transform=new tK,this._propertyExporter=new KX,this._spatialTree=new QX,this._items=t,this._materials=e,this._settings=n}reset(){this._model=new $X,this._uniqueItems={},this._boundingBoxes={},this._transparentBoundingBoxes={}}cleanUp(){this._spatialTree.cleanUp(),this._categories={},this._model=new $X,this._ifcCategories=new YX,this._uniqueItems={},this._units=new JX,this._propertyExporter=new KX}setupCategories(t){this._categories=this._ifcCategories.getAll(t,0)}async generateFragmentData(t){return await this._units.setUp(t),await this._spatialTree.setupFloors(t,this._units),this.processAllFragmentsData(),this.processAllUniqueItems(),await this.saveModelData(t),this._model}async saveModelData(t){this._model.boundingBoxes=this._boundingBoxes,this._model.transparentBoundingBoxes=this._transparentBoundingBoxes,this._model.expressIDFragmentIDMap=this._expressIDfragmentIDMap,this._model.levelRelationships=this._spatialTree.itemsByFloor,this._model.floorsProperties=this._spatialTree.floorProperties,this._model.allTypes=qX,this._model.itemTypes=this._categories,this._model.coordinationMatrix=this.getCoordinationMatrix(t),this._model.properties=await this.getModelProperties(t)}getCoordinationMatrix(t){const e=t.GetCoordinationMatrix(0);return(new Ep).fromArray(e)}async getModelProperties(t){return this._settings.includeProperties?new Promise((e=>{this._propertyExporter.propertiesSerialized.on((t=>{e(t)})),this._propertyExporter.export(t,0)})):{}}processAllFragmentsData(){const t=Object.values(this._items);for(const e of t)this.processFragmentData(e)}processFragmentData(t){const e=t.instances[0].id,n=this._categories[e],i=1===t.instances.length,r=this._settings.instancedCategories.has(n),s=0===Object.keys(this._spatialTree.itemsByFloor).length;!i||r||s?this.processInstancedItems(t):this.processMergedItems(t)}processMergedItems(t){for(const e in t.geometriesByMaterial){const n=t.instances[0],i=this._categories[n.id],r=this._spatialTree.itemsByFloor[n.id];this.initializeItem(t,i,r,e),this.applyTransformToMergedGeometries(t,i,r,e)}}applyTransformToMergedGeometries(t,e,n,i){const r=t.geometriesByMaterial[i],s=t.instances[0];this._units.apply(s.matrix);for(const o of r)o.userData.id=s.id,this._uniqueItems[e][n][i].geoms.push(o),o.applyMatrix4(s.matrix)}initializeItem(t,e,n,i){this._uniqueItems[e]||(this._uniqueItems[e]={}),this._uniqueItems[e][n]||(this._uniqueItems[e][n]={}),this._uniqueItems[e][n][i]||(this._uniqueItems[e][n][i]={geoms:[],hasVoids:t.instances[0].hasVoids})}processInstancedItems(t){const e=this.createInstancedFragment(t);this.setFragmentInstances(t,e),e.mesh.updateMatrix(),this._model.fragments.push(e),this._model.add(e.mesh);const n=Object.keys(t.geometriesByMaterial).map((t=>this._materials[t])),i=this.areMatsTransparent(n)||t.instances[0].hasVoids,r=this.getBoxes(i),s=this._transform.getHelper([e.mesh.geometry]);for(let o=0;o<e.mesh.count;o++){const t=new Ep,n=new Zp;e.getInstance(o,t),n.applyMatrix4(s.matrix),n.applyMatrix4(t),n.updateMatrix();const i=e.getItemID(o,0);r[i]=n.matrix.elements,this._expressIDfragmentIDMap[i]=e.id}}getBoxes(t){return t?this._transparentBoundingBoxes:this._boundingBoxes}areMatsTransparent(t){for(const e of t)if(e.transparent)return!0;return!1}setFragmentInstances(t,e){for(let n=0;n<t.instances.length;n++){const i=t.instances[n];this._units.apply(i.matrix),e.setInstance(n,{ids:[i.id.toString()],transform:i.matrix})}}createInstancedFragment(t){const e=this.getMaterials(t),n=Object.values(t.geometriesByMaterial),i=OS.merge(n);return new CS(i,e,t.instances.length)}getMaterials(t){const e=Object.keys(t.geometriesByMaterial).map((t=>this._materials[t]));return e}processAllUniqueItems(){const t=Object.keys(this._uniqueItems);for(const e of t)for(const t in this._uniqueItems[e]){const n=parseInt(e,10),i=parseInt(t,10);void 0!==i&&void 0!==n&&this.processUniqueItem(n,i)}}processUniqueItem(t,e){const n=this._uniqueItems[t][e];if(!n)return;const i=Object.values(n),r=i.map((t=>t.geoms)),{buffer:s,ids:o}=this.processIDsAndBuffer(r),a=this.getUniqueItemMaterial(t,e),l={};let h=!1;for(const f of i){h=h||f.hasVoids;for(const t of f.geoms){const e=t.userData.id;l[e]||(l[e]=[]),l[e].push(t)}}const c=this.areMatsTransparent(a)||h,u=this.getBoxes(c);for(const f in l){const t=l[f],e=this._transform.getHelper(t);u[f]=e.matrix.elements}const p=OS.merge(r),d=this.newMergedFragment(p,s,a,o);this._model.fragments.push(d),this._model.add(d.mesh);for(const f in l)this._expressIDfragmentIDMap[f]=d.id}newMergedFragment(t,e,n,i){t.setAttribute("blockID",new gd(e,1));const r=new CS(t,n,1),s=Array.from(i).map((t=>t.toString()));return r.setInstance(0,{ids:s,transform:new Ep}),r}processBuffer(t,e){const n=new Uint32Array(e),i=this.getBufferTempData();for(const r of t)for(const t of r){this.updateBufferIDs(i,t);const e=t.attributes.position.count,r=i.currentIDs.get(t.userData.id);n.fill(r,i.offset,i.offset+e),i.offset+=e}return n}updateBufferIDs(t,e){t.currentIDs.has(e.userData.id)||t.currentIDs.set(e.userData.id,t.blockID++)}getBufferTempData(){return{currentIDs:new Map,offset:0,blockID:0}}processIDsAndBuffer(t){let e=0;const n=new Set;for(const i of t)for(const t of i)e+=t.attributes.position.count,n.add(t.userData.id);return{buffer:this.processBuffer(t,e),ids:n}}getUniqueItemMaterial(t,e){const n=Object.keys(this._uniqueItems[t][e]).map((t=>this._materials[t]));return n}}class nK{constructor(t){this.settings=new VX,this._webIfc=new jX,this._items={},this._materials={},this._geometry=new WX(this._webIfc,this._items,this._materials),this._converter=new eK(this._items,this._materials,this.settings),this._fragments=t}dispose(){this.disposeWebIfc(),this.disposeMaterials(),this.disposeItems(),this._geometry.cleanUp(),this._geometry=null,this._converter.cleanUp(),this._converter=null}async load(t){await this.initializeWebIfc();const e=await fetch(t),n=await e.arrayBuffer(),i=new Uint8Array(n);return this._webIfc.OpenModel(i,this.settings.webIfc),this.loadAllGeometry()}async initializeWebIfc(){const{path:t,absolute:e}=this.settings.wasm;this._webIfc.SetWasmPath(t,e),await this._webIfc.Init()}async loadAllGeometry(){await this.loadAllCategories();const t=await this._converter.generateFragmentData(this._webIfc);this.cleanUp();for(const e of t.fragments)this._fragments.list[e.id]=e;return t}async loadAllCategories(){this._converter.setupCategories(this._webIfc),this.loadOptionalCategories(),await this.setupVoids(),await this.loadMainCategories()}async loadMainCategories(){this._webIfc.StreamAllMeshes(0,(t=>{this._geometry.streamMesh(this._webIfc,t)}))}async setupVoids(){const t=this._webIfc.GetLineIDsWithType(0,EA),e=this._webIfc.properties,n=t.size();for(let i=0;i<n;i++){const n=(await e.getItemProperties(0,t.get(i))).RelatingBuildingElement.value;this._geometry.addVoid(n)}}loadOptionalCategories(){const t=this.settings.optionalCategories;this._webIfc.StreamAllMeshesWithTypes(0,t,(t=>{this._geometry.streamMesh(this._webIfc,t)}))}cleanUp(){this.resetWebIfc(),this._geometry.cleanUp(),this._converter.cleanUp(),this.resetObject(this._items),this.resetObject(this._materials)}resetWebIfc(){this.disposeWebIfc(),this._webIfc=new jX}resetObject(t){const e=Object.keys(t);for(const n of e)delete t[n]}disposeWebIfc(){this._webIfc=null}disposeMaterials(){for(const t in this._materials)this._materials[t].dispose()}disposeItems(){for(const t in this._items){const e=this._items[t].geometriesByMaterial;for(const t in e)for(const n of e[t])n.dispose()}}}class iK{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:512,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.components=t,this.updateInterval=e,this.rtWidth=n,this.rtHeight=i,this.autoUpdate=r,this.scene=new ay,this.fragmentsDiscovered=new Mx,this.enabled=!0,this.opaqueMeshes=[],this.transparentMeshes=[],this.fragmentColorMap=new Map,this.fragmentModelMap=new Map,this.fragmentMeshMap={},this.exclusions=new Map,this.needsUpdate=!1,this.renderDebugFrame=!1,this.isFirstRenderingPass=!0,this.discoveredFragments=new Set,this.undiscoveredFragments=new Map,this.previouslyDiscoveredFragments=new Set,this.visibleExpressId=[],this._disposer=new Pb,this.scaleFactor=1e-5,this.invisibleBoxes=new Set,this.colors={r:0,g:0,b:0,i:0},this.updateVisibility=t=>{if(!this.opaqueMeshes)return;if(!this.enabled)return;if(!this.needsUpdate&&!t)return;const e=this.components.camera.get();e.updateMatrix(),this.renderer.setSize(this.rtWidth,this.rtHeight),this.renderer.setRenderTarget(this.renderTarget),this.renderer.render(this.scene,e),this.renderer.readRenderTargetPixels(this.renderTarget,0,0,this.rtWidth,this.rtHeight,this._buffer),this.worker.postMessage({buffer:this._buffer});for(const n of this.transparentMeshes)this.scene.add(n);this.renderer.render(this.scene,e),this.renderer.readRenderTargetPixels(this.renderTarget,0,0,this.rtWidth,this.rtHeight,this._buffer),this.worker.postMessage({buffer:this._buffer}),this.renderer.setRenderTarget(null),this.renderDebugFrame&&this.isFirstRenderingPass&&this.renderer.render(this.scene,e);for(const n of this.transparentMeshes)n.removeFromParent();this.needsUpdate=!1},this.handleWorkerMessage=t=>{const e=t.data.colors,n=this.getFragmentsIDs(e);this.isFirstRenderingPass?this.renderFirstPass(n):this.renderSecondPass(n)},this.renderer=new ry;const s=this.components.renderer.clippingPlanes;this.renderer.clippingPlanes=s,this.renderTarget=new Gu(n,i),this.bufferSize=n*i*4,this._buffer=new Uint8Array(this.bufferSize);const o=new Blob(['\n      addEventListener("message", (event) => {\n        const { buffer } = event.data;\n        const colors = new Set();\n        for (let i = 0; i < buffer.length; i += 4) {\n            const r = buffer[i];\n            const g = buffer[i + 1];\n            const b = buffer[i + 2];\n            const code = "" + r + "-" + g + "-" + b;\n            colors.add(code);\n        }\n        postMessage({ colors });\n      });\n    '],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(o)),this.worker.addEventListener("message",this.handleWorkerMessage),r&&window.setInterval(this.updateVisibility,e)}dispose(){this.enabled=!1,this.worker.terminate(),this.fragmentsDiscovered.reset(),this.renderTarget.dispose(),this.renderer.dispose(),this.scene.children.length=0;for(const t of this.transparentMeshes)this._disposer.dispose(t);for(const t of this.opaqueMeshes)this._disposer.dispose(t);for(const t in this.fragmentMeshMap)for(const e in this.fragmentMeshMap[t]){const n=this.fragmentMeshMap[t][e].mesh;this._disposer.dispose(n)}this.fragmentMeshMap={},this.transparentMeshes=[],this.opaqueMeshes=[],this._buffer=null,this.exclusions.clear(),this.discoveredFragments.clear(),this.undiscoveredFragments.clear(),this.previouslyDiscoveredFragments.clear(),this.fragmentColorMap.clear(),this.invisibleBoxes.clear()}getNextColor(){return 0===this.colors.i&&(this.colors.b++,256===this.colors.b&&(this.colors.b=0,this.colors.i=1)),1===this.colors.i&&(this.colors.g++,this.colors.i=0,256===this.colors.g&&(this.colors.g=0,this.colors.i=2)),2===this.colors.i&&(this.colors.r++,this.colors.i=1,256===this.colors.r&&(this.colors.r=0,this.colors.i=0)),{r:this.colors.r,g:this.colors.g,b:this.colors.b,code:"".concat(this.colors.r,"-").concat(this.colors.g,"-").concat(this.colors.b)}}loadBoxes(t,e,n,i){const r=Object.values(e),s=new Yd,o=this.components.renderer.clippingPlanes,a=new dd({clippingPlanes:o}),l=new jy(s,a,r.length),h=new Ep,c=Object.keys(e);for(let y=0;y<r.length;y++){const e=c[y],n=i[parseInt(c[y],10)];this.fragmentModelMap.set(n,t);const s=this.getNextColor();h.fromArray(r[y]),l.setMatrixAt(y,h),l.setColorAt(y,new pd("rgb(".concat(s.r,",").concat(s.g,", ").concat(s.b,")"))),void 0===this.fragmentMeshMap[n]&&(this.fragmentMeshMap[n]={}),this.fragmentMeshMap[n][e]={mesh:l,index:y},this.fragmentColorMap.set(s.code,n)}const u=Object.values(n),p=new Yd,d=new dd,f=new jy(p,d,u.length),m=new Ep,g=Object.keys(n);for(let y=0;y<u.length;y++){const e=g[y],n=i[parseInt(g[y],10)],r=this.getNextColor();m.fromArray(u[y]),f.setMatrixAt(y,m),f.setColorAt(y,new pd("rgb(".concat(r.r,",").concat(r.g,", ").concat(r.b,")"))),void 0===this.fragmentMeshMap[n]&&(this.fragmentMeshMap[n]={}),this.fragmentMeshMap[n][e]={mesh:f,index:y},this.fragmentModelMap.set(n,t),this.fragmentColorMap.set(r.code,n)}this.scene.add(l),this.opaqueMeshes.push(l),this.transparentMeshes.push(f)}toggleVisibility(t,e){const n=new Ep,i=this.getScaleMatrix(t);for(const r in e)for(const s of e[r]){const e=this.fragmentMeshMap[r][s];if(!e)continue;const o="".concat(r,"-").concat(e.index);!this.invisibleBoxes.has(o)!==t&&(t?this.invisibleBoxes.delete(o):this.invisibleBoxes.add(o),e.mesh.getMatrixAt(e.index,n),n.premultiply(i),e.mesh.setMatrixAt(e.index,n),e.mesh.instanceMatrix.needsUpdate=!0)}}getFragmentsIDs(t){const e=new Set;for(const n of t)if(void 0!==n){const t=this.fragmentColorMap.get(n);e.add(t)}return e}renderFirstPass(t){this.discoveredFragments.clear(),this.saveFoundFragments(t),this.isFirstRenderingPass=!1}renderSecondPass(t){this.saveFoundFragments(t);for(const n of this.previouslyDiscoveredFragments)t.has(n)||this.undiscoveredFragments.set(n,performance.now());const e={};for(const n of this.discoveredFragments)this.previouslyDiscoveredFragments.has(n)||this.saveDiscovered(n,e),this.previouslyDiscoveredFragments.add(n);for(const n of t)this.undiscoveredFragments.delete(n);this.fragmentsDiscovered.trigger(e),this.isFirstRenderingPass=!0}saveDiscovered(t,e){const n=this.fragmentModelMap.get(t);if(!n)throw new Error("Error when getting model of fragment");e[n]||(e[n]=[]),e[n].push(t)}saveFoundFragments(t){for(const e of t)void 0!==e&&this.discoveredFragments.add(e)}getScaleMatrix(t){const e=(new Ep).fromArray([this.scaleFactor,0,0,0,0,this.scaleFactor,0,0,0,0,this.scaleFactor,0,0,0,0,1]);return t||e.invert(),e}}class rK{constructor(t){this.fragments=t,this.height=10,this.groupName="",this.enabled=!1,this.initialized=!1,this.explodedFragments=new Set}dispose(){this.explodedFragments.clear()}explode(){this.initialized=!0,this.enabled=!0,this.update()}reset(){this.initialized=!0,this.enabled=!1,this.update()}update(){if(!this.initialized)return;const t=this.enabled?1:-1;let e=0;const n=this.fragments.groups.groupSystems[this.groupName];for(const i in n){for(const r in n[i]){const s=this.fragments.list[r],o=i+r;if(!s)continue;if(this.enabled&&this.explodedFragments.has(o))continue;if(!this.enabled&&!this.explodedFragments.has(o))continue;this.enabled?this.explodedFragments.add(o):this.explodedFragments.delete(o);const a=this.getOffsetY(e*t);if(1===s.blocks.count){const t=n[i][r];for(const e of t){const t=new Ep,{instanceID:n}=s.getInstanceAndBlockID(e);s.getInstance(n,t),t.premultiply(a),s.setInstance(n,{transform:t,ids:[e]}),this.updateMemoryCulling(r,e,a)}}else{const t=new Ep;s.getInstance(0,t),t.premultiply(a),s.setInstance(0,{transform:t,ids:s.items});for(const e of s.items)this.updateMemoryCulling(r,e,a)}s.mesh.instanceMatrix.needsUpdate=!0}e++}}updateMemoryCulling(t,e,n){const i=new Ep,r=this.fragments.memoryCuller.fragmentMeshMap[t];if(!r)return;const s=r[e];s&&(s.mesh.getMatrixAt(s.index,i),i.premultiply(n),s.mesh.setMatrixAt(s.index,i),s.mesh.instanceMatrix.needsUpdate=!0)}getOffsetY(t){return(new Ep).fromArray([1,0,0,0,0,1,0,0,0,0,1,0,0,t*this.height,0,1])}}class sK extends wb{constructor(t){super(),this.components=t,this.name="Fragments",this.enabled=!0,this.list={},this.ifcLoader=new nK(this),this.groups=new FS(this),this.properties=new US,this.tree=new BS(this.properties),this._loader=new NS,this.highlighter=new MS(t,this),this.exploder=new rK(this),this.edges=new LS(t),this.materials=new kS(this),this.culler=new PS(t,this),this.memoryCuller=new iK(t)}get(){return Object.values(this.list)}get meshes(){const t=[];for(const e in this.list)t.push(this.list[e].mesh);return t}dispose(){this.disposeFragmentList(),this.ifcLoader.dispose(),this.groups.dispose(),this.properties.dispose(),this.highlighter.dispose(),this.edges.dispose(),this.exploder.dispose(),this.materials.dispose(),this.culler.dispose(),this.memoryCuller.dispose()}async load(t,e){const n=await this._loader.load(t,e);this.list[n.id]=n,this.culler.add(n);return this.components.scene.get().add(n.mesh),this.components.meshes.push(n.mesh),n}disposeFragmentList(){for(const t in this.list){const e=this.list[t];this.removeFragmentMesh(e),e.dispose(!0)}this.list={}}removeFragmentMesh(t){const e=this.components.meshes,n=t.mesh;e.includes(n)&&e.splice(e.indexOf(n),1)}}class oK{constructor(t,e){this.components=t,this._previousDistance=-1,this._camera=e;const n="Perspective";this._currentCamera=e.get(n),this._currentProjection=n}get projection(){return this._currentProjection}async setProjection(t){this.projection!==t&&("Orthographic"===t?this.setOrthoCamera():await this.setPerspectiveCamera(),await this.updateActiveCamera())}setOrthoCamera(){if("FirstPerson"===this._camera.currentMode.id)return;this._previousDistance=this._camera.controls.distance,this._camera.controls.distance=200;const{width:t,height:e}=this.getDims();this.setupOrthoCamera(e,t),this._currentCamera=this._camera.get("Orthographic"),this._currentProjection="Orthographic"}async updateActiveCamera(){await new Promise((t=>{setTimeout((()=>{this._camera.activeCamera=this._currentCamera,t()}),50)}))}getDims(){const t=new Vu;this._camera.get("Perspective").getWorldDirection(t);const e=new Vu;this._camera.controls.getTarget(e);const n=e.clone().sub(this._camera.get("Perspective").position).dot(t),i=this.components.renderer.getSize(),r=i.x/i.y,s=this._camera.get("Perspective"),o=2*n*Math.atan(s.fov*(Math.PI/180)/2);return{width:o*r,height:o}}setupOrthoCamera(t,e){this._camera.controls.mouseButtons.wheel=Ib.ACTION.ZOOM;const n=this._camera.get("Perspective"),i=this._camera.get("Orthographic");i.zoom=1,i.left=e/-2,i.right=e/2,i.top=t/2,i.bottom=t/-2,i.updateProjectionMatrix(),i.position.copy(n.position),i.quaternion.copy(n.quaternion),this._camera.controls.camera=i}async setPerspectiveCamera(){this._camera.controls.mouseButtons.wheel=Ib.ACTION.DOLLY;const t=this._camera.get("Perspective"),e=this._camera.get("Orthographic");t.position.copy(e.position),t.quaternion.copy(e.quaternion),this._camera.controls.mouseButtons.wheel=Ib.ACTION.DOLLY,this._camera.controls.distance=this._previousDistance,await this._camera.controls.zoomTo(1),t.updateProjectionMatrix(),this._camera.controls.camera=t,this._currentCamera=t,this._currentProjection="Perspective"}}class aK{constructor(t){this.camera=t,this.enabled=!0,this.id="Orbit",this.projectionChanged=new Mx,this.activateOrbitControls()}toggle(t){this.enabled=t,t&&this.activateOrbitControls()}activateOrbitControls(){const t=this.camera.controls;t.minDistance=1,t.maxDistance=300,t.truckSpeed=2}}class lK{constructor(t){this.camera=t,this.enabled=!1,this.id="Plan",this.projectionChanged=new Mx,this.mouseInitialized=!1,this.defaultAzimuthSpeed=t.controls.azimuthRotateSpeed,this.defaultPolarSpeed=t.controls.polarRotateSpeed}toggle(t){this.enabled=t;const e=this.camera.controls;e.azimuthRotateSpeed=t?0:this.defaultAzimuthSpeed,e.polarRotateSpeed=t?0:this.defaultPolarSpeed,this.mouseInitialized||(this.mouseAction1=e.touches.one,this.mouseAction2=e.touches.two,this.mouseInitialized=!0),t?(e.mouseButtons.left=Ib.ACTION.TRUCK,e.touches.one=Ib.ACTION.TOUCH_TRUCK,e.touches.two=Ib.ACTION.TOUCH_ZOOM):(e.mouseButtons.left=Ib.ACTION.ROTATE,e.touches.one=this.mouseAction1,e.touches.two=this.mouseAction2)}}class hK{constructor(t){this.camera=t,this.enabled=!1,this.id="FirstPerson",this.projectionChanged=new Mx}toggle(t){if(this.enabled=t,t){if("Perspective"!==this.camera.getProjection())return void this.camera.setNavigationMode("Orbit");this.setupFirstPersonCamera()}}setupFirstPersonCamera(){const t=this.camera.controls,e=new Vu;t.camera.getWorldPosition(e);const n=new Vu;t.distance--,t.camera.getWorldPosition(n),t.minDistance=1,t.maxDistance=1,t.distance=1,t.moveTo(n.x,n.y,n.z),t.truckSpeed=50,t.mouseButtons.wheel=Ib.ACTION.DOLLY,t.touches.two=Ib.ACTION.TOUCH_ZOOM_TRUCK}}class cK extends Sb{constructor(t){super(t),this.projectionChanged=new Mx,this._userInputButtons={},this._frustumSize=50,this._navigationModes=new Map,this._orthoCamera=this.newOrthoCamera(),this._navigationModes.set("Orbit",new aK(this)),this._navigationModes.set("FirstPerson",new hK(this)),this._navigationModes.set("Plan",new lK(this)),this.currentMode=this._navigationModes.get("Orbit"),this.currentMode.toggle(!0,{preventTargetAdjustment:!0}),this.toggleEvents(!0),this._projectionManager=new oK(t,this)}dispose(){super.dispose(),this.toggleEvents(!1),this._orthoCamera.removeFromParent()}get(t){return t?"Orthographic"===t?this._orthoCamera:this._perspectiveCamera:this.activeCamera}getProjection(){return this._projectionManager.projection}async toggleProjection(){const t="Perspective"===this.getProjection()?"Orthographic":"Perspective";await this.setProjection(t)}async setProjection(t){await this._projectionManager.setProjection(t),this.projectionChanged.trigger(this.activeCamera)}toggleUserInput(t){t?this.enableUserInput():this.disableUserInput()}setNavigationMode(t){if(this.currentMode.id!==t){if(this.currentMode.toggle(!1),!this._navigationModes.has(t))throw new Error("The specified mode does not exist!");this.currentMode=this._navigationModes.get(t),this.currentMode.toggle(!0)}}updateAspect(){super.updateAspect(),this.setOrthoCameraAspect()}async fitModelToFrame(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.components.meshes;if(!this.enabled)return;const e=this.components.scene.get();console.log(e);const n=Number.MAX_VALUE,i=Number.MIN_VALUE,r=new Vu(n,n,n),s=new Vu(i,i,i);for(const u of t){const t=(new Yu).setFromObject(u);t.min.x<r.x&&(r.x=t.min.x),t.min.y<r.y&&(r.y=t.min.y),t.min.z<r.z&&(r.z=t.min.z),t.max.x>s.x&&(s.x=t.max.x),t.max.y>s.y&&(s.y=t.max.y),t.max.z>s.z&&(s.z=t.max.z)}const o=new Yu(r,s),a=new Vu;o.getSize(a);const l=new Vu;o.getCenter(l);const h=.5*Math.max(a.x,a.y,a.z),c=new pp(l,h);await this.controls.fitToSphere(c,!0)}disableUserInput(){this._userInputButtons.left=this.controls.mouseButtons.left,this._userInputButtons.right=this.controls.mouseButtons.right,this._userInputButtons.middle=this.controls.mouseButtons.middle,this._userInputButtons.wheel=this.controls.mouseButtons.wheel,this.controls.mouseButtons.left=0,this.controls.mouseButtons.right=0,this.controls.mouseButtons.middle=0,this.controls.mouseButtons.wheel=0}enableUserInput(){0!==Object.keys(this._userInputButtons).length&&(this.controls.mouseButtons.left=this._userInputButtons.left,this.controls.mouseButtons.right=this._userInputButtons.right,this.controls.mouseButtons.middle=this._userInputButtons.middle,this.controls.mouseButtons.wheel=this._userInputButtons.wheel)}newOrthoCamera(){const t=this.components.renderer.getSize(),e=t.x/t.y;return new If(this._frustumSize*e/-2,this._frustumSize*e/2,this._frustumSize/2,this._frustumSize/-2,.1,1e3)}setOrthoCameraAspect(){const t=this.components.renderer.getSize(),e=t.x/t.y;this._orthoCamera.left=-this._frustumSize*e/2,this._orthoCamera.right=this._frustumSize*e/2,this._orthoCamera.top=this._frustumSize/2,this._orthoCamera.bottom=-this._frustumSize/2,this._orthoCamera.updateProjectionMatrix()}toggleEvents(t){const e=Object.values(this._navigationModes);for(const n of e)t?n.projectionChanged.on(this.projectionChanged.trigger):n.projectionChanged.reset()}}const uK=new Yu,pK=new Vu;class dK extends TT{constructor(){super(),this.type="LineSegmentsGeometry";this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new _d([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new _d([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))}applyMatrix4(t){const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==e&&(e.applyMatrix4(t),n.applyMatrix4(t),e.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}setPositions(t){let e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));const n=new HT(e,6,1);return this.setAttribute("instanceStart",new cy(n,3,0)),this.setAttribute("instanceEnd",new cy(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(t){let e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));const n=new HT(e,6,1);return this.setAttribute("instanceColorStart",new cy(n,3,0)),this.setAttribute("instanceColorEnd",new cy(n,3,3)),this}fromWireframeGeometry(t){return this.setPositions(t.attributes.position.array),this}fromEdgesGeometry(t){return this.setPositions(t.attributes.position.array),this}fromMesh(t){return this.fromWireframeGeometry(new __(t.geometry)),this}fromLineSegments(t){const e=t.geometry;if(!e.isGeometry)return e.isBufferGeometry&&this.setPositions(e.attributes.position.array),this;console.error("THREE.LineSegmentsGeometry no longer supports Geometry. Use THREE.BufferGeometry instead.")}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Yu);const t=this.attributes.instanceStart,e=this.attributes.instanceEnd;void 0!==t&&void 0!==e&&(this.boundingBox.setFromBufferAttribute(t),uK.setFromBufferAttribute(e),this.boundingBox.union(uK))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new pp),null===this.boundingBox&&this.computeBoundingBox();const t=this.attributes.instanceStart,e=this.attributes.instanceEnd;if(void 0!==t&&void 0!==e){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let i=0;for(let r=0,s=t.count;r<s;r++)pK.fromBufferAttribute(t,r),i=Math.max(i,n.distanceToSquared(pK)),pK.fromBufferAttribute(e,r),i=Math.max(i,n.distanceToSquared(pK));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(t){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(t)}}dK.prototype.isLineSegmentsGeometry=!0,gf.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Du(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},yf.line={uniforms:Kd.merge([gf.common,gf.fog,gf.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tworldStart = start.xyz;\n\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t#else\n\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// get the offset direction as perpendicular to the view vector\n\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\tvec3 offset;\n\t\t\t\tif ( position.y < 0.5 ) {\n\n\t\t\t\t\toffset = normalize( cross( start.xyz, worldDir ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\toffset = normalize( cross( end.xyz, worldDir ) );\n\n\t\t\t\t}\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\tfloat forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );\n\n\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t// extend the line bounds to encompass  endcaps\n\t\t\t\t\tstart.xyz += - worldDir * linewidth * 0.5;\n\t\t\t\t\tend.xyz += worldDir * linewidth * 0.5;\n\n\t\t\t\t\t// shift the position of the quad so it hugs the forward edge of the line\n\t\t\t\t\toffset.xy -= dir * forwardOffset;\n\t\t\t\t\toffset.z += 0.5;\n\n\t\t\t\t#endif\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\toffset.xy += dir * 2.0 * forwardOffset;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth * 0.5;\n\n\t\t\t\t// set the world position\n\t\t\t\tworldPos = ( position.y < 0.5 ) ? start : end;\n\t\t\t\tworldPos.xyz += offset;\n\n\t\t\t\t// project the worldpos\n\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t// segements overlap neatly\n\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t#else\n\n\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\tdir.x /= aspect;\n\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\toffset += - dir;\n\n\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\toffset += dir;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth;\n\n\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t// select end\n\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t// back to clip space\n\t\t\t\toffset *= clip.w;\n\n\t\t\t\tclip.xy += offset;\n\n\t\t\t#endif\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\t\tuniform float linewidth;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashOffset;\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\tfloat mua;\n\t\t\tfloat mub;\n\n\t\t\tvec3 p13 = p1 - p3;\n\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\tmua = numer / denom;\n\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\treturn vec2( mua, mub );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tfloat alpha = opacity;\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\tfloat len = length( delta );\n\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#endif\n\n\t\t\t#else\n\n\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t#else\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, alpha );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"};class fK extends Qd{constructor(t){super({type:"LineMaterial",uniforms:Kd.clone(yf.line.uniforms),vertexShader:yf.line.vertexShader,fragmentShader:yf.line.fragmentShader,clipping:!0}),Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){!0===t?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return Boolean("USE_DASH"in this.defines)},set(t){Boolean(t)!==Boolean("USE_DASH"in this.defines)&&(this.needsUpdate=!0),!0===t?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)},set:function(t){Boolean(t)!==Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)&&(this.needsUpdate=!0),!0===t?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(t)}}fK.prototype.isLineMaterial=!0;const mK=new Vu,gK=new Vu,yK=new zu,vK=new zu,_K=new zu,TK=new Vu,EK=new Ep,xK=new QT,bK=new Vu,IK=new Yu,wK=new pp,SK=new zu;function RK(t,e,n,i){return SK.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),SK.multiplyScalar(1/SK.w),SK.x=n/i.width,SK.y=n/i.height,SK.applyMatrix4(t.projectionMatrixInverse),SK.multiplyScalar(1/SK.w),Math.abs(Math.max(SK.x,SK.y))}class CK extends Wd{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dK,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new fK({color:16777215*Math.random()})),this.type="LineSegments2"}computeLineDistances(){const t=this.geometry,e=t.attributes.instanceStart,n=t.attributes.instanceEnd,i=new Float32Array(2*e.count);for(let s=0,o=0,a=e.count;s<a;s++,o+=2)mK.fromBufferAttribute(e,s),gK.fromBufferAttribute(n,s),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+mK.distanceTo(gK);const r=new HT(i,2,1);return t.setAttribute("instanceDistanceStart",new cy(r,1,0)),t.setAttribute("instanceDistanceEnd",new cy(r,1,1)),this}raycast(t,e){null===t.camera&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');const n=void 0!==t.params.Line2&&t.params.Line2.threshold||0,i=t.ray,r=t.camera,s=r.projectionMatrix,o=this.matrixWorld,a=this.geometry,l=this.material,h=l.resolution,c=l.linewidth+n,u=a.attributes.instanceStart,p=a.attributes.instanceEnd,d=-r.near;null===a.boundingSphere&&a.computeBoundingSphere(),wK.copy(a.boundingSphere).applyMatrix4(o);const f=RK(r,Math.max(r.near,wK.distanceToPoint(i.origin)),c,h);if(wK.radius+=f,!1===t.ray.intersectsSphere(wK))return;null===a.boundingBox&&a.computeBoundingBox(),IK.copy(a.boundingBox).applyMatrix4(o);const m=RK(r,Math.max(r.near,IK.distanceToPoint(i.origin)),c,h);if(IK.max.x+=m,IK.max.y+=m,IK.max.z+=m,IK.min.x-=m,IK.min.y-=m,IK.min.z-=m,!1!==t.ray.intersectsBox(IK)){i.at(1,_K),_K.w=1,_K.applyMatrix4(r.matrixWorldInverse),_K.applyMatrix4(s),_K.multiplyScalar(1/_K.w),_K.x*=h.x/2,_K.y*=h.y/2,_K.z=0,TK.copy(_K),EK.multiplyMatrices(r.matrixWorldInverse,o);for(let t=0,n=u.count;t<n;t++){if(yK.fromBufferAttribute(u,t),vK.fromBufferAttribute(p,t),yK.w=1,vK.w=1,yK.applyMatrix4(EK),vK.applyMatrix4(EK),yK.z>d&&vK.z>d)continue;if(yK.z>d){const t=yK.z-vK.z,e=(yK.z-d)/t;yK.lerp(vK,e)}else if(vK.z>d){const t=vK.z-yK.z,e=(vK.z-d)/t;vK.lerp(yK,e)}yK.applyMatrix4(s),vK.applyMatrix4(s),yK.multiplyScalar(1/yK.w),vK.multiplyScalar(1/vK.w),yK.x*=h.x/2,yK.y*=h.y/2,vK.x*=h.x/2,vK.y*=h.y/2,xK.start.copy(yK),xK.start.z=0,xK.end.copy(vK),xK.end.z=0;const n=xK.closestPointToPointParameter(TK,!0);xK.at(n,bK);const r=Au.lerp(yK.z,vK.z,n),a=r>=-1&&r<=1,l=TK.distanceTo(bK)<.5*c;if(a&&l){xK.start.fromBufferAttribute(u,t),xK.end.fromBufferAttribute(p,t),xK.start.applyMatrix4(o),xK.end.applyMatrix4(o);const n=new Vu,r=new Vu;i.distanceSqToSegment(xK.start,xK.end,r,n),e.push({point:r,pointOnLine:n,distance:i.origin.distanceTo(r),object:this,face:null,faceIndex:t,uv:null,uv2:null})}}}}}CK.prototype.isLineSegments2=!0;class AK extends wb{constructor(t,e,n){super(),this.name="ClippingEdges",this.enabled=!0,this._edges={},this._disposer=new Pb,this._visible=!0,this._inverseMatrix=new Ep,this._localPlane=new lf,this._tempLine=new QT,this._tempVector=new Vu,this.afterUpdate=new Mx,this.beforeUpdate=new Mx,this._components=t,this._plane=e,this._styles=n}get visible(){return this._visible}set visible(t){this._visible=t;const e=Object.keys(this._edges);for(const n of e)this.updateEdgesVisibility(n,t);t&&this.update()}update(){const t=Object.values(this._styles.get());for(const e of t)this.drawEdges(e.name)}get(){return this._edges}dispose(){const t=Object.values(this._edges);for(const e of t)this._disposer.disposeGeometry(e.generatorGeometry),this._disposer.dispose(e.mesh,!1);AK._basicEdges.removeFromParent(),AK._basicEdges.geometry.dispose(),AK._basicEdges=new $y}static newGeneratorGeometry(){const t=new Rd,e=new Float32Array(3e5),n=new gd(e,3,!1);return n.setUsage(mu),t.setAttribute("position",n),t}newThickEdges(t){const e=this._styles.get()[t].material,n=new dK,i=new CK(n,e);return i.material.polygonOffset=!0,i.material.polygonOffsetFactor=-2,i.material.polygonOffsetUnits=1,i.renderOrder=3,i}drawEdges(t){const e=this._styles.get()[t];this._edges[t]||this.initializeStyle(t);const n=this._edges[t];let i=0;const r=n.generatorGeometry.attributes.position;r.array.fill(0);if(e.meshes.filter((t=>t.geometry)).forEach((t=>{if(!t.geometry.boundsTree)throw new Error("Boundstree not found for clipping edges subset.");const e=t;if(e.count>1)for(let n=0;n<e.count;n++){const s=new Wd(t.geometry);s.matrix.copy(t.matrix);const o=new Ep;e.getMatrixAt(n,o),s.applyMatrix4(o),s.applyMatrix4(t.matrix),s.updateMatrix(),s.updateMatrixWorld(),this._inverseMatrix.copy(s.matrixWorld).invert(),this._localPlane.copy(this._plane).applyMatrix4(this._inverseMatrix),i=this.shapecast(s,r,i)}else this._inverseMatrix.copy(t.matrixWorld).invert(),this._localPlane.copy(this._plane).applyMatrix4(this._inverseMatrix),i=this.shapecast(t,r,i)})),n.mesh.geometry.setDrawRange(0,i),n.mesh.position.copy(this._plane.normal).multiplyScalar(1e-4),r.needsUpdate=!0,!Number.isNaN(n.generatorGeometry.attributes.position.array[0])){AK._basicEdges.geometry=n.generatorGeometry,n.mesh.geometry.fromLineSegments(AK._basicEdges);this._components.scene.get().add(n.mesh)}}initializeStyle(t){this._edges[t]={name:t,generatorGeometry:AK.newGeneratorGeometry(),mesh:this.newThickEdges(t)}}shapecast(t,e,n){return t.geometry.boundsTree.shapecast({intersectsBounds:t=>this._localPlane.intersectsBox(t),intersectsTriangle:i=>{let r=0;if(this._tempLine.start.copy(i.a),this._tempLine.end.copy(i.b),this._localPlane.intersectLine(this._tempLine,this._tempVector)){const i=this._tempVector.applyMatrix4(t.matrixWorld);e.setXYZ(n,i.x,i.y,i.z),r++,n++}if(this._tempLine.start.copy(i.b),this._tempLine.end.copy(i.c),this._localPlane.intersectLine(this._tempLine,this._tempVector)){const i=this._tempVector.applyMatrix4(t.matrixWorld);e.setXYZ(n,i.x,i.y,i.z),r++,n++}if(this._tempLine.start.copy(i.c),this._tempLine.end.copy(i.a),this._localPlane.intersectLine(this._tempLine,this._tempVector)){const i=this._tempVector.applyMatrix4(t.matrixWorld);e.setXYZ(n,i.x,i.y,i.z),r++,n++}2!==r&&(n-=r)}}),n}updateEdgesVisibility(t,e){const n=this._edges[t];if(n.mesh.visible=e,e){this._components.scene.get().add(n.mesh)}else n.mesh.removeFromParent()}}AK._basicEdges=new $y;class DK extends xI{constructor(t,e,n,i,r,s,o){super(t,e,n,i,r,s),this.edgesMaxUpdateRate=50,this.lastUpdate=-1,this.updateTimeout=-1,this.edges=new AK(t,this._plane,o)}set enabled(t){super.enabled=t,this.edges.visible=t}dispose(){super.dispose(),this.edges.dispose()}update(){super.update();const t=Date.now();this.lastUpdate+this.edgesMaxUpdateRate<t?(this.lastUpdate=t,this.edges.update()):-1===this.updateTimeout&&(this.updateTimeout=window.setTimeout((()=>{this.update(),this.updateTimeout=-1}),this.edgesMaxUpdateRate))}}class OK extends wb{constructor(t){super(),this.components=t,this.name="EdgesStyles",this.enabled=!0,this._styles={},this._defaultMaterial=new fK({color:0,linewidth:.001}),this.afterUpdate=new Mx,this.beforeUpdate=new Mx}get(){return this._styles}update(t){this.beforeUpdate.trigger(this._styles),this.afterUpdate.trigger(this._styles)}async create(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._defaultMaterial;for(const r of e)r.geometry.boundsTree||r.geometry.computeBoundsTree();const i=this.components.renderer;n.clippingPlanes=i.clippingPlanes,this._styles[t]={name:t,material:n,meshes:e}}dispose(){const t=Object.values(this._styles);for(const e of t)e.meshes.length=0,e.material.dispose();this._styles={}}}class NK extends jb{constructor(t,e){super(t,e),this.name="EdgesClipper",this.styles=new OK(t)}dispose(){super.dispose(),this.styles.dispose()}updateEdges(){if(this.enabled)for(const t of this._planes)t.update()}newPlaneInstance(t,e,n){return new this.PlaneType(this.components,t,e,this.size,this._material,n,this.styles)}}var MK={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"};class PK{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const FK=new If(-1,1,1,-1,0,1),LK=new Rd;LK.setAttribute("position",new _d([-1,3,0,-1,-1,0,3,-1,0],3)),LK.setAttribute("uv",new _d([0,2,0,0,2,0],2));class kK{constructor(t){this._mesh=new Wd(LK,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,FK)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}new If(-1,1,1,-1,0,1);const UK=new Rd;UK.setAttribute("position",new _d([-1,3,0,-1,-1,0,3,-1,0],3)),UK.setAttribute("uv",new _d([0,2,0,0,2,0],2));const BK={defines:{NUM_SAMPLES:7,NUM_RINGS:4,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new Du(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new Ep},cameraInverseProjectionMatrix:{value:new Ep},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\n\t\tvarying vec2 vUv;\n\n\t\t#if DIFFUSE_TEXTURE == 1\n\t\tuniform sampler2D tDiffuse;\n\t\t#endif\n\n\t\tuniform sampler2D tDepth;\n\n\t\t#if NORMAL_TEXTURE == 1\n\t\tuniform sampler2D tNormal;\n\t\t#endif\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\n\t\tuniform float scale;\n\t\tuniform float intensity;\n\t\tuniform float bias;\n\t\tuniform float kernelRadius;\n\t\tuniform float minResolution;\n\t\tuniform vec2 size;\n\t\tuniform float randomSeed;\n\n\t\t// RGBA depth\n\n\t\t#include <packing>\n\n\t\tvec4 getDefaultColor( const in vec2 screenPosition ) {\n\t\t\t#if DIFFUSE_TEXTURE == 1\n\t\t\treturn texture2D( tDiffuse, vUv );\n\t\t\t#else\n\t\t\treturn vec4( 1.0 );\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t\t\t#else\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\n\t\tvec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\n\t\t\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\n\t\t\tclipPosition *= clipW; // unprojection.\n\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\n\t\t}\n\n\t\tvec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {\n\t\t\t#if NORMAL_TEXTURE == 1\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\n\t\t\t#else\n\t\t\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );\n\t\t\t#endif\n\t\t}\n\n\t\tfloat scaleDividedByCameraFar;\n\t\tfloat minResolutionMultipliedByCameraFar;\n\n\t\tfloat getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\n\t\t\tvec3 viewDelta = sampleViewPosition - centerViewPosition;\n\t\t\tfloat viewDistance = length( viewDelta );\n\t\t\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;\n\n\t\t\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );\n\t\t}\n\n\t\t// moving costly divides into consts\n\t\tconst float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\n\t\tconst float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\n\n\t\tfloat getAmbientOcclusion( const in vec3 centerViewPosition ) {\n\t\t\t// precompute some variables require in getOcclusion.\n\t\t\tscaleDividedByCameraFar = scale / cameraFar;\n\t\t\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;\n\t\t\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );\n\n\t\t\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\n\t\t\tfloat angle = rand( vUv + randomSeed ) * PI2;\n\t\t\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;\n\t\t\tvec2 radiusStep = radius;\n\n\t\t\tfloat occlusionSum = 0.0;\n\t\t\tfloat weightSum = 0.0;\n\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {\n\t\t\t\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;\n\t\t\t\tradius += radiusStep;\n\t\t\t\tangle += ANGLE_STEP;\n\n\t\t\t\tfloat sampleDepth = getDepth( sampleUv );\n\t\t\t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfloat sampleViewZ = getViewZ( sampleDepth );\n\t\t\t\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );\n\t\t\t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );\n\t\t\t\tweightSum += 1.0;\n\t\t\t}\n\n\t\t\tif( weightSum == 0.0 ) discard;\n\n\t\t\treturn occlusionSum * ( intensity / weightSum );\n\t\t}\n\n\t\tvoid main() {\n\t\t\tfloat centerDepth = getDepth( vUv );\n\t\t\tif( centerDepth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat centerViewZ = getViewZ( centerDepth );\n\t\t\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );\n\n\t\t\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );\n\n\t\t\tgl_FragColor = getDefaultColor( vUv );\n\t\t\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;\n\t\t}"},zK={defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new Du(512,512)},sampleUvOffsets:{value:[new Du(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:"\n\n\t\t#include <common>\n\n\t\tuniform vec2 size;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec2 vInvSize;\n\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tvInvSize = 1.0 / size;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\t\t#include <packing>\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform float depthCutoff;\n\n\t\tuniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];\n\t\tuniform float sampleWeights[ KERNEL_RADIUS + 1 ];\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec2 vInvSize;\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t\t\t#else\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\n\t\tvoid main() {\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tif( depth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat centerViewZ = -getViewZ( depth );\n\t\t\tbool rBreak = false, lBreak = false;\n\n\t\t\tfloat weightSum = sampleWeights[0];\n\t\t\tvec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;\n\n\t\t\tfor( int i = 1; i <= KERNEL_RADIUS; i ++ ) {\n\n\t\t\t\tfloat sampleWeight = sampleWeights[i];\n\t\t\t\tvec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;\n\n\t\t\t\tvec2 sampleUv = vUv + sampleUvOffset;\n\t\t\t\tfloat viewZ = -getViewZ( getDepth( sampleUv ) );\n\n\t\t\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;\n\n\t\t\t\tif( ! rBreak ) {\n\t\t\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\n\t\t\t\t\tweightSum += sampleWeight;\n\t\t\t\t}\n\n\t\t\t\tsampleUv = vUv - sampleUvOffset;\n\t\t\t\tviewZ = -getViewZ( getDepth( sampleUv ) );\n\n\t\t\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;\n\n\t\t\t\tif( ! lBreak ) {\n\t\t\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\n\t\t\t\t\tweightSum += sampleWeight;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgl_FragColor = diffuseSum / weightSum;\n\t\t}"},GK={createSampleWeights:function(t,e){const n=[];for(let i=0;i<=t;i++)n.push(HK(i,e));return n},createSampleOffsets:function(t,e){const n=[];for(let i=0;i<=t;i++)n.push(e.clone().multiplyScalar(i));return n},configure:function(t,e,n,i){t.defines.KERNEL_RADIUS=e,t.uniforms.sampleUvOffsets.value=GK.createSampleOffsets(e,i),t.uniforms.sampleWeights.value=GK.createSampleWeights(e,n),t.needsUpdate=!0}};function HK(t,e){return Math.exp(-t*t/(e*e*2))/(Math.sqrt(2*Math.PI)*e)}const jK={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );\n\t\t\tgl_FragColor = vec4( vec3( depth ), opacity );\n\n\t\t}"};(class extends PK{constructor(t,e){let n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Du(256,256);super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.supportsDepthTextureExtension=i,this.supportsNormalTexture=r,this.originalClearColor=new pd,this._oldClearColor=new pd,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=new Du(s.x,s.y),this.saoRenderTarget=new Gu(this.resolution.x,this.resolution.y,{minFilter:Mh,magFilter:Mh,format:Kh}),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone(),this.beautyRenderTarget=this.saoRenderTarget.clone(),this.normalRenderTarget=new Gu(this.resolution.x,this.resolution.y,{minFilter:Dh,magFilter:Dh,format:Kh}),this.depthRenderTarget=this.normalRenderTarget.clone(),this.supportsDepthTextureExtension&&(n=new ey,n.type=Bh,this.beautyRenderTarget.depthTexture=n,this.beautyRenderTarget.depthBuffer=!0),this.depthMaterial=new jg,this.depthMaterial.depthPacking=cu,this.depthMaterial.blending=Ll,this.normalMaterial=new S_,this.normalMaterial.blending=Ll,void 0===BK&&console.error("THREE.SAOPass relies on SAOShader"),this.saoMaterial=new Qd({defines:Object.assign({},BK.defines),fragmentShader:BK.fragmentShader,vertexShader:BK.vertexShader,uniforms:Kd.clone(BK.uniforms)}),this.saoMaterial.extensions.derivatives=!0,this.saoMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.saoMaterial.defines.NORMAL_TEXTURE=this.supportsNormalTexture?1:0,this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?n:this.depthRenderTarget.texture,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=Ll,void 0===zK&&console.error("THREE.SAOPass relies on DepthLimitedBlurShader"),this.vBlurMaterial=new Qd({uniforms:Kd.clone(zK.uniforms),defines:Object.assign({},zK.defines),vertexShader:zK.vertexShader,fragmentShader:zK.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?n:this.depthRenderTarget.texture,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=Ll,this.hBlurMaterial=new Qd({uniforms:Kd.clone(zK.uniforms),defines:Object.assign({},zK.defines),vertexShader:zK.vertexShader,fragmentShader:zK.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?n:this.depthRenderTarget.texture,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=Ll,void 0===MK&&console.error("THREE.SAOPass relies on CopyShader"),this.materialCopy=new Qd({uniforms:Kd.clone(MK.uniforms),vertexShader:MK.vertexShader,fragmentShader:MK.fragmentShader,blending:Ll}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=Gl,this.materialCopy.blendSrc=eh,this.materialCopy.blendDst=Yl,this.materialCopy.blendEquation=Hl,this.materialCopy.blendSrcAlpha=$l,this.materialCopy.blendDstAlpha=Yl,this.materialCopy.blendEquationAlpha=Hl,void 0===jK&&console.error("THREE.SAOPass relies on UnpackDepthRGBAShader"),this.depthCopy=new Qd({uniforms:Kd.clone(jK.uniforms),vertexShader:jK.vertexShader,fragmentShader:jK.fragmentShader,blending:Ll}),this.fsQuad=new kK(null)}render(t,e,n){if(this.renderToScreen&&(this.materialCopy.blending=Ll,this.materialCopy.uniforms.tDiffuse.value=n.texture,this.materialCopy.needsUpdate=!0,this.renderPass(t,this.materialCopy,null)),1===this.params.output)return;t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const i=t.autoClear;t.autoClear=!1,t.setRenderTarget(this.depthRenderTarget),t.clear(),this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;const r=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=r,this.hBlurMaterial.uniforms.depthCutoff.value=r,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),this.prevStdDev===this.params.saoBlurStdDev&&this.prevNumSamples===this.params.saoBlurRadius||(GK.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new Du(0,1)),GK.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new Du(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),t.setClearColor(0),t.setRenderTarget(this.beautyRenderTarget),t.clear(),t.render(this.scene,this.camera),this.supportsDepthTextureExtension||this.renderOverride(t,this.depthMaterial,this.depthRenderTarget,0,1),this.supportsNormalTexture&&this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(t,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(t,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(t,this.hBlurMaterial,this.saoRenderTarget,16777215,1));let s=this.materialCopy;3===this.params.output?this.supportsDepthTextureExtension?(this.materialCopy.uniforms.tDiffuse.value=this.beautyRenderTarget.depthTexture,this.materialCopy.needsUpdate=!0):(this.depthCopy.uniforms.tDiffuse.value=this.depthRenderTarget.texture,this.depthCopy.needsUpdate=!0,s=this.depthCopy):4===this.params.output?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),0===this.params.output?s.blending=Gl:s.blending=Ll,this.renderPass(t,s,this.renderToScreen?null:n),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=i}renderPass(t,e,n,i,r){t.getClearColor(this.originalClearColor);const s=t.getClearAlpha(),o=t.autoClear;t.setRenderTarget(n),t.autoClear=!1,void 0!==i&&null!==i&&(t.setClearColor(i),t.setClearAlpha(r||0),t.clear()),this.fsQuad.material=e,this.fsQuad.render(t),t.autoClear=o,t.setClearColor(this.originalClearColor),t.setClearAlpha(s)}renderOverride(t,e,n,i,r){t.getClearColor(this.originalClearColor);const s=t.getClearAlpha(),o=t.autoClear;t.setRenderTarget(n),t.autoClear=!1,i=e.clearColor||i,r=e.clearAlpha||r,void 0!==i&&null!==i&&(t.setClearColor(i),t.setClearAlpha(r||0),t.clear()),this.scene.overrideMaterial=e,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=o,t.setClearColor(this.originalClearColor),t.setClearAlpha(s)}setSize(t,e){this.beautyRenderTarget.setSize(t,e),this.saoRenderTarget.setSize(t,e),this.blurIntermediateRenderTarget.setSize(t,e),this.normalRenderTarget.setSize(t,e),this.depthRenderTarget.setSize(t,e),this.saoMaterial.uniforms.size.value.set(t,e),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(t,e),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(t,e),this.hBlurMaterial.needsUpdate=!0}}).OUTPUT={Beauty:1,Default:0,SAO:2,Depth:3,Normal:4};new Du(1/1024,1/512);class VK extends wb{constructor(t,e){super(),this.clipper=t,this.camera=e,this.name="PlanNavigator",this.enabled=!1,this.defaultSectionOffset=1.5,this.defaultCameraOffset=30,this.storeys=[],this.plans={},this.floorPlanViewCached=!1,this.previousCamera=new Vu,this.previousTarget=new Vu,this.previousProjection="Perspective"}get(){return this.plans}dispose(){this.storeys=[],this.plans={},this.clipper.dispose()}async create(t){if(this.plans[t.id])throw new Error("There's already a plan with the id: ".concat(t.id));this.plans[t.id]=t,await this.createClippingPlane(t)}async goTo(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;(null===(n=this.currentPlan)||void 0===n?void 0:n.id)!==t&&(this.storeCameraPosition(),this.hidePreviousClippingPlane(),this.updateCurrentPlan(t),this.activateCurrentPlan(),this.enabled||(await this.moveCameraTo2DPlanPosition(e),this.enabled=!0))}async exitPlanView(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.enabled&&(this.enabled=!1,this.cacheFloorplanView(),this.camera.setNavigationMode("Orbit"),await this.camera.setProjection(this.previousProjection),this.currentPlan&&this.currentPlan.plane&&(this.currentPlan.plane.enabled=!1),this.currentPlan=void 0,await this.camera.controls.setLookAt(this.previousCamera.x,this.previousCamera.y,this.previousCamera.z,this.previousTarget.x,this.previousTarget.y,this.previousTarget.z,t))}storeCameraPosition(){this.enabled?this.cacheFloorplanView():this.store3dCameraPosition()}async createClippingPlane(t){const{normal:e,point:n}=t,i=this.clipper.createFromNormalAndCoplanarPoint(e,n,!0);i.enabled=!1,this.plans[t.id].plane=i,await i.edges.update(),i.edges.visible=!1}cacheFloorplanView(){this.floorPlanViewCached=!0,this.camera.controls.saveState()}async moveCameraTo2DPlanPosition(t){this.floorPlanViewCached?await this.camera.controls.reset(t):await this.camera.controls.setLookAt(0,100,0,0,0,0,t)}activateCurrentPlan(){if(!this.currentPlan)throw new Error("Current plan is not defined.");this.currentPlan.plane&&(this.currentPlan.plane.enabled=!0),this.camera.setNavigationMode("Plan");const t=this.currentPlan.ortho?"Orthographic":"Perspective";this.camera.setProjection(t)}store3dCameraPosition(){this.camera.get().getWorldPosition(this.previousCamera),this.camera.controls.getTarget(this.previousTarget),this.previousProjection=this.camera.getProjection()}updateCurrentPlan(t){if(!this.plans[t])throw new Error("The specified plan is undefined!");this.currentPlan=this.plans[t]}hidePreviousClippingPlane(){var t;const e=null===(t=this.currentPlan)||void 0===t?void 0:t.plane;e&&(e.enabled=!1)}}class WK extends zb{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Vu(Math.PI/2,0,0);super(),this.name="MapboxRenderer",this.enabled=!0,this.beforeUpdate=new Mx,this.afterUpdate=new Mx,this.initialized=new Mx,this._labelRenderer=new Mb,this._renderer=new ry,this._initError="Mapbox scene isn't initialized yet!",this.updateLabelRendererSize=()=>{var t;(null===(t=this._renderer)||void 0===t?void 0:t.domElement)&&this._labelRenderer.setSize(this._renderer.domElement.clientWidth,this._renderer.domElement.clientHeight)},this._components=t,this._map=e,this._modelTransform=this.newModelTransform(n,i),this.setupMap(e),this.setup3DBuildings()}get(){return this._renderer}getSize(){if(!this._renderer)throw new Error(this._initError);return new Du(this._renderer.domElement.clientWidth,this._renderer.domElement.clientHeight)}resize(){}dispose(){this.enabled=!1,window.removeEventListener("resize",this.updateLabelRendererSize),this._renderer.dispose(),this._map.remove(),this._map=null}initialize(t){const e=new ry({canvas:this._map.getCanvas(),context:t,antialias:!0});this._renderer=e,this._renderer.autoClear=!1,this.initializeLabelRenderer(),this.initialized.trigger(e)}setupMap(t){const e=this._components.scene.get(),n=this.newMapboxLayer(((t,e)=>this.initialize(e)),((t,n)=>this.render(e,n)));t.on("style.load",(()=>{t.addLayer(n,"waterway-label")}))}newMapboxLayer(t,e){return{id:"3d-model",type:"custom",renderingMode:"3d",onAdd:t,render:e}}newModelTransform(t,e){return{translateX:t.x,translateY:t.y,translateZ:t.z,rotateX:e.x,rotateY:e.y,rotateZ:e.z,scale:t.meterInMercatorCoordinateUnits()}}render(t,e){if(!this._renderer||!this.enabled)return;this.beforeUpdate.trigger(this);const n=(new Ep).makeRotationAxis(new Vu(1,0,0),this._modelTransform.rotateX),i=(new Ep).makeRotationAxis(new Vu(0,1,0),this._modelTransform.rotateY),r=(new Ep).makeRotationAxis(new Vu(0,0,1),this._modelTransform.rotateZ),s=(new Ep).fromArray(e),o=(new Ep).makeTranslation(this._modelTransform.translateX,this._modelTransform.translateY,this._modelTransform.translateZ).scale(new Vu(this._modelTransform.scale,-this._modelTransform.scale,this._modelTransform.scale)).multiply(n).multiply(i).multiply(r),a=this._components.camera.get();a.projectionMatrix=s.multiply(o),this._renderer.resetState(),this._renderer.render(t,a),this._labelRenderer.render(t,a),this._map.triggerRepaint(),this.afterUpdate.trigger(this)}initializeLabelRenderer(){var t,e;this.updateLabelRendererSize(),window.addEventListener("resize",this.updateLabelRendererSize),this._labelRenderer.domElement.style.position="absolute",this._labelRenderer.domElement.style.top="0px";const n=this._labelRenderer.domElement;null===(e=null===(t=this._renderer)||void 0===t?void 0:t.domElement.parentElement)||void 0===e||e.appendChild(n)}setup3DBuildings(){this._map.on("load",(()=>{const t=this._map.getStyle().layers.find((t=>"symbol"===t.type&&t.layout["text-field"])).id;this._map.addLayer({id:"add-3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}},t)}))}}class ZK extends wb{constructor(){super(...arguments),this.enabled=!0,this.name="MapboxCamera",this._camera=new Jd}get(){return this._camera}}rs("firebase","9.17.2","app");const YK="firebasestorage.googleapis.com",qK="storageBucket";class XK extends ir{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(JK(t),"Firebase Storage: ".concat(e," (").concat(JK(t),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,XK.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return JK(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var KK,QK;function JK(t){return"storage/"+t}function $K(){return new XK(KK.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function tQ(){return new XK(KK.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function eQ(){return new XK(KK.CANCELED,"User canceled the upload/download.")}function nQ(){return new XK(KK.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function iQ(t){return new XK(KK.INVALID_ARGUMENT,t)}function rQ(){return new XK(KK.APP_DELETED,"The Firebase app was deleted.")}function sQ(t,e){return new XK(KK.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function oQ(t){throw new XK(KK.INTERNAL_ERROR,"Internal error: "+t)}!function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(KK||(KK={}));class aQ{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let n;try{n=aQ.makeFromUrl(t,e)}catch(uJ){return new aQ(t,"")}if(""===n.path)return n;throw i=t,new XK(KK.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.");var i}static makeFromUrl(t,e){let n=null;const i="([A-Za-z0-9.\\-_]+)";const r=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}const o=e.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(e===YK?"(?:storage.googleapis.com|storage.cloud.google.com)":e,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const e=a[l],i=e.regex.exec(t);if(i){const t=i[e.indices.bucket];let r=i[e.indices.path];r||(r=""),n=new aQ(t,r),e.postModify(n);break}}if(null==n)throw function(t){return new XK(KK.INVALID_URL,"Invalid URL '"+t+"'.")}(t);return n}}class lQ{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(){}}function hQ(t){return"string"===typeof t||t instanceof String}function cQ(t){return uQ()&&t instanceof Blob}function uQ(){return"undefined"!==typeof Blob&&!nr()}function pQ(t,e,n,i){if(i<e)throw iQ("Invalid value for '".concat(t,"'. Expected ").concat(e," or greater."));if(i>n)throw iQ("Invalid value for '".concat(t,"'. Expected ").concat(n," or less."))}function dQ(t,e,n){let i=e;return null==n&&(i="https://".concat(e)),"".concat(n,"://").concat(i,"/v0").concat(t)}function fQ(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){n=n+(e(i)+"="+e(t[i]))+"&"}return n=n.slice(0,-1),n}function mQ(t,e){const n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),r=-1!==e.indexOf(t);return n||i||r}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(QK||(QK={}));class gQ{constructor(t,e,n,i,r,s,o,a,l,h,c){let u=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=t,this.method_=e,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=c,this.retry=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((t,e)=>{this.resolve_=t,this.reject_=e,this.start_()}))}start_(){const t=(t,e)=>{if(e)return void t(!1,new yQ(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=t=>{const e=t.loaded,n=t.lengthComputable?t.total:-1;null!==this.progressCallback_&&this.progressCallback_(e,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const e=n.getErrorCode()===QK.NO_ERROR,r=n.getStatus();if(!e||mQ(r,this.additionalRetryCodes_)&&this.retry){const e=n.getErrorCode()===QK.ABORT;return void t(!1,new yQ(!1,null,e))}const s=-1!==this.successCodes_.indexOf(r);t(!0,new yQ(s,n))}))},e=(t,e)=>{const n=this.resolve_,i=this.reject_,r=e.connection;if(e.wasSuccessCode)try{const t=this.callback_(r,r.getResponse());!function(t){return void 0!==t}(t)?n():n(t)}catch(uJ){i(uJ)}else if(null!==r){const t=$K();t.serverResponse=r.getErrorText(),this.errorCallback_?i(this.errorCallback_(r,t)):i(t)}else if(e.canceled){i(this.appDelete_?rQ():eQ())}else{i(tQ())}};this.canceled_?e(0,new yQ(!1,null,!0)):this.backoffId_=function(t,e,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return 2===a}let h=!1;function c(){if(!h){h=!0;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.apply(null,n)}}function u(e){r=setTimeout((()=>{r=null,t(d,l())}),e)}function p(){s&&clearTimeout(s)}function d(t){if(h)return void p();for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(t)return p(),void c.call(null,t,...n);if(l()||o)return p(),void c.call(null,t,...n);let s;i<64&&(i*=2),1===a?(a=2,s=0):s=1e3*(i+Math.random()),u(s)}let f=!1;function m(t){f||(f=!0,p(),h||(null!==r?(t||(a=2),clearTimeout(r),u(0)):t||(a=1)))}return u(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class yQ{constructor(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}function vQ(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function _Q(){const t=vQ();for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(void 0!==t){const e=new t;for(let t=0;t<n.length;t++)e.append(n[t]);return e.getBlob()}if(uQ())return new Blob(n);throw new XK(KK.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function TQ(t){if("undefined"===typeof atob)throw e="base-64",new XK(KK.UNSUPPORTED_ENVIRONMENT,"".concat(e," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var e;return atob(t)}const EQ={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class xQ{constructor(t,e){this.data=t,this.contentType=e||null}}function bQ(t,e){switch(t){case EQ.RAW:return new xQ(IQ(e));case EQ.BASE64:case EQ.BASE64URL:return new xQ(wQ(t,e));case EQ.DATA_URL:return new xQ(function(t){const e=new SQ(t);return e.base64?wQ(EQ.BASE64,e.rest):function(t){let e;try{e=decodeURIComponent(t)}catch(uJ){throw sQ(EQ.DATA_URL,"Malformed data URL.")}return IQ(e)}(e.rest)}(e),new SQ(e).contentType)}throw $K()}function IQ(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|63&i);else if(55296===(64512&i)){if(n<t.length-1&&56320===(64512&t.charCodeAt(n+1))){i=65536|(1023&i)<<10|1023&t.charCodeAt(++n),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)}else e.push(239,191,189)}else 56320===(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function wQ(t,e){switch(t){case EQ.BASE64:{const n=-1!==e.indexOf("-"),i=-1!==e.indexOf("_");if(n||i){throw sQ(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case EQ.BASE64URL:{const n=-1!==e.indexOf("+"),i=-1!==e.indexOf("/");if(n||i){throw sQ(t,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=TQ(e)}catch(uJ){if(uJ.message.includes("polyfill"))throw uJ;throw sQ(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class SQ{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw sQ(EQ.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=e[1]||null;null!=n&&(this.base64=function(t,e){const n=t.length>=e.length;if(!n)return!1;return t.substring(t.length-e.length)===e}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)}}class RQ{constructor(t,e){let n=0,i="";cQ(t)?(this.data_=t,n=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(cQ(this.data_)){const n=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,t,e);return null===n?null:new RQ(n)}{const n=new Uint8Array(this.data_.buffer,t,e-t);return new RQ(n,!0)}}static getBlob(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(uQ()){const t=e.map((t=>t instanceof RQ?t.data_:t));return new RQ(_Q.apply(null,t))}{const t=e.map((t=>hQ(t)?bQ(EQ.RAW,t).data:t.data_));let n=0;t.forEach((t=>{n+=t.byteLength}));const i=new Uint8Array(n);let r=0;return t.forEach((t=>{for(let e=0;e<t.length;e++)i[r++]=t[e]})),new RQ(i,!0)}}uploadData(){return this.data_}}function CQ(t){let e;try{e=JSON.parse(t)}catch(uJ){return null}return function(t){return"object"===typeof t&&!Array.isArray(t)}(e)?e:null}function AQ(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function DQ(t,e){return e}class OQ{constructor(t,e,n,i){this.server=t,this.local=e||t,this.writable=!!n,this.xform=i||DQ}}let NQ=null;function MQ(){if(NQ)return NQ;const t=[];t.push(new OQ("bucket")),t.push(new OQ("generation")),t.push(new OQ("metageneration")),t.push(new OQ("name","fullPath",!0));const e=new OQ("name");e.xform=function(t,e){return function(t){return!hQ(t)||t.length<2?t:AQ(t)}(e)},t.push(e);const n=new OQ("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new OQ("timeCreated")),t.push(new OQ("updated")),t.push(new OQ("md5Hash",null,!0)),t.push(new OQ("cacheControl",null,!0)),t.push(new OQ("contentDisposition",null,!0)),t.push(new OQ("contentEncoding",null,!0)),t.push(new OQ("contentLanguage",null,!0)),t.push(new OQ("contentType",null,!0)),t.push(new OQ("metadata","customMetadata",!0)),NQ=t,NQ}function PQ(t,e,n){const i={type:"file"},r=n.length;for(let s=0;s<r;s++){const t=n[s];i[t.local]=t.xform(i,e[t.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){const n=t.bucket,i=t.fullPath,r=new aQ(n,i);return e._makeStorageReference(r)}})}(i,t),i}function FQ(t,e,n){const i=CQ(e);if(null===i)return null;return PQ(t,i,n)}function LQ(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class kQ{constructor(t,e,n,i){this.url=t,this.method=e,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function UQ(t){if(!t)throw $K()}function BQ(t,e){return function(n,i){const r=FQ(t,i,e);return UQ(null!==r),r}}function zQ(t,e){return function(n,i){const r=FQ(t,i,e);return UQ(null!==r),function(t,e,n,i){const r=CQ(e);if(null===r)return null;if(!hQ(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((e=>{const r=t.bucket,s=t.fullPath;return dQ("/b/"+o(r)+"/o/"+o(s),n,i)+fQ({alt:"media",token:e})}))[0]}(r,i,t.host,t._protocol)}}function GQ(t){return function(e,n){let i;var r,s;return 401===e.getStatus()?i=e.getErrorText().includes("Firebase App Check token is invalid")?new XK(KK.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new XK(KK.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(s=t.bucket,i=new XK(KK.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(r=t.path,i=new XK(KK.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):i=n,i.status=e.getStatus(),i.serverResponse=n.serverResponse,i}}function HQ(t){const e=GQ(t);return function(n,i){let r=e(n,i);var s;return 404===n.getStatus()&&(s=t.path,r=new XK(KK.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),r.serverResponse=i.serverResponse,r}}function jQ(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}function VQ(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let t="";for(let e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();o["Content-Type"]="multipart/related; boundary="+a;const l=jQ(e,i,r),h="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+LQ(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",c="\r\n--"+a+"--",u=RQ.getBlob(h,i,c);if(null===u)throw nQ();const p={name:l.fullPath},d=dQ(s,t.host,t._protocol),f=t.maxUploadRetryTime,m=new kQ(d,"POST",BQ(t,n),f);return m.urlParams=p,m.headers=o,m.body=u.uploadData(),m.errorHandler=GQ(e),m}let WQ=null;class ZQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=QK.NO_ERROR,this.sendPromise_=new Promise((t=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=QK.ABORT,t()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=QK.NETWORK_ERROR,t()})),this.xhr_.addEventListener("load",(()=>{t()}))}))}send(t,e,n,i){if(this.sent_)throw oQ("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(const r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw oQ("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw oQ("cannot .getStatus() before sending");try{return this.xhr_.status}catch(uJ){return-1}}getResponse(){if(!this.sent_)throw oQ("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw oQ("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class YQ extends ZQ{initXhr(){this.xhr_.responseType="text"}}function qQ(){return WQ?WQ():new YQ}class XQ{constructor(t,e){this._service=t,this._location=e instanceof aQ?e:aQ.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new XQ(t,e)}get root(){const t=new aQ(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AQ(this._location.path)}get storage(){return this._service}get parent(){const t=function(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;const e=new aQ(this._location.bucket,t);return new XQ(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw function(t){return new XK(KK.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)}}function KQ(t,e,n){t._throwIfRoot("uploadBytes");const i=VQ(t.storage,t._location,MQ(),new RQ(e,!0),n);return t.storage.makeRequestWithTokens(i,qQ).then((e=>({metadata:e,ref:t})))}function QQ(t){t._throwIfRoot("getDownloadURL");const e=function(t,e,n){const i=dQ(e.fullServerUrl(),t.host,t._protocol),r=t.maxOperationRetryTime,s=new kQ(i,"GET",zQ(t,n),r);return s.errorHandler=HQ(e),s}(t.storage,t._location,MQ());return t.storage.makeRequestWithTokens(e,qQ).then((t=>{if(null===t)throw new XK(KK.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t}))}function JQ(t){t._throwIfRoot("deleteObject");const e=function(t,e){const n=dQ(e.fullServerUrl(),t.host,t._protocol),i=t.maxOperationRetryTime,r=new kQ(n,"DELETE",(function(t,e){}),i);return r.successCodes=[200,204],r.errorHandler=HQ(e),r}(t.storage,t._location);return t.storage.makeRequestWithTokens(e,qQ)}function $Q(t,e){const n=function(t,e){const n=e.split("/").filter((t=>t.length>0)).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),i=new aQ(t._location.bucket,n);return new XQ(t.storage,i)}function tJ(t,e){if(t instanceof iJ){const n=t;if(null==n._bucket)throw new XK(KK.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+qK+"' property when initializing the app?");const i=new XQ(n,n._bucket);return null!=e?tJ(i,e):i}return void 0!==e?$Q(t,e):t}function eJ(t,e){if(e&&/^[A-Za-z]+:\/\//.test(e)){if(t instanceof iJ)return new XQ(t,e);throw iQ("To use ref(service, url), the first argument must be a Storage instance.")}return tJ(t,e)}function nJ(t,e){const n=null===e||void 0===e?void 0:e[qK];return null==n?null:aQ.makeFromBucketSpec(n,t)}class iJ{constructor(t,e,n,i,r){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=YK,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?aQ.makeFromBucketSpec(i,this._host):nJ(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,null!=this._url?this._bucket=aQ.makeFromBucketSpec(this._url,t):this._bucket=nJ(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){pQ("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){pQ("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(null!==e)return e.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});if(t){return(await t.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((t=>t.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new XQ(this,t)}_makeRequest(t,e,n,i){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new lQ(rQ());{const s=function(t,e,n,i,r,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=fQ(t.urlParams),l=t.url+a,h=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(h,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(h,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}(h,s),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(h,i),new gQ(l,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o)}(t,this._appId,n,i,e,this._firebaseVersion,r);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(t,e){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,n,i).getPromise()}}const rJ="@firebase/storage",sJ="0.11.2",oJ="storage";function aJ(t){return JQ(t=dr(t))}function lJ(t,e){return eJ(t=dr(t),e)}function hJ(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:is(),e=arguments.length>1?arguments[1]:void 0;t=dr(t);const n=Jr(t,oJ).getImmediate({identifier:e}),i=Ki("storage");return i&&function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.host="".concat(e,":").concat(n),t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken="string"===typeof r?r:tr(r,t.app.options.projectId))}(t,e,n,i)}(n,...i),n}function cJ(t,e){let{instanceIdentifier:n}=e;const i=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new iJ(i,r,s,n,es)}Qr(new fr(oJ,cJ,"PUBLIC").setMultipleInstances(!0)),rs(rJ,sJ,""),rs(rJ,sJ,"esm2017");const uJ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,pJ=Object.keys,dJ=Array.isArray;function fJ(t,e){return"object"!=typeof e||pJ(e).forEach((function(n){t[n]=e[n]})),t}"undefined"==typeof Promise||uJ.Promise||(uJ.Promise=Promise);const mJ=Object.getPrototypeOf,gJ={}.hasOwnProperty;function yJ(t,e){return gJ.call(t,e)}function vJ(t,e){"function"==typeof e&&(e=e(mJ(t))),("undefined"==typeof Reflect?pJ:Reflect.ownKeys)(e).forEach((n=>{TJ(t,n,e[n])}))}const _J=Object.defineProperty;function TJ(t,e,n,i){_J(t,e,fJ(n&&yJ(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function EJ(t){return{from:function(e){return t.prototype=Object.create(e.prototype),TJ(t.prototype,"constructor",t),{extend:vJ.bind(null,t.prototype)}}}}const xJ=Object.getOwnPropertyDescriptor;function bJ(t,e){let n;return xJ(t,e)||(n=mJ(t))&&bJ(n,e)}const IJ=[].slice;function wJ(t,e,n){return IJ.call(t,e,n)}function SJ(t,e){return e(t)}function RJ(t){if(!t)throw new Error("Assertion Failed")}function CJ(t){uJ.setImmediate?setImmediate(t):setTimeout(t,0)}function AJ(t,e){return t.reduce(((t,n,i)=>{var r=e(n,i);return r&&(t[r[0]]=r[1]),t}),{})}function DJ(t,e){if(yJ(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],i=0,r=e.length;i<r;++i){var s=DJ(t,e[i]);n.push(s)}return n}var o=e.indexOf(".");if(-1!==o){var a=t[e.substr(0,o)];return void 0===a?void 0:DJ(a,e.substr(o+1))}}function OJ(t,e,n){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){RJ("string"!=typeof n&&"length"in n);for(var i=0,r=e.length;i<r;++i)OJ(t,e[i],n[i])}else{var s=e.indexOf(".");if(-1!==s){var o=e.substr(0,s),a=e.substr(s+1);if(""===a)void 0===n?dJ(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var l=t[o];l&&yJ(t,o)||(l=t[o]={}),OJ(l,a,n)}}else void 0===n?dJ(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function NJ(t){var e={};for(var n in t)yJ(t,n)&&(e[n]=t[n]);return e}const MJ=[].concat;function PJ(t){return MJ.apply([],t)}const FJ="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(PJ([8,16,32,64].map((t=>["Int","Uint","Float"].map((e=>e+t+"Array")))))).filter((t=>uJ[t])),LJ=FJ.map((t=>uJ[t]));AJ(FJ,(t=>[t,!0]));let kJ=null;function UJ(t){kJ="undefined"!=typeof WeakMap&&new WeakMap;const e=BJ(t);return kJ=null,e}function BJ(t){if(!t||"object"!=typeof t)return t;let e=kJ&&kJ.get(t);if(e)return e;if(dJ(t)){e=[],kJ&&kJ.set(t,e);for(var n=0,i=t.length;n<i;++n)e.push(BJ(t[n]))}else if(LJ.indexOf(t.constructor)>=0)e=t;else{const n=mJ(t);for(var r in e=n===Object.prototype?{}:Object.create(n),kJ&&kJ.set(t,e),t)yJ(t,r)&&(e[r]=BJ(t[r]))}return e}const{toString:zJ}={};function GJ(t){return zJ.call(t).slice(8,-1)}const HJ="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",jJ="symbol"==typeof HJ?function(t){var e;return null!=t&&(e=t[HJ])&&e.apply(t)}:function(){return null},VJ={};function WJ(t){var e,n,i,r;if(1===arguments.length){if(dJ(t))return t.slice();if(this===VJ&&"string"==typeof t)return[t];if(r=jJ(t)){for(n=[];!(i=r.next()).done;)n.push(i.value);return n}if(null==t)return[t];if("number"==typeof(e=t.length)){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const ZJ="undefined"!=typeof Symbol?t=>"AsyncFunction"===t[Symbol.toStringTag]:()=>!1;var YJ="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function qJ(t,e){YJ=t,XJ=e}var XJ=()=>!0;const KJ=!new Error("").stack;function QJ(){if(KJ)try{throw QJ.arguments,new Error}catch(uJ){return uJ}return new Error}function JJ(t,e){var n=t.stack;return n?(e=e||0,0===n.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),n.split("\n").slice(e).filter(XJ).map((t=>"\n"+t)).join("")):""}var $J=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],t$=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat($J),e$={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function n$(t,e){this._e=QJ(),this.name=t,this.message=e}function i$(t,e){return t+". Errors: "+Object.keys(e).map((t=>e[t].toString())).filter(((t,e,n)=>n.indexOf(t)===e)).join("\n")}function r$(t,e,n,i){this._e=QJ(),this.failures=e,this.failedKeys=i,this.successCount=n,this.message=i$(t,e)}function s$(t,e){this._e=QJ(),this.name="BulkError",this.failures=Object.keys(e).map((t=>e[t])),this.failuresByPos=e,this.message=i$(t,e)}EJ(n$).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+JJ(this._e,2))}},toString:function(){return this.name+": "+this.message}}),EJ(r$).from(n$),EJ(s$).from(n$);var o$=t$.reduce(((t,e)=>(t[e]=e+"Error",t)),{});const a$=n$;var l$=t$.reduce(((t,e)=>{var n=e+"Error";function i(t,i){this._e=QJ(),this.name=n,t?"string"==typeof t?(this.message="".concat(t).concat(i?"\n "+i:""),this.inner=i||null):"object"==typeof t&&(this.message="".concat(t.name," ").concat(t.message),this.inner=t):(this.message=e$[e]||n,this.inner=null)}return EJ(i).from(a$),t[e]=i,t}),{});l$.Syntax=SyntaxError,l$.Type=TypeError,l$.Range=RangeError;var h$=$J.reduce(((t,e)=>(t[e+"Error"]=l$[e],t)),{}),c$=t$.reduce(((t,e)=>(-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=l$[e]),t)),{});function u$(){}function p$(t){return t}function d$(t,e){return null==t||t===p$?e:function(n){return e(t(n))}}function f$(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function m$(t,e){return t===u$?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var i=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?f$(i,this.onsuccess):i),r&&(this.onerror=this.onerror?f$(r,this.onerror):r),void 0!==s?s:n}}function g$(t,e){return t===u$?e:function(){t.apply(this,arguments);var n=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?f$(n,this.onsuccess):n),i&&(this.onerror=this.onerror?f$(i,this.onerror):i)}}function y$(t,e){return t===u$?e:function(n){var i=t.apply(this,arguments);fJ(n,i);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?f$(r,this.onsuccess):r),s&&(this.onerror=this.onerror?f$(s,this.onerror):s),void 0===i?void 0===o?void 0:o:fJ(i,o)}}function v$(t,e){return t===u$?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function _$(t,e){return t===u$?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var i=this,r=arguments.length,s=new Array(r);r--;)s[r]=arguments[r];return n.then((function(){return e.apply(i,s)}))}return e.apply(this,arguments)}}c$.ModifyError=r$,c$.DexieError=n$,c$.BulkError=s$;var T$={};const[E$,x$,b$]="undefined"==typeof Promise?[]:(()=>{let t=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[t,mJ(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,mJ(e),t]})(),I$=x$&&x$.then,w$=E$&&E$.constructor,S$=!!b$;var R$=!1,C$=b$?()=>{b$.then(Q$)}:uJ.setImmediate?setImmediate.bind(null,Q$):uJ.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver((()=>{Q$(),t=null})).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Q$,0)},A$=function(t,e){U$.push([t,e]),O$&&(C$(),O$=!1)},D$=!0,O$=!0,N$=[],M$=[],P$=null,F$=p$,L$={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:E0,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((t=>{try{E0(t[0],t[1])}catch(t){}}))}},k$=L$,U$=[],B$=0,z$=[];function G$(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=u$,this._lib=!1;var e=this._PSD=k$;if(YJ&&(this._stackHolder=QJ(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==T$)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&W$(this,this._value))}this._state=null,this._value=null,++e.ref,V$(this,t)}const H$={get:function(){var t=k$,e=a0;function n(n,i){var r=!t.global&&(t!==k$||e!==a0);const s=r&&!u0();var o=new G$(((e,o)=>{Y$(this,new j$(_0(n,t,r,s),_0(i,t,r,s),e,o,t))}));return YJ&&K$(o,this),o}return n.prototype=T$,n},set:function(t){TJ(this,"then",t&&t.prototype===T$?H$:{get:function(){return t},set:H$.set})}};function j$(t,e,n,i,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=i,this.psd=r}function V$(t,e){try{e((e=>{if(null===t._state){if(e===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&J$();e&&"function"==typeof e.then?V$(t,((t,n)=>{e instanceof G$?e._then(t,n):e.then(t,n)})):(t._state=!0,t._value=e,Z$(t)),n&&$$()}}),W$.bind(null,t))}catch(e){W$(t,e)}}function W$(t,e){if(M$.push(e),null===t._state){var n=t._lib&&J$();e=F$(e),t._state=!1,t._value=e,YJ&&null!==e&&"object"==typeof e&&!e._promise&&function(t,e,n){try{t.apply(null,void 0)}catch(t){}}((()=>{var n=bJ(e,"stack");e._promise=t,TJ(e,"stack",{get:()=>R$?n&&(n.get?n.get.apply(e):n.value):t.stack})})),function(t){N$.some((e=>e._value===t._value))||N$.push(t)}(t),Z$(t),n&&$$()}}function Z$(t){var e=t._listeners;t._listeners=[];for(var n=0,i=e.length;n<i;++n)Y$(t,e[n]);var r=t._PSD;--r.ref||r.finalize(),0===B$&&(++B$,A$((()=>{0==--B$&&t0()}),[]))}function Y$(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++B$,A$(q$,[n,t,e])}else t._listeners.push(e)}function q$(t,e,n){try{P$=e;var i,r=e._value;e._state?i=t(r):(M$.length&&(M$=[]),i=t(r),-1===M$.indexOf(r)&&function(t){for(var e=N$.length;e;)if(N$[--e]._value===t._value)return void N$.splice(e,1)}(e)),n.resolve(i)}catch(t){n.reject(t)}finally{P$=null,0==--B$&&t0(),--n.psd.ref||n.psd.finalize()}}function X$(t,e,n){if(e.length===n)return e;var i="";if(!1===t._state){var r,s,o=t._value;null!=o?(r=o.name||"Error",s=o.message||o,i=JJ(o,0)):(r=o,s=""),e.push(r+(s?": "+s:"")+i)}return YJ&&((i=JJ(t._stackHolder,2))&&-1===e.indexOf(i)&&e.push(i),t._prev&&X$(t._prev,e,n)),e}function K$(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Q$(){J$()&&$$()}function J$(){var t=D$;return D$=!1,O$=!1,t}function $$(){var t,e,n;do{for(;U$.length>0;)for(t=U$,U$=[],n=t.length,e=0;e<n;++e){var i=t[e];i[0].apply(null,i[1])}}while(U$.length>0);D$=!0,O$=!0}function t0(){var t=N$;N$=[],t.forEach((t=>{t._PSD.onunhandled.call(null,t._value,t)}));for(var e=z$.slice(0),n=e.length;n;)e[--n]()}function e0(t){return new G$(T$,!1,t)}function n0(t,e){var n=k$;return function(){var i=J$(),r=k$;try{return m0(n,!0),t.apply(this,arguments)}catch(t){e&&e(t)}finally{m0(r,!1),i&&$$()}}}vJ(G$.prototype,{then:H$,_then:function(t,e){Y$(this,new j$(null,null,t,e,k$))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return"function"==typeof e?this.then(null,(t=>t instanceof e?n(t):e0(t))):this.then(null,(t=>t&&t.name===e?n(t):e0(t)))},finally:function(t){return this.then((e=>(t(),e)),(e=>(t(),e0(e))))},stack:{get:function(){if(this._stack)return this._stack;try{R$=!0;var t=X$(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{R$=!1}}},timeout:function(t,e){return t<1/0?new G$(((n,i)=>{var r=setTimeout((()=>i(new l$.Timeout(e))),t);this.then(n,i).finally(clearTimeout.bind(null,r))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&TJ(G$.prototype,Symbol.toStringTag,"Dexie.Promise"),L$.env=g0(),vJ(G$,{all:function(){var t=WJ.apply(null,arguments).map(p0);return new G$((function(e,n){0===t.length&&e([]);var i=t.length;t.forEach(((r,s)=>G$.resolve(r).then((n=>{t[s]=n,--i||e(t)}),n)))}))},resolve:t=>{if(t instanceof G$)return t;if(t&&"function"==typeof t.then)return new G$(((e,n)=>{t.then(e,n)}));var e=new G$(T$,!0,t);return K$(e,P$),e},reject:e0,race:function(){var t=WJ.apply(null,arguments).map(p0);return new G$(((e,n)=>{t.map((t=>G$.resolve(t).then(e,n)))}))},PSD:{get:()=>k$,set:t=>k$=t},totalEchoes:{get:()=>a0},newPSD:h0,usePSD:y0,scheduler:{get:()=>A$,set:t=>{A$=t}},rejectionMapper:{get:()=>F$,set:t=>{F$=t}},follow:(t,e)=>new G$(((n,i)=>h0(((e,n)=>{var i=k$;i.unhandleds=[],i.onunhandled=n,i.finalize=f$((function(){!function(t){z$.push((function e(){t(),z$.splice(z$.indexOf(e),1)})),++B$,A$((()=>{0==--B$&&t0()}),[])}((()=>{0===this.unhandleds.length?e():n(this.unhandleds[0])}))}),i.finalize),t()}),e,n,i)))}),w$&&(w$.allSettled&&TJ(G$,"allSettled",(function(){const t=WJ.apply(null,arguments).map(p0);return new G$((e=>{0===t.length&&e([]);let n=t.length;const i=new Array(n);t.forEach(((t,r)=>G$.resolve(t).then((t=>i[r]={status:"fulfilled",value:t}),(t=>i[r]={status:"rejected",reason:t})).then((()=>--n||e(i)))))}))})),w$.any&&"undefined"!=typeof AggregateError&&TJ(G$,"any",(function(){const t=WJ.apply(null,arguments).map(p0);return new G$(((e,n)=>{0===t.length&&n(new AggregateError([]));let i=t.length;const r=new Array(i);t.forEach(((t,s)=>G$.resolve(t).then((t=>e(t)),(t=>{r[s]=t,--i||n(new AggregateError(r))}))))}))})));const i0={awaits:0,echoes:0,id:0};var r0=0,s0=[],o0=0,a0=0,l0=0;function h0(t,e,n,i){var r=k$,s=Object.create(r);s.parent=r,s.ref=0,s.global=!1,s.id=++l0;var o=L$.env;s.env=S$?{Promise:G$,PromiseProp:{value:G$,configurable:!0,writable:!0},all:G$.all,race:G$.race,allSettled:G$.allSettled,any:G$.any,resolve:G$.resolve,reject:G$.reject,nthen:T0(o.nthen,s),gthen:T0(o.gthen,s)}:{},e&&fJ(s,e),++r.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=y0(s,t,n,i);return 0===s.ref&&s.finalize(),a}function c0(){return i0.id||(i0.id=++r0),++i0.awaits,i0.echoes+=100,i0.id}function u0(){return!!i0.awaits&&(0==--i0.awaits&&(i0.id=0),i0.echoes=100*i0.awaits,!0)}function p0(t){return i0.echoes&&t&&t.constructor===w$?(c0(),t.then((t=>(u0(),t)),(t=>(u0(),x0(t))))):t}function d0(t){++a0,i0.echoes&&0!=--i0.echoes||(i0.echoes=i0.id=0),s0.push(k$),m0(t,!0)}function f0(){var t=s0[s0.length-1];s0.pop(),m0(t,!1)}function m0(t,e){var n=k$;if((e?!i0.echoes||o0++&&t===k$:!o0||--o0&&t===k$)||v0(e?d0.bind(null,t):f0),t!==k$&&(k$=t,n===L$&&(L$.env=g0()),S$)){var i=L$.env.Promise,r=t.env;x$.then=r.nthen,i.prototype.then=r.gthen,(n.global||t.global)&&(Object.defineProperty(uJ,"Promise",r.PromiseProp),i.all=r.all,i.race=r.race,i.resolve=r.resolve,i.reject=r.reject,r.allSettled&&(i.allSettled=r.allSettled),r.any&&(i.any=r.any))}}function g0(){var t=uJ.Promise;return S$?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(uJ,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:x$.then,gthen:t.prototype.then}:{}}function y0(t,e,n,i,r){var s=k$;try{return m0(t,!0),e(n,i,r)}finally{m0(s,!1)}}function v0(t){I$.call(E$,t)}function _0(t,e,n,i){return"function"!=typeof t?t:function(){var r=k$;n&&c0(),m0(e,!0);try{return t.apply(this,arguments)}finally{m0(r,!1),i&&v0(u0)}}}function T0(t,e){return function(n,i){return t.call(this,_0(n,e),_0(i,e))}}function E0(t,e){var n;try{n=e.onuncatched(t)}catch(uJ){}if(!1!==n)try{var i,r={promise:e,reason:t};if(uJ.document&&document.createEvent?((i=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),fJ(i,r)):uJ.CustomEvent&&fJ(i=new CustomEvent("unhandledrejection",{detail:r}),r),i&&uJ.dispatchEvent&&(dispatchEvent(i),!uJ.PromiseRejectionEvent&&uJ.onunhandledrejection))try{uJ.onunhandledrejection(i)}catch(uJ){}YJ&&i&&!i.defaultPrevented&&console.warn("Unhandled rejection: ".concat(t.stack||t))}catch(uJ){}}-1===(""+I$).indexOf("[native code]")&&(c0=u0=u$);var x0=G$.reject;function b0(t,e,n,i){if(t.idbdb&&(t._state.openComplete||k$.letThrough||t._vip)){var r=t._createTransaction(e,n,t._dbSchema);try{r.create(),t._state.PR1398_maxLoop=3}catch(r){return r.name===o$.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then((()=>b0(t,e,n,i)))):x0(r)}return r._promise(e,((t,e)=>h0((()=>(k$.trans=r,i(t,e,r)))))).then((t=>r._completion.then((()=>t))))}if(t._state.openComplete)return x0(new l$.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return x0(new l$.DatabaseClosed);t.open().catch(u$)}return t._state.dbReadyPromise.then((()=>b0(t,e,n,i)))}const I0=String.fromCharCode(65535),w0="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",S0=[],R0="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),C0=R0,A0=R0,D0=t=>!/(dexie\.js|dexie\.min\.js)/.test(t);function O0(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const N0={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function M0(t){return"string"!=typeof t||/\./.test(t)?t=>t:e=>(void 0===e[t]&&t in e&&delete(e=UJ(e))[t],e)}class P0{_trans(t,e,n){const i=this._tx||k$.trans,r=this.name;function s(t,n,i){if(!i.schema[r])throw new l$.NotFound("Table "+r+" not part of transaction");return e(i.idbtrans,i)}const o=J$();try{return i&&i.db===this.db?i===k$.trans?i._promise(t,s,n):h0((()=>i._promise(t,s,n)),{trans:i,transless:k$.transless||k$}):b0(this.db,t,[this.name],s)}finally{o&&$$()}}get(t,e){return t&&t.constructor===Object?this.where(t).first(e):this._trans("readonly",(e=>this.core.get({trans:e,key:t}).then((t=>this.hook.reading.fire(t))))).then(e)}where(t){if("string"==typeof t)return new this.db.WhereClause(this,t);if(dJ(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));const e=pJ(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter((t=>t.compound&&e.every((e=>t.keyPath.indexOf(e)>=0))&&t.keyPath.every((t=>e.indexOf(t)>=0))))[0];if(n&&this.db._maxKey!==I0)return this.where(n.name).equals(n.keyPath.map((e=>t[e])));!n&&YJ&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit of a compound index [").concat(e.join("+"),"]"));const{idxByName:i}=this.schema,r=this.db._deps.indexedDB;function s(t,e){try{return 0===r.cmp(t,e)}catch(t){return!1}}const[o,a]=e.reduce(((e,n)=>{let[r,o]=e;const a=i[n],l=t[n];return[r||a,r||!a?O0(o,a&&a.multi?t=>{const e=DJ(t,n);return dJ(e)&&e.some((t=>s(l,t)))}:t=>s(l,DJ(t,n))):o]}),[null,null]);return o?this.where(o.name).equals(t[o.keyPath]).filter(a):n?this.filter(a):this.where(e).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,dJ(t)?"[".concat(t.join("+"),"]"):t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const e=e=>{if(!e)return e;const n=Object.create(t.prototype);for(var i in e)if(yJ(e,i))try{n[i]=e[i]}catch(t){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=e,this.hook("reading",e),t}defineClass(){return this.mapToClass((function(t){fJ(this,t)}))}add(t,e){const{auto:n,keyPath:i}=this.schema.primKey;let r=t;return i&&n&&(r=M0(i)(t)),this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"add",keys:null!=e?[e]:null,values:[r]}))).then((t=>t.numFailures?G$.reject(t.failures[0]):t.lastResult)).then((e=>{if(i)try{OJ(t,i,e)}catch(t){}return e}))}update(t,e){if("object"!=typeof t||dJ(t))return this.where(":id").equals(t).modify(e);{const n=DJ(t,this.schema.primKey.keyPath);if(void 0===n)return x0(new l$.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof e?pJ(e).forEach((n=>{OJ(t,n,e[n])})):e(t,{value:t,primKey:n})}catch(t){}return this.where(":id").equals(n).modify(e)}}put(t,e){const{auto:n,keyPath:i}=this.schema.primKey;let r=t;return i&&n&&(r=M0(i)(t)),this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"put",values:[r],keys:null!=e?[e]:null}))).then((t=>t.numFailures?G$.reject(t.failures[0]):t.lastResult)).then((e=>{if(i)try{OJ(t,i,e)}catch(t){}return e}))}delete(t){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"delete",keys:[t]}))).then((t=>t.numFailures?G$.reject(t.failures[0]):void 0))}clear(){return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"deleteRange",range:N0}))).then((t=>t.numFailures?G$.reject(t.failures[0]):void 0))}bulkGet(t){return this._trans("readonly",(e=>this.core.getMany({keys:t,trans:e}).then((t=>t.map((t=>this.hook.reading.fire(t)))))))}bulkAdd(t,e,n){const i=Array.isArray(e)?e:void 0,r=(n=n||(i?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",(e=>{const{auto:n,keyPath:s}=this.schema.primKey;if(s&&i)throw new l$.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new l$.InvalidArgument("Arguments objects and keys must have the same length");const o=t.length;let a=s&&n?t.map(M0(s)):t;return this.core.mutate({trans:e,type:"add",keys:i,values:a,wantResults:r}).then((t=>{let{numFailures:e,results:n,lastResult:i,failures:s}=t;if(0===e)return r?n:i;throw new s$("".concat(this.name,".bulkAdd(): ").concat(e," of ").concat(o," operations failed"),s)}))}))}bulkPut(t,e,n){const i=Array.isArray(e)?e:void 0,r=(n=n||(i?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",(e=>{const{auto:n,keyPath:s}=this.schema.primKey;if(s&&i)throw new l$.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new l$.InvalidArgument("Arguments objects and keys must have the same length");const o=t.length;let a=s&&n?t.map(M0(s)):t;return this.core.mutate({trans:e,type:"put",keys:i,values:a,wantResults:r}).then((t=>{let{numFailures:e,results:n,lastResult:i,failures:s}=t;if(0===e)return r?n:i;throw new s$("".concat(this.name,".bulkPut(): ").concat(e," of ").concat(o," operations failed"),s)}))}))}bulkDelete(t){const e=t.length;return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"delete",keys:t}))).then((t=>{let{numFailures:n,lastResult:i,failures:r}=t;if(0===n)return i;throw new s$("".concat(this.name,".bulkDelete(): ").concat(n," of ").concat(e," operations failed"),r)}))}}function F0(t){var e={},n=function(n,i){if(i){for(var r=arguments.length,s=new Array(r-1);--r;)s[r-1]=arguments[r];return e[n].subscribe.apply(null,s),t}if("string"==typeof n)return e[n]};n.addEventType=s;for(var i=1,r=arguments.length;i<r;++i)s(arguments[i]);return n;function s(t,i,r){if("object"==typeof t)return o(t);i||(i=v$),r||(r=u$);var s={subscribers:[],fire:r,subscribe:function(t){-1===s.subscribers.indexOf(t)&&(s.subscribers.push(t),s.fire=i(s.fire,t))},unsubscribe:function(t){s.subscribers=s.subscribers.filter((function(e){return e!==t})),s.fire=s.subscribers.reduce(i,r)}};return e[t]=n[t]=s,s}function o(t){pJ(t).forEach((function(e){var n=t[e];if(dJ(n))s(e,t[e][0],t[e][1]);else{if("asap"!==n)throw new l$.InvalidArgument("Invalid event config");var i=s(e,p$,(function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];i.subscribers.forEach((function(t){CJ((function(){t.apply(null,e)}))}))}))}}))}}function L0(t,e){return EJ(e).from({prototype:t}),e}function k0(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function U0(t,e){t.filter=O0(t.filter,e)}function B0(t,e,n){var i=t.replayFilter;t.replayFilter=i?()=>O0(i(),e()):e,t.justLimit=n&&!i}function z0(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new l$.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function G0(t,e,n){const i=z0(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:i,range:t.range}})}function H0(t,e,n,i){const r=t.replayFilter?O0(t.filter,t.replayFilter()):t.filter;if(t.or){const s={},o=(t,n,i)=>{if(!r||r(n,i,(t=>n.stop(t)),(t=>n.fail(t)))){var o=n.primaryKey,a=""+o;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(o)),yJ(s,a)||(s[a]=!0,e(t,n,i))}};return Promise.all([t.or._iterate(o,n),j0(G0(t,i,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return j0(G0(t,i,n),O0(t.algorithm,r),e,!t.keysOnly&&t.valueMapper)}function j0(t,e,n,i){var r=n0(i?(t,e,r)=>n(i(t),e,r):n);return t.then((t=>{if(t)return t.start((()=>{var n=()=>t.continue();e&&!e(t,(t=>n=t),(e=>{t.stop(e),n=u$}),(e=>{t.fail(e),n=u$}))||r(t.value,t,(t=>n=t)),n()}))}))}function V0(t,e){try{const n=W0(t),i=W0(e);if(n!==i)return"Array"===n?1:"Array"===i?-1:"binary"===n?1:"binary"===i?-1:"string"===n?1:"string"===i?-1:"Date"===n?1:"Date"!==i?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(t,e){const n=t.length,i=e.length,r=n<i?n:i;for(let s=0;s<r;++s)if(t[s]!==e[s])return t[s]<e[s]?-1:1;return n===i?0:n<i?-1:1}(Z0(t),Z0(e));case"Array":return function(t,e){const n=t.length,i=e.length,r=n<i?n:i;for(let s=0;s<r;++s){const n=V0(t[s],e[s]);if(0!==n)return n}return n===i?0:n<i?-1:1}(t,e)}}catch(t){}return NaN}function W0(t){const e=typeof t;if("object"!==e)return e;if(ArrayBuffer.isView(t))return"binary";const n=GJ(t);return"ArrayBuffer"===n?"binary":n}function Z0(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class Y0{_read(t,e){var n=this._ctx;return n.error?n.table._trans(null,x0.bind(null,n.error)):n.table._trans("readonly",t).then(e)}_write(t){var e=this._ctx;return e.error?e.table._trans(null,x0.bind(null,e.error)):e.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var e=this._ctx;e.algorithm=O0(e.algorithm,t)}_iterate(t,e){return H0(this._ctx,t,e,this._ctx.table.core)}clone(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&fJ(n,t),e._ctx=n,e}raw(){return this._ctx.valueMapper=null,this}each(t){var e=this._ctx;return this._read((n=>H0(e,t,n,e.table.core)))}count(t){return this._read((t=>{const e=this._ctx,n=e.table.core;if(k0(e,!0))return n.count({trans:t,query:{index:z0(e,n.schema),range:e.range}}).then((t=>Math.min(t,e.limit)));var i=0;return H0(e,(()=>(++i,!1)),t,n).then((()=>i))})).then(t)}sortBy(t,e){const n=t.split(".").reverse(),i=n[0],r=n.length-1;function s(t,e){return e?s(t[n[e]],e-1):t[i]}var o="next"===this._ctx.dir?1:-1;function a(t,e){var n=s(t,r),i=s(e,r);return n<i?-o:n>i?o:0}return this.toArray((function(t){return t.sort(a)})).then(e)}toArray(t){return this._read((t=>{var e=this._ctx;if("next"===e.dir&&k0(e,!0)&&e.limit>0){const{valueMapper:n}=e,i=z0(e,e.table.core.schema);return e.table.core.query({trans:t,limit:e.limit,values:!0,query:{index:i,range:e.range}}).then((t=>{let{result:e}=t;return n?e.map(n):e}))}{const n=[];return H0(e,(t=>n.push(t)),t,e.table.core).then((()=>n))}}),t)}offset(t){var e=this._ctx;return t<=0||(e.offset+=t,k0(e)?B0(e,(()=>{var e=t;return(t,n)=>0===e||(1===e?(--e,!1):(n((()=>{t.advance(e),e=0})),!1))})):B0(e,(()=>{var e=t;return()=>--e<0}))),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),B0(this._ctx,(()=>{var e=t;return function(t,n,i){return--e<=0&&n(i),e>=0}}),!0),this}until(t,e){return U0(this._ctx,(function(n,i,r){return!t(n.value)||(i(r),e)})),this}first(t){return this.limit(1).toArray((function(t){return t[0]})).then(t)}last(t){return this.reverse().first(t)}filter(t){var e,n;return U0(this._ctx,(function(e){return t(e.value)})),e=this._ctx,n=t,e.isMatch=O0(e.isMatch,n),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.key,n)}))}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.primaryKey,n)}))}keys(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.key)})).then((function(){return n})).then(t)}primaryKeys(t){var e=this._ctx;if("next"===e.dir&&k0(e,!0)&&e.limit>0)return this._read((t=>{var n=z0(e,e.table.core.schema);return e.table.core.query({trans:t,values:!1,limit:e.limit,query:{index:n,range:e.range}})})).then((t=>{let{result:e}=t;return e})).then(t);e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.primaryKey)})).then((function(){return n})).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys((function(t){return t[0]})).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var n={};return U0(this._ctx,(function(t){var e=t.primaryKey.toString(),i=yJ(n,e);return n[e]=!0,!i})),this}modify(t){var e=this._ctx;return this._write((n=>{var i;if("function"==typeof t)i=t;else{var r=pJ(t),s=r.length;i=function(e){for(var n=!1,i=0;i<s;++i){var o=r[i],a=t[o];DJ(e,o)!==a&&(OJ(e,o,a),n=!0)}return n}}const o=e.table.core,{outbound:a,extractKey:l}=o.schema.primaryKey,h=this.db._options.modifyChunkSize||200,c=[];let u=0;const p=[],d=(t,e)=>{const{failures:n,numFailures:i}=e;u+=t-i;for(let r of pJ(n))c.push(n[r])};return this.clone().primaryKeys().then((r=>{const s=c=>{const u=Math.min(h,r.length-c);return o.getMany({trans:n,keys:r.slice(c,c+u),cache:"immutable"}).then((p=>{const f=[],m=[],g=a?[]:null,y=[];for(let t=0;t<u;++t){const e=p[t],n={value:UJ(e),primKey:r[c+t]};!1!==i.call(n,n.value,n)&&(null==n.value?y.push(r[c+t]):a||0===V0(l(e),l(n.value))?(m.push(n.value),a&&g.push(r[c+t])):(y.push(r[c+t]),f.push(n.value)))}const v=k0(e)&&e.limit===1/0&&("function"!=typeof t||t===q0)&&{index:e.index,range:e.range};return Promise.resolve(f.length>0&&o.mutate({trans:n,type:"add",values:f}).then((t=>{for(let e in t.failures)y.splice(parseInt(e),1);d(f.length,t)}))).then((()=>(m.length>0||v&&"object"==typeof t)&&o.mutate({trans:n,type:"put",keys:g,values:m,criteria:v,changeSpec:"function"!=typeof t&&t}).then((t=>d(m.length,t))))).then((()=>(y.length>0||v&&t===q0)&&o.mutate({trans:n,type:"delete",keys:y,criteria:v}).then((t=>d(y.length,t))))).then((()=>r.length>c+u&&s(c+h)))}))};return s(0).then((()=>{if(c.length>0)throw new r$("Error modifying one or more objects",c,u,p);return r.length}))}))}))}delete(){var t=this._ctx,e=t.range;return k0(t)&&(t.isPrimKey&&!A0||3===e.type)?this._write((n=>{const{primaryKey:i}=t.table.core.schema,r=e;return t.table.core.count({trans:n,query:{index:i,range:r}}).then((e=>t.table.core.mutate({trans:n,type:"deleteRange",range:r}).then((t=>{let{failures:n,lastResult:i,results:r,numFailures:s}=t;if(s)throw new r$("Could not delete some values",Object.keys(n).map((t=>n[t])),e-s);return e-s}))))})):this.modify(q0)}}const q0=(t,e)=>e.value=null;function X0(t,e){return t<e?-1:t===e?0:1}function K0(t,e){return t>e?-1:t===e?0:1}function Q0(t,e,n){var i=t instanceof i1?new t.Collection(t):t;return i._ctx.error=n?new n(e):new TypeError(e),i}function J0(t){return new t.Collection(t,(()=>n1(""))).limit(0)}function $0(t,e,n,i,r,s){for(var o=Math.min(t.length,i.length),a=-1,l=0;l<o;++l){var h=e[l];if(h!==i[l])return r(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):r(t[l],i[l])<0?t.substr(0,l)+i[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;r(t[l],h)<0&&(a=l)}return o<i.length&&"next"===s?t+n.substr(t.length):o<t.length&&"prev"===s?t.substr(0,n.length):a<0?null:t.substr(0,a)+i[a]+n.substr(a+1)}function t1(t,e,n,i){var r,s,o,a,l,h,c,u=n.length;if(!n.every((t=>"string"==typeof t)))return Q0(t,"String expected.");function p(t){r=function(t){return"next"===t?t=>t.toUpperCase():t=>t.toLowerCase()}(t),s=function(t){return"next"===t?t=>t.toLowerCase():t=>t.toUpperCase()}(t),o="next"===t?X0:K0;var e=n.map((function(t){return{lower:s(t),upper:r(t)}})).sort((function(t,e){return o(t.lower,e.lower)}));a=e.map((function(t){return t.upper})),l=e.map((function(t){return t.lower})),h=t,c="next"===t?"":i}p("next");var d=new t.Collection(t,(()=>e1(a[0],l[u-1]+i)));d._ondirectionchange=function(t){p(t)};var f=0;return d._addAlgorithm((function(t,n,i){var r=t.key;if("string"!=typeof r)return!1;var p=s(r);if(e(p,l,f))return!0;for(var d=null,m=f;m<u;++m){var g=$0(r,p,a[m],l[m],o,h);null===g&&null===d?f=m+1:(null===d||o(d,g)>0)&&(d=g)}return n(null!==d?function(){t.continue(d+c)}:i),!1})),d}function e1(t,e,n,i){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:i}}function n1(t){return{type:1,lower:t,upper:t}}class i1{get Collection(){return this._ctx.table.db.Collection}between(t,e,n,i){n=!1!==n,i=!0===i;try{return this._cmp(t,e)>0||0===this._cmp(t,e)&&(n||i)&&(!n||!i)?J0(this):new this.Collection(this,(()=>e1(t,e,!n,!i)))}catch(t){return Q0(this,w0)}}equals(t){return null==t?Q0(this,w0):new this.Collection(this,(()=>n1(t)))}above(t){return null==t?Q0(this,w0):new this.Collection(this,(()=>e1(t,void 0,!0)))}aboveOrEqual(t){return null==t?Q0(this,w0):new this.Collection(this,(()=>e1(t,void 0,!1)))}below(t){return null==t?Q0(this,w0):new this.Collection(this,(()=>e1(void 0,t,!1,!0)))}belowOrEqual(t){return null==t?Q0(this,w0):new this.Collection(this,(()=>e1(void 0,t)))}startsWith(t){return"string"!=typeof t?Q0(this,"String expected."):this.between(t,t+I0,!0,!0)}startsWithIgnoreCase(t){return""===t?this.startsWith(t):t1(this,((t,e)=>0===t.indexOf(e[0])),[t],I0)}equalsIgnoreCase(t){return t1(this,((t,e)=>t===e[0]),[t],"")}anyOfIgnoreCase(){var t=WJ.apply(VJ,arguments);return 0===t.length?J0(this):t1(this,((t,e)=>-1!==e.indexOf(t)),t,"")}startsWithAnyOfIgnoreCase(){var t=WJ.apply(VJ,arguments);return 0===t.length?J0(this):t1(this,((t,e)=>e.some((e=>0===t.indexOf(e)))),t,I0)}anyOf(){const t=WJ.apply(VJ,arguments);let e=this._cmp;try{t.sort(e)}catch(t){return Q0(this,w0)}if(0===t.length)return J0(this);const n=new this.Collection(this,(()=>e1(t[0],t[t.length-1])));n._ondirectionchange=n=>{e="next"===n?this._ascending:this._descending,t.sort(e)};let i=0;return n._addAlgorithm(((n,r,s)=>{const o=n.key;for(;e(o,t[i])>0;)if(++i,i===t.length)return r(s),!1;return 0===e(o,t[i])||(r((()=>{n.continue(t[i])})),!1)})),n}notEqual(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=WJ.apply(VJ,arguments);if(0===t.length)return new this.Collection(this);try{t.sort(this._ascending)}catch(t){return Q0(this,w0)}const e=t.reduce(((t,e)=>t?t.concat([[t[t.length-1][1],e]]):[[-1/0,e]]),null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,e){const n=this._cmp,i=this._ascending,r=this._descending,s=this._min,o=this._max;if(0===t.length)return J0(this);if(!t.every((t=>void 0!==t[0]&&void 0!==t[1]&&i(t[0],t[1])<=0)))return Q0(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",l$.InvalidArgument);const a=!e||!1!==e.includeLowers,l=e&&!0===e.includeUppers;let h,c=i;function u(t,e){return c(t[0],e[0])}try{h=t.reduce((function(t,e){let i=0,r=t.length;for(;i<r;++i){const r=t[i];if(n(e[0],r[1])<0&&n(e[1],r[0])>0){r[0]=s(r[0],e[0]),r[1]=o(r[1],e[1]);break}}return i===r&&t.push(e),t}),[]),h.sort(u)}catch(t){return Q0(this,w0)}let p=0;const d=l?t=>i(t,h[p][1])>0:t=>i(t,h[p][1])>=0,f=a?t=>r(t,h[p][0])>0:t=>r(t,h[p][0])>=0;let m=d;const g=new this.Collection(this,(()=>e1(h[0][0],h[h.length-1][1],!a,!l)));return g._ondirectionchange=t=>{"next"===t?(m=d,c=i):(m=f,c=r),h.sort(u)},g._addAlgorithm(((t,e,n)=>{for(var r=t.key;m(r);)if(++p,p===h.length)return e(n),!1;return!!function(t){return!d(t)&&!f(t)}(r)||(0===this._cmp(r,h[p][1])||0===this._cmp(r,h[p][0])||e((()=>{c===i?t.continue(h[p][0]):t.continue(h[p][1])})),!1)})),g}startsWithAnyOf(){const t=WJ.apply(VJ,arguments);return t.every((t=>"string"==typeof t))?0===t.length?J0(this):this.inAnyRange(t.map((t=>[t,t+I0]))):Q0(this,"startsWithAnyOf() only works with strings")}}function r1(t){return n0((function(e){return s1(e),t(e.target.error),!1}))}function s1(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const o1=F0(null,"storagemutated");class a1{_lock(){return RJ(!k$.global),++this._reculock,1!==this._reculock||k$.global||(k$.lockOwnerFor=this),this}_unlock(){if(RJ(!k$.global),0==--this._reculock)for(k$.global||(k$.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{y0(t[1],t[0])}catch(t){}}return this}_locked(){return this._reculock&&k$.lockOwnerFor!==this}create(t){if(!this.mode)return this;const e=this.db.idbdb,n=this.db._state.dbOpenError;if(RJ(!this.idbtrans),!t&&!e)switch(n&&n.name){case"DatabaseClosedError":throw new l$.DatabaseClosed(n);case"MissingAPIError":throw new l$.MissingAPI(n.message,n);default:throw new l$.OpenFailed(n)}if(!this.active)throw new l$.TransactionInactive;return RJ(null===this._completion._state),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):e.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=n0((e=>{s1(e),this._reject(t.error)})),t.onabort=n0((e=>{s1(e),this.active&&this._reject(new l$.Abort(t.error)),this.active=!1,this.on("abort").fire(e)})),t.oncomplete=n0((()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&o1.storagemutated.fire(t.mutatedParts)})),this}_promise(t,e,n){if("readwrite"===t&&"readwrite"!==this.mode)return x0(new l$.ReadOnly("Transaction is readonly"));if(!this.active)return x0(new l$.TransactionInactive);if(this._locked())return new G$(((i,r)=>{this._blockedFuncs.push([()=>{this._promise(t,e,n).then(i,r)},k$])}));if(n)return h0((()=>{var t=new G$(((t,n)=>{this._lock();const i=e(t,n,this);i&&i.then&&i.then(t,n)}));return t.finally((()=>this._unlock())),t._lib=!0,t}));var i=new G$(((t,n)=>{var i=e(t,n,this);i&&i.then&&i.then(t,n)}));return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(t){var e=this._root();const n=G$.resolve(t);if(e._waitingFor)e._waitingFor=e._waitingFor.then((()=>n));else{e._waitingFor=n,e._waitingQueue=[];var i=e.idbtrans.objectStore(e.storeNames[0]);!function t(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(i.get(-1/0).onsuccess=t)}()}var r=e._waitingFor;return new G$(((t,i)=>{n.then((n=>e._waitingQueue.push(n0(t.bind(null,n)))),(t=>e._waitingQueue.push(n0(i.bind(null,t))))).finally((()=>{e._waitingFor===r&&(e._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new l$.Abort))}table(t){const e=this._memoizedTables||(this._memoizedTables={});if(yJ(e,t))return e[t];const n=this.schema[t];if(!n)throw new l$.NotFound("Table "+t+" not part of transaction");const i=new this.db.Table(t,n,this);return i.core=this.db.core.table(t),e[t]=i,i}}function l1(t,e,n,i,r,s,o){return{name:t,keyPath:e,unique:n,multi:i,auto:r,compound:s,src:(n&&!o?"&":"")+(i?"*":"")+(r?"++":"")+h1(e)}}function h1(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function c1(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:AJ(n,(t=>[t.name,t]))}}let u1=t=>{try{return t.only([[]]),u1=()=>[[]],[[]]}catch(t){return u1=()=>I0,I0}};function p1(t){return null==t?()=>{}:"string"==typeof t?function(t){return 1===t.split(".").length?e=>e[t]:e=>DJ(e,t)}(t):e=>DJ(e,t)}function d1(t){return[].slice.call(t)}let f1=0;function m1(t){return null==t?":id":"string"==typeof t?t:"[".concat(t.join("+"),"]")}function g1(t,e,n){function i(t){if(3===t.type)return null;if(4===t.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:n,upper:i,lowerOpen:r,upperOpen:s}=t;return void 0===n?void 0===i?null:e.upperBound(i,!!s):void 0===i?e.lowerBound(n,!!r):e.bound(n,i,!!r,!!s)}const{schema:r,hasGetAll:s}=function(t,e){const n=d1(t.objectStoreNames);return{schema:{name:t.name,tables:n.map((t=>e.objectStore(t))).map((t=>{const{keyPath:e,autoIncrement:n}=t,i=dJ(e),r=null==e,s={},o={name:t.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:r,compound:i,keyPath:e,autoIncrement:n,unique:!0,extractKey:p1(e)},indexes:d1(t.indexNames).map((e=>t.index(e))).map((t=>{const{name:e,unique:n,multiEntry:i,keyPath:r}=t,o={name:e,compound:dJ(r),keyPath:r,unique:n,multiEntry:i,extractKey:p1(r)};return s[m1(r)]=o,o})),getIndexByKeyPath:t=>s[m1(t)]};return s[":id"]=o.primaryKey,null!=e&&(s[m1(e)]=o.primaryKey),o}))},hasGetAll:n.length>0&&"getAll"in e.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),o=r.tables.map((t=>function(t){const e=t.name;return{name:e,schema:t,mutate:function(t){let{trans:n,type:r,keys:s,values:o,range:a}=t;return new Promise(((t,l)=>{t=n0(t);const h=n.objectStore(e),c=null==h.keyPath,u="put"===r||"add"===r;if(!u&&"delete"!==r&&"deleteRange"!==r)throw new Error("Invalid operation type: "+r);const{length:p}=s||o||{length:1};if(s&&o&&s.length!==o.length)throw new Error("Given keys array must have same length as given values array.");if(0===p)return t({numFailures:0,failures:{},results:[],lastResult:void 0});let d;const f=[],m=[];let g=0;const y=t=>{++g,s1(t)};if("deleteRange"===r){if(4===a.type)return t({numFailures:g,failures:m,results:[],lastResult:void 0});3===a.type?f.push(d=h.clear()):f.push(d=h.delete(i(a)))}else{const[t,e]=u?c?[o,s]:[o,null]:[s,null];if(u)for(let n=0;n<p;++n)f.push(d=e&&void 0!==e[n]?h[r](t[n],e[n]):h[r](t[n])),d.onerror=y;else for(let n=0;n<p;++n)f.push(d=h[r](t[n])),d.onerror=y}const v=e=>{const n=e.target.result;f.forEach(((t,e)=>null!=t.error&&(m[e]=t.error))),t({numFailures:g,failures:m,results:"delete"===r?s:f.map((t=>t.result)),lastResult:n})};d.onerror=t=>{y(t),v(t)},d.onsuccess=v}))},getMany:t=>{let{trans:n,keys:i}=t;return new Promise(((t,r)=>{t=n0(t);const s=n.objectStore(e),o=i.length,a=new Array(o);let l,h=0,c=0;const u=e=>{const n=e.target;a[n._pos]=n.result,++c===h&&t(a)},p=r1(r);for(let e=0;e<o;++e)null!=i[e]&&(l=s.get(i[e]),l._pos=e,l.onsuccess=u,l.onerror=p,++h);0===h&&t(a)}))},get:t=>{let{trans:n,key:i}=t;return new Promise(((t,r)=>{t=n0(t);const s=n.objectStore(e).get(i);s.onsuccess=e=>t(e.target.result),s.onerror=r1(r)}))},query:function(t){return n=>new Promise(((r,s)=>{r=n0(r);const{trans:o,values:a,limit:l,query:h}=n,c=l===1/0?void 0:l,{index:u,range:p}=h,d=o.objectStore(e),f=u.isPrimaryKey?d:d.index(u.name),m=i(p);if(0===l)return r({result:[]});if(t){const t=a?f.getAll(m,c):f.getAllKeys(m,c);t.onsuccess=t=>r({result:t.target.result}),t.onerror=r1(s)}else{let t=0;const e=a||!("openKeyCursor"in f)?f.openCursor(m):f.openKeyCursor(m),n=[];e.onsuccess=i=>{const s=e.result;return s?(n.push(a?s.value:s.primaryKey),++t===l?r({result:n}):void s.continue()):r({result:n})},e.onerror=r1(s)}}))}(s),openCursor:function(t){let{trans:n,values:r,query:s,reverse:o,unique:a}=t;return new Promise(((t,l)=>{t=n0(t);const{index:h,range:c}=s,u=n.objectStore(e),p=h.isPrimaryKey?u:u.index(h.name),d=o?a?"prevunique":"prev":a?"nextunique":"next",f=r||!("openKeyCursor"in p)?p.openCursor(i(c),d):p.openKeyCursor(i(c),d);f.onerror=r1(l),f.onsuccess=n0((e=>{const i=f.result;if(!i)return void t(null);i.___id=++f1,i.done=!1;const r=i.continue.bind(i);let s=i.continuePrimaryKey;s&&(s=s.bind(i));const o=i.advance.bind(i),a=()=>{throw new Error("Cursor not stopped")};i.trans=n,i.stop=i.continue=i.continuePrimaryKey=i.advance=()=>{throw new Error("Cursor not started")},i.fail=n0(l),i.next=function(){let t=1;return this.start((()=>t--?this.continue():this.stop())).then((()=>this))},i.start=t=>{const e=new Promise(((t,e)=>{t=n0(t),f.onerror=r1(e),i.fail=e,i.stop=e=>{i.stop=i.continue=i.continuePrimaryKey=i.advance=a,t(e)}})),n=()=>{if(f.result)try{t()}catch(t){i.fail(t)}else i.done=!0,i.start=()=>{throw new Error("Cursor behind last entry")},i.stop()};return f.onsuccess=n0((t=>{f.onsuccess=n,n()})),i.continue=r,i.continuePrimaryKey=s,i.advance=o,n(),e},t(i)}),l)}))},count(t){let{query:n,trans:r}=t;const{index:s,range:o}=n;return new Promise(((t,n)=>{const a=r.objectStore(e),l=s.isPrimaryKey?a:a.index(s.name),h=i(o),c=h?l.count(h):l.count();c.onsuccess=n0((e=>t(e.target.result))),c.onerror=r1(n)}))}}}(t))),a={};return o.forEach((t=>a[t.name]=t)),{stack:"dbcore",transaction:t.transaction.bind(t),table(t){if(!a[t])throw new Error("Table '".concat(t,"' not found"));return a[t]},MIN_KEY:-1/0,MAX_KEY:u1(e),schema:r}}function y1(t,e){let{_novip:n}=t;const i=e.db,r=function(t,e,n,i){let{IDBKeyRange:r,indexedDB:s}=n;const o=function(t,e){return e.reduce(((t,e)=>{let{create:n}=e;return{...t,...n(t)}}),t)}(g1(e,r,i),t.dbcore);return{dbcore:o}}(n._middlewares,i,n._deps,e);n.core=r.dbcore,n.tables.forEach((t=>{const e=t.name;n.core.schema.tables.some((t=>t.name===e))&&(t.core=n.core.table(e),n[e]instanceof n.Table&&(n[e].core=t.core))}))}function v1(t,e,n,i){let{_novip:r}=t;n.forEach((t=>{const n=i[t];e.forEach((e=>{const i=bJ(e,t);(!i||"value"in i&&void 0===i.value)&&(e===r.Transaction.prototype||e instanceof r.Transaction?TJ(e,t,{get(){return this.table(t)},set(e){_J(this,t,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):e[t]=new r.Table(t,n))}))}))}function _1(t,e){let{_novip:n}=t;e.forEach((t=>{for(let e in t)t[e]instanceof n.Table&&delete t[e]}))}function T1(t,e){return t._cfg.version-e._cfg.version}function E1(t,e,n,i){const r=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,r);s.create(n),s._completion.catch(i);const o=s._reject.bind(s),a=k$.transless||k$;h0((()=>{k$.trans=s,k$.transless=a,0===e?(pJ(r).forEach((t=>{b1(n,t,r[t].primKey,r[t].indexes)})),y1(t,n),G$.follow((()=>t.on.populate.fire(s))).catch(o)):function(t,e,n,i){let{_novip:r}=t;const s=[],o=r._versions;let a=r._dbSchema=w1(r,r.idbdb,i),l=!1;return o.filter((t=>t._cfg.version>=e)).forEach((t=>{s.push((()=>{const s=a,o=t._cfg.dbschema;S1(r,s,i),S1(r,o,i),a=r._dbSchema=o;const h=x1(s,o);h.add.forEach((t=>{b1(i,t[0],t[1].primKey,t[1].indexes)})),h.change.forEach((t=>{if(t.recreate)throw new l$.Upgrade("Not yet support for changing primary key");{const e=i.objectStore(t.name);t.add.forEach((t=>I1(e,t))),t.change.forEach((t=>{e.deleteIndex(t.name),I1(e,t)})),t.del.forEach((t=>e.deleteIndex(t)))}}));const c=t._cfg.contentUpgrade;if(c&&t._cfg.version>e){y1(r,i),n._memoizedTables={},l=!0;let t=NJ(o);h.del.forEach((e=>{t[e]=s[e]})),_1(r,[r.Transaction.prototype]),v1(r,[r.Transaction.prototype],pJ(t),t),n.schema=t;const e=ZJ(c);let a;e&&c0();const u=G$.follow((()=>{if(a=c(n),a&&e){var t=u0.bind(null,null);a.then(t,t)}}));return a&&"function"==typeof a.then?G$.resolve(a):u.then((()=>a))}})),s.push((e=>{l&&C0||function(t,e){[].slice.call(e.db.objectStoreNames).forEach((n=>null==t[n]&&e.db.deleteObjectStore(n)))}(t._cfg.dbschema,e),_1(r,[r.Transaction.prototype]),v1(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),n.schema=r._dbSchema}))})),function t(){return s.length?G$.resolve(s.shift()(n.idbtrans)).then(t):G$.resolve()}().then((()=>{var t,e;e=i,pJ(t=a).forEach((n=>{e.db.objectStoreNames.contains(n)||b1(e,n,t[n].primKey,t[n].indexes)}))}))}(t,e,s,n).catch(o)}))}function x1(t,e){const n={del:[],add:[],change:[]};let i;for(i in t)e[i]||n.del.push(i);for(i in e){const r=t[i],s=e[i];if(r){const t={name:i,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(r.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||r.primKey.auto!==s.primKey.auto&&!R0)t.recreate=!0,n.change.push(t);else{const e=r.idxByName,i=s.idxByName;let o;for(o in e)i[o]||t.del.push(o);for(o in i){const n=e[o],r=i[o];n?n.src!==r.src&&t.change.push(r):t.add.push(r)}(t.del.length>0||t.add.length>0||t.change.length>0)&&n.change.push(t)}}else n.add.push([i,s])}return n}function b1(t,e,n,i){const r=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return i.forEach((t=>I1(r,t))),r}function I1(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function w1(t,e,n){const i={};return wJ(e.objectStoreNames,0).forEach((t=>{const e=n.objectStore(t);let r=e.keyPath;const s=l1(h1(r),r||"",!1,!1,!!e.autoIncrement,r&&"string"!=typeof r,!0),o=[];for(let n=0;n<e.indexNames.length;++n){const t=e.index(e.indexNames[n]);r=t.keyPath;var a=l1(t.name,r,!!t.unique,!!t.multiEntry,!1,r&&"string"!=typeof r,!1);o.push(a)}i[t]=c1(t,s,o)})),i}function S1(t,e,n){let{_novip:i}=t;const r=n.db.objectStoreNames;for(let s=0;s<r.length;++s){const t=r[s],o=n.objectStore(t);i._hasGetAll="getAll"in o;for(let n=0;n<o.indexNames.length;++n){const i=o.indexNames[n],r=o.index(i).keyPath,s="string"==typeof r?r:"["+wJ(r).join("+")+"]";if(e[t]){const n=e[t].idxByName[s];n&&(n.name=i,delete e[t].idxByName[s],e[t].idxByName[i]=n)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&uJ.WorkerGlobalScope&&uJ instanceof uJ.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}class R1{_parseStoresSpec(t,e){pJ(t).forEach((n=>{if(null!==t[n]){var i=t[n].split(",").map(((t,e)=>{const n=(t=t.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return l1(n,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),dJ(i),0===e)})),r=i.shift();if(r.multi)throw new l$.Schema("Primary key cannot be multi-valued");i.forEach((t=>{if(t.auto)throw new l$.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new l$.Schema("Index must have a name and cannot be an empty string")})),e[n]=c1(n,r,i)}}))}stores(t){const e=this.db;this._cfg.storesSource=this._cfg.storesSource?fJ(this._cfg.storesSource,t):t;const n=e._versions,i={};let r={};return n.forEach((t=>{fJ(i,t._cfg.storesSource),r=t._cfg.dbschema={},t._parseStoresSpec(i,r)})),e._dbSchema=r,_1(e,[e._allTables,e,e.Transaction.prototype]),v1(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],pJ(r),r),e._storeNames=pJ(r),this}upgrade(t){return this._cfg.contentUpgrade=_$(this._cfg.contentUpgrade||u$,t),this}}function C1(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new X1("__dbnames",{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function A1(t){return t&&"function"==typeof t.databases}function D1(t){return h0((function(){return k$.letThrough=!0,t()}))}function O1(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()})).finally((function(){return clearInterval(t)})):Promise.resolve()}function N1(t){var e=e=>t.next(e),n=r(e),i=r((e=>t.throw(e)));function r(t){return e=>{var r=t(e),s=r.value;return r.done?s:s&&"function"==typeof s.then?s.then(n,i):dJ(s)?Promise.all(s).then(n,i):n(s)}}return r(e)()}function M1(t,e,n){var i=arguments.length;if(i<2)throw new l$.InvalidArgument("Too few arguments");for(var r=new Array(i-1);--i;)r[i-1]=arguments[i];return n=r.pop(),[t,PJ(r),n]}function P1(t,e,n,i,r){return G$.resolve().then((()=>{const s=k$.transless||k$,o=t._createTransaction(e,n,t._dbSchema,i),a={trans:o,transless:s};if(i)o.idbtrans=i.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===o$.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then((()=>P1(t,e,n,null,r)))):x0(i)}const l=ZJ(r);let h;l&&c0();const c=G$.follow((()=>{if(h=r.call(o,o),h)if(l){var t=u0.bind(null,null);h.then(t,t)}else"function"==typeof h.next&&"function"==typeof h.throw&&(h=N1(h))}),a);return(h&&"function"==typeof h.then?G$.resolve(h).then((t=>o.active?t:x0(new l$.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):c.then((()=>h))).then((t=>(i&&o._resolve(),o._completion.then((()=>t))))).catch((t=>(o._reject(t),x0(t))))}))}function F1(t,e,n){const i=dJ(t)?t.slice():[t];for(let r=0;r<n;++r)i.push(e);return i}const L1={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:i}=n,r={},s=[];function o(t,e,n){const i=m1(t),a=r[i]=r[i]||[],l=null==t?0:"string"==typeof t?1:t.length,h=e>0,c={...n,isVirtual:h,keyTail:e,keyLength:l,extractKey:p1(t),unique:!h&&n.unique};return a.push(c),c.isPrimaryKey||s.push(c),l>1&&o(2===l?t[0]:t.slice(0,l-1),e+1,n),a.sort(((t,e)=>t.keyTail-e.keyTail)),c}const a=o(i.primaryKey.keyPath,0,i.primaryKey);r[":id"]=[a];for(const t of i.indexes)o(t.keyPath,0,t);function l(e){const n=e.query.index;return n.isVirtual?{...e,query:{index:n,range:(i=e.query.range,r=n.keyTail,{type:1===i.type?2:i.type,lower:F1(i.lower,i.lowerOpen?t.MAX_KEY:t.MIN_KEY,r),lowerOpen:!0,upper:F1(i.upper,i.upperOpen?t.MIN_KEY:t.MAX_KEY,r),upperOpen:!0})}}:e;var i,r}const h={...n,schema:{...i,primaryKey:a,indexes:s,getIndexByKeyPath:function(t){const e=r[m1(t)];return e&&e[0]}},count:t=>n.count(l(t)),query:t=>n.query(l(t)),openCursor(e){const{keyTail:i,isVirtual:r,keyLength:s}=e.query.index;return r?n.openCursor(l(e)).then((n=>n&&function(n){const r=Object.create(n,{continue:{value:function(r){null!=r?n.continue(F1(r,e.reverse?t.MAX_KEY:t.MIN_KEY,i)):e.unique?n.continue(n.key.slice(0,s).concat(e.reverse?t.MIN_KEY:t.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value(e,r){n.continuePrimaryKey(F1(e,t.MAX_KEY,i),r)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const t=n.key;return 1===s?t[0]:t.slice(0,s)}},value:{get:()=>n.value}});return r}(n))):n.openCursor(e)}};return h}}}};function k1(t,e,n,i){return n=n||{},i=i||"",pJ(t).forEach((r=>{if(yJ(e,r)){var s=t[r],o=e[r];if("object"==typeof s&&"object"==typeof o&&s&&o){const t=GJ(s);t!==GJ(o)?n[i+r]=e[r]:"Object"===t?k1(s,o,n,i+r+"."):s!==o&&(n[i+r]=e[r])}else s!==o&&(n[i+r]=e[r])}else n[i+r]=void 0})),pJ(e).forEach((r=>{yJ(t,r)||(n[i+r]=e[r])})),n}const U1={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:i}=n.schema,r={...n,mutate(t){const r=k$.trans,{deleting:s,creating:o,updating:a}=r.table(e).hook;switch(t.type){case"add":if(o.fire===u$)break;return r._promise("readwrite",(()=>l(t)),!0);case"put":if(o.fire===u$&&a.fire===u$)break;return r._promise("readwrite",(()=>l(t)),!0);case"delete":if(s.fire===u$)break;return r._promise("readwrite",(()=>l(t)),!0);case"deleteRange":if(s.fire===u$)break;return r._promise("readwrite",(()=>function(t){return h(t.trans,t.range,1e4)}(t)),!0)}return n.mutate(t);function l(t){const e=k$.trans,r=t.keys||function(t,e){return"delete"===e.type?e.keys:e.keys||e.values.map(t.extractKey)}(i,t);if(!r)throw new Error("Keys missing");return"delete"!==(t="add"===t.type||"put"===t.type?{...t,keys:r}:{...t}).type&&(t.values=[...t.values]),t.keys&&(t.keys=[...t.keys]),function(t,e,n){return"add"===e.type?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}(n,t,r).then((l=>{const h=r.map(((n,r)=>{const h=l[r],c={onerror:null,onsuccess:null};if("delete"===t.type)s.fire.call(c,n,h,e);else if("add"===t.type||void 0===h){const s=o.fire.call(c,n,t.values[r],e);null==n&&null!=s&&(n=s,t.keys[r]=n,i.outbound||OJ(t.values[r],i.keyPath,n))}else{const i=k1(h,t.values[r]),s=a.fire.call(c,i,n,h,e);if(s){const e=t.values[r];Object.keys(s).forEach((t=>{yJ(e,t)?e[t]=s[t]:OJ(e,t,s[t])}))}}return c}));return n.mutate(t).then((e=>{let{failures:n,results:i,numFailures:s,lastResult:o}=e;for(let a=0;a<r.length;++a){const e=i?i[a]:r[a],s=h[a];null==e?s.onerror&&s.onerror(n[a]):s.onsuccess&&s.onsuccess("put"===t.type&&l[a]?t.values[a]:e)}return{failures:n,results:i,numFailures:s,lastResult:o}})).catch((t=>(h.forEach((e=>e.onerror&&e.onerror(t))),Promise.reject(t))))}))}function h(t,e,r){return n.query({trans:t,values:!1,query:{index:i,range:e},limit:r}).then((n=>{let{result:i}=n;return l({type:"delete",keys:i,trans:t}).then((n=>n.numFailures>0?Promise.reject(n.failures[0]):i.length<r?{failures:[],numFailures:0,lastResult:void 0}:h(t,{...e,lower:i[i.length-1],lowerOpen:!0},r)))}))}}};return r}})};function B1(t,e,n){try{if(!e)return null;if(e.keys.length<t.length)return null;const i=[];for(let r=0,s=0;r<e.keys.length&&s<t.length;++r)0===V0(e.keys[r],t[s])&&(i.push(n?UJ(e.values[r]):e.values[r]),++s);return i.length===t.length?i:null}catch(t){return null}}const z1={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:t=>{if(!t.cache)return n.getMany(t);const e=B1(t.keys,t.trans._cache,"clone"===t.cache);return e?G$.resolve(e):n.getMany(t).then((e=>(t.trans._cache={keys:t.keys,values:"clone"===t.cache?UJ(e):e},e)))},mutate:t=>("add"!==t.type&&(t.trans._cache=null),n.mutate(t))}}})};function G1(t){return!("from"in t)}const H1=function(t,e){if(!this){const e=new H1;return t&&"d"in t&&fJ(e,t),e}fJ(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function j1(t,e,n){const i=V0(e,n);if(isNaN(i))return;if(i>0)throw RangeError();if(G1(t))return fJ(t,{from:e,to:n,d:1});const r=t.l,s=t.r;if(V0(n,t.from)<0)return r?j1(r,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Z1(t);if(V0(e,t.to)>0)return s?j1(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Z1(t);V0(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),V0(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const o=!t.r;r&&!t.l&&V1(t,r),s&&o&&V1(t,s)}function V1(t,e){G1(e)||function t(e,n){let{from:i,to:r,l:s,r:o}=n;j1(e,i,r),s&&t(e,s),o&&t(e,o)}(t,e)}function W1(t){let e=G1(t)?null:{s:0,n:t};return{next(t){const n=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,n)for(;e.n.l&&V0(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!n||V0(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Z1(t){var e,n;const i=((null===(e=t.r)||void 0===e?void 0:e.d)||0)-((null===(n=t.l)||void 0===n?void 0:n.d)||0),r=i>1?"r":i<-1?"l":"";if(r){const e="r"===r?"l":"r",n={...t},i=t[r];t.from=i.from,t.to=i.to,t[r]=i[r],n[r]=i[e],t[e]=n,n.d=Y1(n)}t.d=Y1(t)}function Y1(t){let{r:e,l:n}=t;return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}vJ(H1.prototype,{add(t){return V1(this,t),this},addKey(t){return j1(this,t,t),this},addKeys(t){return t.forEach((t=>j1(this,t,t))),this},[HJ](){return W1(this)}});const q1={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new H1(t.MIN_KEY,t.MAX_KEY);return{...t,table:i=>{const r=t.table(i),{schema:s}=r,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,h={...r,mutate:t=>{const o=t.trans,a=o.mutatedParts||(o.mutatedParts={}),l=t=>{const n="idb://".concat(e,"/").concat(i,"/").concat(t);return a[n]||(a[n]=new H1)},h=l(""),c=l(":dels"),{type:u}=t;let[p,d]="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[[],t.values]:[];const f=t.trans._cache;return r.mutate(t).then((t=>{if(dJ(p)){"delete"!==u&&(p=t.results),h.addKeys(p);const e=B1(p,f);e||"add"===u||c.addKeys(p),(e||d)&&function(t,e,n,i){e.indexes.forEach((function(e){const r=t(e.name||"");function s(t){return null!=t?e.extractKey(t):null}const o=t=>e.multiEntry&&dJ(t)?t.forEach((t=>r.addKey(t))):r.addKey(t);(n||i).forEach(((t,e)=>{const r=n&&s(n[e]),a=i&&s(i[e]);0!==V0(r,a)&&(null!=r&&o(r),null!=a&&o(a))}))}))}(l,s,e,d)}else if(p){const t={from:p.lower,to:p.upper};c.add(t),h.add(t)}else h.add(n),c.add(n),s.indexes.forEach((t=>l(t.name).add(n)));return t}))}},c=e=>{let{query:{index:n,range:i}}=e;var r,s;return[n,new H1(null!==(r=i.lower)&&void 0!==r?r:t.MIN_KEY,null!==(s=i.upper)&&void 0!==s?s:t.MAX_KEY)]},u={get:t=>[o,new H1(t.key)],getMany:t=>[o,(new H1).addKeys(t.keys)],count:c,query:c,openCursor:c};return pJ(u).forEach((t=>{h[t]=function(s){const{subscr:o}=k$;if(o){const h=t=>{const n="idb://".concat(e,"/").concat(i,"/").concat(t);return o[n]||(o[n]=new H1)},c=h(""),p=h(":dels"),[d,f]=u[t](s);if(h(d.name||"").add(f),!d.isPrimaryKey){if("count"!==t){const e="query"===t&&l&&s.values&&r.query({...s,values:!1});return r[t].apply(this,arguments).then((n=>{if("query"===t){if(l&&s.values)return e.then((t=>{let{result:e}=t;return c.addKeys(e),n}));const t=s.values?n.result.map(a):n.result;s.values?c.addKeys(t):p.addKeys(t)}else if("openCursor"===t){const t=n,e=s.values;return t&&Object.create(t,{key:{get:()=>(p.addKey(t.primaryKey),t.key)},primaryKey:{get(){const e=t.primaryKey;return p.addKey(e),e}},value:{get:()=>(e&&c.addKey(t.primaryKey),t.value)}})}return n}))}p.add(n)}}return r[t].apply(this,arguments)}})),h}}}};class X1{constructor(t,e){this._middlewares={},this.verno=0;const n=X1.dependencies;this._options=e={addons:X1.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...e},this._deps={indexedDB:e.indexedDB,IDBKeyRange:e.IDBKeyRange};const{addons:i}=e;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const r={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:u$,dbReadyPromise:null,cancelOpen:u$,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var s;r.dbReadyPromise=new G$((t=>{r.dbReadyResolve=t})),r.openCanceller=new G$(((t,e)=>{r.cancelOpen=e})),this._state=r,this.name=t,this.on=F0(this,"populate","blocked","versionchange","close",{ready:[_$,u$]}),this.on.ready.subscribe=SJ(this.on.ready.subscribe,(t=>(e,n)=>{X1.vip((()=>{const i=this._state;if(i.openComplete)i.dbOpenError||G$.resolve().then(e),n&&t(e);else if(i.onReadyBeingFired)i.onReadyBeingFired.push(e),n&&t(e);else{t(e);const i=this;n||t((function t(){i.on.ready.unsubscribe(e),i.on.ready.unsubscribe(t)}))}}))})),this.Collection=(s=this,L0(Y0.prototype,(function(t,e){this.db=s;let n=N0,i=null;if(e)try{n=e()}catch(t){i=t}const r=t._ctx,o=r.table,a=o.hook.reading.fire;this._ctx={table:o,index:r.index,isPrimKey:!r.index||o.schema.primKey.keyPath&&r.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:r.or,valueMapper:a!==p$?a:null}}))),this.Table=function(t){return L0(P0.prototype,(function(e,n,i){this.db=t,this._tx=i,this.name=e,this.schema=n,this.hook=t._allTables[e]?t._allTables[e].hook:F0(null,{creating:[m$,u$],reading:[d$,p$],updating:[y$,u$],deleting:[g$,u$]})}))}(this),this.Transaction=function(t){return L0(a1.prototype,(function(e,n,i,r,s){this.db=t,this.mode=e,this.storeNames=n,this.schema=i,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=F0(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new G$(((t,e)=>{this._resolve=t,this._reject=e})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(t=>{var e=this.active;return this.active=!1,this.on.error.fire(t),this.parent?this.parent._reject(t):e&&this.idbtrans&&this.idbtrans.abort(),x0(t)}))}))}(this),this.Version=function(t){return L0(R1.prototype,(function(e){this.db=t,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(t){return L0(i1.prototype,(function(e,n,i){this.db=t,this._ctx={table:e,index:":id"===n?null:n,or:i};const r=t._deps.indexedDB;if(!r)throw new l$.MissingAPI;this._cmp=this._ascending=r.cmp.bind(r),this._descending=(t,e)=>r.cmp(e,t),this._max=(t,e)=>r.cmp(t,e)>0?t:e,this._min=(t,e)=>r.cmp(t,e)<0?t:e,this._IDBKeyRange=t._deps.IDBKeyRange}))}(this),this.on("versionchange",(t=>{t.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(this.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(this.name,"'. Closing db now to resume the delete request.")),this.close()})),this.on("blocked",(t=>{!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('".concat(this.name,"') was blocked")):console.warn("Upgrade '".concat(this.name,"' blocked by other connection holding version ").concat(t.oldVersion/10))})),this._maxKey=u1(e.IDBKeyRange),this._createTransaction=(t,e,n,i)=>new this.Transaction(t,e,n,this._options.chromeTransactionDurability,i),this._fireOnBlocked=t=>{this.on("blocked").fire(t),S0.filter((t=>t.name===this.name&&t!==this&&!t._state.vcFired)).map((e=>e.on("versionchange").fire(t)))},this.use(L1),this.use(U1),this.use(q1),this.use(z1),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach((t=>t(this)))}version(t){if(isNaN(t)||t<.1)throw new l$.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new l$.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const e=this._versions;var n=e.filter((e=>e._cfg.version===t))[0];return n||(n=new this.Version(t),e.push(n),e.sort(T1),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(t){return this.idbdb&&(this._state.openComplete||k$.letThrough||this._vip)?t():new G$(((t,e)=>{if(this._state.openComplete)return e(new l$.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void e(new l$.DatabaseClosed);this.open().catch(u$)}this._state.dbReadyPromise.then(t,e)})).then(t)}use(t){let{stack:e,create:n,level:i,name:r}=t;r&&this.unuse({stack:e,name:r});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:null==i?10:i,name:r}),s.sort(((t,e)=>t.level-e.level)),this}unuse(t){let{stack:e,name:n,create:i}=t;return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((t=>i?t.create!==i:!!n&&t.name!==n))),this}open(){return function(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then((()=>e.dbOpenError?x0(e.dbOpenError):t));YJ&&(e.openCanceller._stackHolder=QJ()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const i=e.openCanceller;function r(){if(e.openCanceller!==i)throw new l$.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,o=null,a=!1;return G$.race([i,("undefined"==typeof navigator?G$.resolve():O1()).then((()=>new G$(((i,s)=>{if(r(),!n)throw new l$.MissingAPI;const l=t.name,h=e.autoSchema?n.open(l):n.open(l,Math.round(10*t.verno));if(!h)throw new l$.MissingAPI;h.onerror=r1(s),h.onblocked=n0(t._fireOnBlocked),h.onupgradeneeded=n0((i=>{if(o=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=s1,o.abort(),h.result.close();const t=n.deleteDatabase(l);t.onsuccess=t.onerror=n0((()=>{s(new l$.NoSuchDatabase("Database ".concat(l," doesnt exist")))}))}else{o.onerror=r1(s);var r=i.oldVersion>Math.pow(2,62)?0:i.oldVersion;a=r<1,t._novip.idbdb=h.result,E1(t,r/10,o,s)}}),s),h.onsuccess=n0((()=>{o=null;const n=t._novip.idbdb=h.result,r=wJ(n.objectStoreNames);if(r.length>0)try{const i=n.transaction(1===(s=r).length?s[0]:s,"readonly");e.autoSchema?function(t,e,n){let{_novip:i}=t;i.verno=e.version/10;const r=i._dbSchema=w1(0,e,n);i._storeNames=wJ(e.objectStoreNames,0),v1(i,[i._allTables],pJ(r),r)}(t,n,i):(S1(t,t._dbSchema,i),function(t,e){const n=x1(w1(0,t.idbdb,e),t._dbSchema);return!(n.add.length||n.change.some((t=>t.add.length||t.change.length)))}(t,i)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),y1(t,i)}catch(t){}var s;S0.push(t),n.onversionchange=n0((n=>{e.vcFired=!0,t.on("versionchange").fire(n)})),n.onclose=n0((e=>{t.on("close").fire(e)})),a&&function(t,e){let{indexedDB:n,IDBKeyRange:i}=t;!A1(n)&&"__dbnames"!==e&&C1(n,i).put({name:e}).catch(u$)}(t._deps,l),i()}),s)}))))]).then((()=>(r(),e.onReadyBeingFired=[],G$.resolve(D1((()=>t.on.ready.fire(t.vip)))).then((function n(){if(e.onReadyBeingFired.length>0){let i=e.onReadyBeingFired.reduce(_$,u$);return e.onReadyBeingFired=[],G$.resolve(D1((()=>i(t.vip)))).then(n)}}))))).finally((()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1})).then((()=>t)).catch((n=>{e.dbOpenError=n;try{o&&o.abort()}catch(t){}return i===e.openCanceller&&t._close(),x0(n)})).finally((()=>{e.openComplete=!0,s()}))}(this)}_close(){const t=this._state,e=S0.indexOf(this);if(e>=0&&S0.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(t){}this._novip.idbdb=null}t.dbReadyPromise=new G$((e=>{t.dbReadyResolve=e})),t.openCanceller=new G$(((e,n)=>{t.cancelOpen=n}))}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new l$.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,e=this._state;return new G$(((n,i)=>{const r=()=>{this.close();var t=this._deps.indexedDB.deleteDatabase(this.name);t.onsuccess=n0((()=>{!function(t,e){let{indexedDB:n,IDBKeyRange:i}=t;!A1(n)&&"__dbnames"!==e&&C1(n,i).delete(e).catch(u$)}(this._deps,this.name),n()})),t.onerror=r1(i),t.onblocked=this._fireOnBlocked};if(t)throw new l$.InvalidArgument("Arguments not allowed in db.delete()");e.isBeingOpened?e.dbReadyPromise.then(r):r()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const t=this._state.dbOpenError;return t&&"DatabaseClosed"===t.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return pJ(this._allTables).map((t=>this._allTables[t]))}transaction(){const t=M1.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,e,n){let i=k$.trans;i&&i.db===this&&-1===t.indexOf("!")||(i=null);const r=-1!==t.indexOf("?");let s,o;t=t.replace("!","").replace("?","");try{if(o=e.map((t=>{var e=t instanceof this.Table?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e})),"r"==t||"readonly"===t)s="readonly";else{if("rw"!=t&&"readwrite"!=t)throw new l$.InvalidArgument("Invalid transaction mode: "+t);s="readwrite"}if(i){if("readonly"===i.mode&&"readwrite"===s){if(!r)throw new l$.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&o.forEach((t=>{if(i&&-1===i.storeNames.indexOf(t)){if(!r)throw new l$.SubTransaction("Table "+t+" not included in parent transaction.");i=null}})),r&&i&&!i.active&&(i=null)}}catch(t){return i?i._promise(null,((e,n)=>{n(t)})):x0(t)}const a=P1.bind(null,this,s,o,i,n);return i?i._promise(s,a,"lock"):k$.trans?y0(k$.transless,(()=>this._whenReady(a))):this._whenReady(a)}table(t){if(!yJ(this._allTables,t))throw new l$.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]}}const K1="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class Q1{constructor(t){this._subscribe=t}subscribe(t,e,n){return this._subscribe(t&&"function"!=typeof t?t:{next:t,error:e,complete:n})}[K1](){return this}}function J1(t,e){return pJ(e).forEach((n=>{V1(t[n]||(t[n]=new H1),e[n])})),t}let $1;try{$1={indexedDB:uJ.indexedDB||uJ.mozIndexedDB||uJ.webkitIndexedDB||uJ.msIndexedDB,IDBKeyRange:uJ.IDBKeyRange||uJ.webkitIDBKeyRange}}catch(uJ){$1={indexedDB:null,IDBKeyRange:null}}const t2=X1;function e2(t){let e=n2;try{n2=!0,o1.storagemutated.fire(t)}finally{n2=e}}vJ(t2,{...c$,delete:t=>new t2(t,{addons:[]}).delete(),exists:t=>new t2(t,{addons:[]}).open().then((t=>(t.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(t){try{return function(t){let{indexedDB:e,IDBKeyRange:n}=t;return A1(e)?Promise.resolve(e.databases()).then((t=>t.map((t=>t.name)).filter((t=>"__dbnames"!==t)))):C1(e,n).toCollection().primaryKeys()}(t2.dependencies).then(t)}catch(t){return x0(new l$.MissingAPI)}},defineClass:()=>function(t){fJ(this,t)},ignoreTransaction:t=>k$.trans?y0(k$.transless,t):t(),vip:D1,async:function(t){return function(){try{var e=N1(t.apply(this,arguments));return e&&"function"==typeof e.then?e:G$.resolve(e)}catch(t){return x0(t)}}},spawn:function(t,e,n){try{var i=N1(t.apply(n,e||[]));return i&&"function"==typeof i.then?i:G$.resolve(i)}catch(t){return x0(t)}},currentTransaction:{get:()=>k$.trans||null},waitFor:function(t,e){const n=G$.resolve("function"==typeof t?t2.ignoreTransaction(t):t).timeout(e||6e4);return k$.trans?k$.trans.waitFor(n):n},Promise:G$,debug:{get:()=>YJ,set:t=>{qJ(t,"dexie"===t?()=>!0:D0)}},derive:EJ,extend:fJ,props:vJ,override:SJ,Events:F0,on:o1,liveQuery:function(t){return new Q1((e=>{const n=ZJ(t);let i=!1,r={},s={};const o={get closed(){return i},unsubscribe:()=>{i=!0,o1.storagemutated.unsubscribe(c)}};e.start&&e.start(o);let a=!1,l=!1;function h(){return pJ(s).some((t=>r[t]&&function(t,e){const n=W1(e);let i=n.next();if(i.done)return!1;let r=i.value;const s=W1(t);let o=s.next(r.from),a=o.value;for(;!i.done&&!o.done;){if(V0(a.from,r.to)<=0&&V0(a.to,r.from)>=0)return!0;V0(r.from,a.from)<0?r=(i=n.next(a.from)).value:a=(o=s.next(r.from)).value}return!1}(r[t],s[t])))}const c=t=>{J1(r,t),h()&&u()},u=()=>{if(a||i)return;r={};const p={},d=function(e){n&&c0();const i=()=>h0(t,{subscr:e,trans:null}),r=k$.trans?y0(k$.transless,i):i();return n&&r.then(u0,u0),r}(p);l||(o1("storagemutated",c),l=!0),a=!0,Promise.resolve(d).then((t=>{a=!1,i||(h()?u():(r={},s=p,e.next&&e.next(t)))}),(t=>{a=!1,e.error&&e.error(t),o.unsubscribe()}))};return u(),o}))},extendObservabilitySet:J1,getByKeyPath:DJ,setByKeyPath:OJ,delByKeyPath:function(t,e){"string"==typeof e?OJ(t,e,void 0):"length"in e&&[].map.call(e,(function(e){OJ(t,e,void 0)}))},shallowClone:NJ,deepClone:UJ,getObjectDiff:k1,cmp:V0,asap:CJ,minKey:-1/0,addons:[],connections:S0,errnames:o$,dependencies:$1,semVer:"3.2.3",version:"3.2.3".split(".").map((t=>parseInt(t))).reduce(((t,e,n)=>t+e/Math.pow(10,2*n)))}),t2.maxKey=u1(t2.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(o1("storagemutated",(t=>{if(!n2){let e;R0?(e=document.createEvent("CustomEvent"),e.initCustomEvent("x-storagemutated-1",!0,!0,t)):e=new CustomEvent("x-storagemutated-1",{detail:t}),n2=!0,dispatchEvent(e),n2=!1}})),addEventListener("x-storagemutated-1",(t=>{let{detail:e}=t;n2||e2(e)})));let n2=!1;if("undefined"!=typeof BroadcastChannel){const t=new BroadcastChannel("x-storagemutated-1");"function"==typeof t.unref&&t.unref(),o1("storagemutated",(e=>{n2||t.postMessage(e)})),t.onmessage=t=>{t.data&&e2(t.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){o1("storagemutated",(t=>{try{n2||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:t})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((e=>e.postMessage({type:"x-storagemutated-1",changedParts:t}))))}catch(t){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(t=>{if("x-storagemutated-1"===t.key){const e=JSON.parse(t.newValue);e&&e2(e.changedParts)}}));const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",(function(t){let{data:e}=t;e&&"x-storagemutated-1"===e.type&&e2(e.changedParts)}))}G$.rejectionMapper=function(t,e){if(!t||t instanceof n$||t instanceof TypeError||t instanceof SyntaxError||!t.name||!h$[t.name])return t;var n=new h$[t.name](e||t.message,t);return"stack"in t&&TJ(n,"stack",{get:function(){return this.inner.stack}}),n},qJ(YJ,D0);class i2 extends X1{constructor(){super("ModelDatabase"),this.models=void 0,this.version(2).stores({models:"id, file"})}}class r2{constructor(){this.db=new i2}async getModels(t){await this.db.open();const e=hJ(is()),n=[];for(const i of t.models){const t=await this.getModelURL(e,i.id);n.push(t)}return this.db.close(),n}async clearCache(t){await this.db.open();for(const e of t.models)localStorage.removeItem(e.id);await this.db.delete(),this.db=new i2,this.db.close()}async deleteModelsCache(t){await this.db.open();for(const e of t)this.isModelCached(e)&&(localStorage.removeItem(e),await this.db.models.where("id").equals(e).delete());this.db.close()}async getModelURL(t,e){return this.isModelCached(e)?this.getModelFromLocalCache(e):this.getModelFromFirebase(t,e)}async getModelFromFirebase(t,e){const n=lJ(t,e),i=await function(t){return QQ(t=dr(t))}(n);return await this.cacheModel(e,i),i}async getModelFromLocalCache(t){const e=(await this.db.models.where("id").equals(t).toArray())[0].file;return URL.createObjectURL(e)}isModelCached(t){return null!==localStorage.getItem(t)}async cacheModel(t,e){const n=performance.now().toString();localStorage.setItem(t,n);const i=await fetch(e),r=await i.blob();await this.db.models.add({id:t,file:r})}}"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(t,e,n){const i=Number(0xffffffffn&e),r=Number(e>>32n);this.setUint32(t+(n?0:4),i,n),this.setUint32(t+(n?4:0),r,n)}});var s2=t=>new DataView(new ArrayBuffer(t)),o2=t=>new Uint8Array(t.buffer||t),a2=t=>(new TextEncoder).encode(String(t)),l2=t=>Math.min(4294967295,Number(t)),h2=t=>Math.min(65535,Number(t));function c2(t,e){if(void 0===e||e instanceof Date||(e=new Date(e)),t instanceof File)return{isFile:1,t:e||new Date(t.lastModified),i:t.stream()};if(t instanceof Response)return{isFile:1,t:e||new Date(t.headers.get("Last-Modified")||Date.now()),i:t.body};if(void 0===e)e=new Date;else if(isNaN(e))throw new Error("Invalid modification date.");if(void 0===t)return{isFile:0,t:e};if("string"==typeof t)return{isFile:1,t:e,i:a2(t)};if(t instanceof Blob)return{isFile:1,t:e,i:t.stream()};if(t instanceof Uint8Array||t instanceof ReadableStream)return{isFile:1,t:e,i:t};if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return{isFile:1,t:e,i:o2(t)};if(Symbol.asyncIterator in t)return{isFile:1,t:e,i:u2(t)};throw new TypeError("Unsupported input format.")}function u2(t){const e="next"in t?t:t[Symbol.asyncIterator]();return new ReadableStream({async pull(t){let n=0;for(;t.desiredSize>n;){const i=await e.next();if(!i.value){t.close();break}{const e=p2(i.value);t.enqueue(e),n+=e.byteLength}}}})}function p2(t){return"string"==typeof t?a2(t):t instanceof Uint8Array?t:o2(t)}function d2(t,e,n){if(void 0===e||e instanceof Uint8Array||(e=a2(e)),t instanceof File)return{o:m2(e||a2(t.name)),A:BigInt(t.size)};if(t instanceof Response){const i=t.headers.get("content-disposition"),r=i&&i.match(/;\s*filename\*?=["']?(.*?)["']?$/i),s=r&&r[1]||t.url&&new URL(t.url).pathname.split("/").findLast(Boolean),o=s&&decodeURIComponent(s),a=n||+t.headers.get("content-length");return{o:m2(e||a2(o)),A:BigInt(a)}}return e=m2(e,void 0!==t||void 0!==n),"string"==typeof t?{o:e,A:BigInt(a2(t).length)}:t instanceof Blob?{o:e,A:BigInt(t.size)}:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?{o:e,A:BigInt(t.byteLength)}:{o:e,A:f2(t,n)}}function f2(t,e){return e>-1?BigInt(e):t?void 0:0n}function m2(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!t||t.every((t=>47===t)))throw new Error("The file must have a name.");if(e)for(;47===t[t.length-1];)t=t.subarray(0,-1);else 47!==t[t.length-1]&&(t=new Uint8Array([...t,47]));return t}var g2=new WebAssembly.Instance(new WebAssembly.Module(Uint8Array.from(atob("AGFzbQEAAAABCgJgAABgAn9/AXwDAwIAAQUDAQACBwkCAW0CAAFjAAEIAQAKlQECSQEDfwNAIAEhAEEAIQIDQCAAQQF2IABBAXFBoIbi7X5scyEAIAJBAWoiAkEIRw0ACyABQQJ0IAA2AgAgAUEBaiIBQYACRw0ACwtJAQF/IAFBf3MhAUGAgAQhAkGAgAQgAGohAANAIAFB/wFxIAItAABzQQJ0KAIAIAFBCHZzIQEgAkEBaiICIABJDQALIAFBf3O4Cw"),(t=>t.charCodeAt(0))))),{c:y2,m:v2}=g2.exports,_2=o2(v2).subarray(65536);function T2(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(const n of function*(t){for(;t.length>65536;)yield t.subarray(0,65536),t=t.subarray(65536);t.length&&(yield t)}(t))_2.set(n),e=y2(n.length,e);return e}function E2(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t.getSeconds()>>1|t.getMinutes()<<5|t.getHours()<<11,r=t.getDate()|t.getMonth()+1<<5|t.getFullYear()-1980<<9;e.setUint16(n,i,1),e.setUint16(n+2,r,1)}function x2(t){const e=s2(30);return e.setUint32(0,1347093252),e.setUint32(4,754976768),E2(t.t,e,10),e.setUint16(26,t.o.length,1),o2(e)}async function*b2(t){let{i:e}=t;if("then"in e&&(e=await e),e instanceof Uint8Array)yield e,t.u=T2(e,0),t.A=BigInt(e.length);else{t.A=0n;const n=e.getReader();for(;;){const{value:e,done:i}=await n.read();if(i)break;t.u=T2(e,t.u),t.A+=BigInt(e.length),yield e}}}function I2(t,e){const n=s2(16+(e?8:0));return n.setUint32(0,1347094280),n.setUint32(4,t.isFile?t.u:0,1),e?(n.setBigUint64(8,t.A,1),n.setBigUint64(16,t.A,1)):(n.setUint32(8,l2(t.A),1),n.setUint32(12,l2(t.A),1)),o2(n)}function w2(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=s2(46);return i.setUint32(0,1347092738),i.setUint32(4,755182848),i.setUint16(8,2048),E2(t.t,i,12),i.setUint32(16,t.isFile?t.u:0,1),i.setUint32(20,l2(t.A),1),i.setUint32(24,l2(t.A),1),i.setUint16(28,t.o.length,1),i.setUint16(30,n,1),i.setUint16(40,t.isFile?33204:16893,1),i.setUint32(42,l2(e),1),o2(i)}function S2(t,e,n){const i=s2(n);return i.setUint16(0,1,1),i.setUint16(2,n-4,1),16&n&&(i.setBigUint64(4,t.A,1),i.setBigUint64(12,t.A,1)),i.setBigUint64(n-8,e,1),o2(i)}function R2(t){return t instanceof File||t instanceof Response?[[t],[t]]:[[t.input,t.name,t.size],[t.input,t.lastModified]]}var C2=t=>function(t){let e=BigInt(22),n=0n,i=0;for(const r of t){if(!r.o)throw new Error("Every file must have a non-empty name.");if(void 0===r.A)throw new Error('Missing size for file "'.concat((new TextDecoder).decode(r.o),'".'));const t=r.A>=0xffffffffn,s=n>=0xffffffffn;n+=BigInt(46+r.o.length+(t&&8))+r.A,e+=BigInt(r.o.length+46+(12*s|28*t)),i||(i=t)}return(i||n>=0xffffffffn)&&(e+=BigInt(76)),e+n}(function*(t){for(const e of t)yield d2(...R2(e)[0])}(t));function A2(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={"Content-Type":"application/zip","Content-Disposition":"attachment"};return("bigint"==typeof e.length||Number.isInteger(e.length))&&e.length>0&&(n["Content-Length"]=String(e.length)),e.metadata&&(n["Content-Length"]=String(C2(e.metadata))),new Response(function(t){return u2(async function*(t){const e=[];let n=0n,i=0n,r=0;for await(const a of t){yield x2(a),yield a.o,a.isFile&&(yield*b2(a));const t=a.A>=0xffffffffn,s=12*(n>=0xffffffffn)|28*t;yield I2(a,t),e.push(w2(a,n,s)),e.push(a.o),s&&e.push(S2(a,n,s)),t&&(n+=8n),i++,n+=BigInt(46+a.o.length)+a.A,r||(r=t)}let s=0n;for(const a of e)yield a,s+=BigInt(a.length);if(r||n>=0xffffffffn){const t=s2(76);t.setUint32(0,1347094022),t.setBigUint64(4,BigInt(44),1),t.setUint32(12,755182848),t.setBigUint64(24,i,1),t.setBigUint64(32,i,1),t.setBigUint64(40,s,1),t.setBigUint64(48,n,1),t.setUint32(56,1347094023),t.setBigUint64(64,n+s,1),t.setUint32(72,1,1),yield o2(t)}const o=s2(22);o.setUint32(0,1347093766),o.setUint16(8,h2(i),1),o.setUint16(10,h2(i),1),o.setUint32(12,l2(s),1),o.setUint32(16,l2(n),1),yield o2(o)}(async function*(t){for await(const e of t){const[t,n]=R2(e);yield Object.assign(c2(...n),d2(...t))}}(t)))}(t),{headers:n})}var D2=n(1018);class O2{get container(){return this.components.renderer.get().domElement.parentElement}constructor(t,e,n){this.database=new r2,this.components=void 0,this.fragments=void 0,this.floorplans=[],this.whiteMaterial=new dd({color:"white"}),this.properties={},this.sceneEvents=[],this.events=void 0,this.setupEvents=()=>{this.sceneEvents=[{name:"mouseup",action:this.updateCulling},{name:"wheel",action:this.updateCulling},{name:"mousemove",action:this.preselect},{name:"click",action:this.select},{name:"keydown",action:this.createClippingPlane},{name:"keydown",action:this.createDimension},{name:"keydown",action:this.deleteClippingPlaneOrDimension}],this.toggleEvents(!0)},this.createClippingPlane=t=>{if("KeyP"===t.code){const t=this.getClipper();t&&t.create()}},this.createDimension=t=>{if("KeyD"===t.code){const t=this.getDimensions();t&&t.create()}},this.deleteClippingPlaneOrDimension=t=>{if("Delete"===t.code){this.getDimensions().delete();this.getClipper().delete()}},this.updateCulling=()=>{this.fragments.culler.needsUpdate=!0},this.preselect=()=>{this.fragments.highlighter.highlight("preselection")},this.select=()=>{const t=this.fragments.highlighter.highlight("selection");if(t){const e=this.properties[t.fragment.id][t.id];if(e){const t=[];for(const n in e){let i=e[n];i||(i="Unknown"),i.value&&(i=i.value),"number"===typeof i&&(i=i.toString()),t.push({name:n,value:i})}return this.events.trigger({type:"UPDATE_PROPERTIES",payload:t})}}this.events.trigger({type:"UPDATE_PROPERTIES",payload:[]})},this.events=n,this.components=new II;const i=new Hb(this.components),r=i.get();r.background=null;const s=new fT;s.position.set(5,10,3),s.intensity=.5,r.add(s);const o=new mT;o.intensity=.5,r.add(o),this.components.scene=i,this.components.renderer=new Gb(this.components,t);const a=new cK(this.components);this.components.camera=a,this.components.raycaster=new kb(this.components),this.components.init();const l=new Ub(this.components);this.components.tools.add(l);const h=new NK(this.components,DK);this.components.tools.add(h);const c=new fK({color:0,linewidth:.001});h.styles.create("thin_lines",[],c);const u=new VK(h,a);this.components.tools.add(u);const p=new Bb(this.components);this.components.tools.add(p),this.fragments=new sK(this.components),this.components.tools.add(this.fragments),this.fragments.highlighter.active=!0;const d=new dd({color:1668818}),f=new dd({color:1668818,opacity:.5,transparent:!0});this.fragments.highlighter.add("selection",[d]),this.fragments.highlighter.add("preselection",[f]),this.loadAllModels(e),this.fragments.exploder.groupName="floor",this.setupEvents()}dispose(){this.components.dispose(),this.properties={},this.toggleEvents(!1),this.whiteMaterial.dispose(),this.components=null,this.fragments=null}toggleEvents(t){for(const e of this.sceneEvents)t?window.addEventListener(e.name,e.action):window.removeEventListener(e.name,e.action)}explode(t){const e=this.fragments.exploder;t?e.explode():e.reset()}toggleClippingPlanes(t){const e=this.getClipper();e&&(e.enabled=t)}toggleDimensions(t){const e=this.getDimensions();e&&(e.enabled=t)}toggleFloorplan(t,e){const n=this.getFloorNav();if(this.floorplans.length)if(t&&e){this.toggleGrid(!1),this.toggleEdges(!0);this.floorplans[0];n.goTo(e.id),this.fragments.materials.apply(this.whiteMaterial)}else this.toggleGrid(!0),this.toggleEdges(!1),this.fragments.materials.reset(),n.exitPlanView()}getClipper(){return this.components.tools.get("EdgesClipper")}getDimensions(){return this.components.tools.get("SimpleDimensions")}async convertIfcToFragments(t){let e=new sK(this.components);e.ifcLoader.settings.optionalCategories.length=0,e.ifcLoader.settings.wasm={path:"../../",absolute:!1},e.ifcLoader.settings.webIfc={COORDINATE_TO_ORIGIN:!1,USE_FAST_BOOLS:!0};const n=URL.createObjectURL(t),i=await e.ifcLoader.load(n),r=await this.serializeFragments(i);return e.dispose(),e=null,r}toggleGrid(t){this.components.tools.get("SimpleGrid").get().visible=t}getFloorNav(){return this.components.tools.get("PlanNavigator")}toggleEdges(t){const e=Object.values(this.fragments.edges.edgesList),n=this.components.scene.get();for(const i of e)t?n.add(i):i.removeFromParent()}async serializeFragments(t){const e=[];for(const n of t.fragments){const t=await n.export();e.push(t.geometry,t.data)}return e.push(new File([JSON.stringify(t.properties)],"properties.json")),e.push(new File([JSON.stringify(t.levelRelationships)],"levels-relationship.json")),e.push(new File([JSON.stringify(t.itemTypes)],"model-types.json")),e.push(new File([JSON.stringify(t.allTypes)],"all-types.json")),e.push(new File([JSON.stringify(t.floorsProperties)],"levels-properties.json")),e.push(new File([JSON.stringify(t.coordinationMatrix)],"coordination-matrix.json")),e.push(new File([JSON.stringify(t.expressIDFragmentIDMap)],"express-fragment-map.json")),A2(e).blob()}async loadAllModels(t){const e=await this.database.getModels(t);for(const n of e){const{entries:t}=await(0,D2.Ri)(n),e=Object.keys(t),i=await t["properties.json"].json(),r=await t["all-types.json"].json(),s=await t["model-types.json"].json(),o=await t["levels-properties.json"].json(),a=await t["levels-relationship.json"].json(),l=1.5,h=this.getFloorNav();if(0===this.floorplans.length){for(const t of o){const e=t.SceneHeight+l;this.floorplans.push({id:t.expressID,name:t.Name.value}),await h.create({id:t.expressID,ortho:!0,normal:new Vu(0,-1,0),point:new Vu(0,e,0)})}this.events.trigger({type:"UPDATE_FLOORPLANS",payload:this.floorplans})}for(let n=0;n<e.length;n++){if(!e[n].includes(".glb"))continue;const l=e[n],h=await t[l].blob(),c=URL.createObjectURL(h),u=l.substring(0,l.indexOf(".glb"))+".json",p=await t[u].blob(),d=URL.createObjectURL(p),f=await this.fragments.load(c,d);this.properties[f.id]=i;const m=await t[u].json();this.fragments.edges.generate(f).removeFromParent();this.getClipper().styles.get().thin_lines.meshes.push(f.mesh);const g={category:{},floor:{}},y={};for(const t of o)y[t.expressID]=t.Name.value;for(const t of m.ids){const e=r[s[t]];g.category[e]||(g.category[e]=[]),g.category[e].push(t);const n=y[a[t]];g.floor[n]||(g.floor[n]=[]),g.floor[n].push(t)}this.fragments.groups.add(f.id,g)}this.fragments.culler.needsUpdate=!0,this.fragments.highlighter.update()}}}const N2={viewer:null,start(t,e,n){this.viewer||(this.viewer=new O2(t,e,n))},remove(){this.viewer&&(this.viewer.dispose(),this.viewer=null)},async convertIfcToFragments(t){if(!this.viewer)throw new Error("Viewer not active");return this.viewer.convertIfcToFragments(t)},async deleteModels(t){this.viewer&&await this.viewer.database.deleteModelsCache(t)},async refreshModels(t,e){if(this.viewer){const n=this.viewer.container;this.viewer.dispose(),this.viewer=null,this.viewer=new O2(n,t,e)}},explode(t){this.viewer&&this.viewer.explode(t)},toggleClippingPlanes(t){this.viewer&&this.viewer.toggleClippingPlanes(t)},toggleDimensions(t){this.viewer&&this.viewer.toggleDimensions(t)},toggleFloorplan(t,e){this.viewer&&this.viewer.toggleFloorplan(t,e)}};var M2,P2="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},F2={},L2=L2||{},k2=P2||self;function U2(){}function B2(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function z2(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var G2="closure_uid_"+(1e9*Math.random()>>>0),H2=0;function j2(t,e,n){return t.call.apply(t.bind,arguments)}function V2(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function W2(t,e,n){return(W2=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?j2:V2).apply(null,arguments)}function Z2(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Y2(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function q2(){this.s=this.s,this.o=this.o}q2.prototype.s=!1,q2.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,G2)&&t[G2]||(t[G2]=++H2)}(this)},q2.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const X2=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function K2(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function Q2(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(B2(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let r=0;r<i;r++)t[n+r]=e[r]}else t.push(e)}}function J2(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}J2.prototype.h=function(){this.defaultPrevented=!0};var $2=function(){if(!k2.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{k2.addEventListener("test",U2,e),k2.removeEventListener("test",U2,e)}catch(EJ){}return t}();function t3(t){return/^[\s\xa0]*$/.test(t)}var e3=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function n3(t,e){return t<e?-1:t>e?1:0}function i3(){var t=k2.navigator;return t&&(t=t.userAgent)?t:""}function r3(t){return-1!=i3().indexOf(t)}function s3(t){return s3[" "](t),t}s3[" "]=U2;var o3,a3=r3("Opera"),l3=r3("Trident")||r3("MSIE"),h3=r3("Edge"),c3=h3||l3,u3=r3("Gecko")&&!(-1!=i3().toLowerCase().indexOf("webkit")&&!r3("Edge"))&&!(r3("Trident")||r3("MSIE"))&&!r3("Edge"),p3=-1!=i3().toLowerCase().indexOf("webkit")&&!r3("Edge");function d3(){var t=k2.document;return t?t.documentMode:void 0}t:{var f3="",m3=function(){var t=i3();return u3?/rv:([^\);]+)(\)|;)/.exec(t):h3?/Edge\/([\d\.]+)/.exec(t):l3?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):p3?/WebKit\/(\S+)/.exec(t):a3?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(m3&&(f3=m3?m3[1]:""),l3){var g3=d3();if(null!=g3&&g3>parseFloat(f3)){o3=String(g3);break t}}o3=f3}var y3,v3={};function _3(){return function(t){var e=v3;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){let t=0;const e=e3(String(o3)).split("."),n=e3("9").split("."),i=Math.max(e.length,n.length);for(let o=0;0==t&&o<i;o++){var r=e[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;t=n3(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||n3(0==r[2].length,0==s[2].length)||n3(r[2],s[2]),r=r[3],s=s[3]}while(0==t)}return 0<=t}))}if(k2.document&&l3){var T3=d3();y3=T3||(parseInt(o3,10)||void 0)}else y3=void 0;var E3=y3;function x3(t,e){if(J2.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(u3){t:{try{s3(e.nodeName);var r=!0;break t}catch(IJ){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:b3[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&x3.X.h.call(this)}}Y2(x3,J2);var b3={2:"touch",3:"pen",4:"mouse"};x3.prototype.h=function(){x3.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var I3="closure_listenable_"+(1e6*Math.random()|0),w3=0;function S3(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=r,this.key=++w3,this.ba=this.ea=!1}function R3(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function C3(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function A3(t){const e={};for(const n in t)e[n]=t[n];return e}const D3="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O3(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<D3.length;e++)n=D3[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function N3(t){this.src=t,this.g={},this.h=0}function M3(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=X2(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(R3(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function P3(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.ba&&s.listener==e&&s.capture==!!n&&s.ha==i)return r}return-1}N3.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=P3(t,e,i,r);return-1<o?(e=t[o],n||(e.ea=!1)):((e=new S3(e,this.src,s,!!i,r)).ea=n,t.push(e)),e};var F3="closure_lm_"+(1e6*Math.random()|0),L3={};function k3(t,e,n,i,r){if(i&&i.once)return B3(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)k3(t,e[s],n,i,r);return null}return n=Z3(n),t&&t[I3]?t.N(e,n,z2(i)?!!i.capture:!!i,r):U3(t,e,n,!1,i,r)}function U3(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=z2(r)?!!r.capture:!!r,a=V3(t);if(a||(t[F3]=a=new N3(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){function t(n){return e.call(t.src,t.listener,n)}const e=j3;return t}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)$2||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(H3(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function B3(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)B3(t,e[s],n,i,r);return null}return n=Z3(n),t&&t[I3]?t.O(e,n,z2(i)?!!i.capture:!!i,r):U3(t,e,n,!0,i,r)}function z3(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)z3(t,e[s],n,i,r);else i=z2(i)?!!i.capture:!!i,n=Z3(n),t&&t[I3]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=P3(s=t.g[e],n,i,r))&&(R3(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=V3(t))&&(e=t.g[e.toString()],t=-1,e&&(t=P3(e,n,i,r)),(n=-1<t?e[t]:null)&&G3(n))}function G3(t){if("number"!==typeof t&&t&&!t.ba){var e=t.src;if(e&&e[I3])M3(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(H3(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=V3(e))?(M3(n,t),0==n.h&&(n.src=null,e[F3]=null)):R3(t)}}}function H3(t){return t in L3?L3[t]:L3[t]="on"+t}function j3(t,e){if(t.ba)t=!0;else{e=new x3(e,this);var n=t.listener,i=t.ha||t.src;t.ea&&G3(t),t=n.call(i,e)}return t}function V3(t){return(t=t[F3])instanceof N3?t:null}var W3="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z3(t){return"function"===typeof t?t:(t[W3]||(t[W3]=function(e){return t.handleEvent(e)}),t[W3])}function Y3(){q2.call(this),this.i=new N3(this),this.P=this,this.I=null}function q3(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,"string"===typeof e)e=new J2(e,t);else if(e instanceof J2)e.target=e.target||t;else{var r=e;O3(e=new J2(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=X3(o,i,!0,e)&&r}if(r=X3(o=e.g=t,i,!0,e)&&r,r=X3(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=X3(o=e.g=n[s],i,!1,e)&&r}function X3(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.ea&&M3(t.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}Y2(Y3,q2),Y3.prototype[I3]=!0,Y3.prototype.removeEventListener=function(t,e,n,i){z3(this,t,e,n,i)},Y3.prototype.M=function(){if(Y3.X.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)R3(n[i]);delete e.g[t],e.h--}}this.I=null},Y3.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},Y3.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var K3=k2.JSON.stringify;function Q3(){var t=r4;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var J3,$3=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new t4),(t=>t.reset()));class t4{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function e4(t){k2.setTimeout((()=>{throw t}),0)}function n4(t,e){J3||function(){var t=k2.Promise.resolve(void 0);J3=function(){t.then(s4)}}(),i4||(J3(),i4=!0),r4.add(t,e)}var i4=!1,r4=new class{constructor(){this.h=this.g=null}add(t,e){const n=$3.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function s4(){for(var t;t=Q3();){try{t.h.call(t.g)}catch(EJ){e4(EJ)}var e=$3;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}i4=!1}function o4(t,e){Y3.call(this),this.h=t||1,this.g=e||k2,this.j=W2(this.lb,this),this.l=Date.now()}function a4(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}function l4(t,e,n){if("function"===typeof t)n&&(t=W2(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=W2(t.handleEvent,t)}return 2147483647<Number(e)?-1:k2.setTimeout(t,e||0)}function h4(t){t.g=l4((()=>{t.g=null,t.i&&(t.i=!1,h4(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Y2(o4,Y3),(M2=o4.prototype).ca=!1,M2.R=null,M2.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),q3(this,"tick"),this.ca&&(a4(this),this.start()))}},M2.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},M2.M=function(){o4.X.M.call(this),a4(this),delete this.g};class c4 extends q2{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:h4(this)}M(){super.M(),this.g&&(k2.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function u4(t){q2.call(this),this.h=t,this.g={}}Y2(u4,q2);var p4=[];function d4(t,e,n,i){Array.isArray(n)||(n&&(p4[0]=n.toString()),n=p4);for(var r=0;r<n.length;r++){var s=k3(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function f4(t){C3(t.g,(function(t,e){this.g.hasOwnProperty(e)&&G3(t)}),t),t.g={}}function m4(){this.g=!0}function g4(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return K3(n)}catch(dJ){return e}}(t,n)+(i?" "+i:"")}))}u4.prototype.M=function(){u4.X.M.call(this),f4(this)},u4.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},m4.prototype.Aa=function(){this.g=!1},m4.prototype.info=function(){};var y4={},v4=null;function _4(){return v4=v4||new Y3}function T4(t){J2.call(this,y4.Pa,t)}function E4(t){const e=_4();q3(e,new T4(e))}function x4(t,e){J2.call(this,y4.STAT_EVENT,t),this.stat=e}function b4(t){const e=_4();q3(e,new x4(e,t))}function I4(t,e){J2.call(this,y4.Qa,t),this.size=e}function w4(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return k2.setTimeout((function(){t()}),e)}y4.Pa="serverreachability",Y2(T4,J2),y4.STAT_EVENT="statevent",Y2(x4,J2),y4.Qa="timingevent",Y2(I4,J2);var S4={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},R4={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function C4(){}function A4(t){return t.h||(t.h=t.i())}function D4(){}C4.prototype.h=null;var O4,N4={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function M4(){J2.call(this,"d")}function P4(){J2.call(this,"c")}function F4(){}function L4(t,e,n,i){this.l=t,this.j=e,this.m=n,this.U=i||1,this.S=new u4(this),this.O=U4,t=c3?125:void 0,this.T=new o4(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new k4}function k4(){this.i=null,this.g="",this.h=!1}Y2(M4,J2),Y2(P4,J2),Y2(F4,C4),F4.prototype.g=function(){return new XMLHttpRequest},F4.prototype.i=function(){return{}},O4=new F4;var U4=45e3,B4={},z4={};function G4(t,e,n){t.K=1,t.v=o5(e5(e)),t.s=n,t.P=!0,H4(t,null)}function H4(t,e){t.F=Date.now(),Z4(t),t.A=e5(t.v);var n=t.A,i=t.U;Array.isArray(i)||(i=[String(i)]),_5(n.i,"t",i),t.C=0,n=t.l.H,t.h=new k4,t.g=v6(t.l,n?e:null,!t.s),0<t.N&&(t.L=new c4(W2(t.La,t,t.g),t.N)),d4(t.S,t.g,"readystatechange",t.ib),e=t.H?A3(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),E4(),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var h=a[l].split("=");if(1<h.length){var c=h[0];h=h[1];var u=c.split("_");o=2<=u.length&&"type"==u[1]?o+(c+"=")+h+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.U,t.s)}function j4(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Da)}function V4(t,e,n){let i,r=!0;for(;!t.I&&t.C<n.length;){if(i=W4(t,n),i==z4){4==e&&(t.o=4,b4(14),r=!1),g4(t.j,t.m,null,"[Incomplete Response]");break}if(i==B4){t.o=4,b4(15),g4(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}g4(t.j,t.m,i,null),Q4(t,i)}j4(t)&&i!=z4&&i!=B4&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,b4(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,(e=t.l).g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),c6(e),e.K=!0,b4(11))):(g4(t.j,t.m,n,"[Invalid Chunked Response]"),K4(t),X4(t))}function W4(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?z4:(n=Number(e.substring(n,i)),isNaN(n)?B4:(i+=1)+n>e.length?z4:(e=e.substr(i,n),t.C=i+n,e))}function Z4(t){t.V=Date.now()+t.O,Y4(t,t.O)}function Y4(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=w4(W2(t.gb,t),e)}function q4(t){t.B&&(k2.clearTimeout(t.B),t.B=null)}function X4(t){0==t.l.G||t.I||d6(t.l,t)}function K4(t){q4(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,a4(t.T),f4(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Q4(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||w5(n.h,t)))if(!t.J&&w5(n.h,t)&&3==n.G){try{var i=n.Fa.g.parse(e)}catch(RJ){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;p6(n),n6(n)}h6(n),b4(18)}}else n.Ba=r[1],0<n.Ba-n.T&&37500>r[2]&&n.L&&0==n.A&&!n.v&&(n.v=w4(W2(n.cb,n),6e3));if(1>=I5(n.h)&&n.ja){try{n.ja()}catch(RJ){}n.ja=void 0}}else m6(n,11)}else if((t.J||n.g==t)&&p6(n),!t3(e))for(r=n.Fa.g.parse(e),e=0;e<r.length;e++){let h=r[e];if(n.T=h[0],h=h[1],2==n.G)if("c"==h[0]){n.I=h[1],n.ka=h[2];const e=h[3];null!=e&&(n.ma=e,n.j.info("VER="+n.ma));const r=h[4];null!=r&&(n.Ca=r,n.j.info("SVER="+n.Ca));const c=h[5];null!=c&&"number"===typeof c&&0<c&&(i=1.5*c,n.J=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=t.g;if(u){const t=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(S5(s,s.h),s.h=null))}if(i.D){const t=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.za=t,s5(i.F,i.D,t))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms"));var o=t;if((i=n).sa=y6(i,i.H?i.ka:null,i.V),o.J){R5(i.h,o);var a=o,l=i.J;l&&a.setTimeout(l),a.B&&(q4(a),Z4(a)),i.g=o}else l6(i);0<n.i.length&&r6(n)}else"stop"!=h[0]&&"close"!=h[0]||m6(n,7);else 3==n.G&&("stop"==h[0]||"close"==h[0]?"stop"==h[0]?m6(n,7):e6(n):"noop"!=h[0]&&n.l&&n.l.wa(h),n.A=0)}E4()}catch(RJ){}}function J4(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(B2(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.oa&&"function"==typeof t.oa)return t.oa();if(!t.W||"function"!=typeof t.W){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(B2(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.W&&"function"==typeof t.W)return t.W();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(B2(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}(M2=L4.prototype).setTimeout=function(t){this.O=t},M2.ib=function(t){t=t.target;const e=this.L;e&&3==X5(t)?e.l():this.La(t)},M2.La=function(t){try{if(t==this.g)t:{const c=X5(this.g);var e=this.g.Ea();this.g.aa();if(!(3>c)&&(3!=c||c3||this.g&&(this.h.h||this.g.fa()||K5(this.g)))){this.I||4!=c||7==e||E4(),q4(this);var n=this.g.aa();this.Y=n;e:if(j4(this)){var i=K5(this.g);t="";var r=i.length,s=4==X5(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){K4(this),X4(this);var o="";break e}this.h.i=new k2.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.U,c,n),this.i){if(this.Z&&!this.J){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!t3(a)){var h=a;break e}}h=null}if(!(n=h)){this.i=!1,this.o=3,b4(12),K4(this),X4(this);break t}g4(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Q4(this,n)}this.P?(V4(this,c,o),c3&&this.i&&3==c&&(d4(this.S,this.T,"tick",this.hb),this.T.start())):(g4(this.j,this.m,o,null),Q4(this,o)),4==c&&K4(this),this.i&&!this.I&&(4==c?d6(this.l,this):(this.i=!1,Z4(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,b4(12)):(this.o=0,b4(13)),K4(this),X4(this)}}}catch(fJ){}},M2.hb=function(){if(this.g){var t=X5(this.g),e=this.g.fa();this.C<e.length&&(q4(this),V4(this,t,e),this.i&&4!=t&&Z4(this))}},M2.cancel=function(){this.I=!0,K4(this)},M2.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(E4(),b4(17)),K4(this),this.o=2,X4(this)):Y4(this,this.V-t)};var $4=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function t5(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof t5){this.h=void 0!==e?e:t.h,n5(this,t.j),this.s=t.s,this.g=t.g,i5(this,t.m),this.l=t.l,e=t.i;var n=new m5;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),r5(this,n),this.o=t.o}else t&&(n=String(t).match($4))?(this.h=!!e,n5(this,n[1]||"",!0),this.s=a5(n[2]||""),this.g=a5(n[3]||"",!0),i5(this,n[4]),this.l=a5(n[5]||"",!0),r5(this,n[6]||"",!0),this.o=a5(n[7]||"")):(this.h=!!e,this.i=new m5(null,this.h))}function e5(t){return new t5(t)}function n5(t,e,n){t.j=n?a5(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function i5(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function r5(t,e,n){e instanceof m5?(t.i=e,function(t,e){e&&!t.j&&(g5(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(y5(this,e),_5(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=l5(e,d5)),t.i=new m5(e,t.h))}function s5(t,e,n){t.i.set(e,n)}function o5(t){return s5(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function a5(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function l5(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,h5),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function h5(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}t5.prototype.toString=function(){var t=[],e=this.j;e&&t.push(l5(e,c5,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(l5(e,c5,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(l5(n,"/"==n.charAt(0)?p5:u5,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",l5(n,f5)),t.join("")};var c5=/[#\/\?@]/g,u5=/[#\?:]/g,p5=/[#\?]/g,d5=/[#\?@]/g,f5=/#/g;function m5(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function g5(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function y5(t,e){g5(t),e=T5(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function v5(t,e){return g5(t),e=T5(t,e),t.g.has(e)}function _5(t,e,n){y5(t,e),0<n.length&&(t.i=null,t.g.set(T5(t,e),K2(n)),t.h+=n.length)}function T5(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(M2=m5.prototype).add=function(t,e){g5(this),this.i=null,t=T5(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},M2.forEach=function(t,e){g5(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},M2.oa=function(){g5(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},M2.W=function(t){g5(this);let e=[];if("string"===typeof t)v5(this,t)&&(e=e.concat(this.g.get(T5(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},M2.set=function(t,e){return g5(this),this.i=null,v5(this,t=T5(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},M2.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},M2.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.W(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};function E5(t){this.l=t||x5,k2.PerformanceNavigationTiming?t=0<(t=k2.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(k2.g&&k2.g.Ga&&k2.g.Ga()&&k2.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var x5=10;function b5(t){return!!t.h||!!t.g&&t.g.size>=t.j}function I5(t){return t.h?1:t.g?t.g.size:0}function w5(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function S5(t,e){t.g?t.g.add(e):t.h=e}function R5(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function C5(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return K2(t.i)}function A5(){}function D5(){this.g=new A5}function O5(t,e,n){const i=n||"";try{J4(t,(function(t,n){let r=t;z2(t)&&(r=K3(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(uJ){throw e.push(i+"type="+encodeURIComponent("_badmap")),uJ}}function N5(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(IJ){}}function M5(t){this.l=t.ac||null,this.j=t.jb||!1}function P5(t,e){Y3.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=F5,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}E5.prototype.cancel=function(){if(this.i=C5(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},A5.prototype.stringify=function(t){return k2.JSON.stringify(t,void 0)},A5.prototype.parse=function(t){return k2.JSON.parse(t,void 0)},Y2(M5,C4),M5.prototype.g=function(){return new P5(this.l,this.j)},M5.prototype.i=function(t){return function(){return t}}({}),Y2(P5,Y3);var F5=0;function L5(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}function k5(t){t.readyState=4,t.l=null,t.j=null,t.A=null,U5(t)}function U5(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(M2=P5.prototype).open=function(t,e){if(this.readyState!=F5)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,U5(this)},M2.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||k2).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},M2.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,k5(this)),this.readyState=F5},M2.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,U5(this)),this.g&&(this.readyState=3,U5(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof k2.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;L5(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))},M2.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?k5(this):U5(this),3==this.readyState&&L5(this)}},M2.Va=function(t){this.g&&(this.response=this.responseText=t,k5(this))},M2.Ua=function(t){this.g&&(this.response=t,k5(this))},M2.ga=function(){this.g&&k5(this)},M2.setRequestHeader=function(t,e){this.v.append(t,e)},M2.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},M2.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(P5.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var B5=k2.JSON.parse;function z5(t){Y3.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=G5,this.K=this.L=!1}Y2(z5,Y3);var G5="",H5=/^https?$/i,j5=["POST","PUT"];function V5(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,W5(t),Y5(t)}function W5(t){t.D||(t.D=!0,q3(t,"complete"),q3(t,"error"))}function Z5(t){if(t.h&&"undefined"!=typeof L2&&(!t.C[1]||4!=X5(t)||2!=t.aa()))if(t.v&&4==X5(t))l4(t.Ha,0,t);else if(q3(t,"readystatechange"),4==X5(t)){t.h=!1;try{const a=t.aa();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===a){var r=String(t.H).match($4)[1]||null;if(!r&&k2.self&&k2.self.location){var s=k2.self.location.protocol;r=s.substr(0,s.length-1)}i=!H5.test(r?r.toLowerCase():"")}n=i}if(n)q3(t,"complete"),q3(t,"success");else{t.m=6;try{var o=2<X5(t)?t.g.statusText:""}catch(_J){o=""}t.j=o+" ["+t.aa()+"]",W5(t)}}finally{Y5(t)}}}function Y5(t,e){if(t.g){q5(t);const n=t.g,i=t.C[0]?U2:null;t.g=null,t.C=null,e||q3(t,"ready");try{n.onreadystatechange=i}catch(uJ){}}}function q5(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(k2.clearTimeout(t.A),t.A=null)}function X5(t){return t.g?t.g.readyState:0}function K5(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case G5:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(DJ){return null}}function Q5(t){let e="";return C3(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function J5(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Q5(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):s5(t,e,n))}function $5(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function t6(t){this.Ca=0,this.i=[],this.j=new m4,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=$5("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=$5("baseRetryDelayMs",5e3,t),this.bb=$5("retryDelaySeedMs",1e4,t),this.$a=$5("forwardChannelMaxRetries",2,t),this.ta=$5("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new E5(t&&t.concurrentRequestLimit),this.Fa=new D5,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function e6(t){if(i6(t),3==t.G){var e=t.U++,n=e5(t.F);s5(n,"SID",t.I),s5(n,"RID",e),s5(n,"TYPE","terminate"),o6(t,n),(e=new L4(t,t.j,e,void 0)).K=2,e.v=o5(e5(n)),n=!1,k2.navigator&&k2.navigator.sendBeacon&&(n=k2.navigator.sendBeacon(e.v.toString(),"")),!n&&k2.Image&&((new Image).src=e.v,n=!0),n||(e.g=v6(e.l,null),e.g.da(e.v)),e.F=Date.now(),Z4(e)}g6(t)}function n6(t){t.g&&(c6(t),t.g.cancel(),t.g=null)}function i6(t){n6(t),t.u&&(k2.clearTimeout(t.u),t.u=null),p6(t),t.h.cancel(),t.m&&("number"===typeof t.m&&k2.clearTimeout(t.m),t.m=null)}function r6(t){b5(t.h)||t.m||(t.m=!0,n4(t.Ja,t),t.C=0)}function s6(t,e){var n;n=e?e.m:t.U++;const i=e5(t.F);s5(i,"SID",t.I),s5(i,"RID",n),s5(i,"AID",t.T),o6(t,i),t.o&&t.s&&J5(i,t.o,t.s),n=new L4(t,t.j,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=a6(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),S5(t.h,n),G4(n,i,e)}function o6(t,e){t.ia&&C3(t.ia,(function(t,n){s5(e,n,t)})),t.l&&J4({},(function(t,n){s5(e,n,t)}))}function a6(t,e,n){n=Math.min(t.i.length,n);var i=t.l?W2(t.l.Ra,t.l,t):null;t:{var r=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].h;const a=r[o].g;if(n-=e,0>n)e=Math.max(0,r[o].h-100),s=!1;else try{O5(a,t,"req"+n+"_")}catch(qJ){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,i}function l6(t){t.g||t.u||(t.Z=1,n4(t.Ia,t),t.A=0)}function h6(t){return!(t.g||t.u||3<=t.A)&&(t.Z++,t.u=w4(W2(t.Ia,t),f6(t,t.A)),t.A++,!0)}function c6(t){null!=t.B&&(k2.clearTimeout(t.B),t.B=null)}function u6(t){t.g=new L4(t,t.j,"rpc",t.Z),null===t.o&&(t.g.H=t.s),t.g.N=0;var e=e5(t.sa);s5(e,"RID","rpc"),s5(e,"SID",t.I),s5(e,"CI",t.L?"0":"1"),s5(e,"AID",t.T),s5(e,"TYPE","xmlhttp"),o6(t,e),t.o&&t.s&&J5(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=o5(e5(e)),n.s=null,n.P=!0,H4(n,t)}function p6(t){null!=t.v&&(k2.clearTimeout(t.v),t.v=null)}function d6(t,e){var n=null;if(t.g==e){p6(t),c6(t),t.g=null;var i=2}else{if(!w5(t.h,e))return;n=e.D,R5(t.h,e),i=1}if(0!=t.G)if(t.pa=e.Y,e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;q3(i=_4(),new I4(i,n)),r6(t)}else l6(t);else if(3==(r=e.o)||0==r&&0<t.pa||!(1==i&&function(t,e){return!(I5(t.h)>=t.h.j-(t.m?1:0))&&(t.m?(t.i=e.D.concat(t.i),!0):!(1==t.G||2==t.G||t.C>=(t.Za?0:t.$a))&&(t.m=w4(W2(t.Ja,t,e),f6(t,t.C)),t.C++,!0))}(t,e)||2==i&&h6(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:m6(t,5);break;case 4:m6(t,10);break;case 3:m6(t,6);break;default:m6(t,2)}}function f6(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function m6(t,e){if(t.j.info("Error code "+e),2==e){var n=null;t.l&&(n=null);var i=W2(t.kb,t);n||(n=new t5("//www.google.com/images/cleardot.gif"),k2.location&&"http"==k2.location.protocol||n5(n,"https"),o5(n)),function(t,e){const n=new m4;if(k2.Image){const i=new Image;i.onload=Z2(N5,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Z2(N5,n,i,"TestLoadImage: error",!1,e),i.onabort=Z2(N5,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Z2(N5,n,i,"TestLoadImage: timeout",!1,e),k2.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else b4(2);t.G=0,t.l&&t.l.va(e),g6(t),i6(t)}function g6(t){if(t.G=0,t.la=[],t.l){const e=C5(t.h);0==e.length&&0==t.i.length||(Q2(t.la,e),Q2(t.la,t.i),t.h.i.length=0,K2(t.i),t.i.length=0),t.l.ua()}}function y6(t,e,n){var i=n instanceof t5?e5(n):new t5(n,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),i5(i,i.m);else{var r=k2.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new t5(null,void 0);i&&n5(s,i),e&&(s.g=e),r&&i5(s,r),n&&(s.l=n),i=s}return n=t.D,e=t.za,n&&e&&s5(i,n,e),s5(i,"VER",t.ma),o6(t,i),i}function v6(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Da&&!t.ra?new z5(new M5({jb:!0})):new z5(t.ra)).Ka(t.H),e}function _6(){}function T6(){if(l3&&!(10<=Number(E3)))throw Error("Environmental error: no available transport.")}function E6(t,e){Y3.call(this),this.g=new t6(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!t3(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!t3(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new I6(this)}function x6(t){M4.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function b6(){P4.call(this),this.status=1}function I6(t){this.g=t}(M2=z5.prototype).Ka=function(t){this.L=t},M2.da=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():O4.g(),this.C=this.u?A4(this.u):A4(O4),this.g.onreadystatechange=W2(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(IJ){return void V5(this,IJ)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=k2.FormData&&t instanceof k2.FormData,!(0<=X2(j5,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{q5(this),0<this.B&&((this.K=function(t){return l3&&_3()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=W2(this.qa,this)):this.A=l4(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(IJ){V5(this,IJ)}},M2.qa=function(){"undefined"!=typeof L2&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,q3(this,"timeout"),this.abort(8))},M2.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,q3(this,"complete"),q3(this,"abort"),Y5(this))},M2.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Y5(this,!0)),z5.X.M.call(this)},M2.Ha=function(){this.s||(this.F||this.v||this.l?Z5(this):this.fb())},M2.fb=function(){Z5(this)},M2.aa=function(){try{return 2<X5(this)?this.g.status:-1}catch(vJ){return-1}},M2.fa=function(){try{return this.g?this.g.responseText:""}catch(vJ){return""}},M2.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),B5(e)}},M2.Ea=function(){return this.m},M2.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(M2=t6.prototype).ma=8,M2.G=1,M2.Ja=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new L4(this,this.j,t,void 0);let s=this.s;if(this.S&&(s?(s=A3(s),O3(s,this.S)):s=this.S),null!==this.o||this.N||(r.H=s,s=null),this.O)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.g&&"string"===typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=a6(this,r,e),s5(n=e5(this.F),"RID",t),s5(n,"CVER",22),this.D&&s5(n,"X-HTTP-Session-Id",this.D),o6(this,n),s&&(this.N?e="headers="+encodeURIComponent(String(Q5(s)))+"&"+e:this.o&&J5(n,this.o,s)),S5(this.h,r),this.Ya&&s5(n,"TYPE","init"),this.O?(s5(n,"$req",e),s5(n,"SID","null"),r.Z=!0,G4(r,n,null)):G4(r,n,e),this.G=2}}else 3==this.G&&(t?s6(this,t):0==this.i.length||b5(this.h)||s6(this))},M2.Ia=function(){if(this.u=null,u6(this),this.$&&!(this.K||null==this.g||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=w4(W2(this.eb,this),t)}},M2.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,b4(10),n6(this),u6(this))},M2.cb=function(){null!=this.v&&(this.v=null,n6(this),h6(this),b4(19))},M2.kb=function(t){t?(this.j.info("Successfully pinged google.com"),b4(2)):(this.j.info("Failed to ping google.com"),b4(1))},(M2=_6.prototype).xa=function(){},M2.wa=function(){},M2.va=function(){},M2.ua=function(){},M2.Ra=function(){},T6.prototype.g=function(t,e){return new E6(t,e)},Y2(E6,Y3),E6.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;b4(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=y6(t,null,t.V),r6(t)},E6.prototype.close=function(){e6(this.g)},E6.prototype.u=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=K3(t),t=n);e.i.push(new class{constructor(t,e){this.h=t,this.g=e}}(e.ab++,t)),3==e.G&&r6(e)},E6.prototype.M=function(){this.g.l=null,delete this.j,e6(this.g),delete this.g,E6.X.M.call(this)},Y2(x6,M4),Y2(b6,P4),Y2(I6,_6),I6.prototype.xa=function(){q3(this.g,"a")},I6.prototype.wa=function(t){q3(this.g,new x6(t))},I6.prototype.va=function(t){q3(this.g,new b6)},I6.prototype.ua=function(){q3(this.g,"b")},T6.prototype.createWebChannel=T6.prototype.g,E6.prototype.send=E6.prototype.u,E6.prototype.open=E6.prototype.m,E6.prototype.close=E6.prototype.close,S4.NO_ERROR=0,S4.TIMEOUT=8,S4.HTTP_ERROR=6,R4.COMPLETE="complete",D4.EventType=N4,N4.OPEN="a",N4.CLOSE="b",N4.ERROR="c",N4.MESSAGE="d",Y3.prototype.listen=Y3.prototype.N,z5.prototype.listenOnce=z5.prototype.O,z5.prototype.getLastError=z5.prototype.Oa,z5.prototype.getLastErrorCode=z5.prototype.Ea,z5.prototype.getStatus=z5.prototype.aa,z5.prototype.getResponseJson=z5.prototype.Sa,z5.prototype.getResponseText=z5.prototype.fa,z5.prototype.send=z5.prototype.da,z5.prototype.setWithCredentials=z5.prototype.Ka;var w6=F2.createWebChannelTransport=function(){return new T6},S6=F2.getStatEventTarget=function(){return _4()},R6=F2.ErrorCode=S4,C6=F2.EventType=R4,A6=F2.Event=y4,D6=F2.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},O6=F2.FetchXmlHttpFactory=M5,N6=F2.WebChannel=D4,M6=F2.XhrIo=z5;const P6="@firebase/firestore";class F6{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}F6.UNAUTHENTICATED=new F6(null),F6.GOOGLE_CREDENTIALS=new F6("google-credentials-uid"),F6.FIRST_PARTY=new F6("first-party-uid"),F6.MOCK_USER=new F6("mock-user");let L6="9.17.2";const k6=new Ir("@firebase/firestore");function U6(){return k6.logLevel}function B6(t){if(k6.logLevel<=_r.DEBUG){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(H6);k6.debug("Firestore (".concat(L6,"): ").concat(t),...r)}}function z6(t){if(k6.logLevel<=_r.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(H6);k6.error("Firestore (".concat(L6,"): ").concat(t),...r)}}function G6(t){if(k6.logLevel<=_r.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(H6);k6.warn("Firestore (".concat(L6,"): ").concat(t),...r)}}function H6(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function j6(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const e="FIRESTORE (".concat(L6,") INTERNAL ASSERTION FAILED: ")+t;throw z6(e),new Error(e)}function V6(t,e){t||j6()}function W6(t,e){return t}const Z6={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y6 extends ir{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class q6{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class X6{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))}}class K6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(F6.UNAUTHENTICATED)))}shutdown(){}}class Q6{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class J6{constructor(t){this.t=t,this.currentUser=F6.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new q6;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new q6,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{B6("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(B6("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new q6)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(B6("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(V6("string"==typeof e.accessToken),new X6(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return V6(null===t||"string"==typeof t),new F6(t)}}class $6{constructor(t,e,n,i){this.h=t,this.l=e,this.m=n,this.g=i,this.type="FirstParty",this.user=F6.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(V6(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class t8{constructor(t,e,n,i){this.h=t,this.l=e,this.m=n,this.g=i}getToken(){return Promise.resolve(new $6(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable((()=>e(F6.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class e8{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n8{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const n=t=>{null!=t.error&&B6("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(t.error.message));const n=t.token!==this.A;return this.A=t.token,B6("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{B6("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.T.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.T.getImmediate({optional:!0});t?i(t):B6("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(V6("string"==typeof t.token),this.A=t.token,new e8(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function i8(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class r8{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=i8(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length))}return n}}function s8(t,e){return t<e?-1:t>e?1:0}function o8(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}class a8{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Y6(Z6.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Y6(Z6.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Y6(Z6.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Y6(Z6.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return a8.fromMillis(Date.now())}static fromDate(t){return a8.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new a8(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?s8(this.nanoseconds,t.nanoseconds):s8(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class l8{constructor(t){this.timestamp=t}static fromTimestamp(t){return new l8(t)}static min(){return new l8(new a8(0,0))}static max(){return new l8(new a8(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class h8{constructor(t,e,n){void 0===e?e=0:e>t.length&&j6(),void 0===n?n=t.length-e:n>t.length-e&&j6(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===h8.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof h8?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class c8 extends h8{construct(t,e,n){return new c8(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const t=[];for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new Y6(Z6.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));t.push(...r.split("/").filter((t=>t.length>0)))}return new c8(t)}static emptyPath(){return new c8([])}}const u8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class p8 extends h8{construct(t,e,n){return new p8(t,e,n)}static isValidIdentifier(t){return u8.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),p8.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new p8(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Y6(Z6.INVALID_ARGUMENT,"Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new Y6(Z6.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Y6(Z6.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new Y6(Z6.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new p8(e)}static emptyPath(){return new p8([])}}class d8{constructor(t){this.path=t}static fromPath(t){return new d8(c8.fromString(t))}static fromName(t){return new d8(c8.fromString(t).popFirst(5))}static empty(){return new d8(c8.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===c8.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return c8.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new d8(new c8(t.slice()))}}class f8{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}f8.UNKNOWN_ID=-1;function m8(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=l8.fromTimestamp(1e9===i?new a8(n+1,0):new a8(n,i));return new y8(r,d8.empty(),e)}function g8(t){return new y8(t.readTime,t.key,-1)}class y8{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new y8(l8.min(),d8.empty(),-1)}static max(){return new y8(l8.max(),d8.empty(),-1)}}function v8(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=d8.comparator(t.documentKey,e.documentKey),0!==n?n:s8(t.largestBatchId,e.largestBatchId))}const _8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class T8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function E8(t){if(t.code!==Z6.FAILED_PRECONDITION||t.message!==_8)throw t;B6("LocalStore","Unexpectedly lost primary lease")}class x8{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&j6(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new x8(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof x8?e:x8.resolve(e)}catch(t){return x8.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):x8.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):x8.reject(e)}static resolve(t){return new x8(((e,n)=>{e(t)}))}static reject(t){return new x8(((e,n)=>{n(t)}))}static waitFor(t){return new x8(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=x8.resolve(!1);for(const n of t)e=e.next((t=>t?x8.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new x8(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;e(t[l]).next((t=>{s[l]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new x8(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}function b8(t){return"IndexedDbTransactionError"===t.name}class I8{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ut(t),this.ct=t=>e.writeSequenceNumber(t))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}I8.at=-1;class w8{constructor(t,e,n,i,r,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class S8{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new S8("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof S8&&t.projectId===this.projectId&&t.database===this.database}}function R8(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function C8(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function A8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D8(t){return null==t}function O8(t){return 0===t&&1/t==-1/0}function N8(t){return"number"==typeof t&&Number.isInteger(t)&&!O8(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}class M8 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class P8{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw t instanceof DOMException?new M8("Invalid base64 string: "+t):t}}(t);return new P8(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new P8(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return s8(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}P8.EMPTY_BYTE_STRING=new P8("");const F8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function L8(t){if(V6(!!t),"string"==typeof t){let e=0;const n=F8.exec(t);if(V6(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:k8(t.seconds),nanos:k8(t.nanos)}}function k8(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function U8(t){return"string"==typeof t?P8.fromBase64String(t):P8.fromUint8Array(t)}function B8(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function z8(t){const e=t.mapValue.fields.__previous_value__;return B8(e)?z8(e):e}function G8(t){const e=L8(t.mapValue.fields.__local_write_time__.timestampValue);return new a8(e.seconds,e.nanos)}const H8={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function j8(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?B8(t)?4:i7(t)?9007199254740991:10:j6()}function V8(t,e){if(t===e)return!0;const n=j8(t);if(n!==j8(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return G8(t).isEqual(G8(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=L8(t.timestampValue),i=L8(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return U8(t.bytesValue).isEqual(U8(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return k8(t.geoPointValue.latitude)===k8(e.geoPointValue.latitude)&&k8(t.geoPointValue.longitude)===k8(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return k8(t.integerValue)===k8(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=k8(t.doubleValue),i=k8(e.doubleValue);return n===i?O8(n)===O8(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return o8(t.arrayValue.values||[],e.arrayValue.values||[],V8);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(R8(n)!==R8(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!V8(n[r],i[r])))return!1;return!0}(t,e);default:return j6()}}function W8(t,e){return void 0!==(t.values||[]).find((t=>V8(t,e)))}function Z8(t,e){if(t===e)return 0;const n=j8(t),i=j8(e);if(n!==i)return s8(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return s8(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=k8(t.integerValue||t.doubleValue),i=k8(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return Y8(t.timestampValue,e.timestampValue);case 4:return Y8(G8(t),G8(e));case 5:return s8(t.stringValue,e.stringValue);case 6:return function(t,e){const n=U8(t),i=U8(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=s8(n[r],i[r]);if(0!==t)return t}return s8(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=s8(k8(t.latitude),k8(e.latitude));return 0!==n?n:s8(k8(t.longitude),k8(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=Z8(n[r],i[r]);if(t)return t}return s8(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===H8.mapValue&&e===H8.mapValue)return 0;if(t===H8.mapValue)return 1;if(e===H8.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const t=s8(i[o],s[o]);if(0!==t)return t;const e=Z8(n[i[o]],r[s[o]]);if(0!==e)return e}return s8(i.length,s.length)}(t.mapValue,e.mapValue);default:throw j6()}}function Y8(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return s8(t,e);const n=L8(t),i=L8(e),r=s8(n.seconds,i.seconds);return 0!==r?r:s8(n.nanos,i.nanos)}function q8(t){return X8(t)}function X8(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=L8(t);return"time(".concat(e.seconds,",").concat(e.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?U8(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,d8.fromName(n).toString()):"geoPointValue"in t?"geo(".concat((e=t.geoPointValue).latitude,",").concat(e.longitude,")"):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=X8(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+="".concat(r,":").concat(X8(t.fields[r]));return n+"}"}(t.mapValue):j6();var e,n}function K8(t,e){return{referenceValue:"projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e.path.canonicalString())}}function Q8(t){return!!t&&"integerValue"in t}function J8(t){return!!t&&"arrayValue"in t}function $8(t){return!!t&&"nullValue"in t}function t7(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function e7(t){return!!t&&"mapValue"in t}function n7(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return C8(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=n7(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=n7(t.arrayValue.values[n]);return e}return Object.assign({},t)}function i7(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class r7{constructor(t,e){this.position=t,this.inclusive=e}}function s7(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?d8.comparator(d8.fromName(o.referenceValue),n.key):Z8(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function o7(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!V8(t.position[n],e.position[n]))return!1;return!0}class a7{}class l7 extends a7{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new g7(t,e,n):"array-contains"===e?new T7(t,n):"in"===e?new E7(t,n):"not-in"===e?new x7(t,n):"array-contains-any"===e?new b7(t,n):new l7(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new y7(t,n):new v7(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Z8(e,this.value)):null!==e&&j8(this.value)===j8(e)&&this.matchesComparison(Z8(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return j6()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class h7 extends a7{constructor(t,e){super(),this.filters=t,this.op=e,this.ft=null}static create(t,e){return new h7(t,e)}matches(t){return c7(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.dt((t=>t.isInequality()));return null!==t?t.field:null}dt(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function c7(t){return"and"===t.op}function u7(t){return p7(t)&&c7(t)}function p7(t){for(const e of t.filters)if(e instanceof h7)return!1;return!0}function d7(t){if(t instanceof l7)return t.field.canonicalString()+t.op.toString()+q8(t.value);if(u7(t))return t.filters.map((t=>d7(t))).join(",");{const e=t.filters.map((t=>d7(t))).join(",");return"".concat(t.op,"(").concat(e,")")}}function f7(t,e){return t instanceof l7?function(t,e){return e instanceof l7&&t.op===e.op&&t.field.isEqual(e.field)&&V8(t.value,e.value)}(t,e):t instanceof h7?function(t,e){return e instanceof h7&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&f7(n,e.filters[i])),!0)}(t,e):void j6()}function m7(t){return t instanceof l7?function(t){return"".concat(t.field.canonicalString()," ").concat(t.op," ").concat(q8(t.value))}(t):t instanceof h7?function(t){return t.op.toString()+" {"+t.getFilters().map(m7).join(" ,")+"}"}(t):"Filter"}class g7 extends l7{constructor(t,e,n){super(t,e,n),this.key=d8.fromName(n.referenceValue)}matches(t){const e=d8.comparator(t.key,this.key);return this.matchesComparison(e)}}class y7 extends l7{constructor(t,e){super(t,"in",e),this.keys=_7("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class v7 extends l7{constructor(t,e){super(t,"not-in",e),this.keys=_7("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function _7(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>d8.fromName(t.referenceValue)))}class T7 extends l7{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return J8(e)&&W8(e.arrayValue,this.value)}}class E7 extends l7{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&W8(this.value.arrayValue,e)}}class x7 extends l7{constructor(t,e){super(t,"not-in",e)}matches(t){if(W8(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!W8(this.value.arrayValue,e)}}class b7 extends l7{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!J8(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>W8(this.value.arrayValue,t)))}}class I7{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=t,this.dir=e}}function w7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class S7{constructor(t,e){this.comparator=t,this.root=e||C7.EMPTY}insert(t,e){return new S7(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,C7.BLACK,null,null))}remove(t){return new S7(this.comparator,this.root.remove(t,this.comparator).copy(null,null,C7.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push("".concat(e,":").concat(n)),!1))),"{".concat(t.join(", "),"}")}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new R7(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new R7(this.root,t,this.comparator,!1)}getReverseIterator(){return new R7(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new R7(this.root,t,this.comparator,!0)}}class R7{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class C7{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:C7.RED,this.left=null!=i?i:C7.EMPTY,this.right=null!=r?r:C7.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new C7(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return C7.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return C7.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,C7.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,C7.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw j6();if(this.right.isRed())throw j6();const t=this.left.check();if(t!==this.right.check())throw j6();return t+(this.isRed()?0:1)}}C7.EMPTY=null,C7.RED=!0,C7.BLACK=!1,C7.EMPTY=new class{constructor(){this.size=0}get key(){throw j6()}get value(){throw j6()}get color(){throw j6()}get left(){throw j6()}get right(){throw j6()}copy(t,e,n,i,r){return this}insert(t,e,n){return new C7(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class A7{constructor(t){this.comparator=t,this.data=new S7(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new D7(this.data.getIterator())}getIteratorFrom(t){return new D7(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof A7))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new A7(this.comparator);return e.data=t,e}}class D7{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class O7{constructor(t){this.fields=t,t.sort(p8.comparator)}static empty(){return new O7([])}unionWith(t){let e=new A7(p8.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new O7(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return o8(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class N7{constructor(t){this.value=t}static empty(){return new N7({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!e7(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=n7(e)}setAll(t){let e=p8.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=n7(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());e7(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return V8(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];e7(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){C8(e,((e,n)=>t[e]=n));for(const i of n)delete t[i]}clone(){return new N7(n7(this.value))}}function M7(t){const e=[];return C8(t.fields,((t,n)=>{const i=new p8([t]);if(e7(n)){const t=M7(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new O7(e)}class P7{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new P7(t,0,l8.min(),l8.min(),l8.min(),N7.empty(),0)}static newFoundDocument(t,e,n,i){return new P7(t,1,e,l8.min(),n,i,0)}static newNoDocument(t,e){return new P7(t,2,e,l8.min(),l8.min(),N7.empty(),0)}static newUnknownDocument(t,e){return new P7(t,3,e,l8.min(),l8.min(),N7.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(l8.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=N7.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=N7.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=l8.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof P7&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new P7(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class F7{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this._t=null}}function L7(t){return new F7(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function k7(t){const e=W6(t);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>d7(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),D8(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>q8(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>q8(t))).join(",")),e._t=t}return e._t}function U7(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!w7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!f7(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!o7(t.startAt,e.startAt)&&o7(t.endAt,e.endAt)}function B7(t){return d8.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class z7{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this.gt=null,this.startAt,this.endAt}}function G7(t,e,n,i,r,s,o,a){return new z7(t,e,n,i,r,s,o,a)}function H7(t){return new z7(t)}function j7(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function V7(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function W7(t){for(const e of t.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Z7(t){return null!==t.collectionGroup}function Y7(t){const e=W6(t);if(null===e.wt){e.wt=[];const t=W7(e),n=V7(e);if(null!==t&&null===n)t.isKeyField()||e.wt.push(new I7(t)),e.wt.push(new I7(p8.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.wt.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new I7(p8.keyField(),t))}}}return e.wt}function q7(t){const e=W6(t);if(!e.gt)if("F"===e.limitType)e.gt=L7(e.path,e.collectionGroup,Y7(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const r of Y7(e)){const e="desc"===r.dir?"asc":"desc";t.push(new I7(r.field,e))}const n=e.endAt?new r7(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new r7(e.startAt.position,e.startAt.inclusive):null;e.gt=L7(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}return e.gt}function X7(t,e){e.getFirstInequalityField(),W7(t);const n=t.filters.concat([e]);return new z7(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function K7(t,e,n){return new z7(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Q7(t,e){return U7(q7(t),q7(e))&&t.limitType===e.limitType}function J7(t){return"".concat(k7(q7(t)),"|lt:").concat(t.limitType)}function $7(t){return"Query(target=".concat(function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: [".concat(t.filters.map((t=>m7(t))).join(", "),"]")),D8(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: [".concat(t.orderBy.map((t=>function(t){return"".concat(t.field.canonicalString()," (").concat(t.dir,")")}(t))).join(", "),"]")),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>q8(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>q8(t))).join(",")),"Target(".concat(e,")")}(q7(t)),"; limitType=").concat(t.limitType,")")}function t9(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):d8.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Y7(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=s7(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,Y7(t),e))&&!(t.endAt&&!function(t,e,n){const i=s7(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,Y7(t),e))}(t,e)}function e9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function n9(t){return(e,n)=>{let i=!1;for(const r of Y7(t)){const t=i9(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function i9(t,e,n){const i=t.field.isKeyField()?d8.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?Z8(i,r):j6()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return j6()}}function r9(t,e){if(t.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:O8(e)?"-0":e}}function s9(t){return{integerValue:""+t}}function o9(t,e){return N8(e)?s9(e):r9(t,e)}class a9{constructor(){this._=void 0}}function l9(t,e,n){return t instanceof u9?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof p9?d9(t,e):t instanceof f9?m9(t,e):function(t,e){const n=c9(t,e),i=y9(n)+y9(t.It);return Q8(n)&&Q8(t.It)?s9(i):r9(t.Tt,i)}(t,e)}function h9(t,e,n){return t instanceof p9?d9(t,e):t instanceof f9?m9(t,e):n}function c9(t,e){return t instanceof g9?Q8(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class u9 extends a9{}class p9 extends a9{constructor(t){super(),this.elements=t}}function d9(t,e){const n=v9(e);for(const i of t.elements)n.some((t=>V8(t,i)))||n.push(i);return{arrayValue:{values:n}}}class f9 extends a9{constructor(t){super(),this.elements=t}}function m9(t,e){let n=v9(e);for(const i of t.elements)n=n.filter((t=>!V8(t,i)));return{arrayValue:{values:n}}}class g9 extends a9{constructor(t,e){super(),this.Tt=t,this.It=e}}function y9(t){return k8(t.integerValue||t.doubleValue)}function v9(t){return J8(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class _9{constructor(t,e){this.version=t,this.transformResults=e}}class T9{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new T9}static exists(t){return new T9(void 0,t)}static updateTime(t){return new T9(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function E9(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class x9{}function b9(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new M9(t.key,T9.none()):new C9(t.key,t.data,T9.none());{const n=t.data,i=N7.empty();let r=new A7(p8.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new A9(t.key,i,new O7(r.toArray()),T9.none())}}function I9(t,e,n){t instanceof C9?function(t,e,n){const i=t.value.clone(),r=O9(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof A9?function(t,e,n){if(!E9(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=O9(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(D9(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function w9(t,e,n,i){return t instanceof C9?function(t,e,n,i){if(!E9(t.precondition,e))return n;const r=t.value.clone(),s=N9(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof A9?function(t,e,n,i){if(!E9(t.precondition,e))return n;const r=N9(t.fieldTransforms,i,e),s=e.data;return s.setAll(D9(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return E9(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function S9(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=c9(i.transform,t||null);null!=r&&(null===n&&(n=N7.empty()),n.set(i.field,r))}return n||null}function R9(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&o8(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof p9&&e instanceof p9||t instanceof f9&&e instanceof f9?o8(t.elements,e.elements,V8):t instanceof g9&&e instanceof g9?V8(t.It,e.It):t instanceof u9&&e instanceof u9}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class C9 extends x9{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class A9 extends x9{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function D9(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function O9(t,e,n){const i=new Map;V6(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,h9(o,a,n[r]))}return i}function N9(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,l9(t,s,e))}return i}class M9 extends x9{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P9 extends x9{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class F9{constructor(t){this.count=t}}var L9,k9;function U9(t){switch(t){default:return j6();case Z6.CANCELLED:case Z6.UNKNOWN:case Z6.DEADLINE_EXCEEDED:case Z6.RESOURCE_EXHAUSTED:case Z6.INTERNAL:case Z6.UNAVAILABLE:case Z6.UNAUTHENTICATED:return!1;case Z6.INVALID_ARGUMENT:case Z6.NOT_FOUND:case Z6.ALREADY_EXISTS:case Z6.PERMISSION_DENIED:case Z6.FAILED_PRECONDITION:case Z6.ABORTED:case Z6.OUT_OF_RANGE:case Z6.UNIMPLEMENTED:case Z6.DATA_LOSS:return!0}}function B9(t){if(void 0===t)return z6("GRPC error has no .code"),Z6.UNKNOWN;switch(t){case L9.OK:return Z6.OK;case L9.CANCELLED:return Z6.CANCELLED;case L9.UNKNOWN:return Z6.UNKNOWN;case L9.DEADLINE_EXCEEDED:return Z6.DEADLINE_EXCEEDED;case L9.RESOURCE_EXHAUSTED:return Z6.RESOURCE_EXHAUSTED;case L9.INTERNAL:return Z6.INTERNAL;case L9.UNAVAILABLE:return Z6.UNAVAILABLE;case L9.UNAUTHENTICATED:return Z6.UNAUTHENTICATED;case L9.INVALID_ARGUMENT:return Z6.INVALID_ARGUMENT;case L9.NOT_FOUND:return Z6.NOT_FOUND;case L9.ALREADY_EXISTS:return Z6.ALREADY_EXISTS;case L9.PERMISSION_DENIED:return Z6.PERMISSION_DENIED;case L9.FAILED_PRECONDITION:return Z6.FAILED_PRECONDITION;case L9.ABORTED:return Z6.ABORTED;case L9.OUT_OF_RANGE:return Z6.OUT_OF_RANGE;case L9.UNIMPLEMENTED:return Z6.UNIMPLEMENTED;case L9.DATA_LOSS:return Z6.DATA_LOSS;default:return j6()}}(k9=L9||(L9={}))[k9.OK=0]="OK",k9[k9.CANCELLED=1]="CANCELLED",k9[k9.UNKNOWN=2]="UNKNOWN",k9[k9.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",k9[k9.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",k9[k9.NOT_FOUND=5]="NOT_FOUND",k9[k9.ALREADY_EXISTS=6]="ALREADY_EXISTS",k9[k9.PERMISSION_DENIED=7]="PERMISSION_DENIED",k9[k9.UNAUTHENTICATED=16]="UNAUTHENTICATED",k9[k9.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",k9[k9.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",k9[k9.ABORTED=10]="ABORTED",k9[k9.OUT_OF_RANGE=11]="OUT_OF_RANGE",k9[k9.UNIMPLEMENTED=12]="UNIMPLEMENTED",k9[k9.INTERNAL=13]="INTERNAL",k9[k9.UNAVAILABLE=14]="UNAVAILABLE",k9[k9.DATA_LOSS=15]="DATA_LOSS";class z9{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){C8(this.inner,((e,n)=>{for(const[i,r]of n)t(i,r)}))}isEmpty(){return A8(this.inner)}size(){return this.innerSize}}const G9=new S7(d8.comparator);function H9(){return G9}const j9=new S7(d8.comparator);function V9(){let t=j9;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)t=t.insert(r.key,r);return t}function W9(t){let e=j9;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Z9(){return q9()}function Y9(){return q9()}function q9(){return new z9((t=>t.toString()),((t,e)=>t.isEqual(e)))}const X9=new S7(d8.comparator),K9=new A7(d8.comparator);function Q9(){let t=K9;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)t=t.add(r);return t}const J9=new A7(s8);function $9(){return J9}class ttt{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,ett.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new ttt(l8.min(),i,$9(),H9(),Q9())}}class ett{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new ett(n,e,Q9(),Q9(),Q9())}}class ntt{constructor(t,e,n,i){this.Et=t,this.removedTargetIds=e,this.key=n,this.At=i}}class itt{constructor(t,e){this.targetId=t,this.Rt=e}}class rtt{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P8.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class stt{constructor(){this.bt=0,this.vt=ltt(),this.Pt=P8.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.Pt}get Dt(){return 0!==this.bt}get Ct(){return this.St}xt(t){t.approximateByteSize()>0&&(this.St=!0,this.Pt=t)}Nt(){let t=Q9(),e=Q9(),n=Q9();return this.vt.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:j6()}})),new ett(this.Pt,this.Vt,t,e,n)}kt(){this.St=!1,this.vt=ltt()}Ot(t,e){this.St=!0,this.vt=this.vt.insert(t,e)}Mt(t){this.St=!0,this.vt=this.vt.remove(t)}Ft(){this.bt+=1}$t(){this.bt-=1}Bt(){this.St=!0,this.Vt=!0}}class ott{constructor(t){this.Lt=t,this.qt=new Map,this.Ut=H9(),this.Kt=att(),this.Gt=new A7(s8)}Qt(t){for(const e of t.Et)t.At&&t.At.isFoundDocument()?this.jt(e,t.At):this.zt(e,t.key,t.At);for(const e of t.removedTargetIds)this.zt(e,t.key,t.At)}Wt(t){this.forEachTarget(t,(e=>{const n=this.Ht(e);switch(t.state){case 0:this.Jt(e)&&n.xt(t.resumeToken);break;case 1:n.$t(),n.Dt||n.kt(),n.xt(t.resumeToken);break;case 2:n.$t(),n.Dt||this.removeTarget(e);break;case 3:this.Jt(e)&&(n.Bt(),n.xt(t.resumeToken));break;case 4:this.Jt(e)&&(this.Yt(e),n.xt(t.resumeToken));break;default:j6()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qt.forEach(((t,n)=>{this.Jt(n)&&e(n)}))}Zt(t){const e=t.targetId,n=t.Rt.count,i=this.Xt(e);if(i){const t=i.target;if(B7(t))if(0===n){const n=new d8(t.path);this.zt(e,n,P7.newNoDocument(n,l8.min()))}else V6(1===n);else this.te(e)!==n&&(this.Yt(e),this.Gt=this.Gt.add(e))}}ee(t){const e=new Map;this.qt.forEach(((n,i)=>{const r=this.Xt(i);if(r){if(n.current&&B7(r.target)){const e=new d8(r.target.path);null!==this.Ut.get(e)||this.ne(i,e)||this.zt(i,e,P7.newNoDocument(e,t))}n.Ct&&(e.set(i,n.Nt()),n.kt())}}));let n=Q9();this.Kt.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.Xt(t);return!e||2===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))})),this.Ut.forEach(((e,n)=>n.setReadTime(t)));const i=new ttt(t,e,this.Gt,this.Ut,n);return this.Ut=H9(),this.Kt=att(),this.Gt=new A7(s8),i}jt(t,e){if(!this.Jt(t))return;const n=this.ne(t,e.key)?2:0;this.Ht(t).Ot(e.key,n),this.Ut=this.Ut.insert(e.key,e),this.Kt=this.Kt.insert(e.key,this.se(e.key).add(t))}zt(t,e,n){if(!this.Jt(t))return;const i=this.Ht(t);this.ne(t,e)?i.Ot(e,1):i.Mt(e),this.Kt=this.Kt.insert(e,this.se(e).delete(t)),n&&(this.Ut=this.Ut.insert(e,n))}removeTarget(t){this.qt.delete(t)}te(t){const e=this.Ht(t).Nt();return this.Lt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ft(t){this.Ht(t).Ft()}Ht(t){let e=this.qt.get(t);return e||(e=new stt,this.qt.set(t,e)),e}se(t){let e=this.Kt.get(t);return e||(e=new A7(s8),this.Kt=this.Kt.insert(t,e)),e}Jt(t){const e=null!==this.Xt(t);return e||B6("WatchChangeAggregator","Detected inactive target",t),e}Xt(t){const e=this.qt.get(t);return e&&e.Dt?null:this.Lt.ie(t)}Yt(t){this.qt.set(t,new stt),this.Lt.getRemoteKeysForTarget(t).forEach((e=>{this.zt(t,e,null)}))}ne(t,e){return this.Lt.getRemoteKeysForTarget(t).has(e)}}function att(){return new S7(d8.comparator)}function ltt(){return new S7(d8.comparator)}const htt={asc:"ASCENDING",desc:"DESCENDING"},ctt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},utt={and:"AND",or:"OR"};class ptt{constructor(t,e){this.databaseId=t,this.yt=e}}function dtt(t,e){return t.yt?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function ftt(t,e){return t.yt?e.toBase64():e.toUint8Array()}function mtt(t,e){return dtt(t,e.toTimestamp())}function gtt(t){return V6(!!t),l8.fromTimestamp(function(t){const e=L8(t);return new a8(e.seconds,e.nanos)}(t))}function ytt(t,e){return function(t){return new c8(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function vtt(t){const e=c8.fromString(t);return V6(Utt(e)),e}function _tt(t,e){return ytt(t.databaseId,e.path)}function Ttt(t,e){const n=vtt(e);if(n.get(1)!==t.databaseId.projectId)throw new Y6(Z6.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y6(Z6.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new d8(Itt(n))}function Ett(t,e){return ytt(t.databaseId,e)}function xtt(t){const e=vtt(t);return 4===e.length?c8.emptyPath():Itt(e)}function btt(t){return new c8(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Itt(t){return V6(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function wtt(t,e,n){return{name:_tt(t,e),fields:n.value.mapValue.fields}}function Stt(t,e){let n;if(e instanceof C9)n={update:wtt(t,e.key,e.value)};else if(e instanceof M9)n={delete:_tt(t,e.key)};else if(e instanceof A9)n={update:wtt(t,e.key,e.data),updateMask:ktt(e.fieldMask)};else{if(!(e instanceof P9))return j6();n={verify:_tt(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof u9)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof p9)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof f9)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof g9)return{fieldPath:e.field.canonicalString(),increment:n.It};throw j6()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:mtt(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:j6()}(t,e.precondition)),n}function Rtt(t,e){return{documents:[Ett(t,e.path)]}}function Ctt(t,e){const n={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(n.parent=Ett(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ett(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(t){if(0!==t.length)return Ltt(h7.create(t,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const s=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Ptt(t.field),direction:Ott(t.dir)}}(t)))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(t,e){return t.yt||D8(e)?e:{value:e}}(t,e.limit);var a;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function Att(t){let e=xtt(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){V6(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=Dtt(t);return e instanceof h7&&u7(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new I7(Ftt(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,D8(e)?null:e}(n.limit));let l=null;n.startAt&&(l=function(t){const e=!!t.before,n=t.values||[];return new r7(n,e)}(n.startAt));let h=null;return n.endAt&&(h=function(t){const e=!t.before,n=t.values||[];return new r7(n,e)}(n.endAt)),G7(e,r,o,s,a,"F",l,h)}function Dtt(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Ftt(t.unaryFilter.field);return l7.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Ftt(t.unaryFilter.field);return l7.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ftt(t.unaryFilter.field);return l7.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Ftt(t.unaryFilter.field);return l7.create(r,"!=",{nullValue:"NULL_VALUE"});default:return j6()}}(t):void 0!==t.fieldFilter?function(t){return l7.create(Ftt(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return j6()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return h7.create(t.compositeFilter.filters.map((t=>Dtt(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return j6()}}(t.compositeFilter.op))}(t):j6()}function Ott(t){return htt[t]}function Ntt(t){return ctt[t]}function Mtt(t){return utt[t]}function Ptt(t){return{fieldPath:t.canonicalString()}}function Ftt(t){return p8.fromServerFormat(t.fieldPath)}function Ltt(t){return t instanceof l7?function(t){if("=="===t.op){if(t7(t.value))return{unaryFilter:{field:Ptt(t.field),op:"IS_NAN"}};if($8(t.value))return{unaryFilter:{field:Ptt(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(t7(t.value))return{unaryFilter:{field:Ptt(t.field),op:"IS_NOT_NAN"}};if($8(t.value))return{unaryFilter:{field:Ptt(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ptt(t.field),op:Ntt(t.op),value:t.value}}}(t):t instanceof h7?function(t){const e=t.getFilters().map((t=>Ltt(t)));return 1===e.length?e[0]:{compositeFilter:{op:Mtt(t.op),filters:e}}}(t):j6()}function ktt(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Utt(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}const Btt=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ztt=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Gtt=ztt;class Htt{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&I9(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=w9(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=w9(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Y9();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=b9(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(l8.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Q9())}isEqual(t){return this.batchId===t.batchId&&o8(this.mutations,t.mutations,((t,e)=>R9(t,e)))&&o8(this.baseMutations,t.baseMutations,((t,e)=>R9(t,e)))}}class jtt{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){V6(t.mutations.length===n.length);let i=X9;const r=t.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new jtt(t,e,n,i)}}class Vtt{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Wtt{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l8.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l8.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:P8.EMPTY_BYTE_STRING;this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(t){return new Wtt(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Wtt(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Wtt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class Ztt{constructor(t){this.oe=t}}function Ytt(t){const e=Att({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?K7(e,e.limit,"L"):e}class qtt{constructor(){}ae(t,e){this.he(t,e),e.le()}he(t,e){if("nullValue"in t)this.fe(e,5);else if("booleanValue"in t)this.fe(e,10),e.de(t.booleanValue?1:0);else if("integerValue"in t)this.fe(e,15),e.de(k8(t.integerValue));else if("doubleValue"in t){const n=k8(t.doubleValue);isNaN(n)?this.fe(e,13):(this.fe(e,15),O8(n)?e.de(0):e.de(n))}else if("timestampValue"in t){const n=t.timestampValue;this.fe(e,20),"string"==typeof n?e._e(n):(e._e("".concat(n.seconds||"")),e.de(n.nanos||0))}else if("stringValue"in t)this.we(t.stringValue,e),this.me(e);else if("bytesValue"in t)this.fe(e,30),e.ge(U8(t.bytesValue)),this.me(e);else if("referenceValue"in t)this.ye(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.fe(e,45),e.de(n.latitude||0),e.de(n.longitude||0)}else"mapValue"in t?i7(t)?this.fe(e,Number.MAX_SAFE_INTEGER):(this.pe(t.mapValue,e),this.me(e)):"arrayValue"in t?(this.Ie(t.arrayValue,e),this.me(e)):j6()}we(t,e){this.fe(e,25),this.Te(t,e)}Te(t,e){e._e(t)}pe(t,e){const n=t.fields||{};this.fe(e,55);for(const i of Object.keys(n))this.we(i,e),this.he(n[i],e)}Ie(t,e){const n=t.values||[];this.fe(e,50);for(const i of n)this.he(i,e)}ye(t,e){this.fe(e,37),d8.fromName(t).path.forEach((t=>{this.fe(e,60),this.Te(t,e)}))}fe(t,e){t.de(e)}me(t){t.de(2)}}qtt.Ee=new qtt;class Xtt{constructor(){this.Ze=new Ktt}addToCollectionParentIndex(t,e){return this.Ze.add(e),x8.resolve()}getCollectionParents(t,e){return x8.resolve(this.Ze.getEntries(e))}addFieldIndex(t,e){return x8.resolve()}deleteFieldIndex(t,e){return x8.resolve()}getDocumentsMatchingTarget(t,e){return x8.resolve(null)}getIndexType(t,e){return x8.resolve(0)}getFieldIndexes(t,e){return x8.resolve([])}getNextCollectionGroupToUpdate(t){return x8.resolve(null)}getMinOffset(t,e){return x8.resolve(y8.min())}getMinOffsetFromCollectionGroup(t,e){return x8.resolve(y8.min())}updateCollectionGroup(t,e,n){return x8.resolve()}updateIndexEntries(t,e){return x8.resolve()}}class Ktt{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new A7(c8.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new A7(c8.comparator)).toArray()}}new Uint8Array(0);class Qtt{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Qtt(t,Qtt.DEFAULT_COLLECTION_PERCENTILE,Qtt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Qtt.DEFAULT_COLLECTION_PERCENTILE=10,Qtt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qtt.DEFAULT=new Qtt(41943040,Qtt.DEFAULT_COLLECTION_PERCENTILE,Qtt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qtt.DISABLED=new Qtt(-1,0,0);class Jtt{constructor(t){this.Pn=t}next(){return this.Pn+=2,this.Pn}static Vn(){return new Jtt(0)}static Sn(){return new Jtt(-1)}}class $tt{constructor(){this.changes=new z9((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,P7.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?x8.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class tet{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class eet{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&w9(n.mutation,t,O7.empty(),a8.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Q9()).next((()=>e))))}getLocalViewOfDocuments(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q9();const i=Z9();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=V9();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Z9();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Q9())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=H9();const s=q9(),o=q9();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof A9)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),w9(o.mutation,e,o.mutation.getFieldMask(),a8.now())):s.set(e.key,O7.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new tet(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=q9();let i=new S7(((t,e)=>t-e)),r=Q9();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||O7.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||Q9()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,l=i.value,h=Y9();l.forEach((t=>{if(!r.has(t)){const i=b9(e.get(t),n.get(t));null!==i&&h.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,h))}return x8.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n){return function(t){return d8.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Z7(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):x8.resolve(Z9());let o=-1,a=r;return s.next((e=>x8.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?x8.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,Q9()))).next((t=>({batchId:o,changes:W9(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new d8(e)).next((t=>{let e=V9();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n){const i=e.collectionGroup;let r=V9();return this.indexManager.getCollectionParents(t,i).next((s=>x8.forEach(s,(s=>{const o=function(t,e){return new z7(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return this.getDocumentsMatchingCollectionQuery(t,o,n).next((t=>{t.forEach(((t,e)=>{r=r.insert(t,e)}))}))})).next((()=>r))))}getDocumentsMatchingCollectionQuery(t,e,n){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((r=>(i=r,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i)))).next((t=>{i.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,P7.newInvalidDocument(i)))}));let n=V9();return t.forEach(((t,r)=>{const s=i.get(t);void 0!==s&&w9(s.mutation,r,O7.empty(),a8.now()),t9(e,r)&&(n=n.insert(t,r))})),n}))}}class net{constructor(t){this.Tt=t,this.es=new Map,this.ns=new Map}getBundleMetadata(t,e){return x8.resolve(this.es.get(e))}saveBundleMetadata(t,e){var n;return this.es.set(e.id,{id:(n=e).id,version:n.version,createTime:gtt(n.createTime)}),x8.resolve()}getNamedQuery(t,e){return x8.resolve(this.ns.get(e))}saveNamedQuery(t,e){return this.ns.set(e.name,function(t){return{name:t.name,query:Ytt(t.bundledQuery),readTime:gtt(t.readTime)}}(e)),x8.resolve()}}class iet{constructor(){this.overlays=new S7(d8.comparator),this.ss=new Map}getOverlay(t,e){return x8.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Z9();return x8.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.ce(t,e,i)})),x8.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.ss.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.ss.delete(n)),x8.resolve()}getOverlaysForCollection(t,e,n){const i=Z9(),r=e.length+1,s=new d8(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return x8.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new S7(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=Z9(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Z9(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return x8.resolve(o)}ce(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.ss.get(i.largestBatchId).delete(n.key);this.ss.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Vtt(e,n));let r=this.ss.get(e);void 0===r&&(r=Q9(),this.ss.set(e,r)),this.ss.set(e,r.add(n.key))}}class ret{constructor(){this.rs=new A7(set.os),this.us=new A7(set.cs)}isEmpty(){return this.rs.isEmpty()}addReference(t,e){const n=new set(t,e);this.rs=this.rs.add(n),this.us=this.us.add(n)}hs(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.ls(new set(t,e))}fs(t,e){t.forEach((t=>this.removeReference(t,e)))}ds(t){const e=new d8(new c8([])),n=new set(e,t),i=new set(e,t+1),r=[];return this.us.forEachInRange([n,i],(t=>{this.ls(t),r.push(t.key)})),r}_s(){this.rs.forEach((t=>this.ls(t)))}ls(t){this.rs=this.rs.delete(t),this.us=this.us.delete(t)}ws(t){const e=new d8(new c8([])),n=new set(e,t),i=new set(e,t+1);let r=Q9();return this.us.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new set(t,0),n=this.rs.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class set{constructor(t,e){this.key=t,this.gs=e}static os(t,e){return d8.comparator(t.key,e.key)||s8(t.gs,e.gs)}static cs(t,e){return s8(t.gs,e.gs)||d8.comparator(t.key,e.key)}}class oet{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ys=1,this.ps=new A7(set.os)}checkEmpty(t){return x8.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Htt(r,e,n,i);this.mutationQueue.push(s);for(const o of i)this.ps=this.ps.add(new set(o.key,r)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return x8.resolve(s)}lookupMutationBatch(t,e){return x8.resolve(this.Is(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.Ts(n),r=i<0?0:i;return x8.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return x8.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(t){return x8.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new set(e,0),i=new set(e,Number.POSITIVE_INFINITY),r=[];return this.ps.forEachInRange([n,i],(t=>{const e=this.Is(t.gs);r.push(e)})),x8.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new A7(s8);return e.forEach((t=>{const e=new set(t,0),i=new set(t,Number.POSITIVE_INFINITY);this.ps.forEachInRange([e,i],(t=>{n=n.add(t.gs)}))})),x8.resolve(this.Es(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;d8.isDocumentKey(r)||(r=r.child(""));const s=new set(new d8(r),0);let o=new A7(s8);return this.ps.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.gs)),!0)}),s),x8.resolve(this.Es(o))}Es(t){const e=[];return t.forEach((t=>{const n=this.Is(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){V6(0===this.As(e.batchId,"removed")),this.mutationQueue.shift();let n=this.ps;return x8.forEach(e.mutations,(i=>{const r=new set(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.ps=n}))}bn(t){}containsKey(t,e){const n=new set(e,0),i=this.ps.firstAfterOrEqual(n);return x8.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,x8.resolve()}As(t,e){return this.Ts(t)}Ts(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Is(t){const e=this.Ts(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class aet{constructor(t){this.Rs=t,this.docs=new S7(d8.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.Rs(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return x8.resolve(n?n.document.mutableCopy():P7.newInvalidDocument(e))}getEntries(t,e){let n=H9();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():P7.newInvalidDocument(t))})),x8.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=H9();const s=e.path,o=new d8(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||v8(g8(o),n)<=0||(i.has(o.key)||t9(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return x8.resolve(r)}getAllFromCollectionGroup(t,e,n,i){j6()}bs(t,e){return x8.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new het(this)}getSize(t){return x8.resolve(this.size)}}class het extends $tt{constructor(t){super(),this.Xn=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.Xn.addEntry(t,i)):this.Xn.removeEntry(n)})),x8.waitFor(e)}getFromCache(t,e){return this.Xn.getEntry(t,e)}getAllFromCache(t,e){return this.Xn.getEntries(t,e)}}class cet{constructor(t){this.persistence=t,this.vs=new z9((t=>k7(t)),U7),this.lastRemoteSnapshotVersion=l8.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new ret,this.targetCount=0,this.Ss=Jtt.Vn()}forEachTarget(t,e){return this.vs.forEach(((t,n)=>e(n))),x8.resolve()}getLastRemoteSnapshotVersion(t){return x8.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return x8.resolve(this.Ps)}allocateTargetId(t){return this.highestTargetId=this.Ss.next(),x8.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ps&&(this.Ps=e),x8.resolve()}xn(t){this.vs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ss=new Jtt(e),this.highestTargetId=e),t.sequenceNumber>this.Ps&&(this.Ps=t.sequenceNumber)}addTargetData(t,e){return this.xn(e),this.targetCount+=1,x8.resolve()}updateTargetData(t,e){return this.xn(e),x8.resolve()}removeTargetData(t,e){return this.vs.delete(e.target),this.Vs.ds(e.targetId),this.targetCount-=1,x8.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.vs.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.vs.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),x8.waitFor(r).next((()=>i))}getTargetCount(t){return x8.resolve(this.targetCount)}getTargetData(t,e){const n=this.vs.get(e)||null;return x8.resolve(n)}addMatchingKeys(t,e,n){return this.Vs.hs(e,n),x8.resolve()}removeMatchingKeys(t,e,n){this.Vs.fs(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),x8.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Vs.ds(e),x8.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Vs.ws(e);return x8.resolve(n)}containsKey(t,e){return x8.resolve(this.Vs.containsKey(e))}}class uet{constructor(t,e){this.Ds={},this.overlays={},this.Cs=new I8(0),this.xs=!1,this.xs=!0,this.referenceDelegate=t(this),this.Ns=new cet(this),this.indexManager=new Xtt,this.remoteDocumentCache=function(t){return new aet(t)}((t=>this.referenceDelegate.ks(t))),this.Tt=new Ztt(e),this.Os=new net(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new iet,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Ds[t.toKey()];return n||(n=new oet(e,this.referenceDelegate),this.Ds[t.toKey()]=n),n}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Os}runTransaction(t,e,n){B6("MemoryPersistence","Starting transaction:",t);const i=new pet(this.Cs.next());return this.referenceDelegate.Ms(),n(i).next((t=>this.referenceDelegate.Fs(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}$s(t,e){return x8.or(Object.values(this.Ds).map((n=>()=>n.containsKey(t,e))))}}class pet extends T8{constructor(t){super(),this.currentSequenceNumber=t}}class det{constructor(t){this.persistence=t,this.Bs=new ret,this.Ls=null}static qs(t){return new det(t)}get Us(){if(this.Ls)return this.Ls;throw j6()}addReference(t,e,n){return this.Bs.addReference(n,e),this.Us.delete(n.toString()),x8.resolve()}removeReference(t,e,n){return this.Bs.removeReference(n,e),this.Us.add(n.toString()),x8.resolve()}markPotentiallyOrphaned(t,e){return this.Us.add(e.toString()),x8.resolve()}removeTarget(t,e){this.Bs.ds(e.targetId).forEach((t=>this.Us.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Us.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Ms(){this.Ls=new Set}Fs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x8.forEach(this.Us,(n=>{const i=d8.fromPath(n);return this.Ks(t,i).next((t=>{t||e.removeEntry(i,l8.min())}))})).next((()=>(this.Ls=null,e.apply(t))))}updateLimboDocument(t,e){return this.Ks(t,e).next((t=>{t?this.Us.delete(e.toString()):this.Us.add(e.toString())}))}ks(t){return 0}Ks(t,e){return x8.or([()=>x8.resolve(this.Bs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.$s(t,e)])}}class fet{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Ci=n,this.xi=i}static Ni(t,e){let n=Q9(),i=Q9();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new fet(t,e.fromCache,n,i)}}class met{constructor(){this.ki=!1}initialize(t,e){this.Oi=t,this.indexManager=e,this.ki=!0}getDocumentsMatchingQuery(t,e,n,i){return this.Mi(t,e).next((r=>r||this.Fi(t,e,i,n))).next((n=>n||this.$i(t,e)))}Mi(t,e){if(j7(e))return x8.resolve(null);let n=q7(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=K7(e,null,"F"),n=q7(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=Q9(...i);return this.Oi.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Bi(e,i);return this.Li(e,s,r,n.readTime)?this.Mi(t,K7(e,null,"F")):this.qi(t,s,e,n)}))))})))))}Fi(t,e,n,i){return j7(e)||i.isEqual(l8.min())?this.$i(t,e):this.Oi.getDocuments(t,n).next((r=>{const s=this.Bi(e,r);return this.Li(e,s,n,i)?this.$i(t,e):(U6()<=_r.DEBUG&&B6("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$7(e)),this.qi(t,s,e,m8(i,-1)))}))}Bi(t,e){let n=new A7(n9(t));return e.forEach(((e,i)=>{t9(t,i)&&(n=n.add(i))})),n}Li(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}$i(t,e){return U6()<=_r.DEBUG&&B6("QueryEngine","Using full collection scan to execute query:",$7(e)),this.Oi.getDocumentsMatchingQuery(t,e,y8.min())}qi(t,e,n,i){return this.Oi.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class get{constructor(t,e,n,i){this.persistence=t,this.Ui=e,this.Tt=i,this.Ki=new S7(s8),this.Gi=new z9((t=>k7(t)),U7),this.Qi=new Map,this.ji=t.getRemoteDocumentCache(),this.Ns=t.getTargetCache(),this.Os=t.getBundleCache(),this.zi(n)}zi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new eet(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ki)))}}function yet(t,e,n,i){return new get(t,e,n,i)}async function vet(t,e){const n=W6(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n.zi(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=Q9();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({Wi:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function _et(t){const e=W6(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ns.getLastRemoteSnapshotVersion(t)))}function Tet(t,e,n){let i=Q9(),r=Q9();return n.forEach((t=>i=i.add(t))),e.getEntries(t,i).next((t=>{let i=H9();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(l8.min())?(e.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),i=i.insert(n,s)):B6("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Hi:i,Ji:r}}))}function Eet(t,e){const n=W6(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}function xet(t,e){const n=W6(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.Ns.getTargetData(t,e).next((r=>r?(i=r,x8.resolve(i)):n.Ns.allocateTargetId(t).next((r=>(i=new Wtt(e,r,0,t.currentSequenceNumber),n.Ns.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.Ki.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(t.targetId,t),n.Gi.set(e,t.targetId)),t}))}async function bet(t,e,n){const i=W6(t),r=i.Ki.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(t=>i.persistence.referenceDelegate.removeTarget(t,r)))}catch(t){if(!b8(t))throw t;B6("LocalStore","Failed to update sequence numbers for target ".concat(e,": ").concat(t))}i.Ki=i.Ki.remove(e),i.Gi.delete(r.target)}function Iet(t,e,n){const i=W6(t);let r=l8.min(),s=Q9();return i.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const i=W6(t),r=i.Gi.get(n);return void 0!==r?x8.resolve(i.Ki.get(r)):i.Ns.getTargetData(e,n)}(i,t,q7(e)).next((e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.Ns.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>i.Ui.getDocumentsMatchingQuery(t,e,n?r:l8.min(),n?s:Q9()))).next((t=>(wet(i,e9(e),t),{documents:t,Yi:s})))))}function wet(t,e,n){let i=t.Qi.get(e)||l8.min();n.forEach(((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.Qi.set(e,i)}class Ret{constructor(){this.activeTargetIds=$9()}sr(t){this.activeTargetIds=this.activeTargetIds.add(t)}ir(t){this.activeTargetIds=this.activeTargetIds.delete(t)}nr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Cet{constructor(){this.Ur=new Ret,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.Ur.sr(t),this.Kr[t]||"not-current"}updateQueryState(t,e,n){this.Kr[t]=e}removeLocalQueryTarget(t){this.Ur.ir(t)}isLocalQueryTarget(t){return this.Ur.activeTargetIds.has(t)}clearQueryState(t){delete this.Kr[t]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(t){return this.Ur.activeTargetIds.has(t)}start(){return this.Ur=new Ret,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Aet{Gr(t){}shutdown(){}}class Det{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(t){this.Hr.push(t)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){B6("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Hr)t(0)}Wr(){B6("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Hr)t(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Oet={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Net{constructor(t){this.Yr=t.Yr,this.Zr=t.Zr}Xr(t){this.eo=t}no(t){this.so=t}onMessage(t){this.io=t}close(){this.Zr()}send(t){this.Yr(t)}ro(){this.eo()}oo(t){this.so(t)}uo(t){this.io(t)}}class Met extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.co=e+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(t,e,n,i,r){const s=this.fo(t,e);B6("RestConnection","Sending: ",s,n);const o={};return this._o(o,i,r),this.wo(t,s,o,n).then((t=>(B6("RestConnection","Received: ",t),t)),(e=>{throw G6("RestConnection","".concat(t," failed with error: "),e,"url: ",s,"request:",n),e}))}mo(t,e,n,i,r,s){return this.lo(t,e,n,i,r)}_o(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+L6,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}fo(t,e){const n=Oet[t];return"".concat(this.co,"/v1/").concat(e,":").concat(n)}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}wo(t,e,n,i){return new Promise(((r,s)=>{const o=new M6;o.setWithCredentials(!0),o.listenOnce(C6.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case R6.NO_ERROR:const e=o.getResponseJson();B6("Connection","XHR received:",JSON.stringify(e)),r(e);break;case R6.TIMEOUT:B6("Connection",'RPC "'+t+'" timed out'),s(new Y6(Z6.DEADLINE_EXCEEDED,"Request time out"));break;case R6.HTTP_ERROR:const n=o.getStatus();if(B6("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){let t=o.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Z6).indexOf(e)>=0?e:Z6.UNKNOWN}(e.status);s(new Y6(t,e.message))}else s(new Y6(Z6.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Y6(Z6.UNAVAILABLE,"Connection failed."));break;default:j6()}}finally{B6("Connection",'RPC "'+t+'" completed.')}}));const a=JSON.stringify(i);o.send(e,"POST",a,n,15)}))}yo(t,e,n){const i=[this.co,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=w6(),s=S6(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new O6({})),this._o(o.initMessageHeaders,e,n),o.encodeInitMessageHeaders=!0;const a=i.join("");B6("Connection","Creating WebChannel: "+a,o);const l=r.createWebChannel(a,o);let h=!1,c=!1;const u=new Net({Yr:t=>{c?B6("Connection","Not sending because WebChannel is closed:",t):(h||(B6("Connection","Opening WebChannel transport."),l.open(),h=!0),B6("Connection","WebChannel sending:",t),l.send(t))},Zr:()=>l.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(l,N6.EventType.OPEN,(()=>{c||B6("Connection","WebChannel transport opened.")})),p(l,N6.EventType.CLOSE,(()=>{c||(c=!0,B6("Connection","WebChannel transport closed"),u.oo())})),p(l,N6.EventType.ERROR,(t=>{c||(c=!0,G6("Connection","WebChannel transport errored:",t),u.oo(new Y6(Z6.UNAVAILABLE,"The operation could not be completed")))})),p(l,N6.EventType.MESSAGE,(t=>{var e;if(!c){const n=t.data[0];V6(!!n);const i=n,r=i.error||(null===(e=i[0])||void 0===e?void 0:e.error);if(r){B6("Connection","WebChannel received error:",r);const t=r.status;let e=function(t){const e=L9[t];if(void 0!==e)return B9(e)}(t),n=r.message;void 0===e&&(e=Z6.INTERNAL,n="Unknown error status: "+t+" with message "+r.message),c=!0,u.oo(new Y6(e,n)),l.close()}else B6("Connection","WebChannel received:",n),u.uo(n)}})),p(s,A6.STAT_EVENT,(t=>{t.stat===D6.PROXY?B6("Connection","Detected buffering proxy"):t.stat===D6.NOPROXY&&B6("Connection","Detected no buffering proxy")})),setTimeout((()=>{u.ro()}),0),u}}function Pet(){return"undefined"!=typeof document?document:null}function Fet(t){return new ptt(t,!0)}class Let{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ys=t,this.timerId=e,this.po=n,this.Io=i,this.To=r,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}bo(){this.Eo=this.To}vo(t){this.cancel();const e=Math.floor(this.Eo+this.Po()),n=Math.max(0,Date.now()-this.Ro),i=Math.max(0,e-n);i>0&&B6("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Eo," ms, delay with jitter: ").concat(e," ms, last attempt: ").concat(n," ms ago)")),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,(()=>(this.Ro=Date.now(),t()))),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}Po(){return(Math.random()-.5)*this.Eo}}class ket{constructor(t,e,n,i,r,s,o,a){this.Ys=t,this.So=n,this.Do=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new Let(t,e)}Oo(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Fo()}async stop(){this.Oo()&&await this.close(0)}$o(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,(()=>this.Lo())))}qo(t){this.Uo(),this.stream.send(t)}async Lo(){if(this.Mo())return this.close(0)}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}async close(t,e){this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,4!==t?this.ko.reset():e&&e.code===Z6.RESOURCE_EXHAUSTED?(z6(e.toString()),z6("Using maximum backoff delay to prevent overloading the backend."),this.ko.bo()):e&&e.code===Z6.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Go(),this.stream.close(),this.stream=null),this.state=t,await this.listener.no(e)}Go(){}auth(){this.state=1;const t=this.Qo(this.Co),e=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((t=>{let[n,i]=t;this.Co===e&&this.jo(n,i)}),(e=>{t((()=>{const t=new Y6(Z6.UNKNOWN,"Fetching auth token failed: "+e.message);return this.zo(t)}))}))}jo(t,e){const n=this.Qo(this.Co);this.stream=this.Wo(t,e),this.stream.Xr((()=>{n((()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,(()=>(this.Mo()&&(this.state=3),Promise.resolve()))),this.listener.Xr())))})),this.stream.no((t=>{n((()=>this.zo(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Fo(){this.state=5,this.ko.vo((async()=>{this.state=0,this.start()}))}zo(t){return B6("PersistentStream","close with error: ".concat(t)),this.stream=null,this.close(4,t)}Qo(t){return e=>{this.Ys.enqueueAndForget((()=>this.Co===t?e():(B6("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Uet extends ket{constructor(t,e,n,i,r,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,s),this.Tt=r}Wo(t,e){return this.connection.yo("Listen",t,e)}onMessage(t){this.ko.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:j6()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(t,e){return t.yt?(V6(void 0===e||"string"==typeof e),P8.fromBase64String(e||"")):(V6(void 0===e||e instanceof Uint8Array),P8.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Z6.UNKNOWN:B9(t.code);return new Y6(e,t.message||"")}(o);n=new rtt(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Ttt(t,i.document.name),s=gtt(i.document.updateTime),o=i.document.createTime?gtt(i.document.createTime):l8.min(),a=new N7({mapValue:{fields:i.document.fields}}),l=P7.newFoundDocument(r,s,o,a),h=i.targetIds||[],c=i.removedTargetIds||[];n=new ntt(h,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Ttt(t,i.document),s=i.readTime?gtt(i.readTime):l8.min(),o=P7.newNoDocument(r,s),a=i.removedTargetIds||[];n=new ntt([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Ttt(t,i.document),s=i.removedTargetIds||[];n=new ntt([],s,r,null)}else{if(!("filter"in e))return j6();{e.filter;const t=e.filter;t.targetId;const i=t.count||0,r=new F9(i),s=t.targetId;n=new itt(s,r)}}return n}(this.Tt,t),n=function(t){if(!("targetChange"in t))return l8.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?l8.min():e.readTime?gtt(e.readTime):l8.min()}(t);return this.listener.Ho(e,n)}Jo(t){const e={};e.database=btt(this.Tt),e.addTarget=function(t,e){let n;const i=e.target;return n=B7(i)?{documents:Rtt(t,i)}:{query:Ctt(t,i)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=ftt(t,e.resumeToken):e.snapshotVersion.compareTo(l8.min())>0&&(n.readTime=dtt(t,e.snapshotVersion.toTimestamp())),n}(this.Tt,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return j6()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.Tt,t);n&&(e.labels=n),this.qo(e)}Yo(t){const e={};e.database=btt(this.Tt),e.removeTarget=t,this.qo(e)}}class Bet extends ket{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.Tt=r,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(t,e){return this.connection.yo("Write",t,e)}onMessage(t){if(V6(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Zo){this.ko.reset();const e=function(t,e){return t&&t.length>0?(V6(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?gtt(t.updateTime):gtt(e);return n.isEqual(l8.min())&&(n=gtt(e)),new _9(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=gtt(t.commitTime);return this.listener.eu(n,e)}return V6(!t.writeResults||0===t.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const t={};t.database=btt(this.Tt),this.qo(t)}tu(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>Stt(this.Tt,t)))};this.qo(e)}}class zet extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new Y6(Z6.FAILED_PRECONDITION,"The client has already been terminated.")}lo(t,e,n){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[r,s]=i;return this.connection.lo(t,e,n,r,s)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===Z6.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Y6(Z6.UNKNOWN,t.toString())}))}mo(t,e,n,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[s,o]=r;return this.connection.mo(t,e,n,s,o,i)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===Z6.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Y6(Z6.UNKNOWN,t.toString())}))}terminate(){this.iu=!0}}class Get{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve()))))}fu(t){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu("Connection failed 1 times. Most recent error: ".concat(t.toString())),this.hu("Offline")))}set(t){this.du(),this.ou=0,"Online"===t&&(this.cu=!1),this.hu(t)}hu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}lu(t){const e="Could not reach Cloud Firestore backend. ".concat(t,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.cu?(z6(e),this.cu=!1):B6("OnlineStateTracker",e)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class Het{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=r,this.yu.Gr((t=>{n.enqueueAndForget((async()=>{Qet(this)&&(B6("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=W6(t);e.mu.add(4),await Vet(e),e.pu.set("Unknown"),e.mu.delete(4),await jet(e)}(this))}))})),this.pu=new Get(n,i)}}async function jet(t){if(Qet(t))for(const e of t.gu)await e(!0)}async function Vet(t){for(const e of t.gu)await e(!1)}function Wet(t,e){const n=W6(t);n.wu.has(e.targetId)||(n.wu.set(e.targetId,e),Ket(n)?Xet(n):mnt(n).Mo()&&Yet(n,e))}function Zet(t,e){const n=W6(t),i=mnt(n);n.wu.delete(e),i.Mo()&&qet(n,e),0===n.wu.size&&(i.Mo()?i.Bo():Qet(n)&&n.pu.set("Unknown"))}function Yet(t,e){t.Iu.Ft(e.targetId),mnt(t).Jo(e)}function qet(t,e){t.Iu.Ft(e),mnt(t).Yo(e)}function Xet(t){t.Iu=new ott({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>t.wu.get(e)||null}),mnt(t).start(),t.pu.au()}function Ket(t){return Qet(t)&&!mnt(t).Oo()&&t.wu.size>0}function Qet(t){return 0===W6(t).mu.size}function Jet(t){t.Iu=void 0}async function $et(t){t.wu.forEach(((e,n)=>{Yet(t,e)}))}async function tnt(t,e){Jet(t),Ket(t)?(t.pu.fu(e),Xet(t)):t.pu.set("Unknown")}async function ent(t,e,n){if(t.pu.set("Online"),e instanceof rtt&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.wu.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.wu.delete(i),t.Iu.removeTarget(i))}(t,e)}catch(n){B6("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await nnt(t,n)}else if(e instanceof ntt?t.Iu.Qt(e):e instanceof itt?t.Iu.Zt(e):t.Iu.Wt(e),!n.isEqual(l8.min()))try{const e=await _et(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Iu.ee(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.wu.get(i);r&&t.wu.set(i,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((e=>{const n=t.wu.get(e);if(!n)return;t.wu.set(e,n.withResumeToken(P8.EMPTY_BYTE_STRING,n.snapshotVersion)),qet(t,e);const i=new Wtt(n.target,e,1,n.sequenceNumber);Yet(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){B6("RemoteStore","Failed to raise snapshot:",e),await nnt(t,e)}}async function nnt(t,e,n){if(!b8(e))throw e;t.mu.add(1),await Vet(t),t.pu.set("Offline"),n||(n=()=>_et(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{B6("RemoteStore","Retrying IndexedDB access"),await n(),t.mu.delete(1),await jet(t)}))}function int(t,e){return e().catch((n=>nnt(t,n,e)))}async function rnt(t){const e=W6(t),n=gnt(e);let i=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;snt(e);)try{const t=await Eet(e.localStore,i);if(null===t){0===e._u.length&&n.Bo();break}i=t.batchId,ont(e,t)}catch(t){await nnt(e,t)}ant(e)&&lnt(e)}function snt(t){return Qet(t)&&t._u.length<10}function ont(t,e){t._u.push(e);const n=gnt(t);n.Mo()&&n.Xo&&n.tu(e.mutations)}function ant(t){return Qet(t)&&!gnt(t).Oo()&&t._u.length>0}function lnt(t){gnt(t).start()}async function hnt(t){gnt(t).su()}async function cnt(t){const e=gnt(t);for(const n of t._u)e.tu(n.mutations)}async function unt(t,e,n){const i=t._u.shift(),r=jtt.from(i,e,n);await int(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await rnt(t)}async function pnt(t,e){e&&gnt(t).Xo&&await async function(t,e){if(U9(n=e.code)&&n!==Z6.ABORTED){const n=t._u.shift();gnt(t).$o(),await int(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await rnt(t)}var n}(t,e),ant(t)&&lnt(t)}async function dnt(t,e){const n=W6(t);n.asyncQueue.verifyOperationInProgress(),B6("RemoteStore","RemoteStore received new credentials");const i=Qet(n);n.mu.add(3),await Vet(n),i&&n.pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.mu.delete(3),await jet(n)}async function fnt(t,e){const n=W6(t);e?(n.mu.delete(2),await jet(n)):e||(n.mu.add(2),await Vet(n),n.pu.set("Unknown"))}function mnt(t){return t.Tu||(t.Tu=function(t,e,n){const i=W6(t);return i.ru(),new Uet(e,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,n)}(t.datastore,t.asyncQueue,{Xr:$et.bind(null,t),no:tnt.bind(null,t),Ho:ent.bind(null,t)}),t.gu.push((async e=>{e?(t.Tu.$o(),Ket(t)?Xet(t):t.pu.set("Unknown")):(await t.Tu.stop(),Jet(t))}))),t.Tu}function gnt(t){return t.Eu||(t.Eu=function(t,e,n){const i=W6(t);return i.ru(),new Bet(e,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,n)}(t.datastore,t.asyncQueue,{Xr:hnt.bind(null,t),no:pnt.bind(null,t),nu:cnt.bind(null,t),eu:unt.bind(null,t)}),t.gu.push((async e=>{e?(t.Eu.$o(),await rnt(t)):(await t.Eu.stop(),t._u.length>0&&(B6("RemoteStore","Stopping write stream with ".concat(t._u.length," pending writes")),t._u=[]))}))),t.Eu}class ynt{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new q6,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new ynt(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Y6(Z6.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vnt(t,e){if(z6("AsyncQueue","".concat(e,": ").concat(t)),b8(t))return new Y6(Z6.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}class _nt{constructor(t){this.comparator=t?(e,n)=>t(e,n)||d8.comparator(e.key,n.key):(t,e)=>d8.comparator(t.key,e.key),this.keyedMap=V9(),this.sortedSet=new S7(this.comparator)}static emptySet(t){return new _nt(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof _nt))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new _nt;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class Tnt{constructor(){this.Au=new S7(d8.comparator)}track(t){const e=t.doc.key,n=this.Au.get(e);n?0!==t.type&&3===n.type?this.Au=this.Au.insert(e,t):3===t.type&&1!==n.type?this.Au=this.Au.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Au=this.Au.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Au=this.Au.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Au=this.Au.remove(e):1===t.type&&2===n.type?this.Au=this.Au.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Au=this.Au.insert(e,{type:2,doc:t.doc}):j6():this.Au=this.Au.insert(e,t)}Ru(){const t=[];return this.Au.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Ent{constructor(t,e,n,i,r,s,o,a,l){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(t,e,n,i,r){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new Ent(t,e,_nt.emptySet(e),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Q7(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}class xnt{constructor(){this.bu=void 0,this.listeners=[]}}class bnt{constructor(){this.queries=new z9((t=>J7(t)),Q7),this.onlineState="Unknown",this.vu=new Set}}async function Int(t,e){const n=W6(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new xnt),r)try{s.bu=await n.onListen(i)}catch(t){const n=vnt(t,"Initialization of query '".concat($7(e.query),"' failed"));return void e.onError(n)}n.queries.set(i,s),s.listeners.push(e),e.Pu(n.onlineState),s.bu&&e.Vu(s.bu)&&Cnt(n)}async function wnt(t,e){const n=W6(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),r=0===s.listeners.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function Snt(t,e){const n=W6(t);let i=!1;for(const r of e){const t=r.query,e=n.queries.get(t);if(e){for(const t of e.listeners)t.Vu(r)&&(i=!0);e.bu=r}}i&&Cnt(n)}function Rnt(t,e,n){const i=W6(t),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(e)}function Cnt(t){t.vu.forEach((t=>{t.next()}))}class Ant{constructor(t,e,n){this.query=t,this.Su=e,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=n||{}}Vu(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Ent(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Du?this.xu(t)&&(this.Su.next(t),e=!0):this.Nu(t,this.onlineState)&&(this.ku(t),e=!0),this.Cu=t,e}onError(t){this.Su.error(t)}Pu(t){this.onlineState=t;let e=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,t)&&(this.ku(this.Cu),e=!0),e}Nu(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Ou||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}xu(t){if(t.docChanges.length>0)return!0;const e=this.Cu&&this.Cu.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}ku(t){t=Ent.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Du=!0,this.Su.next(t)}}class Dnt{constructor(t){this.key=t}}class Ont{constructor(t){this.key=t}}class Nnt{constructor(t,e){this.query=t,this.Ku=e,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Q9(),this.mutatedKeys=Q9(),this.ju=n9(t),this.zu=new _nt(this.ju)}get Wu(){return this.Ku}Hu(t,e){const n=e?e.Ju:new Tnt,i=e?e.zu:this.zu;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const h=i.get(t),c=t9(this.query,e)?e:null,u=!!h&&this.mutatedKeys.has(h.key),p=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let d=!1;h&&c?h.data.isEqual(c.data)?u!==p&&(n.track({type:3,doc:c}),d=!0):this.Yu(h,c)||(n.track({type:2,doc:c}),d=!0,(a&&this.ju(c,a)>0||l&&this.ju(c,l)<0)&&(o=!0)):!h&&c?(n.track({type:0,doc:c}),d=!0):h&&!c&&(n.track({type:1,doc:h}),d=!0,(a||l)&&(o=!0)),d&&(c?(s=s.add(c),r=p?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{zu:s,Ju:n,Li:o,mutatedKeys:r}}Yu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const i=this.zu;this.zu=t.zu,this.mutatedKeys=t.mutatedKeys;const r=t.Ju.Ru();r.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j6()}};return n(t)-n(e)}(t.type,e.type)||this.ju(t.doc,e.doc))),this.Zu(n);const s=e?this.Xu():[],o=0===this.Qu.size&&this.current?1:0,a=o!==this.Gu;return this.Gu=o,0!==r.length||a?{snapshot:new Ent(this.query,t.zu,i,r,t.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),tc:s}:{tc:s}}Pu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new Tnt,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(t){return!this.Ku.has(t)&&!!this.zu.has(t)&&!this.zu.get(t).hasLocalMutations}Zu(t){t&&(t.addedDocuments.forEach((t=>this.Ku=this.Ku.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.Ku=this.Ku.delete(t))),this.current=t.current)}Xu(){if(!this.current)return[];const t=this.Qu;this.Qu=Q9(),this.zu.forEach((t=>{this.ec(t.key)&&(this.Qu=this.Qu.add(t.key))}));const e=[];return t.forEach((t=>{this.Qu.has(t)||e.push(new Ont(t))})),this.Qu.forEach((n=>{t.has(n)||e.push(new Dnt(n))})),e}nc(t){this.Ku=t.Yi,this.Qu=Q9();const e=this.Hu(t.documents);return this.applyChanges(e,!0)}sc(){return Ent.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class Mnt{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Pnt{constructor(t){this.key=t,this.ic=!1}}class Fnt{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.rc={},this.oc=new z9((t=>J7(t)),Q7),this.uc=new Map,this.cc=new Set,this.ac=new S7(d8.comparator),this.hc=new Map,this.lc=new ret,this.fc={},this.dc=new Map,this._c=Jtt.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}async function Lnt(t,e){const n=tit(t);let i,r;const s=n.oc.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.sc();else{const t=await xet(n.localStore,q7(e));n.isPrimaryClient&&Wet(n.remoteStore,t);const s=n.sharedClientState.addLocalQueryTarget(t.targetId);i=t.targetId,r=await knt(n,e,i,"current"===s,t.resumeToken)}return r}async function knt(t,e,n,i,r){t.mc=(e,n,i)=>async function(t,e,n,i){let r=e.view.Hu(n);r.Li&&(r=await Iet(t.localStore,e.query,!1).then((t=>{let{documents:n}=t;return e.view.Hu(n,r)})));const s=i&&i.targetChanges.get(e.targetId),o=e.view.applyChanges(r,t.isPrimaryClient,s);return qnt(t,e.targetId,o.tc),o.snapshot}(t,e,n,i);const s=await Iet(t.localStore,e,!0),o=new Nnt(e,s.Yi),a=o.Hu(s.documents),l=ett.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,r),h=o.applyChanges(a,t.isPrimaryClient,l);qnt(t,n,h.tc);const c=new Mnt(e,n,o);return t.oc.set(e,c),t.uc.has(n)?t.uc.get(n).push(e):t.uc.set(n,[e]),h.snapshot}async function Unt(t,e){const n=W6(t),i=n.oc.get(e),r=n.uc.get(i.targetId);if(r.length>1)return n.uc.set(i.targetId,r.filter((t=>!Q7(t,e)))),void n.oc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await bet(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),Zet(n.remoteStore,i.targetId),Znt(n,i.targetId)})).catch(E8)):(Znt(n,i.targetId),await bet(n.localStore,i.targetId,!0))}async function Bnt(t,e){const n=W6(t);try{const t=await function(t,e){const n=W6(t),i=e.snapshotVersion;let r=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.ji.newChangeBuffer({trackRemovals:!0});r=n.Ki;const o=[];e.targetChanges.forEach(((s,a)=>{const l=r.get(a);if(!l)return;o.push(n.Ns.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Ns.addMatchingKeys(t,s.addedDocuments,a))));let h=l.withSequenceNumber(t.currentSequenceNumber);e.targetMismatches.has(a)?h=h.withResumeToken(P8.EMPTY_BYTE_STRING,l8.min()).withLastLimboFreeSnapshotVersion(l8.min()):s.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(s.resumeToken,i)),r=r.insert(a,h),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,h,s)&&o.push(n.Ns.updateTargetData(t,h))}));let a=H9(),l=Q9();if(e.documentUpdates.forEach((i=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push(Tet(t,s,e.documentUpdates).next((t=>{a=t.Hi,l=t.Ji}))),!i.isEqual(l8.min())){const e=n.Ns.getLastRemoteSnapshotVersion(t).next((e=>n.Ns.setTargetsMetadata(t,t.currentSequenceNumber,i)));o.push(e)}return x8.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,l))).next((()=>a))})).then((t=>(n.Ki=r,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.hc.get(e);i&&(V6(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.ic=!0:t.modifiedDocuments.size>0?V6(i.ic):t.removedDocuments.size>0&&(V6(i.ic),i.ic=!1))})),await Qnt(n,t,e)}catch(t){await E8(t)}}function znt(t,e,n){const i=W6(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.oc.forEach(((n,i)=>{const r=i.view.Pu(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=W6(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const r of n.listeners)r.Pu(e)&&(i=!0)})),i&&Cnt(n)}(i.eventManager,e),t.length&&i.rc.Ho(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Gnt(t,e,n){const i=W6(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.hc.get(e),s=r&&r.key;if(s){let t=new S7(d8.comparator);t=t.insert(s,P7.newNoDocument(s,l8.min()));const n=Q9().add(s),r=new ttt(l8.min(),new Map,new A7(s8),t,n);await Bnt(i,r),i.ac=i.ac.remove(s),i.hc.delete(e),Knt(i)}else await bet(i.localStore,e,!1).then((()=>Znt(i,e,n))).catch(E8)}async function Hnt(t,e){const n=W6(t),i=e.batch.batchId;try{const t=await function(t,e){const n=W6(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.ji.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=x8.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);V6(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Q9();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);Wnt(n,i,null),Vnt(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Qnt(n,t)}catch(t){await E8(t)}}async function jnt(t,e,n){const i=W6(t);try{const t=await function(t,e){const n=W6(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(V6(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);Wnt(i,e,n),Vnt(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Qnt(i,t)}catch(n){await E8(n)}}function Vnt(t,e){(t.dc.get(e)||[]).forEach((t=>{t.resolve()})),t.dc.delete(e)}function Wnt(t,e,n){const i=W6(t);let r=i.fc[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.fc[i.currentUser.toKey()]=r}}function Znt(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.uc.get(e))t.oc.delete(i),n&&t.rc.gc(i,n);t.uc.delete(e),t.isPrimaryClient&&t.lc.ds(e).forEach((e=>{t.lc.containsKey(e)||Ynt(t,e)}))}function Ynt(t,e){t.cc.delete(e.path.canonicalString());const n=t.ac.get(e);null!==n&&(Zet(t.remoteStore,n),t.ac=t.ac.remove(e),t.hc.delete(n),Knt(t))}function qnt(t,e,n){for(const i of n)i instanceof Dnt?(t.lc.addReference(i.key,e),Xnt(t,i)):i instanceof Ont?(B6("SyncEngine","Document no longer in limbo: "+i.key),t.lc.removeReference(i.key,e),t.lc.containsKey(i.key)||Ynt(t,i.key)):j6()}function Xnt(t,e){const n=e.key,i=n.path.canonicalString();t.ac.get(n)||t.cc.has(i)||(B6("SyncEngine","New document in limbo: "+n),t.cc.add(i),Knt(t))}function Knt(t){for(;t.cc.size>0&&t.ac.size<t.maxConcurrentLimboResolutions;){const e=t.cc.values().next().value;t.cc.delete(e);const n=new d8(c8.fromString(e)),i=t._c.next();t.hc.set(i,new Pnt(n)),t.ac=t.ac.insert(n,i),Wet(t.remoteStore,new Wtt(q7(H7(n.path)),i,2,I8.at))}}async function Qnt(t,e,n){const i=W6(t),r=[],s=[],o=[];i.oc.isEmpty()||(i.oc.forEach(((t,a)=>{o.push(i.mc(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=fet.Ni(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.rc.Ho(r),await async function(t,e){const n=W6(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>x8.forEach(e,(e=>x8.forEach(e.Ci,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>x8.forEach(e.xi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!b8(t))throw t;B6("LocalStore","Failed to update sequence numbers: "+t)}for(const i of e){const t=i.targetId;if(!i.fromCache){const e=n.Ki.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.Ki=n.Ki.insert(t,r)}}}(i.localStore,s))}async function Jnt(t,e){const n=W6(t);if(!n.currentUser.isEqual(e)){B6("SyncEngine","User change. New user:",e.toKey());const t=await vet(n.localStore,e);n.currentUser=e,function(t,e){t.dc.forEach((t=>{t.forEach((t=>{t.reject(new Y6(Z6.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.dc.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Qnt(n,t.Wi)}}function $nt(t,e){const n=W6(t),i=n.hc.get(e);if(i&&i.ic)return Q9().add(i.key);{let t=Q9();const i=n.uc.get(e);if(!i)return t;for(const e of i){const i=n.oc.get(e);t=t.unionWith(i.view.Wu)}return t}}function tit(t){const e=W6(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bnt.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$nt.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gnt.bind(null,e),e.rc.Ho=Snt.bind(null,e.eventManager),e.rc.gc=Rnt.bind(null,e.eventManager),e}function eit(t){const e=W6(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hnt.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jnt.bind(null,e),e}class nit{constructor(){this.synchronizeTabs=!1}async initialize(t){this.Tt=Fet(t.databaseInfo.databaseId),this.sharedClientState=this.Ic(t),this.persistence=this.Tc(t),await this.persistence.start(),this.localStore=this.Ec(t),this.gcScheduler=this.Ac(t,this.localStore),this.indexBackfillerScheduler=this.Rc(t,this.localStore)}Ac(t,e){return null}Rc(t,e){return null}Ec(t){return yet(this.persistence,new met,t.initialUser,this.Tt)}Tc(t){return new uet(det.qs,this.Tt)}Ic(t){return new Cet}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class iit{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>znt(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Jnt.bind(null,this.syncEngine),await fnt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new bnt}createDatastore(t){const e=Fet(t.databaseInfo.databaseId),n=(i=t.databaseInfo,new Met(i));var i;return function(t,e,n,i){return new zet(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,i=t.asyncQueue,r=t=>znt(this.syncEngine,t,0),s=Det.C()?new Det:new Aet,new Het(e,n,i,r,s);var e,n,i,r,s}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new Fnt(t,e,n,i,r,s);return o&&(a.wc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=W6(t);B6("RemoteStore","RemoteStore shutting down."),e.mu.add(5),await Vet(e),e.yu.shutdown(),e.pu.set("Unknown")}(this.remoteStore)}}class rit{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.vc(this.observer.next,t)}error(t){this.observer.error?this.vc(this.observer.error,t):z6("Uncaught Error in snapshot listener:",t.toString())}Pc(){this.muted=!0}vc(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class sit{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=F6.UNAUTHENTICATED,this.clientId=r8.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{B6("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(B6("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Y6(Z6.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new q6;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(uJ){const n=vnt(uJ,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function oit(t,e){t.asyncQueue.verifyOperationInProgress(),B6("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await vet(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t.offlineComponents=e}async function ait(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lit(t);B6("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener((t=>dnt(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>dnt(e.remoteStore,n))),t.onlineComponents=e}async function lit(t){return t.offlineComponents||(B6("FirestoreClient","Using default OfflineComponentProvider"),await oit(t,new nit)),t.offlineComponents}async function hit(t){return t.onlineComponents||(B6("FirestoreClient","Using default OnlineComponentProvider"),await ait(t,new iit)),t.onlineComponents}function cit(t){return hit(t).then((t=>t.syncEngine))}async function uit(t){const e=await hit(t),n=e.eventManager;return n.onListen=Lnt.bind(null,e.syncEngine),n.onUnlisten=Unt.bind(null,e.syncEngine),n}const pit=new Map;function dit(t,e,n){if(!n)throw new Y6(Z6.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function fit(t){if(!d8.isDocumentKey(t))throw new Y6(Z6.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function mit(t){if(d8.isDocumentKey(t))throw new Y6(Z6.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function git(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}}return"function"==typeof t?"a function":j6()}function yit(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y6(Z6.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=git(t);throw new Y6(Z6.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}}return t}class vit{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Y6(Z6.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Y6(Z6.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,e,n,i){if(!0===e&&!0===i)throw new Y6(Z6.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class _it{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vit({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Y6(Z6.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Y6(Z6.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vit(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new K6;switch(t.type){case"gapi":const e=t.client;return new t8(e,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Y6(Z6.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=pit.get(t);e&&(B6("ComponentProvider","Removing Datastore"),pit.delete(t),e.terminate())}(this),Promise.resolve()}}class Tit{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xit(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Tit(this.firestore,t,this._key)}}class Eit{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Eit(this.firestore,t,this._query)}}class xit extends Eit{constructor(t,e,n){super(t,e,H7(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Tit(this.firestore,null,new d8(t))}withConverter(t){return new xit(this.firestore,t,this._path)}}function bit(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=dr(t),dit("collection","path",e),t instanceof _it){const n=c8.fromString(e,...i);return mit(n),new xit(t,null,n)}{if(!(t instanceof Tit||t instanceof xit))throw new Y6(Z6.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(c8.fromString(e,...i));return mit(n),new xit(t.firestore,null,n)}}function Iit(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=dr(t),1===arguments.length&&(e=r8.R()),dit("doc","path",e),t instanceof _it){const n=c8.fromString(e,...i);return fit(n),new Tit(t,null,new d8(n))}{if(!(t instanceof Tit||t instanceof xit))throw new Y6(Z6.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(c8.fromString(e,...i));return fit(n),new Tit(t.firestore,t instanceof xit?t.converter:null,new d8(n))}}class wit{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new Let(this,"async_queue_retry"),this.Hc=()=>{const t=Pet();t&&B6("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const t=Pet();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Jc(),this.Yc(t)}enterRestrictedMode(t){if(!this.Kc){this.Kc=!0,this.zc=t||!1;const e=Pet();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Hc)}}enqueue(t){if(this.Jc(),this.Kc)return new Promise((()=>{}));const e=new q6;return this.Yc((()=>this.Kc&&this.zc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Uc.push(t),this.Zc())))}async Zc(){if(0!==this.Uc.length){try{await this.Uc[0](),this.Uc.shift(),this.ko.reset()}catch(pJ){if(!b8(pJ))throw pJ;B6("AsyncQueue","Operation failed with retryable error: "+pJ)}this.Uc.length>0&&this.ko.vo((()=>this.Zc()))}}Yc(t){const e=this.qc.then((()=>(this.jc=!0,t().catch((t=>{this.Qc=t,this.jc=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw z6("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.jc=!1,t))))));return this.qc=e,e}enqueueAfterDelay(t,e,n){this.Jc(),this.Wc.indexOf(t)>-1&&(e=0);const i=ynt.createAndSchedule(this,t,e,n,(t=>this.Xc(t)));return this.Gc.push(i),i}Jc(){this.Qc&&j6()}verifyOperationInProgress(){}async ta(){let t;do{t=this.qc,await t}while(t!==this.qc)}ea(t){for(const e of this.Gc)if(e.timerId===t)return!0;return!1}na(t){return this.ta().then((()=>{this.Gc.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.Gc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.ta()}))}sa(t){this.Wc.push(t)}Xc(t){const e=this.Gc.indexOf(t);this.Gc.splice(e,1)}}function Sit(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const i of["next","error","complete"])if(i in n&&"function"==typeof n[i])return!0;return!1}(t)}class Rit extends _it{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new wit,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Dit(this),this._firestoreClient.terminate()}}function Cit(t,e){const n="string"==typeof t?t:e||"(default)",i=Jr("object"==typeof t?t:is(),"firestore").getImmediate({identifier:n});if(!i._initialized){const t=Ki("firestore");t&&function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var r;const s=(t=yit(t,_it))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&G6("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:"".concat(e,":").concat(n),ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=F6.MOCK_USER;else{e=tr(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Y6(Z6.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new F6(s)}t._authCredentials=new Q6(new X6(e,n))}}(i,...t)}return i}function Ait(t){return t._firestoreClient||Dit(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Dit(t){var e;const n=t._freezeSettings(),i=function(t,e,n,i){return new w8(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new sit(t._authCredentials,t._appCheckCredentials,t._queue,i)}class Oit{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Oit(P8.fromBase64String(t))}catch(t){throw new Y6(Z6.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Oit(P8.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Nit{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let i=0;i<e.length;++i)if(0===e[i].length)throw new Y6(Z6.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new p8(e)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Mit{constructor(t){this._methodName=t}}class Pit{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Y6(Z6.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Y6(Z6.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return s8(this._lat,t._lat)||s8(this._long,t._long)}}const Fit=/^__.*__$/;class Lit{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new A9(t,this.data,this.fieldMask,e,this.fieldTransforms):new C9(t,this.data,e,this.fieldTransforms)}}class kit{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new A9(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Uit(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j6()}}class Bit{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.Tt=n,this.ignoreUndefinedProperties=i,void 0===r&&this.ia(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(t){return new Bit(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.oa({path:n,ca:!1});return i.aa(t),i}ha(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.oa({path:n,ca:!1});return i.ia(),i}la(t){return this.oa({path:void 0,ca:!0})}fa(t){return trt(t,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}ia(){if(this.path)for(let t=0;t<this.path.length;t++)this.aa(this.path.get(t))}aa(t){if(0===t.length)throw this.fa("Document fields must not be empty");if(Uit(this.ra)&&Fit.test(t))throw this.fa('Document fields cannot begin and end with "__"')}}class zit{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.Tt=n||Fet(t)}wa(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Bit({ra:t,methodName:e,_a:n,path:p8.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Git(t){const e=t._freezeSettings(),n=Fet(t._databaseId);return new zit(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Hit(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=t.wa(s.merge||s.mergeFields?2:0,e,n,r);Kit("Data must be an object, but it was:",o,i);const a=qit(i,o);let l,h;if(s.merge)l=new O7(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=Qit(e,i,n);if(!o.contains(r))throw new Y6(Z6.INVALID_ARGUMENT,"Field '".concat(r,"' is specified in your field mask but missing from your input data."));ert(t,r)||t.push(r)}l=new O7(t),h=o.fieldTransforms.filter((t=>l.covers(t.field)))}else l=null,h=o.fieldTransforms;return new Lit(new N7(a),l,h)}class jit extends Mit{_toFieldTransform(t){if(2!==t.ra)throw 1===t.ra?t.fa("".concat(this._methodName,"() can only appear at the top level of your update data")):t.fa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof jit}}function Vit(t,e,n,i){const r=t.wa(1,e,n);Kit("Data must be an object, but it was:",r,i);const s=[],o=N7.empty();C8(i,((t,i)=>{const a=$it(e,t,n);i=dr(i);const l=r.ha(a);if(i instanceof jit)s.push(a);else{const t=Yit(i,l);null!=t&&(s.push(a),o.set(a,t))}}));const a=new O7(s);return new kit(o,a,r.fieldTransforms)}function Wit(t,e,n,i,r,s){const o=t.wa(1,e,n),a=[Qit(e,i,n)],l=[r];if(s.length%2!=0)throw new Y6(Z6.INVALID_ARGUMENT,"Function ".concat(e,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let p=0;p<s.length;p+=2)a.push(Qit(e,s[p])),l.push(s[p+1]);const h=[],c=N7.empty();for(let p=a.length-1;p>=0;--p)if(!ert(h,a[p])){const t=a[p];let e=l[p];e=dr(e);const n=o.ha(t);if(e instanceof jit)h.push(t);else{const i=Yit(e,n);null!=i&&(h.push(t),c.set(t,i))}}const u=new O7(h);return new kit(c,u,o.fieldTransforms)}function Zit(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Yit(n,t.wa(i?4:3,e))}function Yit(t,e){if(Xit(t=dr(t)))return Kit("Unsupported field value:",e,t),qit(t,e);if(t instanceof Mit)return function(t,e){if(!Uit(e.ra))throw e.fa("".concat(t._methodName,"() can only be used with update() and set()"));if(!e.path)throw e.fa("".concat(t._methodName,"() is not currently supported inside arrays"));const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=Yit(r,e.la(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=dr(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return o9(e.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=a8.fromDate(t);return{timestampValue:dtt(e.Tt,n)}}if(t instanceof a8){const n=new a8(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:dtt(e.Tt,n)}}if(t instanceof Pit)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Oit)return{bytesValue:ftt(e.Tt,t._byteString)};if(t instanceof Tit){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.fa("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:ytt(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.fa("Unsupported field value: ".concat(git(t)))}(t,e)}function qit(t,e){const n={};return A8(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):C8(t,((t,i)=>{const r=Yit(i,e.ua(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function Xit(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof a8||t instanceof Pit||t instanceof Oit||t instanceof Tit||t instanceof Mit)}function Kit(t,e,n){if(!Xit(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=git(n);throw"an object"===i?e.fa(t+" a custom object"):e.fa(t+" "+i)}}function Qit(t,e,n){if((e=dr(e))instanceof Nit)return e._internalPath;if("string"==typeof e)return $it(t,e);throw trt("Field path arguments must be of type string or ",t,!1,void 0,n)}const Jit=new RegExp("[~\\*/\\[\\]]");function $it(t,e,n){if(e.search(Jit)>=0)throw trt("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return new Nit(...e.split("."))._internalPath}catch(mJ){throw trt("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function trt(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a="Function ".concat(e,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(i)),o&&(l+=" in document ".concat(r)),l+=")"),new Y6(Z6.INVALID_ARGUMENT,a+t+l)}function ert(t,e){return t.some((t=>t.isEqual(e)))}class nrt{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Tit(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new irt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(rrt("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class irt extends nrt{data(){return super.data()}}function rrt(t,e){return"string"==typeof e?$it(t,e):e instanceof Nit?e._internalPath:e._delegate._internalPath}function srt(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Y6(Z6.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ort{}class art extends ort{}class lrt extends art{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new lrt(t,e,n)}_apply(t){const e=this._parse(t);return prt(t._query,e),new Eit(t.firestore,t.converter,X7(t._query,e))}_parse(t){const e=Git(t.firestore),n=function(t,e,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Y6(Z6.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){urt(o,s);const e=[];for(const n of o)e.push(crt(i,t,n));a={arrayValue:{values:e}}}else a=crt(i,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||urt(o,s),a=Zit(n,"where",o,"in"===s||"not-in"===s);return l7.create(r,s,a)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value);return n}}class hrt extends ort{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new hrt(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:h7.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const i=e.getFlattenedFilters();for(const r of i)prt(n,r),n=X7(n,r)}(t._query,e),new Eit(t.firestore,t.converter,X7(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function crt(t,e,n){if("string"==typeof(n=dr(n))){if(""===n)throw new Y6(Z6.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z7(e)&&-1!==n.indexOf("/"))throw new Y6(Z6.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const i=e.path.child(c8.fromString(n));if(!d8.isDocumentKey(i))throw new Y6(Z6.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(i,"' is not because it has an odd number of segments (").concat(i.length,")."));return K8(t,new d8(i))}if(n instanceof Tit)return K8(t,n._key);throw new Y6(Z6.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(git(n),"."))}function urt(t,e){if(!Array.isArray(t)||0===t.length)throw new Y6(Z6.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(e.toString(),"' filters."))}function prt(t,e){if(e.isInequality()){const n=W7(t),i=e.field;if(null!==n&&!n.isEqual(i))throw new Y6(Z6.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(i.toString(),"'"));const r=V7(t);null!==r&&drt(t,i,r)}const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new Y6(Z6.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(e.op.toString(),"' filter.")):new Y6(Z6.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(e.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function drt(t,e,n){if(!n.isEqual(e))throw new Y6(Z6.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(e.toString(),"' and so you must also use '").concat(e.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class frt{convertValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(j8(t)){case 0:return null;case 1:return t.booleanValue;case 2:return k8(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(U8(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw j6()}}convertObject(t,e){const n={};return C8(t.fields,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertGeoPoint(t){return new Pit(k8(t.latitude),k8(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=z8(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(G8(t));default:return null}}convertTimestamp(t){const e=L8(t);return new a8(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=c8.fromString(t);V6(Utt(n));const i=new S8(n.get(1),n.get(3)),r=new d8(n.popFirst(5));return i.isEqual(e)||z6("Document ".concat(r," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(e.projectId,"/").concat(e.database,") instead.")),r}}function mrt(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class grt{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class yrt extends nrt{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const e=new vrt(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(rrt("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class vrt extends yrt{data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(t)}}class _rt{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new grt(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new vrt(this._firestore,this._userDataWriter,n.key,n,new grt(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const t=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Y6(Z6.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const i=new vrt(t._firestore,t._userDataWriter,n.doc.key,n.doc,new grt(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new vrt(t._firestore,t._userDataWriter,e.doc.key,e.doc,new grt(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:Trt(e.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Trt(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j6()}}class Ert extends frt{constructor(t){super(),this.firestore=t}convertBytes(t){return new Oit(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Tit(this.firestore,null,e)}}function xrt(t,e){return function(t,e){const n=new q6;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=eit(t);try{const t=await function(t,e){const n=W6(t),i=a8.now(),r=e.reduce(((t,e)=>t.add(e.key)),Q9());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=H9(),l=Q9();return n.ji.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(l=l.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=S9(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new A9(t.key,e,M7(e.value.mapValue),T9.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:W9(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.fc[t.currentUser.toKey()];i||(i=new S7(s8)),i=i.insert(e,n),t.fc[t.currentUser.toKey()]=i}(i,t.batchId,n),await Qnt(i,t.changes),await rnt(i.remoteStore)}catch(t){const e=vnt(t,"Failed to persist write");n.reject(e)}}(await cit(t),e,n))),n.promise}(Ait(t),e)}function brt(t,e,n){const i=n.docs.get(e._key),r=new Ert(t);return new yrt(t,r,e._key,i,new grt(n.hasPendingWrites,n.fromCache),e.converter)}!function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t){L6=t}(es),Qr(new fr("firestore",((t,n)=>{let{instanceIdentifier:i,options:r}=n;const s=t.getProvider("app").getImmediate(),o=new Rit(new J6(t.getProvider("auth-internal")),new n8(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Y6(Z6.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new S8(t.options.projectId,e)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o}),"PUBLIC").setMultipleInstances(!0)),rs(P6,"3.8.4",t),rs(P6,"3.8.4","esm2017")}();const Irt=t=>{!async function(t,e,n){const i=wo(t);Rs(t,e,Bo);const r=wa(i,n);new Na(i,"signInViaPopup",e,r).executeNotNull()}(El(),new Ho)},wrt=()=>{!function(t){dr(t).signOut()}(El())},Srt=async(t,e)=>{const n=Cit(is());await function(t){return xrt(yit(t.firestore,Rit),[new M9(t._key,T9.none())])}(Iit(n,"buildings",t.uid));const i=hJ(is()),r=[];for(const s of t.models){const t=lJ(i,s.id);await aJ(t),r.push(s.id)}await N2.deleteModels(r),e.trigger({type:"CLOSE_BUILDING"})},Rrt=async t=>{const e=Cit(is());await function(t,e,n){t=yit(t,Tit);const i=yit(t.firestore,Rit),r=Git(i);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(e=dr(e))||e instanceof Nit?Wit(r,"updateDoc",t._key,e,n,a):Vit(r,"updateDoc",t._key,e),xrt(i,[s.toMutation(t._key,T9.exists(!0))])}(Iit(e,"buildings",t.uid),{...t})},Crt=async(t,e,n,i)=>{const r=lJ(hJ(is()),t.id);await function(t,e,n){return KQ(t=dr(t),e,n)}(r,e),await N2.refreshModels(n,i),i.trigger({type:"UPDATE_BUILDING",payload:n})},Art=async(t,e,n)=>{const i=lJ(hJ(is()),t.id);await aJ(i),await N2.deleteModels([t.id]),await N2.refreshModels(e,n),n.trigger({type:"UPDATE_BUILDING",payload:e})};var Drt=n(5056);class Ort{constructor(){this.buildings="buildings"}async add(t){const e=Cit(is()),{lat:n,lng:i,userId:r,name:s,models:o}=t,a=await function(t,e){const n=yit(t.firestore,Rit),i=Iit(t),r=mrt(t.converter,e);return xrt(n,[Hit(Git(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,T9.exists(!1))]).then((()=>i))}(bit(e,this.buildings),{lat:n,lng:i,userId:r,name:s,models:o});return a.id}async getBuildings(t){const e=function(t,e){let n=[];for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];e instanceof ort&&n.push(e),n=n.concat(r),function(t){const e=t.filter((t=>t instanceof hrt)).length,n=t.filter((t=>t instanceof lrt)).length;if(e>1||e>0&&n>0)throw new Y6(Z6.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)t=o._apply(t);return t}(bit(Cit(is()),this.buildings),function(t,e,n){const i=e,r=rrt("where",t);return lrt._create(r,i,n)}("userId","==",t.uid));return new Promise((t=>{const n=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r,s,o;t=dr(t);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Sit(n[l])||(a=n[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(Sit(n[l])){const t=n[l];n[l]=null===(r=t.next)||void 0===r?void 0:r.bind(t),n[l+1]=null===(s=t.error)||void 0===s?void 0:s.bind(t),n[l+2]=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}let c,u,p;if(t instanceof Tit)u=yit(t.firestore,Rit),p=H7(t._key.path),c={next:e=>{n[l]&&n[l](brt(u,t,e))},error:n[l+1],complete:n[l+2]};else{const e=yit(t,Eit);u=yit(e.firestore,Rit),p=e._query;const i=new Ert(u);c={next:t=>{n[l]&&n[l](new _rt(u,i,e,t))},error:n[l+1],complete:n[l+2]},srt(t._query)}return function(t,e,n,i){const r=new rit(i),s=new Ant(e,r,n);return t.asyncQueue.enqueueAndForget((async()=>Int(await uit(t),s))),()=>{r.Pc(),t.asyncQueue.enqueueAndForget((async()=>wnt(await uit(t),s)))}}(Ait(u),p,h,c)}(e,(e=>{const i=[];e.docs.forEach((t=>{i.push({...t.data(),uid:t.id})})),n(),t(i)}))}))}}var Nrt=n(3457),Mrt=n.n(Nrt);class Prt{constructor(t,e){this.components=new II,this.style="mapbox://styles/mapbox/dark-v10",this.clickedCoordinates={lat:0,lng:0},this.map=void 0,this.center={lat:0,lng:0},this.labels={},this.database=new Ort,this.events=void 0,this.storeMousePosition=t=>{this.clickedCoordinates={...t.lngLat}},this.events=e;const n=this.getConfig(t);this.map=this.createMap(n),this.initializeComponents(n),this.setupScene()}dispose(){this.components.dispose(),this.map=null,this.components=null;for(const t in this.labels){const e=this.labels[t];e.removeFromParent(),e.element.remove()}this.labels={}}async getAllBuildings(t){const e=await this.database.getBuildings(t);this.components&&this.addToScene(e)}async addBuilding(t){const{lat:e,lng:n}=this.clickedCoordinates,i={userId:t.uid,lat:e,lng:n,uid:"",name:"",models:[]};i.uid=await this.database.add(i),this.addToScene([i])}addToScene(t){for(const e of t){const{uid:t,lng:n,lat:i}=e,r=this.createHtmlElement(e),s=new Rb(r),o=Drt.MercatorCoordinate.fromLngLat({...this.center},0),a=o.meterInMercatorCoordinateUnits(),l=Drt.MercatorCoordinate.fromLngLat({lng:n,lat:i},0);l.x/=a,l.y/=a,o.x/=a,o.y/=a,s.position.set(l.x-o.x,0,l.y-o.y),this.components.scene.get().add(s),this.labels[t]=s}}createHtmlElement(t){const e=document.createElement("div");return e.textContent="\ud83c\udfe2",e.onclick=()=>{this.events.trigger({type:"OPEN_BUILDING",payload:t})},e.classList.add("thumbnail"),e}setupScene(){const t=this.components.scene.get();t.background=null;const e=new fT(16777215);e.position.set(0,-70,100).normalize(),t.add(e);const n=new fT(16777215);n.position.set(0,70,100).normalize(),t.add(n)}initializeComponents(t){this.components.scene=new Hb(this.components),this.components.camera=new ZK,this.components.renderer=this.createRenderer(t),this.components.init()}createRenderer(t){const e=this.getCoordinates(t);return new WK(this.components,this.map,e)}getCoordinates(t){return Drt.MercatorCoordinate.fromLngLat(t.center,0)}createMap(t){var e;const n=new Drt.Map({...t,style:this.style,antialias:!0});n.on("contextmenu",this.storeMousePosition);const i=new(Mrt())({accessToken:null!==(e="pk.eyJ1IjoiYmltY2EiLCJhIjoiY2xmMXJ4ZGhrMGJhazN4bGg2YTAwZG5heSJ9.OQdD57WTOQigRXhxpjfaqA")?e:"",mapboxgl:Drt,placeholder:"Busca tus coordenadas",bbox:[-180,-90,180,90],reverseGeocode:!0});return n.addControl(i),n}getConfig(t){const e=[-90.46915555170892,14.653434059802578];return this.center={lng:e[0],lat:e[1]},{container:t,accessToken:"pk.eyJ1IjoiYmltY2EiLCJhIjoiY2xmMXJ4ZGhrMGJhazN4bGg2YTAwZG5heSJ9.OQdD57WTOQigRXhxpjfaqA",zoom:15,pitch:60,bearing:-40,center:e,logoEnabled:!1,buildings:[]}}}const Frt={map:null,async start(t,e,n){this.map||(this.map=new Prt(t,n),await this.map.getAllBuildings(e))},remove(){this.map&&(this.map.dispose(),this.map=null)},addBuilding(t){this.map&&this.map.addBuilding(t)}};class Lrt{constructor(){this.list={}}on(t,e){this.list[t]||(this.list[t]=[]),this.list[t].push(e)}trigger(t){if(this.list[t.type])for(const e of this.list[t.type])e(t.payload)}}const krt={user:null,building:null,floorplans:[],properties:[]},Urt=(t,e)=>"UPDATE_USER"===e.type?{...t,user:e.payload}:"OPEN_BUILDING"===e.type||"UPDATE_BUILDING"===e.type?{...t,building:e.payload}:"CLOSE_BUILDING"===e.type?{...t,building:null}:"UPDATE_FLOORPLANS"===e.type?{...t,floorplans:e.payload}:"UPDATE_PROPERTIES"===e.type?{...t,properties:e.payload}:{...t},Brt=(0,e.createContext)([krt,()=>{}]),zrt=t=>{let{children:n}=t;const[i,r]=(0,e.useReducer)(Urt,krt),s=new Lrt,o=t=>{r(t),(async(t,e)=>{if("LOGIN"===t.type)return Irt(t);if("LOGOUT"===t.type)return wrt();if("START_MAP"===t.type){const{container:n,user:i}=t.payload;return Frt.start(n,i,e)}if("REMOVE_MAP"===t.type||"OPEN_BUILDING"===t.type)return Frt.remove();if("ADD_BUILDING"===t.type)return Frt.addBuilding(t.payload);if("DELETE_BUILDING"===t.type)return Srt(t.payload,e);if("UPDATE_BUILDING"===t.type)return Rrt(t.payload);if("UPLOAD_MODEL"===t.type){const{model:n,file:i,building:r}=t.payload,s=await N2.convertIfcToFragments(i);return Crt(n,s,r,e)}if("DELETE_MODEL"===t.type){const{model:n,building:i}=t.payload;return Art(n,i,e)}if("START_BUILDING"===t.type){const{container:n,building:i}=t.payload;return N2.start(n,i,e)}if("CLOSE_BUILDING"===t.type)return N2.remove();if("EXPLODE_MODEL"===t.type)return N2.explode(t.payload);if("TOGGLE_CLIPPER"===t.type)return N2.toggleClippingPlanes(t.payload);if("TOGGLE_DIMENSIONS"===t.type)return N2.toggleDimensions(t.payload);if("TOGGLE_FLOORPLAN"===t.type){const{active:e,floorplan:n}=t.payload;N2.toggleFloorplan(e,n)}})(t,s)};for(const e of Gi)s.on(e,(t=>{o({type:e,payload:t})}));return(0,Nt.jsxs)(Brt.Provider,{value:[i,o],children:[(0,Nt.jsx)(Il,{}),n]})},Grt=()=>(0,e.useContext)(Brt);function Hrt(t){return(0,Ae.Z)("MuiDivider",t)}(0,ce.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const jrt=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],Vrt=(0,Gt.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,"vertical"===n.orientation&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&"vertical"===n.orientation&&e.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&e.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&e.textAlignLeft]}})((t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:e.vars?"rgba(".concat(e.vars.palette.dividerChannel," / 0.08)"):(0,zt.Fq)(e.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})}),(t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({},n.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:"thin solid ".concat((e.vars||e).palette.divider),top:"50%",content:'""',transform:"translateY(50%)"}})}),(t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:"thin solid ".concat((e.vars||e).palette.divider),transform:"translateX(0%)"}})}),(t=>{let{ownerState:e}=t;return(0,Et.Z)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),Wrt=(0,Gt.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,"vertical"===n.orientation&&e.wrapperVertical]}})((t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({display:"inline-block",paddingLeft:"calc(".concat(e.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(e.spacing(1)," * 1.2)")},"vertical"===n.orientation&&{paddingTop:"calc(".concat(e.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(e.spacing(1)," * 1.2)")})})),Zrt=e.forwardRef((function(t,e){const n=(0,Ht.Z)({props:t,name:"MuiDivider"}),{absolute:i=!1,children:r,className:s,component:o=(r?"div":"hr"),flexItem:a=!1,light:l=!1,orientation:h="horizontal",role:c=("hr"!==o?"separator":void 0),textAlign:u="center",variant:p="fullWidth"}=n,d=(0,xt.Z)(n,jrt),f=(0,Et.Z)({},n,{absolute:i,component:o,flexItem:a,light:l,orientation:h,role:c,textAlign:u,variant:p}),m=(t=>{const{absolute:e,children:n,classes:i,flexItem:r,light:s,orientation:o,textAlign:a,variant:l}=t,h={root:["root",e&&"absolute",l,s&&"light","vertical"===o&&"vertical",r&&"flexItem",n&&"withChildren",n&&"vertical"===o&&"withChildrenVertical","right"===a&&"vertical"!==o&&"textAlignRight","left"===a&&"vertical"!==o&&"textAlignLeft"],wrapper:["wrapper","vertical"===o&&"wrapperVertical"]};return(0,Bt.Z)(h,Hrt,i)})(f);return(0,Nt.jsx)(Vrt,(0,Et.Z)({as:o,className:(0,bt.Z)(m.root,s),role:c,ref:e,ownerState:f},d,{children:r?(0,Nt.jsx)(Wrt,{className:m.wrapper,ownerState:f,children:r}):null}))})),Yrt=Zrt;function qrt(t){return(0,Ae.Z)("MuiIconButton",t)}const Xrt=(0,ce.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Krt=["edge","children","className","color","disabled","disableFocusRipple","size"],Qrt=(0,Gt.ZP)(Fe,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"default"!==n.color&&e["color".concat((0,Le.Z)(n.color))],n.edge&&e["edge".concat((0,Le.Z)(n.edge))],e["size".concat((0,Le.Z)(n.size))]]}})((t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.action.activeChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,zt.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(t=>{let{theme:e,ownerState:n}=t;var i;const r=null==(i=(e.vars||e).palette)?void 0:i[n.color];return(0,Et.Z)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,Et.Z)({color:null==r?void 0:r.main},!n.disableRipple&&{"&:hover":(0,Et.Z)({},r&&{backgroundColor:e.vars?"rgba(".concat(r.mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,zt.Fq)(r.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:e.typography.pxToRem(28)},{["&.".concat(Xrt.disabled)]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})})),Jrt=e.forwardRef((function(t,e){const n=(0,Ht.Z)({props:t,name:"MuiIconButton"}),{edge:i=!1,children:r,className:s,color:o="default",disabled:a=!1,disableFocusRipple:l=!1,size:h="medium"}=n,c=(0,xt.Z)(n,Krt),u=(0,Et.Z)({},n,{edge:i,color:o,disabled:a,disableFocusRipple:l,size:h}),p=(t=>{const{classes:e,disabled:n,color:i,edge:r,size:s}=t,o={root:["root",n&&"disabled","default"!==i&&"color".concat((0,Le.Z)(i)),r&&"edge".concat((0,Le.Z)(r)),"size".concat((0,Le.Z)(s))]};return(0,Bt.Z)(o,qrt,e)})(u);return(0,Nt.jsx)(Qrt,(0,Et.Z)({className:(0,bt.Z)(p.root,s),centerRipple:!0,focusRipple:!l,disabled:a,ref:e,ownerState:u},c,{children:r}))})),$rt=Jrt;var tst=n(9790),est=n(4045);const nst=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],ist=(0,Gt.ZP)(Fe,{shouldForwardProp:t=>(0,Gt.FO)(t)||"classes"===t,name:"MuiListItemButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,"flex-start"===n.alignItems&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]}})((t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(vi.selected)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):(0,zt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),["&.".concat(vi.focusVisible)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.focusOpacity,"))"):(0,zt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},["&.".concat(vi.selected,":hover")]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.hoverOpacity,"))"):(0,zt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):(0,zt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},["&.".concat(vi.focusVisible)]:{backgroundColor:(e.vars||e).palette.action.focus},["&.".concat(vi.disabled)]:{opacity:(e.vars||e).palette.action.disabledOpacity}},n.divider&&{borderBottom:"1px solid ".concat((e.vars||e).palette.divider),backgroundClip:"padding-box"},"flex-start"===n.alignItems&&{alignItems:"flex-start"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.dense&&{paddingTop:4,paddingBottom:4})})),rst=e.forwardRef((function(t,n){const i=(0,Ht.Z)({props:t,name:"MuiListItemButton"}),{alignItems:r="center",autoFocus:s=!1,component:o="div",children:a,dense:l=!1,disableGutters:h=!1,divider:c=!1,focusVisibleClassName:u,selected:p=!1,className:d}=i,f=(0,xt.Z)(i,nst),m=e.useContext(ai),g=e.useMemo((()=>({dense:l||m.dense||!1,alignItems:r,disableGutters:h})),[r,m.dense,l,h]),y=e.useRef(null);(0,fi.Z)((()=>{s&&y.current&&y.current.focus()}),[s]);const v=(0,Et.Z)({},i,{alignItems:r,dense:g.dense,disableGutters:h,divider:c,selected:p}),_=(t=>{const{alignItems:e,classes:n,dense:i,disabled:r,disableGutters:s,divider:o,selected:a}=t,l={root:["root",i&&"dense",!s&&"gutters",o&&"divider",r&&"disabled","flex-start"===e&&"alignItemsFlexStart",a&&"selected"]},h=(0,Bt.Z)(l,yi,n);return(0,Et.Z)({},n,h)})(v),T=(0,jt.Z)(y,n);return(0,Nt.jsx)(ai.Provider,{value:g,children:(0,Nt.jsx)(ist,(0,Et.Z)({ref:T,href:f.href||f.to,component:(f.href||f.to)&&"div"===o?"button":o,focusVisibleClassName:(0,bt.Z)(_.focusVisible,u),ownerState:v,className:(0,bt.Z)(_.root,d)},f,{classes:_,children:a}))})})),sst=rst;var ost=n(7748),ast=n(2854),lst=n(1945),hst=n(4588),cst=n(961),ust=n(1997),pst=n(3973),dst=n(1370);const fst=t=>{const{open:e,onToggleMenu:n}=t,[i,r]=Grt(),s=function(t,e,n){return[{name:"Informaci\xf3n",icon:(0,Nt.jsx)(cst.Z,{}),action:()=>{n(!0,"BuildingInfo")}},{name:"Mapa",icon:(0,Nt.jsx)(ost.Z,{}),action:()=>{e({type:"CLOSE_BUILDING"})}},{name:"Modelos",icon:(0,Nt.jsx)(hst.Z,{}),action:()=>{n(!0,"ModelList")}},{name:"Planos de planta",icon:(0,Nt.jsx)(lst.Z,{}),action:()=>{n(!0,"Floorplans")}},{name:"Propiedades",icon:(0,Nt.jsx)(pst.Z,{}),action:()=>{n(!0,"Properties")}},{name:"Eliminar edificio",icon:(0,Nt.jsx)(ust.Z,{}),action:()=>{window.confirm("\xbfDe verdad quieres eliminar este edificio?")&&e({type:"DELETE_BUILDING",payload:t.building})}},{name:"Cr\xe9ditos",icon:(0,Nt.jsx)(dst.Z,{}),action:()=>{n(!0,"Credits")}},{name:"Cerrar sesi\xf3n",icon:(0,Nt.jsx)(ast.Z,{}),action:()=>{e({type:"LOGOUT"})}}]}(i,r,n);return(0,Nt.jsx)(Nt.Fragment,{children:(0,Nt.jsx)(pi,{children:s.map((t=>(0,Nt.jsx)(Ai,{onClick:t.action,disablePadding:!0,sx:{display:"block"},children:(0,Nt.jsxs)(sst,{sx:{minHeight:48,justifyContent:e?"initial":"center",px:2.5},children:[(0,Nt.jsx)(Pi,{sx:{minWidth:0,mr:e?3:"auto",justifyContent:"center"},children:t.icon}),(0,Nt.jsx)(zi,{primary:t.name,sx:{opacity:e?1:0}})]})},t.name)))})})},mst=t=>{let e;return e=t<1?5.11916*t**2:4.5*Math.log(t+1)+2,(e/100).toFixed(2)};function gst(t){return(0,Ae.Z)("MuiPaper",t)}(0,ce.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const yst=["className","component","elevation","square","variant"],vst=(0,Gt.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,"elevation"===n.variant&&e["elevation".concat(n.elevation)]]}})((t=>{let{theme:e,ownerState:n}=t;var i;return(0,Et.Z)({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!n.square&&{borderRadius:e.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((e.vars||e).palette.divider)},"elevation"===n.variant&&(0,Et.Z)({boxShadow:(e.vars||e).shadows[n.elevation]},!e.vars&&"dark"===e.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,zt.Fq)("#fff",mst(n.elevation)),", ").concat((0,zt.Fq)("#fff",mst(n.elevation)),")")},e.vars&&{backgroundImage:null==(i=e.vars.overlays)?void 0:i[n.elevation]}))})),_st=e.forwardRef((function(t,e){const n=(0,Ht.Z)({props:t,name:"MuiPaper"}),{className:i,component:r="div",elevation:s=1,square:o=!1,variant:a="elevation"}=n,l=(0,xt.Z)(n,yst),h=(0,Et.Z)({},n,{component:r,elevation:s,square:o,variant:a}),c=(t=>{const{square:e,elevation:n,variant:i,classes:r}=t,s={root:["root",i,!e&&"rounded","elevation"===i&&"elevation".concat(n)]};return(0,Bt.Z)(s,gst,r)})(h);return(0,Nt.jsx)(vst,(0,Et.Z)({as:r,ownerState:h,className:(0,bt.Z)(c.root,i),ref:e},l))})),Tst=_st;function Est(t){return(0,Ae.Z)("MuiAppBar",t)}(0,ce.Z)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);const xst=["className","color","enableColorOnDark","position"],bst=(t,e)=>t?"".concat(null==t?void 0:t.replace(")",""),", ").concat(e,")"):e,Ist=(0,Gt.ZP)(Tst,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e["position".concat((0,Le.Z)(n.position))],e["color".concat((0,Le.Z)(n.color))]]}})((t=>{let{theme:e,ownerState:n}=t;const i="light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900];return(0,Et.Z)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},!e.vars&&(0,Et.Z)({},"default"===n.color&&{backgroundColor:i,color:e.palette.getContrastText(i)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:e.palette[n.color].main,color:e.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===e.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&(0,Et.Z)({backgroundColor:"transparent",color:"inherit"},"dark"===e.palette.mode&&{backgroundImage:"none"})),e.vars&&(0,Et.Z)({},"default"===n.color&&{"--AppBar-background":n.enableColorOnDark?e.vars.palette.AppBar.defaultBg:bst(e.vars.palette.AppBar.darkBg,e.vars.palette.AppBar.defaultBg),"--AppBar-color":n.enableColorOnDark?e.vars.palette.text.primary:bst(e.vars.palette.AppBar.darkColor,e.vars.palette.text.primary)},n.color&&!n.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":n.enableColorOnDark?e.vars.palette[n.color].main:bst(e.vars.palette.AppBar.darkBg,e.vars.palette[n.color].main),"--AppBar-color":n.enableColorOnDark?e.vars.palette[n.color].contrastText:bst(e.vars.palette.AppBar.darkColor,e.vars.palette[n.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:"inherit"===n.color?"inherit":"var(--AppBar-color)"},"transparent"===n.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),wst=e.forwardRef((function(t,e){const n=(0,Ht.Z)({props:t,name:"MuiAppBar"}),{className:i,color:r="primary",enableColorOnDark:s=!1,position:o="fixed"}=n,a=(0,xt.Z)(n,xst),l=(0,Et.Z)({},n,{color:r,position:o,enableColorOnDark:s}),h=(t=>{const{color:e,position:n,classes:i}=t,r={root:["root","color".concat((0,Le.Z)(e)),"position".concat((0,Le.Z)(n))]};return(0,Bt.Z)(r,Est,i)})(l);return(0,Nt.jsx)(Ist,(0,Et.Z)({square:!0,component:"header",ownerState:l,elevation:4,className:(0,bt.Z)(h.root,i,"fixed"===o&&"mui-fixed"),ref:e},a))})),Sst=wst;var Rst=n(8706),Cst=n(3533);const Ast=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Dst(t,e,n){var i;const r=function(t,e,n){const i=e.getBoundingClientRect(),r=n&&n.getBoundingClientRect(),s=(0,Cst.Z)(e);let o;if(e.fakeTransform)o=e.fakeTransform;else{const t=s.getComputedStyle(e);o=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("transform")}let a=0,l=0;if(o&&"none"!==o&&"string"===typeof o){const t=o.split("(")[1].split(")")[0].split(",");a=parseInt(t[4],10),l=parseInt(t[5],10)}return"left"===t?"translateX(".concat(r?r.right+a-i.left:s.innerWidth+a-i.left,"px)"):"right"===t?"translateX(-".concat(r?i.right-r.left-a:i.left+i.width-a,"px)"):"up"===t?"translateY(".concat(r?r.bottom+l-i.top:s.innerHeight+l-i.top,"px)"):"translateY(-".concat(r?i.top-r.top+i.height-l:i.top+i.height-l,"px)")}(t,e,"function"===typeof(i=n)?i():i);r&&(e.style.webkitTransform=r,e.style.transform=r)}const Ost=e.forwardRef((function(t,n){const i=kn(),r={enter:i.transitions.easing.easeOut,exit:i.transitions.easing.sharp},s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:l,container:h,direction:c="down",easing:u=r,in:p,onEnter:d,onEntered:f,onEntering:m,onExit:g,onExited:y,onExiting:v,style:_,timeout:T=s,TransitionComponent:E=Fn}=t,x=(0,xt.Z)(t,Ast),b=e.useRef(null),I=(0,jt.Z)(l.ref,b,n),w=t=>e=>{t&&(void 0===e?t(b.current):t(b.current,e))},S=w(((t,e)=>{Dst(c,t,h),Un(t),d&&d(t,e)})),R=w(((t,e)=>{const n=Bn({timeout:T,style:_,easing:u},{mode:"enter"});t.style.webkitTransition=i.transitions.create("-webkit-transform",(0,Et.Z)({},n)),t.style.transition=i.transitions.create("transform",(0,Et.Z)({},n)),t.style.webkitTransform="none",t.style.transform="none",m&&m(t,e)})),C=w(f),A=w(v),D=w((t=>{const e=Bn({timeout:T,style:_,easing:u},{mode:"exit"});t.style.webkitTransition=i.transitions.create("-webkit-transform",e),t.style.transition=i.transitions.create("transform",e),Dst(c,t,h),g&&g(t)})),O=w((t=>{t.style.webkitTransition="",t.style.transition="",y&&y(t)})),N=e.useCallback((()=>{b.current&&Dst(c,b.current,h)}),[c,h]);return e.useEffect((()=>{if(p||"down"===c||"right"===c)return;const t=(0,Rst.Z)((()=>{b.current&&Dst(c,b.current,h)})),e=(0,Cst.Z)(b.current);return e.addEventListener("resize",t),()=>{t.clear(),e.removeEventListener("resize",t)}}),[c,p,h]),e.useEffect((()=>{p||N()}),[p,N]),(0,Nt.jsx)(E,(0,Et.Z)({nodeRef:b,onEnter:S,onEntered:C,onEntering:R,onExit:D,onExited:O,onExiting:A,addEndListener:t=>{o&&o(b.current,t)},appear:a,in:p,timeout:T},x,{children:(t,n)=>e.cloneElement(l,(0,Et.Z)({ref:I,style:(0,Et.Z)({visibility:"exited"!==t||p?void 0:"hidden"},_,l.props.style)},n))}))})),Nst=Ost;function Mst(t){return(0,Ae.Z)("MuiDrawer",t)}(0,ce.Z)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Pst=["BackdropProps"],Fst=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],Lst=(t,e)=>{const{ownerState:n}=t;return[e.root,("permanent"===n.variant||"persistent"===n.variant)&&e.docked,e.modal]},kst=(0,Gt.ZP)($n,{name:"MuiDrawer",slot:"Root",overridesResolver:Lst})((t=>{let{theme:e}=t;return{zIndex:(e.vars||e).zIndex.drawer}})),Ust=(0,Gt.ZP)("div",{shouldForwardProp:Gt.FO,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:Lst})({flex:"0 0 auto"}),Bst=(0,Gt.ZP)(Tst,{name:"MuiDrawer",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e["paperAnchor".concat((0,Le.Z)(n.anchor))],"temporary"!==n.variant&&e["paperAnchorDocked".concat((0,Le.Z)(n.anchor))]]}})((t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===n.anchor&&{left:0},"top"===n.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===n.anchor&&{right:0},"bottom"===n.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===n.anchor&&"temporary"!==n.variant&&{borderRight:"1px solid ".concat((e.vars||e).palette.divider)},"top"===n.anchor&&"temporary"!==n.variant&&{borderBottom:"1px solid ".concat((e.vars||e).palette.divider)},"right"===n.anchor&&"temporary"!==n.variant&&{borderLeft:"1px solid ".concat((e.vars||e).palette.divider)},"bottom"===n.anchor&&"temporary"!==n.variant&&{borderTop:"1px solid ".concat((e.vars||e).palette.divider)})})),zst={left:"right",right:"left",top:"down",bottom:"up"};const Gst=e.forwardRef((function(t,n){const i=(0,Ht.Z)({props:t,name:"MuiDrawer"}),r=kn(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{anchor:o="left",BackdropProps:a,children:l,className:h,elevation:c=16,hideBackdrop:u=!1,ModalProps:{BackdropProps:p}={},onClose:d,open:f=!1,PaperProps:m={},SlideProps:g,TransitionComponent:y=Nst,transitionDuration:v=s,variant:_="temporary"}=i,T=(0,xt.Z)(i.ModalProps,Pst),E=(0,xt.Z)(i,Fst),x=e.useRef(!1);e.useEffect((()=>{x.current=!0}),[]);const b=function(t,e){return"rtl"===t.direction&&function(t){return-1!==["left","right"].indexOf(t)}(e)?zst[e]:e}(r,o),I=o,w=(0,Et.Z)({},i,{anchor:I,elevation:c,open:f,variant:_},E),S=(t=>{const{classes:e,anchor:n,variant:i}=t,r={root:["root"],docked:[("permanent"===i||"persistent"===i)&&"docked"],modal:["modal"],paper:["paper","paperAnchor".concat((0,Le.Z)(n)),"temporary"!==i&&"paperAnchorDocked".concat((0,Le.Z)(n))]};return(0,Bt.Z)(r,Mst,e)})(w),R=(0,Nt.jsx)(Bst,(0,Et.Z)({elevation:"temporary"===_?c:0,square:!0},m,{className:(0,bt.Z)(S.paper,m.className),ownerState:w,children:l}));if("permanent"===_)return(0,Nt.jsx)(Ust,(0,Et.Z)({className:(0,bt.Z)(S.root,S.docked,h),ownerState:w,ref:n},E,{children:R}));const C=(0,Nt.jsx)(y,(0,Et.Z)({in:f,direction:zst[b],timeout:v,appear:x.current},g,{children:R}));return"persistent"===_?(0,Nt.jsx)(Ust,(0,Et.Z)({className:(0,bt.Z)(S.root,S.docked,h),ownerState:w,ref:n},E,{children:C})):(0,Nt.jsx)(kst,(0,Et.Z)({BackdropProps:(0,Et.Z)({},a,p,{transitionDuration:v}),className:(0,bt.Z)(S.root,S.modal,h),open:f,ownerState:w,onClose:d,hideBackdrop:u,ref:n},E,T,{children:C}))})),Hst=Gst;const jst=(t,e)=>({width:e,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen}),overflowX:"hidden"}),Vst=t=>({transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc(".concat(t.spacing(7)," + 1px)"),[t.breakpoints.up("sm")]:{width:"calc(".concat(t.spacing(8)," + 1px)")}});function Wst(){return(0,Gt.ZP)("div")((t=>{let{theme:e}=t;return{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1),...e.mixins.toolbar}}))}const Zst=t=>{const n=kn(),{open:i,width:r,onClose:s,onToggleMenu:o}=t,[a,l]=(0,e.useState)(i);(0,e.useEffect)((()=>{l(i)}),[i]);const h=(c=r,(0,Gt.ZP)(Hst,{shouldForwardProp:t=>"open"!==t})((t=>{let{theme:e,open:n}=t;return{width:c,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...n&&{...jst(e,c),"& .MuiDrawer-paper":jst(e,c)},...!n&&{...Vst(e),"& .MuiDrawer-paper":Vst(e)}}})));var c;const u=Wst(),p={display:a?"block":"none",width:"60%",marginLeft:"35px",marginRight:"auto",marginTop:"15px",marginBottom:"10px"};return(0,Nt.jsxs)(h,{variant:"permanent",open:i,children:[(0,Nt.jsxs)(u,{children:[(0,Nt.jsx)("img",{style:p,src:"/IFCReactApp/BIMCA-Negro-01.png"}),(0,Nt.jsx)($rt,{onClick:()=>{s(),l(!1)},children:"rtl"===n.direction?(0,Nt.jsx)(est.Z,{}):(0,Nt.jsx)(tst.Z,{})})]}),(0,Nt.jsx)(fst,{onToggleMenu:o,open:i}),a&&(0,Nt.jsx)(Nt.Fragment,{children:(0,Nt.jsx)(Yrt,{})})]})};function Yst(t){return(0,Ae.Z)("MuiToolbar",t)}(0,ce.Z)("MuiToolbar",["root","gutters","regular","dense"]);const qst=["className","component","disableGutters","variant"],Xst=(0,Gt.ZP)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})((t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},"dense"===n.variant&&{minHeight:48})}),(t=>{let{theme:e,ownerState:n}=t;return"regular"===n.variant&&e.mixins.toolbar})),Kst=e.forwardRef((function(t,e){const n=(0,Ht.Z)({props:t,name:"MuiToolbar"}),{className:i,component:r="div",disableGutters:s=!1,variant:o="regular"}=n,a=(0,xt.Z)(n,qst),l=(0,Et.Z)({},n,{component:r,disableGutters:s,variant:o}),h=(t=>{const{classes:e,disableGutters:n,variant:i}=t,r={root:["root",!n&&"gutters",i]};return(0,Bt.Z)(r,Yst,e)})(l);return(0,Nt.jsx)(Xst,(0,Et.Z)({as:r,className:(0,bt.Z)(h.root,i),ref:e,ownerState:l},a))})),Qst=Kst;var Jst=n(1317);const $st=t=>{const{open:e,onOpen:n,width:i}=t,r=(s=i,(0,Gt.ZP)(Sst,{shouldForwardProp:t=>"open"!==t})((t=>{let{theme:e,open:n}=t;return{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),...n&&{width:"calc(100% - ".concat(s,"px)"),marginLeft:"".concat(s,"px"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}}})));var s;const o={width:"20%",marginLeft:"25px",marginRight:"auto",marginTop:"15px",marginBottom:"10px",transform:e?"scale(0.7)":"scale(2.5)"};return(0,Nt.jsx)(r,{position:"fixed",open:e,children:(0,Nt.jsxs)(Qst,{children:[(0,Nt.jsx)($rt,{color:"inherit","aria-label":"open drawer",onClick:n,edge:"start",sx:{marginRight:5,...e&&{display:"none"}},children:(0,Nt.jsx)(Jst.Z,{})}),!e&&(0,Nt.jsx)(kt,{sx:{visibility:e?"hidden":"visible"},children:(0,Nt.jsx)(kt,{style:{display:"flex",alignItems:"center"},children:(0,Nt.jsx)("img",{style:o,src:"/IFCReactApp/BIMCA-Crema-01.png",alt:"Logo"})})}),(0,Nt.jsx)(oi,{variant:"h6",noWrap:!0,component:"div",sx:{marginLeft:"auto"},children:"Visor IFC"})]})})};function tot(t){const{styles:e,defaultTheme:n={}}=t,i="function"===typeof e?t=>{return e(void 0===(i=t)||null===i||0===Object.keys(i).length?n:t);var i}:e;return(0,Nt.jsx)(oe,{styles:i})}const eot=function(t){return(0,Nt.jsx)(tot,(0,Et.Z)({},t,{defaultTheme:Ln.Z}))},not=(t,e)=>(0,Et.Z)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},e&&!t.vars&&{colorScheme:t.palette.mode}),iot=t=>(0,Et.Z)({color:(t.vars||t).palette.text.primary},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),rot=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,i;const r={};e&&t.colorSchemes&&Object.entries(t.colorSchemes).forEach((e=>{let[n,i]=e;var s;r[t.getColorSchemeSelector(n).replace(/\s*&/,"")]={colorScheme:null==(s=i.palette)?void 0:s.mode}}));let s=(0,Et.Z)({html:not(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:(0,Et.Z)({margin:0},iot(t),{"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}})},r);const o=null==(n=t.components)||null==(i=n.MuiCssBaseline)?void 0:i.styleOverrides;return o&&(s=[s,o]),s};const sot=function(t){const n=(0,Ht.Z)({props:t,name:"MuiCssBaseline"}),{children:i,enableColorScheme:r=!1}=n;return(0,Nt.jsxs)(e.Fragment,{children:[(0,Nt.jsx)(eot,{styles:t=>rot(t,r)}),i]})};function oot(t){return(0,Ae.Z)("MuiCard",t)}(0,ce.Z)("MuiCard",["root"]);const aot=["className","raised"],lot=(0,Gt.ZP)(Tst,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})((()=>({overflow:"hidden"}))),hot=e.forwardRef((function(t,e){const n=(0,Ht.Z)({props:t,name:"MuiCard"}),{className:i,raised:r=!1}=n,s=(0,xt.Z)(n,aot),o=(0,Et.Z)({},n,{raised:r}),a=(t=>{const{classes:e}=t;return(0,Bt.Z)({root:["root"]},oot,e)})(o);return(0,Nt.jsx)(lot,(0,Et.Z)({className:(0,bt.Z)(a.root,i),elevation:r?8:void 0,ref:e,ownerState:o},s))})),cot=hot;function uot(t){return(0,Ae.Z)("MuiCardContent",t)}(0,ce.Z)("MuiCardContent",["root"]);const pot=["className","component"],dot=(0,Gt.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),fot=e.forwardRef((function(t,e){const n=(0,Ht.Z)({props:t,name:"MuiCardContent"}),{className:i,component:r="div"}=n,s=(0,xt.Z)(n,pot),o=(0,Et.Z)({},n,{component:r}),a=(t=>{const{classes:e}=t;return(0,Bt.Z)({root:["root"]},uot,e)})(o);return(0,Nt.jsx)(dot,(0,Et.Z)({as:r,className:(0,bt.Z)(a.root,i),ownerState:o,ref:e},s))})),mot=fot;var got=n(1198),yot=n(3362),vot=n(7219),_ot=n(4312);const Tot=["onChange","maxRows","minRows","style","value"];function Eot(t){return parseInt(t,10)||0}const xot={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function bot(t){return void 0===t||null===t||0===Object.keys(t).length||0===t.outerHeightStyle&&!t.overflow}const Iot=e.forwardRef((function(t,n){const{onChange:i,maxRows:r,minRows:s=1,style:o,value:a}=t,l=(0,xt.Z)(t,Tot),{current:h}=e.useRef(null!=a),c=e.useRef(null),u=(0,Ye.Z)(n,c),p=e.useRef(null),d=e.useRef(0),[f,m]=e.useState({outerHeightStyle:0}),g=e.useCallback((()=>{const e=c.current,n=(0,nn.Z)(e).getComputedStyle(e);if("0px"===n.width)return{outerHeightStyle:0};const i=p.current;i.style.width=n.width,i.value=e.value||t.placeholder||"x","\n"===i.value.slice(-1)&&(i.value+=" ");const o=n.boxSizing,a=Eot(n.paddingBottom)+Eot(n.paddingTop),l=Eot(n.borderBottomWidth)+Eot(n.borderTopWidth),h=i.scrollHeight;i.value="x";const u=i.scrollHeight;let d=h;s&&(d=Math.max(Number(s)*u,d)),r&&(d=Math.min(Number(r)*u,d)),d=Math.max(d,u);return{outerHeightStyle:d+("border-box"===o?a+l:0),overflow:Math.abs(d-h)<=1}}),[r,s,t.placeholder]),y=(t,e)=>{const{outerHeightStyle:n,overflow:i}=e;return d.current<20&&(n>0&&Math.abs((t.outerHeightStyle||0)-n)>1||t.overflow!==i)?(d.current+=1,{overflow:i,outerHeightStyle:n}):t},v=e.useCallback((()=>{const t=g();bot(t)||m((e=>y(e,t)))}),[g]);e.useEffect((()=>{const t=(0,_ot.Z)((()=>{d.current=0,c.current&&(()=>{const t=g();bot(t)||Qe.flushSync((()=>{m((e=>y(e,t)))}))})()}));let e;const n=c.current,i=(0,nn.Z)(n);return i.addEventListener("resize",t),"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(t),e.observe(n)),()=>{t.clear(),i.removeEventListener("resize",t),e&&e.disconnect()}})),(0,Je.Z)((()=>{v()})),e.useEffect((()=>{d.current=0}),[a]);return(0,Nt.jsxs)(e.Fragment,{children:[(0,Nt.jsx)("textarea",(0,Et.Z)({value:a,onChange:t=>{d.current=0,h||v(),i&&i(t)},ref:u,rows:s,style:(0,Et.Z)({height:f.outerHeightStyle,overflow:f.overflow?"hidden":void 0},o)},l)),(0,Nt.jsx)("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:p,tabIndex:-1,style:(0,Et.Z)({},xot,o,{padding:0})})]})})),wot=Iot;function Sot(t){let{props:e,states:n,muiFormControl:i}=t;return n.reduce(((t,n)=>(t[n]=e[n],i&&"undefined"===typeof e[n]&&(t[n]=i[n]),t)),{})}const Rot=e.createContext(void 0);function Cot(){return e.useContext(Rot)}function Aot(t){return null!=t&&!(Array.isArray(t)&&0===t.length)}function Dot(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&(Aot(t.value)&&""!==t.value||e&&Aot(t.defaultValue)&&""!==t.defaultValue)}function Oot(t){return(0,Ae.Z)("MuiInputBase",t)}const Not=(0,ce.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Mot=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Pot=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,"small"===n.size&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e["color".concat((0,Le.Z)(n.color))],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},Fot=(t,e)=>{const{ownerState:n}=t;return[e.input,"small"===n.size&&e.inputSizeSmall,n.multiline&&e.inputMultiline,"search"===n.type&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},Lot=(0,Gt.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Pot})((t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(Not.disabled)]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},n.multiline&&(0,Et.Z)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),kot=(0,Gt.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Fot})((t=>{let{theme:e,ownerState:n}=t;const i="light"===e.palette.mode,r=(0,Et.Z)({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),s={opacity:"0 !important"},o=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5};return(0,Et.Z)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(Not.formControl," &")]:{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},["&.".concat(Not.disabled)]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),Uot=(0,Nt.jsx)(eot,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Bot=e.forwardRef((function(t,n){var i;const r=(0,Ht.Z)({props:t,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:o,autoFocus:a,className:l,components:h={},componentsProps:c={},defaultValue:u,disabled:p,disableInjectingGlobalStyles:d,endAdornment:f,fullWidth:m=!1,id:g,inputComponent:y="input",inputProps:v={},inputRef:_,maxRows:T,minRows:E,multiline:x=!1,name:b,onBlur:I,onChange:w,onClick:S,onFocus:R,onKeyDown:C,onKeyUp:A,placeholder:D,readOnly:O,renderSuffix:N,rows:M,slotProps:P={},slots:F={},startAdornment:L,type:k="text",value:U}=r,B=(0,xt.Z)(r,Mot),z=null!=v.value?v.value:U,{current:G}=e.useRef(null!=z),H=e.useRef(),j=e.useCallback((t=>{0}),[]),V=(0,jt.Z)(H,_,v.ref,j),[W,Z]=e.useState(!1),Y=Cot();const q=Sot({props:r,muiFormControl:Y,states:["color","disabled","error","hiddenLabel","size","required","filled"]});q.focused=Y?Y.focused:W,e.useEffect((()=>{!Y&&p&&W&&(Z(!1),I&&I())}),[Y,p,W,I]);const X=Y&&Y.onFilled,K=Y&&Y.onEmpty,Q=e.useCallback((t=>{Dot(t)?X&&X():K&&K()}),[X,K]);(0,fi.Z)((()=>{G&&Q({value:z})}),[z,Q,G]);e.useEffect((()=>{Q(H.current)}),[]);let J=y,$=v;x&&"input"===J&&($=M?(0,Et.Z)({type:void 0,minRows:M,maxRows:M},$):(0,Et.Z)({type:void 0,maxRows:T,minRows:E},$),J=wot);e.useEffect((()=>{Y&&Y.setAdornedStart(Boolean(L))}),[Y,L]);const tt=(0,Et.Z)({},r,{color:q.color||"primary",disabled:q.disabled,endAdornment:f,error:q.error,focused:q.focused,formControl:Y,fullWidth:m,hiddenLabel:q.hiddenLabel,multiline:x,size:q.size,startAdornment:L,type:k}),et=(t=>{const{classes:e,color:n,disabled:i,error:r,endAdornment:s,focused:o,formControl:a,fullWidth:l,hiddenLabel:h,multiline:c,readOnly:u,size:p,startAdornment:d,type:f}=t,m={root:["root","color".concat((0,Le.Z)(n)),i&&"disabled",r&&"error",l&&"fullWidth",o&&"focused",a&&"formControl","small"===p&&"sizeSmall",c&&"multiline",d&&"adornedStart",s&&"adornedEnd",h&&"hiddenLabel",u&&"readOnly"],input:["input",i&&"disabled","search"===f&&"inputTypeSearch",c&&"inputMultiline","small"===p&&"inputSizeSmall",h&&"inputHiddenLabel",d&&"inputAdornedStart",s&&"inputAdornedEnd",u&&"readOnly"]};return(0,Bt.Z)(m,Oot,e)})(tt),nt=F.root||h.Root||Lot,it=P.root||c.root||{},rt=F.input||h.Input||kot;return $=(0,Et.Z)({},$,null!=(i=P.input)?i:c.input),(0,Nt.jsxs)(e.Fragment,{children:[!d&&Uot,(0,Nt.jsxs)(nt,(0,Et.Z)({},it,!mn(nt)&&{ownerState:(0,Et.Z)({},tt,it.ownerState)},{ref:n,onClick:t=>{H.current&&t.currentTarget===t.target&&H.current.focus(),S&&S(t)}},B,{className:(0,bt.Z)(et.root,it.className,l,O&&"MuiInputBase-readOnly"),children:[L,(0,Nt.jsx)(Rot.Provider,{value:null,children:(0,Nt.jsx)(rt,(0,Et.Z)({ownerState:tt,"aria-invalid":q.error,"aria-describedby":s,autoComplete:o,autoFocus:a,defaultValue:u,disabled:q.disabled,id:g,onAnimationStart:t=>{Q("mui-auto-fill-cancel"===t.animationName?H.current:{value:"x"})},name:b,placeholder:D,readOnly:O,required:q.required,rows:M,value:z,onKeyDown:C,onKeyUp:A,type:k},$,!mn(rt)&&{as:J,ownerState:(0,Et.Z)({},tt,$.ownerState)},{ref:V,className:(0,bt.Z)(et.input,$.className,O&&"MuiInputBase-readOnly"),onBlur:t=>{I&&I(t),v.onBlur&&v.onBlur(t),Y&&Y.onBlur?Y.onBlur(t):Z(!1)},onChange:function(t){if(!G){const e=t.target||H.current;if(null==e)throw new Error((0,vot.Z)(1));Q({value:e.value})}for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];v.onChange&&v.onChange(t,...n),w&&w(t,...n)},onFocus:t=>{q.disabled?t.stopPropagation():(R&&R(t),v.onFocus&&v.onFocus(t),Y&&Y.onFocus?Y.onFocus(t):Z(!0))}}))}),f,N?N((0,Et.Z)({},q,{startAdornment:L})):null]}))]})})),zot=Bot;function Got(t){return(0,Ae.Z)("MuiInput",t)}const Hot=(0,Et.Z)({},Not,(0,ce.Z)("MuiInput",["root","underline","input"])),jot=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Vot=(0,Gt.ZP)(Lot,{shouldForwardProp:t=>(0,Gt.FO)(t)||"classes"===t,name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Pot(t,e),!n.disableUnderline&&e.underline]}})((t=>{let{theme:e,ownerState:n}=t;let i="light"===e.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(i="rgba(".concat(e.vars.palette.common.onBackgroundChannel," / ").concat(e.vars.opacity.inputUnderline,")")),(0,Et.Z)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&:after":{borderBottom:"2px solid ".concat((e.vars||e).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(Hot.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(Hot.error)]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:"1px solid ".concat(i),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(Hot.disabled,", .").concat(Hot.error,"):before")]:{borderBottom:"2px solid ".concat((e.vars||e).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(i)}},["&.".concat(Hot.disabled,":before")]:{borderBottomStyle:"dotted"}})})),Wot=(0,Gt.ZP)(kot,{name:"MuiInput",slot:"Input",overridesResolver:Fot})({}),Zot=e.forwardRef((function(t,e){var n,i,r,s;const o=(0,Ht.Z)({props:t,name:"MuiInput"}),{disableUnderline:a,components:l={},componentsProps:h,fullWidth:c=!1,inputComponent:u="input",multiline:p=!1,slotProps:d,slots:f={},type:m="text"}=o,g=(0,xt.Z)(o,jot),y=(t=>{const{classes:e,disableUnderline:n}=t,i={root:["root",!n&&"underline"],input:["input"]},r=(0,Bt.Z)(i,Got,e);return(0,Et.Z)({},e,r)})(o),v={root:{ownerState:{disableUnderline:a}}},_=(null!=d?d:h)?(0,St.Z)(null!=d?d:h,v):v,T=null!=(n=null!=(i=f.root)?i:l.Root)?n:Vot,E=null!=(r=null!=(s=f.input)?s:l.Input)?r:Wot;return(0,Nt.jsx)(zot,(0,Et.Z)({slots:{root:T,input:E},slotProps:_,fullWidth:c,inputComponent:u,multiline:p,ref:e,type:m},g,{classes:y}))}));Zot.muiName="Input";const Yot=Zot;function qot(t){return(0,Ae.Z)("MuiFilledInput",t)}const Xot=(0,Et.Z)({},Not,(0,ce.Z)("MuiFilledInput",["root","underline","input"])),Kot=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Qot=(0,Gt.ZP)(Lot,{shouldForwardProp:t=>(0,Gt.FO)(t)||"classes"===t,name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Pot(t,e),!n.disableUnderline&&e.underline]}})((t=>{let{theme:e,ownerState:n}=t;var i;const r="light"===e.palette.mode,s=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,Et.Z)({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o}},["&.".concat(Xot.focused)]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o},["&.".concat(Xot.disabled)]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&:after":{borderBottom:"2px solid ".concat(null==(i=(e.vars||e).palette[n.color||"primary"])?void 0:i.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(Xot.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(Xot.error)]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:"1px solid ".concat(e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / ").concat(e.vars.opacity.inputUnderline,")"):s),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(Xot.disabled,", .").concat(Xot.error,"):before")]:{borderBottom:"1px solid ".concat((e.vars||e).palette.text.primary)},["&.".concat(Xot.disabled,":before")]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,Et.Z)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),Jot=(0,Gt.ZP)(kot,{name:"MuiFilledInput",slot:"Input",overridesResolver:Fot})((t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9})})),$ot=e.forwardRef((function(t,e){var n,i,r,s;const o=(0,Ht.Z)({props:t,name:"MuiFilledInput"}),{components:a={},componentsProps:l,fullWidth:h=!1,inputComponent:c="input",multiline:u=!1,slotProps:p,slots:d={},type:f="text"}=o,m=(0,xt.Z)(o,Kot),g=(0,Et.Z)({},o,{fullWidth:h,inputComponent:c,multiline:u,type:f}),y=(t=>{const{classes:e,disableUnderline:n}=t,i={root:["root",!n&&"underline"],input:["input"]},r=(0,Bt.Z)(i,qot,e);return(0,Et.Z)({},e,r)})(o),v={root:{ownerState:g},input:{ownerState:g}},_=(null!=p?p:l)?(0,St.Z)(null!=p?p:l,v):v,T=null!=(n=null!=(i=d.root)?i:a.Root)?n:Qot,E=null!=(r=null!=(s=d.input)?s:a.Input)?r:Jot;return(0,Nt.jsx)(zot,(0,Et.Z)({slots:{root:T,input:E},componentsProps:_,fullWidth:h,inputComponent:c,multiline:u,ref:e,type:f},m,{classes:y}))}));$ot.muiName="Input";const tat=$ot;var eat;const nat=["children","classes","className","label","notched"],iat=(0,Gt.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),rat=(0,Gt.ZP)("legend")((t=>{let{ownerState:e,theme:n}=t;return(0,Et.Z)({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},e.withLabel&&(0,Et.Z)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function sat(t){return(0,Ae.Z)("MuiOutlinedInput",t)}const oat=(0,Et.Z)({},Not,(0,ce.Z)("MuiOutlinedInput",["root","notchedOutline","input"])),aat=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],lat=(0,Gt.ZP)(Lot,{shouldForwardProp:t=>(0,Gt.FO)(t)||"classes"===t,name:"MuiOutlinedInput",slot:"Root",overridesResolver:Pot})((t=>{let{theme:e,ownerState:n}=t;const i="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,Et.Z)({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,["&:hover .".concat(oat.notchedOutline)]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(oat.notchedOutline)]:{borderColor:e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / 0.23)"):i}},["&.".concat(oat.focused," .").concat(oat.notchedOutline)]:{borderColor:(e.vars||e).palette[n.color].main,borderWidth:2},["&.".concat(oat.error," .").concat(oat.notchedOutline)]:{borderColor:(e.vars||e).palette.error.main},["&.".concat(oat.disabled," .").concat(oat.notchedOutline)]:{borderColor:(e.vars||e).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,Et.Z)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),hat=(0,Gt.ZP)((function(t){const{className:e,label:n,notched:i}=t,r=(0,xt.Z)(t,nat),s=null!=n&&""!==n,o=(0,Et.Z)({},t,{notched:i,withLabel:s});return(0,Nt.jsx)(iat,(0,Et.Z)({"aria-hidden":!0,className:e,ownerState:o},r,{children:(0,Nt.jsx)(rat,{ownerState:o,children:s?(0,Nt.jsx)("span",{children:n}):eat||(eat=(0,Nt.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})((t=>{let{theme:e}=t;const n="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),cat=(0,Gt.ZP)(kot,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Fot})((t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),uat=e.forwardRef((function(t,n){var i,r,s,o,a;const l=(0,Ht.Z)({props:t,name:"MuiOutlinedInput"}),{components:h={},fullWidth:c=!1,inputComponent:u="input",label:p,multiline:d=!1,notched:f,slots:m={},type:g="text"}=l,y=(0,xt.Z)(l,aat),v=(t=>{const{classes:e}=t,n=(0,Bt.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},sat,e);return(0,Et.Z)({},e,n)})(l),_=Cot(),T=Sot({props:l,muiFormControl:_,states:["required"]}),E=(0,Et.Z)({},l,{color:T.color||"primary",disabled:T.disabled,error:T.error,focused:T.focused,formControl:_,fullWidth:c,hiddenLabel:T.hiddenLabel,multiline:d,size:T.size,type:g}),x=null!=(i=null!=(r=m.root)?r:h.Root)?i:lat,b=null!=(s=null!=(o=m.input)?o:h.Input)?s:cat;return(0,Nt.jsx)(zot,(0,Et.Z)({slots:{root:x,input:b},renderSuffix:t=>(0,Nt.jsx)(hat,{ownerState:E,className:v.notchedOutline,label:null!=p&&""!==p&&T.required?a||(a=(0,Nt.jsxs)(e.Fragment,{children:[p,"\u2009","*"]})):p,notched:"undefined"!==typeof f?f:Boolean(t.startAdornment||t.filled||t.focused)}),fullWidth:c,inputComponent:u,multiline:d,ref:n,type:g},y,{classes:(0,Et.Z)({},v,{notchedOutline:null})}))}));uat.muiName="Input";const pat=uat;function dat(t){return(0,Ae.Z)("MuiFormLabel",t)}const fat=(0,ce.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),mat=["children","className","color","component","disabled","error","filled","focused","required"],gat=(0,Gt.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return(0,Et.Z)({},e.root,"secondary"===n.color&&e.colorSecondary,n.filled&&e.filled)}})((t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",["&.".concat(fat.focused)]:{color:(e.vars||e).palette[n.color].main},["&.".concat(fat.disabled)]:{color:(e.vars||e).palette.text.disabled},["&.".concat(fat.error)]:{color:(e.vars||e).palette.error.main}})})),yat=(0,Gt.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})((t=>{let{theme:e}=t;return{["&.".concat(fat.error)]:{color:(e.vars||e).palette.error.main}}})),vat=e.forwardRef((function(t,e){const n=(0,Ht.Z)({props:t,name:"MuiFormLabel"}),{children:i,className:r,component:s="label"}=n,o=(0,xt.Z)(n,mat),a=Sot({props:n,muiFormControl:Cot(),states:["color","required","focused","disabled","error","filled"]}),l=(0,Et.Z)({},n,{color:a.color||"primary",component:s,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),h=(t=>{const{classes:e,color:n,focused:i,disabled:r,error:s,filled:o,required:a}=t,l={root:["root","color".concat((0,Le.Z)(n)),r&&"disabled",s&&"error",o&&"filled",i&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return(0,Bt.Z)(l,dat,e)})(l);return(0,Nt.jsxs)(gat,(0,Et.Z)({as:s,ownerState:l,className:(0,bt.Z)(h.root,r),ref:e},o,{children:[i,a.required&&(0,Nt.jsxs)(yat,{ownerState:l,"aria-hidden":!0,className:h.asterisk,children:["\u2009","*"]})]}))})),_at=vat;function Tat(t){return(0,Ae.Z)("MuiInputLabel",t)}(0,ce.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Eat=["disableAnimation","margin","shrink","variant","className"],xat=(0,Gt.ZP)(_at,{shouldForwardProp:t=>(0,Gt.FO)(t)||"classes"===t,name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["& .".concat(fat.asterisk)]:e.asterisk},e.root,n.formControl&&e.formControl,"small"===n.size&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,e[n.variant]]}})((t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},"filled"===n.variant&&(0,Et.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,Et.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,Et.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),bat=e.forwardRef((function(t,e){const n=(0,Ht.Z)({name:"MuiInputLabel",props:t}),{disableAnimation:i=!1,shrink:r,className:s}=n,o=(0,xt.Z)(n,Eat),a=Cot();let l=r;"undefined"===typeof l&&a&&(l=a.filled||a.focused||a.adornedStart);const h=Sot({props:n,muiFormControl:a,states:["size","variant","required"]}),c=(0,Et.Z)({},n,{disableAnimation:i,formControl:a,shrink:l,size:h.size,variant:h.variant,required:h.required}),u=(t=>{const{classes:e,formControl:n,size:i,shrink:r,disableAnimation:s,variant:o,required:a}=t,l={root:["root",n&&"formControl",!s&&"animated",r&&"shrink","small"===i&&"sizeSmall",o],asterisk:[a&&"asterisk"]},h=(0,Bt.Z)(l,Tat,e);return(0,Et.Z)({},e,h)})(c);return(0,Nt.jsx)(xat,(0,Et.Z)({"data-shrink":l,ownerState:c,ref:e,className:(0,bt.Z)(u.root,s)},o,{classes:u}))})),Iat=bat;function wat(t){return(0,Ae.Z)("MuiFormControl",t)}(0,ce.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Sat=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Rat=(0,Gt.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return(0,Et.Z)({},e.root,e["margin".concat((0,Le.Z)(n.margin))],n.fullWidth&&e.fullWidth)}})((t=>{let{ownerState:e}=t;return(0,Et.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===e.margin&&{marginTop:16,marginBottom:8},"dense"===e.margin&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})})),Cat=e.forwardRef((function(t,n){const i=(0,Ht.Z)({props:t,name:"MuiFormControl"}),{children:r,className:s,color:o="primary",component:a="div",disabled:l=!1,error:h=!1,focused:c,fullWidth:u=!1,hiddenLabel:p=!1,margin:d="none",required:f=!1,size:m="medium",variant:g="outlined"}=i,y=(0,xt.Z)(i,Sat),v=(0,Et.Z)({},i,{color:o,component:a,disabled:l,error:h,fullWidth:u,hiddenLabel:p,margin:d,required:f,size:m,variant:g}),_=(t=>{const{classes:e,margin:n,fullWidth:i}=t,r={root:["root","none"!==n&&"margin".concat((0,Le.Z)(n)),i&&"fullWidth"]};return(0,Bt.Z)(r,wat,e)})(v),[T,E]=e.useState((()=>{let t=!1;return r&&e.Children.forEach(r,(e=>{if(!(0,di.Z)(e,["Input","Select"]))return;const n=(0,di.Z)(e,["Select"])?e.props.input:e;n&&n.props.startAdornment&&(t=!0)})),t})),[x,b]=e.useState((()=>{let t=!1;return r&&e.Children.forEach(r,(e=>{(0,di.Z)(e,["Input","Select"])&&Dot(e.props,!0)&&(t=!0)})),t})),[I,w]=e.useState(!1);l&&I&&w(!1);const S=void 0===c||l?I:c;let R;const C=e.useMemo((()=>({adornedStart:T,setAdornedStart:E,color:o,disabled:l,error:h,filled:x,focused:S,fullWidth:u,hiddenLabel:p,size:m,onBlur:()=>{w(!1)},onEmpty:()=>{b(!1)},onFilled:()=>{b(!0)},onFocus:()=>{w(!0)},registerEffect:R,required:f,variant:g})),[T,o,l,h,x,S,u,p,R,f,m,g]);return(0,Nt.jsx)(Rot.Provider,{value:C,children:(0,Nt.jsx)(Rat,(0,Et.Z)({as:a,ownerState:v,className:(0,bt.Z)(_.root,s),ref:n},y,{children:r}))})})),Aat=Cat;function Dat(t){return(0,Ae.Z)("MuiFormHelperText",t)}const Oat=(0,ce.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var Nat;const Mat=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Pat=(0,Gt.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e["size".concat((0,Le.Z)(n.size))],n.contained&&e.contained,n.filled&&e.filled]}})((t=>{let{theme:e,ownerState:n}=t;return(0,Et.Z)({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(Oat.disabled)]:{color:(e.vars||e).palette.text.disabled},["&.".concat(Oat.error)]:{color:(e.vars||e).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),Fat=e.forwardRef((function(t,e){const n=(0,Ht.Z)({props:t,name:"MuiFormHelperText"}),{children:i,className:r,component:s="p"}=n,o=(0,xt.Z)(n,Mat),a=Sot({props:n,muiFormControl:Cot(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,Et.Z)({},n,{component:s,contained:"filled"===a.variant||"outlined"===a.variant,variant:a.variant,size:a.size,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),h=(t=>{const{classes:e,contained:n,size:i,disabled:r,error:s,filled:o,focused:a,required:l}=t,h={root:["root",r&&"disabled",s&&"error",i&&"size".concat((0,Le.Z)(i)),n&&"contained",a&&"focused",o&&"filled",l&&"required"]};return(0,Bt.Z)(h,Dat,e)})(l);return(0,Nt.jsx)(Pat,(0,Et.Z)({as:s,ownerState:l,className:(0,bt.Z)(h.root,r),ref:e},o,{children:" "===i?Nat||(Nat=(0,Nt.jsx)("span",{className:"notranslate",children:"\u200b"})):i}))})),Lat=Fat;n(478);var kat=n(6106);const Uat=rn,Bat=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function zat(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function Gat(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function Hat(t,e){if(void 0===e)return!0;let n=t.innerText;return void 0===n&&(n=t.textContent),n=n.trim().toLowerCase(),0!==n.length&&(e.repeating?n[0]===e.keys[0]:0===n.indexOf(e.keys.join("")))}function jat(t,e,n,i,r,s){let o=!1,a=r(t,e,!!e&&n);for(;a;){if(a===t.firstChild){if(o)return!1;o=!0}const e=!i&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&Hat(a,s)&&!e)return a.focus(),!0;a=r(t,a,n)}return!1}const Vat=e.forwardRef((function(t,n){const{actions:i,autoFocus:r=!1,autoFocusItem:s=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:h=!1,onKeyDown:c,variant:u="selectedMenu"}=t,p=(0,xt.Z)(t,Bat),d=e.useRef(null),f=e.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,fi.Z)((()=>{r&&d.current.focus()}),[r]),e.useImperativeHandle(i,(()=>({adjustStyleForScrollbar:(t,e)=>{const n=!d.current.style.width;if(t.clientHeight<d.current.clientHeight&&n){const n="".concat(Uat((0,kat.Z)(t)),"px");d.current.style["rtl"===e.direction?"paddingLeft":"paddingRight"]=n,d.current.style.width="calc(100% + ".concat(n,")")}return d.current}})),[]);const m=(0,jt.Z)(d,n);let g=-1;e.Children.forEach(o,((t,n)=>{e.isValidElement(t)&&(t.props.disabled||("selectedMenu"===u&&t.props.selected||-1===g)&&(g=n),g===n&&(t.props.disabled||t.props.muiSkipListHighlight||t.type.muiSkipListHighlight)&&(g+=1,g>=o.length&&(g=-1)))}));const y=e.Children.map(o,((t,n)=>{if(n===g){const n={};return s&&(n.autoFocus=!0),void 0===t.props.tabIndex&&"selectedMenu"===u&&(n.tabIndex=0),e.cloneElement(t,n)}return t}));return(0,Nt.jsx)(pi,(0,Et.Z)({role:"menu",ref:m,className:a,onKeyDown:t=>{const e=d.current,n=t.key,i=(0,kat.Z)(e).activeElement;if("ArrowDown"===n)t.preventDefault(),jat(e,i,h,l,zat);else if("ArrowUp"===n)t.preventDefault(),jat(e,i,h,l,Gat);else if("Home"===n)t.preventDefault(),jat(e,null,h,l,zat);else if("End"===n)t.preventDefault(),jat(e,null,h,l,Gat);else if(1===n.length){const r=f.current,s=n.toLowerCase(),o=performance.now();r.keys.length>0&&(o-r.lastTime>500?(r.keys=[],r.repeating=!0,r.previousKeyMatched=!0):r.repeating&&s!==r.keys[0]&&(r.repeating=!1)),r.lastTime=o,r.keys.push(s);const a=i&&!r.repeating&&Hat(i,r);r.previousKeyMatched&&(a||jat(e,i,!1,l,zat,r))?t.preventDefault():r.previousKeyMatched=!1}c&&c(t)},tabIndex:r?0:-1},p,{children:y}))})),Wat=Vat,Zat=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Yat(t){return"scale(".concat(t,", ").concat(t**2,")")}const qat={entering:{opacity:1,transform:Yat(1)},entered:{opacity:1,transform:"none"}},Xat="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Kat=e.forwardRef((function(t,n){const{addEndListener:i,appear:r=!0,children:s,easing:o,in:a,onEnter:l,onEntered:h,onEntering:c,onExit:u,onExited:p,onExiting:d,style:f,timeout:m="auto",TransitionComponent:g=Fn}=t,y=(0,xt.Z)(t,Zat),v=e.useRef(),_=e.useRef(),T=kn(),E=e.useRef(null),x=(0,jt.Z)(E,s.ref,n),b=t=>e=>{if(t){const n=E.current;void 0===e?t(n):t(n,e)}},I=b(c),w=b(((t,e)=>{Un(t);const{duration:n,delay:i,easing:r}=Bn({style:f,timeout:m,easing:o},{mode:"enter"});let s;"auto"===m?(s=T.transitions.getAutoHeightDuration(t.clientHeight),_.current=s):s=n,t.style.transition=[T.transitions.create("opacity",{duration:s,delay:i}),T.transitions.create("transform",{duration:Xat?s:.666*s,delay:i,easing:r})].join(","),l&&l(t,e)})),S=b(h),R=b(d),C=b((t=>{const{duration:e,delay:n,easing:i}=Bn({style:f,timeout:m,easing:o},{mode:"exit"});let r;"auto"===m?(r=T.transitions.getAutoHeightDuration(t.clientHeight),_.current=r):r=e,t.style.transition=[T.transitions.create("opacity",{duration:r,delay:n}),T.transitions.create("transform",{duration:Xat?r:.666*r,delay:Xat?n:n||.333*r,easing:i})].join(","),t.style.opacity=0,t.style.transform=Yat(.75),u&&u(t)})),A=b(p);return e.useEffect((()=>()=>{clearTimeout(v.current)}),[]),(0,Nt.jsx)(g,(0,Et.Z)({appear:r,in:a,nodeRef:E,onEnter:w,onEntered:S,onEntering:I,onExit:C,onExited:A,onExiting:R,addEndListener:t=>{"auto"===m&&(v.current=setTimeout(t,_.current||0)),i&&i(E.current,t)},timeout:"auto"===m?null:m},y,{children:(t,n)=>e.cloneElement(s,(0,Et.Z)({style:(0,Et.Z)({opacity:0,transform:Yat(.75),visibility:"exited"!==t||a?void 0:"hidden"},qat[t],f,s.props.style),ref:x},n))}))}));Kat.muiSupportAuto=!0;const Qat=Kat;function Jat(t){return(0,Ae.Z)("MuiPopover",t)}(0,ce.Z)("MuiPopover",["root","paper"]);const $at=["onEntering"],tlt=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function elt(t,e){let n=0;return"number"===typeof e?n=e:"center"===e?n=t.height/2:"bottom"===e&&(n=t.height),n}function nlt(t,e){let n=0;return"number"===typeof e?n=e:"center"===e?n=t.width/2:"right"===e&&(n=t.width),n}function ilt(t){return[t.horizontal,t.vertical].map((t=>"number"===typeof t?"".concat(t,"px"):t)).join(" ")}function rlt(t){return"function"===typeof t?t():t}const slt=(0,Gt.ZP)($n,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),olt=(0,Gt.ZP)(Tst,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),alt=e.forwardRef((function(t,n){const i=(0,Ht.Z)({props:t,name:"MuiPopover"}),{action:r,anchorEl:s,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:l="anchorEl",children:h,className:c,container:u,elevation:p=8,marginThreshold:d=16,open:f,PaperProps:m={},transformOrigin:g={vertical:"top",horizontal:"left"},TransitionComponent:y=Qat,transitionDuration:v="auto",TransitionProps:{onEntering:_}={}}=i,T=(0,xt.Z)(i.TransitionProps,$at),E=(0,xt.Z)(i,tlt),x=e.useRef(),b=(0,jt.Z)(x,m.ref),I=(0,Et.Z)({},i,{anchorOrigin:o,anchorReference:l,elevation:p,marginThreshold:d,PaperProps:m,transformOrigin:g,TransitionComponent:y,transitionDuration:v,TransitionProps:T}),w=(t=>{const{classes:e}=t;return(0,Bt.Z)({root:["root"],paper:["paper"]},Jat,e)})(I),S=e.useCallback((()=>{if("anchorPosition"===l)return a;const t=rlt(s),e=(t&&1===t.nodeType?t:(0,kat.Z)(x.current).body).getBoundingClientRect();return{top:e.top+elt(e,o.vertical),left:e.left+nlt(e,o.horizontal)}}),[s,o.horizontal,o.vertical,a,l]),R=e.useCallback((t=>({vertical:elt(t,g.vertical),horizontal:nlt(t,g.horizontal)})),[g.horizontal,g.vertical]),C=e.useCallback((t=>{const e={width:t.offsetWidth,height:t.offsetHeight},n=R(e);if("none"===l)return{top:null,left:null,transformOrigin:ilt(n)};const i=S();let r=i.top-n.vertical,o=i.left-n.horizontal;const a=r+e.height,h=o+e.width,c=(0,Cst.Z)(rlt(s)),u=c.innerHeight-d,p=c.innerWidth-d;if(r<d){const t=r-d;r-=t,n.vertical+=t}else if(a>u){const t=a-u;r-=t,n.vertical+=t}if(o<d){const t=o-d;o-=t,n.horizontal+=t}else if(h>p){const t=h-p;o-=t,n.horizontal+=t}return{top:"".concat(Math.round(r),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:ilt(n)}}),[s,l,S,R,d]),[A,D]=e.useState(f),O=e.useCallback((()=>{const t=x.current;if(!t)return;const e=C(t);null!==e.top&&(t.style.top=e.top),null!==e.left&&(t.style.left=e.left),t.style.transformOrigin=e.transformOrigin,D(!0)}),[C]);e.useEffect((()=>{f&&O()})),e.useImperativeHandle(r,(()=>f?{updatePosition:()=>{O()}}:null),[f,O]),e.useEffect((()=>{if(!f)return;const t=(0,Rst.Z)((()=>{O()})),e=(0,Cst.Z)(s);return e.addEventListener("resize",t),()=>{t.clear(),e.removeEventListener("resize",t)}}),[s,f,O]);let N=v;"auto"!==v||y.muiSupportAuto||(N=void 0);const M=u||(s?(0,kat.Z)(rlt(s)).body:void 0);return(0,Nt.jsx)(slt,(0,Et.Z)({BackdropProps:{invisible:!0},className:(0,bt.Z)(w.root,c),container:M,open:f,ref:n,ownerState:I},E,{children:(0,Nt.jsx)(y,(0,Et.Z)({appear:!0,in:f,onEntering:(t,e)=>{_&&_(t,e),O()},onExited:()=>{D(!1)},timeout:N},T,{children:(0,Nt.jsx)(olt,(0,Et.Z)({elevation:p},m,{ref:b,className:(0,bt.Z)(w.paper,m.className)},A?void 0:{style:(0,Et.Z)({},m.style,{opacity:0})},{ownerState:I,children:h}))}))}))})),llt=alt;function hlt(t){return(0,Ae.Z)("MuiMenu",t)}(0,ce.Z)("MuiMenu",["root","paper","list"]);const clt=["onEntering"],ult=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],plt={vertical:"top",horizontal:"right"},dlt={vertical:"top",horizontal:"left"},flt=(0,Gt.ZP)(llt,{shouldForwardProp:t=>(0,Gt.FO)(t)||"classes"===t,name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),mlt=(0,Gt.ZP)(Tst,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),glt=(0,Gt.ZP)(Wat,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),ylt=e.forwardRef((function(t,n){const i=(0,Ht.Z)({props:t,name:"MuiMenu"}),{autoFocus:r=!0,children:s,disableAutoFocusItem:o=!1,MenuListProps:a={},onClose:l,open:h,PaperProps:c={},PopoverClasses:u,transitionDuration:p="auto",TransitionProps:{onEntering:d}={},variant:f="selectedMenu"}=i,m=(0,xt.Z)(i.TransitionProps,clt),g=(0,xt.Z)(i,ult),y=kn(),v="rtl"===y.direction,_=(0,Et.Z)({},i,{autoFocus:r,disableAutoFocusItem:o,MenuListProps:a,onEntering:d,PaperProps:c,transitionDuration:p,TransitionProps:m,variant:f}),T=(t=>{const{classes:e}=t;return(0,Bt.Z)({root:["root"],paper:["paper"],list:["list"]},hlt,e)})(_),E=r&&!o&&h,x=e.useRef(null);let b=-1;return e.Children.map(s,((t,n)=>{e.isValidElement(t)&&(t.props.disabled||("selectedMenu"===f&&t.props.selected||-1===b)&&(b=n))})),(0,Nt.jsx)(flt,(0,Et.Z)({onClose:l,anchorOrigin:{vertical:"bottom",horizontal:v?"right":"left"},transformOrigin:v?plt:dlt,PaperProps:(0,Et.Z)({as:mlt},c,{classes:(0,Et.Z)({},c.classes,{root:T.paper})}),className:T.root,open:h,ref:n,transitionDuration:p,TransitionProps:(0,Et.Z)({onEntering:(t,e)=>{x.current&&x.current.adjustStyleForScrollbar(t,y),d&&d(t,e)}},m),ownerState:_},g,{classes:u,children:(0,Nt.jsx)(glt,(0,Et.Z)({onKeyDown:t=>{"Tab"===t.key&&(t.preventDefault(),l&&l(t,"tabKeyDown"))},actions:x,autoFocus:r&&(-1===b||o),autoFocusItem:E,variant:f},a,{className:(0,bt.Z)(T.list,a.className),children:s}))}))})),vlt=ylt;function _lt(t){return(0,Ae.Z)("MuiNativeSelect",t)}const Tlt=(0,ce.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),Elt=["className","disabled","IconComponent","inputRef","variant"],xlt=t=>{let{ownerState:e,theme:n}=t;return(0,Et.Z)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,Et.Z)({},n.vars?{backgroundColor:"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},["&.".concat(Tlt.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===e.variant&&{"&&&":{paddingRight:32}},"outlined"===e.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},blt=(0,Gt.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Gt.FO,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],{["&.".concat(Tlt.multiple)]:e.multiple}]}})(xlt),Ilt=t=>{let{ownerState:e,theme:n}=t;return(0,Et.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,["&.".concat(Tlt.disabled)]:{color:(n.vars||n).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},"filled"===e.variant&&{right:7},"outlined"===e.variant&&{right:7})},wlt=(0,Gt.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e["icon".concat((0,Le.Z)(n.variant))],n.open&&e.iconOpen]}})(Ilt),Slt=e.forwardRef((function(t,n){const{className:i,disabled:r,IconComponent:s,inputRef:o,variant:a="standard"}=t,l=(0,xt.Z)(t,Elt),h=(0,Et.Z)({},t,{disabled:r,variant:a}),c=(t=>{const{classes:e,variant:n,disabled:i,multiple:r,open:s}=t,o={select:["select",n,i&&"disabled",r&&"multiple"],icon:["icon","icon".concat((0,Le.Z)(n)),s&&"iconOpen",i&&"disabled"]};return(0,Bt.Z)(o,_lt,e)})(h);return(0,Nt.jsxs)(e.Fragment,{children:[(0,Nt.jsx)(blt,(0,Et.Z)({ownerState:h,className:(0,bt.Z)(c.select,i),disabled:r,ref:o||n},l)),t.multiple?null:(0,Nt.jsx)(wlt,{as:s,ownerState:h,className:c.icon})]})})),Rlt=Slt;var Clt=n(522);function Alt(t){return(0,Ae.Z)("MuiSelect",t)}const Dlt=(0,ce.Z)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);var Olt;const Nlt=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Mlt=(0,Gt.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["&.".concat(Dlt.select)]:e.select},{["&.".concat(Dlt.select)]:e[n.variant]},{["&.".concat(Dlt.multiple)]:e.multiple}]}})(xlt,{["&.".concat(Dlt.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Plt=(0,Gt.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e["icon".concat((0,Le.Z)(n.variant))],n.open&&e.iconOpen]}})(Ilt),Flt=(0,Gt.ZP)("input",{shouldForwardProp:t=>(0,Gt.Dz)(t)&&"classes"!==t,name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Llt(t,e){return"object"===typeof e&&null!==e?t===e:String(t)===String(e)}function klt(t){return null==t||"string"===typeof t&&!t.trim()}const Ult=e.forwardRef((function(t,n){const{"aria-describedby":i,"aria-label":r,autoFocus:s,autoWidth:o,children:a,className:l,defaultOpen:h,defaultValue:c,disabled:u,displayEmpty:p,IconComponent:d,inputRef:f,labelId:m,MenuProps:g={},multiple:y,name:v,onBlur:_,onChange:T,onClose:E,onFocus:x,onOpen:b,open:I,readOnly:w,renderValue:S,SelectDisplayProps:R={},tabIndex:C,value:A,variant:D="standard"}=t,O=(0,xt.Z)(t,Nlt),[N,M]=(0,Clt.Z)({controlled:A,default:c,name:"Select"}),[P,F]=(0,Clt.Z)({controlled:I,default:h,name:"Select"}),L=e.useRef(null),k=e.useRef(null),[U,B]=e.useState(null),{current:z}=e.useRef(null!=I),[G,H]=e.useState(),j=(0,jt.Z)(n,f),V=e.useCallback((t=>{k.current=t,t&&B(t)}),[]),W=null==U?void 0:U.parentNode;e.useImperativeHandle(j,(()=>({focus:()=>{k.current.focus()},node:L.current,value:N})),[N]),e.useEffect((()=>{h&&P&&U&&!z&&(H(o?null:W.clientWidth),k.current.focus())}),[U,o]),e.useEffect((()=>{s&&k.current.focus()}),[s]),e.useEffect((()=>{if(!m)return;const t=(0,kat.Z)(k.current).getElementById(m);if(t){const e=()=>{getSelection().isCollapsed&&k.current.focus()};return t.addEventListener("click",e),()=>{t.removeEventListener("click",e)}}}),[m]);const Z=(t,e)=>{t?b&&b(e):E&&E(e),z||(H(o?null:W.clientWidth),F(t))},Y=e.Children.toArray(a),q=t=>e=>{let n;if(e.currentTarget.hasAttribute("tabindex")){if(y){n=Array.isArray(N)?N.slice():[];const e=N.indexOf(t.props.value);-1===e?n.push(t.props.value):n.splice(e,1)}else n=t.props.value;if(t.props.onClick&&t.props.onClick(e),N!==n&&(M(n),T)){const i=e.nativeEvent||e,r=new i.constructor(i.type,i);Object.defineProperty(r,"target",{writable:!0,value:{value:n,name:v}}),T(r,t)}y||Z(!1,e)}},X=null!==U&&P;let K,Q;delete O["aria-invalid"];const J=[];let $=!1,tt=!1;(Dot({value:N})||p)&&(S?K=S(N):$=!0);const et=Y.map((t=>{if(!e.isValidElement(t))return null;let n;if(y){if(!Array.isArray(N))throw new Error((0,vot.Z)(2));n=N.some((e=>Llt(e,t.props.value))),n&&$&&J.push(t.props.children)}else n=Llt(N,t.props.value),n&&$&&(Q=t.props.children);return n&&(tt=!0),e.cloneElement(t,{"aria-selected":n?"true":"false",onClick:q(t),onKeyUp:e=>{" "===e.key&&e.preventDefault(),t.props.onKeyUp&&t.props.onKeyUp(e)},role:"option",selected:n,value:void 0,"data-value":t.props.value})}));$&&(K=y?0===J.length?null:J.reduce(((t,e,n)=>(t.push(e),n<J.length-1&&t.push(", "),t)),[]):Q);let nt,it=G;!o&&z&&U&&(it=W.clientWidth),nt="undefined"!==typeof C?C:u?null:0;const rt=R.id||(v?"mui-component-select-".concat(v):void 0),st=(0,Et.Z)({},t,{variant:D,value:N,open:X}),ot=(t=>{const{classes:e,variant:n,disabled:i,multiple:r,open:s}=t,o={select:["select",n,i&&"disabled",r&&"multiple"],icon:["icon","icon".concat((0,Le.Z)(n)),s&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return(0,Bt.Z)(o,Alt,e)})(st);return(0,Nt.jsxs)(e.Fragment,{children:[(0,Nt.jsx)(Mlt,(0,Et.Z)({ref:V,tabIndex:nt,role:"button","aria-disabled":u?"true":void 0,"aria-expanded":X?"true":"false","aria-haspopup":"listbox","aria-label":r,"aria-labelledby":[m,rt].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:t=>{if(!w){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(t.key)&&(t.preventDefault(),Z(!0,t))}},onMouseDown:u||w?null:t=>{0===t.button&&(t.preventDefault(),k.current.focus(),Z(!0,t))},onBlur:t=>{!X&&_&&(Object.defineProperty(t,"target",{writable:!0,value:{value:N,name:v}}),_(t))},onFocus:x},R,{ownerState:st,className:(0,bt.Z)(R.className,ot.select,l),id:rt,children:klt(K)?Olt||(Olt=(0,Nt.jsx)("span",{className:"notranslate",children:"\u200b"})):K})),(0,Nt.jsx)(Flt,(0,Et.Z)({value:Array.isArray(N)?N.join(","):N,name:v,ref:L,"aria-hidden":!0,onChange:t=>{const e=Y.map((t=>t.props.value)).indexOf(t.target.value);if(-1===e)return;const n=Y[e];M(n.props.value),T&&T(t,n)},tabIndex:-1,disabled:u,className:ot.nativeInput,autoFocus:s,ownerState:st},O)),(0,Nt.jsx)(Plt,{as:d,className:ot.icon,ownerState:st}),(0,Nt.jsx)(vlt,(0,Et.Z)({id:"menu-".concat(v||""),anchorEl:W,open:X,onClose:t=>{Z(!1,t)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},g,{MenuListProps:(0,Et.Z)({"aria-labelledby":m,role:"listbox",disableListWrap:!0},g.MenuListProps),PaperProps:(0,Et.Z)({},g.PaperProps,{style:(0,Et.Z)({minWidth:it},null!=g.PaperProps?g.PaperProps.style:null)}),children:et}))]})})),Blt=Ult;const zlt=(0,n(1171).Z)((0,Nt.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");var Glt,Hlt;const jlt=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Vlt={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>(0,Gt.FO)(t)&&"variant"!==t,slot:"Root"},Wlt=(0,Gt.ZP)(Yot,Vlt)(""),Zlt=(0,Gt.ZP)(pat,Vlt)(""),Ylt=(0,Gt.ZP)(tat,Vlt)(""),qlt=e.forwardRef((function(t,n){const i=(0,Ht.Z)({name:"MuiSelect",props:t}),{autoWidth:r=!1,children:s,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:h=!1,IconComponent:c=zlt,id:u,input:p,inputProps:d,label:f,labelId:m,MenuProps:g,multiple:y=!1,native:v=!1,onClose:_,onOpen:T,open:E,renderValue:x,SelectDisplayProps:b,variant:I="outlined"}=i,w=(0,xt.Z)(i,jlt),S=v?Rlt:Blt,R=Sot({props:i,muiFormControl:Cot(),states:["variant"]}).variant||I,C=p||{standard:Glt||(Glt=(0,Nt.jsx)(Wlt,{})),outlined:(0,Nt.jsx)(Zlt,{label:f}),filled:Hlt||(Hlt=(0,Nt.jsx)(Ylt,{}))}[R],A=(t=>{const{classes:e}=t;return e})((0,Et.Z)({},i,{variant:R,classes:o})),D=(0,jt.Z)(n,C.ref);return(0,Nt.jsx)(e.Fragment,{children:e.cloneElement(C,(0,Et.Z)({inputComponent:S,inputProps:(0,Et.Z)({children:s,IconComponent:c,variant:R,type:void 0,multiple:y},v?{id:u}:{autoWidth:r,defaultOpen:l,displayEmpty:h,labelId:m,MenuProps:g,onClose:_,onOpen:T,open:E,renderValue:x,SelectDisplayProps:(0,Et.Z)({id:u},b)},d,{classes:d?(0,St.Z)(A,d.classes):A},p?p.props.inputProps:{})},y&&v&&"outlined"===R?{notched:!0}:{},{ref:D,className:(0,bt.Z)(C.props.className,a)},!p&&{variant:R},w))})}));qlt.muiName="Select";const Xlt=qlt;function Klt(t){return(0,Ae.Z)("MuiTextField",t)}(0,ce.Z)("MuiTextField",["root"]);const Qlt=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Jlt={standard:Yot,filled:tat,outlined:pat},$lt=(0,Gt.ZP)(Aat,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),tht=e.forwardRef((function(t,e){const n=(0,Ht.Z)({props:t,name:"MuiTextField"}),{autoComplete:i,autoFocus:r=!1,children:s,className:o,color:a="primary",defaultValue:l,disabled:h=!1,error:c=!1,FormHelperTextProps:u,fullWidth:p=!1,helperText:d,id:f,InputLabelProps:m,inputProps:g,InputProps:y,inputRef:v,label:_,maxRows:T,minRows:E,multiline:x=!1,name:b,onBlur:I,onChange:w,onFocus:S,placeholder:R,required:C=!1,rows:A,select:D=!1,SelectProps:O,type:N,value:M,variant:P="outlined"}=n,F=(0,xt.Z)(n,Qlt),L=(0,Et.Z)({},n,{autoFocus:r,color:a,disabled:h,error:c,fullWidth:p,multiline:x,required:C,select:D,variant:P}),k=(t=>{const{classes:e}=t;return(0,Bt.Z)({root:["root"]},Klt,e)})(L);const U={};"outlined"===P&&(m&&"undefined"!==typeof m.shrink&&(U.notched=m.shrink),U.label=_),D&&(O&&O.native||(U.id=void 0),U["aria-describedby"]=void 0);const B=(0,yot.Z)(f),z=d&&B?"".concat(B,"-helper-text"):void 0,G=_&&B?"".concat(B,"-label"):void 0,H=Jlt[P],j=(0,Nt.jsx)(H,(0,Et.Z)({"aria-describedby":z,autoComplete:i,autoFocus:r,defaultValue:l,fullWidth:p,multiline:x,name:b,rows:A,maxRows:T,minRows:E,type:N,value:M,id:B,inputRef:v,onBlur:I,onChange:w,onFocus:S,placeholder:R,inputProps:g},U,y));return(0,Nt.jsxs)($lt,(0,Et.Z)({className:(0,bt.Z)(k.root,o),disabled:h,error:c,fullWidth:p,ref:e,required:C,color:a,variant:P,ownerState:L},F,{children:[null!=_&&""!==_&&(0,Nt.jsx)(Iat,(0,Et.Z)({htmlFor:B,id:G},m,{children:_})),D?(0,Nt.jsx)(Xlt,(0,Et.Z)({"aria-describedby":z,id:B,labelId:G,value:M,input:j},O,{children:s})):j,d&&(0,Nt.jsx)(Lat,(0,Et.Z)({id:z},u,{children:d}))]}))})),eht=tht,nht=t=>{let{onToggleMenu:e}=t;const[n,i]=Grt(),{building:r}=n;if(!r)throw new Error("No building active!");return(0,Nt.jsxs)(kt,{component:"form",onSubmit:t=>{t.preventDefault();const n=new FormData(t.currentTarget),s={...r};s.name=n.get("building-name")||r.name,s.lat=n.get("building-lat")||r.lat,s.lng=n.get("building-lng")||r.lng,i({type:"UPDATE_BUILDING",payload:s}),e(!1)},className:"full-width",children:[(0,Nt.jsx)("div",{className:"list-item",children:(0,Nt.jsx)(eht,{required:!0,fullWidth:!0,id:"building-id",label:"ID del edificio",name:"building-id",autoComplete:"building-id",value:r.uid,disabled:!0})}),(0,Nt.jsx)("div",{className:"list-item",children:(0,Nt.jsx)(eht,{fullWidth:!0,id:"building-name",label:"Nombre del edificio",name:"building-name",autoComplete:"building-name",defaultValue:r.name})}),(0,Nt.jsx)("div",{className:"list-item",children:(0,Nt.jsx)(eht,{fullWidth:!0,required:!0,id:"building-lng",label:"Longitud",name:"building-lng",autoComplete:"building-lng",defaultValue:r.lng})}),(0,Nt.jsx)("div",{className:"list-item",children:(0,Nt.jsx)(eht,{fullWidth:!0,required:!0,id:"building-lat",label:"Latitud",name:"building-lat",autoComplete:"building-lat",defaultValue:r.lat})}),(0,Nt.jsx)("div",{className:"list-item",children:(0,Nt.jsx)(Ze,{type:"submit",className:"submit-button",children:"Actualizar edificio"})})]})};var iht=n(3195);const rht=()=>{const[t,e]=Grt(),{building:n,user:i}=t;if(!n||!i)throw new Error("Error: building or user not found");return(0,Nt.jsxs)("div",{className:"full-width",children:[n.models.length?n.models.map((t=>(0,Nt.jsxs)("div",{className:"list-item",children:[(0,Nt.jsx)($rt,{onClick:()=>(t=>{const i={...n},r=i.models.find((e=>e.id===t));if(!r)throw new Error("Model not found!");i.models=i.models.filter((e=>e.id!==t)),e({type:"DELETE_MODEL",payload:{building:i,model:r}})})(t.id),children:(0,Nt.jsx)(iht.Z,{})}),(0,Nt.jsx)("span",{className:"margin-left",children:t.name})]},t.id))):(0,Nt.jsx)("p",{children:"This building has no models!"}),(0,Nt.jsx)("div",{className:"list-item",children:(0,Nt.jsx)(Ze,{onClick:()=>{const t=document.createElement("input");t.type="file",t.style.visibility="hidden",document.body.appendChild(t),t.onchange=()=>{if(t.files&&t.files.length){const i=t.files[0];if(!i.name.includes(".ifc"))return;const r={...n},s="".concat(i.name,"-").concat(performance.now()),o={name:i.name,id:s};r.models.push(o),e({type:"UPLOAD_MODEL",payload:{building:r,file:i,model:o}})}t.remove()},t.click()},className:"submit-button",children:"Upload model"})})]})},sht=()=>{const[t]=Grt();return(0,Nt.jsxs)("div",{children:[Boolean(t.properties.length)?(0,Nt.jsx)(Yrt,{}):(0,Nt.jsx)("p",{children:"No tienes seleccionado un objeto."}),t.properties.map((t=>(0,Nt.jsxs)("div",{children:[(0,Nt.jsxs)("div",{className:"value-pair list-item",children:[(0,Nt.jsx)("div",{children:t.name}),(0,Nt.jsx)("p",{children:":"}),(0,Nt.jsx)("div",{children:t.value})]}),(0,Nt.jsx)(Yrt,{})]},t.name)))]})},oht=()=>{const[t,e]=Grt(),n=(t,n)=>{e({type:"TOGGLE_FLOORPLAN",payload:{active:t,floorplan:n}})};return(0,Nt.jsxs)("div",{children:[t.floorplans.map((t=>(0,Nt.jsx)("div",{className:"list-item",children:(0,Nt.jsx)(Ze,{onClick:()=>n(!0,t),className:"wide-button",children:t.name})},t.name))),(0,Nt.jsx)("div",{className:"list-item",children:(0,Nt.jsx)(Ze,{onClick:()=>n(!1),className:"wide-button",children:"Cerrar"})},"exit")]})},aht=()=>{const[t]=Grt();return(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)(oi,{variant:"h6",children:"Creado por: Alvaro Flores y BIM-CA"}),(0,Nt.jsx)(oi,{variant:"h6",children:"Email: info@bim-ca.com"})]})},lht=t=>{let{mode:e,open:n,onToggleMenu:i}=t;if(!n)return(0,Nt.jsx)(Nt.Fragment,{});const r=new Map;r.set("BuildingInfo",(0,Nt.jsx)(nht,{onToggleMenu:i})),r.set("ModelList",(0,Nt.jsx)(rht,{})),r.set("Properties",(0,Nt.jsx)(sht,{})),r.set("Floorplans",(0,Nt.jsx)(oht,{})),r.set("Credits",(0,Nt.jsx)(aht,{}));const s={BuildingInfo:"Informaci\xf3n del edificio",ModelList:"Lista de modelos",Properties:"Propiedades",Floorplans:"Planos de planta",Credits:"Cr\xe9ditos"}[e];return(0,Nt.jsx)(cot,{className:"front-menu",children:(0,Nt.jsxs)(mot,{children:[(0,Nt.jsxs)("div",{className:"front-menu-header",children:[(0,Nt.jsx)("h2",{children:s}),(0,Nt.jsx)(Ze,{onClick:()=>i(!1),children:(0,Nt.jsx)(got.Z,{})})]}),(0,Nt.jsx)("div",{className:"front-menu-content",children:r.get(e)})]})})},hht=()=>{const[{user:t,building:n},i]=Grt(),r=(0,e.useRef)(null);return(0,e.useEffect)((()=>{const e=r.current;e&&t&&i({type:"START_BUILDING",payload:{container:e,building:n}})}),[]),(0,Nt.jsx)("div",{className:"full-screen",ref:r})};var cht=n(9513),uht=n(1676),pht=n(4);const dht=function(){const t=[{name:"Clipping planes",icon:(0,Nt.jsx)(cht.Z,{}),active:!1,action:t=>{const i=e("Clipping planes");n(t,"Clipping planes"),i.active=!i.active,t({type:"TOGGLE_CLIPPER",payload:i.active})}},{name:"Dimensions",icon:(0,Nt.jsx)(uht.Z,{}),active:!1,action:t=>{const i=e("Dimensions");n(t,"Dimensions"),i.active=!i.active,t({type:"TOGGLE_DIMENSIONS",payload:i.active})}},{name:"Explosion",icon:(0,Nt.jsx)(pht.Z,{}),active:!1,action:t=>{const i=e("Explosion");n(t,"Explosion"),i.active=!i.active,t({type:"EXPLODE_MODEL",payload:i.active})}}],e=e=>{const n=t.find((t=>t.name===e));if(!n)throw new Error("Tool not found!");return n},n=(e,n)=>{for(const i of t)i.active&&i.name!==n&&i.action(e)};return t}(),fht=()=>{const t=Grt()[1];return(0,Nt.jsx)(cot,{className:"bottom-menu",children:dht.map((e=>(0,Nt.jsx)($rt,{color:e.active?"primary":"default",onClick:()=>e.action(t),children:e.icon},e.name)))})};var mht=n(2670);const ght=()=>{const[t]=(0,e.useState)(240),[n,i]=(0,e.useState)(!0),[r,s]=(0,e.useState)(!1),[o,a]=(0,e.useState)(!1),[l,h]=(0,e.useState)("BuildingInfo"),[{building:c,user:u}]=Grt();if(!c)return(0,Nt.jsx)(ut,{to:"/map"});if(!u)return(0,Nt.jsx)(ut,{to:"/login"});const p=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!r,e=arguments.length>1?arguments[1]:void 0;e&&h(e),s(t)},d=t=>{i(t)},f=()=>{a(!1)},m=[{icon:(0,Nt.jsx)(cht.Z,{}),text:"Herramienta de corte: Presiona la tecla P para hacer un corte. Presiona la tecla Suprimir para eliminar el corte."},{icon:(0,Nt.jsx)(uht.Z,{}),text:"Herramienta de medici\xf3n: Presiona la tecla D para habilitar una regla. Presiona la tecla Suprimir para eliminar la medici\xf3n."},{icon:(0,Nt.jsx)(pht.Z,{}),text:"Explosi\xf3n: Presiona el \xedcono para explotar los diferentes niveles del modelo."}],g=Wst();return(0,Nt.jsx)(Nt.Fragment,{children:(0,Nt.jsxs)(kt,{sx:{display:"flex"},children:[(0,Nt.jsx)(sot,{}),(0,Nt.jsx)($st,{width:t,open:n,onOpen:()=>d(!n)}),(0,Nt.jsx)(Zst,{width:t,open:n,onClose:()=>d(!1),onToggleMenu:p}),(0,Nt.jsxs)(kt,{component:"main",sx:{flexGrow:1,p:3},children:[(0,Nt.jsx)(g,{}),(0,Nt.jsx)(hht,{}),(0,Nt.jsx)(lht,{onToggleMenu:p,open:r,mode:l}),(0,Nt.jsx)(fht,{}),(0,Nt.jsx)("div",{className:"round-button-container",children:(0,Nt.jsx)(Ze,{variant:"contained",color:"primary",className:"round-button",onClick:()=>{a(!0)},children:(0,Nt.jsx)(mht.Z,{})})}),(0,Nt.jsx)($n,{open:o,onClose:f,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,Nt.jsxs)(kt,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,maxHeight:1e3,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},children:[(0,Nt.jsx)(oi,{id:"modal-modal-title",variant:"h6",component:"h2",sx:{fontWeight:"bold",fontSize:"1.5rem",marginLeft:"15px"},children:"Shortcuts"}),(0,Nt.jsx)(pi,{children:m.map(((t,e)=>(0,Nt.jsxs)(Ai,{children:[(0,Nt.jsx)(Pi,{children:t.icon}),(0,Nt.jsx)(zi,{primaryTypographyProps:{fontSize:"16px"},primary:t.text})]},e)))}),(0,Nt.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"left",marginTop:"16px"},children:(0,Nt.jsx)(Ze,{variant:"contained",color:"primary",onClick:f,sx:{width:"30px",padding:"6px",marginLeft:"auto"},children:"X"})})]})})]})]})})},yht=()=>{const[t,e]=Grt();return t.user?(0,Nt.jsx)(ut,{to:"/map"}):(0,Nt.jsxs)("div",{className:"homepage-container",children:[(0,Nt.jsxs)("nav",{className:"navbar",children:[(0,Nt.jsxs)("h1",{className:"navbar-title",children:[(0,Nt.jsx)("img",{className:"ifcjs-logo",src:"https://firebirdcs.github.io/IFCReactApp/ifcjs-logo.png",alt:"ifcjs logo"})," ","Visor IFC"]}),(0,Nt.jsx)(Ze,{className:"login-button",variant:"contained",color:"primary",onClick:()=>{e({type:"LOGIN"})},children:"Iniciar sesi\xf3n"})]}),(0,Nt.jsxs)("div",{className:"content-container",children:[(0,Nt.jsx)("div",{className:"left-content",children:(0,Nt.jsx)("img",{className:"landing-logo",alt:"ifcjs logo",src:"https://firebirdcs.github.io/IFCReactApp/ifcjs-logo.png"})}),(0,Nt.jsxs)("div",{className:"right-content",children:[(0,Nt.jsx)("h2",{children:"\xa1T\xfa modelo IFC en la web!"}),(0,Nt.jsx)("p",{children:"La herramienta IFC.js toma ventaja de los buscadores para mostrar modelos completos IFC para el usuario. Tienes distintas opciones para manejar coordenadas, propiedades y herramientas acerca de tu modelo IFC."})]})]})]})};var vht=n(4e3),_ht=n(4647);const Tht=()=>{const[t,n]=(0,e.useState)(!1),[i,r]=(0,e.useState)(!1),[s,o]=(0,e.useState)(!1),a=(0,e.useRef)(null),[l,h]=Grt(),{user:c,building:u}=l,p=()=>{n(!t)},d=()=>{r(!0)},f=()=>{r(!1)},m=()=>{o(!1)};if((0,e.useEffect)((()=>{const t=a.current;t&&c&&h({type:"START_MAP",payload:{container:t,user:c}}),d()}),[]),!c)return(0,Nt.jsx)(ut,{to:"/login"});if(u){const t="/building?id=".concat(u.uid);return(0,Nt.jsx)(ut,{to:t})}return(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)("div",{onContextMenu:()=>{t&&(h({type:"ADD_BUILDING",payload:c}),n(!1))},className:"full-screen",ref:a}),t&&(0,Nt.jsxs)("div",{className:"overlay",children:[(0,Nt.jsx)("p",{children:"Haz click derecho para crear un nuevo edificio o"}),(0,Nt.jsx)(Ze,{onClick:p,children:"Cancelar"})]}),(0,Nt.jsxs)("div",{className:"gis-button-container",children:[(0,Nt.jsx)(Ze,{color:"primary",variant:"contained",onClick:p,children:"Crear edificio"}),(0,Nt.jsx)(Ze,{color:"primary",variant:"contained",onClick:()=>{h({type:"LOGOUT"})},children:"Cerrar sesi\xf3n"})]}),(0,Nt.jsx)("div",{className:"img-container",children:(0,Nt.jsx)("img",{className:"logo-img",src:"/IFCReactApp/BIMCA-Crema-01.png"})}),(0,Nt.jsx)("div",{className:"round-button-container",children:(0,Nt.jsx)(Ze,{variant:"contained",color:"primary",className:"round-button",onClick:d,children:(0,Nt.jsx)(mht.Z,{})})}),(0,Nt.jsx)($n,{open:i,onClose:f,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,Nt.jsxs)(kt,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,maxHeight:500,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},children:[(0,Nt.jsx)(oi,{id:"modal-modal-title",variant:"h6",component:"h6",sx:{fontWeight:"bold",fontSize:"1.5rem"},children:"Pasos para crear un edificio"}),(0,Nt.jsx)(oi,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Coordenadas"}),(0,Nt.jsx)(oi,{mb:2,id:"modal-modal-description",sx:{mt:2},children:"Antes que todo, necesitas las coordenadas en mano y necesitas escribirlas dentro de la barra de b\xfasqueda de la siguiente manera: Primero latitud, segundo longitud."}),(0,Nt.jsx)("img",{className:"modal-image",src:"/IFCReactApp/Paso1.gif",alt:"Pasos"}),(0,Nt.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"16px"},children:[(0,Nt.jsx)(Ze,{variant:"contained",color:"primary",onClick:f,sx:{width:"70px",padding:"6px",marginRight:"8px"},children:"X"}),(0,Nt.jsx)(Ze,{variant:"contained",color:"primary",onClick:()=>{o(!0),f()},sx:{width:"70px",padding:"6px",marginRight:"14px"},children:(0,Nt.jsx)(vht.Z,{})})]})]})}),(0,Nt.jsx)($n,{open:s,onClose:m,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,Nt.jsxs)(kt,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,maxHeight:500,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},children:[(0,Nt.jsx)(oi,{id:"modal-modal-title",variant:"h6",component:"h6",sx:{fontWeight:"bold",fontSize:"1.5rem"},children:"Pasos para hacer un edificio"}),(0,Nt.jsx)(oi,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Hacer un edificio"}),(0,Nt.jsx)(oi,{mb:2,id:"modal-modal-description",sx:{mt:2},children:"Ahora que has introducido las coordenadas todo lo que debes que hacer es hacer click derecho en el lugar donde quieres crear tu edificio!"}),(0,Nt.jsx)("img",{className:"second-modal-image",src:"/IFCReactApp/Paso2.gif",alt:"Pasos"}),(0,Nt.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"10px"},children:[(0,Nt.jsx)(Ze,{variant:"contained",color:"primary",onClick:()=>{m(),d()},sx:{width:"70px",padding:"8px",marginRight:"8px"},children:(0,Nt.jsx)(_ht.Z,{})}),(0,Nt.jsx)(Ze,{variant:"contained",color:"primary",onClick:m,sx:{width:"70px",padding:"6px"},children:"X"})]})]})})]})};const Eht=function(){return(0,Nt.jsx)(zrt,{children:(0,Nt.jsx)(vt,{children:(0,Nt.jsxs)(ft,{children:[(0,Nt.jsx)(pt,{path:"/building",element:(0,Nt.jsx)(ght,{})}),(0,Nt.jsx)(pt,{path:"/map",element:(0,Nt.jsx)(Tht,{})}),(0,Nt.jsx)(pt,{path:"/login",element:(0,Nt.jsx)(yht,{})}),(0,Nt.jsx)(pt,{path:"/",element:(0,Nt.jsx)(yht,{})})]})})})};var xht=n(5693),bht=n(201);const Iht="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";const wht=function(t){const{children:n,theme:i}=t,r=(0,bht.Z)(),s=e.useMemo((()=>{const t=null===r?i:function(t,e){if("function"===typeof e)return e(t);return(0,Et.Z)({},t,e)}(r,i);return null!=t&&(t[Iht]=null!==r),t}),[i,r]);return(0,Nt.jsx)(xht.Z.Provider,{value:s,children:n})},Sht={};function Rht(t){const e=(0,Ot.Z)();return(0,Nt.jsx)(ne.T.Provider,{value:"object"===typeof e?e:Sht,children:t.children})}const Cht=function(t){const{children:e,theme:n}=t;return(0,Nt.jsx)(wht,{theme:n,children:(0,Nt.jsx)(Rht,{children:e})})},Aht=r.createRoot(document.getElementById("root")),Dht=(0,Ft.Z)({palette:{primary:{main:"#EF6337"}},typography:{fontFamily:"Montserrat, sans-serif",fontSize:13,fontWeightLight:300,fontWeightRegular:600,fontWeightMedium:600,fontWeightBold:700}});ns({apiKey:"AIzaSyDWFdP9aE8vAwyMG1jq6pc0_MHr6ItLk84",authDomain:"ifc-react-app.firebaseapp.com",databaseURL:{NODE_ENV:"production",PUBLIC_URL:"/IFCReactApp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDWFdP9aE8vAwyMG1jq6pc0_MHr6ItLk84",REACT_APP_FIREBASE_APP_ID:"1:54427550535:web:56f3c2daa707f1606e8262",REACT_APP_FIREBASE_AUTH_DOMAIN:"ifc-react-app.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"54427550535",REACT_APP_FIREBASE_PROJECT_ID:"ifc-react-app",REACT_APP_FIREBASE_STORAGE_BUCKET:"ifc-react-app.appspot.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoiYmltY2EiLCJhIjoiY2xmMXJ4ZGhrMGJhazN4bGg2YTAwZG5heSJ9.OQdD57WTOQigRXhxpjfaqA"}.REACT_APP_FIREBASE_DATABASE_URL,projectId:"ifc-react-app",storageBucket:"ifc-react-app.appspot.com",messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"/IFCReactApp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDWFdP9aE8vAwyMG1jq6pc0_MHr6ItLk84",REACT_APP_FIREBASE_APP_ID:"1:54427550535:web:56f3c2daa707f1606e8262",REACT_APP_FIREBASE_AUTH_DOMAIN:"ifc-react-app.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"54427550535",REACT_APP_FIREBASE_PROJECT_ID:"ifc-react-app",REACT_APP_FIREBASE_STORAGE_BUCKET:"ifc-react-app.appspot.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoiYmltY2EiLCJhIjoiY2xmMXJ4ZGhrMGJhazN4bGg2YTAwZG5heSJ9.OQdD57WTOQigRXhxpjfaqA"}.REACT_APP_FIREBASE_SENDER_ID,appId:"1:54427550535:web:56f3c2daa707f1606e8262"});Aht.render((0,Nt.jsx)(Cht,{theme:Dht,children:(0,Nt.jsx)(e.StrictMode,{children:(0,Nt.jsx)(Eht,{})})}))})()})();