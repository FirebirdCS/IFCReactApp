/*! For license information please see main.29409b92.js.LICENSE.txt */
!function(){var e={5296:function(e,t,n){"use strict";n.d(t,{Z:function(){return ae}});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,a=String.fromCharCode,s=Object.assign;function o(e){return e.trim()}function u(e,t,n){return e.replace(t,n)}function l(e,t){return e.indexOf(t)}function c(e,t){return 0|e.charCodeAt(t)}function h(e,t,n){return e.slice(t,n)}function p(e){return e.length}function f(e){return e.length}function d(e,t){return t.push(e),e}var v=1,m=1,y=0,g=0,_=0,T="";function E(e,t,n,r,i,a,s){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:v,column:m,length:s,return:""}}function x(e,t){return s(E("",null,null,"",null,null,0),e,{length:-e.length},t)}function b(){return _=g>0?c(T,--g):0,m--,10===_&&(m=1,v--),_}function I(){return _=g<y?c(T,g++):0,m++,10===_&&(m=1,v++),_}function w(){return c(T,g)}function k(){return g}function S(e,t){return h(T,e,t)}function R(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function C(e){return v=m=1,y=p(T=e),g=0,[]}function D(e){return T="",e}function A(e){return o(S(g-1,M(91===e?e+2:40===e?e+1:e)))}function O(e){for(;(_=w())&&_<33;)I();return R(e)>2||R(_)>3?"":" "}function N(e,t){for(;--t&&I()&&!(_<48||_>102||_>57&&_<65||_>70&&_<97););return S(e,k()+(t<6&&32==w()&&32==I()))}function M(e){for(;I();)switch(_){case e:return g;case 34:case 39:34!==e&&39!==e&&M(_);break;case 40:41===e&&M(e);break;case 92:I()}return g}function P(e,t){for(;I()&&e+_!==57&&(e+_!==84||47!==w()););return"/*"+S(t,g-1)+"*"+a(47===e?e:I())}function F(e){for(;!R(w());)I();return S(e,g)}var L="-ms-",U="-moz-",Z="-webkit-",B="comm",z="rule",G="decl",H="@import",j="@keyframes";function V(e,t){for(var n="",r=f(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function W(e,t,n,r){switch(e.type){case H:case G:return e.return=e.return||e.value;case B:return"";case j:return e.return=e.value+"{"+V(e.children,r)+"}";case z:e.value=e.props.join(",")}return p(n=V(e.children,r))?e.return=e.value+"{"+n+"}":""}function Y(e){return D(q("",null,null,null,[""],e=C(e),0,[0],e))}function q(e,t,n,r,i,s,o,h,f){for(var v=0,m=0,y=o,g=0,_=0,T=0,E=1,x=1,S=1,R=0,C="",D=i,M=s,L=r,U=C;x;)switch(T=R,R=I()){case 40:if(108!=T&&58==c(U,y-1)){-1!=l(U+=u(A(R),"&","&\f"),"&\f")&&(S=-1);break}case 34:case 39:case 91:U+=A(R);break;case 9:case 10:case 13:case 32:U+=O(T);break;case 92:U+=N(k()-1,7);continue;case 47:switch(w()){case 42:case 47:d(K(P(I(),k()),t,n),f);break;default:U+="/"}break;case 123*E:h[v++]=p(U)*S;case 125*E:case 59:case 0:switch(R){case 0:case 125:x=0;case 59+m:_>0&&p(U)-y&&d(_>32?Q(U+";",r,n,y-1):Q(u(U," ","")+";",r,n,y-2),f);break;case 59:U+=";";default:if(d(L=X(U,t,n,v,m,i,h,C,D=[],M=[],y),s),123===R)if(0===m)q(U,t,L,L,D,s,y,h,M);else switch(99===g&&110===c(U,3)?100:g){case 100:case 109:case 115:q(e,L,L,r&&d(X(e,L,L,0,0,i,h,C,i,D=[],y),M),i,M,y,h,r?D:M);break;default:q(U,L,L,L,[""],M,0,h,M)}}v=m=_=0,E=S=1,C=U="",y=o;break;case 58:y=1+p(U),_=T;default:if(E<1)if(123==R)--E;else if(125==R&&0==E++&&125==b())continue;switch(U+=a(R),R*E){case 38:S=m>0?1:(U+="\f",-1);break;case 44:h[v++]=(p(U)-1)*S,S=1;break;case 64:45===w()&&(U+=A(I())),g=w(),m=y=p(C=U+=F(k())),R++;break;case 45:45===T&&2==p(U)&&(E=0)}}return s}function X(e,t,n,r,a,s,l,c,p,d,v){for(var m=a-1,y=0===a?s:[""],g=f(y),_=0,T=0,x=0;_<r;++_)for(var b=0,I=h(e,m+1,m=i(T=l[_])),w=e;b<g;++b)(w=o(T>0?y[b]+" "+I:u(I,/&\f/g,y[b])))&&(p[x++]=w);return E(e,t,n,0===a?z:c,p,d,v)}function K(e,t,n){return E(e,t,n,B,a(_),h(e,2,-2),0)}function Q(e,t,n,r){return E(e,t,n,G,h(e,0,r),h(e,r+1,-1),r)}var J=function(e,t,n){for(var r=0,i=0;r=i,i=w(),38===r&&12===i&&(t[n]=1),!R(i);)I();return S(e,g)},$=function(e,t){return D(function(e,t){var n=-1,r=44;do{switch(R(r)){case 0:38===r&&12===w()&&(t[n]=1),e[n]+=J(g-1,t,n);break;case 2:e[n]+=A(r);break;case 4:if(44===r){e[++n]=58===w()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=a(r)}}while(r=I());return e}(C(e),t))},ee=new WeakMap,te=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ee.get(n))&&!r){ee.set(e,!0);for(var i=[],a=$(t,i),s=n.props,o=0,u=0;o<a.length;o++)for(var l=0;l<s.length;l++,u++)e.props[u]=i[o]?a[o].replace(/&\f/g,s[l]):s[l]+" "+a[o]}}},ne=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function re(e,t){switch(function(e,t){return 45^c(e,0)?(((t<<2^c(e,0))<<2^c(e,1))<<2^c(e,2))<<2^c(e,3):0}(e,t)){case 5103:return Z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Z+e+U+e+L+e+e;case 6828:case 4268:return Z+e+L+e+e;case 6165:return Z+e+L+"flex-"+e+e;case 5187:return Z+e+u(e,/(\w+).+(:[^]+)/,Z+"box-$1$2"+L+"flex-$1$2")+e;case 5443:return Z+e+L+"flex-item-"+u(e,/flex-|-self/,"")+e;case 4675:return Z+e+L+"flex-line-pack"+u(e,/align-content|flex-|-self/,"")+e;case 5548:return Z+e+L+u(e,"shrink","negative")+e;case 5292:return Z+e+L+u(e,"basis","preferred-size")+e;case 6060:return Z+"box-"+u(e,"-grow","")+Z+e+L+u(e,"grow","positive")+e;case 4554:return Z+u(e,/([^-])(transform)/g,"$1"+Z+"$2")+e;case 6187:return u(u(u(e,/(zoom-|grab)/,Z+"$1"),/(image-set)/,Z+"$1"),e,"")+e;case 5495:case 3959:return u(e,/(image-set\([^]*)/,Z+"$1$`$1");case 4968:return u(u(e,/(.+:)(flex-)?(.*)/,Z+"box-pack:$3"+L+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Z+e+e;case 4095:case 3583:case 4068:case 2532:return u(e,/(.+)-inline(.+)/,Z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(p(e)-1-t>6)switch(c(e,t+1)){case 109:if(45!==c(e,t+4))break;case 102:return u(e,/(.+:)(.+)-([^]+)/,"$1"+Z+"$2-$3$1"+U+(108==c(e,t+3)?"$3":"$2-$3"))+e;case 115:return~l(e,"stretch")?re(u(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==c(e,t+1))break;case 6444:switch(c(e,p(e)-3-(~l(e,"!important")&&10))){case 107:return u(e,":",":"+Z)+e;case 101:return u(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Z+(45===c(e,14)?"inline-":"")+"box$3$1"+Z+"$2$3$1"+L+"$2box$3")+e}break;case 5936:switch(c(e,t+11)){case 114:return Z+e+L+u(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Z+e+L+u(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Z+e+L+u(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Z+e+L+e+e}return e}var ie=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case G:e.return=re(e.value,e.length);break;case j:return V([x(e,{value:u(e.value,"@","@"+Z)})],r);case z:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return V([x(e,{props:[u(t,/:(read-\w+)/,":"+U+"$1")]})],r);case"::placeholder":return V([x(e,{props:[u(t,/:(plac\w+)/,":"+Z+"input-$1")]}),x(e,{props:[u(t,/:(plac\w+)/,":"+U+"$1")]}),x(e,{props:[u(t,/:(plac\w+)/,L+"input-$1")]})],r)}return""}))}}],ae=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||ie;var a,s,o={},u=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;u.push(e)}));var l,c,h=[W,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],p=function(e){var t=f(e);return function(n,r,i,a){for(var s="",o=0;o<t;o++)s+=e[o](n,r,i,a)||"";return s}}([te,ne].concat(i,h));s=function(e,t,n,r){l=n,V(Y(e?e+"{"+t.styles+"}":t.styles),p),r&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new r({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:s};return d.sheet.hydrate(u),d}},1816:function(e,t){"use strict";t.Z=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},6132:function(e,t,n){"use strict";n.d(t,{T:function(){return o},w:function(){return s}});var r=n(7313),i=n(5296),a=(n(1086),n(5696),(0,r.createContext)("undefined"!==typeof HTMLElement?(0,i.Z)({key:"css"}):null));a.Provider;var s=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(a);return e(t,i,n)}))},o=(0,r.createContext)({})},1086:function(e,t,n){"use strict";n.d(t,{O:function(){return v}});var r=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},i={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},a=n(1816),s=/[A-Z]|^ms/g,o=/_EMO_([^_]+?)_([^]*?)_EMO_/g,u=function(e){return 45===e.charCodeAt(1)},l=function(e){return null!=e&&"boolean"!==typeof e},c=(0,a.Z)((function(e){return u(e)?e:e.replace(s,"-$&").toLowerCase()})),h=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(o,(function(e,t,n){return f={name:t,styles:n,next:f},t}))}return 1===i[e]||u(e)||"number"!==typeof t||0===t?t:t+"px"};function p(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return f={name:n.name,styles:n.styles,next:f},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)f={name:r.name,styles:r.styles,next:f},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=p(e,t,n[i])+";";else for(var a in n){var s=n[a];if("object"!==typeof s)null!=t&&void 0!==t[s]?r+=a+"{"+t[s]+"}":l(s)&&(r+=c(a)+":"+h(a,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var o=p(e,t,s);switch(a){case"animation":case"animationName":r+=c(a)+":"+o+";";break;default:r+=a+"{"+o+"}"}}else for(var u=0;u<s.length;u++)l(s[u])&&(r+=c(a)+":"+h(a,s[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=f,a=n(e);return f=i,p(e,t,a)}}if(null==t)return n;var s=t[n];return void 0!==s?s:n}var f,d=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var v=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,a="";f=void 0;var s=e[0];null==s||void 0===s.raw?(i=!1,a+=p(n,t,s)):a+=s[0];for(var o=1;o<e.length;o++)a+=p(n,t,e[o]),i&&(a+=s[o]);d.lastIndex=0;for(var u,l="";null!==(u=d.exec(a));)l+="-"+u[1];return{name:r(a)+l,styles:a,next:f}}},5696:function(e,t,n){"use strict";var r;n.d(t,{L:function(){return s},j:function(){return o}});var i=n(7313),a=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,s=a||function(e){return e()},o=a||i.useLayoutEffect},4911:function(e,t,n){"use strict";n.d(t,{My:function(){return a},fp:function(){return r},hC:function(){return i}});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},a=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a=t;do{e.insert(t===a?"."+r:"",a,e.sheet,!0);a=a.next}while(void 0!==a)}}},9790:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");t.Z=s},4045:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");t.Z=s},3195:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=s},1198:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.Z=s},9513:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"M9.64 7.64c.23-.5.36-1.05.36-1.64 0-2.21-1.79-4-4-4S2 3.79 2 6s1.79 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1L9.64 7.64zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zM19 3l-6 6 2 2 7-7V3z"}),"ContentCut");t.Z=s},1997:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=s},1945:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"}),"FindInPage");t.Z=s},6034:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"M12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3zm1 14h-2v-2h2v2zm0-4h-2V7h2v5z"}),"GppMaybe");t.Z=s},4588:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"M18 20V8.35L13.65 4h-2.83L16 9.18V20h2zm4 0V6.69L19.31 4h-2.83L20 7.52V20h2zM8 4l-6 6v10h5v-5h2v5h5V10L8 4zm1 9H7v-2h2v2z"}),"HolidayVillage");t.Z=s},4:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"M9 3 5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3z"}),"ImportExport");t.Z=s},3973:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.Z=s},2854:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"}),"Logout");t.Z=s},7748:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"}),"Map");t.Z=s},1317:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.Z=s},1676:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2v8z"}),"Straighten");t.Z=s},9344:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"M10 10.02h5V21h-5zM17 21h3c1.1 0 2-.9 2-2v-9h-5v11zm3-18H5c-1.1 0-2 .9-2 2v3h19V5c0-1.1-.9-2-2-2zM3 19c0 1.1.9 2 2 2h3V10H3v9z"}),"TableChart");t.Z=s},961:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5045)),a=n(6417),s=(0,i.default)((0,a.jsx)("path",{d:"M3 14h4v-4H3v4zm0 5h4v-4H3v4zM3 9h4V5H3v4zm5 5h13v-4H8v4zm0 5h13v-4H8v4zM8 5v4h13V5H8z"}),"ViewList");t.Z=s},5045:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(3928)},5436:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case o:case s:case p:case f:return e;default:switch(e=e&&e.$$typeof){case c:case l:case h:case v:case d:case u:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},478:function(e,t,n){"use strict";n(5436)},8658:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(7462),i=n(3366),a=n(7219),s=n(3019),o=n(9456),u=n(3232),l=n(3649),c=n(4942);function h(e,t){var n;return(0,r.Z)({toolbar:(n={minHeight:56},(0,c.Z)(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),(0,c.Z)(n,e.up("sm"),{minHeight:64}),n)},t)}var p=n(7551),f={black:"#000",white:"#fff"},d={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},v={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},m={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},y={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},_={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},T={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},E=["mode","contrastThreshold","tonalOffset"],x={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:f.white,default:f.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},b={text:{primary:f.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:f.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function I(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,p.$n)(e.main,i):"dark"===t&&(e.dark=(0,p._j)(e.main,a)))}function w(e){var t=e.mode,n=void 0===t?"light":t,o=e.contrastThreshold,u=void 0===o?3:o,l=e.tonalOffset,c=void 0===l?.2:l,h=(0,i.Z)(e,E),w=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(n),k=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[200],light:v[50],dark:v[400]}:{main:v[500],light:v[300],dark:v[700]}}(n),S=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[500],light:m[300],dark:m[700]}:{main:m[700],light:m[400],dark:m[800]}}(n),R=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:_[400],light:_[300],dark:_[700]}:{main:_[700],light:_[500],dark:_[900]}}(n),C=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:T[400],light:T[300],dark:T[700]}:{main:T[800],light:T[500],dark:T[900]}}(n),D=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:"#ed6c02",light:y[500],dark:y[900]}}(n);function A(e){return(0,p.mi)(e,b.text.primary)>=u?b.text.primary:x.text.primary}var O=function(e){var t=e.color,n=e.name,i=e.mainShade,s=void 0===i?500:i,o=e.lightShade,u=void 0===o?300:o,l=e.darkShade,h=void 0===l?700:l;if(!(t=(0,r.Z)({},t)).main&&t[s]&&(t.main=t[s]),!t.hasOwnProperty("main"))throw new Error((0,a.Z)(11,n?" (".concat(n,")"):"",s));if("string"!==typeof t.main)throw new Error((0,a.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return I(t,"light",u,c),I(t,"dark",h,c),t.contrastText||(t.contrastText=A(t.main)),t},N={dark:b,light:x};return(0,s.Z)((0,r.Z)({common:(0,r.Z)({},f),mode:n,primary:O({color:w,name:"primary"}),secondary:O({color:k,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:O({color:S,name:"error"}),warning:O({color:D,name:"warning"}),info:O({color:R,name:"info"}),success:O({color:C,name:"success"}),grey:d,contrastThreshold:u,getContrastText:A,augmentColor:O,tonalOffset:c},N[n]),h)}var k=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var S={textTransform:"uppercase"},R='"Roboto", "Helvetica", "Arial", sans-serif';function C(e,t){var n="function"===typeof t?t(e):t,a=n.fontFamily,o=void 0===a?R:a,u=n.fontSize,l=void 0===u?14:u,c=n.fontWeightLight,h=void 0===c?300:c,p=n.fontWeightRegular,f=void 0===p?400:p,d=n.fontWeightMedium,v=void 0===d?500:d,m=n.fontWeightBold,y=void 0===m?700:m,g=n.htmlFontSize,_=void 0===g?16:g,T=n.allVariants,E=n.pxToRem,x=(0,i.Z)(n,k);var b=l/14,I=E||function(e){return"".concat(e/_*b,"rem")},w=function(e,t,n,i,a){return(0,r.Z)({fontFamily:o,fontWeight:e,fontSize:I(t),lineHeight:n},o===R?{letterSpacing:"".concat((s=i/t,Math.round(1e5*s)/1e5),"em")}:{},a,T);var s},C={h1:w(h,96,1.167,-1.5),h2:w(h,60,1.2,-.5),h3:w(f,48,1.167,0),h4:w(f,34,1.235,.25),h5:w(f,24,1.334,0),h6:w(v,20,1.6,.15),subtitle1:w(f,16,1.75,.15),subtitle2:w(v,14,1.57,.1),body1:w(f,16,1.5,.15),body2:w(f,14,1.43,.15),button:w(v,14,1.75,.4,S),caption:w(f,12,1.66,.4),overline:w(f,12,2.66,1,S),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,s.Z)((0,r.Z)({htmlFontSize:_,pxToRem:I,fontFamily:o,fontSize:l,fontWeightLight:h,fontWeightRegular:f,fontWeightMedium:v,fontWeightBold:y},C),x,{clone:!1})}var D=.2,A=.14,O=.12;function N(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(D,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(A,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(O,")")].join(",")}var M=["none",N(0,2,1,-1,0,1,1,0,0,1,3,0),N(0,3,1,-2,0,2,2,0,0,1,5,0),N(0,3,3,-2,0,3,4,0,0,1,8,0),N(0,2,4,-1,0,4,5,0,0,1,10,0),N(0,3,5,-1,0,5,8,0,0,1,14,0),N(0,3,5,-1,0,6,10,0,0,1,18,0),N(0,4,5,-2,0,7,10,1,0,2,16,1),N(0,5,5,-3,0,8,10,1,0,3,14,2),N(0,5,6,-3,0,9,12,1,0,3,16,2),N(0,6,6,-3,0,10,14,1,0,4,18,3),N(0,6,7,-4,0,11,15,1,0,4,20,3),N(0,7,8,-4,0,12,17,2,0,5,22,4),N(0,7,8,-4,0,13,19,2,0,5,24,4),N(0,7,9,-4,0,14,21,2,0,5,26,4),N(0,8,9,-5,0,15,22,2,0,6,28,5),N(0,8,10,-5,0,16,24,2,0,6,30,5),N(0,8,11,-5,0,17,26,2,0,6,32,5),N(0,9,11,-5,0,18,28,2,0,7,34,6),N(0,9,12,-6,0,19,29,2,0,7,36,6),N(0,10,13,-6,0,20,31,3,0,8,38,7),N(0,10,13,-6,0,21,33,3,0,8,40,7),N(0,10,14,-6,0,22,35,3,0,8,42,7),N(0,11,14,-7,0,23,36,3,0,9,44,8),N(0,11,15,-7,0,24,38,3,0,9,46,8)],P=["duration","easing","delay"],F={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},L={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function U(e){return"".concat(Math.round(e),"ms")}function Z(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function B(e){var t=(0,r.Z)({},F,e.easing),n=(0,r.Z)({},L,e.duration);return(0,r.Z)({getAutoHeightDuration:Z,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.duration,s=void 0===a?n.standard:a,o=r.easing,u=void 0===o?t.easeInOut:o,l=r.delay,c=void 0===l?0:l;(0,i.Z)(r,P);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof s?s:U(s)," ").concat(u," ").concat("string"===typeof c?c:U(c))})).join(",")}},e,{easing:t,duration:n})}var z={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},G=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,c=e.palette,p=void 0===c?{}:c,f=e.transitions,d=void 0===f?{}:f,v=e.typography,m=void 0===v?{}:v,y=(0,i.Z)(e,G);if(e.vars)throw new Error((0,a.Z)(18));var g=w(p),_=(0,o.Z)(e),T=(0,s.Z)(_,{mixins:h(_.breakpoints,n),palette:g,shadows:M.slice(),typography:C(g,m),transitions:B(d),zIndex:(0,r.Z)({},z)});T=(0,s.Z)(T,y);for(var E=arguments.length,x=new Array(E>1?E-1:0),b=1;b<E;b++)x[b-1]=arguments[b];return(T=x.reduce((function(e,t){return(0,s.Z)(e,t)}),T)).unstable_sxConfig=(0,r.Z)({},u.Z,null==y?void 0:y.unstable_sxConfig),T.unstable_sx=function(e){return(0,l.Z)({sx:e,theme:this})},T}var j=H},2248:function(e,t,n){"use strict";var r=(0,n(8658).Z)();t.Z=r},8564:function(e,t,n){"use strict";n.d(t,{ZP:function(){return S},FO:function(){return I},Dz:function(){return w}});var r=n(3433),i=n(9439),a=n(3366),s=n(7462),o=n(4472),u=n(9456),l=n(114),c=["variant"];function h(e){return 0===e.length}function p(e){var t=e.variant,n=(0,a.Z)(e,c),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?h(r)?e[t]:(0,l.Z)(e[t]):"".concat(h(r)?t:(0,l.Z)(t)).concat((0,l.Z)(e[t].toString()))})),r}var f=n(3649),d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],v=["theme"],m=["theme"];function y(e){return 0===Object.keys(e).length}var g=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},_=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=p(e.props);r[t]=e.style})),r},T=function(e,t,n,r){var i,a,s=e.ownerState,o=void 0===s?{}:s,u=[],l=null==n||null==(i=n.components)||null==(a=i[r])?void 0:a.variants;return l&&l.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){o[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[p(n.props)])})),u};function E(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var x=(0,u.Z)();var b=n(2248),I=function(e){return E(e)&&"classes"!==e},w=E,k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?x:t,u=e.rootShouldForwardProp,l=void 0===u?E:u,c=e.slotShouldForwardProp,h=void 0===c?E:c,p=function(e){var t=y(e.theme)?n:e.theme;return(0,f.Z)((0,s.Z)({},e,{theme:t}))};return p.__mui_systemSx=!0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.Co)(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var u=t.name,c=t.slot,f=t.skipVariantsResolver,x=t.skipSx,b=t.overridesResolver,I=(0,a.Z)(t,d),w=void 0!==f?f:c&&"Root"!==c||!1,k=x||!1;var S=E;"Root"===c?S=l:c?S=h:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(S=void 0);var R=(0,o.ZP)(e,(0,s.Z)({shouldForwardProp:S,label:undefined},I)),C=function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),l=1;l<t;l++)o[l-1]=arguments[l];var c=o?o.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,i=(0,a.Z)(t,v);return e((0,s.Z)({theme:y(r)?n:r},i))}:e})):[],h=e;u&&b&&c.push((function(e){var t=y(e.theme)?n:e.theme,r=g(u,t);if(r){var a={};return Object.entries(r).forEach((function(n){var r=(0,i.Z)(n,2),o=r[0],u=r[1];a[o]="function"===typeof u?u((0,s.Z)({},e,{theme:t})):u})),b(e,a)}return null})),u&&!w&&c.push((function(e){var t=y(e.theme)?n:e.theme;return T(e,_(u,t),t,u)})),k||c.push(p);var f=c.length-o.length;if(Array.isArray(e)&&f>0){var d=new Array(f).fill("");(h=[].concat((0,r.Z)(e),(0,r.Z)(d))).raw=[].concat((0,r.Z)(e.raw),(0,r.Z)(d))}else"function"===typeof e&&e.__emotion_real!==e&&(h=function(t){var r=t.theme,i=(0,a.Z)(t,m);return e((0,s.Z)({theme:y(r)?n:r},i))});return R.apply(void 0,[h].concat((0,r.Z)(c)))};return R.withConfig&&(C.withConfig=R.withConfig),C}}({defaultTheme:b.Z,rootShouldForwardProp:I}),S=k},9394:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(9023);var i=n(6936);function a(e){var t=e.props,n=e.name,a=e.defaultTheme,s=function(e){var t=e.theme,n=e.name,i=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,r.Z)(t.components[n].defaultProps,i):i}({theme:(0,i.Z)(a),name:n,props:t});return s}var s=n(2248);function o(e){return a({props:e.props,name:e.name,defaultTheme:s.Z})}},1615:function(e,t,n){"use strict";var r=n(114);t.Z=r.Z},1171:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(7462),i=n(7313),a=n(3366),s=n(3061),o=n(1921),u=n(1615),l=n(9394),c=n(8564),h=n(7430),p=n(2298);function f(e){return(0,p.Z)("MuiSvgIcon",e)}(0,h.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var d=n(6417),v=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],m=(0,c.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat((0,u.Z)(n.color))],t["fontSize".concat((0,u.Z)(n.fontSize))]]}})((function(e){var t,n,r,i,a,s,o,u,l,c,h,p,f,d,v,m,y,g=e.theme,_=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=g.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=g.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(a=g.typography)||null==(s=a.pxToRem)?void 0:s.call(a,20))||"1.25rem",medium:(null==(o=g.typography)||null==(u=o.pxToRem)?void 0:u.call(o,24))||"1.5rem",large:(null==(l=g.typography)||null==(c=l.pxToRem)?void 0:c.call(l,35))||"2.1875rem"}[_.fontSize],color:null!=(h=null==(p=(g.vars||g).palette)||null==(f=p[_.color])?void 0:f.main)?h:{action:null==(d=(g.vars||g).palette)||null==(v=d.action)?void 0:v.active,disabled:null==(m=(g.vars||g).palette)||null==(y=m.action)?void 0:y.disabled,inherit:void 0}[_.color]}})),y=i.forwardRef((function(e,t){var n=(0,l.Z)({props:e,name:"MuiSvgIcon"}),i=n.children,c=n.className,h=n.color,p=void 0===h?"inherit":h,y=n.component,g=void 0===y?"svg":y,_=n.fontSize,T=void 0===_?"medium":_,E=n.htmlColor,x=n.inheritViewBox,b=void 0!==x&&x,I=n.titleAccess,w=n.viewBox,k=void 0===w?"0 0 24 24":w,S=(0,a.Z)(n,v),R=(0,r.Z)({},n,{color:p,component:g,fontSize:T,instanceFontSize:e.fontSize,inheritViewBox:b,viewBox:k}),C={};b||(C.viewBox=k);var D=function(e){var t=e.color,n=e.fontSize,r=e.classes,i={root:["root","inherit"!==t&&"color".concat((0,u.Z)(t)),"fontSize".concat((0,u.Z)(n))]};return(0,o.Z)(i,f,r)}(R);return(0,d.jsxs)(m,(0,r.Z)({as:g,className:(0,s.Z)(D.root,c),focusable:"false",color:E,"aria-hidden":!I||void 0,role:I?"img":void 0,ref:t},C,S,{ownerState:R,children:[i,I?(0,d.jsx)("title",{children:I}):null]}))}));y.muiName="SvgIcon";var g=y;function _(e,t){function n(n,i){return(0,d.jsx)(g,(0,r.Z)({"data-testid":"".concat(t,"Icon"),ref:i},n,{children:e}))}return n.muiName=g.muiName,i.memo(i.forwardRef(n))}},8706:function(e,t,n){"use strict";var r=n(4312);t.Z=r.Z},3928:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return i.Z},createChainedFunction:function(){return a},createSvgIcon:function(){return s.Z},debounce:function(){return o.Z},deprecatedPropType:function(){return u},isMuiElement:function(){return l.Z},ownerDocument:function(){return c.Z},ownerWindow:function(){return h.Z},requirePropFactory:function(){return p},setRef:function(){return f},unstable_ClassNameGenerator:function(){return E},unstable_useEnhancedEffect:function(){return d.Z},unstable_useId:function(){return v},unsupportedProp:function(){return m},useControlled:function(){return y.Z},useEventCallback:function(){return g.Z},useForkRef:function(){return _.Z},useIsFocusVisible:function(){return T.Z}});var r=n(1271),i=n(1615),a=n(4246).Z,s=n(1171),o=n(8706);var u=function(e,t){return function(){return null}},l=n(7816),c=n(6106),h=n(3533);n(7462);var p=function(e,t){return function(){return null}},f=n(9265).Z,d=n(3118),v=n(3362).Z;var m=function(e,t,n,r,i){return null},y=n(522),g=n(3236),_=n(6983),T=n(9127),E={configure:function(e){r.Z.configure(e)}}},7816:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7313);var i=function(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},6106:function(e,t,n){"use strict";var r=n(9081);t.Z=r.Z},3533:function(e,t,n){"use strict";var r=n(3282);t.Z=r.Z},522:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9439),i=n(7313);var a=function(e){var t=e.controlled,n=e.default,a=(e.name,e.state,i.useRef(void 0!==t).current),s=i.useState(n),o=(0,r.Z)(s,2),u=o[0],l=o[1];return[a?t:u,i.useCallback((function(e){a||l(e)}),[])]}},3118:function(e,t,n){"use strict";var r=n(2678);t.Z=r.Z},3236:function(e,t,n){"use strict";var r=n(2780);t.Z=r.Z},6983:function(e,t,n){"use strict";var r=n(7472);t.Z=r.Z},9127:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r,i=n(7313),a=!0,s=!1,o={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function u(e){e.metaKey||e.altKey||e.ctrlKey||(a=!0)}function l(){a=!1}function c(){"hidden"===this.visibilityState&&s&&(a=!0)}function h(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return a||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!o[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var p=function(){var e=i.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",u,!0),t.addEventListener("mousedown",l,!0),t.addEventListener("pointerdown",l,!0),t.addEventListener("touchstart",l,!0),t.addEventListener("visibilitychange",c,!0))}),[]),t=i.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!h(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(s=!0,window.clearTimeout(r),r=window.setTimeout((function(){s=!1}),100),t.current=!1,!0)},ref:e}}},5693:function(e,t,n){"use strict";var r=n(7313).createContext(null);t.Z=r},201:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7313),i=n(5693);function a(){return r.useContext(i.Z)}},4472:function(e,t,n){"use strict";n.d(t,{ZP:function(){return T},Co:function(){return E}});var r=n(7313),i=n(7462),a=n(1816),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,o=(0,a.Z)((function(e){return s.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),u=n(6132),l=n(4911),c=n(1086),h=n(5696),p=o,f=function(e){return"theme"!==e},d=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?p:f},v=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},m=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;(0,l.hC)(t,n,r);(0,h.L)((function(){return(0,l.My)(t,n,r)}));return null},y=function e(t,n){var a,s,o=t.__emotion_real===t,h=o&&t.__emotion_base||t;void 0!==n&&(a=n.label,s=n.target);var p=v(t,n,o),f=p||d(h),y=!f("as");return function(){var g=arguments,_=o&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==a&&_.push("label:"+a+";"),null==g[0]||void 0===g[0].raw)_.push.apply(_,g);else{0,_.push(g[0][0]);for(var T=g.length,E=1;E<T;E++)_.push(g[E],g[0][E])}var x=(0,u.w)((function(e,t,n){var i=y&&e.as||h,a="",o=[],v=e;if(null==e.theme){for(var g in v={},e)v[g]=e[g];v.theme=(0,r.useContext)(u.T)}"string"===typeof e.className?a=(0,l.fp)(t.registered,o,e.className):null!=e.className&&(a=e.className+" ");var T=(0,c.O)(_.concat(o),t.registered,v);a+=t.key+"-"+T.name,void 0!==s&&(a+=" "+s);var E=y&&void 0===p?d(i):f,x={};for(var b in e)y&&"as"===b||E(b)&&(x[b]=e[b]);return x.className=a,x.ref=n,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(m,{cache:t,serialized:T,isStringTag:"string"===typeof i}),(0,r.createElement)(i,x))}));return x.displayName=void 0!==a?a:"Styled("+("string"===typeof h?h:h.displayName||h.name||"Component")+")",x.defaultProps=t.defaultProps,x.__emotion_real=x,x.__emotion_base=h,x.__emotion_styles=_,x.__emotion_forwardProp=p,Object.defineProperty(x,"toString",{value:function(){return"."+s}}),x.withComponent=function(t,r){return e(t,(0,i.Z)({},n,r,{shouldForwardProp:v(x,r,!0)})).apply(void 0,_)},x}},g=y.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){g[e]=g(e)}));var _=g;function T(e,t){return _(e,t)}var E=function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},4929:function(e,t,n){"use strict";n.d(t,{L7:function(){return o},VO:function(){return r},W8:function(){return s},k9:function(){return a}});var r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function a(e,t,n){var a=e.theme||{};if(Array.isArray(t)){var s=a.breakpoints||i;return t.reduce((function(e,r,i){return e[s.up(s.keys[i])]=n(t[i]),e}),{})}if("object"===typeof t){var o=a.breakpoints||i;return Object.keys(t).reduce((function(e,i){if(-1!==Object.keys(o.values||r).indexOf(i)){e[o.up(i)]=n(t[i],i)}else{var a=i;e[a]=t[a]}return e}),{})}return n(t)}function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{}))||{}}function o(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}},7551:function(e,t,n){"use strict";n.d(t,{$n:function(){return h},Fq:function(){return l},_j:function(){return c},mi:function(){return u}});var r=n(7219);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function a(e){if(e.type)return e;if("#"===e.charAt(0))return a(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,e));var i,s=e.substring(t+1,e.length-1);if("color"===n){if(i=(s=s.split(" ")).shift(),4===s.length&&"/"===s[3].charAt(0)&&(s[3]=s[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.Z)(10,i))}else s=s.split(",");return{type:n,values:s=s.map((function(e){return parseFloat(e)})),colorSpace:i}}function s(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function o(e){var t="hsl"===(e=a(e)).type||"hsla"===e.type?a(function(e){var t=(e=a(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)},l="rgb",c=[Math.round(255*u(0)),Math.round(255*u(8)),Math.round(255*u(4))];return"hsla"===e.type&&(l+="a",c.push(t[3])),s({type:l,values:c})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function u(e,t){var n=o(e),r=o(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function l(e,t){return e=a(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,s(e)}function c(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return s(e)}function h(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return s(e)}},9456:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(7462),i=n(3366),a=n(3019),s=n(4942),o=["values","unit","step"],u=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return(0,r.Z)({},e,(0,s.Z)({},t.key,t.val))}),{})};var l={borderRadius:4},c=n(6886);var h=n(3649),p=n(3232),f=["breakpoints","palette","spacing","shape"];var d=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,s=e.palette,d=void 0===s?{}:s,v=e.spacing,m=e.shape,y=void 0===m?{}:m,g=(0,i.Z)(e,f),_=function(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,a=e.unit,s=void 0===a?"px":a,l=e.step,c=void 0===l?5:l,h=(0,i.Z)(e,o),p=u(n),f=Object.keys(p);function d(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(s,")")}function v(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-c/100).concat(s,")")}function m(e,t){var r=f.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(s,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[f[r]]?n[f[r]]:t)-c/100).concat(s,")")}return(0,r.Z)({keys:f,values:p,up:d,down:v,between:m,only:function(e){return f.indexOf(e)+1<f.length?m(e,f[f.indexOf(e)+1]):d(e)},not:function(e){var t=f.indexOf(e);return 0===t?d(f[1]):t===f.length-1?v(f[t]):m(e,f[f.indexOf(e)+1]).replace("@media","@media not all and")},unit:s},h)}(n),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,c.hB)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(v),E=(0,a.Z)({breakpoints:_,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},d),spacing:T,shape:(0,r.Z)({},l,y)},g),x=arguments.length,b=new Array(x>1?x-1:0),I=1;I<x;I++)b[I-1]=arguments[I];return(E=b.reduce((function(e,t){return(0,a.Z)(e,t)}),E)).unstable_sxConfig=(0,r.Z)({},p.Z,null==g?void 0:g.unstable_sxConfig),E.unstable_sx=function(e){return(0,h.Z)({sx:e,theme:this})},E}},7330:function(e,t,n){"use strict";var r=n(3019);t.Z=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},6886:function(e,t,n){"use strict";n.d(t,{hB:function(){return v},eI:function(){return d},NA:function(){return m},e6:function(){return _},o3:function(){return T}});var r=n(9439),i=n(4929),a=n(6428),s=n(7330);var o={m:"margin",p:"padding"},u={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!l[e])return[e];e=l[e]}var t=e.split(""),n=(0,r.Z)(t,2),i=n[0],a=n[1],s=o[i],c=u[a]||"";return Array.isArray(c)?c.map((function(e){return s+e})):[s+c]})),h=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],p=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],f=[].concat(h,p);function d(e,t,n,r){var i,s=null!=(i=(0,a.DW)(e,t,!1))?i:n;return"number"===typeof s?function(e){return"string"===typeof e?e:s*e}:Array.isArray(s)?function(e){return"string"===typeof e?e:s[e]}:"function"===typeof s?s:function(){}}function v(e){return d(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function y(e,t,n,r){if(-1===t.indexOf(n))return null;var a=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=m(t,n),e}),{})}}(c(n),r),s=e[n];return(0,i.k9)(e,s,a)}function g(e,t){var n=v(e.theme);return Object.keys(e).map((function(r){return y(e,t,r,n)})).reduce(s.Z,{})}function _(e){return g(e,h)}function T(e){return g(e,p)}function E(e){return g(e,f)}_.propTypes={},_.filterProps=h,T.propTypes={},T.filterProps=p,E.propTypes={},E.filterProps=f},6428:function(e,t,n){"use strict";n.d(t,{DW:function(){return s},Jq:function(){return o}});var r=n(4942),i=n(114),a=n(4929);function s(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function o(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:s(e,n)||i,t&&(r=t(r,i,e)),r}t.ZP=function(e){var t=e.prop,n=e.cssProperty,u=void 0===n?e.prop:n,l=e.themeKey,c=e.transform,h=function(e){if(null==e[t])return null;var n=e[t],h=s(e.theme,l)||{};return(0,a.k9)(e,n,(function(e){var n=o(h,c,e);return e===n&&"string"===typeof e&&(n=o(h,c,"".concat(t).concat("default"===e?"":(0,i.Z)(e)),e)),!1===u?n:(0,r.Z)({},u,n)}))};return h.propTypes={},h.filterProps=[t],h}},3232:function(e,t,n){"use strict";n.d(t,{Z:function(){return M}});var r=n(4942),i=n(114),a=n(6886),s=n(4929),o=n(6428),u=n(7330);var l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?(0,u.Z)(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i};function c(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var h=(0,o.ZP)({prop:"border",themeKey:"borders",transform:c}),p=(0,o.ZP)({prop:"borderTop",themeKey:"borders",transform:c}),f=(0,o.ZP)({prop:"borderRight",themeKey:"borders",transform:c}),d=(0,o.ZP)({prop:"borderBottom",themeKey:"borders",transform:c}),v=(0,o.ZP)({prop:"borderLeft",themeKey:"borders",transform:c}),m=(0,o.ZP)({prop:"borderColor",themeKey:"palette"}),y=(0,o.ZP)({prop:"borderTopColor",themeKey:"palette"}),g=(0,o.ZP)({prop:"borderRightColor",themeKey:"palette"}),_=(0,o.ZP)({prop:"borderBottomColor",themeKey:"palette"}),T=(0,o.ZP)({prop:"borderLeftColor",themeKey:"palette"}),E=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=(0,a.eI)(e.theme,"shape.borderRadius",4,"borderRadius");return(0,s.k9)(e,e.borderRadius,(function(e){return{borderRadius:(0,a.NA)(t,e)}}))}return null};E.propTypes={},E.filterProps=["borderRadius"];l(h,p,f,d,v,m,y,g,_,T,E);var x=function(e){if(void 0!==e.gap&&null!==e.gap){var t=(0,a.eI)(e.theme,"spacing",8,"gap");return(0,s.k9)(e,e.gap,(function(e){return{gap:(0,a.NA)(t,e)}}))}return null};x.propTypes={},x.filterProps=["gap"];var b=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=(0,a.eI)(e.theme,"spacing",8,"columnGap");return(0,s.k9)(e,e.columnGap,(function(e){return{columnGap:(0,a.NA)(t,e)}}))}return null};b.propTypes={},b.filterProps=["columnGap"];var I=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=(0,a.eI)(e.theme,"spacing",8,"rowGap");return(0,s.k9)(e,e.rowGap,(function(e){return{rowGap:(0,a.NA)(t,e)}}))}return null};I.propTypes={},I.filterProps=["rowGap"];l(x,b,I,(0,o.ZP)({prop:"gridColumn"}),(0,o.ZP)({prop:"gridRow"}),(0,o.ZP)({prop:"gridAutoFlow"}),(0,o.ZP)({prop:"gridAutoColumns"}),(0,o.ZP)({prop:"gridAutoRows"}),(0,o.ZP)({prop:"gridTemplateColumns"}),(0,o.ZP)({prop:"gridTemplateRows"}),(0,o.ZP)({prop:"gridTemplateAreas"}),(0,o.ZP)({prop:"gridArea"}));function w(e,t){return"grey"===t?t:e}l((0,o.ZP)({prop:"color",themeKey:"palette",transform:w}),(0,o.ZP)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:w}),(0,o.ZP)({prop:"backgroundColor",themeKey:"palette",transform:w}));function k(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var S=(0,o.ZP)({prop:"width",transform:k}),R=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return(0,s.k9)(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||s.VO[t]||k(t)}}))}return null};R.filterProps=["maxWidth"];var C=(0,o.ZP)({prop:"minWidth",transform:k}),D=(0,o.ZP)({prop:"height",transform:k}),A=(0,o.ZP)({prop:"maxHeight",transform:k}),O=(0,o.ZP)({prop:"minHeight",transform:k}),N=((0,o.ZP)({prop:"size",cssProperty:"width",transform:k}),(0,o.ZP)({prop:"size",cssProperty:"height",transform:k}),l(S,R,C,D,A,O,(0,o.ZP)({prop:"boxSizing"})),function(e){return function(t){if(void 0!==t[e]&&null!==t[e]){return(0,s.k9)(t,t[e],(function(n){var a,s,o,u,l,c,h=null==(a=t.theme.typography)?void 0:a[n];("object"===typeof h&&(h=null),h)||(h=null==(s=t.theme.typography)?void 0:s["".concat(e).concat("default"===t[e]||t[e]===e?"":(0,i.Z)(null==(o=t[e])?void 0:o.toString()))]);h||(h=null!=(u=null==(l=t.theme.typography)||null==(c=l[n])?void 0:c[e])?u:n);return(0,r.Z)({},e,h)}))}return null}}),M={border:{themeKey:"borders",transform:c},borderTop:{themeKey:"borders",transform:c},borderRight:{themeKey:"borders",transform:c},borderBottom:{themeKey:"borders",transform:c},borderLeft:{themeKey:"borders",transform:c},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:E},color:{themeKey:"palette",transform:w},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:w},backgroundColor:{themeKey:"palette",transform:w},p:{style:a.o3},pt:{style:a.o3},pr:{style:a.o3},pb:{style:a.o3},pl:{style:a.o3},px:{style:a.o3},py:{style:a.o3},padding:{style:a.o3},paddingTop:{style:a.o3},paddingRight:{style:a.o3},paddingBottom:{style:a.o3},paddingLeft:{style:a.o3},paddingX:{style:a.o3},paddingY:{style:a.o3},paddingInline:{style:a.o3},paddingInlineStart:{style:a.o3},paddingInlineEnd:{style:a.o3},paddingBlock:{style:a.o3},paddingBlockStart:{style:a.o3},paddingBlockEnd:{style:a.o3},m:{style:a.e6},mt:{style:a.e6},mr:{style:a.e6},mb:{style:a.e6},ml:{style:a.e6},mx:{style:a.e6},my:{style:a.e6},margin:{style:a.e6},marginTop:{style:a.e6},marginRight:{style:a.e6},marginBottom:{style:a.e6},marginLeft:{style:a.e6},marginX:{style:a.e6},marginY:{style:a.e6},marginInline:{style:a.e6},marginInlineStart:{style:a.e6},marginInlineEnd:{style:a.e6},marginBlock:{style:a.e6},marginBlockStart:{style:a.e6},marginBlockEnd:{style:a.e6},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:x},rowGap:{style:I},columnGap:{style:b},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:k},maxWidth:{style:R},minWidth:{transform:k},height:{transform:k},maxHeight:{transform:k},minHeight:{transform:k},boxSizing:{},fontFamily:{themeKey:"typography",style:N("fontFamily")},fontSize:{themeKey:"typography",style:N("fontSize")},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography",style:N("fontWeight")},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}}},3649:function(e,t,n){"use strict";var r=n(4942),i=n(114),a=n(7330),s=n(6428),o=n(4929),u=n(3232);var l=function(){function e(e,t,n,a){var u,l=(u={},(0,r.Z)(u,e,t),(0,r.Z)(u,"theme",n),u),c=a[e];if(!c)return(0,r.Z)({},e,t);var h=c.cssProperty,p=void 0===h?e:h,f=c.themeKey,d=c.transform,v=c.style;if(null==t)return null;var m=(0,s.DW)(n,f)||{};if(v)return v(l);return(0,o.k9)(l,t,(function(t){var n=(0,s.Jq)(m,d,t);return t===n&&"string"===typeof t&&(n=(0,s.Jq)(m,d,"".concat(e).concat("default"===t?"":(0,i.Z)(t)),t)),!1===p?n:(0,r.Z)({},p,n)}))}return function t(n){var i,s=n||{},l=s.sx,c=s.theme,h=void 0===c?{}:c;if(!l)return null;var p=null!=(i=h.unstable_sxConfig)?i:u.Z;function f(n){var i=n;if("function"===typeof n)i=n(h);else if("object"!==typeof n)return n;if(!i)return null;var s=(0,o.W8)(h.breakpoints),u=Object.keys(s),l=s;return Object.keys(i).forEach((function(n){var s,u,c=(s=i[n],u=h,"function"===typeof s?s(u):s);if(null!==c&&void 0!==c)if("object"===typeof c)if(p[n])l=(0,a.Z)(l,e(n,c,h,p));else{var f=(0,o.k9)({theme:h},c,(function(e){return(0,r.Z)({},n,e)}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}(f,c)?l=(0,a.Z)(l,f):l[n]=t({sx:c,theme:h})}else l=(0,a.Z)(l,e(n,c,h,p))})),(0,o.L7)(u,l)}return Array.isArray(l)?l.map(f):f(l)}}();l.filterProps=["sx"],t.Z=l},6936:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(9456),i=n(201);var a=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=(0,i.Z)();return n&&(e=n,0!==Object.keys(e).length)?n:t},s=(0,r.Z)();var o=function(){return a(arguments.length>0&&void 0!==arguments[0]?arguments[0]:s)}},1271:function(e,t){"use strict";var n=function(e){return e},r=function(){var e=n;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=n}}}();t.Z=r},114:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7219);function i(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},1921:function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){if(r){var i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}n.d(t,{Z:function(){return r}})},4246:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}n.d(t,{Z:function(){return r}})},4312:function(e,t,n){"use strict";function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];clearTimeout(t),t=setTimeout((function(){e.apply(r,a)}),n)}return r.clear=function(){clearTimeout(t)},r}n.d(t,{Z:function(){return r}})},3019:function(e,t,n){"use strict";n.d(t,{P:function(){return i},Z:function(){return s}});var r=n(7462);function i(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function a(e){if(!i(e))return e;var t={};return Object.keys(e).forEach((function(n){t[n]=a(e[n])})),t}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},o=n.clone?(0,r.Z)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?o[r]=s(e[r],t[r],n):n.clone?o[r]=i(t[r])?a(t[r]):t[r]:o[r]=t[r])})),o}},7219:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},2298:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1271),i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",a=i[t];return a?"".concat(n,"-").concat(a):"".concat(r.Z.generate(e),"-").concat(t)}},7430:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2298);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",i={};return t.forEach((function(t){i[t]=(0,r.Z)(e,t,n)})),i}},9081:function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{Z:function(){return r}})},3282:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9081);function i(e){return(0,r.Z)(e).defaultView||window}},9023:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7462);function i(e,t){var n=(0,r.Z)({},t);return Object.keys(e).forEach((function(a){if(a.toString().match(/^(components|slots)$/))n[a]=(0,r.Z)({},e[a],n[a]);else if(a.toString().match(/^(componentsProps|slotProps)$/)){var s=e[a]||{},o=t[a];n[a]={},o&&Object.keys(o)?s&&Object.keys(s)?(n[a]=(0,r.Z)({},o),Object.keys(s).forEach((function(e){n[a][e]=i(s[e],o[e])}))):n[a]=o:n[a]=s}else void 0===n[a]&&(n[a]=e[a])})),n}},9265:function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},2678:function(e,t,n){"use strict";var r=n(7313),i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;t.Z=i},2780:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7313),i=n(2678);function a(e){var t=r.useRef(e);return(0,i.Z)((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},7472:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7313),i=n(9265);function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((function(){return t.every((function(e){return null==e}))?null:function(e){t.forEach((function(t){(0,i.Z)(t,e)}))}}),t)}},3362:function(e,t,n){"use strict";var r;n.d(t,{Z:function(){return u}});var i=n(9439),a=n(7313),s=0;var o=(r||(r=n.t(a,2))).useId;function u(e){if(void 0!==o){var t=o();return null!=e?e:t}return function(e){var t=a.useState(e),n=(0,i.Z)(t,2),r=n[0],o=n[1],u=e||r;return a.useEffect((function(){null==r&&o("mui-".concat(s+=1))}),[r]),u}(e)}},3061:function(e,t,n){"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}t.Z=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}},7861:function(e,t,n){"use strict";var r=n(2535),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function u(e){return r.isMemo(e)?s:o[e.$$typeof]||i}o[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[r.Memo]=s;var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,d=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(d){var i=f(n);i&&i!==d&&e(t,i,r)}var s=c(n);h&&(s=s.concat(h(n)));for(var o=u(t),v=u(n),m=0;m<s.length;++m){var y=s[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!o||!o[y])){var g=p(n,y);try{l(t,y,g)}catch(_){}}}}return t}},229:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,T=n?Symbol.for("react.scope"):60119;function E(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case a:case o:case s:case f:return e;default:switch(e=e&&e.$$typeof){case l:case p:case m:case v:case u:return e;default:return t}}case i:return t}}}function x(e){return E(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=p,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=o,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return x(e)||E(e)===c},t.isConcurrentMode=x,t.isContextConsumer=function(e){return E(e)===l},t.isContextProvider=function(e){return E(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return E(e)===p},t.isFragment=function(e){return E(e)===a},t.isLazy=function(e){return E(e)===m},t.isMemo=function(e){return E(e)===v},t.isPortal=function(e){return E(e)===i},t.isProfiler=function(e){return E(e)===o},t.isStrictMode=function(e){return E(e)===s},t.isSuspense=function(e){return E(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===o||e===s||e===f||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===l||e.$$typeof===p||e.$$typeof===g||e.$$typeof===_||e.$$typeof===T||e.$$typeof===y)},t.typeOf=E},2535:function(e,t,n){"use strict";e.exports=n(229)},5056:function(e,t,n){var r=n(8416).default,i=n(6115).default,a=n(3515).default,s=n(1588).default,o=n(3808).default,u=n(4993).default,l=n(1589).default,c=n(861).default,h=n(7424).default,p=n(4704).default,f=n(6690).default,d=n(9728).default,v=n(1655).default,m=n(6389).default,y=n(3496).default;e.exports=function(){"use strict";var e,t,n;function g(r,i){if(e)if(t){var a="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",s={};e(s),n=i(s),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"})))}else t=i;else e=i}return g(["exports"],(function(e){var t,n,r,g="undefined"!=typeof self?self:{},_="2.13.0",T={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==t){var e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{t=null!={NODE_ENV:"production",PUBLIC_URL:"/IFCReactApp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDWFdP9aE8vAwyMG1jq6pc0_MHr6ItLk84",REACT_APP_FIREBASE_APP_ID:"1:54427550535:web:56f3c2daa707f1606e8262",REACT_APP_FIREBASE_AUTH_DOMAIN:"ifc-react-app.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"54427550535",REACT_APP_FIREBASE_PROJECT_ID:"ifc-react-app",REACT_APP_FIREBASE_STORAGE_BUCKET:"ifc-react-app.appspot.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoiYmltY2EiLCJhIjoiY2xmMXJ4ZGhrMGJhazN4bGg2YTAwZG5heSJ9.OQdD57WTOQigRXhxpjfaqA"}.API_URL_REGEX?new RegExp({NODE_ENV:"production",PUBLIC_URL:"/IFCReactApp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDWFdP9aE8vAwyMG1jq6pc0_MHr6ItLk84",REACT_APP_FIREBASE_APP_ID:"1:54427550535:web:56f3c2daa707f1606e8262",REACT_APP_FIREBASE_AUTH_DOMAIN:"ifc-react-app.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"54427550535",REACT_APP_FIREBASE_PROJECT_ID:"ifc-react-app",REACT_APP_FIREBASE_STORAGE_BUCKET:"ifc-react-app.appspot.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoiYmltY2EiLCJhIjoiY2xmMXJ4ZGhrMGJhazN4bGg2YTAwZG5heSJ9.OQdD57WTOQigRXhxpjfaqA"}.API_URL_REGEX):e}catch(g){t=e}}return t},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},E={supported:!1,testSupport:function(e){!x&&r&&(b?I(e):n=e)}},x=!1,b=!1;function I(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.isContextLost())return;E.supported=!0}catch(e){}e.deleteTexture(t),x=!0}g.document&&((r=g.document.createElement("img")).onload=function(){n&&I(n),n=null,b=!0},r.onerror=function(){x=!0,n=null},r.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var w="01",k=S;function S(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=r}S.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,r=0;r<8;r++){var i=this.sampleCurveX(n)-e;if(Math.abs(i)<t)return n;var a=this.sampleCurveDerivativeX(n);if(Math.abs(a)<1e-6)break;n-=i/a}var s=0,o=1;for(n=e,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-e)<t));r++)e>i?s=n:o=n,n=.5*(o-s)+s;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var R=C;function C(e,t){this.x=e,this.y=t}C.prototype={clone:function(){return new C(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},C.convert=function(e){return e instanceof C?e:Array.isArray(e)?new C(e[0],e[1]):e};var D=Math.PI/180,A=180/Math.PI;function O(e){return e*D}function N(e){return e*A}var M=[[0,0],[1,0],[1,1],[0,1]];function P(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function F(e,t,n,r){var i=new k(e,t,n,r);return function(e){return i.solve(e)}}var L=F(.25,.1,.25,1);function U(e,t,n){return Math.min(n,Math.max(t,e))}function Z(e,t,n){return(n=U((n-e)/(t-e),0,1))*n*(3-2*n)}function B(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function z(e,t,n){if(!e.length)return n(null,[]);var r=e.length,i=new Array(e.length),a=null;e.forEach((function(e,s){t(e,(function(e,t){e&&(a=e),i[s]=t,0==--r&&n(a,i)}))}))}function G(e){var t=[];for(var n in e)t.push(e[n]);return t}function H(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var s=a[i];for(var o in s)e[o]=s[o]}return e}var j=1;function V(){return j++}function W(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function Y(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function q(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function X(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function K(e,t){return-1!==e.indexOf(t,e.length-t.length)}function Q(e,t,n){var r={};for(var i in e)r[i]=t.call(n||this,e[i],i,e);return r}function J(e,t,n){var r={};for(var i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function $(e){return Array.isArray(e)?e.map($):"object"==typeof e&&e?Q(e,$):e}var ee={};function te(e){ee[e]||("undefined"!=typeof console&&console.warn(e),ee[e]=!0)}function ne(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function re(e){for(var t,n,r=0,i=0,a=e.length,s=a-1;i<a;s=i++)t=e[i],r+=((n=e[s]).x-t.x)*(t.y+n.y);return r}function ie(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function ae(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,n,r,i){var a=r||i;return t[n]=!a||a.toLowerCase(),""})),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}var se=null;function oe(e){if(null==se){var t=e.navigator?e.navigator.userAgent:null;se=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return se}function ue(e){try{var t=g[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function le(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}var ce,he,pe="mapbox-tiles",fe=500,de=50;function ve(){try{return g.caches}catch(e){}}function me(){ve()&&!ce&&(ce=g.caches.open(pe))}function ye(e){var t=e.indexOf("?");if(t<0)return e;var n=function(e){var t=e.indexOf("?");return t>0?e.slice(t+1).split("&"):[]}(e),r=n.filter((function(e){var t=e.split("=");return"language"===t[0]||"worldview"===t[0]}));return r.length?"".concat(e.slice(0,t),"?").concat(r.join("&")):e.slice(0,t)}var ge=1/0,_e={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(_e);var Te=function(e){v(n,e);var t=m(n);function n(e,r,i){var a;return f(this,n),401===r&&Ae(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),(a=t.call(this,e)).status=r,a.url=i,a}return d(n,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),n}(y(Error)),Ee=ie()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===g.location.protocol?g.parent:g).location.href},xe=function(e,t){if(!(/^file:/.test(n=e.url)||/^file:/.test(Ee())&&!/^\w+:/.test(n))){if(g.fetch&&g.Request&&g.AbortController&&g.Request.prototype.hasOwnProperty("signal"))return function(e,t){var n,r=new g.AbortController,i=new g.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:Ee(),signal:r.signal}),a=!1,s=!1,o=(n=i.url).indexOf("sku=")>0&&Ae(n);"json"===e.type&&i.headers.set("Accept","application/json");var u=function(n,r,a){if(!s){if(n&&"SecurityError"!==n.message&&te(n),r&&a)return l(r);var u=Date.now();g.fetch(i).then((function(n){if(n.ok){var r=o?n.clone():null;return l(n,r,u)}return t(new Te(n.statusText,n.status,e.url))})).catch((function(n){"AbortError"!==n.name&&t(new Error("".concat(n.message," ").concat(e.url)))}))}},l=function(n,r,o){("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((function(e){s||(r&&o&&function(e,t,n){if(me(),ce){var r={status:t.status,statusText:t.statusText,headers:new g.Headers};t.headers.forEach((function(e,t){return r.headers.set(t,e)}));var i=ae(t.headers.get("Cache-Control")||"");if(!i["no-store"]){i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString());var a=r.headers.get("Expires");a&&(new Date(a).getTime()-n<42e4||function(e,t){if(void 0===he)try{new Response(new ReadableStream),he=!0}catch(e){he=!1}he?t(e.body):e.blob().then(t)}(t,(function(t){var n=new g.Response(t,r);me(),ce&&ce.then((function(t){return t.put(ye(e.url),n)})).catch((function(e){return te(e.message)}))})))}}}(i,r,o),a=!0,t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(e){s||t(new Error(e.message))}))};return o?function(e,t){if(me(),!ce)return t(null);var n=ye(e.url);ce.then((function(e){e.match(n).then((function(r){var i=function(e){if(!e)return!1;var t=new Date(e.headers.get("Expires")||0),n=ae(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(r);e.delete(n),i&&e.put(n,r.clone()),t(null,r,i)})).catch(t)})).catch(t)}(i,u):u(null,null),{cancel:function(){s=!0,a||r.abort()}}}(e,t);if(ie()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(e,t){var n=new g.XMLHttpRequest;for(var r in n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer"),e.headers)n.setRequestHeader(r,e.headers[r]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===e.type)try{r=JSON.parse(n.response)}catch(e){return t(e)}t(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else t(new Te(n.statusText,n.status,e.url))},n.send(e.body),{cancel:function(){return n.abort()}}}(e,t)},be=function(e,t){return xe(H(e,{type:"arrayBuffer"}),t)};function Ie(e){var t=g.document.createElement("a");return t.href=e,t.protocol===g.document.location.protocol&&t.host===g.document.location.host}var we,ke,Se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";we=[],ke=0;var Re=function e(t,n){if(E.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),ke>=T.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:t,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return we.push(r),r}ke++;var i=!1,a=function(){if(!i)for(i=!0,ke--;we.length&&ke<T.MAX_PARALLEL_IMAGE_REQUESTS;){var t=we.shift(),n=t.requestParameters,r=t.callback;t.cancelled||(t.cancel=e(n,r).cancel)}},s=be(t,(function(e,t,r,i){a(),e?n(e):t&&(g.createImageBitmap?function(e,t){var n=new g.Blob([new Uint8Array(e)],{type:"image/png"});g.createImageBitmap(n).then((function(e){t(null,e)})).catch((function(e){t(new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(t,(function(e,t){return n(e,t,r,i)})):function(e,t){var n=new g.Image,r=g.URL;n.onload=function(){t(null,n),r.revokeObjectURL(n.src),n.onload=null,g.requestAnimationFrame((function(){n.src=Se}))},n.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var i=new g.Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?r.createObjectURL(i):Se}(t,(function(e,t){return n(e,t,r,i)})))}));return{cancel:function(){s.cancel(),a()}}},Ce="NO_ACCESS_TOKEN";function De(e){return 0===e.indexOf("mapbox:")}function Ae(e){return T.API_URL_REGEX.test(e)}function Oe(e){return T.API_CDN_URL_REGEX.test(e)}function Ne(e){return T.API_STYLE_REGEX.test(e)&&!Me(e)}function Me(e){return T.API_SPRITE_REGEX.test(e)}var Pe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Fe(e){var t=e.match(Pe);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Le(e){var t=e.params.length?"?".concat(e.params.join("&")):"";return"".concat(e.protocol,"://").concat(e.authority).concat(e.path).concat(t)}function Ue(e){if(!e)return null;var t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(g.atob(t[1]).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(e){return null}}var Ze=function(){function e(t){f(this,e),this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}return d(e,[{key:"getStorageKey",value:function(e){var t=Ue(T.ACCESS_TOKEN),n="";return n=t&&t.u?g.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))}))):T.ACCESS_TOKEN||"",e?"mapbox.eventData.".concat(e,":").concat(n):"mapbox.eventData:".concat(n)}},{key:"fetchEventData",value:function(){var e=ue("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var r=g.localStorage.getItem(t);r&&(this.eventData=JSON.parse(r));var i=g.localStorage.getItem(n);i&&(this.anonId=i)}catch(e){te("Unable to read from LocalStorage")}}},{key:"saveEventData",value:function(){var e=ue("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{g.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&g.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){te("Unable to write to LocalStorage")}}},{key:"processRequests",value:function(e){}},{key:"postEvent",value:function(e,t,n,r){var i=this;if(T.EVENTS_URL){var a=Fe(T.EVENTS_URL);a.params.push("access_token=".concat(r||T.ACCESS_TOKEN||""));var s={event:this.type,created:new Date(e).toISOString()},o=t?H(s,t):s,u={url:Le(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([o])};this.pendingRequest=function(e,t){return xe(H(e,{method:"POST"}),t)}(u,(function(e){i.pendingRequest=null,n(e),i.saveEventData(),i.processRequests(r)}))}}},{key:"queueRequest",value:function(e,t){this.queue.push(e),this.processRequests(t)}}]),e}(),Be=new(function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,"appUserTurnstile"))._customAccessToken=e,r}return d(n,[{key:"postTurnstileEvent",value:function(e,t){T.EVENTS_URL&&T.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return De(e)||Ae(e)}))&&this.queueRequest(Date.now(),t)}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=Ue(T.ACCESS_TOKEN),r=n?n.u:T.ACCESS_TOKEN,i=r!==this.eventData.tokenU;q(this.anonId)||(this.anonId=W(),i=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var s=new Date(this.eventData.lastSuccess),o=new Date(a),u=(a-this.eventData.lastSuccess)/864e5;i=i||u>=1||u<-1||s.getDate()!==o.getDate()}else i=!0;i?this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:w,"enabled.telemetry":!1,userId:this.anonId},(function(e){e||(t.eventData.lastSuccess=a,t.eventData.tokenU=r)}),e):this.processRequests()}}}]),n}(Ze)),ze=Be.postTurnstileEvent.bind(Be),Ge=new(function(e){v(n,e);var t=m(n);function n(){var e;return f(this,n),(e=t.call(this,"map.load")).success={},e.skuToken="",e}return d(n,[{key:"postMapLoadEvent",value:function(e,t,n,r){this.skuToken=t,this.errorCb=r,T.EVENTS_URL&&(n||T.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(Ce)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),q(this.anonId)||(this.anonId=W()),this.postEvent(i,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:w,skuToken:this.skuToken,userId:this.anonId},(function(e){e?t.errorCb(e):r&&(t.success[r]=!0)}),e))}}}]),n}(Ze)),He=Ge.postMapLoadEvent.bind(Ge),je=new(function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.call(this,"gljs.performance")}return d(n,[{key:"postPerformanceEvent",value:function(e,t){T.EVENTS_URL&&(e||T.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},e)}},{key:"processRequests",value:function(e){if(!this.pendingRequest&&0!==this.queue.length){var t,n=this.queue.shift(),r=n.timestamp,i=function(e){var t=g.performance.getEntriesByType("resource"),n=g.performance.getEntriesByType("mark"),r=function(e){var t={};if(e)for(var n in e)if("other"!==n){var r,i=p(e[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value,s="".concat(n,"ResolveRangeMin"),o="".concat(n,"ResolveRangeMax"),u="".concat(n,"RequestCount"),l="".concat(n,"RequestCachedCount");t[s]=Math.min(t[s]||1/0,a.startTime),t[o]=Math.max(t[o]||-1/0,a.responseEnd);var c=function(e){void 0===t[e]&&(t[e]=0),++t[e]};void 0!==a.transferSize&&0===a.transferSize&&c(l),c(u)}}catch(h){i.e(h)}finally{i.f()}}return t}(function(e,t){var n={};if(e){var r,i=p(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,s=t(a);void 0===n[s]&&(n[s]=[]),n[s].push(a)}}catch(o){i.e(o)}finally{i.f()}}return n}(t,Qe)),i=g.devicePixelRatio,a=g.navigator.connection||g.navigator.mozConnection||g.navigator.webkitConnection,s={counters:[],metadata:[],attributes:[]},o=function(e,t,n){null!=n&&e.push({name:t,value:n.toString()})};for(var u in r)o(s.counters,u,r[u]);if(e.interactionRange[0]!==1/0&&e.interactionRange[1]!==-1/0&&(o(s.counters,"interactionRangeMin",e.interactionRange[0]),o(s.counters,"interactionRangeMax",e.interactionRange[1])),n)for(var l=function(){var e=h[c],t=Xe[e],r=n.find((function(e){return e.name===t}));r&&o(s.counters,t,r.startTime)},c=0,h=Object.keys(Xe);c<h.length;c++)l();return o(s.counters,"visibilityHidden",e.visibilityHidden),o(s.attributes,"style",function(e){if(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value.name.split("?")[0];if(Ne(r)){var i=r.split("/").slice(-2);if(2===i.length)return"mapbox://styles/".concat(i[0],"/").concat(i[1])}}}catch(a){n.e(a)}finally{n.f()}}}(t)),o(s.attributes,"terrainEnabled",e.terrainEnabled?"true":"false"),o(s.attributes,"fogEnabled",e.fogEnabled?"true":"false"),o(s.attributes,"projection",e.projection),o(s.attributes,"zoom",e.zoom),o(s.metadata,"devicePixelRatio",i),o(s.metadata,"connectionEffectiveType",a?a.effectiveType:void 0),o(s.metadata,"navigatorUserAgent",g.navigator.userAgent),o(s.metadata,"screenWidth",g.screen.width),o(s.metadata,"screenHeight",g.screen.height),o(s.metadata,"windowWidth",g.innerWidth),o(s.metadata,"windowHeight",g.innerHeight),o(s.metadata,"mapWidth",e.width/i),o(s.metadata,"mapHeight",e.height/i),o(s.metadata,"webglRenderer",e.renderer),o(s.metadata,"webglVendor",e.vendor),o(s.metadata,"sdkVersion",_),o(s.metadata,"sdkIdentifier","mapbox-gl-js"),s}(n.performanceData),a=p(i.metadata);try{for(a.s();!(t=a.n()).done;)t.value}catch(c){a.e(c)}finally{a.f()}var s,o=p(i.counters);try{for(o.s();!(s=o.n()).done;)s.value}catch(c){o.e(c)}finally{o.f()}var u,l=p(i.attributes);try{for(l.s();!(u=l.n()).done;)u.value}catch(c){l.e(c)}finally{l.f()}this.postEvent(r,i,(function(){}),e)}}}]),n}(Ze)),Ve=je.postPerformanceEvent.bind(je),We=new(function(e){v(n,e);var t=m(n);function n(){var e;return f(this,n),(e=t.call(this,"map.auth")).success={},e.skuToken="",e}return d(n,[{key:"getSession",value:function(e,t,n,r){var i=this;if(T.API_URL&&T.SESSION_PATH){var a=Fe(T.API_URL+T.SESSION_PATH);a.params.push("sku=".concat(t||"")),a.params.push("access_token=".concat(r||T.ACCESS_TOKEN||""));var s={url:Le(a),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(e,t){return xe(H(e,{method:"GET"}),t)}(s,(function(e){i.pendingRequest=null,n(e),i.saveEventData(),i.processRequests(r)}))}}},{key:"getSessionAPI",value:function(e,t,n,r){this.skuToken=t,this.errorCb=r,T.SESSION_PATH&&T.API_URL&&(n||T.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(Ce)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||this.getSession(i,this.skuToken,(function(e){e?t.errorCb(e):r&&(t.success[r]=!0)}),e)}}}]),n}(Ze)),Ye=We.getSessionAPI.bind(We),qe=new Set,Xe={create:"create",load:"load",fullLoad:"fullLoad"},Ke={mark:function(e){g.performance.mark(e)},measure:function(e,t,n){g.performance.measure(e,t,n)}};function Qe(e){var t=e.name.split("?")[0];return Oe(t)&&t.includes("mapbox-gl.js")?"javascript":Oe(t)&&t.includes("mapbox-gl.css")?"css":function(e){return T.API_FONTS_REGEX.test(e)}(t)?"fontRange":Me(t)?"sprite":Ne(t)?"style":function(e){return T.API_TILEJSON_REGEX.test(e)}(t)?"tilejson":"other"}var Je,$e,et,tt,nt=g.performance;function rt(e){var t=e?e.url.toString():void 0;return nt.getEntriesByName(t)}var it={now:function(){return void 0!==et?et:g.performance.now()},setNow:function(e){et=e},restoreNow:function(){et=void 0},frame:function(e){var t=g.requestAnimationFrame(e);return{cancel:function(){return g.cancelAnimationFrame(t)}}},getImageData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.width,r=e.height;tt||(tt=g.document.createElement("canvas"));var i=tt.getContext("2d",{willReadFrequently:!0});if(!i)throw new Error("failed to create canvas 2d context");return(n>tt.width||r>tt.height)&&(tt.width=n,tt.height=r),i.clearRect(-t,-t,n+2*t,r+2*t),i.drawImage(e,0,0,n,r),i.getImageData(-t,-t,n+2*t,r+2*t)},resolveURL:function(e){return Je||(Je=g.document.createElement("a")),Je.href=e,Je.href},get devicePixelRatio(){return g.devicePixelRatio},get prefersReducedMotion(){return!!g.matchMedia&&(null==$e&&($e=g.matchMedia("(prefers-reduced-motion: reduce)")),$e.matches)}};function at(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function st(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var ot=d((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,e),H(this,n),this.type=t})),ut=function(e){v(n,e);var t=m(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(this,n),t.call(this,"error",H({error:e},r))}return d(n)}(ot),lt=function(){function e(){f(this,e)}return d(e,[{key:"on",value:function(e,t){return this._listeners=this._listeners||{},at(e,t,this._listeners),this}},{key:"off",value:function(e,t){return st(e,t,this._listeners),st(e,t,this._oneTimeListeners),this}},{key:"once",value:function(e,t){var n=this;return t?(this._oneTimeListeners=this._oneTimeListeners||{},at(e,t,this._oneTimeListeners),this):new Promise((function(t){return n.once(e,t)}))}},{key:"fire",value:function(e,t){"string"==typeof e&&(e=new ot(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;var r,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[],a=p(i);try{for(a.s();!(r=a.n()).done;)r.value.call(this,e)}catch(h){a.e(h)}finally{a.f()}var s,o=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[],u=p(o);try{for(u.s();!(s=u.n()).done;){var l=s.value;st(n,l,this._oneTimeListeners),l.call(this,e)}}catch(h){u.e(h)}finally{u.f()}var c=this._eventedParent;c&&(H(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),c.fire(e))}else e instanceof ut&&console.error(e.error);return this}},{key:"listens",value:function(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}},{key:"setEventedParent",value:function(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}]),e}(),ct=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ht(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var s=a[i];for(var o in s)e[o]=s[o]}return e}function pt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function ft(e){if(Array.isArray(e))return e.map(ft);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var n in e)t[n]=ft(e[n]);return t}return pt(e)}var dt=function(e){v(n,e);var t=m(n);function n(e,r){var i;return f(this,n),(i=t.call(this,r)).message=r,i.key=e,i}return d(n)}(y(Error)),vt=dt,mt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];f(this,e),this.parent=t,this.bindings={};var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=h(r.value,2),s=a[0],o=a[1];this.bindings[s]=o}}catch(u){i.e(u)}finally{i.f()}}return d(e,[{key:"concat",value:function(t){return new e(this,t)}},{key:"get",value:function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}},{key:"has",value:function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}]),e}(),yt=mt,gt={kind:"null"},_t={kind:"number"},Tt={kind:"string"},Et={kind:"boolean"},xt={kind:"color"},bt={kind:"object"},It={kind:"value"},wt={kind:"collator"},kt={kind:"formatted"},St={kind:"resolvedImage"};function Rt(e,t){return{kind:"array",itemType:e,N:t}}function Ct(e){if("array"===e.kind){var t=Ct(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}var Dt=[gt,_t,Tt,Et,xt,kt,bt,Rt(It),St];function At(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!At(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,r=Dt;n<r.length;n++)if(!At(r[n],t))return null}return"Expected ".concat(Ct(e)," but found ").concat(Ct(t)," instead.")}function Ot(e,t){return t.some((function(t){return t.kind===e.kind}))}function Nt(e,t){return t.some((function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e}))}var Mt,Pt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ft(e){return(e=Math.round(e))<0?0:e>255?255:e}function Lt(e){return Ft("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function Ut(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function Zt(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{Mt={}.parseCSSColor=function(e){var t,n=e.replace(/ /g,"").toLowerCase();if(n in Pt)return Pt[n].slice();if("#"===n[0])return 4===n.length?(t=parseInt(n.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===n.length&&(t=parseInt(n.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var a=n.substr(0,r),s=n.substr(r+1,i-(r+1)).split(","),o=1;switch(a){case"rgba":if(4!==s.length)return null;o=Ut(s.pop());case"rgb":return 3!==s.length?null:[Lt(s[0]),Lt(s[1]),Lt(s[2]),o];case"hsla":if(4!==s.length)return null;o=Ut(s.pop());case"hsl":if(3!==s.length)return null;var u=(parseFloat(s[0])%360+360)%360/360,l=Ut(s[1]),c=Ut(s[2]),h=c<=.5?c*(l+1):c+l-c*l,p=2*c-h;return[Ft(255*Zt(p,h,u+1/3)),Ft(255*Zt(p,h,u)),Ft(255*Zt(p,h,u-1/3)),o];default:return null}}return null}}catch(e){}var Bt=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;f(this,e),this.r=t,this.g=n,this.b=r,this.a=i}return d(e,[{key:"toString",value:function(){var e=this.toArray(),t=h(e,4),n=t[0],r=t[1],i=t[2],a=t[3];return"rgba(".concat(Math.round(n),",").concat(Math.round(r),",").concat(Math.round(i),",").concat(a,")")}},{key:"toArray",value:function(){var e=this.r,t=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]}},{key:"toArray01",value:function(){var e=this.r,t=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[e/r,t/r,n/r,r]}},{key:"toArray01PremultipliedAlpha",value:function(){return[this.r,this.g,this.b,this.a]}}],[{key:"parse",value:function(t){if(t){if(t instanceof e)return t;if("string"==typeof t){var n=Mt(t);return n?new e(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}}}}]),e}();Bt.black=new Bt(0,0,0,1),Bt.white=new Bt(1,1,1,1),Bt.transparent=new Bt(0,0,0,0),Bt.red=new Bt(1,0,0,1),Bt.blue=new Bt(0,0,1,1);var zt=Bt,Gt=function(){function e(t,n,r){f(this,e),this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return d(e,[{key:"compare",value:function(e,t){return this.collator.compare(e,t)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),e}(),Ht=d((function e(t,n,r,i,a){f(this,e),this.text=t.normalize?t.normalize():t,this.image=n,this.scale=r,this.fontStack=i,this.textColor=a})),jt=function(){function e(t){f(this,e),this.sections=t}return d(e,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(e){return e.text})).join("")}},{key:"serialize",value:function(){var e,t=["format"],n=p(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(i)}}}catch(a){n.e(a)}finally{n.f()}return t}}],[{key:"fromString",value:function(t){return new e([new Ht(t,null,null,null,null)])}},{key:"factory",value:function(t){return t instanceof e?t:e.fromString(t)}}]),e}(),Vt=function(){function e(t){f(this,e),this.name=t.name,this.available=t.available}return d(e,[{key:"toString",value:function(){return this.name}},{key:"serialize",value:function(){return["image",this.name]}}],[{key:"fromString",value:function(t){return t?new e({name:t,available:!1}):null}}]),e}();function Wt(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value [".concat([e,t,n,r].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function Yt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof zt)return!0;if(e instanceof Gt)return!0;if(e instanceof jt)return!0;if(e instanceof Vt)return!0;if(Array.isArray(e)){var t,n=p(e);try{for(n.s();!(t=n.n()).done;)if(!Yt(t.value))return!1}catch(i){n.e(i)}finally{n.f()}return!0}if("object"==typeof e){for(var r in e)if(!Yt(e[r]))return!1;return!0}return!1}function qt(e){if(null===e)return gt;if("string"==typeof e)return Tt;if("boolean"==typeof e)return Et;if("number"==typeof e)return _t;if(e instanceof zt)return xt;if(e instanceof Gt)return wt;if(e instanceof jt)return kt;if(e instanceof Vt)return St;if(Array.isArray(e)){var t,n,r=e.length,i=p(e);try{for(i.s();!(n=i.n()).done;){var a=qt(n.value);if(t){if(t===a)continue;t=It;break}t=a}}catch(s){i.e(s)}finally{i.f()}return Rt(t||It,r)}return bt}function Xt(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof zt||e instanceof jt||e instanceof Vt?e.toString():JSON.stringify(e)}var Kt=function(){function e(t,n){f(this,e),this.type=t,this.value=n}return d(e,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof zt?["rgba"].concat(this.value.toArray()):this.value instanceof jt?this.value.serialize():this.value}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!Yt(t[1]))return n.error("invalid value");var r=t[1],i=qt(r),a=n.expectedType;return"array"!==i.kind||0!==i.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(i=a),new e(i,r)}}]),e}(),Qt=Kt,Jt=function(){function e(t){f(this,e),this.name="ExpressionEvaluationError",this.message=t}return d(e,[{key:"toJSON",value:function(){return this.message}}]),e}(),$t={string:Tt,number:_t,boolean:Et,object:bt},en=function(){function e(t,n){f(this,e),this.type=t,this.args=n}return d(e,[{key:"evaluate",value:function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!At(this.type,qt(n)))return n;if(t===this.args.length-1)throw new Jt("Expected value to be of type ".concat(Ct(this.type),", but found ").concat(Ct(qt(n))," instead."))}return null}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=this.type,t=[e.kind];if("array"===e.kind){var n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);var r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r,i=1,a=t[0];if("array"===a){var s,o;if(t.length>2){var u=t[1];if("string"!=typeof u||!(u in $t)||"object"===u)return n.error('The item type argument of "array" must be one of string, number, boolean',1);s=$t[u],i++}else s=It;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);o=t[2],i++}r=Rt(s,o)}else r=$t[a];for(var l=[];i<t.length;i++){var c=n.parse(t[i],i,It);if(!c)return null;l.push(c)}return new e(r,l)}}]),e}(),tn=en,nn=function(){function e(t){f(this,e),this.type=kt,this.sections=t}return d(e,[{key:"evaluate",value:function(e){return new jt(this.sections.map((function(t){var n=t.content.evaluate(e);return qt(n)===St?new Ht("",n,null,null,null):new Ht(Xt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}},{key:"eachChild",value:function(e){var t,n=p(this.sections);try{for(n.s();!(t=n.n()).done;){var r=t.value;e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}}catch(i){n.e(i)}finally{n.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e,t=["format"],n=p(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),t.push(i)}}catch(a){n.e(a)}finally{n.f()}return t}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return n.error("First argument must be an image or text section.");for(var i=[],a=!1,s=1;s<=t.length-1;++s){var o=t[s];if(a&&"object"==typeof o&&!Array.isArray(o)){a=!1;var u=null;if(o["font-scale"]&&!(u=n.parse(o["font-scale"],1,_t)))return null;var l=null;if(o["text-font"]&&!(l=n.parse(o["text-font"],1,Rt(Tt))))return null;var c=null;if(o["text-color"]&&!(c=n.parse(o["text-color"],1,xt)))return null;var h=i[i.length-1];h.scale=u,h.font=l,h.textColor=c}else{var p=n.parse(t[s],1,It);if(!p)return null;var f=p.type.kind;if("string"!==f&&"value"!==f&&"null"!==f&&"resolvedImage"!==f)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,i.push({content:p,scale:null,font:null,textColor:null})}}return new e(i)}}]),e}(),rn=function(){function e(t){f(this,e),this.type=St,this.input=t}return d(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),n=Vt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["image",this.input.serialize()]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected two arguments.");var r=n.parse(t[1],1,Tt);return r?new e(r):n.error("No image name provided.")}}]),e}(),an={"to-boolean":Et,"to-color":xt,"to-number":_t,"to-string":Tt},sn=function(){function e(t,n){f(this,e),this.type=t,this.args=n}return d(e,[{key:"evaluate",value:function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){var t,n,r,i=p(this.args);try{for(i.s();!(r=i.n()).done;){if(t=r.value.evaluate(e),n=null,t instanceof zt)return t;if("string"==typeof t){var a=e.parseColor(t);if(a)return a}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):Wt(t[0],t[1],t[2],t[3])))return new zt(t[0]/255,t[1]/255,t[2]/255,t[3])}}catch(c){i.e(c)}finally{i.f()}throw new Jt(n||"Could not parse color from value '".concat("string"==typeof t?t:String(JSON.stringify(t)),"'"))}if("number"===this.type.kind){var s,o=null,u=p(this.args);try{for(u.s();!(s=u.n()).done;){if(null===(o=s.value.evaluate(e)))return 0;var l=Number(o);if(!isNaN(l))return l}}catch(c){u.e(c)}finally{u.f()}throw new Jt("Could not convert ".concat(JSON.stringify(o)," to number."))}return"formatted"===this.type.kind?jt.fromString(Xt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Vt.fromString(Xt(this.args[0].evaluate(e))):Xt(this.args[0].evaluate(e))}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new nn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new rn(this.args[0]).serialize();var e=["to-".concat(this.type.kind)];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return n.error("Expected one argument.");for(var i=an[r],a=[],s=1;s<t.length;s++){var o=n.parse(t[s],s,It);if(!o)return null;a.push(o)}return new e(i,a)}}]),e}(),on=sn,un=["Unknown","Point","LineString","Polygon"],ln=function(){function e(){f(this,e),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}return d(e,[{key:"id",value:function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?un[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"distanceFromCenter",value:function(){if(this.featureTileCoord&&this.featureDistanceData){var e=this.featureDistanceData.center,t=this.featureDistanceData.scale,n=this.featureTileCoord,r=n.x,i=n.y;return this.featureDistanceData.bearing[0]*(r*t-e[0])+this.featureDistanceData.bearing[1]*(i*t-e[1])}return 0}},{key:"parseColor",value:function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=zt.parse(e)),t}}]),e}(),cn=function(){function e(t,n,r,i){f(this,e),this.name=t,this.type=n,this._evaluate=r,this.args=i}return d(e,[{key:"evaluate",value:function(e){return this._evaluate(e,this.args)}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,n){var r,i=t[0],a=e.definitions[i];if(!a)return n.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0);var s,o=Array.isArray(a)?a[0]:a.type,u=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,l=u.filter((function(e){var n=h(e,1)[0];return!Array.isArray(n)||n.length===t.length-1})),f=null,d=p(l);try{for(d.s();!(s=d.n()).done;){var v=h(s.value,2),m=v[0],y=v[1];f=new Ln(n.registry,n.path,null,n.scope);for(var g=[],_=!1,T=1;T<t.length;T++){var E=t[T],x=Array.isArray(m)?m[T-1]:m.type,b=f.parse(E,1+g.length,x);if(!b){_=!0;break}g.push(b)}if(!_)if(Array.isArray(m)&&m.length!==g.length)f.error("Expected ".concat(m.length," arguments, but found ").concat(g.length," instead."));else{for(var I=0;I<g.length;I++){var w=Array.isArray(m)?m[I]:m.type,k=g[I];f.concat(I+1).checkSubtype(w,k.type)}if(0===f.errors.length)return new e(i,o,y,g)}}}catch(A){d.e(A)}finally{d.f()}if(1===l.length)(r=n.errors).push.apply(r,c(f.errors));else{for(var S=(l.length?l:u).map((function(e){var t;return t=h(e,1)[0],Array.isArray(t)?"(".concat(t.map(Ct).join(", "),")"):"(".concat(Ct(t.type),"...)")})).join(" | "),R=[],C=1;C<t.length;C++){var D=n.parse(t[C],1+R.length);if(!D)return null;R.push(Ct(D.type))}n.error("Expected arguments of type ".concat(S,", but found (").concat(R.join(", "),") instead."))}return null}},{key:"register",value:function(t,n){for(var r in e.definitions=n,n)t[r]=e}}]),e}(),hn=cn,pn=function(){function e(t,n,r){f(this,e),this.type=wt,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=n}return d(e,[{key:"evaluate",value:function(e){return new Gt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}},{key:"eachChild",value:function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected one argument.");var r=t[1];if("object"!=typeof r||Array.isArray(r))return n.error("Collator options argument must be an object.");var i=n.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Et);if(!i)return null;var a=n.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Et);if(!a)return null;var s=null;return r.locale&&!(s=n.parse(r.locale,1,Tt))?null:new e(i,a,s)}}]),e}(),fn=8192;function dn(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function vn(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function mn(e,t){var n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*fn),Math.round(r*i*fn)]}function yn(e,t,n){var r=e[0]-t[0],i=e[1]-t[1],a=e[0]-n[0],s=e[1]-n[1];return r*s-a*i==0&&r*a<=0&&i*s<=0}function gn(e,t){for(var n,r,i,a=!1,s=0,o=t.length;s<o;s++)for(var u=t[s],l=0,c=u.length;l<c-1;l++){if(yn(e,u[l],u[l+1]))return!1;(r=u[l])[1]>(n=e)[1]!=(i=u[l+1])[1]>n[1]&&n[0]<(i[0]-r[0])*(n[1]-r[1])/(i[1]-r[1])+r[0]&&(a=!a)}return a}function _n(e,t){for(var n=0;n<t.length;n++)if(gn(e,t[n]))return!0;return!1}function Tn(e,t,n,r){var i=r[0]-n[0],a=r[1]-n[1],s=(e[0]-n[0])*a-i*(e[1]-n[1]),o=(t[0]-n[0])*a-i*(t[1]-n[1]);return s>0&&o<0||s<0&&o>0}function En(e,t,n){var r,i,a,s,o,u,l,c=p(n);try{for(c.s();!(r=c.n()).done;)for(var h=r.value,f=0;f<h.length-1;++f)if(0!=(u=[(o=h[f+1])[0]-(s=h[f])[0],o[1]-s[1]])[0]*(l=[(a=t)[0]-(i=e)[0],a[1]-i[1]])[1]-u[1]*l[0]&&Tn(i,a,s,o)&&Tn(s,o,i,a))return!0}catch(d){c.e(d)}finally{c.f()}return!1}function xn(e,t){for(var n=0;n<e.length;++n)if(!gn(e[n],t))return!1;for(var r=0;r<e.length-1;++r)if(En(e[r],e[r+1],t))return!1;return!0}function bn(e,t){for(var n=0;n<t.length;n++)if(xn(e,t[n]))return!0;return!1}function In(e,t,n){for(var r=[],i=0;i<e.length;i++){for(var a=[],s=0;s<e[i].length;s++){var o=mn(e[i][s],n);dn(t,o),a.push(o)}r.push(a)}return r}function wn(e,t,n){for(var r=[],i=0;i<e.length;i++){var a=In(e[i],t,n);r.push(a)}return r}function kn(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){var i=.5*r,a=e[0]-n[0]>i?-r:n[0]-e[0]>i?r:0;0===a&&(a=e[0]-n[2]>i?-r:n[2]-e[0]>i?r:0),e[0]+=a}dn(t,e)}function Sn(e,t,n,r){var i=Math.pow(2,r.z)*fn,a=[r.x*fn,r.y*fn],s=[];if(!e)return s;var o,u=p(e);try{for(u.s();!(o=u.n()).done;){var l,c=o.value,h=p(c);try{for(h.s();!(l=h.n()).done;){var f=l.value,d=[f.x+a[0],f.y+a[1]];kn(d,t,n,i),s.push(d)}}catch(v){h.e(v)}finally{h.f()}}}catch(v){u.e(v)}finally{u.f()}return s}function Rn(e,t,n,r){var i=Math.pow(2,r.z)*fn,a=[r.x*fn,r.y*fn],s=[];if(!e)return s;var o,u,l=p(e);try{for(l.s();!(o=l.n()).done;){var c,h=o.value,f=[],d=p(h);try{for(d.s();!(c=d.n()).done;){var v=c.value,m=[v.x+a[0],v.y+a[1]];dn(t,m),f.push(m)}}catch(x){d.e(x)}finally{d.f()}s.push(f)}}catch(x){l.e(x)}finally{l.f()}if(t[2]-t[0]<=i/2){(u=t)[0]=u[1]=1/0,u[2]=u[3]=-1/0;var y,g=p(s);try{for(g.s();!(y=g.n()).done;){var _,T=y.value,E=p(T);try{for(E.s();!(_=E.n()).done;)kn(_.value,t,n,i)}catch(x){E.e(x)}finally{E.f()}}}catch(x){g.e(x)}finally{g.f()}}return s}var Cn=function(){function e(t,n){f(this,e),this.type=Et,this.geojson=t,this.geometries=n}return d(e,[{key:"evaluate",value:function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){var a=In(t.coordinates,r,i),s=Sn(e.geometry(),n,r,i);if(!vn(n,r))return!1;var o,u=p(s);try{for(u.s();!(o=u.n()).done;)if(!gn(o.value,a))return!1}catch(d){u.e(d)}finally{u.f()}}if("MultiPolygon"===t.type){var l=wn(t.coordinates,r,i),c=Sn(e.geometry(),n,r,i);if(!vn(n,r))return!1;var h,f=p(c);try{for(f.s();!(h=f.n()).done;)if(!_n(h.value,l))return!1}catch(d){f.e(d)}finally{f.f()}}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){var a=In(t.coordinates,r,i),s=Rn(e.geometry(),n,r,i);if(!vn(n,r))return!1;var o,u=p(s);try{for(u.s();!(o=u.n()).done;)if(!xn(o.value,a))return!1}catch(d){u.e(d)}finally{u.f()}}if("MultiPolygon"===t.type){var l=wn(t.coordinates,r,i),c=Rn(e.geometry(),n,r,i);if(!vn(n,r))return!1;var h,f=p(c);try{for(f.s();!(h=f.n()).done;)if(!bn(h.value,l))return!1}catch(d){f.e(d)}finally{f.f()}}return!0}(e,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(Yt(t[1])){var r=t[1];if("FeatureCollection"===r.type)for(var i=0;i<r.features.length;++i){var a=r.features[i].geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new e(r,r.features[i].geometry)}else if("Feature"===r.type){var s=r.geometry.type;if("Polygon"===s||"MultiPolygon"===s)return new e(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new e(r,r)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),e}(),Dn=Cn;function An(e){if(e instanceof hn){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Dn)return!1;var t=!0;return e.eachChild((function(e){t&&!An(e)&&(t=!1)})),t}function On(e){if(e instanceof hn&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!On(e)&&(t=!1)})),t}function Nn(e,t){if(e instanceof hn&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild((function(e){n&&!Nn(e,t)&&(n=!1)})),n}var Mn=function(){function e(t,n){f(this,e),this.type=n.type,this.name=t,this.boundExpression=n}return d(e,[{key:"evaluate",value:function(e){return this.boundExpression.evaluate(e)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(t,n){if(2!==t.length||"string"!=typeof t[1])return n.error("'var' expression requires exactly one string literal argument.");var r=t[1];return n.scope.has(r)?new e(r,n.scope.get(r)):n.error('Unknown variable "'.concat(r,'". Make sure "').concat(r,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),e}(),Pn=Mn,Fn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new yt,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];f(this,e),this.registry=t,this.path=n,this.key=n.map((function(e){return"[".concat(e,"]")})).join(""),this.scope=i,this.errors=a,this.expectedType=r}return d(e,[{key:"parse",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}},{key:"_parse",value:function(e,t){function n(e,t,n){return"assert"===n?new tn(t,[e]):"coerce"===n?new on(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=e[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found ".concat(typeof r,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var i=this.registry[r];if(i){var a=i.parse(e,this);if(!a)return null;if(this.expectedType){var s=this.expectedType,o=a.type;if("string"!==s.kind&&"number"!==s.kind&&"boolean"!==s.kind&&"object"!==s.kind&&"array"!==s.kind||"value"!==o.kind)if("color"!==s.kind&&"formatted"!==s.kind&&"resolvedImage"!==s.kind||"value"!==o.kind&&"string"!==o.kind){if(this.checkSubtype(s,o))return null}else a=n(a,s,t.typeAnnotation||"coerce");else a=n(a,s,t.typeAnnotation||"assert")}if(!(a instanceof Qt)&&"resolvedImage"!==a.type.kind&&Un(a)){var u=new ln;try{a=new Qt(a.type,a.evaluate(u))}catch(e){return this.error(e.message),null}}return a}return this.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}},{key:"concat",value:function(t,n,r){var i="number"==typeof t?this.path.concat(t):this.path,a=r?this.scope.concat(r):this.scope;return new e(this.registry,i,n||null,a,this.errors)}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i="".concat(this.key).concat(n.map((function(e){return"[".concat(e,"]")})).join(""));this.errors.push(new vt(i,e))}},{key:"checkSubtype",value:function(e,t){var n=At(e,t);return n&&this.error(n),n}}]),e}(),Ln=Fn;function Un(e){if(e instanceof Pn)return Un(e.boundExpression);if(e instanceof hn&&"error"===e.name)return!1;if(e instanceof pn)return!1;if(e instanceof Dn)return!1;var t=e instanceof on||e instanceof tn,n=!0;return e.eachChild((function(e){n=t?n&&Un(e):n&&e instanceof Qt})),!!n&&An(e)&&Nn(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Zn(e,t){for(var n,r,i=e.length-1,a=0,s=i,o=0;a<=s;)if(n=e[o=Math.floor((a+s)/2)],r=e[o+1],n<=t){if(o===i||t<r)return o;a=o+1}else{if(!(n>t))throw new Jt("Input is not a number.");s=o-1}return 0}var Bn=function(){function e(t,n,r){f(this,e),this.type=t,this.input=n,this.labels=[],this.outputs=[];var i,a=p(r);try{for(a.s();!(i=a.n()).done;){var s=h(i.value,2),o=s[0],u=s[1];this.labels.push(o),this.outputs.push(u)}}catch(l){a.e(l)}finally{a.f()}}return d(e,[{key:"evaluate",value:function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[Zn(t,r)].evaluate(e)}},{key:"eachChild",value:function(e){e(this.input);var t,n=p(this.outputs);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}],[{key:"parse",value:function(t,n){if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");var r=n.parse(t[1],1,_t);if(!r)return null;var i=[],a=null;n.expectedType&&"value"!==n.expectedType.kind&&(a=n.expectedType);for(var s=1;s<t.length;s+=2){var o=1===s?-1/0:t[s],u=t[s+1],l=s,c=s+1;if("number"!=typeof o)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=o)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var h=n.parse(u,c,a);if(!h)return null;a=a||h.type,i.push([o,h])}return new e(a,r,i)}}]),e}(),zn=Bn;function Gn(e,t,n){return e*(1-n)+t*n}var Hn=Object.freeze({__proto__:null,number:Gn,color:function(e,t,n){return new zt(Gn(e.r,t.r,n),Gn(e.g,t.g,n),Gn(e.b,t.b,n),Gn(e.a,t.a,n))},array:function(e,t,n){return e.map((function(e,r){return Gn(e,t[r],n)}))}}),jn=.95047,Vn=1.08883,Wn=4/29,Yn=6/29,qn=3*Yn*Yn,Xn=Math.PI/180,Kn=180/Math.PI;function Qn(e){return e>.008856451679035631?Math.pow(e,1/3):e/qn+Wn}function Jn(e){return e>Yn?e*e*e:qn*(e-Wn)}function $n(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function er(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function tr(e){var t=er(e.r),n=er(e.g),r=er(e.b),i=Qn((.4124564*t+.3575761*n+.1804375*r)/jn),a=Qn((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*a-16,a:500*(i-a),b:200*(a-Qn((.0193339*t+.119192*n+.9503041*r)/Vn)),alpha:e.a}}function nr(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*Jn(t),n=jn*Jn(n),r=Vn*Jn(r),new zt($n(3.2404542*n-1.5371385*t-.4985314*r),$n(-.969266*n+1.8760108*t+.041556*r),$n(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function rr(e,t,n){var r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var ir={forward:tr,reverse:nr,interpolate:function(e,t,n){return{l:Gn(e.l,t.l,n),a:Gn(e.a,t.a,n),b:Gn(e.b,t.b,n),alpha:Gn(e.alpha,t.alpha,n)}}},ar={forward:function(e){var t=tr(e),n=t.l,r=t.a,i=t.b,a=Math.atan2(i,r)*Kn;return{h:a<0?a+360:a,c:Math.sqrt(r*r+i*i),l:n,alpha:e.a}},reverse:function(e){var t=e.h*Xn,n=e.c;return nr({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:rr(e.h,t.h,n),c:Gn(e.c,t.c,n),l:Gn(e.l,t.l,n),alpha:Gn(e.alpha,t.alpha,n)}}},sr=Object.freeze({__proto__:null,lab:ir,hcl:ar}),or=function(){function e(t,n,r,i,a){f(this,e),this.type=t,this.operator=n,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];var s,o=p(a);try{for(o.s();!(s=o.n()).done;){var u=h(s.value,2),l=u[0],c=u[1];this.labels.push(l),this.outputs.push(c)}}catch(d){o.e(d)}finally{o.f()}}return d(e,[{key:"evaluate",value:function(t){var n=this.labels,r=this.outputs;if(1===n.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=n[0])return r[0].evaluate(t);var a=n.length;if(i>=n[a-1])return r[a-1].evaluate(t);var s=Zn(n,i),o=e.interpolationFactor(this.interpolation,i,n[s],n[s+1]),u=r[s].evaluate(t),l=r[s+1].evaluate(t);return"interpolate"===this.operator?Hn[this.type.kind.toLowerCase()](u,l,o):"interpolate-hcl"===this.operator?ar.reverse(ar.interpolate(ar.forward(u),ar.forward(l),o)):ir.reverse(ir.interpolate(ir.forward(u),ir.forward(l),o))}},{key:"eachChild",value:function(e){e(this.input);var t,n=p(this.outputs);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t}}],[{key:"interpolationFactor",value:function(e,t,n,r){var i=0;if("exponential"===e.name)i=ur(t,e.base,n,r);else if("linear"===e.name)i=ur(t,1,n,r);else if("cubic-bezier"===e.name){var a=e.controlPoints;i=new k(a[0],a[1],a[2],a[3]).solve(ur(t,1,n,r))}return i}},{key:"parse",value:function(t,n){var r=l(t),i=r[0],a=r[1],s=r[2],o=r.slice(3);if(!Array.isArray(a)||0===a.length)return n.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var u=a[1];if("number"!=typeof u)return n.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:u}}else{if("cubic-bezier"!==a[0])return n.error("Unknown interpolation type ".concat(String(a[0])),1,0);var c=a.slice(1);if(4!==c.length||c.some((function(e){return"number"!=typeof e||e<0||e>1})))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:c}}if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(s=n.parse(s,2,_t)))return null;var h=[],p=null;"interpolate-hcl"===i||"interpolate-lab"===i?p=xt:n.expectedType&&"value"!==n.expectedType.kind&&(p=n.expectedType);for(var f=0;f<o.length;f+=2){var d=o[f],v=o[f+1],m=f+3,y=f+4;if("number"!=typeof d)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',m);if(h.length&&h[h.length-1][0]>=d)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',m);var g=n.parse(v,y,p);if(!g)return null;p=p||g.type,h.push([d,g])}return"number"===p.kind||"color"===p.kind||"array"===p.kind&&"number"===p.itemType.kind&&"number"==typeof p.N?new e(p,i,a,s,h):n.error("Type ".concat(Ct(p)," is not interpolatable."))}}]),e}();function ur(e,t,n,r){var i=r-n,a=e-n;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}var lr=or,cr=function(){function e(t,n){f(this,e),this.type=t,this.args=n}return d(e,[{key:"evaluate",value:function(e){var t,n,r=null,i=0,a=p(this.args);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(i++,(r=s.evaluate(e))&&r instanceof Vt&&!r.available&&(t||(t=r),r=null,i===this.args.length))return t;if(null!==r)break}}catch(o){a.e(o)}finally{a.f()}return r}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=["coalesce"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expectected at least one argument.");var r=null,i=n.expectedType;i&&"value"!==i.kind&&(r=i);var a,s=[],o=p(t.slice(1));try{for(o.s();!(a=o.n()).done;){var u=a.value,l=n.parse(u,1+s.length,r,void 0,{typeAnnotation:"omit"});if(!l)return null;r=r||l.type,s.push(l)}}catch(h){o.e(h)}finally{o.f()}var c=i&&s.some((function(e){return At(i,e.type)}));return new e(c?It:r,s)}}]),e}(),hr=cr,pr=function(){function e(t,n){f(this,e),this.type=n.type,this.bindings=[].concat(t),this.result=n}return d(e,[{key:"evaluate",value:function(e){return this.result.evaluate(e)}},{key:"eachChild",value:function(e){var t,n=p(this.bindings);try{for(n.s();!(t=n.n()).done;)e(t.value[1])}catch(r){n.e(r)}finally{n.f()}e(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var e,t=["let"],n=p(this.bindings);try{for(n.s();!(e=n.n()).done;){var r=h(e.value,2),i=r[0],a=r[1];t.push(i,a.serialize())}}catch(s){n.e(s)}finally{n.f()}return t.push(this.result.serialize()),t}}],[{key:"parse",value:function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));for(var r=[],i=1;i<t.length-1;i+=2){var a=t[i];if("string"!=typeof a)return n.error("Expected string, but found ".concat(typeof a," instead."),i);if(/[^a-zA-Z0-9_]/.test(a))return n.error("Variable names must contain only alphanumeric characters or '_'.",i);var s=n.parse(t[i+1],i+1);if(!s)return null;r.push([a,s])}var o=n.parse(t[t.length-1],t.length-1,n.expectedType,r);return o?new e(r,o):null}}]),e}(),fr=pr,dr=function(){function e(t,n,r){f(this,e),this.type=t,this.index=n,this.input=r}return d(e,[{key:"evaluate",value:function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new Jt("Array index out of bounds: ".concat(t," < 0."));if(t>=n.length)throw new Jt("Array index out of bounds: ".concat(t," > ").concat(n.length-1,"."));if(t!==Math.floor(t))throw new Jt("Array index must be an integer, but found ".concat(t," instead."));return n[t]}},{key:"eachChild",value:function(e){e(this.index),e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,_t),i=n.parse(t[2],2,Rt(n.expectedType||It));return r&&i?new e(i.type.itemType,r,i):null}}]),e}(),vr=dr,mr=function(){function e(t,n){f(this,e),this.type=Et,this.needle=t,this.haystack=n}return d(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(null==n)return!1;if(!Nt(t,["boolean","string","number","null"]))throw new Jt("Expected first argument to be of type boolean, string, number or null, but found ".concat(Ct(qt(t))," instead."));if(!Nt(n,["string","array"]))throw new Jt("Expected second argument to be of type array or string, but found ".concat(Ct(qt(n))," instead."));return n.indexOf(t)>=0}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,It),i=n.parse(t[2],2,It);return r&&i?Ot(r.type,[Et,Tt,_t,gt,It])?new e(r,i):n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Ct(r.type)," instead")):null}}]),e}(),yr=mr,gr=function(){function e(t,n,r){f(this,e),this.type=_t,this.needle=t,this.haystack=n,this.fromIndex=r}return d(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Nt(t,["boolean","string","number","null"]))throw new Jt("Expected first argument to be of type boolean, string, number or null, but found ".concat(Ct(qt(t))," instead."));if(!Nt(n,["string","array"]))throw new Jt("Expected second argument to be of type array or string, but found ".concat(Ct(qt(n))," instead."));if(this.fromIndex){var r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,It),i=n.parse(t[2],2,It);if(!r||!i)return null;if(!Ot(r.type,[Et,Tt,_t,gt,It]))return n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Ct(r.type)," instead"));if(4===t.length){var a=n.parse(t[3],3,_t);return a?new e(r,i,a):null}return new e(r,i)}}]),e}(),_r=gr,Tr=function(){function e(t,n,r,i,a,s){f(this,e),this.inputType=t,this.type=n,this.input=r,this.cases=i,this.outputs=a,this.otherwise=s}return d(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);return(qt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}},{key:"eachChild",value:function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e,t=this,n=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),i=[],a={},s=p(r);try{for(s.s();!(e=s.n()).done;){var o=e.value,u=a[this.cases[o]];void 0===u?(a[this.cases[o]]=i.length,i.push([this.cases[o],[o]])):i[u][1].push(o)}}catch(y){s.e(y)}finally{s.f()}for(var l=function(e){return"number"===t.inputType.kind?Number(e):e},c=0,f=i;c<f.length;c++){var d=h(f[c],2),v=d[0],m=d[1];n.push(1===m.length?l(m[0]):m.map(l)),n.push(this.outputs[v].serialize())}return n.push(this.otherwise.serialize()),n}}],[{key:"parse",value:function(t,n){if(t.length<5)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return n.error("Expected an even number of arguments.");var r,i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var a={},s=[],o=2;o<t.length-1;o+=2){var u=t[o],l=t[o+1];Array.isArray(u)||(u=[u]);var c=n.concat(o);if(0===u.length)return c.error("Expected at least one branch label.");var h,f=p(u);try{for(f.s();!(h=f.n()).done;){var d=h.value;if("number"!=typeof d&&"string"!=typeof d)return c.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof d&&Math.floor(d)!==d)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,qt(d)))return null}else r=qt(d);if(void 0!==a[String(d)])return c.error("Branch labels must be unique.");a[String(d)]=s.length}}catch(g){f.e(g)}finally{f.f()}var v=n.parse(l,o,i);if(!v)return null;i=i||v.type,s.push(v)}var m=n.parse(t[1],1,It);if(!m)return null;var y=n.parse(t[t.length-1],t.length-1,i);return y?"value"!==m.type.kind&&n.concat(1).checkSubtype(r,m.type)?null:new e(r,i,m,a,s,y):null}}]),e}(),Er=Tr,xr=function(){function e(t,n,r){f(this,e),this.type=t,this.branches=n,this.otherwise=r}return d(e,[{key:"evaluate",value:function(e){var t,n=p(this.branches);try{for(n.s();!(t=n.n()).done;){var r=h(t.value,2),i=r[0],a=r[1];if(i.evaluate(e))return a.evaluate(e)}}catch(s){n.e(s)}finally{n.f()}return this.otherwise.evaluate(e)}},{key:"eachChild",value:function(e){var t,n=p(this.branches);try{for(n.s();!(t=n.n()).done;){var r=h(t.value,2),i=r[0],a=r[1];e(i),e(a)}}catch(s){n.e(s)}finally{n.f()}e(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(e){var t=h(e,2);return t[0],t[1].outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e=["case"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return n.error("Expected an odd number of arguments.");var r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var i=[],a=1;a<t.length-1;a+=2){var s=n.parse(t[a],a,Et);if(!s)return null;var o=n.parse(t[a+1],a+1,r);if(!o)return null;i.push([s,o]),r=r||o.type}var u=n.parse(t[t.length-1],t.length-1,r);return u?new e(r,i,u):null}}]),e}(),br=xr,Ir=function(){function e(t,n,r,i){f(this,e),this.type=t,this.input=n,this.beginIndex=r,this.endIndex=i}return d(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Nt(t,["string","array"]))throw new Jt("Expected first argument to be of type array or string, but found ".concat(Ct(qt(t))," instead."));if(this.endIndex){var r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)}},{key:"eachChild",value:function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,It),i=n.parse(t[2],2,_t);if(!r||!i)return null;if(!Ot(r.type,[Rt(It),Tt,It]))return n.error("Expected first argument to be of type array or string, but found ".concat(Ct(r.type)," instead"));if(4===t.length){var a=n.parse(t[3],3,_t);return a?new e(r.type,r,i,a):null}return new e(r.type,r,i)}}]),e}(),wr=Ir;function kr(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Sr(e,t,n,r){return 0===r.compare(t,n)}function Rr(e,t,n){var r="=="!==e&&"!="!==e;return function(){function i(e,t,n){f(this,i),this.type=Et,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return d(i,[{key:"evaluate",value:function(i){var a=this.lhs.evaluate(i),s=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var o=qt(a),u=qt(s);if(o.kind!==u.kind||"string"!==o.kind&&"number"!==o.kind)throw new Jt('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(o.kind,", ").concat(u.kind,") instead."))}if(this.collator&&!r&&this.hasUntypedArgument){var l=qt(a),c=qt(s);if("string"!==l.kind||"string"!==c.kind)return t(i,a,s)}return this.collator?n(i,a,s,this.collator.evaluate(i)):t(i,a,s)}},{key:"eachChild",value:function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var t=[e];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var n=e[0],a=t.parse(e[1],1,It);if(!a)return null;if(!kr(n,a.type))return t.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Ct(a.type),"'."));var s=t.parse(e[2],2,It);if(!s)return null;if(!kr(n,s.type))return t.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Ct(s.type),"'."));if(a.type.kind!==s.type.kind&&"value"!==a.type.kind&&"value"!==s.type.kind)return t.error("Cannot compare types '".concat(Ct(a.type),"' and '").concat(Ct(s.type),"'."));r&&("value"===a.type.kind&&"value"!==s.type.kind?a=new tn(s.type,[a]):"value"!==a.type.kind&&"value"===s.type.kind&&(s=new tn(a.type,[s])));var o=null;if(4===e.length){if("string"!==a.type.kind&&"string"!==s.type.kind&&"value"!==a.type.kind&&"value"!==s.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(o=t.parse(e[3],3,wt)))return null}return new i(a,s,o)}}]),i}()}var Cr=Rr("==",(function(e,t,n){return t===n}),Sr),Dr=Rr("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!Sr(0,t,n,r)})),Ar=Rr("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),Or=Rr(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),Nr=Rr("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),Mr=Rr(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0})),Pr=function(){function e(t,n,r,i,a,s){f(this,e),this.type=Tt,this.number=t,this.locale=n,this.currency=r,this.unit=i,this.minFractionDigits=a,this.maxFractionDigits=s}return d(e,[{key:"evaluate",value:function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}},{key:"eachChild",value:function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected two arguments.");var r=n.parse(t[1],1,_t);if(!r)return null;var i=t[2];if("object"!=typeof i||Array.isArray(i))return n.error("NumberFormat options argument must be an object.");var a=null;if(i.locale&&!(a=n.parse(i.locale,1,Tt)))return null;var s=null;if(i.currency&&!(s=n.parse(i.currency,1,Tt)))return null;var o=null;if(i.unit&&!(o=n.parse(i.unit,1,Tt)))return null;var u=null;if(i["min-fraction-digits"]&&!(u=n.parse(i["min-fraction-digits"],1,_t)))return null;var l=null;return i["max-fraction-digits"]&&!(l=n.parse(i["max-fraction-digits"],1,_t))?null:new e(r,a,s,o,u,l)}}]),e}(),Fr=function(){function e(t){f(this,e),this.type=_t,this.input=t}return d(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Jt("Expected value to be of type string or array, but found ".concat(Ct(qt(t))," instead."))}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e=["length"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected 1 argument, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?n.error("Expected argument of type string or array, but found ".concat(Ct(r.type)," instead.")):new e(r):null}}]),e}(),Lr={"==":Cr,"!=":Dr,">":Or,"<":Ar,">=":Mr,"<=":Nr,array:tn,at:vr,boolean:tn,case:br,coalesce:hr,collator:pn,format:nn,image:rn,in:yr,"index-of":_r,interpolate:lr,"interpolate-hcl":lr,"interpolate-lab":lr,length:Fr,let:fr,literal:Qt,match:Er,number:tn,"number-format":Pr,object:tn,slice:wr,step:zn,string:tn,"to-boolean":on,"to-color":on,"to-number":on,"to-string":on,var:Pn,within:Dn};function Ur(e,t){var n=h(t,4),r=n[0],i=n[1],a=n[2],s=n[3];r=r.evaluate(e),i=i.evaluate(e),a=a.evaluate(e);var o=s?s.evaluate(e):1,u=Wt(r,i,a,o);if(u)throw new Jt(u);return new zt(r/255*o,i/255*o,a/255*o,o)}function Zr(e,t){return e in t}function Br(e,t){var n=t[e];return void 0===n?null:n}function zr(e){return{type:e}}hn.register(Lr,{error:[{kind:"error"},[Tt],function(e,t){var n=h(t,1)[0];throw new Jt(n.evaluate(e))}],typeof:[Tt,[It],function(e,t){return Ct(qt(h(t,1)[0].evaluate(e)))}],"to-rgba":[Rt(_t,4),[xt],function(e,t){return h(t,1)[0].evaluate(e).toArray()}],rgb:[xt,[_t,_t,_t],Ur],rgba:[xt,[_t,_t,_t,_t],Ur],has:{type:Et,overloads:[[[Tt],function(e,t){return Zr(h(t,1)[0].evaluate(e),e.properties())}],[[Tt,bt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return Zr(r.evaluate(e),i.evaluate(e))}]]},get:{type:It,overloads:[[[Tt],function(e,t){return Br(h(t,1)[0].evaluate(e),e.properties())}],[[Tt,bt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return Br(r.evaluate(e),i.evaluate(e))}]]},"feature-state":[It,[Tt],function(e,t){return Br(h(t,1)[0].evaluate(e),e.featureState||{})}],properties:[bt,[],function(e){return e.properties()}],"geometry-type":[Tt,[],function(e){return e.geometryType()}],id:[It,[],function(e){return e.id()}],zoom:[_t,[],function(e){return e.globals.zoom}],pitch:[_t,[],function(e){return e.globals.pitch||0}],"distance-from-center":[_t,[],function(e){return e.distanceFromCenter()}],"heatmap-density":[_t,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[_t,[],function(e){return e.globals.lineProgress||0}],"sky-radial-progress":[_t,[],function(e){return e.globals.skyRadialProgress||0}],accumulated:[It,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[_t,zr(_t),function(e,t){var n,r=0,i=p(t);try{for(i.s();!(n=i.n()).done;)r+=n.value.evaluate(e)}catch(a){i.e(a)}finally{i.f()}return r}],"*":[_t,zr(_t),function(e,t){var n,r=1,i=p(t);try{for(i.s();!(n=i.n()).done;)r*=n.value.evaluate(e)}catch(a){i.e(a)}finally{i.f()}return r}],"-":{type:_t,overloads:[[[_t,_t],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)-i.evaluate(e)}],[[_t],function(e,t){return-h(t,1)[0].evaluate(e)}]]},"/":[_t,[_t,_t],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)/i.evaluate(e)}],"%":[_t,[_t,_t],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)%i.evaluate(e)}],ln2:[_t,[],function(){return Math.LN2}],pi:[_t,[],function(){return Math.PI}],e:[_t,[],function(){return Math.E}],"^":[_t,[_t,_t],function(e,t){var n=h(t,2),r=n[0],i=n[1];return Math.pow(r.evaluate(e),i.evaluate(e))}],sqrt:[_t,[_t],function(e,t){var n=h(t,1)[0];return Math.sqrt(n.evaluate(e))}],log10:[_t,[_t],function(e,t){var n=h(t,1)[0];return Math.log(n.evaluate(e))/Math.LN10}],ln:[_t,[_t],function(e,t){var n=h(t,1)[0];return Math.log(n.evaluate(e))}],log2:[_t,[_t],function(e,t){var n=h(t,1)[0];return Math.log(n.evaluate(e))/Math.LN2}],sin:[_t,[_t],function(e,t){var n=h(t,1)[0];return Math.sin(n.evaluate(e))}],cos:[_t,[_t],function(e,t){var n=h(t,1)[0];return Math.cos(n.evaluate(e))}],tan:[_t,[_t],function(e,t){var n=h(t,1)[0];return Math.tan(n.evaluate(e))}],asin:[_t,[_t],function(e,t){var n=h(t,1)[0];return Math.asin(n.evaluate(e))}],acos:[_t,[_t],function(e,t){var n=h(t,1)[0];return Math.acos(n.evaluate(e))}],atan:[_t,[_t],function(e,t){var n=h(t,1)[0];return Math.atan(n.evaluate(e))}],min:[_t,zr(_t),function(e,t){return Math.min.apply(Math,c(t.map((function(t){return t.evaluate(e)}))))}],max:[_t,zr(_t),function(e,t){return Math.max.apply(Math,c(t.map((function(t){return t.evaluate(e)}))))}],abs:[_t,[_t],function(e,t){var n=h(t,1)[0];return Math.abs(n.evaluate(e))}],round:[_t,[_t],function(e,t){var n=h(t,1)[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[_t,[_t],function(e,t){var n=h(t,1)[0];return Math.floor(n.evaluate(e))}],ceil:[_t,[_t],function(e,t){var n=h(t,1)[0];return Math.ceil(n.evaluate(e))}],"filter-==":[Et,[Tt,It],function(e,t){var n=h(t,2),r=n[0],i=n[1];return e.properties()[r.value]===i.value}],"filter-id-==":[Et,[It],function(e,t){var n=h(t,1)[0];return e.id()===n.value}],"filter-type-==":[Et,[Tt],function(e,t){var n=h(t,1)[0];return e.geometryType()===n.value}],"filter-<":[Et,[Tt,It],function(e,t){var n=h(t,2),r=n[0],i=n[1],a=e.properties()[r.value],s=i.value;return typeof a==typeof s&&a<s}],"filter-id-<":[Et,[It],function(e,t){var n=h(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[Et,[Tt,It],function(e,t){var n=h(t,2),r=n[0],i=n[1],a=e.properties()[r.value],s=i.value;return typeof a==typeof s&&a>s}],"filter-id->":[Et,[It],function(e,t){var n=h(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[Et,[Tt,It],function(e,t){var n=h(t,2),r=n[0],i=n[1],a=e.properties()[r.value],s=i.value;return typeof a==typeof s&&a<=s}],"filter-id-<=":[Et,[It],function(e,t){var n=h(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[Et,[Tt,It],function(e,t){var n=h(t,2),r=n[0],i=n[1],a=e.properties()[r.value],s=i.value;return typeof a==typeof s&&a>=s}],"filter-id->=":[Et,[It],function(e,t){var n=h(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[Et,[It],function(e,t){return h(t,1)[0].value in e.properties()}],"filter-has-id":[Et,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[Et,[Rt(Tt)],function(e,t){return h(t,1)[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Et,[Rt(It)],function(e,t){return h(t,1)[0].value.indexOf(e.id())>=0}],"filter-in-small":[Et,[Tt,Rt(It)],function(e,t){var n=h(t,2),r=n[0];return n[1].value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[Et,[Tt,Rt(It)],function(e,t){var n=h(t,2),r=n[0],i=n[1];return function(e,t,n,r){for(;n<=r;){var i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[r.value],i.value,0,i.value.length-1)}],all:{type:Et,overloads:[[[Et,Et],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)&&i.evaluate(e)}],[zr(Et),function(e,t){var n,r=p(t);try{for(r.s();!(n=r.n()).done;)if(!n.value.evaluate(e))return!1}catch(i){r.e(i)}finally{r.f()}return!0}]]},any:{type:Et,overloads:[[[Et,Et],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)||i.evaluate(e)}],[zr(Et),function(e,t){var n,r=p(t);try{for(r.s();!(n=r.n()).done;)if(n.value.evaluate(e))return!0}catch(i){r.e(i)}finally{r.f()}return!1}]]},"!":[Et,[Et],function(e,t){return!h(t,1)[0].evaluate(e)}],"is-supported-script":[Et,[Tt],function(e,t){var n=h(t,1)[0],r=e.globals&&e.globals.isSupportedScript;return!r||r(n.evaluate(e))}],upcase:[Tt,[Tt],function(e,t){return h(t,1)[0].evaluate(e).toUpperCase()}],downcase:[Tt,[Tt],function(e,t){return h(t,1)[0].evaluate(e).toLowerCase()}],concat:[Tt,zr(It),function(e,t){return t.map((function(t){return Xt(t.evaluate(e))})).join("")}],"resolved-locale":[Tt,[wt],function(e,t){return h(t,1)[0].evaluate(e).resolvedLocale()}]});var Gr=Lr;function Hr(e){return{result:"success",value:e}}function jr(e){return{result:"error",value:e}}function Vr(e){return"data-driven"===e["property-type"]}function Wr(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Yr(e){return!!e.expression&&e.expression.interpolated}function qr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Xr(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Kr(e){return e}function Qr(e,t){var n,r,i,a="color"===t.type,s=e.stops&&"object"==typeof e.stops[0][0],o=s||!(s||void 0!==e.property),u=e.type||(Yr(t)?"exponential":"interval");if(a&&((e=ht({},e)).stops&&(e.stops=e.stops.map((function(e){return[e[0],zt.parse(e[1])]}))),e.default=zt.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!sr[e.colorSpace])throw new Error("Unknown color space: ".concat(e.colorSpace));if("exponential"===u)n=ti;else if("interval"===u)n=ei;else if("categorical"===u){n=$r,r=Object.create(null);var l,c=p(e.stops);try{for(c.s();!(l=c.n()).done;){var h=l.value;r[h[0]]=h[1]}}catch(I){c.e(I)}finally{c.f()}i=typeof e.stops[0][0]}else{if("identity"!==u)throw new Error('Unknown function type "'.concat(u,'"'));n=ni}if(s){for(var f={},d=[],v=0;v<e.stops.length;v++){var m=e.stops[v],y=m[0].zoom;void 0===f[y]&&(f[y]={zoom:y,type:e.type,property:e.property,default:e.default,stops:[]},d.push(y)),f[y].stops.push([m[0].value,m[1]])}for(var g=[],_=0,T=d;_<T.length;_++){var E=T[_];g.push([f[E].zoom,Qr(f[E],t)])}var x={name:"linear"};return{kind:"composite",interpolationType:x,interpolationFactor:lr.interpolationFactor.bind(void 0,x),zoomStops:g.map((function(e){return e[0]})),evaluate:function(n,r){var i=n.zoom;return ti({stops:g,base:e.base},t,i).evaluate(i,r)}}}if(o){var b="exponential"===u?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:b,interpolationFactor:lr.interpolationFactor.bind(void 0,b),zoomStops:e.stops.map((function(e){return e[0]})),evaluate:function(a){var s=a.zoom;return n(e,t,s,r,i)}}}return{kind:"source",evaluate:function(a,s){var o=s&&s.properties?s.properties[e.property]:void 0;return void 0===o?Jr(e.default,t.default):n(e,t,o,r,i)}}}function Jr(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function $r(e,t,n,r,i){return Jr(typeof n===i?r[n]:void 0,e.default,t.default)}function ei(e,t,n){if("number"!==qr(n))return Jr(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var i=Zn(e.stops.map((function(e){return e[0]})),n);return e.stops[i][1]}function ti(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==qr(n))return Jr(e.default,t.default);var i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];var a=Zn(e.stops.map((function(e){return e[0]})),n),s=function(e,t,n,r){var i=r-n,a=e-n;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[a][0],e.stops[a+1][0]),o=e.stops[a][1],u=e.stops[a+1][1],l=Hn[t.type]||Kr;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=sr[e.colorSpace];l=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),s))}}return"function"==typeof o.evaluate?{evaluate:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=o.evaluate.apply(void 0,t),i=u.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==i)return l(r,i,s)}}:l(o,u,s)}function ni(e,t,n){return"color"===t.type?n=zt.parse(n):"formatted"===t.type?n=jt.fromString(n.toString()):"resolvedImage"===t.type?n=Vt.fromString(n.toString()):qr(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),Jr(n,e.default,t.default)}var ri=function(){function e(t,n){f(this,e),this.expression=t,this._warningHistory={},this._evaluator=new ln,this._defaultValue=n?function(e){return"color"===e.type&&(Xr(e.default)||Array.isArray(e.default))?new zt(0,0,0,0):"color"===e.type?zt.parse(e.default)||null:void 0===e.default?null:e.default}(n):null,this._enumValues=n&&"enum"===n.type?n.values:null}return d(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,a,s,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=o||null,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(e,t,n,r,i,a,s,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=o||null;try{var u=this.expression.evaluate(this._evaluator);if(null==u||"number"==typeof u&&u!=u)return this._defaultValue;if(this._enumValues&&!(u in this._enumValues))throw new Jt("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", "),", but found ").concat(JSON.stringify(u)," instead."));return u}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}]),e}();function ii(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Gr}function ai(e,t){var n=new Ln(Gr,[],t?function(e){var t={color:xt,string:Tt,number:_t,enum:Tt,boolean:Et,formatted:kt,resolvedImage:St};return"array"===e.type?Rt(t[e.value]||It,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Hr(new ri(r,t)):jr(n.errors)}var si=function(){function e(t,n){f(this,e),this.kind=t,this._styleExpression=n,this.isStateDependent="constant"!==t&&!On(n.expression)}return d(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,a)}},{key:"evaluate",value:function(e,t,n,r,i,a){return this._styleExpression.evaluate(e,t,n,r,i,a)}}]),e}(),oi=function(){function e(t,n,r,i){f(this,e),this.kind=t,this.zoomStops=r,this._styleExpression=n,this.isStateDependent="camera"!==t&&!On(n.expression),this.interpolationType=i}return d(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,a)}},{key:"evaluate",value:function(e,t,n,r,i,a){return this._styleExpression.evaluate(e,t,n,r,i,a)}},{key:"interpolationFactor",value:function(e,t,n){return this.interpolationType?lr.interpolationFactor(this.interpolationType,e,t,n):0}}]),e}();function ui(e,t){if("error"===(e=ai(e,t)).result)return e;var n=e.value.expression,r=An(n);if(!r&&!Vr(t))return jr([new vt("","data expressions not supported")]);var i=Nn(n,["zoom","pitch","distance-from-center"]);if(!i&&!Wr(t))return jr([new vt("","zoom expressions not supported")]);var a=ci(n);return a||i?a instanceof vt?jr([a]):a instanceof lr&&!Yr(t)?jr([new vt("",'"interpolate" expressions cannot be used with this property')]):Hr(a?new oi(r?"camera":"composite",e.value,a.labels,a instanceof lr?a.interpolation:void 0):new si(r?"constant":"source",e.value)):jr([new vt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var li=function(){function e(t,n){f(this,e),this._parameters=t,this._specification=n,ht(this,Qr(this._parameters,this._specification))}return d(e,null,[{key:"deserialize",value:function(t){return new e(t._parameters,t._specification)}},{key:"serialize",value:function(e){return{_parameters:e._parameters,_specification:e._specification}}}]),e}();function ci(e){var t=null;if(e instanceof fr)t=ci(e.result);else if(e instanceof hr){var n,r=p(e.args);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t=ci(i))break}}catch(a){r.e(a)}finally{r.f()}}else(e instanceof zn||e instanceof lr)&&e.input instanceof hn&&"zoom"===e.input.name&&(t=e);return t instanceof vt||e.eachChild((function(e){var n=ci(e);n instanceof vt?t=n:!t&&n?t=new vt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new vt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}var hi=d((function e(t,n,r,i){f(this,e),this.message=(t?"".concat(t,": "):"")+r,i&&(this.identifier=i),null!=n&&n.__line__&&(this.line=n.__line__)}));function pi(e){var t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},a=e.style,s=e.styleSpec,o=[],u=qr(n);if("object"!==u)return[new hi(t,n,"object expected, ".concat(u," found"))];for(var l in n){var c=l.split(".")[0],h=r[c]||r["*"],p=void 0;i[c]?p=i[c]:r[c]?p=Wi:i["*"]?p=i["*"]:r["*"]&&(p=Wi),p?o=o.concat(p({key:(t?"".concat(t,"."):t)+l,value:n[l],valueSpec:h,style:a,styleSpec:s,object:n,objectKey:l},n)):o.push(new hi(t,n[l],'unknown property "'.concat(l,'"')))}for(var f in r)i[f]||r[f].required&&void 0===r[f].default&&void 0===n[f]&&o.push(new hi(t,n,'missing required property "'.concat(f,'"')));return o}function fi(e){var t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,a=e.key,s=e.arrayElementValidator||Wi;if("array"!==qr(t))return[new hi(a,t,"array expected, ".concat(qr(t)," found"))];if(n.length&&t.length!==n.length)return[new hi(a,t,"array length ".concat(n.length," expected, length ").concat(t.length," found"))];if(n["min-length"]&&t.length<n["min-length"])return[new hi(a,t,"array length at least ".concat(n["min-length"]," expected, length ").concat(t.length," found"))];var o={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};i.$version<7&&(o.function=n.function),"object"===qr(n.value)&&(o=n.value);for(var u=[],l=0;l<t.length;l++)u=u.concat(s({array:t,arrayIndex:l,value:t[l],valueSpec:o,style:r,styleSpec:i,key:"".concat(a,"[").concat(l,"]")}));return u}function di(e){var t=e.key,n=e.value,r=e.valueSpec,i=qr(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new hi(t,n,"number expected, ".concat(i," found"))];if("minimum"in r){var a=r.minimum;if("array"===qr(r.minimum)&&(a=r.minimum[e.arrayIndex]),n<a)return[new hi(t,n,"".concat(n," is less than the minimum value ").concat(a))]}if("maximum"in r){var s=r.maximum;if("array"===qr(r.maximum)&&(s=r.maximum[e.arrayIndex]),n>s)return[new hi(t,n,"".concat(n," is greater than the maximum value ").concat(s))]}return[]}function vi(e){var t,n,r,i=e.valueSpec,a=pt(e.value.type),s={},o="categorical"!==a&&void 0===e.value.property,u=!o,l="array"===qr(e.value.stops)&&"array"===qr(e.value.stops[0])&&"object"===qr(e.value.stops[0][0]),c=pi({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===a)return[new hi(e.key,e.value,'identity function may not have a "stops" property')];var t=[],n=e.value;return t=t.concat(fi({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===qr(n)&&0===n.length&&t.push(new hi(e.key,n,"array must have at least one stop")),t},default:function(e){return Wi({key:e.key,value:e.value,valueSpec:i,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===a&&o&&c.push(new hi(e.key,e.value,'missing required property "property"')),"identity"===a||e.value.stops||c.push(new hi(e.key,e.value,'missing required property "stops"')),"exponential"===a&&e.valueSpec.expression&&!Yr(e.valueSpec)&&c.push(new hi(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(u&&!Vr(e.valueSpec)?c.push(new hi(e.key,e.value,"property functions not supported")):o&&!Wr(e.valueSpec)&&c.push(new hi(e.key,e.value,"zoom functions not supported"))),"categorical"!==a&&!l||void 0!==e.value.property||c.push(new hi(e.key,e.value,'"property" property is required')),c;function h(e){var t=[],a=e.value,o=e.key;if("array"!==qr(a))return[new hi(o,a,"array expected, ".concat(qr(a)," found"))];if(2!==a.length)return[new hi(o,a,"array length 2 expected, length ".concat(a.length," found"))];if(l){if("object"!==qr(a[0]))return[new hi(o,a,"object expected, ".concat(qr(a[0])," found"))];if(void 0===a[0].zoom)return[new hi(o,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new hi(o,a,"object stop key must have value")];var u=pt(a[0].zoom);if("number"!=typeof u)return[new hi(o,a[0].zoom,"stop zoom values must be numbers")];if(r&&r>u)return[new hi(o,a[0].zoom,"stop zoom values must appear in ascending order")];u!==r&&(r=u,n=void 0,s={}),t=t.concat(pi({key:"".concat(o,"[0]"),value:a[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:di,value:p}}))}else t=t.concat(p({key:"".concat(o,"[0]"),value:a[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},a));return ii(ft(a[1]))?t.concat([new hi("".concat(o,"[1]"),a[1],"expressions are not allowed in function stops.")]):t.concat(Wi({key:"".concat(o,"[1]"),value:a[1],valueSpec:i,style:e.style,styleSpec:e.styleSpec}))}function p(e,r){var o=qr(e.value),u=pt(e.value),l=null!==e.value?e.value:r;if(t){if(o!==t)return[new hi(e.key,l,"".concat(o," stop domain type must match previous stop domain type ").concat(t))]}else t=o;if("number"!==o&&"string"!==o&&"boolean"!==o&&"number"!=typeof u&&"string"!=typeof u&&"boolean"!=typeof u)return[new hi(e.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==o&&"categorical"!==a){var c="number expected, ".concat(o," found");return Vr(i)&&void 0===a&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new hi(e.key,l,c)]}return"categorical"!==a||"number"!==o||"number"==typeof u&&isFinite(u)&&Math.floor(u)===u?"categorical"!==a&&"number"===o&&"number"==typeof u&&"number"==typeof n&&void 0!==n&&u<n?[new hi(e.key,l,"stop domain values must appear in ascending order")]:(n=u,"categorical"===a&&u in s?[new hi(e.key,l,"stop domain values must be unique")]:(s[u]=!0,[])):[new hi(e.key,l,"integer expected, found ".concat(String(u)))]}}function mi(e){var t=("property"===e.expressionContext?ui:ai)(ft(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new hi("".concat(e.key).concat(t.key),e.value,t.message)}));var n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new hi(e.key,e.value,'Invalid data expression for "'.concat(e.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===e.expressionContext&&"layout"===e.propertyType&&!On(n))return[new hi(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return yi(n,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Nn(n,["zoom","feature-state"]))return[new hi(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!An(n))return[new hi(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function yi(e,t){var n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression){var r,i=p(t.valueSpec.expression.parameters);try{for(i.s();!(r=i.n()).done;){var a=r.value;n.delete(a)}}catch(o){i.e(o)}finally{i.f()}}if(0===n.size)return[];var s=[];return e instanceof hn&&n.has(e.name)?[new hi(t.key,t.value,'["'.concat(e.name,'"] expression is not supported in a filter for a ').concat(t.object.type," layer with id: ").concat(t.object.id))]:(e.eachChild((function(e){s.push.apply(s,c(yi(e,t)))})),s)}function gi(e){var t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(pt(n))&&i.push(new hi(t,n,"expected one of [".concat(r.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(r.values).indexOf(pt(n))&&i.push(new hi(t,n,"expected one of [".concat(Object.keys(r.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),i}function _i(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":var t,n=p(e.slice(1));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!_i(r)&&"boolean"!=typeof r)return!1}}catch(i){n.e(i)}finally{n.f()}return!0;default:return!0}}function Ti(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill";if(null==e)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};_i(e)||(e=Si(e));var n=e,r=!0;try{r=function(e){if(!bi(e))return e;var t=ft(e);return xi(t),t=Ei(t)}(n)}catch(e){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(n,null,2),"\n        "))}var i=ct["filter_".concat(t)],a=ai(r,i),s=null;if("error"===a.result)throw new Error(a.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));s=function(e,t,n){return a.value.evaluate(e,t,{},n)};var o=null,u=null;if(r!==n){var l=ai(n,i);if("error"===l.result)throw new Error(l.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));o=function(e,t,n,r,i){return l.value.evaluate(e,t,{},n,void 0,void 0,r,i)},u=!An(l.value.expression)}return{filter:s,dynamicFilter:o||void 0,needGeometry:ki(r),needFeature:!!u}}function Ei(e){if(!Array.isArray(e))return e;var t=function(e){if(Ii.has(e[0]))for(var t=1;t<e.length;t++)if(bi(e[t]))return!0;return e}(e);return!0===t?t:t.map((function(e){return Ei(e)}))}function xi(e){var t=!1,n=[];if("case"===e[0]){for(var r=1;r<e.length-1;r+=2)t=t||bi(e[r]),n.push(e[r+1]);n.push(e[e.length-1])}else if("match"===e[0]){t=t||bi(e[1]);for(var i=2;i<e.length-1;i+=2)n.push(e[i+1]);n.push(e[e.length-1])}else if("step"===e[0]){t=t||bi(e[1]);for(var a=1;a<e.length-1;a+=2)n.push(e[a+1])}t&&(e.length=0,e.push.apply(e,["any"].concat(n)));for(var s=1;s<e.length;s++)xi(e[s])}function bi(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;for(var t,n=1;n<e.length;n++)if(bi(e[n]))return!0;return!1}var Ii=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function wi(e,t){return e<t?-1:e>t?1:0}function ki(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var t=1;t<e.length;t++)if(ki(e[t]))return!0;return!1}function Si(e){if(!e)return!0;var t,n=e[0];return e.length<=1?"any"!==n:"=="===n?Ri(e[1],e[2],"=="):"!="===n?Ai(Ri(e[1],e[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Ri(e[1],e[2],n):"any"===n?(t=e.slice(1),["any"].concat(t.map(Si))):"all"===n?["all"].concat(e.slice(1).map(Si)):"none"===n?["all"].concat(e.slice(1).map(Si).map(Ai)):"in"===n?Ci(e[1],e.slice(2)):"!in"===n?Ai(Ci(e[1],e.slice(2))):"has"===n?Di(e[1]):"!has"===n?Ai(Di(e[1])):"within"!==n||e}function Ri(e,t,n){switch(e){case"$type":return["filter-type-".concat(n),t];case"$id":return["filter-id-".concat(n),t];default:return["filter-".concat(n),e,t]}}function Ci(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(wi)]]:["filter-in-small",e,["literal",t]]}}function Di(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Ai(e){return["!",e]}function Oi(e){return _i(ft(e.value))?mi(ht({},e,{expressionContext:"filter",valueSpec:e.styleSpec["filter_".concat(e.layerType||"fill")]})):Ni(e)}function Ni(e){var t=e.value,n=e.key;if("array"!==qr(t))return[new hi(n,t,"array expected, ".concat(qr(t)," found"))];var r,i=e.styleSpec,a=[];if(t.length<1)return[new hi(n,t,"filter array must have at least 1 element")];switch(a=a.concat(gi({key:"".concat(n,"[0]"),value:t[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),pt(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===pt(t[1])&&a.push(new hi(n,t,'"$type" cannot be use with operator "'.concat(t[0],'"')));case"==":case"!=":3!==t.length&&a.push(new hi(n,t,'filter array for operator "'.concat(t[0],'" must have 3 elements')));case"in":case"!in":t.length>=2&&"string"!==(r=qr(t[1]))&&a.push(new hi("".concat(n,"[1]"),t[1],"string expected, ".concat(r," found")));for(var s=2;s<t.length;s++)r=qr(t[s]),"$type"===pt(t[1])?a=a.concat(gi({key:"".concat(n,"[").concat(s,"]"),value:t[s],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&a.push(new hi("".concat(n,"[").concat(s,"]"),t[s],"string, number, or boolean expected, ".concat(r," found")));break;case"any":case"all":case"none":for(var o=1;o<t.length;o++)a=a.concat(Ni({key:"".concat(n,"[").concat(o,"]"),value:t[o],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=qr(t[1]),2!==t.length?a.push(new hi(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"string"!==r&&a.push(new hi("".concat(n,"[1]"),t[1],"string expected, ".concat(r," found")));break;case"within":r=qr(t[1]),2!==t.length?a.push(new hi(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"object"!==r&&a.push(new hi("".concat(n,"[1]"),t[1],"object expected, ".concat(r," found")))}return a}function Mi(e,t){var n=e.key,r=e.style,i=e.styleSpec,a=e.value,s=e.objectKey,o=i["".concat(t,"_").concat(e.layerType)];if(!o)return[];var u=s.match(/^(.*)-transition$/);if("paint"===t&&u&&o[u[1]]&&o[u[1]].transition)return Wi({key:n,value:a,valueSpec:i.transition,style:r,styleSpec:i});var l,c=e.valueSpec||o[s];if(!c)return[new hi(n,a,'unknown property "'.concat(s,'"'))];if("string"===qr(a)&&Vr(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(a)))return[new hi(n,a,'"'.concat(s,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(l[1])," }`."))];var h=[];return"symbol"===e.layerType&&("text-field"===s&&r&&!r.glyphs&&h.push(new hi(n,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&Xr(ft(a))&&"identity"===pt(a.type)&&h.push(new hi(n,a,'"text-font" does not support identity functions'))),h.concat(Wi({key:e.key,value:a,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:s}))}function Pi(e){return Mi(e,"paint")}function Fi(e){return Mi(e,"layout")}function Li(e){var t=[],n=e.value,r=e.key,i=e.style,a=e.styleSpec;n.type||n.ref||t.push(new hi(r,n,'either "type" or "ref" is required'));var s,o=pt(n.type),u=pt(n.ref);if(n.id)for(var l=pt(n.id),c=0;c<e.arrayIndex;c++){var h=i.layers[c];pt(h.id)===l&&t.push(new hi(r,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(h.id.__line__)))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(e){e in n&&t.push(new hi(r,n[e],'"'.concat(e,'" is prohibited for ref layers')))})),i.layers.forEach((function(e){pt(e.id)===u&&(s=e)})),s?s.ref?t.push(new hi(r,n.ref,"ref cannot reference another ref layer")):o=pt(s.type):"string"==typeof u&&t.push(new hi(r,n.ref,'ref layer "'.concat(u,'" not found')));else if("background"!==o&&"sky"!==o)if(n.source){var p=i.sources&&i.sources[n.source],f=p&&pt(p.type);p?"vector"===f&&"raster"===o?t.push(new hi(r,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster"===f&&"raster"!==o?t.push(new hi(r,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==f||n["source-layer"]?"raster-dem"===f&&"hillshade"!==o?t.push(new hi(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==o||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===f&&p.lineMetrics||t.push(new hi(r,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):t.push(new hi(r,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):t.push(new hi(r,n.source,'source "'.concat(n.source,'" not found')))}else t.push(new hi(r,n,'missing required property "source"'));return t=t.concat(pi({key:r,value:n,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Wi({key:"".concat(r,".type"),value:n.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:function(e){return Oi(ht({layerType:o},e))},layout:function(e){return pi({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Fi(ht({layerType:o},e))}}})},paint:function(e){return pi({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Pi(ht({layerType:o},e))}}})}}})),t}function Ui(e){var t=e.value,n=e.key,r=qr(t);return"string"!==r?[new hi(n,t,"string expected, ".concat(r," found"))]:[]}var Zi={promoteId:function(e){var t=e.key,n=e.value;if("string"===qr(n))return Ui({key:t,value:n});var r=[];for(var i in n)r.push.apply(r,c(Ui({key:"".concat(t,".").concat(i),value:n[i]})));return r}};function Bi(e){var t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new hi(n,t,'"type" is required')];var a,s=pt(t.type);switch(s){case"vector":case"raster":case"raster-dem":return a=pi({key:n,value:t,valueSpec:r["source_".concat(s.replace("-","_"))],style:e.style,styleSpec:r,objectElementValidators:Zi});case"geojson":if(a=pi({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Zi}),t.cluster)for(var o in t.clusterProperties){var u,l,p=h(t.clusterProperties[o],2),f=p[0],d=p[1],v="string"==typeof f?[f,["accumulated"],["get",o]]:f;(u=a).push.apply(u,c(mi({key:"".concat(n,".").concat(o,".map"),value:d,expressionContext:"cluster-map"}))),(l=a).push.apply(l,c(mi({key:"".concat(n,".").concat(o,".reduce"),value:v,expressionContext:"cluster-reduce"})))}return a;case"video":return pi({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return pi({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new hi(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return gi({key:"".concat(n,".type"),value:t.type,valueSpec:{values:zi(r)},style:i,styleSpec:r})}}function zi(e){return e.source.reduce((function(t,n){var r=e[n];return"enum"===r.type.type&&(t=t.concat(Object.keys(r.type.values))),t}),[])}function Gi(e){var t=e.value,n=e.styleSpec,r=n.light,i=e.style,a=[],s=qr(t);if(void 0===t)return a;if("object"!==s)return a=a.concat([new hi("light",t,"object expected, ".concat(s," found"))]);for(var o in t){var u=o.match(/^(.*)-transition$/);a=a.concat(u&&r[u[1]]&&r[u[1]].transition?Wi({key:o,value:t[o],valueSpec:n.transition,style:i,styleSpec:n}):r[o]?Wi({key:o,value:t[o],valueSpec:r[o],style:i,styleSpec:n}):[new hi(o,t[o],'unknown property "'.concat(o,'"'))])}return a}function Hi(e){var t=e.value,n=e.key,r=e.style,i=e.styleSpec,a=i.terrain,s=[],o=qr(t);if(void 0===t)return s;if("object"!==o)return s=s.concat([new hi("terrain",t,"object expected, ".concat(o," found"))]);for(var u in t){var l=u.match(/^(.*)-transition$/);s=s.concat(l&&a[l[1]]&&a[l[1]].transition?Wi({key:u,value:t[u],valueSpec:i.transition,style:r,styleSpec:i}):a[u]?Wi({key:u,value:t[u],valueSpec:a[u],style:r,styleSpec:i}):[new hi(u,t[u],'unknown property "'.concat(u,'"'))])}if(t.source){var c=r.sources&&r.sources[t.source],h=c&&pt(c.type);c?"raster-dem"!==h&&s.push(new hi(n,t.source,"terrain cannot be used with a source of type ".concat(String(h),', it only be used with a "raster-dem" source type'))):s.push(new hi(n,t.source,'source "'.concat(t.source,'" not found')))}else s.push(new hi(n,t,'terrain is missing required property "source"'));return s}function ji(e){var t=e.value,n=e.style,r=e.styleSpec,i=r.fog,a=[],s=qr(t);if(void 0===t)return a;if("object"!==s)return a=a.concat([new hi("fog",t,"object expected, ".concat(s," found"))]);for(var o in t){var u=o.match(/^(.*)-transition$/);a=a.concat(u&&i[u[1]]&&i[u[1]].transition?Wi({key:o,value:t[o],valueSpec:r.transition,style:n,styleSpec:r}):i[o]?Wi({key:o,value:t[o],valueSpec:i[o],style:n,styleSpec:r}):[new hi(o,t[o],'unknown property "'.concat(o,'"'))])}return a}var Vi={"*":function(){return[]},array:fi,boolean:function(e){var t=e.value,n=e.key,r=qr(t);return"boolean"!==r?[new hi(n,t,"boolean expected, ".concat(r," found"))]:[]},number:di,color:function(e){var t=e.key,n=e.value,r=qr(n);return"string"!==r?[new hi(t,n,"color expected, ".concat(r," found"))]:null===Mt(n)?[new hi(t,n,'color expected, "'.concat(n,'" found'))]:[]},enum:gi,filter:Oi,function:vi,layer:Li,object:pi,source:Bi,light:Gi,terrain:Hi,fog:ji,string:Ui,formatted:function(e){return 0===Ui(e).length?[]:mi(e)},resolvedImage:function(e){return 0===Ui(e).length?[]:mi(e)},projection:function(e){var t=e.value,n=e.styleSpec,r=n.projection,i=e.style,a=[],s=qr(t);if("object"===s)for(var o in t)a=a.concat(Wi({key:o,value:t[o],valueSpec:r[o],style:i,styleSpec:n}));else"string"!==s&&(a=a.concat([new hi("projection",t,"object or string expected, ".concat(s," found"))]));return a}};function Wi(e){var t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&Xr(pt(t))?vi(e):n.expression&&ii(ft(t))?mi(e):n.type&&Vi[n.type]?Vi[n.type](e):pi(ht({},e,{valueSpec:n.type?r[n.type]:n}))}function Yi(e){var t=e.value,n=e.key,r=Ui(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new hi(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new hi(n,t,'"glyphs" url must include a "{range}" token'))),r}function qi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;return Qi(Wi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Yi,"*":function(){return[]}}}))}var Xi=function(e){return Qi(Pi(e))},Ki=function(e){return Qi(Fi(e))};function Qi(e){return e.slice().sort((function(e,t){return e.line&&t.line?e.line-t.line:0}))}function Ji(e,t){var n=!1;if(t&&t.length){var r,i=p(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.fire(new ut(new Error(a.message))),n=!0}}catch(s){i.e(s)}finally{i.f()}}return n}var $i=ea;function ea(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(var a=0;a<this.d*this.d;a++){var s=i[3+a],o=i[3+a+1];r.push(s===o?null:i.subarray(s,o))}var u=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var l=0;l<this.d*this.d;l++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var c=n/t*e;this.min=-c,this.max=e+c}ea.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},ea.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ea.prototype._insertCell=function(e,t,n,r,i,a){this.cells[i].push(a)},ea.prototype.query=function(e,t,n,r,i){var a=this.min,s=this.max;if(e<=a&&t<=a&&s<=n&&s<=r&&!i)return Array.prototype.slice.call(this.keys);var o=[];return this._forEachCell(e,t,n,r,this._queryCell,o,{},i),o},ea.prototype._queryCell=function(e,t,n,r,i,a,s,o){var u=this.cells[i];if(null!==u)for(var l=this.keys,c=this.bboxes,h=0;h<u.length;h++){var p=u[h];if(void 0===s[p]){var f=4*p;(o?o(c[f+0],c[f+1],c[f+2],c[f+3]):e<=c[f+2]&&t<=c[f+3]&&n>=c[f+0]&&r>=c[f+1])?(s[p]=!0,a.push(l[p])):s[p]=!1}}},ea.prototype._forEachCell=function(e,t,n,r,i,a,s,o){for(var u=this._convertToCellCoord(e),l=this._convertToCellCoord(t),c=this._convertToCellCoord(n),h=this._convertToCellCoord(r),p=u;p<=c;p++)for(var f=l;f<=h;f++){var d=this.d*f+p;if((!o||o(this._convertFromCellCoord(p),this._convertFromCellCoord(f),this._convertFromCellCoord(p+1),this._convertFromCellCoord(f+1)))&&i.call(this,e,t,n,r,d,a,s,o))return}},ea.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},ea.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},ea.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=t,s=0;s<e.length;s++){var o=e[s];i[3+s]=a,i.set(o,a),a+=o.length}return i[3+e.length]=a,i.set(this.keys,a),i[3+e.length+1]=a+=this.keys.length,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer};var ta={};function na(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),ta[t]={klass:e,omit:n.omit||[]}}for(var ra in na(Object,"Object"),$i.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},$i.deserialize=function(e){return new $i(e.buffer)},Object.defineProperty($i,"name",{value:"Grid"}),na($i,"Grid"),na(zt,"Color"),na(Error,"Error"),na(Te,"AJAXError"),na(Vt,"ResolvedImage"),na(li,"StylePropertyFunction"),na(ri,"StyleExpression",{omit:["_evaluator"]}),na(oi,"ZoomDependentExpression"),na(si,"ZoomConstantExpression"),na(hn,"CompoundExpression",{omit:["_evaluate"]}),Gr)ta[Gr[ra]._classRegistryKey]||na(Gr[ra],"Expression".concat(ra));function ia(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function aa(e){return g.ImageBitmap&&e instanceof g.ImageBitmap}function sa(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(ia(e)||aa(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof g.ImageData)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){var r,i=[],a=p(e);try{for(a.s();!(r=a.n()).done;){var s=r.value;i.push(sa(s,t))}}catch(h){a.e(h)}finally{a.f()}return i}if("object"==typeof e){var o=e.constructor,u=o._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class ".concat(u));var l=o.serialize?o.serialize(e,t):{};if(!o.serialize){for(var c in e)e.hasOwnProperty(c)&&(ta[u].omit.indexOf(c)>=0||(l[c]=sa(e[c],t)));e instanceof Error&&(l.message=e.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(l.$name=u),l}throw new Error("can't serialize object of type "+typeof e)}function oa(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||ia(e)||aa(e)||ArrayBuffer.isView(e)||e instanceof g.ImageData)return e;if(Array.isArray(e))return e.map(oa);if("object"==typeof e){var t=e.$name||"Object",n=ta[t].klass;if(!n)throw new Error("can't deserialize unregistered class ".concat(t));if(n.deserialize)return n.deserialize(e);for(var r=Object.create(n.prototype),i=0,a=Object.keys(e);i<a.length;i++){var s=a[i];"$name"!==s&&(r[s]=oa(e[s]))}return r}throw new Error("can't deserialize object of type "+typeof e)}var ua=function(e){return e>=1536&&e<=1791},la=function(e){return e>=1872&&e<=1919},ca=function(e){return e>=2208&&e<=2303},ha=function(e){return e>=11904&&e<=12031},pa=function(e){return e>=12032&&e<=12255},fa=function(e){return e>=12272&&e<=12287},da=function(e){return e>=12288&&e<=12351},va=function(e){return e>=12352&&e<=12447},ma=function(e){return e>=12448&&e<=12543},ya=function(e){return e>=12544&&e<=12591},ga=function(e){return e>=12704&&e<=12735},_a=function(e){return e>=12736&&e<=12783},Ta=function(e){return e>=12784&&e<=12799},Ea=function(e){return e>=12800&&e<=13055},xa=function(e){return e>=13056&&e<=13311},ba=function(e){return e>=13312&&e<=19903},Ia=function(e){return e>=19968&&e<=40959},wa=function(e){return e>=40960&&e<=42127},ka=function(e){return e>=42128&&e<=42191},Sa=function(e){return e>=44032&&e<=55215},Ra=function(e){return e>=63744&&e<=64255},Ca=function(e){return e>=64336&&e<=65023},Da=function(e){return e>=65040&&e<=65055},Aa=function(e){return e>=65072&&e<=65103},Oa=function(e){return e>=65104&&e<=65135},Na=function(e){return e>=65136&&e<=65279},Ma=function(e){return e>=65280&&e<=65519};function Pa(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;)if(Ua(t.value.charCodeAt(0)))return!0}catch(r){n.e(r)}finally{n.f()}return!1}function Fa(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;)if(!La(t.value.charCodeAt(0)))return!1}catch(r){n.e(r)}finally{n.f()}return!0}function La(e){return!(ua(e)||la(e)||ca(e)||Ca(e)||Na(e))}function Ua(e){return!(746!==e&&747!==e&&(e<4352||!(ga(e)||ya(e)||Aa(e)&&!(e>=65097&&e<=65103)||Ra(e)||xa(e)||ha(e)||_a(e)||!(!da(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||ba(e)||Ia(e)||Ea(e)||function(e){return e>=12592&&e<=12687}(e)||function(e){return e>=43360&&e<=43391}(e)||function(e){return e>=55216&&e<=55295}(e)||function(e){return e>=4352&&e<=4607}(e)||Sa(e)||va(e)||fa(e)||function(e){return e>=12688&&e<=12703}(e)||pa(e)||Ta(e)||ma(e)&&12540!==e||!(!Ma(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Oa(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||function(e){return e>=5120&&e<=5759}(e)||function(e){return e>=6320&&e<=6399}(e)||Da(e)||function(e){return e>=19904&&e<=19967}(e)||wa(e)||ka(e))))}function Za(e){return!(Ua(e)||function(e){return!!(function(e){return e>=128&&e<=255}(e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||function(e){return e>=8192&&e<=8303}(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||function(e){return e>=8448&&e<=8527}(e)||function(e){return e>=8528&&e<=8591}(e)||function(e){return e>=8960&&e<=9215}(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||function(e){return e>=9216&&e<=9279}(e)&&9251!==e||function(e){return e>=9280&&e<=9311}(e)||function(e){return e>=9312&&e<=9471}(e)||function(e){return e>=9632&&e<=9727}(e)||function(e){return e>=9728&&e<=9983}(e)&&!(e>=9754&&e<=9759)||function(e){return e>=11008&&e<=11263}(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||da(e)||ma(e)||function(e){return e>=57344&&e<=63743}(e)||Aa(e)||Oa(e)||Ma(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Ba(e){return e>=1424&&e<=2303||Ca(e)||Na(e)}function za(e,t){return!(!t&&Ba(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||function(e){return e>=6016&&e<=6143}(e))}function Ga(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;)if(Ba(t.value.charCodeAt(0)))return!0}catch(r){n.e(r)}finally{n.f()}return!1}var Ha="deferred",ja="loading",Va="loaded",Wa=null,Ya="unavailable",qa=null,Xa=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Ya="error"),Wa&&Wa(e)};function Ka(){Qa.fire(new ot("pluginStateChange",{pluginStatus:Ya,pluginURL:qa}))}var Qa=new lt,Ja=function(){return Ya},$a=function(){if(Ya!==Ha||!qa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ya=ja,Ka(),qa&&be({url:qa},(function(e){e?Xa(e):(Ya=Va,Ka())}))},es={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ya===Va||null!=es.applyArabicShaping},isLoading:function(){return Ya===ja},setState:function(e){Ya=e.pluginStatus,qa=e.pluginURL},isParsed:function(){return null!=es.applyArabicShaping&&null!=es.processBidirectionalText&&null!=es.processStyledBidirectionalText},getPluginURL:function(){return qa}},ts=function(){function e(t,n){f(this,e),this.zoom=t,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.transition=n.transition,this.pitch=n.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}return d(e,[{key:"isSupportedScript",value:function(e){return function(e,t){var n,r=p(e);try{for(r.s();!(n=r.n()).done;)if(!za(n.value.charCodeAt(0),t))return!1}catch(i){r.e(i)}finally{r.f()}return!0}(e,es.isLoaded())}}]),e}(),ns=function(){function e(t,n){f(this,e),this.property=t,this.value=n,this.expression=function(e,t){if(Xr(e))return new li(e,t);if(ii(e)){var n=ui(e,t);if("error"===n.result)throw new Error(n.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));return n.value}var r=e;return"string"==typeof e&&"color"===t.type&&(r=zt.parse(e)),{kind:"constant",evaluate:function(){return r}}}(void 0===n?t.specification.default:n,t.specification)}return d(e,[{key:"isDataDriven",value:function(){return"source"===this.expression.kind||"composite"===this.expression.kind}},{key:"possiblyEvaluate",value:function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}]),e}(),rs=function(){function e(t){f(this,e),this.property=t,this.value=new ns(t,void 0)}return d(e,[{key:"transitioned",value:function(e,t){return new as(this.property,this.value,t,H({},e.transition,this.transition),e.now)}},{key:"untransitioned",value:function(){return new as(this.property,this.value,null,{},0)}}]),e}(),is=function(){function e(t){f(this,e),this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}return d(e,[{key:"getValue",value:function(e){return $(this._values[e].value.value)}},{key:"setValue",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new rs(this._values[e].property)),this._values[e].value=new ns(this._values[e].property,null===t?void 0:$(t))}},{key:"getTransition",value:function(e){return $(this._values[e].transition)}},{key:"setTransition",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new rs(this._values[e].property)),this._values[e].transition=$(t)||void 0}},{key:"serialize",value:function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i);var a=this.getTransition(r);void 0!==a&&(e["".concat(r,"-transition")]=a)}return e}},{key:"transitioned",value:function(e,t){for(var n=new ss(this._properties),r=0,i=Object.keys(this._values);r<i.length;r++){var a=i[r];n._values[a]=this._values[a].transitioned(e,t._values[a])}return n}},{key:"untransitioned",value:function(){for(var e=new ss(this._properties),t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t];e._values[r]=this._values[r].untransitioned()}return e}}]),e}(),as=function(){function e(t,n,r,i,a){f(this,e);var s=i.delay||0,o=i.duration||0;a=a||0,this.property=t,this.value=n,this.begin=a+s,this.end=this.begin+o,t.specification.transition&&(i.delay||i.duration)&&(this.prior=r)}return d(e,[{key:"possiblyEvaluate",value:function(e,t,n){var r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),a=this.prior;if(a){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return a.possiblyEvaluate(e,t,n);var s=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e,t,n),i,P(s))}return i}}]),e}(),ss=function(){function e(t){f(this,e),this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}return d(e,[{key:"possiblyEvaluate",value:function(e,t,n){for(var r=new ls(this._properties),i=0,a=Object.keys(this._values);i<a.length;i++){var s=a[i];r._values[s]=this._values[s].possiblyEvaluate(e,t,n)}return r}},{key:"hasTransition",value:function(){for(var e=0,t=Object.keys(this._values);e<t.length;e++){var n=t[e];if(this._values[n].prior)return!0}return!1}}]),e}(),os=function(){function e(t){f(this,e),this._properties=t,this._values=Object.create(t.defaultPropertyValues)}return d(e,[{key:"getValue",value:function(e){return $(this._values[e].value)}},{key:"setValue",value:function(e,t){this._values[e]=new ns(this._values[e].property,null===t?void 0:$(t))}},{key:"serialize",value:function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i)}return e}},{key:"possiblyEvaluate",value:function(e,t,n){for(var r=new ls(this._properties),i=0,a=Object.keys(this._values);i<a.length;i++){var s=a[i];r._values[s]=this._values[s].possiblyEvaluate(e,t,n)}return r}}]),e}(),us=function(){function e(t,n,r){f(this,e),this.property=t,this.value=n,this.parameters=r}return d(e,[{key:"isConstant",value:function(){return"constant"===this.value.kind}},{key:"constantOr",value:function(e){return"constant"===this.value.kind?this.value.value:e}},{key:"evaluate",value:function(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)}}]),e}(),ls=function(){function e(t){f(this,e),this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}return d(e,[{key:"get",value:function(e){return this._values[e]}}]),e}(),cs=function(){function e(t){f(this,e),this.specification=t}return d(e,[{key:"possiblyEvaluate",value:function(e,t){return e.expression.evaluate(t)}},{key:"interpolate",value:function(e,t,n){var r=Hn[this.specification.type];return r?r(e,t,n):e}}]),e}(),hs=function(){function e(t,n){f(this,e),this.specification=t,this.overrides=n}return d(e,[{key:"possiblyEvaluate",value:function(e,t,n,r){return new us(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)}},{key:"interpolate",value:function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new us(this,{kind:"constant",value:void 0},e.parameters);var r=Hn[this.specification.type];return r?new us(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e}},{key:"evaluate",value:function(e,t,n,r,i,a){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,a)}}]),e}(),ps=function(){function e(t){f(this,e),this.specification=t}return d(e,[{key:"possiblyEvaluate",value:function(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)}},{key:"interpolate",value:function(){return!1}}]),e}(),fs=d((function e(t){f(this,e),this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];var n=new ts(0,{});for(var r in t){var i=t[r];i.specification.overridable&&this.overridableProperties.push(r);var a=this.defaultPropertyValues[r]=new ns(i,void 0),s=this.defaultTransitionablePropertyValues[r]=new rs(i);this.defaultTransitioningPropertyValues[r]=s.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=a.possiblyEvaluate(n)}}));function ds(e,t){return 256*(e=U(Math.floor(e),0,255))+U(Math.floor(t),0,255)}na(hs,"DataDrivenProperty"),na(cs,"DataConstantProperty"),na(ps,"ColorRampProperty");var vs={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ms=d((function e(t,n){f(this,e),this._structArray=t,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8})),ys=function(){function e(){f(this,e),this.isTransferred=!1,this.capacity=-1,this.resize(0)}return d(e,[{key:"_trim",value:function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}},{key:"clear",value:function(){this.length=0}},{key:"resize",value:function(e){this.reserve(e),this.length=e}},{key:"reserve",value:function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}},{key:"_refreshViews",value:function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}},{key:"destroy",value:function(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}],[{key:"serialize",value:function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}},{key:"deserialize",value:function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}}]),e}();function gs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=0;return{members:e.map((function(e){var i=vs[e.type].BYTES_PER_ELEMENT,a=n=_s(n,Math.max(t,i)),s=e.components||1;return r=Math.max(r,i),n+=i*s,{name:e.name,type:e.type,components:s,offset:a}})),size:_s(n,Math.max(r,t)),alignment:t}}function _s(e,t){return Math.ceil(e/t)*t}var Ts=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e}}]),n}(ys);Ts.prototype.bytesPerElement=4,na(Ts,"StructArrayLayout2i4");var Es=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e}}]),n}(ys);Es.prototype.bytesPerElement=6,na(Es,"StructArrayLayout3i6");var xs=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=4*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.int16[a+2]=r,this.int16[a+3]=i,e}}]),n}(ys);xs.prototype.bytesPerElement=8,na(xs,"StructArrayLayout4i8");var bs=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,s){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i,a,s)}},{key:"emplace",value:function(e,t,n,r,i,a,s,o){var u=6*e,l=12*e,c=3*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.uint8[l+4]=r,this.uint8[l+5]=i,this.uint8[l+6]=a,this.uint8[l+7]=s,this.float32[c+2]=o,e}}]),n}(ys);bs.prototype.bytesPerElement=12,na(bs,"StructArrayLayout2i4ub1f12");var Is=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=4*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,e}}]),n}(ys);Is.prototype.bytesPerElement=16,na(Is,"StructArrayLayout4f16");var ws=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i)}},{key:"emplace",value:function(e,t,n,r,i,a){var s=6*e,o=3*e;return this.uint16[s+0]=t,this.uint16[s+1]=n,this.uint16[s+2]=r,this.uint16[s+3]=i,this.float32[o+2]=a,e}}]),n}(ys);ws.prototype.bytesPerElement=12,na(ws,"StructArrayLayout4ui1f12");var ks=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=4*e;return this.uint16[a+0]=t,this.uint16[a+1]=n,this.uint16[a+2]=r,this.uint16[a+3]=i,e}}]),n}(ys);ks.prototype.bytesPerElement=8,na(ks,"StructArrayLayout4ui8");var Ss=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,a)}},{key:"emplace",value:function(e,t,n,r,i,a,s){var o=6*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,this.int16[o+4]=a,this.int16[o+5]=s,e}}]),n}(ys);Ss.prototype.bytesPerElement=12,na(Ss,"StructArrayLayout6i12");var Rs=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,s,o,u,l,c,h){var p=this.length;return this.resize(p+1),this.emplace(p,e,t,n,r,i,a,s,o,u,l,c,h)}},{key:"emplace",value:function(e,t,n,r,i,a,s,o,u,l,c,h,p){var f=12*e;return this.int16[f+0]=t,this.int16[f+1]=n,this.int16[f+2]=r,this.int16[f+3]=i,this.uint16[f+4]=a,this.uint16[f+5]=s,this.uint16[f+6]=o,this.uint16[f+7]=u,this.int16[f+8]=l,this.int16[f+9]=c,this.int16[f+10]=h,this.int16[f+11]=p,e}}]),n}(ys);Rs.prototype.bytesPerElement=24,na(Rs,"StructArrayLayout4i4ui4i24");var Cs=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,a)}},{key:"emplace",value:function(e,t,n,r,i,a,s){var o=10*e,u=5*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=r,this.float32[u+2]=i,this.float32[u+3]=a,this.float32[u+4]=s,e}}]),n}(ys);Cs.prototype.bytesPerElement=20,na(Cs,"StructArrayLayout3i3f20");var Ds=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint32[1*e+0]=t,e}}]),n}(ys);Ds.prototype.bytesPerElement=4,na(Ds,"StructArrayLayout1ul4");var As=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,s,o,u,l,c,h,p){var f=this.length;return this.resize(f+1),this.emplace(f,e,t,n,r,i,a,s,o,u,l,c,h,p)}},{key:"emplace",value:function(e,t,n,r,i,a,s,o,u,l,c,h,p,f){var d=20*e,v=10*e;return this.int16[d+0]=t,this.int16[d+1]=n,this.int16[d+2]=r,this.int16[d+3]=i,this.int16[d+4]=a,this.float32[v+3]=s,this.float32[v+4]=o,this.float32[v+5]=u,this.float32[v+6]=l,this.int16[d+14]=c,this.uint32[v+8]=h,this.uint16[d+18]=p,this.uint16[d+19]=f,e}}]),n}(ys);As.prototype.bytesPerElement=40,na(As,"StructArrayLayout5i4f1i1ul2ui40");var Os=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,s){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i,a,s)}},{key:"emplace",value:function(e,t,n,r,i,a,s,o){var u=8*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.int16[u+2]=r,this.int16[u+4]=i,this.int16[u+5]=a,this.int16[u+6]=s,this.int16[u+7]=o,e}}]),n}(ys);Os.prototype.bytesPerElement=16,na(Os,"StructArrayLayout3i2i2i16");var Ns=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i)}},{key:"emplace",value:function(e,t,n,r,i,a){var s=4*e,o=8*e;return this.float32[s+0]=t,this.float32[s+1]=n,this.float32[s+2]=r,this.int16[o+6]=i,this.int16[o+7]=a,e}}]),n}(ys);Ns.prototype.bytesPerElement=16,na(Ns,"StructArrayLayout2f1f2i16");var Ms=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=12*e,s=3*e;return this.uint8[a+0]=t,this.uint8[a+1]=n,this.float32[s+1]=r,this.float32[s+2]=i,e}}]),n}(ys);Ms.prototype.bytesPerElement=12,na(Ms,"StructArrayLayout2ub2f12");var Ps=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}]),n}(ys);Ps.prototype.bytesPerElement=12,na(Ps,"StructArrayLayout3f12");var Fs=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e}}]),n}(ys);Fs.prototype.bytesPerElement=6,na(Fs,"StructArrayLayout3ui6");var Ls=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,s,o,u,l,c,h,p,f,d,v,m,y,g,_,T){var E=this.length;return this.resize(E+1),this.emplace(E,e,t,n,r,i,a,s,o,u,l,c,h,p,f,d,v,m,y,g,_,T)}},{key:"emplace",value:function(e,t,n,r,i,a,s,o,u,l,c,h,p,f,d,v,m,y,g,_,T,E){var x=30*e,b=15*e,I=60*e;return this.int16[x+0]=t,this.int16[x+1]=n,this.int16[x+2]=r,this.float32[b+2]=i,this.float32[b+3]=a,this.uint16[x+8]=s,this.uint16[x+9]=o,this.uint32[b+5]=u,this.uint32[b+6]=l,this.uint32[b+7]=c,this.uint16[x+16]=h,this.uint16[x+17]=p,this.uint16[x+18]=f,this.float32[b+10]=d,this.float32[b+11]=v,this.uint8[I+48]=m,this.uint8[I+49]=y,this.uint8[I+50]=g,this.uint32[b+13]=_,this.int16[x+28]=T,this.uint8[I+58]=E,e}}]),n}(ys);Ls.prototype.bytesPerElement=60,na(Ls,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");var Us=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,s,o,u,l,c,h,p,f,d,v,m,y,g,_,T,E,x,b,I,w,k,S,R,C){var D=this.length;return this.resize(D+1),this.emplace(D,e,t,n,r,i,a,s,o,u,l,c,h,p,f,d,v,m,y,g,_,T,E,x,b,I,w,k,S,R,C)}},{key:"emplace",value:function(e,t,n,r,i,a,s,o,u,l,c,h,p,f,d,v,m,y,g,_,T,E,x,b,I,w,k,S,R,C,D){var A=38*e,O=19*e;return this.int16[A+0]=t,this.int16[A+1]=n,this.int16[A+2]=r,this.float32[O+2]=i,this.float32[O+3]=a,this.int16[A+8]=s,this.int16[A+9]=o,this.int16[A+10]=u,this.int16[A+11]=l,this.int16[A+12]=c,this.int16[A+13]=h,this.uint16[A+14]=p,this.uint16[A+15]=f,this.uint16[A+16]=d,this.uint16[A+17]=v,this.uint16[A+18]=m,this.uint16[A+19]=y,this.uint16[A+20]=g,this.uint16[A+21]=_,this.uint16[A+22]=T,this.uint16[A+23]=E,this.uint16[A+24]=x,this.uint16[A+25]=b,this.uint16[A+26]=I,this.uint16[A+27]=w,this.uint16[A+28]=k,this.uint32[O+15]=S,this.float32[O+16]=R,this.float32[O+17]=C,this.float32[O+18]=D,e}}]),n}(ys);Us.prototype.bytesPerElement=76,na(Us,"StructArrayLayout3i2f6i15ui1ul3f76");var Zs=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.float32[1*e+0]=t,e}}]),n}(ys);Zs.prototype.bytesPerElement=4,na(Zs,"StructArrayLayout1f4");var Bs=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i)}},{key:"emplace",value:function(e,t,n,r,i,a){var s=5*e;return this.float32[s+0]=t,this.float32[s+1]=n,this.float32[s+2]=r,this.float32[s+3]=i,this.float32[s+4]=a,e}}]),n}(ys);Bs.prototype.bytesPerElement=20,na(Bs,"StructArrayLayout5f20");var zs=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=6*e;return this.uint32[3*e+0]=t,this.uint16[a+2]=n,this.uint16[a+3]=r,this.uint16[a+4]=i,e}}]),n}(ys);zs.prototype.bytesPerElement=12,na(zs,"StructArrayLayout1ul3ui12");var Gs=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e}}]),n}(ys);Gs.prototype.bytesPerElement=4,na(Gs,"StructArrayLayout2ui4");var Hs=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint16[1*e+0]=t,e}}]),n}(ys);Hs.prototype.bytesPerElement=2,na(Hs,"StructArrayLayout1ui2");var js=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e}}]),n}(ys);js.prototype.bytesPerElement=8,na(js,"StructArrayLayout2f8");var Vs=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"tileAnchorY",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"x1",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"y1",get:function(){return this._structArray.float32[this._pos4+4]}},{key:"x2",get:function(){return this._structArray.float32[this._pos4+5]}},{key:"y2",get:function(){return this._structArray.float32[this._pos4+6]}},{key:"padding",get:function(){return this._structArray.int16[this._pos2+14]}},{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+8]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+19]}}]),n}(ms);Vs.prototype.size=40;var Ws=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"get",value:function(e){return new Vs(this,e)}}]),n}(As);na(Ws,"CollisionBoxArray");var Ys=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"tileAnchorY",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"glyphStartIndex",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"numGlyphs",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"vertexStartIndex",get:function(){return this._structArray.uint32[this._pos4+5]}},{key:"lineStartIndex",get:function(){return this._structArray.uint32[this._pos4+6]}},{key:"lineLength",get:function(){return this._structArray.uint32[this._pos4+7]}},{key:"segment",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"lowerSize",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"upperSize",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"lineOffsetX",get:function(){return this._structArray.float32[this._pos4+10]}},{key:"lineOffsetY",get:function(){return this._structArray.float32[this._pos4+11]}},{key:"writingMode",get:function(){return this._structArray.uint8[this._pos1+48]}},{key:"placedOrientation",get:function(){return this._structArray.uint8[this._pos1+49]},set:function(e){this._structArray.uint8[this._pos1+49]=e}},{key:"hidden",get:function(){return this._structArray.uint8[this._pos1+50]},set:function(e){this._structArray.uint8[this._pos1+50]=e}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+13]},set:function(e){this._structArray.uint32[this._pos4+13]=e}},{key:"associatedIconIndex",get:function(){return this._structArray.int16[this._pos2+28]}},{key:"flipState",get:function(){return this._structArray.uint8[this._pos1+58]},set:function(e){this._structArray.uint8[this._pos1+58]=e}}]),n}(ms);Ys.prototype.size=60;var qs=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"get",value:function(e){return new Ys(this,e)}}]),n}(Ls);na(qs,"PlacedSymbolArray");var Xs=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"tileAnchorY",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"rightJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+8]}},{key:"centerJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+9]}},{key:"leftJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+10]}},{key:"verticalPlacedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+11]}},{key:"placedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+12]}},{key:"verticalPlacedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+13]}},{key:"key",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"textBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"textBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"verticalTextBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"verticalTextBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"iconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+19]}},{key:"iconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+20]}},{key:"verticalIconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+21]}},{key:"verticalIconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+22]}},{key:"featureIndex",get:function(){return this._structArray.uint16[this._pos2+23]}},{key:"numHorizontalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+24]}},{key:"numVerticalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+25]}},{key:"numIconVertices",get:function(){return this._structArray.uint16[this._pos2+26]}},{key:"numVerticalIconVertices",get:function(){return this._structArray.uint16[this._pos2+27]}},{key:"useRuntimeCollisionCircles",get:function(){return this._structArray.uint16[this._pos2+28]}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+15]},set:function(e){this._structArray.uint32[this._pos4+15]=e}},{key:"textOffset0",get:function(){return this._structArray.float32[this._pos4+16]}},{key:"textOffset1",get:function(){return this._structArray.float32[this._pos4+17]}},{key:"collisionCircleDiameter",get:function(){return this._structArray.float32[this._pos4+18]}}]),n}(ms);Xs.prototype.size=76;var Ks=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"get",value:function(e){return new Xs(this,e)}}]),n}(Us);na(Ks,"SymbolInstanceArray");var Qs=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getoffsetX",value:function(e){return this.float32[1*e+0]}}]),n}(Zs);na(Qs,"GlyphOffsetArray");var Js=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getx",value:function(e){return this.int16[2*e+0]}},{key:"gety",value:function(e){return this.int16[2*e+1]}}]),n}(Ts);na(Js,"SymbolLineVertexArray");var $s=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+0]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+3]}},{key:"layoutVertexArrayOffset",get:function(){return this._structArray.uint16[this._pos2+4]}}]),n}(ms);$s.prototype.size=12;var eo=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"get",value:function(e){return new $s(this,e)}}]),n}(zs);na(eo,"FeatureIndexArray");var to=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"geta_centroid_pos0",value:function(e){return this.uint16[2*e+0]}},{key:"geta_centroid_pos1",value:function(e){return this.uint16[2*e+1]}}]),n}(Gs);na(to,"FillExtrusionCentroidArray");var no=gs([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),ro=gs([{name:"a_dash",components:4,type:"Uint16"}]),io={},ao={get exports(){return io},set exports(e){io=e}},so={};({get exports(){return so},set exports(e){so=e}}).exports=function(e,t){var n,r,i,a,s,o,u,l;for(r=e.length-(n=3&e.length),i=t,s=3432918353,o=461845907,l=0;l<r;)u=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,i=27492+(65535&(a=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*s+(((u>>>16)*s&65535)<<16)&4294967295)<<15|u>>>17))*o+(((u>>>16)*o&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&e.charCodeAt(l+2))<<16;case 2:u^=(255&e.charCodeAt(l+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&e.charCodeAt(l)))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<15|u>>>17))*o+(((u>>>16)*o&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var oo={};({get exports(){return oo},set exports(e){oo=e}}).exports=function(e,t){for(var n,r=e.length,i=t^r,a=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++a;switch(r){case 3:i^=(255&e.charCodeAt(a+2))<<16;case 2:i^=(255&e.charCodeAt(a+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(a)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var uo=so,lo=oo;ao.exports=uo,io.murmur3=uo,io.murmur2=lo;var co=function(){function e(){f(this,e),this.ids=[],this.positions=[],this.indexed=!1}return d(e,[{key:"add",value:function(e,t,n,r){this.ids.push(ho(e)),this.positions.push(t,n,r)}},{key:"getPositions",value:function(e){for(var t=ho(e),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=t?r=i:n=i+1}for(var a=[];this.ids[n]===t;)a.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return a}}],[{key:"serialize",value:function(e,t){var n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return po(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}}},{key:"deserialize",value:function(t){var n=new e;return n.ids=t.ids,n.positions=t.positions,n.indexed=!0,n}}]),e}();function ho(e){var t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:io(String(e))}function po(e,t,n,r){for(;n<r;){for(var i=e[n+r>>1],a=n-1,s=r+1;;){do{a++}while(e[a]<i);do{s--}while(e[s]>i);if(a>=s)break;fo(e,a,s),fo(t,3*a,3*s),fo(t,3*a+1,3*s+1),fo(t,3*a+2,3*s+2)}s-n<r-s?(po(e,t,n,s),n=s+1):(po(e,t,s+1,r),r=s)}}function fo(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}na(co,"FeaturePositionMap");var vo=function(){function e(t){f(this,e),this.gl=t.gl,this.initialized=!1}return d(e,[{key:"fetchUniformLocation",value:function(e,t){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,t),this.initialized=!0),!!this.location}}]),e}(),mo=function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).current=0,r}return d(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}]),n}(vo),yo=function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).current=[0,0,0,0],r}return d(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3])))}}]),n}(vo),go=function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).current=zt.transparent,r}return d(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&(n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a)))}}]),n}(vo),_o=new Float32Array(16),To=new Float32Array(9),Eo=new Float32Array(4);function xo(e){return[ds(255*e.r,255*e.g),ds(255*e.b,255*e.a)]}var bo=function(){function e(t,n,r){f(this,e),this.value=t,this.uniformNames=n.map((function(e){return"u_".concat(e)})),this.type=r}return d(e,[{key:"setUniform",value:function(e,t,n,r,i){t.set(e,i,r.constantOr(this.value))}},{key:"getBinding",value:function(e,t){return"color"===this.type?new go(e):new mo(e)}}]),e}(),Io=function(){function e(t,n){f(this,e),this.uniformNames=n.map((function(e){return"u_".concat(e)})),this.pattern=null,this.pixelRatio=1}return d(e,[{key:"setConstantPatternPositions",value:function(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}},{key:"setUniform",value:function(e,t,n,r,i){var a="u_pattern"===i||"u_dash"===i?this.pattern:"u_pixel_ratio"===i?this.pixelRatio:null;a&&t.set(e,i,a)}},{key:"getBinding",value:function(e,t){return"u_pattern"===t||"u_dash"===t?new yo(e):new mo(e)}}]),e}(),wo=function(){function e(t,n,r,i){f(this,e),this.expression=t,this.type=r,this.maxValue=0,this.paintVertexAttributes=n.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===r?2:1,offset:0}})),this.paintVertexArray=new i}return d(e,[{key:"populatePaintArray",value:function(e,t,n,r,i,a){var s=this.paintVertexArray.length,o=this.expression.evaluate(new ts(0),t,{},i,r,a);this.paintVertexArray.resize(e),this._setPaintValue(s,e,o)}},{key:"updatePaintArray",value:function(e,t,n,r,i){var a=this.expression.evaluate({zoom:0},n,r,void 0,i);this._setPaintValue(e,t,a)}},{key:"_setPaintValue",value:function(e,t,n){if("color"===this.type)for(var r=xo(n),i=e;i<t;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var a=e;a<t;a++)this.paintVertexArray.emplace(a,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),e}(),ko=function(){function e(t,n,r,i,a,s){f(this,e),this.expression=t,this.uniformNames=n.map((function(e){return"u_".concat(e,"_t")})),this.type=r,this.useIntegerZoom=i,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=n.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===r?4:2,offset:0}})),this.paintVertexArray=new s}return d(e,[{key:"populatePaintArray",value:function(e,t,n,r,i,a){var s=this.expression.evaluate(new ts(this.zoom),t,{},i,r,a),o=this.expression.evaluate(new ts(this.zoom+1),t,{},i,r,a),u=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(u,e,s,o)}},{key:"updatePaintArray",value:function(e,t,n,r,i){var a=this.expression.evaluate({zoom:this.zoom},n,r,void 0,i),s=this.expression.evaluate({zoom:this.zoom+1},n,r,void 0,i);this._setPaintValue(e,t,a,s)}},{key:"_setPaintValue",value:function(e,t,n,r){if("color"===this.type)for(var i=xo(n),a=xo(r),s=e;s<t;s++)this.paintVertexArray.emplace(s,i[0],i[1],a[0],a[1]);else{for(var o=e;o<t;o++)this.paintVertexArray.emplace(o,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}},{key:"setUniform",value:function(e,t,n,r,i){var a=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,s=U(this.expression.interpolationFactor(a,this.zoom,this.zoom+1),0,1);t.set(e,i,s)}},{key:"getBinding",value:function(e,t){return new mo(e)}}]),e}(),So=function(){function e(t,n,r,i,a){f(this,e),this.expression=t,this.layerId=a,this.paintVertexAttributes=("array"===r?ro:no).members;for(var s=0;s<n.length;++s);this.paintVertexArray=new i}return d(e,[{key:"populatePaintArray",value:function(e,t,n){var r=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)}},{key:"updatePaintArray",value:function(e,t,n,r,i,a){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],a)}},{key:"_setPaintValues",value:function(e,t,n,r){if(r&&n){var i=r[n];if(i)for(var a=i.tl,s=i.br,o=i.pixelRatio,u=e;u<t;u++)this.paintVertexArray.emplace(u,a[0],a[1],s[0],s[1],o)}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),e}(),Ro=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};f(this,e),this.binders={},this._buffers=[];var i=[];for(var a in t.paint._values)if(r(a)){var s=t.paint.get(a);if(s instanceof us&&Vr(s.property.specification)){var o=Ao(a,t.type),u=s.value,l=s.property.specification.type,c=s.property.useIntegerZoom,h="line-dasharray"===a||a.endsWith("pattern"),p="line-dasharray"===a&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==u.kind||p)if("source"===u.kind||p||h){var d=Mo(a,l,"source");this.binders[a]=h?new So(u,o,l,d,t.id):new wo(u,o,l,d),i.push("/a_".concat(a))}else{var v=Mo(a,l,"composite");this.binders[a]=new ko(u,o,l,c,n,v),i.push("/z_".concat(a))}else this.binders[a]=h?new Io(u.value,o):new bo(u.value,o,l),i.push("/u_".concat(a))}}this.cacheKey=i.sort().join("")}return d(e,[{key:"getMaxValue",value:function(e){var t=this.binders[e];return t instanceof wo||t instanceof ko?t.maxValue:0}},{key:"populatePaintArrays",value:function(e,t,n,r,i,a){for(var s in this.binders){var o=this.binders[s];(o instanceof wo||o instanceof ko||o instanceof So)&&o.populatePaintArray(e,t,n,r,i,a)}}},{key:"setConstantPatternPositions",value:function(e){for(var t in this.binders){var n=this.binders[t];n instanceof Io&&n.setConstantPatternPositions(e)}}},{key:"updatePaintArrays",value:function(e,t,n,r,i,a){var s=!1;for(var o in e){var u,l=t.getPositions(o),c=p(l);try{for(c.s();!(u=c.n()).done;){var h=u.value,f=n.feature(h.index);for(var d in this.binders){var v=this.binders[d];if((v instanceof wo||v instanceof ko||v instanceof So)&&!0===v.expression.isStateDependent){var m=r.paint.get(d);v.expression=m.value,v.updatePaintArray(h.start,h.end,f,e[o],i,a),s=!0}}}}catch(y){c.e(y)}finally{c.f()}}return s}},{key:"defines",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];(n instanceof bo||n instanceof Io)&&e.push.apply(e,c(n.uniformNames.map((function(e){return"#define HAS_UNIFORM_".concat(e)}))))}return e}},{key:"getBinderAttributes",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof wo||n instanceof ko||n instanceof So)for(var r=0;r<n.paintVertexAttributes.length;r++)e.push(n.paintVertexAttributes[r].name)}return e}},{key:"getBinderUniforms",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof bo||n instanceof Io||n instanceof ko){var r,i=p(n.uniformNames);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.push(a)}}catch(s){i.e(s)}finally{i.f()}}}return e}},{key:"getPaintVertexBuffers",value:function(){return this._buffers}},{key:"getUniforms",value:function(e){var t=[];for(var n in this.binders){var r=this.binders[n];if(r instanceof bo||r instanceof Io||r instanceof ko){var i,a=p(r.uniformNames);try{for(a.s();!(i=a.n()).done;){var s=i.value;t.push({name:s,property:n,binding:r.getBinding(e,s)})}}catch(o){a.e(o)}finally{a.f()}}}return t}},{key:"setUniforms",value:function(e,t,n,r,i){var a,s=p(n);try{for(s.s();!(a=s.n()).done;){var o=a.value,u=o.name,l=o.property,c=o.binding;this.binders[l].setUniform(e,c,i,r.get(l),u)}}catch(h){s.e(h)}finally{s.f()}}},{key:"updatePaintBuffers",value:function(){for(var e in this._buffers=[],this.binders){var t=this.binders[e];(t instanceof wo||t instanceof ko||t instanceof So)&&t.paintVertexBuffer&&this._buffers.push(t.paintVertexBuffer)}}},{key:"upload",value:function(e){for(var t in this.binders){var n=this.binders[t];(n instanceof wo||n instanceof ko||n instanceof So)&&n.upload(e)}this.updatePaintBuffers()}},{key:"destroy",value:function(){for(var e in this.binders){var t=this.binders[e];(t instanceof wo||t instanceof ko||t instanceof So)&&t.destroy()}}}]),e}(),Co=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};f(this,e),this.programConfigurations={};var i,a=p(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;this.programConfigurations[s.id]=new Ro(s,n,r)}}catch(o){a.e(o)}finally{a.f()}this.needsUpload=!1,this._featureMap=new co,this._bufferOffset=0}return d(e,[{key:"populatePaintArrays",value:function(e,t,n,r,i,a,s){for(var o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(e,t,r,i,a,s);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}},{key:"updatePaintArrays",value:function(e,t,n,r,i){var a,s=p(n);try{for(s.s();!(a=s.n()).done;){var o=a.value;this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,t,o,r,i)||this.needsUpload}}catch(u){s.e(u)}finally{s.f()}}},{key:"get",value:function(e){return this.programConfigurations[e]}},{key:"upload",value:function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}},{key:"destroy",value:function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()}}]),e}(),Do={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Ao(e,t){return Do[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}var Oo={"line-pattern":{source:ws,composite:ws},"fill-pattern":{source:ws,composite:ws},"fill-extrusion-pattern":{source:ws,composite:ws},"line-dasharray":{source:ks,composite:ks}},No={color:{source:js,composite:Is},number:{source:Zs,composite:js}};function Mo(e,t,n){var r=Oo[e];return r&&r[n]||No[t][n]}na(bo,"ConstantBinder"),na(Io,"PatternConstantBinder"),na(wo,"SourceExpressionBinder"),na(So,"PatternCompositeBinder"),na(ko,"CompositeExpressionBinder"),na(Ro,"ProgramConfiguration",{omit:["_buffers"]}),na(Co,"ProgramConfigurationSet");var Po="-transition",Fo=function(e){v(n,e);var t=m(n);function n(e,r){var i;if(f(this,n),(i=t.call(this)).id=e.id,i.type=e.type,i._featureFilter={filter:function(){return!0},needGeometry:!1,needFeature:!1},i._filterCompiled=!1,"custom"!==e.type&&(i.metadata=e.metadata,i.minzoom=e.minzoom,i.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(i.source=e.source,i.sourceLayer=e["source-layer"],i.filter=e.filter),r.layout&&(i._unevaluatedLayout=new os(r.layout)),r.paint)){for(var a in i._transitionablePaint=new is(r.paint),e.paint)i.setPaintProperty(a,e.paint[a],{validate:!1});for(var s in e.layout)i.setLayoutProperty(s,e.layout[s],{validate:!1});i._transitioningPaint=i._transitionablePaint.untransitioned(),i.paint=new ls(r.paint)}return u(i)}return d(n,[{key:"getLayoutProperty",value:function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}},{key:"setLayoutProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(Ki,"layers.".concat(this.id,".layout.").concat(e),e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}},{key:"getPaintProperty",value:function(e){return K(e,Po)?this._transitionablePaint.getTransition(e.slice(0,-Po.length)):this._transitionablePaint.getValue(e)}},{key:"setPaintProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(Xi,"layers.".concat(this.id,".paint.").concat(e),e,t,n))return!1;if(K(e,Po))return this._transitionablePaint.setTransition(e.slice(0,-Po.length),t||void 0),!1;var r=this._transitionablePaint._values[e],i=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);var s=this._transitionablePaint._values[e].value,o=s.isDataDriven(),u=K(e,"pattern")||"line-dasharray"===e;return o||i||u||this._handleOverridablePaintPropertyUpdate(e,a,s)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){}},{key:"getProgramIds",value:function(){return null}},{key:"getProgramConfiguration",value:function(e){return null}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,n){return!1}},{key:"isHidden",value:function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}},{key:"updateTransitions",value:function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}},{key:"hasTransition",value:function(){return this._transitioningPaint.hasTransition()}},{key:"recalculate",value:function(e,t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}},{key:"serialize",value:function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),J(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))}},{key:"_validate",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&Ji(this,e.call(qi,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:ct,style:{glyphs:!0,sprite:!0}}))}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!1}},{key:"isTileClipped",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return!1}},{key:"resize",value:function(){}},{key:"isStateDependent",value:function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof us&&Vr(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}},{key:"compileFilter",value:function(){this._filterCompiled||(this._featureFilter=Ti(this.filter),this._filterCompiled=!0)}},{key:"invalidateCompiledFilter",value:function(){this._filterCompiled=!1}},{key:"dynamicFilter",value:function(){return this._featureFilter.dynamicFilter}},{key:"dynamicFilterNeedsFeature",value:function(){return this._featureFilter.needFeature}}]),n}(lt),Lo=gs([{name:"a_pos",components:2,type:"Int16"}],4),Uo=gs([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),Zo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];f(this,e),this.segments=t}return d(e,[{key:"prepareSegment",value:function(t,n,r,i){var a=this.segments[this.segments.length-1];return t>e.MAX_VERTEX_ARRAY_LENGTH&&te("Max vertices per segment is ".concat(e.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(t)),(!a||a.vertexLength+t>e.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==i)&&(a={vertexOffset:n.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==i&&(a.sortKey=i),this.segments.push(a)),a}},{key:"get",value:function(){return this.segments}},{key:"destroy",value:function(){var e,t=p(this.segments);try{for(t.s();!(e=t.n()).done;){var n=e.value;for(var r in n.vaos)n.vaos[r].destroy()}}catch(i){t.e(i)}finally{t.f()}}}],[{key:"simpleSegment",value:function(t,n,r,i){return new e([{vertexOffset:t,primitiveOffset:n,vertexLength:r,primitiveLength:i,vaos:{},sortKey:0}])}}]),e}();Zo.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,na(Zo,"SegmentVector");var Bo=8192,zo=function(){function e(t,n){f(this,e),t&&(n?this.setSouthWest(t).setNorthEast(n):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}return d(e,[{key:"setNorthEast",value:function(e){return this._ne=e instanceof ml?new ml(e.lng,e.lat):ml.convert(e),this}},{key:"setSouthWest",value:function(e){return this._sw=e instanceof ml?new ml(e.lng,e.lat):ml.convert(e),this}},{key:"extend",value:function(t){var n,r,i=this._sw,a=this._ne;if(t instanceof ml)n=t,r=t;else{if(!(t instanceof e))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(e.convert(t)):this.extend(ml.convert(t)):"object"==typeof t&&null!==t&&t.hasOwnProperty("lat")&&t.hasOwnProperty("lon")?this.extend(ml.convert(t)):this;if(n=t._sw,r=t._ne,!n||!r)return this}return i||a?(i.lng=Math.min(n.lng,i.lng),i.lat=Math.min(n.lat,i.lat),a.lng=Math.max(r.lng,a.lng),a.lat=Math.max(r.lat,a.lat)):(this._sw=new ml(n.lng,n.lat),this._ne=new ml(r.lng,r.lat)),this}},{key:"getCenter",value:function(){return new ml((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"getNorthWest",value:function(){return new ml(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new ml(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toArray",value:function(){return[this._sw.toArray(),this._ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this._sw&&this._ne)}},{key:"contains",value:function(e){var t=ml.convert(e),n=t.lng,r=t.lat,i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i}}],[{key:"convert",value:function(t){return!t||t instanceof e?t:new e(t)}}]),e}(),Go=1e-6,Ho="undefined"!=typeof Float32Array?Float32Array:Array;function jo(){var e=new Ho(9);return Ho!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Vo(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],l=t[6],c=t[7],h=t[8],p=n[0],f=n[1],d=n[2],v=n[3],m=n[4],y=n[5],g=n[6],_=n[7],T=n[8];return e[0]=p*r+f*s+d*l,e[1]=p*i+f*o+d*c,e[2]=p*a+f*u+d*h,e[3]=v*r+m*s+y*l,e[4]=v*i+m*o+y*c,e[5]=v*a+m*u+y*h,e[6]=g*r+_*s+T*l,e[7]=g*i+_*o+T*c,e[8]=g*a+_*u+T*h,e}function Wo(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Yo(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],o=t[5],u=t[6],l=t[7],c=t[8],h=t[9],p=t[10],f=t[11],d=t[12],v=t[13],m=t[14],y=t[15],g=n*o-r*s,_=n*u-i*s,T=n*l-a*s,E=r*u-i*o,x=r*l-a*o,b=i*l-a*u,I=c*v-h*d,w=c*m-p*d,k=c*y-f*d,S=h*m-p*v,R=h*y-f*v,C=p*y-f*m,D=g*C-_*R+T*S+E*k-x*w+b*I;return D?(e[0]=(o*C-u*R+l*S)*(D=1/D),e[1]=(i*R-r*C-a*S)*D,e[2]=(v*b-m*x+y*E)*D,e[3]=(p*x-h*b-f*E)*D,e[4]=(u*k-s*C-l*w)*D,e[5]=(n*C-i*k+a*w)*D,e[6]=(m*T-d*b-y*_)*D,e[7]=(c*b-p*T+f*_)*D,e[8]=(s*R-o*k+l*I)*D,e[9]=(r*k-n*R-a*I)*D,e[10]=(d*x-v*T+y*g)*D,e[11]=(h*T-c*x-f*g)*D,e[12]=(o*w-s*S-u*I)*D,e[13]=(n*S-r*w+i*I)*D,e[14]=(v*_-d*E-m*g)*D,e[15]=(c*E-h*_+p*g)*D,e):null}function qo(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],l=t[6],c=t[7],h=t[8],p=t[9],f=t[10],d=t[11],v=t[12],m=t[13],y=t[14],g=t[15],_=n[0],T=n[1],E=n[2],x=n[3];return e[0]=_*r+T*o+E*h+x*v,e[1]=_*i+T*u+E*p+x*m,e[2]=_*a+T*l+E*f+x*y,e[3]=_*s+T*c+E*d+x*g,e[4]=(_=n[4])*r+(T=n[5])*o+(E=n[6])*h+(x=n[7])*v,e[5]=_*i+T*u+E*p+x*m,e[6]=_*a+T*l+E*f+x*y,e[7]=_*s+T*c+E*d+x*g,e[8]=(_=n[8])*r+(T=n[9])*o+(E=n[10])*h+(x=n[11])*v,e[9]=_*i+T*u+E*p+x*m,e[10]=_*a+T*l+E*f+x*y,e[11]=_*s+T*c+E*d+x*g,e[12]=(_=n[12])*r+(T=n[13])*o+(E=n[14])*h+(x=n[15])*v,e[13]=_*i+T*u+E*p+x*m,e[14]=_*a+T*l+E*f+x*y,e[15]=_*s+T*c+E*d+x*g,e}function Xo(e,t,n){var r,i,a,s,o,u,l,c,h,p,f,d,v=n[0],m=n[1],y=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*y+t[12],e[13]=t[1]*v+t[5]*m+t[9]*y+t[13],e[14]=t[2]*v+t[6]*m+t[10]*y+t[14],e[15]=t[3]*v+t[7]*m+t[11]*y+t[15]):(i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],l=t[6],c=t[7],h=t[8],p=t[9],f=t[10],d=t[11],e[0]=r=t[0],e[1]=i,e[2]=a,e[3]=s,e[4]=o,e[5]=u,e[6]=l,e[7]=c,e[8]=h,e[9]=p,e[10]=f,e[11]=d,e[12]=r*v+o*m+h*y+t[12],e[13]=i*v+u*m+p*y+t[13],e[14]=a*v+l*m+f*y+t[14],e[15]=s*v+c*m+d*y+t[15]),e}function Ko(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Qo(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],s=t[5],o=t[6],u=t[7],l=t[8],c=t[9],h=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+l*r,e[5]=s*i+c*r,e[6]=o*i+h*r,e[7]=u*i+p*r,e[8]=l*i-a*r,e[9]=c*i-s*r,e[10]=h*i-o*r,e[11]=p*i-u*r,e}function Jo(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],s=t[1],o=t[2],u=t[3],l=t[8],c=t[9],h=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-l*r,e[1]=s*i-c*r,e[2]=o*i-h*r,e[3]=u*i-p*r,e[8]=a*r+l*i,e[9]=s*r+c*i,e[10]=o*r+h*i,e[11]=u*r+p*i,e}function $o(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function eu(e,t,n){var r,i,a,s=n[0],o=n[1],u=n[2],l=Math.hypot(s,o,u);return l<Go?null:(s*=l=1/l,o*=l,u*=l,r=Math.sin(t),i=Math.cos(t),e[0]=s*s*(a=1-i)+i,e[1]=o*s*a+u*r,e[2]=u*s*a-o*r,e[3]=0,e[4]=s*o*a-u*r,e[5]=o*o*a+i,e[6]=u*o*a+s*r,e[7]=0,e[8]=s*u*a+o*r,e[9]=o*u*a-s*r,e[10]=u*u*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var tu=qo;function nu(){var e=new Ho(3);return Ho!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ru(e){var t=new Ho(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function iu(e){return Math.hypot(e[0],e[1],e[2])}function au(e,t,n){var r=new Ho(3);return r[0]=e,r[1]=t,r[2]=n,r}function su(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function ou(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function uu(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function lu(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function cu(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function hu(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function pu(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function fu(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function du(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function vu(e,t,n){var r=t[0],i=t[1],a=t[2],s=n[0],o=n[1],u=n[2];return e[0]=i*u-a*o,e[1]=a*s-r*u,e[2]=r*o-i*s,e}function mu(e,t,n){var r=t[0],i=t[1],a=t[2],s=n[3]*r+n[7]*i+n[11]*a+n[15];return e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/(s=s||1),e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/s,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/s,e}function yu(e,t,n){var r=n[0],i=n[1],a=n[2],s=t[0],o=t[1],u=t[2],l=i*u-a*o,c=a*s-r*u,h=r*o-i*s,p=i*h-a*c,f=a*l-r*h,d=r*c-i*l,v=2*n[3];return c*=v,h*=v,f*=2,d*=2,e[0]=s+(l*=v)+(p*=2),e[1]=o+c+f,e[2]=u+h+d,e}var gu,_u=ou,Tu=uu,Eu=iu;function xu(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function bu(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=n*n+r*r+i*i+a*a;return s>0&&(s=1/Math.sqrt(s)),e[0]=n*s,e[1]=r*s,e[2]=i*s,e[3]=a*s,e}function Iu(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*s,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*s,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*s,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*s,e}function wu(){var e=new Ho(4);return Ho!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function ku(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Su(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],s=t[3],o=Math.sin(n),u=Math.cos(n);return e[0]=r*u+s*o,e[1]=i*u+a*o,e[2]=a*u-i*o,e[3]=s*u-r*o,e}function Ru(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],s=t[3],o=Math.sin(n),u=Math.cos(n);return e[0]=r*u-a*o,e[1]=i*u+s*o,e[2]=a*u+r*o,e[3]=s*u-i*o,e}nu(),gu=new Ho(4),Ho!=Float32Array&&(gu[0]=0,gu[1]=0,gu[2]=0,gu[3]=0);var Cu=bu;nu(),au(1,0,0),au(0,1,0),wu(),wu(),jo();var Du=gs([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]).members,Au=gs([{name:"a_pos_3",components:3,type:"Int16"}]),Ou=gs([{name:"a_pos",type:"Int16",components:2}]),Nu=function(){function e(t,n){f(this,e),this.pos=t,this.dir=n}return d(e,[{key:"intersectsPlane",value:function(e,t,n){var r=du(t,this.dir);if(Math.abs(r)<1e-6)return!1;var i=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/r;return n[0]=this.pos[0]+this.dir[0]*i,n[1]=this.pos[1]+this.dir[1]*i,n[2]=this.pos[2]+this.dir[2]*i,!0}},{key:"closestPointOnSphere",value:function(e,t,n){if(function(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],s=t[1],o=t[2];return Math.abs(n-a)<=Go*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=Go*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-o)<=Go*Math.max(1,Math.abs(i),Math.abs(o))}(this.pos,e)||0===t)return n[0]=n[1]=n[2]=0,!1;var r=h(this.dir,3),i=r[0],a=r[1],s=r[2],o=this.pos[0]-e[0],u=this.pos[1]-e[1],l=this.pos[2]-e[2],c=i*i+a*a+s*s,p=2*(o*i+u*a+l*s),f=p*p-4*c*(o*o+u*u+l*l-t*t);if(f<0){var d=Math.max(-p/2,0),v=o+i*d,m=u+a*d,y=l+s*d,g=Math.hypot(v,m,y);return n[0]=v*t/g,n[1]=m*t/g,n[2]=y*t/g,!1}var _=(-p-Math.sqrt(f))/(2*c);if(_<0){var T=Math.hypot(o,u,l);return n[0]=o*t/T,n[1]=u*t/T,n[2]=l*t/T,!1}return n[0]=o+i*_,n[1]=u+a*_,n[2]=l+s*_,!0}}]),e}(),Mu=function(){function e(t,n,r,i,a){f(this,e),this.TL=t,this.TR=n,this.BR=r,this.BL=i,this.horizon=a}return d(e,null,[{key:"fromInvProjectionMatrix",value:function(t,n,r){var i=[-1,1,1],a=[1,1,1],s=[1,-1,1],o=[-1,-1,1];return new e(mu(i,i,t),mu(a,a,t),mu(s,s,t),mu(o,o,t),n/r)}}]),e}(),Pu=function(){function e(t,n){f(this,e),this.points=t,this.planes=n}return d(e,null,[{key:"fromInvProjectionMatrix",value:function(t,n,r,i){var a=Math.pow(2,r),s=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(e){var r=Iu([],e,t),s=1/r[3]/n*a;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(r,r,[s,s,i?1/r[3]:s,s])})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var t=fu([],vu([],_u([],s[e[0]],s[e[1]]),_u([],s[e[2]],s[e[1]]))),n=-du(t,s[e[1]]);return t.concat(n)}));return new e(s,o)}}]),e}(),Fu=function(){function e(t,n){f(this,e),this.min=t,this.max=n,this.center=hu([],su([],this.min,this.max),.5)}return d(e,[{key:"quadrant",value:function(t){for(var n=[t%2==0,t<2],r=ru(this.min),i=ru(this.max),a=0;a<n.length;a++)r[a]=n[a]?this.min[a]:this.center[a],i[a]=n[a]?this.center[a]:this.max[a];return i[2]=this.max[2],new e(r,i)}},{key:"distanceX",value:function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}},{key:"distanceY",value:function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}},{key:"distanceZ",value:function(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}},{key:"getCorners",value:function(){var e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}},{key:"intersects",value:function(e){for(var t=this.getCorners(),n=!0,r=0;r<e.planes.length;r++){for(var i=e.planes[r],a=0,s=0;s<t.length;s++)a+=du(i,t[s])+i[3]>=0;if(0===a)return 0;a!==t.length&&(n=!1)}if(n)return 2;for(var o=0;o<3;o++){for(var u=Number.MAX_VALUE,l=-Number.MAX_VALUE,c=0;c<e.points.length;c++){var h=e.points[c][o]-this.min[o];u=Math.min(u,h),l=Math.max(l,h)}if(l<0||u>this.max[o]-this.min[o])return 0}return 1}}],[{key:"fromPoints",value:function(t){var n,r=[1/0,1/0,1/0],i=[-1/0,-1/0,-1/0],a=p(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;lu(r,r,s),cu(i,i,s)}}catch(o){a.e(o)}finally{a.f()}return new e(r,i)}},{key:"applyTransform",value:function(t,n){for(var r=t.getCorners(),i=0;i<r.length;++i)mu(r[i],r[i],n);return e.fromPoints(r)}}]),e}(),Lu=Bo/Math.PI/2,Uu=64,Zu=[Uu,32,16],Bu=-Lu,zu=Lu,Gu=[new Fu([Bu,Bu,Bu],[zu,zu,zu]),new Fu([Bu,Bu,Bu],[0,0,zu]),new Fu([0,Bu,Bu],[zu,0,zu]),new Fu([Bu,0,Bu],[0,zu,zu]),new Fu([0,0,Bu],[zu,zu,zu])];function Hu(e){return e*Lu/dl}function ju(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=hu([],e._camera.position,e.worldSize),a=[t,n,1,1];Iu(a,a,e.pixelMatrixInverse),xu(a,a,1/a[3]);var s=fu([],_u([],a,i)),o=e.globeMatrix,u=[o[12],o[13],o[14]],l=_u([],u,i),c=iu(l),h=fu([],l),p=e.worldSize/(2*Math.PI),f=du(h,s),d=Math.asin(p/c);if(d<Math.acos(f)){if(!r)return null;var v=[],m=[];hu(v,s,c/f),fu(m,_u(m,v,l)),fu(s,su(s,l,hu(s,m,Math.tan(d)*c)))}var y=[];new Nu(i,s).closestPointOnSphere(u,p,y);var g=fu([],le(o,0)),_=fu([],le(o,1)),T=fu([],le(o,2)),E=du(g,y),x=du(_,y),b=du(T,y),I=N(Math.asin(-x/p)),w=N(Math.atan2(E,b));w=e.center.lng+function(e,t){var n=(t-e+180)%360-180;return n<-180?n+360:n}(e.center.lng,w);var k=gl(w),S=U(_l(I),0,1);return new kl(k,S)}var Vu=d((function e(t,n,r){f(this,e),this.a=_u([],t,r),this.b=_u([],n,r),this.center=r;var i=fu([],this.a),a=fu([],this.b);this.angle=Math.acos(du(i,a))}));function Wu(e,t){return 0===e.angle||(n=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)))<0||n>1?null:function(e,t,n,r){var i=Math.sin(n);return e*(Math.sin((1-r)*n)/i)+t*(Math.sin(r*n)/i)}(e.a[t],e.b[t],e.angle,U(n,0,1))+e.center[t];var n}function Yu(e){if(e.z<=1)return Gu[e.z+2*e.y+e.x];var t=$u(Ju(e));return Fu.fromPoints(t)}function qu(e,t,n){return hu(e,e,1-n),pu(e,e,t,n)}function Xu(e,t){var n=ul(t.zoom);if(0===n)return Yu(e);var r=Ju(e),i=$u(r),a=gl(r.getWest())*t.worldSize,s=gl(r.getEast())*t.worldSize,o=_l(r.getNorth())*t.worldSize,u=_l(r.getSouth())*t.worldSize,l=[a,o,0],c=[s,o,0],h=[a,u,0],p=[s,u,0],f=Yo([],t.globeMatrix);return mu(l,l,f),mu(c,c,f),mu(h,h,f),mu(p,p,f),i[0]=qu(i[0],h,n),i[1]=qu(i[1],p,n),i[2]=qu(i[2],c,n),i[3]=qu(i[3],l,n),Fu.fromPoints(i)}function Ku(e,t,n){var r,i=p(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;mu(a,a,t),hu(a,a,n)}}catch(s){i.e(s)}finally{i.f()}}function Qu(e,t,n){var r=t/e.worldSize,i=e.globeMatrix;if(n.z<=1){var a=Yu(n).getCorners();return Ku(a,i,r),Fu.fromPoints(a)}var s=Ju(n),o=$u(s);Ku(o,i,r);var u=Number.MAX_VALUE,l=[-u,-u,-u],c=[u,u,u];if(s.contains(e.center)){var h,f=p(o);try{for(f.s();!(h=f.n()).done;){var d=h.value;lu(c,c,d),cu(l,l,d)}}catch(Z){f.e(Z)}finally{f.f()}l[2]=0;var v=e.point,m=[v.x*r,v.y*r,0];return lu(c,c,m),cu(l,l,m),new Fu(c,l)}var y=[i[12]*r,i[13]*r,i[14]*r],g=s.getCenter(),_=U(e.center.lat,-Il,Il),T=U(g.lat,-Il,Il),E=gl(e.center.lng),x=_l(_),b=E-gl(g.lng),I=x-_l(T);b>.5?b-=1:b<-.5&&(b+=1);var w=0;Math.abs(b)>Math.abs(I)?w=b>=0?1:3:(w=I>=0?0:2,pu(y,y,[i[4]*r,i[5]*r,i[6]*r],-Math.sin(O(I>=0?s.getSouth():s.getNorth()))*Lu));var k=o[w],S=o[(w+1)%4],R=new Vu(k,S,y),C=[Wu(R,0)||k[0],Wu(R,1)||k[1],Wu(R,2)||k[2]],D=ul(e.zoom);if(D>0){for(var A=function(e,t,n,r,i){var a=e.x,s=e.y,o=1/(1<<e.z),u=a*o,l=u+o,c=s*o,h=c+o,p=0,f=(u+l)/2-r;return f>.5?p=-1:f<-.5&&(p=1),c=(c*t-(i*=t))*n+i,[[u=((u+p)*t-(r*=t))*n+r,h=(h*t-i)*n+i,0],[l=((l+p)*t-r)*n+r,h,0],[l,c,0],[u,c,0]]}(n,t,e._pixelsPerMercatorPixel,E,x),N=0;N<o.length;N++)qu(o[N],A[N],D);var M=su([],A[w],A[(w+1)%4]);hu(M,M,.5),qu(C,M,D)}var P,F=p(o);try{for(F.s();!(P=F.n()).done;){var L=P.value;lu(c,c,L),cu(l,l,L)}}catch(Z){F.e(Z)}finally{F.f()}return c[2]=Math.min(k[2],S[2]),lu(c,c,C),cu(l,l,C),new Fu(c,l)}function Ju(e){var t=e.x,n=e.y,r=1/(1<<e.z),i=new ml(El(t*r),xl((n+1)*r)),a=new ml(El((t+1)*r),xl(n*r));return new zo(i,a)}function $u(e){var t=O(e.getNorth()),n=O(e.getSouth()),r=Math.cos(t),i=Math.cos(n),a=Math.sin(t),s=Math.sin(n),o=e.getWest(),u=e.getEast();return[el(i,s,o),el(i,s,u),el(r,a,u),el(r,a,o)]}function el(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Lu;return n=O(n),[e*Math.sin(n)*r,-t*r,e*Math.cos(n)*r]}function tl(e,t,n){return el(Math.cos(O(e)),Math.sin(O(e)),t,n)}function nl(e,t,n,r){var i=1<<n.z,a=(e/Bo+n.x)/i;return tl(xl((t/Bo+n.y)/i),El(a),r)}function rl(e){var t=e.min,n=e.max;return 16383/Math.max(n[0]-t[0],n[1]-t[1],n[2]-t[2])}var il=new Float64Array(16);function al(e){var t,n,r=rl(e),i=$o(il,[r,r,r]);return Xo(i,i,((t=[])[0]=-(n=e.min)[0],t[1]=-n[1],t[2]=-n[2],t))}function sl(e){var t,n,r=(n=e.min,(t=il)[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t),i=1/rl(e);return Ko(r,r,[i,i,i])}function ol(e,t,n,r,i){var a=function(e){var t=Bo/(2*Math.PI);return e/(2*Math.PI)/t}(n),s=[e,t,-n/(2*Math.PI)],o=Wo(new Float64Array(16));return Xo(o,o,s),Ko(o,o,[a,a,a]),Qo(o,o,O(-i)),Jo(o,o,O(-r)),o}function ul(e){return Z(5,6,e)}function ll(e,t){var n,r,i,a,s,o,u,l,c,h,p=tl(t.lat,t.lng),f=function(e){var t=tl(e._center.lat,e._center.lng),n=vu([],au(0,1,0),t),r=eu([],-e.angle,t);n=mu(n,n,r),eu(r,-e._pitch,n);var i=fu([],t);return hu(i,i,Hu(e.cameraToCenterDistance/e.pixelsPerMeter)),mu(i,i,r),su([],t,i)}(e);return i=(n=ou([],f,p))[0],a=n[1],s=n[2],o=(r=p)[0],u=r[1],l=r[2],h=(c=Math.sqrt(i*i+a*a+s*s)*Math.sqrt(o*o+u*u+l*l))&&du(n,r)/c,Math.acos(Math.min(Math.max(h,-1),1))}function cl(e,t){return ll(e,t)>Math.PI/2*1.01}var hl=O(85),pl=Math.cos(hl),fl=Math.sin(hl),dl=6371008.8,vl=2*Math.PI*dl,ml=function(){function e(t,n){if(f(this,e),isNaN(t)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(n,")"));if(this.lng=+t,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return d(e,[{key:"wrap",value:function(){return new e(B(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(e){var t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return dl*Math.acos(Math.min(i,1))}},{key:"toBounds",value:function(){var t=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new zo(new e(this.lng-n,this.lat-t),new e(this.lng+n,this.lat+t))}},{key:"toEcef",value:function(e){var t=Hu(e);return tl(this.lat,this.lng,Lu+t)}}],[{key:"convert",value:function(t){if(t instanceof e)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new e(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new e(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),e}();function yl(e){return vl*Math.cos(e*Math.PI/180)}function gl(e){return(180+e)/360}function _l(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Tl(e,t){return e/yl(t)}function El(e){return 360*e-180}function xl(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function bl(e,t){return e*yl(xl(t))}var Il=85.051129;function wl(e){return 1/Math.cos(e*Math.PI/180)}var kl=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;f(this,e),this.x=+t,this.y=+n,this.z=+r}return d(e,[{key:"toLngLat",value:function(){return new ml(El(this.x),xl(this.y))}},{key:"toAltitude",value:function(){return bl(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/vl*wl(xl(this.y))}}],[{key:"fromLngLat",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=ml.convert(t);return new e(gl(r.lng),_l(r.lat),Tl(n,r.lat))}}]),e}();function Sl(e,t,n,r,i,a,s,o,u){var l=(t+r)/2,c=(n+i)/2,h=new R(l,c);o(h),function(e,t,n,r,i,a){var s=n-i,o=r-a;return Math.abs((r-t)*s-(n-e)*o)/Math.hypot(s,o)}(h.x,h.y,a.x,a.y,s.x,s.y)>=u?(Sl(e,t,n,l,c,a,h,o,u),Sl(e,l,c,r,i,h,s,o,u)):e.push(s)}function Rl(e,t,n){var r=e[0],i=r.x,a=r.y;t(r);for(var s=[r],o=1;o<e.length;o++){var u=e[o],l=u.x,c=u.y;t(u),Sl(s,i,a,l,c,r,u,t,n),i=l,a=c,r=u}return s}function Cl(e,t,n,r){if(r(t,n)){var i=t.add(n)._mult(.5);Cl(e,t,i,r),Cl(e,i,n,r)}else e.push(n)}function Dl(e,t){for(var n=e[0],r=[n],i=1;i<e.length;i++){var a=e[i];Cl(r,n,a,t),n=a}return r}var Al=Math.pow(2,14)-1,Ol=-Al-1;function Nl(e,t){var n=Math.round(e.x*t),r=Math.round(e.y*t);return e.x=U(n,Ol,Al),e.y=U(r,Ol,Al),(n<e.x||n>e.x+1||r<e.y||r>e.y+1)&&te("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function Ml(e,t,n){var r=e.loadGeometry(),i=e.extent,a=Bo/i;if(t&&n&&n.projection.isReprojectedInTileSpace)for(var s=1<<t.z,o=n.scale,u=n.x,l=n.y,c=n.projection,h=function(e){var n=El((t.x+e.x/i)/s),r=xl((t.y+e.y/i)/s),a=c.project(n,r);e.x=(a.x*o-u)*i,e.y=(a.y*o-l)*i},f=0;f<r.length;f++)if(1!==e.type)r[f]=Rl(r[f],h,1);else{var d,v=[],m=p(r[f]);try{for(m.s();!(d=m.n()).done;){var y=d.value;y.x<0||y.x>=i||y.y<0||y.y>=i||(h(y),v.push(y))}}catch(b){m.e(b)}finally{m.f()}r[f]=v}var g,_=p(r);try{for(_.s();!(g=_.n()).done;){var T,E=g.value,x=p(E);try{for(x.s();!(T=x.n()).done;)Nl(T.value,a)}catch(b){x.e(b)}finally{x.f()}}}catch(b){_.e(b)}finally{_.f()}return r}function Pl(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Ml(e):[]}}function Fl(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}function Ll(e,t,n){var r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}var Ul=function(){function e(t){f(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new Ts,this.indexArray=new Fs,this.segments=new Zo,this.programConfigurations=new Co(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return d(e,[{key:"populate",value:function(e,t,n,r){var i=this.layers[0],a=[],s=null;"circle"===i.type&&(s=i.layout.get("circle-sort-key"));var o,u=p(e);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=l.feature,h=l.id,f=l.index,d=l.sourceLayerIndex,v=this.layers[0]._featureFilter.needGeometry,m=Pl(c,v);if(this.layers[0]._featureFilter.filter(new ts(this.zoom),m,n)){var y=s?s.evaluate(m,{},n):void 0,g={id:h,properties:c.properties,type:c.type,sourceLayerIndex:d,index:f,geometry:v?m.geometry:Ml(c,n,r),patterns:{},sortKey:y};a.push(g)}}}catch(S){u.e(S)}finally{u.f()}s&&a.sort((function(e,t){return e.sortKey-t.sortKey}));var _=null;"globe"===r.projection.name&&(this.globeExtVertexArray=new Ss,_=r.projection);for(var T=0,E=a;T<E.length;T++){var x=E[T],b=x.geometry,I=x.index,w=x.sourceLayerIndex,k=e[I].feature;this.addFeature(x,b,I,t.availableImages,n,_),t.featureIndex.insert(k,b,I,w,this.index)}}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Lo.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Uo.members))),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}},{key:"addFeature",value:function(e,t,n,r,i,a){var s,o=p(t);try{for(o.s();!(s=o.n()).done;){var u,l=s.value,c=p(l);try{for(c.s();!(u=c.n()).done;){var h=u.value,f=h.x,d=h.y;if(!(f<0||f>=Bo||d<0||d>=Bo)){if(a){var v=a.projectTilePoint(f,d,i),m=a.upVector(i,f,d),y=this.globeExtVertexArray;Ll(y,v,m),Ll(y,v,m),Ll(y,v,m),Ll(y,v,m)}var g=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),_=g.vertexLength;Fl(this.layoutVertexArray,f,d,-1,-1),Fl(this.layoutVertexArray,f,d,1,-1),Fl(this.layoutVertexArray,f,d,1,1),Fl(this.layoutVertexArray,f,d,-1,1),this.indexArray.emplaceBack(_,_+1,_+2),this.indexArray.emplaceBack(_,_+2,_+3),g.vertexLength+=4,g.primitiveLength+=2}}}catch(T){c.e(T)}finally{c.f()}}}catch(T){o.e(T)}finally{o.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r,i)}}]),e}();function Zl(e,t){for(var n=0;n<e.length;n++)if(ql(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(ql(e,t[r]))return!0;return!!Hl(e,t)}function Bl(e,t,n){return!!ql(e,t)||!!Vl(t,e,n)}function zl(e,t){if(1===e.length)return Yl(t,e[0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(ql(e,r[i]))return!0;for(var a=0;a<e.length;a++)if(Yl(t,e[a]))return!0;for(var s=0;s<t.length;s++)if(Hl(e,t[s]))return!0;return!1}function Gl(e,t,n){if(e.length>1){if(Hl(e,t))return!0;for(var r=0;r<t.length;r++)if(Vl(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if(Vl(e[i],t,n))return!0;return!1}function Hl(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],i=e[n+1],a=0;a<t.length-1;a++)if(jl(r,i,t[a],t[a+1]))return!0;return!1}function jl(e,t,n,r){return ne(e,n,r)!==ne(t,n,r)&&ne(e,t,n)!==ne(e,t,r)}function Vl(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++)if(Wl(e,t[i-1],t[i])<r)return!0;return!1}function Wl(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function Yl(e,t){for(var n,r,i,a=!1,s=0;s<e.length;s++)for(var o=0,u=(n=e[s]).length-1;o<n.length;u=o++)r=n[o],i=n[u],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(a=!a);return a}function ql(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var a=e[r],s=e[i];a.y>t.y!=s.y>t.y&&t.x<(s.x-a.x)*(t.y-a.y)/(s.y-a.y)+a.x&&(n=!n)}return n}function Xl(e,t,n,r,i){var a,s=p(e);try{for(s.s();!(a=s.n()).done;){var o=a.value;if(t<=o.x&&n<=o.y&&r>=o.x&&i>=o.y)return!0}}catch(f){s.e(f)}finally{s.f()}var u=[new R(t,n),new R(t,i),new R(r,i),new R(r,n)];if(e.length>2){var l,c=p(u);try{for(c.s();!(l=c.n()).done;)if(ql(e,l.value))return!0}catch(f){c.e(f)}finally{c.f()}}for(var h=0;h<e.length-1;h++)if(Kl(e[h],e[h+1],u))return!0;return!1}function Kl(e,t,n){var r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;var a=ne(e,t,n[0]);return a!==ne(e,t,n[1])||a!==ne(e,t,n[2])||a!==ne(e,t,n[3])}function Ql(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function Jl(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function $l(e,t,n,r,i){if(!t[0]&&!t[1])return e;var a=R.convert(t)._mult(i);"viewport"===n&&a._rotate(-r);for(var s=[],o=0;o<e.length;o++)s.push(e[o].sub(a));return s}function ec(e,t,n,r){var i=R.convert(e)._mult(r);return"viewport"===t&&i._rotate(-n),i}na(Ul,"CircleBucket",{omit:["layers"]});var tc=new fs({"circle-sort-key":new hs(ct.layout_circle["circle-sort-key"])}),nc={paint:new fs({"circle-radius":new hs(ct.paint_circle["circle-radius"]),"circle-color":new hs(ct.paint_circle["circle-color"]),"circle-blur":new hs(ct.paint_circle["circle-blur"]),"circle-opacity":new hs(ct.paint_circle["circle-opacity"]),"circle-translate":new cs(ct.paint_circle["circle-translate"]),"circle-translate-anchor":new cs(ct.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new cs(ct.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new cs(ct.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new hs(ct.paint_circle["circle-stroke-width"]),"circle-stroke-color":new hs(ct.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new hs(ct.paint_circle["circle-stroke-opacity"])}),layout:tc};function rc(e,t,n,r,i,a,s,o,u){if(a&&e.queryGeometry.isAboveHorizon)return!1;a&&(u*=e.pixelToTileUnitsFactor);var l,c=e.tileID.canonical,h=n.projection.upVectorScale(c,n.center.lat,n.worldSize).metersToTile,f=p(t);try{for(f.s();!(l=f.n()).done;){var d,v=l.value,m=p(v);try{var y=function(){var t=d.value,l=t.add(o),p=i&&n.elevation?n.elevation.exaggeration()*i.getElevationAt(l.x,l.y,!0):0,f=n.projection.projectTilePoint(l.x,l.y,c);if(p>0){var v=n.projection.upVector(c,l.x,l.y);f.x+=v[0]*h*p,f.y+=v[1]*h*p,f.z+=v[2]*h*p}var m=a?l:ic(f.x,f.y,f.z,r),y=a?e.tilespaceRays.map((function(e){return oc(e,p)})):e.queryGeometry.screenGeometry,g=Iu([],[f.x,f.y,f.z,1],r);if(!s&&a?u*=g[3]/n.cameraToCenterDistance:s&&!a&&(u*=n.cameraToCenterDistance/g[3]),a){var _=xl((t.y/Bo+c.y)/(1<<c.z));u/=n.projection.pixelsPerMeter(_,1)/Tl(1,_)}if(Bl(y,m,u))return{v:!0}};for(m.s();!(d=m.n()).done;){var g=y();if("object"===typeof g)return g.v}}catch(_){m.e(_)}finally{m.f()}}}catch(_){f.e(_)}finally{f.f()}return!1}function ic(e,t,n,r){var i=Iu([],[e,t,n,1],r);return new R(i[0]/i[3],i[1]/i[3])}var ac=au(0,0,0),sc=au(0,0,1);function oc(e,t){var n=nu();return ac[2]=t,e.intersectsPlane(ac,sc,n),new R(n[0],n[1])}var uc=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n)}(Ul);function lc(e,t,n,r){var i=t.width,a=t.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*a*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*a*n);return e.width=i,e.height=a,e.data=r,e}function cc(e,t,n){var r=t.width,i=t.height;r===e.width&&i===e.height||(hc(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=t.data)}function hc(e,t,n,r,i,a){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var s=e.data,o=t.data,u=0;u<i.height;u++)for(var l=((n.y+u)*e.width+n.x)*a,c=((r.y+u)*t.width+r.x)*a,h=0;h<i.width*a;h++)o[c+h]=s[l+h];return t}na(uc,"HeatmapBucket",{omit:["layers"]});var pc=function(){function e(t,n){f(this,e),lc(this,t,1,n)}return d(e,[{key:"resize",value:function(t){cc(this,new e(t),1)}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,n,r,i){hc(e,t,n,r,i,1)}}]),e}(),fc=function(){function e(t,n){f(this,e),lc(this,t,4,n)}return d(e,[{key:"resize",value:function(t){cc(this,new e(t),4)}},{key:"replace",value:function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,n,r,i){hc(e,t,n,r,i,4)}}]),e}();na(pc,"AlphaImage"),na(fc,"RGBAImage");var dc={paint:new fs({"heatmap-radius":new hs(ct.paint_heatmap["heatmap-radius"]),"heatmap-weight":new hs(ct.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new cs(ct.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ps(ct.paint_heatmap["heatmap-color"]),"heatmap-opacity":new cs(ct.paint_heatmap["heatmap-opacity"])})};function vc(e){var t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new fc({width:n,height:r}),a=function(n,r,a){t[e.evaluationKey]=a;var s=e.expression.evaluate(t);i.data[n+r+0]=Math.floor(255*s.r/s.a),i.data[n+r+1]=Math.floor(255*s.g/s.a),i.data[n+r+2]=Math.floor(255*s.b/s.a),i.data[n+r+3]=Math.floor(255*s.a)};if(e.clips)for(var s=0,o=0;s<r;++s,o+=4*n)for(var u=0,l=0;u<n;u++,l+=4){var c=u/(n-1),h=e.clips[s];a(o,l,h.start*(1-c)+h.end*c)}else for(var p=0,f=0;p<n;p++,f+=4)a(0,f,p/(n-1));return i}var mc={paint:new fs({"hillshade-illumination-direction":new cs(ct.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new cs(ct.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new cs(ct.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new cs(ct.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new cs(ct.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new cs(ct.paint_hillshade["hillshade-accent-color"])})},yc=gs([{name:"a_pos",components:2,type:"Int16"}],4).members,gc={};function _c(e,t,n){n=n||2;var r,i,a,s,o,u,l,c=t&&t.length,h=c?t[0]*n:e.length,p=Tc(e,0,h,n,!0),f=[];if(!p||p.next===p.prev)return f;if(c&&(p=function(e,t,n,r){var i,a,s,o=[];for(i=0,a=t.length;i<a;i++)(s=Tc(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===s.next&&(s.steiner=!0),o.push(Ac(s));for(o.sort(Sc),i=0;i<o.length;i++)n=Rc(o[i],n);return n}(e,t,p,n)),e.length>80*n){r=a=e[0],i=s=e[1];for(var d=n;d<h;d+=n)(o=e[d])<r&&(r=o),(u=e[d+1])<i&&(i=u),o>a&&(a=o),u>s&&(s=u);l=0!==(l=Math.max(a-r,s-i))?32767/l:0}return xc(p,f,n,r,i,l,0),f}function Tc(e,t,n,r,i){var a,s;if(i===jc(e,t,n,r)>0)for(a=t;a<n;a+=r)s=zc(a,e[a],e[a+1],s);else for(a=n-r;a>=t;a-=r)s=zc(a,e[a],e[a+1],s);return s&&Pc(s,s.next)&&(Gc(s),s=s.next),s}function Ec(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Pc(r,r.next)&&0!==Mc(r.prev,r,r.next))r=r.next;else{if(Gc(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function xc(e,t,n,r,i,a,s){if(e){!s&&a&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=Dc(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,s,o,u,l=1;do{for(n=e,e=null,a=null,s=0;n;){for(s++,r=n,o=0,t=0;t<l&&(o++,r=r.nextZ);t++);for(u=l;o>0||u>0&&r;)0!==o&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,l*=2}while(s>1)}(i)}(e,r,i,a);for(var o,u,l=e;e.prev!==e.next;)if(o=e.prev,u=e.next,a?Ic(e,r,i,a):bc(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(u.i/n|0),Gc(e),e=u.next,l=u.next;else if((e=u)===l){s?1===s?xc(e=wc(Ec(e),t,n),t,n,r,i,a,2):2===s&&kc(e,t,n,r,i,a):xc(Ec(e),t,n,r,i,a,1);break}}}function bc(e){var t=e.prev,n=e,r=e.next;if(Mc(t,n,r)>=0)return!1;for(var i=t.x,a=n.x,s=r.x,o=t.y,u=n.y,l=r.y,c=i<a?i<s?i:s:a<s?a:s,h=o<u?o<l?o:l:u<l?u:l,p=i>a?i>s?i:s:a>s?a:s,f=o>u?o>l?o:l:u>l?u:l,d=r.next;d!==t;){if(d.x>=c&&d.x<=p&&d.y>=h&&d.y<=f&&Oc(i,o,a,u,s,l,d.x,d.y)&&Mc(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function Ic(e,t,n,r){var i=e.prev,a=e,s=e.next;if(Mc(i,a,s)>=0)return!1;for(var o=i.x,u=a.x,l=s.x,c=i.y,h=a.y,p=s.y,f=o<u?o<l?o:l:u<l?u:l,d=c<h?c<p?c:p:h<p?h:p,v=o>u?o>l?o:l:u>l?u:l,m=c>h?c>p?c:p:h>p?h:p,y=Dc(f,d,t,n,r),g=Dc(v,m,t,n,r),_=e.prevZ,T=e.nextZ;_&&_.z>=y&&T&&T.z<=g;){if(_.x>=f&&_.x<=v&&_.y>=d&&_.y<=m&&_!==i&&_!==s&&Oc(o,c,u,h,l,p,_.x,_.y)&&Mc(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,T.x>=f&&T.x<=v&&T.y>=d&&T.y<=m&&T!==i&&T!==s&&Oc(o,c,u,h,l,p,T.x,T.y)&&Mc(T.prev,T,T.next)>=0)return!1;T=T.nextZ}for(;_&&_.z>=y;){if(_.x>=f&&_.x<=v&&_.y>=d&&_.y<=m&&_!==i&&_!==s&&Oc(o,c,u,h,l,p,_.x,_.y)&&Mc(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;T&&T.z<=g;){if(T.x>=f&&T.x<=v&&T.y>=d&&T.y<=m&&T!==i&&T!==s&&Oc(o,c,u,h,l,p,T.x,T.y)&&Mc(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function wc(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Pc(i,a)&&Fc(i,r,r.next,a)&&Zc(i,a)&&Zc(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),Gc(r),Gc(r.next),r=e=a),r=r.next}while(r!==e);return Ec(r)}function kc(e,t,n,r,i,a){var s=e;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&Nc(s,o)){var u=Bc(s,o);return s=Ec(s,s.next),u=Ec(u,u.next),xc(s,t,n,r,i,a,0),void xc(u,t,n,r,i,a,0)}o=o.next}s=s.next}while(s!==e)}function Sc(e,t){return e.x-t.x}function Rc(e,t){var n=function(e,t){var n,r=t,i=e.x,a=e.y,s=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var o=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=i&&o>s&&(s=o,n=r.x<r.next.x?r:r.next,o===i))return n}r=r.next}while(r!==t);if(!n)return null;var u,l=n,c=n.x,h=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&Oc(a<h?i:s,a,c,h,a<h?s:i,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(i-r.x),Zc(r,e)&&(u<p||u===p&&(r.x>n.x||r.x===n.x&&Cc(n,r)))&&(n=r,p=u)),r=r.next}while(r!==l);return n}(e,t);if(!n)return t;var r=Bc(n,e);return Ec(r,r.next),Ec(n,n.next)}function Cc(e,t){return Mc(e.prev,e,t.prev)<0&&Mc(t.next,e,e.next)<0}function Dc(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ac(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Oc(e,t,n,r,i,a,s,o){return(i-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(r-o)>=(n-s)*(t-o)&&(n-s)*(a-o)>=(i-s)*(r-o)}function Nc(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Fc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Zc(e,t)&&Zc(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Mc(e.prev,e,t.prev)||Mc(e,t.prev,t))||Pc(e,t)&&Mc(e.prev,e,e.next)>0&&Mc(t.prev,t,t.next)>0)}function Mc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Pc(e,t){return e.x===t.x&&e.y===t.y}function Fc(e,t,n,r){var i=Uc(Mc(e,t,n)),a=Uc(Mc(e,t,r)),s=Uc(Mc(n,r,e)),o=Uc(Mc(n,r,t));return i!==a&&s!==o||!(0!==i||!Lc(e,n,t))||!(0!==a||!Lc(e,r,t))||!(0!==s||!Lc(n,e,r))||!(0!==o||!Lc(n,t,r))}function Lc(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Uc(e){return e>0?1:e<0?-1:0}function Zc(e,t){return Mc(e.prev,e,e.next)<0?Mc(e,t,e.next)>=0&&Mc(e,e.prev,t)>=0:Mc(e,t,e.prev)<0||Mc(e,e.next,t)<0}function Bc(e,t){var n=new Hc(e.i,e.x,e.y),r=new Hc(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function zc(e,t,n,r){var i=new Hc(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Gc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Hc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function jc(e,t,n,r){for(var i=0,a=t,s=n-r;a<n;a+=r)i+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return i}function Vc(e,t,n,r,i){Wc(e,t,n||0,r||e.length-1,i||qc)}function Wc(e,t,n,r,i){for(;r>n;){if(r-n>600){var a=r-n+1,s=t-n+1,o=Math.log(a),u=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*u*(a-u)/a)*(s-a/2<0?-1:1);Wc(e,t,Math.max(n,Math.floor(t-s*u/a+l)),Math.min(r,Math.floor(t+(a-s)*u/a+l)),i)}var c=e[t],h=n,p=r;for(Yc(e,n,t),i(e[r],c)>0&&Yc(e,n,r);h<p;){for(Yc(e,h,p),h++,p--;i(e[h],c)<0;)h++;for(;i(e[p],c)>0;)p--}0===i(e[n],c)?Yc(e,n,p):Yc(e,++p,r),p<=t&&(n=p+1),t<=p&&(r=p-1)}}function Yc(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function qc(e,t){return e<t?-1:e>t?1:0}function Xc(e,t){var n=e.length;if(n<=1)return[e];for(var r,i,a=[],s=0;s<n;s++){var o=re(e[s]);0!==o&&(e[s].area=Math.abs(o),void 0===i&&(i=o<0),i===o<0?(r&&a.push(r),r=[e[s]]):r.push(e[s]))}if(r&&a.push(r),t>1)for(var u=0;u<a.length;u++)a[u].length<=t||(Vc(a[u],t,1,a[u].length-1,Kc),a[u]=a[u].slice(0,t));return a}function Kc(e,t){return t.area-e.area}function Qc(e,t,n){var r,i=n.patternDependencies,a=!1,s=p(t);try{for(s.s();!(r=s.n()).done;){var o=r.value.paint.get("".concat(e,"-pattern"));o.isConstant()||(a=!0);var u=o.constantOr(null);u&&(a=!0,i[u]=!0)}}catch(l){s.e(l)}finally{s.f()}return a}function Jc(e,t,n,r,i){var a,s=i.patternDependencies,o=p(t);try{for(o.s();!(a=o.n()).done;){var u=a.value,l=u.paint.get("".concat(e,"-pattern")).value;if("constant"!==l.kind){var c=l.evaluate({zoom:r},n,{},i.availableImages);s[c=c&&c.name?c.name:c]=!0,n.patterns[u.id]=c}}}catch(h){o.e(h)}finally{o.f()}return n}({get exports(){return gc},set exports(e){gc=e}}).exports=_c,gc.default=_c,_c.deviation=function(e,t,n,r){var i=t&&t.length,a=Math.abs(jc(e,0,i?t[0]*n:e.length,n));if(i)for(var s=0,o=t.length;s<o;s++)a-=Math.abs(jc(e,t[s]*n,s<o-1?t[s+1]*n:e.length,n));var u=0;for(s=0;s<r.length;s+=3){var l=r[s]*n,c=r[s+1]*n,h=r[s+2]*n;u+=Math.abs((e[l]-e[h])*(e[c+1]-e[l+1])-(e[l]-e[c])*(e[h+1]-e[l+1]))}return 0===a&&0===u?0:Math.abs((u-a)/a)},_c.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var s=0;s<t;s++)n.vertices.push(e[i][a][s]);i>0&&n.holes.push(r+=e[i-1].length)}return n};var $c=function(){function e(t){f(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ts,this.indexArray=new Fs,this.indexArray2=new Gs,this.programConfigurations=new Co(t.layers,t.zoom),this.segments=new Zo,this.segments2=new Zo,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.projection=t.projection}return d(e,[{key:"populate",value:function(e,t,n,r){this.hasPattern=Qc("fill",this.layers,t);var i,a=this.layers[0].layout.get("fill-sort-key"),s=[],o=p(e);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=u.feature,c=u.id,h=u.index,f=u.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,v=Pl(l,d);if(this.layers[0]._featureFilter.filter(new ts(this.zoom),v,n)){var m=a?a.evaluate(v,{},n,t.availableImages):void 0,y={id:c,properties:l.properties,type:l.type,sourceLayerIndex:f,index:h,geometry:d?v.geometry:Ml(l,n,r),patterns:{},sortKey:m};s.push(y)}}}catch(w){o.e(w)}finally{o.f()}a&&s.sort((function(e,t){return e.sortKey-t.sortKey}));for(var g=0,_=s;g<_.length;g++){var T=_[g],E=T.geometry,x=T.index,b=T.sourceLayerIndex;if(this.hasPattern){var I=Jc("fill",this.layers,T,this.zoom,t);this.patternFeatures.push(I)}else this.addFeature(T,E,x,n,{},t.availableImages);t.featureIndex.insert(e[x].feature,E,x,b,this.index)}}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}},{key:"addFeatures",value:function(e,t,n,r,i){var a,s=p(this.patternFeatures);try{for(s.s();!(a=s.n()).done;){var o=a.value;this.addFeature(o,o.geometry,o.index,t,n,r)}}catch(u){s.e(u)}finally{s.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,yc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}},{key:"addFeature",value:function(e,t,n,r,i){var a,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=p(Xc(t,500));try{for(o.s();!(a=o.n()).done;){var u,l=a.value,c=0,h=p(l);try{for(h.s();!(u=h.n()).done;)c+=u.value.length}catch(w){h.e(w)}finally{h.f()}var f,d=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray),v=d.vertexLength,m=[],y=[],g=p(l);try{for(g.s();!(f=g.n()).done;){var _=f.value;if(0!==_.length){_!==l[0]&&y.push(m.length/2);var T=this.segments2.prepareSegment(_.length,this.layoutVertexArray,this.indexArray2),E=T.vertexLength;this.layoutVertexArray.emplaceBack(_[0].x,_[0].y),this.indexArray2.emplaceBack(E+_.length-1,E),m.push(_[0].x),m.push(_[0].y);for(var x=1;x<_.length;x++)this.layoutVertexArray.emplaceBack(_[x].x,_[x].y),this.indexArray2.emplaceBack(E+x-1,E+x),m.push(_[x].x),m.push(_[x].y);T.vertexLength+=_.length,T.primitiveLength+=_.length}}}catch(w){g.e(w)}finally{g.f()}for(var b=gc(m,y),I=0;I<b.length;I+=3)this.indexArray.emplaceBack(v+b[I],v+b[I+1],v+b[I+2]);d.vertexLength+=c,d.primitiveLength+=b.length/3}}catch(w){o.e(w)}finally{o.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,s,r)}}]),e}();na($c,"FillBucket",{omit:["layers","patternFeatures"]});var eh=new fs({"fill-sort-key":new hs(ct.layout_fill["fill-sort-key"])}),th={paint:new fs({"fill-antialias":new cs(ct.paint_fill["fill-antialias"]),"fill-opacity":new hs(ct.paint_fill["fill-opacity"]),"fill-color":new hs(ct.paint_fill["fill-color"]),"fill-outline-color":new hs(ct.paint_fill["fill-outline-color"]),"fill-translate":new cs(ct.paint_fill["fill-translate"]),"fill-translate-anchor":new cs(ct.paint_fill["fill-translate-anchor"]),"fill-pattern":new hs(ct.paint_fill["fill-pattern"])}),layout:eh},nh=gs([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),rh=gs([{name:"a_centroid_pos",components:2,type:"Uint16"}]),ih=gs([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),ah=nh.members,sh={},oh=R,uh=lh;function lh(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(ch,this,t)}function ch(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function hh(e){for(var t,n,r=0,i=0,a=e.length,s=a-1;i<a;s=i++)r+=((n=e[s]).x-(t=e[i]).x)*(t.y+n.y);return r}lh.types=["Unknown","Point","LineString","Polygon"],lh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,a=0,s=0,o=[];e.pos<n;){if(i<=0){var u=e.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)a+=e.readSVarint(),s+=e.readSVarint(),1===r&&(t&&o.push(t),t=[]),t.push(new oh(a,s));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&o.push(t),o},lh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,a=0,s=1/0,o=-1/0,u=1/0,l=-1/0;e.pos<t;){if(r<=0){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<s&&(s=i),i>o&&(o=i),(a+=e.readSVarint())<u&&(u=a),a>l&&(l=a);else if(7!==n)throw new Error("unknown command "+n)}return[s,u,o,l]},lh.prototype.toGeoJSON=function(e,t,n){var r,i,a=this.extent*Math.pow(2,n),s=this.extent*e,o=this.extent*t,u=this.loadGeometry(),l=lh.types[this.type];function c(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+s)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+o)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<u.length;r++)h[r]=u[r][0];c(u=h);break;case 2:for(r=0;r<u.length;r++)c(u[r]);break;case 3:for(u=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],a=0;a<t;a++){var s=hh(e[a]);0!==s&&(void 0===r&&(r=s<0),r===s<0?(n&&i.push(n),n=[e[a]]):n.push(e[a]))}return n&&i.push(n),i}(u),r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)c(u[r][i])}1===u.length?u=u[0]:l="Multi"+l;var p={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(p.id=this.id),p};var ph=uh,fh=dh;function dh(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(vh,this,t),this.length=this._features.length}function vh(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}dh.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new ph(this._pbf,t,this.extent,this._keys,this._values)};var mh=fh;function yh(e,t,n){if(3===e){var r=new mh(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var gh=sh.VectorTile=function(e,t){this.layers=e.readFields(yh,{},t)},_h=sh.VectorTileFeature=uh;function Th(e,t,n,r){var i,a=[],s=0===r?function(e,t,n,r,i,a){e.push(new R(a,n+(a-t)/(r-t)*(i-n)))}:function(e,t,n,r,i,a){e.push(new R(t+(a-n)/(i-n)*(r-t),a))},o=p(e);try{for(o.s();!(i=o.n()).done;){var u,l=i.value,c=[],h=p(l);try{for(h.s();!(u=h.n()).done;){var f=u.value;if(!(f.length<=2)){for(var d=[],v=0;v<f.length-1;v++){var m=f[v].x,y=f[v].y,g=f[v+1].x,_=f[v+1].y,T=0===r?m:y,E=0===r?g:_;T<t?E>t&&s(d,m,y,g,_,t):T>n?E<n&&s(d,m,y,g,_,n):d.push(f[v]),E<t&&T>=t&&s(d,m,y,g,_,t),E>n&&T<=n&&s(d,m,y,g,_,n)}var x=f[f.length-1],b=0===r?x.x:x.y;b>=t&&b<=n&&d.push(x),d.length&&(x=d[d.length-1],d[0].x===x.x&&d[0].y===x.y||d.push(d[0]),c.push(d))}}}catch(I){h.e(I)}finally{h.f()}c.length&&a.push(c)}}catch(I){o.e(I)}finally{o.f()}return a}sh.VectorTileLayer=fh;var Eh=_h.types,xh=Math.pow(2,13);function bh(e,t,n,r,i,a,s,o){e.emplaceBack((t<<1)+s,(n<<1)+a,(Math.floor(r*xh)<<1)+i,Math.round(o))}function Ih(e,t,n){var r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}var wh=function(){function e(){f(this,e),this.acc=new R(0,0),this.polyCount=[]}return d(e,[{key:"startRing",value:function(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new R(e.x,e.y),this.max=new R(e.x,e.y))}},{key:"append",value:function(e,t){this.currentPolyCount.edges++,this.acc._add(e);var n=this.min,r=this.max;e.x<n.x?n.x=e.x:e.x>r.x&&(r.x=e.x),e.y<n.y?n.y=e.y:e.y>r.y&&(r.y=e.y),((0===e.x||e.x===Bo)&&e.x===t.x)!=((0===e.y||e.y===Bo)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,Gn(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>Bo!=e.x>Bo&&this.addBorderIntersection(1,Gn(t.y,e.y,(Bo-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,Gn(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>Bo!=e.y>Bo&&this.addBorderIntersection(3,Gn(t.x,e.x,(Bo-t.y)/(e.y-t.y)))}},{key:"addBorderIntersection",value:function(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);var n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}},{key:"processBorderOverlap",value:function(e,t){if(e.x===t.x){if(e.y===t.y)return;var n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{var r=0===e.y?2:3;this.addBorderIntersection(r,t.x),this.addBorderIntersection(r,e.x)}}},{key:"centroid",value:function(){var e=this.polyCount.reduce((function(e,t){return e+t.edges}),0);return 0!==e?this.acc.div(e)._round():new R(0,0)}},{key:"span",value:function(){return new R(this.max.x-this.min.x,this.max.y-this.min.y)}},{key:"intersectsCount",value:function(){return this.borders.reduce((function(e,t){return e+ +(t[0]!==Number.MAX_VALUE)}),0)}}]),e}(),kh=function(){function e(t){f(this,e),this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new xs,this.centroidVertexArray=new to,this.indexArray=new Fs,this.programConfigurations=new Co(t.layers,t.zoom),this.segments=new Zo,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.enableTerrain=t.enableTerrain}return d(e,[{key:"populate",value:function(e,t,n,r){this.features=[],this.hasPattern=Qc("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){var t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/Bo/(1<<e.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;var i,a=p(e);try{for(a.s();!(i=a.n()).done;){var s=i.value,o=s.feature,u=s.id,l=s.index,c=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,f=Pl(o,h);if(this.layers[0]._featureFilter.filter(new ts(this.zoom),f,n)){var d={id:u,sourceLayerIndex:c,index:l,geometry:h?f.geometry:Ml(o,n,r),properties:o.properties,type:o.type,patterns:{}},v=this.layoutVertexArray.length;this.hasPattern?this.features.push(Jc("fill-extrusion",this.layers,d,this.zoom,t)):this.addFeature(d,d.geometry,l,n,{},t.availableImages,r),t.featureIndex.insert(o,d.geometry,l,c,this.index,v)}}}catch(m){a.e(m)}finally{a.f()}this.sortBorders()}},{key:"addFeatures",value:function(e,t,n,r,i){var a,s=p(this.features);try{for(s.s();!(a=s.n()).done;){var o=a.value,u=o.geometry;this.addFeature(o,u,o.index,t,n,r,i)}}catch(l){s.e(l)}finally{s.f()}this.sortBorders()}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ah),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,ih.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"uploadCentroid",value:function(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,rh.members,!0),this.needsCentroidUpdate=!1)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(e,t,n,r,i,a,s){var o=[new R(0,0),new R(Bo,Bo)],u=s.projection,l="globe"===u.name,c=this.enableTerrain&&!l?new wh:null,h="Polygon"===Eh[e.type];l&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Ss);for(var f,d,v=Xc(t,500),m=v.length-1;m>=0;m--){var y=v[m];(0===y.length||(f=y[0]).every((function(e){return e.x<=0}))||f.every((function(e){return e.x>=Bo}))||f.every((function(e){return e.y<=0}))||f.every((function(e){return e.y>=Bo})))&&v.splice(m,1)}if(l)d=Mh(v,o,r);else{d=[];var g,_=p(v);try{for(_.s();!(g=_.n()).done;){var T=g.value;d.push({polygon:T,bounds:o})}}catch(De){_.e(De)}finally{_.f()}}var E,x=h?this.edgeRadius:0,b=p(d);try{for(b.s();!(E=b.n()).done;){var I,w=E.value,k=w.polygon,S=w.bounds,C=0,D=0,A=p(k);try{for(A.s();!(I=A.n()).done;){var O=I.value;h&&!O[0].equals(O[O.length-1])&&O.push(O[0]),D+=h?O.length-1:O.length}}catch(De){A.e(De)}finally{A.f()}var N=this.segments.prepareSegment((h?5:4)*D,this.layoutVertexArray,this.indexArray);if(h){var M=[],P=[];C=N.vertexLength;var F,L=p(k);try{for(L.s();!(F=L.n()).done;){var U=F.value,Z=void 0,B=void 0;U.length&&U!==k[0]&&P.push(M.length/2),Z=U[1].sub(U[0])._perp()._unit();for(var z=1;z<U.length;z++){var G=U[z],H=U[z===U.length-1?1:z+1],j=G.x,V=G.y;if(x){B=H.sub(G)._perp()._unit();var W=Z.add(B)._unit(),Y=x*Math.min(4,1/(Z.x*W.x+Z.y*W.y));j+=Y*W.x,V+=Y*W.y,Z=B}bh(this.layoutVertexArray,j,V,0,0,1,1,0),N.vertexLength++,M.push(G.x,G.y),l&&Ih(this.layoutVertexExtArray,u.projectTilePoint(j,V,r),u.upVector(r,j,V))}}}catch(De){L.e(De)}finally{L.f()}for(var q=gc(M,P),X=0;X<q.length;X+=3)this.indexArray.emplaceBack(C+q[X],C+q[X+2],C+q[X+1]),N.primitiveLength++}var K,Q=p(k);try{for(Q.s();!(K=Q.n()).done;){var J=K.value;c&&J.length&&c.startRing(J[0]);var $=void 0,ee=void 0,te=void 0,ne=J.length>4&&Ah(J[J.length-2],J[0],J[1]),re=x?Rh(J[J.length-2],J[0],J[1],x):0;ee=J[1].sub(J[0])._perp()._unit();for(var ie=!0,ae=1,se=0;ae<J.length;ae++){var oe=J[ae-1],ue=J[ae],le=J[ae===J.length-1?1:ae+1];if(c&&h&&c.currentPolyCount.top++,Dh(ue,oe,S))x&&(ee=le.sub(ue)._perp()._unit(),ie=!ie);else{c&&c.append(ue,oe);var ce=ue.sub(oe)._perp(),he=ce.x/(Math.abs(ce.x)+Math.abs(ce.y)),pe=ce.y>0?1:0,fe=oe.dist(ue);if(se+fe>32768&&(se=0),x){te=le.sub(ue)._perp()._unit();var de=Ch(oe,ue,le,Sh(ee,te),x);isNaN(de)&&(de=0);var ve=ue.sub(oe)._unit();oe=oe.add(ve.mult(re))._round(),ue=ue.add(ve.mult(-de))._round(),re=de,ee=te}var me=N.vertexLength,ye=J.length>4&&Ah(oe,ue,le),ge=Oh(se,ne,ie);if(bh(this.layoutVertexArray,oe.x,oe.y,he,pe,0,0,ge),bh(this.layoutVertexArray,oe.x,oe.y,he,pe,0,1,ge),ge=Oh(se+=fe,ye,!ie),ne=ye,bh(this.layoutVertexArray,ue.x,ue.y,he,pe,0,0,ge),bh(this.layoutVertexArray,ue.x,ue.y,he,pe,0,1,ge),N.vertexLength+=4,this.indexArray.emplaceBack(me+0,me+1,me+2),this.indexArray.emplaceBack(me+1,me+3,me+2),N.primitiveLength+=2,x){var _e=C+(1===ae?J.length-2:ae-2),Te=1===ae?C:_e+1;if(this.indexArray.emplaceBack(me+1,_e,me+3),this.indexArray.emplaceBack(_e,Te,me+3),N.primitiveLength+=2,void 0===$&&($=me),!Dh(le,J[ae],S)){var Ee=ae===J.length-1?$:N.vertexLength;this.indexArray.emplaceBack(me+2,me+3,Ee),this.indexArray.emplaceBack(me+3,Ee+1,Ee),this.indexArray.emplaceBack(me+3,Te,Ee+1),N.primitiveLength+=3}ie=!ie}if(l){var xe=this.layoutVertexExtArray,be=u.projectTilePoint(oe.x,oe.y,r),Ie=u.projectTilePoint(ue.x,ue.y,r),we=u.upVector(r,oe.x,oe.y),ke=u.upVector(r,ue.x,ue.y);Ih(xe,be,we),Ih(xe,be,we),Ih(xe,Ie,ke),Ih(xe,Ie,ke)}}}h&&(C+=J.length-1)}}catch(De){Q.e(De)}finally{Q.f()}}}catch(De){b.e(De)}finally{b.f()}if(c&&c.polyCount.length>0){if(c.borders){c.vertexArrayOffset=this.centroidVertexArray.length;for(var Se=c.borders,Re=this.featuresOnBorder.push(c)-1,Ce=0;Ce<4;Ce++)Se[Ce][0]!==Number.MAX_VALUE&&this.borders[Ce].push(Re)}this.encodeCentroid(c.borders?void 0:c.centroid(),c)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,a,r)}},{key:"sortBorders",value:function(){for(var e=this,t=function(t){e.borders[t].sort((function(n,r){return e.featuresOnBorder[n].borders[t][0]-e.featuresOnBorder[r].borders[t][0]}))},n=0;n<4;n++)t(n)}},{key:"encodeCentroid",value:function(e,t){var n,r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e)if(0!==e.y){var a=t.span()._mult(this.tileToMeter);n=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(a.x/10)),r=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(a.y/10))}else n=Math.ceil(7*(e.x+450)),r=0;else n=0,r=+i;var s,o=i?this.centroidVertexArray.length:t.vertexArrayOffset,u=p(t.polyCount);try{for(u.s();!(s=u.n()).done;){var l=s.value;i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*l.edges+l.top);for(var c=0;c<l.top;c++)this.centroidVertexArray.emplace(o++,n,r);for(var h=0;h<2*l.edges;h++)this.centroidVertexArray.emplace(o++,0,r),this.centroidVertexArray.emplace(o++,n,r)}}catch(f){u.e(f)}finally{u.f()}}}]),e}();function Sh(e,t){var n=e.add(t)._unit();return e.x*n.x+e.y*n.y}function Rh(e,t,n,r){var i=t.sub(e)._perp()._unit(),a=n.sub(t)._perp()._unit();return Ch(e,t,n,Sh(i,a),r)}function Ch(e,t,n,r,i){var a=Math.sqrt(1-r*r);return Math.min(e.dist(t)/3,t.dist(n)/3,i*a/r)}function Dh(e,t,n){return e.x<n[0].x&&t.x<n[0].x||e.x>n[1].x&&t.x>n[1].x||e.y<n[0].y&&t.y<n[0].y||e.y>n[1].y&&t.y>n[1].y}function Ah(e,t,n){if(e.x<0||e.x>=Bo||t.x<0||t.x>=Bo||n.x<0||n.x>=Bo)return!1;var r=n.sub(t),i=r.perp(),a=e.sub(t);return(r.x*a.x+r.y*a.y)/Math.sqrt((r.x*r.x+r.y*r.y)*(a.x*a.x+a.y*a.y))>-.866&&i.x*a.x+i.y*a.y<0}function Oh(e,t,n){var r=t?2|e:-3&e;return n?1|r:-2&r}function Nh(){var e=Math.PI/32,t=Math.tan(e),n=dl;return n*Math.sqrt(1+2*t*t)-n}function Mh(e,t,n){var r=1<<n.z,i=El(n.x/r),a=El((n.x+1)/r),s=xl(n.y/r),o=xl((n.y+1)/r);return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0,s=[];if(!e.length||!n||!r)return s;for(var o=function(e,t){var n,r=p(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;s.push({polygon:i,bounds:t})}}catch(a){r.e(a)}finally{r.f()}},u=Math.ceil(Math.log2(n)),l=Math.ceil(Math.log2(r)),c=u-l,h=[],f=0;f<Math.abs(c);f++)h.push(c>0?0:1);for(var d=0;d<Math.min(u,l);d++)h.push(0),h.push(1);var v=e;if(v=Th(v,t[0].y-i,t[1].y+i,1),!(v=Th(v,t[0].x-i,t[1].x+i,0)).length)return s;var m=[];for(h.length?m.push({polygons:v,bounds:t,depth:0}):o(v,t);m.length;){var y=m.pop(),g=y.depth,_=h[g],T=y.bounds[0],E=y.bounds[1],x=0===_?T.x:T.y,b=0===_?E.x:E.y,I=a?a(_,x,b):.5*(x+b),w=Th(y.polygons,x-i,I+i,_),k=Th(y.polygons,I-i,b+i,_);if(w.length){var S=[T,new R(0===_?I:E.x,1===_?I:E.y)];h.length>g+1?m.push({polygons:w,bounds:S,depth:g+1}):o(w,S)}if(k.length){var C=[new R(0===_?I:T.x,1===_?I:T.y),E];h.length>g+1?m.push({polygons:k,bounds:C,depth:g+1}):o(k,C)}}return s}(e,t,Math.ceil((a-i)/11.25),Math.ceil((s-o)/11.25),1,(function(e,t,i){if(0===e)return.5*(t+i);var a=xl((n.y+t/Bo)/r);return(_l(.5*(xl((n.y+i/Bo)/r)+a))*r-n.y)*Bo}))}na(kh,"FillExtrusionBucket",{omit:["layers","features"]}),na(wh,"PartMetadata");var Ph=new fs({"fill-extrusion-edge-radius":new cs(ct["layout_fill-extrusion"]["fill-extrusion-edge-radius"])}),Fh={paint:new fs({"fill-extrusion-opacity":new cs(ct["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new hs(ct["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new cs(ct["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new cs(ct["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new hs(ct["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new hs(ct["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new hs(ct["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new cs(ct["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new cs(ct["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new cs(ct["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:Ph};function Lh(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}var Uh=function(){function e(t,n,r){f(this,e),this.z=t,this.x=n,this.y=r,this.key=zh(0,t,t,n,r)}return d(e,[{key:"equals",value:function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}},{key:"url",value:function(e,t){var n=function(e,t,n){var r=Lh(256*e,256*(t=Math.pow(2,n)-t-1),n),i=Lh(256*(e+1),256*(t+1),n);return r[0]+","+r[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),r=function(e,t,n){for(var r,i="",a=e;a>0;a--)i+=(t&(r=1<<a-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)}},{key:"toString",value:function(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}]),e}(),Zh=d((function e(t,n){f(this,e),this.wrap=t,this.canonical=n,this.key=zh(t,n.z,n.z,n.x,n.y)})),Bh=function(){function e(t,n,r,i,a){f(this,e),this.overscaledZ=t,this.wrap=n,this.canonical=new Uh(r,+i,+a),this.key=0===n&&t===r?this.canonical.key:zh(n,t,r,i,a)}return d(e,[{key:"equals",value:function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}},{key:"scaledTo",value:function(t){var n=this.canonical.z-t;return t>this.canonical.z?new e(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new e(t,this.wrap,t,this.canonical.x>>n,this.canonical.y>>n)}},{key:"calculateScaledKey",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return zh(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);var n=this.canonical.z-e;return zh(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}},{key:"isChildOf",value:function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}},{key:"children",value:function(t){if(this.overscaledZ>=t)return[new e(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var n=this.canonical.z+1,r=2*this.canonical.x,i=2*this.canonical.y;return[new e(n,this.wrap,n,r,i),new e(n,this.wrap,n,r+1,i),new e(n,this.wrap,n,r,i+1),new e(n,this.wrap,n,r+1,i+1)]}},{key:"isLessThan",value:function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}},{key:"wrapped",value:function(){return new e(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"unwrapTo",value:function(t){return new e(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"overscaleFactor",value:function(){return Math.pow(2,this.overscaledZ-this.canonical.z)}},{key:"toUnwrapped",value:function(){return new Zh(this.wrap,this.canonical)}},{key:"toString",value:function(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}}]),e}();function zh(e,t,n,r,i){var a=1<<Math.min(n,22),s=a*(i%a)+r%a;return e&&n<22&&(s+=a*a*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*s+n)+(t-n)}na(Uh,"CanonicalTileID"),na(Bh,"OverscaledTileID",{omit:["projMatrix"]});var Gh=function(e){v(n,e);var t=m(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r)).z=i,a}return d(n)}(R);function Hh(e,t){return e.x*t.x+e.y*t.y}function jh(e,t){if(1===e.length){for(var n,r=0,i=t[r++];!n||i.equals(n);)if(!(n=t[r++]))return 1/0;for(;r<t.length;r++){var a=t[r],s=e[0],o=n.sub(i),u=a.sub(i),l=s.sub(i),c=Hh(o,o),h=Hh(o,u),f=Hh(u,u),d=Hh(l,o),v=Hh(l,u),m=c*f-h*h,y=(f*d-h*v)/m,g=(c*v-h*d)/m,_=i.z*(1-y-g)+n.z*y+a.z*g;if(isFinite(_))return _}return 1/0}var T,E=1/0,x=p(t);try{for(x.s();!(T=x.n()).done;){var b=T.value;E=Math.min(E,b.z)}}catch(I){x.e(I)}finally{x.f()}return E}function Vh(e,t,n,r,i,a,s,o){var u=s*i.getElevationAt(e,t,!0,!0),l=0!==a[0],c=l?0===a[1]?s*(a[0]/7-450):s*function(e,t,n){var r=Math.floor(t[0]/8),i=Math.floor(t[1]/8),a=10*(t[0]-8*r),s=10*(t[1]-8*i),o=e.getElevationAt(r,i,!0,!0),u=e.getMeterToDEM(n),l=Math.floor(.5*(a*u-1)),c=Math.floor(.5*(s*u-1)),h=e.tileCoordToPixel(r,i),p=2*l+1,f=2*c+1,d=function(e,t,n,r,i){return[e.getElevationAtPixel(t,n,!0),e.getElevationAtPixel(t+i,n,!0),e.getElevationAtPixel(t,n+i,!0),e.getElevationAtPixel(t+r,n+i,!0)]}(e,h.x-l,h.y-c,p,f),v=Math.abs(d[0]-d[1]),m=Math.abs(d[2]-d[3]),y=Math.abs(d[0]-d[2])+Math.abs(d[1]-d[3]),g=Math.min(.25,.5*u*(v+m)/p),_=Math.min(.25,.5*u*y/f);return o+Math.max(g*a,_*s)}(i,a,o):u;return{base:u+(0===n)?-1:n,top:l?Math.max(c+r,u+n+2):u+r}}var Wh=gs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4).members,Yh=gs([{name:"a_packed",components:4,type:"Float32"}]).members,qh=_h.types,Xh=Math.cos(Math.PI/180*37.5),Kh=function(){function e(t){var n=this;f(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(e){n.gradients[e.id]={}})),this.layoutVertexArray=new bs,this.layoutVertexArray2=new Is,this.indexArray=new Fs,this.programConfigurations=new Co(t.layers,t.zoom),this.segments=new Zo,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return d(e,[{key:"populate",value:function(e,t,n,r){this.hasPattern=Qc("line",this.layers,t);var i,a=this.layers[0].layout.get("line-sort-key"),s=[],o=p(e);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=u.feature,c=u.id,h=u.index,f=u.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,v=Pl(l,d);if(this.layers[0]._featureFilter.filter(new ts(this.zoom),v,n)){var m=a?a.evaluate(v,{},n):void 0,y={id:c,properties:l.properties,type:l.type,sourceLayerIndex:f,index:h,geometry:d?v.geometry:Ml(l,n,r),patterns:{},sortKey:m};s.push(y)}}}catch(R){o.e(R)}finally{o.f()}a&&s.sort((function(e,t){return e.sortKey-t.sortKey}));for(var g=t.lineAtlas,_=t.featureIndex,T=this.addConstantDashes(g),E=0,x=s;E<x.length;E++){var b=x[E],I=b.geometry,w=b.index,k=b.sourceLayerIndex;if(T&&this.addFeatureDashes(b,g),this.hasPattern){var S=Jc("line",this.layers,b,this.zoom,t);this.patternFeatures.push(S)}else this.addFeature(b,I,w,n,g.positions,t.availableImages);_.insert(e[w].feature,I,w,k,this.index)}}},{key:"addConstantDashes",value:function(e){var t,n=!1,r=p(this.layers);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.paint.get("line-dasharray").value,s=i.layout.get("line-cap").value;if("constant"!==a.kind||"constant"!==s.kind)n=!0;else{var o=s.value,u=a.value;if(!u)continue;e.addDash(u,o)}}}catch(l){r.e(l)}finally{r.f()}return n}},{key:"addFeatureDashes",value:function(e,t){var n,r=this.zoom,i=p(this.layers);try{for(i.s();!(n=i.n()).done;){var a=n.value,s=a.paint.get("line-dasharray").value,o=a.layout.get("line-cap").value;if("constant"!==s.kind||"constant"!==o.kind){var u=void 0,l=void 0;if("constant"===s.kind){if(!(u=s.value))continue}else u=s.evaluate({zoom:r},e);l="constant"===o.kind?o.value:o.evaluate({zoom:r},e),t.addDash(u,l),e.patterns[a.id]=t.getKey(u,l)}}}catch(c){i.e(c)}finally{i.f()}}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}},{key:"addFeatures",value:function(e,t,n,r,i){var a,s=p(this.patternFeatures);try{for(s.s();!(a=s.n()).done;){var o=a.value;this.addFeature(o,o.geometry,o.index,t,n,r)}}catch(u){s.e(u)}finally{s.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Yh)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Wh),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"lineFeatureClips",value:function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}},{key:"addFeature",value:function(e,t,n,r,i,a){var s=this.layers[0].layout,o=s.get("line-join").evaluate(e,{}),u=s.get("line-cap").evaluate(e,{}),l=s.get("line-miter-limit"),c=s.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);var h,f=p(t);try{for(f.s();!(h=f.n()).done;){var d=h.value;this.addLine(d,e,o,u,l,c)}}catch(v){f.e(v)}finally{f.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,a,r)}},{key:"addLine",value:function(e,t,n,r,i,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var s=0;s<e.length-1;s++)this.totalDistance+=e[s].dist(e[s+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var o="Polygon"===qh[t.type],u=e.length;u>=2&&e[u-1].equals(e[u-2]);)u--;for(var l=0;l<u-1&&e[l].equals(e[l+1]);)l++;if(!(u<(o?3:2))){"bevel"===n&&(i=1.05);var c,h,p,f,d,v=this.overscaling<=16?122880/(512*this.overscaling):0,m=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray);this.e1=this.e2=-1,o&&(c=e[u-2],d=e[l].sub(c)._unit()._perp());for(var y=l;y<u;y++)if(!(p=y===u-1?o?e[l+1]:void 0:e[y+1])||!e[y].equals(p)){d&&(f=d),c&&(h=c),c=e[y],d=p?p.sub(c)._unit()._perp():f;var g=(f=f||d).add(d);0===g.x&&0===g.y||g._unit();var _=f.x*d.x+f.y*d.y,T=g.x*d.x+g.y*d.y,E=0!==T?1/T:1/0,x=2*Math.sqrt(2-2*T),b=T<Xh&&h&&p,I=f.x*d.y-f.y*d.x>0;if(b&&y>l){var w=c.dist(h);if(w>2*v){var k=c.sub(c.sub(h)._mult(v/w)._round());this.updateDistance(h,k),this.addCurrentVertex(k,f,0,0,m),h=k}}var S=h&&p,R=S?n:o?"butt":r;if(S&&"round"===R&&(E<a?R="miter":E<=2&&(R="fakeround")),"miter"===R&&E>i&&(R="bevel"),"bevel"===R&&(E>2&&(R="flipbevel"),E<i&&(R="miter")),h&&this.updateDistance(h,c),"miter"===R)g._mult(E),this.addCurrentVertex(c,g,0,0,m);else if("flipbevel"===R){if(E>100)g=d.mult(-1);else{var C=E*f.add(d).mag()/f.sub(d).mag();g._perp()._mult(C*(I?-1:1))}this.addCurrentVertex(c,g,0,0,m),this.addCurrentVertex(c,g.mult(-1),0,0,m)}else if("bevel"===R||"fakeround"===R){var D=-Math.sqrt(E*E-1),A=I?D:0,O=I?0:D;if(h&&this.addCurrentVertex(c,f,A,O,m),"fakeround"===R)for(var N=Math.round(180*x/Math.PI/20),M=1;M<N;M++){var P=M/N;if(.5!==P){var F=P-.5;P+=P*F*(P-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*F*F+(.848013+_*(.215638*_-1.06021)))}var L=d.sub(f)._mult(P)._add(f)._unit()._mult(I?-1:1);this.addHalfVertex(c,L.x,L.y,!1,I,0,m)}p&&this.addCurrentVertex(c,d,-A,-O,m)}else if("butt"===R)this.addCurrentVertex(c,g,0,0,m);else if("square"===R){var U=h?1:-1;h||this.addCurrentVertex(c,g,U,U,m),this.addCurrentVertex(c,g,0,0,m),h&&this.addCurrentVertex(c,g,U,U,m)}else"round"===R&&(h&&(this.addCurrentVertex(c,f,0,0,m),this.addCurrentVertex(c,f,1,1,m,!0)),p&&(this.addCurrentVertex(c,d,-1,-1,m,!0),this.addCurrentVertex(c,d,0,0,m)));if(b&&y<u-1){var Z=c.dist(p);if(Z>2*v){var B=c.add(p.sub(c)._mult(v/Z)._round());this.updateDistance(c,B),this.addCurrentVertex(B,d,0,0,m),c=B}}}}}},{key:"addCurrentVertex",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=t.y*r-t.x,o=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,a,!1,n,i),this.addHalfVertex(e,s,o,a,!0,-r,i)}},{key:"addHalfVertex",value:function(e,t,n,r,i,a,s){var o=e.x,u=e.y;this.layoutVertexArray.emplaceBack((o<<1)+(r?1:0),(u<<1)+(i?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);var l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),i?this.e2=l:this.e1=l}},{key:"updateScaledDistance",value:function(){if(this.lineClips){var e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}},{key:"updateDistance",value:function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}]),e}();na(Kh,"LineBucket",{omit:["layers","patternFeatures"]});var Qh=new fs({"line-cap":new hs(ct.layout_line["line-cap"]),"line-join":new hs(ct.layout_line["line-join"]),"line-miter-limit":new cs(ct.layout_line["line-miter-limit"]),"line-round-limit":new cs(ct.layout_line["line-round-limit"]),"line-sort-key":new hs(ct.layout_line["line-sort-key"])}),Jh={paint:new fs({"line-opacity":new hs(ct.paint_line["line-opacity"]),"line-color":new hs(ct.paint_line["line-color"]),"line-translate":new cs(ct.paint_line["line-translate"]),"line-translate-anchor":new cs(ct.paint_line["line-translate-anchor"]),"line-width":new hs(ct.paint_line["line-width"]),"line-gap-width":new hs(ct.paint_line["line-gap-width"]),"line-offset":new hs(ct.paint_line["line-offset"]),"line-blur":new hs(ct.paint_line["line-blur"]),"line-dasharray":new hs(ct.paint_line["line-dasharray"]),"line-pattern":new hs(ct.paint_line["line-pattern"]),"line-gradient":new ps(ct.paint_line["line-gradient"]),"line-trim-offset":new cs(ct.paint_line["line-trim-offset"])}),layout:Qh},$h=new(function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"possiblyEvaluate",value:function(e,t){return t=new ts(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),s(o(n.prototype),"possiblyEvaluate",this).call(this,e,t)}},{key:"evaluate",value:function(e,t,r,i){return t=H({},t,{zoom:Math.floor(t.zoom)}),s(o(n.prototype),"evaluate",this).call(this,e,t,r,i)}}]),n}(hs))(Jh.paint.properties["line-width"].specification);function ep(e,t){return t>0?t+2*e:e}$h.useIntegerZoom=!0;var tp=gs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),np=gs([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),rp=gs([{name:"a_projected_pos",components:4,type:"Float32"}],4);gs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var ip=gs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),ap=gs([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);gs([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var sp=gs([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),op=gs([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);gs([{name:"triangle",components:3,type:"Uint16"}]),gs([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),gs([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),gs([{type:"Float32",name:"offsetX"}]),gs([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var up=24,lp=128;function cp(e,t){var n=t.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new ts(e+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,a=0;a<r.length&&r[a]<=e;)a++;for(var s=a=Math.max(0,a-1);s<r.length&&r[s]<e+1;)s++;s=Math.min(r.length-1,s);var o=r[a],u=r[s];return"composite"===n.kind?{kind:"composite",minZoom:o,maxZoom:u,interpolationType:i}:{kind:"camera",minZoom:o,maxZoom:u,minSize:n.evaluate(new ts(o)),maxSize:n.evaluate(new ts(u)),interpolationType:i}}function hp(e,t,n){var r=t.uSize,i=t.uSizeT,a=n.lowerSize,s=n.upperSize;return"source"===e.kind?a/lp:"composite"===e.kind?Gn(a/lp,s/lp,i):r}function pp(e,t){var n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){var i=e.interpolationType,a=e.minZoom,s=e.maxZoom,o=i?U(lr.interpolationFactor(i,t,a,s),0,1):0;"camera"===e.kind?r=Gn(e.minSize,e.maxSize,o):n=o}return{uSizeT:n,uSize:r}}var fp=Object.freeze({__proto__:null,getSizeData:cp,evaluateSizeForFeature:hp,evaluateSizeForZoom:pp,SIZE_PACK_FACTOR:lp});function dp(e,t,n){return e.sections.forEach((function(e){e.text=function(e,t,n){var r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),es.applyArabicShaping&&(e=es.applyArabicShaping(e)),e}(e.text,t,n)})),e}var vp={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function mp(e){return"\ufe36"===e||"\ufe48"===e||"\ufe38"===e||"\ufe44"===e||"\ufe42"===e||"\ufe3e"===e||"\ufe3c"===e||"\ufe3a"===e||"\ufe18"===e||"\ufe40"===e||"\ufe10"===e||"\ufe13"===e||"\ufe14"===e||"\uff40"===e||"\uffe3"===e||"\ufe11"===e||"\ufe12"===e}function yp(e){return"\ufe35"===e||"\ufe47"===e||"\ufe37"===e||"\ufe43"===e||"\ufe41"===e||"\ufe3d"===e||"\ufe3b"===e||"\ufe39"===e||"\ufe17"===e||"\ufe3f"===e}var gp=Ep,_p=function(e,t,n,r,i){var a,s,o=8*i-r-1,u=(1<<o)-1,l=u>>1,c=-7,h=n?i-1:0,p=n?-1:1,f=e[t+h];for(h+=p,a=f&(1<<-c)-1,f>>=-c,c+=o;c>0;a=256*a+e[t+h],h+=p,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=r;c>0;s=256*s+e[t+h],h+=p,c-=8);if(0===a)a=1-l;else{if(a===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),a-=l}return(f?-1:1)*s*Math.pow(2,a-r)},Tp=function(e,t,n,r,i,a){var s,o,u,l=8*a-i-1,c=(1<<l)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:a-1,d=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(o=0,s=c):s+h>=1?(o=(t*u-1)*Math.pow(2,i),s+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[n+f]=255&o,f+=d,o/=256,i-=8);for(s=s<<i|o,l+=i;l>0;e[n+f]=255&s,f+=d,s/=256,l-=8);e[n+f-d]|=128*v};function Ep(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Ep.Varint=0,Ep.Fixed64=1,Ep.Bytes=2,Ep.Fixed32=5;var xp=4294967296,bp=1/xp,Ip="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function wp(e){return e.type===Ep.Bytes?e.readVarint()+e.pos:e.pos+1}function kp(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Sp(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function Rp(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function Cp(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function Dp(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Ap(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Op(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Np(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Mp(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Pp(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function Fp(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Lp(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Up(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Zp(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Bp(e,t,n){t.glyphs=[],1===e&&n.readMessage(zp,t)}function zp(e,t,n){if(3===e){var r=n.readMessage(Gp,{}),i=r.id,a=r.bitmap,s=r.width,o=r.height,u=r.left,l=r.top,c=r.advance;t.glyphs.push({id:i,bitmap:new pc({width:s+6,height:o+6},a),metrics:{width:s,height:o,left:u,top:l,advance:c}})}else 4===e?t.ascender=n.readSVarint():5===e&&(t.descender=n.readSVarint())}function Gp(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function Hp(e){var t,n=0,r=0,i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n+=a.w*a.h,r=Math.max(r,a.w)}}catch(m){i.e(m)}finally{i.f()}e.sort((function(e,t){return t.h-e.h}));var s,o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),r),h:1/0}],u=0,l=0,c=p(e);try{for(c.s();!(s=c.n()).done;)for(var h=s.value,f=o.length-1;f>=0;f--){var d=o[f];if(!(h.w>d.w||h.h>d.h)){if(h.x=d.x,h.y=d.y,l=Math.max(l,h.y+h.h),u=Math.max(u,h.x+h.w),h.w===d.w&&h.h===d.h){var v=o.pop();f<o.length&&(o[f]=v)}else h.h===d.h?(d.x+=h.w,d.w-=h.w):h.w===d.w?(d.y+=h.h,d.h-=h.h):(o.push({x:d.x+h.w,y:d.y,w:d.w-h.w,h:h.h}),d.y+=h.h,d.h-=h.h);break}}}catch(m){c.e(m)}finally{c.f()}return{w:u,h:l,fill:n/(u*l)||0}}Ep.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,a=this.pos;this.type=7&r,e(i,t,this),this.pos===a&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Lp(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Zp(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Lp(this.buf,this.pos)+Lp(this.buf,this.pos+4)*xp;return this.pos+=8,e},readSFixed64:function(){var e=Lp(this.buf,this.pos)+Zp(this.buf,this.pos+4)*xp;return this.pos+=8,e},readFloat:function(){var e=_p(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=_p(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,a=n.buf;if(r=(112&(i=a[n.pos++]))>>4,i<128)return kp(e,r,t);if(r|=(127&(i=a[n.pos++]))<<3,i<128)return kp(e,r,t);if(r|=(127&(i=a[n.pos++]))<<10,i<128)return kp(e,r,t);if(r|=(127&(i=a[n.pos++]))<<17,i<128)return kp(e,r,t);if(r|=(127&(i=a[n.pos++]))<<24,i<128)return kp(e,r,t);if(r|=(1&(i=a[n.pos++]))<<31,i<128)return kp(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Ip?function(e,t,n){return Ip.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var a,s,o,u=e[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(a=e[i+1]))&&(l=(31&u)<<6|63&a)<=127&&(l=null):3===c?(s=e[i+2],128==(192&(a=e[i+1]))&&128==(192&s)&&((l=(15&u)<<12|(63&a)<<6|63&s)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(s=e[i+2],o=e[i+3],128==(192&(a=e[i+1]))&&128==(192&s)&&128==(192&o)&&((l=(15&u)<<18|(63&a)<<12|(63&s)<<6|63&o)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Ep.Bytes)return e.push(this.readVarint(t));var n=wp(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Ep.Bytes)return e.push(this.readSVarint());var t=wp(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Ep.Bytes)return e.push(this.readBoolean());var t=wp(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Ep.Bytes)return e.push(this.readFloat());var t=wp(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Ep.Bytes)return e.push(this.readDouble());var t=wp(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Ep.Bytes)return e.push(this.readFixed32());var t=wp(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Ep.Bytes)return e.push(this.readSFixed32());var t=wp(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Ep.Bytes)return e.push(this.readFixed64());var t=wp(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Ep.Bytes)return e.push(this.readSFixed64());var t=wp(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Ep.Varint)for(;this.buf[this.pos++]>127;);else if(t===Ep.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Ep.Fixed32)this.pos+=4;else{if(t!==Ep.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Up(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Up(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Up(this.buf,-1&e,this.pos),Up(this.buf,Math.floor(e*bp),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Up(this.buf,-1&e,this.pos),Up(this.buf,Math.floor(e*bp),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,a=0;a<t.length;a++){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){r>56319||a+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&Sp(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Tp(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Tp(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&Sp(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,Ep.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Rp,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Cp,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Op,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Dp,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Ap,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Np,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Mp,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Pp,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Fp,t)},writeBytesField:function(e,t){this.writeTag(e,Ep.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Ep.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Ep.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Ep.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Ep.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Ep.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Ep.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Ep.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Ep.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Ep.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var jp=function(){function e(t,n){var r=n.pixelRatio,i=n.version,a=n.stretchX,s=n.stretchY,o=n.content;f(this,e),this.paddedRect=t,this.pixelRatio=r,this.stretchX=a,this.stretchY=s,this.content=o,this.version=i}return d(e,[{key:"tl",get:function(){return[this.paddedRect.x+1,this.paddedRect.y+1]}},{key:"br",get:function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}},{key:"displaySize",get:function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}]),e}(),Vp=function(){function e(t,n){f(this,e);var r={},i={};this.haveRenderCallbacks=[];var a=[];this.addImages(t,r,a),this.addImages(n,i,a);var s=Hp(a),o=s.w,u=s.h,l=new fc({width:o||1,height:u||1});for(var c in t){var h=t[c],p=r[c].paddedRect;fc.copy(h.data,l,{x:0,y:0},{x:p.x+1,y:p.y+1},h.data)}for(var d in n){var v=n[d],m=i[d].paddedRect,y=m.x+1,g=m.y+1,_=v.data.width,T=v.data.height;fc.copy(v.data,l,{x:0,y:0},{x:y,y:g},v.data),fc.copy(v.data,l,{x:0,y:T-1},{x:y,y:g-1},{width:_,height:1}),fc.copy(v.data,l,{x:0,y:0},{x:y,y:g+T},{width:_,height:1}),fc.copy(v.data,l,{x:_-1,y:0},{x:y-1,y:g},{width:1,height:T}),fc.copy(v.data,l,{x:0,y:0},{x:y+_,y:g},{width:1,height:T})}this.image=l,this.iconPositions=r,this.patternPositions=i}return d(e,[{key:"addImages",value:function(e,t,n){for(var r in e){var i=e[r],a={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(a),t[r]=new jp(a,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}},{key:"patchUpdatedImages",value:function(e,t){for(var n in this.haveRenderCallbacks=this.haveRenderCallbacks.filter((function(t){return e.hasImage(t)})),e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}},{key:"patchUpdatedImage",value:function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var r=h(e.tl,2),i=r[0],a=r[1];n.update(t.data,void 0,{x:i,y:a})}}}]),e}();na(jp,"ImagePosition"),na(Vp,"ImageAtlas");var Wp={horizontal:1,vertical:2,horizontalOnly:3},Yp=function(){function e(){f(this,e),this.scale=1,this.fontStack="",this.imageName=null}return d(e,null,[{key:"forText",value:function(t,n){var r=new e;return r.scale=t||1,r.fontStack=n,r}},{key:"forImage",value:function(t){var n=new e;return n.imageName=t,n}}]),e}(),qp=function(){function e(){f(this,e),this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}return d(e,[{key:"length",value:function(){return this.text.length}},{key:"getSection",value:function(e){return this.sections[this.sectionIndex[e]]}},{key:"getSections",value:function(){return this.sections}},{key:"getSectionIndex",value:function(e){return this.sectionIndex[e]}},{key:"getCharCode",value:function(e){return this.text.charCodeAt(e)}},{key:"verticalizePunctuation",value:function(e){this.text=function(e,t){for(var n="",r=0;r<e.length;r++){var i=e.charCodeAt(r+1)||null,a=e.charCodeAt(r-1)||null;n+=!t&&(i&&Za(i)&&!vp[e[r+1]]||a&&Za(a)&&!vp[e[r-1]])||!vp[e[r]]?e[r]:vp[e[r]]}return n}(this.text,e)}},{key:"trim",value:function(){for(var e=0,t=0;t<this.text.length&&Kp[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=e&&Kp[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)}},{key:"substring",value:function(t,n){var r=new e;return r.text=this.text.substring(t,n),r.sectionIndex=this.sectionIndex.slice(t,n),r.sections=this.sections,r}},{key:"toString",value:function(){return this.text}},{key:"getMaxScale",value:function(){var e=this;return this.sectionIndex.reduce((function(t,n){return Math.max(t,e.sections[n].scale)}),0)}},{key:"addTextSection",value:function(e,t){this.text+=e.text,this.sections.push(Yp.forText(e.scale,e.fontStack||t));for(var n=this.sections.length-1,r=0;r<e.text.length;++r)this.sectionIndex.push(n)}},{key:"addImageSection",value:function(e){var t=e.image?e.image.name:"";if(0!==t.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Yp.forImage(t)),this.sectionIndex.push(this.sections.length-1)):te("Reached maximum number of images 6401")}else te("Can't add FormattedSection with an empty image.")}},{key:"getNextImageSectionCharCode",value:function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}],[{key:"fromFeature",value:function(t,n){for(var r=new e,i=0;i<t.sections.length;i++){var a=t.sections[i];a.image?r.addImageSection(a):r.addTextSection(a,n)}return r}}]),e}();function Xp(e,t,n,r,i,a,s,o,u,l,c,h,f,d,v){var m=qp.fromFeature(e,i);h===Wp.vertical&&m.verticalizePunctuation(f);var y=[],g=function(e,t,n,r,i,a){if(!e)return[];for(var s,o=[],u=function(e,t,n,r,i,a){for(var s=0,o=0;o<e.length();o++){var u=e.getSection(o);s+=Jp(e.getCharCode(o),u,r,i,t,a)}return s/Math.max(1,Math.ceil(s/n))}(e,t,n,r,i,a),l=e.text.indexOf("\u200b")>=0,c=0,h=0;h<e.length();h++){var p=e.getSection(h),f=e.getCharCode(h);if(Kp[f]||(c+=Jp(f,p,r,i,t,a)),h<e.length()-1){var d=!((s=f)<11904||!(ga(s)||ya(s)||Aa(s)||Ra(s)||xa(s)||ha(s)||_a(s)||da(s)||ba(s)||Ia(s)||Ea(s)||Ma(s)||va(s)||fa(s)||pa(s)||Ta(s)||ma(s)||Da(s)||ka(s)||wa(s)));(Qp[f]||d||p.imageName)&&o.push(tf(h+1,c,u,o,ef(f,e.getCharCode(h+1),d&&l),!1))}}return nf(tf(e.length(),c,u,o,0,!0))}(m,l,a,t,r,d),_=es.processBidirectionalText,T=es.processStyledBidirectionalText;if(_&&1===m.sections.length){var E,x=_(m.toString(),g),b=p(x);try{for(b.s();!(E=b.n()).done;){var I=E.value,w=new qp;w.text=I,w.sections=m.sections;for(var k=0;k<I.length;k++)w.sectionIndex.push(0);y.push(w)}}catch(M){b.e(M)}finally{b.f()}}else if(T){var S,R=T(m.text,m.sectionIndex,g),C=p(R);try{for(C.s();!(S=C.n()).done;){var D=S.value,A=new qp;A.text=D[0],A.sectionIndex=D[1],A.sections=m.sections,y.push(A)}}catch(M){C.e(M)}finally{C.f()}}else y=function(e,t){var n,r=[],i=e.text,a=0,s=p(t);try{for(s.s();!(n=s.n()).done;){var o=n.value;r.push(e.substring(a,o)),a=o}}catch(M){s.e(M)}finally{s.f()}return a<i.length&&r.push(e.substring(a,i.length)),r}(m,g);var O=[],N={positionedLines:O,text:m.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,n,r,i,a,s,o,u,l,c,h){var f,d=0,v=0,m=0,y="right"===o?1:"left"===o?0:.5,g=!1,_=p(i);try{for(_.s();!(f=_.n()).done;){var T,E=f.value.getSections(),x=p(E);try{for(x.s();!(T=x.n()).done;){var b=T.value;if(!b.imageName){var I=t[b.fontStack];if(I&&!(g=void 0!==I.ascender&&void 0!==I.descender))break}}}catch(M){x.e(M)}finally{x.f()}if(!g)break}}catch(M){_.e(M)}finally{_.f()}var w,k,S=0,R=p(i);try{for(R.s();!(w=R.n()).done;){var C=w.value;C.trim();var D=C.getMaxScale(),A=(D-1)*up,O={positionedGlyphs:[],lineOffset:0};e.positionedLines[S]=O;var N=O.positionedGlyphs,P=0;if(C.length()){for(var F=0,L=0,U=0;U<C.length();U++){var Z=C.getSection(U),B=C.getSectionIndex(U),z=C.getCharCode(U),G=Z.scale,H=null,j=null,V=null,W=up,Y=0,q=!(u===Wp.horizontal||!c&&!Ua(z)||c&&(Kp[z]||(k=z,ua(k)||la(k)||ca(k)||Ca(k)||Na(k))));if(Z.imageName){var X=r[Z.imageName];if(!X)continue;V=Z.imageName,e.iconsInText=e.iconsInText||!0,j=X.paddedRect;var K=X.displaySize;G=G*up/h,H={width:K[0],height:K[1],left:1,top:-3,advance:q?K[1]:K[0],localGlyph:!1},Y=g?-H.height*G:D*up-17-K[1]*G,W=H.advance;var Q=(q?K[0]:K[1])*G-up*D;Q>0&&Q>P&&(P=Q)}else{var J=n[Z.fontStack];if(!J)continue;J[z]&&(j=J[z]);var $=t[Z.fontStack];if(!$)continue;var ee=$.glyphs[z];if(!ee)continue;if(H=ee.metrics,W=8203!==z?up:0,g){var te=void 0!==$.ascender?Math.abs($.ascender):0,ne=void 0!==$.descender?Math.abs($.descender):0,re=(te+ne)*G;F<re&&(F=re,L=(te-ne)/2*G),Y=-te*G}else Y=(D-G)*up-17}q?(e.verticalizable=!0,N.push({glyph:z,imageName:V,x:d,y:v+Y,vertical:q,scale:G,localGlyph:H.localGlyph,fontStack:Z.fontStack,sectionIndex:B,metrics:H,rect:j}),d+=W*G+l):(N.push({glyph:z,imageName:V,x:d,y:v+Y,vertical:q,scale:G,localGlyph:H.localGlyph,fontStack:Z.fontStack,sectionIndex:B,metrics:H,rect:j}),d+=H.advance*G+l)}0!==N.length&&(m=Math.max(d-l,m),g?af(N,y,P,L,a*D/2):af(N,y,P,0,a/2)),d=0;var ie=a*D+P;O.lineOffset=Math.max(P,A),v+=ie,++S}else v+=a,++S}}catch(M){R.e(M)}finally{R.f()}var ae=v,se=rf(s),oe=se.horizontalAlign,ue=se.verticalAlign;(function(e,t,n,r,i,a){var s,o=(t-n)*i,u=-a*r,l=p(e);try{for(l.s();!(s=l.n()).done;){var c,h=s.value,f=p(h.positionedGlyphs);try{for(f.s();!(c=f.n()).done;){var d=c.value;d.x+=o,d.y+=u}}catch(M){f.e(M)}finally{f.f()}}}catch(M){l.e(M)}finally{l.f()}})(e.positionedLines,y,oe,ue,m,ae),e.top+=-ue*ae,e.bottom=e.top+ae,e.left+=-oe*m,e.right=e.left+m,e.hasBaseline=g}(N,t,n,r,y,s,o,u,h,l,f,v),!function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;)if(0!==t.value.positionedGlyphs.length)return!1}catch(M){n.e(M)}finally{n.f()}return!0}(O)&&N}var Kp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Qp={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Jp(e,t,n,r,i,a){if(t.imageName){var s=r[t.imageName];return s?s.displaySize[0]*t.scale*up/a+i:0}var o=n[t.fontStack],u=o&&o.glyphs[e];return u?u.metrics.advance*t.scale+i:0}function $p(e,t,n,r){var i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function ef(e,t,n){var r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function tf(e,t,n,r,i,a){var s,o=null,u=$p(t,n,i,a),l=p(r);try{for(l.s();!(s=l.n()).done;){var c=s.value,h=$p(t-c.x,n,i,a)+c.badness;h<=u&&(o=c,u=h)}}catch(f){l.e(f)}finally{l.f()}return{index:e,x:t,priorBreak:o,badness:u}}function nf(e){return e?nf(e.priorBreak).concat(e.index):[]}function rf(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function af(e,t,n,r,i){if(t||n||r||i)for(var a=e.length-1,s=e[a],o=(s.x+s.metrics.advance*s.scale)*t,u=0;u<=a;u++)e[u].x-=o,e[u].y+=n+r+i}function sf(e,t,n){var r=rf(n),i=r.horizontalAlign,a=r.verticalAlign,s=t[0]-e.displaySize[0]*i,o=t[1]-e.displaySize[1]*a;return{image:e,top:o,bottom:o+e.displaySize[1],left:s,right:s+e.displaySize[0]}}function of(e,t,n,r,i,a){var s,o=e.image;if(o.content){var u=o.content,l=o.pixelRatio||1;s=[u[0]/l,u[1]/l,o.displaySize[0]-u[2]/l,o.displaySize[1]-u[3]/l]}var c,h,p,f,d=t.left*a,v=t.right*a;"width"===n||"both"===n?(f=i[0]+d-r[3],h=i[0]+v+r[1]):h=(f=i[0]+(d+v-o.displaySize[0])/2)+o.displaySize[0];var m=t.top*a,y=t.bottom*a;return"height"===n||"both"===n?(c=i[1]+m-r[0],p=i[1]+y+r[2]):p=(c=i[1]+(m+y-o.displaySize[1])/2)+o.displaySize[1],{image:o,top:c,right:h,bottom:p,left:f,collisionPadding:s}}var uf=function(e){v(n,e);var t=m(n);function n(e,r,i,a,s){var o;return f(this,n),(o=t.call(this,e,r)).angle=a,o.z=i,void 0!==s&&(o.segment=s),o}return d(n,[{key:"clone",value:function(){return new n(this.x,this.y,this.z,this.angle,this.segment)}}]),n}(R);function lf(e,t,n,r,i){if(void 0===t.segment)return!0;for(var a=t,s=t.segment+1,o=0;o>-n/2;){if(--s<0)return!1;o-=e[s].dist(a),a=e[s]}o+=e[s].dist(e[s+1]),s++;for(var u=[],l=0;o<n/2;){var c=e[s],h=e[s+1];if(!h)return!1;var p=e[s-1].angleTo(c)-c.angleTo(h);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:o,angleDelta:p}),l+=p;o-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;s++,o+=c.dist(h)}return!0}function cf(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function hf(e,t,n){return e?.6*t*n:0}function pf(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function ff(e,t,n,r,i,a){for(var s=hf(n,i,a),o=pf(n,r)*a,u=0,l=cf(e)/2,c=0;c<e.length-1;c++){var h=e[c],p=e[c+1],f=h.dist(p);if(u+f>l){var d=(l-u)/f,v=Gn(h.x,p.x,d),m=Gn(h.y,p.y,d),y=new uf(v,m,0,p.angleTo(h),c);return!s||lf(e,y,o,s,t)?y:void 0}u+=f}}function df(e,t,n,r,i,a,s,o,u){var l=hf(r,a,s),c=pf(r,i),h=c*s,p=0===e[0].x||e[0].x===u||0===e[0].y||e[0].y===u;return t-h<t/4&&(t=h+t/4),vf(e,p?t/2*o%t:(c/2+2*a)*s*o%t,t,l,n,h,p,!1,u)}function vf(e,t,n,r,i,a,s,o,u){for(var l=a/2,c=cf(e),h=0,p=t-n,f=[],d=0;d<e.length-1;d++){for(var v=e[d],m=e[d+1],y=v.dist(m),g=m.angleTo(v);p+n<h+y;){var _=((p+=n)-h)/y,T=Gn(v.x,m.x,_),E=Gn(v.y,m.y,_);if(T>=0&&T<u&&E>=0&&E<u&&p-l>=0&&p+l<=c){var x=new uf(T,E,0,g,d);x._round(),r&&!lf(e,x,a,r,i)||f.push(x)}}h+=y}return o||f.length||s||(f=vf(e,h/2,n,r,i,a,s,!0,u)),f}function mf(e,t,n,r,i){for(var a=[],s=0;s<e.length;s++)for(var o=e[s],u=void 0,l=0;l<o.length-1;l++){var c=o[l],h=o[l+1];c.x<t&&h.x<t||(c.x<t?c=new R(t,c.y+(t-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x<t&&(h=new R(t,c.y+(t-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y<n&&h.y<n||(c.y<n?c=new R(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round():h.y<n&&(h=new R(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round()),c.x>=r&&h.x>=r||(c.x>=r?c=new R(r,c.y+(r-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x>=r&&(h=new R(r,c.y+(r-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y>=i&&h.y>=i||(c.y>=i?c=new R(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round():h.y>=i&&(h=new R(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round()),u&&c.equals(u[u.length-1])||(u=[c],a.push(u)),u.push(h)))))}return a}na(uf,"Anchor");var yf=1e20;function gf(e,t,n,r,i,a,s,o,u){for(var l=t;l<t+r;l++)_f(e,n*a+l,a,i,s,o,u);for(var c=n;c<n+i;c++)_f(e,c*a+t,1,r,s,o,u)}function _f(e,t,n,r,i,a,s){a[0]=0,s[0]=-yf,s[1]=yf,i[0]=e[t];for(var o=1,u=0,l=0;o<r;o++){i[o]=e[t+o*n];var c=o*o;do{var h=a[u];l=(i[o]-i[h]+c-h*h)/(o-h)/2}while(l<=s[u]&&--u>-1);a[++u]=o,s[u]=l,s[u+1]=yf}for(var p=0,f=0;p<r;p++){for(;s[f+1]<p;)f++;var d=a[f],v=p-d;e[t+p*n]=i[d]+v*v}}var Tf={none:0,ideographs:1,all:2},Ef=function(){function e(t,n,r){f(this,e),this.requestManager=t,this.localGlyphMode=n,this.localFontFamily=r,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}return d(e,[{key:"setURL",value:function(e){this.url=e}},{key:"getGlyphs",value:function(t,n){var r=this,i=[];for(var a in t){var s,o=p(t[a]);try{for(o.s();!(s=o.n()).done;){var u=s.value;i.push({stack:a,id:u})}}catch(l){o.e(l)}finally{o.f()}}z(i,(function(t,n){var i=t.stack,a=t.id,s=r.entries[i];s||(s=r.entries[i]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});var o=s.glyphs[a];if(void 0===o){if(o=r._tinySDF(s,i,a))return s.glyphs[a]=o,void n(null,{stack:i,id:a,glyph:o});var u=Math.floor(a/256);if(256*u>65535)n(new Error("glyphs > 65535 not supported"));else if(s.ranges[u])n(null,{stack:i,id:a,glyph:o});else{var c=s.requests[u];c||(c=s.requests[u]=[],e.loadGlyphRange(i,u,r.url,r.requestManager,(function(e,t){if(t){for(var n in s.ascender=t.ascender,s.descender=t.descender,t.glyphs)r._doesCharSupportLocalGlyph(+n)||(s.glyphs[+n]=t.glyphs[+n]);s.ranges[u]=!0}var i,a=p(c);try{for(a.s();!(i=a.n()).done;)(0,i.value)(e,t)}catch(l){a.e(l)}finally{a.f()}delete s.requests[u]}))),c.push((function(e,t){e?n(e):t&&n(null,{stack:i,id:a,glyph:t.glyphs[a]||null})}))}}else n(null,{stack:i,id:a,glyph:o})}),(function(e,t){if(e)n(e);else if(t){var i,a={},s=p(t);try{for(s.s();!(i=s.n()).done;){var o=i.value,u=o.stack,c=o.id,h=o.glyph;void 0===a[u]&&(a[u]={}),void 0===a[u].glyphs&&(a[u].glyphs={}),a[u].glyphs[c]=h&&{id:h.id,bitmap:h.bitmap.clone(),metrics:h.metrics},a[u].ascender=r.entries[u].ascender,a[u].descender=r.entries[u].descender}}catch(l){s.e(l)}finally{s.f()}n(null,a)}}))}},{key:"_doesCharSupportLocalGlyph",value:function(e){return this.localGlyphMode!==Tf.none&&(this.localGlyphMode===Tf.all?!!this.localFontFamily:!!this.localFontFamily&&(Ia(e)||Sa(e)||va(e)||ma(e)||da(e)))}},{key:"_tinySDF",value:function(t,n,r){var i=this.localFontFamily;if(i&&this._doesCharSupportLocalGlyph(r)){var a=t.tinySDF;if(!a){var s="400";/bold/i.test(n)?s="900":/medium/i.test(n)?s="500":/light/i.test(n)&&(s="200"),(a=t.tinySDF=new e.TinySDF({fontFamily:i,fontWeight:s,fontSize:48,buffer:6,radius:16})).fontWeight=s}if(this.localGlyphs[a.fontWeight][r])return this.localGlyphs[a.fontWeight][r];var o=String.fromCharCode(r),u=a.draw(o),l=u.data,c=u.width,h=u.height,p=u.glyphWidth,f=u.glyphHeight,d=u.glyphLeft,v=u.glyphTop,m=u.glyphAdvance;return this.localGlyphs[a.fontWeight][r]={id:r,bitmap:new pc({width:c,height:h},l),metrics:{width:p/2,height:f/2,left:d/2,top:v/2-27,advance:m/2,localGlyph:!0}}}}}]),e}();function xf(e,t,n,r){var i=[],a=e.image,s=a.pixelRatio,o=a.paddedRect.w-2,u=a.paddedRect.h-2,l=e.right-e.left,c=e.bottom-e.top,h=a.stretchX||[[0,o]],p=a.stretchY||[[0,u]],f=function(e,t){return e+t[1]-t[0]},d=h.reduce(f,0),v=p.reduce(f,0),m=o-d,y=u-v,g=0,_=d,T=0,E=v,x=0,b=m,I=0,w=y;if(a.content&&r){var k=a.content;g=bf(h,0,k[0]),T=bf(p,0,k[1]),_=bf(h,k[0],k[2]),E=bf(p,k[1],k[3]),x=k[0]-g,I=k[1]-T,b=k[2]-k[0]-_,w=k[3]-k[1]-E}var S=function(r,i,o,u){var h=wf(r.stretch-g,_,l,e.left),p=kf(r.fixed-x,b,r.stretch,d),f=wf(i.stretch-T,E,c,e.top),m=kf(i.fixed-I,w,i.stretch,v),y=wf(o.stretch-g,_,l,e.left),k=kf(o.fixed-x,b,o.stretch,d),S=wf(u.stretch-T,E,c,e.top),C=kf(u.fixed-I,w,u.stretch,v),D=new R(h,f),A=new R(y,f),O=new R(y,S),N=new R(h,S),M=new R(p/s,m/s),P=new R(k/s,C/s),F=t*Math.PI/180;if(F){var L=Math.sin(F),U=Math.cos(F),Z=[U,-L,L,U];D._matMult(Z),A._matMult(Z),N._matMult(Z),O._matMult(Z)}var B=r.stretch+r.fixed,z=i.stretch+i.fixed;return{tl:D,tr:A,bl:N,br:O,tex:{x:a.paddedRect.x+1+B,y:a.paddedRect.y+1+z,w:o.stretch+o.fixed-B,h:u.stretch+u.fixed-z},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:M,pixelOffsetBR:P,minFontScaleX:b/s/l,minFontScaleY:w/s/c,isSDF:n}};if(r&&(a.stretchX||a.stretchY))for(var C=If(h,m,d),D=If(p,y,v),A=0;A<C.length-1;A++)for(var O=C[A],N=C[A+1],M=0;M<D.length-1;M++)i.push(S(O,D[M],N,D[M+1]));else i.push(S({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:o+1},{fixed:0,stretch:u+1}));return i}function bf(e,t,n){var r,i=0,a=p(e);try{for(a.s();!(r=a.n()).done;){var s=r.value;i+=Math.max(t,Math.min(n,s[1]))-Math.max(t,Math.min(n,s[0]))}}catch(o){a.e(o)}finally{a.f()}return i}function If(e,t,n){var r,i=[{fixed:-1,stretch:0}],a=p(e);try{for(a.s();!(r=a.n()).done;){var s=h(r.value,2),o=s[0],u=s[1],l=i[i.length-1];i.push({fixed:o-l.stretch,stretch:l.stretch}),i.push({fixed:o-l.stretch,stretch:l.stretch+(u-o)})}}catch(c){a.e(c)}finally{a.f()}return i.push({fixed:t+1,stretch:n}),i}function wf(e,t,n,r){return e/t*n+r}function kf(e,t,n,r){return e-t*n/r}function Sf(e,t,n,r){var i=t+e.positionedLines[r].lineOffset;return 0===r?n+i/2:n+(i+(t+e.positionedLines[r-1].lineOffset))/2}Ef.loadGlyphRange=function(e,t,n,r,i){var a=256*t,s=a+255,o=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}","".concat(a,"-").concat(s)),_e.Glyphs);be(o,(function(e,t){if(e)i(e);else if(t){var n,r={},a=function(e){return new gp(e).readFields(Bp,{})}(t),s=p(a.glyphs);try{for(s.s();!(n=s.n()).done;){var o=n.value;r[o.id]=o}}catch(u){s.e(u)}finally{s.f()}i(null,{glyphs:r,ascender:a.ascender,descender:a.descender})}}))},Ef.TinySDF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fontSize,r=void 0===n?24:n,i=t.buffer,a=void 0===i?3:i,s=t.radius,o=void 0===s?8:s,u=t.cutoff,l=void 0===u?.25:u,c=t.fontFamily,h=void 0===c?"sans-serif":c,p=t.fontWeight,d=void 0===p?"normal":p,v=t.fontStyle,m=void 0===v?"normal":v;f(this,e),this.buffer=a,this.cutoff=l,this.radius=o;var y=this.size=r+4*a,g=this._createCanvas(y),_=this.ctx=g.getContext("2d",{willReadFrequently:!0});_.font="".concat(m," ").concat(d," ").concat(r,"px ").concat(h),_.textBaseline="alphabetic",_.textAlign="left",_.fillStyle="black",this.gridOuter=new Float64Array(y*y),this.gridInner=new Float64Array(y*y),this.f=new Float64Array(y),this.z=new Float64Array(y+1),this.v=new Uint16Array(y)}return d(e,[{key:"_createCanvas",value:function(e){var t=document.createElement("canvas");return t.width=t.height=e,t}},{key:"draw",value:function(e){var t=this.ctx.measureText(e),n=t.width,r=t.actualBoundingBoxAscent,i=t.actualBoundingBoxDescent,a=t.actualBoundingBoxLeft,s=t.actualBoundingBoxRight,o=Math.ceil(r),u=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(s-a))),l=Math.min(this.size-this.buffer,o+Math.ceil(i)),c=u+2*this.buffer,h=l+2*this.buffer,p=Math.max(c*h,0),f=new Uint8ClampedArray(p),d={data:f,width:c,height:h,glyphWidth:u,glyphHeight:l,glyphTop:o,glyphLeft:0,glyphAdvance:n};if(0===u||0===l)return d;var v=this.ctx,m=this.buffer,y=this.gridInner,g=this.gridOuter;v.clearRect(m,m,u,l),v.fillText(e,m,m+o);var _=v.getImageData(m,m,u,l);g.fill(yf,0,p),y.fill(0,0,p);for(var T=0;T<l;T++)for(var E=0;E<u;E++){var x=_.data[4*(T*u+E)+3]/255;if(0!==x){var b=(T+m)*c+E+m;if(1===x)g[b]=0,y[b]=yf;else{var I=.5-x;g[b]=I>0?I*I:0,y[b]=I<0?I*I:0}}}gf(g,0,0,c,h,c,this.f,this.v,this.z),gf(y,m,m,u,l,c,this.f,this.v,this.z);for(var w=0;w<p;w++){var k=Math.sqrt(g[w])-Math.sqrt(y[w]);f[w]=Math.round(255-255*(k/this.radius+this.cutoff))}return d}}]),e}();var Rf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cf;if(f(this,e),this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}return d(e,[{key:"push",value:function(e){this.data.push(e),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,a=t[i];if(n(r,a)>=0)break;t[e]=a,e=i}t[e]=r}},{key:"_down",value:function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var a=1+(e<<1),s=t[a],o=a+1;if(o<this.length&&n(t[o],s)<0&&(a=o,s=t[o]),n(s,i)>=0)break;t[e]=s,e=a}t[e]=i}}]),e}();function Cf(e,t){return e<t?-1:e>t?1:0}function Df(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1/0,i=1/0,a=-1/0,s=-1/0,o=e[0],u=0;u<o.length;u++){var l=o[u];(!u||l.x<r)&&(r=l.x),(!u||l.y<i)&&(i=l.y),(!u||l.x>a)&&(a=l.x),(!u||l.y>s)&&(s=l.y)}var c=Math.min(a-r,s-i),h=c/2,p=new Rf([],Af);if(0===c)return new R(r,i);for(var f=r;f<a;f+=c)for(var d=i;d<s;d+=c)p.push(new Of(f+h,d+h,h,e));for(var v=function(e){for(var t=0,n=0,r=0,i=e[0],a=0,s=i.length,o=s-1;a<s;o=a++){var u=i[a],l=i[o],c=u.x*l.y-l.x*u.y;n+=(u.x+l.x)*c,r+=(u.y+l.y)*c,t+=3*c}return new Of(n/t,r/t,0,e)}(e),m=p.length;p.length;){var y=p.pop();(y.d>v.d||!v.d)&&(v=y,n&&console.log("found best %d after %d probes",Math.round(1e4*y.d)/1e4,m)),y.max-v.d<=t||(h=y.h/2,p.push(new Of(y.p.x-h,y.p.y-h,h,e)),p.push(new Of(y.p.x+h,y.p.y-h,h,e)),p.push(new Of(y.p.x-h,y.p.y+h,h,e)),p.push(new Of(y.p.x+h,y.p.y+h,h,e)),m+=4)}return n&&(console.log("num probes: ".concat(m)),console.log("best distance: ".concat(v.d))),v.p}function Af(e,t){return t.max-e.max}function Of(e,t,n,r){this.p=new R(e,t),this.h=n,this.d=function(e,t){for(var n=!1,r=1/0,i=0;i<t.length;i++)for(var a=t[i],s=0,o=a.length,u=o-1;s<o;u=s++){var l=a[s],c=a[u];l.y>e.y!=c.y>e.y&&e.x<(c.x-l.x)*(e.y-l.y)/(c.y-l.y)+l.x&&(n=!n),r=Math.min(r,Wl(e,l,c))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}var Nf=Number.POSITIVE_INFINITY,Mf=Math.sqrt(2);function Pf(e,t){var n=h(t,2),r=n[0],i=n[1],a=0,s=0;if(i===Nf){r<0&&(r=0);var o=r/Mf;switch(e){case"top-right":case"top-left":s=o-7;break;case"bottom-right":case"bottom-left":s=7-o;break;case"bottom":s=7-r;break;case"top":s=r-7}switch(e){case"top-right":case"bottom-right":a=-o;break;case"top-left":case"bottom-left":a=o;break;case"left":a=r;break;case"right":a=-r}}else{switch(r=Math.abs(r),i=Math.abs(i),e){case"top-right":case"top-left":case"top":s=i-7;break;case"bottom-right":case"bottom-left":case"bottom":s=7-i}switch(e){case"top-right":case"bottom-right":case"right":a=-r;break;case"top-left":case"bottom-left":case"left":a=r}}return[a,s]}function Ff(e,t,n,r,i,a,s,o,u,l){e.createArrays(),e.tilePixelRatio=Bo/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var c=e.layers[0].layout,h=e.layers[0]._unevaluatedLayout._values,f={};if("composite"===e.textSizeData.kind){var d=e.textSizeData,v=d.minZoom,m=d.maxZoom;f.compositeTextSizes=[h["text-size"].possiblyEvaluate(new ts(v),o),h["text-size"].possiblyEvaluate(new ts(m),o)]}if("composite"===e.iconSizeData.kind){var y=e.iconSizeData,g=y.minZoom,_=y.maxZoom;f.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new ts(g),o),h["icon-size"].possiblyEvaluate(new ts(_),o)]}f.layoutTextSize=h["text-size"].possiblyEvaluate(new ts(u+1),o),f.layoutIconSize=h["icon-size"].possiblyEvaluate(new ts(u+1),o),f.textMaxSize=h["text-size"].possiblyEvaluate(new ts(18),o);var T,E="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),x=c.get("text-size"),b=p(e.features);try{var I=function(){var a,u=T.value,h=c.get("text-font").evaluate(u,{},o).join(","),p=x.evaluate(u,{},o),d=f.layoutTextSize.evaluate(u,{},o),v=(f.layoutIconSize.evaluate(u,{},o),{horizontal:{},vertical:void 0}),m=u.text,y=[0,0];if(m){var g=m.toString(),_=c.get("text-letter-spacing").evaluate(u,{},o)*up,b=c.get("text-line-height").evaluate(u,{},o)*up,I=Fa(g)?_:0,w=c.get("text-anchor").evaluate(u,{},o),k=c.get("text-variable-anchor");if(!k){var S=c.get("text-radial-offset").evaluate(u,{},o);y=S?Pf(w,[S*up,Nf]):c.get("text-offset").evaluate(u,{},o).map((function(e){return e*up}))}var R=E?"center":c.get("text-justify").evaluate(u,{},o),C="point"===c.get("symbol-placement"),D=C?c.get("text-max-width").evaluate(u,{},o)*up:1/0,A=function(r){e.allowVerticalPlacement&&Pa(g)&&(v.vertical=Xp(m,t,n,i,h,D,b,w,r,I,y,Wp.vertical,!0,d,p))};if(!E&&k){for(var O="auto"===R?k.map((function(e){return Lf(e)})):[R],N=!1,M=0;M<O.length;M++){var P=O[M];if(!v.horizontal[P])if(N)v.horizontal[P]=v.horizontal[0];else{var F=Xp(m,t,n,i,h,D,b,"center",P,I,y,Wp.horizontal,!1,d,p);F&&(v.horizontal[P]=F,N=1===F.positionedLines.length)}}A("left")}else{if("auto"===R&&(R=Lf(w)),C||c.get("text-writing-mode").indexOf("horizontal")>=0||!Pa(g)){var L=Xp(m,t,n,i,h,D,b,w,R,I,y,Wp.horizontal,!1,d,p);L&&(v.horizontal[R]=L)}A(C?"left":R)}}var U=!1;if(u.icon&&u.icon.name){var Z=r[u.icon.name];Z&&(a=sf(i[u.icon.name],c.get("icon-offset").evaluate(u,{},o),c.get("icon-anchor").evaluate(u,{},o)),U=Z.sdf,void 0===e.sdfIcons?e.sdfIcons=Z.sdf:e.sdfIcons!==Z.sdf&&te("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Z.pixelRatio!==e.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}var B=zf(v.horizontal)||v.vertical;e.iconsInText||(e.iconsInText=!!B&&B.iconsInText),(B||a)&&Uf(e,u,v,a,r,f,d,0,y,U,s,o,l)};for(b.s();!(T=b.n()).done;)I()}catch(w){b.e(w)}finally{b.f()}a&&e.generateCollisionDebugBuffers(u,e.collisionBoxArray)}function Lf(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Uf(e,t,n,r,i,a,s,o,u,l,c,f,d){var v=a.textMaxSize.evaluate(t,{},f);void 0===v&&(v=s);var m,y,g=e.layers[0].layout,_=g.get("icon-offset").evaluate(t,{},f),T=zf(n.horizontal)||n.vertical,E="globe"===d.name,x=s/24,b=e.tilePixelRatio*v/24,I=(m=e.overscaling,e.zoom>18&&m>2&&(m>>=1),Math.max(Bo/(512*m),1)*g.get("symbol-spacing")),w=g.get("text-padding")*e.tilePixelRatio,k=g.get("icon-padding")*e.tilePixelRatio,S=O(g.get("text-max-angle")),R="map"===g.get("text-rotation-alignment")&&"point"!==g.get("symbol-placement"),C="map"===g.get("icon-rotation-alignment")&&"point"!==g.get("symbol-placement"),D=g.get("symbol-placement"),A=I/2,N=g.get("icon-text-fit");r&&"none"!==N&&(e.allowVerticalPlacement&&n.vertical&&(y=of(r,n.vertical,N,g.get("icon-text-fit-padding"),_,x)),T&&(r=of(r,T,N,g.get("icon-text-fit-padding"),_,x)));var M=function(s,o,p){if(!(o.x<0||o.x>=Bo||o.y<0||o.y>=Bo)){var v=null;if(E){var m=d.projectTilePoint(o.x,o.y,p),g=m.x,T=m.y,x=m.z;v={anchor:new uf(g,T,x,0,void 0),up:d.upVector(p,o.x,o.y)}}!function(e,t,n,r,i,a,s,o,u,l,c,p,f,d,v,m,y,g,_,T,E,x,b,I,w){var k,S,R,C,D,A,O,N,M,P=e.addToLineVertexArray(t,r),F=0,L=0,U=0,Z=0,B=-1,z=-1,G={},H=io(""),j=n?n.anchor:t,V=0,W=0;if(void 0===u._unevaluatedLayout.getValue("text-radial-offset")?(k=u.layout.get("text-offset").evaluate(E,{},w).map((function(e){return e*up})),V=(S=h(k,2))[0],W=S[1]):(V=u.layout.get("text-radial-offset").evaluate(E,{},w)*up,W=Nf),e.allowVerticalPlacement&&i.vertical){var Y=i.vertical;if(v)N=Hf(Y),o&&(M=Hf(o));else{var q=u.layout.get("text-rotate").evaluate(E,{},w)+90;D=Gf(l,j,t,c,p,f,Y,d,q,m),o&&(A=Gf(l,j,t,c,p,f,o,g,q))}}if(a){var X=u.layout.get("icon-rotate").evaluate(E,{},w),K="none"!==u.layout.get("icon-text-fit"),Q=xf(a,X,b,K),J=o?xf(o,X,b,K):void 0;C=Gf(l,j,t,c,p,f,a,g,X),F=4*Q.length;var $=e.iconSizeData,ee=null;"source"===$.kind?(ee=[lp*u.layout.get("icon-size").evaluate(E,{},w)])[0]>Zf&&te("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')):"composite"===$.kind&&((ee=[lp*x.compositeIconSizes[0].evaluate(E,{},w),lp*x.compositeIconSizes[1].evaluate(E,{},w)])[0]>Zf||ee[1]>Zf)&&te("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')),e.addSymbols(e.icon,Q,ee,T,_,E,!1,n,t,P.lineStartIndex,P.lineLength,-1,I,w),B=e.icon.placedSymbolArray.length-1,J&&(L=4*J.length,e.addSymbols(e.icon,J,ee,T,_,E,Wp.vertical,n,t,P.lineStartIndex,P.lineLength,-1,I,w),z=e.icon.placedSymbolArray.length-1)}for(var ne in i.horizontal){var re=i.horizontal[ne];R||(H=io(re.text),v?O=Hf(re):R=Gf(l,j,t,c,p,f,re,d,u.layout.get("text-rotate").evaluate(E,{},w),m));var ie=1===re.positionedLines.length;if(U+=Bf(e,n,t,re,s,u,v,E,m,P,i.vertical?Wp.horizontal:Wp.horizontalOnly,ie?Object.keys(i.horizontal):[ne],G,B,x,I,w),ie)break}i.vertical&&(Z+=Bf(e,n,t,i.vertical,s,u,v,E,m,P,Wp.vertical,["vertical"],G,z,x,I,w));var ae=-1,se=function(e,t){return e?Math.max(e,t):t};ae=se(O,ae),ae=se(N,ae);var oe=(ae=se(M,ae))>-1?1:0;e.glyphOffsetArray.length>=xd.MAX_GLYPHS&&te("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==E.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,E.sortKey),e.symbolInstances.emplaceBack(j.x,j.y,j.z,t.x,t.y,G.right>=0?G.right:-1,G.center>=0?G.center:-1,G.left>=0?G.left:-1,G.vertical>=0?G.vertical:-1,B,z,H,void 0!==R?R:e.collisionBoxArray.length,void 0!==R?R+1:e.collisionBoxArray.length,void 0!==D?D:e.collisionBoxArray.length,void 0!==D?D+1:e.collisionBoxArray.length,void 0!==C?C:e.collisionBoxArray.length,void 0!==C?C+1:e.collisionBoxArray.length,A||e.collisionBoxArray.length,A?A+1:e.collisionBoxArray.length,c,U,Z,F,L,oe,0,V,W,ae)}(e,o,v,s,n,r,i,y,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,w,R,u,0,k,C,_,t,a,l,c,f)}};if("line"===D){var P,F=p(mf(t.geometry,0,0,Bo,Bo));try{for(F.s();!(P=F.n()).done;){var L,U=P.value,Z=df(U,I,S,n.vertical||T,r,24,b,e.overscaling,Bo),B=p(Z);try{for(B.s();!(L=B.n()).done;){var z=L.value;T&&jf(e,T.text,A,z)||M(U,z,f)}}catch(se){B.e(se)}finally{B.f()}}}catch(se){F.e(se)}finally{F.f()}}else if("line-center"===D){var G,H=p(t.geometry);try{for(H.s();!(G=H.n()).done;){var j=G.value;if(j.length>1){var V=ff(j,S,n.vertical||T,r,24,b);V&&M(j,V,f)}}}catch(se){H.e(se)}finally{H.f()}}else if("Polygon"===t.type){var W,Y=p(Xc(t.geometry,0));try{for(Y.s();!(W=Y.n()).done;){var q=W.value,X=Df(q,16);M(q[0],new uf(X.x,X.y,0,0,void 0),f)}}catch(se){Y.e(se)}finally{Y.f()}}else if("LineString"===t.type){var K,Q=p(t.geometry);try{for(Q.s();!(K=Q.n()).done;){var J=K.value;M(J,new uf(J[0].x,J[0].y,0,0,void 0),f)}}catch(se){Q.e(se)}finally{Q.f()}}else if("Point"===t.type){var $,ee=p(t.geometry);try{for(ee.s();!($=ee.n()).done;){var ne,re=$.value,ie=p(re);try{for(ie.s();!(ne=ie.n()).done;){var ae=ne.value;M([ae],new uf(ae.x,ae.y,0,0,void 0),f)}}catch(se){ie.e(se)}finally{ie.f()}}}catch(se){ee.e(se)}finally{ee.f()}}}var Zf=32640;function Bf(e,t,n,r,i,s,o,u,l,h,f,d,v,m,y,g,_){var T=function(e,t,n,r,i,s,o,u){var l=[];if(0===t.positionedLines.length)return l;var h,f=r.layout.get("text-rotate").evaluate(s,{})*Math.PI/180,d=function(e){var t=e[0],n=e[1],r=t*n;return r>0?[t,-n]:r<0?[-t,n]:0===t?[n,t]:[n,-t]}(n),v=Math.abs(t.top-t.bottom),m=p(t.positionedLines);try{for(m.s();!(h=m.n()).done;)v-=h.value.lineOffset}catch(se){m.e(se)}finally{m.f()}for(var y=t.positionedLines.length,g=v/y,_=t.top-n[1],T=0;T<y;++T){var E=t.positionedLines[T];_=Sf(t,g,_,T);var x,b=p(E.positionedGlyphs);try{for(b.s();!(x=b.n()).done;){var I=x.value;if(I.rect){var w=I.rect||{},k=4,S=!0,C=1,D=0;if(I.imageName){var A=o[I.imageName];if(!A)continue;if(A.sdf){te("SDF images are not supported in formatted text and will be ignored.");continue}S=!1,k=1/(C=A.pixelRatio)}var O=(i||u)&&I.vertical,N=I.metrics.advance*I.scale/2,M=I.metrics,P=I.rect;if(null!==P){u&&t.verticalizable&&(D=I.imageName?N-I.metrics.width*I.scale/2:0);var F=i?[I.x+N,I.y]:[0,0],L=[0,0],U=[0,0],Z=!1;i||(O?(U=[I.x+N+d[0],I.y+d[1]-D],Z=!0):L=[I.x+N+n[0],I.y+n[1]-D]);var B=P.w*I.scale/(C*(I.localGlyph?2:1)),z=P.h*I.scale/(C*(I.localGlyph?2:1)),G=void 0,H=void 0,j=void 0,V=void 0;if(O){var W=I.y-_,Y=new R(-N,N-W),q=-Math.PI/2,X=a(R,c(U));(G=new R(-N+L[0],L[1]))._rotateAround(q,Y)._add(X),G.x+=-W+N,G.y-=(M.left-k)*I.scale;var K=I.imageName?M.advance*I.scale:up*I.scale,Q=String.fromCharCode(I.glyph);mp(Q)?G.x+=(1-k)*I.scale:yp(Q)?G.x+=K-M.height*I.scale+(-k-1)*I.scale:G.x+=I.imageName||M.width+2*k===P.w&&M.height+2*k===P.h?(K-z)/2:(K-(M.height+2*k)*I.scale)/2,H=new R(G.x,G.y-B),j=new R(G.x+z,G.y),V=new R(G.x+z,G.y-B)}else{var J=(M.left-k)*I.scale-N+L[0],$=(-M.top-k)*I.scale+L[1],ee=J+B,ne=$+z;G=new R(J,$),H=new R(ee,$),j=new R(J,ne),V=new R(ee,ne)}if(f){var re=void 0;re=i?new R(0,0):Z?new R(d[0],d[1]):new R(n[0],n[1]),G._rotateAround(f,re),H._rotateAround(f,re),j._rotateAround(f,re),V._rotateAround(f,re)}var ie=new R(0,0),ae=new R(0,0);l.push({tl:G,tr:H,bl:j,br:V,tex:w,writingMode:t.writingMode,glyphOffset:F,sectionIndex:I.sectionIndex,isSDF:S,pixelOffsetTL:ie,pixelOffsetBR:ae,minFontScaleX:0,minFontScaleY:0})}}}}catch(se){b.e(se)}finally{b.f()}}return l}(0,r,l,s,o,u,i,e.allowVerticalPlacement),E=e.textSizeData,x=null;"source"===E.kind?(x=[lp*s.layout.get("text-size").evaluate(u,{},_)])[0]>Zf&&te("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')):"composite"===E.kind&&((x=[lp*y.compositeTextSizes[0].evaluate(u,{},_),lp*y.compositeTextSizes[1].evaluate(u,{},_)])[0]>Zf||x[1]>Zf)&&te("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')),e.addSymbols(e.text,T,x,l,o,u,f,t,n,h.lineStartIndex,h.lineLength,m,g,_);var b,I=p(d);try{for(I.s();!(b=I.n()).done;)v[b.value]=e.text.placedSymbolArray.length-1}catch(w){I.e(w)}finally{I.f()}return 4*T.length}function zf(e){for(var t in e)return e[t];return null}function Gf(e,t,n,r,i,a,s,o,u,l){var c=s.top,h=s.bottom,p=s.left,f=s.right,d=s.collisionPadding;if(d&&(p-=d[0],c-=d[1],f+=d[2],h+=d[3]),u){var v=new R(p,c),m=new R(f,c),y=new R(p,h),g=new R(f,h),_=O(u),T=new R(0,0);l&&(T=new R(l[0],l[1])),v._rotateAround(_,T),m._rotateAround(_,T),y._rotateAround(_,T),g._rotateAround(_,T),p=Math.min(v.x,m.x,y.x,g.x),f=Math.max(v.x,m.x,y.x,g.x),c=Math.min(v.y,m.y,y.y,g.y),h=Math.max(v.y,m.y,y.y,g.y)}return e.emplaceBack(t.x,t.y,t.z,n.x,n.y,p,c,f,h,o,r,i,a),e.length-1}function Hf(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);var t=e.bottom-e.top;return t>0?Math.max(10,t):null}function jf(e,t,n,r){var i=e.compareText;if(t in i){for(var a=i[t],s=a.length-1;s>=0;s--)if(r.dist(a[s])<n)return!0}else i[t]=[];return i[t].push(r),!1}function Vf(e,t){var n=e.fovAboveCenter,r=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,i=(e._camera.position[2]*e.worldSize-r)/Math.cos(e._pitch),a=Math.sin(n)*i/Math.sin(Math.max(Math.PI/2-e._pitch-n,.01)),s=Math.sin(e._pitch)*a+i;return Math.min(1.01*s,i*(1/e._horizonShift))}function Wf(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};var n=Math.pow(2,-e.z),r=e.x*n,i=(e.x+1)*n,a=e.y*n,s=(e.y+1)*n,o=El(r),u=El(i),l=xl(a),c=xl(s),h=t.project(o,l),p=t.project(u,l),f=t.project(u,c),d=t.project(o,c),v=Math.min(h.x,p.x,f.x,d.x),m=Math.min(h.y,p.y,f.y,d.y),y=Math.max(h.x,p.x,f.x,d.x),g=Math.max(h.y,p.y,f.y,d.y),_=n/16;function T(e,n,r,i,a,s){var o=(r+a)/2,u=(i+s)/2,l=t.project(El(o),xl(u)),c=Math.max(0,v-l.x,m-l.y,l.x-y,l.y-g);v=Math.min(v,l.x),y=Math.max(y,l.x),m=Math.min(m,l.y),g=Math.max(g,l.y),c>_&&(T(e,l,r,i,o,u),T(l,n,o,u,a,s))}T(h,p,r,a,i,a),T(p,f,i,a,i,s),T(f,d,i,s,r,s),T(d,h,r,s,r,a),v-=_,m-=_,y+=_,g+=_;var E=1/Math.max(y-v,g-m);return{scale:E,x:v*E,y:m*E,x2:y*E,y2:g*E,projection:t}}var Yf=Wo(new Float32Array(16)),qf=function(){function e(t){f(this,e),this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}return d(e,[{key:"project",value:function(e,t){return{x:0,y:0,z:0}}},{key:"unproject",value:function(e,t){return new ml(0,0)}},{key:"projectTilePoint",value:function(e,t,n){return{x:e,y:t,z:0}}},{key:"locationPoint",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e._coordinatePoint(e.locationCoordinate(t),n)}},{key:"pixelsPerMeter",value:function(e,t){return Tl(1,e)*t}},{key:"pixelSpaceConversion",value:function(e,t,n){return 1}},{key:"farthestPixelDistance",value:function(e){return Vf(e,e.pixelsPerMeter)}},{key:"pointCoordinate",value:function(e,t,n,r){var i=e.horizonLineFromTop(!1),a=new R(t,Math.max(i,n));return e.rayIntersectionCoordinate(e.pointRayIntersection(a,r))}},{key:"pointCoordinate3D",value:function(e,t,n){var r=new R(t,n);if(e.elevation)return e.elevation.pointCoordinate(r);var i=this.pointCoordinate(e,r.x,r.y,0);return[i.x,i.y,i.z]}},{key:"isPointAboveHorizon",value:function(e,t){if(e.elevation)return!this.pointCoordinate3D(e,t.x,t.y);var n=e.horizonLineFromTop();return t.y<n}},{key:"createInversionMatrix",value:function(e,t){return Yf}},{key:"createTileMatrix",value:function(e,t,n){var r,i,a,s=n.canonical,o=Wo(new Float64Array(16));if(this.isReprojectedInTileSpace){var u=Wf(s,this);r=1,i=u.x+n.wrap*u.scale,a=u.y,Ko(o,o,[r/u.scale,r/u.scale,e.pixelsPerMeter/t])}else r=t/e.zoomScale(s.z),i=(s.x+Math.pow(2,s.z)*n.wrap)*r,a=s.y*r;return Xo(o,o,[i,a,0]),Ko(o,o,[r/Bo,r/Bo,1]),o}},{key:"upVector",value:function(e,t,n){return[0,0,1]}},{key:"upVectorScale",value:function(e,t,n){return{metersToTile:1}}}]),e}(),Xf=function(e){v(n,e);var t=m(n);function n(e){var r;f(this,n),(r=t.call(this,e)).range=[4,7],r.center=e.center||[-96,37.5];var i=r.parallels=e.parallels||[29.5,45.5],a=h(i,2),s=a[0],o=a[1],u=Math.sin(O(s));return r.n=(u+Math.sin(O(o)))/2,r.c=1+u*(2*r.n-u),r.r0=Math.sqrt(r.c)/r.n,r}return d(n,[{key:"project",value:function(e,t){var n=this.n,r=this.c,i=this.r0,a=O(e-this.center[0]),s=O(t),o=Math.sqrt(r-2*n*Math.sin(s))/n;return{x:o*Math.sin(a*n),y:o*Math.cos(a*n)-i,z:0}}},{key:"unproject",value:function(e,t){var n=this.n,r=this.c,i=this.r0+t,a=Math.atan2(e,Math.abs(i))*Math.sign(i);i*n<0&&(a-=Math.PI*Math.sign(e)*Math.sign(i));var s=O(this.center[0])*n,o=U(N((a=B(a,-Math.PI-s,Math.PI-s))/n)+this.center[0],-180,180),u=Math.asin(U((r-(e*e+i*i)*n*n)/(2*n),-1,1)),l=U(N(u),-Il,Il);return new ml(o,l)}}]),n}(qf),Kf=1.340264,Qf=-.081106,Jf=893e-6,$f=.003796,ed=Math.sqrt(3)/2,td=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"project",value:function(e,t){t=t/180*Math.PI,e=e/180*Math.PI;var n=Math.asin(ed*Math.sin(t)),r=n*n,i=r*r*r;return{x:.5*(e*Math.cos(n)/(ed*(Kf+3*Qf*r+i*(7*Jf+9*$f*r)))/Math.PI+.5),y:1-.5*(n*(Kf+Qf*r+i*(Jf+$f*r))/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI;for(var n,r=t=(2*(1-t)-1)*Math.PI,i=r*r,a=i*i*i,s=0;s<12&&(a=(i=(r=U(r-(n=(r*(Kf+Qf*i+a*(Jf+$f*i))-t)/(Kf+3*Qf*i+a*(7*Jf+9*$f*i))),-Math.PI/3,Math.PI/3))*r)*i*i,!(Math.abs(n)<1e-12));++s);var o=ed*e*(Kf+3*Qf*i+a*(7*Jf+9*$f*i))/Math.cos(r),u=Math.asin(Math.sin(r)/ed),l=U(180*o/Math.PI,-180,180),c=U(180*u/Math.PI,-Il,Il);return new ml(l,c)}}]),n}(qf),nd=function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).wrap=!0,r.supportsWorldCopies=!0,r}return d(n,[{key:"project",value:function(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}},{key:"unproject",value:function(e,t){var n=360*(e-.5),r=U(360*(.5-t),-Il,Il);return new ml(n,r)}}]),n}(qf),rd=Math.PI/2;function id(e){return Math.tan((rd+e)/2)}var ad=function(e){v(n,e);var t=m(n);function n(e){var r;f(this,n),(r=t.call(this,e)).center=e.center||[0,30];var i=r.parallels=e.parallels||[30,30],a=h(i,2),s=a[0],o=a[1],u=O(s),l=O(o);r.southernCenter=u+l<0,r.southernCenter&&(u=-u,l=-l);var c=Math.cos(u),p=id(u);return r.n=u===l?Math.sin(u):Math.log(c/Math.cos(l))/Math.log(id(l)/p),r.f=c*Math.pow(id(u),r.n)/r.n,r}return d(n,[{key:"project",value:function(e,t){t=O(t),this.southernCenter&&(t=-t),e=O(e-this.center[0]);var n=1e-6,r=this.n,i=this.f;i>0?t<-rd+n&&(t=-rd+n):t>rd-n&&(t=rd-n);var a=i/Math.pow(id(t),r),s=a*Math.sin(r*e),o=i-a*Math.cos(r*e);return s=.5*(s/Math.PI+.5),o=.5*(o/Math.PI+.5),{x:s,y:this.southernCenter?o:1-o,z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI,this.southernCenter&&(t=1-t),t=(2*(1-t)-.5)*Math.PI;var n=this.n,r=this.f,i=r-t,a=Math.sign(i),s=Math.sign(n)*Math.sqrt(e*e+i*i),o=Math.atan2(e,Math.abs(i))*a;i*n<0&&(o-=Math.PI*Math.sign(e)*a);var u=U(N(o/n)+this.center[0],-180,180),l=U(N(2*Math.atan(Math.pow(r/s,1/n))-rd),-Il,Il);return new ml(u,this.southernCenter?-l:l)}}]),n}(qf),sd=function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).wrap=!0,r.supportsWorldCopies=!0,r.supportsTerrain=!0,r.supportsFog=!0,r.supportsFreeCamera=!0,r.isReprojectedInTileSpace=!1,r.unsupportedLayers=[],r.range=null,r}return d(n,[{key:"project",value:function(e,t){return{x:gl(e),y:_l(t),z:0}}},{key:"unproject",value:function(e,t){var n=El(e),r=xl(t);return new ml(n,r)}}]),n}(qf),od=O(Il),ud=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"project",value:function(e,t){var n=(t=O(t))*t,r=n*n;return{x:.5*((e=O(e))*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI;var n=t=(2*(1-t)-1)*Math.PI,r=25,i=0,a=n*n;do{var s=(a=n*n)*a;n=U(n-(i=(n*(1.007226+a*(.015085+s*(.028874*a-.044475-.005916*s)))-t)/(1.007226+a*(.045255+s*(.259866*a-.311325-.005916*11*s)))),-od,od)}while(Math.abs(i)>1e-6&&--r>0);var o=U(N(e/(.8707+(a=n*n)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979))),-180,180),u=N(n);return new ml(o,u)}}]),n}(qf),ld=O(Il),cd=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"project",value:function(e,t){t=O(t),e=O(e);var n=Math.cos(t),r=2/Math.PI,i=Math.acos(n*Math.cos(e/2)),a=Math.sin(i)/i,s=.5*(e*r+2*n*Math.sin(e/2)/a)||0,o=.5*(t+Math.sin(t)/a)||0;return{x:.5*(s/Math.PI+.5),y:1-.5*(o/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){var n=e=(2*e-.5)*Math.PI,r=t=(2*(1-t)-1)*Math.PI,i=25,a=1e-6,s=0,o=0;do{var u=Math.cos(r),l=Math.sin(r),c=2*l*u,h=l*l,p=u*u,f=Math.cos(n/2),d=Math.sin(n/2),v=2*f*d,m=d*d,y=1-p*f*f,g=y?1/y:0,_=y?Math.acos(u*f)*Math.sqrt(1/y):0,T=.5*(2*_*u*d+2*n/Math.PI)-e,E=.5*(_*l+r)-t,x=.5*g*(p*m+_*u*f*h)+1/Math.PI,b=g*(v*c/4-_*l*d),I=.125*g*(c*d-_*l*p*v),w=.5*g*(h*f+_*m*u)+.5,k=b*I-w*x;o=(T*I-E*x)/k,n=U(n-(s=(E*b-T*w)/k),-Math.PI,Math.PI),r=U(r-o,-ld,ld)}while((Math.abs(s)>a||Math.abs(o)>a)&&--i>0);return new ml(N(n),N(r))}}]),n}(qf),hd=function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).center=e.center||[0,0],r.parallels=e.parallels||[0,0],r.cosPhi=Math.max(.01,Math.cos(O(r.parallels[0]))),r.scale=1/(2*Math.max(Math.PI*r.cosPhi,1/r.cosPhi)),r.wrap=!0,r.supportsWorldCopies=!0,r}return d(n,[{key:"project",value:function(e,t){var n=this.scale,r=this.cosPhi;return{x:O(e)*r*n+.5,y:-Math.sin(O(t))/r*n+.5,z:0}}},{key:"unproject",value:function(e,t){var n=this.scale,r=this.cosPhi,i=-(t-.5)/n,a=U(N((e-.5)/n)/r,-180,180),s=Math.asin(U(i*r,-1,1)),o=U(N(s),-Il,Il);return new ml(a,o)}}]),n}(qf),pd=function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).requiresDraping=!0,r.supportsWorldCopies=!1,r.supportsFog=!0,r.zAxisUnit="pixels",r.unsupportedLayers=["debug"],r.range=[3,5],r}return d(n,[{key:"projectTilePoint",value:function(e,t,n){var r=nl(e,t,n);return mu(r,r,al(Yu(n))),{x:r[0],y:r[1],z:r[2]}}},{key:"locationPoint",value:function(e,t){var n=tl(t.lat,t.lng),r=fu([],n),i=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(t),e._centerAltitude):e._centerAltitude;pu(n,n,r,Tl(1,0)*Bo*i);var a=Wo(new Float64Array(16));return qo(a,e.pixelMatrix,e.globeMatrix),mu(n,n,a),new R(n[0],n[1])}},{key:"pixelsPerMeter",value:function(e,t){return Tl(1,0)*t}},{key:"pixelSpaceConversion",value:function(e,t,n){var r=Tl(1,e)*t,i=Gn(Tl(1,45)*t,r,n);return this.pixelsPerMeter(e,t)/i}},{key:"createTileMatrix",value:function(e,t,n){var r=sl(Yu(n.canonical));return qo(new Float64Array(16),e.globeMatrix,r)}},{key:"createInversionMatrix",value:function(e,t){var n=e.center,r=al(Yu(t));return Jo(r,r,O(n.lng)),Qo(r,r,O(n.lat)),Ko(r,r,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(r)}},{key:"pointCoordinate",value:function(e,t,n,r){return ju(e,t,n,!0)||new kl(0,0)}},{key:"pointCoordinate3D",value:function(e,t,n){var r=this.pointCoordinate(e,t,n,0);return[r.x,r.y,r.z]}},{key:"isPointAboveHorizon",value:function(e,t){return!ju(e,t.x,t.y,!1)}},{key:"farthestPixelDistance",value:function(e){var t=function(e,t){var n,r=e.cameraToCenterDistance,i=e._centerAltitude*t,a=e._camera,s=e._camera.forward(),o=su([],hu([],s,-r),[0,0,i]),u=e.worldSize/(2*Math.PI),l=[0,0,-u],c=e.width/e.height,h=Math.tan(e.fovAboveCenter),p=hu([],a.up(),h),f=hu([],a.right(),h*c),d=fu([],su([],su([],s,p),f)),v=[];if(new Nu(o,d).closestPointOnSphere(l,u,v)){var m=su([],v,l),y=_u([],m,o);n=Math.cos(e.fovAboveCenter)*iu(y)}else{var g=_u([],o,l),_=_u([],l,o);fu(_,_);var T=iu(g)-u;n=Math.sqrt(T*(T+2*u));var E=Math.acos(n/(u+T))-Math.acos(du(s,_));n*=Math.cos(E)}return 1.01*n}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),n=ul(e.zoom);if(n>0){var r=Vf(e,Tl(1,e.center.lat)*e.worldSize),i=e.worldSize/(2*Math.PI),a=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Gn(t,r+i*(1-Math.cos(a)),Math.pow(n,10))}return t}},{key:"upVector",value:function(e,t,n){return nl(t,n,e,1)}},{key:"upVectorScale",value:function(e){return{metersToTile:Hu(rl(Yu(e)))}}}]),n}(sd);function fd(e){var t=e.parallels,n=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new sd(e);case"equirectangular":return new nd(e);case"naturalEarth":return new ud(e);case"equalEarth":return new td(e);case"winkelTripel":return new cd(e);case"albers":return n?new hd(e):new Xf(e);case"lambertConformalConic":return n?new hd(e):new ad(e);case"globe":return new pd(e)}throw new Error("Invalid projection name: ".concat(e.name))}var dd=_h.types,vd=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function md(e,t,n,r,i,a,s,o,u,l,c,h,p){var f=o?Math.min(Zf,Math.round(o[0])):0,d=o?Math.min(Zf,Math.round(o[1])):0;e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),a,s,(f<<1)+(u?1:0),d,16*l,16*c,256*h,256*p)}function yd(e,t,n,r,i,a,s){e.emplaceBack(t,n,r,i,a,s)}function gd(e,t,n,r,i){e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i)}function _d(e){var t,n=p(e.sections);try{for(n.s();!(t=n.n()).done;)if(Ga(t.value.text))return!0}catch(r){n.e(r)}finally{n.f()}return!1}var Td=function(){function e(t){f(this,e),this.layoutVertexArray=new Rs,this.indexArray=new Fs,this.programConfigurations=t,this.segments=new Zo,this.dynamicLayoutVertexArray=new Is,this.opacityVertexArray=new Ds,this.placedSymbolArray=new qs,this.globeExtVertexArray=new Cs}return d(e,[{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}},{key:"upload",value:function(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,tp.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,rp.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,vd,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,np.members,!0)),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}]),e}();na(Td,"SymbolBuffers");var Ed=function(){function e(t,n,r){f(this,e),this.layoutVertexArray=new t,this.layoutAttributes=n,this.indexArray=new r,this.segments=new Zo,this.collisionVertexArray=new Ms,this.collisionVertexArrayExt=new Ps}return d(e,[{key:"upload",value:function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,ip.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,ap.members,!0)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}]),e}();na(Ed,"CollisionBuffers");var xd=function(){function e(t){f(this,e),this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Wo([]),this.placementViewportMatrix=Wo([]);var n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=cp(this.zoom,n["text-size"]),this.iconSizeData=cp(this.zoom,n["icon-size"]);var r=this.layers[0].layout,i=r.get("symbol-sort-key"),a=r.get("symbol-z-order");this.canOverlap=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=r.get("text-writing-mode").map((function(e){return Wp[e]})),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=t.sourceID,this.projection=t.projection}return d(e,[{key:"createArrays",value:function(){this.text=new Td(new Co(this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new Td(new Co(this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.glyphOffsetArray=new Qs,this.lineVertexArray=new Js,this.symbolInstances=new Ks}},{key:"calculateGlyphDependencies",value:function(e,t,n,r,i){for(var a=0;a<e.length;a++)if(t[e.charCodeAt(a)]=!0,r&&i){var s=vp[e.charAt(a)];s&&(t[s.charCodeAt(0)]=!0)}}},{key:"populate",value:function(e,t,n,r){var i=this,a=this.layers[0],s=a.layout,o="globe"===this.projection.name,u=s.get("text-font"),l=s.get("text-field"),c=s.get("icon-image"),h=("constant"!==l.value.kind||l.value.value instanceof jt&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==u.value.kind||u.value.value.length>0),f="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,d=s.get("symbol-sort-key");if(this.features=[],h||f){var v,m=t.iconDependencies,y=t.glyphDependencies,g=t.availableImages,_=new ts(this.zoom),T=p(e);try{var E=function(){var e,t,l=v.value,c=l.feature,T=l.id,E=l.index,x=l.sourceLayerIndex,b=a._featureFilter.needGeometry,I=Pl(c,b);if(!a._featureFilter.filter(_,I,n))return"continue";if(b||(I.geometry=Ml(c,n,r)),o&&1!==c.type&&n.z<=5)for(var w=I.geometry,k=.98078528056,S=function(e,t){return du(nl(e.x,e.y,n,1),nl(t.x,t.y,n,1))<k},R=0;R<w.length;R++)w[R]=Dl(w[R],S);if(h){var C=a.getValueAndResolveTokens("text-field",I,n,g),D=jt.factory(C);_d(D)&&(i.hasRTLText=!0),(!i.hasRTLText||"unavailable"===Ja()||i.hasRTLText&&es.isParsed())&&(e=dp(D,a,I))}if(f){var A=a.getValueAndResolveTokens("icon-image",I,n,g);t=A instanceof Vt?A:Vt.fromString(A)}if(!e&&!t)return"continue";var O=i.sortFeaturesByKey?d.evaluate(I,{},n):void 0;if(i.features.push({id:T,text:e,icon:t,index:E,sourceLayerIndex:x,geometry:I.geometry,properties:c.properties,type:dd[c.type],sortKey:O}),t&&(m[t.name]=!0),e){var N=u.evaluate(I,{},n).join(","),M="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement");i.allowVerticalPlacement=i.writingModes&&i.writingModes.indexOf(Wp.vertical)>=0;var P,F=p(e.sections);try{for(F.s();!(P=F.n()).done;){var L=P.value;if(L.image)m[L.image.name]=!0;else{var U=Pa(e.toString()),Z=L.fontStack||N,B=y[Z]=y[Z]||{};i.calculateGlyphDependencies(L.text,B,M,i.allowVerticalPlacement,U)}}}catch(z){F.e(z)}finally{F.f()}}};for(T.s();!(v=T.n()).done;)E()}catch(x){T.e(x)}finally{T.f()}"line"===s.get("symbol-placement")&&(this.features=function(e){var t={},n={},r=[],i=0;function a(t){r.push(e[t]),i++}function s(e,t,i){var a=n[e];return delete n[e],n[t]=a,r[a].geometry[0].pop(),r[a].geometry[0]=r[a].geometry[0].concat(i[0]),a}function o(e,n,i){var a=t[n];return delete t[n],t[e]=a,r[a].geometry[0].shift(),r[a].geometry[0]=i[0].concat(r[a].geometry[0]),a}function u(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(r.x,":").concat(r.y)}for(var l=0;l<e.length;l++){var c=e[l],h=c.geometry,p=c.text?c.text.toString():null;if(p){var f=u(p,h),d=u(p,h,!0);if(f in n&&d in t&&n[f]!==t[d]){var v=o(f,d,h),m=s(f,d,r[v].geometry);delete t[f],delete n[d],n[u(p,r[m].geometry,!0)]=m,r[v].geometry=null}else f in n?s(f,d,h):d in t?o(f,d,h):(a(l),t[f]=i-1,n[d]=i-1)}else a(l)}return r.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n,r))}},{key:"isEmpty",value:function(){return 0===this.symbolInstances.length&&!this.hasRTLText}},{key:"uploadPending",value:function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}},{key:"upload",value:function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}},{key:"destroyDebugData",value:function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}},{key:"getProjection",value:function(){return this.projectionInstance||(this.projectionInstance=fd(this.projection)),this.projectionInstance}},{key:"destroy",value:function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}},{key:"addToLineVertexArray",value:function(e,t){var n=this.lineVertexArray.length;if(void 0!==e.segment){var r,i=p(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,s=a.x,o=a.y;this.lineVertexArray.emplaceBack(s,o)}}catch(u){i.e(u)}finally{i.f()}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}},{key:"addSymbols",value:function(e,t,n,r,i,a,s,o,u,l,c,p,f,d){for(var v=e.indexArray,m=e.layoutVertexArray,y=e.globeExtVertexArray,g=e.segments.prepareSegment(4*t.length,m,v,this.canOverlap?a.sortKey:void 0),_=this.glyphOffsetArray.length,T=g.vertexLength,E=this.allowVerticalPlacement&&s===Wp.vertical?Math.PI/2:0,x=a.text&&a.text.sections,b=0;b<t.length;b++){var I=t[b],w=I.tl,k=I.tr,S=I.bl,R=I.br,C=I.tex,D=I.pixelOffsetTL,A=I.pixelOffsetBR,O=I.minFontScaleX,N=I.minFontScaleY,M=I.glyphOffset,P=I.isSDF,F=I.sectionIndex,L=g.vertexLength,U=M[1];if(md(m,u.x,u.y,w.x,U+w.y,C.x,C.y,n,P,D.x,D.y,O,N),md(m,u.x,u.y,k.x,U+k.y,C.x+C.w,C.y,n,P,A.x,D.y,O,N),md(m,u.x,u.y,S.x,U+S.y,C.x,C.y+C.h,n,P,D.x,A.y,O,N),md(m,u.x,u.y,R.x,U+R.y,C.x+C.w,C.y+C.h,n,P,A.x,A.y,O,N),o){var Z=o.anchor,B=Z.x,z=Z.y,G=Z.z,H=h(o.up,3),j=H[0],V=H[1],W=H[2];yd(y,B,z,G,j,V,W),yd(y,B,z,G,j,V,W),yd(y,B,z,G,j,V,W),yd(y,B,z,G,j,V,W),gd(e.dynamicLayoutVertexArray,B,z,G,E)}else gd(e.dynamicLayoutVertexArray,u.x,u.y,u.z,E);v.emplaceBack(L,L+1,L+2),v.emplaceBack(L+1,L+2,L+3),g.vertexLength+=4,g.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(M[0]),b!==t.length-1&&F===t[b+1].sectionIndex||e.programConfigurations.populatePaintArrays(m.length,a,a.index,{},f,d,x&&x[F])}var Y=o?o.anchor:u;e.placedSymbolArray.emplaceBack(Y.x,Y.y,Y.z,u.x,u.y,_,this.glyphOffsetArray.length-_,T,l,c,u.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],s,0,!1,0,p,0)}},{key:"_commitLayoutVertex",value:function(e,t,n,r,i,a,s){e.emplaceBack(t,n,r,i,a,Math.round(s.x),Math.round(s.y))}},{key:"_addCollisionDebugVertices",value:function(e,t,n,r,i,a,s){for(var o=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),u=o.vertexLength,l=s.tileAnchorX,c=s.tileAnchorY,h=0;h<4;h++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,l,c,new R(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,l,c,new R(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,l,c,new R(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,l,c,new R(e.x1,e.y2)),o.vertexLength+=4;var p=n.indexArray;p.emplaceBack(u,u+1),p.emplaceBack(u+1,u+2),p.emplaceBack(u+2,u+3),p.emplaceBack(u+3,u),o.primitiveLength+=4}},{key:"_addTextDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var s=r;s<i;s++){var o=n.get(s),u=this.getSymbolInstanceTextSize(e,a,t,s);this._addCollisionDebugVertices(o,u,this.textCollisionBox,o.projectedAnchorX,o.projectedAnchorY,o.projectedAnchorZ,a)}}},{key:"_addIconDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var s=r;s<i;s++){var o=n.get(s),u=this.getSymbolInstanceIconSize(e,t,a.placedIconSymbolIndex);this._addCollisionDebugVertices(o,u,this.iconCollisionBox,o.projectedAnchorX,o.projectedAnchorY,o.projectedAnchorZ,a)}}},{key:"generateCollisionDebugBuffers",value:function(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ed(Os,sp.members,Gs),this.iconCollisionBox=new Ed(Os,sp.members,Gs);for(var n=pp(this.iconSizeData,e),r=pp(this.textSizeData,e),i=0;i<this.symbolInstances.length;i++){var a=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._addTextDebugCollisionBoxes(r,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._addIconDebugCollisionBoxes(n,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a),this._addIconDebugCollisionBoxes(n,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a)}}},{key:"getSymbolInstanceTextSize",value:function(e,t,n,r){var i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:r),a=hp(this.textSizeData,e,i)/up;return this.tilePixelRatio*a}},{key:"getSymbolInstanceIconSize",value:function(e,t,n){var r=this.icon.placedSymbolArray.get(n),i=hp(this.iconSizeData,e,r);return this.tilePixelRatio*i}},{key:"_commitDebugCollisionVertexUpdate",value:function(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}},{key:"_updateTextDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var s=r;s<i;s++){var o=n.get(s),u=this.getSymbolInstanceTextSize(e,a,t,s);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,u,o.padding)}}},{key:"_updateIconDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var s=r;s<i;s++){var o=n.get(s),u=this.getSymbolInstanceIconSize(e,t,a);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,u,o.padding)}}},{key:"updateCollisionDebugBuffers",value:function(e,t){if(this.hasDebugData()){this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();for(var n=pp(this.iconSizeData,e),r=pp(this.textSizeData,e),i=0;i<this.symbolInstances.length;i++){var a=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._updateTextDebugCollisionBoxes(r,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._updateIconDebugCollisionBoxes(n,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(n,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}}},{key:"_deserializeCollisionBoxesForSymbol",value:function(e,t,n,r,i,a,s,o,u){var l={};if(t<n){var c=e.get(t),h=c.x1,p=c.y1,f=c.x2,d=c.y2,v=c.padding,m=c.projectedAnchorX,y=c.projectedAnchorY,g=c.projectedAnchorZ,_=c.tileAnchorX,T=c.tileAnchorY,E=c.featureIndex;l.textBox={x1:h,y1:p,x2:f,y2:d,padding:v,projectedAnchorX:m,projectedAnchorY:y,projectedAnchorZ:g,tileAnchorX:_,tileAnchorY:T},l.textFeatureIndex=E}if(r<i){var x=e.get(r),b=x.x1,I=x.y1,w=x.x2,k=x.y2,S=x.padding,R=x.projectedAnchorX,C=x.projectedAnchorY,D=x.projectedAnchorZ,A=x.tileAnchorX,O=x.tileAnchorY,N=x.featureIndex;l.verticalTextBox={x1:b,y1:I,x2:w,y2:k,padding:S,projectedAnchorX:R,projectedAnchorY:C,projectedAnchorZ:D,tileAnchorX:A,tileAnchorY:O},l.verticalTextFeatureIndex=N}if(a<s){var M=e.get(a),P=M.x1,F=M.y1,L=M.x2,U=M.y2,Z=M.padding,B=M.projectedAnchorX,z=M.projectedAnchorY,G=M.projectedAnchorZ,H=M.tileAnchorX,j=M.tileAnchorY,V=M.featureIndex;l.iconBox={x1:P,y1:F,x2:L,y2:U,padding:Z,projectedAnchorX:B,projectedAnchorY:z,projectedAnchorZ:G,tileAnchorX:H,tileAnchorY:j},l.iconFeatureIndex=V}if(o<u){var W=e.get(o),Y=W.x1,q=W.y1,X=W.x2,K=W.y2,Q=W.padding,J=W.projectedAnchorX,$=W.projectedAnchorY,ee=W.projectedAnchorZ,te=W.tileAnchorX,ne=W.tileAnchorY,re=W.featureIndex;l.verticalIconBox={x1:Y,y1:q,x2:X,y2:K,padding:Q,projectedAnchorX:J,projectedAnchorY:$,projectedAnchorZ:ee,tileAnchorX:te,tileAnchorY:ne},l.verticalIconFeatureIndex=re}return l}},{key:"deserializeCollisionBoxes",value:function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}},{key:"hasTextData",value:function(){return this.text.segments.get().length>0}},{key:"hasIconData",value:function(){return this.icon.segments.get().length>0}},{key:"hasDebugData",value:function(){return this.textCollisionBox&&this.iconCollisionBox}},{key:"hasTextCollisionBoxData",value:function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}},{key:"hasIconCollisionBoxData",value:function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}},{key:"addIndicesForPlacedSymbol",value:function(e,t){for(var n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs,i=n.vertexStartIndex;i<r;i+=4)e.indexArray.emplaceBack(i,i+1,i+2),e.indexArray.emplaceBack(i+1,i+2,i+3)}},{key:"getSortedSymbolIndexes",value:function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),n=Math.cos(e),r=[],i=[],a=[],s=0;s<this.symbolInstances.length;++s){a.push(s);var o=this.symbolInstances.get(s);r.push(0|Math.round(t*o.tileAnchorX+n*o.tileAnchorY)),i.push(o.featureIndex)}return a.sort((function(e,t){return r[e]-r[t]||i[t]-i[e]})),a}},{key:"addToSortKeyRanges",value:function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}},{key:"sortFeatures",value:function(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];var t,n=p(this.symbolInstanceIndexes);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=this.symbolInstances.get(r);this.featureSortOrder.push(i.featureIndex);var a=i.rightJustifiedTextSymbolIndex,s=i.centerJustifiedTextSymbolIndex,o=i.leftJustifiedTextSymbolIndex,u=i.verticalPlacedTextSymbolIndex,l=i.placedIconSymbolIndex,c=i.verticalPlacedIconSymbolIndex;a>=0&&this.addIndicesForPlacedSymbol(this.text,a),s>=0&&s!==a&&this.addIndicesForPlacedSymbol(this.text,s),o>=0&&o!==s&&o!==a&&this.addIndicesForPlacedSymbol(this.text,o),u>=0&&this.addIndicesForPlacedSymbol(this.text,u),l>=0&&this.addIndicesForPlacedSymbol(this.icon,l),c>=0&&this.addIndicesForPlacedSymbol(this.icon,c)}}catch(h){n.e(h)}finally{n.f()}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}]),e}();na(xd,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),xd.MAX_GLYPHS=65535,xd.addDynamicAttributes=gd;var bd=new fs({"symbol-placement":new cs(ct.layout_symbol["symbol-placement"]),"symbol-spacing":new cs(ct.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new cs(ct.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new hs(ct.layout_symbol["symbol-sort-key"]),"symbol-z-order":new cs(ct.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new cs(ct.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new cs(ct.layout_symbol["icon-ignore-placement"]),"icon-optional":new cs(ct.layout_symbol["icon-optional"]),"icon-rotation-alignment":new cs(ct.layout_symbol["icon-rotation-alignment"]),"icon-size":new hs(ct.layout_symbol["icon-size"]),"icon-text-fit":new cs(ct.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new cs(ct.layout_symbol["icon-text-fit-padding"]),"icon-image":new hs(ct.layout_symbol["icon-image"]),"icon-rotate":new hs(ct.layout_symbol["icon-rotate"]),"icon-padding":new cs(ct.layout_symbol["icon-padding"]),"icon-keep-upright":new cs(ct.layout_symbol["icon-keep-upright"]),"icon-offset":new hs(ct.layout_symbol["icon-offset"]),"icon-anchor":new hs(ct.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new cs(ct.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new cs(ct.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new cs(ct.layout_symbol["text-rotation-alignment"]),"text-field":new hs(ct.layout_symbol["text-field"]),"text-font":new hs(ct.layout_symbol["text-font"]),"text-size":new hs(ct.layout_symbol["text-size"]),"text-max-width":new hs(ct.layout_symbol["text-max-width"]),"text-line-height":new hs(ct.layout_symbol["text-line-height"]),"text-letter-spacing":new hs(ct.layout_symbol["text-letter-spacing"]),"text-justify":new hs(ct.layout_symbol["text-justify"]),"text-radial-offset":new hs(ct.layout_symbol["text-radial-offset"]),"text-variable-anchor":new cs(ct.layout_symbol["text-variable-anchor"]),"text-anchor":new hs(ct.layout_symbol["text-anchor"]),"text-max-angle":new cs(ct.layout_symbol["text-max-angle"]),"text-writing-mode":new cs(ct.layout_symbol["text-writing-mode"]),"text-rotate":new hs(ct.layout_symbol["text-rotate"]),"text-padding":new cs(ct.layout_symbol["text-padding"]),"text-keep-upright":new cs(ct.layout_symbol["text-keep-upright"]),"text-transform":new hs(ct.layout_symbol["text-transform"]),"text-offset":new hs(ct.layout_symbol["text-offset"]),"text-allow-overlap":new cs(ct.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new cs(ct.layout_symbol["text-ignore-placement"]),"text-optional":new cs(ct.layout_symbol["text-optional"])}),Id={paint:new fs({"icon-opacity":new hs(ct.paint_symbol["icon-opacity"]),"icon-color":new hs(ct.paint_symbol["icon-color"]),"icon-halo-color":new hs(ct.paint_symbol["icon-halo-color"]),"icon-halo-width":new hs(ct.paint_symbol["icon-halo-width"]),"icon-halo-blur":new hs(ct.paint_symbol["icon-halo-blur"]),"icon-translate":new cs(ct.paint_symbol["icon-translate"]),"icon-translate-anchor":new cs(ct.paint_symbol["icon-translate-anchor"]),"text-opacity":new hs(ct.paint_symbol["text-opacity"]),"text-color":new hs(ct.paint_symbol["text-color"],{runtimeType:xt,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new hs(ct.paint_symbol["text-halo-color"]),"text-halo-width":new hs(ct.paint_symbol["text-halo-width"]),"text-halo-blur":new hs(ct.paint_symbol["text-halo-blur"]),"text-translate":new cs(ct.paint_symbol["text-translate"]),"text-translate-anchor":new cs(ct.paint_symbol["text-translate-anchor"])}),layout:bd},wd=function(){function e(t){f(this,e),this.type=t.property.overrides?t.property.overrides.runtimeType:gt,this.defaultValue=t}return d(e,[{key:"evaluate",value:function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}},{key:"eachChild",value:function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return null}}]),e}();na(wd,"FormatSectionOverride",{omit:["defaultValue"]});var kd=function(e){v(n,e);var t=m(n);function n(e){return f(this,n),t.call(this,e,Id)}return d(n,[{key:"recalculate",value:function(e,t){s(o(n.prototype),"recalculate",this).call(this,e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));var r=this.layout.get("text-writing-mode");if(r){var i,a=[],u=p(r);try{for(u.s();!(i=u.n()).done;){var l=i.value;a.indexOf(l)<0&&a.push(l)}}catch(c){u.e(c)}finally{u.f()}this.layout._values["text-writing-mode"]=a}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}},{key:"getValueAndResolveTokens",value:function(e,t,n,r){var i=this.layout.get(e).evaluate(t,{},n,r),a=this._unevaluatedLayout._values[e];return a.isDataDriven()||ii(a.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,(function(t,n){return n in e?String(e[n]):""}))}(t.properties,i)}},{key:"createBucket",value:function(e){return new xd(e)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"_setPaintOverrides",value:function(){var e,t=p(Id.paint.overridableProperties);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(n.hasPaintOverride(this.layout,r)){var i=this.paint.get(r),a=new wd(i),s=new ri(a,i.property.specification),o=null;o="constant"===i.value.kind||"source"===i.value.kind?new si("source",s):new oi("composite",s,i.value.zoomStops,i.value._interpolationType),this.paint._values[r]=new us(i.property,o,i.parameters)}}}catch(u){t.e(u)}finally{t.f()}}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,r){return!(!this.layout||t.isDataDriven()||r.isDataDriven())&&n.hasPaintOverride(this.layout,e)}},{key:"getProgramConfiguration",value:function(e){return new Ro(this,e)}}],[{key:"hasPaintOverride",value:function(e,t){var n=e.get("text-field"),r=Id.paint.properties[t],i=!1,a=function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(r.overrides&&r.overrides.hasOverride(a))return void(i=!0)}}catch(s){n.e(s)}finally{n.f()}};if("constant"===n.value.kind&&n.value.value instanceof jt)a(n.value.value.sections);else if("source"===n.value.kind){var s=function e(t){i||(t instanceof Qt&&qt(t.value)===kt?a(t.value.sections):t instanceof nn?a(t.sections):t.eachChild(e))},o=n.value;o._styleExpression&&s(o._styleExpression.expression)}return i}}]),n}(Fo),Sd={paint:new fs({"background-color":new cs(ct.paint_background["background-color"]),"background-pattern":new cs(ct.paint_background["background-pattern"]),"background-opacity":new cs(ct.paint_background["background-opacity"])})},Rd={paint:new fs({"raster-opacity":new cs(ct.paint_raster["raster-opacity"]),"raster-hue-rotate":new cs(ct.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new cs(ct.paint_raster["raster-brightness-min"]),"raster-brightness-max":new cs(ct.paint_raster["raster-brightness-max"]),"raster-saturation":new cs(ct.paint_raster["raster-saturation"]),"raster-contrast":new cs(ct.paint_raster["raster-contrast"]),"raster-resampling":new cs(ct.paint_raster["raster-resampling"]),"raster-fade-duration":new cs(ct.paint_raster["raster-fade-duration"])})},Cd=function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e,{})).implementation=e,r}return d(n,[{key:"is3D",value:function(){return"3d"===this.implementation.renderingMode}},{key:"hasOffscreenPass",value:function(){return void 0!==this.implementation.prerender}},{key:"isLayerDraped",value:function(){return void 0!==this.implementation.renderToTile}},{key:"shouldRedrape",value:function(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}},{key:"recalculate",value:function(){}},{key:"updateTransitions",value:function(){}},{key:"hasTransition",value:function(){return!1}},{key:"serialize",value:function(){}},{key:"onAdd",value:function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}},{key:"onRemove",value:function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}]),n}(Fo),Dd={paint:new fs({"sky-type":new cs(ct.paint_sky["sky-type"]),"sky-atmosphere-sun":new cs(ct.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new cs(ct.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new cs(ct.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new cs(ct.paint_sky["sky-gradient-radius"]),"sky-gradient":new ps(ct.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new cs(ct.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new cs(ct.paint_sky["sky-atmosphere-color"]),"sky-opacity":new cs(ct.paint_sky["sky-opacity"])})};function Ad(e,t,n){var r=[0,0,1],i=ku([]);return Ru(i,i,n?-O(e)+Math.PI:O(e)),Su(i,i,-O(t)),yu(r,r,i),fu(r,r)}for(var Od={circle:function(e){v(n,e);var t=m(n);function n(e){return f(this,n),t.call(this,e,nc)}return d(n,[{key:"createBucket",value:function(e){return new Ul(e)}},{key:"queryRadius",value:function(e){var t=e;return Ql("circle-radius",this,t)+Ql("circle-stroke-width",this,t)+Jl(this.paint.get("circle-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a,s,o){var u=ec(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),l=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n);return rc(e,r,a,s,o,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),u,l)}},{key:"getProgramIds",value:function(){return["circle"]}},{key:"getProgramConfiguration",value:function(e){return new Ro(this,e)}}]),n}(Fo),heatmap:function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e,dc))._updateColorRamp(),r}return d(n,[{key:"createBucket",value:function(e){return new uc(e)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"heatmap-color"===e&&this._updateColorRamp()}},{key:"_updateColorRamp",value:function(){this.colorRamp=vc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}},{key:"resize",value:function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}},{key:"queryRadius",value:function(e){return Ql("heatmap-radius",this,e)}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a,s,o){var u=this.paint.get("heatmap-radius").evaluate(t,n);return rc(e,r,a,s,o,!0,!0,new R(0,0),u)}},{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["heatmap","heatmapTexture"]}},{key:"getProgramConfiguration",value:function(e){return new Ro(this,e)}}]),n}(Fo),hillshade:function(e){v(n,e);var t=m(n);function n(e){return f(this,n),t.call(this,e,mc)}return d(n,[{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["hillshade","hillshadePrepare"]}}]),n}(Fo),fill:function(e){v(n,e);var t=m(n);function n(e){return f(this,n),t.call(this,e,th)}return d(n,[{key:"getProgramIds",value:function(){var e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}},{key:"getProgramConfiguration",value:function(e){return new Ro(this,e)}},{key:"recalculate",value:function(e,t){s(o(n.prototype),"recalculate",this).call(this,e,t);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}},{key:"createBucket",value:function(e){return new $c(e)}},{key:"queryRadius",value:function(){return Jl(this.paint.get("fill-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a){return!e.queryGeometry.isAboveHorizon&&zl($l(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),r)}},{key:"isTileClipped",value:function(){return!0}}]),n}(Fo),"fill-extrusion":function(e){v(n,e);var t=m(n);function n(e){return f(this,n),t.call(this,e,Fh)}return d(n,[{key:"createBucket",value:function(e){return new kh(e)}},{key:"queryRadius",value:function(){return Jl(this.paint.get("fill-extrusion-translate"))}},{key:"is3D",value:function(){return!0}},{key:"getProgramIds",value:function(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}},{key:"getProgramConfiguration",value:function(e){return new Ro(this,e)}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a,s,o,u){var l=ec(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),c=this.paint.get("fill-extrusion-height").evaluate(t,n),f=this.paint.get("fill-extrusion-base").evaluate(t,n),d=[0,0],v=o&&a.elevation,m=a.elevation?a.elevation.exaggeration():1,y=e.tile.getBucket(this);if(v&&y instanceof kh){var g=y.centroidVertexArray,_=u+1;_<g.length&&(d[0]=g.geta_centroid_pos0(_),d[1]=g.geta_centroid_pos1(_))}if(0===d[0]&&1===d[1])return!1;"globe"===a.projection.name&&(r=Mh([r],[new R(0,0),new R(Bo,Bo)],e.tileID.canonical).map((function(e){return e.polygon})).flat());var T=function(e,t,n,r,i,a,s,o,u,l,c){return"globe"===e.projection.name?function(e,t,n,r,i,a,s,o,u,l,c){var h=[],f=[],d=e.projection.upVectorScale(c,e.center.lat,e.worldSize).metersToTile,v=[0,0,0,1],m=[0,0,0,1],y=function(e,t,n,r){e[0]=t,e[1]=n,e[2]=r,e[3]=1},g=Nh();n>0&&(n+=g),r+=g;var _,T=p(t);try{for(T.s();!(_=T.n()).done;){var E,x=_.value,b=[],I=[],w=p(x);try{for(w.s();!(E=w.n()).done;){var k=E.value,S=k.x+i.x,R=k.y+i.y,C=e.projection.projectTilePoint(S,R,c),D=e.projection.upVector(c,k.x,k.y),A=n,O=r;if(s){var N=Vh(S,R,n,r,s,o,u,l);A+=N.base,O+=N.top}0!==n?y(v,C.x+D[0]*d*A,C.y+D[1]*d*A,C.z+D[2]*d*A):y(v,C.x,C.y,C.z),y(m,C.x+D[0]*d*O,C.y+D[1]*d*O,C.z+D[2]*d*O),mu(v,v,a),mu(m,m,a),b.push(new Gh(v[0],v[1],v[2])),I.push(new Gh(m[0],m[1],m[2]))}}catch(M){w.e(M)}finally{w.f()}h.push(b),f.push(I)}}catch(M){T.e(M)}finally{T.f()}return[h,f]}(e,t,n,r,i,a,s,o,u,l,c):s?function(e,t,n,r,i,a,s,o,u){var l,c=[],h=[],f=[0,0,0,1],d=p(e);try{for(d.s();!(l=d.n()).done;){var v,m=l.value,y=[],g=[],_=p(m);try{for(_.s();!(v=_.n()).done;){var T=v.value,E=T.x+r.x,x=T.y+r.y,b=Vh(E,x,t,n,a,s,o,u);f[0]=E,f[1]=x,f[2]=b.base,f[3]=1,Iu(f,f,i),f[3]=Math.max(f[3],1e-5);var I=new Gh(f[0]/f[3],f[1]/f[3],f[2]/f[3]);f[0]=E,f[1]=x,f[2]=b.top,f[3]=1,Iu(f,f,i),f[3]=Math.max(f[3],1e-5);var w=new Gh(f[0]/f[3],f[1]/f[3],f[2]/f[3]);y.push(I),g.push(w)}}catch(k){_.e(k)}finally{_.f()}c.push(y),h.push(g)}}catch(k){d.e(k)}finally{d.f()}return[c,h]}(t,n,r,i,a,s,o,u,l):function(e,t,n,r,i){var a,s=[],o=[],u=i[8]*t,l=i[9]*t,c=i[10]*t,h=i[11]*t,f=i[8]*n,d=i[9]*n,v=i[10]*n,m=i[11]*n,y=p(e);try{for(y.s();!(a=y.n()).done;){var g,_=a.value,T=[],E=[],x=p(_);try{for(x.s();!(g=x.n()).done;){var b=g.value,I=b.x+r.x,w=b.y+r.y,k=i[0]*I+i[4]*w+i[12],S=i[1]*I+i[5]*w+i[13],R=i[2]*I+i[6]*w+i[14],C=i[3]*I+i[7]*w+i[15],D=k+u,A=S+l,O=R+c,N=Math.max(C+h,1e-5),M=k+f,P=S+d,F=R+v,L=Math.max(C+m,1e-5);T.push(new Gh(D/N,A/N,O/N)),E.push(new Gh(M/L,P/L,F/L))}}catch(U){x.e(U)}finally{x.f()}s.push(T),o.push(E)}}catch(U){y.e(U)}finally{y.f()}return[s,o]}(t,n,r,i,a)}(a,r,f,c,l,s,v?o:null,d,m,a.center.lat,e.tileID.canonical),E=h(T,2),x=E[0],b=E[1],I=e.queryGeometry;return function(e,t,n){var r=1/0;zl(n,t)&&(r=jh(n,t[0]));for(var i=0;i<t.length;i++)for(var a=t[i],s=e[i],o=0;o<a.length-1;o++){var u=a[o],l=[u,a[o+1],s[o+1],s[o],u];Zl(n,l)&&(r=Math.min(r,jh(n,l)))}return r!==1/0&&r}(x,b,I.isPointQuery()?I.screenBounds:I.screenGeometry)}}]),n}(Fo),line:function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e,Jh)).gradientVersion=0,r}return d(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){if("line-gradient"===e){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof zn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}},{key:"gradientExpression",value:function(){return this._transitionablePaint._values["line-gradient"].value.expression}},{key:"widthExpression",value:function(){return this._transitionablePaint._values["line-width"].value.expression}},{key:"recalculate",value:function(e,t){s(o(n.prototype),"recalculate",this).call(this,e,t),this.paint._values["line-floorwidth"]=$h.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}},{key:"createBucket",value:function(e){return new Kh(e)}},{key:"getProgramIds",value:function(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}},{key:"getProgramConfiguration",value:function(e){return new Ro(this,e)}},{key:"queryRadius",value:function(e){var t=e,n=ep(Ql("line-width",this,t),Ql("line-gap-width",this,t)),r=Ql("line-offset",this,t);return n/2+Math.abs(r)+Jl(this.paint.get("line-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a){if(e.queryGeometry.isAboveHorizon)return!1;var s=$l(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),o=e.pixelToTileUnitsFactor/2*ep(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),u=this.paint.get("line-offset").evaluate(t,n);return u&&(r=function(e,t){for(var n=[],r=new R(0,0),i=0;i<e.length;i++){for(var a=e[i],s=[],o=0;o<a.length;o++){var u=a[o-1],l=a[o],c=a[o+1],h=0===o?r:l.sub(u)._unit()._perp(),p=o===a.length-1?r:c.sub(l)._unit()._perp(),f=h._add(p)._unit();f._mult(1/(f.x*p.x+f.y*p.y)),s.push(f._mult(t)._add(l))}n.push(s)}return n}(r,u*e.pixelToTileUnitsFactor)),function(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];if(e.length>=3)for(var a=0;a<i.length;a++)if(ql(e,i[a]))return!0;if(Gl(e,i,n))return!0}return!1}(s,r,o)}},{key:"isTileClipped",value:function(){return!0}}]),n}(Fo),symbol:kd,background:function(e){v(n,e);var t=m(n);function n(e){return f(this,n),t.call(this,e,Sd)}return d(n,[{key:"getProgramIds",value:function(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}}]),n}(Fo),raster:function(e){v(n,e);var t=m(n);function n(e){return f(this,n),t.call(this,e,Rd)}return d(n,[{key:"getProgramIds",value:function(){return["raster"]}}]),n}(Fo),sky:function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e,Dd))._updateColorRamp(),r}return d(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}},{key:"_updateColorRamp",value:function(){this.colorRamp=vc({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}},{key:"needsSkyboxCapture",value:function(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){var t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}},{key:"getCenter",value:function(e,t){if("atmosphere"===this.paint.get("sky-type")){var n=this.paint.get("sky-atmosphere-sun"),r=!n,i=e.style.light,a=i.properties.get("position");return r&&"viewport"===i.properties.get("anchor")&&te("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?Ad(a.azimuthal,90-a.polar,t):Ad(n[0],90-n[1],t)}var s=this.paint.get("sky-gradient-center");return Ad(s[0],90-s[1],t)}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!0}},{key:"markSkyboxValid",value:function(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}},{key:"hasOffscreenPass",value:function(){return!0}},{key:"getProgramIds",value:function(){var e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}]),n}(Fo)},Nd=function(){function e(t,n,r,i){f(this,e),this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(n,i)}return d(e,[{key:"update",value:function(e,t,n){var r=e.width,i=e.height,a=this.context,s=a.gl,o=g.HTMLImageElement,u=g.HTMLCanvasElement,l=g.HTMLVideoElement,c=g.ImageData,h=g.ImageBitmap;if(s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),n||this.size&&this.size[0]===r&&this.size[1]===i){var p=n||{x:0,y:0},f=p.x,d=p.y;e instanceof o||e instanceof u||e instanceof l||e instanceof c||h&&e instanceof h?s.texSubImage2D(s.TEXTURE_2D,0,f,d,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,f,d,r,i,s.RGBA,s.UNSIGNED_BYTE,e.data)}else this.size=[r,i],e instanceof o||e instanceof u||e instanceof l||e instanceof c||h&&e instanceof h?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,r,i,0,this.format,s.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(t&&t.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&s.generateMipmap(s.TEXTURE_2D)}},{key:"bind",value:function(e,t){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),e!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.useMipmap?e===n.NEAREST?n.NEAREST_MIPMAP_NEAREST:n.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrap=t)}},{key:"isSizePowerOfTwo",value:function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}},{key:"destroy",value:function(){this.context.gl.deleteTexture(this.texture),this.texture=null}}]),e}(),Md=function(){function e(t){var n=this;f(this,e),this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){n._triggered=!1,n._callback()})}return d(e,[{key:"trigger",value:function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){e._triggered=!1,e._callback()}),0))}},{key:"remove",value:function(){this._channel=void 0,this._callback=function(){}}}]),e}(),Pd=function(){function e(){f(this,e),this.tasks={},this.taskQueue=[],X(["process"],this),this.invoker=new Md(this.process),this.nextId=0}return d(e,[{key:"add",value:function(e,t){var n=this,r=this.nextId++,i=function(e){var t=e.type,n=e.isSymbolTile,r=e.zoom;return r=r||0,"message"===t?0:"maybePrepare"!==t||n?"parseTile"!==t||n?"parseTile"===t&&n?300-r:"maybePrepare"===t&&n?400-r:500:200-r:100-r}(t);if(0===i){ie();try{e()}finally{}return{cancel:function(){}}}return this.tasks[r]={fn:e,metadata:t,priority:i,id:r},this.taskQueue.push(r),this.invoker.trigger(),{cancel:function(){delete n.tasks[r]}}}},{key:"process",value:function(){var e=this;ie();try{if(this.taskQueue=this.taskQueue.filter((function(t){return!!e.tasks[t]})),!this.taskQueue.length)return;var t=this.pick();if(null===t)return;var n=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}finally{}}},{key:"pick",value:function(){for(var e=null,t=1/0,n=0;n<this.taskQueue.length;n++){var r=this.tasks[this.taskQueue[n]];r.priority<t&&(t=r.priority,e=n)}if(null===e)return null;var i=this.taskQueue[e];return this.taskQueue.splice(e,1),i}},{key:"remove",value:function(){this.invoker.remove()}}]),e}(),Fd=function(){function e(t){f(this,e),this._stringToNumber={},this._numberToString=[];for(var n=0;n<t.length;n++){var r=t[n];this._stringToNumber[r]=n,this._numberToString[n]=r}}return d(e,[{key:"encode",value:function(e){return this._stringToNumber[e]}},{key:"decode",value:function(e){return this._numberToString[e]}}]),e}(),Ld=["tile","layer","source","sourceLayer","state"],Ud=function(){function e(t,n,r,i,a){f(this,e),this.type="Feature",this._vectorTileFeature=t,this._z=n,this._x=r,this._y=i,this.properties=t.properties,this.id=a}return d(e,[{key:"geometry",get:function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry},set:function(e){this._geometry=e}},{key:"toJSON",value:function(){var e={type:"Feature",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(var t=0,n=Ld;t<n.length;t++){var r=n[t];void 0!==this[r]&&(e[r]=this[r])}return e}}]),e}(),Zd=32,Bd=33,zd=new Uint16Array(8184),Gd=0;Gd<2046;Gd++){var Hd=Gd+2,jd=0,Vd=0,Wd=0,Yd=0,qd=0,Xd=0;for(1&Hd?Wd=Yd=qd=Zd:jd=Vd=Xd=Zd;(Hd>>=1)>1;){var Kd=jd+Wd>>1,Qd=Vd+Yd>>1;1&Hd?(Wd=jd,Yd=Vd,jd=qd,Vd=Xd):(jd=Wd,Vd=Yd,Wd=qd,Yd=Xd),qd=Kd,Xd=Qd}var Jd=4*Gd;zd[Jd+0]=jd,zd[Jd+1]=Vd,zd[Jd+2]=Wd,zd[Jd+3]=Yd}var $d=new Uint16Array(2178),ev=new Uint8Array(1089),tv=new Uint16Array(1089);function nv(e){return 0===e?-.03125:32===e?.03125:0}var rv=gs([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),iv={type:2,extent:Bo,loadGeometry:function(){return[[new R(0,0),new R(8193,0),new R(8193,8193),new R(0,8193),new R(0,0)]]}},av=function(){function e(t,n,r,i,a){f(this,e),this.tileID=t,this.uid=V(),this.uses=0,this.tileSize=n,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=a,this.expiredRequestCount=0,this.state="loading",i&&i.transform&&(this.projection=i.transform.projection)}return d(e,[{key:"registerFadeDuration",value:function(e){var t=e+this.timeAdded;t<it.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}},{key:"wasRequested",value:function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}},{key:"tileTransform",get:function(){return this._tileTransform||(this._tileTransform=Wf(this.tileID.canonical,this.projection)),this._tileTransform}},{key:"loadVectorData",value:function(e,t,n){if(this.unloadVectorData(),this.state="loaded",e){for(var r in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var n={};if(!t)return n;var r,i=p(e);try{var a=function(){var e=r.value,i=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==i.length){e.layers=i,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return i.filter((function(t){return t.id===e}))[0]})));var a,s=p(i);try{for(s.s();!(a=s.n()).done;){var o=a.value;n[o.id]=e}}catch(u){s.e(u)}finally{s.f()}}};for(i.s();!(r=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof xd){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var a in this.buckets){var s=this.buckets[a];if(s instanceof xd&&s.hasRTLText){this.hasRTLText=!0,es.isLoading()||es.isLoaded()||"deferred"!==Ja()||$a();break}}for(var o in this.queryPadding=0,this.buckets){var u=this.buckets[o];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(o).queryRadius(u))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Ws}},{key:"unloadVectorData",value:function(){if(this.hasData()){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}},{key:"getBucket",value:function(e){return this.buckets[e.id]}},{key:"upload",value:function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Nd(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Nd(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Nd(e,this.lineAtlas.image,r.ALPHA),this.lineAtlas.uploaded=!0)}},{key:"prepare",value:function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}},{key:"queryRenderedFeatures",value:function(e,t,n,r,i,a,s,o){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:s,transform:a,params:i,tileTransform:this.tileTransform},e,t,n):{}}},{key:"querySourceFeatures",value:function(e,t){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var r=n.loadVTLayers(),i=t?t.sourceLayer:"",a=r._geojsonTileLayer||r[i];if(a)for(var s=Ti(t&&t.filter),o=this.tileID.canonical,u=o.z,l=o.x,c=o.y,h={z:u,x:l,y:c},p=0;p<a.length;p++){var f=a.feature(p);if(s.needGeometry){var d=Pl(f,!0);if(!s.filter(new ts(this.tileID.overscaledZ),d,this.tileID.canonical))continue}else if(!s.filter(new ts(this.tileID.overscaledZ),f))continue;var v=n.getId(f,i),m=new Ud(f,u,l,c,v);m.tile=h,e.push(m)}}}},{key:"hasData",value:function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}},{key:"patternsLoaded",value:function(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}},{key:"setExpiryData",value:function(e){var t=this.expirationTime;if(e.cacheControl){var n=ae(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{var a=this.expirationTime-t;a?this.expirationTime=r+Math.max(a,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}},{key:"getExpiryTimeout",value:function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}},{key:"setFeatureState",value:function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length&&t){var n=this.latestFeatureIndex.loadVTLayers(),r=t.style.listImages();for(var i in this.buckets)if(t.style.hasLayer(i)){var a=this.buckets[i],s=a.layers[0].sourceLayer||"_geojsonTileLayer",o=n[s],u=e[s];if(o&&u&&0!==Object.keys(u).length){if(a.update(u,o,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),a instanceof Kh||a instanceof $c){var l=t.style._getSourceCache(a.layers[0].source);t._terrain&&t._terrain.enabled&&l&&a.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(l.id,this.tileID)}var c=t&&t.style&&t.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(a)))}}}}},{key:"holdingForFade",value:function(){return void 0!==this.symbolFadeHoldUntil}},{key:"symbolFadeFinished",value:function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<it.now()}},{key:"clearFadeHold",value:function(){this.symbolFadeHoldUntil=void 0}},{key:"setHoldDuration",value:function(e){this.symbolFadeHoldUntil=it.now()+e}},{key:"setTexture",value:function(e,t){var n=t.context,r=n.gl;this.texture=this.texture||t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new Nd(n,e,r.RGBA,{useMipmap:!0}),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),n.extTextureFilterAnisotropic&&r.texParameterf(r.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax))}},{key:"setDependencies",value:function(e,t){var n,r={},i=p(t);try{for(i.s();!(n=i.n()).done;)r[n.value]=!0}catch(a){i.e(a)}finally{i.f()}this.dependencies[e]=r}},{key:"hasDependency",value:function(e,t){var n,r=p(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=this.dependencies[i];if(a){var s,o=p(t);try{for(o.s();!(s=o.n()).done;)if(a[s.value])return!0}catch(u){o.e(u)}finally{o.f()}}}}catch(u){r.e(u)}finally{r.f()}return!1}},{key:"clearQueryDebugViz",value:function(){}},{key:"_makeDebugTileBoundsBuffers",value:function(e,t){if(t&&"mercator"!==t.name&&!this._tileDebugBuffer){for(var n=Ml(iv,this.tileID.canonical,this.tileTransform)[0],r=new Ts,i=new Hs,a=0;a<n.length;a++){var s=n[a],o=s.x,u=s.y;r.emplaceBack(o,u),i.emplaceBack(a)}i.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(i),this._tileDebugBuffer=e.createVertexBuffer(r,Ou.members),this._tileDebugSegments=Zo.simpleSegment(0,0,r.length,i.length)}}},{key:"_makeTileBoundsBuffers",value:function(e,t){if(!this._tileBoundsBuffer&&t&&"mercator"!==t.name){var n,r,i=Ml(iv,this.tileID.canonical,this.tileTransform)[0];if(this.isRaster){var a=function(e,t){for(var n=Wf(e,t),r=Math.pow(2,e.z),i=0;i<Bd;i++)for(var a=0;a<Bd;a++){var s=El((e.x+(a+nv(a))/Zd)/r),o=xl((e.y+(i+nv(i))/Zd)/r),u=t.project(s,o),l=i*Bd+a;$d[2*l+0]=Math.round((u.x*n.scale-n.x)*Bo),$d[2*l+1]=Math.round((u.y*n.scale-n.y)*Bo)}ev.fill(0),tv.fill(0);for(var c=2045;c>=0;c--){var h=4*c,p=zd[h+0],f=zd[h+1],d=zd[h+2],v=zd[h+3],m=p+d>>1,y=f+v>>1,g=m+y-f,_=y+p-m,T=f*Bd+p,E=v*Bd+d,x=y*Bd+m,b=Math.hypot(($d[2*T+0]+$d[2*E+0])/2-$d[2*x+0],($d[2*T+1]+$d[2*E+1])/2-$d[2*x+1])>=16;if(ev[x]=ev[x]||(b?1:0),c<1022){var I=(f+_>>1)*Bd+(p+g>>1),w=(v+_>>1)*Bd+(d+g>>1);ev[x]=ev[x]||ev[I]||ev[w]}}var k=new xs,S=new Fs,R=0;function C(e,t){var n=t*Bd+e;return 0===tv[n]&&(k.emplaceBack($d[2*n+0],$d[2*n+1],e*Bo/Zd,t*Bo/Zd),tv[n]=++R),tv[n]-1}function D(e,t,n,r,i,a){var s=e+n>>1,o=t+r>>1;if(Math.abs(e-i)+Math.abs(t-a)>1&&ev[o*Bd+s])D(i,a,e,t,s,o),D(n,r,i,a,s,o);else{var u=C(e,t),l=C(n,r),c=C(i,a);S.emplaceBack(u,l,c)}}return D(0,0,Zd,Zd,Zd,0),D(Zd,Zd,0,0,0,Zd),{vertices:k,indices:S}}(this.tileID.canonical,t);n=a.vertices,r=a.indices}else{n=new xs,r=new Fs;var s,o=p(i);try{for(o.s();!(s=o.n()).done;){var u=s.value,l=u.x,c=u.y;n.emplaceBack(l,c,0,0)}}catch(d){o.e(d)}finally{o.f()}for(var h=gc(n.int16,void 0,4),f=0;f<h.length;f+=3)r.emplaceBack(h[f],h[f+1],h[f+2])}this._tileBoundsBuffer=e.createVertexBuffer(n,rv.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(r),this._tileBoundsSegments=Zo.simpleSegment(0,0,n.length,r.length)}}},{key:"_makeGlobeTileDebugBuffers",value:function(e,t){var n=t.projection;if(n&&"globe"===n.name&&!t.freezeTileCoverage){var r,i=this.tileID.canonical,a=al(Xu(i,t)),s=ul(t.zoom);s>0&&(r=Yo(new Float64Array(16),t.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,i,t,a,r,s),this._makeGlobeTileDebugTextBuffer(e,i,t,a,r,s)}}},{key:"_globePoint",value:function(e,t,n,r,i,a,s){var o=nl(e,t,n);if(a){var u=1<<n.z,l=gl(r.center.lng),c=_l(r.center.lat),h=(n.x+.5)/u-l,p=0;h>.5?p=-1:h<-.5&&(p=1);var f=(e/Bo+n.x)/u+p,d=(t/Bo+n.y)/u;f=(f-l)*r._pixelsPerMercatorPixel+l,d=(d-c)*r._pixelsPerMercatorPixel+c;var v=[f*r.worldSize,d*r.worldSize,0];mu(v,v,a),o=qu(o,v,s)}return mu(o,o,i)}},{key:"_makeGlobeTileDebugBorderBuffer",value:function(e,t,n,r,i,a){var s=this,o=new Ts,u=new Hs,l=new Es,c=function(e,c,h,p,f){for(var d=(h-e)/(f-1),v=(p-c)/(f-1),m=o.length,y=0;y<f;y++){var g=e+y*d,_=c+y*v;o.emplaceBack(g,_);var T=s._globePoint(g,_,t,n,r,i,a);l.emplaceBack(T[0],T[1],T[2]),u.emplaceBack(m+y)}},h=Bo;c(0,0,h,0,16),c(h,0,h,h,16),c(h,h,0,h,16),c(0,h,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(u),this._tileDebugBuffer=e.createVertexBuffer(o,Ou.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(l,Au.members),this._tileDebugSegments=Zo.simpleSegment(0,0,o.length,u.length)}},{key:"_makeGlobeTileDebugTextBuffer",value:function(e,t,n,r,i,a){var s=new Ts,o=new Fs,u=new Es,l=25;o.reserve(32),s.reserve(l),u.reserve(l);for(var c=function(e,t){return l*e+t},h=0;h<l;h++)for(var p=2048*h,f=0;f<l;f++){var d=2048*f;s.emplaceBack(d,p);var v=this._globePoint(d,p,t,n,r,i,a);u.emplaceBack(v[0],v[1],v[2])}for(var m=0;m<4;m++)for(var y=0;y<4;y++){var g=c(m,y),_=c(m,y+1),T=c(m+1,y),E=c(m+1,y+1);o.emplaceBack(g,_,T),o.emplaceBack(T,_,E)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(o),this._tileDebugTextBuffer=e.createVertexBuffer(s,Ou.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(u,Au.members),this._tileDebugTextSegments=Zo.simpleSegment(0,0,l,32)}}]),e}(),sv=function(){function e(){f(this,e),this.state={},this.stateChanges={},this.deletedStates={}}return d(e,[{key:"updateState",value:function(e,t,n){var r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},H(this.stateChanges[e][r],n),null===this.deletedStates[e])for(var i in this.deletedStates[e]={},this.state[e])i!==r&&(this.deletedStates[e][i]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][r])for(var a in this.deletedStates[e][r]={},this.state[e][r])n[a]||(this.deletedStates[e][r][a]=null);else for(var s in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][s]&&delete this.deletedStates[e][r][s]}},{key:"removeFeatureState",value:function(e,t,n){if(null!==this.deletedStates[e]){var r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}}},{key:"getState",value:function(e,t){var n=String(t),r=H({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var i=this.deletedStates[e][t];if(null===i)return{};for(var a in i)delete r[a]}return r}},{key:"initializeTileState",value:function(e,t){e.setFeatureState(this.state,t)}},{key:"coalesceChanges",value:function(e,t){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var a in this.stateChanges[r])this.state[r][a]||(this.state[r][a]={}),H(this.state[r][a],this.stateChanges[r][a]),i[a]=this.state[r][a];n[r]=i}for(var s in this.deletedStates){this.state[s]=this.state[s]||{};var o={};if(null===this.deletedStates[s])for(var u in this.state[s])o[u]={},this.state[s][u]={};else for(var l in this.deletedStates[s]){if(null===this.deletedStates[s][l])this.state[s][l]={};else if(this.state[s][l])for(var c=0,h=Object.keys(this.deletedStates[s][l]);c<h.length;c++){var p=h[c];delete this.state[s][l][p]}o[l]=this.state[s][l]}n[s]=n[s]||{},H(n[s],o)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var f in e)e[f].setFeatureState(n,t)}}]),e}(),ov=function(){function e(t){f(this,e),this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}return d(e,[{key:"getElevation",value:function(e,t){var n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}},{key:"isLeaf",value:function(e,t){return this.leaves[this.toIdx(e,t)]}},{key:"toIdx",value:function(e,t){return t*this.size+e}}]),e}();function uv(e,t,n,r){for(var i=0,a=Number.MAX_VALUE,s=0;s<3;s++)if(Math.abs(r[s])<1e-15){if(n[s]<e[s]||n[s]>t[s])return null}else{var o=1/r[s],u=(e[s]-n[s])*o,l=(t[s]-n[s])*o;if(u>l){var c=u;u=l,l=c}if(u>i&&(i=u),l<a&&(a=l),i>a)return null}return i}function lv(e,t,n,r,i,a,s,o,u,l,c){var h=r-e,p=i-t,f=a-n,d=s-e,v=o-t,m=u-n,y=c[1]*m-c[2]*v,g=c[2]*d-c[0]*m,_=c[0]*v-c[1]*d,T=h*y+p*g+f*_;if(Math.abs(T)<1e-15)return null;var E=1/T,x=l[0]-e,b=l[1]-t,I=l[2]-n,w=(x*y+b*g+I*_)*E;if(w<0||w>1)return null;var k=b*f-I*p,S=I*h-x*f,R=x*p-b*h,C=(c[0]*k+c[1]*S+c[2]*R)*E;return C<0||w+C>1?null:(d*k+v*S+m*R)*E}function cv(e,t,n){return(e-t)/(n-t)}function hv(e,t,n,r,i,a,s,o,u){var l=1<<n,c=a-r,h=s-i,p=(e+1)/l*c+r,f=(t+0)/l*h+i,d=(t+1)/l*h+i;o[0]=(e+0)/l*c+r,o[1]=f,u[0]=p,u[1]=d}var pv=function(){function e(t){if(f(this,e),this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],this.dem){var n=function(e){for(var t=Math.ceil(Math.log2(e.dim/8)),n=[],r=Math.ceil(Math.pow(2,t)),i=1/r,a=function(e,t,n,r,i){var a=r?1:0,s=(e+1)*n-a,o=t*n,u=(t+1)*n-a;i[0]=e*n,i[1]=o,i[2]=s,i[3]=u},s=new ov(r),o=[],u=0;u<r*r;u++){a(u%r,Math.floor(u/r),i,!1,o);var l=dv(o[0],o[1],e),c=dv(o[2],o[1],e),h=dv(o[2],o[3],e),p=dv(o[0],o[3],e);s.minimums.push(Math.min(l,c,h,p)),s.maximums.push(Math.max(l,c,h,p)),s.leaves.push(1)}for(n.push(s),r/=2;r>=1;r/=2){var f=n[n.length-1];s=new ov(r);for(var d=0;d<r*r;d++){a(d%r,Math.floor(d/r),2,!0,o);var v=f.getElevation(o[0],o[1]),m=f.getElevation(o[2],o[1]),y=f.getElevation(o[2],o[3]),g=f.getElevation(o[0],o[3]),_=f.isLeaf(o[0],o[1]),T=f.isLeaf(o[2],o[1]),E=f.isLeaf(o[2],o[3]),x=f.isLeaf(o[0],o[3]),b=Math.min(v.min,m.min,y.min,g.min),I=Math.max(v.max,m.max,y.max,g.max),w=_&&T&&E&&x;s.maximums.push(I),s.minimums.push(b),s.leaves.push(I-b<=5&&w?1:0)}n.push(s)}return n}(this.dem),r=n.length-1,i=n[r];this._addNode(i.minimums[0],i.maximums[0],i.leaves[0]),this._construct(n,0,0,r,0)}}return d(e,[{key:"raycastRoot",value:function(e,t,n,r,i,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return uv([e,t,-100],[n,r,this.maximums[0]*s],i,a)}},{key:"raycast",value:function(e,t,n,r,i,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;var o=this.raycastRoot(e,t,n,r,i,a,s);if(null==o)return null;for(var u=[],l=[],c=[],h=[],p=[{idx:0,t:o,nodex:0,nodey:0,depth:0}];p.length>0;){var f=p.pop(),d=f.idx,v=f.t,m=f.nodex,y=f.nodey,g=f.depth;if(this.leaves[d]){hv(m,y,g,e,t,n,r,c,h);var _=1<<g,T=(m+0)/_,E=(m+1)/_,x=(y+0)/_,b=(y+1)/_,I=dv(T,x,this.dem)*s,w=dv(E,x,this.dem)*s,k=dv(E,b,this.dem)*s,S=dv(T,b,this.dem)*s,R=lv(c[0],c[1],I,h[0],c[1],w,h[0],h[1],k,i,a),C=lv(h[0],h[1],k,c[0],h[1],S,c[0],c[1],I,i,a),D=Math.min(null!==R?R:Number.MAX_VALUE,null!==C?C:Number.MAX_VALUE);if(D!==Number.MAX_VALUE)return D;var A=pu([],i,a,v);if(fv(I,w,S,k,cv(A[0],c[0],h[0]),cv(A[1],c[1],h[1]))>=A[2])return v}else{for(var O=0,N=0;N<this._siblingOffset.length;N++){hv((m<<1)+this._siblingOffset[N][0],(y<<1)+this._siblingOffset[N][1],g+1,e,t,n,r,c,h),c[2]=-100,h[2]=this.maximums[this.childOffsets[d]+N]*s;var M=uv(c,h,i,a);if(null!=M){var P=M;u[N]=P;for(var F=!1,L=0;L<O&&!F;L++)P>=u[l[L]]&&(l.splice(L,0,N),F=!0);F||(l[O]=N),O++}}for(var U=0;U<O;U++){var Z=l[U];p.push({idx:this.childOffsets[d]+Z,t:u[Z],nodex:(m<<1)+this._siblingOffset[Z][0],nodey:(y<<1)+this._siblingOffset[Z][1],depth:g+1})}}}return null}},{key:"_addNode",value:function(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}},{key:"_construct",value:function(e,t,n,r,i){if(1!==e[r].isLeaf(t,n)){this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);for(var a=r-1,s=e[a],o=0,u=0,l=0;l<this._siblingOffset.length;l++){var c=2*t+this._siblingOffset[l][0],h=2*n+this._siblingOffset[l][1],p=s.getElevation(c,h),f=s.isLeaf(c,h),d=this._addNode(p.min,p.max,f);f&&(o|=1<<l),u||(u=d)}for(var v=0;v<this._siblingOffset.length;v++)o&1<<v||this._construct(e,2*t+this._siblingOffset[v][0],2*n+this._siblingOffset[v][1],a,u+v)}}}]),e}();function fv(e,t,n,r,i,a){return Gn(Gn(e,n,a),Gn(t,r,a),i)}function dv(e,t,n){var r=n.dim,i=U(e*r-.5,0,r-1),a=U(t*r-.5,0,r-1),s=Math.floor(i),o=Math.floor(a),u=Math.min(s+1,r-1),l=Math.min(o+1,r-1);return fv(n.get(s,o),n.get(u,o),n.get(s,l),n.get(u,l),i-s,a-o)}var vv={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]},mv=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(f(this,e),this.uid=t,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return te('"'.concat(r,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=n.height;var s=this.dim=n.height-2,o=new Uint32Array(n.data.buffer);if(this.pixels=new Uint8Array(n.data.buffer),this.encoding=r||"mapbox",this.borderReady=i,!i){for(var u=0;u<s;u++)o[this._idx(-1,u)]=o[this._idx(0,u)],o[this._idx(s,u)]=o[this._idx(s-1,u)],o[this._idx(u,-1)]=o[this._idx(u,0)],o[this._idx(u,s)]=o[this._idx(u,s-1)];o[this._idx(-1,-1)]=o[this._idx(0,0)],o[this._idx(s,-1)]=o[this._idx(s-1,0)],o[this._idx(-1,s)]=o[this._idx(0,s-1)],o[this._idx(s,s)]=o[this._idx(s-1,s-1)],a&&this._buildQuadTree()}}return d(e,[{key:"tree",get:function(){return this._tree||this._buildQuadTree(),this._tree}},{key:"_buildQuadTree",value:function(){this._tree=new pv(this)}},{key:"get",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(e=U(e,-1,this.dim),t=U(t,-1,this.dim));var n=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[n],this.pixels[n+1],this.pixels[n+2])}},{key:"unpackVector",get:function(){return vv[this.encoding]}},{key:"_idx",value:function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}},{key:"_unpackMapbox",value:function(e,t,n){return(256*e*256+256*t+n)/10-1e4}},{key:"_unpackTerrarium",value:function(e,t,n){return 256*e+t+n/256-32768}},{key:"getPixels",value:function(){return new fc({width:this.stride,height:this.stride},this.pixels)}},{key:"backfillBorder",value:function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var r=t*this.dim,i=t*this.dim+this.dim,a=n*this.dim,s=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:a=s-1;break;case 1:s=a+1}for(var o=-t*this.dim,u=-n*this.dim,l=a;l<s;l++)for(var c=r;c<i;c++){var h=4*this._idx(c,l),p=4*this._idx(c+o,l+u);this.pixels[h+0]=e.pixels[p+0],this.pixels[h+1]=e.pixels[p+1],this.pixels[h+2]=e.pixels[p+2],this.pixels[h+3]=e.pixels[p+3]}}},{key:"onDeserialize",value:function(){this._tree&&(this._tree.dem=this)}}],[{key:"getUnpackVector",value:function(e){return vv[e]}},{key:"pack",value:function(t,n){var r=[0,0,0,0],i=e.getUnpackVector(n),a=Math.floor((t+i[3])/i[2]);return r[2]=a%256,a=Math.floor(a/256),r[1]=a%256,a=Math.floor(a/256),r[0]=a,r}}]),e}();na(mv,"DEMData"),na(pv,"DemMinMaxQuadTree",{omit:["dem"]});var yv=function(){function e(t,n){f(this,e),this.max=t,this.onRemove=n,this.reset()}return d(e,[{key:"reset",value:function(){for(var e in this.data){var t,n=p(this.data[e]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}}catch(i){n.e(i)}finally{n.f()}}return this.data={},this.order=[],this}},{key:"add",value:function(e,t,n){var r=this,i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var a={value:t,timeout:void 0};if(void 0!==n&&(a.timeout=setTimeout((function(){r.remove(e,a)}),n)),this.data[i].push(a),this.order.push(i),this.order.length>this.max){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}},{key:"has",value:function(e){return e.wrapped().key in this.data}},{key:"getAndRemove",value:function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}},{key:"_getAndRemoveByKey",value:function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}},{key:"getByKey",value:function(e){var t=this.data[e];return t?t[0].value:null}},{key:"get",value:function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}},{key:"remove",value:function(e,t){if(!this.has(e))return this;var n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}},{key:"setMaxSize",value:function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}},{key:"filter",value:function(e){var t=[];for(var n in this.data){var r,i=p(this.data[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value;e(a.value)||t.push(a)}}catch(l){i.e(l)}finally{i.f()}}for(var s=0,o=t;s<o.length;s++){var u=o[s];this.remove(u.value.tileID,u)}}}]),e}(),gv=d((function e(t,n,r){f(this,e),this.func=t,this.mask=n,this.range=r}));gv.ReadOnly=!1,gv.ReadWrite=!0,gv.disabled=new gv(519,gv.ReadOnly,[0,1]);var _v=7680,Tv=d((function e(t,n,r,i,a,s){f(this,e),this.test=t,this.ref=n,this.mask=r,this.fail=i,this.depthFail=a,this.pass=s}));Tv.disabled=new Tv({func:519,mask:0},0,0,_v,_v,_v);var Ev=d((function e(t,n,r){f(this,e),this.blendFunction=t,this.blendColor=n,this.mask=r}));Ev.Replace=[1,0],Ev.disabled=new Ev(Ev.Replace,zt.transparent,[!1,!1,!1,!1]),Ev.unblended=new Ev(Ev.Replace,zt.transparent,[!0,!0,!0,!0]),Ev.alphaBlended=new Ev([1,771],zt.transparent,[!0,!0,!0,!0]);var xv=1029,bv=2305,Iv=d((function e(t,n,r){f(this,e),this.enable=t,this.mode=n,this.frontFace=r}));Iv.disabled=new Iv(!1,xv,bv),Iv.backCCW=new Iv(!0,xv,bv),Iv.backCW=new Iv(!0,xv,2304),Iv.frontCW=new Iv(!0,1028,2304),Iv.frontCCW=new Iv(!0,1028,bv);var wv=function(e){v(n,e);var t=m(n);function n(e,r,a){var s;return f(this,n),(s=t.call(this)).id=e,s._onlySymbols=a,r.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(s._sourceLoaded=!0),s._sourceLoaded&&!s._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(s.reload(),s.transform&&s.update(s.transform))})),r.on("error",(function(){s._sourceErrored=!0})),s._source=r,s._tiles={},s._cache=new yv(0,s._unloadTile.bind(i(s))),s._timers={},s._cacheTimers={},s._minTileCacheSize=r.minTileCacheSize,s._maxTileCacheSize=r.maxTileCacheSize,s._loadedParentTiles={},s._coveredTiles={},s._state=new sv,s._isRaster="raster"===s._source.type||"raster-dem"===s._source.type||"custom"===s._source.type&&"raster"===s._source._dataType,s}return d(n,[{key:"onAdd",value:function(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}},{key:"loaded",value:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}},{key:"getSource",value:function(){return this._source}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}}},{key:"_loadTile",value:function(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}},{key:"_unloadTile",value:function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))}},{key:"_abortTile",value:function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))}},{key:"serialize",value:function(){return this._source.serialize()}},{key:"prepare",value:function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}},{key:"getIds",value:function(){return G(this._tiles).map((function(e){return e.tileID})).sort(kv).map((function(e){return e.key}))}},{key:"getRenderableIds",value:function(e){var t=this,n=[];for(var r in this._tiles)this._isIdRenderable(+r,e)&&n.push(this._tiles[r]);return e?n.sort((function(e,n){var r=e.tileID,i=n.tileID,a=new R(r.canonical.x,r.canonical.y)._rotate(t.transform.angle),s=new R(i.canonical.x,i.canonical.y)._rotate(t.transform.angle);return r.overscaledZ-i.overscaledZ||s.y-a.y||s.x-a.x})).map((function(e){return e.tileID.key})):n.map((function(e){return e.tileID})).sort(kv).map((function(e){return e.key}))}},{key:"hasRenderableParent",value:function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}},{key:"_isIdRenderable",value:function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}},{key:"reload",value:function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}},{key:"_reloadTile",value:function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}},{key:"_tileLoaded",value:function(e,t,n,r){if(r)if(e.state="errored",404!==r.status)this._source.fire(new ut(r,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){var i=this.map.painter.terrain;this.update(this.transform,i.getScaledDemTileSize(),!0),i.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=it.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new ot("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}},{key:"_backfillDEM",value:function(e){for(var t=this.getRenderableIds(),n=0;n<t.length;n++){var r=t[n];if(e.neighboringTiles&&e.neighboringTiles[r]){var i=this.getTileByID(r);a(e,i),a(i,e)}}function a(e,t){if(e.dem&&!e.dem.borderReady){e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}}}},{key:"getTile",value:function(e){return this.getTileByID(e.key)}},{key:"getTileByID",value:function(e){return this._tiles[e]}},{key:"_retainLoadedChildren",value:function(e,t,n,r){for(var i in this._tiles){var a=this._tiles[i];if(!(r[i]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>n)){for(var s=a.tileID;a&&a.tileID.overscaledZ>t+1;){var o=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[o.key])&&a.hasData()&&(s=o)}for(var u=s;u.overscaledZ>t;)if(e[(u=u.scaledTo(u.overscaledZ-1)).key]){r[s.key]=s;break}}}}},{key:"findLoadedParent",value:function(e,t){if(e.key in this._loadedParentTiles){var n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(var r=e.overscaledZ-1;r>=t;r--){var i=e.scaledTo(r),a=this._getLoadedTile(i);if(a)return a}}},{key:"_getLoadedTile",value:function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}},{key:"updateCacheSize",value:function(e,t){t=t||this._source.tileSize;var n=Math.ceil(e.width/t)+1,r=Math.ceil(e.height/t)+1,i=Math.floor(n*r*5),a="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,s="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,a):a;this._cache.setMaxSize(s)}},{key:"handleWrapJump",value:function(e){var t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),n[i.tileID.key]=i}for(var a in this._tiles=n,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var s in this._tiles)this._setTileReloadTimer(+s,this._tiles[s])}}},{key:"update",value:function(e,t,r){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused&&!this.transform.freezeTileCoverage&&(!this.usedForTerrain||r)){var a;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new Bh(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(a=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(a=a.filter((function(e){return i._source.hasTile(e)})))):a=[];var s=this._updateRetainedTiles(a);if(Sv(this._source.type)&&0!==a.length){for(var o={},u={},l=0,c=Object.keys(s);l<c.length;l++){var h=c[l],f=s[h],d=this._tiles[h];if(d&&!(d.fadeEndTime&&d.fadeEndTime<=it.now())){var v=this.findLoadedParent(f,Math.max(f.overscaledZ-n.maxOverzooming,this._source.minzoom));v&&(this._addTile(v.tileID),o[v.tileID.key]=v.tileID),u[h]=f}}var m=a[a.length-1].overscaledZ;for(var y in this._tiles){var g=this._tiles[y];if(!s[y]&&g.hasData())for(var _=g.tileID;_.overscaledZ>m;){_=_.scaledTo(_.overscaledZ-1);var T=this._tiles[_.key];if(T&&T.hasData()&&u[_.key]){s[y]=g.tileID;break}}}for(var E in o)s[E]||(this._coveredTiles[E]=!0,s[E]=o[E])}for(var x in s)this._tiles[x].clearFadeHold();var b,I=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n}(this._tiles,s),w=p(I);try{for(w.s();!(b=w.n()).done;){var k=b.value,S=this._tiles[k];S.hasSymbolBuckets&&!S.holdingForFade()?S.setHoldDuration(this.map._fadeDuration):S.hasSymbolBuckets&&!S.symbolFadeFinished()||this._removeTile(+k)}}catch(R){w.e(R)}finally{w.f()}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}}},{key:"releaseSymbolFadeTiles",value:function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}},{key:"_updateRetainedTiles",value:function(e){var t={};if(0===e.length)return t;var r,i={},a=e.reduce((function(e,t){return Math.min(e,t.overscaledZ)}),1/0),s=e[0].overscaledZ,o=Math.max(s-n.maxOverzooming,this._source.minzoom),u=Math.max(s+n.maxUnderzooming,this._source.minzoom),l={},c=p(e);try{for(c.s();!(r=c.n()).done;){var h=r.value,f=this._addTile(h);t[h.key]=h,f.hasData()||a<this._source.maxzoom&&(l[h.key]=h)}}catch(I){c.e(I)}finally{c.f()}this._retainLoadedChildren(l,a,u,t);var d,v=p(e);try{for(v.s();!(d=v.n()).done;){var m=d.value,y=this._tiles[m.key];if(!y.hasData()){if(m.canonical.z>=this._source.maxzoom){var g=m.children(this._source.maxzoom)[0],_=this.getTile(g);if(_&&_.hasData()){t[g.key]=g;continue}}else{var T=m.children(this._source.maxzoom);if(t[T[0].key]&&t[T[1].key]&&t[T[2].key]&&t[T[3].key])continue}for(var E=y.wasRequested(),x=m.overscaledZ-1;x>=o;--x){var b=m.scaledTo(x);if(i[b.key])break;if(i[b.key]=!0,!(y=this.getTile(b))&&E&&(y=this._addTile(b)),y&&(t[b.key]=b,E=y.wasRequested(),y.hasData()))break}}}}catch(I){v.e(I)}finally{v.f()}return t}},{key:"_updateLoadedParentTileCache",value:function(){for(var e in this._loadedParentTiles={},this._tiles){for(var t=[],n=void 0,r=this._tiles[e].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var a=0,s=t;a<s.length;a++){var o=s[a];this._loadedParentTiles[o]=n}}}},{key:"_addTile",value:function(e){var t=this._tiles[e.key];if(t)return t;(t=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));var n=Boolean(t);if(!n){var r=this.map?this.map.painter:null;t=new av(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,r,this._isRaster),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new ot("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}},{key:"_setTileReloadTimer",value:function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((function(){n._reloadTile(e,"expired"),delete n._timers[e]}),r))}},{key:"_removeTile",value:function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}},{key:"clearTiles",value:function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}},{key:"tilesIn",value:function(e,t,n){var r=[],i=this.transform;if(!i)return r;var a="globe"===i.projection.name,s=gl(i.center.lng);for(var o in this._tiles){var u=this._tiles[o];if(n&&u.clearQueryDebugViz(),!u.holdingForFade()){var l=void 0;if(a){var h=u.tileID.canonical;if(0===h.z){var f=[Math.abs(U.apply(void 0,[s].concat(c(Rv(h,-1))))-s),Math.abs(U.apply(void 0,[s].concat(c(Rv(h,1))))-s)];l=[0,2*f.indexOf(Math.min.apply(Math,f))-1]}else{var d=[Math.abs(U.apply(void 0,[s].concat(c(Rv(h,-1))))-s),Math.abs(U.apply(void 0,[s].concat(c(Rv(h,0))))-s),Math.abs(U.apply(void 0,[s].concat(c(Rv(h,1))))-s)];l=[d.indexOf(Math.min.apply(Math,d))-1]}}else l=[0];var v,m=p(l);try{for(m.s();!(v=m.n()).done;){var y=v.value,g=e.containsTile(u,i,t,y);g&&r.push(g)}}catch(_){m.e(_)}finally{m.f()}}}return r}},{key:"getVisibleCoordinates",value:function(e){var t,n=this,r=this.getRenderableIds(e).map((function(e){return n._tiles[e].tileID})),i=p(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.projMatrix=this.transform.calculateProjMatrix(a.toUnwrapped())}}catch(s){i.e(s)}finally{i.f()}return r}},{key:"hasTransition",value:function(){if(this._source.hasTransition())return!0;if(Sv(this._source.type))for(var e in this._tiles){var t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=it.now())return!0}return!1}},{key:"setFeatureState",value:function(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}},{key:"removeFeatureState",value:function(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}},{key:"getFeatureState",value:function(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}},{key:"setDependencies",value:function(e,t,n){var r=this._tiles[e];r&&r.setDependencies(t,n)}},{key:"reloadTilesForDependencies",value:function(e,t){for(var n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter((function(n){return!n.hasDependency(e,t)}))}},{key:"_preloadTiles",value:function(e,t){var n,r=this,i=new Map,a=Array.isArray(e)?e:[e],s=this.map.painter.terrain,o=this.usedForTerrain&&s?s.getScaledDemTileSize():this._source.tileSize,u=p(a);try{for(u.s();!(n=u.n()).done;){var l,c=n.value,h=c.coveringTiles({tileSize:o,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),f=p(h);try{for(f.s();!(l=f.n()).done;){var d=l.value;i.set(d.key,d)}}catch(v){f.e(v)}finally{f.f()}this.usedForTerrain&&c.updateElevation(!1)}}catch(v){u.e(v)}finally{u.f()}z(Array.from(i.values()),(function(e,t){var n=new av(e,r._source.tileSize*e.overscaleFactor(),r.transform.tileZoom,r.map.painter,r._isRaster);r._loadTile(n,(function(e){"raster-dem"===r._source.type&&n.dem&&r._backfillDEM(n),t(e,n)}))}),t)}}]),n}(lt);function kv(e,t){var n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Sv(e){return"raster"===e||"image"===e||"video"===e||"custom"===e}function Rv(e,t){var n=1<<e.z;return[e.x/n+t,(e.x+1)/n+t]}wv.maxOverzooming=10,wv.maxUnderzooming=3;var Cv=function(){function e(t,n,r){f(this,e),this._demTile=t,this._dem=this._demTile.dem,this._scale=n,this._offset=r}return d(e,[{key:"tileCoordToPixel",value:function(e,t){var n=t*this._scale+this._offset[1],r=Math.floor(e*this._scale+this._offset[0]),i=Math.floor(n);return new R(r,i)}},{key:"getElevationAt",value:function(e,t,n,r){var i=e*this._scale+this._offset[0],a=t*this._scale+this._offset[1],s=Math.floor(i),o=Math.floor(a),u=this._dem;return r=!!r,n?Gn(Gn(u.get(s,o,r),u.get(s,o+1,r),a-o),Gn(u.get(s+1,o,r),u.get(s+1,o+1,r),a-o),i-s):u.get(s,o,r)}},{key:"getElevationAtPixel",value:function(e,t,n){return this._dem.get(e,t,!!n)}},{key:"getMeterToDEM",value:function(e){return(1<<this._demTile.tileID.canonical.z)*Tl(1,e)*this._dem.stride}}],[{key:"create",value:function(t,n,r){var i=r||t.findDEMTileFor(n);if(i&&i.dem){var a=i.dem,s=i.tileID,o=1<<n.canonical.z-s.canonical.z;return new e(i,i.tileSize/Bo/o,[(n.canonical.x/o-s.canonical.x)*a.dim,(n.canonical.y/o-s.canonical.y)*a.dim])}}}]),e}(),Dv=function(){function e(t,n){f(this,e),this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new $i(Bo,16,0),this.featureIndexArray=new eo,this.promoteId=n}return d(e,[{key:"insert",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,a);for(var o=this.grid,u=0;u<t.length;u++){for(var l=t[u],c=[1/0,1/0,-1/0,-1/0],h=0;h<l.length;h++){var p=l[h];c[0]=Math.min(c[0],p.x),c[1]=Math.min(c[1],p.y),c[2]=Math.max(c[2],p.x),c[3]=Math.max(c[3],p.y)}c[0]<Bo&&c[1]<Bo&&c[2]>=0&&c[3]>=0&&o.insert(s,c[0],c[1],c[2],c[3])}}},{key:"loadVTLayers",value:function(){if(!this.vtLayers)for(var e in this.vtLayers=new gh(new gp(this.rawTileData)).layers,this.sourceLayerCoder=new Fd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={},this.vtLayers)this.vtFeatures[e]=[];return this.vtLayers}},{key:"query",value:function(e,t,n,r){var i=this;this.loadVTLayers();var a=e.params||{},s=Ti(a.filter),o=e.tileResult,u=e.transform,l=o.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,(function(e,t,n,r){return Xl(o.bufferedTilespaceGeometry,e,t,n,r)}));c.sort(Ov);var h=null;u.elevation&&c.length>0&&(h=Cv.create(u.elevation,this.tileID));for(var p,f={},d=function(){var u=c[v];if(u===p)return"continue";p=u;var l=i.featureIndexArray.get(u),d=null;i.loadMatchingFeature(f,l,s,a.layers,a.availableImages,t,n,r,(function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return d||(d=Ml(t,i.tileID.canonical,e.tileTransform)),n.queryIntersectsFeature(o,t,r,d,i.z,e.transform,e.pixelPosMatrix,h,a)}))},v=0;v<c.length;v++)d();return f}},{key:"loadMatchingFeature",value:function(e,t,n,r,i,a,s,o,u){var l=t.featureIndex,c=t.bucketIndex,h=t.sourceLayerIndex,p=t.layoutVertexArrayOffset,f=this.bucketLayerIDs[c];if(!r||function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(r,f)){var d=this.sourceLayerCoder.decode(h),v=this.vtLayers[d].feature(l);if(n.needGeometry){var m=Pl(v,!0);if(!n.filter(new ts(this.tileID.overscaledZ),m,this.tileID.canonical))return}else if(!n.filter(new ts(this.tileID.overscaledZ),v))return;for(var y=this.getId(v,d),g=0;g<f.length;g++){var _=f[g];if(!(r&&r.indexOf(_)<0)){var T=a[_];if(T){var E={};void 0!==y&&o&&(E=o.getState(T.sourceLayer||"_geojsonTileLayer",y));var x=H({},s[_]);x.paint=Av(x.paint,T.paint,v,E,i),x.layout=Av(x.layout,T.layout,v,E,i);var b=!u||u(v,T,E,p);if(b){var I=new Ud(v,this.z,this.x,this.y,y);I.layer=x;var w=e[_];void 0===w&&(w=e[_]=[]),w.push({featureIndex:l,feature:I,intersectionZ:b})}}}}}}},{key:"lookupSymbolFeatures",value:function(e,t,n,r,i,a,s,o){var u={};this.loadVTLayers();var l,c=Ti(i),h=p(e);try{for(h.s();!(l=h.n()).done;){var f=l.value;this.loadMatchingFeature(u,{bucketIndex:n,sourceLayerIndex:r,featureIndex:f,layoutVertexArrayOffset:0},c,a,s,o,t)}}catch(d){h.e(d)}finally{h.f()}return u}},{key:"loadFeature",value:function(e){var t=e.featureIndex,n=e.sourceLayerIndex;this.loadVTLayers();var r=this.sourceLayerCoder.decode(n),i=this.vtFeatures[r];if(i[t])return i[t];var a=this.vtLayers[r].feature(t);return i[t]=a,a}},{key:"hasLayer",value:function(e){var t,n=p(this.bucketLayerIDs);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,a=p(i);try{for(a.s();!(r=a.n()).done;)if(e===r.value)return!0}catch(s){a.e(s)}finally{a.f()}}}catch(s){n.e(s)}finally{n.f()}return!1}},{key:"getId",value:function(e,t){var n=e.id;if(this.promoteId){var r="string"==typeof this.promoteId?this.promoteId:this.promoteId[t];null!=r&&(n=e.properties[r]),"boolean"==typeof n&&(n=Number(n))}return n}}]),e}();function Av(e,t,n,r,i){return Q(e,(function(e,a){var s=t instanceof ls?t.get(a):null;return s&&s.evaluate?s.evaluate(n,r,i):s}))}function Ov(e,t){return t-e}na(Dv,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});var Nv=function(){function e(t,n){f(this,e),this.width=t,this.height=n,this.nextRow=0,this.image=new pc({width:t,height:n}),this.positions={},this.uploaded=!1}return d(e,[{key:"getDash",value:function(e,t){var n=this.getKey(e,t);return this.positions[n]}},{key:"trim",value:function(){var e=this.width,t=this.height=Y(this.nextRow);this.image.resize({width:e,height:t})}},{key:"getKey",value:function(e,t){return e.join(",")+t}},{key:"getDashRanges",value:function(e,t,n){var r=[],i=e.length%2==1?-e[e.length-1]*n:0,a=e[0]*n,s=!0;r.push({left:i,right:a,isDash:s,zeroLength:0===e[0]});for(var o=e[0],u=1;u<e.length;u++){s=!s;var l=e[u];i=o*n,a=(o+=l)*n,r.push({left:i,right:a,isDash:s,zeroLength:0===l})}return r}},{key:"addRoundDash",value:function(e,t,n){for(var r=t/2,i=-n;i<=n;i++)for(var a=this.width*(this.nextRow+n+i),s=0,o=e[s],u=0;u<this.width;u++){u/o.right>1&&(o=e[++s]);var l=Math.abs(u-o.left),c=Math.abs(u-o.right),h=Math.min(l,c),p=void 0,f=i/n*(r+1);if(o.isDash){var d=r-Math.abs(f);p=Math.sqrt(h*h+d*d)}else p=r-Math.sqrt(h*h+f*f);this.image.data[a+u]=Math.max(0,Math.min(255,p+128))}}},{key:"addRegularDash",value:function(e,t){for(var n=e.length-1;n>=0;--n){var r=e[n],i=e[n+1];r.zeroLength?e.splice(n,1):i&&i.isDash===r.isDash&&(i.left=r.left,e.splice(n,1))}var a=e[0],s=e[e.length-1];a.isDash===s.isDash&&(a.left=s.left-this.width,s.right=a.right+this.width);for(var o=this.width*this.nextRow,u=0,l=e[u],c=0;c<this.width;c++){c/l.right>1&&(l=e[++u]);var h=Math.abs(c-l.left),p=Math.abs(c-l.right),f=Math.min(h,p);this.image.data[o+c]=Math.max(0,Math.min(255,(l.isDash?f:-f)+t+128))}}},{key:"addDash",value:function(e,t){var n=this.getKey(e,t);if(this.positions[n])return this.positions[n];var r="round"===t,i=r?7:0,a=2*i+1;if(this.nextRow+a>this.height)return te("LineAtlas out of space"),null;0===e.length&&e.push(1);for(var s=0,o=0;o<e.length;o++)e[o]<0&&(te("Negative value is found in line dasharray, replacing values with 0"),e[o]=0),s+=e[o];if(0!==s){var u=this.width/s,l=this.getDashRanges(e,this.width,u);r?this.addRoundDash(l,u,i):this.addRegularDash(l,"square"===t?.5*u:0)}var c=this.nextRow+i;this.nextRow+=a;var h={tl:[c,i],br:[s,0]};return this.positions[n]=h,h}}]),e}();na(Nv,"LineAtlas");var Mv=d((function e(t){f(this,e);var n={},r=[];for(var i in t){var a=t[i],s=n[i]={};for(var o in a.glyphs){var u=a.glyphs[+o];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var l=u.metrics.localGlyph?2:1,c={x:0,y:0,w:u.bitmap.width+2*l,h:u.bitmap.height+2*l};r.push(c),s[o]=c}}}var h=Hp(r),p=h.w,d=h.h,v=new pc({width:p||1,height:d||1});for(var m in t){var y=t[m];for(var g in y.glyphs){var _=y.glyphs[+g];if(_&&0!==_.bitmap.width&&0!==_.bitmap.height){var T=n[m][g],E=_.metrics.localGlyph?2:1;pc.copy(_.bitmap,v,{x:0,y:0},{x:T.x+E,y:T.y+E},_.bitmap)}}}this.image=v,this.positions=n}));na(Mv,"GlyphAtlas");var Pv=function(){function e(t){f(this,e),this.tileID=new Bh(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=Wf(t.tileID.canonical,t.projection),this.projection=t.projection}return d(e,[{key:"parse",value:function(e,t,n,r,i){var a=this;this.status="parsing",this.data=e,this.collisionBoxArray=new Ws;var s=new Fd(Object.keys(e.layers).sort()),o=new Dv(this.tileID,this.promoteId);o.bucketLayerIDs=[];var u,l,c,h,f={},d=new Nv(256,256),v={featureIndex:o,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:d,availableImages:n},m=t.familiesBySource[this.source];for(var y in m){var g=e.layers[y];if(g){var _,T=!1,E=!1,x=p(m[y]);try{for(x.s();!(_=x.n()).done;)"symbol"===_.value[0].type?T=!0:E=!0}catch(L){x.e(L)}finally{x.f()}if((!0!==this.isSymbolTile||T)&&(!1!==this.isSymbolTile||E)){1===g.version&&te('Vector tile source "'.concat(this.source,'" layer "').concat(y,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));for(var b=s.encode(y),I=[],w=0;w<g.length;w++){var k=g.feature(w),S=o.getId(k,y);I.push({feature:k,id:S,index:w,sourceLayerIndex:b})}var R,C=p(m[y]);try{for(C.s();!(R=C.n()).done;){var D=R.value,A=D[0];void 0!==this.isSymbolTile&&"symbol"===A.type!==this.isSymbolTile||A.minzoom&&this.zoom<Math.floor(A.minzoom)||A.maxzoom&&this.zoom>=A.maxzoom||"none"!==A.visibility&&(Fv(D,this.zoom,n),(f[A.id]=A.createBucket({index:o.bucketLayerIDs.length,layers:D,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:b,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:n})).populate(I,v,this.tileID.canonical,this.tileTransform),o.bucketLayerIDs.push(D.map((function(e){return e.id}))))}}catch(L){C.e(L)}finally{C.f()}}}}d.trim();var O={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},N=Q(v.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(N).length?r.send("getGlyphs",{uid:this.uid,stacks:N},(function(e,t){u||(u=e,l=t,F.call(a))}),void 0,!1,O):l={};var M=Object.keys(v.iconDependencies);M.length?r.send("getImages",{icons:M,source:this.source,tileID:this.tileID,type:"icons"},(function(e,t){u||(u=e,c=t,F.call(a))}),void 0,!1,O):c={};var P=Object.keys(v.patternDependencies);function F(){if(u)return i(u);if(l&&c&&h){var e=new Mv(l),t=new Vp(c,h);for(var r in f){var a=f[r];a instanceof xd?(Fv(a.layers,this.zoom,n),Ff(a,l,e.positions,c,t.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):a.hasPattern&&(a instanceof Kh||a instanceof $c||a instanceof kh)&&(Fv(a.layers,this.zoom,n),a.addFeatures(v,this.tileID.canonical,t.patternPositions,n,this.tileTransform))}this.status="done",i(null,{buckets:G(f).filter((function(e){return!e.isEmpty()})),featureIndex:o,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:d,imageAtlas:t,glyphMap:this.returnDependencies?l:null,iconMap:this.returnDependencies?c:null,glyphPositions:this.returnDependencies?e.positions:null})}}P.length?r.send("getImages",{icons:P,source:this.source,tileID:this.tileID,type:"patterns"},(function(e,t){u||(u=e,h=t,F.call(a))}),void 0,!1,O):h={},F.call(this)}}]),e}();function Fv(e,t,n){var r,i=new ts(t),a=p(e);try{for(a.s();!(r=a.n()).done;)r.value.recalculate(i,n)}catch(s){a.e(s)}finally{a.f()}}var Lv=function(){function e(t){f(this,e),this.entries={},this.scheduler=t}return d(e,[{key:"request",value:function(e,t,n,r){var i=this,a=this.entries[e]=this.entries[e]||{callbacks:[]};if(a.result){var s=h(a.result,2),o=s[0],u=s[1];return this.scheduler?this.scheduler.add((function(){r(o,u)}),t):r(o,u),function(){}}return a.callbacks.push(r),a.cancel||(a.cancel=n((function(n,r){a.result=[n,r];var s,o=p(a.callbacks);try{var u=function(){var e=s.value;i.scheduler?i.scheduler.add((function(){e(n,r)}),t):e(n,r)};for(o.s();!(s=o.n()).done;)u()}catch(l){o.e(l)}finally{o.f()}setTimeout((function(){return delete i.entries[e]}),3e3)}))),function(){a.result||(a.callbacks=a.callbacks.filter((function(e){return e!==r})),a.callbacks.length||(a.cancel(),delete i.entries[e]))}}}]),e}();function Uv(e,t,n){var r=JSON.stringify(e.request);return e.data&&(this.deduped.entries[r]={result:[null,e.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(function(t){var r=be(e.request,(function(e,r,i,a){e?t(e):r&&t(null,{vectorTile:n?void 0:new gh(new gp(r)),rawData:r,cacheControl:i,expires:a})}));return function(){r.cancel(),t()}}),t)}e.ARRAY_TYPE=Ho,e.AUTH_ERR_MSG=Ce,e.Aabb=Fu,e.Actor=function(){function e(t,n,r){f(this,e),this.target=t,this.parent=n,this.mapId=r,this.callbacks={},this.cancelCallbacks={},X(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=ie()?t:g,this.scheduler=new Pd}return d(e,[{key:"send",value:function(e,t,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0,o=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=s,this.callbacks[o]=n);var u=oe(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:e,hasCallback:!!n,targetMapId:r,mustQueue:a,sourceMapId:this.mapId,data:sa(t,u)},u),{cancel:function(){n&&delete i.callbacks[o],i.target.postMessage({id:o,type:"<cancel>",targetMapId:r,sourceMapId:i.mapId})}}}},{key:"receive",value:function(e){var t=this,n=e.data,r=n.id;if(r&&(!n.targetMapId||this.mapId===n.targetMapId))if("<cancel>"===n.type){var i=this.cancelCallbacks[r];delete this.cancelCallbacks[r],i&&i.cancel()}else if(n.mustQueue||ie()){var a=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add((function(){return t.processTask(r,n)}),a&&a.metadata||{type:"message"})}else this.processTask(r,n)}},{key:"processTask",value:function(e,t){var n=this;if("<response>"===t.type){var r=this.callbacks[e];delete this.callbacks[e],r&&(t.error?r(oa(t.error)):r(null,oa(t.data)))}else{var i=oe(this.globalScope)?void 0:[],a=t.hasCallback?function(t,r){delete n.cancelCallbacks[e],n.target.postMessage({id:e,type:"<response>",sourceMapId:n.mapId,error:t?sa(t):null,data:sa(r,i)},i)}:function(e){},s=oa(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,s,a);else if(this.parent.getWorkerSource){var o=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,o[0],s.source)[o[1]](s,a)}else a(new Error("Could not find function ".concat(t.type)))}}},{key:"remove",value:function(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}]),e}(),e.CanonicalTileID=Uh,e.Color=zt,e.ColorMode=Ev,e.CullFaceMode=Iv,e.DEMData=mv,e.DataConstantProperty=cs,e.DedupedRequest=Lv,e.DepthMode=gv,e.EXTENT=Bo,e.Elevation=function(){function e(){f(this,e)}return d(e,[{key:"isDataAvailableAtPoint",value:function(e){var t=this._source();if(this.isUsingMockSource()||!t||e.y<0||e.y>1)return!1;var n=t.getSource().maxzoom,r=1<<n,i=Math.floor(e.x),a=Math.floor((e.x-i)*r),s=Math.floor(e.y*r),o=this.findDEMTileFor(new Bh(n,i,n,a,s));return!(!o||!o.dem)}},{key:"getAtPointOrZero",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getAtPoint(e,t)||0}},{key:"getAtPoint",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isUsingMockSource())return null;null==t&&(t=null);var r=this._source();if(!r)return t;if(e.y<0||e.y>1)return t;var i=r.getSource().maxzoom,a=1<<i,s=Math.floor(e.x),o=e.x-s,u=new Bh(i,s,i,Math.floor(o*a),Math.floor(e.y*a)),l=this.findDEMTileFor(u);if(!l||!l.dem)return t;var c=l.dem,h=1<<l.tileID.canonical.z,p=(o*h-l.tileID.canonical.x)*c.dim,f=(e.y*h-l.tileID.canonical.y)*c.dim,d=Math.floor(p),v=Math.floor(f);return(n?this.exaggeration():1)*Gn(Gn(c.get(d,v),c.get(d,v+1),f-v),Gn(c.get(d+1,v),c.get(d+1,v+1),f-v),p-d)}},{key:"getAtTileOffset",value:function(e,t,n){var r=1<<e.canonical.z;return this.getAtPointOrZero(new kl(e.wrap+(e.canonical.x+t/Bo)/r,(e.canonical.y+n/Bo)/r))}},{key:"getAtTileOffsetFunc",value:function(e,t,n,r){var i=this;return function(a){var s=i.getAtTileOffset(e,a.x,a.y),o=r.upVector(e.canonical,a.x,a.y);return hu(o,o,s*r.upVectorScale(e.canonical,t,n).metersToTile),o}}},{key:"getForTilePoints",value:function(e,t,n,r){var i=this;if(this.isUsingMockSource())return!1;var a=Cv.create(this,e,r);return!!a&&(t.forEach((function(e){e[2]=i.exaggeration()*a.getElevationAt(e[0],e[1],n)})),!0)}},{key:"getMinMaxForTile",value:function(e){if(this.isUsingMockSource())return null;var t=this.findDEMTileFor(e);if(!t||!t.dem)return null;for(var n=t.dem.tree,r=t.tileID,i=1<<e.canonical.z-r.canonical.z,a=e.canonical.x/i-r.canonical.x,s=e.canonical.y/i-r.canonical.y,o=0,u=0;u<e.canonical.z-r.canonical.z&&!n.leaves[o];u++){a*=2,s*=2;var l=2*Math.floor(s)+Math.floor(a);o=n.childOffsets[o]+l,a%=1,s%=1}return{min:this.exaggeration()*n.minimums[o],max:this.exaggeration()*n.maximums[o]}}},{key:"getMinElevationBelowMSL",value:function(){throw new Error("Pure virtual method called.")}},{key:"raycast",value:function(e,t,n){throw new Error("Pure virtual method called.")}},{key:"pointCoordinate",value:function(e){throw new Error("Pure virtual method called.")}},{key:"_source",value:function(){throw new Error("Pure virtual method called.")}},{key:"isUsingMockSource",value:function(){throw new Error("Pure virtual method called.")}},{key:"exaggeration",value:function(){throw new Error("Pure virtual method called.")}},{key:"findDEMTileFor",value:function(e){throw new Error("Pure virtual method called.")}},{key:"visibleDemTiles",get:function(){throw new Error("Getter must be implemented in subclass.")}}]),e}(),e.ErrorEvent=ut,e.EvaluationParameters=ts,e.Event=ot,e.Evented=lt,e.FillExtrusionBucket=kh,e.Frustum=Pu,e.FrustumCorners=Mu,e.GLOBE_RADIUS=Lu,e.GLOBE_SCALE_MATCH_LATITUDE=45,e.GLOBE_ZOOM_THRESHOLD_MAX=6,e.GLOBE_ZOOM_THRESHOLD_MIN=5,e.GlobeSharedBuffers=function(){function e(t){f(this,e),this._createGrid(t),this._createPoles(t)}return d(e,[{key:"destroy",value:function(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();var e,t=p(this._poleSegments);try{for(t.s();!(e=t.n()).done;)e.value.destroy()}catch(o){t.e(o)}finally{t.f()}var n,r=p(this._gridSegments);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.withSkirts.destroy(),i.withoutSkirts.destroy()}}catch(o){r.e(o)}finally{r.f()}if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();var a,s=p(this._wireframeSegments);try{for(s.s();!(a=s.n()).done;)a.value.destroy()}catch(o){s.e(o)}finally{s.f()}}}},{key:"_fillGridMeshWithLods",value:function(e,t){for(var n=new Ts,r=new Fs,i=[],a=e+1+2,s=t[0]+1,o=t[0]+1+(1+t.length),u=function(e,t,n){var r=e===a-1?e-2:0===e?e:e-1;return[r+=n?24575:0,t]},l=0;l<a;++l)n.emplaceBack.apply(n,c(u(l,0,!0)));for(var h=0;h<s;++h)for(var p=0;p<a;++p)n.emplaceBack.apply(n,c(u(p,h,(0===p||p===a-1)&&!0)));for(var f=0;f<t.length;++f)for(var d=t[f],v=0;v<a;++v)n.emplaceBack.apply(n,c(u(v,d,!0)));for(var m=0;m<t.length;++m){for(var y=r.length,g=t[m]+1+2,_=new Fs,T=0;T<g-1;T++)for(var E=T===g-2,x=E?a*(o-t.length+m-T):a,b=0;b<a-1;b++){var I=T*a+b;0===T||E||0===b||b===a-2?(_.emplaceBack(I+1,I,I+x),_.emplaceBack(I+x,I+x+1,I+1)):(r.emplaceBack(I+1,I,I+x),r.emplaceBack(I+x,I+x+1,I+1))}for(var w=Zo.simpleSegment(0,y,n.length,r.length-y),k=0;k<_.uint16.length;k+=3)r.emplaceBack(_.uint16[k],_.uint16[k+1],_.uint16[k+2]);var S=Zo.simpleSegment(0,y,n.length,r.length-y);i.push({withoutSkirts:w,withSkirts:S})}return{vertices:n,indices:r,segments:i}}},{key:"_createGrid",value:function(e){var t=this._fillGridMeshWithLods(Uu,Zu);this._gridSegments=t.segments,this._gridBuffer=e.createVertexBuffer(t.vertices,Ou.members),this._gridIndexBuffer=e.createIndexBuffer(t.indices,!0)}},{key:"_createPoles",value:function(e){for(var t=new Fs,n=0;n<=Uu;n++)t.emplaceBack(0,n+1,n+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);var r=new Bs,i=new Bs;this._poleSegments=[];for(var a=0,s=0;a<5;a++){var o=360/(1<<a);r.emplaceBack(0,-Lu,0,.5,0),i.emplaceBack(0,-Lu,0,.5,1);for(var u=0;u<=Uu;u++){var l=u/Uu,c=Gn(0,o,l),p=el(pl,fl,c,Lu),f=h(p,3),d=f[0],v=f[1],m=f[2];r.emplaceBack(d,v,m,l,0),i.emplaceBack(d,v,m,l,1)}this._poleSegments.push(Zo.simpleSegment(s,0,66,64)),s+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(r,Du,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(i,Du,!1)}},{key:"getGridBuffers",value:function(e,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[e].withSkirts:this._gridSegments[e].withoutSkirts]}},{key:"getPoleBuffers",value:function(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}},{key:"getWirefameBuffers",value:function(e,t){if(!this._wireframeSegments){var n=new Gs,r=Uu,i=r+1+2,a=1;this._wireframeSegments=[];for(var s=0,o=0;s<Zu.length;s++){for(var u=Zu[s],l=a;l<u+a;l++)for(var c=a;c<r+a;c++){var h=l*i+c;n.emplaceBack(h,h+1),n.emplaceBack(h,h+i),n.emplaceBack(h,h+i+1)}var p=u*r*3;this._wireframeSegments.push(Zo.simpleSegment(0,o,(u+1)*i,p)),o+=p}this._wireframeIndexBuffer=e.createIndexBuffer(n)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}}]),e}(),e.GlyphManager=Ef,e.ImagePosition=jp,e.LivePerformanceUtils=Ke,e.LngLat=ml,e.LngLatBounds=zo,e.LocalGlyphMode=Tf,e.MAX_MERCATOR_LATITUDE=Il,e.MercatorCoordinate=kl,e.ONE_EM=up,e.OverscaledTileID=Bh,e.PerformanceMarkers=Xe,e.Properties=fs,e.RGBAImage=fc,e.Ray=Nu,e.RequestManager=function(){function e(t,n,r){f(this,e),this._transformRequestFn=t,this._customAccessToken=n,this._silenceAuthErrors=!!r,this._createSkuToken()}return d(e,[{key:"_createSkuToken",value:function(){var e=function(){for(var e="",t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",w,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}},{key:"_isSkuTokenExpired",value:function(){return Date.now()>this._skuTokenExpiresAt}},{key:"transformRequest",value:function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}},{key:"normalizeStyleURL",value:function(e,t){if(!De(e))return e;var n=Fe(e);return n.path="/styles/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeGlyphsURL",value:function(e,t){if(!De(e))return e;var n=Fe(e);return n.path="/fonts/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeSourceURL",value:function(e,t,n,r){if(!De(e))return e;var i=Fe(e);return i.path="/v4/".concat(i.authority,".json"),i.params.push("secure"),n&&i.params.push("language=".concat(n)),r&&i.params.push("worldview=".concat(r)),this._makeAPIURL(i,this._customAccessToken||t)}},{key:"normalizeSpriteURL",value:function(e,t,n,r){var i=Fe(e);return De(e)?(i.path="/styles/v1".concat(i.path,"/sprite").concat(t).concat(n),this._makeAPIURL(i,this._customAccessToken||r)):(i.path+="".concat(t).concat(n),Le(i))}},{key:"normalizeTileURL",value:function(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!De(e))return e;var r=Fe(e);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(t||n&&"raster"!==r.authority&&512===n?"@2x":"").concat(E.supported?".webp":"$1")),"raster"===r.authority?r.path="/".concat(T.RASTER_URL_PREFIX).concat(r.path):(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path="/".concat(T.TILE_URL_VERSION).concat(r.path));var i=this._customAccessToken||function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value.match(/^access_token=(.*)$/);if(r)return r[1]}}catch(i){n.e(i)}finally{n.f()}return null}(r.params)||T.ACCESS_TOKEN;return T.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&r.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(r,i)}},{key:"canonicalizeTileURL",value:function(e,t){var n=Fe(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;var r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+="raster/".concat(n.path.replace("/".concat(T.RASTER_URL_PREFIX,"/"),"")):r+="tiles/".concat(n.path.replace("/".concat(T.TILE_URL_VERSION,"/"),""));var i=n.params;return t&&(i=i.filter((function(e){return!e.match(/^access_token=/)}))),i.length&&(r+="?".concat(i.join("&"))),r}},{key:"canonicalizeTileset",value:function(e,t){var n,r=!!t&&De(t),i=[],a=p(e.tiles||[]);try{for(a.s();!(n=a.n()).done;){var s=n.value;Ae(s)?i.push(this.canonicalizeTileURL(s,r)):i.push(s)}}catch(o){a.e(o)}finally{a.f()}return i}},{key:"_makeAPIURL",value:function(e,t){var n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",r=Fe(T.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"http"===e.protocol){var i=e.params.indexOf("secure");i>=0&&e.params.splice(i,1)}if("/"!==r.path&&(e.path="".concat(r.path).concat(e.path)),!T.REQUIRE_ACCESS_TOKEN)return Le(e);if(t=t||T.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error("An API access token is required to use Mapbox GL. ".concat(n));if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(n))}return e.params=e.params.filter((function(e){return-1===e.indexOf("access_token")})),e.params.push("access_token=".concat(t||"")),Le(e)}}]),e}(),e.ResourceType=_e,e.SegmentVector=Zo,e.SourceCache=wv,e.StencilMode=Tv,e.StructArrayLayout1ui2=Hs,e.StructArrayLayout2f1f2i16=Ns,e.StructArrayLayout2i4=Ts,e.StructArrayLayout2ui4=Gs,e.StructArrayLayout3f12=Ps,e.StructArrayLayout3ui6=Fs,e.StructArrayLayout4i8=xs,e.StructArrayLayout5f20=Bs,e.Texture=Nd,e.Tile=av,e.Transitionable=is,e.Uniform1f=mo,e.Uniform1i=function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).current=0,r}return d(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}}]),n}(vo),e.Uniform2f=function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).current=[0,0],r}return d(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}}]),n}(vo),e.Uniform3f=function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).current=[0,0,0],r}return d(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}}]),n}(vo),e.Uniform4f=yo,e.UniformColor=go,e.UniformMatrix2f=function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).current=Eo,r}return d(n,[{key:"set",value:function(e,t,n){if(this.fetchUniformLocation(e,t))for(var r=0;r<4;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}}]),n}(vo),e.UniformMatrix3f=function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).current=To,r}return d(n,[{key:"set",value:function(e,t,n){if(this.fetchUniformLocation(e,t))for(var r=0;r<9;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}}]),n}(vo),e.UniformMatrix4f=function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).current=_o,r}return d(n,[{key:"set",value:function(e,t,n){if(this.fetchUniformLocation(e,t)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(var r=1;r<16;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}}]),n}(vo),e.UnwrappedTileID=Zh,e.ValidationError=hi,e.VectorTileFeature=_h,e.VectorTileWorkerSource=function(e){v(n,e);var t=m(n);function n(e,r,i,a,s){var o;return f(this,n),(o=t.call(this)).actor=e,o.layerIndex=r,o.availableImages=i,o.loadVectorData=s||Uv,o.loading={},o.loaded={},o.deduped=new Lv(e.scheduler),o.isSpriteLoaded=a,o.scheduler=e.scheduler,o}return d(n,[{key:"loadTile",value:function(e,t){var n=this,r=e.uid,i=e&&e.request,a=i&&i.collectResourceTiming,s=this.loading[r]=new Pv(e);s.abort=this.loadVectorData(e,(function(o,u){var l=!n.loading[r];if(delete n.loading[r],l||o||!u)return s.status="done",l||(n.loaded[r]=s),t(o);var c=u.rawData,h={};u.expires&&(h.expires=u.expires),u.cacheControl&&(h.cacheControl=u.cacheControl),s.vectorTile=u.vectorTile||new gh(new gp(c));var p=function(){s.parse(s.vectorTile,n.layerIndex,n.availableImages,n.actor,(function(e,n){if(e||!n)return t(e);var r={};if(a){var s=rt(i);s.length>0&&(r.resourceTiming=JSON.parse(JSON.stringify(s)))}t(null,H({rawTileData:c.slice(0)},n,h,r))}))};n.isSpriteLoaded?p():n.once("isSpriteLoaded",(function(){n.scheduler?n.scheduler.add(p,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):p()})),n.loaded=n.loaded||{},n.loaded[r]=s}))}},{key:"reloadTile",value:function(e,t){var n=this,r=this.loaded,i=e.uid,a=this;if(r&&r[i]){var s=r[i];s.showCollisionBoxes=e.showCollisionBoxes,s.enableTerrain=!!e.enableTerrain,s.projection=e.projection,s.tileTransform=Wf(e.tileID.canonical,e.projection);var o=function(e,r){var i=s.reloadCallback;i&&(delete s.reloadCallback,s.parse(s.vectorTile,a.layerIndex,n.availableImages,a.actor,i)),t(e,r)};"parsing"===s.status?s.reloadCallback=o:"done"===s.status&&(s.vectorTile?s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,o):o())}}},{key:"abortTile",value:function(e,t){var n=e.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),t()}},{key:"removeTile",value:function(e,t){var n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()}}]),n}(lt),e.WritingMode=Wp,e.ZoomDependentExpression=oi,e.add=su,e.addDynamicAttributes=gd,e.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],o=t[5],u=t[6],l=t[7],c=t[8];return e[0]=s*c-o*l,e[1]=i*l-r*c,e[2]=r*o-i*s,e[3]=o*u-a*c,e[4]=n*c-i*u,e[5]=i*a-n*o,e[6]=a*l-s*u,e[7]=r*u-n*l,e[8]=n*s-r*a,e},e.asyncAll=z,e.bezier=F,e.bindAll=X,e.boundsAttributes=rv,e.bufferConvexPolygon=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=B(r-1,-1,e.length-1),a=B(r+1,-1,e.length-1),s=e[r],o=e[a],u=e[i].sub(s).unit(),l=o.sub(s).unit(),c=l.angleWithSep(u.x,u.y),h=u.add(l).unit().mult(-1*t/Math.sin(c/2));n.push(s.add(h))}return n},e.cacheEntryPossiblyAdded=function(e){++ge>de&&(e.getActor().send("enforceCacheSizeLimit",fe),ge=0)},e.calculateGlobeLabelMatrix=function(e,t){var n=e.point,r=ol(n.x,n.y,e.worldSize/e._pixelsPerMercatorPixel,0,0);return qo(r,r,sl(Yu(t)))},e.calculateGlobeMatrix=function(e){var t=e.point,n=t.x,r=t.y,i=e._center,a=i.lng,s=i.lat;return ol(n,r,e.worldSize,a,s)},e.calculateGlobeMercatorMatrix=function(e){var t=e.pixelsPerMeter,n=t/Tl(1,e.center.lat),r=Wo(new Float64Array(16));return Xo(r,r,[e.point.x,e.point.y,0]),Ko(r,r,[n,n,t]),Float32Array.from(r)},e.circumferenceAtLatitude=yl,e.clamp=U,e.clearTileCache=function(e){if(ve()){var t=g.caches.delete(pe);e&&t.catch(e).then((function(){return e()}))}},e.clipLine=mf,e.clone=function(e){var t=new Ho(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=$,e.collisionCircleLayout=op,e.config=T,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new Ho(16);return Ho!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=jo,e.createExpression=ai,e.createLayout=gs,e.createStyleLayer=function(e){return"custom"===e.type?new Cd(e):new Od[e.type](e)},e.cross=vu,e.degToRad=O,e.distance=function(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},e.dot=du,e.earthRadius=dl,e.ease=L,e.easeCubicInOut=P,e.ecefToLatLng=function(e){var t=h(e,3),n=t[0],r=t[1],i=t[2],a=Math.hypot(n,r,i),s=Math.atan2(n,i),o=.5*Math.PI-Math.acos(-r/a);return new ml(N(s),N(o))},e.emitValidationErrors=Ji,e.endsWith=K,e.enforceCacheSizeLimit=function(e){me(),ce&&ce.then((function(t){t.keys().then((function(n){for(var r=0;r<n.length-e;r++)t.delete(n[r])}))}))},e.evaluateSizeForFeature=hp,e.evaluateSizeForZoom=pp,e.evaluateVariableOffset=Pf,e.evented=Qa,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=it,e.exported$1=E,e.extend=H,e.extend$1=ht,e.fillExtrusionHeightLift=Nh,e.filterObject=J,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=n+n,o=r+r,u=i+i,l=n*s,c=r*s,h=r*o,p=i*s,f=i*o,d=i*u,v=a*s,m=a*o,y=a*u;return e[0]=1-h-d,e[1]=c+y,e[2]=p-m,e[3]=0,e[4]=c-y,e[5]=1-l-d,e[6]=f+v,e[7]=0,e[8]=p+m,e[9]=f-v,e[10]=1-l-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=$o,e.furthestTileCorner=function(e){var t=Math.round((e+45+360)%360/90)%4;return M[t]},e.getAABBPointSquareDist=function(e,t,n){for(var r=0,i=0;i<2;++i){var a=n?n[i]:0;e[i]>a&&(r+=(e[i]-a)*(e[i]-a)),t[i]<a&&(r+=(a-t[i])*(a-t[i]))}return r},e.getAnchorAlignment=rf,e.getAnchorJustification=Lf,e.getBounds=function(e){var t,n=1/0,r=1/0,i=-1/0,a=-1/0,s=p(e);try{for(s.s();!(t=s.n()).done;){var o=t.value;n=Math.min(n,o.x),r=Math.min(r,o.y),i=Math.max(i,o.x),a=Math.max(a,o.y)}}catch(u){s.e(u)}finally{s.f()}return{min:new R(n,r),max:new R(i,a)}},e.getColumn=le,e.getGridMatrix=function(e,t,n,r){var i=t.getNorth(),a=t.getSouth(),s=t.getWest(),o=t.getEast(),u=1<<e.z,l=o-s,c=i-a,h=l/Uu,p=-c/Zu[n],f=[0,h,0,p,0,0,i,s,0];if(e.z>0){var d=180/r;Vo(f,f,[d/l+1,0,0,0,d/c+1,0,-.5*d/h,.5*d/p,1])}return f[2]=u,f[5]=e.x,f[8]=e.y,f},e.getImage=Re,e.getJSON=function(e,t){return xe(H(e,{type:"json"}),t)},e.getLatitudinalLod=function(e){var t=Il-5;e=U(e,-t,t)/t*90;var n=Math.pow(Math.abs(Math.sin(O(e))),3);return Math.round(n*(Zu.length-1))},e.getMapSessionAPI=Ye,e.getPerformanceMeasurement=rt,e.getProjection=fd,e.getRTLTextPluginStatus=Ja,e.getReferrer=Ee,e.getTilePoint=function(e,t){var n=t.x,r=t.y;return new R(((n-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0))*e.scale-e.x)*Bo,(r*e.scale-e.y)*Bo)},e.getTileVec3=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return au(((t.x-n)*e.scale-e.x)*Bo,(t.y*e.scale-e.y)*Bo,bl(t.z,t.y))},e.getVideo=function(e,t){var n=g.document.createElement("video");n.muted=!0,n.onloadstart=function(){t(null,n)};for(var r=0;r<e.length;r++){var i=g.document.createElement("source");Ie(e[r])||(n.crossOrigin="Anonymous"),i.src=e[r],n.appendChild(i)}return{cancel:function(){}}},e.globeCenterToScreenPoint=function(e){var t=[0,0,0],n=Wo(new Float64Array(16));return qo(n,e.pixelMatrix,e.globeMatrix),mu(t,t,n),new R(t[0],t[1])},e.globeDenormalizeECEF=sl,e.globeECEFOrigin=function(e,t){var n=[0,0,0];return mu(n,n,al(Yu(t.canonical))),mu(n,n,e),n},e.globeMetersToEcef=Hu,e.globeNormalizeECEF=al,e.globePixelsToTileUnits=function(e,t){return Bo/(512*Math.pow(2,e))*rl(Yu(t))},e.globePoleMatrixForTile=function(e,t,n){var r=Wo(new Float64Array(16)),i=(t/(1<<e)-.5)*Math.PI*2;return Jo(r,n.globeMatrix,i),Float32Array.from(r)},e.globeTileBounds=Yu,e.globeTiltAtLngLat=ll,e.globeToMercatorTransition=ul,e.globeUseCustomAntiAliasing=function(e,t,n){var r=ul(n.zoom),i=e.style.map._antialias,a=!!t.extStandardDerivatives,s=t.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return 0===r&&!i&&!s&&a},e.identity=Wo,e.identity$1=ku,e.invert=Yo,e.isFullscreen=function(){return!!g.document.fullscreenElement||!!g.document.webkitFullscreenElement},e.isLngLatBehindGlobe=cl,e.isMapAuthenticated=function(e){return qe.has(e)},e.isMapboxURL=De,e.isSafariWithAntialiasingBug=function(e){var t=e.navigator?e.navigator.userAgent:null;return!!oe(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=xl,e.latLngToECEF=tl,e.len=Eu,e.length=iu,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.lngFromMercatorX=El,e.loadVectorTile=Uv,e.makeRequest=xe,e.mapValue=function(e,t,n,r,i){return U((e-t)/(n-t)*(i-r)+r,r,i)},e.mercatorScale=wl,e.mercatorXfromLng=gl,e.mercatorYfromLat=_l,e.mercatorZfromAltitude=Tl,e.mul=tu,e.mul$1=Tu,e.multiply=qo,e.multiply$1=Vo,e.multiply$2=uu,e.nextPowerOfTwo=Y,e.normalize=fu,e.normalize$1=Cu,e.normalize$2=bu,e.number=Gn,e.ortho=function(e,t,n,r,i,a,s){var o=1/(t-n),u=1/(r-i),l=1/(a-s);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*o,e[13]=(i+r)*u,e[14]=(s+a)*l,e[15]=1,e},e.pbf=gp,e.perspective=function(e,t,n,r,i){var a,s=1/Math.tan(t/2);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(a=1/(r-i)),e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n},e.plugin=es,e.pointGeometry=R,e.polesInViewport=function(e){var t=Wo(new Float64Array(16));qo(t,e.pixelMatrix,e.globeMatrix);var n=[0,Bu,0],r=[0,zu,0];return mu(n,n,t),mu(r,r,t),[n[0]>0&&n[0]<=e.width&&n[1]>0&&n[1]<=e.height&&!cl(e,new ml(e.center.lat,90)),r[0]>0&&r[0]<=e.width&&r[1]>0&&r[1]<=e.height&&!cl(e,new ml(e.center.lat,-90))]},e.polygonContainsPoint=ql,e.polygonIntersectsBox=Xl,e.polygonIntersectsPolygon=Zl,e.polygonizeBounds=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=new R(n,n),a=e.sub(i),s=t.add(i),o=[a,new R(s.x,a.y),s,new R(a.x,s.y)];return r&&o.push(a.clone()),o},e.posAttributes=Ou,e.postMapLoadEvent=He,e.postPerformanceEvent=Ve,e.postTurnstileEvent=ze,e.potpack=Hp,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=N,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:Ya,pluginURL:qa}),Qa.on("pluginStateChange",e),e},e.removeAuthState=function(e){qe.delete(e)},e.renderColorRamp=vc,e.resample=Rl,e.rotateX=Qo,e.rotateX$1=Su,e.rotateY=Jo,e.rotateY$1=Ru,e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],s=t[1],o=t[2],u=t[3],l=t[4],c=t[5],h=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+l*r,e[1]=s*i+c*r,e[2]=o*i+h*r,e[3]=u*i+p*r,e[4]=l*i-a*r,e[5]=c*i-s*r,e[6]=h*i-o*r,e[7]=p*i-u*r,e},e.rotateZ$1=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],s=t[3],o=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*o,e[1]=i*u-r*o,e[2]=a*u+s*o,e[3]=s*u-a*o,e},e.scale=Ko,e.scale$1=xu,e.scale$2=hu,e.scaleAndAdd=pu,e.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},e.setCacheLimits=function(e,t){fe=e,de=t},e.setColumn=function(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]},e.setRTLTextPlugin=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ya===Ha||Ya===ja||Ya===Va)throw new Error("setRTLTextPlugin cannot be called multiple times.");qa=it.resolveURL(e),Ya=Ha,Wa=t,Ka(),n||$a()},e.smoothstep=Z,e.spec=ct,e.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},e.storeAuthState=function(e,t){t?qe.add(e):qe.delete(e)},e.sub=_u,e.subtract=ou,e.symbolSize=fp,e.tileAABB=function(e,t,n,r,i,a,s,o,u){if("globe"===u.name)return Qu(e,t,new Uh(n,r,i));var l=Wf({z:n,x:r,y:i},u);return new Fu([(a+l.x/l.scale)*t,t*(l.y/l.scale),s],[(a+l.x2/l.scale)*t,t*(l.y2/l.scale),o])},e.tileCornersToBounds=Ju,e.tileTransform=Wf,e.transformMat3=function(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e},e.transformMat4=mu,e.transformMat4$1=Iu,e.transformQuat=yu,e.transitionTileAABBinECEF=Xu,e.translate=Xo,e.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=Xa,e.uniqueId=V,e.updateGlobeVertexNormal=function(e,t,n,r,i){var a=5*t+2;e.float32[a+0]=n,e.float32[a+1]=r,e.float32[a+2]=i},e.validateCustomStyleLayer=function(e){var t=[],n=e.id;return void 0===n&&t.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(n,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),t},e.validateFilter=function(e){return Qi(Oi(e))},e.validateFog=function(e){return Qi(ji(e))},e.validateLayer=function(e){return Qi(Li(e))},e.validateLight=function(e){return Qi(Gi(e))},e.validateSource=function(e){return Qi(Bi(e))},e.validateStyle=qi,e.validateTerrain=function(e){return Qi(Hi(e))},e.values=G,e.vectorTile=sh,e.version=_,e.warnOnce=te,e.window=g,e.wrap=B})),g(["./shared"],(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){var n,r="[",i=p(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r+="".concat(t(a),",")}}catch(c){i.e(c)}finally{i.f()}return"".concat(r,"]")}var s,o="{",u=p(Object.keys(e).sort());try{for(u.s();!(s=u.n()).done;){var l=s.value;o+="".concat(l,":").concat(t(e[l]),",")}}catch(c){u.e(c)}finally{u.f()}return"".concat(o,"}")}function n(n){var r,i="",a=p(e.refProperties);try{for(a.s();!(r=a.n()).done;){var s=r.value;i+="/".concat(t(n[s]))}}catch(o){a.e(o)}finally{a.f()}return i}var r=function(){function t(e){f(this,t),this.keyCache={},e&&this.replace(e)}return d(t,[{key:"replace",value:function(e){this._layerConfigs={},this._layers={},this.update(e,[])}},{key:"update",value:function(t,r){var i,a=this,s=p(t);try{for(s.s();!(i=s.n()).done;){var o=i.value;this._layerConfigs[o.id]=o,(this._layers[o.id]=e.createStyleLayer(o)).compileFilter(),this.keyCache[o.id]&&delete this.keyCache[o.id]}}catch(E){s.e(E)}finally{s.f()}var u,l=p(r);try{for(l.s();!(u=l.n()).done;){var c=u.value;delete this.keyCache[c],delete this._layerConfigs[c],delete this._layers[c]}}catch(E){l.e(E)}finally{l.f()}this.familiesBySource={};var h,f=function(e,t){for(var r={},i=0;i<e.length;i++){var a=t&&t[e[i].id]||n(e[i]);t&&(t[e[i].id]=a);var s=r[a];s||(s=r[a]=[]),s.push(e[i])}var o=[];for(var u in r)o.push(r[u]);return o}(e.values(this._layerConfigs),this.keyCache),d=p(f);try{for(d.s();!(h=d.n()).done;){var v=h.value.map((function(e){return a._layers[e.id]})),m=v[0];if("none"!==m.visibility){var y=m.source||"",g=this.familiesBySource[y];g||(g=this.familiesBySource[y]={});var _=m.sourceLayer||"_geojsonTileLayer",T=g[_];T||(T=g[_]=[]),T.push(v)}}}catch(E){d.e(E)}finally{d.f()}}}]),t}(),i=function(){function t(){f(this,t)}return d(t,[{key:"loadTile",value:function(t,n){var r=t.uid,i=t.encoding,a=t.rawImageData,s=t.padding,o=t.buildQuadTree,u=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap?this.getImageData(a,s):a;n(null,new e.DEMData(r,u,i,s<1,o))}},{key:"getImageData",value:function(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var n=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}]),t}(),a=function e(t,n){var r,i=t&&t.type;if("FeatureCollection"===i)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===i)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===i)e(t.geometry,n);else if("Polygon"===i)u(t.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<t.coordinates.length;r++)u(t.coordinates[r],n);return t};function u(e,t){if(0!==e.length){l(e[0],t);for(var n=1;n<e.length;n++)l(e[n],!t)}}function l(e,t){for(var n=0,r=0,i=0,a=e.length,s=a-1;i<a;s=i++){var o=(e[i][0]-e[s][0])*(e[s][1]+e[i][1]),u=n+o;r+=Math.abs(n)>=Math.abs(o)?n-u+o:o-u+n,n=u}n+r>=0!=!!t&&e.reverse()}var c=e.VectorTileFeature.prototype.toGeoJSON,y=function(){function t(n){f(this,t),this._feature=n,this.extent=e.EXTENT,this.type=n.type,this.properties=n.tags,"id"in n&&!isNaN(n.id)&&(this.id=parseInt(n.id,10))}return d(t,[{key:"loadGeometry",value:function(){if(1===this._feature.type){var t,n=[],r=p(this._feature.geometry);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push([new e.pointGeometry(i[0],i[1])])}}catch(d){r.e(d)}finally{r.f()}return n}var a,s=[],o=p(this._feature.geometry);try{for(o.s();!(a=o.n()).done;){var u,l=a.value,c=[],h=p(l);try{for(h.s();!(u=h.n()).done;){var f=u.value;c.push(new e.pointGeometry(f[0],f[1]))}}catch(d){h.e(d)}finally{h.f()}s.push(c)}}catch(d){o.e(d)}finally{o.f()}return s}},{key:"toGeoJSON",value:function(e,t,n){return c.call(this,e,t,n)}}]),t}(),g=function(){function t(n){f(this,t),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=n.length,this._features=n}return d(t,[{key:"feature",value:function(e){return new y(this._features[e])}}]),t}(),_={},T={get exports(){return _},set exports(e){_=e}},E=e.pointGeometry,x=e.vectorTile.VectorTileFeature,b=I;function I(e,t){this.options=t||{},this.features=e,this.length=e.length}function w(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}I.prototype.feature=function(e){return new w(this.features[e],this.options.extent)},w.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],i=0;i<n.length;i++)r.push(new E(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},w.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,a=0;a<e.length;a++)for(var s=e[a],o=0;o<s.length;o++){var u=s[o];t=Math.min(t,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[t,r,n,i]},w.prototype.toGeoJSON=x.prototype.toGeoJSON;var k=e.pbf,S=b;function R(e){var t=new k;return function(e,t){for(var n in e.layers)t.writeMessage(3,C,e.layers[n])}(e,t),t.finish()}function C(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,D,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var a=r.values;for(n=0;n<a.length;n++)t.writeMessage(4,P,a[n])}function D(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,A,e),t.writeVarintField(3,n.type),t.writeMessage(4,M,n)}function A(e,t){var n=e.feature,r=e.keys,i=e.values,a=e.keycache,s=e.valuecache;for(var o in n.properties){var u=n.properties[o],l=a[o];if(null!==u){void 0===l&&(r.push(o),a[o]=l=r.length-1),t.writeVarint(l);var c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var h=c+":"+u,p=s[h];void 0===p&&(i.push(u),s[h]=p=i.length-1),t.writeVarint(p)}}}function O(e,t){return(t<<3)+(7&e)}function N(e){return e<<1^e>>31}function M(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,a=0,s=n.length,o=0;o<s;o++){var u=n[o],l=1;1===r&&(l=u.length),t.writeVarint(O(1,l));for(var c=3===r?u.length-1:u.length,h=0;h<c;h++){1===h&&1!==r&&t.writeVarint(O(2,c-1));var p=u[h].x-i,f=u[h].y-a;t.writeVarint(N(p)),t.writeVarint(N(f)),i+=p,a+=f}3===r&&t.writeVarint(O(7,1))}}function P(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function F(e,t,n,r,i,a){if(!(i-r<=n)){var s=r+i>>1;L(e,t,s,r,i,a%2),F(e,t,n,r,s-1,a+1),F(e,t,n,s+1,i,a+1)}}function L(e,t,n,r,i,a){for(;i>r;){if(i-r>600){var s=i-r+1,o=n-r+1,u=Math.log(s),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(s-l)/s)*(o-s/2<0?-1:1);L(e,t,n,Math.max(r,Math.floor(n-o*l/s+c)),Math.min(i,Math.floor(n+(s-o)*l/s+c)),a)}var h=t[2*n+a],p=r,f=i;for(U(e,t,r,n),t[2*i+a]>h&&U(e,t,r,i);p<f;){for(U(e,t,p,f),p++,f--;t[2*p+a]<h;)p++;for(;t[2*f+a]>h;)f--}t[2*r+a]===h?U(e,t,r,f):U(e,t,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}function U(e,t,n,r){Z(e,n,r),Z(t,2*n,2*r),Z(t,2*n+1,2*r+1)}function Z(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function B(e,t,n,r){var i=e-n,a=t-r;return i*i+a*a}T.exports=R,_.fromVectorTileJs=R,_.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new S(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return R({layers:n})},_.GeoJSONWrapper=S;var z,G=function(e){return e[0]},H=function(e){return e[1]},j=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;f(this,e),this.nodeSize=i,this.points=t;for(var s=t.length<65536?Uint16Array:Uint32Array,o=this.ids=new s(t.length),u=this.coords=new a(2*t.length),l=0;l<t.length;l++)o[l]=l,u[2*l]=n(t[l]),u[2*l+1]=r(t[l]);F(o,u,i,0,o.length-1,0)}return d(e,[{key:"range",value:function(e,t,n,r){return function(e,t,n,r,i,a,s){for(var o,u,l=[0,e.length-1,0],c=[];l.length;){var h=l.pop(),p=l.pop(),f=l.pop();if(p-f<=s)for(var d=f;d<=p;d++)o=t[2*d],u=t[2*d+1],o>=n&&o<=i&&u>=r&&u<=a&&c.push(e[d]);else{var v=Math.floor((f+p)/2);o=t[2*v],u=t[2*v+1],o>=n&&o<=i&&u>=r&&u<=a&&c.push(e[v]);var m=(h+1)%2;(0===h?n<=o:r<=u)&&(l.push(f),l.push(v-1),l.push(m)),(0===h?i>=o:a>=u)&&(l.push(v+1),l.push(p),l.push(m))}}return c}(this.ids,this.coords,e,t,n,r,this.nodeSize)}},{key:"within",value:function(e,t,n){return function(e,t,n,r,i,a){for(var s=[0,e.length-1,0],o=[],u=i*i;s.length;){var l=s.pop(),c=s.pop(),h=s.pop();if(c-h<=a)for(var p=h;p<=c;p++)B(t[2*p],t[2*p+1],n,r)<=u&&o.push(e[p]);else{var f=Math.floor((h+c)/2),d=t[2*f],v=t[2*f+1];B(d,v,n,r)<=u&&o.push(e[f]);var m=(l+1)%2;(0===l?n-i<=d:r-i<=v)&&(s.push(h),s.push(f-1),s.push(m)),(0===l?n+i>=d:r+i>=v)&&(s.push(f+1),s.push(c),s.push(m))}}return o}(this.ids,this.coords,e,t,n,this.nodeSize)}}]),e}(),V={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},W=Math.fround||(z=new Float32Array(1),function(e){return z[0]=+e,z[0]}),Y=function(){function e(t){f(this,e),this.options=te(Object.create(V),t),this.trees=new Array(this.options.maxZoom+1)}return d(e,[{key:"load",value:function(e){var t=this.options,n=t.log,r=t.minZoom,i=t.maxZoom,a=t.nodeSize;n&&console.time("total time");var s="prepare ".concat(e.length," points");n&&console.time(s),this.points=e;for(var o=[],u=0;u<e.length;u++)e[u].geometry&&o.push(X(e[u],u));this.trees[i+1]=new j(o,ne,re,a,Float32Array),n&&console.timeEnd(s);for(var l=i;l>=r;l--){var c=+Date.now();o=this._cluster(o,l),this.trees[l]=new j(o,ne,re,a,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,o.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){var s=this.getClusters([n,r,180,a],t),o=this.getClusters([-180,r,i,a],t);return s.concat(o)}var u,l=this.trees[this._limitZoom(t)],c=l.range(J(n),$(a),J(i),$(r)),h=[],f=p(c);try{for(f.s();!(u=f.n()).done;){var d=u.value,v=l.points[d];h.push(v.numPoints?K(v):this.points[v.index])}}catch(m){f.e(m)}finally{f.f()}return h}},{key:"getChildren",value:function(e){var t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var a=i.points[t];if(!a)throw new Error(r);var s,o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),u=i.within(a.x,a.y,o),l=[],c=p(u);try{for(c.s();!(s=c.n()).done;){var h=s.value,f=i.points[h];f.parentId===e&&l.push(f.numPoints?K(f):this.points[f.index])}}catch(d){c.e(d)}finally{c.f()}if(0===l.length)throw new Error(r);return l}},{key:"getLeaves",value:function(e,t,n){var r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r}},{key:"getTile",value:function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),a=this.options,s=a.extent,o=a.radius/s,u=(n-o)/i,l=(n+1+o)/i,c={features:[]};return this._addTileFeatures(r.range((t-o)/i,u,(t+1+o)/i,l),r.points,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-o/i,u,1,l),r.points,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,u,o/i,l),r.points,-1,n,i,c),c.features.length?c:null}},{key:"getClusterExpansionZoom",value:function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}},{key:"_appendLeaves",value:function(e,t,n,r,i){var a,s=this.getChildren(t),o=p(s);try{for(o.s();!(a=o.n()).done;){var u=a.value,l=u.properties;if(l&&l.cluster?i+l.point_count<=r?i+=l.point_count:i=this._appendLeaves(e,l.cluster_id,n,r,i):i<r?i++:e.push(u),e.length===n)break}}catch(c){o.e(c)}finally{o.f()}return i}},{key:"_addTileFeatures",value:function(e,t,n,r,i,a){var s,o=p(e);try{for(o.s();!(s=o.n()).done;){var u=t[s.value],l=u.numPoints,c=void 0,h=void 0,f=void 0;if(l)c=Q(u),h=u.x,f=u.y;else{var d=this.points[u.index];c=d.properties,h=J(d.geometry.coordinates[0]),f=$(d.geometry.coordinates[1])}var v={type:1,geometry:[[Math.round(this.options.extent*(h*i-n)),Math.round(this.options.extent*(f*i-r))]],tags:c},m=void 0;l?m=u.id:this.options.generateId?m=u.index:this.points[u.index].id&&(m=this.points[u.index].id),void 0!==m&&(v.id=m),a.features.push(v)}}catch(y){o.e(y)}finally{o.f()}}},{key:"_limitZoom",value:function(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}},{key:"_cluster",value:function(e,t){for(var n=[],r=this.options,i=r.radius,a=r.extent,s=r.reduce,o=r.minPoints,u=i/(a*Math.pow(2,t)),l=0;l<e.length;l++){var c=e[l];if(!(c.zoom<=t)){c.zoom=t;var h,f=this.trees[t+1],d=f.within(c.x,c.y,u),v=c.numPoints||1,m=v,y=p(d);try{for(y.s();!(h=y.n()).done;){var g=h.value,_=f.points[g];_.zoom>t&&(m+=_.numPoints||1)}}catch(N){y.e(N)}finally{y.f()}if(m>v&&m>=o){var T,E=c.x*v,x=c.y*v,b=s&&v>1?this._map(c,!0):null,I=(l<<5)+(t+1)+this.points.length,w=p(d);try{for(w.s();!(T=w.n()).done;){var k=T.value,S=f.points[k];if(!(S.zoom<=t)){S.zoom=t;var R=S.numPoints||1;E+=S.x*R,x+=S.y*R,S.parentId=I,s&&(b||(b=this._map(c,!0)),s(b,this._map(S)))}}}catch(N){w.e(N)}finally{w.f()}c.parentId=I,n.push(q(E/m,x/m,I,m,b))}else if(n.push(c),m>1){var C,D=p(d);try{for(D.s();!(C=D.n()).done;){var A=C.value,O=f.points[A];O.zoom<=t||(O.zoom=t,n.push(O))}}catch(N){D.e(N)}finally{D.f()}}}}return n}},{key:"_getOriginId",value:function(e){return e-this.points.length>>5}},{key:"_getOriginZoom",value:function(e){return(e-this.points.length)%32}},{key:"_map",value:function(e,t){if(e.numPoints)return t?te({},e.properties):e.properties;var n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?te({},r):r}}]),e}();function q(e,t,n,r,i){return{x:W(e),y:W(t),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function X(e,t){var n=h(e.geometry.coordinates,2),r=n[0],i=n[1];return{x:W(J(r)),y:W($(i)),zoom:1/0,index:t,parentId:-1}}function K(e){return{type:"Feature",id:e.id,properties:Q(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),ee(e.y)]}};var t}function Q(e){var t=e.numPoints,n=t>=1e4?"".concat(Math.round(t/1e3),"k"):t>=1e3?Math.round(t/100)/10+"k":t;return te(te({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function J(e){return e/360+.5}function $(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function ee(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function te(e,t){for(var n in t)e[n]=t[n];return e}function ne(e){return e.x}function re(e){return e.y}function ie(e,t,n,r){for(var i,a=r,s=n-t>>1,o=n-t,u=e[t],l=e[t+1],c=e[n],h=e[n+1],p=t+3;p<n;p+=3){var f=ae(e[p],e[p+1],u,l,c,h);if(f>a)i=p,a=f;else if(f===a){var d=Math.abs(p-s);d<o&&(i=p,o=d)}}a>r&&(i-t>3&&ie(e,t,i,r),e[i+2]=a,n-i>3&&ie(e,i,n,r))}function ae(e,t,n,r,i,a){var s=i-n,o=a-r;if(0!==s||0!==o){var u=((e-n)*s+(t-r)*o)/(s*s+o*o);u>1?(n=i,r=a):u>0&&(n+=s*u,r+=o*u)}return(s=e-n)*s+(o=t-r)*o}function se(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)oe(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)oe(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)oe(e,t[r][i])}(i),i}function oe(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function ue(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,a=t.geometry.type,s=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),o=[],u=t.id;if(n.promoteId?u=t.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===a)le(i,o);else if("MultiPoint"===a)for(var l=0;l<i.length;l++)le(i[l],o);else if("LineString"===a)ce(i,o,s,!1);else if("MultiLineString"===a){if(n.lineMetrics){for(l=0;l<i.length;l++)ce(i[l],o=[],s,!1),e.push(se(u,"LineString",o,t.properties));return}he(i,o,s,!1)}else if("Polygon"===a)he(i,o,s,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(l=0;l<t.geometry.geometries.length;l++)ue(e,{id:u,geometry:t.geometry.geometries[l],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<i.length;l++){var c=[];he(i[l],c,s,!0),o.push(c)}}e.push(se(u,a,o,t.properties))}}function le(e,t){t.push(pe(e[0])),t.push(fe(e[1])),t.push(0)}function ce(e,t,n,r){for(var i,a,s=0,o=0;o<e.length;o++){var u=pe(e[o][0]),l=fe(e[o][1]);t.push(u),t.push(l),t.push(0),o>0&&(s+=r?(i*l-u*a)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(l-a,2))),i=u,a=l}var c=t.length-3;t[2]=1,ie(t,0,c,n),t[c+2]=1,t.size=Math.abs(s),t.start=0,t.end=t.size}function he(e,t,n,r){for(var i=0;i<e.length;i++){var a=[];ce(e[i],a,n,r),t.push(a)}}function pe(e){return e/360+.5}function fe(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function de(e,t,n,r,i,a,s,o){if(r/=t,a>=(n/=t)&&s<r)return e;if(s<n||a>=r)return null;for(var u=[],l=0;l<e.length;l++){var c=e[l],h=c.geometry,p=c.type,f=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(f>=n&&d<r)u.push(c);else if(!(d<n||f>=r)){var v=[];if("Point"===p||"MultiPoint"===p)ve(h,v,n,r,i);else if("LineString"===p)me(h,v,n,r,i,!1,o.lineMetrics);else if("MultiLineString"===p)ge(h,v,n,r,i,!1);else if("Polygon"===p)ge(h,v,n,r,i,!0);else if("MultiPolygon"===p)for(var m=0;m<h.length;m++){var y=[];ge(h[m],y,n,r,i,!0),y.length&&v.push(y)}if(v.length){if(o.lineMetrics&&"LineString"===p){for(m=0;m<v.length;m++)u.push(se(c.id,p,v[m],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===v.length?(p="LineString",v=v[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===v.length?"Point":"MultiPoint"),u.push(se(c.id,p,v,c.tags))}}}return u.length?u:null}function ve(e,t,n,r,i){for(var a=0;a<e.length;a+=3){var s=e[a+i];s>=n&&s<=r&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function me(e,t,n,r,i,a,s){for(var o,u,l=ye(e),c=0===i?Te:Ee,h=e.start,p=0;p<e.length-3;p+=3){var f=e[p],d=e[p+1],v=e[p+2],m=e[p+3],y=e[p+4],g=0===i?f:d,_=0===i?m:y,T=!1;s&&(o=Math.sqrt(Math.pow(f-m,2)+Math.pow(d-y,2))),g<n?_>n&&(u=c(l,f,d,m,y,n),s&&(l.start=h+o*u)):g>r?_<r&&(u=c(l,f,d,m,y,r),s&&(l.start=h+o*u)):_e(l,f,d,v),_<n&&g>=n&&(u=c(l,f,d,m,y,n),T=!0),_>r&&g<=r&&(u=c(l,f,d,m,y,r),T=!0),!a&&T&&(s&&(l.end=h+o*u),t.push(l),l=ye(e)),s&&(h+=o)}var E=e.length-3;f=e[E],d=e[E+1],v=e[E+2],(g=0===i?f:d)>=n&&g<=r&&_e(l,f,d,v),E=l.length-3,a&&E>=3&&(l[E]!==l[0]||l[E+1]!==l[1])&&_e(l,l[0],l[1],l[2]),l.length&&t.push(l)}function ye(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ge(e,t,n,r,i,a){for(var s=0;s<e.length;s++)me(e[s],t,n,r,i,a,!1)}function _e(e,t,n,r){e.push(t),e.push(n),e.push(r)}function Te(e,t,n,r,i,a){var s=(a-t)/(r-t);return e.push(a),e.push(n+(i-n)*s),e.push(1),s}function Ee(e,t,n,r,i,a){var s=(a-n)/(i-n);return e.push(t+(r-t)*s),e.push(a),e.push(1),s}function xe(e,t){for(var n=[],r=0;r<e.length;r++){var i,a=e[r],s=a.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)i=be(a.geometry,t);else if("MultiLineString"===s||"Polygon"===s){i=[];for(var o=0;o<a.geometry.length;o++)i.push(be(a.geometry[o],t))}else if("MultiPolygon"===s)for(i=[],o=0;o<a.geometry.length;o++){for(var u=[],l=0;l<a.geometry[o].length;l++)u.push(be(a.geometry[o][l],t));i.push(u)}n.push(se(a.id,s,i,a.tags))}return n}function be(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function Ie(e,t){if(e.transformed)return e;var n,r,i,a=1<<e.z,s=e.x,o=e.y;for(n=0;n<e.features.length;n++){var u=e.features[n],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(r=0;r<l.length;r+=2)u.geometry.push(we(l[r],l[r+1],t,a,s,o));else for(r=0;r<l.length;r++){var h=[];for(i=0;i<l[r].length;i+=2)h.push(we(l[r][i],l[r][i+1],t,a,s,o));u.geometry.push(h)}}return e.transformed=!0,e}function we(e,t,n,r,i,a){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-a))]}function ke(e,t,n,r,i){for(var a=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},o=0;o<e.length;o++){s.numFeatures++,Se(s,e[o],a,i);var u=e[o].minX,l=e[o].minY,c=e[o].maxX,h=e[o].maxY;u<s.minX&&(s.minX=u),l<s.minY&&(s.minY=l),c>s.maxX&&(s.maxX=c),h>s.maxY&&(s.maxY=h)}return s}function Se(e,t,n,r){var i=t.geometry,a=t.type,s=[];if("Point"===a||"MultiPoint"===a)for(var o=0;o<i.length;o+=3)s.push(i[o]),s.push(i[o+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)Re(s,i,e,n,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(o=0;o<i.length;o++)Re(s,i[o],e,n,"Polygon"===a,0===o);else if("MultiPolygon"===a)for(var u=0;u<i.length;u++){var l=i[u];for(o=0;o<l.length;o++)Re(s,l[o],e,n,!0,0===o)}if(s.length){var c=t.tags||null;if("LineString"===a&&r.lineMetrics){for(var h in c={},t.tags)c[h]=t.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var p={geometry:s,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:c};null!==t.id&&(p.id=t.id),e.features.push(p)}}function Re(e,t,n,r,i,a){var s=r*r;if(r>0&&t.size<(i?s:r))n.numPoints+=t.length/3;else{for(var o=[],u=0;u<t.length;u+=3)(0===r||t[u+2]>s)&&(n.numSimplified++,o.push(t[u]),o.push(t[u+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,a=i-2;r<i;a=r,r+=2)n+=(e[r]-e[a])*(e[r+1]+e[a+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var s=e[r],o=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=s,e[i-1-r]=o}}(o,a),e.push(o)}}function Ce(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)ue(n,e.features[r],t,r);else ue(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(e,t){var n=t.buffer/t.extent,r=e,i=de(e,1,-1-n,n,0,-1,2,t),a=de(e,1,1-n,2+n,0,-1,2,t);return(i||a)&&(r=de(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=xe(i,1).concat(r)),a&&(r=r.concat(xe(a,-1)))),r}(r,t),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function De(e,t,n){return 32*((1<<e)*n+t)+e}function Ae(e,t){var n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);var i=new g(r.features),a=_(i);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),t(null,{vectorTile:i,rawData:a.buffer})}Ce.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ce.prototype.splitTile=function(e,t,n,r,i,a,s){for(var o=[e,t,n,r],u=this.options,l=u.debug;o.length;){r=o.pop(),n=o.pop(),t=o.pop(),e=o.pop();var c=1<<t,h=De(t,n,r),p=this.tiles[h];if(!p&&(l>1&&console.time("creation"),p=this.tiles[h]=ke(e,t,n,r,u),this.tileCoords.push({z:t,x:n,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var f="z"+t;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(p.source=e,i){if(t===u.maxZoom||t===i)continue;var d=1<<i-t;if(n!==Math.floor(a/d)||r!==Math.floor(s/d))continue}else if(t===u.indexMaxZoom||p.numPoints<=u.indexMaxPoints)continue;if(p.source=null,0!==e.length){l>1&&console.time("clipping");var v,m,y,g,_,T,E=.5*u.buffer/u.extent,x=.5-E,b=.5+E,I=1+E;v=m=y=g=null,_=de(e,c,n-E,n+b,0,p.minX,p.maxX,u),T=de(e,c,n+x,n+I,0,p.minX,p.maxX,u),e=null,_&&(v=de(_,c,r-E,r+b,1,p.minY,p.maxY,u),m=de(_,c,r+x,r+I,1,p.minY,p.maxY,u),_=null),T&&(y=de(T,c,r-E,r+b,1,p.minY,p.maxY,u),g=de(T,c,r+x,r+I,1,p.minY,p.maxY,u),T=null),l>1&&console.timeEnd("clipping"),o.push(v||[],t+1,2*n,2*r),o.push(m||[],t+1,2*n,2*r+1),o.push(y||[],t+1,2*n+1,2*r),o.push(g||[],t+1,2*n+1,2*r+1)}}},Ce.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,a=r.debug;if(e<0||e>24)return null;var s=1<<e,o=De(e,t=(t%s+s)%s,n);if(this.tiles[o])return Ie(this.tiles[o],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var u,l=e,c=t,h=n;!u&&l>0;)l--,c=Math.floor(c/2),h=Math.floor(h/2),u=this.tiles[De(l,c,h)];return u&&u.source?(a>1&&console.log("found parent tile z%d-%d-%d",l,c,h),a>1&&console.time("drilling down"),this.splitTile(u.source,l,c,h,e,t,n),a>1&&console.timeEnd("drilling down"),this.tiles[o]?Ie(this.tiles[o],i):null):null};var Oe=function(t){v(r,t);var n=m(r);function r(e,t,i,a,s){var o;return f(this,r),o=n.call(this,e,t,i,a,Ae),s&&(o.loadGeoJSON=s),o}return d(r,[{key:"loadData",value:function(t,n){var r=this,i=t&&t.request,s=i&&i.collectResourceTiming;this.loadGeoJSON(t,(function(o,u){if(o||!u)return n(o);if("object"!=typeof u)return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));a(u,!0);try{if(t.filter){var l=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===l.result)throw new Error(l.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));var c=u.features.filter((function(e){return l.value.evaluate({zoom:0},e)}));u={type:"FeatureCollection",features:c}}r._geoJSONIndex=t.cluster?new Y(function(t){var n=t.superclusterOptions,r=t.clusterProperties;if(!r||!n)return n;for(var i={},a={},s={accumulated:null,zoom:0},o={properties:null},u=Object.keys(r),l=0,c=u;l<c.length;l++){var p=c[l],f=h(r[p],2),d=f[0],v=f[1],m=e.createExpression(v),y=e.createExpression("string"==typeof d?[d,["accumulated"],["get",p]]:d);i[p]=m.value,a[p]=y.value}return n.map=function(e){o.properties=e;for(var t={},n=0,r=u;n<r.length;n++){var a=r[n];t[a]=i[a].evaluate(s,o)}return t},n.reduce=function(e,t){o.properties=t;for(var n=0,r=u;n<r.length;n++){var i=r[n];s.accumulated=e[i],e[i]=a[i].evaluate(s,o)}},n}(t)).load(u.features):function(e,t){return new Ce(e,t)}(u,t.geojsonVtOptions)}catch(o){return n(o)}r.loaded={};var p={};if(s){var f=e.getPerformanceMeasurement(i);f&&(p.resourceTiming={},p.resourceTiming[t.source]=JSON.parse(JSON.stringify(f)))}n(null,p)}))}},{key:"reloadTile",value:function(e,t){var n=this.loaded;return n&&n[e.uid]?s(o(r.prototype),"reloadTile",this).call(this,e,t):this.loadTile(e,t)}},{key:"loadGeoJSON",value:function(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")))}}}},{key:"getClusterExpansionZoom",value:function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}},{key:"getClusterChildren",value:function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}},{key:"getClusterLeaves",value:function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}]),r}(e.VectorTileWorkerSource),Ne=function(){function t(n){var r=this;f(this,t),this.self=n,this.actor=new e.Actor(n,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:Oe},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(r.workerSourceTypes[e])throw new Error('Worker source with name "'.concat(e,'" already registered.'));r.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}return d(t,[{key:"clearCaches",value:function(e,t,n){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],n()}},{key:"checkIfReady",value:function(e,t,n){n()}},{key:"setReferrer",value:function(e,t){this.referrer=t}},{key:"spriteLoaded",value:function(t,n){for(var r in this.isSpriteLoaded[t]=n,this.workerSources[t]){var i=this.workerSources[t][r];for(var a in i)i[a]instanceof e.VectorTileWorkerSource&&(i[a].isSpriteLoaded=n,i[a].fire(new e.Event("isSpriteLoaded")))}}},{key:"setImages",value:function(e,t,n){for(var r in this.availableImages[e]=t,this.workerSources[e]){var i=this.workerSources[e][r];for(var a in i)i[a].availableImages=t}n()}},{key:"enableTerrain",value:function(e,t,n){this.terrain=t,n()}},{key:"setProjection",value:function(t,n){this.projections[t]=e.getProjection(n)}},{key:"setLayers",value:function(e,t,n){this.getLayerIndex(e).replace(t),n()}},{key:"updateLayers",value:function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()}},{key:"loadTile",value:function(t,n,r){var i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).loadTile(i,r)}},{key:"loadDEMTile",value:function(t,n,r){var i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(t,n.source).loadTile(i,r)}},{key:"reloadTile",value:function(t,n,r){var i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).reloadTile(i,r)}},{key:"abortTile",value:function(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)}},{key:"removeTile",value:function(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)}},{key:"removeSource",value:function(e,t,n){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}}},{key:"loadWorkerSource",value:function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}}},{key:"syncRTLPluginState",value:function(t,n,r){try{e.plugin.setState(n);var i=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=i){this.self.importScripts(i);var a=e.plugin.isParsed();r(a?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(i)),a)}}catch(e){r(e.toString())}}},{key:"getAvailableImages",value:function(e){var t=this.availableImages[e];return t||(t=[]),t}},{key:"getLayerIndex",value:function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t}},{key:"getWorkerSource",value:function(e,t,n){var r=this;if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){var i={send:function(t,n,i,a,s,o){r.actor.send(t,n,i,e,s,o)},scheduler:this.actor.scheduler};this.workerSources[e][t][n]=new this.workerSourceTypes[t](i,this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])}return this.workerSources[e][t][n]}},{key:"getDEMWorkerSource",value:function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new i),this.demWorkerSources[e][t]}},{key:"enforceCacheSizeLimit",value:function(t,n){e.enforceCacheSizeLimit(n)}},{key:"getWorkerPerformanceMetrics",value:function(e,t,n){n(void 0,void 0)}}]),t}();return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Ne(self)),Ne})),g(["./shared"],(function(e){function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n}var n=l;function l(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===y[t=e&&e.failIfMajorPerformanceCaveat]&&(y[t]=function(e){var t,n=function(e){var t=document.createElement("canvas"),n=Object.create(l.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}(e);if(!n)return!1;try{t=n.createShader(n.VERTEX_SHADER)}catch(e){return!1}return!(!t||n.isContextLost())&&(n.shaderSource(t,"void main() {}"),n.compileShader(t),!0===n.getShaderParameter(t,n.COMPILE_STATUS))}(t)),y[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var y={};function g(t,n,r){var i=e.window.document.createElement(t);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i}function _(t,n,r){for(var i=e.window.document.createElementNS("http://www.w3.org/2000/svg",t),a=0,s=Object.keys(n);a<s.length;a++){var o=s[a];i.setAttributeNS(null,o,n[o])}return r&&r.appendChild(i),i}l.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};var T,E=e.window.document&&e.window.document.documentElement.style,x=E&&void 0!==E.userSelect?"userSelect":"WebkitUserSelect";function b(){E&&x&&(T=E[x],E[x]="none")}function I(){E&&x&&(E[x]=T)}function w(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",w,!0)}function k(){e.window.addEventListener("click",w,!0),e.window.setTimeout((function(){e.window.removeEventListener("click",w,!0)}),0)}function S(e,t){var n=e.getBoundingClientRect();return D(e,n,t)}function R(e,t){for(var n=e.getBoundingClientRect(),r=[],i=0;i<t.length;i++)r.push(D(e,n,t[i]));return r}function C(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function D(t,n,r){var i=t.offsetWidth===n.width?1:t.offsetWidth/n.width;return new e.pointGeometry((r.clientX-n.left)*i,(r.clientY-n.top)*i)}function A(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=n*a-i*r;return s?(e[0]=a*(s=1/s),e[1]=-r*s,e[2]=-i*s,e[3]=n*s,e):null}function O(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}var N=function(t){v(r,t);var n=m(r);function r(){var t;return f(this,r),(t=n.call(this)).images={},t.updatedImages={},t.callbackDispatchedThisFrame={},t.loaded=!1,t.requestors=[],t.patterns={},t.atlasImage=new e.RGBAImage({width:1,height:1}),t.dirty=!0,t}return d(r,[{key:"isLoaded",value:function(){return this.loaded}},{key:"setLoaded",value:function(e){if(this.loaded!==e&&(this.loaded=e,e)){var t,n=p(this.requestors);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.ids,a=r.callback;this._notify(i,a)}}catch(s){n.e(s)}finally{n.f()}this.requestors=[]}}},{key:"hasImage",value:function(e){return!!this.getImage(e)}},{key:"getImage",value:function(e){return this.images[e]}},{key:"addImage",value:function(e,t){this._validate(e,t)&&(this.images[e]=t)}},{key:"_validate",value:function(t,n){var r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchX" value')))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchY" value')))),r=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "content" value')))),r=!1),r}},{key:"_validateStretch",value:function(e,t){if(!e)return!0;var n,r=0,i=p(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a[0]<r||a[1]<a[0]||t<a[1])return!1;r=a[1]}}catch(s){i.e(s)}finally{i.f()}return!0}},{key:"_validateContent",value:function(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}},{key:"updateImage",value:function(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}},{key:"removeImage",value:function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}},{key:"listImages",value:function(){return Object.keys(this.images)}},{key:"getImages",value:function(e,t){var n=!0;if(!this.isLoaded()){var r,i=p(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.images[a]||(n=!1)}}catch(s){i.e(s)}finally{i.f()}}this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}},{key:"_notify",value:function(t,n){var r,i={},a=p(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;this.images[s]||this.fire(new e.Event("styleimagemissing",{id:s}));var o=this.images[s];o?i[s]={data:o.data.clone(),pixelRatio:o.pixelRatio,sdf:o.sdf,version:o.version,stretchX:o.stretchX,stretchY:o.stretchY,content:o.content,hasRenderCallback:Boolean(o.userImage&&o.userImage.render)}:e.warnOnce('Image "'.concat(s,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}}catch(u){a.e(u)}finally{a.f()}n(null,i)}},{key:"getPixelSize",value:function(){var e=this.atlasImage;return{width:e.width,height:e.height}}},{key:"getPattern",value:function(t){var n=this.patterns[t],r=this.getImage(t);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},a=new e.ImagePosition(i,r);this.patterns[t]={bin:i,position:a}}return this._updatePatternAtlas(),this.patterns[t].position}},{key:"bind",value:function(t){var n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}},{key:"_updatePatternAtlas",value:function(){var t=[];for(var n in this.patterns)t.push(this.patterns[n].bin);var r=e.potpack(t),i=r.w,a=r.h,s=this.atlasImage;for(var o in s.resize({width:i||1,height:a||1}),this.patterns){var u=this.patterns[o].bin,l=u.x+1,c=u.y+1,h=this.images[o].data,p=h.width,f=h.height;e.RGBAImage.copy(h,s,{x:0,y:0},{x:l,y:c},{width:p,height:f}),e.RGBAImage.copy(h,s,{x:0,y:f-1},{x:l,y:c-1},{width:p,height:1}),e.RGBAImage.copy(h,s,{x:0,y:0},{x:l,y:c+f},{width:p,height:1}),e.RGBAImage.copy(h,s,{x:p-1,y:0},{x:l-1,y:c},{width:1,height:f}),e.RGBAImage.copy(h,s,{x:0,y:0},{x:l+p,y:c},{width:1,height:f})}this.dirty=!0}},{key:"beginFrame",value:function(){this.callbackDispatchedThisFrame={}}},{key:"dispatchRenderCallbacks",value:function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var i=this.images[r];O(i)&&this.updateImage(r,i)}}}catch(a){n.e(a)}finally{n.f()}}}]),r}(e.Evented),M=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new(function(){function t(){f(this,t),this.specification=e.spec.light.position}return d(t,[{key:"possiblyEvaluate",value:function(t,n){return function(t){var n=h(t,3),r=n[0],i=n[1],a=n[2],s=e.degToRad(i+90),o=e.degToRad(a);return{x:r*Math.cos(s)*Math.sin(o),y:r*Math.sin(s)*Math.sin(o),z:r*Math.cos(o),azimuthal:i,polar:a}}(t.expression.evaluate(n))}},{key:"interpolate",value:function(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r),azimuthal:e.number(t.azimuthal,n.azimuthal,r),polar:e.number(t.polar,n.polar,r)}}}]),t}()),color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),P="-transition",F=function(t){v(r,t);var n=m(r);function r(t){var i;return f(this,r),(i=n.call(this))._transitionable=new e.Transitionable(M),i.setLight(t),i._transitioning=i._transitionable.untransitioned(),i}return d(r,[{key:"getLight",value:function(){return this._transitionable.serialize()}},{key:"setLight",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateLight,t,n))for(var r in t){var i=t[r];e.endsWith(r,P)?this._transitionable.setTransition(r.slice(0,-P.length),i):this._transitionable.setValue(r,i)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}]),r}(e.Evented),L=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)}),U="-transition",Z=function(t){v(r,t);var n=m(r);function r(t,i){var a;return f(this,r),(a=n.call(this))._transitionable=new e.Transitionable(L),a.set(t),a._transitioning=a._transitionable.untransitioned(),a.drapeRenderMode=i,a}return d(r,[{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(t){for(var n in t){var r=t[n];e.endsWith(n,U)?this._transitionable.setTransition(n.slice(0,-U.length),r):this._transitionable.setValue(n,r)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}}]),r}(e.Evented);function B(t,n,r,i){var a=e.smoothstep(45,65,r),s=z(t,i),o=h(s,2),u=o[0],l=o[1],c=e.length(n),p=1-Math.min(1,Math.exp((c-u)/(l-u)*-6));return p*=p*p,(p=Math.min(1,1.00747*p))*a*t.alpha}function z(e,t){var n=.5/Math.tan(.5*t);return[e.range[0]+n,e.range[1]+n]}var G=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])}),H="-transition",j=function(t){v(r,t);var n=m(r);function r(t,i){var a;return f(this,r),(a=n.call(this))._transitionable=new e.Transitionable(G),a.set(t),a._transitioning=a._transitionable.untransitioned(),a._transform=i,a}return d(r,[{key:"state",get:function(){var t=this._transform,n="globe"===t.projection.name,r=e.globeToMercatorTransition(t.zoom),i=this.properties.get("range"),a=[.5,3];return{range:n?[e.number(a[0],i[0],r),e.number(a[1],i[1],r)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}},{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateFog,t,n)){for(var r=0,i=Object.keys(e.spec.fog);r<i.length;r++){var a=i[r];t&&void 0===t[a]&&(t[a]=e.spec.fog[a].default)}for(var s in t){var o=t[s];e.endsWith(s,H)?this._transitionable.setTransition(s.slice(0,-H.length),o):this._transitionable.setValue(s,o)}}}},{key:"getOpacity",value:function(t){if(!this._transform.projection.supportsFog)return 0;var n=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.smoothstep(45,65,t))*n.a}},{key:"getOpacityAtLatLng",value:function(t,n){return this._transform.projection.supportsFog?function(t,n,r){var i=e.MercatorCoordinate.fromLngLat(n),a=r.elevation?r.elevation.getAtPointOrZero(i):0,s=[i.x,i.y,a];return e.transformMat4(s,s,r.mercatorFogMatrix),B(t,s,r.pitch,r._fov)}(this.state,t,n):0}},{key:"getFovAdjustedRange",value:function(e){return this._transform.projection.supportsFog?z(this.state,e):[0,1]}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}]),r}(e.Evented),V=function(){function t(n,r){var i=this;f(this,t),this.workerPool=n,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var a=this.workerPool.acquire(this.id),s=0;s<a.length;s++){var o=new t.Actor(a[s],r,this.id);o.name="Worker ".concat(s),this.actors.push(o)}this.ready=!1,this.broadcast("checkIfReady",null,(function(){i.ready=!0}))}return d(t,[{key:"broadcast",value:function(t,n,r){e.asyncAll(this.actors,(function(e,r){e.send(t,n,r)}),r=r||function(){})}},{key:"getActor",value:function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}},{key:"remove",value:function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)}}]),t}();function W(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}V.Actor=e.Actor;var Y=function(){function t(e,n,r,i){f(this,t),this.screenBounds=e,this.cameraPoint=n,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=r,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,i)}return d(t,[{key:"isPointQuery",value:function(){return 1===this.screenBounds.length}},{key:"bufferedScreenGeometry",value:function(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}},{key:"bufferedCameraGeometry",value:function(t){var n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<r.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?i[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(i[3]=this.cameraPoint)),e.bufferConvexPolygon(i,t)}},{key:"bufferedCameraGeometryGlobe",value:function(t){var n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,t),a=this.cameraPoint.clone();switch(3*((a.y>n.y)+(a.y>r.y))+((a.x>n.x)+(a.x>r.x))){case 0:i[0]=a,i[4]=a.clone();break;case 1:i.splice(1,0,a);break;case 2:i[1]=a;break;case 3:i.splice(4,0,a);break;case 5:i.splice(2,0,a);break;case 6:i[3]=a;break;case 7:i.splice(3,0,a);break;case 8:i[2]=a}return i}},{key:"containsTile",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.queryPadding/n._pixelsPerMercatorPixel+1,s=r?this._bufferedCameraMercator(a,n):this._bufferedScreenMercator(a,n),o=t.tileID.wrap+(s.unwrapped?i:0),u=s.polygon.map((function(n){return e.getTilePoint(t.tileTransform,n,o)}));if(e.polygonIntersectsBox(u,0,0,e.EXTENT,e.EXTENT)){o=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);var l,c=this.screenGeometryMercator.polygon.map((function(n){return e.getTileVec3(t.tileTransform,n,o)})),h=c.map((function(t){return new e.pointGeometry(t[0],t[1])})),p=n.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),f=e.getTileVec3(t.tileTransform,p,o),d=c.map((function(t){var n=e.sub(t,t,f);return e.normalize(n,n),new e.Ray(f,n)})),v=W(t,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:h,tilespaceRays:d,bufferedTilespaceGeometry:u,bufferedTilespaceBounds:(l=e.getBounds(u),l.min.x=e.clamp(l.min.x,0,e.EXTENT),l.min.y=e.clamp(l.min.y,0,e.EXTENT),l.max.x=e.clamp(l.max.x,0,e.EXTENT),l.max.y=e.clamp(l.max.y,0,e.EXTENT),l),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:v}}}},{key:"_bufferedScreenMercator",value:function(e,t){var n,r=K(e);return this._screenRaycastCache[r]?this._screenRaycastCache[r]:(n="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map((function(e){return t.pointCoordinate3D(e)})),unwrapped:!0},this._screenRaycastCache[r]=n,n)}},{key:"_bufferedCameraMercator",value:function(e,t){var n,r=K(e);return this._cameraRaycastCache[r]?this._cameraRaycastCache[r]:(n="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map((function(e){return t.pointCoordinate3D(e)})),unwrapped:!0},this._cameraRaycastCache[r]=n,n)}},{key:"_projectAndResample",value:function(t,n){var r=function(t,n){var r=e.multiply([],n.pixelMatrix,n.globeMatrix),i=[0,-e.GLOBE_RADIUS,0,1],a=[0,e.GLOBE_RADIUS,0,1],s=[0,0,0,1];e.transformMat4$1(i,i,r),e.transformMat4$1(a,a,r),e.transformMat4$1(s,s,r);var o=new e.pointGeometry(i[0]/i[3],i[1]/i[3]),u=new e.pointGeometry(a[0]/a[3],a[1]/a[3]),l=e.polygonContainsPoint(t,o)&&i[3]<s[3],h=e.polygonContainsPoint(t,u)&&a[3]<s[3];if(!l&&!h)return null;var p=function(e,t,n){for(var r=1;r<e.length;r++){var i=X(t.pointCoordinate3D(e[r-1]).x),a=X(t.pointCoordinate3D(e[r]).x);if(n<0){if(i<a)return{idx:r,t:-i/(a-1-i)}}else if(a<i)return{idx:r,t:(1-i)/(a+1-i)}}return null}(t,n,l?-1:1);if(!p)return null;var f=p.idx,d=p.t,v=f>1?q(t.slice(0,f),n):[],m=f<t.length?q(t.slice(f),n):[];v=v.map((function(t){return new e.pointGeometry(X(t.x),t.y)})),m=m.map((function(t){return new e.pointGeometry(X(t.x),t.y)}));var y=c(v);0===y.length&&y.push(m[m.length-1]);var g,_=e.number(y[y.length-1].y,(0===m.length?v[0]:m[0]).y,d);return g=l?[new e.pointGeometry(0,_),new e.pointGeometry(0,0),new e.pointGeometry(1,0),new e.pointGeometry(1,_)]:[new e.pointGeometry(1,_),new e.pointGeometry(1,1),new e.pointGeometry(0,1),new e.pointGeometry(0,_)],y.push.apply(y,c(g)),0===m.length?y.push(v[0]):y.push.apply(y,c(m)),{polygon:y.map((function(t){return new e.MercatorCoordinate(t.x,t.y)})),unwrapped:!1}}(t,n);if(r)return r;var i=function(t,n){for(var r=!1,i=-1/0,a=0,s=0;s<t.length-1;s++)t[s].x>i&&(i=t[s].x,a=s);for(var o=0;o<t.length-1;o++){var u=(a+o)%(t.length-1),l=t[u],c=t[u+1];Math.abs(l.x-c.x)>.5&&(l.x<c.x?(l.x+=1,0===u&&(t[t.length-1].x+=1)):(c.x+=1,u+1===t.length-1&&(t[0].x+=1)),r=!0)}var h=e.mercatorXfromLng(n.center.lng);return r&&h<Math.abs(h-1)&&t.forEach((function(e){e.x-=1})),{polygon:t,unwrapped:r}}(q(t,n).map((function(t){return new e.pointGeometry(X(t.x),t.y)})),n);return{polygon:i.polygon.map((function(t){return new e.MercatorCoordinate(t.x,t.y)})),unwrapped:i.unwrapped}}}],[{key:"createFromScreenPoints",value:function(n,r){var i,a;if(n instanceof e.pointGeometry||"number"==typeof n[0]){var s=e.pointGeometry.convert(n);i=[s],a=r.isPointAboveHorizon(s)}else{var o=e.pointGeometry.convert(n[0]),u=e.pointGeometry.convert(n[1]);i=[o,u],a=e.polygonizeBounds(o,u).every((function(e){return r.isPointAboveHorizon(e)}))}return new t(i,r.getCameraPoint(),a,r)}}]),t}();function q(t,n){return e.resample(t,(function(e){var t=n.pointCoordinate3D(e);e.x=t.x,e.y=t.y}),1/256)}function X(e){return e<0?1+e%1:e%1}function K(e){return 100*e|0}function Q(t,n,r,i,a){var s=function(r,i){if(r)return a(r);if(i){t.url&&i.tiles&&t.tiles&&delete t.tiles;var s=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(s.vectorLayers=i.vector_layers,s.vectorLayerIds=s.vectorLayers.map((function(e){return e.id}))),s.tiles=n.canonicalizeTileset(s,t.url),a(null,s)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url,null,r,i),e.ResourceType.Source),s):e.exported.frame((function(){return s(null,t)}))}var J,$=function(){function t(n,r,i){f(this,t),this.bounds=e.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=r||0,this.maxzoom=i||24}return d(t,[{key:"validateBounds",value:function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}},{key:"contains",value:function(t){var n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),a=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),s=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=r&&t.x<a&&t.y>=i&&t.y<s}}]),t}(),ee=function(){function e(t,n,r){f(this,e),this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||n.destroy()}return d(e,[{key:"bind",value:function(){this.context.bindElementBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),te={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ne=function(){function e(t,n,r,i){f(this,e),this.length=n.length,this.attributes=r,this.itemSize=n.bytesPerElement,this.dynamicDraw=i,this.context=t;var a=t.gl;this.buffer=a.createBuffer(),t.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||n.destroy()}return d(e,[{key:"bind",value:function(){this.context.bindVertexBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"enableAttributes",value:function(e,t){for(var n=0;n<this.attributes.length;n++){var r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}}},{key:"setVertexAttribPointers",value:function(e,t,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],a=t.attributes[i.name];void 0!==a&&e.vertexAttribPointer(a,i.components,e[te[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),re=function(){function e(t){f(this,e),this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}return d(e,[{key:"get",value:function(){return this.current}},{key:"set",value:function(e){}},{key:"getDefault",value:function(){return this.default}},{key:"setDefault",value:function(){this.set(this.default)}}]),e}(),ie=function(t){v(r,t);var n=m(r);function r(){return f(this,r),n.apply(this,arguments)}return d(r,[{key:"getDefault",value:function(){return e.Color.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),r}(re),ae=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return 1}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}]),n}(re),se=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return 0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}]),n}(re),oe=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return[!0,!0,!0,!0]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),n}(re),ue=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return!0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}]),n}(re),le=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return 255}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}]),n}(re),ce=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return{func:this.gl.ALWAYS,ref:0,mask:255}}},{key:"set",value:function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}]),n}(re),he=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}]),n}(re),pe=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}}]),n}(re),fe=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return[0,1]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}]),n}(re),de=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}}]),n}(re),ve=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return this.gl.LESS}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}]),n}(re),me=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}}]),n}(re),ye=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){var e=this.gl;return[e.ONE,e.ZERO]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}]),n}(re),ge=function(t){v(r,t);var n=m(r);function r(){return f(this,r),n.apply(this,arguments)}return d(r,[{key:"getDefault",value:function(){return e.Color.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),r}(re),_e=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return this.gl.FUNC_ADD}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}]),n}(re),Te=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}}]),n}(re),Ee=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return this.gl.BACK}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}]),n}(re),xe=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return this.gl.CCW}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}]),n}(re),be=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}]),n}(re),Ie=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return this.gl.TEXTURE0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}]),n}(re),we=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),n}(re),ke=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(re),Se=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(re),Re=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}}]),n}(re),Ce=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}}]),n}(re),De=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}]),n}(re),Ae=function(e){v(n,e);var t=m(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).vao=e.extVertexArrayObject,r}return d(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}]),n}(re),Oe=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return 4}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}}]),n}(re),Ne=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}}]),n}(re),Me=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}}]),n}(re),Pe=function(e){v(n,e);var t=m(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).context=e,i.parent=r,i}return d(n,[{key:"getDefault",value:function(){return null}}]),n}(re),Fe=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"setDirty",value:function(){this.dirty=!0}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}}]),n}(Pe),Le=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"attachment",value:function(){return this.gl.DEPTH_ATTACHMENT}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(Pe),Ue=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"attachment",value:function(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}]),n}(Le),Ze=function(){function e(t,n,r,i){f(this,e),this.context=t,this.width=n,this.height=r;var a=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new Fe(t,a),i&&(this.depthAttachment=new Le(t,a))}return d(e,[{key:"destroy",value:function(){var e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n)}e.deleteFramebuffer(this.framebuffer)}}]),e}(),Be=function(){function n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(f(this,n),this.gl=e,this.isWebGL2=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),t){var r=e;this.extVertexArrayObject={createVertexArrayOES:r.createVertexArray.bind(e),deleteVertexArrayOES:r.deleteVertexArray.bind(e),bindVertexArrayOES:r.bindVertexArray.bind(e)}}this.clearColor=new ie(this),this.clearDepth=new ae(this),this.clearStencil=new se(this),this.colorMask=new oe(this),this.depthMask=new ue(this),this.stencilMask=new le(this),this.stencilFunc=new ce(this),this.stencilOp=new he(this),this.stencilTest=new pe(this),this.depthRange=new fe(this),this.depthTest=new de(this),this.depthFunc=new ve(this),this.blend=new me(this),this.blendFunc=new ye(this),this.blendColor=new ge(this),this.blendEquation=new _e(this),this.cullFace=new Te(this),this.cullFaceSide=new Ee(this),this.frontFace=new xe(this),this.program=new be(this),this.activeTexture=new Ie(this),this.viewport=new we(this),this.bindFramebuffer=new ke(this),this.bindRenderbuffer=new Se(this),this.bindTexture=new Re(this),this.bindVertexBuffer=new Ce(this),this.bindElementBuffer=new De(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ae(this),this.pixelStoreUnpack=new Oe(this),this.pixelStoreUnpackPremultiplyAlpha=new Ne(this),this.pixelStoreUnpackFlipY=new Me(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),t||(this.extTextureHalfFloat=e.getExtension("OES_texture_half_float")),(t||this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=t||e.getExtension("OES_standard_derivatives"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}return d(n,[{key:"setDefault",value:function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}},{key:"setDirty",value:function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}},{key:"createIndexBuffer",value:function(e,t){return new ee(this,e,t)}},{key:"createVertexBuffer",value:function(e,t,n){return new ne(this,e,t,n)}},{key:"createRenderbuffer",value:function(e,t,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i}},{key:"createFramebuffer",value:function(e,t,n){return new Ze(this,e,t,n)}},{key:"clear",value:function(e){var t=e.color,n=e.depth,r=e.stencil,i=this.gl,a=0;t&&(a|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(a|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==r&&(a|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),i.clear(a)}},{key:"setCullFace",value:function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}},{key:"setDepthMode",value:function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}},{key:"setStencilMode",value:function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}},{key:"setColorMode",value:function(n){t(n.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}},{key:"unbindVAO",value:function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}]),n}(),ze=function(t){v(r,t);var n=m(r);function r(t,a,s,o){var l;if(f(this,r),(l=n.call(this)).id=t,l.dispatcher=s,l.type="vector",l.minzoom=0,l.maxzoom=22,l.scheme="xyz",l.tileSize=512,l.reparseOverscaled=!0,l.isTileClipped=!0,l._loaded=!1,e.extend(i(l),e.pick(a,["url","scheme","tileSize","promoteId"])),l._options=e.extend({type:"vector"},a),l._collectResourceTiming=a.collectResourceTiming,512!==l.tileSize)throw new Error("vector tile sources must have a tileSize of 512");return l.setEventedParent(o),l._tileWorkers={},l._deduped=new e.DedupedRequest,u(l)}return d(r,[{key:"load",value:function(t){var n=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));var r=Array.isArray(this.map._language)?this.map._language.join():this.map._language,i=this.map._worldview;this._tileJSONRequest=Q(this._options,this.map._requestManager,r,i,(function(a,s){n._tileJSONRequest=null,n._loaded=!0,a?(r&&console.warn("Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ".concat(r)),i&&2!==i.length&&console.warn("Requested worldview strings must be a valid ISO alpha-2 code. Found: ".concat(i)),n.fire(new e.ErrorEvent(a))):s&&(e.extend(n,s),s.bounds&&(n.tileBounds=new $(s.bounds,n.minzoom,n.maxzoom)),e.postTurnstileEvent(s.tiles,n.map._requestManager._customAccessToken),n.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(a)}))}},{key:"loaded",value:function(){return this._loaded}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"reload",value:function(){var e=this;this.cancelTileJSONRequest(),this.load((function(){return e.map.style._clearSource(e.id)}))}},{key:"setTiles",value:function(e){return this._options.tiles=e,this.reload(),this}},{key:"setUrl",value:function(e){return this.url=e,this._options.url=e,this.reload(),this}},{key:"onRemove",value:function(){this.cancelTileJSONRequest()}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"loadTile",value:function(t,n){var r=this,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),a={request:this.map._requestManager.transformRequest(i,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(a.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",a,o.bind(this));else if(t.actor=this._tileWorkers[i]=this._tileWorkers[i]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",a,o.bind(this),void 0,!0);else{var s=e.loadVectorTile.call({deduped:this._deduped},a,(function(e,n){e||!n?o.call(r,e):(a.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},t.actor&&t.actor.send("loadTile",a,o.bind(r),void 0,!0))}),!0);t.request={cancel:s}}function o(r,i){return delete t.request,t.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"unloadTile",value:function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"hasTransition",value:function(){return!1}},{key:"afterUpdate",value:function(){this._tileWorkers={}}},{key:"cancelTileJSONRequest",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}]),r}(e.Evented),Ge=function(t){v(r,t);var n=m(r);function r(t,a,s,o){var u;return f(this,r),(u=n.call(this)).id=t,u.dispatcher=s,u.setEventedParent(o),u.type="raster",u.minzoom=0,u.maxzoom=22,u.roundZoom=!0,u.scheme="xyz",u.tileSize=512,u._loaded=!1,u._options=e.extend({type:"raster"},a),e.extend(i(u),e.pick(a,["url","scheme","tileSize"])),u}return d(r,[{key:"load",value:function(t){var n=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Q(this._options,this.map._requestManager,null,null,(function(r,i){n._tileJSONRequest=null,n._loaded=!0,r?n.fire(new e.ErrorEvent(r)):i&&(e.extend(n,i),i.bounds&&(n.tileBounds=new $(i.bounds,n.minzoom,n.maxzoom)),e.postTurnstileEvent(i.tiles),n.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(r)}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"reload",value:function(){var e=this;this.cancelTileJSONRequest(),this.load((function(){return e.map.style._clearSource(e.id)}))}},{key:"setTiles",value:function(e){return this._options.tiles=e,this.reload(),this}},{key:"setUrl",value:function(e){return this.url=e,this._options.url=e,this.reload(),this}},{key:"onRemove",value:function(){this.cancelTileJSONRequest()}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(t,n){var r=this,i=e.exported.devicePixelRatio>=2,a=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),i,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(a,e.ResourceType.Tile),(function(i,a,s,o){return delete t.request,t.aborted?(t.state="unloaded",n(null)):i?(t.state="errored",n(i)):a?(r.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:s,expires:o}),t.setTexture(a,r.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(r.dispatcher),void n(null)):n(null)}))}},{key:"abortTile",value:function(e,t){e.request&&(e.request.cancel(),delete e.request),t()}},{key:"unloadTile",value:function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}},{key:"hasTransition",value:function(){return!1}},{key:"cancelTileJSONRequest",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}],[{key:"loadTileData",value:function(e,t,n){e.setTexture(t,n)}},{key:"unloadTileData",value:function(e,t){e.texture&&t.saveTileTexture(e.texture)}}]),r}(e.Evented);function He(t,n,r,i,a,s,o,u){var l=[t,r,a,n,i,s,1,1,1],c=[o,u,1],p=e.adjoint([],l),f=e.transformMat3(c,c,e.transpose(p,p)),d=h(f,3),v=d[0],m=d[1],y=d[2];return e.multiply$1(l,[v,0,0,0,m,0,0,0,y],l)}var je=function(t){v(r,t);var n=m(r);function r(e,t,i,a){var s;return f(this,r),(s=n.call(this)).id=e,s.dispatcher=i,s.coordinates=t.coordinates,s.type="image",s.minzoom=0,s.maxzoom=22,s.tileSize=512,s.tiles={},s._loaded=!1,s.setEventedParent(a),s.options=t,s._dirty=!1,s}return d(r,[{key:"load",value:function(t,n){var r=this;this._loaded=n||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(function(n,i){if(r._imageRequest=null,r._loaded=!0,n)r.fire(new e.ErrorEvent(n));else if(i){var a=e.window.HTMLImageElement;r.image=i instanceof a?e.exported.getImageData(i):i,r._dirty=!0,r.width=r.image.width,r.height=r.image.height,t&&(r.coordinates=t),r._finishLoading()}}))}},{key:"loaded",value:function(){return this._loaded}},{key:"updateImage",value:function(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}},{key:"_finishLoading",value:function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"onRemove",value:function(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}},{key:"setCoordinates",value:function(t){this.coordinates=t,this._boundsArray=void 0;var n=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){var n,r=1/0,i=1/0,a=-1/0,s=-1/0,o=p(t);try{for(o.s();!(n=o.n()).done;){var u=n.value;r=Math.min(r,u.x),i=Math.min(i,u.y),a=Math.max(a,u.x),s=Math.max(s,u.y)}}catch(f){o.e(f)}finally{o.f()}var l=Math.max(a-r,s-i),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),h=Math.pow(2,c);return new e.CanonicalTileID(c,Math.floor((r+a)/2*h),Math.floor((i+s)/2*h))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}},{key:"_clear",value:function(){this._boundsArray=void 0}},{key:"_prepareData",value:function(t){for(var n in this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}if(!this._boundsArray){var i=e.tileTransform(this.tileID,this.map.transform.projection),a=this.coordinates.map((function(t){var n=i.projection.project(t[0],t[1]);return e.getTilePoint(i,n)._round()})),s=h(a,4),o=s[0],u=s[1],l=s[2],c=s[3];this.perspectiveTransform=function(t,n,r,i,a,s,o,u,l,c){var h=He(0,0,t,0,0,n,t,n),p=He(r,i,a,s,o,u,l,c);return e.multiply$1(p,e.adjoint(h,h),p),[p[6]/p[8]*t/e.EXTENT,p[7]/p[8]*n/e.EXTENT]}(this.width,this.height,o.x,o.y,u.x,u.y,c.x,c.y,l.x,l.y);var p=this._boundsArray=new e.StructArrayLayout4i8;p.emplaceBack(o.x,o.y,0,0),p.emplaceBack(u.x,u.y,e.EXTENT,0),p.emplaceBack(c.x,c.y,0,e.EXTENT),p.emplaceBack(l.x,l.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(p,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}}},{key:"prepare",value:function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,n=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t)}}},{key:"loadTile",value:function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}},{key:"serialize",value:function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return!1}}]),r}(e.Evented),Ve={vector:ze,raster:Ge,"raster-dem":function(t){v(r,t);var n=m(r);function r(t,i,a,s){var o;return f(this,r),(o=n.call(this,t,i,a,s)).type="raster-dem",o.maxzoom=22,o._options=e.extend({type:"raster-dem"},i),o.encoding=i.encoding||"mapbox",o}return d(r,[{key:"loadTile",value:function(t,n){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,a,s,o){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(a){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:s,expires:o});var u=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap&&(null==J&&(J=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),J),l=1-(a.width-e.prevPowerOfTwo(a.width))/2;l<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));var c=u?a:e.exported.getImageData(a,l),h={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:c,encoding:this.encoding,padding:l};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",h,i.bind(this),void 0,!0))}}.bind(this))}},{key:"_getNeighboringTiles",value:function(t){var n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,a=0===n.x?t.wrap-1:t.wrap,s=(n.x+1+r)%r,o=n.x+1===r?t.wrap+1:t.wrap,u={};return u[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,o,n.z,s,n.y).key]={backfilled:!1},n.y>0&&(u[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y-1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,o,n.z,s,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y+1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,o,n.z,s,n.y+1).key]={backfilled:!1}),u}},{key:"unloadTile",value:function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}}]),r}(Ge),geojson:function(t){v(r,t);var n=m(r);function r(t,i,a,s){var o;f(this,r),(o=n.call(this)).id=t,o.type="geojson",o.minzoom=0,o.maxzoom=18,o.tileSize=512,o.isTileClipped=!0,o.reparseOverscaled=!0,o._loaded=!1,o.actor=a.getActor(),o.setEventedParent(s),o._data=i.data,o._options=e.extend({},i),o._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(o.maxzoom=i.maxzoom),i.type&&(o.type=i.type),i.attribution&&(o.attribution=i.attribution),o.promoteId=i.promoteId;var u=e.EXTENT/o.tileSize;return o.workerOptions=e.extend({source:o.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*u,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*u,extent:e.EXTENT,maxZoom:o.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:o.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==i.clusterRadius?i.clusterRadius:50)*u,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions),o}return d(r,[{key:"onAdd",value:function(e){this.map=e,this.setData(this._data)}},{key:"setData",value:function(e){return this._data=e,this._updateWorkerData(),this}},{key:"getClusterExpansionZoom",value:function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}},{key:"getClusterChildren",value:function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}},{key:"getClusterLeaves",value:function(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this}},{key:"_updateWorkerData",value:function(){var t=this;if(this._pendingLoad)this._coalesce=!0;else{this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;var n=e.extend({},this.workerOptions),r=this._data;"string"==typeof r?(n.request=this.map._requestManager.transformRequest(e.exported.resolveURL(r),e.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(r),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),n,(function(n,r){if(t._loaded=!0,t._pendingLoad=null,n)t.fire(new e.ErrorEvent(n));else{var i={dataType:"source",sourceDataType:t._metadataFired?"content":"metadata"};t._collectResourceTiming&&r&&r.resourceTiming&&r.resourceTiming[t.id]&&(i.resourceTiming=r.resourceTiming[t.id]),t.fire(new e.Event("data",i)),t._metadataFired=!0}t._coalesce&&(t._updateWorkerData(),t._coalesce=!1)}))}}},{key:"loaded",value:function(){return this._loaded}},{key:"loadTile",value:function(t,n){var r=this,i=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(i,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(e,a){return delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(a,r.map.painter,"reloadTile"===i),n(null))}),void 0,"loadTile"===i)}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}},{key:"unloadTile",value:function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"onRemove",value:function(){this._pendingLoad&&this._pendingLoad.cancel()}},{key:"serialize",value:function(){return e.extend({},this._options,{type:this.type,data:this._data})}},{key:"hasTransition",value:function(){return!1}}]),r}(e.Evented),video:function(t){v(r,t);var n=m(r);function r(e,t,i,a){var s;return f(this,r),(s=n.call(this,e,t,i,a)).roundZoom=!0,s.type="video",s.options=t,s}return d(r,[{key:"load",value:function(){var t=this;this._loaded=!1;var n=this.options;this.urls=[];var r,i=p(n.urls);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.urls.push(this.map._requestManager.transformRequest(a,e.ResourceType.Source).url)}}catch(s){i.e(s)}finally{i.f()}e.getVideo(this.urls,(function(n,r){t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(t.video=r,t.video.loop=!0,t.video.setAttribute("playsinline",""),t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}))}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"play",value:function(){this.video&&this.video.play()}},{key:"seek",value:function(t){if(this.video){var n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(n.start(0)," and ").concat(n.end(0),"-second mark.")))):this.video.currentTime=t}}},{key:"getVideo",value:function(){return this.video}},{key:"onAdd",value:function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}},{key:"prepare",value:function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,n=t.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}}},{key:"serialize",value:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this.video&&!this.video.paused}}]),r}(je),image:je,canvas:function(t){v(r,t);var n=m(r);function r(t,i,a,s){var o;return f(this,r),o=n.call(this,t,i,a,s),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||o.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):o.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&o.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof e.window.HTMLCanvasElement||o.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):o.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "canvas"'))),o.options=i,o.animate=void 0===i.animate||i.animate,o}return d(r,[{key:"load",value:function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}},{key:"getCanvas",value:function(){return this.canvas}},{key:"onAdd",value:function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}},{key:"onRemove",value:function(){this.pause()}},{key:"prepare",value:function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}}},{key:"serialize",value:function(){return{type:"canvas",coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this._playing}},{key:"_hasInvalidDimensions",value:function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e++){var n=t[e];if(isNaN(n)||n<=0)return!0}return!1}}]),r}(je),custom:function(t){v(r,t);var n=m(r);function r(t,a,s,o){var u;return f(this,r),(u=n.call(this)).id=t,u.type="custom",u._dataType="raster",u._dispatcher=s,u._implementation=a,u.setEventedParent(o),u.scheme="xyz",u.minzoom=0,u.maxzoom=22,u.tileSize=512,u._loaded=!1,u.roundZoom=!0,u._implementation||u.fire(new e.ErrorEvent(new Error("Missing implementation for ".concat(u.id," custom source")))),u._implementation.loadTile||u.fire(new e.ErrorEvent(new Error("Missing loadTile implementation for ".concat(u.id," custom source")))),u._implementation.bounds&&(u.tileBounds=new $(u._implementation.bounds,u.minzoom,u.maxzoom)),a.update=u._update.bind(i(u)),a.clearTiles=u._clearTiles.bind(i(u)),a.coveringTiles=u._coveringTiles.bind(i(u)),e.extend(i(u),e.pick(a,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"])),u}return d(r,[{key:"serialize",value:function(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}},{key:"load",value:function(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}},{key:"onRemove",value:function(e){this._implementation.onRemove&&this._implementation.onRemove(e)}},{key:"hasTile",value:function(e){if(this._implementation.hasTile){var t=e.canonical,n=t.x,r=t.y,i=t.z;return this._implementation.hasTile({x:n,y:r,z:i})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(t,n){var r=t.tileID.canonical,i=r.x,a=r.y,s=r.z,o=new e.window.AbortController;t.request=Promise.resolve(this._implementation.loadTile({x:i,y:a,z:s},{signal:o.signal})).then(function(r){return delete t.request,t.aborted?(t.state="unloaded",n(null)):void 0===r?(t.state="errored",n(null)):null===r?(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",n(null)):function(t){return t instanceof e.window.ImageData||t instanceof e.window.HTMLCanvasElement||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLImageElement}(r)?(this.loadTileData(t,r),t.state="loaded",void n(null)):(t.state="errored",n(new Error("Can't infer data type for ".concat(this.id,", only raster data supported at the moment"))))}.bind(this)).catch((function(e){20!==e.code&&(t.state="errored",n(e))})),t.request.cancel=function(){return o.abort()}}},{key:"loadTileData",value:function(e,t){Ge.loadTileData(e,t,this._map.painter)}},{key:"unloadTileData",value:function(e){Ge.unloadTileData(e,this._map.painter)}},{key:"unloadTile",value:function(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){var n=e.tileID.canonical,r=n.x,i=n.y,a=n.z;this._implementation.unloadTile({x:r,y:i,z:a})}t()}},{key:"abortTile",value:function(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}},{key:"hasTransition",value:function(){return!1}},{key:"_coveringTiles",value:function(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((function(e){return{x:e.canonical.x,y:e.canonical.y,z:e.canonical.z}}))}},{key:"_clearTiles",value:function(){this._map.style._clearSource(this.id)}},{key:"_update",value:function(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}]),r}(e.Evented)},We=function(t,n,r,i){var a=new Ve[n.type](t,n,r,i);if(a.id!==t)throw new Error("Expected Source id to be ".concat(t," instead of ").concat(a.id));return e.bindAll(["load","abort","unload","serialize","prepare"],a),a};function Ye(t,n){var r=e.identity([]);return e.scale(r,r,[.5*t.width,.5*-t.height,1]),e.translate(r,r,[1,-1,0]),e.multiply(r,r,t.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(r)}function qe(e,t,n,r,i,a,s){var o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=e.tilesIn(r,s,o);u.sort(Ke);var l,c=[],h=p(u);try{for(h.s();!(l=h.n()).done;){var f=l.value;c.push({wrappedTileID:f.tile.tileID.wrapped().key,queryResults:f.tile.queryRenderedFeatures(t,n,e._state,f,i,a,Ye(e.transform,f.tile.tileID),o)})}}catch(m){h.e(m)}finally{h.f()}var d=function(e){var t,n={},r={},i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,s=a.queryResults,o=a.wrappedTileID,u=r[o]=r[o]||{};for(var l in s){var c,h=s[l],f=u[l]=u[l]||{},d=n[l]=n[l]||[],v=p(h);try{for(v.s();!(c=v.n()).done;){var y=c.value;f[y.featureIndex]||(f[y.featureIndex]=!0,d.push(y))}}catch(m){v.e(m)}finally{v.f()}}}}catch(m){i.e(m)}finally{i.f()}return n}(c);for(var v in d)d[v].forEach((function(t){var n=t.feature,r=n.layer;r&&"background"!==r.type&&"sky"!==r.type&&(n.source=r.source,r["source-layer"]&&(n.sourceLayer=r["source-layer"]),n.state=void 0!==n.id?e.getFeatureState(r["source-layer"],n.id):{})}));return d}function Xe(e,t){for(var n=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),r=[],i={},a=0;a<n.length;a++){var s=n[a],o=s.tileID.canonical.key;i[o]||(i[o]=!0,s.querySourceFeatures(r,t))}return r}function Ke(e,t){var n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function Qe(){return null!=Sa.workerClass?new Sa.workerClass:new e.window.Worker(Sa.workerUrl)}var Je,$e="mapboxgl_preloaded_worker_pool",et=function(){function e(){f(this,e),this.active={}}return d(e,[{key:"acquire",value:function(t){if(!this.workers)for(this.workers=[];this.workers.length<e.workerCount;)this.workers.push(new Qe);return this.active[t]=!0,this.workers.slice()}},{key:"release",value:function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)}},{key:"isPreloaded",value:function(){return!!this.active[$e]}},{key:"numActive",value:function(){return Object.keys(this.active).length}}]),e}();function tt(){return Je||(Je=new et),Je}function nt(t,n){var r={};for(var i in t)"ref"!==i&&(r[i]=t[i]);return e.refProperties.forEach((function(e){e in n&&(r[e]=n[e])})),r}function rt(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=nt(e[r],t[e[r].ref]));return e}et.workerCount=2;var it={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function at(e,t,n){n.push({command:it.addSource,args:[e,t[e]]})}function st(e,t,n){t.push({command:it.removeSource,args:[e]}),n[e]=!0}function ot(e,t,n,r){st(e,n,r),at(e,t,n)}function ut(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t(e[r][i],n[r][i]))return!1;return!0}function lt(e,n,r,i,a,s){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(t(e[o],n[o])||r.push({command:s,args:[i,o,n[o],a]}));for(o in n)n.hasOwnProperty(o)&&!e.hasOwnProperty(o)&&(t(e[o],n[o])||r.push({command:s,args:[i,o,n[o],a]}))}function ct(e){return e.id}function ht(e,t){return e[t.id]=t,e}var pt=function(){function t(e,n){f(this,t),this.reset(e,n)}return d(t,[{key:"reset",value:function(e,t){this.points=e||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}},{key:"lerp",value:function(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);for(var n=1,r=this._distances[n],i=t*this.paddedLength+this.padding;r<i&&n<this._distances.length;)r=this._distances[++n];var a=n-1,s=this._distances[a],o=r-s,u=o>0?(i-s)/o:0;return this.points[a].mult(1-u).add(this.points[n].mult(u))}}]),t}(),ft=function(){function e(t,n,r){f(this,e);var i=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(n/r);for(var s=0;s<this.xCellCount*this.yCellCount;s++)i.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=n,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}return d(e,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"insertCircle",value:function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)}},{key:"_insertBoxCell",value:function(e,t,n,r,i,a){this.boxCells[i].push(a)}},{key:"_insertCircleCell",value:function(e,t,n,r,i,a){this.circleCells[i].push(a)}},{key:"_query",value:function(e,t,n,r,i,a){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var s=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var o=0;o<this.boxKeys.length;o++)s.push({key:this.boxKeys[o],x1:this.bboxes[4*o],y1:this.bboxes[4*o+1],x2:this.bboxes[4*o+2],y2:this.bboxes[4*o+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],h=this.circles[3*u+2];s.push({key:this.circleKeys[u],x1:l-h,y1:c-h,x2:l+h,y2:c+h})}return a?s.filter(a):s}return this._forEachCell(e,t,n,r,this._queryCell,s,{hitTest:i,seenUids:{box:{},circle:{}}},a),i?s.length>0:s}},{key:"_queryCircle",value:function(e,t,n,r,i){var a=e-n,s=e+n,o=t-n,u=t+n;if(s<0||a>this.width||u<0||o>this.height)return!r&&[];var l=[];return this._forEachCell(a,o,s,u,this._queryCellCircle,l,{hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),r?l.length>0:l}},{key:"query",value:function(e,t,n,r,i){return this._query(e,t,n,r,!1,i)}},{key:"hitTest",value:function(e,t,n,r,i){return this._query(e,t,n,r,!0,i)}},{key:"hitTestCircle",value:function(e,t,n,r){return this._queryCircle(e,t,n,!0,r)}},{key:"_queryCell",value:function(e,t,n,r,i,a,s,o){var u=s.seenUids,l=this.boxCells[i];if(null!==l){var c,h=this.bboxes,f=p(l);try{for(f.s();!(c=f.n()).done;){var d=c.value;if(!u.box[d]){u.box[d]=!0;var v=4*d;if(e<=h[v+2]&&t<=h[v+3]&&n>=h[v+0]&&r>=h[v+1]&&(!o||o(this.boxKeys[d]))){if(s.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[d],x1:h[v],y1:h[v+1],x2:h[v+2],y2:h[v+3]})}}}}catch(w){f.e(w)}finally{f.f()}}var m=this.circleCells[i];if(null!==m){var y,g=this.circles,_=p(m);try{for(_.s();!(y=_.n()).done;){var T=y.value;if(!u.circle[T]){u.circle[T]=!0;var E=3*T;if(this._circleAndRectCollide(g[E],g[E+1],g[E+2],e,t,n,r)&&(!o||o(this.circleKeys[T]))){if(s.hitTest)return a.push(!0),!0;var x=g[E],b=g[E+1],I=g[E+2];a.push({key:this.circleKeys[T],x1:x-I,y1:b-I,x2:x+I,y2:b+I})}}}}catch(w){_.e(w)}finally{_.f()}}}},{key:"_queryCellCircle",value:function(e,t,n,r,i,a,s,o){var u=s.circle,l=s.seenUids,c=this.boxCells[i];if(null!==c){var h,f=this.bboxes,d=p(c);try{for(d.s();!(h=d.n()).done;){var v=h.value;if(!l.box[v]){l.box[v]=!0;var m=4*v;if(this._circleAndRectCollide(u.x,u.y,u.radius,f[m+0],f[m+1],f[m+2],f[m+3])&&(!o||o(this.boxKeys[v])))return a.push(!0),!0}}}catch(b){d.e(b)}finally{d.f()}}var y=this.circleCells[i];if(null!==y){var g,_=this.circles,T=p(y);try{for(T.s();!(g=T.n()).done;){var E=g.value;if(!l.circle[E]){l.circle[E]=!0;var x=3*E;if(this._circlesCollide(_[x],_[x+1],_[x+2],u.x,u.y,u.radius)&&(!o||o(this.circleKeys[E])))return a.push(!0),!0}}}catch(b){T.e(b)}finally{T.f()}}}},{key:"_forEachCell",value:function(e,t,n,r,i,a,s,o){for(var u=this._convertToXCellCoord(e),l=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r),p=u;p<=c;p++)for(var f=l;f<=h;f++)if(i.call(this,e,t,n,r,this.xCellCount*f+p,a,s,o))return}},{key:"_convertToXCellCoord",value:function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}},{key:"_convertToYCellCoord",value:function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}},{key:"_circlesCollide",value:function(e,t,n,r,i,a){var s=r-e,o=i-t,u=n+a;return u*u>s*s+o*o}},{key:"_circleAndRectCollide",value:function(e,t,n,r,i,a,s){var o=(a-r)/2,u=Math.abs(e-(r+o));if(u>o+n)return!1;var l=(s-i)/2,c=Math.abs(t-(i+l));if(c>l+n)return!1;if(u<=o||c<=l)return!0;var h=u-o,p=c-l;return h*h+p*p<=n*n}}]),e}(),dt=Math.tan(85*Math.PI/180);function vt(t,n,r,i,a,s,o){var u=e.create();if(r)if("globe"===s.name){var l=e.calculateGlobeLabelMatrix(a,n);e.multiply(u,u,l)}else{var c=A([],o);u[0]=c[0],u[1]=c[1],u[4]=c[2],u[5]=c[3],i||e.rotateZ(u,u,a.angle)}else e.multiply(u,a.labelPlaneMatrix,t);return u}function mt(e,t,n,r,i,a,s){var o=vt(e,t,n,r,i,a,s);return"globe"===a.name&&n||(o[2]=o[6]=o[10]=o[14]=0),o}function yt(t,n,r,i,a,s,o){if(r){if("globe"===s.name){var u=vt(t,n,r,i,a,s,o);return e.invert(u,u),e.multiply(u,t,u),u}var l=e.clone(t),c=e.identity([]);return c[0]=o[0],c[1]=o[1],c[4]=o[2],c[5]=o[3],e.multiply(l,l,c),i||e.rotateZ(l,l,-a.angle),l}return a.glCoordMatrix}function gt(t,n,r,i){var a=[t,n,r,1];r?e.transformMat4$1(a,a,i):Ct(a,a,i);var s=a[3];return a[0]/=s,a[1]/=s,a[2]/=s,a}function _t(e,t){return Math.min(.5+e/t*.5,1.5)}function Tt(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function Et(t,n,r,i,a,s,o,u,l,c){var p=r.transform,f=i?t.textSizeData:t.iconSizeData,d=e.evaluateSizeForZoom(f,r.transform.zoom),v="globe"===p.projection.name,m=[256/r.width*2+1,256/r.height*2+1],y=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;y.clear();var g=null;v&&(g=i?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);for(var _,T=t.lineVertexArray,E=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,x=r.transform.width/r.transform.height,b=!1,I=0;I<E.length;I++){var w=E.get(I),k=w.numGlyphs,S=w.writingMode;if(S!==e.WritingMode.vertical||b||_===e.WritingMode.horizontal||(b=!0),_=S,!w.hidden&&S!==e.WritingMode.vertical||b){b=!1;var R=new e.pointGeometry(w.tileAnchorX,w.tileAnchorY),C=p.projection.projectTilePoint(R.x,R.y,c.canonical),D=C.x,A=C.y,O=C.z;if(l){var N=l(R),M=h(N,3);D+=M[0],A+=M[1],O+=M[2]}var P=[D,A,O,1];if(e.transformMat4$1(P,P,n),Tt(P,m)){var F=_t(r.transform.cameraToCenterDistance,P[3]),L=e.evaluateSizeForFeature(f,d,w),U=o?L/F:L*F,Z=gt(D,A,O,a);if(Z[3]<=0)Rt(k,y);else{var B={},z=o?null:l,G=It(w,U,!1,u,n,a,s,t.glyphOffsetArray,T,y,g,Z,R,B,x,z,p.projection,c,o);b=G.useVertical,z&&G.needsFlipping&&(B={}),(G.notEnoughRoom||b||G.needsFlipping&&It(w,U,!0,u,n,a,s,t.glyphOffsetArray,T,y,g,Z,R,B,x,z,p.projection,c,o).notEnoughRoom)&&Rt(k,y)}}else Rt(k,y)}else Rt(k,y)}i?(t.text.dynamicLayoutVertexBuffer.updateData(y),g&&t.text.globeExtVertexBuffer.updateData(g)):(t.icon.dynamicLayoutVertexBuffer.updateData(y),g&&t.icon.globeExtVertexBuffer.updateData(g))}function xt(e,t,n,r,i,a,s,o,u,l,c,h,p,f,d,v){var m=o.lineStartIndex,y=o.glyphStartIndex,g=o.segment,_=y+o.numGlyphs,T=m+o.lineLength,E=t.getoffsetX(y),x=t.getoffsetX(_-1),b=St(e*E,n,r,i,a,s,g,m,T,u,l,c,h,p,!0,f,d,v);if(!b)return null;var I=St(e*x,n,r,i,a,s,g,m,T,u,l,c,h,p,!0,f,d,v);return I?{first:b,last:I}:null}function bt(t,n,r,i){return t===e.WritingMode.horizontal&&Math.abs(i)>Math.abs(r)?{useVertical:!0}:t===e.WritingMode.vertical?i>0?{needsFlipping:!0}:null:0!==n&&function(e,t){return 0===e||Math.abs(t/e)>dt}(r,i)?1===n?{needsFlipping:!0}:null:r<0?{needsFlipping:!0}:null}function It(t,n,r,i,a,s,o,u,l,c,p,f,d,v,m,y,g,_,T){var E=n/24,x=t.lineOffsetX*E,b=t.lineOffsetY*E,I=t.lineStartIndex,w=t.glyphStartIndex,k=t.numGlyphs,S=t.segment,R=t.writingMode,C=t.flipState,D=I+t.lineLength,A=function(t){if(p){var n=h(t.up,3),r=n[0],i=n[1],a=n[2],s=c.length;e.updateGlobeVertexNormal(p,s+0,r,i,a),e.updateGlobeVertexNormal(p,s+1,r,i,a),e.updateGlobeVertexNormal(p,s+2,r,i,a),e.updateGlobeVertexNormal(p,s+3,r,i,a)}var o=h(t.point,3),u=o[0],l=o[1],f=o[2];e.addDynamicAttributes(c,u,l,f,t.angle)};if(k>1){var O=xt(E,u,x,b,r,f,d,t,l,s,v,y,!1,g,_,T);if(!O)return{notEnoughRoom:!0};if(i&&!r){var N,M,P,F,L=h(O.first.point,3),U=L[0],Z=L[1],B=L[2],z=h(O.last.point,3),G=z[0],H=z[1],j=z[2];N=gt(U,Z,B,o),U=(M=h(N,2))[0],Z=M[1],P=gt(G,H,j,o);var V=bt(R,C,((G=(F=h(P,2))[0])-U)*m,(H=F[1])-Z);if(t.flipState=V&&V.needsFlipping?1:2,V)return V}A(O.first);for(var W=w+1;W<w+k-1;W++){var Y=St(E*u.getoffsetX(W),x,b,r,f,d,S,I,D,l,s,v,y,!1,!1,g,_,T);if(!Y)return c.length-=4*(W-w),{notEnoughRoom:!0};A(Y)}A(O.last)}else{if(i&&!r){var q=gt(d.x,d.y,0,a),X=I+S+1,K=new e.pointGeometry(l.getx(X),l.gety(X)),Q=gt(K.x,K.y,0,a),J=Q[3]>0?Q:kt(d,K,q,1,a,void 0,g,_.canonical),$=bt(R,C,(J[0]-q[0])*m,J[1]-q[1]);if(t.flipState=$&&$.needsFlipping?1:2,$)return $}var ee=St(E*u.getoffsetX(w),x,b,r,f,d,S,I,D,l,s,v,y,!1,!1,g,_,T);if(!ee)return{notEnoughRoom:!0};A(ee)}return{}}function wt(e,t,n,r,i){var a=r.projectTilePoint(e.x,e.y,t),s=a.x,o=a.y,u=a.z;if(!i)return gt(s,o,u,n);var l=i(e),c=h(l,3);return gt(s+c[0],o+c[1],u+c[2],n)}function kt(t,n,r,i,a,s,o,u){var l=wt(t.sub(n)._unit()._add(t),u,a,o,s);return e.sub(l,r,l),e.normalize(l,l),e.scaleAndAdd(l,r,l,i)}function St(t,n,r,i,a,s,o,u,l,c,h,p,f,d,v,m,y,g){var _=i?t-n:t+n,T=_>0?1:-1,E=0;i&&(T*=-1,E=Math.PI),T<0&&(E+=Math.PI);for(var x=u+o+(T>0?0:1)|0,b=a,I=a,w=0,k=0,S=Math.abs(_),R=[],C=[],D=s,A=D,O=function(){return kt(A,D,I,S-w+1,h,f,m,y.canonical)};w+k<=S;){if((x+=T)<u||x>=l)return null;if(I=b,A=D,R.push(I),d&&C.push(A),D=new e.pointGeometry(c.getx(x),c.gety(x)),!(b=p[x])){var N=wt(D,y.canonical,h,m,f);b=N[3]>0?p[x]=N:O()}w+=k,k=e.distance(I,b)}v&&f&&(p[x]&&(b=O(),k=e.distance(I,b)),p[x]=b);var M=(S-w)/k,P=D.sub(A)._mult(M)._add(A),F=e.sub([],b,I),L=e.scaleAndAdd([],I,F,M),U=[0,0,1],Z=F[0],B=F[1];if(g&&(0!==(U=m.upVector(y.canonical,P.x,P.y))[0]||0!==U[1]||1!==U[2])){var z=[U[2],0,-U[0]],G=e.cross([],U,z);e.normalize(z,z),e.normalize(G,G),Z=e.dot(F,z),B=e.dot(F,G)}if(r){var H=e.cross([],U,F);e.normalize(H,H),e.scaleAndAdd(L,L,H,r*T)}var j=E+Math.atan2(B,Z);return R.push(L),d&&C.push(P),{point:L,angle:j,path:R,tilePath:C,up:U}}function Rt(e,t){var n=t.length,r=n+4*e;t.resize(r),t.float32.fill(-1/0,4*n,4*r)}function Ct(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}var Dt=100,At=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ft(e.width+200,e.height+200,25),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ft(e.width+200,e.height+200,25);f(this,t),this.transform=e,this.grid=r,this.ignoredGrid=i,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+Dt,this.screenBottomBoundary=e.height+Dt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=n}return d(t,[{key:"placeCollisionBox",value:function(e,t,n,r,i,a,s,o){var u=n.projectedAnchorX,l=n.projectedAnchorY,c=n.projectedAnchorZ,p=n.elevation,f=n.tileID,d=e.getProjection();if(p&&f){var v=d.upVector(f.canonical,n.tileAnchorX,n.tileAnchorY),m=h(v,3),y=m[0],g=m[1],_=m[2],T=d.upVectorScale(f.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;u+=y*p*T,l+=g*p*T,c+=_*p*T}var E=this.projectAndGetPerspectiveRatio(s,u,l,c,n.tileID,"globe"===d.name||!!p||this.transform.pitch>0,d),x=a*E.perspectiveRatio,b=(n.x1*t+r.x-n.padding)*x+E.point.x,I=(n.y1*t+r.y-n.padding)*x+E.point.y,w=(n.x2*t+r.x+n.padding)*x+E.point.x,k=(n.y2*t+r.y+n.padding)*x+E.point.y,S=E.perspectiveRatio<=.55||E.occluded;return!this.isInsideGrid(b,I,w,k)||!i&&this.grid.hitTest(b,I,w,k,o)||S?{box:[],offscreen:!1,occluded:E.occluded}:{box:[b,I,w,k],offscreen:this.isOffscreen(b,I,w,k),occluded:!1}}},{key:"placeCollisionCircles",value:function(t,n,r,i,a,s,o,u,l,c,f,d,v,m,y){var g=[],_=this.transform.elevation,T=t.getProjection(),E=_?_.getAtTileOffsetFunc(y,this.transform.center.lat,this.transform.worldSize,T):null,x=new e.pointGeometry(r.tileAnchorX,r.tileAnchorY),b=T.projectTilePoint(x.x,x.y,y.canonical),I=b.x,w=b.y,k=b.z;if(E){var S=E(x),R=h(S,3);I+=R[0],w+=R[1],k+=R[2]}var C="globe"===T.name,D=this.projectAndGetPerspectiveRatio(o,I,w,k,y,C||!!_||this.transform.pitch>0,T),A=D.perspectiveRatio,O=(f?s/A:s*A)/e.ONE_EM,N=gt(I,w,k,u),M=D.signedDistanceFromCamera>0?xt(O,a,r.lineOffsetX*O,r.lineOffsetY*O,!1,N,x,r,i,u,{},_&&!f?E:null,f&&!!_,T,y,f):null,P=!1,F=!1,L=!0;if(M&&!D.occluded){for(var U=.5*v*A+m,Z=new e.pointGeometry(-100,-100),B=new e.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),z=new pt,G=M.first,H=M.last,j=G.path.length,V=[],W=j-1;W>=1;W--)V.push(G.path[W]);for(var Y=1;Y<H.path.length;Y++)V.push(H.path[Y]);var q=2.5*U;l&&(V=V.map((function(e,t){var n=h(e,3),r=n[0],i=n[1],a=n[2];return E&&!C&&(a=E(t<j-1?G.tilePath[j-1-t]:H.tilePath[t-j+2])[2]),gt(r,i,a,l)})),V.some((function(e){return e[3]<=0}))&&(V=[]));var X=[];if(V.length>0){var K,Q=1/0,J=-1/0,$=1/0,ee=-1/0,te=p(V);try{for(te.s();!(K=te.n()).done;){var ne=K.value;Q=Math.min(Q,ne[0]),$=Math.min($,ne[1]),J=Math.max(J,ne[0]),ee=Math.max(ee,ne[1])}}catch(me){te.e(me)}finally{te.f()}J>=Z.x&&Q<=B.x&&ee>=Z.y&&$<=B.y&&(X=[V.map((function(t){return new e.pointGeometry(t[0],t[1])}))],(Q<Z.x||J>B.x||$<Z.y||ee>B.y)&&(X=e.clipLine(X,Z.x,Z.y,B.x,B.y)))}var re,ie=p(X);try{for(ie.s();!(re=ie.n()).done;){var ae=re.value;z.reset(ae,.25*U);var se=0;se=z.length<=.5*U?1:Math.ceil(z.paddedLength/q)+1;for(var oe=0;oe<se;oe++){var ue=oe/Math.max(se-1,1),le=z.lerp(ue),ce=le.x+Dt,he=le.y+Dt;g.push(ce,he,U,0);var pe=ce-U,fe=he-U,de=ce+U,ve=he+U;if(L=L&&this.isOffscreen(pe,fe,de,ve),F=F||this.isInsideGrid(pe,fe,de,ve),!n&&this.grid.hitTestCircle(ce,he,U,d)&&(P=!0,!c))return{circles:[],offscreen:!1,collisionDetected:P,occluded:!1}}}}catch(me){ie.e(me)}finally{ie.f()}}return{circles:!c&&P||!F?[]:g,offscreen:L,collisionDetected:P,occluded:D.occluded}}},{key:"queryRenderedSymbols",value:function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};var n,r=[],i=1/0,a=1/0,s=-1/0,o=-1/0,u=p(t);try{for(u.s();!(n=u.n()).done;){var l=n.value,c=new e.pointGeometry(l.x+Dt,l.y+Dt);i=Math.min(i,c.x),a=Math.min(a,c.y),s=Math.max(s,c.x),o=Math.max(o,c.y),r.push(c)}}catch(T){u.e(T)}finally{u.f()}var h,f=this.grid.query(i,a,s,o).concat(this.ignoredGrid.query(i,a,s,o)),d={},v={},m=p(f);try{for(m.s();!(h=m.n()).done;){var y=h.value,g=y.key;if(void 0===d[g.bucketInstanceId]&&(d[g.bucketInstanceId]={}),!d[g.bucketInstanceId][g.featureIndex]){var _=[new e.pointGeometry(y.x1,y.y1),new e.pointGeometry(y.x2,y.y1),new e.pointGeometry(y.x2,y.y2),new e.pointGeometry(y.x1,y.y2)];e.polygonIntersectsPolygon(r,_)&&(d[g.bucketInstanceId][g.featureIndex]=!0,void 0===v[g.bucketInstanceId]&&(v[g.bucketInstanceId]=[]),v[g.bucketInstanceId].push(g.featureIndex))}}}catch(T){m.e(T)}finally{m.f()}return v}},{key:"insertCollisionBox",value:function(e,t,n,r,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},e[0],e[1],e[2],e[3])}},{key:"insertCollisionCircles",value:function(e,t,n,r,i){for(var a=t?this.ignoredGrid:this.grid,s={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},o=0;o<e.length;o+=4)a.insertCircle(s,e[o],e[o+1],e[o+2])}},{key:"projectAndGetPerspectiveRatio",value:function(t,n,r,i,a,s,o){var u=[n,r,i,1],l=!1;if(i||this.transform.pitch>0){e.transformMat4$1(u,u,t);var c="globe"===o.name;if(this.fogState&&a&&!c){var h=function(t,n,r,i,a,s){var o=s.calculateFogTileMatrix(a),u=[n,r,i];return e.transformMat4(u,u,o),B(t,u,s.pitch,s._fov)}(this.fogState,n,r,i,a.toUnwrapped(),this.transform);l=h>.9}}else Ct(u,u,t);var p=u[3];return{point:new e.pointGeometry((u[0]/p+1)/2*this.transform.width+Dt,(-u[1]/p+1)/2*this.transform.height+Dt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(o)/p*.5,1.5),signedDistanceFromCamera:p,occluded:s&&u[2]>p||l}}},{key:"isOffscreen",value:function(e,t,n,r){return n<Dt||e>=this.screenRightBoundary||r<Dt||t>this.screenBottomBoundary}},{key:"isInsideGrid",value:function(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}},{key:"getViewportMatrix",value:function(){var t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}]),t}();function Ot(t,n,r){var i=n.createTileMatrix(t,t.worldSize,r.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,i)}function Nt(e,t,n){if(t.projection.name===n.projection.name)return e.projMatrix;var r=n.clone();return r.setProjection(t.projection),Ot(r,t.getProjection(),e)}function Mt(e,t,n){return t.name===n.projection.name?e.projMatrix:Ot(n,t,e)}var Pt=function(){function e(t,n,r,i){f(this,e),this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?n:-n))):i&&r?1:0,this.placed=r}return d(e,[{key:"isHidden",value:function(){return 0===this.opacity&&!this.placed}}]),e}(),Ft=function(){function e(t,n,r,i,a){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];f(this,e),this.text=new Pt(t?t.text:null,n,r,a),this.icon=new Pt(t?t.icon:null,n,i,a),this.clipped=s}return d(e,[{key:"isHidden",value:function(){return this.text.isHidden()&&this.icon.isHidden()}}]),e}(),Lt=d((function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];f(this,e),this.text=t,this.icon=n,this.skipFade=r,this.clipped=i})),Ut=d((function t(){f(this,t),this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]})),Zt=d((function e(t,n,r,i,a){f(this,e),this.bucketInstanceId=t,this.featureIndex=n,this.sourceLayerIndex=r,this.bucketIndex=i,this.tileID=a})),Bt=function(){function e(t){f(this,e),this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}return d(e,[{key:"get",value:function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]}}]),e}();function zt(t,n,r,i,a){var s=e.getAnchorAlignment(t),o=-(s.horizontalAlign-.5)*n,u=-(s.verticalAlign-.5)*r,l=e.evaluateVariableOffset(t,i);return new e.pointGeometry(o+l[0]*a,u+l[1]*a)}function Gt(t,n,r,i,a){var s=new e.pointGeometry(t,n);return r&&s._rotate(i?a:-a),s}var Ht=function(){function t(e,n,r,i,a){f(this,t),this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new At(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new Bt(r),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}return d(t,[{key:"getBucketParts",value:function(t,n,r,i){var a=r.getBucket(n),s=r.latestFeatureIndex;if(a&&s&&n.id===a.layerIds[0]){var o=a.layers[0].layout,u=r.collisionBoxArray,l=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/e.EXTENT,h=r.tileID.toUnwrapped();this.transform.setProjection(a.projection);var f,d,v,m=(f=r.tileID,d=a.getProjection(),v=this.transform,d.name===this.projection?v.calculateProjMatrix(f.toUnwrapped()):Ot(v,d,f)),y="map"===o.get("text-pitch-alignment"),g="map"===o.get("text-rotation-alignment");n.compileFilter();var _=n.dynamicFilter(),T=n.dynamicFilterNeedsFeature(),E=this.transform.calculatePixelsToTileUnitsMatrix(r),x=mt(m,r.tileID.canonical,y,g,this.transform,a.getProjection(),E),b=null;if(y){var I=yt(m,r.tileID.canonical,y,g,this.transform,a.getProjection(),E);b=e.multiply([],this.transform.labelPlaneMatrix,I)}var w=null;_&&r.latestFeatureIndex&&(w={unwrappedTileID:h,dynamicFilter:_,dynamicFilterNeedsFeature:T,featureIndex:r.latestFeatureIndex}),this.retainedQueryData[a.bucketInstanceId]=new Zt(a.bucketInstanceId,s,a.sourceLayerIndex,a.index,r.tileID);var k={bucket:a,layout:o,posMatrix:m,textLabelPlaneMatrix:x,labelToScreenMatrix:b,clippingData:w,scale:l,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:u,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(a.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(i){var S,R=p(a.sortKeyRanges);try{for(R.s();!(S=R.n()).done;){var C=S.value,D=C.sortKey,A=C.symbolInstanceStart,O=C.symbolInstanceEnd;t.push({sortKey:D,symbolInstanceStart:A,symbolInstanceEnd:O,parameters:k})}}catch(N){R.e(N)}finally{R.f()}}else t.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:k})}}},{key:"attemptAnchorPlacement",value:function(e,t,n,r,i,a,s,o,u,l,c,h,p,f,d,v,m,y){var g,_=h.textOffset0,T=h.textOffset1,E=h.crossTileID,x=[_,T],b=zt(e,n,r,x,i),I=this.collisionIndex.placeCollisionBox(f,i,t,Gt(b.x,b.y,a,s,this.transform.angle),c,o,u,l.predicate);if(v){var w=f.getSymbolInstanceIconSize(y,this.transform.zoom,h.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(f,w,v,Gt(b.x,b.y,a,s,this.transform.angle),c,o,u,l.predicate).box.length)return}if(I.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[E]&&this.prevPlacement.placements[E]&&this.prevPlacement.placements[E].text&&(g=this.prevPlacement.variableOffsets[E].anchor),this.variableOffsets[E]={textOffset:x,width:n,height:r,anchor:e,textScale:i,prevAnchor:g},this.markUsedJustification(f,e,h,d),f.allowVerticalPlacement&&(this.markUsedOrientation(f,d,h),this.placedOrientations[E]=d),{shift:b,placedGlyphBoxes:I}}},{key:"placeLayerBucketPart",value:function(t,n,r,i){var a=this,s=t.parameters,o=s.bucket,u=s.layout,l=s.posMatrix,c=s.textLabelPlaneMatrix,h=s.labelToScreenMatrix,f=s.clippingData,d=s.textPixelRatio,v=s.holdingForFade,m=s.collisionBoxArray,y=s.partiallyEvaluatedTextSize,g=s.partiallyEvaluatedIconSize,_=s.collisionGroup,T=u.get("text-optional"),E=u.get("icon-optional"),x=u.get("text-allow-overlap"),b=u.get("icon-allow-overlap"),I="map"===u.get("text-rotation-alignment"),w="map"===u.get("text-pitch-alignment"),k="none"!==u.get("icon-text-fit"),S="viewport-y"===u.get("symbol-z-order");this.transform.setProjection(o.projection);var R=x&&(b||!o.hasIconData()||E),C=b&&(x||!o.hasTextData()||T);!o.collisionArrays&&m&&o.deserializeCollisionBoxes(m),r&&i&&o.updateCollisionDebugBuffers(this.transform.zoom,m);var D=function(t,i,s){var m=t.crossTileID,S=t.numVerticalGlyphVertices;if(f){var D={zoom:a.transform.zoom,pitch:a.transform.pitch},A=null;if(f.dynamicFilterNeedsFeature){var O=a.retainedQueryData[o.bucketInstanceId];A=f.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:O.bucketIndex,sourceLayerIndex:O.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,f.dynamicFilter)(D,A,a.retainedQueryData[o.bucketInstanceId].tileID.canonical,new e.pointGeometry(t.tileAnchorX,t.tileAnchorY),a.transform.calculateDistanceTileData(f.unwrappedTileID)))return a.placements[m]=new Lt(!1,!1,!1,!0),void(n[m]=!0)}if(!n[m])if(v)a.placements[m]=new Lt(!1,!1,!1);else{var N=!1,M=!1,P=!0,F=!1,L=!1,U=null,Z={box:null,offscreen:null,occluded:null},B={box:null,offscreen:null,occluded:null},z=null,G=null,H=null,j=0,V=0,W=0;s.textFeatureIndex?j=s.textFeatureIndex:t.useRuntimeCollisionCircles&&(j=t.featureIndex),s.verticalTextFeatureIndex&&(V=s.verticalTextFeatureIndex);var Y=function(e){e.tileID=a.retainedQueryData[o.bucketInstanceId].tileID;var t=a.transform.elevation;(t||e.elevation)&&(e.elevation=t?t.getAtTileOffset(e.tileID,e.tileAnchorX,e.tileAnchorY):0)},q=s.textBox;if(q){Y(q);var X=function(n){var r=e.WritingMode.horizontal;if(o.allowVerticalPlacement&&!n&&a.prevPlacement){var i=a.prevPlacement.placedOrientations[m];i&&(a.placedOrientations[m]=i,r=i,a.markUsedOrientation(o,r,t))}return r},K=function(t,n){if(o.allowVerticalPlacement&&S>0&&s.verticalTextBox){var r,i=p(o.writingModes);try{for(i.s();!(r=i.n()).done&&(r.value===e.WritingMode.vertical?(Z=n(),B=Z):Z=t(),!(Z&&Z.box&&Z.box.length)););}catch(a){i.e(a)}finally{i.f()}}else Z=t()};if(u.get("text-variable-anchor")){var Q=u.get("text-variable-anchor");if(a.prevPlacement&&a.prevPlacement.variableOffsets[m]){var J=a.prevPlacement.variableOffsets[m];Q.indexOf(J.anchor)>0&&(Q=Q.filter((function(e){return e!==J.anchor})),Q.unshift(J.anchor))}var $=function(e,n,r){var s=o.getSymbolInstanceTextSize(y,t,a.transform.zoom,i),u=(e.x2-e.x1)*s+2*e.padding,c=(e.y2-e.y1)*s+2*e.padding,h=k&&!b?n:null;h&&Y(h);for(var p={box:[],offscreen:!1,occluded:!1},f=x?2*Q.length:Q.length,v=0;v<f;++v){var m=a.attemptAnchorPlacement(Q[v%Q.length],e,u,c,s,I,w,d,l,_,v>=Q.length,t,i,o,r,h,y,g);if(m&&(p=m.placedGlyphBoxes)&&p.box&&p.box.length){N=!0,U=m.shift;break}}return p};K((function(){return $(q,s.iconBox,e.WritingMode.horizontal)}),(function(){var t=s.verticalTextBox;return t&&Y(t),o.allowVerticalPlacement&&!(Z&&Z.box&&Z.box.length)&&S>0&&t?$(t,s.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),Z&&(N=Z.box,P=Z.offscreen,F=Z.occluded);var ee=X(Z&&Z.box);if(!N&&a.prevPlacement){var te=a.prevPlacement.variableOffsets[m];te&&(a.variableOffsets[m]=te,a.markUsedJustification(o,te.anchor,t,ee))}}else{var ne=function(n,r){var s=o.getSymbolInstanceTextSize(y,t,a.transform.zoom,i),u=a.collisionIndex.placeCollisionBox(o,s,n,new e.pointGeometry(0,0),x,d,l,_.predicate);return u&&u.box&&u.box.length&&(a.markUsedOrientation(o,r,t),a.placedOrientations[m]=r),u};K((function(){return ne(q,e.WritingMode.horizontal)}),(function(){var t=s.verticalTextBox;return o.allowVerticalPlacement&&S>0&&t?(Y(t),ne(t,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),X(Z&&Z.box&&Z.box.length)}}if(N=(z=Z)&&z.box&&z.box.length>0,P=z&&z.offscreen,F=z&&z.occluded,t.useRuntimeCollisionCircles){var re=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),ie=e.evaluateSizeForFeature(o.textSizeData,y,re),ae=u.get("text-padding");G=a.collisionIndex.placeCollisionCircles(o,x,re,o.lineVertexArray,o.glyphOffsetArray,ie,l,c,h,r,w,_.predicate,t.collisionCircleDiameter*ie/e.ONE_EM,ae,a.retainedQueryData[o.bucketInstanceId].tileID),N=x||G.circles.length>0&&!G.collisionDetected,P=P&&G.offscreen,F=G.occluded}if(s.iconFeatureIndex&&(W=s.iconFeatureIndex),s.iconBox){var se=function(n){Y(n);var r=k&&U?Gt(U.x,U.y,I,w,a.transform.angle):new e.pointGeometry(0,0),i=o.getSymbolInstanceIconSize(g,a.transform.zoom,t.placedIconSymbolIndex);return a.collisionIndex.placeCollisionBox(o,i,n,r,b,d,l,_.predicate)};M=B&&B.box&&B.box.length&&s.verticalIconBox?(H=se(s.verticalIconBox)).box.length>0:(H=se(s.iconBox)).box.length>0,P=P&&H.offscreen,L=H.occluded}var oe=T||0===t.numHorizontalGlyphVertices&&0===S,ue=E||0===t.numIconVertices;if(oe||ue?ue?oe||(M=M&&N):N=M&&N:M=N=M&&N,N&&z&&z.box&&a.collisionIndex.insertCollisionBox(z.box,u.get("text-ignore-placement"),o.bucketInstanceId,B&&B.box&&V?V:j,_.ID),M&&H&&a.collisionIndex.insertCollisionBox(H.box,u.get("icon-ignore-placement"),o.bucketInstanceId,W,_.ID),G&&(N&&a.collisionIndex.insertCollisionCircles(G.circles,u.get("text-ignore-placement"),o.bucketInstanceId,j,_.ID),r)){var le=o.bucketInstanceId,ce=a.collisionCircleArrays[le];void 0===ce&&(ce=a.collisionCircleArrays[le]=new Ut);for(var he=0;he<G.circles.length;he+=4)ce.circles.push(G.circles[he+0]),ce.circles.push(G.circles[he+1]),ce.circles.push(G.circles[he+2]),ce.circles.push(G.collisionDetected?1:0)}var pe="globe"!==o.projection.name;R=R&&(pe||!F),C=C&&(pe||!L),a.placements[m]=new Lt(N||R,M||C,P||o.justReloaded),n[m]=!0}};if(S)for(var A=o.getSortedSymbolIndexes(this.transform.angle),O=A.length-1;O>=0;--O){var N=A[O];D(o.symbolInstances.get(N),N,o.collisionArrays[N])}else for(var M=t.symbolInstanceStart;M<t.symbolInstanceEnd;M++)D(o.symbolInstances.get(M),M,o.collisionArrays[M]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){var P=this.collisionCircleArrays[o.bucketInstanceId];e.invert(P.invProjMatrix,l),P.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}},{key:"markUsedJustification",value:function(t,n,r,i){var a=r.leftJustifiedTextSymbolIndex,s=r.centerJustifiedTextSymbolIndex,o=r.rightJustifiedTextSymbolIndex,u=r.verticalPlacedTextSymbolIndex,l=r.crossTileID,c=e.getAnchorJustification(n),h=i===e.WritingMode.vertical?u:"left"===c?a:"center"===c?s:"right"===c?o:-1;a>=0&&(t.text.placedSymbolArray.get(a).crossTileID=h>=0&&a!==h?0:l),s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=h>=0&&s!==h?0:l),o>=0&&(t.text.placedSymbolArray.get(o).crossTileID=h>=0&&o!==h?0:l),u>=0&&(t.text.placedSymbolArray.get(u).crossTileID=h>=0&&u!==h?0:l)}},{key:"markUsedOrientation",value:function(t,n,r){var i=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,a=n===e.WritingMode.vertical?n:0,s=r.leftJustifiedTextSymbolIndex,o=r.centerJustifiedTextSymbolIndex,u=r.rightJustifiedTextSymbolIndex,l=r.verticalPlacedTextSymbolIndex,c=t.text.placedSymbolArray;s>=0&&(c.get(s).placedOrientation=i),o>=0&&(c.get(o).placedOrientation=i),u>=0&&(c.get(u).placedOrientation=i),l>=0&&(c.get(l).placedOrientation=a)}},{key:"commit",value:function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},a=t?t.variableOffsets:{},s=t?t.placedOrientations:{};for(var o in this.placements){var u=this.placements[o],l=i[o];l?(this.opacities[o]=new Ft(l,r,u.text,u.icon,null,u.clipped),n=n||u.text!==l.text.placed||u.icon!==l.icon.placed):(this.opacities[o]=new Ft(null,r,u.text,u.icon,u.skipFade,u.clipped),n=n||u.text||u.icon)}for(var c in i){var h=i[c];if(!this.opacities[c]){var p=new Ft(h,r,!1,!1);p.isHidden()||(this.opacities[c]=p,n=n||h.text.placed||h.icon.placed)}}for(var f in a)this.variableOffsets[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.variableOffsets[f]=a[f]);for(var d in s)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=s[d]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}},{key:"updateLayerOpacities",value:function(e,t){var n,r={},i=p(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,s=a.getBucket(e);s&&a.latestFeatureIndex&&e.id===s.layerIds[0]&&this.updateBucketOpacities(s,r,a.collisionBoxArray)}}catch(o){i.e(o)}finally{i.f()}}},{key:"updateBucketOpacities",value:function(t,n,r){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var i=t.layers[0].layout,a=!!t.layers[0].dynamicFilter(),s=new Ft(null,0,!1,!1,!0),o=i.get("text-allow-overlap"),u=i.get("icon-allow-overlap"),l=i.get("text-variable-anchor"),c="map"===i.get("text-rotation-alignment"),h="map"===i.get("text-pitch-alignment"),p="none"!==i.get("icon-text-fit"),f=new Ft(null,0,o&&(u||!t.hasIconData()||i.get("icon-optional")),u&&(o||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);for(var d=function(e,t,n){for(var r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)},v=0,m=0;m<t.symbolInstances.length;m++){var y=t.symbolInstances.get(m),g=y.numHorizontalGlyphVertices,_=y.numVerticalGlyphVertices,T=y.crossTileID,E=y.numIconVertices,x=this.opacities[T];n[T]?x=s:x||(x=f,this.opacities[T]=x),n[T]=!0;var b=g>0||_>0,I=E>0,w=this.placedOrientations[T],k=w===e.WritingMode.vertical,S=w===e.WritingMode.horizontal||w===e.WritingMode.horizontalOnly;if(!b&&!I||x.isHidden()||v++,b){var R=Jt(x.text);d(t.text,g,k?$t:R),d(t.text,_,S?$t:R);var C=x.text.isHidden(),D=y.leftJustifiedTextSymbolIndex,A=y.centerJustifiedTextSymbolIndex,O=y.rightJustifiedTextSymbolIndex,N=y.verticalPlacedTextSymbolIndex,M=t.text.placedSymbolArray,P=C||k?1:0;D>=0&&(M.get(D).hidden=P),A>=0&&(M.get(A).hidden=P),O>=0&&(M.get(O).hidden=P),N>=0&&(M.get(N).hidden=C||S?1:0);var F=this.variableOffsets[T];F&&this.markUsedJustification(t,F.anchor,y,w);var L=this.placedOrientations[T];L&&(this.markUsedJustification(t,"left",y,L),this.markUsedOrientation(t,L,y))}if(I){var U=Jt(x.icon),Z=y.placedIconSymbolIndex,B=y.verticalPlacedIconSymbolIndex,z=t.icon.placedSymbolArray,G=x.icon.isHidden()?1:0;Z>=0&&(d(t.icon,E,k?$t:U),z.get(Z).hidden=G),B>=0&&(d(t.icon,y.numVerticalIconVertices,S?$t:U),z.get(B).hidden=G)}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){var H=t.collisionArrays[m];if(H){var j=new e.pointGeometry(0,0),V=!0;if(H.textBox||H.verticalTextBox){if(l){var W=this.variableOffsets[T];W?(j=zt(W.anchor,W.width,W.height,W.textOffset,W.textScale),c&&j._rotate(h?this.transform.angle:-this.transform.angle)):V=!1}a&&(V=!x.clipped),H.textBox&&jt(t.textCollisionBox.collisionVertexArray,x.text.placed,!V||k,j.x,j.y),H.verticalTextBox&&jt(t.textCollisionBox.collisionVertexArray,x.text.placed,!V||S,j.x,j.y)}var Y=V&&Boolean(!S&&H.verticalIconBox);H.iconBox&&jt(t.iconCollisionBox.collisionVertexArray,x.icon.placed,Y,p?j.x:0,p?j.y:0),H.verticalIconBox&&jt(t.iconCollisionBox.collisionVertexArray,x.icon.placed,!Y,p?j.x:0,p?j.y:0)}}}if(t.fullyClipped=0===v,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){var q=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=q.invProjMatrix,t.placementViewportMatrix=q.viewportMatrix,t.collisionCircleArray=q.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}},{key:"symbolFadeChange",value:function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}},{key:"zoomAdjustment",value:function(e){return Math.max(0,(this.transform.zoom-e)/1.5)}},{key:"hasTransitions",value:function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}},{key:"stillRecent",value:function(e,t){var n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}},{key:"setStale",value:function(){this.stale=!0}}]),t}();function jt(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}var Vt=Math.pow(2,25),Wt=Math.pow(2,24),Yt=Math.pow(2,17),qt=Math.pow(2,16),Xt=Math.pow(2,9),Kt=Math.pow(2,8),Qt=Math.pow(2,1);function Jt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*Vt+t*Wt+n*Yt+t*qt+n*Xt+t*Kt+n*Qt+t}var $t=0,en=function(){function e(t){f(this,e),this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}return d(e,[{key:"continuePlacement",value:function(e,t,n,r,i){for(var a=this._bucketParts;this._currentTileIndex<e.length;)if(t.getBucketParts(a,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort((function(e,t){return e.sortKey-t.sortKey})));this._currentPartIndex<a.length;){var s=a[this._currentPartIndex];if(t.placeLayerBucketPart(s,this._seenCrossTileIDs,n,0===s.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}]),e}(),tn=function(){function t(e,n,r,i,a,s,o,u){f(this,t),this.placement=new Ht(e,a,s,o,u),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1}return d(t,[{key:"isDone",value:function(){return this._done}},{key:"continuePlacement",value:function(t,n,r){for(var i=this,a=e.exported.now(),s=function(){var t=e.exported.now()-a;return!i._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var o=n[t[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===o.type&&(!o.minzoom||o.minzoom<=u)&&(!o.maxzoom||o.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new en(o)),this._inProgressLayer.continuePlacement(r[o.source],this.placement,this._showCollisionBoxes,o,s))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}},{key:"commit",value:function(e){return this.placement.commit(e),this.placement}}]),t}(),nn=512/e.EXTENT/2,rn=function(){function t(e,n,r){f(this,t),this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(var i=0;i<n.length;i++){var a=n.get(i),s=a.key;this.indexedSymbolInstances[s]||(this.indexedSymbolInstances[s]=[]),this.indexedSymbolInstances[s].push({crossTileID:a.crossTileID,coord:this.getScaledCoordinates(a,e)})}}return d(t,[{key:"getScaledCoordinates",value:function(t,n){var r=nn/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*e.EXTENT+t.tileAnchorX)*r),y:Math.floor((n.canonical.y*e.EXTENT+t.tileAnchorY)*r)}}},{key:"findMatches",value:function(e,t,n){for(var r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),i=0;i<e.length;i++){var a=e.get(i);if(!a.crossTileID){var s=this.indexedSymbolInstances[a.key];if(s){var o,u=this.getScaledCoordinates(a,t),l=p(s);try{for(l.s();!(o=l.n()).done;){var c=o.value;if(Math.abs(c.coord.x-u.x)<=r&&Math.abs(c.coord.y-u.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,a.crossTileID=c.crossTileID;break}}}catch(h){l.e(h)}finally{l.f()}}}}}}]),t}(),an=function(){function e(){f(this,e),this.maxCrossTileID=0}return d(e,[{key:"generate",value:function(){return++this.maxCrossTileID}}]),e}(),sn=function(){function e(){f(this,e),this.indexes={},this.usedCrossTileIDs={},this.lng=0}return d(e,[{key:"handleWrapJump",value:function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var n in this.indexes){var r=this.indexes[n],i={};for(var a in r){var s=r[a];s.tileID=s.tileID.unwrapTo(s.tileID.wrap+t),i[s.tileID.key]=s}this.indexes[n]=i}this.lng=e}},{key:"addBucket",value:function(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var i=this.usedCrossTileIDs[e.overscaledZ];for(var a in this.indexes){var s=this.indexes[a];if(Number(a)>e.overscaledZ)for(var o in s){var u=s[o];u.tileID.isChildOf(e)&&u.findMatches(t.symbolInstances,e,i)}else{var l=s[e.scaledTo(Number(a)).key];l&&l.findMatches(t.symbolInstances,e,i)}}for(var c=0;c<t.symbolInstances.length;c++){var h=t.symbolInstances.get(c);h.crossTileID||(h.crossTileID=n.generate(),i[h.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new rn(e,t.symbolInstances,t.bucketInstanceId),!0}},{key:"removeBucketCrossTileIDs",value:function(e,t){for(var n in t.indexedSymbolInstances){var r,i=p(t.indexedSymbolInstances[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete this.usedCrossTileIDs[e][a.crossTileID]}}catch(s){i.e(s)}finally{i.f()}}}},{key:"removeStaleBuckets",value:function(e){var t=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t}}]),e}(),on=function(){function e(){f(this,e),this.layerIndexes={},this.crossTileIDs=new an,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}return d(e,[{key:"addLayer",value:function(e,t,n,r){var i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new sn);var a=!1,s={};"globe"!==r.name&&i.handleWrapJump(n);var o,u=p(t);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=l.getBucket(e);c&&e.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(l.tileID,c,this.crossTileIDs)&&(a=!0),s[c.bucketInstanceId]=!0)}}catch(h){u.e(h)}finally{u.f()}return i.removeStaleBuckets(s)&&(a=!0),a}},{key:"pruneUnusedLayers",value:function(e){var t={};for(var n in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[n]||delete this.layerIndexes[n]}}]),e}(),un=function(t,n){return e.emitValidationErrors(t,n&&n.filter((function(e){return"source.canvas"!==e.identifier})))},ln=e.pick(it,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),cn=e.pick(it,["setCenter","setZoom","setBearing","setPitch"]),hn={version:8,layers:[],sources:{}},pn={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0},fn=function(n){v(a,n);var r=m(a);function a(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,a),(n=r.call(this)).map=t,n.dispatcher=new V(tt(),i(n)),n.imageManager=new N,n.imageManager.setEventedParent(i(n)),n.glyphManager=new e.GlyphManager(t._requestManager,s.localFontFamily?e.LocalGlyphMode.all:s.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,s.localFontFamily||s.localIdeographFontFamily),n.crossTileSymbolIndex=new on,n._layers={},n._num3DLayers=0,n._numSymbolLayers=0,n._numCircleLayers=0,n._serializedLayers={},n._sourceCaches={},n._otherSourceCaches={},n._symbolSourceCaches={},n._loaded=!1,n._availableImages=[],n._order=[],n._drapedFirstOrder=[],n._markersNeedUpdate=!1,n._resetUpdates(),n.dispatcher.broadcast("setReferrer",e.getReferrer());var o=i(n);return n._rtlTextPluginCallback=a.registerForPluginStateChange((function(t){o.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(function(t,n){if(e.triggerPluginCompletionEvent(t),n&&n.every((function(e){return e})))for(var r in o._sourceCaches){var i=o._sourceCaches[r],a=i.getSource().type;"vector"!==a&&"geojson"!==a||i.reload()}}))})),n.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=n.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(var r in n._layers){var i=n._layers[r];i.source===t.id&&n._validateLayer(i)}}})),n}return d(a,[{key:"loadURL",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof r.validate?r.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,r.accessToken);var a=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(a,(function(t,r){n._request=null,t?n.fire(new e.ErrorEvent(t)):r&&n._load(r,i)}))}},{key:"loadJSON",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((function(){n._request=null,n._load(t,!1!==r.validate)}))}},{key:"loadEmpty",value:function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(hn,!1)}},{key:"_updateLayerCount",value:function(e,t){var n=t?1:-1;e.is3D()&&(this._num3DLayers+=n),"circle"===e.type&&(this._numCircleLayers+=n),"symbol"===e.type&&(this._numSymbolLayers+=n)}},{key:"_load",value:function(t,n){if(!n||!un(this,e.validateStyle(t))){for(var r in this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection(),t.sources)this.addSource(r,t.sources[r],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);var i=rt(this.stylesheet.layers);this._order=i.map((function(e){return e.id})),this._layers={},this._serializedLayers={};var a,s=p(i);try{for(s.s();!(a=s.n()).done;){var o=a.value;(o=e.createStyleLayer(o)).setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=o,this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}}catch(u){s.e(u)}finally{s.f()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new F(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}}},{key:"terrainSetForDrapingOnly",value:function(){return!!this.terrain&&0===this.terrain.drapeRenderMode}},{key:"setProjection",value:function(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection()}},{key:"applyProjectionUpdate",value:function(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}},{key:"_updateMapProjection",value:function(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}},{key:"_loadSprite",value:function(t){var n=this;this._spriteRequest=function(t,n,r){var i,a,s,o=e.exported.devicePixelRatio>1?"@2x":"",u=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,o,".json"),e.ResourceType.SpriteJSON),(function(e,t){u=null,s||(s=e,i=t,c())})),l=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,o,".png"),e.ResourceType.SpriteImage),(function(e,t){l=null,s||(s=e,a=t,c())}));function c(){if(s)r(s);else if(i&&a){var t=e.exported.getImageData(a),n={};for(var o in i){var u=i[o],l=u.width,c=u.height,h=u.x,p=u.y,f=u.sdf,d=u.pixelRatio,v=u.stretchX,m=u.stretchY,y=u.content,g=new e.RGBAImage({width:l,height:c});e.RGBAImage.copy(t,g,{x:h,y:p},{x:0,y:0},{width:l,height:c}),n[o]={data:g,pixelRatio:d,sdf:f,stretchX:v,stretchY:m,content:y}}r(null,n)}}return{cancel:function(){u&&(u.cancel(),u=null),l&&(l.cancel(),l=null)}}}(t,this.map._requestManager,(function(t,r){if(n._spriteRequest=null,t)n.fire(new e.ErrorEvent(t));else if(r)for(var i in r)n.imageManager.addImage(i,r[i]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.dispatcher.broadcast("spriteLoaded",!0),n.fire(new e.Event("data",{dataType:"style"}))}))}},{key:"_validateLayer",value:function(t){var n=this.getSource(t.source);if(n){var r=t.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error('Source layer "'.concat(r,'" does not exist on source "').concat(n.id,'" as specified by style layer "').concat(t.id,'"'))))}}},{key:"loaded",value:function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}},{key:"_serializeLayers",value:function(e){var t,n=[],r=p(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=this._layers[i];"custom"!==a.type&&n.push(a.serialize())}}catch(s){r.e(s)}finally{r.f()}return n}},{key:"hasTransitions",value:function(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(var e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}},{key:"order",get:function(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}},{key:"isLayerDraped",value:function(e){return!!this.terrain&&("function"==typeof e.isLayerDraped?e.isLayerDraped():pn[e.type])}},{key:"_checkLoaded",value:function(){if(!this._loaded)throw new Error("Style is not done loading")}},{key:"update",value:function(t){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var a in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var s=this._updatedSources[a];"reload"===s?this._reloadSource(a):"clear"===s&&this._clearSource(a)}for(var o in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[o].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}var u={};for(var l in this._sourceCaches){var c=this._sourceCaches[l];u[l]=c.used,c.used=!1}var h,f=p(this._order);try{for(f.s();!(h=f.n()).done;){var d=h.value,v=this._layers[d];if(v.recalculate(t,this._availableImages),!v.isHidden(t.zoom)){var m=this._getLayerSourceCache(v);m&&(m.used=!0)}var y=this.map.painter;if(y){var g=v.getProgramIds();if(!g)continue;var _,T=v.getProgramConfiguration(t.zoom),E=p(g);try{for(E.s();!(_=E.n()).done;){var x=_.value;y.useProgram(x,T)}}catch(w){E.e(w)}finally{E.f()}}}}catch(w){f.e(w)}finally{f.f()}for(var b in u){var I=this._sourceCaches[b];u[b]!==I.used&&I.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:I.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new e.Event("data",{dataType:"style"}))}}},{key:"_updateTilesForChangedImages",value:function(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}},{key:"_updateWorkerLayers",value:function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}},{key:"_resetUpdates",value:function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}},{key:"setState",value:function(n){var r=this;if(this._checkLoaded(),un(this,e.validateStyle(n)))return!1;(n=e.clone$1(n)).layers=rt(n.layers);var i=function(e,n){if(!e)return[{command:it.setStyle,args:[n]}];var r=[];try{if(!t(e.version,n.version))return[{command:it.setStyle,args:[n]}];t(e.center,n.center)||r.push({command:it.setCenter,args:[n.center]}),t(e.zoom,n.zoom)||r.push({command:it.setZoom,args:[n.zoom]}),t(e.bearing,n.bearing)||r.push({command:it.setBearing,args:[n.bearing]}),t(e.pitch,n.pitch)||r.push({command:it.setPitch,args:[n.pitch]}),t(e.sprite,n.sprite)||r.push({command:it.setSprite,args:[n.sprite]}),t(e.glyphs,n.glyphs)||r.push({command:it.setGlyphs,args:[n.glyphs]}),t(e.transition,n.transition)||r.push({command:it.setTransition,args:[n.transition]}),t(e.light,n.light)||r.push({command:it.setLight,args:[n.light]}),t(e.fog,n.fog)||r.push({command:it.setFog,args:[n.fog]}),t(e.projection,n.projection)||r.push({command:it.setProjection,args:[n.projection]});var i={},a=[];!function(e,n,r,i){var a;for(a in n=n||{},e=e||{})e.hasOwnProperty(a)&&(n.hasOwnProperty(a)||st(a,r,i));for(a in n)n.hasOwnProperty(a)&&(e.hasOwnProperty(a)?t(e[a],n[a])||("geojson"===e[a].type&&"geojson"===n[a].type&&ut(e,n,a)?r.push({command:it.setGeoJSONSourceData,args:[a,n[a].data]}):ot(a,n,r,i)):at(a,n,r))}(e.sources,n.sources,a,i);var s=[];e.layers&&e.layers.forEach((function(e){e.source&&i[e.source]?r.push({command:it.removeLayer,args:[e.id]}):s.push(e)}));var o=e.terrain;o&&i[o.source]&&(r.push({command:it.setTerrain,args:[void 0]}),o=void 0),r=r.concat(a),t(o,n.terrain)||r.push({command:it.setTerrain,args:[n.terrain]}),function(e,n,r){n=n||[];var i,a,s,o,u,l,c,h=(e=e||[]).map(ct),p=n.map(ct),f=e.reduce(ht,{}),d=n.reduce(ht,{}),v=h.slice(),m=Object.create(null);for(i=0,a=0;i<h.length;i++)s=h[i],d.hasOwnProperty(s)?a++:(r.push({command:it.removeLayer,args:[s]}),v.splice(v.indexOf(s,a),1));for(i=0,a=0;i<p.length;i++)s=p[p.length-1-i],v[v.length-1-i]!==s&&(f.hasOwnProperty(s)?(r.push({command:it.removeLayer,args:[s]}),v.splice(v.lastIndexOf(s,v.length-a),1)):a++,l=v[v.length-i],r.push({command:it.addLayer,args:[d[s],l]}),v.splice(v.length-i,0,s),m[s]=!0);for(i=0;i<p.length;i++)if(o=f[s=p[i]],u=d[s],!m[s]&&!t(o,u))if(t(o.source,u.source)&&t(o["source-layer"],u["source-layer"])&&t(o.type,u.type)){for(c in lt(o.layout,u.layout,r,s,null,it.setLayoutProperty),lt(o.paint,u.paint,r,s,null,it.setPaintProperty),t(o.filter,u.filter)||r.push({command:it.setFilter,args:[s,u.filter]}),t(o.minzoom,u.minzoom)&&t(o.maxzoom,u.maxzoom)||r.push({command:it.setLayerZoomRange,args:[s,u.minzoom,u.maxzoom]}),o)o.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?lt(o[c],u[c],r,s,c.slice(6),it.setPaintProperty):t(o[c],u[c])||r.push({command:it.setLayerProperty,args:[s,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?lt(o[c],u[c],r,s,c.slice(6),it.setPaintProperty):t(o[c],u[c])||r.push({command:it.setLayerProperty,args:[s,c,u[c]]}))}else r.push({command:it.removeLayer,args:[s]}),l=v[v.lastIndexOf(s)+1],r.push({command:it.addLayer,args:[u,l]})}(s,n.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:it.setStyle,args:[n]}]}return r}(this.serialize(),n).filter((function(e){return!(e.command in cn)}));if(0===i.length)return!1;var a=i.filter((function(e){return!(e.command in ln)}));if(a.length>0)throw new Error("Unimplemented: ".concat(a.map((function(e){return e.command})).join(", "),"."));return i.forEach((function(e){"setTransition"!==e.command&&"setProjection"!==e.command&&r[e.command].apply(r,e.args)})),this.stylesheet=n,this._updateMapProjection(),!0}},{key:"addImage",value:function(t,n){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,n),this._afterImageUpdated(t),this)}},{key:"updateImage",value:function(e,t){this.imageManager.updateImage(e,t)}},{key:"getImage",value:function(e){return this.imageManager.getImage(e)}},{key:"removeImage",value:function(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}},{key:"_afterImageUpdated",value:function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}},{key:"listImages",value:function(){return this._checkLoaded(),this._availableImages.slice()}},{key:"addSource",value:function(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(n).join(", "),"."));if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateSource,"sources.".concat(t),n,null,i))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var a=We(t,n,this.dispatcher,this);a.setEventedParent(this,(function(){return{isSourceLoaded:r._isSourceCacheLoaded(t),source:a.serialize(),sourceId:t}}));var s=function(n){var i=(n?"symbol:":"other:")+t,s=r._sourceCaches[i]=new e.SourceCache(i,a,n);(n?r._symbolSourceCaches:r._otherSourceCaches)[t]=s,s.style=r,s.onAdd(r.map)};s(!1),"vector"!==n.type&&"geojson"!==n.type||s(!0),a.onAdd&&a.onAdd(this.map),this._changed=!0}}},{key:"removeSource",value:function(t){this._checkLoaded();var n=this.getSource(t);if(!n)throw new Error("There is no source with this ID");for(var r in this._layers)if(this._layers[r].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while layer "').concat(r,'" is using it.'))));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while terrain is using it.'))));var i,a=this._getSourceCaches(t),s=p(a);try{for(s.s();!(i=s.n()).done;){var o=i.value;delete this._sourceCaches[o.id],delete this._updatedSources[o.id],o.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o.getSource().id})),o.setEventedParent(null),o.clearTiles()}}catch(u){s.e(u)}finally{s.f()}return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}},{key:"setGeoJSONSourceData",value:function(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}},{key:"getSource",value:function(e){var t=this._getSourceCache(e);return t&&t.getSource()}},{key:"_getSources",value:function(){var e=[];for(var t in this._otherSourceCaches){var n=this._getSourceCache(t);n&&e.push(n.getSource())}return e}},{key:"addLayer",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var i=t.id;if(this.getLayer(i))this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(i,'" already exists on this map'))));else{var a;if("custom"===t.type){if(un(this,e.validateCustomStyleLayer(t)))return;a=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateLayer,"layers.".concat(i),t,{arrayIndex:-1},r))return;a=e.createStyleLayer(t),this._validateLayer(a),a.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[a.id]=a.serialize(),this._updateLayerCount(a,!0)}var s=n?this._order.indexOf(n):this._order.length;if(n&&-1===s)this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.'))));else{this._order.splice(s,0,i),this._layerOrderChanged=!0,this._layers[i]=a;var o=this._getLayerSourceCache(a);if(this._removedLayers[i]&&a.source&&o&&"custom"!==a.type){var u=this._removedLayers[i];delete this._removedLayers[i],u.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",o.pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map),this._updateDrapeFirstLayers()}}}},{key:"moveLayer",value:function(t,n){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==n){var r=this._order.indexOf(t);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.')))):(this._order.splice(i,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be moved."))))}},{key:"removeLayer",value:function(t){this._checkLoaded();var n=this._layers[t];if(n){n.setEventedParent(null),this._updateLayerCount(n,!1);var r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be removed."))))}},{key:"getLayer",value:function(e){return this._layers[e]}},{key:"hasLayer",value:function(e){return e in this._layers}},{key:"hasLayerType",value:function(e){for(var t in this._layers)if(this._layers[t].type===e)return!0;return!1}},{key:"setLayerZoomRange",value:function(t,n,r){this._checkLoaded();var i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot have zoom extent."))))}},{key:"setFilter",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var a=this.getLayer(n);if(a){if(!t(a.filter,r))return null==r?(a.filter=void 0,void this._updateLayer(a)):void(this._validate(e.validateFilter,"layers.".concat(a.id,".filter"),r,{layerType:a.type},i)||(a.filter=e.clone$1(r),this._updateLayer(a)))}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be filtered."))))}},{key:"getFilter",value:function(t){var n=this.getLayer(t);return n&&e.clone$1(n.filter)}},{key:"setLayoutProperty",value:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var s=this.getLayer(n);s?t(s.getLayoutProperty(r),i)||(s.setLayoutProperty(r,i,a),this._updateLayer(s)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}},{key:"getLayoutProperty",value:function(t,n){var r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style."))))}},{key:"setPaintProperty",value:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var s=this.getLayer(n);s?t(s.getPaintProperty(r),i)||(s.setPaintProperty(r,i,a)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new e.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}},{key:"getPaintProperty",value:function(e,t){var n=this.getLayer(e);return n&&n.getPaintProperty(t)}},{key:"setFeatureState",value:function(t,n){this._checkLoaded();var r=t.source,i=t.sourceLayer,a=this.getSource(r);if(a){var s=a.type;if("geojson"===s&&i)this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));else if("vector"!==s||i){void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));var o,u=this._getSourceCaches(r),l=p(u);try{for(l.s();!(o=l.n()).done;)o.value.setFeatureState(i,t.id,n)}catch(c){l.e(c)}finally{l.f()}}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"removeFeatureState",value:function(t,n){this._checkLoaded();var r=t.source,i=this.getSource(r);if(i){var a=i.type,s="vector"===a?t.sourceLayer:void 0;if("vector"!==a||s)if(n&&"string"!=typeof t.id&&"number"!=typeof t.id)this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));else{var o,u=this._getSourceCaches(r),l=p(u);try{for(l.s();!(o=l.n()).done;)o.value.removeFeatureState(s,t.id,n)}catch(c){l.e(c)}finally{l.f()}}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"getFeatureState",value:function(t){this._checkLoaded();var n=t.source,r=t.sourceLayer,i=this.getSource(n);if(i){if("vector"!==i.type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"getTransition",value:function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}},{key:"serialize",value:function(){var t={};for(var n in this._sourceCaches){var r=this._sourceCaches[n].getSource();t[r.id]||(t[r.id]=r.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))}},{key:"_updateLayer",value:function(e){this._updatedLayers[e.id]=!0;var t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}},{key:"_flattenAndSortRenderedFeatures",value:function(e){for(var t=this,n=function(e){return"fill-extrusion"===t._layers[e].type},r={},i=[],a=this._order.length-1;a>=0;a--){var s=this._order[a];if(n(s)){r[s]=a;var o,u=p(e);try{for(u.s();!(o=u.n()).done;){var l=o.value[s];if(l){var c,h=p(l);try{for(h.s();!(c=h.n()).done;){var f=c.value;i.push(f)}}catch(w){h.e(w)}finally{h.f()}}}}catch(w){u.e(w)}finally{u.f()}}}i.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var d=[],v=this._order.length-1;v>=0;v--){var m=this._order[v];if(n(m))for(var y=i.length-1;y>=0;y--){var g=i[y].feature;if(r[g.layer.id]<v)break;d.push(g),i.pop()}else{var _,T=p(e);try{for(T.s();!(_=T.n()).done;){var E=_.value[m];if(E){var x,b=p(E);try{for(b.s();!(x=b.n()).done;){var I=x.value;d.push(I.feature)}}catch(w){b.e(w)}finally{b.f()}}}}catch(w){T.e(w)}finally{T.f()}}}return d}},{key:"queryRenderedFeatures",value:function(t,n,r){var i=this;n&&n.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);var a={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];var s,o=p(n.layers);try{for(o.s();!(s=o.n()).done;){var u=s.value,l=this._layers[u];if(!l)return this.fire(new e.ErrorEvent(new Error("The layer '".concat(u,"' does not exist in the map's style and cannot be queried for features.")))),[];a[l.source]=!0}}catch(m){o.e(m)}finally{o.f()}}var c=[];n.availableImages=this._availableImages;var h=n&&n.layers?n.layers.some((function(e){var t=i.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),f=Y.createFromScreenPoints(t,r);for(var d in this._sourceCaches){var v=this._sourceCaches[d].getSource().id;n.layers&&!a[v]||c.push(qe(this._sourceCaches[d],this._layers,this._serializedLayers,f,n,r,h,!!this.map._showQueryGeometry))}return this.placement&&c.push(function(e,t,n,r,i,a,s){var o,u={},l=a.queryRenderedSymbols(r),c=[],h=p(Object.keys(l).map(Number));try{for(h.s();!(o=h.n()).done;){var f=o.value;c.push(s[f])}}catch(m){h.e(m)}finally{h.f()}c.sort(Ke);for(var d=function(){var n=y[v],r=n.featureIndex.lookupSymbolFeatures(l[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(var a in r){var s=u[a]=u[a]||[],o=r[a];o.sort((function(e,t){var r=n.featureSortOrder;if(r){var i=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex}));var c,h=p(o);try{for(h.s();!(c=h.n()).done;){var f=c.value;s.push(f)}}catch(m){h.e(m)}finally{h.f()}}},v=0,y=c;v<y.length;v++)d();var g=function(t){u[t].forEach((function(r){var i=r.feature,a=n(e[t]).getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a}))};for(var _ in u)g(_);return u}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),f.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)}},{key:"querySourceFeatures",value:function(t,n){n&&n.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",n.filter,null,n);var r,i=this._getSourceCaches(t),a=[],s=p(i);try{for(s.s();!(r=s.n()).done;){var o=r.value;a=a.concat(Xe(o,n))}}catch(u){s.e(u)}finally{s.f()}return a}},{key:"addSourceType",value:function(e,t,n){return a.getSourceType(e)?n(new Error('A source type called "'.concat(e,'" already exists.'))):(a.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))}},{key:"getLight",value:function(){return this.light.getLight()}},{key:"setLight",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();var r=this.light.getLight(),i=!1;for(var a in e)if(!t(e[a],r[a])){i=!0;break}if(i){var s=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,n),this.light.updateTransitions(s)}}},{key:"getTerrain",value:function(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}},{key:"setTerrainForDraping",value:function(){this.setTerrain({source:"",exaggeration:0},0)}},{key:"setTerrain",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===r){if("object"==typeof n.source){var i="terrain-dem-src";this.addSource(i,n.source),n=e.clone$1(n),n=e.extend(n,{source:i})}if(this._validate(e.validateTerrain,"terrain",n))return}if(!this.terrain||this.terrain&&r!==this.terrain.drapeRenderMode)this._createTerrain(n,r);else{for(var a=this.terrain,s=a.get(),o=0,u=Object.keys(e.spec.terrain);o<u.length;o++){var l=u[o];!n.hasOwnProperty(l)&&e.spec.terrain[l].default&&(n[l]=e.spec.terrain[l].default)}for(var c in n)if(!t(n[c],s[c])){a.set(n),this.stylesheet.terrain=n;var h=this._setTransitionParameters({duration:0});a.updateTransitions(h);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}},{key:"_createFog",value:function(e){var t=this.fog=new j(e,this.map.transform);this.stylesheet.fog=e;var n=this._setTransitionParameters({duration:0});t.updateTransitions(n)}},{key:"_updateMarkersOpacity",value:function(){var e=this;0!==this.map._markers.length&&this.map._requestDomTask((function(){var t,n=p(e.map._markers);try{for(n.s();!(t=n.n()).done;)t.value._evaluateOpacity()}catch(r){n.e(r)}finally{n.f()}}))}},{key:"getFog",value:function(){return this.fog?this.fog.get():null}},{key:"setFog",value:function(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){var n=this.fog,r=n.get();for(var i in 0===Object.keys(e).length&&n.set(e),e)if(!t(e[i],r[i])){n.set(e),this.stylesheet.fog=e;var a=this._setTransitionParameters({duration:0});n.updateTransitions(a);break}}else this._createFog(e);this._markersNeedUpdate=!0}},{key:"_setTransitionParameters",value:function(t){return{now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}},{key:"_updateDrapeFirstLayers",value:function(){var e,t,n=this;if(this.map._optimizeForTerrain&&this.terrain){var r=this._order.filter((function(e){return n.isLayerDraped(n._layers[e])})),i=this._order.filter((function(e){return!n.isLayerDraped(n._layers[e])}));this._drapedFirstOrder=[],(e=this._drapedFirstOrder).push.apply(e,c(r)),(t=this._drapedFirstOrder).push.apply(t,c(i))}}},{key:"_createTerrain",value:function(e,t){var n=this.terrain=new Z(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();var r=this._setTransitionParameters({duration:0});n.updateTransitions(r)}},{key:"_force3DLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}},{key:"_forceSymbolLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}},{key:"_validate",value:function(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!a||!1!==a.validate)&&un(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.spec},i)))}},{key:"_remove",value:function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var n in this._sourceCaches)this._sourceCaches[n].clearTiles(),this._sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}},{key:"_clearSource",value:function(e){var t,n=this._getSourceCaches(e),r=p(n);try{for(r.s();!(t=r.n()).done;)t.value.clearTiles()}catch(i){r.e(i)}finally{r.f()}}},{key:"_reloadSource",value:function(e){var t,n=this._getSourceCaches(e),r=p(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.resume(),i.reload()}}catch(a){r.e(a)}finally{r.f()}}},{key:"_reloadSources",value:function(){var e,t=p(this._getSources());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.reload&&n.reload()}}catch(r){t.e(r)}finally{t.f()}}},{key:"_updateSources",value:function(e){for(var t in this._sourceCaches)this._sourceCaches[t].update(e)}},{key:"_generateCollisionBoxes",value:function(){for(var e in this._sourceCaches){var t=this._sourceCaches[e];t.resume(),t.reload()}}},{key:"_updatePlacement",value:function(t,n,r,i){var a,s=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=!1,l=!1,c={},h=p(this._order);try{var f=function(){var e=a.value,n=s._layers[e];if("symbol"!==n.type)return"continue";if(!c[n.source]){var r=s._getLayerSourceCache(n);if(!r)return"continue";c[n.source]=r.getRenderableIds(!0).map((function(e){return r.getTileByID(e)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}var i=s.crossTileSymbolIndex.addLayer(n,c[n.source],t.center.lng,t.projection);u=u||i};for(h.s();!(a=h.n()).done;)f()}catch(g){h.e(g)}finally{h.f()}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new tn(t,this._order,o,n,r,i,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),l=!0),u&&this.pauseablePlacement.placement.setStale()),l||u){var d,v=p(this._order);try{for(v.s();!(d=v.n()).done;){var m=d.value,y=this._layers[m];"symbol"===y.type&&this.placement.updateLayerOpacities(y,c[y.source])}}catch(g){v.e(g)}finally{v.f()}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}},{key:"_releaseSymbolFadeTiles",value:function(){for(var e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}},{key:"getImages",value:function(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();var r=function(e){e&&e.setDependencies(t.tileID.key,t.type,t.icons)};r(this._otherSourceCaches[t.source]),r(this._symbolSourceCaches[t.source])}},{key:"getGlyphs",value:function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}},{key:"getResource",value:function(t,n,r){return e.makeRequest(n,r)}},{key:"_getSourceCache",value:function(e){return this._otherSourceCaches[e]}},{key:"_getLayerSourceCache",value:function(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}},{key:"_getSourceCaches",value:function(e){var t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}},{key:"_isSourceCacheLoaded",value:function(t){var n=this._getSourceCaches(t);return 0===n.length?(this.fire(new e.ErrorEvent(new Error("There is no source with ID '".concat(t,"'")))),!1):n.every((function(e){return e.loaded()}))}},{key:"has3DLayers",value:function(){return this._num3DLayers>0}},{key:"hasSymbolLayers",value:function(){return this._numSymbolLayers>0}},{key:"hasCircleLayers",value:function(){return this._numCircleLayers>0}},{key:"_clearWorkerCaches",value:function(){this.dispatcher.broadcast("clearCaches")}},{key:"destroy",value:function(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}]),a}(e.Evented);fn.getSourceType=function(e){return Ve[e]},fn.setSourceType=function(e,t){Ve[e]=t},fn.registerForPluginStateChange=e.registerForPluginStateChange;var dn="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",vn="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",mn="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",yn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",gn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif",_n={},Tn={},En=[];kn(dn,En),kn(mn,En),kn(yn,En),kn(gn,En),_n=Sn("",mn),Tn=Sn(gn,yn);var xn=Sn("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),bn=dn,In="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",wn={background:Sn("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Sn("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Sn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Sn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Sn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Sn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Sn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Sn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Sn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:Sn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Sn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Sn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Sn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Sn("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Sn("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Sn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Sn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Sn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Sn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Sn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Sn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Sn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Sn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Sn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:Sn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Sn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",vn),skyboxGradient:Sn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",vn),skyboxCapture:Sn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Sn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:Sn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function kn(e,t){var n,r=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n"),i=p(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;if("#"===(a=a.trim())[0]&&a.includes("if")&&!a.includes("endif")){var s,o=(a=a.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim()).split(" "),u=p(o);try{for(u.s();!(s=u.n()).done;){var l=s.value;t.includes(l)||t.push(l)}}catch(c){u.e(c)}finally{u.f()}}}}catch(c){i.e(c)}finally{i.f()}}function Sn(e,t){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},a=[].concat(En);return kn(e,a),kn(t,a),{fragmentSource:e=e.replace(n,(function(e,t,n,r,a){return i[a]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\nvarying ").concat(n," ").concat(r," ").concat(a,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(a,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(a,"\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n")})),vertexSource:t=t.replace(n,(function(e,t,n,r,a){var s="float"===r?"vec2":"vec4",o=a.match(/color/)?"color":s;return i[a]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\nuniform lowp float u_").concat(a,"_t;\nattribute ").concat(n," ").concat(s," a_").concat(a,";\nvarying ").concat(n," ").concat(r," ").concat(a,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(a,";\n#endif\n"):"vec4"===o?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(a," = a_").concat(a,";\n#else\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(a," = unpack_mix_").concat(o,"(a_").concat(a,", u_").concat(a,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n"):"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\nuniform lowp float u_").concat(a,"_t;\nattribute ").concat(n," ").concat(s," a_").concat(a,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(a,";\n#endif\n"):"vec4"===o?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(n," ").concat(r," ").concat(a," = a_").concat(a,";\n#else\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(n," ").concat(r," ").concat(a," = unpack_mix_").concat(o,"(a_").concat(a,", u_").concat(a,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n")})),staticAttributes:r,usedDefines:a}}var Rn=function(){function e(){f(this,e),this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}return d(e,[{key:"bind",value:function(e,t,n,r,i,a,s){this.context=e;for(var o=this.boundPaintVertexBuffers.length!==r.length,u=0;!o&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(o=!0);for(var l=this.boundDynamicVertexBuffers.length!==s.length,c=0;!l&&c<s.length;c++)this.boundDynamicVertexBuffers[c]!==s[c]&&(l=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||o||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==a)this.freshBind(t,n,r,i,a,s);else{e.bindVertexArrayOES.set(this.vao);var h,f=p(s);try{for(f.s();!(h=f.n()).done;){var d=h.value;d&&d.bind()}}catch(v){f.e(v)}finally{f.f()}i&&i.dynamicDraw&&i.bind()}}},{key:"freshBind",value:function(e,t,n,r,i,a){var s,o=e.numAttributes,u=this.context,l=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=a;else{s=u.currentNumAttributes||0;for(var c=o;c<s;c++)l.disableVertexAttribArray(c)}t.enableAttributes(l,e),t.bind(),t.setVertexAttribPointers(l,e,i);var h,f=p(n);try{for(f.s();!(h=f.n()).done;){var d=h.value;d.enableAttributes(l,e),d.bind(),d.setVertexAttribPointers(l,e,i)}}catch(g){f.e(g)}finally{f.f()}var v,m=p(a);try{for(m.s();!(v=m.n()).done;){var y=v.value;y&&(y.enableAttributes(l,e),y.bind(),y.setVertexAttribPointers(l,e,i))}}catch(g){m.e(g)}finally{m.f()}r&&r.bind(),u.currentNumAttributes=o}},{key:"destroy",value:function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}]),e}();function Cn(t,n){var r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new e.MercatorCoordinate(0,i/r).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function Dn(t,n,r,i,a,s,o){var u=t.context,l=u.gl,c=r.fbo;if(c){t.prepareDrawTile();var h=t.useProgram("hillshade");u.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get());var p=function(e,t,n,r){var i=n.paint.get("hillshade-shadow-color"),a=n.paint.get("hillshade-highlight-color"),s=n.paint.get("hillshade-accent-color"),o=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(o-=e.transform.angle);var u=!e.options.moving;return{u_matrix:r||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),u),u_image:0,u_latrange:Cn(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),o],u_shadow:i,u_highlight:a,u_accent:s}}(t,r,i,t.terrain?n.projMatrix:null);t.prepareDrawProgram(u,h,n.toUnwrapped());var f=t.getTileBoundsBuffers(r),d=f.tileBoundsBuffer,v=f.tileBoundsIndexBuffer,m=f.tileBoundsSegments;h.draw(u,l.TRIANGLES,a,s,o,e.CullFaceMode.disabled,p,i.id,d,v,m)}}function An(t,n,r){if(n.needsDEMTextureUpload){var i=t.context,a=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(r.stride);var s=r.getPixels();n.demTexture?n.demTexture.update(s,{premultiply:!1}):n.demTexture=new e.Texture(i,s,a.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}}function On(t,n,r,i,a,s){var o=t.context,u=o.gl;if(n.dem){var l=n.dem;if(o.activeTexture.set(u.TEXTURE1),An(t,n,l),n.demTexture){n.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);var c=l.dim;o.activeTexture.set(u.TEXTURE0);var h=n.fbo;if(!h){var p=new e.Texture(o,{width:c,height:c,data:null},u.RGBA);p.bind(u.LINEAR,u.CLAMP_TO_EDGE),(h=n.fbo=o.createFramebuffer(c,c,!0)).colorAttachment.set(p.texture)}o.bindFramebuffer.set(h.framebuffer),o.viewport.set([0,0,c,c]);var f=t.getMercatorTileBoundsBuffers(),d=f.tileBoundsBuffer,v=f.tileBoundsIndexBuffer,m=f.tileBoundsSegments;t.useProgram("hillshadePrepare").draw(o,u.TRIANGLES,i,a,s,e.CullFaceMode.disabled,function(t,n){var r=n.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:n.unpackVector}}(n.tileID,l),r.id,d,v,m),n.needsHillshadePrepare=!1}}}var Nn=function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}},Mn=function(e,t){return{u_matrix:e,u_image0:0,u_skirt_height:t}},Pn=function(e,t,n,r,i,a,s,o,u,l,c,h,p,f,d){return{u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(r),u_merc_matrix:n,u_zoom_transition:i,u_merc_center:a,u_image0:0,u_frustum_tl:s,u_frustum_tr:o,u_frustum_br:u,u_frustum_bl:l,u_globe_pos:c,u_globe_radius:h,u_viewport:p,u_grid_matrix:d?Float32Array.from(d):new Float32Array(9),u_skirt_height:f}};function Fn(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}var Ln=new(function(){function e(){f(this,e),this.operations={}}return d(e,[{key:"newMorphing",value:function(e,t,n,r,i){if(e in this.operations){var a=this.operations[e];a.to.tileID.key!==n.tileID.key&&(a.queued=n)}else this.operations[e]={startTime:r,phase:0,duration:i,from:t,to:n,queued:null}}},{key:"getMorphValuesForProxy",value:function(e){if(!(e in this.operations))return null;var t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}},{key:"update",value:function(e){for(var t in this.operations){var n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}},{key:"_nextOp",value:function(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}},{key:"_validOp",value:function(e){return e.from.hasData()&&e.to.hasData()}}]),e}()),Un={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Zn(e){return 6*Math.pow(1.5,22-e)}function Bn(e,t){var n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}var zn=function(e){return{u_matrix:e}};function Gn(t,n,r,i,a){if(a>0){var s=e.exported.now(),o=(s-t.timeAdded)/a,u=n?(s-n.timeAdded)/a:-1,l=r.getSource(),c=i.coveringZoomLevel({tileSize:l.tileSize,roundZoom:l.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),p=h&&t.refreshedUponExpiration?1:e.clamp(h?o:1-u,0,1);return t.refreshedUponExpiration&&o>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}var Hn=function(e){v(n,e);var t=m(n);function n(e){var r;f(this,n);var a={type:"raster-dem",maxzoom:e.transform.maxZoom},s=new V(tt(),null),o=We("mock-dem",a,s,e.style);return r=t.call(this,"mock-dem",o,!1),o.setEventedParent(i(r)),r._sourceLoaded=!0,r}return d(n,[{key:"_loadTile",value:function(e,t){e.state="loaded",t(null)}}]),n}(e.SourceCache),jn=function(t){v(r,t);var n=m(r);function r(e){var t;f(this,r);var a=We("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new V(tt(),null),e.style);return t=n.call(this,"proxy",a,!1),a.setEventedParent(i(t)),t.map=t.getSource().map=e,t.used=t._sourceLoaded=!0,t.renderCache=[],t.renderCachePool=[],t.proxyCachedFBO={},t}return d(r,[{key:"update",value:function(t,n,r){var i=this;if(!t.freezeTileCoverage){this.transform=t;var a=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((function(n,r){if(n[r.key]="",!i._tiles[r.key]){var a=new e.Tile(r,i._source.tileSize*r.overscaleFactor(),t.tileZoom);a.state="loaded",i._tiles[r.key]=a}return n}),{});for(var s in this._tiles)s in a||(this.freeFBO(s),this._tiles[s].unloadVectorData(),delete this._tiles[s])}}},{key:"freeFBO",value:function(e){var t=this.proxyCachedFBO[e];if(void 0!==t){var n,r=Object.values(t);(n=this.renderCachePool).push.apply(n,r),delete this.proxyCachedFBO[e]}}},{key:"deallocRenderCache",value:function(){this.renderCache.forEach((function(e){return e.fb.destroy()})),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}]),r}(e.SourceCache),Vn=function(e){v(n,e);var t=m(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)).proxyTileKey=r,a.projMatrix=i,a}return d(n)}(e.OverscaledTileID),Wn=function(t){v(r,t);var n=m(r);function r(t,i){var a;f(this,r),(a=n.call(this)).painter=t,a.terrainTileForTile={},a.prevTerrainTileForTile={};var s=function(t){var n=new e.StructArrayLayout2i4,r=new e.StructArrayLayout3ui6,i=131;n.reserve(17161),r.reserve(33800);for(var a=e.EXTENT/128,s=e.EXTENT+a/2,o=s+a,u=-a;u<o;u+=a)for(var l=-a;l<o;l+=a){var c=l<0||l>s||u<0||u>s?24575:0,h=e.clamp(Math.round(l),0,e.EXTENT),p=e.clamp(Math.round(u),0,e.EXTENT);n.emplaceBack(h+c,p)}for(var f=function(e,t){var n=t*i+e;r.emplaceBack(n+1,n,n+i),r.emplaceBack(n+i,n+i+1,n+1)},d=1;d<129;d++)for(var v=1;v<129;v++)f(v,d);return[0,129].forEach((function(e){for(var t=0;t<130;t++)f(t,e),f(e,t)})),[n,r,32768]}(),o=h(s,3),u=o[0],l=o[1],c=o[2],p=t.context;a.gridBuffer=p.createVertexBuffer(u,e.posAttributes.members),a.gridIndexBuffer=p.createIndexBuffer(l),a.gridSegments=e.SegmentVector.simpleSegment(0,0,u.length,l.length),a.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,u.length,c),a.proxyCoords=[],a.proxiedCoords={},a._visibleDemTiles=[],a._drapedRenderBatches=[],a._sourceTilesOverlap={},a.proxySourceCache=new jn(i.map),a.orthoMatrix=e.create(),e.ortho(a.orthoMatrix,"globe"===a.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);var d=p.gl;return a._overlapStencilMode=new e.StencilMode({func:d.GEQUAL,mask:255},0,255,d.KEEP,d.KEEP,d.REPLACE),a._previousZoom=t.transform.zoom,a.pool=[],a._findCoveringTileCache={},a._tilesDirty={},a.style=i,a._useVertexMorphing=!0,a._exaggeration=1,a._mockSourceCache=new Hn(i.map),a}return d(r,[{key:"style",set:function(e){var t=this;e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(function(){t._clearLineLayersFromRenderCache()}))}},{key:"update",value:function(t,n,r){var i=this;if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;var a=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(a.get("source")),this._exaggeration=a.get("exaggeration");var s=function(){i.sourceCache.used&&e.warnOnce("Raster DEM source '".concat(i.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));var t=i.getScaledDemTileSize();i.sourceCache.update(n,t,!0),i.resetTileLookupCache(i.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,s(),this._initializing=!0),s(),n.updateElevation(!0,r),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}},{key:"resetTileLookupCache",value:function(e){this._findCoveringTileCache[e]={}}},{key:"getScaledDemTileSize",value:function(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}},{key:"_checkRenderCacheEfficiency",value:function(){var t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce("Terrain render cache efficiency is not optimal (".concat(t.efficiency,"%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '").concat(t.firstUndrapedLayer,"' or create a map using optimizeForTerrain: true option."))}},{key:"_onStyleDataEvent",value:function(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}},{key:"_disable",value:function(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(var e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}},{key:"destroy",value:function(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((function(e){return e.fb.destroy()})),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}},{key:"_source",value:function(){return this.enabled?this.sourceCache:null}},{key:"isUsingMockSource",value:function(){return this.sourceCache===this._mockSourceCache}},{key:"exaggeration",value:function(){return this._exaggeration}},{key:"visibleDemTiles",get:function(){return this._visibleDemTiles}},{key:"drapeBufferSize",get:function(){var e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}},{key:"useVertexMorphing",set:function(e){this._useVertexMorphing=e}},{key:"updateTileBinding",value:function(t){var n=this;if(this.enabled){this.prevTerrainTileForTile=this.terrainTileForTile;var r=this.proxySourceCache,i=this.painter.transform;this._initializing&&(this._initializing=0===i._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(i.center),-1),this._emptyDEMTextureDirty=!this._initializing);var a=this.proxyCoords=r.getIds().map((function(e){var t=r.getTileByID(e).tileID;return t.projMatrix=i.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,n){var r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new e.pointGeometry(r.x,r.y);t.sort((function(t,n){if(n.overscaledZ-t.overscaledZ)return n.overscaledZ-t.overscaledZ;var r=new e.pointGeometry(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),a=new e.pointGeometry(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),s=i.mult(1<<t.canonical.z);return s.x-=.5,s.y-=.5,s.distSqr(r)-s.distSqr(a)}))}(a,this.painter),this._previousZoom=i.zoom;var s=this.proxyToSource||{};this.proxyToSource={},a.forEach((function(e){n.proxyToSource[e.key]={}})),this.terrainTileForTile={};var o=this._style._sourceCaches;for(var u in o){var l=o[u];if(l.used&&(l!==this.sourceCache&&this.resetTileLookupCache(l.id),this._setupProxiedCoordsForOrtho(l,t[u],s),!l.usedForTerrain)){var c=t[u];l.getSource().reparseOverscaled&&this._assignTerrainTiles(c)}}this.proxiedCoords[r.id]=a.map((function(e){return new Vn(e,e.key,n.orthoMatrix)})),this._assignTerrainTiles(a),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(s),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();var h={};this._visibleDemTiles=[];var f,d=p(this.proxyCoords);try{for(d.s();!(f=d.n()).done;){var v=f.value,m=this.terrainTileForTile[v.key];if(m){var y=m.tileID.key;y in h||(this._visibleDemTiles.push(m),h[y]=y)}}}catch(g){d.e(g)}finally{d.f()}}}},{key:"_assignTerrainTiles",value:function(e){var t=this;this._initializing||e.forEach((function(e){if(!t.terrainTileForTile[e.key]){var n=t._findTileCoveringTileID(e,t.sourceCache);n&&(t.terrainTileForTile[e.key]=n)}}))}},{key:"_prepareDEMTextures",value:function(){var e=this.painter.context,t=e.gl;for(var n in this.terrainTileForTile){var r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),An(this.painter,r,i))}}},{key:"_prepareDemTileUniforms",value:function(e,t,n,r){if(!t||null==t.demTexture)return!1;var i=e.tileID.canonical,a=Math.pow(2,t.tileID.canonical.z-i.z),s=r||"";return n["u_dem_tl".concat(s)]=[i.x*a%1,i.y*a%1],n["u_dem_scale".concat(s)]=a,!0}},{key:"emptyDEMTexture",get:function(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}},{key:"emptyDepthBufferTexture",get:function(){var t=this.painter.context,n=t.gl;if(!this._emptyDepthBufferTexture){var r=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,r,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}},{key:"_getLoadedAreaMinimum",value:function(){var e=0,t=this._visibleDemTiles.reduce((function(t,n){if(!n.dem)return t;var r=n.dem.tree.minimums[0];return r>0&&e++,t+r}),0);return e?t/e:0}},{key:"_updateEmptyDEMTexture",value:function(){var t=this.painter.context,n=t.gl;t.activeTexture.set(n.TEXTURE2);var r=this._getLoadedAreaMinimum(),i=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(r,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;var a=this._emptyDEMTexture;return a?a.update(i,{premultiply:!1}):a=this._emptyDEMTexture=new e.Texture(t,i,n.RGBA,{premultiply:!1}),a}},{key:"setupElevationDraw",value:function(t,n,r){var i,a=this.painter.context,s=a.gl,o=(i=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(i),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});o.u_dem_size=this.sourceCache.getSource().tileSize,o.u_exaggeration=this.exaggeration();var u=null,l=null,c=1;if(r&&r.morphing&&this._useVertexMorphing){var h=r.morphing.srcDemTile,p=r.morphing.dstDemTile;c=r.morphing.phase,h&&p&&(this._prepareDemTileUniforms(t,h,o,"_prev")&&(l=h),this._prepareDemTileUniforms(t,p,o)&&(u=p))}if(l&&u?(a.activeTexture.set(s.TEXTURE2),u.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE,s.NEAREST),a.activeTexture.set(s.TEXTURE4),l.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE,s.NEAREST),o.u_dem_lerp=c):(u=this.terrainTileForTile[t.tileID.key],a.activeTexture.set(s.TEXTURE2),(this._prepareDemTileUniforms(t,u,o)?u.demTexture:this.emptyDEMTexture).bind(s.NEAREST,s.CLAMP_TO_EDGE)),a.activeTexture.set(s.TEXTURE3),r&&r.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE),this._depthFBO&&(o.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE),o.u_depth_size_inv=[1,1]),r&&r.useMeterToDem&&u){var f=(1<<u.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;o.u_meter_to_dem=f}if(r&&r.labelPlaneMatrixInv&&(o.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(a,o),"globe"===this.painter.transform.projection.name){var d=this.globeUniformValues(this.painter.transform,t.tileID.canonical,r&&r.useDenormalizedUpVectorScale);n.setGlobeUniformValues(a,d)}}},{key:"globeUniformValues",value:function(t,n,r){var i=t.projection;return{u_tile_tl_up:i.upVector(n,0,0),u_tile_tr_up:i.upVector(n,e.EXTENT,0),u_tile_br_up:i.upVector(n,e.EXTENT,e.EXTENT),u_tile_bl_up:i.upVector(n,0,e.EXTENT),u_tile_up_scale:r?e.globeMetersToEcef(1):i.upVectorScale(n,t.center.lat,t.worldSize).metersToTile}}},{key:"renderToBackBuffer",value:function(t){var n=this.painter,r=this.painter.context;0!==t.length&&(r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,n,r,i,a){if("globe"===t.transform.projection.name)!function(t,n,r,i,a){var s,o,u=t.context,l=u.gl,c=t.options.showTerrainWireframe?2:0,f=t.transform,d=e.globeUseCustomAntiAliasing(t,u,f),v=function(e,n){if(o!==e){var r=[Un[e],"PROJECTION_GLOBE_VIEW"];d&&r.push("CUSTOM_ANTIALIASING"),n&&r.push(Un[c]),s=t.useProgram("globeRaster",null,r),o=e}},m=t.colorModeForRenderPass(),y=new e.DepthMode(l.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Ln.update(a);var g=e.calculateGlobeMercatorMatrix(f),_=[e.mercatorXfromLng(f.center.lng),e.mercatorYfromLat(f.center.lat)],T=c?[!1,!0]:[!1],E=t.globeSharedBuffers,x=[f.width*e.exported.devicePixelRatio,f.height*e.exported.devicePixelRatio],b=Float32Array.from(f.globeMatrix),I={useDenormalizedUpVectorScale:!0};if(T.forEach((function(c){var f=t.transform,d=Zn(f.zoom)*n.exaggeration();o=-1;var T,w=c?l.LINES:l.TRIANGLES,k=p(i);try{for(k.s();!(T=k.n()).done;){var S=T.value,R=r.getTile(S),C=e.StencilMode.disabled,D=n.prevTerrainTileForTile[S.key],A=n.terrainTileForTile[S.key];Fn(D,A)&&Ln.newMorphing(S.key,D,A,a,250),u.activeTexture.set(l.TEXTURE0),R.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE);var O=Ln.getMorphValuesForProxy(S.key),N=O?1:0;O&&e.extend$1(I,{morphing:{srcDemTile:O.from,dstDemTile:O.to,phase:e.easeCubicInOut(O.phase)}});var M=e.tileCornersToBounds(S.canonical),P=e.getLatitudinalLod(M.getCenter().lat),F=e.getGridMatrix(S.canonical,M,P,f.worldSize/f._pixelsPerMercatorPixel),L=e.globeNormalizeECEF(e.globeTileBounds(S.canonical)),U=Pn(f.projMatrix,b,g,L,e.globeToMercatorTransition(f.zoom),_,f.frustumCorners.TL,f.frustumCorners.TR,f.frustumCorners.BR,f.frustumCorners.BL,f.globeCenterInViewSpace,f.globeRadius,x,d,F);if(v(N,c),n.setupElevationDraw(R,s,I),t.prepareDrawProgram(u,s,S.toUnwrapped()),E){var Z=c?E.getWirefameBuffers(t.context,P):E.getGridBuffers(P,0!==d),B=h(Z,3),z=B[0],G=B[1],H=B[2];s.draw(u,w,y,C,m,e.CullFaceMode.backCCW,U,"globe_raster",z,G,H)}}}catch(j){k.e(j)}finally{k.f()}})),E){var w=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];d&&w.push("CUSTOM_ANTIALIASING"),s=t.useProgram("globeRaster",null,w);var k,S=p(i);try{var R=function(){var i=k.value,a=i.canonical,o=a.x,c=a.y,p=a.z,d=0===c,v=c===(1<<p)-1,g=E.getPoleBuffers(p),T=h(g,4),b=T[0],w=T[1],S=T[2],R=T[3];if(R&&(d||v)){var C=r.getTile(i);u.activeTexture.set(l.TEXTURE0),C.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE);var D=e.globePoleMatrixForTile(p,o,f),A=e.globeNormalizeECEF(e.globeTileBounds(i.canonical)),O=function(t,n){return t.draw(u,l.TRIANGLES,y,e.StencilMode.disabled,m,e.CullFaceMode.disabled,Pn(f.projMatrix,D,D,A,0,_,f.frustumCorners.TL,f.frustumCorners.TR,f.frustumCorners.BR,f.frustumCorners.BL,f.globeCenterInViewSpace,f.globeRadius,x,0),"globe_pole_raster",n,S,R)};n.setupElevationDraw(C,s,I),t.prepareDrawProgram(u,s,i.toUnwrapped()),d&&O(s,b),v&&(D=e.scale(e.create(),D,[1,-1,1]),O(s,w))}};for(S.s();!(k=S.n()).done;)R()}catch(C){S.e(C)}finally{S.f()}}}(t,n,r,i,a);else{var s,o,u=t.context,l=u.gl,c=t.options.showTerrainWireframe?2:0,f=function(e,n){if(o!==e){var r=[Un[e]];n&&r.push(Un[c]),s=t.useProgram("terrainRaster",null,r),o=e}},d=t.colorModeForRenderPass(),v=new e.DepthMode(l.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Ln.update(a);var m=t.transform,y=Zn(m.zoom)*n.exaggeration();(c?[!1,!0]:[!1]).forEach((function(c){o=-1;var g,_=c?l.LINES:l.TRIANGLES,T=c?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments],E=h(T,2),x=E[0],b=E[1],I=p(i);try{for(I.s();!(g=I.n()).done;){var w=g.value,k=r.getTile(w),S=e.StencilMode.disabled,R=n.prevTerrainTileForTile[w.key],C=n.terrainTileForTile[w.key];Fn(R,C)&&Ln.newMorphing(w.key,R,C,a,250),u.activeTexture.set(l.TEXTURE0),k.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST);var D=Ln.getMorphValuesForProxy(w.key),A=D?1:0,O=void 0;D&&(O={morphing:{srcDemTile:D.from,dstDemTile:D.to,phase:e.easeCubicInOut(D.phase)}});var N=Mn(w.projMatrix,Bn(w.canonical,m.renderWorldCopies)?y/10:y);f(A,c),n.setupElevationDraw(k,s,O),t.prepareDrawProgram(u,s,w.toUnwrapped()),s.draw(u,_,v,S,d,e.CullFaceMode.backCCW,N,"terrain_raster",n.gridBuffer,x,b)}}catch(M){I.e(M)}finally{I.f()}}))}}(n,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}},{key:"renderBatch",value:function(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;var n,r=this.painter,i=this.painter.context,a=this.proxySourceCache,s=this.proxiedCoords[a.id],o=this._drapedRenderBatches.shift(),u=[],l=r.style.order,c=0,h=p(s);try{for(h.s();!(n=h.n()).done;){var f=n.value,d=a.getTileByID(f.proxyTileKey),v=a.proxyCachedFBO[f.key]?a.proxyCachedFBO[f.key][t]:void 0,m=void 0!==v?a.renderCache[v]:this.pool[c++],y=void 0!==v;if(d.texture=m.tex,!y||m.dirty){var g=void 0;i.bindFramebuffer.set(m.fb.framebuffer),this.renderedToTile=!1,m.dirty&&(i.clear({color:e.Color.transparent,stencil:0}),m.dirty=!1);for(var _=o.start;_<=o.end;++_){var T=r.style._layers[l[_]];if(!T.isHidden(r.transform.zoom)){var E=r.style._getLayerSourceCache(T),x=E?this.proxyToSource[f.key][E.id]:[f];if(x){var b=x;i.viewport.set([0,0,m.fb.width,m.fb.height]),g!==(E?E.id:null)&&(this._setupStencil(m,x,T,E),g=E?E.id:null),r.renderLayer(r,E,T,b)}}}this.renderedToTile?(m.dirty=!0,u.push(d.tileID)):y||--c,5===c&&(c=0,this.renderToBackBuffer(u))}else u.push(d.tileID)}}catch(I){h.e(I)}finally{h.f()}return this.renderToBackBuffer(u),this.renderingToTexture=!1,i.bindFramebuffer.set(null),i.viewport.set([0,0,r.width,r.height]),o.end+1}},{key:"postRender",value:function(){}},{key:"renderCacheEfficiency",value:function(e){var t=e.order.length;if(0===t)return{efficiency:100};for(var n,r=0,i=0,a=!1,s=0;s<t;++s){var o=e._layers[e.order[s]];this._style.isLayerDraped(o)?(a&&++r,++i):a||(a=!0,n=o.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}},{key:"getMinElevationBelowMSL",value:function(){var e=0;return this._visibleDemTiles.filter((function(e){return e.dem})).forEach((function(t){e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}},{key:"raycast",value:function(e,t,n){if(!this._visibleDemTiles)return null;var r=this._visibleDemTiles.filter((function(e){return e.dem})).map((function(r){var i=r.tileID,a=1<<i.overscaledZ,s=i.canonical,o=s.x,u=s.y,l=o/a,c=(o+1)/a,h=u/a,p=(u+1)/a;return{minx:l,miny:h,maxx:c,maxy:p,t:r.dem.tree.raycastRoot(l,h,c,p,e,t,n),tile:r}}));r.sort((function(e,t){return(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)}));var i,a=p(r);try{for(a.s();!(i=a.n()).done;){var s=i.value;if(null==s.t)return null;var o=s.tile.dem.tree.raycast(s.minx,s.miny,s.maxx,s.maxy,e,t,n);if(null!=o)return o}}catch(u){a.e(u)}finally{a.f()}return null}},{key:"_createFBO",value:function(){var t=this.painter.context,n=t.gl,r=this.drapeBufferSize;t.activeTexture.set(n.TEXTURE0);var i=new e.Texture(t,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);var a=t.createFramebuffer(r[0],r[1],!1);return a.colorAttachment.set(i.texture),a.depthAttachment=new Ue(t,a.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,r[0],r[1]),this._stencilRef=0,a.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):a.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:a,tex:i,dirty:!1}}},{key:"_initFBOPool",value:function(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}},{key:"_shouldDisableRenderCache",value:function(){var e=this;if(this._style.light&&this._style.light.hasTransition())return!0;for(var t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((function(t){var n=e._style._layers[t],r=n.isHidden(e.painter.transform.zoom);return"custom"===n.type?!r&&n.shouldRedrape():!r&&n.hasTransition()}))}},{key:"_clearLineLayersFromRenderCache",value:function(){var t,n=!1,r=p(this._style._getSources());try{for(r.s();!(t=r.n()).done;)if(t.value instanceof ze){n=!0;break}}catch(m){r.e(m)}finally{r.f()}if(n)for(var i={},a=0;a<this._style.order.length;++a){var s=this._style._layers[this._style.order[a]],o=this._style._getLayerSourceCache(s);if(o&&!i[o.id]&&!s.isHidden(this.painter.transform.zoom)&&"line"===s.type&&s.widthExpression()instanceof e.ZoomDependentExpression){i[o.id]=!0;var u,l=p(this.proxyCoords);try{for(l.s();!(u=l.n()).done;){var c=u.value,h=this.proxyToSource[c.key][o.id];if(h){var f,d=p(h);try{for(d.s();!(f=d.n()).done;){var v=f.value;this._clearRenderCacheForTile(o.id,v)}}catch(m){d.e(m)}finally{d.f()}}}}catch(m){l.e(m)}finally{l.f()}}}}},{key:"_clearRasterLayersFromRenderCache",value:function(){var e=!1;for(var t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof Ge){e=!0;break}if(e)for(var n={},r=0;r<this._style.order.length;++r){var i=this._style._layers[this._style.order[r]],a=this._style._getLayerSourceCache(i);if(a&&!n[a.id]&&!i.isHidden(this.painter.transform.zoom)&&"raster"===i.type){var s,o=i.paint.get("raster-fade-duration"),u=p(this.proxyCoords);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=this.proxyToSource[l.key][a.id];if(c){var h,f=p(c);try{for(f.s();!(h=f.n()).done;){var d=h.value,v=Gn(a.getTile(d),a.findLoadedParent(d,0),a,this.painter.transform,o);(1!==v.opacity||0!==v.mix)&&this._clearRenderCacheForTile(a.id,d)}}catch(m){f.e(m)}finally{f.f()}}}}catch(m){u.e(m)}finally{u.f()}}}}},{key:"_setupDrapedRenderBatches",value:function(){var e=this._style.order,t=e.length;if(0!==t){for(var n,r=[],i=0,a=this._style._layers[e[i]];!this._style.isLayerDraped(a)&&a.isHidden(this.painter.transform.zoom)&&++i<t;)a=this._style._layers[e[i]];for(;i<t;++i){var s=this._style._layers[e[i]];s.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(s)?void 0===n&&(n=i):void 0!==n&&(r.push({start:n,end:i-1}),n=void 0))}void 0!==n&&r.push({start:n,end:i-1}),this._drapedRenderBatches=r}}},{key:"_setupRenderCache",value:function(e){var t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){var n=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(var r=0;r<n.length;++r){var i,a=Object.values(n[r]);(i=t.renderCachePool).push.apply(i,a)}}}else{this._clearRasterLayersFromRenderCache();for(var s=this.proxyCoords,o=this._tilesDirty,u=s.length-1;u>=0;u--){var l=s[u];if(t.getTileByID(l.key),void 0!==t.proxyCachedFBO[l.key]){var h=e[l.key],f=this.proxyToSource[l.key],d=0,v=function(e){var t=f[e],n=h[e];if(!n||n.length!==t.length||t.some((function(t,r){return t!==n[r]||o[e]&&o[e].hasOwnProperty(t.key)})))return d=-1,"break";++d};for(var m in f)if("break"===v(m))break;for(var y in t.proxyCachedFBO[l.key])t.renderCache[t.proxyCachedFBO[l.key][y]].dirty=d<0||d!==Object.values(h).length}}var g=c(this._drapedRenderBatches);g.sort((function(e,t){return t.end-t.start-(e.end-e.start)}));var _,T=p(g);try{for(T.s();!(_=T.n()).done;){var E,x=_.value,b=p(s);try{for(b.s();!(E=b.n()).done;){var I=E.value;if(!t.proxyCachedFBO[I.key]){var w=t.renderCachePool.pop();void 0===w&&t.renderCache.length<50&&(w=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==w&&(t.proxyCachedFBO[I.key]={},t.proxyCachedFBO[I.key][x.start]=w,t.renderCache[w].dirty=!0)}}}catch(k){b.e(k)}finally{b.f()}}}catch(k){T.e(k)}finally{T.f()}this._tilesDirty={}}}},{key:"_setupStencil",value:function(e,t,n,r){if(r&&this._sourceTilesOverlap[r.id]){var i=this.painter.context,a=i.gl;if(t.length<=1)this._overlapStencilType=!1;else{var s;if(n.isTileClipped())s=t.length,this._overlapStencilMode.test={func:a.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);s=1,this._overlapStencilMode.test={func:a.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+s>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=s,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}}else this._overlapStencilType&&(this._overlapStencilType=!1)}},{key:"clipOrMaskOverlapStencilType",value:function(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}},{key:"stencilModeForRTTOverlap",value:function(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}},{key:"_renderTileClippingMasks",value:function(t,n){var r=this.painter,i=this.painter.context,a=i.gl;r._tileClippingMaskIDs={},i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);var s,o=r.useProgram("clippingMask"),u=p(t);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=r._tileClippingMaskIDs[l.key]=--n;o.draw(i,a.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:a.ALWAYS,mask:0},c,255,a.KEEP,a.KEEP,a.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,zn(l.projMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}catch(h){u.e(h)}finally{u.f()}}},{key:"pointCoordinate",value:function(t){var n=this.painter.transform;if(t.x<0||t.x>n.width||t.y<0||t.y>n.height)return null;var r=[t.x,t.y,1,1];e.transformMat4$1(r,r,n.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;var i=n._camera.position,a=e.mercatorZfromAltitude(1,n.center.lat),s=[i[0],i[1],i[2]/a,0],o=e.subtract([],r.slice(0,3),s);e.normalize(o,o);var u=this.raycast(s,o,this._exaggeration);return null!==u&&u?(e.scaleAndAdd(s,s,o,u),s[3]=s[2],s[2]*=a,s):null}},{key:"drawDepth",value:function(){var t=this.painter,n=t.context,r=this.proxySourceCache,i=Math.ceil(t.width),a=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===a||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){var s=n.gl,o=n.createFramebuffer(i,a,!0);n.activeTexture.set(s.TEXTURE0);var u=new e.Texture(n,{width:i,height:a,data:null},s.RGBA);u.bind(s.NEAREST,s.CLAMP_TO_EDGE),o.colorAttachment.set(u.texture);var l=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,a);o.depthAttachment.set(l),this._depthFBO=o,this._depthTexture=u}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,a]),function(t,n,r,i){if("globe"!==t.transform.projection.name){var a=t.context,s=a.gl;a.clear({depth:1});var o,u=t.useProgram("terrainDepth"),l=new e.DepthMode(s.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D),c=p(i);try{for(c.s();!(o=c.n()).done;){var h=o.value,f=r.getTile(h),d=Mn(h.projMatrix,0);n.setupElevationDraw(f,u),u.draw(a,s.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,d,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}catch(v){c.e(v)}finally{c.f()}}}(t,this,r,this.proxyCoords)}},{key:"_setupProxiedCoordsForOrtho",value:function(e,t,n){if(e.getSource()instanceof je)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};for(var r=this.proxiedCoords[e.id]=[],i=this.proxyCoords,a=0;a<i.length;a++){var s=i[a],o=this._findTileCoveringTileID(s,e);if(o){var u=this._createProxiedId(s,o,n[s.key]&&n[s.key][e.id]);r.push(u),this.proxyToSource[s.key][e.id]=[u]}}for(var l=!1,c=0;c<t.length;c++){var h=e.getTile(t[c]);if(h&&h.hasData()){var p=this._findTileCoveringTileID(h.tileID,this.proxySourceCache);if(p&&p.tileID.canonical.z!==h.tileID.canonical.z){var f=this.proxyToSource[p.tileID.key][e.id],d=this._createProxiedId(p.tileID,h,n[p.tileID.key]&&n[p.tileID.key][e.id]);f?f.splice(f.length-1,0,d):this.proxyToSource[p.tileID.key][e.id]=[d],r.push(d),l=!0}}}this._sourceTilesOverlap[e.id]=l}},{key:"_setupProxiedCoordsForImageSource",value:function(t,n,r){if(t.getSource().loaded())for(var i=this.proxiedCoords[t.id]=[],a=this.proxyCoords,s=t.getSource(),o=new e.pointGeometry(s.tileID.x,s.tileID.y)._div(1<<s.tileID.z),u=s.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce((function(e,t){return e.min.x=Math.min(e.min.x,t.x-o.x),e.min.y=Math.min(e.min.y,t.y-o.y),e.max.x=Math.max(e.max.x,t.x-o.x),e.max.y=Math.max(e.max.y,t.y-o.y),e}),{min:new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),l=function(t,n){var r=t.wrap+t.canonical.x/(1<<t.canonical.z),i=t.canonical.y/(1<<t.canonical.z),a=e.EXTENT/(1<<t.canonical.z),s=n.wrap+n.canonical.x/(1<<n.canonical.z),o=n.canonical.y/(1<<n.canonical.z);return r+a<s+u.min.x||r>s+u.max.x||i+a<o+u.min.y||i>o+u.max.y},c=0;c<a.length;c++)for(var h=a[c],p=0;p<n.length;p++){var f=t.getTile(n[p]);if(f&&f.hasData()&&!l(h,f.tileID)){var d=this._createProxiedId(h,f,r[h.key]&&r[h.key][t.id]),v=this.proxyToSource[h.key][t.id];v?v.push(d):this.proxyToSource[h.key][t.id]=[d],i.push(d)}}}},{key:"_createProxiedId",value:function(t,n,r){var i=this.orthoMatrix;if(r){var a=r.find((function(e){return e.key===n.tileID.key}));if(a)return a}if(n.tileID.key!==t.key){var s,o,u,l=t.canonical.z-n.tileID.canonical.z;i=e.create();var c=n.tileID.wrap-t.wrap<<t.overscaledZ;l>0?(o=(s=e.EXTENT>>l)*((n.tileID.canonical.x<<l)-t.canonical.x+c),u=s*((n.tileID.canonical.y<<l)-t.canonical.y)):(s=e.EXTENT<<-l,o=e.EXTENT*(n.tileID.canonical.x-(t.canonical.x+c<<-l)),u=e.EXTENT*(n.tileID.canonical.y-(t.canonical.y<<-l))),e.ortho(i,0,s,0,s,0,1),e.translate(i,i,[o,u,0])}return new Vn(n.tileID,t.key,i)}},{key:"_findTileCoveringTileID",value:function(t,n){var r=n.getTile(t);if(r&&r.hasData())return r;var i=this._findCoveringTileCache[n.id],a=i[t.key];if((r=a?n.getTileByID(a):null)&&r.hasData()||null===a)return r;var s=r?r.tileID:t,o=s.overscaledZ,u=n.getSource().minzoom,l=[];if(!a){var c=n.getSource().maxzoom;if(t.canonical.z>=c){var h=t.canonical.z-c;n.getSource().reparseOverscaled?(o=Math.max(t.canonical.z+2,n.transform.tileZoom),s=new e.OverscaledTileID(o,t.wrap,c,t.canonical.x>>h,t.canonical.y>>h)):0!==h&&(o=c,s=new e.OverscaledTileID(o,t.wrap,c,t.canonical.x>>h,t.canonical.y>>h))}s.key!==t.key&&(l.push(s.key),r=n.getTile(s))}var p=function(e){l.forEach((function(t){i[t]=e})),l.length=0};for(o-=1;o>=u&&(!r||!r.hasData());o--){r&&p(r.tileID.key);var f=s.calculateScaledKey(o);if((r=n.getTileByID(f))&&r.hasData())break;var d=i[f];if(null===d)break;void 0===d?l.push(f):r=n.getTileByID(d)}return p(r?r.tileID.key:null),r&&r.hasData()?r:null}},{key:"findDEMTileFor",value:function(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}},{key:"prepareDrawTile",value:function(){this.renderedToTile=!0}},{key:"_clearRenderCacheForTile",value:function(e,t){var n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}},{key:"getWirefameBuffer",value:function(){if(!this.wireframeSegments){var t=function(t){for(var n=0,r=new e.StructArrayLayout2ui4,i=131,a=1;a<129;a++){for(var s=1;s<129;s++)n=a*i+s,r.emplaceBack(n,n+1),r.emplaceBack(n,n+i),r.emplaceBack(n+1,n+i),128===a&&r.emplaceBack(n+i,n+i+1);r.emplaceBack(n+1,n+1+i)}return r}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}]),r}(e.Elevation),Yn=function(){function t(n,r,i,a,s,o){f(this,t);var u=n.gl;this.program=u.createProgram();var l=function(e){for(var t=[],n=0;n<e.length;n++)if(null!==e[n]){var r=e[n].split(" ");t.push(r.pop())}return t}(i.staticAttributes),c=a?a.getBinderAttributes():[],h=l.concat(c),p=a?a.defines():[];p=p.concat(o.map((function(e){return"#define ".concat(e)})));var d=n.isWebGL2?"#version 300 es\n":"",v=d+p.concat(n.extStandardDerivatives&&0===d.length?"#extension GL_OES_standard_derivatives : enable\n".concat(In):In,In,bn,xn.fragmentSource,Tn.fragmentSource,i.fragmentSource).join("\n"),m=d+p.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",bn,xn.vertexSource,Tn.vertexSource,_n.vertexSource,i.vertexSource).join("\n"),y=u.createShader(u.FRAGMENT_SHADER);if(u.isContextLost())this.failedToCreate=!0;else{u.shaderSource(y,v),u.compileShader(y),u.attachShader(this.program,y);var g=u.createShader(u.VERTEX_SHADER);if(u.isContextLost())this.failedToCreate=!0;else{u.shaderSource(g,m),u.compileShader(g),u.attachShader(this.program,g),this.attributes={},this.numAttributes=h.length;for(var _=0;_<this.numAttributes;_++)h[_]&&(u.bindAttribLocation(this.program,_,h[_]),this.attributes[h[_]]=_);u.linkProgram(this.program),u.deleteShader(g),u.deleteShader(y),this.fixedUniforms=s(n),this.binderUniforms=a?a.getUniforms(n):[],o.includes("TERRAIN")&&(this.terrainUniforms=function(t){return{u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t)}}(n)),o.includes("GLOBE")&&(this.globeUniforms=function(t){return{u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}}(n)),o.includes("FOG")&&(this.fogUniforms=function(t){return{u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}}(n))}}}return d(t,[{key:"setTerrainUniformValues",value:function(e,t){if(this.terrainUniforms){var n=this.terrainUniforms;if(!this.failedToCreate)for(var r in e.program.set(this.program),t)n[r]&&n[r].set(this.program,r,t[r])}}},{key:"setGlobeUniformValues",value:function(e,t){if(this.globeUniforms){var n=this.globeUniforms;if(!this.failedToCreate)for(var r in e.program.set(this.program),t)n[r]&&n[r].set(this.program,r,t[r])}}},{key:"setFogUniformValues",value:function(e,t){if(this.fogUniforms){var n=this.fogUniforms;if(!this.failedToCreate)for(var r in e.program.set(this.program),t)n[r].set(this.program,r,t[r])}}},{key:"draw",value:function(e,t,n,i,a,s,o,u,l,c,h,f,d,v,m){var y,g=e.gl;if(!this.failedToCreate){e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(i),e.setColorMode(a),e.setCullFace(s);for(var _=0,T=Object.keys(this.fixedUniforms);_<T.length;_++){var E=T[_];this.fixedUniforms[E].set(this.program,E,o[E])}v&&v.setUniforms(this.program,e,this.binderUniforms,f,{zoom:d});var x,b=(y={},r(y,g.LINES,2),r(y,g.TRIANGLES,3),r(y,g.LINE_STRIP,1),y)[t],I=p(h.get());try{for(I.s();!(x=I.n()).done;){var w=x.value,k=w.vaos||(w.vaos={});(k[u]||(k[u]=new Rn)).bind(e,this,l,v?v.getPaintVertexBuffers():[],c,w.vertexOffset,m||[]),g.drawElements(t,w.primitiveLength*b,g.UNSIGNED_SHORT,w.primitiveOffset*b*2)}}catch(S){I.e(S)}finally{I.f()}}}}],[{key:"cacheKey",value:function(e,t,n,r){var i,a="".concat(t).concat(r?r.cacheKey:""),s=p(n);try{for(s.s();!(i=s.n()).done;){var o=i.value;e.usedDefines.includes(o)&&(a+="/".concat(o))}}catch(u){s.e(u)}finally{s.f()}return a}}]),t}();function qn(e,t){var n=Math.pow(2,t.tileID.overscaledZ),r=t.tileSize*Math.pow(2,e.transform.tileZoom)/n,i=r*(t.tileID.canonical.x+t.tileID.wrap*n),a=r*t.tileID.canonical.y;return{u_image:0,u_texsize:t.imageAtlasTexture.size,u_tile_units_to_pixels:1/W(t,1,e.transform.tileZoom),u_pixel_coord_upper:[i>>16,a>>16],u_pixel_coord_lower:[65535&i,65535&a]}}var Xn=e.create(),Kn=function(t,n,r,i,a,s,o,u,l,c,h){var p=n.style.light,f=p.properties.get("position"),d=[f.x,f.y,f.z],v=e.create$1();"viewport"===p.properties.get("anchor")&&(e.fromRotation(v,-n.transform.angle),e.transformMat3(d,d,v));var m=p.properties.get("color"),y=n.transform,g={u_matrix:t,u_lightpos:d,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[m.r,m.g,m.b],u_vertical_gradient:+r,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Xn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:a,u_edge_radius:s};return"globe"===y.projection.name&&(g.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],g.u_zoom_transition=l,g.u_inv_rot_matrix=h,g.u_merc_center=c,g.u_up_dir=y.projection.upVector(new e.CanonicalTileID(0,0,0),c[0]*e.EXTENT,c[1]*e.EXTENT),g.u_height_lift=u),g},Qn=function(t,n,r,i,a,s,o,u,l,c,h,p){var f=Kn(t,n,r,i,a,s,o,l,c,h,p),d={u_height_factor:-Math.pow(2,o.overscaledZ)/u.tileSize/8};return e.extend(f,qn(n,u),d)},Jn=function(e){return{u_matrix:e}},$n=function(t,n,r){return e.extend(Jn(t),qn(n,r))},er=function(e,t){return{u_matrix:e,u_world:t}},tr=function(t,n,r,i){return e.extend($n(t,n,r),{u_world:i})},nr=e.create(),rr=function(t,n,r,i,a,s){var o,u=t.transform,l="globe"===u.projection.name;if("map"===s.paint.get("circle-pitch-alignment"))if(l){var c=e.globePixelsToTileUnits(u.zoom,n.canonical)*u._pixelsPerMercatorPixel;o=Float32Array.from([c,0,0,c])}else o=u.calculatePixelsToTileUnitsMatrix(r);else o=new Float32Array([u.pixelsToGLUnits[0],0,0,u.pixelsToGLUnits[1]]);var h={u_camera_to_center_distance:u.cameraToCenterDistance,u_matrix:t.translatePosMatrix(n.projMatrix,r,s.paint.get("circle-translate"),s.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:o,u_inv_rot_matrix:nr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){h.u_inv_rot_matrix=i,h.u_merc_center=a,h.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],h.u_zoom_transition=e.globeToMercatorTransition(u.zoom);var p=a[0]*e.EXTENT,f=a[1]*e.EXTENT;h.u_up_dir=u.projection.upVector(new e.CanonicalTileID(0,0,0),p,f)}return h},ir=function(e){var t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},ar=function(t,n,r,i){var a=e.EXTENT/r.tileSize;return{u_matrix:t,u_camera_to_center_distance:n.getCameraToCenterDistance(i),u_extrude_scale:[n.pixelsToGLUnits[0]/a,n.pixelsToGLUnits[1]/a]}},sr=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},or=e.create(),ur=function(t,n,r,i,a,s,o){var u=t.transform,l="globe"===u.projection.name,c=l?e.globePixelsToTileUnits(u.zoom,n.canonical)*u._pixelsPerMercatorPixel:W(r,1,s),h={u_matrix:n.projMatrix,u_extrude_scale:c,u_intensity:o,u_inv_rot_matrix:or,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){h.u_inv_rot_matrix=i,h.u_merc_center=a,h.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],h.u_zoom_transition=e.globeToMercatorTransition(u.zoom);var p=a[0]*e.EXTENT,f=a[1]*e.EXTENT;h.u_up_dir=u.projection.upVector(new e.CanonicalTileID(0,0,0),p,f)}return h},lr=function(e,t,n,r,i,a,s){var o=e.transform,u=o.calculatePixelsToTileUnitsMatrix(t);return{u_matrix:pr(e,t,n,r),u_pixels_to_tile_units:u,u_device_pixel_ratio:a,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:i,u_texsize:fr(n)?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:hr(t,e.transform),u_alpha_discard_threshold:0,u_trim_offset:s}},cr=function(e,t,n,r,i){var a=e.transform;return{u_matrix:pr(e,t,n,r),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:a.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:i,u_image:0,u_tile_units_to_pixels:hr(t,a),u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function hr(e,t){return 1/W(e,1,t.tileZoom)}function pr(e,t,n,r){return e.translatePosMatrix(r||t.tileID.projMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function fr(e){var t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}var dr=function(e,t,n,r,i,a){return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(o=i.paint.get("raster-saturation"),o>0?1-1/(1.001-o):-o),u_contrast_factor:(s=i.paint.get("raster-contrast"),s>0?1/(1-s):1+s),u_spin_weights:vr(i.paint.get("raster-hue-rotate")),u_perspective_transform:a};var s,o};function vr(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}var mr,yr=e.create(),gr=function(t,n,r,i,a,s,o,u,l,c,h,p,f,d,v,m){var y=a.transform,g={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:y.cameraToCenterDistance,u_rotate_symbol:+r,u_aspect_ratio:y.width/y.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:s,u_label_plane_matrix:o,u_coord_matrix:u,u_is_text:+l,u_pitch_with_map:+i,u_texsize:c,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:yr,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:yr,u_up_vector:[0,-1,0]};return"globe"===m.name&&(g.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],g.u_zoom_transition=p,g.u_inv_rot_matrix=d,g.u_merc_center=f,g.u_camera_forward=y._camera.forward(),g.u_ecef_origin=e.globeECEFOrigin(y.globeMatrix,h.toUnwrapped()),g.u_tile_matrix=Float32Array.from(y.globeMatrix),g.u_up_vector=v),g},_r=function(t,n,r,i,a,s,o,u,l,c,h,p,f,d,v,m,y){return e.extend(gr(t,n,r,i,a,s,o,u,l,c,p,f,d,v,m,y),{u_gamma_scale:i?a.transform.cameraToCenterDistance*Math.cos(a.terrain?0:a.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+h})},Tr=function(t,n,r,i,a,s,o,u,l,c,h,p,f,d,v,m){return e.extend(_r(t,n,r,i,a,s,o,u,!0,l,!0,h,p,f,d,v,m),{u_texsize_icon:c,u_texture_icon:1})},Er=function(e,t,n){return{u_matrix:e,u_opacity:t,u_color:n}},xr=function(t,n,r,i,a){return e.extend(function(e,t,n){var r=t.imageManager.getPattern(e.toString()),i=t.imageManager.getPixelSize(),a=i.width,s=i.height,o=Math.pow(2,n.tileID.overscaledZ),u=n.tileSize*Math.pow(2,t.transform.tileZoom)/o,l=u*(n.tileID.canonical.x+n.tileID.wrap*o),c=u*n.tileID.canonical.y;return{u_image:0,u_pattern_tl:r.tl,u_pattern_br:r.br,u_texsize:[a,s],u_pattern_size:r.displaySize,u_tile_units_to_pixels:1/W(n,1,t.transform.tileZoom),u_pixel_coord_upper:[l>>16,c>>16],u_pixel_coord_lower:[65535&l,65535&c]}}(i,r,a),{u_matrix:t,u_opacity:n})},br={fillExtrusion:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}},fillExtrusionPattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}},fill:function(t){return{u_matrix:new e.UniformMatrix4f(t)}},fillPattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}},fillOutline:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}},fillOutlinePattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}},circle:function(t){return{u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}},collisionBox:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}},collisionCircle:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}},debug:function(t){return{u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}},clippingMask:function(t){return{u_matrix:new e.UniformMatrix4f(t)}},heatmap:function(t){return{u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}},heatmapTexture:function(t){return{u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}},hillshade:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}},hillshadePrepare:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}},line:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}},linePattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}},raster:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}},symbolIcon:function(t){return{u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}},symbolSDF:function(t){return{u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}},symbolTextAndIcon:function(t){return{u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}},background:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}},backgroundPattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl:new e.Uniform2f(t),u_pattern_br:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_pattern_size:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}},terrainRaster:Nn,terrainDepth:Nn,skybox:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}},skyboxGradient:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}},skyboxCapture:function(t){return{u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}},globeRaster:function(t){return{u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_skirt_height:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}},globeAtmosphere:function(t){return{u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)}}};function Ir(t,n,r,i,a,s,o){for(var u=t.context,l=u.gl,c=t.transform,h=t.useProgram("collisionBox"),p=[],f=0,d=0,v=0;v<i.length;v++){var m=i[v],y=n.getTile(m),g=y.getBucket(r);if(g){var _=Nt(m,g,c),T=_;0===a[0]&&0===a[1]||(T=t.translatePosMatrix(_,y,a,s));var E=o?g.textCollisionBox:g.iconCollisionBox,x=g.collisionCircleArray;if(x.length>0){var b=e.create(),I=T;e.mul(b,g.placementInvProjMatrix,c.glCoordMatrix),e.mul(b,b,g.placementViewportMatrix),p.push({circleArray:x,circleOffset:d,transform:I,invTransform:b,projection:g.getProjection()}),d=f+=x.length/4}E&&(t.terrain&&t.terrain.setupElevationDraw(y,h),h.draw(u,l.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,ar(T,c,y,g.getProjection()),r.id,E.layoutVertexBuffer,E.indexBuffer,E.segments,null,c.zoom,null,[E.collisionVertexBuffer,E.collisionVertexBufferExt]))}}if(o&&p.length){var w=t.useProgram("collisionCircle"),k=new e.StructArrayLayout2f1f2i16;k.resize(4*f),k._trim();for(var S=0,R=0,C=p;R<C.length;R++)for(var D=C[R],A=0;A<D.circleArray.length/4;A++){var O=4*A,N=D.circleArray[O+0],M=D.circleArray[O+1],P=D.circleArray[O+2],F=D.circleArray[O+3];k.emplace(S++,N,M,P,F,0),k.emplace(S++,N,M,P,F,1),k.emplace(S++,N,M,P,F,2),k.emplace(S++,N,M,P,F,3)}(!mr||mr.length<2*f)&&(mr=function(t){var n=2*t,r=new e.StructArrayLayout3ui6;r.resize(n),r._trim();for(var i=0;i<n;i++){var a=6*i;r.uint16[a+0]=4*i+0,r.uint16[a+1]=4*i+1,r.uint16[a+2]=4*i+2,r.uint16[a+3]=4*i+2,r.uint16[a+4]=4*i+3,r.uint16[a+5]=4*i+0}return r}(f));for(var L,U=u.createIndexBuffer(mr,!0),Z=u.createVertexBuffer(k,e.collisionCircleLayout.members,!0),B=0,z=p;B<z.length;B++){var G=z[B],H={u_matrix:G.transform,u_inv_matrix:G.invTransform,u_camera_to_center_distance:(L=c).getCameraToCenterDistance(G.projection),u_viewport_size:[L.width,L.height]};w.draw(u,l.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,H,r.id,Z,U,e.SegmentVector.simpleSegment(0,2*G.circleOffset,G.circleArray.length,G.circleArray.length/2),null,c.zoom)}Z.destroy(),U.destroy()}}var wr=e.create();function kr(t,n){var r=t.width,i=t.height,a=t.anchor,s=t.textOffset,o=t.textScale,u=e.getAnchorAlignment(a),l=-(u.horizontalAlign-.5)*r,c=-(u.verticalAlign-.5)*i,h=e.evaluateVariableOffset(a,s);return new e.pointGeometry((l/o+h[0])*n,(c/o+h[1])*n)}function Sr(t,n,r,i,a,s,o,u,l,c,p){var f=t.text.placedSymbolArray,d=t.text.dynamicLayoutVertexArray,v=t.icon.dynamicLayoutVertexArray,m={},y=t.getProjection(),g=Mt(u,y,s),_=s.elevation,T=y.upVectorScale(u.canonical,s.center.lat,s.worldSize).metersToTile;d.clear();for(var E=0;E<f.length;E++){var x=f.get(E),b=x.tileAnchorX,I=x.tileAnchorY,w=x.numGlyphs,k=t.allowVerticalPlacement&&!x.placedOrientation,S=x.hidden||!x.crossTileID||k?null:i[x.crossTileID];if(S){var R,C,D,A=0,O=0,N=0;if(_){var M=_?_.getAtTileOffset(u,b,I):0,P=y.upVector(u.canonical,b,I),F=h(P,3);A=M*F[0]*T,O=M*F[1]*T,N=M*F[2]*T}var L=gt(x.projectedAnchorX+A,x.projectedAnchorY+O,x.projectedAnchorZ+N,r?g:o),U=h(L,4),Z=U[0],B=U[1],z=U[2],G=U[3],H=_t(s.getCameraToCenterDistance(y),G),j=a.evaluateSizeForFeature(t.textSizeData,c,x)*H/e.ONE_EM;r&&(j*=t.tilePixelRatio/l);var V=kr(S,j);r?(C=gt((Z=(R=y.projectTilePoint(b+V.x,I+V.y,u.canonical)).x)+A,(B=R.y)+O,(z=R.z)+N,o),Z=(D=h(C,3))[0],B=D[1],z=D[2]):(n&&V._rotate(-s.angle),Z+=V.x,B+=V.y,z=0);for(var W=t.allowVerticalPlacement&&x.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Y=0;Y<w;Y++)e.addDynamicAttributes(d,Z,B,z,W);p&&x.associatedIconIndex>=0&&(m[x.associatedIconIndex]={x:Z,y:B,z:z,angle:W})}else Rt(w,d)}if(p){v.clear();for(var q=t.icon.placedSymbolArray,X=0;X<q.length;X++){var K=q.get(X),Q=K.numGlyphs,J=m[X];if(K.hidden||!J)Rt(Q,v);else for(var $=J.x,ee=J.y,te=J.z,ne=J.angle,re=0;re<Q;re++)e.addDynamicAttributes(v,$,ee,te,ne)}t.icon.dynamicLayoutVertexBuffer.updateData(v)}t.text.dynamicLayoutVertexBuffer.updateData(d)}function Rr(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function Cr(t,n,r,i,a,s,o,u,l,c,h,f){var d=t.context,v=d.gl,m=t.transform,y="map"===u,g="map"===l,_=y&&"point"!==r.layout.get("symbol-placement"),T=y&&!g&&!_,E=void 0!==r.layout.get("symbol-sort-key").constantOr(1),x=!1,b=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),I=[e.mercatorXfromLng(m.center.lng),e.mercatorYfromLat(m.center.lat)],w=r.layout.get("text-variable-anchor"),k="globe"===m.projection.name,S=[],R=[0,-1,0],C=R;!k&&!m.mercatorFromTransition||y||(C=function(t){var n=t._camera.getWorldToCamera(t.worldSize,1),r=e.multiply([],n,t.globeMatrix);e.invert(r,r);var i=[0,0,0],a=[0,1,0,0];return e.transformMat4$1(a,a,r),i[0]=a[0],i[1]=a[1],i[2]=a[2],e.normalize(i,i),i}(m));var D,A=p(i);try{for(A.s();!(D=A.n()).done;){var O=D.value,N=n.getTile(O),M=N.getBucket(r);if(M&&("mercator"!==M.projection.name||!k)){var P=a?M.text:M.icon;if(P&&!M.fullyClipped&&P.segments.get().length){var F=P.programConfigurations.get(r.id),L=a||M.sdfIcons,U=a?M.textSizeData:M.iconSizeData,Z=g||0!==m.pitch,B=e.evaluateSizeForZoom(U,m.zoom),z=void 0,G=void 0,H=void 0,j=void 0,V=[0,0],W=null;if(a){if(G=N.glyphAtlasTexture,H=v.LINEAR,z=N.glyphAtlasTexture.size,M.iconsInText){V=N.imageAtlasTexture.size,W=N.imageAtlasTexture;var Y="composite"===U.kind||"camera"===U.kind;j=Z||t.options.rotating||t.options.zooming||Y?v.LINEAR:v.NEAREST}}else{var q=1!==r.layout.get("icon-size").constantOr(0)||M.iconsNeedLinear;G=N.imageAtlasTexture,H=L||t.options.rotating||t.options.zooming||q||Z?v.LINEAR:v.NEAREST,z=N.imageAtlasTexture.size}var X="globe"===M.projection.name,K=X?C:R,Q=X?e.globeToMercatorTransition(m.zoom):0,J=Mt(O,M.getProjection(),m),$=m.calculatePixelsToTileUnitsMatrix(N),ee=vt(J,N.tileID.canonical,g,y,m,M.getProjection(),$),te=t.terrain&&g&&_?e.invert(e.create(),ee):wr,ne=yt(J,N.tileID.canonical,g,y,m,M.getProjection(),$),re=w&&M.hasTextData(),ie="none"!==r.layout.get("icon-text-fit")&&re&&M.hasIconData();if(_){var ae=m.elevation,se=ae?ae.getAtTileOffsetFunc(O,m.center.lat,m.worldSize,M.getProjection()):null,oe=mt(J,N.tileID.canonical,g,y,m,M.getProjection(),$);Et(M,J,t,a,oe,ne,g,c,se,O)}var ue=_||a&&w||ie,le=t.translatePosMatrix(J,N,s,o),ce=ue?wr:ee,he=t.translatePosMatrix(ne,N,s,o,!0),pe=M.getProjection().createInversionMatrix(m,O.canonical),fe=[];t.terrainRenderModeElevated()&&g&&fe.push("PITCH_WITH_MAP_TERRAIN"),X&&fe.push("PROJECTION_GLOBE_VIEW"),ue&&fe.push("PROJECTED_POS_ON_VIEWPORT");var de=L&&0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),ve=void 0;ve=L?M.iconsInText?Tr(U.kind,B,T,g,t,le,ce,he,z,V,O,Q,I,pe,K,M.getProjection()):_r(U.kind,B,T,g,t,le,ce,he,a,z,!0,O,Q,I,pe,K,M.getProjection()):gr(U.kind,B,T,g,t,le,ce,he,a,z,O,Q,I,pe,K,M.getProjection());var me={program:t.useProgram(Rr(L,a,M),F,fe),buffers:P,uniformValues:ve,atlasTexture:G,atlasTextureIcon:W,atlasInterpolation:H,atlasInterpolationIcon:j,isSDF:L,hasHalo:de,tile:N,labelPlaneMatrixInv:te};if(E&&M.canOverlap){x=!0;var ye,ge=P.segments.get(),_e=p(ge);try{for(_e.s();!(ye=_e.n()).done;){var Te=ye.value;S.push({segments:new e.SegmentVector([Te]),sortKey:Te.sortKey,state:me})}}catch(ke){_e.e(ke)}finally{_e.f()}}else S.push({segments:P.segments,sortKey:0,state:me})}}}}catch(ke){A.e(ke)}finally{A.f()}x&&S.sort((function(e,t){return e.sortKey-t.sortKey}));for(var Ee=0,xe=S;Ee<xe.length;Ee++){var be=xe[Ee],Ie=be.state;if(t.terrain&&t.terrain.setupElevationDraw(Ie.tile,Ie.program,{useDepthForOcclusion:!k,labelPlaneMatrixInv:Ie.labelPlaneMatrixInv}),d.activeTexture.set(v.TEXTURE0),Ie.atlasTexture.bind(Ie.atlasInterpolation,v.CLAMP_TO_EDGE),Ie.atlasTextureIcon&&(d.activeTexture.set(v.TEXTURE1),Ie.atlasTextureIcon&&Ie.atlasTextureIcon.bind(Ie.atlasInterpolationIcon,v.CLAMP_TO_EDGE)),Ie.isSDF){var we=Ie.uniformValues;Ie.hasHalo&&(we.u_is_halo=1,Dr(Ie.buffers,be.segments,r,t,Ie.program,b,h,f,we)),we.u_is_halo=0}Dr(Ie.buffers,be.segments,r,t,Ie.program,b,h,f,Ie.uniformValues)}}function Dr(t,n,r,i,a,s,o,u,l){var c=i.context,h=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];a.draw(c,c.gl.TRIANGLES,s,o,u,e.CullFaceMode.disabled,l,r.id,t.layoutVertexBuffer,t.indexBuffer,n,r.paint,i.transform.zoom,t.programConfigurations.get(r.id),h)}function Ar(t,n,r,i,a,s,o){var u,l,c,h,f,d=t.context.gl,v=r.paint.get("fill-pattern"),m=v&&v.constantOr(1);o?(l=m&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",u=d.LINES):(l=m?"fillPattern":"fill",u=d.TRIANGLES);var y,g=p(i);try{for(g.s();!(y=g.n()).done;){var _=y.value,T=n.getTile(_);if(!m||T.patternsLoaded()){var E=T.getBucket(r);if(E){t.prepareDrawTile();var x=E.programConfigurations.get(r.id),b=t.useProgram(l,x);m&&(t.context.activeTexture.set(d.TEXTURE0),T.imageAtlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),x.updatePaintBuffers());var I=v.constantOr(null);if(I&&T.imageAtlas){var w=T.imageAtlas.patternPositions[I.toString()];w&&x.setConstantPatternPositions(w)}var k=t.translatePosMatrix(_.projMatrix,T,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(o){h=E.indexBuffer2,f=E.segments2;var S=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[d.drawingBufferWidth,d.drawingBufferHeight];c="fillOutlinePattern"===l&&m?tr(k,t,T,S):er(k,S)}else h=E.indexBuffer,f=E.segments,c=m?$n(k,t,T):Jn(k);t.prepareDrawProgram(t.context,b,_.toUnwrapped()),b.draw(t.context,u,a,t.stencilModeForClipping(_),s,e.CullFaceMode.disabled,c,r.id,E.layoutVertexBuffer,h,f,r.paint,t.transform.zoom,x)}}}}catch(R){g.e(R)}finally{g.f()}}function Or(t,n,r,i,a,s,o){var u=t.context,l=u.gl,c=t.transform,h=r.paint.get("fill-extrusion-pattern"),f=h.constantOr(1),d=r.paint.get("fill-extrusion-opacity"),v=[r.paint.get("fill-extrusion-ambient-occlusion-intensity"),r.paint.get("fill-extrusion-ambient-occlusion-radius")],m=r.layout.get("fill-extrusion-edge-radius"),y="globe"===c.projection.name?e.fillExtrusionHeightLift():0,g="globe"===c.projection.name,_=g?e.globeToMercatorTransition(c.zoom):0,T=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)],E=[];g&&E.push("PROJECTION_GLOBE_VIEW"),v[0]>0&&E.push("FAUX_AO");var x,b=p(i);try{for(b.s();!(x=b.n()).done;){var I=x.value,w=n.getTile(I),k=w.getBucket(r);if(k&&k.projection.name===c.projection.name){var S=k.programConfigurations.get(r.id),R=t.useProgram(f?"fillExtrusionPattern":"fillExtrusion",S,E);if(t.terrain){var C=t.terrain;if(t.style.terrainSetForDrapingOnly())C.setupElevationDraw(w,R,{useMeterToDem:!0});else{if(!k.enableTerrain)continue;if(C.setupElevationDraw(w,R,{useMeterToDem:!0}),Nr(u,n,I,k,r,C),!k.centroidVertexBuffer){var D=R.attributes.a_centroid_pos;void 0!==D&&l.vertexAttrib2f(D,0,0)}}}f&&(t.context.activeTexture.set(l.TEXTURE0),w.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),S.updatePaintBuffers());var A=h.constantOr(null);if(A&&w.imageAtlas){var O=w.imageAtlas.patternPositions[A.toString()];O&&S.setConstantPatternPositions(O)}var N=t.translatePosMatrix(I.projMatrix,w,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),M=c.projection.createInversionMatrix(c,I.canonical),P=r.paint.get("fill-extrusion-vertical-gradient"),F=f?Qn(N,t,P,d,v,m,I,w,y,_,T,M):Kn(N,t,P,d,v,m,I,y,_,T,M);t.prepareDrawProgram(u,R,I.toUnwrapped());var L=[];t.terrain&&L.push(k.centroidVertexBuffer),g&&L.push(k.layoutVertexExtBuffer),R.draw(u,u.gl.TRIANGLES,a,s,o,e.CullFaceMode.backCCW,F,r.id,k.layoutVertexBuffer,k.indexBuffer,k.segments,r.paint,t.transform.zoom,S,L)}}}catch(U){b.e(U)}finally{b.f()}}function Nr(t,n,r,i,a,s){for(var o,u,l,c=[function(t){var n=t.canonical.x-1,r=t.wrap;return n<0&&(n=(1<<t.canonical.z)-1,r--),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},function(t){var n=t.canonical.x+1,r=t.wrap;return n===1<<t.canonical.z&&(n=0,r++),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},function(t){return new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1)},function(t){return new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)}],h=function(e){for(var t=n.getSource().minzoom,r=function(e){var t=n.getTileByID(e);if(t&&t.hasData())return t.getBucket(a)},i=0,s=[0,-1,1];i<s.length;i++){var o=s[i];if(!(e.overscaledZ+o<t)){var u=r(e.calculateScaledKey(e.overscaledZ+o));if(u)return u}}},f=[0,0,0],d=function(t,n){return f[0]=Math.min(t.min.y,n.min.y),f[1]=Math.max(t.max.y,n.max.y),f[2]=e.EXTENT-n.min.x>t.max.x?n.min.x-e.EXTENT:t.max.x,f},v=function(t,n){return f[0]=Math.min(t.min.x,n.min.x),f[1]=Math.max(t.max.x,n.max.x),f[2]=e.EXTENT-n.min.y>t.max.y?n.min.y-e.EXTENT:t.max.y,f},m=[function(e,t){return d(e,t)},function(e,t){return d(t,e)},function(e,t){return v(e,t)},function(e,t){return v(t,e)}],y=new e.pointGeometry(0,0),g=function(t,n,i,a,c){var h=[[a?i:t,a?t:i,0],[a?i:n,a?n:i,0]],p=c<0?e.EXTENT+c:c,f=[a?p:(t+n)/2,a?(t+n)/2:p,0];return 0===i&&c<0||0!==i&&c>0?s.getForTilePoints(l,[f],!0,u):h.push(f),s.getForTilePoints(r,h,!0,o),Math.max(h[0][2],h[1][2],f[2])/s.exaggeration()},_=0;_<4;_++){var T=(_<2?1:5)-_,E=i.borders[_];if(0!==E.length){var x=l=c[_](r),b=h(x);if(b&&b instanceof e.FillExtrusionBucket&&b.enableTerrain&&(i.borderDoneWithNeighborZ[_]!==b.canonical.z||b.borderDoneWithNeighborZ[T]!==i.canonical.z)&&(u=s.findDEMTileFor(x))&&u.dem){if(!o){var I=s.findDEMTileFor(r);if(!I||!I.dem)return;o=I}var w=b.borders[T],k=0,S=b.borderDoneWithNeighborZ[T]!==i.canonical.z;if(i.canonical.z===b.canonical.z){for(var R=0;R<E.length;R++){for(var C=i.featuresOnBorder[E[R]],D=C.borders[_],A=void 0;k<w.length&&!((A=b.featuresOnBorder[w[k]]).borders[T][1]>D[0]+3);)S&&b.encodeCentroid(void 0,A,!1),k++;if(A&&k<w.length){for(var O=k,N=0;!(A.borders[T][0]>D[1]-3)&&(N++,++k!==w.length);)A=b.featuresOnBorder[w[k]];if(A=b.featuresOnBorder[w[O]],C.intersectsCount()>1||A.intersectsCount()>1||1!==N){1!==N&&(k=O),i.encodeCentroid(void 0,C,!1),S&&b.encodeCentroid(void 0,A,!1);continue}var M=m[_](C,A),P=_%2?e.EXTENT-1:0;y.x=g(M[0],Math.min(e.EXTENT-1,M[1]),P,_<2,M[2]),y.y=0,i.encodeCentroid(y,C,!1),S&&b.encodeCentroid(y,A,!1)}else i.encodeCentroid(void 0,C,!1)}i.borderDoneWithNeighborZ[_]=b.canonical.z,i.needsCentroidUpdate=!0,S&&(b.borderDoneWithNeighborZ[T]=i.canonical.z,b.needsCentroidUpdate=!0)}else{var F,L=p(E);try{for(L.s();!(F=L.n()).done;){var U=F.value;i.encodeCentroid(void 0,i.featuresOnBorder[U],!1)}}catch(G){L.e(G)}finally{L.f()}if(S){var Z,B=p(w);try{for(B.s();!(Z=B.n()).done;){var z=Z.value;b.encodeCentroid(void 0,b.featuresOnBorder[z],!1)}}catch(G){B.e(G)}finally{B.f()}b.borderDoneWithNeighborZ[T]=i.canonical.z,b.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[_]=b.canonical.z,i.needsCentroidUpdate=!0}}}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(t)}var Mr=new e.Color(1,0,0,1),Pr=new e.Color(0,1,0,1),Fr=new e.Color(0,0,1,1),Lr=new e.Color(1,0,1,1),Ur=new e.Color(0,1,1,1);function Zr(t,n,r){var i=t.context,a=t.transform,s=i.gl,o="globe"===a.projection.name,u=o?["PROJECTION_GLOBE_VIEW"]:null,l=r.projMatrix;if(o&&e.globeToMercatorTransition(a.zoom)>0){var c=e.transitionTileAABBinECEF(r.canonical,a),h=e.globeDenormalizeECEF(c);l=e.multiply(new Float32Array(16),a.globeMatrix,h),e.multiply(l,a.projMatrix,l)}var p=t.useProgram("debug",null,u),f=n.getTileByID(r.key);t.terrain&&t.terrain.setupElevationDraw(f,p);var d=e.DepthMode.disabled,v=e.StencilMode.disabled,m=t.colorModeForRenderPass(),y="$debug";i.activeTexture.set(s.TEXTURE0),t.emptyTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),o?f._makeGlobeTileDebugBuffers(t.context,a):f._makeDebugTileBoundsBuffers(t.context,a.projection);var g=f._tileDebugBuffer||t.debugBuffer,_=f._tileDebugIndexBuffer||t.debugIndexBuffer,T=f._tileDebugSegments||t.debugSegments;p.draw(i,s.LINE_STRIP,d,v,m,e.CullFaceMode.disabled,sr(l,e.Color.red),y,g,_,T,null,null,null,[f._globeTileDebugBorderBuffer]);var E=f.latestRawTileData,x=Math.floor((E&&E.byteLength||0)/1024),b=n.getTile(r).tileSize,I=512/Math.min(b,512)*(r.overscaledZ/a.zoom)*.5,w=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(w+=" => ".concat(r.overscaledZ)),function(e,t){e.initDebugOverlayCanvas();var n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,w+=" ".concat(x,"kb"));var k=f._tileDebugTextBuffer||t.debugBuffer,S=f._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,R=f._tileDebugTextSegments||t.debugSegments;p.draw(i,s.TRIANGLES,d,v,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,sr(l,e.Color.transparent,I),y,k,S,R,null,null,null,[f._globeTileDebugTextBuffer])}function Br(e,t,n,r){Gr(e,0,t+n/2,e.transform.width,n,r)}function zr(e,t,n,r){Gr(e,t-n/2,0,n,e.transform.height,r)}function Gr(t,n,r,i,a,s){var o=t.context,u=o.gl;u.enable(u.SCISSOR_TEST),u.scissor(n*e.exported.devicePixelRatio,r*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,a*e.exported.devicePixelRatio),o.clear({color:s}),u.disable(u.SCISSOR_TEST)}var Hr=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]).members;function jr(e,t,n,r){e.emplaceBack(t,n,r)}var Vr=d((function t(n){f(this,t),this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,jr(this.vertexArray,-1,-1,1),jr(this.vertexArray,1,-1,1),jr(this.vertexArray,-1,1,1),jr(this.vertexArray,1,1,1),jr(this.vertexArray,-1,-1,-1),jr(this.vertexArray,1,-1,-1),jr(this.vertexArray,-1,1,-1),jr(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=n.createVertexBuffer(this.vertexArray,Hr),this.indexBuffer=n.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}));function Wr(t,n,r,i,a,s){var o=t.gl,u=n.paint.get("sky-atmosphere-color"),l=n.paint.get("sky-atmosphere-halo-color"),c=n.paint.get("sky-atmosphere-sun-intensity"),h=function(e,t,n,r,i){return{u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}}(e.fromMat4(e.create$1(),i),a,c,u,l);o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_CUBE_MAP_POSITIVE_X+s,n.skyboxTexture,0),r.draw(t,o.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}var Yr=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),qr=function(){function t(n){f(this,t);var r=new e.StructArrayLayout5f20;r.emplaceBack(-1,1,1,0,0),r.emplaceBack(1,1,1,1,0),r.emplaceBack(1,-1,1,1,1),r.emplaceBack(-1,-1,1,0,1);var i=new e.StructArrayLayout3ui6;i.emplaceBack(0,1,2),i.emplaceBack(2,3,0),this.vertexBuffer=n.createVertexBuffer(r,Yr.members),this.indexBuffer=n.createIndexBuffer(i),this.segments=e.SegmentVector.simpleSegment(0,0,4,2)}return d(t,[{key:"destroy",value:function(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}]),t}(),Xr={symbol:function(t,n,r,i,a){if("translucent"===t.renderPass){var s=e.StencilMode.disabled,o=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,n,r,i,a,s,o){var u,l=n.transform,c="map"===a,h="map"===s,f=p(t);try{for(f.s();!(u=f.n()).done;){var d=u.value,v=i.getTile(d),m=v.getBucket(r);if(m&&m.text&&m.text.segments.get().length){var y=e.evaluateSizeForZoom(m.textSizeData,l.zoom),g=Mt(d,m.getProjection(),l),_=l.calculatePixelsToTileUnitsMatrix(v),T=vt(g,v.tileID.canonical,h,c,l,m.getProjection(),_),E="none"!==r.layout.get("icon-text-fit")&&m.hasIconData();if(y){var x=Math.pow(2,l.zoom-v.tileID.overscaledZ);Sr(m,c,h,o,e.symbolSize,l,T,d,x,y,E)}}}}catch(b){f.e(b)}finally{f.f()}}(i,t,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),a),0!==r.paint.get("icon-opacity").constantOr(1)&&Cr(t,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),s,o),0!==r.paint.get("text-opacity").constantOr(1)&&Cr(t,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),s,o),n.map.showCollisionBoxes&&(Ir(t,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Ir(t,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(t,n,r,i){if("translucent"===t.renderPass){var a=r.paint.get("circle-opacity"),s=r.paint.get("circle-stroke-width"),o=r.paint.get("circle-stroke-opacity"),u=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==a.constantOr(1)||0!==s.constantOr(1)&&0!==o.constantOr(1)){for(var l=t.context,c=l.gl,h=t.transform,f=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),d=e.StencilMode.disabled,v=t.colorModeForRenderPass(),m="globe"===h.projection.name,y=[e.mercatorXfromLng(h.center.lng),e.mercatorYfromLat(h.center.lat)],g=[],_=0;_<i.length;_++){var T=i[_],E=n.getTile(T),x=E.getBucket(r);if(x&&x.projection.name===h.projection.name){var b=x.programConfigurations.get(r.id),I=ir(r);m&&I.push("PROJECTION_GLOBE_VIEW");var w=t.useProgram("circle",b,I),k=x.layoutVertexBuffer,S=x.globeExtVertexBuffer,R=x.indexBuffer,C=h.projection.createInversionMatrix(h,T.canonical),D={programConfiguration:b,program:w,layoutVertexBuffer:k,globeExtVertexBuffer:S,indexBuffer:R,uniformValues:rr(t,T,E,C,y,r),tile:E};if(u){var A,O=x.segments.get(),N=p(O);try{for(N.s();!(A=N.n()).done;){var M=A.value;g.push({segments:new e.SegmentVector([M]),sortKey:M.sortKey,state:D})}}catch(q){N.e(q)}finally{N.f()}}else g.push({segments:x.segments,sortKey:0,state:D})}}u&&g.sort((function(e,t){return e.sortKey-t.sortKey}));for(var P={useDepthForOcclusion:!m},F=0,L=g;F<L.length;F++){var U=L[F],Z=U.state,B=Z.programConfiguration,z=Z.program,G=Z.layoutVertexBuffer,H=Z.globeExtVertexBuffer,j=Z.indexBuffer,V=Z.uniformValues,W=Z.tile,Y=U.segments;t.terrain&&t.terrain.setupElevationDraw(W,z,P),t.prepareDrawProgram(l,z,W.tileID.toUnwrapped()),z.draw(l,c.TRIANGLES,f,d,v,e.CullFaceMode.disabled,V,r.id,G,j,Y,r.paint,h.zoom,B,[H])}}}},heatmap:function(t,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var a=t.context,s=a.gl,o=e.StencilMode.disabled,u=new e.ColorMode([s.ONE,s.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n,r){var i=e.gl,a=t.width*r,s=t.height*r;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,a,s]);var o=n.heatmapFbo;if(!o||o&&(o.width!==a||o.height!==s)){o&&o.destroy();var u=i.createTexture();i.bindTexture(i.TEXTURE_2D,u),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),o=n.heatmapFbo=e.createFramebuffer(a,s,!1),function(e,t,n,r,i,a){var s=e.gl;s.texImage2D(s.TEXTURE_2D,0,e.isWebGL2&&e.extRenderToTextureHalfFloat?s.RGBA16F:s.RGBA,i,a,0,s.RGBA,e.extRenderToTextureHalfFloat?e.isWebGL2?s.HALF_FLOAT:e.extTextureHalfFloat.HALF_FLOAT_OES:s.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(e,0,u,o,a,s)}else i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),e.bindFramebuffer.set(o.framebuffer)}(a,t,r,"globe"===t.transform.projection.name?.5:.25),a.clear({color:e.Color.transparent});for(var l=t.transform,c="globe"===l.projection.name,h=c?["PROJECTION_GLOBE_VIEW"]:null,p=c?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,f=[e.mercatorXfromLng(l.center.lng),e.mercatorYfromLat(l.center.lat)],d=0;d<i.length;d++){var v=i[d];if(!n.hasRenderableParent(v)){var m=n.getTile(v),y=m.getBucket(r);if(y&&y.projection.name===l.projection.name){var g=y.programConfigurations.get(r.id),_=t.useProgram("heatmap",g,h),T=t.transform.zoom;t.terrain&&t.terrain.setupElevationDraw(m,_),t.prepareDrawProgram(a,_,v.toUnwrapped());var E=l.projection.createInversionMatrix(l,v.canonical);_.draw(a,s.TRIANGLES,e.DepthMode.disabled,o,u,p,ur(t,v,m,E,f,T,r.paint.get("heatmap-intensity")),r.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,r.paint,t.transform.zoom,g,c?[y.globeExtVertexBuffer]:null)}}}a.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){var r=t.context,i=r.gl,a=n.heatmapFbo;if(a){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,a.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var s=n.colorRampTexture;s||(s=n.colorRampTexture=new e.Texture(r,n.colorRamp,i.RGBA)),s.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,i.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,function(e,t,n,r){return{u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}}(0,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}}(t,r))},line:function(t,n,r,i){if("translucent"===t.renderPass){var a=r.paint.get("line-opacity"),s=r.paint.get("line-width");if(0!==a.constantOr(1)&&0!==s.constantOr(1)){var o=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),u=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,c=r.paint.get("line-dasharray"),f=c.constantOr(1),d=r.layout.get("line-cap"),v=r.paint.get("line-pattern"),m=v.constantOr(1),y=r.paint.get("line-gradient"),g=m?"linePattern":"line",_=t.context,T=_.gl,E=function(e){var t=[];fr(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");var n=e.paint.get("line-trim-offset");0===n[0]&&0===n[1]||t.push("RENDER_LINE_TRIM_OFFSET");var r=e.paint.get("line-pattern").constantOr(1),i=1!==e.paint.get("line-opacity").constantOr(1);return!r&&i&&t.push("RENDER_LINE_ALPHA_DISCARD"),t}(r),x=E.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(x=!1);var b,I=p(i);try{var w=function(){var i=b.value,a=n.getTile(i);if(m&&!a.patternsLoaded())return"continue";var s=a.getBucket(r);if(!s)return"continue";t.prepareDrawTile();var p=s.programConfigurations.get(r.id),I=t.useProgram(g,p,E),w=v.constantOr(null);if(w&&a.imageAtlas){var k=a.imageAtlas.patternPositions[w.toString()];k&&p.setConstantPatternPositions(k)}var S=c.constantOr(null),R=d.constantOr(null);if(!m&&S&&R&&a.lineAtlas){var C=a.lineAtlas.getDash(S,R);C&&p.setConstantPatternPositions(C)}var D=r.paint.get("line-trim-offset"),A=h(D,2),O=A[0],N=A[1];if("round"===R||"square"===R){var M=1;O!==N&&(0===O&&(O-=M),1===N&&(N+=M))}var P=t.terrain?i.projMatrix:null,F=m?cr(t,a,r,P,l):lr(t,a,r,P,s.lineClipsArray.length,l,[O,N]);if(y){var L=s.gradients[r.id],U=L.texture;if(r.gradientVersion!==L.version){var Z=256;if(r.stepInterpolant){var B=n.getSource().maxzoom,z=i.canonical.z===B?Math.ceil(1<<t.transform.maxZoom-i.canonical.z):1;Z=e.clamp(e.nextPowerOfTwo(s.maxLineLength/e.EXTENT*1024*z),256,_.maxTextureSize)}L.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:Z,image:L.gradient||void 0,clips:s.lineClipsArray}),L.texture?L.texture.update(L.gradient):L.texture=new e.Texture(_,L.gradient,T.RGBA),L.version=r.gradientVersion,U=L.texture}_.activeTexture.set(T.TEXTURE1),U.bind(r.stepInterpolant?T.NEAREST:T.LINEAR,T.CLAMP_TO_EDGE)}f&&(_.activeTexture.set(T.TEXTURE0),a.lineAtlasTexture.bind(T.LINEAR,T.REPEAT),p.updatePaintBuffers()),m&&(_.activeTexture.set(T.TEXTURE0),a.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),p.updatePaintBuffers()),t.prepareDrawProgram(_,I,i.toUnwrapped());var G=function(n){I.draw(_,T.TRIANGLES,o,n,u,e.CullFaceMode.disabled,F,r.id,s.layoutVertexBuffer,s.indexBuffer,s.segments,r.paint,t.transform.zoom,p,[s.layoutVertexBuffer2])};if(x){var H=t.stencilModeForClipping(i).ref;0===H&&t.terrain&&_.clear({stencil:0});var j={func:T.EQUAL,mask:255};F.u_alpha_discard_threshold=.8,G(new e.StencilMode(j,H,255,T.KEEP,T.KEEP,T.INVERT)),F.u_alpha_discard_threshold=0,G(new e.StencilMode(j,H,255,T.KEEP,T.KEEP,T.KEEP))}else G(t.stencilModeForClipping(i))};for(I.s();!(b=I.n()).done;)w()}catch(k){I.e(k)}finally{I.f()}x&&(t.resetStencilClippingMasks(),t.terrain&&_.clear({stencil:0}))}}},fill:function(t,n,r,i){var a=r.paint.get("fill-color"),s=r.paint.get("fill-opacity");if(0!==s.constantOr(1)){var o=t.colorModeForRenderPass(),u=r.paint.get("fill-pattern"),l=t.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===a.constantOr(e.Color.transparent).a&&1===s.constantOr(0)?"opaque":"translucent";if(t.renderPass===l){var c=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);Ar(t,n,r,i,c,o,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){var h=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);Ar(t,n,r,i,h,o,!0)}}},"fill-extrusion":function(t,n,r,i){var a=r.paint.get("fill-extrusion-opacity");if(0!==a&&"translucent"===t.renderPass){var s=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==a||r.paint.get("fill-extrusion-pattern").constantOr(1))Or(t,n,r,i,s,e.StencilMode.disabled,e.ColorMode.disabled),Or(t,n,r,i,s,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{var o=t.colorModeForRenderPass();Or(t,n,r,i,s,e.StencilMode.disabled,o)}}},hillshade:function(t,n,r,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var a,s=t.context,o=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),u=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,c="translucent"!==t.renderPass||l?[{},i]:t.stencilConfigForOverlap(i),f=h(c,2),d=f[0],v=f[1],m=p(v);try{for(m.s();!(a=m.n()).done;){var y=a.value,g=n.getTile(y);if(g.needsHillshadePrepare&&"offscreen"===t.renderPass)On(t,g,r,o,e.StencilMode.disabled,u);else if("translucent"===t.renderPass){var _=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(y):d[y.overscaledZ];Dn(t,y,g,r,o,_,u)}}}catch(T){m.e(T)}finally{m.f()}s.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()}},raster:function(t,n,r,i,a,s){if("translucent"===t.renderPass&&0!==r.paint.get("raster-opacity")&&i.length){var o,u=t.context,l=u.gl,c=n.getSource(),f=t.useProgram("raster"),d=t.colorModeForRenderPass(),v=t.terrain&&t.terrain.renderingToTexture,m=c instanceof je||v?[{},i]:t.stencilConfigForOverlap(i),y=h(m,2),g=y[0],_=y[1],T=_[_.length-1].overscaledZ,E=!t.options.moving,x=p(_);try{for(x.s();!(o=x.n()).done;){var b=o.value,I=v?e.DepthMode.disabled:t.depthModeForSublayer(b.overscaledZ-T,1===r.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),w=b.toUnwrapped(),k=n.getTile(b);if(!v||k&&k.hasData()){var S=v?b.projMatrix:t.transform.calculateProjMatrix(w,E),R=t.terrain&&v?t.terrain.stencilModeForRTTOverlap(b):g[b.overscaledZ],C=s?0:r.paint.get("raster-fade-duration");k.registerFadeDuration(C);var D=n.findLoadedParent(b,0),A=Gn(k,D,n,t.transform,C),O=void 0,N=void 0;t.terrain&&t.terrain.prepareDrawTile();var M="nearest"===r.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;u.activeTexture.set(l.TEXTURE0),k.texture.bind(M,l.CLAMP_TO_EDGE),u.activeTexture.set(l.TEXTURE1),D?(D.texture.bind(M,l.CLAMP_TO_EDGE),O=Math.pow(2,D.tileID.overscaledZ-k.tileID.overscaledZ),N=[k.tileID.canonical.x*O%1,k.tileID.canonical.y*O%1]):k.texture.bind(M,l.CLAMP_TO_EDGE);var P=dr(S,N||[0,0],O||1,A,r,c instanceof je?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(u,f,w),c instanceof je)c.boundsBuffer&&c.boundsSegments&&f.draw(u,l.TRIANGLES,I,e.StencilMode.disabled,d,e.CullFaceMode.disabled,P,r.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{var F=t.getTileBoundsBuffers(k),L=F.tileBoundsBuffer,U=F.tileBoundsIndexBuffer,Z=F.tileBoundsSegments;f.draw(u,l.TRIANGLES,I,R,d,e.CullFaceMode.disabled,P,r.id,L,U,Z)}}}}catch(B){x.e(B)}finally{x.f()}t.resetStencilClippingMasks()}},background:function(t,n,r,i){var a=r.paint.get("background-color"),s=r.paint.get("background-opacity");if(0!==s){var o=t.context,u=o.gl,l=t.transform,c=l.tileSize,h=r.paint.get("background-pattern");if(!t.isPatternMissing(h)){var f=!h&&1===a.a&&1===s&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===f){var d,v=e.StencilMode.disabled,m=t.depthModeForSublayer(0,"opaque"===f?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),y=t.colorModeForRenderPass(),g=t.useProgram(h?"backgroundPattern":"background"),_=i;_||(d=t.getBackgroundTiles(),_=Object.values(d).map((function(e){return e.tileID}))),h&&(o.activeTexture.set(u.TEXTURE0),t.imageManager.bind(t.context));var T,E=p(_);try{for(E.s();!(T=E.n()).done;){var x=T.value,b=x.toUnwrapped(),I=i?x.projMatrix:t.transform.calculateProjMatrix(b);t.prepareDrawTile();var w=n?n.getTile(x):d?d[x.key]:new e.Tile(x,c,l.zoom,t),k=h?xr(I,s,t,h,{tileID:x,tileSize:c}):Er(I,s,a);t.prepareDrawProgram(o,g,b);var S=t.getTileBoundsBuffers(w),R=S.tileBoundsBuffer,C=S.tileBoundsIndexBuffer,D=S.tileBoundsSegments;g.draw(o,u.TRIANGLES,m,v,y,e.CullFaceMode.disabled,k,r.id,R,C,D)}}catch(A){E.e(A)}finally{E.f()}}}}},sky:function(t,n,r){var i=t.transform,a="mercator"===i.projection.name||"globe"===i.projection.name?1:e.smoothstep(7,8,i.zoom),s=r.paint.get("sky-opacity")*a;if(0!==s){var o=t.context,u=r.paint.get("sky-type"),l=new e.DepthMode(o.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),c=t.frameCounter/1e3%1;"atmosphere"===u?"offscreen"===t.renderPass?r.needsSkyboxCapture(t)&&(function(t,n,r,i){var a=t.context,s=a.gl,o=n.skyboxFbo;if(!o){o=n.skyboxFbo=a.createFramebuffer(32,32,!1),n.skyboxGeometry=new Vr(a),n.skyboxTexture=a.gl.createTexture(),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MAG_FILTER,s.LINEAR);for(var u=0;u<6;++u)s.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+u,0,s.RGBA,32,32,0,s.RGBA,s.UNSIGNED_BYTE,null)}a.bindFramebuffer.set(o.framebuffer),a.viewport.set([0,0,32,32]);var l=n.getCenter(t,!0),c=t.useProgram("skyboxCapture"),h=new Float64Array(16);e.identity(h),e.rotateY(h,h,.5*-Math.PI),Wr(a,n,c,h,l,0),e.identity(h),e.rotateY(h,h,.5*Math.PI),Wr(a,n,c,h,l,1),e.identity(h),e.rotateX(h,h,.5*-Math.PI),Wr(a,n,c,h,l,2),e.identity(h),e.rotateX(h,h,.5*Math.PI),Wr(a,n,c,h,l,3),e.identity(h),Wr(a,n,c,h,l,4),e.identity(h),e.rotateY(h,h,Math.PI),Wr(a,n,c,h,l,5),a.viewport.set([0,0,t.width,t.height])}(t,r),r.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,n,r,i,a){var s=t.context,o=s.gl,u=t.transform,l=t.useProgram("skybox");s.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_CUBE_MAP,n.skyboxTexture);var c=function(e,t,n,r,i){return{u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:r,u_temporal_offset:i}}(u.skyboxMatrix,n.getCenter(t,!1),0,i,a);t.prepareDrawProgram(s,l),l.draw(s,o.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,c,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,l,s,c):"gradient"===u&&"sky"===t.renderPass&&function(t,n,r,i,a){var s=t.context,o=s.gl,u=t.transform,l=t.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new Vr(s)),s.activeTexture.set(o.TEXTURE0);var c=n.colorRampTexture;c||(c=n.colorRampTexture=new e.Texture(s,n.colorRamp,o.RGBA)),c.bind(o.LINEAR,o.CLAMP_TO_EDGE);var h=function(t,n,r,i,a){return{u_matrix:t,u_color_ramp:0,u_center_direction:n,u_radius:e.degToRad(r),u_opacity:i,u_temporal_offset:a}}(u.skyboxMatrix,n.getCenter(t,!1),n.paint.get("sky-gradient-radius"),i,a);t.prepareDrawProgram(s,l),l.draw(s,o.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,l,s,c)}},debug:function(e,t,n){for(var r=0;r<n.length;r++)Zr(e,t,n[r])},custom:function(t,n,r,i){var a=t.context,s=r.implementation;if(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes("custom")||t.terrain&&(t.terrain.renderingToTexture||"offscreen"===t.renderPass)&&r.isLayerDraped()){if("offscreen"===t.renderPass){var o=s.prerender;if(o){if(t.setCustomLayerDefaults(),a.setColorMode(t.colorModeForRenderPass()),"globe"===t.transform.projection.name){var u=t.transform.pointMerc;o.call(s,a.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[u.x,u.y],t.transform.pixelsPerMeterRatio)}else o.call(s,a.gl,t.transform.customLayerMatrix());a.setDirty(),t.setBaseState()}}else if("translucent"===t.renderPass){if(t.terrain&&t.terrain.renderingToTexture){var l=s.renderToTile;if(l){var c=i[0].canonical,h=new e.MercatorCoordinate(c.x+i[0].wrap*(1<<c.z),c.y,c.z);a.setDepthMode(e.DepthMode.disabled),a.setStencilMode(e.StencilMode.disabled),a.setColorMode(t.colorModeForRenderPass()),t.setCustomLayerDefaults(),l.call(s,a.gl,h),a.setDirty(),t.setBaseState()}return}t.setCustomLayerDefaults(),a.setColorMode(t.colorModeForRenderPass()),a.setStencilMode(e.StencilMode.disabled);var p="3d"===s.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);if(a.setDepthMode(p),"globe"===t.transform.projection.name){var f=t.transform.pointMerc;s.render(a.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[f.x,f.y],t.transform.pixelsPerMeterRatio)}else s.render(a.gl,t.transform.customLayerMatrix());a.setDirty(),t.setBaseState(),a.bindFramebuffer.set(null)}}else e.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}},Kr=function(){function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];f(this,t),this.context=new Be(n,i),this.transform=r,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new on,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}return d(t,[{key:"updateTerrain",value:function(e,t){var n=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(n||this._terrain&&this._terrain.enabled){this._terrain||(this._terrain=new Wn(this,e));var r=this._terrain;this.transform.elevation=n?r:null,r.update(e,this.transform,t)}}},{key:"_updateFog",value:function(e){var t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)this.transform.fogCullDistSq=null;else{var n=t.getFovAdjustedRange(this.transform._fov),r=h(n,2),i=r[0],a=r[1];if(i>a)this.transform.fogCullDistSq=null;else{var s=i+.78*(a-i);this.transform.fogCullDistSq=s*s}}}},{key:"terrain",get:function(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}},{key:"resize",value:function(t,n){if(this.width=t*e.exported.devicePixelRatio,this.height=n*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style){var r,i=p(this.style.order);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.style._layers[a].resize()}}catch(s){i.e(s)}finally{i.f()}}}},{key:"setup",value:function(){var t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var i=new e.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var a=new e.StructArrayLayout4i8;a.emplaceBack(0,0,0,0),a.emplaceBack(e.EXTENT,0,e.EXTENT,0),a.emplaceBack(0,e.EXTENT,0,e.EXTENT),a.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(a,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var s=new e.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s);for(var o=new e.StructArrayLayout1ui2,u=0,l=[0,1,3,2,0];u<l.length;u++){var c=l[u];o.emplaceBack(c)}this.debugIndexBuffer=t.createIndexBuffer(o),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();var h=this.context.gl;this.stencilClearMode=new e.StencilMode({func:h.ALWAYS,mask:0},0,255,h.ZERO,h.ZERO,h.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new qr(this.context)}},{key:"getMercatorTileBoundsBuffers",value:function(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}},{key:"getTileBoundsBuffers",value:function(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}},{key:"clearStencil",value:function(){var t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,n.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,zn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}},{key:"resetStencilClippingMasks",value:function(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}},{key:"_renderTileClippingMasks",value:function(t,n,r){if(n&&this.currentStencilSource!==n.id&&t.isTileClipped()&&r&&0!==r.length){if(this._tileClippingMaskIDs&&!this.terrain){var i,a=!1,s=p(r);try{for(s.s();!(i=s.n()).done;){var o=i.value;if(void 0===this._tileClippingMaskIDs[o.key]){a=!0;break}}}catch(E){s.e(E)}finally{s.f()}if(!a)return}this.currentStencilSource=n.id;var u=this.context,l=u.gl;this.nextStencilID+r.length>256&&this.clearStencil(),u.setColorMode(e.ColorMode.disabled),u.setDepthMode(e.DepthMode.disabled);var c=this.useProgram("clippingMask");this._tileClippingMaskIDs={};var h,f=p(r);try{for(f.s();!(h=f.n()).done;){var d=h.value,v=n.getTile(d),m=this._tileClippingMaskIDs[d.key]=this.nextStencilID++,y=this.getTileBoundsBuffers(v),g=y.tileBoundsBuffer,_=y.tileBoundsIndexBuffer,T=y.tileBoundsSegments;c.draw(u,l.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:l.ALWAYS,mask:0},m,255,l.KEEP,l.KEEP,l.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,zn(d.projMatrix),"$clipping",g,_,T)}}catch(E){f.e(E)}finally{f.f()}}}},{key:"stencilModeFor3D",value:function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,n=this.context.gl;return new e.StencilMode({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}},{key:"stencilModeForClipping",value:function(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);var n=this.context.gl;return new e.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,n.KEEP,n.KEEP,n.REPLACE)}},{key:"stencilConfigForOverlap",value:function(t){var n=this.context.gl,i=t.sort((function(e,t){return t.overscaledZ-e.overscaledZ})),a=i[i.length-1].overscaledZ,s=i[0].overscaledZ-a+1;if(s>1){this.currentStencilSource=void 0,this.nextStencilID+s>256&&this.clearStencil();for(var o={},u=0;u<s;u++)o[u+a]=new e.StencilMode({func:n.GEQUAL,mask:255},u+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=s,[o,i]}return[r({},a,e.StencilMode.disabled),i]}},{key:"colorModeForRenderPass",value:function(){var t=this.context.gl;if(this._showOverdrawInspector){var n=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}},{key:"depthModeForSublayer",value:function(t,n,r){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}},{key:"opaquePassEnabledForLayer",value:function(){return this.currentLayer<this.opaquePassCutoff}},{key:"render",value:function(t,n){var r=this;this.style=t,this.options=n,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();var i=this.style.order,a=this.style._sourceCaches;for(var s in a){var o=a[s];o.used&&o.prepare(this.context)}var u={},l={},c={};for(var h in a){var f=a[h];u[h]=f.getVisibleCoordinates(),l[h]=u[h].slice().reverse(),c[h]=f.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var d=0;d<i.length;d++)if(this.style._layers[i[d]].is3D()){this.opaquePassCutoff=d;break}if(this.terrain&&(this.terrain.updateTileBinding(c),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),e.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";var v,m=p(i);try{for(m.s();!(v=m.n()).done;){var y=v.value,g=this.style._layers[y],_=t._getLayerSourceCache(g);if(g.hasOffscreenPass()&&!g.isHidden(this.transform.zoom)){var T=_?l[_.id]:void 0;("custom"===g.type||g.isSky()||T&&T.length)&&this.renderLayer(this,_,g,T)}}}catch(D){m.e(D)}finally{m.f()}if(this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var E=this.style._layers[i[this.currentLayer]],x=t._getLayerSourceCache(E);if(!E.isSky()){var b=x?l[x.id]:void 0;this._renderTileClippingMasks(E,x,b),this.renderLayer(this,x,E,b)}}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,n){var r=t.context,i=r.gl,a=t.transform,s=new e.DepthMode(i.LEQUAL,e.DepthMode.ReadOnly,[0,1]),o=t.useProgram("globeAtmosphere",null,"globe"===a.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),u=e.globeToMercatorTransition(a.zoom),l=n.properties.get("color").toArray01(),c=n.properties.get("high-color").toArray01(),h=n.properties.get("space-color").toArray01PremultipliedAlpha(),p=e.identity$1([]);e.rotateY$1(p,p,-e.degToRad(a._center.lng)),e.rotateX$1(p,p,e.degToRad(a._center.lat)),e.rotateZ$1(p,p,a.angle),e.rotateX$1(p,p,-a._pitch);var f=e.fromQuat(new Float32Array(16),p),d=e.mapValue(n.properties.get("star-intensity"),0,1,0,.25),v=5e-4,m=e.mapValue(n.properties.get("horizon-blend"),0,1,v,.25),y=e.globeUseCustomAntiAliasing(t,r,a)&&m===v?a.worldSize/(2*Math.PI*1.025)-1:a.globeRadius,g=t.frameCounter/1e3%1,_=e.length(a.globeCenterInViewSpace),T=Math.sqrt(Math.pow(_,2)-Math.pow(y,2)),E=Math.acos(T/_),x=function(t,n,r,i,a,s,o,u,l,c,h,p,f,d){return{u_frustum_tl:t,u_frustum_tr:n,u_frustum_br:r,u_frustum_bl:i,u_horizon:a,u_transition:s,u_fadeout_range:o,u_color:u,u_high_color:l,u_space_color:c,u_star_intensity:h,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:p,u_horizon_angle:f,u_rotation_matrix:d}}(a.frustumCorners.TL,a.frustumCorners.TR,a.frustumCorners.BR,a.frustumCorners.BL,a.frustumCorners.horizon,u,m,l,c,h,d,g,E,f);t.prepareDrawProgram(r,o);var b=t.atmosphereBuffer;b&&o.draw(r,i.TRIANGLES,s,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,x,"skybox",b.vertexBuffer,b.indexBuffer,b.segments)}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var I=this.style._layers[i[this.currentLayer]],w=t._getLayerSourceCache(I);I.isSky()&&this.renderLayer(this,w,I,w?l[w.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;){var k=this.style._layers[i[this.currentLayer]],S=t._getLayerSourceCache(k);if(k.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(k)){if(k.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer)}else{var R=S?("symbol"===k.type?c:l)[S.id]:void 0;this._renderTileClippingMasks(k,S,S?u[S.id]:void 0),this.renderLayer(this,S,k,R),++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){var C=null;e.values(this.style._layers).forEach((function(e){var n=t._getLayerSourceCache(e);n&&!e.isHidden(r.transform.zoom)&&(!C||C.getSource().maxzoom<n.getSource().maxzoom)&&(C=n)})),C&&this.options.showTileBoundaries&&Xr.debug(this,C,C.getVisibleCoordinates())}this.options.showPadding&&function(e){var t=e.transform.padding;Br(e,e.transform.height-(t.top||0),3,Mr),Br(e,t.bottom||0,3,Pr),zr(e,t.left||0,3,Fr),zr(e,e.transform.width-(t.right||0),3,Lr);var n=e.transform.centerPoint;!function(e,t,n,r){Gr(e,t-1,n-10,2,20,r),Gr(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,Ur)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}}},{key:"renderLayer",value:function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes(n.type)||e.terrain&&"custom"===n.type)&&Xr[n.type](e,t,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}},{key:"gpuTimingStart",value:function(e){if(this.options.gpuTiming){var t=this.context.extTimerQuery,n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}}},{key:"gpuTimingDeferredRenderStart",value:function(){if(this.options.gpuTimingDeferredRender){var e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t)}}},{key:"gpuTimingDeferredRenderEnd",value:function(){if(this.options.gpuTimingDeferredRender){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}}},{key:"gpuTimingEnd",value:function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}}},{key:"collectGpuTimers",value:function(){var e=this.gpuTimers;return this.gpuTimers={},e}},{key:"collectDeferredRenderGpuQueries",value:function(){var e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}},{key:"queryGpuTimers",value:function(e){var t={};for(var n in e){var r=e[n],i=this.context.extTimerQuery,a=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),t[n]=a}return t}},{key:"queryGpuTimeDeferredRender",value:function(e){if(!this.options.gpuTimingDeferredRender)return 0;var t,n=this.context.extTimerQuery,r=0,i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;r+=n.getQueryObjectEXT(a,n.QUERY_RESULT_EXT)/1e6,n.deleteQueryEXT(a)}}catch(s){i.e(s)}finally{i.f()}return r}},{key:"translatePosMatrix",value:function(t,n,r,i,a){if(!r[0]&&!r[1])return t;var s=a?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(s){var o=Math.sin(s),u=Math.cos(s);r=[r[0]*u-r[1]*o,r[0]*o+r[1]*u]}var l=[a?r[0]:W(n,r[0],this.transform.zoom),a?r[1]:W(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return e.translate(c,t,l),c}},{key:"saveTileTexture",value:function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}},{key:"getTileTexture",value:function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null}},{key:"isPatternMissing",value:function(e){return null===e||void 0!==e&&!this.imageManager.getPattern(e.toString())}},{key:"terrainRenderModeElevated",value:function(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}},{key:"currentGlobalDefines",value:function(){var e=this.terrain&&this.terrain.renderingToTexture,t=this.terrain&&0===this.terrain.exaggeration(),n=this.style&&this.style.fog,r=[];return this.terrainRenderModeElevated()&&r.push("TERRAIN"),"globe"===this.transform.projection.name&&r.push("GLOBE"),t&&r.push("ZERO_EXAGGERATION"),n&&!e&&0!==n.getOpacity(this.transform.pitch)&&r.push("FOG"),e&&r.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&r.push("OVERDRAW_INSPECTOR"),r}},{key:"useProgram",value:function(e,t,n){this.cache=this.cache||{};var r=n||[],i=this.currentGlobalDefines().concat(r),a=Yn.cacheKey(wn[e],e,i,t);return this.cache[a]||(this.cache[a]=new Yn(this.context,e,wn[e],t,br[e],i)),this.cache[a]}},{key:"setCustomLayerDefaults",value:function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}},{key:"setBaseState",value:function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}},{key:"initDebugOverlayCanvas",value:function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}},{key:"destroy",value:function(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}},{key:"prepareDrawTile",value:function(){this.terrain&&this.terrain.prepareDrawTile()}},{key:"prepareDrawProgram",value:function(t,n,r){if(!this.terrain||!this.terrain.renderingToTexture){var i=this.style.fog;if(i){var a=i.getOpacity(this.transform.pitch),s=function(t,n,r,i,a,s,o,u,l,c,h){var p=t.transform,f=n.properties.get("color").toArray01();f[3]=i;var d=t.frameCounter/1e3%1;return{u_fog_matrix:r?p.calculateFogTileMatrix(r):t.identityMat,u_fog_range:n.getFovAdjustedRange(p._fov),u_fog_color:f,u_fog_horizon_blend:n.properties.get("horizon-blend"),u_fog_temporal_offset:d,u_frustum_tl:a,u_frustum_tr:s,u_frustum_br:o,u_frustum_bl:u,u_globe_pos:l,u_globe_radius:c,u_viewport:h,u_globe_transition:e.globeToMercatorTransition(p.zoom),u_is_globe:+("globe"===p.projection.name)}}(this,i,r,a,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);n.setFogUniformValues(t,s)}}}},{key:"setTileLoadedFlag",value:function(e){this.tileLoaded=e}},{key:"saveCanvasCopy",value:function(){var e=this.canvasCopy();e&&(this.frameCopies.push(e),this.tileLoaded=!1)}},{key:"canvasCopy",value:function(){var e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}},{key:"getCanvasCopiesAndTimestamps",value:function(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}},{key:"averageElevationNeedsEasing",value:function(){if(!this.transform._elevation)return!1;var e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}},{key:"getBackgroundTiles",value:function(){var t,n=this._backgroundTiles,r=this._backgroundTiles={},i=this.transform.coveringTiles({tileSize:512}),a=p(i);try{for(a.s();!(t=a.n()).done;){var s=t.value;r[s.key]=n[s.key]||new e.Tile(s,512,this.transform.tileZoom,this)}}catch(o){a.e(o)}finally{a.f()}return r}},{key:"clearBackgroundTiles",value:function(){this._backgroundTiles={}}}]),t}(),Qr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(f(this,t),isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=n,this.left=r,this.right=i}return d(t,[{key:"interpolate",value:function(t,n,r){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,r)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,r)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,r)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,r)),this}},{key:"getCenter",value:function(t,n){var r=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.pointGeometry(r,i)}},{key:"equals",value:function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}},{key:"clone",value:function(){return new t(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),t}();function Jr(t,n){var r=e.getColumn(t,3);e.fromQuat(t,n),e.setColumn(t,3,r)}function $r(t,n){var r=e.identity$1([]);return e.rotateZ$1(r,r,-n),e.rotateX$1(r,r,-t),r}function ei(t,n){var r=[t[0],t[1],0],i=[n[0],n[1],0];if(e.length(r)>=1e-15){var a=e.normalize([],r);e.scale$2(i,a,e.dot(i,a)),n[0]=i[0],n[1]=i[1]}var s=e.cross([],n,t);if(e.len(s)<1e-15)return null;var o=Math.atan2(-s[1],s[0]);return $r(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),o)}var ti=function(){function t(e,n){f(this,t),this.position=e,this.orientation=n}return d(t,[{key:"position",get:function(){return this._position},set:function(t){if(t){var n=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(n.x=e.wrap(n.x,0,1)),this._position=n}else this._position=null}},{key:"lookAtPoint",value:function(t,n){if(this.orientation=null,this.position){var r=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,i=this.position,a=e.MercatorCoordinate.fromLngLat(t,r),s=[a.x-i.x,a.y-i.y,a.z-i.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=ei(s,n)}}},{key:"setPitchBearing",value:function(t,n){this.orientation=$r(e.degToRad(t),e.degToRad(-n))}}]),t}(),ni=function(){function t(n,r){f(this,t),this._transform=e.identity([]),this.orientation=r,this.position=n}return d(t,[{key:"mercatorPosition",get:function(){var t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}},{key:"position",get:function(){var t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]},set:function(t){var n;t&&e.setColumn(this._transform,3,[(n=t)[0],n[1],n[2],1])}},{key:"orientation",get:function(){return this._orientation},set:function(t){this._orientation=t||e.identity$1([]),t&&Jr(this._transform,this._orientation)}},{key:"getPitchBearing",value:function(){var e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}},{key:"setPitchBearing",value:function(e,t){this._orientation=$r(e,t),Jr(this._transform,this._orientation)}},{key:"forward",value:function(){var t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}},{key:"up",value:function(){var t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}},{key:"right",value:function(){var t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}},{key:"getCameraToWorld",value:function(t,n){var r=new Float64Array(16);return e.invert(r,this.getWorldToCamera(t,n)),r}},{key:"getWorldToCameraPosition",value:function(t,n,r){var i=this.position;e.scale$2(i,i,-t);var a=new Float64Array(16);return e.fromScaling(a,[r,r,r]),e.translate(a,a,i),a[10]*=n,a}},{key:"getWorldToCamera",value:function(t,n){var r=new Float64Array(16),i=new Float64Array(4),a=this.position;return e.conjugate(i,this._orientation),e.scale$2(a,a,-t),e.fromQuat(r,i),e.translate(r,r,a),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}},{key:"getCameraToClipPerspective",value:function(t,n,r,i){var a=new Float64Array(16);return e.perspective(a,t,n,r,i),a}},{key:"getDistanceToElevation",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0===t?0:e.mercatorZfromAltitude(t,n?e.latFromMercatorY(this.position[1]):this.position[1]),i=this.forward();return(r-this.position[2])/i[2]}},{key:"clone",value:function(){return new t(c(this.position),c(this.orientation))}}]),t}();function ri(t,n){var r=ai(t.projection,t.zoom,t.width,t.height),i=function(t,n,r,i,a){var s=new e.LngLat(r.lng-180*si,r.lat),o=new e.LngLat(r.lng+180*si,r.lat),u=t.project(s.lng,s.lat),l=t.project(o.lng,o.lat),c=-Math.atan2(l.y-u.y,l.x-u.x),h=e.MercatorCoordinate.fromLngLat(r);h.y=e.clamp(h.y,-.999975,.999975);var p=h.toLngLat(),f=t.project(p.lng,p.lat),d=e.MercatorCoordinate.fromLngLat(p);d.x+=si;var v=d.toLngLat(),m=t.project(v.lng,v.lat),y=ui(m.x-f.x,m.y-f.y,c),g=e.MercatorCoordinate.fromLngLat(p);g.y+=si;var _=g.toLngLat(),T=t.project(_.lng,_.lat),E=ui(T.x-f.x,T.y-f.y,c),x=Math.abs(y.x)/Math.abs(E.y),b=e.identity([]);e.rotateZ(b,b,-c*(1-(a?0:i)));var I=e.identity([]);return e.scale(I,I,[1,1-(1-x)*i,1]),I[4]=-E.x/E.y*i,e.rotateZ(I,I,c),e.multiply(I,b,I),I}(t.projection,0,t.center,r,n),a=ii(t);return e.scale(i,i,[a,a,1]),i}function ii(t){var n=t.projection,r=ai(t.projection,t.zoom,t.width,t.height),i=oi(n,t.center),a=oi(n,e.LngLat.convert(n.center));return Math.pow(2,i*r+(1-r)*a)}function ai(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,s=t.range;if(!s)return 0;var o=Math.min(a,Math.max(r,i)),u=Math.log(o/1024)/Math.LN2;return e.smoothstep(s[0]+u,s[1]+u,n)}var si=1/4e4;function oi(t,n){var r=e.clamp(n.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=new e.LngLat(n.lng-180*si,r),a=new e.LngLat(n.lng+180*si,r),s=t.project(i.lng,r),o=t.project(a.lng,r),u=e.MercatorCoordinate.fromLngLat(i),l=e.MercatorCoordinate.fromLngLat(a),c=o.x-s.x,h=o.y-s.y,p=l.x-u.x,f=l.y-u.y,d=Math.sqrt((p*p+f*f)/(c*c+h*h));return Math.log(d)/Math.LN2}function ui(e,t,n){var r=Math.cos(n),i=Math.sin(n);return{x:e*r-t*i,y:e*i+t*r}}var li=function(){function n(t,r,i,a,s,o,u){f(this,n),this.tileSize=512,this._renderWorldCopies=void 0===s||s,this._minZoom=t||0,this._maxZoom=r||22,this._minPitch=null==i?0:i,this._maxPitch=null==a?60:a,this.setProjection(o),this.setMaxBounds(u),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Qr,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new ni,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}return d(n,[{key:"clone",value:function(){var e=new n(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}},{key:"elevation",get:function(){return this._elevation},set:function(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}},{key:"updateElevation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||n)&&this._updateCameraOnTerrain(),(e||n)&&this._constrainCamera(t),this._calcMatrices()}},{key:"getProjection",value:function(){return e.pick(this.projection,["name","center","parallels"])}},{key:"setProjection",value:function(n){this.projectionOptions=n||{name:"mercator"};var r=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);var i=!t(r,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}},{key:"setMercatorFromTransition",value:function(){var t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});var n=t!==this.projection.name;return n&&this._calcMatrices(),n}},{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}},{key:"minPitch",get:function(){return this._minPitch},set:function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies},set:function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"cameraWorldSizeForFog",get:function(){var e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}},{key:"cameraWorldSize",get:function(){var e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}},{key:"pixelsPerMeter",get:function(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}},{key:"cameraPixelsPerMeter",get:function(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new e.pointGeometry(this.width,this.height)}},{key:"bearing",get:function(){return e.wrap(this.rotation,-180,180)},set:function(e){this.rotation=e}},{key:"rotation",get:function(){return-this.angle/Math.PI*180},set:function(t){var n,r=-t*Math.PI/180;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=(n=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n),function(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=Math.sin(n),u=Math.cos(n);e[0]=r*u+a*o,e[1]=i*u+s*o,e[2]=r*-o+a*u,e[3]=i*-o+s*u}(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(t){var n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}},{key:"aspect",get:function(){return this.width/this.height}},{key:"fovX",get:function(){return this._fov}},{key:"fovY",get:function(){var e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}},{key:"fov",set:function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.degToRad(t),this._calcMatrices())}},{key:"averageElevation",get:function(){return this._averageElevation},set:function(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}},{key:"zoom",get:function(){return this._zoom},set:function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}},{key:"_setZoom",value:function(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}},{key:"_updateCameraOnTerrain",value:function(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);var e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}},{key:"_updateSeaLevelZoom",value:function(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}},{key:"sampleAverageElevation",value:function(){if(!this._elevation)return 0;for(var t=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],r=this.horizonLineFromTop(),i=0,a=0,s=0;s<n.length;s++){var o=new e.pointGeometry(n[s][0]*this.width,r+n[s][1]*(this.height-r)),u=t.pointCoordinate(o);if(u){var l=1/Math.hypot(u[0]-this._camera.position[0],u[1]-this._camera.position[1]);i+=u[3]*l,a+=l}}return 0===a?NaN:i/a}},{key:"center",get:function(){return this._center},set:function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}},{key:"_updateZoomFromElevation",value:function(){if(null!=this._seaLevelZoom&&this._elevation){var e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*t,r=this._mercatorZfromZoom(e),i=this._mercatorZfromZoom(this._maxZoom),a=Math.max(r-n,i);this._setZoom(this._zoomFromMercatorZ(a))}}},{key:"padding",get:function(){return this._edgeInsets.toJSON()},set:function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}},{key:"computeZoomRelativeTo",value:function(t){var n,r=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));n=t.z<this._camera.position[2]?[r.x,r.y,r.z]:[t.x,t.y,t.z];var i=e.length(e.sub([],this._camera.position,n));return e.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}},{key:"setFreeCameraOptions",value:function(t){if(this.height&&(t.position||t.orientation)){this._updateCameraState();var n=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(t.orientation)),t.position){var r=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}}},{key:"getFreeCameraOptions",value:function(){this._updateCameraState();var t=this._camera.position,n=new ti;return n.position=new e.MercatorCoordinate(t[0],t[1],t[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}},{key:"_setCameraOrientation",value:function(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);var n=e.transformQuat([],[0,0,-1],t),r=e.transformQuat([],[0,-1,0],t);if(r[2]<0)return!1;var i=ei(n,r);return!!i&&(this._camera.orientation=i,!0)}},{key:"_setCameraPosition",value:function(t){var n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;t[2]=e.clamp(t[2],i/r,i/n),this._camera.position=t}},{key:"centerPoint",get:function(){return this._edgeInsets.getCenter(this.width,this.height)}},{key:"fovAboveCenter",get:function(){return this._fov*(.5+this.centerOffset.y/this.height)}},{key:"isPaddingEqual",value:function(e){return this._edgeInsets.equals(e)}},{key:"interpolatePadding",value:function(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}},{key:"coveringZoomLevel",value:function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}},{key:"getVisibleUnwrappedCoordinates",value:function(t){var n=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies)for(var r=this.pointCoordinate(new e.pointGeometry(0,0)),i=this.pointCoordinate(new e.pointGeometry(this.width,0)),a=this.pointCoordinate(new e.pointGeometry(this.width,this.height)),s=this.pointCoordinate(new e.pointGeometry(0,this.height)),o=Math.floor(Math.min(r.x,i.x,a.x,s.x)),u=Math.floor(Math.max(r.x,i.x,a.x,s.x)),l=1,c=o-l;c<=u+l;c++)0!==c&&n.push(new e.UnwrappedTileID(c,t));return n}},{key:"coveringTiles",value:function(t){var n=this,r=this.coveringZoomLevel(t),i=r,a=this.elevation&&!t.isTerrainDEM,s="mercator"===this.projection.name;if(void 0!==t.minzoom&&r<t.minzoom)return[];void 0!==t.maxzoom&&r>t.maxzoom&&(r=t.maxzoom);var o=this.locationCoordinate(this.center),u=this.center.lat,l=1<<r,c=[l*o.x,l*o.y,0],h="globe"===this.projection.name,p=!h,f=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,r,p),d=h?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),v=l*e.mercatorZfromAltitude(1,this.center.lat),m=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),y=[l*d.x,l*d.y,m*(p?1:v)],g=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),_=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?r:0,T=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,E=t.isTerrainDEM?-T:this._elevation?this._elevation.getMinElevationBelowMSL():0,x=this.projection.isReprojectedInTileSpace?ii(this):1,b=function(t){var r=1/4e4,i=new e.MercatorCoordinate(t.x+r,t.y,t.z),a=new e.MercatorCoordinate(t.x,t.y+r,t.z),s=t.toLngLat(),o=i.toLngLat(),u=a.toLngLat(),l=n.locationCoordinate(s),c=n.locationCoordinate(o),h=n.locationCoordinate(u),p=Math.hypot(c.x-l.x,c.y-l.y),f=Math.hypot(h.x-l.x,h.y-l.y);return Math.sqrt(p*f)*x/r},I=function(t){var r=T,i=E;return{aabb:e.tileAABB(n,l,0,0,0,t,i,r,n.projection),zoom:0,x:0,y:0,minZ:i,maxZ:r,wrap:t,fullyVisible:!1}},w=[],k=[],S=r,R=t.reparseOverscaled?i:r,C=function(e){return e*e},D=C((m-this._centerAltitude)*v),A=function(e){if(n._elevation&&e.tileID&&s){var t=n._elevation.getMinMaxForTile(e.tileID),r=e.aabb;t?(r.min[2]=t.min,r.max[2]=t.max,r.center[2]=(r.min[2]+r.max[2])/2):(e.shouldSplit=O(e),e.shouldSplit||(r.min[2]=r.max[2]=r.center[2]=n._centerAltitude))}},O=function(t){if(t.zoom<_)return!0;if(t.zoom===S)return!1;if(null!=t.shouldSplit)return t.shouldSplit;var r=t.aabb.distanceX(y),s=t.aabb.distanceY(y),o=D,l=1;if(h){o=C(t.aabb.distanceZ(y));var c=Math.pow(2,t.zoom),p=e.latFromMercatorY((t.y+1)/c),f=e.latFromMercatorY(t.y/c),d=Math.min(Math.max(u,p),f),m=e.circumferenceAtLatitude(d)/e.circumferenceAtLatitude(u);if(l=d===u?1/Math.max(1,n._mercatorScaleRatio-.3):Math.min(1,m/n._mercatorScaleRatio),n.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===S-1&&m>=.9)return!0}else if(a&&(o=C(t.aabb.distanceZ(y)*v)),n.projection.isReprojectedInTileSpace&&i<=5){var T=Math.pow(2,t.zoom),E=b(new e.MercatorCoordinate((t.x+.5)/T,(t.y+.5)/T));l=E>.85?1:E}var x=r*r+s*s+o,I=C((1<<S-t.zoom)*g*l*function(e,t){if(t*C(.707)<e)return 1;var n=Math.sqrt(t/e);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)}(Math.max(o,D),x));return x<I};if(this.renderWorldCopies)for(var N=1;N<=3;N++)w.push(I(-N)),w.push(I(N));for(w.push(I(0));w.length>0;){var M=w.pop(),P=M.x,F=M.y,L=M.fullyVisible;if(!L){var U=M.aabb.intersects(f);if(0===U)continue;L=2===U}if(M.zoom!==S&&O(M))for(var Z=0;Z<4;Z++){var B=(P<<1)+Z%2,z=(F<<1)+(Z>>1),G={aabb:s?M.aabb.quadrant(Z):e.tileAABB(this,l,M.zoom+1,B,z,M.wrap,M.minZ,M.maxZ,this.projection),zoom:M.zoom+1,x:B,y:z,wrap:M.wrap,fullyVisible:L,tileID:void 0,shouldSplit:void 0,minZ:M.minZ,maxZ:M.maxZ};a&&!h&&(G.tileID=new e.OverscaledTileID(M.zoom+1===S?R:M.zoom+1,M.wrap,M.zoom+1,B,z),A(G)),w.push(G)}else{var H=M.zoom===S?R:M.zoom;if(t.minzoom&&t.minzoom>H)continue;var j=c[0]-(.5+P+(M.wrap<<M.zoom))*(1<<r-M.zoom),V=c[1]-.5-F,W=M.tileID?M.tileID:new e.OverscaledTileID(H,M.wrap,M.zoom,P,F);k.push({tileID:W,distanceSq:j*j+V*V})}}if(this.fogCullDistSq){var Y=this.fogCullDistSq,q=this.horizonLineFromTop();k=k.filter((function(r){var i=[0,0,0,1],a=[e.EXTENT,e.EXTENT,0,1],s=n.calculateFogTileMatrix(r.tileID.toUnwrapped());e.transformMat4$1(i,i,s),e.transformMat4$1(a,a,s);var o=e.getAABBPointSquareDist(i,a);if(0===o)return!0;var u=!1,l=n._elevation;if(l&&o>Y&&0!==q){var c,h=n.calculateProjMatrix(r.tileID.toUnwrapped());t.isTerrainDEM||(c=l.getMinMaxForTile(r.tileID)),c||(c={min:E,max:T});var p=e.furthestTileCorner(n.rotation),f=[p[0]*e.EXTENT,p[1]*e.EXTENT,c.max];e.transformMat4(f,f,h),u=(1-f[1])*n.height*.5<q}return o<Y||u}))}return k.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}},{key:"unmodified",get:function(){return this._unmodified}},{key:"zoomScale",value:function(e){return Math.pow(2,e)}},{key:"scaleZoom",value:function(e){return Math.log(e)/Math.LN2}},{key:"project",value:function(t){var n=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),r=this.projection.project(t.lng,n);return new e.pointGeometry(r.x*this.worldSize,r.y*this.worldSize)}},{key:"unproject",value:function(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}},{key:"point",get:function(){return this.project(this.center)}},{key:"pointMerc",get:function(){return this.point._div(this.worldSize)}},{key:"pixelsPerMeterRatio",get:function(){return this.pixelsPerMeter/e.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}},{key:"setLocationAtPoint",value:function(t,n){var r,i,a=this.centerPoint;if("globe"===this.projection.name){var s=this.worldSize;r=(n.x-a.x)/s,i=(n.y-a.y)/s}else{var o=this.pointCoordinate(n),u=this.pointCoordinate(a);r=o.x-u.x,i=o.y-u.y}var l=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(l.x-r,l.y-i))}},{key:"setLocation",value:function(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}},{key:"locationPoint",value:function(e){return this.projection.locationPoint(this,e)}},{key:"locationPoint3D",value:function(e){return this.projection.locationPoint(this,e,!0)}},{key:"pointLocation",value:function(e){return this.coordinateLocation(this.pointCoordinate(e))}},{key:"pointLocation3D",value:function(e){return this.coordinateLocation(this.pointCoordinate3D(e))}},{key:"locationCoordinate",value:function(t,n){var r=n?e.mercatorZfromAltitude(n,t.lat):void 0,i=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(i.x,i.y,r)}},{key:"coordinateLocation",value:function(e){return this.projection.unproject(e.x,e.y)}},{key:"pointRayIntersection",value:function(t,n){var r=null!=n?n:this._centerAltitude,i=[t.x,t.y,0,1],a=[t.x,t.y,1,1];e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(a,a,this.pixelMatrixInverse);var s=a[3];e.scale$1(i,i,1/i[3]),e.scale$1(a,a,1/s);var o=i[2],u=a[2];return{p0:i,p1:a,t:o===u?0:(r-o)/(u-o)}}},{key:"screenPointToMercatorRay",value:function(t){var n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];return e.transformMat4$1(n,n,this.pixelMatrixInverse),e.transformMat4$1(r,r,this.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),e.scale$1(r,r,1/r[3]),n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,e.scale$1(n,n,1/this.worldSize),e.scale$1(r,r,1/this.worldSize),new e.Ray([n[0],n[1],n[2]],e.normalize([],e.sub([],r,n)))}},{key:"rayIntersectionCoordinate",value:function(t){var n=t.p0,r=t.p1,i=t.t,a=e.mercatorZfromAltitude(n[2],this._center.lat),s=e.mercatorZfromAltitude(r[2],this._center.lat);return new e.MercatorCoordinate(e.number(n[0],r[0],i)/this.worldSize,e.number(n[1],r[1],i)/this.worldSize,e.number(a,s,i))}},{key:"pointCoordinate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._centerAltitude;return this.projection.pointCoordinate(this,e.x,e.y,t)}},{key:"pointCoordinate3D",value:function(t){if(!this.elevation)return this.pointCoordinate(t);var n=this.projection.pointCoordinate3D(this,t.x,t.y);if(n)return new e.MercatorCoordinate(n[0],n[1],n[2]);var r=0,i=this.horizonLineFromTop();if(t.y>i)return this.pointCoordinate(t);for(var a=.02*i,s=t.clone(),o=0;o<10&&i-r>a;o++){s.y=e.number(r,i,.66);var u=this.projection.pointCoordinate3D(this,s.x,s.y);u?(i=s.y,n=u):r=s.y}return n?new e.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(t)}},{key:"isPointAboveHorizon",value:function(e){return this.projection.isPointAboveHorizon(this,e)}},{key:"_coordinatePoint",value:function(t,n){var r=n&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,i=[t.x*this.worldSize,t.y*this.worldSize,r+t.toAltitude(),1];return e.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new e.pointGeometry(i[0]/i[3],i[1]/i[3]):new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}},{key:"_getBoundsNonRectangular",value:function(){var t=this,n=this._edgeInsets,r=n.top,i=n.left,a=this.height-this._edgeInsets.bottom,s=this.width-this._edgeInsets.right,o=this.pointLocation3D(new e.pointGeometry(i,r)),u=this.pointLocation3D(new e.pointGeometry(s,r)),l=this.pointLocation3D(new e.pointGeometry(s,a)),c=this.pointLocation3D(new e.pointGeometry(i,a)),p=Math.min(o.lng,u.lng,l.lng,c.lng),f=Math.max(o.lng,u.lng,l.lng,c.lng),d=Math.min(o.lat,u.lat,l.lat,c.lat),v=Math.max(o.lat,u.lat,l.lat,c.lat),m=Math.pow(2,-this.zoom)/16*270,y="globe"===this.projection.name?1:4,g=function n(r,i,a,s,o){var u=(r+a)/2,l=(i+s)/2,c=new e.pointGeometry(u,l),h=t.pointLocation3D(c),g=h.lng,_=h.lat,T=Math.max(0,p-g,d-_,g-f,_-v);p=Math.min(p,g),f=Math.max(f,g),d=Math.min(d,_),v=Math.max(v,_),(o<y||T>m)&&(n(r,i,u,l,o+1),n(u,l,a,s,o+1))};if(g(i,r,s,r,1),g(s,r,s,a,1),g(s,a,i,a,1),g(i,a,i,r,1),"globe"===this.projection.name){var _=e.polesInViewport(this),T=h(_,2),E=T[0],x=T[1];E?(v=90,f=180,p=-180):x&&(d=-90,f=180,p=-180)}return new e.LngLatBounds(new e.LngLat(p,d),new e.LngLat(f,v))}},{key:"_getBoundsRectangular",value:function(t,n){var r=this._edgeInsets,i=r.top,a=r.left,s=this.height-this._edgeInsets.bottom,o=this.width-this._edgeInsets.right,u=new e.pointGeometry(a,i),l=new e.pointGeometry(o,i),c=new e.pointGeometry(o,s),h=new e.pointGeometry(a,s),p=this.pointCoordinate(u,t),f=this.pointCoordinate(l,t),d=this.pointCoordinate(c,n),v=this.pointCoordinate(h,n),m=function(e,t){return(t.y-e.y)/(t.x-e.x)};return p.y>1&&f.y>=0?p=new e.MercatorCoordinate((1-v.y)/m(v,p)+v.x,1):p.y<0&&f.y<=1&&(p=new e.MercatorCoordinate(-v.y/m(v,p)+v.x,0)),f.y>1&&p.y>=0?f=new e.MercatorCoordinate((1-d.y)/m(d,f)+d.x,1):f.y<0&&p.y<=1&&(f=new e.MercatorCoordinate(-d.y/m(d,f)+d.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(p)).extend(this.coordinateLocation(f)).extend(this.coordinateLocation(v)).extend(this.coordinateLocation(d))}},{key:"_getBoundsRectangularTerrain",value:function(){var e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBoundsRectangular(0,0);var t=e.visibleDemTiles.reduce((function(e,t){if(t.dem){var n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(t.min*e.exaggeration(),t.max*e.exaggeration())}},{key:"getBounds",value:function(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}},{key:"horizonLineFromTop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,n):n}},{key:"getMaxBounds",value:function(){return this.maxBounds}},{key:"setMaxBounds",value:function(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}},{key:"calculatePosMatrix",value:function(e,t){return this.projection.createTileMatrix(this,t,e)}},{key:"calculateDistanceTileData",value:function(t){var n=t.key,r=this._distanceTileDataCache;if(r[n])return r[n];var i=t.canonical,a=1/this.height,s=this.cameraWorldSize,o=s/this.zoomScale(i.z),u=(i.x+Math.pow(2,i.z)*t.wrap)*o,l=i.y*o,c=this.point;c.x*=s/this.worldSize,c.y*=s/this.worldSize;var h=this.angle,p=Math.sin(-h),f=-Math.cos(-h);return r[n]={bearing:[p,f],center:[(c.x-u)*a,(c.y-l)*a],scale:o/e.EXTENT*a},r[n]}},{key:"calculateFogTileMatrix",value:function(t){var n=t.key,r=this._fogTileMatrixCache;if(r[n])return r[n];var i=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return e.multiply(i,this.worldToFogMatrix,i),r[n]=new Float32Array(i),r[n]}},{key:"calculateProjMatrix",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.key,i=n?this._alignedProjMatrixCache:this._projMatrixCache;if(i[r])return i[r];var a=this.calculatePosMatrix(t,this.worldSize);return e.multiply(a,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,a),i[r]=new Float32Array(a),i[r]}},{key:"calculatePixelsToTileUnitsMatrix",value:function(t){var n=t.tileID.key,r=this._pixelsToTileUnitsCache;if(r[n])return r[n];var i=function(t,n){var r,i,a,s,o,u,l,c,h=t.tileTransform.scale*e.EXTENT/(t.tileSize*Math.pow(2,n.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return r=new Float32Array(4),s=(i=n.inverseAdjustmentMatrix)[1],o=i[2],u=i[3],c=(a=[h,h])[1],r[0]=i[0]*(l=a[0]),r[1]=s*l,r[2]=o*c,r[3]=u*c,r}(t,this);return r[n]=i,r[n]}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"globeToMercatorMatrix",value:function(){if("globe"===this.projection.name){var t=1/this.worldSize,n=e.fromScaling([],[t,t,t]);return e.multiply(n,n,this.globeMatrix),n}}},{key:"recenterOnTerrain",value:function(){if(this._elevation&&"globe"!==this.projection.name){var t=this._elevation;this._updateCameraState();var n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=this._camera.forward(),a=e.mercatorZfromAltitude(1,this._center.lat);r[2]/=a,i[2]/=a,e.normalize(i,i);var s=t.raycast(r,i,t.exaggeration());if(s){var o=e.scaleAndAdd([],r,i,s),u=new e.MercatorCoordinate(o[0],o[1],e.mercatorZfromAltitude(o[2],e.latFromMercatorY(o[1]))),l=(u.z+e.length([u.x-r[0],u.y-r[1],u.z-r[2]*a]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(l),this._centerAltitude=u.toAltitude(),this._center=this.coordinateLocation(u),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}}},{key:"_constrainCamera",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._elevation){var n=this._elevation,r=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(r),s=n.getAtPointOrZero(a(e.MercatorCoordinate,c(i))),o=this.pixelsPerMeter/this.worldSize*s,u=this._minimumHeightOverTerrain(),l=i[2]-o;if(l<=u)if(l<0||t){var h=this.locationCoordinate(this._center,this._centerAltitude),p=[i[0],i[1],h.z-i[2]],f=e.length(p);p[2]-=(u-l)/this._pixelsPerMercatorPixel;var d=e.length(p);if(0===d)return;e.scale$2(p,p,f/d*this._pixelsPerMercatorPixel),this._camera.position=[i[0],i[1],h.z*this._pixelsPerMercatorPixel-p[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}}},{key:"_constrain",value:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){var n=this.center;return n.lat=e.clamp(n.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(n.lng=e.clamp(n.lng,this.minLng,this.maxLng)),this.center=n,void(this._constraining=!1)}var r=this._unmodified,i=this.point,a=i.x,s=i.y,o=0,u=a,l=s,c=this.width/2,h=this.height/2,p=this.worldMinY*this.scale,f=this.worldMaxY*this.scale;if(s-h<p&&(l=p+h),s+h>f&&(l=f-h),f-p<this.height&&(o=Math.max(o,this.height/(f-p)),l=(f+p)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){var d=this.worldMinX*this.scale,v=this.worldMaxX*this.scale,m=this.worldSize/2-(d+v)/2;(u=(a+m+this.worldSize)%this.worldSize-m)-c<d&&(u=d+c),u+c>v&&(u=v-c),v-d<this.width&&(o=Math.max(o,this.width/(v-d)),u=(v+d)/2)}u===a&&l===s||(this.center=this.unproject(new e.pointGeometry(u,l))),o&&(this.zoom+=this.scaleZoom(o)),this._constrainCamera(),this._unmodified=r,this._constraining=!1}}},{key:"_minZoomForBounds",value:function(){var e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}},{key:"_maxCameraBoundsDistance",value:function(){return this._mercatorZfromZoom(this._minZoomForBounds())}},{key:"_calcMatrices",value:function(){if(this.height){var t=this.centerOffset,n=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));var r=ai(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,r),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;var i="meters"===this.projection.zAxisUnit?n:1,a=this._camera.getWorldToCamera(this.worldSize,i),s=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);s[8]=2*-t.x/this.width,s[9]=2*t.y/this.height;var o=e.mul([],s,a);if(this.projection.isReprojectedInTileSpace){var u=this.locationCoordinate(this.center),l=e.identity([]);e.translate(l,l,[u.x*this.worldSize,u.y*this.worldSize,0]),e.multiply(l,l,ri(this)),e.translate(l,l,[-u.x*this.worldSize,-u.y*this.worldSize,0]),e.multiply(o,o,l),this.inverseAdjustmentMatrix=function(e){var t=ri(e,!0);return A([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],o,[this.worldSize,this.worldSize,this.worldSize/i,1]),this.projMatrix=o,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);var c=e.invert([],s);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(c,this.horizonLineFromTop(),this.height);var h=new Float32Array(16);e.identity(h),e.scale(h,h,[1,-1,1]),e.rotateX(h,h,this._pitch),e.rotateZ(h,h,this.angle);var p=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),f=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;p[8]=2*-t.x/this.width,p[9]=2*(t.y+f)/this.height,this.skyboxMatrix=e.multiply(h,p,h);var d=this.point,v=d.x,m=d.y,y=this.width%2/2,g=this.height%2/2,_=Math.cos(this.angle),T=Math.sin(this.angle),E=v-Math.round(v)+_*y+T*g,x=m-Math.round(m)+_*g+T*y,b=new Float64Array(o);if(e.translate(b,b,[E>.5?E-1:E,x>.5?x-1:x,0]),this.alignedProjMatrix=b,o=e.create(),e.scale(o,o,[this.width/2,-this.height/2,1]),e.translate(o,o,[1,-1,0]),this.labelPlaneMatrix=o,o=e.create(),e.scale(o,o,[1,-1,1]),e.translate(o,o,[-1,-1,0]),e.scale(o,o,[2/this.width,2/this.height,1]),this.glCoordMatrix=o,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},!(o=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=o,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);var I=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(I,I,a),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=o;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}}},{key:"_calcFogMatrices",value:function(){this._fogTileMatrixCache={};var t=this.cameraWorldSizeForFog,n=this.cameraPixelsPerMeter,r=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,a=[t,t,n];e.scale$2(a,a,i),e.scale$2(r,r,-1),e.multiply$2(r,r,a);var s=e.create();e.translate(s,s,r),e.scale(s,s,a),this.mercatorFogMatrix=s,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,n,i)}},{key:"_computeCameraPosition",value:function(e){var t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),r=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[r.x/this.worldSize-n[0]*i,r.y/this.worldSize-n[1]*i,e/this.worldSize*this._centerAltitude-n[2]*i]}},{key:"_updateCameraState",value:function(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}},{key:"_translateCameraConstrained",value:function(t){var n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=this._camera.position[2],i=t[2],a=1;this.projection.wrap&&(this.center=this.center.wrap()),i>0&&(a=Math.min((n-r)/i,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,a),this._updateStateFromCamera()}},{key:"_updateStateFromCamera",value:function(){var t=this._camera.position,n=this._camera.forward(),r=this._camera.getPitchBearing(),i=r.pitch,a=r.bearing,s=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,o=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),u=Math.max((t[2]-s)/Math.cos(i),o),l=this._zoomFromMercatorZ(u);e.scaleAndAdd(t,t,n,u),this._pitch=e.clamp(i,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(a,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}},{key:"_worldSizeFromZoom",value:function(e){return Math.pow(2,e)*this.tileSize}},{key:"_mercatorZfromZoom",value:function(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}},{key:"_minimumHeightOverTerrain",value:function(){var e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(e)}},{key:"_zoomFromMercatorZ",value:function(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}},{key:"zoomFromMercatorZAdjusted",value:function(t){for(var n=0,r=e.GLOBE_ZOOM_THRESHOLD_MAX,i=0,a=1/0;r-n>1e-6&&r>n;){var s=n+.5*(r-n),o=this.tileSize*Math.pow(2,s),u=this.getCameraToCenterDistance(this.projection,s,o),l=this.scaleZoom(u/(t*this.tileSize)),c=Math.abs(s-l);c<a&&(a=c,i=s),s<l?n=s:r=s}return i}},{key:"_terrainEnabled",value:function(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}},{key:"anyCornerOffEdge",value:function(t,n){var r=Math.min(t.x,n.x),i=Math.max(t.x,n.x),a=Math.min(t.y,n.y),s=Math.max(t.y,n.y);if(a<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;for(var o=[new e.pointGeometry(r,a),new e.pointGeometry(i,s),new e.pointGeometry(r,s),new e.pointGeometry(i,a)],u=this.renderWorldCopies?-3:0,l=this.renderWorldCopies?4:1,c=0,h=o;c<h.length;c++){var p=h[c],f=this.pointRayIntersection(p);if(f.t<0)return!0;var d=this.rayIntersectionCoordinate(f);if(d.x<u||d.y<0||d.x>l||d.y>1)return!0}return!1}},{key:"isHorizonVisible",value:function(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.pointGeometry(0,0),new e.pointGeometry(this.width,this.height))}},{key:"zoomDeltaToMovement",value:function(t,n){var r=e.length(e.sub([],this._camera.position,t)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}},{key:"getCameraPoint",value:function(){if("globe"===this.projection.name){var t=function(t,n){var r=h(t,3),i=[r[0],r[1],r[2],1];e.transformMat4$1(i,i,n);var a=i[3]=Math.max(i[3],1e-6);return i[0]/=a,i[1]/=a,i[2]/=a,i}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.pointGeometry(t[0],t[1])}var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.pointGeometry(0,n))}},{key:"getCameraToCenterDistance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.worldSize,r=ai(e,t,this.width,this.height,1024),i=e.pixelSpaceConversion(this.center.lat,n,r);return.5/Math.tan(.5*this._fov)*this.height*i}},{key:"getWorldToCameraMatrix",value:function(){var t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.multiply(t,t,this.globeMatrix),t}}]),n}();function ci(e,t){var n=!1,r=null,i=function i(){r=null,n&&(e(),r=setTimeout(i,t),n=!1)};return function(){return n=!0,r||i(),r}}var hi=function(){function t(n){f(this,t),this._hashName=n&&encodeURIComponent(n),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ci(this._updateHashUnthrottled.bind(this),300)}return d(t,[{key:"addTo",value:function(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}},{key:"remove",value:function(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}},{key:"getHashString",value:function(){var t=this._map;if(!t)return"";var n=pi(t);if(this._hashName){var r=this._hashName,i=!1,a=e.window.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===r?(i=!0,"".concat(t,"=").concat(n)):e})).filter((function(e){return e}));return i||a.push("".concat(r,"=").concat(n)),"#".concat(a.join("&"))}return"#".concat(n)}},{key:"_getCurrentHash",value:function(){var t,n=this,r=e.window.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(e){return e.split("=")})).forEach((function(e){e[0]===n._hashName&&(t=e)})),(t&&t[1]||"").split("/")):r.split("/")}},{key:"_onHashChange",value:function(){var e=this._map;if(!e)return!1;var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(e){return isNaN(e)}))){var n=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:n,pitch:+(t[4]||0)}),!0}return!1}},{key:"_updateHashUnthrottled",value:function(){var t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}]),t}();function pi(e,t){var n=e.getCenter(),r=Math.round(100*e.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,i),s=Math.round(n.lng*a)/a,o=Math.round(n.lat*a)/a,u=e.getBearing(),l=e.getPitch(),c=t?"/".concat(s,"/").concat(o,"/").concat(r):"".concat(r,"/").concat(o,"/").concat(s);return(u||l)&&(c+="/"+Math.round(10*u)/10),l&&(c+="/".concat(Math.round(l))),c}var fi={linearity:.3,easing:e.bezier(0,0,.3,1)},di=e.extend({deceleration:2500,maxSpeed:1400},fi),vi=e.extend({deceleration:20,maxSpeed:1400},fi),mi=e.extend({deceleration:1e3,maxSpeed:360},fi),yi=e.extend({deceleration:1e3,maxSpeed:90},fi),gi=function(){function t(e){f(this,t),this._map=e,this.clear()}return d(t,[{key:"clear",value:function(){this._inertiaBuffer=[]}},{key:"record",value:function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertiaBuffer,n=e.exported.now();t.length>0&&n-t[0].time>160;)t.shift()}},{key:"_onMoveEnd",value:function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){var n,r={zoom:0,bearing:0,pitch:0,pan:new e.pointGeometry(0,0),pinchAround:void 0,around:void 0},i=p(this._inertiaBuffer);try{for(i.s();!(n=i.n()).done;){var a=n.value.settings;r.zoom+=a.zoomDelta||0,r.bearing+=a.bearingDelta||0,r.pitch+=a.pitchDelta||0,a.panDelta&&r.pan._add(a.panDelta),a.around&&(r.around=a.around),a.pinchAround&&(r.pinchAround=a.pinchAround)}}catch(d){i.e(d)}finally{i.f()}var s=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,o={};if(r.pan.mag()){var u=Ti(r.pan.mag(),s,e.extend({},di,t||{}));o.offset=r.pan.mult(u.amount/r.pan.mag()),o.center=this._map.transform.center,_i(o,u)}if(r.zoom){var l=Ti(r.zoom,s,vi);o.zoom=this._map.transform.zoom+l.amount,_i(o,l)}if(r.bearing){var c=Ti(r.bearing,s,mi);o.bearing=this._map.transform.bearing+e.clamp(c.amount,-179,179),_i(o,c)}if(r.pitch){var h=Ti(r.pitch,s,yi);o.pitch=this._map.transform.pitch+h.amount,_i(o,h)}if(o.zoom||o.bearing){var f=void 0===r.pinchAround?r.around:r.pinchAround;o.around=f?this._map.unproject(f):this._map.getCenter()}return this.clear(),o.noMoveStart=!0,o}}}]),t}();function _i(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function Ti(t,n,r){var i=r.maxSpeed,a=r.linearity,s=r.deceleration,o=e.clamp(t*a/(n/1e3),-i,i),u=Math.abs(o)/(s*a);return{easing:r.easing,duration:1e3*u,amount:o*(u/2)}}var Ei=function(t){v(r,t);var n=m(r);function r(t,i,a){var s,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};f(this,r);var u=S(i.getCanvasContainer(),a),l=i.unproject(u);return(s=n.call(this,t,e.extend({point:u,lngLat:l,originalEvent:a},o)))._defaultPrevented=!1,s.target=i,s}return d(r,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),r}(e.Event),xi=function(t){v(r,t);var n=m(r);function r(t,i,a){var s;f(this,r);var o="touchend"===t?a.changedTouches:a.touches,u=R(i.getCanvasContainer(),o),l=u.map((function(e){return i.unproject(e)})),c=u.reduce((function(e,t,n,r){return e.add(t.div(r.length))}),new e.pointGeometry(0,0));return(s=n.call(this,t,{points:u,point:c,lngLats:l,lngLat:i.unproject(c),originalEvent:a}))._defaultPrevented=!1,s}return d(r,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),r}(e.Event),bi=function(e){v(n,e);var t=m(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,{originalEvent:i}))._defaultPrevented=!1,a}return d(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(e.Event),Ii=function(){function t(e,n){f(this,t),this._map=e,this._clickTolerance=n.clickTolerance}return d(t,[{key:"reset",value:function(){this._mousedownPos=void 0}},{key:"wheel",value:function(e){return this._firePreventable(new bi(e.type,this._map,e))}},{key:"mousedown",value:function(e,t){return this._mousedownPos=t,this._firePreventable(new Ei(e.type,this._map,e))}},{key:"mouseup",value:function(e){this._map.fire(new Ei(e.type,this._map,e))}},{key:"preclick",value:function(t){var n=e.extend({},t);n.type="preclick",this._map.fire(new Ei(n.type,this._map,n))}},{key:"click",value:function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new Ei(e.type,this._map,e)))}},{key:"dblclick",value:function(e){return this._firePreventable(new Ei(e.type,this._map,e))}},{key:"mouseover",value:function(e){this._map.fire(new Ei(e.type,this._map,e))}},{key:"mouseout",value:function(e){this._map.fire(new Ei(e.type,this._map,e))}},{key:"touchstart",value:function(e){return this._firePreventable(new xi(e.type,this._map,e))}},{key:"touchmove",value:function(e){this._map.fire(new xi(e.type,this._map,e))}},{key:"touchend",value:function(e){this._map.fire(new xi(e.type,this._map,e))}},{key:"touchcancel",value:function(e){this._map.fire(new xi(e.type,this._map,e))}},{key:"_firePreventable",value:function(e){if(this._map.fire(e),e.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),t}(),wi=function(){function e(t){f(this,e),this._map=t}return d(e,[{key:"reset",value:function(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}},{key:"mousemove",value:function(e){this._map.fire(new Ei(e.type,this._map,e))}},{key:"mousedown",value:function(){this._delayContextMenu=!0}},{key:"mouseup",value:function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ei("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}},{key:"contextmenu",value:function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new Ei(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),e}(),ki=function(){function t(e,n){f(this,t),this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1}return d(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"mousedown",value:function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(b(),this._startPos=this._lastPos=t,this._active=!0)}},{key:"mousemoveWindow",value:function(e,t){var n=this;if(this._active){var r=t,i=this._startPos,a=this._lastPos;if(!(!i||!a||a.equals(r)||!this._box&&r.dist(i)<this._clickTolerance)){this._lastPos=r,this._box||(this._box=g("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var s=Math.min(i.x,r.x),o=Math.max(i.x,r.x),u=Math.min(i.y,r.y),l=Math.max(i.y,r.y);this._map._requestDomTask((function(){n._box&&(n._box.style.transform="translate(".concat(s,"px,").concat(u,"px)"),n._box.style.width=o-s+"px",n._box.style.height=l-u+"px")}))}}}},{key:"mouseupWindow",value:function(t,n){var r=this;if(this._active){var i=this._startPos,a=n;if(i&&0===t.button){if(this.reset(),k(),i.x!==a.x||i.y!==a.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:function(e){return e.fitScreenCoordinates(i,a,r._map.getBearing(),{linear:!1})}};this._fireEvent("boxzoomcancel",t)}}}},{key:"keydown",value:function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}},{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),I(),delete this._startPos,delete this._lastPos}},{key:"_fireEvent",value:function(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))}}]),t}();function Si(e,t){for(var n={},r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}var Ri=function(){function t(e){f(this,t),this.reset(),this.numTouches=e.numTouches}return d(t,[{key:"reset",value:function(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}},{key:"touchstart",value:function(t,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){var n,r=new e.pointGeometry(0,0),i=p(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;r._add(a)}}catch(s){i.e(s)}finally{i.f()}return r.div(t.length)}(n),this.touches=Si(r,n)))}},{key:"touchmove",value:function(e,t,n){if(!this.aborted&&this.centroid){var r=Si(n,t);for(var i in this.touches){var a=this.touches[i],s=r[i];(!s||s.dist(a)>30)&&(this.aborted=!0)}}}},{key:"touchend",value:function(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}}}]),t}(),Ci=function(){function e(t){f(this,e),this.singleTap=new Ri(t),this.numTaps=t.numTaps,this.reset()}return d(e,[{key:"reset",value:function(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(e,t,n){this.singleTap.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this.singleTap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var r=this.singleTap.touchend(e,t,n);if(r){var i=e.timeStamp-this.lastTime<500,a=!this.lastTap||this.lastTap.dist(r)<30;if(i&&a||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}]),e}(),Di=function(){function e(){f(this,e),this._zoomIn=new Ci({numTouches:1,numTaps:2}),this._zoomOut=new Ci({numTouches:2,numTaps:1}),this.reset()}return d(e,[{key:"reset",value:function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}},{key:"touchstart",value:function(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var r=this,i=this._zoomIn.touchend(e,t,n),a=this._zoomOut.touchend(e,t,n);return i?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(i)},{originalEvent:e})}}):a?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(a)},{originalEvent:e})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Ai={0:1,2:2},Oi=function(){function e(t){f(this,e),this.reset(),this._clickTolerance=t.clickTolerance||1}return d(e,[{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}},{key:"_correctButton",value:function(e,t){return!1}},{key:"_move",value:function(e,t){return{}}},{key:"mousedown",value:function(e,t){if(!this._lastPoint){var n=C(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}}},{key:"mousemoveWindow",value:function(e,t){var n=this._lastPoint;if(n)if(e.preventDefault(),null!=this._eventButton&&function(e,t){var n=Ai[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}},{key:"mouseupWindow",value:function(e){this._lastPoint&&C(e)===this._eventButton&&(this._moved&&k(),this.reset())}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Ni=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"mousedown",value:function(e,t){s(o(n.prototype),"mousedown",this).call(this,e,t),this._lastPoint&&(this._active=!0)}},{key:"_correctButton",value:function(e,t){return 0===t&&!e.ctrlKey}},{key:"_move",value:function(e,t){return{around:t,panDelta:t.sub(e)}}}]),n}(Oi),Mi=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(Oi),Pi=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(Oi),Fi=function(){function t(n,r){f(this,t),this._map=n,this._el=n.getCanvasContainer(),this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}return d(t,[{key:"reset",value:function(){this._active=!1,this._touches={},this._sum=new e.pointGeometry(0,0)}},{key:"touchstart",value:function(e,t,n){return this._calculateTransform(e,t,n)}},{key:"touchmove",value:function(t,n,r){if(this._active&&!(r.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===r.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,n,r)}}},{key:"touchend",value:function(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"_calculateTransform",value:function(t,n,r){r.length>0&&(this._active=!0);var i=Si(r,n),a=new e.pointGeometry(0,0),s=new e.pointGeometry(0,0),o=0;for(var u in i){var l=i[u],c=this._touches[u];c&&(a._add(l),s._add(l.sub(c)),o++,i[u]=l)}if(this._touches=i,!(o<this._minTouches)&&s.mag()){var h=s.div(o);return this._sum._add(h),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(o),panDelta:h}}}},{key:"enable",value:function(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}},{key:"disable",value:function(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"_addTouchPanBlocker",value:function(){this._map&&!this._alertContainer&&(this._alertContainer=g("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}},{key:"_showTouchPanBlockerAlert",value:function(){var e=this;this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((function(){e._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),e._alertContainer.setAttribute("role","null")}),500)}}]),t}(),Li=function(){function e(){f(this,e),this.reset()}return d(e,[{key:"reset",value:function(){this._active=!1,this._firstTwoTouches=void 0}},{key:"_start",value:function(e){}},{key:"_move",value:function(e,t,n){return{}}},{key:"touchstart",value:function(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}},{key:"touchmove",value:function(e,t,n){var r=this._firstTwoTouches;if(r){e.preventDefault();var i=h(r,2),a=i[0],s=i[1],o=Ui(n,t,a),u=Ui(n,t,s);if(o&&u){var l=this._aroundCenter?null:o.add(u).div(2);return this._move([o,u],l,e)}}}},{key:"touchend",value:function(e,t,n){if(this._firstTwoTouches){var r=h(this._firstTwoTouches,2),i=r[0],a=r[1],s=Ui(n,t,i),o=Ui(n,t,a);s&&o||(this._active&&k(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}();function Ui(e,t,n){for(var r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function Zi(e,t){return Math.log(e/t)/Math.LN2}var Bi=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"reset",value:function(){s(o(n.prototype),"reset",this).call(this),this._distance=0,this._startDistance=0}},{key:"_start",value:function(e){this._startDistance=this._distance=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Zi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Zi(this._distance,n),pinchAround:t}}}]),n}(Li);function zi(e,t){return 180*e.angleWith(t)/Math.PI}var Gi=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n,[{key:"reset",value:function(){s(o(n.prototype),"reset",this).call(this),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}},{key:"_start",value:function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var n=this._vector;if(this._vector=e[0].sub(e[1]),n&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:zi(this._vector,n),pinchAround:t}}},{key:"_isBelowThreshold",value:function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,n=this._startVector;if(!n)return!1;var r=zi(e,n);return Math.abs(r)<t}}]),n}(Li);function Hi(e){return Math.abs(e.y)>Math.abs(e.x)}var ji=function(t){v(r,t);var n=m(r);function r(e){var t;return f(this,r),(t=n.call(this))._map=e,t}return d(r,[{key:"reset",value:function(){s(o(r.prototype),"reset",this).call(this),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}},{key:"_start",value:function(e){this._lastPoints=e,Hi(e[0].sub(e[1]))&&(this._valid=!1)}},{key:"_move",value:function(t,n,r){var i=this._lastPoints;if(i){var a=t[0].sub(i[0]),s=t[1].sub(i[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&r.touches.length<3||(this._valid=this.gestureBeginsVertically(a,s,r.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(a.y+s.y)/2*-.5})}}},{key:"gestureBeginsVertically",value:function(e,t,n){if(void 0!==this._valid)return this._valid;var r=e.mag()>=2,i=t.mag()>=2;if(r||i){if(!r||!i)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var a=e.y>0==t.y>0;return Hi(e)&&Hi(t)&&a}}}]),r}(Li),Vi={panStep:100,bearingStep:15,pitchStep:10},Wi=function(){function e(){f(this,e);var t=Vi;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}return d(e,[{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1}},{key:"keydown",value:function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var n=0,r=0,i=0,a=0,s=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),a=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),a=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),s=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),s=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:function(o){var u=o.getZoom();o.easeTo({duration:300,easeId:"keyboardHandler",easing:Yi,zoom:n?Math.round(u)+n*(e.shiftKey?2:1):u,bearing:o.getBearing()+r*t._bearingStep,pitch:o.getPitch()+i*t._pitchStep,offset:[-a*t._panStep,-s*t._panStep],center:o.getCenter()},{originalEvent:e})}}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}}]),e}();function Yi(e){return e*(2-e)}var qi=4.000244140625,Xi=function(){function t(n,r){f(this,t),this._map=n,this._el=n.getCanvasContainer(),this._handler=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}return d(t,[{key:"setZoomRate",value:function(e){this._defaultZoomRate=e}},{key:"setWheelZoomRate",value:function(e){this._wheelZoomRate=e}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return this._active||void 0!==this._finishTimeout}},{key:"isZooming",value:function(){return!!this._zooming}},{key:"enable",value:function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}},{key:"wheel",value:function(t){if(this.isEnabled()){if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}var n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,r=e.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%qi==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}}},{key:"_onTimeout",value:function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}},{key:"_start",value:function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var t=S(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}}},{key:"renderFrame",value:function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform;"wheel"===this._type&&n.projection.wrap&&(n._center.lng>=180||n._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);var r=function(){return n._terrainEnabled()&&t._aroundCoord?n.computeZoomRelativeTo(t._aroundCoord):n.zoom};if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>qi?this._wheelZoomRate:this._defaultZoomRate,a=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==a&&(a=1/a);var s=r(),o=Math.pow(2,s),u="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(u*a))),"wheel"===this._type&&(this._startZoom=s,this._easing=this._smoothOutEasing(200)),this._delta=0}var l,c="number"==typeof this._targetZoom?this._targetZoom:r(),h=this._startZoom,p=this._easing,f=!1;if("wheel"===this._type&&h&&p){var d=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),v=p(d);l=e.number(h,c,v),d<1?this._frameId||(this._frameId=!0):f=!0}else l=c,f=!0;return this._active=!0,f&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!f,zoomDelta:l-r(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}}},{key:"_smoothOutEasing",value:function(t){var n=e.ease;if(this._prevEase){var r=this._prevEase,i=(e.exported.now()-r.start)/r.duration,a=r.easing(i+.01)-r.easing(i),s=.27/Math.sqrt(a*a+1e-4)*.01,o=Math.sqrt(.0729-s*s);n=e.bezier(s,o,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:n},n}},{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1}},{key:"_addScrollZoomBlocker",value:function(){this._map&&!this._alertContainer&&(this._alertContainer=g("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}},{key:"_showBlockerAlert",value:function(){var e=this;this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((function(){e._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),e._alertContainer.setAttribute("role","null")}),200)}}]),t}(),Ki=function(){function e(t,n){f(this,e),this._clickZoom=t,this._tapZoom=n}return d(e,[{key:"enable",value:function(){this._clickZoom.enable(),this._tapZoom.enable()}},{key:"disable",value:function(){this._clickZoom.disable(),this._tapZoom.disable()}},{key:"isEnabled",value:function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}},{key:"isActive",value:function(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}]),e}(),Qi=function(){function e(){f(this,e),this.reset()}return d(e,[{key:"reset",value:function(){this._active=!1}},{key:"blur",value:function(){this.reset()}},{key:"dblclick",value:function(e,t){return e.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Ji=function(){function e(){f(this,e),this._tap=new Ci({numTouches:1,numTaps:1}),this.reset()}return d(e,[{key:"reset",value:function(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}},{key:"touchstart",value:function(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}},{key:"touchmove",value:function(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),$i=function(){function e(t,n,r){f(this,e),this._el=t,this._mousePan=n,this._touchPan=r}return d(e,[{key:"enable",value:function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}},{key:"disable",value:function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}},{key:"isEnabled",value:function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}},{key:"isActive",value:function(){return this._mousePan.isActive()||this._touchPan.isActive()}}]),e}(),ea=function(){function e(t,n,r){f(this,e),this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=n,this._mousePitch=r}return d(e,[{key:"enable",value:function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}},{key:"disable",value:function(){this._mouseRotate.disable(),this._mousePitch.disable()}},{key:"isEnabled",value:function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}},{key:"isActive",value:function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}]),e}(),ta=function(){function e(t,n,r,i){f(this,e),this._el=t,this._touchZoom=n,this._touchRotate=r,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}return d(e,[{key:"enable",value:function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}},{key:"disable",value:function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this._rotationDisabled=!0,this._touchRotate.disable()}},{key:"enableRotation",value:function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}]),e}(),na=function(e){return e.zoom||e.drag||e.pitch||e.rotate},ra=function(e){v(n,e);var t=m(n);function n(){return f(this,n),t.apply(this,arguments)}return d(n)}(e.Event),ia=function(){function t(){f(this,t),this.constants=[1,1,.01],this.radius=0}return d(t,[{key:"setup",value:function(t,n){var r=e.sub([],n,t);this.radius=e.length(r[2]<0?e.div([],r,this.constants):[r[0],r[1],0])}},{key:"projectRay",value:function(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);var n=e.scale$2([],t,this.radius);if(n[2]>0){var r=e.scale$2([],[0,0,1],e.dot(n,[0,0,1])),i=e.scale$2([],e.normalize([],[n[0],n[1],0]),this.radius),a=e.add([],n,e.scale$2([],e.sub([],e.add([],i,r),n),2));n[0]=a[0],n[1]=a[1]}return n}}]),t}();function aa(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var sa=function(){function t(n,r){f(this,t),this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new gi(n),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new ia,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(r),e.bindAll(["handleEvent","handleWindowEvent"],this);var i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[e.window,"blur",void 0]];var a,s=p(this._listeners);try{for(s.s();!(a=s.n()).done;){var o=h(a.value,3),u=o[0],l=o[1],c=o[2];u.addEventListener(l,u===e.window.document?this.handleWindowEvent:this.handleEvent,c)}}catch(d){s.e(d)}finally{s.f()}}return d(t,[{key:"destroy",value:function(){var t,n=p(this._listeners);try{for(n.s();!(t=n.n()).done;){var r=h(t.value,3),i=r[0],a=r[1],s=r[2];i.removeEventListener(a,i===e.window.document?this.handleWindowEvent:this.handleEvent,s)}}catch(o){n.e(o)}finally{n.f()}}},{key:"_addDefaultHandlers",value:function(e){var t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new Ii(t,e));var r=t.boxZoom=new ki(t,e);this._add("boxZoom",r);var i=new Di,a=new Qi;t.doubleClickZoom=new Ki(a,i),this._add("tapZoom",i),this._add("clickZoom",a);var s=new Ji;this._add("tapDragZoom",s);var o=t.touchPitch=new ji(t);this._add("touchPitch",o);var u=new Mi(e),l=new Pi(e);t.dragRotate=new ea(e,u,l),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",l,["mouseRotate"]);var c=new Ni(e),h=new Fi(t,e);t.dragPan=new $i(n,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);var p=new Gi,f=new Bi;t.touchZoomRotate=new ta(n,f,p,s),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]),this._add("blockableMapEvent",new wi(t));var d=t.scrollZoom=new Xi(t,this);this._add("scrollZoom",d,["mousePan"]);var v=t.keyboard=new Wi;this._add("keyboard",v);for(var m=0,y=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<y.length;m++){var g=y[m];e.interactive&&e[g]&&t[g].enable(e[g])}}},{key:"_add",value:function(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}},{key:"stop",value:function(e){if(!this._updatingCamera){var t,n=p(this._handlers);try{for(n.s();!(t=n.n()).done;)t.value.handler.reset()}catch(r){n.e(r)}finally{n.f()}this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}},{key:"isActive",value:function(){var e,t=p(this._handlers);try{for(t.s();!(e=t.n()).done;)if(e.value.handler.isActive())return!0}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"isZooming",value:function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this._eventsInProgress.rotate}},{key:"isMoving",value:function(){return!!na(this._eventsInProgress)||this.isZooming()}},{key:"_isDragging",value:function(){return!!this._eventsInProgress.drag}},{key:"_blockedByActive",value:function(e,t,n){for(var r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}},{key:"handleWindowEvent",value:function(e){this.handleEvent(e,"".concat(e.type,"Window"))}},{key:"_getMapTouches",value:function(e){var t,n=[],r=p(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;this._el.contains(i.target)&&n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"handleEvent",value:function(e,t){this._updatingCamera=!0;var n,r="renderFrame"===e.type,i=r?void 0:e,a={needsRenderFrame:!1},s={},o={},u=e.touches?this._getMapTouches(e.touches):void 0,l=u?R(this._el,u):r?void 0:S(this._el,e),c=p(this._handlers);try{for(c.s();!(n=c.n()).done;){var h=n.value,f=h.handlerName,d=h.handler,v=h.allowed;if(d.isEnabled()){var m=void 0;this._blockedByActive(o,v,f)?d.reset():d[t||e.type]&&(m=d[t||e.type](e,l,u),this.mergeHandlerResult(a,s,m,f,i),m&&m.needsRenderFrame&&this._triggerRenderFrame()),(m||d.isActive())&&(o[f]=d)}}}catch(T){c.e(T)}finally{c.f()}var y={};for(var g in this._previousActiveHandlers)o[g]||(y[g]=i);this._previousActiveHandlers=o,(Object.keys(y).length||aa(a))&&(this._changes.push([a,s,y]),this._triggerRenderFrame()),(Object.keys(o).length||aa(a))&&this._map._stop(!0),this._updatingCamera=!1;var _=a.cameraAnimation;_&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],_(this._map))}},{key:"mergeHandlerResult",value:function(t,n,r,i,a){if(r){e.extend(t,r);var s={handlerName:i,originalEvent:r.originalEvent||a};void 0!==r.zoomDelta&&(n.zoom=s),void 0!==r.panDelta&&(n.drag=s),void 0!==r.pitchDelta&&(n.pitch=s),void 0!==r.bearingDelta&&(n.rotate=s)}}},{key:"_applyChanges",value:function(){var t,n={},r={},i={},a=p(this._changes);try{for(a.s();!(t=a.n()).done;){var s=h(t.value,3),o=s[0],u=s[1],l=s[2];o.panDelta&&(n.panDelta=(n.panDelta||new e.pointGeometry(0,0))._add(o.panDelta)),o.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+o.zoomDelta),o.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+o.bearingDelta),o.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+o.pitchDelta),void 0!==o.around&&(n.around=o.around),void 0!==o.aroundCoord&&(n.aroundCoord=o.aroundCoord),void 0!==o.pinchAround&&(n.pinchAround=o.pinchAround),o.noInertia&&(n.noInertia=o.noInertia),e.extend(r,u),e.extend(i,l)}}catch(c){a.e(c)}finally{a.f()}this._updateMapTransform(n,r,i),this._changes=[]}},{key:"_updateMapTransform",value:function(t,n,r){var i=this,a=this._map,s=a.transform,o=function(e){return[e.x,e.y,e.z]};if(function(e){var t=i._eventsInProgress.drag;return t&&!i._handlersById[t.handlerName].isActive()}()&&!aa(t)){var u=s.zoom;s.cameraElevationReference="sea",s.recenterOnTerrain(),s.cameraElevationReference="ground",u!==s.zoom&&this._map._update(!0)}if(s._isCameraConstrained&&a._stop(!0),aa(t)){var l=t.panDelta,c=t.zoomDelta,h=t.bearingDelta,p=t.pitchDelta,f=t.around,d=t.aroundCoord,v=t.pinchAround;s._isCameraConstrained&&(c>0&&(c=0),s._isCameraConstrained=!1),void 0!==v&&(f=v),(c||n.drag&&!i._eventsInProgress.drag)&&f&&(this._dragOrigin=o(s.pointCoordinate3D(f)),this._trackingEllipsoid.setup(s._camera.position,this._dragOrigin)),s.cameraElevationReference="sea",a._stop(!0),f=f||a.transform.centerPoint,h&&(s.bearing+=h),p&&(s.pitch+=p),s._updateCameraState();var m=[0,0,0];if(l)if("mercator"===s.projection.name){var y=this._trackingEllipsoid.projectRay(s.screenPointToMercatorRay(f).dir),g=this._trackingEllipsoid.projectRay(s.screenPointToMercatorRay(f.sub(l)).dir);m[0]=g[0]-y[0],m[1]=g[1]-y[1]}else{var _=s.pointCoordinate(f);if("globe"===s.projection.name){l=l.rotate(-s.angle);var T=s._pixelsPerMercatorPixel/s.worldSize;m[0]=-l.x*e.mercatorScale(e.latFromMercatorY(_.y))*T,m[1]=-l.y*e.mercatorScale(s.center.lat)*T}else{var E=s.pointCoordinate(f.sub(l));_&&E&&(m[0]=E.x-_.x,m[1]=E.y-_.y)}}var x=s.zoom,b=[0,0,0];if(c){var I=o(d||s.pointCoordinate3D(f)),w={dir:e.normalize([],e.sub([],I,s._camera.position))};if(w.dir[2]<0){var k=s.zoomDeltaToMovement(I,c);e.scale$2(b,w.dir,k)}}var S=e.add(m,m,b);s._translateCameraConstrained(S),c&&Math.abs(s.zoom-x)>1e-4&&s.recenterOnTerrain(),s.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,r,!0)}else this._fireEvents(n,r,!0)}},{key:"_fireEvents",value:function(t,n,r){var i=this,a=na(this._eventsInProgress),s=na(t),o={};for(var u in t){var l=t[u].originalEvent;this._eventsInProgress[u]||(o["".concat(u,"start")]=l),this._eventsInProgress[u]=t[u]}for(var c in!a&&s&&this._fireEvent("movestart",s.originalEvent),o)this._fireEvent(c,o[c]);for(var h in s&&this._fireEvent("move",s.originalEvent),t){var p=t[h].originalEvent;this._fireEvent(h,p)}var f,d={};for(var v in this._eventsInProgress){var m=this._eventsInProgress[v],y=m.handlerName,g=m.originalEvent;this._handlersById[y].isActive()||(delete this._eventsInProgress[v],f=n[y]||g,d["".concat(v,"end")]=f)}for(var _ in d)this._fireEvent(_,d[_]);var T=na(this._eventsInProgress);if(r&&(a||s)&&!T){this._updatingCamera=!0;var E=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),x=function(e){return 0!==e&&-i._bearingSnap<e&&e<i._bearingSnap};E?(x(E.bearing||this._map.getBearing())&&(E.bearing=0),this._map.easeTo(E,{originalEvent:f})):(this._map.fire(new e.Event("moveend",{originalEvent:f})),x(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}},{key:"_fireEvent",value:function(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))}},{key:"_requestFrame",value:function(){var e=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(t){e._frameId=void 0,e.handleEvent(new ra("renderFrame",{timeStamp:t})),e._applyChanges()}))}},{key:"_triggerRenderFrame",value:function(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}]),t}(),oa="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.",ua=function(t){v(r,t);var n=m(r);function r(t,a){var s;return f(this,r),(s=n.call(this))._moving=!1,s._zooming=!1,s.transform=t,s._bearingSnap=a.bearingSnap,e.bindAll(["_renderFrameCallback"],i(s)),s}return d(r,[{key:"getCenter",value:function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}},{key:"setCenter",value:function(e,t){return this.jumpTo({center:e},t)}},{key:"panBy",value:function(t,n,r){return t=e.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)}},{key:"panTo",value:function(t,n,r){return this.easeTo(e.extend({center:t},n),r)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setZoom",value:function(e,t){return this.jumpTo({zoom:e},t),this}},{key:"zoomTo",value:function(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)}},{key:"zoomIn",value:function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}},{key:"zoomOut",value:function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"setBearing",value:function(e,t){return this.jumpTo({bearing:e},t),this}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(e,t){return this.jumpTo({padding:e},t),this}},{key:"rotateTo",value:function(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)}},{key:"resetNorth",value:function(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this}},{key:"resetNorthPitch",value:function(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this}},{key:"snapToNorth",value:function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setPitch",value:function(e,t){return this.jumpTo({pitch:e},t),this}},{key:"cameraForBounds",value:function(t,n){t=e.LngLatBounds.convert(t);var r=n&&n.bearing||0,i=n&&n.pitch||0,a=t.getNorthWest(),s=t.getSouthEast();return this._cameraForBounds(this.transform,a,s,r,i,n)}},{key:"_extendCameraOptions",value:function(t){var n={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){var r=t.padding;t.padding={top:r,bottom:r,right:r,left:r}}return t.padding=e.extend(n,t.padding),t}},{key:"_minimumAABBFrustumDistance",value:function(e,t){var n=t.max[0]-t.min[0],r=t.max[1]-t.min[1];return n/r>e.aspect?n/(2*Math.tan(.5*e.fovX)*e.aspect):r/(2*Math.tan(.5*e.fovY)*e.aspect)}},{key:"_cameraForBoundsOnGlobe",value:function(t,n,r,i,a,s){var o=t.clone(),u=this._extendCameraOptions(s);o.bearing=i,o.pitch=a;var l=e.LngLat.convert(n),c=e.LngLat.convert(r),h=.5*(l.lat+c.lat),p=.5*(l.lng+c.lng),f=e.latLngToECEF(h,p),d=e.normalize([],f),v=e.normalize([],e.cross([],d,[0,1,0])),m=e.cross([],v,d),y=[v[0],v[1],v[2],0,m[0],m[1],m[2],0,d[0],d[1],d[2],0,0,0,0,1],g=[f,e.latLngToECEF(l.lat,l.lng),e.latLngToECEF(c.lat,l.lng),e.latLngToECEF(c.lat,c.lng),e.latLngToECEF(l.lat,c.lng),e.latLngToECEF(h,l.lng),e.latLngToECEF(h,c.lng),e.latLngToECEF(l.lat,p),e.latLngToECEF(c.lat,p)],_=e.Aabb.fromPoints(g.map((function(t){return[e.dot(v,t),e.dot(m,t),e.dot(d,t)]}))),T=e.transformMat4([],_.center,y);0===e.squaredLength(T)&&e.set(T,0,0,1),e.normalize(T,T),e.scale$2(T,T,e.GLOBE_RADIUS),o.center=e.ecefToLatLng(T);var E=o.getWorldToCameraMatrix(),x=e.invert(new Float64Array(16),E);_=e.Aabb.applyTransform(_,e.multiply([],E,y)),e.transformMat4(T,T,E);var b=.5*(_.max[2]-_.min[2]),I=this._minimumAABBFrustumDistance(o,_),w=e.scale$2([],[0,0,1],b),k=e.add(w,T,w),S=I+(0===o.pitch?0:e.distance(T,k)),R=o.globeCenterInViewSpace,C=e.sub([],T,[R[0],R[1],R[2]]);e.normalize(C,C),e.scale$2(C,C,S);var D=e.add([],T,C);e.transformMat4(D,D,x);var A=e.earthRadius/e.GLOBE_RADIUS,O=e.length(D),N=e.mercatorZfromAltitude(Math.max(O*A-e.earthRadius,Number.EPSILON),0),M=Math.min(o.zoomFromMercatorZAdjusted(N),u.maxZoom);return M>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(o.setProjection({name:"mercator"}),o.zoom=M,this._cameraForBounds(o,n,r,i,a,s)):{center:o.center,zoom:M,bearing:i,pitch:a}}},{key:"queryTerrainElevation",value:function(t,n){var r=this.transform.elevation;return r?(n=e.extend({},{exaggerated:!0},n),r.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,n.exaggerated)):null}},{key:"_cameraForBounds",value:function(t,n,r,i,a,s){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,n,r,i,a,s);var o=t.clone(),u=this._extendCameraOptions(s),l=o.padding;o.bearing=i,o.pitch=a;var c=e.LngLat.convert(n),h=e.LngLat.convert(r),p=new e.LngLat(c.lng,h.lat),f=new e.LngLat(h.lng,c.lat),d=o.project(c),v=o.project(h),m=this.queryTerrainElevation(c),y=this.queryTerrainElevation(h),g=this.queryTerrainElevation(p),_=this.queryTerrainElevation(f),T=[[d.x,d.y,Math.min(m||0,y||0,g||0,_||0)],[v.x,v.y,Math.max(m||0,y||0,g||0,_||0)]],E=e.Aabb.fromPoints(T),x=o.getWorldToCameraMatrix(),b=e.invert(new Float64Array(16),x);E=e.Aabb.applyTransform(E,x);var I=e.sub([],E.max,E.min),w=l.left||0,k=l.right||0,S=l.bottom||0,R=l.top||0,C=u.padding,D=C.left,A=C.right,O=C.top,N=C.bottom,M=.5*(w+k),P=.5*(R+S),F=Math.min(o.scaleZoom(o.scale*Math.min((o.width-(w+k+D+A))/I[0],(o.height-(S+R+N+O))/I[1])),u.maxZoom),L=o.scale/o.zoomScale(F);E=new e.Aabb([E.min[0]-(D+M)*L,E.min[1]-(N+P)*L,E.min[2]],[E.max[0]+(A+M)*L,E.max[1]+(O+P)*L,E.max[2]]);var U=.5*I[2],Z=this._minimumAABBFrustumDistance(o,E),B=[0,0,1,0];e.transformMat4$1(B,B,x),e.normalize$2(B,B);var z=e.scale$2([],B,Z+U),G=e.add([],E.center,z),H=("number"==typeof u.offset.x&&"number"==typeof u.offset.y?new e.pointGeometry(u.offset.x,u.offset.y):e.pointGeometry.convert(u.offset)).rotate(-e.degToRad(i));E.center[0]-=H.x*L,E.center[1]+=H.y*L,e.transformMat4(E.center,E.center,b),e.transformMat4(G,G,b);var j=[E.center[0],E.center[1],G[2]*o.pixelsPerMeter];e.scale$2(j,j,1/o.worldSize);var V=e.lngFromMercatorX(j[0]),W=e.latFromMercatorY(j[1]),Y=Math.min(o._zoomFromMercatorZ(j[2]),u.maxZoom),q=new e.LngLat(V,W);return o.mercatorFromTransition&&Y<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(o.setProjection({name:"globe"}),o.zoom=Y,this._cameraForBounds(o,n,r,i,a,s)):{center:q,zoom:Y,bearing:i,pitch:a}}},{key:"fitBounds",value:function(e,t,n){var r=this.cameraForBounds(e,t);return this._fitInternal(r,t,n)}},{key:"fitScreenCoordinates",value:function(t,n,r,i,a){var s=e.pointGeometry.convert(t),o=e.pointGeometry.convert(n),u=new e.pointGeometry(Math.min(s.x,o.x),Math.min(s.y,o.y)),l=new e.pointGeometry(Math.max(s.x,o.x),Math.max(s.y,o.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(s,o))return this;var c=this.transform.pointLocation3D(u),h=this.transform.pointLocation3D(l),p=this.transform.pointLocation3D(new e.pointGeometry(u.x,l.y)),f=this.transform.pointLocation3D(new e.pointGeometry(l.x,u.y)),d=[Math.min(c.lng,h.lng,p.lng,f.lng),Math.min(c.lat,h.lat,p.lat,f.lat)],v=[Math.max(c.lng,h.lng,p.lng,f.lng),Math.max(c.lat,h.lat,p.lat,f.lat)],m=i&&i.pitch?i.pitch:this.getPitch(),y=this._cameraForBounds(this.transform,d,v,r,m,i);return this._fitInternal(y,i,a)}},{key:"_fitInternal",value:function(t,n,r){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}},{key:"jumpTo",value:function(t,n){this.stop();var r=t.preloadOnly?this.transform.clone():this.transform,i=!1,a=!1,s=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(a=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(s=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),t.preloadOnly?(this._preloadTiles(r),this):(this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),a&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),s&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)))}},{key:"getFreeCameraOptions",value:function(){return this.transform.projection.supportsFreeCamera||e.warnOnce(oa),this.transform.getFreeCameraOptions()}},{key:"setFreeCameraOptions",value:function(t,n){var r=this.transform;if(!r.projection.supportsFreeCamera)return e.warnOnce(oa),this;this.stop();var i=r.zoom,a=r.pitch,s=r.bearing;r.setFreeCameraOptions(t);var o=i!==r.zoom,u=a!==r.pitch,l=s!==r.bearing;return this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),o&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),l&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),u&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)),this}},{key:"easeTo",value:function(t,n){var r=this;this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.exported.prefersReducedMotion)&&(t.duration=0);var i,a,s,o=this.transform,u=this.getZoom(),l=this.getBearing(),c=this.getPitch(),h=this.getPadding(),p="zoom"in t?+t.zoom:u,f="bearing"in t?this._normalizeBearing(t.bearing,l):l,d="pitch"in t?+t.pitch:c,v="padding"in t?t.padding:o.padding,m=e.pointGeometry.convert(t.offset);if("globe"===o.projection.name){var y=e.MercatorCoordinate.fromLngLat(o.center),g=m.rotate(-o.angle);y.x+=g.x/o.worldSize,y.y+=g.y/o.worldSize;var _=y.toLngLat(),T=e.LngLat.convert(t.center||_);this._normalizeCenter(T),i=o.centerPoint.add(g),a=new e.pointGeometry(y.x,y.y).mult(o.worldSize),s=new e.pointGeometry(e.mercatorXfromLng(T.lng),e.mercatorYfromLat(T.lat)).mult(o.worldSize).sub(a)}else{i=o.centerPoint.add(m);var E=o.pointLocation(i),x=e.LngLat.convert(t.center||E);this._normalizeCenter(x),a=o.project(E),s=o.project(x).sub(a)}var b,I,w=o.zoomScale(p-u);t.around&&(b=e.LngLat.convert(t.around),I=o.locationPoint(b));var k=this._zooming||p!==u,S=this._rotating||l!==f,R=this._pitching||d!==c,C=!o.isPaddingEqual(v),D=function(o){return function(y){if(k&&(o.zoom=e.number(u,p,y)),S&&(o.bearing=e.number(l,f,y)),R&&(o.pitch=e.number(c,d,y)),C&&(o.interpolatePadding(h,v,y),i=o.centerPoint.add(m)),b)o.setLocationAtPoint(b,I);else{var g=o.zoomScale(o.zoom-u),_=p>u?Math.min(2,w):Math.max(.5,w),T=Math.pow(_,1-y),E=o.unproject(a.add(s.mult(y*T)).mult(g));o.setLocationAtPoint(o.renderWorldCopies?E.wrap():E,i)}return t.preloadOnly||r._fireMoveEvents(n),o}};if(t.preloadOnly){var A=this._emulate(D,t.duration,o);return this._preloadTiles(A),this}var O={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=k,this._rotating=S,this._pitching=R,this._padding=C,this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,O),this._ease(D(o),(function(e){o.recenterOnTerrain(),r._afterEase(n,e)}),t),this}},{key:"_prepareEase",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))}},{key:"_fireMoveEvents",value:function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}},{key:"_afterEase",value:function(t,n){if(!this._easeId||!n||this._easeId!==n){this._easeId=void 0,this.transform.cameraElevationReference="ground";var r=this._zooming,i=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),a&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}}},{key:"flyTo",value:function(t,n){var r=this;if(!t.essential&&e.exported.prefersReducedMotion){var i=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var a=this.transform,s=this.getZoom(),o=this.getBearing(),u=this.getPitch(),l=this.getPadding(),c="zoom"in t?e.clamp(+t.zoom,a.minZoom,a.maxZoom):s,h="bearing"in t?this._normalizeBearing(t.bearing,o):o,p="pitch"in t?+t.pitch:u,f="padding"in t?t.padding:a.padding,d=a.zoomScale(c-s),v=e.pointGeometry.convert(t.offset),m=a.centerPoint.add(v),y=a.pointLocation(m),g=e.LngLat.convert(t.center||y);this._normalizeCenter(g);var _=a.project(y),T=a.project(g).sub(_),E=t.curve,x=Math.max(a.width,a.height),b=x/d,I=T.mag();if("minZoom"in t){var w=e.clamp(Math.min(t.minZoom,s,c),a.minZoom,a.maxZoom),k=x/a.zoomScale(w-s);E=Math.sqrt(k/I*2)}var S=E*E;function R(e){var t=(b*b-x*x+(e?-1:1)*S*S*I*I)/(2*(e?b:x)*S*I);return Math.log(Math.sqrt(t*t+1)-t)}function C(e){return(Math.exp(e)-Math.exp(-e))/2}function D(e){return(Math.exp(e)+Math.exp(-e))/2}var A=R(0),O=function(e){return D(A)/D(A+E*e)},N=function(e){return x*((D(A)*(C(t=A+E*e)/D(t))-C(A))/S)/I;var t},M=(R(1)-A)/E;if(Math.abs(I)<1e-6||!isFinite(M)){if(Math.abs(x-b)<1e-6)return this.easeTo(t,n);var P=b<x?-1:1;M=Math.abs(Math.log(b/x))/E,N=function(){return 0},O=function(e){return Math.exp(P*E*e)}}t.duration="duration"in t?+t.duration:1e3*M/("screenSpeed"in t?+t.screenSpeed/E:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);var F=o!==h,L=p!==u,U=!a.isPaddingEqual(f),Z=function(i){return function(a){var d=a*M,y=1/O(d);i.zoom=1===a?c:s+i.scaleZoom(y),F&&(i.bearing=e.number(o,h,a)),L&&(i.pitch=e.number(u,p,a)),U&&(i.interpolatePadding(l,f,a),m=i.centerPoint.add(v));var E=1===a?g:i.unproject(_.add(T.mult(N(d))).mult(y));return i.setLocationAtPoint(i.renderWorldCopies?E.wrap():E,m),i._updateCameraOnTerrain(),t.preloadOnly||r._fireMoveEvents(n),i}};if(t.preloadOnly){var B=this._emulate(Z,t.duration,a);return this._preloadTiles(B),this}return this._zooming=!0,this._rotating=F,this._pitching=L,this._padding=U,this._prepareEase(n,!1),this._ease(Z(a),(function(){return r._afterEase(n)}),t),this}},{key:"isEasing",value:function(){return!!this._easeFrameId}},{key:"stop",value:function(){return this._stop()}},{key:"_stop",value:function(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){var n=this._onEaseEnd;this._onEaseEnd=void 0,n.call(this,t)}if(!e){var r=this.handlers;r&&r.stop(!1)}return this}},{key:"_ease",value:function(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.exported.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}},{key:"_renderFrameCallback",value:function(){var t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}},{key:"_normalizeBearing",value:function(t,n){t=e.wrap(t,-180,180);var r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t}},{key:"_normalizeCenter",value:function(e){var t=this.transform;if(t.renderWorldCopies&&!t.maxBounds){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}}},{key:"_emulate",value:function(e,t,n){for(var r=Math.ceil(15*t/1e3),i=[],a=e(n.clone()),s=0;s<=r;s++){var o=a(s/r);i.push(o.clone())}return i}}]),r}(e.Evented),la=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,t),this.options=n,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}return d(t,[{key:"getDefaultPosition",value:function(){return"bottom-right"}},{key:"onAdd",value:function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=g("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=g("button","mapboxgl-ctrl-attrib-button",this._container),g("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=g("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}},{key:"_setElementTitle",value:function(e,t){var n=this._map._getUIString("AttributionControl.".concat(t));e.setAttribute("aria-label",n),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}},{key:"_toggleAttribution",value:function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}},{key:"_updateEditLink",value:function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){var r=n.reduce((function(e,t,r){return t.value&&(e+="".concat(t.key,"=").concat(t.value).concat(r<n.length-1?"&":"")),e}),"?");t.href="".concat(e.config.FEEDBACK_URL,"/").concat(r,"#").concat(pi(this._map,!0)),t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}},{key:"_updateData",value:function(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}},{key:"_updateAttributions",value:function(){if(this._map.style){var e=[];if(this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style._sourceCaches;for(var r in n){var i=n[r];if(i.used){var a=i.getSource();a.attribution&&e.indexOf(a.attribution)<0&&e.push(a.attribution)}}e.sort((function(e,t){return e.length-t.length})),e=e.filter((function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[].concat(c(this.options.customAttribution),c(e)):e.unshift(this.options.customAttribution));var s=e.join(" | ");s!==this._attribHTML&&(this._attribHTML=s,e.length?(this._innerContainer.innerHTML=s,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}}},{key:"_updateCompact",value:function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}]),t}(),ca=function(){function t(){f(this,t),e.bindAll(["_updateLogo","_updateCompact"],this)}return d(t,[{key:"onAdd",value:function(e){this._map=e,this._container=g("div","mapboxgl-ctrl");var t=g("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}},{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_updateLogo",value:function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}},{key:"_logoRequired",value:function(){if(!this._map.style)return!0;var e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(var t in e){var n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}},{key:"_updateCompact",value:function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}]),t}(),ha=function(){function e(){f(this,e),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}return d(e,[{key:"add",value:function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}},{key:"remove",value:function(e){var t,n=this._currentlyRunning,r=n?this._queue.concat(n):this._queue,i=p(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.id===e)return void(a.cancelled=!0)}}catch(s){i.e(s)}finally{i.f()}}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._currentlyRunning=this._queue;this._queue=[];var n,r=p(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.cancelled&&(i.callback(e),this._cleared))break}}catch(a){r.e(a)}finally{r.f()}this._cleared=!1,this._currentlyRunning=!1}},{key:"clear",value:function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}]),e}();function pa(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){var i=new e.LngLat(t.lng-360,t.lat),a=new e.LngLat(t.lng+360,t.lat),s=360*Math.ceil(Math.abs(t.lng-r.center.lng)/360),o=r.locationPoint(t).distSqr(n),u=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<o&&(u||Math.abs(i.lng-r.center.lng)<s)?t=i:r.locationPoint(a).distSqr(n)<o&&(u||Math.abs(a.lng-r.center.lng)<s)&&(t=a)}for(;Math.abs(t.lng-r.center.lng)>180;){var l=r.locationPoint(t);if(l.x>=0&&l.y>=0&&l.x<=r.width&&l.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}var fa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},da=function(t){v(r,t);var n=m(r);function r(t,a){var s;if(f(this,r),s=n.call(this),(t instanceof e.window.HTMLElement||a)&&(t=e.extend({element:t},a)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],i(s)),s._anchor=t&&t.anchor||"center",s._color=t&&t.color||"#3FB1CE",s._scale=t&&t.scale||1,s._draggable=t&&t.draggable||!1,s._clickTolerance=t&&t.clickTolerance||0,s._isDragging=!1,s._state="inactive",s._rotation=t&&t.rotation||0,s._rotationAlignment=t&&t.rotationAlignment||"auto",s._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",s._updateMoving=function(){return s._update(!0)},s._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)s._element=t.element,s._offset=e.pointGeometry.convert(t&&t.offset||[0,0]);else{s._defaultMarker=!0,s._element=g("div");var o=41,l=27,c=_("svg",{display:"block",height:o*s._scale+"px",width:l*s._scale+"px",viewBox:"0 0 ".concat(l," ").concat(o)},s._element),h=_("radialGradient",{id:"shadowGradient"},_("defs",{},c));_("stop",{offset:"10%","stop-opacity":.4},h),_("stop",{offset:"100%","stop-opacity":.05},h),_("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},c),_("path",{fill:s._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},c),_("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},c),_("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},c),s._offset=e.pointGeometry.convert(t&&t.offset||[0,-14])}s._element.hasAttribute("aria-label")||s._element.setAttribute("aria-label","Map marker"),s._element.classList.add("mapboxgl-marker"),s._element.addEventListener("dragstart",(function(e){e.preventDefault()})),s._element.addEventListener("mousedown",(function(e){e.preventDefault()}));var p=s._element.classList;for(var d in fa)p.remove("mapboxgl-marker-anchor-".concat(d));return p.add("mapboxgl-marker-anchor-".concat(s._anchor)),s._popup=null,u(s)}return d(r,[{key:"addTo",value:function(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}},{key:"remove",value:function(){var e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}},{key:"getElement",value:function(){return this._element}},{key:"setPopup",value:function(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){var t=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}},{key:"_onKeyPress",value:function(e){var t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}},{key:"_onMapClick",value:function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}},{key:"getPopup",value:function(){return this._popup}},{key:"togglePopup",value:function(){var e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}},{key:"_behindTerrain",value:function(){var e=this._map,t=this._pos;if(!e||!t)return!1;var n=e.unproject(t),r=e.getFreeCameraOptions();if(!r.position)return!1;var i=r.position.toLngLat();return i.distanceTo(n)<.9*i.distanceTo(this._lngLat)}},{key:"_evaluateOpacity",value:function(){var t=this._map;if(t){var n=this._pos;if(!n||n.x<0||n.x>t.transform.width||n.y<0||n.y>t.transform.height)this._clearFadeTimer();else{var r,i=t.unproject(n);t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?r=0:(r=1-t._queryFogOpacity(i),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(r*=this._occludedOpacity)),this._element.style.opacity="".concat(r),this._element.style.pointerEvents=r>0?"auto":"none",this._popup&&this._popup._setOpacity(r),this._fadeTimer=null}}}},{key:"_clearFadeTimer",value:function(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}},{key:"_updateDOM",value:function(){var e=this._pos;if(e&&this._map){var t=this._offset.mult(this._scale);this._element.style.transform="\n            translate(".concat(e.x,"px,").concat(e.y,"px)\n            ").concat(fa[this._anchor],"\n            ").concat(this._calculateXYTransform()," ").concat(this._calculateZTransform(),"\n            translate(").concat(t.x,"px,").concat(t.y,"px)\n        ")}}},{key:"_calculateXYTransform",value:function(){var t=this._pos,n=this._map,r=this.getPitchAlignment();if(!n||!t||"map"!==r)return"";if(!n._showingGlobe()){var i=n.getPitch();return i?"rotateX(".concat(i,"deg)"):""}var a=e.radToDeg(e.globeTiltAtLngLat(n.transform,this._lngLat)),s=t.sub(e.globeCenterToScreenPoint(n.transform)),o=Math.abs(s.x)+Math.abs(s.y);if(0===o)return"";var u=a/o;return"rotateX(".concat(-s.y*u,"deg) rotateY(").concat(s.x*u,"deg)")}},{key:"_calculateZTransform",value:function(){var t=this._pos,n=this._map;if(!n||!t)return"";var r=0,i=this.getRotationAlignment();if("map"===i)if(n._showingGlobe()){var a=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),s=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(a);r=e.radToDeg(Math.atan2(s.y,s.x))-90}else r=-n.getBearing();else if("horizon"===i){var o=e.smoothstep(4,6,n.getZoom()),u=e.globeCenterToScreenPoint(n.transform);u.y+=o*n.transform.height;var l=t.sub(u),c=e.radToDeg(Math.atan2(l.y,l.x));r=(c>90?c-270:c+90)*(1-o)}return(r+=this._rotation)?"rotateZ(".concat(r,"deg)"):""}},{key:"_update",value:function(t){var n=this;e.window.cancelAnimationFrame(this._updateFrameId);var r=this._map;r&&(r.transform.renderWorldCopies&&(this._lngLat=pa(this._lngLat,this._pos,r.transform)),this._pos=r.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((function(){n._element&&n._pos&&n._anchor&&(n._pos=n._pos.round(),n._updateDOM())})):this._pos=this._pos.round(),r._requestDomTask((function(){n._map&&(n._element&&n._pos&&n._anchor&&n._updateDOM(),(r._showingGlobe()||r.getTerrain()||r.getFog())&&!n._fadeTimer&&(n._fadeTimer=setTimeout(n._evaluateOpacity.bind(n),60)))})))}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(t){return this._offset=e.pointGeometry.convert(t),this._update(),this}},{key:"_onMove",value:function(t){var n=this._map;if(n){var r=this._pointerdownPos,i=this._positionDelta;if(r&&i){if(!this._isDragging){var a=this._clickTolerance||n._clickTolerance;if(t.point.dist(r)<a)return;this._isDragging=!0}this._pos=t.point.sub(i),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))}}}},{key:"_onUp",value:function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;var t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}},{key:"_addDragHandler",value:function(e){var t=this._map,n=this._pos;t&&n&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(n),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}},{key:"setDraggable",value:function(e){this._draggable=!!e;var t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}},{key:"isDraggable",value:function(){return this._draggable}},{key:"setRotation",value:function(e){return this._rotation=e||0,this._update(),this}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotationAlignment",value:function(e){return this._rotationAlignment=e||"auto",this._update(),this}},{key:"getRotationAlignment",value:function(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}},{key:"setPitchAlignment",value:function(e){return this._pitchAlignment=e||"auto",this._update(),this}},{key:"getPitchAlignment",value:function(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}},{key:"setOccludedOpacity",value:function(e){return this._occludedOpacity=e||.2,this._update(),this}},{key:"getOccludedOpacity",value:function(){return this._occludedOpacity}}]),r}(e.Evented),va={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ma=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ya(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e.pointGeometry(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom";if("number"==typeof t){var r=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(n){case"top":return new e.pointGeometry(0,t);case"top-left":return new e.pointGeometry(r,r);case"top-right":return new e.pointGeometry(-r,r);case"bottom":return new e.pointGeometry(0,-t);case"bottom-left":return new e.pointGeometry(r,-r);case"bottom-right":return new e.pointGeometry(-r,-r);case"left":return new e.pointGeometry(t,0);case"right":return new e.pointGeometry(-t,0)}return new e.pointGeometry(0,0)}return t instanceof e.pointGeometry||Array.isArray(t)?e.pointGeometry.convert(t):e.pointGeometry.convert(t[n]||[0,0])}var ga=function(){function t(e){f(this,t),this.jumpTo(e)}return d(t,[{key:"getValue",value:function(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;var n=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}},{key:"isEasing",value:function(e){return e>=this._startTime&&e<=this._endTime}},{key:"jumpTo",value:function(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}},{key:"easeTo",value:function(e,t,n){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+n}}]),t}(),_a={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Ta={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ea={showCompass:!0,showZoom:!0,visualizePitch:!1},xa=function(){function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];f(this,t),this._clickTolerance=10,this.element=r,this.mouseRotate=new Mi({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,i&&(this.mousePitch=new Pi({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener("mousedown",this.mousedown),r.addEventListener("touchstart",this.touchstart,{passive:!1}),r.addEventListener("touchmove",this.touchmove),r.addEventListener("touchend",this.touchend),r.addEventListener("touchcancel",this.reset)}return d(t,[{key:"down",value:function(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),b()}},{key:"move",value:function(e,t){var n=this.map,r=this.mouseRotate.mousemoveWindow(e,t),i=r&&r.bearingDelta;if(i&&n.setBearing(n.getBearing()+i),this.mousePitch){var a=this.mousePitch.mousemoveWindow(e,t),s=a&&a.pitchDelta;s&&n.setPitch(n.getPitch()+s)}}},{key:"off",value:function(){var e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}},{key:"offTemp",value:function(){I(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}},{key:"mousedown",value:function(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),S(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}},{key:"mousemove",value:function(e){this.move(e,S(this.element,e))}},{key:"mouseup",value:function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}},{key:"touchstart",value:function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=R(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))}},{key:"touchmove",value:function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=R(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))}},{key:"touchend",value:function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}},{key:"reset",value:function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}]),t}(),ba={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Ia={maxWidth:100,unit:"metric"};function wa(e,t,n){var r=this,i=ka(t),a=i/t,s={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[n];this._map._requestDomTask((function(){r._container.style.width=e*a+"px",r._container.innerHTML="".concat(i,"&nbsp;").concat(s)}))}function ka(e){var t=Math.pow(10,"".concat(Math.floor(e)).length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}var Sa={version:e.version,supported:n,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:function(t){v(c,t);var a=m(c);function c(t){var n;if(f(this,c),e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},Ta,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),(n=a.call(this,new li(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t))._interactive=t.interactive,n._minTileCacheSize=t.minTileCacheSize,n._maxTileCacheSize=t.maxTileCacheSize,n._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,n._preserveDrawingBuffer=t.preserveDrawingBuffer,n._antialias=t.antialias,n._useWebGL2=t.useWebGL2,n._trackResize=t.trackResize,n._bearingSnap=t.bearingSnap,n._refreshExpiredTiles=t.refreshExpiredTiles,n._fadeDuration=t.fadeDuration,n._isInitialLoad=!0,n._crossSourceCollisions=t.crossSourceCollisions,n._collectResourceTiming=t.collectResourceTiming,n._optimizeForTerrain=t.optimizeForTerrain,n._language=n._parseLanguage(t.language),n._worldview=t.worldview,n._renderTaskQueue=new ha,n._domRenderTaskQueue=new ha,n._controls=[],n._markers=[],n._popups=[],n._mapId=e.uniqueId(),n._locale=e.extend({},_a,t.locale),n._clickTolerance=t.clickTolerance,n._cooperativeGestures=t.cooperativeGestures,n._performanceMetricsCollection=t.performanceMetricsCollection,n._containerWidth=0,n._containerHeight=0,n._averageElevationLastSampledAt=-1/0,n._averageElevationExaggeration=0,n._averageElevation=new ga(0),n._interactionRange=[1/0,-1/0],n._visibilityHidden=0,n._useExplicitProjection=!1,n._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),n._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(n._container=e.window.document.getElementById(t.container),!n._container)throw new Error("Container '".concat(t.container,"' not found."))}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");n._container=t.container}if(n._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&n.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],i(n)),n._setupContainer(),n._setupPainter(),void 0===n.painter)throw new Error("Failed to initialize WebGL.");return n.on("move",(function(){return n._update(!1)})),n.on("moveend",(function(){return n._update(!1)})),n.on("zoom",(function(){return n._update(!0)})),void 0!==e.window&&(e.window.addEventListener("online",n._onWindowOnline,!1),e.window.addEventListener("resize",n._onWindowResize,!1),e.window.addEventListener("orientationchange",n._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",n._onWindowResize,!1),e.window.addEventListener("visibilitychange",n._onVisibilityChange,!1)),n.handlers=new sa(i(n),t),n._localFontFamily=t.localFontFamily,n._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&n.setStyle(t.style,{localFontFamily:n._localFontFamily,localIdeographFontFamily:n._localIdeographFontFamily}),t.projection&&n.setProjection(t.projection),n._hash=t.hash&&new hi("string"==typeof t.hash&&t.hash||void 0).addTo(i(n)),n._hash&&n._hash._onHashChange()||(n.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(n.resize(),n.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),n.resize(),t.attributionControl&&n.addControl(new la({customAttribution:t.customAttribution})),n._logoControl=new ca,n.addControl(n._logoControl,t.logoPosition),n.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),n.on("data",(function(t){n._update("style"===t.dataType),n.fire(new e.Event("".concat(t.dataType,"data"),t))})),n.on("dataloading",(function(t){n.fire(new e.Event("".concat(t.dataType,"dataloading"),t))})),u(n)}return d(c,[{key:"_getMapId",value:function(){return this._mapId}},{key:"addControl",value:function(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=t.onAdd(this);this._controls.push(t);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}},{key:"removeControl",value:function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}},{key:"hasControl",value:function(e){return this._controls.indexOf(e)>-1}},{key:"getContainer",value:function(){return this._container}},{key:"getCanvasContainer",value:function(){return this._canvasContainer}},{key:"getCanvas",value:function(){return this._canvas}},{key:"resize",value:function(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));var n=!this._moving;return n&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),n&&this.fire(new e.Event("moveend",t)),this}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()||null}},{key:"setMaxBounds",value:function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}},{key:"setMinZoom",value:function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}},{key:"getLanguage",value:function(){return this._language}},{key:"_parseLanguage",value:function(t){return"auto"===t?e.window.navigator.language:Array.isArray(t)?0===t.length?void 0:t.map((function(t){return"auto"===t?e.window.navigator.language:t})):t}},{key:"setLanguage",value:function(e){var t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();var n,r=p(this._controls);try{for(r.s();!(n=r.n()).done;){var i=n.value;i._setLanguage&&i._setLanguage(this._language)}}catch(a){r.e(a)}finally{r.f()}return this}},{key:"getWorldview",value:function(){return this._worldview}},{key:"setWorldview",value:function(e){return this.style&&e!==this._worldview?(this._worldview=e,this.style._reloadSources(),this):this}},{key:"getProjection",value:function(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}},{key:"_showingGlobe",value:function(){return"globe"===this.transform.projection.name}},{key:"setProjection",value:function(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}},{key:"_updateProjectionTransition",value:function(){if("globe"===this.getProjection().name){var t,n=this.transform,r=n.projection.name;"globe"===r&&n.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(n.setMercatorFromTransition(),t=!0):"mercator"===r&&n.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(n.setProjection({name:"globe"}),t=!0),t&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}}},{key:"_prioritizeAndUpdateProjection",value:function(e,t){return this._updateProjection(e||t||{name:"mercator"})}},{key:"_updateProjection",value:function(t){var n;if(n="globe"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),n){for(var r in this.painter.clearBackgroundTiles(),this.style._sourceCaches)this.style._sourceCaches[r].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}},{key:"project",value:function(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}},{key:"unproject",value:function(t){return this.transform.pointLocation3D(e.pointGeometry.convert(t))}},{key:"isMoving",value:function(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}},{key:"isZooming",value:function(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}},{key:"isRotating",value:function(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}},{key:"_isDragging",value:function(){return this.handlers&&this.handlers._isDragging()||!1}},{key:"_createDelegatedListener",value:function(e,t,n){var i=this;if("mouseenter"===e||"mouseover"===e){var a=!1,s=function(r){var s=t.filter((function(e){return i.getLayer(e)})),o=s.length?i.queryRenderedFeatures(r.point,{layers:s}):[];o.length?a||(a=!0,n.call(i,new Ei(e,i,r.originalEvent,{features:o}))):a=!1},o=function(){a=!1};return{layers:new Set(t),listener:n,delegates:{mousemove:s,mouseout:o}}}if("mouseleave"===e||"mouseout"===e){var u=!1,l=function(r){var a=t.filter((function(e){return i.getLayer(e)}));(a.length?i.queryRenderedFeatures(r.point,{layers:a}):[]).length?u=!0:u&&(u=!1,n.call(i,new Ei(e,i,r.originalEvent)))},c=function(t){u&&(u=!1,n.call(i,new Ei(e,i,t.originalEvent)))};return{layers:new Set(t),listener:n,delegates:{mousemove:l,mouseout:c}}}var h=function(e){var r=t.filter((function(e){return i.getLayer(e)})),a=r.length?i.queryRenderedFeatures(e.point,{layers:r}):[];a.length&&(e.features=a,n.call(i,e),delete e.features)};return{layers:new Set(t),listener:n,delegates:r({},e,h)}}},{key:"on",value:function(e,t,n){if(void 0===n)return s(o(c.prototype),"on",this).call(this,e,t);Array.isArray(t)||(t=[t]);var r=this._createDelegatedListener(e,t,n);for(var i in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r),r.delegates)this.on(i,r.delegates[i]);return this}},{key:"once",value:function(e,t,n){if(void 0===n)return s(o(c.prototype),"once",this).call(this,e,t);Array.isArray(t)||(t=[t]);var r=this._createDelegatedListener(e,t,n);for(var i in r.delegates)this.once(i,r.delegates[i]);return this}},{key:"off",value:function(e,t,n){var r=this;if(void 0===n)return s(o(c.prototype),"off",this).call(this,e,t);t=new Set(Array.isArray(t)?t:[t]);var i=function(e,t){if(e.size!==t.size)return!1;var n,r=p(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!t.has(i))return!1}}catch(a){r.e(a)}finally{r.f()}return!0},a=this._delegatedListeners?this._delegatedListeners[e]:void 0;return a&&function(e){for(var a=0;a<e.length;a++){var s=e[a];if(s.listener===n&&i(s.layers,t)){for(var o in s.delegates)r.off(o,s.delegates[o]);return e.splice(a,1),r}}}(a),this}},{key:"queryRenderedFeatures",value:function(t,n){return this.style?(void 0!==n||void 0===t||t instanceof e.pointGeometry||Array.isArray(t)||(n=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}},{key:"querySourceFeatures",value:function(e,t){return this.style.querySourceFeatures(e,t)}},{key:"setStyle",value:function(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(t,n))}},{key:"_getUIString",value:function(e){var t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}},{key:"_updateStyle",value:function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new fn(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}},{key:"_lazyInitEmptyStyle",value:function(){this.style||(this.style=new fn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}},{key:"_diffStyle",value:function(t,n){var r=this;if("string"==typeof t){var i=this._requestManager.normalizeStyleURL(t),a=this._requestManager.transformRequest(i,e.ResourceType.Style);e.getJSON(a,(function(t,i){t?r.fire(new e.ErrorEvent(t)):i&&r._updateDiff(i,n)}))}else"object"==typeof t&&this._updateDiff(t,n)}},{key:"_updateDiff",value:function(t,n){try{this.style.setState(t)&&this._update(!0)}catch(l){e.warnOnce("Unable to perform style diff: ".concat(l.message||l.error||l,".  Rebuilding the style from scratch.")),this._updateStyle(t,n)}}},{key:"getStyle",value:function(){if(this.style)return this.style.serialize()}},{key:"isStyleLoaded",value:function(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}},{key:"addSource",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}},{key:"isSourceLoaded",value:function(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}},{key:"areTilesLoaded",value:function(){var e=this.style&&this.style._sourceCaches;for(var t in e){var n=e[t]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0}},{key:"addSourceType",value:function(e,t,n){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}},{key:"removeSource",value:function(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}},{key:"getSource",value:function(e){return this.style.getSource(e)}},{key:"addImage",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.pixelRatio,a=void 0===i?1:i,s=r.sdf,o=void 0!==s&&s,u=r.stretchX,l=r.stretchY,c=r.content;if(this._lazyInitEmptyStyle(),n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap){var h=e.exported.getImageData(n),p=h.width,f=h.height,d=h.data;this.style.addImage(t,{data:new e.RGBAImage({width:p,height:f},d),pixelRatio:a,stretchX:u,stretchY:l,content:c,sdf:o,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{var v=n.width,m=n.height,y=n;this.style.addImage(t,{data:new e.RGBAImage({width:v,height:m},new Uint8Array(y.data)),pixelRatio:a,stretchX:u,stretchY:l,content:c,sdf:o,version:0,userImage:y}),y.onAdd&&y.onAdd(this,t)}}},{key:"updateImage",value:function(t,n){var r=this.style.getImage(t);if(r){var i=n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap?e.exported.getImageData(n):n,a=i.width,s=i.height;void 0!==a&&void 0!==s?a===r.data.width&&s===r.data.height?(r.data.replace(i.data,!(n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap)),this.style.updateImage(t,r)):this.fire(new e.ErrorEvent(new Error("The width and height of the updated image (".concat(a,", ").concat(s,")\n                must be that same as the previous version of the image\n                (").concat(r.data.width,", ").concat(r.data.height,")")))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}else this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")))}},{key:"hasImage",value:function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}},{key:"removeImage",value:function(e){this.style.removeImage(e)}},{key:"loadImage",value:function(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),(function(t,r){n(t,r instanceof e.window.HTMLImageElement?e.exported.getImageData(r):r)}))}},{key:"listImages",value:function(){return this.style.listImages()}},{key:"addLayer",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}},{key:"moveLayer",value:function(e,t){return this.style.moveLayer(e,t),this._update(!0)}},{key:"removeLayer",value:function(e){return this.style.removeLayer(e),this._update(!0)}},{key:"getLayer",value:function(e){return this.style.getLayer(e)}},{key:"setLayerZoomRange",value:function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}},{key:"setFilter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,n),this._update(!0)}},{key:"getFilter",value:function(e){return this.style.getFilter(e)}},{key:"setPaintProperty",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,n,r),this._update(!0)}},{key:"getPaintProperty",value:function(e,t){return this.style.getPaintProperty(e,t)}},{key:"setLayoutProperty",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,n,r),this._update(!0)}},{key:"getLayoutProperty",value:function(e,t){return this.style.getLayoutProperty(e,t)}},{key:"setLight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}},{key:"getLight",value:function(){return this.style.getLight()}},{key:"setTerrain",value:function(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}},{key:"getTerrain",value:function(){return this.style?this.style.getTerrain():null}},{key:"setFog",value:function(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}},{key:"getFog",value:function(){return this.style?this.style.getFog():null}},{key:"_queryFogOpacity",value:function(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}},{key:"setFeatureState",value:function(e,t){return this.style.setFeatureState(e,t),this._update()}},{key:"removeFeatureState",value:function(e,t){return this.style.removeFeatureState(e,t),this._update()}},{key:"getFeatureState",value:function(e){return this.style.getFeatureState(e)}},{key:"_updateContainerDimensions",value:function(){if(this._container){for(var t,n,r,i=this._container.getBoundingClientRect().width||400,a=this._container.getBoundingClientRect().height||300,s=this._container;s&&(!n||!r);){var o=e.window.getComputedStyle(s).transform;o&&"none"!==o&&((t=o.match(/matrix.*\((.+)\)/)[1].split(", "))[0]&&"0"!==t[0]&&"1"!==t[0]&&(n=t[0]),t[3]&&"0"!==t[3]&&"1"!==t[3]&&(r=t[3])),s=s.parentElement}this._containerWidth=n?Math.abs(i/n):i,this._containerHeight=r?Math.abs(a/r):a}}},{key:"_detectMissingCSS",value:function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}},{key:"_setupContainer",value:function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=g("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=g("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=g("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);var n=this._controlContainer=g("div","mapboxgl-control-container",e),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){r[e]=g("div","mapboxgl-ctrl-".concat(e),n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}},{key:"_resizeCanvas",value:function(t,n){var r=e.exported.devicePixelRatio||1;this._canvas.width=r*Math.ceil(t),this._canvas.height=r*Math.ceil(n),this._canvas.style.width="".concat(t,"px"),this._canvas.style.height="".concat(n,"px")}},{key:"_addMarker",value:function(e){this._markers.push(e)}},{key:"_removeMarker",value:function(e){var t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}},{key:"_addPopup",value:function(e){this._popups.push(e)}},{key:"_removePopup",value:function(e){var t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1)}},{key:"_setupPainter",value:function(){var t=this,r=e.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._useWebGL2&&this._canvas.getContext("webgl2",r),a=i||this._canvas.getContext("webgl",r)||this._canvas.getContext("experimental-webgl",r);a?(this._useWebGL2&&!i&&e.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),e.storeAuthState(a,!0),this.painter=new Kr(a,this.transform,!!i),this.on("data",(function(e){"source"===e.dataType&&t.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(a)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}},{key:"_contextLost",value:function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}},{key:"_contextRestored",value:function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}},{key:"_onMapScroll",value:function(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}},{key:"loaded",value:function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}},{key:"_update",value:function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}},{key:"_requestRenderFrame",value:function(e){return this._update(),this._renderTaskQueue.add(e)}},{key:"_cancelRenderFrame",value:function(e){this._renderTaskQueue.remove(e)}},{key:"_requestDomTask",value:function(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}},{key:"_render",value:function(t){var n,r=this,i=this.painter.context.extTimerQuery,a=e.exported.now();if(this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),!this._removed){this._updateProjectionTransition();var s=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;var o=this.transform.zoom,u=this.transform.pitch,l=e.exported.now(),c=new e.EvaluationParameters(o,{now:l,fadeDuration:s,pitch:u,transition:this.style.getTransition()});this.style.update(c)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);var h=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),h=this._updateAverageElevation(a),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):h=this._updateAverageElevation(a),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){var p=e.exported.now()-a;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout((function(){var t=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),r.fire(new e.Event("gpu-timing-frame",{cpuTime:p,gpuTime:t})),e.window.performance.mark("frame-gpu",{startTime:a,detail:{gpuTime:t}})}),50)}if(this.listens("gpu-timing-layer")){var f=this.painter.collectGpuTimers();setTimeout((function(){var t=r.painter.queryGpuTimers(f);r.fire(new e.Event("gpu-timing-layer",{layerTimes:t}))}),50)}if(this.listens("gpu-timing-deferred-render")){var d=this.painter.collectDeferredRenderGpuQueries();setTimeout((function(){var t=r.painter.queryGpuTimeDeferredRender(d);r.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:t}))}),50)}var v=this._sourcesDirty||this._styleDirty||this._placementDirty||h;if(v||this._repaint)this.triggerRepaint();else{var m=!this.isMoving()&&this.loaded();if(m&&(h=this._updateAverageElevation(a,!0)),h)this.triggerRepaint();else if(this._triggerFrame(!1),m&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){var y=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:y})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}}},{key:"_forceMarkerAndPopupUpdate",value:function(e){var t,n=p(this._markers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e&&!this.getRenderWorldCopies()&&(r._lngLat=r._lngLat.wrap()),r._update()}}catch(o){n.e(o)}finally{n.f()}var i,a=p(this._popups);try{for(a.s();!(i=a.n()).done;){var s=i.value;!e||this.getRenderWorldCopies()||s._trackPointer||(s._lngLat=s._lngLat.wrap()),s._update()}}catch(o){a.e(o)}finally{a.f()}}},{key:"_updateAverageElevation",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=function(e){return t.transform.averageElevation=e,t._update(!1),!0};if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&r(0);if((n||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){var i=this.transform.averageElevation,a=this.transform.sampleAverageElevation(),s=!1;this.transform.elevation&&(s=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(a)?a=0:this._averageElevationLastSampledAt=e;var o=Math.abs(i-a);if(o>1){if(this._isInitialLoad||s)return this._averageElevation.jumpTo(a),r(a);this._averageElevation.easeTo(a,e,300)}else if(o>1e-4)return this._averageElevation.jumpTo(a),r(a)}return!!this._averageElevation.isEasing(e)&&r(this._averageElevation.getValue(e))}},{key:"_authenticate",value:function(){var t=this;e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(n){if(n&&(n.message===e.AUTH_ERR_MSG||401===n.status)){var r=t.painter.context.gl;e.storeAuthState(r,!1),t._logoControl instanceof ca&&t._logoControl._updateLogo(),r&&r.clear(r.DEPTH_BUFFER_BIT|r.COLOR_BUFFER_BIT|r.STENCIL_BUFFER_BIT),t._silenceAuthErrors||t.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(){}))}},{key:"_updateTerrain",value:function(){var e=this._isDragging();this.painter.updateTerrain(this.style,e)}},{key:"_calculateSpeedIndex",value:function(){var e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());var n=this.painter.context.gl,r=n.createFramebuffer();function i(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);var t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}},{key:"_canvasPixelComparison",value:function(e,t,n){for(var r=n[1]-n[0],i=e.length/4,a=0;a<t.length;a++){for(var s=t[a],o=0,u=0;u<s.length;u+=4)s[u]===e[u]&&s[u+1]===e[u+1]&&s[u+2]===e[u+2]&&s[u+3]===e[u+3]&&(o+=1);r+=(n[a+2]-n[a+1])*(1-o/i)}return r}},{key:"remove",value:function(){this._hash&&this._hash.remove();var t,n=p(this._controls);try{for(n.s();!(t=n.n()).done;)t.value.onRemove(this)}catch(i){n.e(i)}finally{n.f()}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1),e.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}},{key:"triggerRepaint",value:function(){this._triggerFrame(!0)}},{key:"_triggerFrame",value:function(t){var n=this;this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((function(e){var t=!!n._renderNextFrame;n._frame=null,n._renderNextFrame=null,t&&n._render(e)})))}},{key:"_preloadTiles",value:function(t){var n=this,r=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(r,(function(e,n){return e._preloadTiles(t,n)}),(function(){n.triggerRepaint()})),this}},{key:"_onWindowOnline",value:function(){this._update()}},{key:"_onWindowResize",value:function(e){this._trackResize&&this.resize({originalEvent:e})._update()}},{key:"_onVisibilityChange",value:function(){"hidden"===e.window.document.visibilityState&&this._visibilityHidden++}},{key:"showTileBoundaries",get:function(){return!!this._showTileBoundaries},set:function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}},{key:"showTerrainWireframe",get:function(){return!!this._showTerrainWireframe},set:function(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}},{key:"speedIndexTiming",get:function(){return!!this._speedIndexTiming},set:function(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}},{key:"showPadding",get:function(){return!!this._showPadding},set:function(e){this._showPadding!==e&&(this._showPadding=e,this._update())}},{key:"showCollisionBoxes",get:function(){return!!this._showCollisionBoxes},set:function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}},{key:"showOverdrawInspector",get:function(){return!!this._showOverdrawInspector},set:function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}},{key:"repaint",get:function(){return!!this._repaint},set:function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}},{key:"vertices",get:function(){return!!this._vertices},set:function(e){this._vertices=e,this._update()}},{key:"showTileAABBs",get:function(){return!!this._showTileAABBs},set:function(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update())}},{key:"_setCacheLimits",value:function(t,n){e.setCacheLimits(t,n)}},{key:"version",get:function(){return e.version}}]),c}(ua),NavigationControl:function(){function t(n){var r=this;f(this,t),this.options=e.extend({},Ea,n),this._container=g("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(e){r._map&&r._map.zoomIn({},{originalEvent:e})})),g("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(e){r._map&&r._map.zoomOut({},{originalEvent:e})})),g("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(e){var t=r._map;t&&(r.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))})),this._compassIcon=g("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}return d(t,[{key:"_updateZoomButtons",value:function(){var e=this._map;if(e){var t=e.getZoom(),n=t===e.getMaxZoom(),r=t===e.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}}},{key:"_rotateCompassArrow",value:function(){var e=this,t=this._map;if(t){var n=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(t.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(t.transform.pitch,"deg) rotateZ(").concat(t.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(t.transform.angle*(180/Math.PI),"deg)");t._requestDomTask((function(){e._compassIcon&&(e._compassIcon.style.transform=n)}))}}},{key:"onAdd",value:function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new xa(e,this._compass,this.options.visualizePitch)),this._container}},{key:"onRemove",value:function(){var e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}},{key:"_createButton",value:function(e,t){var n=g("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}},{key:"_setButtonTitle",value:function(e,t){if(this._map){var n=this._map._getUIString("NavigationControl.".concat(t));e.setAttribute("aria-label",n),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}}}]),t}(),GeolocateControl:function(t){v(r,t);var n=m(r);function r(t){var a;return f(this,r),(a=n.call(this)).options=e.extend({geolocation:e.window.navigator.geolocation},ba,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],i(a)),a._updateMarkerRotationThrottled=ci(a._updateMarkerRotation,20),a._numberOfWatches=0,a}return d(r,[{key:"onAdd",value:function(e){return this._map=e,this._container=g("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}},{key:"onRemove",value:function(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}},{key:"_checkGeolocationSupport",value:function(t){var n=this,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!!n.options.geolocation;n._supportsGeolocation=e,t(e)};void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((function(e){return r("denied"!==e.state)})).catch((function(){return r()})):r()}},{key:"_isOutOfMapMaxBounds",value:function(e){var t=this._map.getMaxBounds(),n=e.coords;return!!t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}},{key:"_setErrorState",value:function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}},{key:"_onSuccess",value:function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}},{key:"_updateCamera",value:function(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,i=this._map.getBearing(),a=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),a,{geolocateSource:!0})}},{key:"_updateMarker",value:function(t){if(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}},{key:"_updateCircleRadius",value:function(){var t=this._map.transform,n=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,r=Math.ceil(2*this._accuracy*n);this._circleElement.style.width="".concat(r,"px"),this._circleElement.style.height="".concat(r,"px")}},{key:"_onZoom",value:function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}},{key:"_updateMarkerRotation",value:function(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}},{key:"_onError",value:function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",n),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}},{key:"_finish",value:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}},{key:"_setupUI",value:function(t){var n=this;if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=g("button","mapboxgl-ctrl-geolocate",this._container),g("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",r),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",r)}else{var i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g("div","mapboxgl-user-location"),this._dotElement.appendChild(g("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(g("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new da({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=g("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new da({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==n._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new e.Event("trackuserlocationend")))}))}}},{key:"_onDeviceOrientation",value:function(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}},{key:"trigger",value:function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(t={maximumAge:6e5,timeout:0},this._noTimeout=!0):(t=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,t),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}},{key:"_addDeviceOrientationListener",value:function(){var t=this,n=function(){e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",t._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(e){"granted"===e&&n()})).catch(console.error):n()}},{key:"_clearWatch",value:function(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}]),r}(e.Evented),AttributionControl:la,ScaleControl:function(){function t(n){f(this,t),this.options=e.extend({},Ia,n),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch(e){return!1}}()||(this._setScale=wa.bind(this)),e.bindAll(["_update","_setScale","setUnit"],this)}return d(t,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_update",value:function(){var e=this.options.maxWidth||100,t=this._map,n=t._containerHeight/2,r=t._containerWidth/2-e/2,i=t.unproject([r,n]),a=t.unproject([r+e,n]),s=i.distanceTo(a);if("imperial"===this.options.unit){var o=3.2808*s;o>5280?this._setScale(e,o/5280,"mile"):this._setScale(e,o,"foot")}else"nautical"===this.options.unit?this._setScale(e,s/1852,"nautical-mile"):s>=1e3?this._setScale(e,s/1e3,"kilometer"):this._setScale(e,s,"meter")}},{key:"_setScale",value:function(e,t,n){var r=this,i=ka(t),a=i/t;this._map._requestDomTask((function(){r._container.style.width=e*a+"px",r._container.innerHTML="nautical-mile"!==n?new Intl.NumberFormat(r._language,{style:"unit",unitDisplay:"narrow",unit:n}).format(i):"".concat(i,"&nbsp;nm")}))}},{key:"onAdd",value:function(e){return this._map=e,this._language=e.getLanguage(),this._container=g("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}},{key:"_setLanguage",value:function(e){this._language=e,this._update()}},{key:"setUnit",value:function(e){this.options.unit=e,this._update()}}]),t}(),FullscreenControl:function(){function t(n){f(this,t),this._fullscreen=!1,n&&n.container&&(n.container instanceof e.window.HTMLElement?this._container=n.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}return d(t,[{key:"onAdd",value:function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=g("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}},{key:"onRemove",value:function(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_checkFullscreenSupport",value:function(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}},{key:"_setupUI",value:function(){var t=this._fullscreenButton=g("button","mapboxgl-ctrl-fullscreen",this._controlContainer);g("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_updateTitle",value:function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}},{key:"_getTitle",value:function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}},{key:"_isFullscreen",value:function(){return this._fullscreen}},{key:"_changeIcon",value:function(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}},{key:"_onClickFullscreen",value:function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}}]),t}(),Popup:function(t){v(r,t);var n=m(r);function r(t){var a;return f(this,r),(a=n.call(this)).options=e.extend(Object.create(va),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],i(a)),a._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[]),a}return d(r,[{key:"addTo",value:function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}},{key:"isOpen",value:function(){return!!this._map}},{key:"remove",value:function(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);var t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove("mapboxgl-track-pointer"),t._removePopup(this),this._map=void 0),this.fire(new e.Event("close")),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();var n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}},{key:"trackPointer",value:function(){this._trackPointer=!0,this._pos=null,this._update();var e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}},{key:"getElement",value:function(){return this._container}},{key:"setText",value:function(t){return this.setDOMContent(e.window.document.createTextNode(t))}},{key:"setHTML",value:function(t){var n,r=e.window.document.createDocumentFragment(),i=e.window.document.createElement("body");for(i.innerHTML=t;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)}},{key:"getMaxWidth",value:function(){return this._container&&this._container.style.maxWidth}},{key:"setMaxWidth",value:function(e){return this.options.maxWidth=e,this._update(),this}},{key:"setDOMContent",value:function(e){var t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=g("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){var n=this._closeButton=g("button","mapboxgl-popup-close-button",t);n.type="button",n.setAttribute("aria-label","Close popup"),n.setAttribute("aria-hidden","true"),n.innerHTML="&#215;",n.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}},{key:"addClassName",value:function(e){return this._classList.add(e),this._updateClassList(),this}},{key:"removeClassName",value:function(e){return this._classList.delete(e),this._updateClassList(),this}},{key:"setOffset",value:function(e){return this.options.offset=e,this._update(),this}},{key:"toggleClassName",value:function(e){var t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}},{key:"_onMouseEvent",value:function(e){this._update(e.point)}},{key:"_getAnchor",value:function(e){if(this.options.anchor)return this.options.anchor;var t=this._map,n=this._container,r=this._pos;if(!t||!n||!r)return"bottom";var i=n.offsetWidth,a=n.offsetHeight,s=r.x<i/2,o=r.x>t.transform.width-i/2;if(r.y+e<a)return s?"top-left":o?"top-right":"top";if(r.y>t.transform.height-a){if(s)return"bottom-left";if(o)return"bottom-right"}return s?"left":o?"right":"bottom"}},{key:"_updateClassList",value:function(){var e=this._container;if(e){var t=c(this._classList);t.push("mapboxgl-popup"),this._anchor&&t.push("mapboxgl-popup-anchor-".concat(this._anchor)),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}}},{key:"_update",value:function(t){var n=this,r=this._map,i=this._content;if(r&&(this._lngLat||this._trackPointer)&&i){var a=this._container;if(a||(a=this._container=g("div","mapboxgl-popup",r.getContainer()),this._tip=g("div","mapboxgl-popup-tip",a),a.appendChild(i)),this.options.maxWidth&&a.style.maxWidth!==this.options.maxWidth&&(a.style.maxWidth=this.options.maxWidth),r.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=pa(this._lngLat,this._pos,r.transform)),!this._trackPointer||t){var s=this._pos=this._trackPointer&&t?t:r.project(this._lngLat),o=ya(this.options.offset),u=this._anchor=this._getAnchor(o.y),l=ya(this.options.offset,u),c=s.add(l).round();r._requestDomTask((function(){n._container&&u&&(n._container.style.transform="".concat(fa[u]," translate(").concat(c.x,"px,").concat(c.y,"px)"))}))}if(!this._marker&&r._showingGlobe()){var h=e.isLngLatBehindGlobe(r.transform,this._lngLat)?0:1;this._setOpacity(h)}this._updateClassList()}}},{key:"_focusFirstElement",value:function(){if(this.options.focusAfterOpen&&this._container){var e=this._container.querySelector(ma);e&&e.focus()}}},{key:"_onClose",value:function(){this.remove()}},{key:"_setOpacity",value:function(e){this._container&&(this._container.style.opacity="".concat(e)),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}}]),r}(e.Evented),Marker:da,Style:fn,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.pointGeometry,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:ti,Evented:e.Evented,config:e.config,prewarm:function(){tt().acquire($e)},clearPrewarmedResources:function(){var e=Je;e&&(e.isPreloaded()&&1===e.numActive()?(e.release($e),Je=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return et.workerCount},set workerCount(e){et.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return Sa})),n}()},534:function(e,t,n){"use strict";var r=n(7313),i=n(2224);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},d={};function v(e,t,n,r,i,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(d,e)||!h.call(f,e)&&(p.test(e)?d[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var T=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),S=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var F,L=Object.assign;function U(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var Z=!1;function B(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var u="\n"+i[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=s&&0<=o);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case b:return"Fragment";case x:return"Portal";case w:return"Profiler";case I:return"StrictMode";case C:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case R:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function j(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=j(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=j(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,j(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+j(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:j(n)}}function ae(e,t){var n=j(t.value),r=j(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){de.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Te=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,be=null,Ie=null;function we(e){if(e=_i(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=Ei(t),xe(e.stateNode,e.type,t))}}function ke(e){be?Ie?Ie.push(e):Ie=[e]:be=e}function Se(){if(be){var e=be,t=Ie;if(Ie=be=null,we(e),t)for(e=0;e<t.length;e++)we(t[e])}}function Re(e,t){return e(t)}function Ce(){}var De=!1;function Ae(e,t,n){if(De)return e(t,n);De=!0;try{return Re(e,t,n)}finally{De=!1,(null!==be||null!==Ie)&&(Ce(),Se())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=Ei(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ne=!1;if(c)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ce){Ne=!1}function Pe(e,t,n,r,i,a,s,o,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Fe=!1,Le=null,Ue=!1,Ze=null,Be={onError:function(e){Fe=!0,Le=e}};function ze(e,t,n,r,i,a,s,o,u){Fe=!1,Le=null,Pe.apply(Be,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function je(e){if(Ge(e)!==e)throw Error(a(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return je(i),e;if(s===r)return je(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o){for(u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ye=i.unstable_scheduleCallback,qe=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Ke=i.unstable_requestPaint,Qe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/ut|0)|0},ot=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=ht(o):0!==(a&=s)&&(r=ht(a))}else 0!==(s=n&~i)?r=ht(s):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function dt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function Tt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Et,xt,bt,It,wt,kt=!1,St=[],Rt=null,Ct=null,Dt=null,At=new Map,Ot=new Map,Nt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Ft(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=gi(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void wt(e.priority,(function(){bt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Te=r,n.target.dispatchEvent(r),Te=null,t.shift()}return!0}function Zt(e,t,n){Ut(e)&&n.delete(t)}function Bt(){kt=!1,null!==Rt&&Ut(Rt)&&(Rt=null),null!==Ct&&Ut(Ct)&&(Ct=null),null!==Dt&&Ut(Dt)&&(Dt=null),At.forEach(Zt),Ot.forEach(Zt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Gt(e){function t(t){return zt(t,e)}if(0<St.length){zt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Rt&&zt(Rt,e),null!==Ct&&zt(Ct,e),null!==Dt&&zt(Dt,e),At.forEach(t),Ot.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Nt.shift()}var Ht=T.ReactCurrentBatchConfig,jt=!0;function Vt(e,t,n,r){var i=_t,a=Ht.transition;Ht.transition=null;try{_t=1,Yt(e,t,n,r)}finally{_t=i,Ht.transition=a}}function Wt(e,t,n,r){var i=_t,a=Ht.transition;Ht.transition=null;try{_t=4,Yt(e,t,n,r)}finally{_t=i,Ht.transition=a}}function Yt(e,t,n,r){if(jt){var i=Xt(e,t,n,r);if(null===i)jr(e,t,r,qt,n),Pt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Rt=Ft(Rt,e,t,n,r,i),!0;case"dragenter":return Ct=Ft(Ct,e,t,n,r,i),!0;case"mouseover":return Dt=Ft(Dt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Ft(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Ft(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==i;){var a=_i(i);if(null!==a&&Et(a),null===(a=Xt(e,t,n,r))&&jr(e,t,r,qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else jr(e,t,r,null,n)}}var qt=null;function Xt(e,t,n,r){if(qt=null,null!==(e=gi(e=Ee(r))))if(null===(t=Ge(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,$t=null;function en(){if($t)return $t;var e,t,n=Jt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),hn=L({},ln,{view:0,detail:0}),pn=an(hn),fn=L({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(sn=e.screenX-un.screenX,on=e.screenY-un.screenY):on=sn=0,un=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),dn=an(fn),vn=an(L({},fn,{dataTransfer:0})),mn=an(L({},hn,{relatedTarget:0})),yn=an(L({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=L({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(gn),Tn=an(L({},ln,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=bn[e])&&!!t[e]}function wn(){return In}var kn=L({},hn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=an(kn),Rn=an(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(L({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn})),Dn=an(L({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(An),Nn=[9,13,27,32],Mn=c&&"CompositionEvent"in window,Pn=null;c&&"documentMode"in document&&(Pn=document.documentMode);var Fn=c&&"TextEvent"in window&&!Pn,Ln=c&&(!Mn||Pn&&8<Pn&&11>=Pn),Un=String.fromCharCode(32),Zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Vn(e,t,n,r){ke(r),0<(t=Wr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Yn=null;function qn(e){Ur(e,0)}function Xn(e){if(Y(Ti(e)))return e}function Kn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Jn;if(c){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Jn=$n}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Yn=Wn=null)}function nr(e){if("value"===e.propertyName&&Xn(Yn)){var t=[];Vn(t,Yn,e,Ee(e)),Ae(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Yn)}function ar(e,t){if("click"===e)return Xn(t)}function sr(e,t){if("input"===e||"change"===e)return Xn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!or(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function dr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var s=cr(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,_r=!1;function Tr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==mr||mr!==q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function Er(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},br={},Ir={};function wr(e){if(br[e])return br[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return br[e]=n[t];return e}c&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var kr=wr("animationend"),Sr=wr("animationiteration"),Rr=wr("animationstart"),Cr=wr("transitionend"),Dr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Dr.set(e,t),u(t,[e])}for(var Nr=0;Nr<Ar.length;Nr++){var Mr=Ar[Nr];Or(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Or(kr,"onAnimationEnd"),Or(Sr,"onAnimationIteration"),Or(Rr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Cr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,o,u,l){if(ze.apply(this,arguments),Fe){if(!Fe)throw Error(a(198));var c=Le;Fe=!1,Le=null,Ue||(Ue=!0,Ze=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],u=o.instance,l=o.currentTarget;if(o=o.listener,u!==a&&i.isPropagationStopped())break e;Lr(i,o,l),a=u}else for(s=0;s<r.length;s++){if(u=(o=r[s]).instance,l=o.currentTarget,o=o.listener,u!==a&&i.isPropagationStopped())break e;Lr(i,o,l),a=u}}}if(Ue)throw e=Ze,Ue=!1,Ze=null,e}function Zr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[zr]){e[zr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Br("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Kt(t)){case 1:var i=Vt;break;case 4:i=Wt;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function jr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var u=s.tag;if((3===u||4===u)&&((u=s.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=gi(o)))return;if(5===(u=s.tag)||6===u){r=a=s;continue e}o=o.parentNode}}r=r.return}Ae((function(){var r=a,i=Ee(n),s=[];e:{var o=Dr.get(e);if(void 0!==o){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Sn;break;case"focusin":l="focus",u=mn;break;case"focusout":l="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Cn;break;case kr:case Sr:case Rr:u=yn;break;case Cr:u=Dn;break;case"scroll":u=pn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Rn}var c=0!==(4&t),h=!c&&"scroll"===e,p=c?null!==o?o+"Capture":null:o;c=[];for(var f,d=r;null!==d;){var v=(f=d).stateNode;if(5===f.tag&&null!==v&&(f=v,null!==p&&(null!=(v=Oe(d,p))&&c.push(Vr(d,v,f)))),h)break;d=d.return}0<c.length&&(o=new u(o,l,null,n,i),s.push({event:o,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Te||!(l=n.relatedTarget||n.fromElement)||!gi(l)&&!l[di])&&(u||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?gi(l):null)&&(l!==(h=Ge(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=dn,v="onMouseLeave",p="onMouseEnter",d="mouse","pointerout"!==e&&"pointerover"!==e||(c=Rn,v="onPointerLeave",p="onPointerEnter",d="pointer"),h=null==u?o:Ti(u),f=null==l?o:Ti(l),(o=new c(v,d+"leave",u,n,i)).target=h,o.relatedTarget=f,v=null,gi(i)===r&&((c=new c(p,d+"enter",l,n,i)).target=f,c.relatedTarget=h,v=c),h=v,u&&l)e:{for(p=l,d=0,f=c=u;f;f=Yr(f))d++;for(f=0,v=p;v;v=Yr(v))f++;for(;0<d-f;)c=Yr(c),d--;for(;0<f-d;)p=Yr(p),f--;for(;d--;){if(c===p||null!==p&&c===p.alternate)break e;c=Yr(c),p=Yr(p)}c=null}else c=null;null!==u&&qr(s,o,u,c,!1),null!==l&&null!==h&&qr(s,h,l,c,!0)}if("select"===(u=(o=r?Ti(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===u&&"file"===o.type)var m=Kn;else if(jn(o))if(Qn)m=sr;else{m=ir;var y=rr}else(u=o.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=ar);switch(m&&(m=m(e,r))?Vn(s,m,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?Ti(r):window,e){case"focusin":(jn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Tr(s,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":Tr(s,n,i)}var g;if(Mn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Gn?Bn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Ln&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Gn&&(g=en()):(Jt="value"in(Qt=i)?Qt.value:Qt.textContent,Gn=!0)),0<(y=Wr(r,_)).length&&(_=new Tn(_,e,null,n,i),s.push({event:_,listeners:y}),g?_.data=g:null!==(g=zn(n))&&(_.data=g))),(g=Fn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Zn=!0,Un);case"textInput":return(e=t.data)===Un&&Zn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=en(),$t=Jt=Qt=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new Tn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=g))}Ur(s,t)}))}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Vr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Vr(e,a,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var o=n,u=o.alternate,l=o.stateNode;if(null!==u&&u===r)break;5===o.tag&&null!==l&&(o=l,i?null!=(u=Oe(n,a))&&s.unshift(Vr(n,u,o)):i||null!=(u=Oe(n,a))&&s.push(Vr(n,u,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Xr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Kr,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Gt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Gt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),pi="__reactFiber$"+hi,fi="__reactProps$"+hi,di="__reactContainer$"+hi,vi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function gi(e){var t=e[pi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[di]||n[pi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[pi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[pi]||e[di])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ti(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Ei(e){return e[fi]||null}var xi=[],bi=-1;function Ii(e){return{current:e}}function wi(e){0>bi||(e.current=xi[bi],xi[bi]=null,bi--)}function ki(e,t){bi++,xi[bi]=e.current,e.current=t}var Si={},Ri=Ii(Si),Ci=Ii(!1),Di=Si;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){wi(Ci),wi(Ri)}function Mi(e,t,n){if(Ri.current!==Si)throw Error(a(168));ki(Ri,t),ki(Ci,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,H(e)||"Unknown",i));return L({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Di=Ri.current,ki(Ri,e),ki(Ci,Ci.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Pi(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,wi(Ci),wi(Ri),ki(Ri,e)):wi(Ci),ki(Ci,n)}var Ui=null,Zi=!1,Bi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Gi(){if(!Bi&&null!==Ui){Bi=!0;var e=0,t=_t;try{var n=Ui;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Zi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ye($e,Gi),i}finally{_t=t,Bi=!1}}return null}var Hi=[],ji=0,Vi=null,Wi=0,Yi=[],qi=0,Xi=null,Ki=1,Qi="";function Ji(e,t){Hi[ji++]=Wi,Hi[ji++]=Vi,Vi=e,Wi=t}function $i(e,t,n){Yi[qi++]=Ki,Yi[qi++]=Qi,Yi[qi++]=Xi,Xi=e;var r=Ki;e=Qi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var a=32-st(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ki=1<<32-st(t)+i|n<<i|r,Qi=a+e}else Ki=1<<a|n<<i|r,Qi=e}function ea(e){null!==e.return&&(Ji(e,1),$i(e,1,0))}function ta(e){for(;e===Vi;)Vi=Hi[--ji],Hi[ji]=null,Wi=Hi[--ji],Hi[ji]=null;for(;e===Xi;)Xi=Yi[--qi],Yi[qi]=null,Qi=Yi[--qi],Yi[qi]=null,Ki=Yi[--qi],Yi[qi]=null}var na=null,ra=null,ia=!1,aa=null;function sa(e,t){var n=Ol(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Ki,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ol(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function la(e){if(ia){var t=ra;if(t){var n=t;if(!oa(e,t)){if(ua(e))throw Error(a(418));t=li(n.nextSibling);var r=na;t&&oa(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw pa(),Error(a(418));for(;t;)sa(e,t),t=li(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?li(e.stateNode.nextSibling):null;return!0}function pa(){for(var e=ra;e;)e=li(e.nextSibling)}function fa(){ra=na=null,ia=!1}function da(e){null===aa?aa=[e]:aa.push(e)}var va=T.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,_a=null,Ta=null;function Ea(){Ta=_a=ga=null}function xa(e){var t=ya.current;wi(ya),e._currentValue=t}function ba(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,Ta=_a=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(To=!0),e.firstContext=null)}function wa(e){var t=e._currentValue;if(Ta!==e)if(e={context:e,memoizedValue:t,next:null},null===_a){if(null===ga)throw Error(a(308));_a=e,ga.dependencies={lanes:0,firstContext:e}}else _a=_a.next=e;return t}var ka=null;function Sa(e){null===ka?ka=[e]:ka.push(e)}function Ra(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Sa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ca(e,r)}function Ca(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Na(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ma(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ca(e,n)}return null===(i=r.interleaved)?(t.next=t,Sa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ca(e,n)}function Pa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function La(e,t,n,r){var i=e.updateQueue;Da=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var u=o,l=u.next;u.next=null,null===s?a=l:s.next=l,s=u;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===o?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(s=0,c=l=u=null,o=a;;){var p=o.lane,f=o.eventTime;if((r&p)===p){null!==c&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var d=e,v=o;switch(p=t,f=n,v.tag){case 1:if("function"===typeof(d=v.payload)){h=d.call(f,h,p);break e}h=d;break e;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(p="function"===typeof(d=v.payload)?d.call(f,h,p):d)||void 0===p)break e;h=L({},h,p);break e;case 2:Da=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(p=i.effects)?i.effects=[o]:p.push(o))}else f={eventTime:f,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(l=c=f,u=h):c=c.next=f,s|=p;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(p=o).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Lu|=s,e.lanes=s,e.memoizedState=h}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Za=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),a=Na(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ma(e,a,i))&&(rl(t,e,i,r),Pa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),a=Na(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ma(e,a,i))&&(rl(t,e,i,r),Pa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Na(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ma(e,i,r))&&(rl(t,e,r,n),Pa(t,e,r))}};function Ga(e,t,n,r,i,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function Ha(e,t,n){var r=!1,i=Si,a=t.contextType;return"object"===typeof a&&null!==a?a=wa(a):(i=Oi(t)?Di:Ri.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Si),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ja(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Va(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Za,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=wa(a):(a=Oi(t)?Di:Ri.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),La(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===Za&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ya(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qa(e){return(0,e._init)(e._payload)}function Xa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ml(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===b?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&qa(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Pl(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Zl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Fl(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Pl(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case x:return(t=Zl(t,e.mode,n)).return=e,t;case O:return p(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Fl(t,e.mode,n,null)).return=e,t;Ya(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?l(e,t,n,r):null;case x:return n.key===i?c(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||P(n))return null!==i?null:h(e,t,n,r,null);Ya(e,n)}return null}function d(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case E:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return d(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||P(r))return h(t,e=e.get(n)||null,r,i,null);Ya(t,r)}return null}function v(i,a,o,u){for(var l=null,c=null,h=a,v=a=0,m=null;null!==h&&v<o.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var y=f(i,h,o[v],u);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),a=s(y,a,v),null===c?l=y:c.sibling=y,c=y,h=m}if(v===o.length)return n(i,h),ia&&Ji(i,v),l;if(null===h){for(;v<o.length;v++)null!==(h=p(i,o[v],u))&&(a=s(h,a,v),null===c?l=h:c.sibling=h,c=h);return ia&&Ji(i,v),l}for(h=r(i,h);v<o.length;v++)null!==(m=d(h,i,v,o[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=s(m,a,v),null===c?l=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),l}function m(i,o,u,l){var c=P(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,v=o,m=o=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var _=f(i,v,g.value,l);if(null===_){null===v&&(v=y);break}e&&v&&null===_.alternate&&t(i,v),o=s(_,o,m),null===h?c=_:h.sibling=_,h=_,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),c;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=p(i,g.value,l))&&(o=s(g,o,m),null===h?c=g:h.sibling=g,h=g);return ia&&Ji(i,m),c}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=d(v,i,m,g.value,l))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),o=s(g,o,m),null===h?c=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),c}return function e(r,a,s,u){if("object"===typeof s&&null!==s&&s.type===b&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case E:e:{for(var l=s.key,c=a;null!==c;){if(c.key===l){if((l=s.type)===b){if(7===c.tag){n(r,c.sibling),(a=i(c,s.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===O&&qa(l)===c.type){n(r,c.sibling),(a=i(c,s.props)).ref=Wa(r,c,s),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}s.type===b?((a=Fl(s.props.children,r.mode,u,s.key)).return=r,r=a):((u=Pl(s.type,s.key,s.props,null,r.mode,u)).ref=Wa(r,a,s),u.return=r,r=u)}return o(r);case x:e:{for(c=s.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(r,a.sibling),(a=i(a,s.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Zl(s,r.mode,u)).return=r,r=a}return o(r);case O:return e(r,a,(c=s._init)(s._payload),u)}if(te(s))return v(r,a,s,u);if(P(s))return m(r,a,s,u);Ya(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,s)).return=r,r=a):(n(r,a),(a=Ul(s,r.mode,u)).return=r,r=a),o(r)):n(r,a)}}var Ka=Xa(!0),Qa=Xa(!1),Ja={},$a=Ii(Ja),es=Ii(Ja),ts=Ii(Ja);function ns(e){if(e===Ja)throw Error(a(174));return e}function rs(e,t){switch(ki(ts,t),ki(es,e),ki($a,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}wi($a),ki($a,t)}function is(){wi($a),wi(es),wi(ts)}function as(e){ns(ts.current);var t=ns($a.current),n=ue(t,e.type);t!==n&&(ki(es,e),ki($a,n))}function ss(e){es.current===e&&(wi($a),wi(es))}var os=Ii(0);function us(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ls=[];function cs(){for(var e=0;e<ls.length;e++)ls[e]._workInProgressVersionPrimary=null;ls.length=0}var hs=T.ReactCurrentDispatcher,ps=T.ReactCurrentBatchConfig,fs=0,ds=null,vs=null,ms=null,ys=!1,gs=!1,_s=0,Ts=0;function Es(){throw Error(a(321))}function xs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function bs(e,t,n,r,i,s){if(fs=s,ds=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hs.current=null===e||null===e.memoizedState?so:oo,e=n(r,i),gs){s=0;do{if(gs=!1,_s=0,25<=s)throw Error(a(301));s+=1,ms=vs=null,t.updateQueue=null,hs.current=uo,e=n(r,i)}while(gs)}if(hs.current=ao,t=null!==vs&&null!==vs.next,fs=0,ms=vs=ds=null,ys=!1,t)throw Error(a(300));return e}function Is(){var e=0!==_s;return _s=0,e}function ws(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ms?ds.memoizedState=ms=e:ms=ms.next=e,ms}function ks(){if(null===vs){var e=ds.alternate;e=null!==e?e.memoizedState:null}else e=vs.next;var t=null===ms?ds.memoizedState:ms.next;if(null!==t)ms=t,vs=e;else{if(null===e)throw Error(a(310));e={memoizedState:(vs=e).memoizedState,baseState:vs.baseState,baseQueue:vs.baseQueue,queue:vs.queue,next:null},null===ms?ds.memoizedState=ms=e:ms=ms.next=e}return ms}function Ss(e,t){return"function"===typeof t?t(e):t}function Rs(e){var t=ks(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=vs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var u=o=null,l=null,c=s;do{var h=c.lane;if((fs&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=p,o=r):l=l.next=p,ds.lanes|=h,Lu|=h}c=c.next}while(null!==c&&c!==s);null===l?o=r:l.next=u,or(r,t.memoizedState)||(To=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ds.lanes|=s,Lu|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Cs(e){var t=ks(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);or(s,t.memoizedState)||(To=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ds(){}function As(e,t){var n=ds,r=ks(),i=t(),s=!or(r.memoizedState,i);if(s&&(r.memoizedState=i,To=!0),r=r.queue,Hs(Ms.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ms&&1&ms.memoizedState.tag){if(n.flags|=2048,Us(9,Ns.bind(null,n,r,i,t),void 0,null),null===Du)throw Error(a(349));0!==(30&fs)||Os(n,t,i)}return i}function Os(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ds.updateQueue)?(t={lastEffect:null,stores:null},ds.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ns(e,t,n,r){t.value=n,t.getSnapshot=r,Ps(t)&&Fs(e)}function Ms(e,t,n){return n((function(){Ps(t)&&Fs(e)}))}function Ps(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Fs(e){var t=Ca(e,1);null!==t&&rl(t,e,1,-1)}function Ls(e){var t=ws();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,ds,e),[t.memoizedState,e]}function Us(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ds.updateQueue)?(t={lastEffect:null,stores:null},ds.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Zs(){return ks().memoizedState}function Bs(e,t,n,r){var i=ws();ds.flags|=e,i.memoizedState=Us(1|t,n,void 0,void 0===r?null:r)}function zs(e,t,n,r){var i=ks();r=void 0===r?null:r;var a=void 0;if(null!==vs){var s=vs.memoizedState;if(a=s.destroy,null!==r&&xs(r,s.deps))return void(i.memoizedState=Us(t,n,a,r))}ds.flags|=e,i.memoizedState=Us(1|t,n,a,r)}function Gs(e,t){return Bs(8390656,8,e,t)}function Hs(e,t){return zs(2048,8,e,t)}function js(e,t){return zs(4,2,e,t)}function Vs(e,t){return zs(4,4,e,t)}function Ws(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ys(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zs(4,4,Ws.bind(null,t,e),n)}function qs(){}function Xs(e,t){var n=ks();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ks(e,t){var n=ks();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qs(e,t,n){return 0===(21&fs)?(e.baseState&&(e.baseState=!1,To=!0),e.memoizedState=n):(or(n,t)||(n=vt(),ds.lanes|=n,Lu|=n,e.baseState=!0),t)}function Js(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=ps.transition;ps.transition={};try{e(!1),t()}finally{_t=n,ps.transition=r}}function $s(){return ks().memoizedState}function eo(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},no(e))ro(t,n);else if(null!==(n=Ra(e,t,n,r))){rl(n,e,r,tl()),io(n,t,r)}}function to(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(no(e))ro(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,s)){var u=t.interleaved;return null===u?(i.next=i,Sa(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ra(e,t,i,r))&&(rl(n,e,r,i=tl()),io(n,t,r))}}function no(e){var t=e.alternate;return e===ds||null!==t&&t===ds}function ro(e,t){gs=ys=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function io(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ao={readContext:wa,useCallback:Es,useContext:Es,useEffect:Es,useImperativeHandle:Es,useInsertionEffect:Es,useLayoutEffect:Es,useMemo:Es,useReducer:Es,useRef:Es,useState:Es,useDebugValue:Es,useDeferredValue:Es,useTransition:Es,useMutableSource:Es,useSyncExternalStore:Es,useId:Es,unstable_isNewReconciler:!1},so={readContext:wa,useCallback:function(e,t){return ws().memoizedState=[e,void 0===t?null:t],e},useContext:wa,useEffect:Gs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bs(4194308,4,Ws.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bs(4,2,e,t)},useMemo:function(e,t){var n=ws();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ws();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eo.bind(null,ds,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ws().memoizedState=e},useState:Ls,useDebugValue:qs,useDeferredValue:function(e){return ws().memoizedState=e},useTransition:function(){var e=Ls(!1),t=e[0];return e=Js.bind(null,e[1]),ws().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ds,i=ws();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Du)throw Error(a(349));0!==(30&fs)||Os(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Gs(Ms.bind(null,r,s,e),[e]),r.flags|=2048,Us(9,Ns.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ws(),t=Du.identifierPrefix;if(ia){var n=Qi;t=":"+t+"R"+(n=(Ki&~(1<<32-st(Ki)-1)).toString(32)+n),0<(n=_s++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Ts++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:wa,useCallback:Xs,useContext:wa,useEffect:Hs,useImperativeHandle:Ys,useInsertionEffect:js,useLayoutEffect:Vs,useMemo:Ks,useReducer:Rs,useRef:Zs,useState:function(){return Rs(Ss)},useDebugValue:qs,useDeferredValue:function(e){return Qs(ks(),vs.memoizedState,e)},useTransition:function(){return[Rs(Ss)[0],ks().memoizedState]},useMutableSource:Ds,useSyncExternalStore:As,useId:$s,unstable_isNewReconciler:!1},uo={readContext:wa,useCallback:Xs,useContext:wa,useEffect:Hs,useImperativeHandle:Ys,useInsertionEffect:js,useLayoutEffect:Vs,useMemo:Ks,useReducer:Cs,useRef:Zs,useState:function(){return Cs(Ss)},useDebugValue:qs,useDeferredValue:function(e){var t=ks();return null===vs?t.memoizedState=e:Qs(t,vs.memoizedState,e)},useTransition:function(){return[Cs(Ss)[0],ks().memoizedState]},useMutableSource:Ds,useSyncExternalStore:As,useId:$s,unstable_isNewReconciler:!1};function lo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var po="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Na(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vu||(Vu=!0,Wu=r),ho(0,t)},n}function vo(e,t,n){(n=Na(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ho(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Yu?Yu=new Set([this]):Yu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new po;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kl.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Na(-1,1)).tag=2,Ma(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _o=T.ReactCurrentOwner,To=!1;function Eo(e,t,n,r){t.child=null===e?Qa(t,null,n,r):Ka(t,e.child,n,r)}function xo(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=bs(e,t,n,r,a,i),n=Is(),null===e||To?(ia&&n&&ea(t),t.flags|=1,Eo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vo(e,t,i))}function bo(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Nl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Io(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(s,r)&&e.ref===t.ref)return Vo(e,t,i)}return t.flags|=1,(e=Ml(a,r)).ref=t.ref,e.return=t,t.child=e}function Io(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(To=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Vo(e,t,i);0!==(131072&e.flags)&&(To=!0)}}return So(e,t,n,r,i)}function wo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Mu,Nu),Nu|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Mu,Nu),Nu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,ki(Mu,Nu),Nu|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,ki(Mu,Nu),Nu|=r;return Eo(e,t,i,n),t.child}function ko(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,n,r,i){var a=Oi(n)?Di:Ri.current;return a=Ai(t,a),Ia(t,i),n=bs(e,t,n,r,a,i),r=Is(),null===e||To?(ia&&r&&ea(t),t.flags|=1,Eo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vo(e,t,i))}function Ro(e,t,n,r,i){if(Oi(n)){var a=!0;Fi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)jo(e,t),Ha(t,n,r),Va(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var u=s.context,l=n.contextType;"object"===typeof l&&null!==l?l=wa(l):l=Ai(t,l=Oi(n)?Di:Ri.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||u!==l)&&ja(t,s,r,l),Da=!1;var p=t.memoizedState;s.state=p,La(t,r,s,i),u=t.memoizedState,o!==r||p!==u||Ci.current||Da?("function"===typeof c&&(Ba(t,n,c,r),u=t.memoizedState),(o=Da||Ga(t,n,o,r,p,u,l))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=l,r=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Oa(e,t),o=t.memoizedProps,l=t.type===t.elementType?o:ma(t.type,o),s.props=l,h=t.pendingProps,p=s.context,"object"===typeof(u=n.contextType)&&null!==u?u=wa(u):u=Ai(t,u=Oi(n)?Di:Ri.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==h||p!==u)&&ja(t,s,r,u),Da=!1,p=t.memoizedState,s.state=p,La(t,r,s,i);var d=t.memoizedState;o!==h||p!==d||Ci.current||Da?("function"===typeof f&&(Ba(t,n,f,r),d=t.memoizedState),(l=Da||Ga(t,n,l,r,p,d,u)||!1)?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,d,u),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,d,u)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=d),s.props=r,s.state=d,s.context=u,r=l):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Co(e,t,n,r,a,i)}function Co(e,t,n,r,i,a){ko(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Li(t,n,!1),Vo(e,t,a);r=t.stateNode,_o.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Ka(t,e.child,null,a),t.child=Ka(t,null,o,a)):Eo(e,t,o,a),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Do(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),rs(e,t.containerInfo)}function Ao(e,t,n,r,i){return fa(),da(i),t.flags|=256,Eo(e,t,n,r),t.child}var Oo,No,Mo,Po,Fo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uo(e,t,n){var r,i=t.pendingProps,s=os.current,o=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),ki(os,1&s),null===e)return la(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,o?(i=t.mode,o=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=u):o=Ll(u,i,0,null),e=Fl(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Fo,e):Zo(t,u));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,o){if(n)return 256&t.flags?(t.flags&=-257,Bo(e,t,o,r=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Ll({mode:"visible",children:r.children},i,0,null),(s=Fl(s,i,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Ka(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Fo,s);if(0===(1&t.mode))return Bo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Bo(e,t,o,r=co(s=Error(a(419)),r,void 0))}if(u=0!==(o&e.childLanes),To||u){if(null!==(r=Du)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Ca(e,i),rl(r,e,i,-1))}return ml(),Bo(e,t,o,r=co(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Rl.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ra=li(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Yi[qi++]=Ki,Yi[qi++]=Qi,Yi[qi++]=Xi,Ki=e.id,Qi=e.overflow,Xi=t),t=Zo(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,s,n);if(o){o=i.fallback,u=t.mode,r=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ml(s,l)).subtreeFlags=14680064&s.subtreeFlags,null!==r?o=Ml(r,o):(o=Fl(o,u,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,u=null===(u=e.child.memoizedState)?Lo(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=e.childLanes&~n,t.memoizedState=Fo,i}return e=(o=e.child).sibling,i=Ml(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Zo(e,t){return(t=Ll({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bo(e,t,n,r){return null!==r&&da(r),Ka(t,e.child,null,n),(e=Zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ba(e.return,t,n)}function Go(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Ho(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Eo(e,t,r.children,n),0!==(2&(r=os.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(os,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===us(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Go(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===us(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Go(t,!0,n,null,a);break;case"together":Go(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function jo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Lu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ml(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ml(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wo(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Yo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qo(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(t),null;case 1:case 17:return Oi(t.type)&&Ni(),Yo(t),null;case 3:return r=t.stateNode,is(),wi(Ci),wi(Ri),cs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ol(aa),aa=null))),No(e,t),Yo(t),null;case 5:ss(t);var i=ns(ts.current);if(n=t.type,null!==e&&null!=t.stateNode)Mo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Yo(t),null}if(e=ns($a.current),ha(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[pi]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":Zr("cancel",r),Zr("close",r);break;case"iframe":case"object":case"embed":Zr("load",r);break;case"video":case"audio":for(i=0;i<Pr.length;i++)Zr(Pr[i],r);break;case"source":Zr("error",r);break;case"img":case"image":case"link":Zr("error",r),Zr("load",r);break;case"details":Zr("toggle",r);break;case"input":K(r,s),Zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Zr("invalid",r);break;case"textarea":ie(r,s),Zr("invalid",r)}for(var u in ge(n,s),i=null,s)if(s.hasOwnProperty(u)){var l=s[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",""+l]):o.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Zr("scroll",r)}switch(n){case"input":W(r),$(r,s,!0);break;case"textarea":W(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[pi]=t,e[fi]=r,Oo(e,t,!1,!1),t.stateNode=e;e:{switch(u=_e(n,r),n){case"dialog":Zr("cancel",e),Zr("close",e),i=r;break;case"iframe":case"object":case"embed":Zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pr.length;i++)Zr(Pr[i],e);i=r;break;case"source":Zr("error",e),i=r;break;case"img":case"image":case"link":Zr("error",e),Zr("load",e),i=r;break;case"details":Zr("toggle",e),i=r;break;case"input":K(e,r),i=X(e,r),Zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Zr("invalid",e)}for(s in ge(n,i),l=i)if(l.hasOwnProperty(s)){var c=l[s];"style"===s?me(e,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===s?"string"===typeof c?("textarea"!==n||""!==c)&&pe(e,c):"number"===typeof c&&pe(e,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=c&&"onScroll"===s&&Zr("scroll",e):null!=c&&_(e,s,c,u))}switch(n){case"input":W(e),$(e,r,!1);break;case"textarea":W(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+j(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Yo(t),null;case 6:if(e&&null!=t.stateNode)Po(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=ns(ts.current),ns($a.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[pi]=t,(s=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=t,t.stateNode=r}return Yo(t),null;case 13:if(wi(os),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))pa(),fa(),t.flags|=98560,s=!1;else if(s=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[pi]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Yo(t),s=!1}else null!==aa&&(ol(aa),aa=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&os.current)?0===Pu&&(Pu=3):ml())),null!==t.updateQueue&&(t.flags|=4),Yo(t),null);case 4:return is(),No(e,t),null===e&&Gr(t.stateNode.containerInfo),Yo(t),null;case 10:return xa(t.type._context),Yo(t),null;case 19:if(wi(os),null===(s=t.memoizedState))return Yo(t),null;if(r=0!==(128&t.flags),null===(u=s.rendering))if(r)Wo(s,!1);else{if(0!==Pu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=us(e))){for(t.flags|=128,Wo(s,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(u=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(os,1&os.current|2),t.child}e=e.sibling}null!==s.tail&&Qe()>Hu&&(t.flags|=128,r=!0,Wo(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=us(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wo(s,!0),null===s.tail&&"hidden"===s.tailMode&&!u.alternate&&!ia)return Yo(t),null}else 2*Qe()-s.renderingStartTime>Hu&&1073741824!==n&&(t.flags|=128,r=!0,Wo(s,!1),t.lanes=4194304);s.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=s.last)?n.sibling=u:t.child=u,s.last=u)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qe(),t.sibling=null,n=os.current,ki(os,r?1&n|2:1&n),t):(Yo(t),null);case 22:case 23:return pl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Nu)&&(Yo(t),6&t.subtreeFlags&&(t.flags|=8192)):Yo(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Xo(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return is(),wi(Ci),wi(Ri),cs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ss(t),null;case 13:if(wi(os),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return wi(os),null;case 4:return is(),null;case 10:return xa(t.type._context),null;case 22:case 23:return pl(),null;default:return null}}Oo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},No=function(){},Mo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ns($a.current);var a,s=null;switch(n){case"input":i=X(e,i),r=X(e,r),s=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(c in ge(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(s=s||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Zr("scroll",e),s||u===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Po=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ko=!1,Qo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,$o=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){wl(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){wl(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(t,n,a)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function su(e){var t=e.alternate;null!==t&&(e.alternate=null,su(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pi],delete t[fi],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var hu=null,pu=!1;function fu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Qo||eu(n,t);case 6:var r=hu,i=pu;hu=null,fu(e,t,n),pu=i,null!==(hu=r)&&(pu?(e=hu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hu.removeChild(n.stateNode));break;case 18:null!==hu&&(pu?(e=hu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Gt(e)):ui(hu,n.stateNode));break;case 4:r=hu,i=pu,hu=n.stateNode.containerInfo,pu=!0,fu(e,t,n),hu=r,pu=i;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(0!==(2&a)||0!==(4&a))&&tu(n,t,s),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Qo&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){wl(n,t,o)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Qo=(r=Qo)||null!==n.memoizedState,fu(e,t,n),Qo=r):fu(e,t,n);break;default:fu(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach((function(t){var r=Cl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,u=o;e:for(;null!==u;){switch(u.tag){case 5:hu=u.stateNode,pu=!1;break e;case 3:case 4:hu=u.stateNode.containerInfo,pu=!0;break e}u=u.return}if(null===hu)throw Error(a(160));du(s,o,i),hu=null,pu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){wl(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),gu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(m){wl(e,e.return,m)}try{ru(5,e,e.return)}catch(m){wl(e,e.return,m)}}break;case 1:mu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(mu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{pe(i,"")}catch(m){wl(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===s.type&&null!=s.name&&Q(i,s),_e(u,o);var c=_e(u,s);for(o=0;o<l.length;o+=2){var h=l[o],p=l[o+1];"style"===h?me(i,p):"dangerouslySetInnerHTML"===h?he(i,p):"children"===h?pe(i,p):_(i,h,p,c)}switch(u){case"input":J(i,s);break;case"textarea":ae(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;null!=d?ne(i,!!s.multiple,d,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(m){wl(e,e.return,m)}}break;case 6:if(mu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){wl(e,e.return,m)}}break;case 3:if(mu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(m){wl(e,e.return,m)}break;case 4:default:mu(t,e),gu(e);break;case 13:mu(t,e),gu(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Gu=Qe())),4&r&&vu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Qo=(c=Qo)||h,mu(t,e),Qo=c):mu(t,e),gu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for($o=e,h=e.child;null!==h;){for(p=$o=h;null!==$o;){switch(d=(f=$o).child,f.tag){case 0:case 11:case 14:case 15:ru(4,f,f.return);break;case 1:eu(f,f.return);var v=f.stateNode;if("function"===typeof v.componentWillUnmount){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){wl(r,n,m)}}break;case 5:eu(f,f.return);break;case 22:if(null!==f.memoizedState){xu(p);continue}}null!==d?(d.return=f,$o=d):xu(p)}h=h.sibling}e:for(h=null,p=e;;){if(5===p.tag){if(null===h){h=p;try{i=p.stateNode,c?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(u=p.stateNode,o=void 0!==(l=p.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ve("display",o))}catch(m){wl(e,e.return,m)}}}else if(6===p.tag){if(null===h)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(m){wl(e,e.return,m)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:mu(t,e),gu(e),4&r&&vu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(pe(i,""),r.flags&=-33),cu(e,uu(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;lu(e,uu(e),s);break;default:throw Error(a(161))}}catch(o){wl(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _u(e,t,n){$o=e,Tu(e,t,n)}function Tu(e,t,n){for(var r=0!==(1&e.mode);null!==$o;){var i=$o,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ko;if(!s){var o=i.alternate,u=null!==o&&null!==o.memoizedState||Qo;o=Ko;var l=Qo;if(Ko=s,(Qo=u)&&!l)for($o=i;null!==$o;)u=(s=$o).child,22===s.tag&&null!==s.memoizedState?bu(i):null!==u?(u.return=s,$o=u):bu(i);for(;null!==a;)$o=a,Tu(a,t,n),a=a.sibling;$o=i,Ko=o,Qo=l}Eu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,$o=a):Eu(e)}}function Eu(e){for(;null!==$o;){var t=$o;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Ua(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,o,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var p=h.dehydrated;null!==p&&Gt(p)}}}break;default:throw Error(a(163))}Qo||512&t.flags&&au(t)}catch(f){wl(t,t.return,f)}}if(t===e){$o=null;break}if(null!==(n=t.sibling)){n.return=t.return,$o=n;break}$o=t.return}}function xu(e){for(;null!==$o;){var t=$o;if(t===e){$o=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$o=n;break}$o=t.return}}function bu(e){for(;null!==$o;){var t=$o;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){wl(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){wl(t,i,u)}}var a=t.return;try{au(t)}catch(u){wl(t,a,u)}break;case 5:var s=t.return;try{au(t)}catch(u){wl(t,s,u)}}}catch(u){wl(t,t.return,u)}if(t===e){$o=null;break}var o=t.sibling;if(null!==o){o.return=t.return,$o=o;break}$o=t.return}}var Iu,wu=Math.ceil,ku=T.ReactCurrentDispatcher,Su=T.ReactCurrentOwner,Ru=T.ReactCurrentBatchConfig,Cu=0,Du=null,Au=null,Ou=0,Nu=0,Mu=Ii(0),Pu=0,Fu=null,Lu=0,Uu=0,Zu=0,Bu=null,zu=null,Gu=0,Hu=1/0,ju=null,Vu=!1,Wu=null,Yu=null,qu=!1,Xu=null,Ku=0,Qu=0,Ju=null,$u=-1,el=0;function tl(){return 0!==(6&Cu)?Qe():-1!==$u?$u:$u=Qe()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Cu)&&0!==Ou?Ou&-Ou:null!==va.transition?(0===el&&(el=vt()),el):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function rl(e,t,n,r){if(50<Qu)throw Qu=0,Ju=null,Error(a(185));yt(e,n,r),0!==(2&Cu)&&e===Du||(e===Du&&(0===(2&Cu)&&(Uu|=n),4===Pu&&ul(e,Ou)),il(e,r),1===n&&0===Cu&&0===(1&t.mode)&&(Hu=Qe()+500,Zi&&Gi()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-st(a),o=1<<s,u=i[s];-1===u?0!==(o&n)&&0===(o&r)||(i[s]=ft(o,t)):u<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=pt(e,e===Du?Ou:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Zi=!0,zi(e)}(ll.bind(null,e)):zi(ll.bind(null,e)),si((function(){0===(6&Cu)&&Gi()})),n=null;else{switch(Tt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Dl(n,al.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function al(e,t){if($u=-1,el=0,0!==(6&Cu))throw Error(a(327));var n=e.callbackNode;if(bl()&&e.callbackNode!==n)return null;var r=pt(e,e===Du?Ou:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yl(e,r);else{t=r;var i=Cu;Cu|=2;var s=vl();for(Du===e&&Ou===t||(ju=null,Hu=Qe()+500,fl(e,t));;)try{_l();break}catch(u){dl(e,u)}Ea(),ku.current=s,Cu=i,null!==Au?t=0:(Du=null,Ou=0,t=Pu)}if(0!==t){if(2===t&&(0!==(i=dt(e))&&(r=i,t=sl(e,i))),1===t)throw n=Fu,fl(e,0),ul(e,r),il(e,Qe()),n;if(6===t)ul(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!or(a(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yl(e,r))&&(0!==(s=dt(e))&&(r=s,t=sl(e,s))),1===t))throw n=Fu,fl(e,0),ul(e,r),il(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xl(e,zu,ju);break;case 3:if(ul(e,r),(130023424&r)===r&&10<(t=Gu+500-Qe())){if(0!==pt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xl.bind(null,e,zu,ju),t);break}xl(e,zu,ju);break;case 4:if(ul(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-st(r);s=1<<o,(o=t[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wu(r/1960))-r)){e.timeoutHandle=ri(xl.bind(null,e,zu,ju),r);break}xl(e,zu,ju);break;default:throw Error(a(329))}}}return il(e,Qe()),e.callbackNode===n?al.bind(null,e):null}function sl(e,t){var n=Bu;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=yl(e,t))&&(t=zu,zu=n,null!==t&&ol(t)),e}function ol(e){null===zu?zu=e:zu.push.apply(zu,e)}function ul(e,t){for(t&=~Zu,t&=~Uu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Cu))throw Error(a(327));bl();var t=pt(e,0);if(0===(1&t))return il(e,Qe()),null;var n=yl(e,t);if(0!==e.tag&&2===n){var r=dt(e);0!==r&&(t=r,n=sl(e,r))}if(1===n)throw n=Fu,fl(e,0),ul(e,t),il(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xl(e,zu,ju),il(e,Qe()),null}function cl(e,t){var n=Cu;Cu|=1;try{return e(t)}finally{0===(Cu=n)&&(Hu=Qe()+500,Zi&&Gi())}}function hl(e){null!==Xu&&0===Xu.tag&&0===(6&Cu)&&bl();var t=Cu;Cu|=1;var n=Ru.transition,r=_t;try{if(Ru.transition=null,_t=1,e)return e()}finally{_t=r,Ru.transition=n,0===(6&(Cu=t))&&Gi()}}function pl(){Nu=Mu.current,wi(Mu)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Au)for(n=Au.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:is(),wi(Ci),wi(Ri),cs();break;case 5:ss(r);break;case 4:is();break;case 13:case 19:wi(os);break;case 10:xa(r.type._context);break;case 22:case 23:pl()}n=n.return}if(Du=e,Au=e=Ml(e.current,null),Ou=Nu=t,Pu=0,Fu=null,Zu=Uu=Lu=0,zu=Bu=null,null!==ka){for(t=0;t<ka.length;t++)if(null!==(r=(n=ka[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}ka=null}return e}function dl(e,t){for(;;){var n=Au;try{if(Ea(),hs.current=ao,ys){for(var r=ds.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ys=!1}if(fs=0,ms=vs=ds=null,gs=!1,_s=0,Su.current=null,null===n||null===n.return){Pu=1,Fu=t,Au=null;break}e:{var s=e,o=n.return,u=n,l=t;if(t=Ou,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,h=u,p=h.tag;if(0===(1&h.mode)&&(0===p||11===p||15===p)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=yo(o);if(null!==d){d.flags&=-257,go(d,o,u,0,t),1&d.mode&&mo(s,c,t),l=c;var v=(t=d).updateQueue;if(null===v){var m=new Set;m.add(l),t.updateQueue=m}else v.add(l);break e}if(0===(1&t)){mo(s,c,t),ml();break e}l=Error(a(426))}else if(ia&&1&u.mode){var y=yo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),go(y,o,u,0,t),da(lo(l,u));break e}}s=l=lo(l,u),4!==Pu&&(Pu=2),null===Bu?Bu=[s]:Bu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Fa(s,fo(0,l,t));break e;case 1:u=l;var g=s.type,_=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Yu||!Yu.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t,Fa(s,vo(s,u,t));break e}}s=s.return}while(null!==s)}El(n)}catch(T){t=T,Au===n&&null!==n&&(Au=n=n.return);continue}break}}function vl(){var e=ku.current;return ku.current=ao,null===e?ao:e}function ml(){0!==Pu&&3!==Pu&&2!==Pu||(Pu=4),null===Du||0===(268435455&Lu)&&0===(268435455&Uu)||ul(Du,Ou)}function yl(e,t){var n=Cu;Cu|=2;var r=vl();for(Du===e&&Ou===t||(ju=null,fl(e,t));;)try{gl();break}catch(i){dl(e,i)}if(Ea(),Cu=n,ku.current=r,null!==Au)throw Error(a(261));return Du=null,Ou=0,Pu}function gl(){for(;null!==Au;)Tl(Au)}function _l(){for(;null!==Au&&!Xe();)Tl(Au)}function Tl(e){var t=Iu(e.alternate,e,Nu);e.memoizedProps=e.pendingProps,null===t?El(e):Au=t,Su.current=null}function El(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qo(n,t,Nu)))return void(Au=n)}else{if(null!==(n=Xo(n,t)))return n.flags&=32767,void(Au=n);if(null===e)return Pu=6,void(Au=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Au=t);Au=t=e}while(null!==t);0===Pu&&(Pu=5)}function xl(e,t,n){var r=_t,i=Ru.transition;try{Ru.transition=null,_t=1,function(e,t,n,r){do{bl()}while(null!==Xu);if(0!==(6&Cu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,s),e===Du&&(Au=Du=null,Ou=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||qu||(qu=!0,Dl(tt,(function(){return bl(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Ru.transition,Ru.transition=null;var o=_t;_t=1;var u=Cu;Cu|=4,Su.current=null,function(e,t){if(ei=jt,fr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(E){n=null;break e}var o=0,u=-1,l=-1,c=0,h=0,p=e,f=null;t:for(;;){for(var d;p!==n||0!==i&&3!==p.nodeType||(u=o+i),p!==s||0!==r&&3!==p.nodeType||(l=o+r),3===p.nodeType&&(o+=p.nodeValue.length),null!==(d=p.firstChild);)f=p,p=d;for(;;){if(p===e)break t;if(f===n&&++c===i&&(u=o),f===s&&++h===r&&(l=o),null!==(d=p.nextSibling))break;f=(p=f).parentNode}p=d}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},jt=!1,$o=t;null!==$o;)if(e=(t=$o).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$o=e;else for(;null!==$o;){t=$o;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,_=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=t.stateNode.containerInfo;1===T.nodeType?T.textContent="":9===T.nodeType&&T.documentElement&&T.removeChild(T.documentElement);break;default:throw Error(a(163))}}catch(E){wl(t,t.return,E)}if(null!==(e=t.sibling)){e.return=t.return,$o=e;break}$o=t.return}v=nu,nu=!1}(e,n),yu(n,e),dr(ti),jt=!!ei,ti=ei=null,e.current=n,_u(n,e,i),Ke(),Cu=u,_t=o,Ru.transition=s}else e.current=n;if(qu&&(qu=!1,Xu=e,Ku=i),s=e.pendingLanes,0===s&&(Yu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vu)throw Vu=!1,e=Wu,Wu=null,e;0!==(1&Ku)&&0!==e.tag&&bl(),s=e.pendingLanes,0!==(1&s)?e===Ju?Qu++:(Qu=0,Ju=e):Qu=0,Gi()}(e,t,n,r)}finally{Ru.transition=i,_t=r}return null}function bl(){if(null!==Xu){var e=Tt(Ku),t=Ru.transition,n=_t;try{if(Ru.transition=null,_t=16>e?16:e,null===Xu)var r=!1;else{if(e=Xu,Xu=null,Ku=0,0!==(6&Cu))throw Error(a(331));var i=Cu;for(Cu|=4,$o=e.current;null!==$o;){var s=$o,o=s.child;if(0!==(16&$o.flags)){var u=s.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for($o=c;null!==$o;){var h=$o;switch(h.tag){case 0:case 11:case 15:ru(8,h,s)}var p=h.child;if(null!==p)p.return=h,$o=p;else for(;null!==$o;){var f=(h=$o).sibling,d=h.return;if(su(h),h===c){$o=null;break}if(null!==f){f.return=d,$o=f;break}$o=d}}}var v=s.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}$o=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,$o=o;else e:for(;null!==$o;){if(0!==(2048&(s=$o).flags))switch(s.tag){case 0:case 11:case 15:ru(9,s,s.return)}var g=s.sibling;if(null!==g){g.return=s.return,$o=g;break e}$o=s.return}}var _=e.current;for($o=_;null!==$o;){var T=(o=$o).child;if(0!==(2064&o.subtreeFlags)&&null!==T)T.return=o,$o=T;else e:for(o=_;null!==$o;){if(0!==(2048&(u=$o).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(x){wl(u,u.return,x)}if(u===o){$o=null;break e}var E=u.sibling;if(null!==E){E.return=u.return,$o=E;break e}$o=u.return}}if(Cu=i,Gi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{_t=n,Ru.transition=t}}return!1}function Il(e,t,n){e=Ma(e,t=fo(0,t=lo(n,t),1),1),t=tl(),null!==e&&(yt(e,1,t),il(e,t))}function wl(e,t,n){if(3===e.tag)Il(e,e,n);else for(;null!==t;){if(3===t.tag){Il(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yu||!Yu.has(r))){t=Ma(t,e=vo(t,e=lo(n,e),1),1),e=tl(),null!==t&&(yt(t,1,e),il(t,e));break}}t=t.return}}function kl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Du===e&&(Ou&n)===n&&(4===Pu||3===Pu&&(130023424&Ou)===Ou&&500>Qe()-Gu?fl(e,0):Zu|=n),il(e,t)}function Sl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tl();null!==(e=Ca(e,t))&&(yt(e,t,n),il(e,n))}function Rl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sl(e,n)}function Cl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sl(e,n)}function Dl(e,t){return Ye(e,t)}function Al(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(e,t,n,r){return new Al(e,t,n,r)}function Nl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ml(e,t){var n=e.alternate;return null===n?((n=Ol(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pl(e,t,n,r,i,s){var o=2;if(r=e,"function"===typeof e)Nl(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case b:return Fl(n.children,i,s,t);case I:o=8,i|=8;break;case w:return(e=Ol(12,n,t,2|i)).elementType=w,e.lanes=s,e;case C:return(e=Ol(13,n,t,i)).elementType=C,e.lanes=s,e;case D:return(e=Ol(19,n,t,i)).elementType=D,e.lanes=s,e;case N:return Ll(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:o=10;break e;case S:o=9;break e;case R:o=11;break e;case A:o=14;break e;case O:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ol(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Fl(e,t,n,r){return(e=Ol(7,e,r,t)).lanes=n,e}function Ll(e,t,n,r){return(e=Ol(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=Ol(6,e,null,t)).lanes=n,e}function Zl(e,t,n){return(t=Ol(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zl(e,t,n,r,i,a,s,o,u){return e=new Bl(e,t,n,o,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ol(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function Gl(e){if(!e)return Si;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Pi(e,n,t)}return t}function Hl(e,t,n,r,i,a,s,o,u){return(e=zl(n,r,!0,e,0,a,0,o,u)).context=Gl(null),n=e.current,(a=Na(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,Ma(n,a,i),e.current.lanes=i,yt(e,i,r),il(e,r),e}function jl(e,t,n,r){var i=t.current,a=tl(),s=nl(i);return n=Gl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Na(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ma(i,t,s))&&(rl(e,i,s,a),Pa(e,i,s)),s}function Vl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yl(e,t){Wl(e,t),(e=e.alternate)&&Wl(e,t)}Iu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)To=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return To=!1,function(e,t,n){switch(t.tag){case 3:Do(t),fa();break;case 5:as(t);break;case 1:Oi(t.type)&&Fi(t);break;case 4:rs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(os,1&os.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uo(e,t,n):(ki(os,1&os.current),null!==(e=Vo(e,t,n))?e.sibling:null);ki(os,1&os.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ho(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(os,os.current),r)break;return null;case 22:case 23:return t.lanes=0,wo(e,t,n)}return Vo(e,t,n)}(e,t,n);To=0!==(131072&e.flags)}else To=!1,ia&&0!==(1048576&t.flags)&&$i(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;jo(e,t),e=t.pendingProps;var i=Ai(t,Ri.current);Ia(t,n),i=bs(null,t,r,e,i,n);var s=Is();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(s=!0,Fi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Va(t,r,e,n),t=Co(null,t,r,!0,s,n)):(t.tag=0,ia&&s&&ea(t),Eo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(jo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Nl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===R)return 11;if(e===A)return 14}return 2}(r),e=ma(r,e),i){case 0:t=So(null,t,r,e,n);break e;case 1:t=Ro(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=bo(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ro(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Do(t),null===e)throw Error(a(387));r=t.pendingProps,i=(s=t.memoizedState).element,Oa(e,t),La(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ao(e,t,r,n,i=lo(Error(a(423)),t));break e}if(r!==i){t=Ao(e,t,r,n,i=lo(Error(a(424)),t));break e}for(ra=li(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Qa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===i){t=Vo(e,t,n);break e}Eo(e,t,r,n)}t=t.child}return t;case 5:return as(t),null===e&&la(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==s&&ni(r,s)&&(t.flags|=32),ko(e,t),Eo(e,t,o,n),t.child;case 6:return null===e&&la(t),null;case 13:return Uo(e,t,n);case 4:return rs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ka(t,null,r,n):Eo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xo(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return Eo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Eo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ki(ya,r._currentValue),r._currentValue=o,null!==s)if(or(s.value,o)){if(s.children===i.children&&!Ci.current){t=Vo(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){o=s.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===s.tag){(l=Na(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ba(s.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),ba(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}Eo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=wa(i)),t.flags|=1,Eo(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),bo(e,t,r,i=ma(r.type,i),n);case 15:return Io(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),jo(e,t),t.tag=1,Oi(r)?(e=!0,Fi(t)):e=!1,Ia(t,n),Ha(t,r,i),Va(t,r,i,n),Co(null,t,r,!0,e,n);case 19:return Ho(e,t,n);case 22:return wo(e,t,n)}throw Error(a(156,t.tag))};var ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Xl(e){this._internalRoot=e}function Kl(e){this._internalRoot=e}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $l(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if("function"===typeof i){var o=i;i=function(){var e=Vl(s);o.call(e)}}jl(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Vl(s);a.call(e)}}var s=Hl(t,r,e,0,null,!1,0,"",$l);return e._reactRootContainer=s,e[di]=s.current,Gr(8===e.nodeType?e.parentNode:e),hl(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Vl(u);o.call(e)}}var u=zl(e,0,!1,null,0,!1,0,"",$l);return e._reactRootContainer=u,e[di]=u.current,Gr(8===e.nodeType?e.parentNode:e),hl((function(){jl(t,u,n,r)})),u}(n,t,e,i,r);return Vl(s)}Kl.prototype.render=Xl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));jl(e,t,null,null)},Kl.prototype.unmount=Xl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hl((function(){jl(null,e,null,null)})),t[di]=null}},Kl.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Lt(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),il(t,Qe()),0===(6&Cu)&&(Hu=Qe()+500,Gi()))}break;case 13:hl((function(){var t=Ca(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Yl(e,1)}},xt=function(e){if(13===e.tag){var t=Ca(e,134217728);if(null!==t)rl(t,e,134217728,tl());Yl(e,134217728)}},bt=function(e){if(13===e.tag){var t=nl(e),n=Ca(e,t);if(null!==n)rl(n,e,t,tl());Yl(e,t)}},It=function(){return _t},wt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ei(r);if(!i)throw Error(a(90));Y(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Re=cl,Ce=hl;var tc={usingClientEntryPoint:!1,Events:[_i,Ti,Ei,ke,Se,cl]},nc={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ql(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ql(e))throw Error(a(299));var n=!1,r="",i=ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zl(e,1,!1,null,0,n,0,r,i),e[di]=t.current,Gr(8===e.nodeType?e.parentNode:e),new Xl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return hl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ql(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",o=ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Hl(t,null,e,1,null!=n?n:null,i,0,s,o),e[di]=t.current,Gr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Kl(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(a(40));return!!e._reactRootContainer&&(hl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[di]=null}))})),!0)},t.unstable_batchedUpdates=cl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1739:function(e,t,n){"use strict";var r=n(1168);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1168:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(534)},5918:function(e,t,n){"use strict";var r=n(7313),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:o.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},306:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||d}function g(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||d}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var T=_.prototype=new g;T.constructor=_,v(T,y.prototype),T.isPureReactComponent=!0;var E=Array.isArray,x=Object.prototype.hasOwnProperty,b={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function w(e,t,r){var i,a={},s=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:s,ref:o,props:a,_owner:b.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var u=!1;if(null===e)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return s=s(u=e),e=""===a?"."+R(u,0):a,E(s)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),C(s,t,i,"",(function(e){return e}))):null!=s&&(k(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(S,"$&/")+"/")+e)),t.push(s)),1;if(u=0,a=""===a?".":a+":",E(e))for(var l=0;l<e.length;l++){var c=a+R(o=e[l],l);u+=C(o,t,i,c,s)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(o=e.next()).done;)u+=C(o=o.value,t,i,c=a+R(o,l++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function D(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},N={transition:null},M={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:N,ReactCurrentOwner:b};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=_,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=b.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)x.call(t,l)&&!I.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:s,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=w,t.createFactory=function(e){var t=w.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},7313:function(e,t,n){"use strict";e.exports=n(306)},6417:function(e,t,n){"use strict";e.exports=n(5918)},3095:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,u=e[o],l=o+1,c=e[l];if(0>a(u,n))l<i&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[o]=n,r=o);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var l=[],c=[],h=1,p=null,f=3,d=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function T(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function E(e){if(m=!1,T(e),!v)if(null!==r(l))v=!0,N(x);else{var t=r(c);null!==t&&M(E,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(k),k=-1),d=!0;var a=f;try{for(T(n),p=r(l);null!==p&&(!(p.expirationTime>n)||e&&!C());){var s=p.callback;if("function"===typeof s){p.callback=null,f=p.priorityLevel;var o=s(p.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?p.callback=o:p===r(l)&&i(l),T(n)}else i(l);p=r(l)}if(null!==p)var u=!0;else{var h=r(c);null!==h&&M(E,h.startTime-n),u=!1}return u}finally{p=null,f=a,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var b,I=!1,w=null,k=-1,S=5,R=-1;function C(){return!(t.unstable_now()-R<S)}function D(){if(null!==w){var e=t.unstable_now();R=e;var n=!0;try{n=w(!0,e)}finally{n?b():(I=!1,w=null)}}else I=!1}if("function"===typeof _)b=function(){_(D)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=D,b=function(){O.postMessage(null)}}else b=function(){y(D,0)};function N(e){w=e,I||(I=!0,b())}function M(e,n){k=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||d||(v=!0,N(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(m?(g(k),k=-1):m=!0,M(E,a-s))):(e.sortIndex=o,n(l,e),v||d||(v=!0,N(x))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},2224:function(e,t,n){"use strict";e.exports=n(3095)},1018:function(e,t,n){"use strict";n.d(t,{Ri:function(){return xe}});var r=n(4165),i=n(5671),a=n(3144),s=n(5861);function o(e){return e.arrayBuffer?e.arrayBuffer():new Promise((function(t,n){var r=new FileReader;r.addEventListener("loadend",(function(){t(r.result)})),r.addEventListener("error",n),r.readAsArrayBuffer(e)}))}function u(e){return l.apply(this,arguments)}function l(){return(l=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:return n=e.sent,e.abrupt("return",new Uint8Array(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return"undefined"!==typeof Blob&&e instanceof Blob}function h(e){return"undefined"!==typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer}e=n.hmd(e);var p="undefined"!==typeof process&&process.versions&&"undefined"!==typeof process.versions.node&&"undefined"===typeof process.versions.electron;var f=function(){function e(t){(0,i.Z)(this,e),this.typedArray=t instanceof ArrayBuffer||h(t)?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return(0,a.Z)(e,[{key:"getLength",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.typedArray.byteLength);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),d=function(){function e(t){(0,i.Z)(this,e),this.blob=t}return(0,a.Z)(e,[{key:"getLength",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.blob.size);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.blob.slice(t,t+n),e.next=3,o(i);case 3:return a=e.sent,e.abrupt("return",new Uint8Array(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sliceAsBlob",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var i,a=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>2&&void 0!==a[2]?a[2]:"",e.abrupt("return",this.blob.slice(t,t+n,i));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function v(e,t){var n=e.length;if(t<=n)return e;var r=new Uint8Array(Math.max(n<<1,t));return r.set(e,0),r}function m(e,t,n,r,i,a){for(var s=E,o=b,u=0;u<n;){var l=e[o(r,i)&t];i+=15&l;var c=l>>>4;if(c<=15)a[u]=c,u++;else{var h=0,p=0;16==c?(p=3+s(r,i,2),i+=2,h=a[u-1]):17==c?(p=3+s(r,i,3),i+=3):18==c&&(p=11+s(r,i,7),i+=7);for(var f=u+p;u<f;)a[u]=h,u++}}return i}function y(e,t,n,r){for(var i=0,a=0,s=r.length>>>1;a<n;){var o=e[a+t];r[a<<1]=0,r[1+(a<<1)]=o,o>i&&(i=o),a++}for(;a<s;)r[a<<1]=0,r[1+(a<<1)]=0,a++;return i}function g(e,t){for(var n,r,i,a,s=e.length,o=I.bl_count,u=0;u<=t;u++)o[u]=0;for(u=1;u<s;u+=2)o[e[u]]++;var l=I.next_code;for(n=0,o[0]=0,r=1;r<=t;r++)n=n+o[r-1]<<1,l[r]=n;for(i=0;i<s;i+=2)0!=(a=e[i+1])&&(e[i]=l[a],l[a]++)}function _(e,t,n){for(var r=e.length,i=I.rev15,a=0;a<r;a+=2)if(0!=e[a+1])for(var s=a>>1,o=e[a+1],u=s<<4|o,l=t-o,c=e[a]<<l,h=c+(1<<l);c!=h;){n[i[c]>>>15-t]=u,c++}}function T(e,t){for(var n=I.rev15,r=15-t,i=0;i<e.length;i+=2){var a=e[i]<<t-e[i+1];e[i]=n[a]>>>r}}function E(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1}function x(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1}function b(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)}var I=function(){var e=Uint16Array,t=Uint32Array;return{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}}();!function(){for(var e=0;e<32768;e++){var t=e;t=(4278255360&(t=(4042322160&(t=(3435973836&(t=(2863311530&t)>>>1|(1431655765&t)<<1))>>>2|(858993459&t)<<2))>>>4|(252645135&t)<<4))>>>8|(16711935&t)<<8,I.rev15[e]=(t>>>16|t<<16)>>>17}function n(e,t,n){for(;0!=t--;)e.push(0,n)}for(e=0;e<32;e++)I.ldef[e]=I.of0[e]<<3|I.exb[e],I.ddef[e]=I.df0[e]<<4|I.dxb[e];n(I.fltree,144,8),n(I.fltree,112,9),n(I.fltree,24,7),n(I.fltree,8,8),g(I.fltree,9),_(I.fltree,9,I.flmap),T(I.fltree,9),n(I.fdtree,32,5),g(I.fdtree,5),_(I.fdtree,5,I.fdmap),T(I.fdtree,5),n(I.itree,19,0),n(I.ltree,286,0),n(I.dtree,30,0),n(I.ttree,320,0)}();var w={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var n=t,r=0;r<8;r++)1&n?n=3988292384^n>>>1:n>>>=1;e[t]=n}return e}(),update:function(e,t,n,r){for(var i=0;i<r;i++)e=w.table[255&(e^t[n+i])]^e>>>8;return e},crc:function(e,t,n){return 4294967295^w.update(4294967295,e,t,n)}};function k(e,t){return function(e,t){var n=Uint8Array;if(3==e[0]&&0==e[1])return t||new n(0);var r=x,i=E,a=m,s=b,o=null==t;o&&(t=new n(e.length>>>2<<3));for(var u,l,c=0,h=0,p=0,f=0,d=0,T=0,w=0,k=0,S=0;0==c;)if(c=r(e,S,1),h=r(e,S+1,2),S+=3,0!=h){if(o&&(t=v(t,k+(1<<17))),1==h&&(u=I.flmap,l=I.fdmap,T=511,w=31),2==h){p=i(e,S,5)+257,f=i(e,S+5,5)+1,d=i(e,S+10,4)+4,S+=14;for(var R=0;R<38;R+=2)I.itree[R]=0,I.itree[R+1]=0;var C=1;for(R=0;R<d;R++){var D=i(e,S+3*R,3);I.itree[1+(I.ordr[R]<<1)]=D,D>C&&(C=D)}S+=3*d,g(I.itree,C),_(I.itree,C,I.imap),u=I.lmap,l=I.dmap,S=a(I.imap,(1<<C)-1,p+f,e,S,I.ttree);var A=y(I.ttree,0,p,I.ltree);T=(1<<A)-1;var O=y(I.ttree,p,f,I.dtree);w=(1<<O)-1,g(I.ltree,A),_(I.ltree,A,u),g(I.dtree,O),_(I.dtree,O,l)}for(;;){var N=u[s(e,S)&T];S+=15&N;var M=N>>>4;if(M>>>8==0)t[k++]=M;else{if(256==M)break;var P=k+M-254;if(M>264){var F=I.ldef[M-257];P=k+(F>>>3)+i(e,S,7&F),S+=7&F}var L=l[s(e,S)&w];S+=15&L;var U=L>>>4,Z=I.ddef[U],B=(Z>>>4)+r(e,S,15&Z);for(S+=15&Z,o&&(t=v(t,k+(1<<17)));k<P;)t[k]=t[k++-B],t[k]=t[k++-B],t[k]=t[k++-B],t[k]=t[k++-B];k=P}}}else{0!=(7&S)&&(S+=8-(7&S));var z=4+(S>>>3),G=e[z-4]|e[z-3]<<8;o&&(t=v(t,k+G)),t.set(new n(e.buffer,e.byteOffset+z,G),k),S=z+G<<3,k+=G}return t.length==k?t:t.slice(0,k)}(e,t)}var S={numWorkers:1,workerURL:"",useWorkers:!1},R=0,C=0,D=!0,A=[],O=[],N=[],M=new Map;function P(e){U(e.target);var t=e.data,n=t.id,r=t.error,i=t.data,a=M.get(n);M.delete(n),r?a.reject(r):a.resolve(i)}function F(e){return new Promise((function(t,n){var r=new Worker(e);r.onmessage=function(e){"start"===e.data?(r.onerror=void 0,r.onmessage=void 0,t(r)):n(new Error("unexpected message: ".concat(e.data)))},r.onerror=n}))}var L=function(){if(p){var t=(i="worker_threads",(n=e).require?n.require(i):{}).Worker;return{createWorker:function(e){return(0,s.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new t(e));case 1:case"end":return n.stop()}}),n)})))()},addEventListener:function(e,t){e.on("message",(function(n){t({target:e,data:n})}))},terminate:function(e){return(0,s.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.terminate();case 2:case"end":return t.stop()}}),t)})))()}}}return{createWorker:function(e){return(0,s.Z)((0,r.Z)().mark((function t(){var n,i,a,s,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F(e);case 3:return n=t.sent,t.abrupt("return",n);case 7:t.prev=7,t.t0=t.catch(0),console.warn("could not load worker:",e);case 10:return t.prev=10,t.next=13,fetch(e,{mode:"cors"});case 13:if((a=t.sent).ok){t.next=16;break}throw new Error("could not load: ".concat(e));case 16:return t.next=18,a.text();case 18:return i=t.sent,e=URL.createObjectURL(new Blob([i],{type:"application/javascript"})),t.next=22,F(e);case 22:return s=t.sent,S.workerURL=e,t.abrupt("return",s);case 27:t.prev=27,t.t1=t.catch(10),console.warn("could not load worker via fetch:",e);case 30:if(void 0===i){t.next=43;break}return t.prev=31,e="data:application/javascript;base64,".concat(btoa(i)),t.next=35,F(e);case 35:return o=t.sent,S.workerURL=e,t.abrupt("return",o);case 40:t.prev=40,t.t2=t.catch(31),console.warn("could not load worker via dataURI");case 43:throw console.warn("workers will not be used"),new Error("can not start workers");case 45:case"end":return t.stop()}}),t,null,[[0,7],[10,27],[31,40]])})))()},addEventListener:function(e,t){e.addEventListener("message",t)},terminate:function(e){return(0,s.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.terminate();case 1:case"end":return t.stop()}}),t)})))()}};var n,i}();function U(e){O.push(e),G()}function Z(){return B.apply(this,arguments)}function B(){return(B=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0===O.length&&C<S.numWorkers)){e.next=14;break}return++C,e.prev=2,e.next=5,L.createWorker(S.workerURL);case 5:t=e.sent,A.push(t),O.push(t),L.addEventListener(t,P),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),D=!1;case 14:return e.abrupt("return",O.pop());case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function z(e,t,n,r){var i=new Uint8Array(t);k(e,i),r(n?new Blob([i],{type:n}):i.buffer)}function G(){return H.apply(this,arguments)}function H(){return(H=(0,s.Z)((0,r.Z)().mark((function e(){var t,n,i,a,s,o,l,h,p,f,d,v,m,y,g;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==N.length){e.next=2;break}return e.abrupt("return");case 2:if(!S.useWorkers||!D){e.next=16;break}return e.next=5,Z();case 5:if(t=e.sent,!D){e.next=16;break}if(!t){e.next=15;break}if(0!==N.length){e.next=11;break}return U(t),e.abrupt("return");case 11:n=N.shift(),i=n.id,a=n.src,s=n.uncompressedSize,o=n.type,l=n.resolve,h=n.reject,M.set(i,{id:i,resolve:l,reject:h}),p=[],t.postMessage({type:"inflate",data:{id:i,type:o,src:a,uncompressedSize:s}},p);case 15:return e.abrupt("return");case 16:if(!N.length){e.next=26;break}if(f=N.shift(),d=f.src,v=f.uncompressedSize,m=f.type,y=f.resolve,g=d,!c(d)){e.next=23;break}return e.next=22,u(d);case 22:g=e.sent;case 23:z(g,v,m,y),e.next=16;break;case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,n){return new Promise((function(r,i){N.push({src:e,uncompressedSize:t,type:n,resolve:r,reject:i,id:R++}),G()}))}var V=function(){function e(t,n){var r,a;(0,i.Z)(this,e),this._reader=t,this._rawEntry=n,this.name=n.name,this.nameBytes=n.nameBytes,this.size=n.uncompressedSize,this.compressedSize=n.compressedSize,this.comment=n.comment,this.commentBytes=n.commentBytes,this.compressionMethod=n.compressionMethod,this.lastModDate=(r=n.lastModFileDate,a=n.lastModFileTime,new Date(1980+(r>>9&127),(r>>5&15)-1,31&r,a>>11&31,a>>5&63,2*(31&a),0)),this.isDirectory=0===n.uncompressedSize&&n.name.endsWith("/"),this.encrypted=!!(1&n.generalPurposeBitFlag),this.externalFileAttributes=n.externalFileAttributes,this.versionMadeBy=n.versionMadeBy}return(0,a.Z)(e,[{key:"blob",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,n=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"application/octet-stream",e.next=3,ge(this._reader,this._rawEntry,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arrayBuffer",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(this._reader,this._rawEntry);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"text",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.arrayBuffer();case 2:return t=e.sent,e.abrupt("return",ae(new Uint8Array(t)));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"json",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.text();case 2:return t=e.sent,e.abrupt("return",JSON.parse(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),W=22,Y=65535,q=101010256,X=101075792;function K(e,t,n){return Q.apply(this,arguments)}function Q(){return(Q=(0,s.Z)((0,r.Z)().mark((function e(t,n,i){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.read(n,i);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t,n,r){return $.apply(this,arguments)}function $(){return($=(0,s.Z)((0,r.Z)().mark((function e(t,n,i,a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.sliceAsBlob){e.next=4;break}return e.next=3,t.sliceAsBlob(n,i,a);case 3:case 6:return e.abrupt("return",e.sent);case 4:return e.next=6,t.read(n,i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee={unsigned:function(){return 0}};function te(e,t){return e[t]+256*e[t+1]}function ne(e,t){return e[t]+256*e[t+1]+65536*e[t+2]+16777216*e[t+3]}function re(e,t){return ne(e,t)+4294967296*ne(e,t+4)}var ie=new TextDecoder;function ae(e,t){return h(e.buffer)&&(e=new Uint8Array(e)),ie.decode(e)}function se(e,t){return oe.apply(this,arguments)}function oe(){return(oe=(0,s.Z)((0,r.Z)().mark((function e(t,n){var i,a,s,o,u,l,c,h,p,f,d,v,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Math.min(W+Y,n),a=n-i,e.next=4,K(t,a,i);case 4:s=e.sent,o=i-W;case 6:if(!(o>=0)){e.next=34;break}if(ne(s,o)===q){e.next=9;break}return e.abrupt("continue",31);case 9:if(u=new Uint8Array(s.buffer,s.byteOffset+o,s.byteLength-o),0===(l=te(u,4))){e.next=13;break}throw new Error("multi-volume zip files are not supported. This is volume: ".concat(l));case 13:if(c=te(u,10),h=ne(u,12),p=ne(u,16),f=te(u,20),d=u.length-W,f===d){e.next=20;break}throw new Error("invalid comment length. expected: ".concat(d,", actual: ").concat(f));case 20:if(v=new Uint8Array(u.buffer,u.byteOffset+22,f),m=ae(v),65535!==c&&4294967295!==p){e.next=28;break}return e.next=25,le(t,a+o,m,v);case 25:return e.abrupt("return",e.sent);case 28:return e.next=30,pe(t,p,h,c,m,v);case 30:return e.abrupt("return",e.sent);case 31:--o,e.next=6;break;case 34:throw new Error("could not find end of central directory. maybe not zip file");case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ue=117853008;function le(e,t,n,r){return ce.apply(this,arguments)}function ce(){return(ce=(0,s.Z)((0,r.Z)().mark((function e(t,n,i,a){var s,o,u,l,c,h,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n-20,e.next=3,K(t,s,20);case 3:if(ne(o=e.sent,0)===ue){e.next=6;break}throw new Error("invalid zip64 end of central directory locator signature");case 6:return u=re(o,8),e.next=9,K(t,u,56);case 9:if(ne(l=e.sent,0)===X){e.next=12;break}throw new Error("invalid zip64 end of central directory record signature");case 12:return c=re(l,32),h=re(l,40),p=re(l,48),e.abrupt("return",pe(t,p,h,c,i,a));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var he=33639248;function pe(e,t,n,r,i,a){return fe.apply(this,arguments)}function fe(){return(fe=(0,s.Z)((0,r.Z)().mark((function e(t,n,i,a,s,o){var u,l,c,h,p,f,d,v,m,y,g,_,T,E,x,b,I,w,k,S,R;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=0,e.next=3,K(t,n,i);case 3:l=e.sent,c=[],h=0;case 6:if(!(h<a)){e.next=68;break}if(p=l.subarray(u,u+46),(f=ne(p,0))===he){e.next=11;break}throw new Error("invalid central directory file header signature: 0x".concat(f.toString(16)));case 11:if(!(64&(d={versionMadeBy:te(p,4),versionNeededToExtract:te(p,6),generalPurposeBitFlag:te(p,8),compressionMethod:te(p,10),lastModFileTime:te(p,12),lastModFileDate:te(p,14),crc32:ne(p,16),compressedSize:ne(p,20),uncompressedSize:ne(p,24),fileNameLength:te(p,28),extraFieldLength:te(p,30),fileCommentLength:te(p,32),internalFileAttributes:te(p,36),externalFileAttributes:ne(p,38),relativeOffsetOfLocalHeader:ne(p,42)}).generalPurposeBitFlag)){e.next=14;break}throw new Error("strong encryption is not supported");case 14:u+=46,v=l.subarray(u,u+d.fileNameLength+d.extraFieldLength+d.fileCommentLength),d.nameBytes=v.slice(0,d.fileNameLength),d.name=ae(d.nameBytes),m=d.fileNameLength+d.extraFieldLength,y=v.slice(d.fileNameLength,m),d.extraFields=[],g=0;case 22:if(!(g<y.length-3)){e.next=33;break}if(_=te(y,g+0),T=te(y,g+2),!((x=(E=g+4)+T)>y.length)){e.next=29;break}throw new Error("extra field length exceeds extra field buffer size");case 29:d.extraFields.push({id:_,data:y.slice(E,x)}),g=x,e.next=22;break;case 33:if(d.commentBytes=v.slice(m,m+d.fileCommentLength),d.comment=ae(d.commentBytes),u+=v.length,4294967295!==d.uncompressedSize&&4294967295!==d.compressedSize&&4294967295!==d.relativeOffsetOfLocalHeader){e.next=57;break}if(b=d.extraFields.find((function(e){return 1===e.id})),b){e.next=40;break}throw new Error("expected zip64 extended information extra field");case 40:if(I=b.data,w=0,4294967295!==d.uncompressedSize){e.next=47;break}if(!(w+8>I.length)){e.next=45;break}throw new Error("zip64 extended information extra field does not include uncompressed size");case 45:d.uncompressedSize=re(I,w),w+=8;case 47:if(4294967295!==d.compressedSize){e.next=52;break}if(!(w+8>I.length)){e.next=50;break}throw new Error("zip64 extended information extra field does not include compressed size");case 50:d.compressedSize=re(I,w),w+=8;case 52:if(4294967295!==d.relativeOffsetOfLocalHeader){e.next=57;break}if(!(w+8>I.length)){e.next=55;break}throw new Error("zip64 extended information extra field does not include relative header offset");case 55:d.relativeOffsetOfLocalHeader=re(I,w),w+=8;case 57:if(k=d.extraFields.find((function(e){return 28789===e.id&&e.data.length>=6&&1===e.data[0]&&ne(e.data,1)}),ee.unsigned(d.nameBytes)),k&&(d.fileName=ae(k.data.slice(5))),0!==d.compressionMethod){e.next=64;break}if(S=d.uncompressedSize,0!==(1&d.generalPurposeBitFlag)&&(S+=12),d.compressedSize===S){e.next=64;break}throw new Error("compressed size mismatch for stored file: ".concat(d.compressedSize," != ").concat(S));case 64:c.push(d);case 65:++h,e.next=6;break;case 68:return R={comment:s,commentBytes:o},e.abrupt("return",{zip:R,entries:c.map((function(e){return new V(t,e)}))});case 70:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e,t){return ve.apply(this,arguments)}function ve(){return(ve=(0,s.Z)((0,r.Z)().mark((function e(t,n){var i,a,s,o,u,l,c,h,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(1&n.generalPurposeBitFlag)){e.next=2;break}throw new Error("encrypted entries not supported");case 2:return e.next=4,K(t,n.relativeOffsetOfLocalHeader,30);case 4:return i=e.sent,e.next=7,t.getLength();case 7:if(a=e.sent,67324752===(s=ne(i,0))){e.next=11;break}throw new Error("invalid local file header signature: 0x".concat(s.toString(16)));case 11:if(o=te(i,26),u=te(i,28),l=n.relativeOffsetOfLocalHeader+i.length+o+u,0!==n.compressionMethod){e.next=18;break}c=!1,e.next=23;break;case 18:if(8!==n.compressionMethod){e.next=22;break}c=!0,e.next=23;break;case 22:throw new Error("unsupported compression method: ".concat(n.compressionMethod));case 23:if(p=(h=l)+n.compressedSize,0===n.compressedSize){e.next=28;break}if(!(p>a)){e.next=28;break}throw new Error("file data overflows file bounds: ".concat(h," +  ").concat(n.compressedSize,"  > ").concat(a));case 28:return e.abrupt("return",{decompress:c,fileDataStart:h});case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t){return ye.apply(this,arguments)}function ye(){return(ye=(0,s.Z)((0,r.Z)().mark((function e(t,n){var i,a,s,o,u,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(t,n);case 2:if(i=e.sent,a=i.decompress,s=i.fileDataStart,a){e.next=10;break}return e.next=8,K(t,s,n.compressedSize);case 8:return o=e.sent,e.abrupt("return",0===(r=o).byteOffset&&r.byteLength===r.buffer.byteLength?o.buffer:o.slice().buffer);case 10:return e.next=12,J(t,s,n.compressedSize);case 12:return u=e.sent,e.next=15,j(u,n.uncompressedSize);case 15:return l=e.sent,e.abrupt("return",l);case 17:case"end":return e.stop()}var r}),e)})))).apply(this,arguments)}function ge(e,t,n){return _e.apply(this,arguments)}function _e(){return(_e=(0,s.Z)((0,r.Z)().mark((function e(t,n,i){var a,s,o,u,l,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(t,n);case 2:if(a=e.sent,s=a.decompress,o=a.fileDataStart,s){e.next=12;break}return e.next=8,J(t,o,n.compressedSize,i);case 8:if(!c(u=e.sent)){e.next=11;break}return e.abrupt("return",u);case 11:return e.abrupt("return",new Blob([h(u.buffer)?new Uint8Array(u):u],{type:i}));case 12:return e.next=14,J(t,o,n.compressedSize);case 14:return l=e.sent,e.next=17,j(l,n.uncompressedSize,i);case 17:return p=e.sent,e.abrupt("return",p);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,s.Z)((0,r.Z)().mark((function e(t){var n,i,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("undefined"!==typeof Blob&&t instanceof Blob)){e.next=4;break}n=new d(t),e.next=29;break;case 4:if(!(t instanceof ArrayBuffer||t&&t.buffer&&t.buffer instanceof ArrayBuffer)){e.next=8;break}n=new f(t),e.next=29;break;case 8:if(!h(t)&&!h(t.buffer)){e.next=12;break}n=new f(t),e.next=29;break;case 12:if("string"!==typeof t){e.next=24;break}return e.next=15,fetch(t);case 15:if((i=e.sent).ok){e.next=18;break}throw new Error("failed http request ".concat(t,", status: ").concat(i.status,": ").concat(i.statusText));case 18:return e.next=20,i.blob();case 20:a=e.sent,n=new d(a),e.next=29;break;case 24:if("function"!==typeof t.getLength||"function"!==typeof t.read){e.next=28;break}n=t,e.next=29;break;case 28:throw new Error("unsupported source type");case 29:return e.next=31,n.getLength();case 31:if(!((s=e.sent)>Number.MAX_SAFE_INTEGER)){e.next=34;break}throw new Error("file too large. size: ".concat(s,". Only file sizes up 4503599627370496 bytes are supported"));case 34:return e.next=36,se(n,s);case 36:return e.abrupt("return",e.sent);case 37:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e){return be.apply(this,arguments)}function be(){return(be=(0,s.Z)((0,r.Z)().mark((function e(t){var n,i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te(t);case 2:return n=e.sent,i=n.zip,a=n.entries,e.abrupt("return",{zip:i,entries:Object.fromEntries(a.map((function(e){return[e.name,e]})))});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},5226:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=5226,e.exports=t},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,n){var r=n(3897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3515:function(e,t,n){var r=n(6015),i=n(9617);function a(t,n,s){return i()?(e.exports=a=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r(a,n.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var r=n(4062);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,n){var r=n(6116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw s}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var r=n(3808),i=n(9617),a=n(4993);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var s=r(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return a(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,n){var r=n(4062);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},1588:function(e,t,n){var r=n(1753);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},6035:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,i=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var r=n(5372),i=n(8872),a=n(6116),s=n(2218);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||s()},e.exports.__esModule=!0,e.exports.default=e.exports},1753:function(e,t,n){var r=n(3808);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},1589:function(e,t,n){var r=n(5372),i=n(9498),a=n(6116),s=n(2218);e.exports=function(e){return r(e)||i(e)||a(e)||s()},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(3405),i=n(9498),a=n(6116),s=n(2281);e.exports=function(e){return r(e)||i(e)||a(e)||s()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,i=n(5036);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},3496:function(e,t,n){var r=n(3808),i=n(6015),a=n(6035),s=n(3515);function o(t){var n="function"===typeof Map?new Map:void 0;return e.exports=o=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return s(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,o(t)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(l){return void n(l)}o.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var s=e.apply(t,n);function o(e){r(s,i,a,o,u,"next",e)}function u(e){r(s,i,a,o,u,"throw",e)}o(void 0)}))}}n.d(t,{Z:function(){return i}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},3144:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9142);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,r.Z)(i.key),i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9142);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},4165:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(D){c=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,s=Object.create(i.prototype),o=new S(r||[]);return a(s,"_invoke",{value:b(e,n,o)}),s}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=h;var f={};function d(){}function v(){}function m(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,_=g&&g(g(R([])));_&&_!==t&&n.call(_,o)&&(y=_);var T=m.prototype=d.prototype=Object.create(y);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(a,s,o,u){var l=p(e[a],e,s);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==(0,r.Z)(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(l.arg)}var s;a(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function b(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var o=I(s,n);if(o){if(o===f)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=p(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function I(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=p(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function R(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=m,a(T,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:v,configurable:!0}),v.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},E(x.prototype),c(x.prototype,u,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var s=new x(h(t,n,r,i),a);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(T),c(T,l,"Generator"),c(T,o,(function(){return this})),c(T,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var o=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(o&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(3878);var i=n(181),a=n(5267);function s(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(e,t)||(0,i.Z)(e,t)||(0,a.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(907);var i=n(9199),a=n(181);function s(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.amdO={},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((function(e){s[e]=function(){return r[e]}}));return s.default=function(){return r},n.d(a,s),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e=n(7313),t=n.t(e,2),r=n(1739),i=n(9439),a=n(3433),s=n(5671),o=n(3144);function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(IQ){return!1}}var p=n(1002);function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if(t&&("object"===(0,p.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function v(e){var t=h();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function m(e,t,n){return m=h()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i},m.apply(null,arguments)}function y(e){var t="function"===typeof Map?new Map:void 0;return y=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return m(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)},y(e)}var g,_=n(3878),T=n(9199),E=n(181),x=n(5267);function b(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,E.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(g||(g={}));var w,k="popstate";function S(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function R(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(IQ){}}}function C(e,t){return{usr:e.state,key:e.key,idx:t}}function D(e,t,n,r){return void 0===n&&(n=null),I({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?O(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function A(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,s=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),s&&"#"!==s&&(n+="#"===s.charAt(0)?s:"#"+s),n}function O(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function N(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,s=void 0===a?document.defaultView:a,o=i.v5Compat,u=void 0!==o&&o,l=s.history,c=g.Pop,h=null,p=f();function f(){return(l.state||{idx:null}).idx}function d(){c=g.Pop;var e=f(),t=null==e?null:e-p;p=e,h&&h({action:c,location:m.location,delta:t})}function v(e){var t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:A(e);return S(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==p&&(p=0,l.replaceState(I({},l.state,{idx:p}),""));var m={get action(){return c},get location(){return e(s,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(k,d),h=e,function(){s.removeEventListener(k,d),h=null}},createHref:function(e){return t(s,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=g.Push;var r=D(m.location,e,t);n&&n(r,e);var i=C(r,p=f()+1),a=m.createHref(r);try{l.pushState(i,"",a)}catch(o){s.location.assign(a)}u&&h&&h({action:c,location:m.location,delta:1})},replace:function(e,t){c=g.Replace;var r=D(m.location,e,t);n&&n(r,e);var i=C(r,p=f()),a=m.createHref(r);l.replaceState(i,"",a),u&&h&&h({action:c,location:m.location,delta:0})},go:function(e){return l.go(e)}};return m}function M(e,t,n){void 0===n&&(n="/");var r=q(("string"===typeof t?O(t):t).pathname||"/",n);if(null==r)return null;var i=P(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,s=0;null==a&&s<i.length;++s)a=V(i[s],Y(r));return a}function P(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(S(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));var o=$([r,s.relativePath]),u=n.concat(s);e.children&&e.children.length>0&&(S(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),P(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:j(o,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=b(F(e.path));try{for(a.s();!(r=a.n()).done;){var s=r.value;i(e,t,s)}}catch(o){a.e(o)}finally{a.f()}}else i(e,t)})),t}function F(e){var t=e.split("/");if(0===t.length)return[];var n,r=(n=t,(0,_.Z)(n)||(0,T.Z)(n)||(0,E.Z)(n)||(0,x.Z)()),i=r[0],s=r.slice(1),o=i.endsWith("?"),u=i.replace(/\?$/,"");if(0===s.length)return o?[u,""]:[u];var l=F(s.join("/")),c=[];return c.push.apply(c,(0,a.Z)(l.map((function(e){return""===e?u:[u,e].join("/")})))),o&&c.push.apply(c,(0,a.Z)(l)),c.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(w||(w={}));var L=/^:\w+$/,U=3,Z=2,B=1,z=10,G=-2,H=function(e){return"*"===e};function j(e,t){var n=e.split("/"),r=n.length;return n.some(H)&&(r+=G),t&&(r+=Z),n.filter((function(e){return!H(e)})).reduce((function(e,t){return e+(L.test(t)?U:""===t?B:z)}),r)}function V(e,t){for(var n=e.routesMeta,r={},i="/",a=[],s=0;s<n.length;++s){var o=n[s],u=s===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=W({path:o.relativePath,caseSensitive:o.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var h=o.route;a.push({params:r,pathname:$([i,c.pathname]),pathnameBase:ee($([i,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(i=$([i,c.pathnameBase]))}return a}function W(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);X("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=(0,i.Z)(n,2),a=r[0],s=r[1],o=t.match(a);if(!o)return null;var u=o[0],l=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:s.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";l=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return X(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:u,pathnameBase:l,pattern:e}}function Y(e){try{return decodeURI(e)}catch(t){return X(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function q(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function X(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(IQ){}}}function K(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Q(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function J(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=O(e):(S(!(i=I({},e)).pathname||!i.pathname.includes("?"),K("?","pathname","search",i)),S(!i.pathname||!i.pathname.includes("#"),K("#","pathname","hash",i)),S(!i.search||!i.search.includes("#"),K("#","search","hash",i)));var a,s=""===e||""===i.pathname,o=s?"/":i.pathname;if(r||null==o)a=n;else{var u=t.length-1;if(o.startsWith("..")){for(var l=o.split("/");".."===l[0];)l.shift(),u-=1;i.pathname=l.join("/")}a=u>=0?t[u]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?O(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,s=n.hash,o=void 0===s?"":s,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:te(a),hash:ne(o)}}(i,a),h=o&&"/"!==o&&o.endsWith("/"),p=(s||"."===o)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!p||(c.pathname+="/"),c}var $=function(e){return e.join("/").replace(/\/\/+/g,"/")},ee=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},te=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ne=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},re=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(y(Error));function ie(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ae=["post","put","patch","delete"],se=(new Set(ae),["get"].concat(ae));new Set(se),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oe.apply(this,arguments)}var ue="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},le=e.useState,ce=e.useEffect,he=e.useLayoutEffect,pe=e.useDebugValue;function fe(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!ue(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,t.useSyncExternalStore;var de=e.createContext(null);var ve=e.createContext(null);var me=e.createContext(null);var ye=e.createContext(null);var ge=e.createContext(null);var _e=e.createContext({outlet:null,matches:[]});var Te=e.createContext(null);function Ee(){return null!=e.useContext(ge)}function xe(){return Ee()||S(!1),e.useContext(ge).location}function be(){var t=function(){var t,n=e.useContext(Te),r=Ce(we.UseRouteError),i=De(we.UseRouteError);if(n)return n;return null==(t=r.errors)?void 0:t[i]}(),n=ie(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:a},r):null,null)}var Ie,we,ke=function(t){l(r,t);var n=v(r);function r(e){var t;return(0,s.Z)(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return(0,o.Z)(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(_e.Provider,{value:this.props.routeContext},e.createElement(Te.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(e.Component);function Se(t){var n=t.routeContext,r=t.match,i=t.children,a=e.useContext(de);return a&&a.static&&a.staticContext&&r.route.errorElement&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(_e.Provider,{value:n},i)}function Re(t,n,r){if(void 0===n&&(n=[]),null==t){if(null==r||!r.errors)return null;t=r.matches}var i=t,a=null==r?void 0:r.errors;if(null!=a){var s=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));s>=0||S(!1),i=i.slice(0,Math.min(i.length,s+1))}return i.reduceRight((function(t,s,o){var u=s.route.id?null==a?void 0:a[s.route.id]:null,l=r?s.route.errorElement||e.createElement(be,null):null,c=n.concat(i.slice(0,o+1)),h=function(){return e.createElement(Se,{match:s,routeContext:{outlet:t,matches:c}},u?l:void 0!==s.route.element?s.route.element:t)};return r&&(s.route.errorElement||0===o)?e.createElement(ke,{location:r.location,component:l,error:u,children:h(),routeContext:{outlet:null,matches:c}}):h()}),null)}function Ce(t){var n=e.useContext(ve);return n||S(!1),n}function De(t){var n=function(t){var n=e.useContext(_e);return n||S(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||S(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(Ie||(Ie={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(we||(we={}));var Ae;function Oe(t){var n=t.to,r=t.replace,i=t.state,a=t.relative;Ee()||S(!1);var s=e.useContext(ve),o=function(){Ee()||S(!1);var t=e.useContext(ye),n=t.basename,r=t.navigator,i=e.useContext(_e).matches,a=xe().pathname,s=JSON.stringify(Q(i).map((function(e){return e.pathnameBase}))),o=e.useRef(!1);e.useEffect((function(){o.current=!0}));var u=e.useCallback((function(e,t){if(void 0===t&&(t={}),o.current)if("number"!==typeof e){var i=J(e,JSON.parse(s),a,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:$([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,s,a]);return u}();return e.useEffect((function(){s&&"idle"!==s.navigation.state||o(n,{replace:r,state:i,relative:a})})),null}function Ne(e){S(!1)}function Me(t){var n=t.basename,r=void 0===n?"/":n,i=t.children,a=void 0===i?null:i,s=t.location,o=t.navigationType,u=void 0===o?g.Pop:o,l=t.navigator,c=t.static,h=void 0!==c&&c;Ee()&&S(!1);var p=r.replace(/^\/*/,"/"),f=e.useMemo((function(){return{basename:p,navigator:l,static:h}}),[p,l,h]);"string"===typeof s&&(s=O(s));var d=s,v=d.pathname,m=void 0===v?"/":v,y=d.search,_=void 0===y?"":y,T=d.hash,E=void 0===T?"":T,x=d.state,b=void 0===x?null:x,I=d.key,w=void 0===I?"default":I,k=e.useMemo((function(){var e=q(m,p);return null==e?null:{pathname:e,search:_,hash:E,state:b,key:w}}),[p,m,_,E,b,w]);return null==k?null:e.createElement(ye.Provider,{value:f},e.createElement(ge.Provider,{children:a,value:{location:k,navigationType:u}}))}function Pe(t){var n=t.children,r=t.location,i=e.useContext(de);return function(t,n){Ee()||S(!1);var r,i=e.useContext(ye).navigator,a=e.useContext(ve),s=e.useContext(_e).matches,o=s[s.length-1],u=o?o.params:{},l=(o&&o.pathname,o?o.pathnameBase:"/"),c=(o&&o.route,xe());if(n){var h,p="string"===typeof n?O(n):n;"/"===l||(null==(h=p.pathname)?void 0:h.startsWith(l))||S(!1),r=p}else r=c;var f=r.pathname||"/",d=M(t,{pathname:"/"===l?f:f.slice(l.length)||"/"}),v=Re(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:$([l,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:$([l,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),s,a||void 0);return n&&v?e.createElement(ge.Provider,{value:{location:oe({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:g.Pop}},v):v}(i&&!n?i.router.routes:Le(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Ae||(Ae={}));var Fe=new Promise((function(){}));e.Component;function Le(t,n){void 0===n&&(n=[]);var r=[];return e.Children.forEach(t,(function(t,i){if(e.isValidElement(t))if(t.type!==e.Fragment){t.type!==Ne&&S(!1),t.props.index&&t.props.children&&S(!1);var s=[].concat((0,a.Z)(n),[i]),o={id:t.props.id||s.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,hasErrorBoundary:null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle};t.props.children&&(o.children=Le(t.props.children,s)),r.push(o)}else r.push.apply(r,Le(t.props.children,n))})),r}function Ue(t){var n,r=t.basename,a=t.children,s=t.window,o=e.useRef();null==o.current&&(o.current=(void 0===(n={window:s,v5Compat:!0})&&(n={}),N((function(e,t){var n=O(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,s=void 0===a?"":a,o=n.hash;return D("",{pathname:i,search:s,hash:void 0===o?"":o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:A(t))}),(function(e,t){R("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),n)));var u=o.current,l=e.useState({action:u.action,location:u.location}),c=(0,i.Z)(l,2),h=c[0],p=c[1];return e.useLayoutEffect((function(){return u.listen(p)}),[u]),e.createElement(Me,{basename:r,children:a,location:h.location,navigationType:h.action,navigator:u})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Ze,Be;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Ze||(Ze={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Be||(Be={}));var ze=n(7462),Ge=n(3366),He=n(3061),je=n(4472),Ve=n(3649),We=n(3019),Ye=n(3232),qe=["sx"],Xe=function(e){var t,n,r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:Ye.Z;return Object.keys(e).forEach((function(t){i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function Ke(e){var t,n=e.sx,r=(0,Ge.Z)(e,qe),i=Xe(r),s=i.systemProps,o=i.otherProps;return t=Array.isArray(n)?[s].concat((0,a.Z)(n)):"function"===typeof n?function(){var e=n.apply(void 0,arguments);return(0,We.P)(e)?(0,ze.Z)({},s,e):s}:(0,ze.Z)({},s,n),(0,ze.Z)({},o,{sx:t})}var Qe=n(6936),Je=n(6417),$e=["className","component"];var et=n(1271),tt=n(8658),nt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.defaultTheme,r=t.defaultClassName,i=void 0===r?"MuiBox-root":r,a=t.generateClassName,s=(0,je.ZP)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(Ve.Z),o=e.forwardRef((function(e,t){var r=(0,Qe.Z)(n),o=Ke(e),u=o.className,l=o.component,c=void 0===l?"div":l,h=(0,Ge.Z)(o,$e);return(0,Je.jsx)(s,(0,ze.Z)({as:c,ref:t,className:(0,He.Z)(u,a?a(i):i),theme:r},h))}));return o}({defaultTheme:(0,tt.Z)(),defaultClassName:"MuiBox-root",generateClassName:et.Z.generate}),rt=nt,it=["LOGIN","UPDATE_USER","LOGOUT","START_MAP","REMOVE_MAP","ADD_BUILDING","OPEN_BUILDING","CLOSE_BUILDING","UPDATE_BUILDING","DELETE_BUILDING","UPLOAD_MODEL","DELETE_MODEL","START_BUILDING","CLOSE_BUILDING","EXPLODE_MODEL","TOGGLE_CLIPPER","TOGGLE_DIMENSIONS","TOGGLE_FLOORPLAN","UPDATE_FLOORPLANS","UPDATE_PROPERTIES"],at=n(4942);function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){(0,at.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ut(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}function lt(){return lt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=ut(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},lt.apply(this,arguments)}var ct=n(4165),ht=n(5861),pt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ft={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],s=i+1<e.length,o=s?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=a>>2,h=(3&a)<<4|o>>4,p=(15&o)<<2|l>>6,f=63&l;u||(f=64,s||(p=64)),r.push(n[c],n[h],n[p],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(pt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{var o=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0,o=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==s||null==o||null==u)throw new dt;var l=a<<2|s>>4;if(r.push(l),64!==o){var c=s<<4&240|o>>2;if(r.push(c),64!==u){var h=o<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},dt=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return(0,o.Z)(n)}(y(Error)),vt=function(e){return function(e){var t=pt(e);return ft.encodeByteArray(t,!0)}(e).replace(/\./g,"")},mt=function(e){try{return ft.decodeString(e,!0)}catch(IQ){console.error("base64Decode failed: ",IQ)}return null};var yt=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},gt=function(){try{return yt()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/IFCReactApp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDWFdP9aE8vAwyMG1jq6pc0_MHr6ItLk84",REACT_APP_FIREBASE_APP_ID:"1:54427550535:web:56f3c2daa707f1606e8262",REACT_APP_FIREBASE_AUTH_DOMAIN:"ifc-react-app.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"54427550535",REACT_APP_FIREBASE_PROJECT_ID:"ifc-react-app",REACT_APP_FIREBASE_STORAGE_BUCKET:"ifc-react-app.appspot.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoiYmltY2EiLCJhIjoiY2xmMXJ4ZGhrMGJhazN4bGg2YTAwZG5heSJ9.OQdD57WTOQigRXhxpjfaqA"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(IQ){return}var t=e&&mt(e[1]);return t&&JSON.parse(t)}}()}catch(IQ){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(IQ))}},_t=function(e){var t,n;return null===(n=null===(t=gt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Tt=function(e){var t=_t(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},Et=function(){var e;return null===(e=gt())||void 0===e?void 0:e.config},xt=function(e){var t;return null===(t=gt())||void 0===t?void 0:t["_".concat(e)]},bt=function(){function e(){var t=this;(0,s.Z)(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return(0,o.Z)(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function It(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[vt(JSON.stringify({alg:"none",type:"JWT"})),vt(JSON.stringify(a)),""].join(".")}function wt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function kt(){var e,t=null===(e=gt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(IQ){return!1}}function St(){try{return"object"===typeof indexedDB}catch(IQ){return!1}}var Rt="FirebaseError",Ct=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;return(0,s.Z)(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name=Rt,Object.setPrototypeOf(f(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(f(a),Dt.prototype.create),a}return(0,o.Z)(n)}(y(Error)),Dt=function(){function e(t,n,r){(0,s.Z)(this,e),this.service=t,this.serviceName=n,this.errors=r}return(0,o.Z)(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(At,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ct(n,a,t)}}]),e}();var At=/\{\$([^}]+)}/g;function Ot(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var s=a[i];if(!r.includes(s))return!1;var o=e[s],u=t[s];if(Nt(o)&&Nt(u)){if(!Ot(o,u))return!1}else if(o!==u)return!1}for(var l=0,c=r;l<c.length;l++){var h=c[l];if(!n.includes(h))return!1}return!0}function Nt(e){return null!==e&&"object"===typeof e}function Mt(e){for(var t=[],n=function(){var e=(0,i.Z)(a[r],2),n=e[0],s=e[1];Array.isArray(s)?s.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))},r=0,a=Object.entries(e);r<a.length;r++)n();return t.length?"&"+t.join("&"):""}function Pt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=(0,i.Z)(n,2),a=r[0],s=r[1];t[decodeURIComponent(a)]=decodeURIComponent(s)}})),t}function Ft(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Lt=function(){function e(t,n){var r=this;(0,s.Z)(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return(0,o.Z)(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=b(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Ut),void 0===r.error&&(r.error=Ut),void 0===r.complete&&(r.complete=Ut);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(IQ){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(IQ){"undefined"!==typeof console&&console.error&&console.error(IQ)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Ut(){}function Zt(e){return e&&e._delegate?e._delegate:e}var Bt=function(){function e(t,n,r){(0,s.Z)(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return(0,o.Z)(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),zt="[DEFAULT]",Gt=function(){function e(t,n){(0,s.Z)(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return(0,o.Z)(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new bt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(IQ){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(IQ){if(r)return null;throw IQ}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:zt})}catch(IQ){}var t,n=b(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,i.Z)(t.value,2),a=r[0],s=r[1],o=this.normalizeInstanceIdentifier(a);try{var u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch(IQ){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat((0,a.Z)(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),(0,a.Z)(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a,s=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=b(this.instancesDeferred.entries());try{for(o.s();!(a=o.n()).done;){var u=(0,i.Z)(a.value,2),l=u[0],c=u[1];r===this.normalizeInstanceIdentifier(l)&&c.resolve(s)}}catch(h){o.e(h)}finally{o.f()}return s}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Dx){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===zt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Dx){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt;return this.component?this.component.multipleInstances?e:zt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ht,jt,Vt=function(){function e(t){(0,s.Z)(this,e),this.name=t,this.providers=new Map}return(0,o.Z)(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Gt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Wt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(jt||(jt={}));var Yt={debug:jt.DEBUG,verbose:jt.VERBOSE,info:jt.INFO,warn:jt.WARN,error:jt.ERROR,silent:jt.SILENT},qt=jt.INFO,Xt=(Ht={},(0,at.Z)(Ht,jt.DEBUG,"log"),(0,at.Z)(Ht,jt.VERBOSE,"log"),(0,at.Z)(Ht,jt.INFO,"info"),(0,at.Z)(Ht,jt.WARN,"warn"),(0,at.Z)(Ht,jt.ERROR,"error"),Ht),Kt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Xt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,s=new Array(a>2?a-2:0),o=2;o<a;o++)s[o-2]=arguments[o];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(s))}},Qt=function(){function e(t){(0,s.Z)(this,e),this.name=t,this._logLevel=qt,this._logHandler=Kt,this._userLogHandler=null,Wt.push(this)}return(0,o.Z)(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in jt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Yt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,jt.DEBUG].concat(t)),this._logHandler.apply(this,[this,jt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,jt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,jt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,jt.INFO].concat(t)),this._logHandler.apply(this,[this,jt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,jt.WARN].concat(t)),this._logHandler.apply(this,[this,jt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,jt.ERROR].concat(t)),this._logHandler.apply(this,[this,jt.ERROR].concat(t))}}]),e}();var Jt,$t,en=function(e,t){return t.some((function(t){return e instanceof t}))};var tn=new WeakMap,nn=new WeakMap,rn=new WeakMap,an=new WeakMap,sn=new WeakMap;var on={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return nn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||rn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function un(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?($t||($t=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(hn(this),n),cn(tn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return cn(e.apply(hn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[hn(this),t].concat(r));return rn.set(a,t.sort?t.sort():[t]),cn(a)}}function ln(e){return"function"===typeof e?un(e):(e instanceof IDBTransaction&&function(e){if(!nn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));nn.set(e,t)}}(e),en(e,Jt||(Jt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,on):e)}function cn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(cn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&tn.set(t,e)})).catch((function(){})),sn.set(t,e),t}(e);if(an.has(e))return an.get(e);var t=ln(e);return t!==e&&(an.set(e,t),sn.set(t,e)),t}var hn=function(e){return sn.get(e)};var pn,fn,dn=["get","getKey","getAll","getAllKeys","count"],vn=["put","add","delete","clear"],mn=new Map;function yn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(mn.get(t))return mn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=vn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||dn.includes(n))){var a=function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var a,s,o,u,l,c,h=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=this.transaction(t,i?"readwrite":"readonly"),o=s.store,u=h.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=h[c];return r&&(o=o.index(l.shift())),e.next=6,Promise.all([(a=o)[n].apply(a,l),i&&s.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return mn.set(t,a),a}}}on=function(e){return ot(ot({},e),{},{get:function(t,n,r){return yn(t,n)||e.get(t,n,r)},has:function(t,n){return!!yn(t,n)||e.has(t,n)}})}(on);var gn=function(){function e(t){(0,s.Z)(this,e),this.container=t}return(0,o.Z)(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var _n="@firebase/app",Tn="0.9.4",En=new Qt("@firebase/app"),xn="[DEFAULT]",bn=(pn={},(0,at.Z)(pn,_n,"fire-core"),(0,at.Z)(pn,"@firebase/app-compat","fire-core-compat"),(0,at.Z)(pn,"@firebase/analytics","fire-analytics"),(0,at.Z)(pn,"@firebase/analytics-compat","fire-analytics-compat"),(0,at.Z)(pn,"@firebase/app-check","fire-app-check"),(0,at.Z)(pn,"@firebase/app-check-compat","fire-app-check-compat"),(0,at.Z)(pn,"@firebase/auth","fire-auth"),(0,at.Z)(pn,"@firebase/auth-compat","fire-auth-compat"),(0,at.Z)(pn,"@firebase/database","fire-rtdb"),(0,at.Z)(pn,"@firebase/database-compat","fire-rtdb-compat"),(0,at.Z)(pn,"@firebase/functions","fire-fn"),(0,at.Z)(pn,"@firebase/functions-compat","fire-fn-compat"),(0,at.Z)(pn,"@firebase/installations","fire-iid"),(0,at.Z)(pn,"@firebase/installations-compat","fire-iid-compat"),(0,at.Z)(pn,"@firebase/messaging","fire-fcm"),(0,at.Z)(pn,"@firebase/messaging-compat","fire-fcm-compat"),(0,at.Z)(pn,"@firebase/performance","fire-perf"),(0,at.Z)(pn,"@firebase/performance-compat","fire-perf-compat"),(0,at.Z)(pn,"@firebase/remote-config","fire-rc"),(0,at.Z)(pn,"@firebase/remote-config-compat","fire-rc-compat"),(0,at.Z)(pn,"@firebase/storage","fire-gcs"),(0,at.Z)(pn,"@firebase/storage-compat","fire-gcs-compat"),(0,at.Z)(pn,"@firebase/firestore","fire-fst"),(0,at.Z)(pn,"@firebase/firestore-compat","fire-fst-compat"),(0,at.Z)(pn,"fire-js","fire-js"),(0,at.Z)(pn,"firebase","fire-js-all"),pn),In=new Map,wn=new Map;function kn(e,t){try{e.container.addComponent(t)}catch(IQ){En.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),IQ)}}function Sn(e){var t=e.name;if(wn.has(t))return En.debug("There were multiple attempts to register component ".concat(t,".")),!1;wn.set(t,e);var n,r=b(In.values());try{for(r.s();!(n=r.n()).done;){kn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Rn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var Cn=(fn={},(0,at.Z)(fn,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,at.Z)(fn,"bad-app-name","Illegal App name: '{$appName}"),(0,at.Z)(fn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,at.Z)(fn,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,at.Z)(fn,"no-options","Need to provide options, when not being deployed to hosting via source."),(0,at.Z)(fn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,at.Z)(fn,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,at.Z)(fn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),(0,at.Z)(fn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),(0,at.Z)(fn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),(0,at.Z)(fn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),fn),Dn=new Dt("app","Firebase",Cn),An=function(){function e(t,n,r){var i=this;(0,s.Z)(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bt("app",(function(){return i}),"PUBLIC"))}return(0,o.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}}]),e}(),On="9.17.2";function Nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:xn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Dn.create("bad-app-name",{appName:String(i)});if(n||(n=Et()),!n)throw Dn.create("no-options");var a=In.get(i);if(a){if(Ot(n,a.options)&&Ot(r,a.config))return a;throw Dn.create("duplicate-app",{appName:i})}var s,o=new Vt(i),u=b(wn.values());try{for(u.s();!(s=u.n()).done;){var l=s.value;o.addComponent(l)}}catch(h){u.e(h)}finally{u.f()}var c=new An(n,r,o);return In.set(i,c),c}function Mn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn,t=In.get(e);if(!t&&e===xn)return Nn();if(!t)throw Dn.create("no-app",{appName:e});return t}function Pn(e,t,n){var r,i=null!==(r=bn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){var o=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&o.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&s&&o.push("and"),s&&o.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void En.warn(o.join(" "))}Sn(new Bt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var Fn="firebase-heartbeat-database",Ln=1,Un="firebase-heartbeat-store",Zn=null;function Bn(){return Zn||(Zn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,s=n.terminated,o=indexedDB.open(e,t),u=cn(o);return i&&o.addEventListener("upgradeneeded",(function(e){i(cn(o.result),e.oldVersion,e.newVersion,cn(o.transaction))})),r&&o.addEventListener("blocked",(function(){return r()})),u.then((function(e){s&&e.addEventListener("close",(function(){return s()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}(Fn,Ln,{upgrade:function(e,t){if(0===t)e.createObjectStore(Un)}}).catch((function(e){throw Dn.create("idb-open",{originalErrorMessage:e.message})}))),Zn}function zn(e){return Gn.apply(this,arguments)}function Gn(){return Gn=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bn();case 3:return n=e.sent,e.abrupt("return",n.transaction(Un).objectStore(Un).get(Vn(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Ct?En.warn(e.t0.message):(r=Dn.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),En.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Gn.apply(this,arguments)}function Hn(e,t){return jn.apply(this,arguments)}function jn(){return jn=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bn();case 3:return r=e.sent,i=r.transaction(Un,"readwrite"),a=i.objectStore(Un),e.next=8,a.put(n,Vn(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Ct?En.warn(e.t0.message):(s=Dn.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),En.warn(s.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),jn.apply(this,arguments)}function Vn(e){return"".concat(e.name,"!").concat(e.options.appId)}var Wn=1024,Yn=function(){function e(t){var n=this;(0,s.Z)(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Qn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return(0,o.Z)(e,[{key:"triggerHeartbeat",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=qn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,n,r,i,a;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=qn(),n=Xn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=vt(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function qn(){return(new Date).toISOString().substring(0,10)}function Xn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wn,r=[],i=e.slice(),a=b(e);try{var s=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Jn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Jn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===s())break}}catch(o){a.e(o)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Kn,Qn=function(){function e(t){(0,s.Z)(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return(0,o.Z)(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(St()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,zn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Hn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Hn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat((0,a.Z)(r.heartbeats),(0,a.Z)(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Jn(e){return vt(JSON.stringify({version:2,heartbeats:e})).length}Kn="",Sn(new Bt("platform-logger",(function(e){return new gn(e)}),"PRIVATE")),Sn(new Bt("heartbeat",(function(e){return new Yn(e)}),"PRIVATE")),Pn(_n,Tn,Kn),Pn(_n,Tn,"esm2017"),Pn("fire-js","");function $n(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var er;Object.create;function tr(){return(0,at.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var nr=tr,rr=new Dt("auth","Firebase",tr()),ir=new Qt("@firebase/auth");function ar(e){if(ir.logLevel<=jt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ir.error.apply(ir,["Auth (".concat(On,"): ").concat(e)].concat(n))}}function sr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw cr.apply(void 0,[e].concat(n))}function or(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return cr.apply(void 0,[e].concat(n))}function ur(e,t,n){var r=Object.assign(Object.assign({},nr()),(0,at.Z)({},t,n));return new Dt("auth","Firebase",r).create(t,{appName:e.name})}function lr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&sr(e,"argument-error"),ur(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function cr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,s=n[0],o=(0,a.Z)(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[s].concat((0,a.Z)(o)))}return rr.create.apply(rr,[e].concat(n))}function hr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw cr.apply(void 0,[t].concat(r))}}function pr(e){var t="INTERNAL ASSERTION FAILED: "+e;throw ar(t),new Error(t)}function fr(e,t){e||pr(t)}var dr=new Map;function vr(e){fr(e instanceof Function,"Expected a class definition");var t=dr.get(e);return t?(fr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,dr.set(e,t),t)}function mr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function yr(){return"http:"===gr()||"https:"===gr()}function gr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function _r(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(yr()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var Tr=function(){function e(t,n){(0,s.Z)(this,e),this.shortDelay=t,this.longDelay=n,fr(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())||"object"===typeof navigator&&"ReactNative"===navigator.product}return(0,o.Z)(e,[{key:"get",value:function(){return _r()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function Er(e,t){fr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var xr=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),br=(er={},(0,at.Z)(er,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,at.Z)(er,"MISSING_CUSTOM_TOKEN","internal-error"),(0,at.Z)(er,"INVALID_IDENTIFIER","invalid-email"),(0,at.Z)(er,"MISSING_CONTINUE_URI","internal-error"),(0,at.Z)(er,"INVALID_PASSWORD","wrong-password"),(0,at.Z)(er,"MISSING_PASSWORD","internal-error"),(0,at.Z)(er,"EMAIL_EXISTS","email-already-in-use"),(0,at.Z)(er,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,at.Z)(er,"INVALID_IDP_RESPONSE","invalid-credential"),(0,at.Z)(er,"INVALID_PENDING_TOKEN","invalid-credential"),(0,at.Z)(er,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,at.Z)(er,"MISSING_REQ_TYPE","internal-error"),(0,at.Z)(er,"EMAIL_NOT_FOUND","user-not-found"),(0,at.Z)(er,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,at.Z)(er,"EXPIRED_OOB_CODE","expired-action-code"),(0,at.Z)(er,"INVALID_OOB_CODE","invalid-action-code"),(0,at.Z)(er,"MISSING_OOB_CODE","internal-error"),(0,at.Z)(er,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,at.Z)(er,"INVALID_ID_TOKEN","invalid-user-token"),(0,at.Z)(er,"TOKEN_EXPIRED","user-token-expired"),(0,at.Z)(er,"USER_NOT_FOUND","user-token-expired"),(0,at.Z)(er,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,at.Z)(er,"INVALID_CODE","invalid-verification-code"),(0,at.Z)(er,"INVALID_SESSION_INFO","invalid-verification-id"),(0,at.Z)(er,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,at.Z)(er,"MISSING_SESSION_INFO","missing-verification-id"),(0,at.Z)(er,"SESSION_EXPIRED","code-expired"),(0,at.Z)(er,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,at.Z)(er,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,at.Z)(er,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,at.Z)(er,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,at.Z)(er,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,at.Z)(er,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,at.Z)(er,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,at.Z)(er,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,at.Z)(er,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,at.Z)(er,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,at.Z)(er,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),er),Ir=new Tr(3e4,6e4);function wr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function kr(e,t,n,r){return Sr.apply(this,arguments)}function Sr(){return Sr=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r,i){var a,s=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.abrupt("return",Rr(t,a,(0,ht.Z)((0,ct.Z)().mark((function e(){var a,s,o,u;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},s={},i&&("GET"===n?s=i:a={body:JSON.stringify(i)}),o=Mt(Object.assign({key:t.config.apiKey},s)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",xr.fetch()(Or(t,t.config.apiHost,r,o),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Sr.apply(this,arguments)}function Rr(e,t,n){return Cr.apply(this,arguments)}function Cr(){return Cr=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r){var a,s,o,u,l,c,h,p,f,d;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,a=Object.assign(Object.assign({},br),n),e.prev=2,s=new Nr(t),e.next=6,Promise.race([r(),s.promise]);case 6:return o=e.sent,s.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Mr(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(l=o.ok?u.errorMessage:u.error.message,c=l.split(" : "),h=(0,i.Z)(c,2),p=h[0],f=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==p){e.next=23;break}throw Mr(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==p){e.next=27;break}throw Mr(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==p){e.next=29;break}throw Mr(t,"user-disabled",u);case 29:if(d=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-"),!f){e.next=34;break}throw ur(t,d,f);case 34:sr(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Ct)){e.next=41;break}throw e.t0;case 41:sr(t,"internal-error",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Cr.apply(this,arguments)}function Dr(e,t,n,r){return Ar.apply(this,arguments)}function Ar(){return Ar=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r,i){var a,s,o=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.next=3,kr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(s=e.sent)&&sr(t,"multi-factor-auth-required",{_serverResponse:s}),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)}))),Ar.apply(this,arguments)}function Or(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Er(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Nr=function(){function e(t){var n=this;(0,s.Z)(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(or(n.auth,"network-request-failed"))}),Ir.get())}))}return(0,o.Z)(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Mr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=or(e,t,r);return i.customData._tokenResponse=n,i}function Pr(e,t){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lr(e,t){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(IQ){}}function Br(){return Br=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i,a,s,o,u=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=Zt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,hr((a=Gr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),s="object"===typeof a.firebase?a.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Zr(zr(a.auth_time)),issuedAtTime:Zr(zr(a.iat)),expirationTime:Zr(zr(a.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Br.apply(this,arguments)}function zr(e){return 1e3*Number(e)}function Gr(e){var t=e.split("."),n=(0,i.Z)(t,3),r=n[0],a=n[1],s=n[2];if(void 0===r||void 0===a||void 0===s)return ar("JWT malformed, contained fewer than 3 sections"),null;try{var o=mt(a);return o?JSON.parse(o):(ar("Failed to decode base64 JWT payload"),null)}catch(IQ){return ar("Caught error parsing JWT payload as JSON",null===IQ||void 0===IQ?void 0:IQ.toString()),null}}function Hr(e,t){return jr.apply(this,arguments)}function jr(){return jr=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ct&&Vr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),jr.apply(this,arguments)}function Vr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Wr=function(){function e(t){(0,s.Z)(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return(0,o.Z)(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout((0,ht.Z)((0,ct.Z)().mark((function t(){return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Yr=function(){function e(t,n){(0,s.Z)(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return(0,o.Z)(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Zr(this.lastLoginAt),this.creationTime=Zr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function qr(e){return Xr.apply(this,arguments)}function Xr(){return Xr=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i,a,s,o,u,l,c,h,p;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Hr(t,Lr(r,{idToken:i}));case 6:hr(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),s=a.users[0],t._notifyReloadListener(s),o=(null===(n=s.providerUserInfo)||void 0===n?void 0:n.length)?s.providerUserInfo.map((function(e){var t=e.providerId,n=$n(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=Qr(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!l&&c,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new Yr(s.createdAt,s.lastLoginAt),isAnonymous:h},Object.assign(t,p);case 17:case"end":return e.stop()}}),e)}))),Xr.apply(this,arguments)}function Kr(){return(Kr=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Zt(t),e.next=3,qr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat((0,a.Z)(n),(0,a.Z)(t))}function Jr(e,t){return $r.apply(this,arguments)}function $r(){return $r=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rr(t,{},(0,ht.Z)((0,ct.Z)().mark((function e(){var r,i,a,s,o,u;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Mt({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,s=i.apiKey,o=Or(t,a,"/v1/token","key=".concat(s)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",xr.fetch()(o,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),$r.apply(this,arguments)}var ei=function(){function e(){(0,s.Z)(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return(0,o.Z)(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){hr(e.idToken,"internal-error"),hr("undefined"!==typeof e.idToken,"internal-error"),hr("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Gr(e);return hr(t,"internal-error"),hr("undefined"!==typeof t.exp,"internal-error"),hr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],hr(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jr(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,s=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(s));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return pr("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,s=new e;return r&&(hr("string"===typeof r,"internal-error",{appName:t}),s.refreshToken=r),i&&(hr("string"===typeof i,"internal-error",{appName:t}),s.accessToken=i),a&&(hr("number"===typeof a,"internal-error",{appName:t}),s.expirationTime=a),s}}]),e}();function ti(e,t){hr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ni=function(){function e(t){(0,s.Z)(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,o=$n(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?(0,a.Z)(o.providerData):[],this.metadata=new Yr(o.createdAt||void 0,o.lastLoginAt||void 0)}return(0,o.Z)(e,[{key:"getIdToken",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(hr(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Br.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Kr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(hr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){hr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,qr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Hr(this,Pr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,s,o,u,l,c,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,p=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,d=null!==(s=n.photoURL)&&void 0!==s?s:void 0,v=null!==(o=n.tenantId)&&void 0!==o?o:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(l=n.createdAt)&&void 0!==l?l:void 0,g=null!==(c=n.lastLoginAt)&&void 0!==c?c:void 0,_=n.uid,T=n.emailVerified,E=n.isAnonymous,x=n.providerData,b=n.stsTokenManager;hr(_&&b,t,"internal-error");var I=ei.fromJSON(this.name,b);hr("string"===typeof _,t,"internal-error"),ti(h,t.name),ti(p,t.name),hr("boolean"===typeof T,t,"internal-error"),hr("boolean"===typeof E,t,"internal-error"),ti(f,t.name),ti(d,t.name),ti(v,t.name),ti(m,t.name),ti(y,t.name),ti(g,t.name);var w=new e({uid:_,auth:t,email:p,emailVerified:T,displayName:h,isAnonymous:E,photoURL:d,phoneNumber:f,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(w.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(w._redirectEventId=m),w}},{key:"_fromIdTokenResponse",value:function(){var t=(0,ht.Z)((0,ct.Z)().mark((function t(n,r){var i,a,s,o=arguments;return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=o.length>2&&void 0!==o[2]&&o[2],(a=new ei).updateFromServerResponse(r),s=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,qr(s);case 6:return t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),ri=function(){function e(){(0,s.Z)(this,e),this.type="NONE",this.storage={}}return(0,o.Z)(e,[{key:"_isAvailable",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();ri.type="NONE";var ii=ri;function ai(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var si=function(){function e(t,n,r){(0,s.Z)(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=ai(this.userKey,a.apiKey,o),this.fullPersistenceKey=ai("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return(0,o.Z)(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ni._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=(0,ht.Z)((0,ct.Z)().mark((function t(n,r){var i,a,s,o,u,l,c,h,p,f,d,v=arguments;return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(vr(ii),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),s=a[0]||vr(ii),o=ai(i,n.config.apiKey,n.name),u=null,l=b(r),t.prev=10,l.s();case 12:if((c=l.n()).done){t.next=29;break}return h=c.value,t.prev=14,t.next=17,h._get(o);case 17:if(!(p=t.sent)){t.next=23;break}return f=ni._fromJSON(n,p),h!==s&&(u=f),s=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),l.e(t.t1);case 34:return t.prev=34,l.f(),t.finish(34);case 37:if(d=a.filter((function(e){return e._shouldAllowMigration})),s._shouldAllowMigration&&d.length){t.next=40;break}return t.abrupt("return",new e(s,n,i));case 40:if(s=d[0],!u){t.next=44;break}return t.next=44,s._set(o,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===s){e.next=8;break}return e.prev=1,e.next=4,t._remove(o);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(s,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function oi(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(hi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ui(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(fi(t))return"Blackberry";if(di(t))return"Webos";if(li(t))return"Safari";if((t.includes("chrome/")||ci(t))&&!t.includes("edge/"))return"Chrome";if(pi(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function ui(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/firefox\//i.test(e)}function li(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ci(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/crios\//i.test(e)}function hi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/iemobile/i.test(e)}function pi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/android/i.test(e)}function fi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/blackberry/i.test(e)}function di(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/webos/i.test(e)}function vi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function mi(){return function(){var e=wt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function yi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return vi(e)||pi(e)||di(e)||fi(e)||/windows phone/i.test(e)||hi(e)}function gi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=oi(wt());break;case"Worker":t="".concat(oi(wt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(On,"/").concat(r)}var _i=function(){function e(t){(0,s.Z)(this,e),this.auth=t,this.queue=[]}return(0,o.Z)(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(IQ){r(IQ)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i,a,s,o,u;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=b(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),s=b(n);try{for(s.s();!(o=s.n()).done;){u=o.value;try{u()}catch(jQ){}}}catch(l){s.e(l)}finally{s.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ti=function(){function e(t,n,r){(0,s.Z)(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xi(this),this.idTokenSubscription=new xi(this),this.beforeStateQueue=new _i(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return(0,o.Z)(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=vr(t)),this._initializationPromise=this.queue((0,ht.Z)((0,ct.Z)().mark((function r(){var i,a;return(0,ct.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,si.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i,a,s,o,u;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return s=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,o=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,s&&s!==o||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return hr(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Zt(t):null)&&hr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r=this,i=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&hr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue((0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue((0,ht.Z)((0,ct.Z)().mark((function n(){return(0,ct.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(vr(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Dt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return hr(n=t&&vr(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,si.create(this,[vr(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue((0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n=this;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue((0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return hr(s,this,"internal-error"),s.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return hr(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gi(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,at.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ei(e){return Zt(e)}var xi=function(){function e(t){var n=this;(0,s.Z)(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new Lt(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return(0,o.Z)(e,[{key:"next",get:function(){return hr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function bi(e,t,n){var r=Ei(e);hr(r._canInitEmulator,r,"emulator-config-failed"),hr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var a=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Ii(t),o=function(e){var t=Ii(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){var s=a[1];return{host:s,port:wi(r.substr(s.length+1))}}var o=r.split(":"),u=(0,i.Z)(o,2);return{host:u[0],port:wi(u[1])}}(t),u=o.host,l=o.port,c=null===l?"":":".concat(l);r.config.emulator={url:"".concat(s,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ii(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function wi(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var ki=function(){function e(t,n){(0,s.Z)(this,e),this.providerId=t,this.signInMethod=n}return(0,o.Z)(e,[{key:"toJSON",value:function(){return pr("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return pr("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return pr("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return pr("not implemented")}}]),e}();function Si(e,t){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ci(e,t){return Di.apply(this,arguments)}function Di(){return(Di=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v1/accounts:signInWithPassword",wr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ai(e,t){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v1/accounts:signInWithEmailLink",wr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ni(e,t){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v1/accounts:signInWithEmailLink",wr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pi=function(e){l(n,e);var t=v(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,s.Z)(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return(0,o.Z)(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ci(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ai(t,{email:this._email,oobCode:this._password}));case 5:sr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Si(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ni(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:sr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(ki);function Fi(e,t){return Li.apply(this,arguments)}function Li(){return(Li=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v1/accounts:signInWithIdp",wr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ui=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return(0,o.Z)(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Fi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Fi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Fi(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):sr("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=$n(t,["providerId","signInMethod"]);if(!r||!i)return null;var s=new n(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}}]),n}(ki);function Zi(e,t){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kr(t,"POST","/v1/accounts:sendVerificationCode",wr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zi(){return(zi=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v1/accounts:signInWithPhoneNumber",wr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gi(){return(Gi=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dr(t,"POST","/v1/accounts:signInWithPhoneNumber",wr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Mr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hi=(0,at.Z)({},"USER_NOT_FOUND","user-not-found");function ji(){return(ji=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Dr(t,"POST","/v1/accounts:signInWithPhoneNumber",wr(t,r),Hi));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vi=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,"phone","phone")).params=e,r}return(0,o.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return zi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Gi.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ji.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,s=t.temporaryProof;return i||r||a||s?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:s}):null}}]),n}(ki);var Wi=function(){function e(t){var n,r,i,a,o,u;(0,s.Z)(this,e);var l=Pt(Ft(t)),c=null!==(n=l.apiKey)&&void 0!==n?n:null,h=null!==(r=l.oobCode)&&void 0!==r?r:null,p=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=l.mode)&&void 0!==i?i:null);hr(c&&h&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=h,this.continueUrl=null!==(a=l.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=l.tenantId)&&void 0!==u?u:null}return(0,o.Z)(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Pt(Ft(e)).link,n=t?Pt(Ft(t)).deep_link_id:null,r=Pt(Ft(e)).deep_link_id;return(r?Pt(Ft(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Dx){return null}}}]),e}();var Yi=function(){function e(){(0,s.Z)(this,e),this.providerId=e.PROVIDER_ID}return(0,o.Z)(e,null,[{key:"credential",value:function(e,t){return Pi._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Wi.parseLink(t);return hr(n,"argument-error"),Pi._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Yi.PROVIDER_ID="password",Yi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Yi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var qi=function(){function e(t){(0,s.Z)(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return(0,o.Z)(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Xi=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.apply(this,arguments)).scopes=[],e}return(0,o.Z)(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return(0,a.Z)(this.scopes)}}]),n}(qi),Ki=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.call(this,"facebook.com")}return(0,o.Z)(n,null,[{key:"credential",value:function(e){return Ui._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Dx){return null}}}]),n}(Xi);Ki.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ki.PROVIDER_ID="facebook.com";var Qi=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return(0,o.Z)(n,null,[{key:"credential",value:function(e,t){return Ui._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Dx){return null}}}]),n}(Xi);Qi.GOOGLE_SIGN_IN_METHOD="google.com",Qi.PROVIDER_ID="google.com";var Ji=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.call(this,"github.com")}return(0,o.Z)(n,null,[{key:"credential",value:function(e){return Ui._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Dx){return null}}}]),n}(Xi);Ji.GITHUB_SIGN_IN_METHOD="github.com",Ji.PROVIDER_ID="github.com";var $i=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.call(this,"twitter.com")}return(0,o.Z)(n,null,[{key:"credential",value:function(e,t){return Ui._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Dx){return null}}}]),n}(Xi);$i.TWITTER_SIGN_IN_METHOD="twitter.com",$i.PROVIDER_ID="twitter.com";var ea=function(){function e(t){(0,s.Z)(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return(0,o.Z)(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=(0,ht.Z)((0,ct.Z)().mark((function t(n,r,i){var a,s,o,u,l=arguments;return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],t.next=3,ni._fromIdTokenResponse(n,i,a);case 3:return s=t.sent,o=ta(i),u=new e({user:s,providerId:o,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=(0,ht.Z)((0,ct.Z)().mark((function t(n,r,i){var a;return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ta(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ta(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var na=function(e){l(n,e);var t=v(n);function n(e,r,i,a){var o,u;return(0,s.Z)(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(f(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return(0,o.Z)(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ct);function ra(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw na._fromErrorAndOperation(e,n,t,r);throw n}))}function ia(e,t){return aa.apply(this,arguments)}function aa(){return aa=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Hr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ea._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),aa.apply(this,arguments)}function sa(e,t){return oa.apply(this,arguments)}function oa(){return oa=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s,o,u,l=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Hr(t,ra(i,a,n,t),r);case 6:return hr((s=e.sent).idToken,i,"internal-error"),hr(o=Gr(s.idToken),i,"internal-error"),u=o.sub,hr(t.uid===u,i,"user-mismatch"),e.abrupt("return",ea._forOperation(t,a,s));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&sr(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),oa.apply(this,arguments)}function ua(e,t){return la.apply(this,arguments)}function la(){return la=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s,o=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],i="signIn",e.next=4,ra(t,i,n);case 4:return a=e.sent,e.next=7,ea._fromIdTokenResponse(t,i,a);case 7:if(s=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(s.user);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)}))),la.apply(this,arguments)}function ca(e,t){return kr(e,"POST","/v2/accounts/mfaEnrollment:start",wr(e,t))}new WeakMap;var ha="__sak",pa=function(){function e(t,n){(0,s.Z)(this,e),this.storageRetriever=t,this.type=n}return(0,o.Z)(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ha,"1"),this.storage.removeItem(ha),Promise.resolve(!0)):Promise.resolve(!1)}catch(Dx){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var fa=10,da=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=wt();return li(e)||vi(e)}()&&function(){try{return!(!window||window===window.top)}catch(IQ){return!1}}(),e.fallbackToPolling=yi(),e._shouldAllowMigration=!0,e}return(0,o.Z)(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},s=this.storage.getItem(r);mi()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,fa):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,r){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt(c(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt(c(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt(c(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(pa);da.type="LOCAL";var va=da,ma=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return(0,o.Z)(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(pa);ma.type="SESSION";var ya=ma;function ga(e){return Promise.all(e.map(function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var _a=function(){function e(t){(0,s.Z)(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return(0,o.Z)(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i,a,s,o,u,l;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,s=r.data,null===(o=this.handlersMap[a])||void 0===o?void 0:o.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(o).map(function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,s));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,ga(u);case 9:l=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:l});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ta(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}_a.receivers=[];var Ea=function(){function e(t){(0,s.Z)(this,e),this.target=t,this.handlers=new Set}return(0,o.Z)(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s,o=this,u=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var l=Ta("",20);i.port1.start();var c=setTimeout((function(){u(new Error("unsupported_event"))}),r);s={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===l)switch(n.data.status){case"ack":clearTimeout(c),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(c),clearTimeout(a),u(new Error("invalid_response"))}}},o.handlers.add(s),i.port1.addEventListener("message",s.onMessage),o.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])})).finally((function(){s&&o.removeMessageHandler(s)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function xa(){return window}function ba(){return"undefined"!==typeof xa().WorkerGlobalScope&&"function"===typeof xa().importScripts}function Ia(){return wa.apply(this,arguments)}function wa(){return(wa=(0,ht.Z)((0,ct.Z)().mark((function e(){var t;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function ka(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Sa="firebaseLocalStorageDb",Ra=1,Ca="firebaseLocalStorage",Da="fbase_key",Aa=function(){function e(t){(0,s.Z)(this,e),this.request=t}return(0,o.Z)(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Oa(e,t){return e.transaction([Ca],t?"readwrite":"readonly").objectStore(Ca)}function Na(){var e=indexedDB.deleteDatabase(Sa);return new Aa(e).toPromise()}function Ma(){var e=indexedDB.open(Sa,Ra);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Ca,{keyPath:Da})}catch(IQ){n(IQ)}})),e.addEventListener("success",(0,ht.Z)((0,ct.Z)().mark((function n(){var r;return(0,ct.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Ca)){n.next=12;break}return r.close(),n.next=5,Na();case 5:return n.t0=t,n.next=8,Ma();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Pa(e,t,n){return Fa.apply(this,arguments)}function Fa(){return Fa=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r){var i,a;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Oa(t,!0).put((i={},(0,at.Z)(i,Da,n),(0,at.Z)(i,"value",r),i)),e.abrupt("return",new Aa(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function La(e,t){return Ua.apply(this,arguments)}function Ua(){return Ua=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oa(t,!1).get(n),e.next=3,new Aa(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Ua.apply(this,arguments)}function Za(e,t){var n=Oa(e,!0).delete(t);return new Aa(n).toPromise()}var Ba=function(){function e(){(0,s.Z)(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return(0,o.Z)(e,[{key:"_openDb",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ma();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t=this;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=_a._getInstance(ba()?self:null),this.receiver._subscribe("keyChanged",function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(n,r){var i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ia();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Ea(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&ka()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ma();case 5:return t=e.sent,e.next=8,Pa(t,ha,"1");case 8:return e.next=10,Za(t,ha);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r=this;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite((0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Pa(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return La(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n=this;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite((0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Za(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,n,r,i,a,s,o,u,l,c,h;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Oa(e,!1).getAll();return new Aa(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=b(t);try{for(i.s();!(a=i.n()).done;)s=a.value,o=s.fbase_key,u=s.value,r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o))}catch(p){i.e(p)}finally{i.f()}for(l=0,c=Object.keys(this.localCache);l<c.length;l++)h=c[l],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,ht.Z)((0,ct.Z)().mark((function t(){return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ba.type="LOCAL";var za=Ba;function Ga(e,t){return kr(e,"POST","/v2/accounts/mfaSignIn:start",wr(e,t))}function Ha(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=or("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function ja(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}ja("rcb"),new Tr(3e4,6e4);var Va="recaptcha";function Wa(e,t,n){return Ya.apply(this,arguments)}function Ya(){return Ya=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r){var i,a,s,o,u,l,c,h,p;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,hr("string"===typeof a,t,"argument-error"),hr(r.type===Va,t,"argument-error"),!("session"in(s="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(o=s.session,!("phoneNumber"in s)){e.next=17;break}return hr("enroll"===o.type,t,"internal-error"),e.next=13,ca(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return hr("signin"===o.type,t,"internal-error"),hr(l=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Ga(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:a}});case 22:return c=e.sent,e.abrupt("return",c.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Zi(t,{phoneNumber:s.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,p=h.sessionInfo,e.abrupt("return",p);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Ya.apply(this,arguments)}var qa=function(){function e(t){(0,s.Z)(this,e),this.providerId=e.PROVIDER_ID,this.auth=Ei(t)}return(0,o.Z)(e,[{key:"verifyPhoneNumber",value:function(e,t){return Wa(this.auth,e,Zt(t))}}],[{key:"credential",value:function(e,t){return Vi._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Vi._fromTokenResponse(n,r):null}}]),e}();function Xa(e,t){return t?vr(t):(hr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}qa.PROVIDER_ID="phone",qa.PHONE_SIGN_IN_METHOD="phone";var Ka=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,"custom","custom")).params=e,r}return(0,o.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return Fi(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Fi(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Fi(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(ki);function Qa(e){return ua(e.auth,new Ka(e),e.bypassAuthState)}function Ja(e){var t=e.auth,n=e.user;return hr(n,t,"internal-error"),sa(n,new Ka(e),e.bypassAuthState)}function $a(e){return es.apply(this,arguments)}function es(){return(es=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,hr(r=t.user,n,"internal-error"),e.abrupt("return",ia(r,new Ka(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ts=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,s.Z)(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return(0,o.Z)(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=(0,ht.Z)((0,ct.Z)().mark((function t(n,r){return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i,a,s,o,u;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,s=t.error,o=t.type,!s){e.next=4;break}return this.reject(s),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(o)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qa;case"linkViaPopup":case"linkViaRedirect":return $a;case"reauthViaPopup":case"reauthViaRedirect":return Ja;default:sr(this.auth,"internal-error")}}},{key:"resolve",value:function(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),ns=new Tr(2e3,1e4);function rs(){return(rs=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r){var i,a,s;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ei(t),lr(t,n,qi),a=Xa(i,r),s=new is(i,"signInViaPopup",n,a),e.abrupt("return",s.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var is=function(e){l(n,e);var t=v(n);function n(e,r,i,a,o){var u;return(0,s.Z)(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=f(u),u}return(0,o.Z)(n,[{key:"executeNotNull",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return hr(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,n=this;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fr(1===this.filter.length,"Popup operations only handle one event"),t=Ta(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(or(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(or(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(or(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,ns.get())}()}}]),n}(ts);is.currentPopupAction=null;var as="pendingRedirect",ss=new Map,os=function(e){l(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,s.Z)(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return(0,o.Z)(n,[{key:"execute",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ss.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,us(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,lt(c(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:ss.set(this.auth._key(),t);case 21:return this.bypassAuthState||ss.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",lt(c(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",lt(c(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(ts);function us(e,t){return ls.apply(this,arguments)}function ls(){return(ls=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ps(n),i=hs(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cs(e,t){ss.set(e._key(),t)}function hs(e){return vr(e._redirectPersistence)}function ps(e){return ai(as,e.config.apiKey,e.name)}function fs(e,t){return ds.apply(this,arguments)}function ds(){return ds=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s,o,u=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=Ei(t),a=Xa(i,n),s=new os(i,a,r),e.next=6,s.execute();case 6:if(!(o=e.sent)||r){e.next=13;break}return delete o.user._redirectEventId,e.next=11,i._persistUserIfCurrent(o.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)}))),ds.apply(this,arguments)}var vs=function(){function e(t){(0,s.Z)(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return(0,o.Z)(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ys(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ys(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(or(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ms(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(ms(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function ms(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function ys(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function gs(e){return _s.apply(this,arguments)}function _s(){return _s=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",kr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),_s.apply(this,arguments)}var Ts=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Es=/^https?/;function xs(){return(xs=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i,a,s;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,gs(t);case 4:n=e.sent,r=n.authorizedDomains,i=b(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(s=a.value,e.prev=11,!bs(s)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:sr(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function bs(e){var t=mr(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Es.test(r))return!1;if(Ts.test(e))return i===e;var s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}var Is=new Tr(3e4,6e4);function ws(){var e=xa().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=(0,a.Z)(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var ks=null;function Ss(e){return ks=ks||function(e){return new Promise((function(t,n){var r,i,a;function s(){ws(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){ws(),n(or(e,"network-request-failed"))},timeout:Is.get()})}if(null===(i=null===(r=xa().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=xa().gapi)||void 0===a?void 0:a.load)){var o=ja("iframefcb");return xa()[o]=function(){gapi.load?s():n(or(e,"network-request-failed"))},Ha("https://apis.google.com/js/api.js?onload=".concat(o)).catch((function(e){return n(e)}))}s()}})).catch((function(e){throw ks=null,e}))}(e),ks}var Rs=new Tr(5e3,15e3),Cs="__/auth/iframe",Ds="emulator/auth/iframe",As={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Os=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ns(e){var t=e.config;hr(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Er(t,Ds):"https://".concat(e.config.authDomain,"/").concat(Cs),r={apiKey:t.apiKey,appName:e.name,v:On},i=Os.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Mt(r).slice(1))}function Ms(e){return Ps.apply(this,arguments)}function Ps(){return Ps=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ss(t);case 2:return n=e.sent,hr(r=xa().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Ns(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:As,dontclear:!0},(function(e){return new Promise(function(){var n=(0,ht.Z)((0,ct.Z)().mark((function n(r,i){var a,s,o;return(0,ct.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=function(){xa().clearTimeout(s),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=or(t,"network-request-failed"),s=xa().setTimeout((function(){i(a)}),Rs.get()),e.ping(o).then(o,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Ps.apply(this,arguments)}var Fs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ls=500,Us=600,Zs="_blank",Bs="http://localhost",zs=function(){function e(t){(0,s.Z)(this,e),this.window=t,this.associatedEvent=null}return(0,o.Z)(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(IQ){}}}]),e}();function Gs(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ls,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Us,s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",l=Object.assign(Object.assign({},Fs),{width:r.toString(),height:a.toString(),top:s,left:o}),c=wt().toLowerCase();n&&(u=ci(c)?Zs:n),ui(c)&&(t=t||Bs,l.scrollbars="yes");var h=Object.entries(l).reduce((function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1];return"".concat(e).concat(r,"=").concat(a,",")}),"");if(function(){var e;return vi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new zs(null);var p=window.open(t||"",u,h);hr(p,e,"popup-blocked");try{p.focus()}catch(IQ){}return new zs(p)}var Hs="__/auth/handler",js="emulator/auth/handler";function Vs(e,t,n,r,a,s){hr(e.config.authDomain,e,"auth-domain-config-required"),hr(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:On,eventId:a};if(t instanceof qi){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,l=Object.entries(s||{});u<l.length;u++){var c=(0,i.Z)(l[u],2),h=c[0],p=c[1];o[h]=p}}if(t instanceof Xi){var f=t.getScopes().filter((function(e){return""!==e}));f.length>0&&(o.scopes=f.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,v=0,m=Object.keys(d);v<m.length;v++){var y=m[v];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Hs);return Er(t,js)}(e),"?").concat(Mt(d).slice(1))}var Ws="webStorageSupport",Ys=function(){function e(){(0,s.Z)(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ya,this._completeRedirectFn=fs,this._overrideRedirectResult=cs}return(0,o.Z)(e,[{key:"_openPopup",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r,i){var a,s;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),s=Vs(t,n,r,mr(),i),e.abrupt("return",Gs(t,s,Ta()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r,i){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Vs(t,n,r,mr(),i),xa().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(fr(a,"If manager is not set, promise should be"),a)}var s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch((function(){delete t.eventManagers[n]})),s}},{key:"initAndGetManager",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ms(t);case 2:return n=e.sent,r=new vs(t),n.register("authEvent",(function(e){return hr(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Ws,{type:Ws},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ws];void 0!==i&&t(!!i),sr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return xs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return yi()||li()||vi()}}]),e}(),qs=Ys,Xs=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,"phone")).credential=e,r}return(0,o.Z)(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return kr(e,"POST","/v2/accounts/mfaEnrollment:finalize",wr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return kr(e,"POST","/v2/accounts/mfaSignIn:finalize",wr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){(0,s.Z)(this,e),this.factorId=t}return(0,o.Z)(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return pr("unexpected MultiFactorSessionType")}}}]),e}());(function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,null,[{key:"assertion",value:function(e){return Xs._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var Ks="@firebase/auth",Qs="0.21.4",Js=function(){function e(t){(0,s.Z)(this,e),this.auth=t,this.internalListeners=new Map}return(0,o.Z)(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){hr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var $s,eo=xt("authIdTokenMaxAge")||300,to=null,no=function(e){return function(){var t=(0,ht.Z)((0,ct.Z)().mark((function t(n){var r,i,a;return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>eo)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,to!==a){t.next=12;break}return t.abrupt("return");case 12:return to=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function ro(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn(),t=Rn(e,"auth");if(t.isInitialized())return t.getImmediate();var n=function(e,t){var n=Rn(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(Ot(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;sr(r,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:qs,persistence:[za,va,ya]}),r=xt("authTokenSyncURL");if(r){var i=no(r);!function(e,t,n){Zt(e).beforeAuthStateChanged(t,n)}(n,i,(function(){return i(n.currentUser)})),function(e,t,n,r){Zt(e).onIdTokenChanged(t,n,r)}(n,(function(e){return i(e)}))}var a=_t("auth");return a&&bi(n,"http://".concat(a)),n}$s="Browser",Sn(new Bt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,s=a.apiKey,o=a.authDomain;return function(e,t){hr(s&&!s.includes(":"),"invalid-api-key",{appName:e.name}),hr(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:e.name});var r={apiKey:s,authDomain:o,clientPlatform:$s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gi($s)},i=new Ti(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Sn(new Bt("auth-internal",(function(e){return function(e){return new Js(e)}(Ei(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Pn(Ks,Qs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}($s)),Pn(Ks,Qs,"esm2017");for(var io,ao=!1,so=function(){var t=ro(),n=Kie()[1],r=function(){!function(e,t,n,r){Zt(e).onAuthStateChanged(t,n,r)}(t,(function(e){var t=e?ot({},e):null;n({type:"UPDATE_USER",payload:t})}))};return(0,e.useEffect)((function(){ao||(r(),ao=!0)}),[]),(0,Je.jsx)(Je.Fragment,{})},oo="135",uo={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},lo=0,co=1,ho=2,po=1,fo=2,vo=3,mo=0,yo=1,go=2,_o=0,To=1,Eo=2,xo=3,bo=4,Io=5,wo=100,ko=101,So=102,Ro=103,Co=104,Do=200,Ao=201,Oo=202,No=203,Mo=204,Po=205,Fo=206,Lo=207,Uo=208,Zo=209,Bo=210,zo=0,Go=1,Ho=2,jo=3,Vo=4,Wo=5,Yo=6,qo=7,Xo=0,Ko=1,Qo=2,Jo=0,$o=1,eu=2,tu=3,nu=4,ru=5,iu=301,au=302,su=303,ou=304,uu=306,lu=307,cu=1e3,hu=1001,pu=1002,fu=1003,du=1004,vu=1005,mu=1006,yu=1007,gu=1008,_u=1009,Tu=1010,Eu=1011,xu=1012,bu=1013,Iu=1014,wu=1015,ku=1016,Su=1017,Ru=1018,Cu=1019,Du=1020,Au=1021,Ou=1022,Nu=1023,Mu=1024,Pu=1025,Fu=Nu,Lu=1026,Uu=1027,Zu=1028,Bu=1029,zu=1030,Gu=1031,Hu=1032,ju=1033,Vu=33776,Wu=33777,Yu=33778,qu=33779,Xu=35840,Ku=35841,Qu=35842,Ju=35843,$u=36196,el=37492,tl=37496,nl=37808,rl=37809,il=37810,al=37811,sl=37812,ol=37813,ul=37814,ll=37815,cl=37816,hl=37817,pl=37818,fl=37819,dl=37820,vl=37821,ml=36492,yl=37840,gl=37841,_l=37842,Tl=37843,El=37844,xl=37845,bl=37846,Il=37847,wl=37848,kl=37849,Sl=37850,Rl=37851,Cl=37852,Dl=37853,Al=2201,Ol=2300,Nl=2301,Ml=2302,Pl=2400,Fl=2401,Ll=2402,Ul=2500,Zl=2501,Bl=2,zl=3e3,Gl=3001,Hl=3007,jl=3002,Vl=3004,Wl=3005,Yl=3006,ql=3200,Xl=3201,Kl=0,Ql=1,Jl=7680,$l=519,ec=35044,tc=35048,nc="300 es",rc=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),ic=[],ac=0;ac<256;ac++)ic[ac]=(ac<16?"0":"")+ac.toString(16);var sc=1234567,oc=Math.PI/180,uc=180/Math.PI;function lc(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(ic[255&e]+ic[e>>8&255]+ic[e>>16&255]+ic[e>>24&255]+"-"+ic[255&t]+ic[t>>8&255]+"-"+ic[t>>16&15|64]+ic[t>>24&255]+"-"+ic[63&n|128]+ic[n>>8&255]+"-"+ic[n>>16&255]+ic[n>>24&255]+ic[255&r]+ic[r>>8&255]+ic[r>>16&255]+ic[r>>24&255]).toUpperCase()}function cc(e,t,n){return Math.max(t,Math.min(n,e))}function hc(e,t){return(e%t+t)%t}function pc(e,t,n){return(1-n)*e+n*t}function fc(e){return 0===(e&e-1)&&0!==e}function dc(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function vc(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var mc=Object.freeze({__proto__:null,DEG2RAD:oc,RAD2DEG:uc,generateUUID:lc,clamp:cc,euclideanModulo:hc,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:pc,damp:function(e,t,n,r){return pc(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(hc(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(sc=e%2147483647),((sc=16807*sc%2147483647)-1)/2147483646},degToRad:function(e){return e*oc},radToDeg:function(e){return e*uc},isPowerOfTwo:fc,ceilPowerOfTwo:dc,floorPowerOfTwo:vc,setQuaternionFromProperEuler:function(e,t,n,r,i){var a=Math.cos,s=Math.sin,o=a(n/2),u=s(n/2),l=a((t+r)/2),c=s((t+r)/2),h=a((t-r)/2),p=s((t-r)/2),f=a((r-t)/2),d=s((r-t)/2);switch(i){case"XYX":e.set(o*c,u*h,u*p,o*l);break;case"YZY":e.set(u*p,o*c,u*h,o*l);break;case"ZXZ":e.set(u*h,u*p,o*c,o*l);break;case"XZX":e.set(o*c,u*d,u*f,o*l);break;case"YXY":e.set(u*f,o*c,u*d,o*l);break;case"ZYZ":e.set(u*d,u*f,o*c,o*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}}),yc=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,s.Z)(this,t),this.x=e,this.y=n}return(0,o.Z)(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:e,value:(0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);yc.prototype.isVector2=!0;var gc=function(){function e(){(0,s.Z)(this,e),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return(0,o.Z)(e,[{key:"set",value:function(e,t,n,r,i,a,s,o,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=s,l[3]=t,l[4]=i,l[5]=o,l[6]=n,l[7]=a,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[3],o=n[6],u=n[1],l=n[4],c=n[7],h=n[2],p=n[5],f=n[8],d=r[0],v=r[3],m=r[6],y=r[1],g=r[4],_=r[7],T=r[2],E=r[5],x=r[8];return i[0]=a*d+s*y+o*T,i[3]=a*v+s*g+o*E,i[6]=a*m+s*_+o*x,i[1]=u*d+l*y+c*T,i[4]=u*v+l*g+c*E,i[7]=u*m+l*_+c*x,i[2]=h*d+p*y+f*T,i[5]=h*v+p*g+f*E,i[8]=h*m+p*_+f*x,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],u=e[7],l=e[8];return t*a*l-t*s*u-n*i*l+n*s*o+r*i*u-r*a*o}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],u=e[7],l=e[8],c=l*a-s*u,h=s*o-l*i,p=u*i-a*o,f=t*c+n*h+r*p;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var d=1/f;return e[0]=c*d,e[1]=(r*u-l*n)*d,e[2]=(s*n-r*a)*d,e[3]=h*d,e[4]=(l*t-r*o)*d,e[5]=(r*i-s*t)*d,e[6]=p*d,e[7]=(n*o-u*t)*d,e[8]=(a*t-n*i)*d,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,s){var o=Math.cos(i),u=Math.sin(i);return this.set(n*o,n*u,-n*(o*a+u*s)+a+e,-r*u,r*o,-r*(-u*a+o*s)+s+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],s=r[6],o=r[1],u=r[4],l=r[7];return r[0]=t*i+n*o,r[3]=t*a+n*u,r[6]=t*s+n*l,r[1]=-n*i+t*o,r[4]=-n*a+t*u,r[7]=-n*s+t*l,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();function _c(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}gc.prototype.isMatrix3=!0;var Tc;Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function Ec(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function xc(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=3735928559^n,i=1103547991^n,a=0;a<e.length;a++)t=e.charCodeAt(a),r=Math.imul(r^t,2654435761),i=Math.imul(i^t,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),4294967296*(2097151&(i=Math.imul(i^i>>>16,2246822507)^Math.imul(r^r>>>13,3266489909)))+(r>>>0)}var bc=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Tc&&(Tc=Ec("canvas")),Tc.width=e.width,Tc.height=e.height;var n=Tc.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Tc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}]),e}(),Ic=0,wc=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hu,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:hu,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:mu,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:gu,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Nu,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:_u,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:zl;return(0,s.Z)(this,n),e=t.call(this),Object.defineProperty(f(e),"id",{value:Ic++}),e.uuid=lc(),e.name="",e.image=r,e.mipmaps=[],e.mapping=i,e.wrapS=a,e.wrapT=o,e.magFilter=u,e.minFilter=l,e.anisotropy=p,e.format=c,e.internalFormat=null,e.type=h,e.offset=new yc(0,0),e.repeat=new yc(1,1),e.center=new yc(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new gc,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=d,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e}return(0,o.Z)(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=lc()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var a=0,s=r.length;a<s;a++)r[a].isDataTexture?i.push(kc(r[a].image)):i.push(kc(r[a]))}else i=kc(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case cu:e.x=e.x-Math.floor(e.x);break;case hu:e.x=e.x<0?0:1;break;case pu:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case cu:e.y=e.y-Math.floor(e.y);break;case hu:e.y=e.y<0?0:1;break;case pu:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(rc);function kc(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?bc.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}wc.DEFAULT_IMAGE=void 0,wc.DEFAULT_MAPPING=300,wc.prototype.isTexture=!0;var Sc=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,s.Z)(this,t),this.x=e,this.y=n,this.z=r,this.w=i}return(0,o.Z)(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=.01,s=.1,o=e.elements,u=o[0],l=o[4],c=o[8],h=o[1],p=o[5],f=o[9],d=o[2],v=o[6],m=o[10];if(Math.abs(l-h)<a&&Math.abs(c-d)<a&&Math.abs(f-v)<a){if(Math.abs(l+h)<s&&Math.abs(c+d)<s&&Math.abs(f+v)<s&&Math.abs(u+p+m-3)<s)return this.set(1,0,0,0),this;t=Math.PI;var y=(u+1)/2,g=(p+1)/2,_=(m+1)/2,T=(l+h)/4,E=(c+d)/4,x=(f+v)/4;return y>g&&y>_?y<a?(n=0,r=.707106781,i=.707106781):(r=T/(n=Math.sqrt(y)),i=E/n):g>_?g<a?(n=.707106781,r=0,i=.707106781):(n=T/(r=Math.sqrt(g)),i=x/r):_<a?(n=.707106781,r=.707106781,i=0):(n=E/(i=Math.sqrt(_)),r=x/i),this.set(n,r,i,t),this}var b=Math.sqrt((v-f)*(v-f)+(c-d)*(c-d)+(h-l)*(h-l));return Math.abs(b)<.001&&(b=1),this.x=(v-f)/b,this.y=(c-d)/b,this.z=(h-l)/b,this.w=Math.acos((u+p+m-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:e,value:(0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);Sc.prototype.isVector4=!0;var Rc=function(e){l(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,s.Z)(this,n),(i=t.call(this)).width=e,i.height=r,i.depth=1,i.scissor=new Sc(0,0,e,r),i.scissorTest=!1,i.viewport=new Sc(0,0,e,r),i.texture=new wc(void 0,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),i.texture.isRenderTargetTexture=!0,i.texture.image={width:e,height:r,depth:1},i.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,i.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,i.texture.minFilter=void 0!==a.minFilter?a.minFilter:mu,i.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,i.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,i.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,i}return(0,o.Z)(n,[{key:"setTexture",value:function(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}},{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=ot({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(rc);Rc.prototype.isWebGLRenderTarget=!0;var Cc=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;(0,s.Z)(this,n);var o=(a=t.call(this,e,r)).texture;a.texture=[];for(var u=0;u<i;u++)a.texture[u]=o.clone();return a}return(0,o.Z)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}]),n}(Rc);Cc.prototype.isWebGLMultipleRenderTargets=!0;var Dc=function(e){l(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,s.Z)(this,n),(i=t.call(this,e,r,a)).samples=4,i.ignoreDepthForMultisampleCopy=void 0===a.ignoreDepth||a.ignoreDepth,i.useRenderToTexture=void 0!==a.useRenderToTexture&&a.useRenderToTexture,i.useRenderbuffer=!1===i.useRenderToTexture,i}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}]),n}(Rc);Dc.prototype.isWebGLMultisampleRenderTarget=!0;var Ac=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,s.Z)(this,e),this._x=t,this._y=n,this._z=r,this._w=i}return(0,o.Z)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e._order,s=Math.cos,o=Math.sin,u=s(n/2),l=s(r/2),c=s(i/2),h=o(n/2),p=o(r/2),f=o(i/2);switch(a){case"XYZ":this._x=h*l*c+u*p*f,this._y=u*p*c-h*l*f,this._z=u*l*f+h*p*c,this._w=u*l*c-h*p*f;break;case"YXZ":this._x=h*l*c+u*p*f,this._y=u*p*c-h*l*f,this._z=u*l*f-h*p*c,this._w=u*l*c+h*p*f;break;case"ZXY":this._x=h*l*c-u*p*f,this._y=u*p*c+h*l*f,this._z=u*l*f+h*p*c,this._w=u*l*c-h*p*f;break;case"ZYX":this._x=h*l*c-u*p*f,this._y=u*p*c+h*l*f,this._z=u*l*f-h*p*c,this._w=u*l*c+h*p*f;break;case"YZX":this._x=h*l*c+u*p*f,this._y=u*p*c+h*l*f,this._z=u*l*f-h*p*c,this._w=u*l*c-h*p*f;break;case"XZY":this._x=h*l*c-u*p*f,this._y=u*p*c-h*l*f,this._z=u*l*f+h*p*c,this._w=u*l*c+h*p*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],s=t[5],o=t[9],u=t[2],l=t[6],c=t[10],h=n+s+c;if(h>0){var p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(l-o)*p,this._y=(i-u)*p,this._z=(a-r)*p}else if(n>s&&n>c){var f=2*Math.sqrt(1+n-s-c);this._w=(l-o)/f,this._x=.25*f,this._y=(r+a)/f,this._z=(i+u)/f}else if(s>c){var d=2*Math.sqrt(1+s-n-c);this._w=(i-u)/d,this._x=(r+a)/d,this._y=.25*d,this._z=(o+l)/d}else{var v=2*Math.sqrt(1+c-n-s);this._w=(a-r)/v,this._x=(i+u)/v,this._y=(o+l)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(cc(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,s=t._x,o=t._y,u=t._z,l=t._w;return this._x=n*l+a*s+r*u-i*o,this._y=r*l+a*o+i*s-n*u,this._z=i*l+a*u+n*o-r*s,this._w=a*l-n*s-r*o-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,s=a*e._w+n*e._x+r*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var o=1-s*s;if(o<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(o),c=Math.atan2(l,s),h=Math.sin((1-t)*c)/l,p=Math.sin(t*c)/l;return this._w=a*h+this._w*p,this._x=n*h+this._x*p,this._y=r*h+this._y*p,this._z=i*h+this._z*p,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}},{key:"slerpFlat",value:function(e,t,n,r,i,a,s){var o=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[a+0],p=i[a+1],f=i[a+2],d=i[a+3];if(0===s)return e[t+0]=o,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===s)return e[t+0]=h,e[t+1]=p,e[t+2]=f,void(e[t+3]=d);if(c!==d||o!==h||u!==p||l!==f){var v=1-s,m=o*h+u*p+l*f+c*d,y=m>=0?1:-1,g=1-m*m;if(g>Number.EPSILON){var _=Math.sqrt(g),T=Math.atan2(_,m*y);v=Math.sin(v*T)/_,s=Math.sin(s*T)/_}var E=s*y;if(o=o*v+h*E,u=u*v+p*E,l=l*v+f*E,c=c*v+d*E,v===1-s){var x=1/Math.sqrt(o*o+u*u+l*l+c*c);o*=x,u*=x,l*=x,c*=x}}e[t]=o,e[t+1]=u,e[t+2]=l,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var s=n[r],o=n[r+1],u=n[r+2],l=n[r+3],c=i[a],h=i[a+1],p=i[a+2],f=i[a+3];return e[t]=s*f+l*c+o*p-u*h,e[t+1]=o*f+l*h+u*c-s*p,e[t+2]=u*f+l*p+s*h-o*c,e[t+3]=l*f-s*c-o*h-u*p,e}}]),e}();Ac.prototype.isQuaternion=!0;var Oc=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,s.Z)(this,t),this.x=e,this.y=n,this.z=r}return(0,o.Z)(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Mc.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Mc.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,s=e.z,o=e.w,u=o*t+a*r-s*n,l=o*n+s*t-i*r,c=o*r+i*n-a*t,h=-i*t-a*n-s*r;return this.x=u*o+h*-i+l*-s-c*-a,this.y=l*o+h*-a+c*-i-u*-s,this.z=c*o+h*-s+u*-a-l*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,s=t.y,o=t.z;return this.x=r*o-i*s,this.y=i*a-n*o,this.z=n*s-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Nc.copy(this).projectOnVector(e),this.sub(Nc)}},{key:"reflect",value:function(e){return this.sub(Nc.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(cc(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:e,value:(0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);Oc.prototype.isVector3=!0;var Nc=new Oc,Mc=new Ac,Pc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Oc(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Oc(-1/0,-1/0,-1/0);(0,s.Z)(this,e),this.min=t,this.max=n}return(0,o.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,s=-1/0,o=0,u=e.length;o<u;o+=3){var l=e[o],c=e[o+1],h=e[o+2];l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>a&&(a=c),h>s&&(s=h)}return this.min.set(t,n,r),this.max.set(i,a,s),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,s=-1/0,o=0,u=e.count;o<u;o++){var l=e.getX(o),c=e.getY(o),h=e.getZ(o);l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>a&&(a=c),h>s&&(s=h)}return this.min.set(t,n,r),this.max.set(i,a,s),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Lc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){return this.makeEmpty(),this.expandByObject(e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Uc.copy(t.boundingBox),Uc.applyMatrix4(e.matrixWorld),this.union(Uc));for(var n=e.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Lc),Lc.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Vc),Wc.subVectors(this.max,Vc),Zc.subVectors(e.a,Vc),Bc.subVectors(e.b,Vc),zc.subVectors(e.c,Vc),Gc.subVectors(Bc,Zc),Hc.subVectors(zc,Bc),jc.subVectors(Zc,zc);var t=[0,-Gc.z,Gc.y,0,-Hc.z,Hc.y,0,-jc.z,jc.y,Gc.z,0,-Gc.x,Hc.z,0,-Hc.x,jc.z,0,-jc.x,-Gc.y,Gc.x,0,-Hc.y,Hc.x,0,-jc.y,jc.x,0];return!!Xc(t,Zc,Bc,zc,Wc)&&(!!Xc(t=[1,0,0,0,1,0,0,0,1],Zc,Bc,zc,Wc)&&(Yc.crossVectors(Gc,Hc),Xc(t=[Yc.x,Yc.y,Yc.z],Zc,Bc,zc,Wc)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Lc.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Lc).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Fc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Fc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Fc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Fc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Fc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Fc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Fc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Fc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Fc)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();Pc.prototype.isBox3=!0;var Fc=[new Oc,new Oc,new Oc,new Oc,new Oc,new Oc,new Oc,new Oc],Lc=new Oc,Uc=new Pc,Zc=new Oc,Bc=new Oc,zc=new Oc,Gc=new Oc,Hc=new Oc,jc=new Oc,Vc=new Oc,Wc=new Oc,Yc=new Oc,qc=new Oc;function Xc(e,t,n,r,i){for(var a=0,s=e.length-3;a<=s;a+=3){qc.fromArray(e,a);var o=i.x*Math.abs(qc.x)+i.y*Math.abs(qc.y)+i.z*Math.abs(qc.z),u=t.dot(qc),l=n.dot(qc),c=r.dot(qc);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>o)return!1}return!0}var Kc=new Pc,Qc=new Oc,Jc=new Oc,$c=new Oc,eh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Oc,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,s.Z)(this,e),this.center=t,this.radius=n}return(0,o.Z)(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):Kc.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){$c.subVectors(e,this.center);var t=$c.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add($c.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(e){return Jc.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Qc.copy(e.center).add(Jc)),this.expandByPoint(Qc.copy(e.center).sub(Jc)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),th=new Oc,nh=new Oc,rh=new Oc,ih=new Oc,ah=new Oc,sh=new Oc,oh=new Oc,uh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Oc,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Oc(0,0,-1);(0,s.Z)(this,e),this.origin=t,this.direction=n}return(0,o.Z)(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,th)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=th.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(th.copy(this.direction).multiplyScalar(t).add(this.origin),th.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){nh.copy(e).add(t).multiplyScalar(.5),rh.copy(t).sub(e).normalize(),ih.copy(this.origin).sub(nh);var i,a,s,o,u=.5*e.distanceTo(t),l=-this.direction.dot(rh),c=ih.dot(this.direction),h=-ih.dot(rh),p=ih.lengthSq(),f=Math.abs(1-l*l);if(f>0)if(a=l*c-h,o=u*f,(i=l*h-c)>=0)if(a>=-o)if(a<=o){var d=1/f;s=(i*=d)*(i+l*(a*=d)+2*c)+a*(l*i+a+2*h)+p}else a=u,s=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+p;else a=-u,s=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+p;else a<=-o?s=-(i=Math.max(0,-(-l*u+c)))*i+(a=i>0?-u:Math.min(Math.max(-u,-h),u))*(a+2*h)+p:a<=o?(i=0,s=(a=Math.min(Math.max(-u,-h),u))*(a+2*h)+p):s=-(i=Math.max(0,-(l*u+c)))*i+(a=i>0?u:Math.min(Math.max(-u,-h),u))*(a+2*h)+p;else a=l>0?-u:u,s=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+p;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(rh).multiplyScalar(a).add(nh),s}},{key:"intersectSphere",value:function(e,t){th.subVectors(e.center,this.origin);var n=th.dot(this.direction),r=th.dot(th)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),s=n-a,o=n+a;return s<0&&o<0?null:s<0?this.at(o,t):this.at(s,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,a,s,o,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),l>=0?(i=(e.min.y-h.y)*l,a=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,a=(e.min.y-h.y)*l),n>a||i>r?null:((i>n||n!==n)&&(n=i),(a<r||r!==r)&&(r=a),c>=0?(s=(e.min.z-h.z)*c,o=(e.max.z-h.z)*c):(s=(e.max.z-h.z)*c,o=(e.min.z-h.z)*c),n>o||s>r?null:((s>n||n!==n)&&(n=s),(o<r||r!==r)&&(r=o),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,th)}},{key:"intersectTriangle",value:function(e,t,n,r,i){ah.subVectors(t,e),sh.subVectors(n,e),oh.crossVectors(ah,sh);var a,s=this.direction.dot(oh);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}ih.subVectors(this.origin,e);var o=a*this.direction.dot(sh.crossVectors(ih,sh));if(o<0)return null;var u=a*this.direction.dot(ah.cross(ih));if(u<0)return null;if(o+u>s)return null;var l=-a*ih.dot(oh);return l<0?null:this.at(l/s,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),lh=function(){function e(){(0,s.Z)(this,e),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return(0,o.Z)(e,[{key:"set",value:function(e,t,n,r,i,a,s,o,u,l,c,h,p,f,d,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=a,m[9]=s,m[13]=o,m[2]=u,m[6]=l,m[10]=c,m[14]=h,m[3]=p,m[7]=f,m[11]=d,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/ch.setFromMatrixColumn(e,0).length(),i=1/ch.setFromMatrixColumn(e,1).length(),a=1/ch.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=a*l,p=a*c,f=s*l,d=s*c;t[0]=o*l,t[4]=-o*c,t[8]=u,t[1]=p+f*u,t[5]=h-d*u,t[9]=-s*o,t[2]=d-h*u,t[6]=f+p*u,t[10]=a*o}else if("YXZ"===e.order){var v=o*l,m=o*c,y=u*l,g=u*c;t[0]=v+g*s,t[4]=y*s-m,t[8]=a*u,t[1]=a*c,t[5]=a*l,t[9]=-s,t[2]=m*s-y,t[6]=g+v*s,t[10]=a*o}else if("ZXY"===e.order){var _=o*l,T=o*c,E=u*l,x=u*c;t[0]=_-x*s,t[4]=-a*c,t[8]=E+T*s,t[1]=T+E*s,t[5]=a*l,t[9]=x-_*s,t[2]=-a*u,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){var b=a*l,I=a*c,w=s*l,k=s*c;t[0]=o*l,t[4]=w*u-I,t[8]=b*u+k,t[1]=o*c,t[5]=k*u+b,t[9]=I*u-w,t[2]=-u,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){var S=a*o,R=a*u,C=s*o,D=s*u;t[0]=o*l,t[4]=D-S*c,t[8]=C*c+R,t[1]=c,t[5]=a*l,t[9]=-s*l,t[2]=-u*l,t[6]=R*c+C,t[10]=S-D*c}else if("XZY"===e.order){var A=a*o,O=a*u,N=s*o,M=s*u;t[0]=o*l,t[4]=-c,t[8]=u*l,t[1]=A*c+M,t[5]=a*l,t[9]=O*c-N,t[2]=N*c-O,t[6]=s*l,t[10]=M*c+A}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(ph,e,fh)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return mh.subVectors(e,t),0===mh.lengthSq()&&(mh.z=1),mh.normalize(),dh.crossVectors(n,mh),0===dh.lengthSq()&&(1===Math.abs(n.z)?mh.x+=1e-4:mh.z+=1e-4,mh.normalize(),dh.crossVectors(n,mh)),dh.normalize(),vh.crossVectors(mh,dh),r[0]=dh.x,r[4]=vh.x,r[8]=mh.x,r[1]=dh.y,r[5]=vh.y,r[9]=mh.y,r[2]=dh.z,r[6]=vh.z,r[10]=mh.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[4],o=n[8],u=n[12],l=n[1],c=n[5],h=n[9],p=n[13],f=n[2],d=n[6],v=n[10],m=n[14],y=n[3],g=n[7],_=n[11],T=n[15],E=r[0],x=r[4],b=r[8],I=r[12],w=r[1],k=r[5],S=r[9],R=r[13],C=r[2],D=r[6],A=r[10],O=r[14],N=r[3],M=r[7],P=r[11],F=r[15];return i[0]=a*E+s*w+o*C+u*N,i[4]=a*x+s*k+o*D+u*M,i[8]=a*b+s*S+o*A+u*P,i[12]=a*I+s*R+o*O+u*F,i[1]=l*E+c*w+h*C+p*N,i[5]=l*x+c*k+h*D+p*M,i[9]=l*b+c*S+h*A+p*P,i[13]=l*I+c*R+h*O+p*F,i[2]=f*E+d*w+v*C+m*N,i[6]=f*x+d*k+v*D+m*M,i[10]=f*b+d*S+v*A+m*P,i[14]=f*I+d*R+v*O+m*F,i[3]=y*E+g*w+_*C+T*N,i[7]=y*x+g*k+_*D+T*M,i[11]=y*b+g*S+_*A+T*P,i[15]=y*I+g*R+_*O+T*F,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],s=e[5],o=e[9],u=e[13],l=e[2],c=e[6],h=e[10],p=e[14];return e[3]*(+i*o*c-r*u*c-i*s*h+n*u*h+r*s*p-n*o*p)+e[7]*(+t*o*p-t*u*h+i*a*h-r*a*p+r*u*l-i*o*l)+e[11]*(+t*u*c-t*s*p-i*a*c+n*a*p+i*s*l-n*u*l)+e[15]*(-r*s*l-t*o*c+t*s*h+r*a*c-n*a*h+n*o*l)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],u=e[7],l=e[8],c=e[9],h=e[10],p=e[11],f=e[12],d=e[13],v=e[14],m=e[15],y=c*v*u-d*h*u+d*o*p-s*v*p-c*o*m+s*h*m,g=f*h*u-l*v*u-f*o*p+a*v*p+l*o*m-a*h*m,_=l*d*u-f*c*u+f*s*p-a*d*p-l*s*m+a*c*m,T=f*c*o-l*d*o-f*s*h+a*d*h+l*s*v-a*c*v,E=t*y+n*g+r*_+i*T;if(0===E)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var x=1/E;return e[0]=y*x,e[1]=(d*h*i-c*v*i-d*r*p+n*v*p+c*r*m-n*h*m)*x,e[2]=(s*v*i-d*o*i+d*r*u-n*v*u-s*r*m+n*o*m)*x,e[3]=(c*o*i-s*h*i-c*r*u+n*h*u+s*r*p-n*o*p)*x,e[4]=g*x,e[5]=(l*v*i-f*h*i+f*r*p-t*v*p-l*r*m+t*h*m)*x,e[6]=(f*o*i-a*v*i-f*r*u+t*v*u+a*r*m-t*o*m)*x,e[7]=(a*h*i-l*o*i+l*r*u-t*h*u-a*r*p+t*o*p)*x,e[8]=_*x,e[9]=(f*c*i-l*d*i-f*n*p+t*d*p+l*n*m-t*c*m)*x,e[10]=(a*d*i-f*s*i+f*n*u-t*d*u-a*n*m+t*s*m)*x,e[11]=(l*s*i-a*c*i-l*n*u+t*c*u+a*n*p-t*s*p)*x,e[12]=T*x,e[13]=(l*d*r-f*c*r+f*n*h-t*d*h-l*n*v+t*c*v)*x,e[14]=(f*s*r-a*d*r-f*n*o+t*d*o+a*n*v-t*s*v)*x,e[15]=(a*c*r-l*s*r+l*n*o-t*c*o-a*n*h+t*s*h)*x,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,s=e.y,o=e.z,u=i*a,l=i*s;return this.set(u*a+n,u*s-r*o,u*o+r*s,0,u*s+r*o,l*s+n,l*o-r*a,0,u*o-r*s,l*o+r*a,i*o*o+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,s=t._z,o=t._w,u=i+i,l=a+a,c=s+s,h=i*u,p=i*l,f=i*c,d=a*l,v=a*c,m=s*c,y=o*u,g=o*l,_=o*c,T=n.x,E=n.y,x=n.z;return r[0]=(1-(d+m))*T,r[1]=(p+_)*T,r[2]=(f-g)*T,r[3]=0,r[4]=(p-_)*E,r[5]=(1-(h+m))*E,r[6]=(v+y)*E,r[7]=0,r[8]=(f+g)*x,r[9]=(v-y)*x,r[10]=(1-(h+d))*x,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=ch.set(r[0],r[1],r[2]).length(),a=ch.set(r[4],r[5],r[6]).length(),s=ch.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],hh.copy(this);var o=1/i,u=1/a,l=1/s;return hh.elements[0]*=o,hh.elements[1]*=o,hh.elements[2]*=o,hh.elements[4]*=u,hh.elements[5]*=u,hh.elements[6]*=u,hh.elements[8]*=l,hh.elements[9]*=l,hh.elements[10]*=l,t.setFromRotationMatrix(hh),n.x=i,n.y=a,n.z=s,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,o=2*i/(t-e),u=2*i/(n-r),l=(t+e)/(t-e),c=(n+r)/(n-r),h=-(a+i)/(a-i),p=-2*a*i/(a-i);return s[0]=o,s[4]=0,s[8]=l,s[12]=0,s[1]=0,s[5]=u,s[9]=c,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=p,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var s=this.elements,o=1/(t-e),u=1/(n-r),l=1/(a-i),c=(t+e)*o,h=(n+r)*u,p=(a+i)*l;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-c,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*l,s[14]=-p,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}();lh.prototype.isMatrix4=!0;var ch=new Oc,hh=new lh,ph=new Oc(0,0,0),fh=new Oc(1,1,1),dh=new Oc,vh=new Oc,mh=new Oc,yh=new lh,gh=new Ac,_h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;(0,s.Z)(this,e),this._x=t,this._y=n,this._z=r,this._order=i}return(0,o.Z)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],a=r[4],s=r[8],o=r[1],u=r[5],l=r[9],c=r[2],h=r[6],p=r[10];switch(t){case"XYZ":this._y=Math.asin(cc(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,p),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-cc(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(o,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(cc(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(o,i));break;case"ZYX":this._y=Math.asin(-cc(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(o,i)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(cc(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-cc(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-l,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return yh.makeRotationFromQuaternion(e),this.setFromRotationMatrix(yh,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return gh.setFromEuler(this),this.setFromQuaternion(gh,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"toVector3",value:function(e){return e?e.set(this._x,this._y,this._z):new Oc(this._x,this._y,this._z)}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}]),e}();_h.prototype.isEuler=!0,_h.DefaultOrder="XYZ",_h.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Th=function(){function e(){(0,s.Z)(this,e),this.mask=1}return(0,o.Z)(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}(),Eh=0,xh=new Oc,bh=new Ac,Ih=new lh,wh=new Oc,kh=new Oc,Sh=new Oc,Rh=new Ac,Ch=new Oc(1,0,0),Dh=new Oc(0,1,0),Ah=new Oc(0,0,1),Oh={type:"added"},Nh={type:"removed"},Mh=function(e){l(n,e);var t=v(n);function n(){var e;(0,s.Z)(this,n),e=t.call(this),Object.defineProperty(f(e),"id",{value:Eh++}),e.uuid=lc(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var r=new Oc,i=new _h,a=new Ac,o=new Oc(1,1,1);return i._onChange((function(){a.setFromEuler(i,!1)})),a._onChange((function(){i.setFromQuaternion(a,void 0,!1)})),Object.defineProperties(f(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new lh},normalMatrix:{value:new gc}}),e.matrix=new lh,e.matrixWorld=new lh,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.layers=new Th,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return(0,o.Z)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return bh.setFromAxisAngle(e,t),this.quaternion.multiply(bh),this}},{key:"rotateOnWorldAxis",value:function(e,t){return bh.setFromAxisAngle(e,t),this.quaternion.premultiply(bh),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Ch,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Dh,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Ah,e)}},{key:"translateOnAxis",value:function(e,t){return xh.copy(e).applyQuaternion(this.quaternion),this.position.add(xh.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Ch,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Dh,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Ah,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(Ih.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?wh.copy(e):wh.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),kh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ih.lookAt(kh,wh,this.up):Ih.lookAt(wh,kh,this.up),this.quaternion.setFromRotationMatrix(Ih),r&&(Ih.extractRotation(r.matrixWorld),bh.setFromRotationMatrix(Ih),this.quaternion.premultiply(bh.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Oh)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Nh)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(Nh)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),Ih.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Ih.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ih),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kh,e,Sh),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kh,Rh,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var s=a.shapes;if(Array.isArray(s))for(var o=0,u=s.length;o<u;o++){var l=s[o];i(e.shapes,l)}else i(e.shapes,s)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],h=0,p=this.material.length;h<p;h++)c.push(i(e.materials,this.material[h]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var f=0;f<this.children.length;f++)r.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var d=0;d<this.animations.length;d++){var v=this.animations[d];r.animations.push(i(e.animations,v))}}if(t){var m=b(e.geometries),y=b(e.materials),g=b(e.textures),_=b(e.images),T=b(e.shapes),E=b(e.skeletons),x=b(e.animations);m.length>0&&(n.geometries=m),y.length>0&&(n.materials=y),g.length>0&&(n.textures=g),_.length>0&&(n.images=_),T.length>0&&(n.shapes=T),E.length>0&&(n.skeletons=E),x.length>0&&(n.animations=x)}return n.object=r,n;function b(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(rc);Mh.DefaultUp=new Oc(0,1,0),Mh.DefaultMatrixAutoUpdate=!0,Mh.prototype.isObject3D=!0;var Ph=new Oc,Fh=new Oc,Lh=new Oc,Uh=new Oc,Zh=new Oc,Bh=new Oc,zh=new Oc,Gh=new Oc,Hh=new Oc,jh=new Oc,Vh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Oc,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Oc,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Oc;(0,s.Z)(this,e),this.a=t,this.b=n,this.c=r}return(0,o.Z)(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Ph.subVectors(this.c,this.b),Fh.subVectors(this.a,this.b),.5*Ph.cross(Fh).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,a){return e.getUV(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,a=this.b,s=this.c;Zh.subVectors(a,i),Bh.subVectors(s,i),Gh.subVectors(e,i);var o=Zh.dot(Gh),u=Bh.dot(Gh);if(o<=0&&u<=0)return t.copy(i);Hh.subVectors(e,a);var l=Zh.dot(Hh),c=Bh.dot(Hh);if(l>=0&&c<=l)return t.copy(a);var h=o*c-l*u;if(h<=0&&o>=0&&l<=0)return n=o/(o-l),t.copy(i).addScaledVector(Zh,n);jh.subVectors(e,s);var p=Zh.dot(jh),f=Bh.dot(jh);if(f>=0&&p<=f)return t.copy(s);var d=p*u-o*f;if(d<=0&&u>=0&&f<=0)return r=u/(u-f),t.copy(i).addScaledVector(Bh,r);var v=l*f-p*c;if(v<=0&&c-l>=0&&p-f>=0)return zh.subVectors(s,a),r=(c-l)/(c-l+(p-f)),t.copy(a).addScaledVector(zh,r);var m=1/(v+d+h);return n=d*m,r=h*m,t.copy(i).addScaledVector(Zh,n).addScaledVector(Bh,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),Ph.subVectors(e,t),r.cross(Ph);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){Ph.subVectors(r,t),Fh.subVectors(n,t),Lh.subVectors(e,t);var a=Ph.dot(Ph),s=Ph.dot(Fh),o=Ph.dot(Lh),u=Fh.dot(Fh),l=Fh.dot(Lh),c=a*u-s*s;if(0===c)return i.set(-2,-1,-1);var h=1/c,p=(u*o-s*l)*h,f=(a*l-s*o)*h;return i.set(1-p-f,f,p)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,Uh),Uh.x>=0&&Uh.y>=0&&Uh.x+Uh.y<=1}},{key:"getUV",value:function(e,t,n,r,i,a,s,o){return this.getBarycoord(e,t,n,r,Uh),o.set(0,0),o.addScaledVector(i,Uh.x),o.addScaledVector(a,Uh.y),o.addScaledVector(s,Uh.z),o}},{key:"isFrontFacing",value:function(e,t,n,r){return Ph.subVectors(n,t),Fh.subVectors(e,t),Ph.cross(Fh).dot(r)<0}}]),e}(),Wh=0,Yh=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),e=t.call(this),Object.defineProperty(f(e),"id",{value:Wh++}),e.uuid=lc(),e.name="",e.type="Material",e.fog=!0,e.blending=To,e.side=mo,e.vertexColors=!1,e.opacity=1,e.format=Nu,e.transparent=!1,e.blendSrc=Mo,e.blendDst=Po,e.blendEquation=wo,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=jo,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=$l,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=Jl,e.stencilZFail=Jl,e.stencilZPass=Jl,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return(0,o.Z)(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==To&&(n.blending=this.blending),this.side!==mo&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==Nu&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(rc);Yh.prototype.isMaterial=!0;var qh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Xh={h:0,s:0,l:0},Kh={h:0,s:0,l:0};function Qh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Jh(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function $h(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var ep=function(){function e(t,n,r){return(0,s.Z)(this,e),void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}return(0,o.Z)(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:"setRGB",value:function(e,t,n){return this.r=e,this.g=t,this.b=n,this}},{key:"setHSL",value:function(e,t,n){if(e=hc(e,1),t=cc(t,0,1),n=cc(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Qh(i,r,e+1/3),this.g=Qh(i,r,e),this.b=Qh(i,r,e-1/3)}return this}},{key:"setStyle",value:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){var s=parseFloat(r[1])/360,o=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(s,o,u)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var t=qh[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copyGammaToLinear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}},{key:"copyLinearToGamma",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}},{key:"convertGammaToLinear",value:function(e){return this.copyGammaToLinear(this,e),this}},{key:"convertLinearToGamma",value:function(e){return this.copyLinearToGamma(this,e),this}},{key:"copySRGBToLinear",value:function(e){return this.r=Jh(e.r),this.g=Jh(e.g),this.b=Jh(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=$h(e.r),this.g=$h(e.g),this.b=$h(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t,n,r=this.r,i=this.g,a=this.b,s=Math.max(r,i,a),o=Math.min(r,i,a),u=(o+s)/2;if(o===s)t=0,n=0;else{var l=s-o;switch(n=u<=.5?l/(s+o):l/(2-s-o),s){case r:t=(i-a)/l+(i<a?6:0);break;case i:t=(a-r)/l+2;break;case a:t=(r-i)/l+4}t/=6}return e.h=t,e.s=n,e.l=u,e}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(Xh),Xh.h+=e,Xh.s+=t,Xh.l+=n,this.setHSL(Xh.h,Xh.s,Xh.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(Xh),e.getHSL(Kh);var n=pc(Xh.h,Kh.h,t),r=pc(Xh.s,Kh.s,t),i=pc(Xh.l,Kh.l,t);return this.setHSL(n,r,i),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),e}();ep.NAMES=qh,ep.prototype.isColor=!0,ep.prototype.r=1,ep.prototype.g=1,ep.prototype.b=1;var tp=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).type="MeshBasicMaterial",r.color=new ep(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=Xo,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(Yh);tp.prototype.isMeshBasicMaterial=!0;var np=new Oc,rp=new yc,ip=function(){function e(t,n,r){if((0,s.Z)(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===r,this.usage=ec,this.updateRange={offset:0,count:-1},this.version=0}return(0,o.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new ep),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new yc),t[n++]=a.x,t[n++]=a.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new Oc),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new Sc),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)rp.fromBufferAttribute(this,t),rp.applyMatrix3(e),this.setXY(t,rp.x,rp.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)np.fromBufferAttribute(this,r),np.applyMatrix3(e),this.setXYZ(r,np.x,np.y,np.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)np.x=this.getX(t),np.y=this.getY(t),np.z=this.getZ(t),np.applyMatrix4(e),this.setXYZ(t,np.x,np.y,np.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)np.x=this.getX(t),np.y=this.getY(t),np.z=this.getZ(t),np.applyNormalMatrix(e),this.setXYZ(t,np.x,np.y,np.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)np.x=this.getX(t),np.y=this.getY(t),np.z=this.getZ(t),np.transformDirection(e),this.setXYZ(t,np.x,np.y,np.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==ec&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}();ip.prototype.isBufferAttribute=!0;var ap=function(e){l(n,e);var t=v(n);function n(e,r,i){return(0,s.Z)(this,n),t.call(this,new Uint16Array(e),r,i)}return(0,o.Z)(n)}(ip),sp=function(e){l(n,e);var t=v(n);function n(e,r,i){return(0,s.Z)(this,n),t.call(this,new Uint32Array(e),r,i)}return(0,o.Z)(n)}(ip);(function(e){l(n,e);var t=v(n);function n(e,r,i){return(0,s.Z)(this,n),t.call(this,new Uint16Array(e),r,i)}return(0,o.Z)(n)})(ip).prototype.isFloat16BufferAttribute=!0;var op=function(e){l(n,e);var t=v(n);function n(e,r,i){return(0,s.Z)(this,n),t.call(this,new Float32Array(e),r,i)}return(0,o.Z)(n)}(ip),up=0,lp=new lh,cp=new Mh,hp=new Oc,pp=new Pc,fp=new Pc,dp=new Oc,vp=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),e=t.call(this),Object.defineProperty(f(e),"id",{value:up++}),e.uuid=lc(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return(0,o.Z)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(_c(e)>65535?sp:ap)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new gc).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return lp.makeRotationFromQuaternion(e),this.applyMatrix4(lp),this}},{key:"rotateX",value:function(e){return lp.makeRotationX(e),this.applyMatrix4(lp),this}},{key:"rotateY",value:function(e){return lp.makeRotationY(e),this.applyMatrix4(lp),this}},{key:"rotateZ",value:function(e){return lp.makeRotationZ(e),this.applyMatrix4(lp),this}},{key:"translate",value:function(e,t,n){return lp.makeTranslation(e,t,n),this.applyMatrix4(lp),this}},{key:"scale",value:function(e,t,n){return lp.makeScale(e,t,n),this.applyMatrix4(lp),this}},{key:"lookAt",value:function(e){return cp.lookAt(e),cp.updateMatrix(),this.applyMatrix4(cp.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(hp).negate(),this.translate(hp.x,hp.y,hp.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new op(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Pc);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Oc(-1/0,-1/0,-1/0),new Oc(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];pp.setFromBufferAttribute(i),this.morphTargetsRelative?(dp.addVectors(this.boundingBox.min,pp.min),this.boundingBox.expandByPoint(dp),dp.addVectors(this.boundingBox.max,pp.max),this.boundingBox.expandByPoint(dp)):(this.boundingBox.expandByPoint(pp.min),this.boundingBox.expandByPoint(pp.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new eh);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Oc,1/0);if(e){var n=this.boundingSphere.center;if(pp.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];fp.setFromBufferAttribute(a),this.morphTargetsRelative?(dp.addVectors(pp.min,fp.min),pp.expandByPoint(dp),dp.addVectors(pp.max,fp.max),pp.expandByPoint(dp)):(pp.expandByPoint(fp.min),pp.expandByPoint(fp.max))}pp.getCenter(n);for(var s=0,o=0,u=e.count;o<u;o++)dp.fromBufferAttribute(e,o),s=Math.max(s,n.distanceToSquared(dp));if(t)for(var l=0,c=t.length;l<c;l++)for(var h=t[l],p=this.morphTargetsRelative,f=0,d=h.count;f<d;f++)dp.fromBufferAttribute(h,f),p&&(hp.fromBufferAttribute(e,f),dp.add(hp)),s=Math.max(s,n.distanceToSquared(dp));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,s=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new ip(new Float32Array(4*s),4));for(var o=t.tangent.array,u=[],l=[],c=0;c<s;c++)u[c]=new Oc,l[c]=new Oc;var h=new Oc,p=new Oc,f=new Oc,d=new yc,v=new yc,m=new yc,y=new Oc,g=new Oc,_=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(var T=0,E=_.length;T<E;++T)for(var x=_[T],b=x.start,I=b,w=b+x.count;I<w;I+=3)F(n[I+0],n[I+1],n[I+2]);for(var k=new Oc,S=new Oc,R=new Oc,C=new Oc,D=0,A=_.length;D<A;++D)for(var O=_[D],N=O.start,M=N,P=N+O.count;M<P;M+=3)L(n[M+0]),L(n[M+1]),L(n[M+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function F(e,t,n){h.fromArray(r,3*e),p.fromArray(r,3*t),f.fromArray(r,3*n),d.fromArray(a,2*e),v.fromArray(a,2*t),m.fromArray(a,2*n),p.sub(h),f.sub(h),v.sub(d),m.sub(d);var i=1/(v.x*m.y-m.x*v.y);isFinite(i)&&(y.copy(p).multiplyScalar(m.y).addScaledVector(f,-v.y).multiplyScalar(i),g.copy(f).multiplyScalar(v.x).addScaledVector(p,-m.x).multiplyScalar(i),u[e].add(y),u[t].add(y),u[n].add(y),l[e].add(g),l[t].add(g),l[n].add(g))}function L(e){R.fromArray(i,3*e),C.copy(R);var t=u[e];k.copy(t),k.sub(R.multiplyScalar(R.dot(t))).normalize(),S.crossVectors(C,t);var n=S.dot(l[e])<0?-1:1;o[4*e]=k.x,o[4*e+1]=k.y,o[4*e+2]=k.z,o[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new ip(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new Oc,s=new Oc,o=new Oc,u=new Oc,l=new Oc,c=new Oc,h=new Oc,p=new Oc;if(e)for(var f=0,d=e.count;f<d;f+=3){var v=e.getX(f+0),m=e.getX(f+1),y=e.getX(f+2);a.fromBufferAttribute(t,v),s.fromBufferAttribute(t,m),o.fromBufferAttribute(t,y),h.subVectors(o,s),p.subVectors(a,s),h.cross(p),u.fromBufferAttribute(n,v),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,y),u.add(h),l.add(h),c.add(h),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(y,c.x,c.y,c.z)}else for(var g=0,_=t.count;g<_;g+=3)a.fromBufferAttribute(t,g+0),s.fromBufferAttribute(t,g+1),o.fromBufferAttribute(t,g+2),h.subVectors(o,s),p.subVectors(a,s),h.cross(p),n.setXYZ(g+0,h.x,h.y,h.z),n.setXYZ(g+1,h.x,h.y,h.z),n.setXYZ(g+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,a=e.attributes[r],s=a.array,o=a.itemSize*t,u=Math.min(s.length,i.length-o),l=0,c=o;l<u;l++,c++)i[c]=s[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)dp.fromBufferAttribute(e,t),dp.normalize(),e.setXYZ(t,dp.x,dp.y,dp.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),s=0,o=0,u=0,l=t.length;u<l;u++){s=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var c=0;c<r;c++)a[o++]=n[s++]}return new ip(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var a in i){var s=e(i[a],r);t.setAttribute(a,s)}var o=this.morphAttributes;for(var u in o){for(var l=[],c=o[u],h=0,p=c.length;h<p;h++){var f=e(c[h],r);l.push(f)}t.morphAttributes[u]=l}t.morphTargetsRelative=this.morphTargetsRelative;for(var d=this.groups,v=0,m=d.length;v<m;v++){var y=d[v];t.addGroup(y.start,y.count,y.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var s=i[a];e.data.attributes[a]=s.toJSON(e.data)}var o={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],h=[],p=0,f=c.length;p<f;p++){var d=c[p];h.push(d.toJSON(e.data))}h.length>0&&(o[l]=h,u=!0)}u&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(e.data.groups=JSON.parse(JSON.stringify(v)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(t))}var s=e.morphAttributes;for(var o in s){for(var u=[],l=s[o],c=0,h=l.length;c<h;c++)u.push(l[c].clone(t));this.morphAttributes[o]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var p=e.groups,f=0,d=p.length;f<d;f++){var v=p[f];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var y=e.boundingSphere;return null!==y&&(this.boundingSphere=y.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(rc);vp.prototype.isBufferGeometry=!0;var mp=new lh,yp=new uh,gp=new eh,_p=new Oc,Tp=new Oc,Ep=new Oc,xp=new Oc,bp=new Oc,Ip=new Oc,wp=new Oc,kp=new Oc,Sp=new Oc,Rp=new yc,Cp=new yc,Dp=new yc,Ap=new Oc,Op=new Oc,Np=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vp,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tp;return(0,s.Z)(this,n),(e=t.call(this)).type="Mesh",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var s=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}else{var o=e.morphTargets;void 0!==o&&o.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(e,t){var n,r=this.geometry,i=this.material,a=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),gp.copy(r.boundingSphere),gp.applyMatrix4(a),!1!==e.ray.intersectsSphere(gp)&&(mp.copy(a).invert(),yp.copy(e.ray).applyMatrix4(mp),null===r.boundingBox||!1!==yp.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var s=r.index,o=r.attributes.position,u=r.morphAttributes.position,l=r.morphTargetsRelative,c=r.attributes.uv,h=r.attributes.uv2,p=r.groups,f=r.drawRange;if(null!==s)if(Array.isArray(i))for(var d=0,v=p.length;d<v;d++)for(var m=p[d],y=i[m.materialIndex],g=Math.max(m.start,f.start),_=Math.min(s.count,Math.min(m.start+m.count,f.start+f.count));g<_;g+=3){var T=s.getX(g),E=s.getX(g+1),x=s.getX(g+2);(n=Mp(this,y,e,yp,o,u,l,c,h,T,E,x))&&(n.faceIndex=Math.floor(g/3),n.face.materialIndex=m.materialIndex,t.push(n))}else for(var b=Math.max(0,f.start),I=Math.min(s.count,f.start+f.count);b<I;b+=3){var w=s.getX(b),k=s.getX(b+1),S=s.getX(b+2);(n=Mp(this,i,e,yp,o,u,l,c,h,w,k,S))&&(n.faceIndex=Math.floor(b/3),t.push(n))}else if(void 0!==o)if(Array.isArray(i))for(var R=0,C=p.length;R<C;R++)for(var D=p[R],A=i[D.materialIndex],O=Math.max(D.start,f.start),N=Math.min(o.count,Math.min(D.start+D.count,f.start+f.count));O<N;O+=3){(n=Mp(this,A,e,yp,o,u,l,c,h,O,O+1,O+2))&&(n.faceIndex=Math.floor(O/3),n.face.materialIndex=D.materialIndex,t.push(n))}else for(var M=Math.max(0,f.start),P=Math.min(o.count,f.start+f.count);M<P;M+=3){(n=Mp(this,i,e,yp,o,u,l,c,h,M,M+1,M+2))&&(n.faceIndex=Math.floor(M/3),t.push(n))}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(Mh);function Mp(e,t,n,r,i,a,s,o,u,l,c,h){_p.fromBufferAttribute(i,l),Tp.fromBufferAttribute(i,c),Ep.fromBufferAttribute(i,h);var p=e.morphTargetInfluences;if(a&&p){wp.set(0,0,0),kp.set(0,0,0),Sp.set(0,0,0);for(var f=0,d=a.length;f<d;f++){var v=p[f],m=a[f];0!==v&&(xp.fromBufferAttribute(m,l),bp.fromBufferAttribute(m,c),Ip.fromBufferAttribute(m,h),s?(wp.addScaledVector(xp,v),kp.addScaledVector(bp,v),Sp.addScaledVector(Ip,v)):(wp.addScaledVector(xp.sub(_p),v),kp.addScaledVector(bp.sub(Tp),v),Sp.addScaledVector(Ip.sub(Ep),v)))}_p.add(wp),Tp.add(kp),Ep.add(Sp)}e.isSkinnedMesh&&(e.boneTransform(l,_p),e.boneTransform(c,Tp),e.boneTransform(h,Ep));var y=function(e,t,n,r,i,a,s,o){if(null===(t.side===yo?r.intersectTriangle(s,a,i,!0,o):r.intersectTriangle(i,a,s,t.side!==go,o)))return null;Op.copy(o),Op.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(Op);return u<n.near||u>n.far?null:{distance:u,point:Op.clone(),object:e}}(e,t,n,r,_p,Tp,Ep,Ap);if(y){o&&(Rp.fromBufferAttribute(o,l),Cp.fromBufferAttribute(o,c),Dp.fromBufferAttribute(o,h),y.uv=Vh.getUV(Ap,_p,Tp,Ep,Rp,Cp,Dp,new yc)),u&&(Rp.fromBufferAttribute(u,l),Cp.fromBufferAttribute(u,c),Dp.fromBufferAttribute(u,h),y.uv2=Vh.getUV(Ap,_p,Tp,Ep,Rp,Cp,Dp,new yc));var g={a:l,b:c,c:h,normal:new Oc,materialIndex:0};Vh.getNormal(_p,Tp,Ep,g.normal),y.face=g}return y}Np.prototype.isMesh=!0;var Pp=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;(0,s.Z)(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:i,depth:a,widthSegments:o,heightSegments:u,depthSegments:l};var c=f(e);o=Math.floor(o),u=Math.floor(u),l=Math.floor(l);var h=[],p=[],d=[],v=[],m=0,y=0;function g(e,t,n,r,i,a,s,o,u,l,f){for(var g=a/u,_=s/l,T=a/2,E=s/2,x=o/2,b=u+1,I=l+1,w=0,k=0,S=new Oc,R=0;R<I;R++)for(var C=R*_-E,D=0;D<b;D++){var A=D*g-T;S[e]=A*r,S[t]=C*i,S[n]=x,p.push(S.x,S.y,S.z),S[e]=0,S[t]=0,S[n]=o>0?1:-1,d.push(S.x,S.y,S.z),v.push(D/u),v.push(1-R/l),w+=1}for(var O=0;O<l;O++)for(var N=0;N<u;N++){var M=m+N+b*O,P=m+N+b*(O+1),F=m+(N+1)+b*(O+1),L=m+(N+1)+b*O;h.push(M,P,L),h.push(P,F,L),k+=6}c.addGroup(y,k,f),y+=k,m+=w}return g("z","y","x",-1,-1,a,i,r,l,u,0),g("z","y","x",1,-1,a,i,-r,l,u,1),g("x","z","y",1,1,r,a,i,o,l,2),g("x","z","y",1,-1,r,a,-i,o,l,3),g("x","y","z",1,-1,r,i,a,o,u,4),g("x","y","z",-1,-1,r,i,-a,o,u,5),e.setIndex(h),e.setAttribute("position",new op(p,3)),e.setAttribute("normal",new op(d,3)),e.setAttribute("uv",new op(v,2)),e}return(0,o.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(vp);function Fp(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function Lp(e){for(var t={},n=0;n<e.length;n++){var r=Fp(e[n]);for(var i in r)t[i]=r[i]}return t}var Up={clone:Fp,merge:Lp},Zp="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Bp="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",zp=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).type="ShaderMaterial",r.defines={},r.uniforms={},r.vertexShader=Zp,r.fragmentShader=Bp,r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(e)),r}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Fp(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=lt(c(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var s in this.extensions)!0===this.extensions[s]&&(a[s]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}]),n}(Yh);zp.prototype.isShaderMaterial=!0;var Gp=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this)).type="Camera",e.matrixWorldInverse=new lh,e.projectionMatrix=new lh,e.projectionMatrixInverse=new lh,e}return(0,o.Z)(n,[{key:"copy",value:function(e,t){return lt(c(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){lt(c(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){lt(c(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Mh);Gp.prototype.isCamera=!0;var Hp=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return(0,s.Z)(this,n),(e=t.call(this)).type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return(0,o.Z)(n,[{key:"copy",value:function(e,t){return lt(c(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*uc*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*oc*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*uc*Math.atan(Math.tan(.5*oc*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*oc*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var s=a.fullWidth,o=a.fullHeight;i+=a.offsetX*r/s,t-=a.offsetY*n/o,r*=a.width/s,n*=a.height/o}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=lt(c(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(Gp);Hp.prototype.isPerspectiveCamera=!0;var jp=90,Vp=1,Wp=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;if((0,s.Z)(this,n),(a=t.call(this)).type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),d(a);a.renderTarget=i;var o=new Hp(jp,Vp,e,r);o.layers=a.layers,o.up.set(0,-1,0),o.lookAt(new Oc(1,0,0)),a.add(o);var u=new Hp(jp,Vp,e,r);u.layers=a.layers,u.up.set(0,-1,0),u.lookAt(new Oc(-1,0,0)),a.add(u);var l=new Hp(jp,Vp,e,r);l.layers=a.layers,l.up.set(0,0,1),l.lookAt(new Oc(0,1,0)),a.add(l);var c=new Hp(jp,Vp,e,r);c.layers=a.layers,c.up.set(0,0,-1),c.lookAt(new Oc(0,-1,0)),a.add(c);var h=new Hp(jp,Vp,e,r);h.layers=a.layers,h.up.set(0,-1,0),h.lookAt(new Oc(0,0,1)),a.add(h);var p=new Hp(jp,Vp,e,r);return p.layers=a.layers,p.up.set(0,-1,0),p.lookAt(new Oc(0,0,-1)),a.add(p),a}return(0,o.Z)(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=(0,i.Z)(this.children,6),a=r[0],s=r[1],o=r[2],u=r[3],l=r[4],c=r[5],h=e.xr.enabled,p=e.getRenderTarget();e.xr.enabled=!1;var f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,a),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,u),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(p),e.xr.enabled=h}}]),n}(Mh),Yp=function(e){l(n,e);var t=v(n);function n(e,r,i,a,o,u,l,c,h,p){var f;return(0,s.Z)(this,n),e=void 0!==e?e:[],r=void 0!==r?r:iu,(f=t.call(this,e,r,i,a,o,u,l,c,h,p)).flipY=!1,f}return(0,o.Z)(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(wc);Yp.prototype.isCubeTexture=!0;var qp=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;return(0,s.Z)(this,n),Number.isInteger(r)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),r=i),a=t.call(this,e,e,r),r=r||{},a.texture=new Yp(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),a.texture.isRenderTargetTexture=!0,a.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,a.texture.minFilter=void 0!==r.minFilter?r.minFilter:mu,a.texture._needsFlipEnvMap=!1,a}return(0,o.Z)(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.format=Nu,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Pp(5,5,5),s=new zp({name:"CubemapFromEquirect",uniforms:Fp(n),vertexShader:r,fragmentShader:i,side:yo,blending:_o});s.uniforms.tEquirect.value=t;var o=new Np(a,s),u=t.minFilter;return t.minFilter===gu&&(t.minFilter=mu),new Wp(1,10,this).update(e,o),t.minFilter=u,o.geometry.dispose(),o.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}(Rc);qp.prototype.isWebGLCubeRenderTarget=!0;var Xp=new Oc,Kp=new Oc,Qp=new gc,Jp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Oc(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,s.Z)(this,e),this.normal=t,this.constant=n}return(0,o.Z)(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=Xp.subVectors(n,t).cross(Kp.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(Xp),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||Qp.getNormalMatrix(e),r=this.coplanarPoint(Xp).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();Jp.prototype.isPlane=!0;var $p=new eh,ef=new Oc,tf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Jp,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Jp,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Jp,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Jp,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Jp,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Jp;(0,s.Z)(this,e),this.planes=[t,n,r,i,a,o]}return(0,o.Z)(e,[{key:"set",value:function(e,t,n,r,i,a){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],s=n[3],o=n[4],u=n[5],l=n[6],c=n[7],h=n[8],p=n[9],f=n[10],d=n[11],v=n[12],m=n[13],y=n[14],g=n[15];return t[0].setComponents(s-r,c-o,d-h,g-v).normalize(),t[1].setComponents(s+r,c+o,d+h,g+v).normalize(),t[2].setComponents(s+i,c+u,d+p,g+m).normalize(),t[3].setComponents(s-i,c-u,d-p,g-m).normalize(),t[4].setComponents(s-a,c-l,d-f,g-y).normalize(),t[5].setComponents(s+a,c+l,d+f,g+y).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),$p.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere($p)}},{key:"intersectsSprite",value:function(e){return $p.center.set(0,0,0),$p.radius=.7071067811865476,$p.applyMatrix4(e.matrixWorld),this.intersectsSphere($p)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(ef.x=r.normal.x>0?e.max.x:e.min.x,ef.y=r.normal.y>0?e.max.y:e.min.y,ef.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(ef)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function nf(){var e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function rf(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){var a=r.get(t);(!a||a.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var s=r.get(t);void 0===s?r.set(t,function(t,r){var i=t.array,a=t.usage,s=e.createBuffer();e.bindBuffer(r,s),e.bufferData(r,i,a),t.onUploadCallback();var o=5126;return i instanceof Float32Array?o=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?o=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(o=5121),{buffer:s,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):s.version<t.version&&(!function(t,r,i){var a=r.array,s=r.updateRange;e.bindBuffer(i,t),-1===s.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):e.bufferSubData(i,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1)}(s.buffer,t,i),s.version=t.version)}}}}var af=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,s.Z)(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:i,widthSegments:a,heightSegments:o};for(var u=r/2,l=i/2,c=Math.floor(a),h=Math.floor(o),p=c+1,f=h+1,d=r/c,v=i/h,m=[],y=[],g=[],_=[],T=0;T<f;T++)for(var E=T*v-l,x=0;x<p;x++){var b=x*d-u;y.push(b,-E,0),g.push(0,0,1),_.push(x/c),_.push(1-T/h)}for(var I=0;I<h;I++)for(var w=0;w<c;w++){var k=w+p*I,S=w+p*(I+1),R=w+1+p*(I+1),C=w+1+p*I;m.push(k,S,C),m.push(S,R,C)}return e.setIndex(m),e.setAttribute("position",new op(y,3)),e.setAttribute("normal",new op(g,3)),e.setAttribute("uv",new op(_,2)),e}return(0,o.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(vp),sf={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},of={common:{diffuse:{value:new ep(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new gc},uv2Transform:{value:new gc},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new yc(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ep(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ep(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new gc}},sprite:{diffuse:{value:new ep(16777215)},opacity:{value:1},center:{value:new yc(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new gc}}},uf={basic:{uniforms:Lp([of.common,of.specularmap,of.envmap,of.aomap,of.lightmap,of.fog]),vertexShader:sf.meshbasic_vert,fragmentShader:sf.meshbasic_frag},lambert:{uniforms:Lp([of.common,of.specularmap,of.envmap,of.aomap,of.lightmap,of.emissivemap,of.fog,of.lights,{emissive:{value:new ep(0)}}]),vertexShader:sf.meshlambert_vert,fragmentShader:sf.meshlambert_frag},phong:{uniforms:Lp([of.common,of.specularmap,of.envmap,of.aomap,of.lightmap,of.emissivemap,of.bumpmap,of.normalmap,of.displacementmap,of.fog,of.lights,{emissive:{value:new ep(0)},specular:{value:new ep(1118481)},shininess:{value:30}}]),vertexShader:sf.meshphong_vert,fragmentShader:sf.meshphong_frag},standard:{uniforms:Lp([of.common,of.envmap,of.aomap,of.lightmap,of.emissivemap,of.bumpmap,of.normalmap,of.displacementmap,of.roughnessmap,of.metalnessmap,of.fog,of.lights,{emissive:{value:new ep(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:sf.meshphysical_vert,fragmentShader:sf.meshphysical_frag},toon:{uniforms:Lp([of.common,of.aomap,of.lightmap,of.emissivemap,of.bumpmap,of.normalmap,of.displacementmap,of.gradientmap,of.fog,of.lights,{emissive:{value:new ep(0)}}]),vertexShader:sf.meshtoon_vert,fragmentShader:sf.meshtoon_frag},matcap:{uniforms:Lp([of.common,of.bumpmap,of.normalmap,of.displacementmap,of.fog,{matcap:{value:null}}]),vertexShader:sf.meshmatcap_vert,fragmentShader:sf.meshmatcap_frag},points:{uniforms:Lp([of.points,of.fog]),vertexShader:sf.points_vert,fragmentShader:sf.points_frag},dashed:{uniforms:Lp([of.common,of.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:sf.linedashed_vert,fragmentShader:sf.linedashed_frag},depth:{uniforms:Lp([of.common,of.displacementmap]),vertexShader:sf.depth_vert,fragmentShader:sf.depth_frag},normal:{uniforms:Lp([of.common,of.bumpmap,of.normalmap,of.displacementmap,{opacity:{value:1}}]),vertexShader:sf.meshnormal_vert,fragmentShader:sf.meshnormal_frag},sprite:{uniforms:Lp([of.sprite,of.fog]),vertexShader:sf.sprite_vert,fragmentShader:sf.sprite_frag},background:{uniforms:{uvTransform:{value:new gc},t2D:{value:null}},vertexShader:sf.background_vert,fragmentShader:sf.background_frag},cube:{uniforms:Lp([of.envmap,{opacity:{value:1}}]),vertexShader:sf.cube_vert,fragmentShader:sf.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:sf.equirect_vert,fragmentShader:sf.equirect_frag},distanceRGBA:{uniforms:Lp([of.common,of.displacementmap,{referencePosition:{value:new Oc},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:sf.distanceRGBA_vert,fragmentShader:sf.distanceRGBA_frag},shadow:{uniforms:Lp([of.lights,of.fog,{color:{value:new ep(0)},opacity:{value:1}}]),vertexShader:sf.shadow_vert,fragmentShader:sf.shadow_frag}};function lf(e,t,n,r,i){var a,s,o=new ep(0),u=0,l=null,c=0,h=null;function p(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return o},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.set(e),p(o,u=t)},getClearAlpha:function(){return u},setClearAlpha:function(e){p(o,u=e)},render:function(n,i){var f=!1,d=!0===i.isScene?i.background:null;d&&d.isTexture&&(d=t.get(d));var v=e.xr,m=v.getSession&&v.getSession();m&&"additive"===m.environmentBlendMode&&(d=null),null===d?p(o,u):d&&d.isColor&&(p(d,1),f=!0),(e.autoClear||f)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&(d.isCubeTexture||d.mapping===uu)?(void 0===s&&((s=new Np(new Pp(1,1,1),new zp({name:"BackgroundCubeMaterial",uniforms:Fp(uf.cube.uniforms),vertexShader:uf.cube.vertexShader,fragmentShader:uf.cube.fragmentShader,side:yo,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),s.material.uniforms.envMap.value=d,s.material.uniforms.flipEnvMap.value=d.isCubeTexture&&!1===d.isRenderTargetTexture?-1:1,l===d&&c===d.version&&h===e.toneMapping||(s.material.needsUpdate=!0,l=d,c=d.version,h=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):d&&d.isTexture&&(void 0===a&&((a=new Np(new af(2,2),new zp({name:"BackgroundMaterial",uniforms:Fp(uf.background.uniforms),vertexShader:uf.background.vertexShader,fragmentShader:uf.background.fragmentShader,side:mo,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),a.material.uniforms.uvTransform.value.copy(d.matrix),l===d&&c===d.version&&h===e.toneMapping||(a.material.needsUpdate=!0,l=d,c=d.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function cf(e,t,n,r){var i=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),s=r.isWebGL2||null!==a,o={},u=p(null),l=u;function c(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function p(e){for(var t=[],n=[],r=[],a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){for(var e=l.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function d(e){v(e,0)}function v(n,i){var a=l.newAttributes,s=l.enabledAttributes,o=l.attributeDivisors;(a[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),o[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),o[n]=i)}function m(){for(var t=l.newAttributes,n=l.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,a,s,o){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,a,s,o):e.vertexAttribIPointer(t,n,i,s,o)}function g(){_(),l!==u&&c((l=u).object)}function _(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,h,g,_){var T=!1;if(s){var E=function(t,n,i){var s=!0===i.wireframe,u=o[t.id];void 0===u&&(u={},o[t.id]=u);var l=u[n.id];void 0===l&&(l={},u[n.id]=l);var c=l[s];void 0===c&&(c=p(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),l[s]=c);return c}(g,h,u);l!==E&&c((l=E).object),T=function(e,t){var n=l.attributes,r=e.attributes,i=0;for(var a in r){var s=n[a],o=r[a];if(void 0===s)return!0;if(s.attribute!==o)return!0;if(s.data!==o.data)return!0;i++}return l.attributesNum!==i||l.index!==t}(g,_),T&&function(e,t){var n={},r=e.attributes,i=0;for(var a in r){var s=r[a],o={};o.attribute=s,s.data&&(o.data=s.data),n[a]=o,i++}l.attributes=n,l.attributesNum=i,l.index=t}(g,_)}else{var x=!0===u.wireframe;l.geometry===g.id&&l.program===h.id&&l.wireframe===x||(l.geometry=g.id,l.program=h.id,l.wireframe=x,T=!0)}!0===i.isInstancedMesh&&(T=!0),null!==_&&n.update(_,34963),T&&(!function(i,a,s,o){if(!1===r.isWebGL2&&(i.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();var u=o.attributes,l=s.getAttributes(),c=a.defaultAttributeValues;for(var h in l){var p=l[h];if(p.location>=0){var g=u[h];if(void 0===g&&("instanceMatrix"===h&&i.instanceMatrix&&(g=i.instanceMatrix),"instanceColor"===h&&i.instanceColor&&(g=i.instanceColor)),void 0!==g){var _=g.normalized,T=g.itemSize,E=n.get(g);if(void 0===E)continue;var x=E.buffer,b=E.type,I=E.bytesPerElement;if(g.isInterleavedBufferAttribute){var w=g.data,k=w.stride,S=g.offset;if(w&&w.isInstancedInterleavedBuffer){for(var R=0;R<p.locationSize;R++)v(p.location+R,w.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=w.meshPerAttribute*w.count)}else for(var C=0;C<p.locationSize;C++)d(p.location+C);e.bindBuffer(34962,x);for(var D=0;D<p.locationSize;D++)y(p.location+D,T/p.locationSize,b,_,k*I,(S+T/p.locationSize*D)*I)}else{if(g.isInstancedBufferAttribute){for(var A=0;A<p.locationSize;A++)v(p.location+A,g.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=g.meshPerAttribute*g.count)}else for(var O=0;O<p.locationSize;O++)d(p.location+O);e.bindBuffer(34962,x);for(var N=0;N<p.locationSize;N++)y(p.location+N,T/p.locationSize,b,_,T*I,T/p.locationSize*N*I)}}else if(void 0!==c){var M=c[h];if(void 0!==M)switch(M.length){case 2:e.vertexAttrib2fv(p.location,M);break;case 3:e.vertexAttrib3fv(p.location,M);break;case 4:e.vertexAttrib4fv(p.location,M);break;default:e.vertexAttrib1fv(p.location,M)}}}}m()}(i,u,h,g),null!==_&&e.bindBuffer(34963,n.get(_).buffer))},reset:g,resetDefaultState:_,dispose:function(){for(var e in g(),o){var t=o[e];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0!==o[e.id]){var t=o[e.id];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete o[e.id]}},releaseStatesOfProgram:function(e){for(var t in o){var n=o[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)h(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:f,enableAttribute:d,disableUnusedAttributes:m}}function hf(e,t,n,r){var i,a=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,s,o){if(0!==o){var u,l;if(a)u=e,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](i,r,s,o),n.update(s,i,o)}}}function pf(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,s=void 0!==n.precision?n.precision:"highp",o=i(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);var u=a||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),h=e.getParameter(35660),p=e.getParameter(3379),f=e.getParameter(34076),d=e.getParameter(34921),v=e.getParameter(36347),m=e.getParameter(36348),y=e.getParameter(36349),g=h>0,_=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:s,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:p,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:y,vertexTextures:g,floatFragmentTextures:_,floatVertexTextures:g&&_,maxSamples:a?e.getParameter(36183):0}}function ff(e){var t=this,n=null,r=0,i=!1,a=!1,s=new Jp,o=new gc,u={value:null,needsUpdate:!1};function l(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,i){var a=null!==e?e.length:0,l=null;if(0!==a){if(l=u.value,!0!==i||null===l){var c=r+4*a,h=n.matrixWorldInverse;o.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var p=0,f=r;p!==a;++p,f+=4)s.copy(e[p]).applyMatrix4(h,o),s.normal.toArray(l,f),l[f+3]=s.constant}u.value=l,u.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){var s=0!==e.length||t||0!==r||i;return i=t,n=c(e,a,0),r=e.length,s},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1,l()},this.setState=function(t,s,o){var h=t.clippingPlanes,p=t.clipIntersection,f=t.clipShadows,d=e.get(t);if(!i||null===h||0===h.length||a&&!f)a?c(null):l();else{var v=a?0:r,m=4*v,y=d.clippingState||null;u.value=y,y=c(h,s,m,o);for(var g=0;g!==m;++g)y[g]=n[g];d.clippingState=y,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=v}}}function df(e){var t=new WeakMap;function n(e,t){return t===su?e.mapping=iu:t===ou&&(e.mapping=au),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping;if(a===su||a===ou){if(t.has(i))return n(t.get(i).texture,i.mapping);var s=i.image;if(s&&s.height>0){var o=e.getRenderTarget(),u=new qp(s.height/2);return u.fromEquirectangularTexture(e,i),t.set(i,u),e.setRenderTarget(o),i.addEventListener("dispose",r),n(u.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}uf.physical={uniforms:Lp([uf.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new yc(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new ep(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new yc},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ep(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new ep(1,1,1)},specularColorMap:{value:null}}]),vertexShader:sf.meshphysical_vert,fragmentShader:sf.meshphysical_frag};var vf=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return(0,s.Z)(this,n),(e=t.call(this)).type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=i,e.top=a,e.bottom=o,e.near=u,e.far=l,e.updateProjectionMatrix(),e}return(0,o.Z)(n,[{key:"copy",value:function(e,t){return lt(c(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,s=r+t,o=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=u*this.view.offsetX)+u*this.view.width,o=(s-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,a,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=lt(c(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(Gp);vf.prototype.isOrthographicCamera=!0;var mf=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).type="RawShaderMaterial",r}return(0,o.Z)(n)}(zp);mf.prototype.isRawShaderMaterial=!0;var yf=4,gf=8,_f=Math.pow(2,gf),Tf=[.125,.215,.35,.446,.526,.582],Ef=gf-yf+1+Tf.length,xf=20,bf=(io={},(0,at.Z)(io,zl,0),(0,at.Z)(io,Gl,1),(0,at.Z)(io,jl,2),(0,at.Z)(io,Vl,3),(0,at.Z)(io,Wl,4),(0,at.Z)(io,Yl,5),(0,at.Z)(io,Hl,6),io),If=new vf,wf=Ff(),kf=wf._lodPlanes,Sf=wf._sizeLods,Rf=wf._sigmas,Cf=new ep,Df=null,Af=(1+Math.sqrt(5))/2,Of=1/Af,Nf=[new Oc(1,1,1),new Oc(-1,1,1),new Oc(1,1,-1),new Oc(-1,1,-1),new Oc(0,Af,Of),new Oc(0,Af,-Of),new Oc(Of,0,Af),new Oc(-Of,0,Af),new Oc(Af,Of,0),new Oc(-Af,Of,0)],Mf=function(){function e(t){(0,s.Z)(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(e){var t=new Float32Array(e),n=new Oc(0,1,0);return new mf({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:bf[zl]},outputEncoding:{value:bf[zl]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:_o,depthTest:!1,depthWrite:!1})}(xf),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return(0,o.Z)(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Df=this._renderer.getRenderTarget();var i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){return this._fromTexture(e)}},{key:"fromCubemap",value:function(e){return this._fromTexture(e)}},{key:"compileCubemapShader",value:function(){null===this._cubemapShader&&(this._cubemapShader=Bf(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectShader&&(this._equirectShader=Zf(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<kf.length;e++)kf[e].dispose()}},{key:"_cleanup",value:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Df),e.scissorTest=!1,Uf(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e){Df=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}},{key:"_allocateTargets",value:function(e){var t={magFilter:fu,minFilter:fu,generateMipmaps:!1,type:_u,format:Fu,encoding:Pf(e)?e.encoding:jl,depthBuffer:!1},n=Lf(t);return n.depthBuffer=!e,this._pingPongRenderTarget=Lf(t),n}},{key:"_compileMaterial",value:function(e){var t=new Np(kf[0],e);this._renderer.compile(t,If)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new Hp(90,1,t,n),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,u=o.autoClear,l=o.outputEncoding,c=o.toneMapping;o.getClearColor(Cf),o.toneMapping=Jo,o.outputEncoding=zl,o.autoClear=!1;var h=new tp({name:"PMREM.Background",side:yo,depthWrite:!1,depthTest:!1}),p=new Np(new Pp,h),f=!1,d=e.background;d?d.isColor&&(h.color.copy(d),e.background=null,f=!0):(h.color.copy(Cf),f=!0);for(var v=0;v<6;v++){var m=v%3;0==m?(i.up.set(0,a[v],0),i.lookAt(s[v],0,0)):1==m?(i.up.set(0,0,a[v]),i.lookAt(0,s[v],0)):(i.up.set(0,a[v],0),i.lookAt(0,0,s[v])),Uf(r,m*_f,v>2?_f:0,_f,_f),o.setRenderTarget(r),f&&o.render(p,i),o.render(e,i)}p.geometry.dispose(),p.material.dispose(),o.toneMapping=c,o.outputEncoding=l,o.autoClear=u,e.background=d}},{key:"_setEncoding",value:function(e,t){e.value=bf[t.encoding]}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=e.mapping===iu||e.mapping===au;r?null==this._cubemapShader&&(this._cubemapShader=Bf()):null==this._equirectShader&&(this._equirectShader=Zf());var i=r?this._cubemapShader:this._equirectShader,a=new Np(kf[0],i),s=i.uniforms;s.envMap.value=e,r||s.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(s.inputEncoding,e),this._setEncoding(s.outputEncoding,t.texture),Uf(t,0,0,3*_f,2*_f),n.setRenderTarget(t),n.render(a,If)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<Ef;r++){var i=Math.sqrt(Rf[r]*Rf[r]-Rf[r-1]*Rf[r-1]),a=Nf[(r-1)%Nf.length];this._blur(e,r-1,r,i,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,s){var o=this._renderer,u=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var l=new Np(kf[r],u),c=u.uniforms,h=Sf[n]-1,p=isFinite(i)?Math.PI/(2*h):2*Math.PI/(2*xf-1),f=i/p,d=isFinite(i)?1+Math.floor(3*f):xf;d>xf&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(d," samples when the maximum is set to ").concat(xf));for(var v=[],m=0,y=0;y<xf;++y){var g=y/f,_=Math.exp(-g*g/2);v.push(_),0==y?m+=_:y<d&&(m+=2*_)}for(var T=0;T<v.length;T++)v[T]=v[T]/m;c.envMap.value=e.texture,c.samples.value=d,c.weights.value=v,c.latitudinal.value="latitudinal"===a,s&&(c.poleAxis.value=s),c.dTheta.value=p,c.mipInt.value=gf-n,this._setEncoding(c.inputEncoding,e.texture),this._setEncoding(c.outputEncoding,e.texture);var E=Sf[r];Uf(t,3*Math.max(0,_f-2*E),(0===r?0:2*_f)+2*E*(r>gf-yf?r-gf+yf:0),3*E,2*E),o.setRenderTarget(t),o.render(l,If)}}]),e}();function Pf(e){return void 0!==e&&e.type===_u&&(e.encoding===zl||e.encoding===Gl||e.encoding===Hl)}function Ff(){for(var e=[],t=[],n=[],r=gf,i=0;i<Ef;i++){var a=Math.pow(2,r);t.push(a);var s=1/a;i>gf-yf?s=Tf[i-gf+yf-1]:0==i&&(s=0),n.push(s);for(var o=1/(a-1),u=-o/2,l=1+o/2,c=[u,u,l,u,l,l,u,u,l,l,u,l],h=new Float32Array(108),p=new Float32Array(72),f=new Float32Array(36),d=0;d<6;d++){var v=d%3*2/3-1,m=d>2?0:-1,y=[v,m,0,v+2/3,m,0,v+2/3,m+1,0,v,m,0,v+2/3,m+1,0,v,m+1,0];h.set(y,18*d),p.set(c,12*d);var g=[d,d,d,d,d,d];f.set(g,6*d)}var _=new vp;_.setAttribute("position",new ip(h,3)),_.setAttribute("uv",new ip(p,2)),_.setAttribute("faceIndex",new ip(f,1)),e.push(_),r>yf&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function Lf(e){var t=new Rc(3*_f,3*_f,e);return t.texture.mapping=uu,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Uf(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Zf(){var e=new yc(1,1);return new mf({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:bf[zl]},outputEncoding:{value:bf[zl]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:_o,depthTest:!1,depthWrite:!1})}function Bf(){return new mf({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:bf[zl]},outputEncoding:{value:bf[zl]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:_o,depthTest:!1,depthWrite:!1})}function zf(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping,s=a===su||a===ou,o=a===iu||a===au;if(s||o){if(t.has(i))return t.get(i).texture;var u=i.image;if(s&&u&&u.height>0||o&&u&&function(e){for(var t=0,n=6,r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(u)){var l=e.getRenderTarget();null===n&&(n=new Mf(e));var c=s?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,c),e.setRenderTarget(l),i.addEventListener("dispose",r),c.texture}return null}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Gf(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Hf(e,t,n,r){var i={},a=new WeakMap;function s(e){var o=e.target;for(var u in null!==o.index&&t.remove(o.index),o.attributes)t.remove(o.attributes[u]);o.removeEventListener("dispose",s),delete i[o.id];var l=a.get(o);l&&(t.remove(l),a.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){var n=[],r=e.index,i=e.attributes.position,s=0;if(null!==r){var o=r.array;s=r.version;for(var u=0,l=o.length;u<l;u+=3){var c=o[u+0],h=o[u+1],p=o[u+2];n.push(c,h,h,p,p,c)}}else{var f=i.array;s=i.version;for(var d=0,v=f.length/3-1;d<v;d+=3){var m=d+0,y=d+1,g=d+2;n.push(m,y,y,g,g,m)}}var _=new(_c(n)>65535?sp:ap)(n,1);_.version=s;var T=a.get(e);T&&t.remove(T),a.set(e,_)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",s),i[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var i=e.morphAttributes;for(var a in i)for(var s=i[a],o=0,u=s.length;o<u;o++)t.update(s[o],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return a.get(e)}}}function jf(e,t,n,r){var i,a,s,o=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*s),n.update(r,i,1)},this.renderInstances=function(r,u,l){if(0!==l){var c,h;if(o)c=e,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](i,u,a,r*s,l),n.update(u,i,l)}}}function Vf(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}var Wf=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,s.Z)(this,n),(e=t.call(this,null)).image={data:r,width:i,height:a,depth:o},e.magFilter=fu,e.minFilter=fu,e.wrapR=hu,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,o.Z)(n)}(wc);function Yf(e,t){return e[0]-t[0]}function qf(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Xf(e,t){var n=1,r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function Kf(e,t,n){for(var r={},i=new Float32Array(8),a=new WeakMap,s=new Oc,o=[],u=0;u<8;u++)o[u]=[u,0];return{update:function(u,l,c,h){var p=u.morphTargetInfluences;if(!0===t.isWebGL2){var f=l.morphAttributes.position.length,d=a.get(l);if(void 0===d||d.count!==f){void 0!==d&&d.texture.dispose();var v=void 0!==l.morphAttributes.normal,m=l.morphAttributes.position,y=l.morphAttributes.normal||[],g=!0===v?2:1,_=l.attributes.position.count*g,T=1;_>t.maxTextureSize&&(T=Math.ceil(_/t.maxTextureSize),_=t.maxTextureSize);var E=new Float32Array(_*T*4*f),x=new Wf(E,_,T,f);x.format=Nu,x.type=wu;for(var b=4*g,I=0;I<f;I++)for(var w=m[I],k=y[I],S=_*T*4*I,R=0;R<w.count;R++){s.fromBufferAttribute(w,R),!0===w.normalized&&Xf(s,w);var C=R*b;E[S+C+0]=s.x,E[S+C+1]=s.y,E[S+C+2]=s.z,E[S+C+3]=0,!0===v&&(s.fromBufferAttribute(k,R),!0===k.normalized&&Xf(s,k),E[S+C+4]=s.x,E[S+C+5]=s.y,E[S+C+6]=s.z,E[S+C+7]=0)}d={count:f,texture:x,size:new yc(_,T)},a.set(l,d)}for(var D=0,A=0;A<p.length;A++)D+=p[A];var O=l.morphTargetsRelative?1:1-D;h.getUniforms().setValue(e,"morphTargetBaseInfluence",O),h.getUniforms().setValue(e,"morphTargetInfluences",p),h.getUniforms().setValue(e,"morphTargetsTexture",d.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",d.size)}else{var N=void 0===p?0:p.length,M=r[l.id];if(void 0===M||M.length!==N){M=[];for(var P=0;P<N;P++)M[P]=[P,0];r[l.id]=M}for(var F=0;F<N;F++){var L=M[F];L[0]=F,L[1]=p[F]}M.sort(qf);for(var U=0;U<8;U++)U<N&&M[U][1]?(o[U][0]=M[U][0],o[U][1]=M[U][1]):(o[U][0]=Number.MAX_SAFE_INTEGER,o[U][1]=0);o.sort(Yf);for(var Z=l.morphAttributes.position,B=l.morphAttributes.normal,z=0,G=0;G<8;G++){var H=o[G],j=H[0],V=H[1];j!==Number.MAX_SAFE_INTEGER&&V?(Z&&l.getAttribute("morphTarget"+G)!==Z[j]&&l.setAttribute("morphTarget"+G,Z[j]),B&&l.getAttribute("morphNormal"+G)!==B[j]&&l.setAttribute("morphNormal"+G,B[j]),i[G]=V,z+=V):(Z&&!0===l.hasAttribute("morphTarget"+G)&&l.deleteAttribute("morphTarget"+G),B&&!0===l.hasAttribute("morphNormal"+G)&&l.deleteAttribute("morphNormal"+G),i[G]=0)}var W=l.morphTargetsRelative?1:1-z;h.getUniforms().setValue(e,"morphTargetBaseInfluence",W),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Qf(e,t,n,r){var i=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var s=r.render.frame,o=e.geometry,u=t.get(e,o);return i.get(u)!==s&&(t.update(u),i.set(u,s)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),u},dispose:function(){i=new WeakMap}}}Wf.prototype.isDataTexture2DArray=!0;var Jf=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,s.Z)(this,n),(e=t.call(this,null)).image={data:r,width:i,height:a,depth:o},e.magFilter=fu,e.minFilter=fu,e.wrapR=hu,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,o.Z)(n)}(wc);Jf.prototype.isDataTexture3D=!0;var $f=new wc,ed=new Wf,td=new Jf,nd=new Yp,rd=[],id=[],ad=new Float32Array(16),sd=new Float32Array(9),od=new Float32Array(4);function ud(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=rd[i];if(void 0===a&&(a=new Float32Array(i),rd[i]=a),0!==t){r.toArray(a,0);for(var s=1,o=0;s!==t;++s)o+=n,e[s].toArray(a,o)}return a}function ld(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function cd(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function hd(e,t){var n=id[t];void 0===n&&(n=new Int32Array(t),id[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function pd(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function fd(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ld(n,t))return;e.uniform2fv(this.addr,t),cd(n,t)}}function dd(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(ld(n,t))return;e.uniform3fv(this.addr,t),cd(n,t)}}function vd(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ld(n,t))return;e.uniform4fv(this.addr,t),cd(n,t)}}function md(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(ld(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),cd(n,t)}else{if(ld(n,r))return;od.set(r),e.uniformMatrix2fv(this.addr,!1,od),cd(n,r)}}function yd(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(ld(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),cd(n,t)}else{if(ld(n,r))return;sd.set(r),e.uniformMatrix3fv(this.addr,!1,sd),cd(n,r)}}function gd(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(ld(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),cd(n,t)}else{if(ld(n,r))return;ad.set(r),e.uniformMatrix4fv(this.addr,!1,ad),cd(n,r)}}function _d(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Td(e,t){var n=this.cache;ld(n,t)||(e.uniform2iv(this.addr,t),cd(n,t))}function Ed(e,t){var n=this.cache;ld(n,t)||(e.uniform3iv(this.addr,t),cd(n,t))}function xd(e,t){var n=this.cache;ld(n,t)||(e.uniform4iv(this.addr,t),cd(n,t))}function bd(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Id(e,t){var n=this.cache;ld(n,t)||(e.uniform2uiv(this.addr,t),cd(n,t))}function wd(e,t){var n=this.cache;ld(n,t)||(e.uniform3uiv(this.addr,t),cd(n,t))}function kd(e,t){var n=this.cache;ld(n,t)||(e.uniform4uiv(this.addr,t),cd(n,t))}function Sd(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||$f,i)}function Rd(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||td,i)}function Cd(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||nd,i)}function Dd(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||ed,i)}function Ad(e,t){e.uniform1fv(this.addr,t)}function Od(e,t){var n=ud(t,this.size,2);e.uniform2fv(this.addr,n)}function Nd(e,t){var n=ud(t,this.size,3);e.uniform3fv(this.addr,n)}function Md(e,t){var n=ud(t,this.size,4);e.uniform4fv(this.addr,n)}function Pd(e,t){var n=ud(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Fd(e,t){var n=ud(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Ld(e,t){var n=ud(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Ud(e,t){e.uniform1iv(this.addr,t)}function Zd(e,t){e.uniform2iv(this.addr,t)}function Bd(e,t){e.uniform3iv(this.addr,t)}function zd(e,t){e.uniform4iv(this.addr,t)}function Gd(e,t){e.uniform1uiv(this.addr,t)}function Hd(e,t){e.uniform2uiv(this.addr,t)}function jd(e,t){e.uniform3uiv(this.addr,t)}function Vd(e,t){e.uniform4uiv(this.addr,t)}function Wd(e,t,n){var r=t.length,i=hd(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTexture2D(t[a]||$f,i[a])}function Yd(e,t,n){var r=t.length,i=hd(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.setTexture3D(t[a]||td,i[a])}function qd(e,t,n){var r=t.length,i=hd(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTextureCube(t[a]||nd,i[a])}function Xd(e,t,n){var r=t.length,i=hd(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.setTexture2DArray(t[a]||ed,i[a])}function Kd(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return pd;case 35664:return fd;case 35665:return dd;case 35666:return vd;case 35674:return md;case 35675:return yd;case 35676:return gd;case 5124:case 35670:return _d;case 35667:case 35671:return Td;case 35668:case 35672:return Ed;case 35669:case 35673:return xd;case 5125:return bd;case 36294:return Id;case 36295:return wd;case 36296:return kd;case 35678:case 36198:case 36298:case 36306:case 35682:return Sd;case 35679:case 36299:case 36307:return Rd;case 35680:case 36300:case 36308:case 36293:return Cd;case 36289:case 36303:case 36311:case 36292:return Dd}}(t.type)}function Qd(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ad;case 35664:return Od;case 35665:return Nd;case 35666:return Md;case 35674:return Pd;case 35675:return Fd;case 35676:return Ld;case 5124:case 35670:return Ud;case 35667:case 35671:return Zd;case 35668:case 35672:return Bd;case 35669:case 35673:return zd;case 5125:return Gd;case 36294:return Hd;case 36295:return jd;case 36296:return Vd;case 35678:case 36198:case 36298:case 36306:case 35682:return Wd;case 35679:case 36299:case 36307:return Yd;case 35680:case 36300:case 36308:case 36293:return qd;case 36289:case 36303:case 36311:case 36292:return Xd}}(t.type)}function Jd(e){this.id=e,this.seq=[],this.map={}}Qd.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),cd(t,e)},Jd.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var s=r[i];s.setValue(e,t[s.id],n)}};var $d=/(\w+)(\])?(\[|\.)?/g;function ev(e,t){e.seq.push(t),e.map[t.id]=t}function tv(e,t,n){var r=e.name,i=r.length;for($d.lastIndex=0;;){var a=$d.exec(r),s=$d.lastIndex,o=a[1],u="]"===a[2],l=a[3];if(u&&(o|=0),void 0===l||"["===l&&s+2===i){ev(n,void 0===l?new Kd(o,e,t):new Qd(o,e,t));break}var c=n.map[o];void 0===c&&ev(n,c=new Jd(o)),n=c}}function nv(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);tv(i,e.getUniformLocation(t,i.name),this)}}function rv(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}nv.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},nv.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},nv.upload=function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var s=t[i],o=n[s.id];!1!==o.needsUpdate&&s.setValue(e,o.value,r)}},nv.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n};var iv=0;function av(e){switch(e){case zl:return["Linear","( value )"];case Gl:return["sRGB","( value )"];case jl:return["RGBE","( value )"];case Vl:return["RGBM","( value, 7.0 )"];case Wl:return["RGBM","( value, 16.0 )"];case Yl:return["RGBD","( value, 256.0 )"];case Hl:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function sv(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":n.toUpperCase()+"\n\n"+i+"\n\n"+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function ov(e,t){var n=av(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function uv(e,t){var n=av(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function lv(e,t){var n;switch(t){case $o:n="Linear";break;case eu:n="Reinhard";break;case tu:n="OptimizedCineon";break;case nu:n="ACESFilmic";break;case ru:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function cv(e){return""!==e}function hv(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function pv(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var fv=/^[ \t]*#include +<([\w\d./]+)>/gm;function dv(e){return e.replace(fv,vv)}function vv(e,t){var n=sf[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return dv(n)}var mv=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,yv=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function gv(e){return e.replace(yv,Tv).replace(mv,_v)}function _v(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Tv(e,t,n,r)}function Tv(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function Ev(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function xv(e,t,n,r){var i,a,s=e.getContext(),o=n.defines,u=n.vertexShader,l=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===po?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===fo?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===vo&&(t="SHADOWMAP_TYPE_VSM"),t}(n),h=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case iu:case au:t="ENVMAP_TYPE_CUBE";break;case uu:case lu:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),p=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case au:case lu:t="ENVMAP_MODE_REFRACTION"}return t}(n),f=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Xo:t="ENVMAP_BLENDING_MULTIPLY";break;case Ko:t="ENVMAP_BLENDING_MIX";break;case Qo:t="ENVMAP_BLENDING_ADD"}return t}(n),d=e.gammaFactor>0?e.gammaFactor:1,v=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(cv).join("\n")}(n),m=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(o),y=s.createProgram(),g=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[m].filter(cv).join("\n")).length>0&&(i+="\n"),(a=[v,m].filter(cv).join("\n")).length>0&&(a+="\n")):(i=[Ev(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(cv).join("\n"),a=[v,Ev(n),"#define SHADER_NAME "+n.shaderName,m,"#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+p:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Jo?"#define TONE_MAPPING":"",n.toneMapping!==Jo?sf.tonemapping_pars_fragment:"",n.toneMapping!==Jo?lv("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===Ou?"#define OPAQUE":"",sf.encodings_pars_fragment,n.map?ov("mapTexelToLinear",n.mapEncoding):"",n.matcap?ov("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?ov("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?ov("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularColorMap?ov("specularColorMapTexelToLinear",n.specularColorMapEncoding):"",n.sheenColorMap?ov("sheenColorMapTexelToLinear",n.sheenColorMapEncoding):"",n.lightMap?ov("lightMapTexelToLinear",n.lightMapEncoding):"",uv("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(cv).join("\n")),u=pv(u=hv(u=dv(u),n),n),l=pv(l=hv(l=dv(l),n),n),u=gv(u),l=gv(l),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(g="#version 300 es\n",i=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in",n.glslVersion===nc?"":"out highp vec4 pc_fragColor;",n.glslVersion===nc?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var _,T,E=g+a+l,x=rv(s,35633,g+i+u),b=rv(s,35632,E);if(s.attachShader(y,x),s.attachShader(y,b),void 0!==n.index0AttributeName?s.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&s.bindAttribLocation(y,0,"position"),s.linkProgram(y),e.debug.checkShaderErrors){var I=s.getProgramInfoLog(y).trim(),w=s.getShaderInfoLog(x).trim(),k=s.getShaderInfoLog(b).trim(),S=!0,R=!0;if(!1===s.getProgramParameter(y,35714)){S=!1;var C=sv(s,x,"vertex"),D=sv(s,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(y,35715)+"\n\nProgram Info Log: "+I+"\n"+C+"\n"+D)}else""!==I?console.warn("THREE.WebGLProgram: Program Info Log:",I):""!==w&&""!==k||(R=!1);R&&(this.diagnostics={runnable:S,programLog:I,vertexShader:{log:w,prefix:i},fragmentShader:{log:k,prefix:a}})}return s.deleteShader(x),s.deleteShader(b),this.getUniforms=function(){return void 0===_&&(_=new nv(s,y)),_},this.getAttributes=function(){return void 0===T&&(T=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i),s=a.name,o=1;35674===a.type&&(o=2),35675===a.type&&(o=3),35676===a.type&&(o=4),n[s]={type:a.type,location:e.getAttribLocation(t,s),locationSize:o}}return n}(s,y)),T},this.destroy=function(){r.releaseStatesOfProgram(this),s.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=iv++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=x,this.fragmentShader=b,this}function bv(e,t,n,r,i,a,s){var o=[],u=i.isWebGL2,l=i.logarithmicDepthBuffer,c=i.floatVertexTextures,h=i.maxVertexUniforms,p=i.vertexTextures,f=i.precision,d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},v=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function m(e){var t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=zl,t}return{getParameters:function(a,o,v,y,g){var _,T,E=y.fog,x=a.isMeshStandardMaterial?y.environment:null,b=(a.isMeshStandardMaterial?n:t).get(a.envMap||x),I=d[a.type],w=g.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(c)return 1024;var n=h,r=Math.floor((n-20)/4),i=Math.min(r,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(g):0;if(null!==a.precision&&(f=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",f,"instead."),I){var k=uf[I];_=k.vertexShader,T=k.fragmentShader}else _=a.vertexShader,T=a.fragmentShader;var S=e.getRenderTarget(),R=a.alphaTest>0,C=a.clearcoat>0;return{isWebGL2:u,shaderID:I,shaderName:a.type,vertexShader:_,fragmentShader:T,defines:a.defines,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:f,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:p,outputEncoding:null!==S?m(S.texture):e.outputEncoding,map:!!a.map,mapEncoding:m(a.map),matcap:!!a.matcap,matcapEncoding:m(a.matcap),envMap:!!b,envMapMode:b&&b.mapping,envMapEncoding:m(b),envMapCubeUV:!!b&&(b.mapping===uu||b.mapping===lu),lightMap:!!a.lightMap,lightMapEncoding:m(a.lightMap),aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,emissiveMapEncoding:m(a.emissiveMap),bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===Ql,tangentSpaceNormalMap:a.normalMapType===Kl,clearcoat:C,clearcoatMap:C&&!!a.clearcoatMap,clearcoatRoughnessMap:C&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:C&&!!a.clearcoatNormalMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,specularColorMapEncoding:m(a.specularColorMap),alphaMap:!!a.alphaMap,alphaTest:R,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenColorMapEncoding:m(a.sheenColorMap),sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!g.geometry&&!!g.geometry.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!g.geometry&&!!g.geometry.attributes.color&&4===g.geometry.attributes.color.itemSize,vertexUvs:!!a.map||!!a.bumpMap||!!a.normalMap||!!a.specularMap||!!a.alphaMap||!!a.emissiveMap||!!a.roughnessMap||!!a.metalnessMap||!!a.clearcoatMap||!!a.clearcoatRoughnessMap||!!a.clearcoatNormalMap||!!a.displacementMap||!!a.transmissionMap||!!a.thicknessMap||!!a.specularIntensityMap||!!a.specularColorMap||!!a.sheenColorMap||a.sheenRoughnessMap,uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap)&&!!a.displacementMap,fog:!!E,useFog:a.fog,fogExp2:E&&E.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:l,skinning:!0===g.isSkinnedMesh&&w>0,maxBones:w,useVertexTexture:c,morphTargets:!!g.geometry&&!!g.geometry.morphAttributes.position,morphNormals:!!g.geometry&&!!g.geometry.morphAttributes.normal,morphTargetsCount:g.geometry&&g.geometry.morphAttributes.position?g.geometry.morphAttributes.position.length:0,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,format:a.format,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&v.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:Jo,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===go,flipSided:a.side===yo,depthPacking:void 0!==a.depthPacking&&a.depthPacking,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(xc(t.fragmentShader)),n.push(xc(t.vertexShader))),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);if(!1===t.isRawShaderMaterial){for(var i=0;i<v.length;i++)n.push(t[v[i]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=d[e.type];if(n){var r=uf[n];t=Up.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,i=0,s=o.length;i<s;i++){var u=o[i];if(u.cacheKey===n){++(r=u).usedTimes;break}}return void 0===r&&(r=new xv(e,n,t,a),o.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){var t=o.indexOf(e);o[t]=o[o.length-1],o.pop(),e.destroy()}},programs:o}}function Iv(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function wv(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function kv(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Sv(e){var t=[],n=0,r=[],i=[],a=[],s={id:-1};function o(r,i,a,o,u,l){var c=t[n],h=e.get(a);return void 0===c?(c={id:r.id,object:r,geometry:i,material:a,program:h.program||s,groupOrder:o,renderOrder:r.renderOrder,z:u,group:l},t[n]=c):(c.id=r.id,c.object=r,c.geometry=i,c.material=a,c.program=h.program||s,c.groupOrder=o,c.renderOrder=r.renderOrder,c.z=u,c.group=l),n++,c}return{opaque:r,transmissive:i,transparent:a,init:function(){n=0,r.length=0,i.length=0,a.length=0},push:function(e,t,n,s,u,l){var c=o(e,t,n,s,u,l);n.transmission>0?i.push(c):!0===n.transparent?a.push(c):r.push(c)},unshift:function(e,t,n,s,u,l){var c=o(e,t,n,s,u,l);n.transmission>0?i.unshift(c):!0===n.transparent?a.unshift(c):r.unshift(c)},finish:function(){for(var e=n,r=t.length;e<r;e++){var i=t[e];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(e,t){r.length>1&&r.sort(e||wv),i.length>1&&i.sort(t||kv),a.length>1&&a.sort(t||kv)}}}function Rv(e){var t=new WeakMap;return{get:function(n,r){var i;return!1===t.has(n)?(i=new Sv(e),t.set(n,[i])):r>=t.get(n).length?(i=new Sv(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}function Cv(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Oc,color:new ep};break;case"SpotLight":n={position:new Oc,direction:new Oc,color:new ep,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Oc,color:new ep,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Oc,skyColor:new ep,groundColor:new ep};break;case"RectAreaLight":n={color:new ep,position:new Oc,halfWidth:new Oc,halfHeight:new Oc}}return e[t.id]=n,n}}}var Dv=0;function Av(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Ov(e,t){for(var n=new Cv,r=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yc};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yc,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},a=0;a<9;a++)i.probe.push(new Oc);var s=new Oc,o=new lh,u=new lh;return{setup:function(a,s){for(var o=0,u=0,l=0,c=0;c<9;c++)i.probe[c].set(0,0,0);var h=0,p=0,f=0,d=0,v=0,m=0,y=0,g=0;a.sort(Av);for(var _=!0!==s?Math.PI:1,T=0,E=a.length;T<E;T++){var x=a[T],b=x.color,I=x.intensity,w=x.distance,k=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)o+=b.r*I*_,u+=b.g*I*_,l+=b.b*I*_;else if(x.isLightProbe)for(var S=0;S<9;S++)i.probe[S].addScaledVector(x.sh.coefficients[S],I);else if(x.isDirectionalLight){var R=n.get(x);if(R.color.copy(x.color).multiplyScalar(x.intensity*_),x.castShadow){var C=x.shadow,D=r.get(x);D.shadowBias=C.bias,D.shadowNormalBias=C.normalBias,D.shadowRadius=C.radius,D.shadowMapSize=C.mapSize,i.directionalShadow[h]=D,i.directionalShadowMap[h]=k,i.directionalShadowMatrix[h]=x.shadow.matrix,m++}i.directional[h]=R,h++}else if(x.isSpotLight){var A=n.get(x);if(A.position.setFromMatrixPosition(x.matrixWorld),A.color.copy(b).multiplyScalar(I*_),A.distance=w,A.coneCos=Math.cos(x.angle),A.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),A.decay=x.decay,x.castShadow){var O=x.shadow,N=r.get(x);N.shadowBias=O.bias,N.shadowNormalBias=O.normalBias,N.shadowRadius=O.radius,N.shadowMapSize=O.mapSize,i.spotShadow[f]=N,i.spotShadowMap[f]=k,i.spotShadowMatrix[f]=x.shadow.matrix,g++}i.spot[f]=A,f++}else if(x.isRectAreaLight){var M=n.get(x);M.color.copy(b).multiplyScalar(I),M.halfWidth.set(.5*x.width,0,0),M.halfHeight.set(0,.5*x.height,0),i.rectArea[d]=M,d++}else if(x.isPointLight){var P=n.get(x);if(P.color.copy(x.color).multiplyScalar(x.intensity*_),P.distance=x.distance,P.decay=x.decay,x.castShadow){var F=x.shadow,L=r.get(x);L.shadowBias=F.bias,L.shadowNormalBias=F.normalBias,L.shadowRadius=F.radius,L.shadowMapSize=F.mapSize,L.shadowCameraNear=F.camera.near,L.shadowCameraFar=F.camera.far,i.pointShadow[p]=L,i.pointShadowMap[p]=k,i.pointShadowMatrix[p]=x.shadow.matrix,y++}i.point[p]=P,p++}else if(x.isHemisphereLight){var U=n.get(x);U.skyColor.copy(x.color).multiplyScalar(I*_),U.groundColor.copy(x.groundColor).multiplyScalar(I*_),i.hemi[v]=U,v++}}d>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=of.LTC_FLOAT_1,i.rectAreaLTC2=of.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=of.LTC_HALF_1,i.rectAreaLTC2=of.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=o,i.ambient[1]=u,i.ambient[2]=l;var Z=i.hash;Z.directionalLength===h&&Z.pointLength===p&&Z.spotLength===f&&Z.rectAreaLength===d&&Z.hemiLength===v&&Z.numDirectionalShadows===m&&Z.numPointShadows===y&&Z.numSpotShadows===g||(i.directional.length=h,i.spot.length=f,i.rectArea.length=d,i.point.length=p,i.hemi.length=v,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=y,i.pointShadowMap.length=y,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=y,i.spotShadowMatrix.length=g,Z.directionalLength=h,Z.pointLength=p,Z.spotLength=f,Z.rectAreaLength=d,Z.hemiLength=v,Z.numDirectionalShadows=m,Z.numPointShadows=y,Z.numSpotShadows=g,i.version=Dv++)},setupView:function(e,t){for(var n=0,r=0,a=0,l=0,c=0,h=t.matrixWorldInverse,p=0,f=e.length;p<f;p++){var d=e[p];if(d.isDirectionalLight){var v=i.directional[n];v.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),v.direction.sub(s),v.direction.transformDirection(h),n++}else if(d.isSpotLight){var m=i.spot[a];m.position.setFromMatrixPosition(d.matrixWorld),m.position.applyMatrix4(h),m.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),m.direction.sub(s),m.direction.transformDirection(h),a++}else if(d.isRectAreaLight){var y=i.rectArea[l];y.position.setFromMatrixPosition(d.matrixWorld),y.position.applyMatrix4(h),u.identity(),o.copy(d.matrixWorld),o.premultiply(h),u.extractRotation(o),y.halfWidth.set(.5*d.width,0,0),y.halfHeight.set(0,.5*d.height,0),y.halfWidth.applyMatrix4(u),y.halfHeight.applyMatrix4(u),l++}else if(d.isPointLight){var g=i.point[r];g.position.setFromMatrixPosition(d.matrixWorld),g.position.applyMatrix4(h),r++}else if(d.isHemisphereLight){var _=i.hemi[c];_.direction.setFromMatrixPosition(d.matrixWorld),_.direction.transformDirection(h),_.direction.normalize(),c++}}},state:i}}function Nv(e,t){var n=new Ov(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Mv(e,t){var n=new WeakMap;return{get:function(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(i=new Nv(e,t),n.set(r,[i])):a>=n.get(r).length?(i=new Nv(e,t),n.get(r).push(i)):i=n.get(r)[a],i},dispose:function(){n=new WeakMap}}}var Pv=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).type="MeshDepthMaterial",r.depthPacking=ql,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.setValues(e),r}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(Yh);Pv.prototype.isMeshDepthMaterial=!0;var Fv=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).type="MeshDistanceMaterial",r.referencePosition=new Oc,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.fog=!1,r.setValues(e),r}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(Yh);Fv.prototype.isMeshDistanceMaterial=!0;var Lv="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Uv="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Zv(e,t,n){var r=new tf,i=new yc,a=new yc,s=new Sc,o=new Pv({depthPacking:Xl}),u=new Fv,l={},c=n.maxTextureSize,h={0:yo,1:mo,2:go},p=new zp({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new yc},radius:{value:4}},vertexShader:Lv,fragmentShader:Uv}),f=p.clone();f.defines.HORIZONTAL_PASS=1;var d=new vp;d.setAttribute("position",new ip(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new Np(d,p),m=this;function y(n,r){var i=t.update(v);p.defines.VSM_SAMPLES!==n.blurSamples&&(p.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,p.needsUpdate=!0,f.needsUpdate=!0),p.uniforms.shadow_pass.value=n.map.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,p,v,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,f,v,null)}function g(t,n,r,i,a,s,c){var p=null,f=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(p=void 0!==f?f:!0===i.isPointLight?u:o,e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length||r.displacementMap&&0!==r.displacementScale||r.alphaMap&&r.alphaTest>0){var d=p.uuid,v=r.uuid,m=l[d];void 0===m&&(m={},l[d]=m);var y=m[v];void 0===y&&(y=p.clone(),m[v]=y),p=y}return p.visible=r.visible,p.wireframe=r.wireframe,p.side=c===vo?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],p.alphaMap=r.alphaMap,p.alphaTest=r.alphaTest,p.clipShadows=r.clipShadows,p.clippingPlanes=r.clippingPlanes,p.clipIntersection=r.clipIntersection,p.displacementMap=r.displacementMap,p.displacementScale=r.displacementScale,p.displacementBias=r.displacementBias,p.wireframeLinewidth=r.wireframeLinewidth,p.linewidth=r.linewidth,!0===i.isPointLight&&!0===p.isMeshDistanceMaterial&&(p.referencePosition.setFromMatrixPosition(i.matrixWorld),p.nearDistance=a,p.farDistance=s),p}function _(n,i,a,s,o){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===vo)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=t.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,h=0,p=c.length;h<p;h++){var f=c[h],d=l[f.materialIndex];if(d&&d.visible){var v=g(n,0,d,s,a.near,a.far,o);e.renderBufferDirect(a,null,u,v,n,f)}}else if(l.visible){var m=g(n,0,l,s,a.near,a.far,o);e.renderBufferDirect(a,null,u,m,n,null)}}for(var y=n.children,T=0,E=y.length;T<E;T++)_(y[T],i,a,s,o)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=po,this.render=function(t,n,o){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),l=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.state;p.setBlending(_o),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(var f=0,d=t.length;f<d;f++){var v=t[f],g=v.shadow;if(void 0!==g){if(!1!==g.autoUpdate||!1!==g.needsUpdate){i.copy(g.mapSize);var T=g.getFrameExtents();if(i.multiply(T),a.copy(g.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/T.x),i.x=a.x*T.x,g.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/T.y),i.y=a.y*T.y,g.mapSize.y=a.y)),null===g.map&&!g.isPointLightShadow&&this.type===vo){var E={minFilter:mu,magFilter:mu,format:Nu};g.map=new Rc(i.x,i.y,E),g.map.texture.name=v.name+".shadowMap",g.mapPass=new Rc(i.x,i.y,E),g.camera.updateProjectionMatrix()}if(null===g.map){var x={minFilter:fu,magFilter:fu,format:Nu};g.map=new Rc(i.x,i.y,x),g.map.texture.name=v.name+".shadowMap",g.camera.updateProjectionMatrix()}e.setRenderTarget(g.map),e.clear();for(var b=g.getViewportCount(),I=0;I<b;I++){var w=g.getViewport(I);s.set(a.x*w.x,a.y*w.y,a.x*w.z,a.y*w.w),p.viewport(s),g.updateMatrices(v,I),r=g.getFrustum(),_(n,o,g.camera,v,this.type)}g.isPointLightShadow||this.type!==vo||y(g,o),g.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(u,l,h)}}}function Bv(e,t,n){var r,i,a=n.isWebGL2;var s=new function(){var t=!1,n=new Sc,r=null,i=new Sc(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,s,o){!0===o&&(t*=s,r*=s,a*=s),n.set(t,r,a,s),!1===i.equals(n)&&(e.clearColor(t,r,a,s),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?U(2929):Z(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case zo:e.depthFunc(512);break;case Go:e.depthFunc(519);break;case Ho:e.depthFunc(513);break;case jo:e.depthFunc(515);break;case Vo:e.depthFunc(514);break;case Wo:e.depthFunc(518);break;case Yo:e.depthFunc(516);break;case qo:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},u=new function(){var t=!1,n=null,r=null,i=null,a=null,s=null,o=null,u=null,l=null;return{setTest:function(e){t||(e?U(2960):Z(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,s){r===t&&i===n&&a===s||(e.stencilFunc(t,n,s),r=t,i=n,a=s)},setOp:function(t,n,r){s===t&&o===n&&u===r||(e.stencilOp(t,n,r),s=t,o=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,s=null,o=null,u=null,l=null}}},l={},c={},h=null,p=!1,f=null,d=null,v=null,m=null,y=null,g=null,_=null,T=!1,E=null,x=null,b=null,I=null,w=null,k=e.getParameter(35661),S=!1,R=0,C=e.getParameter(7938);-1!==C.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(C)[1]),S=R>=1):-1!==C.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(C)[1]),S=R>=2);var D=null,A={},O=e.getParameter(3088),N=e.getParameter(2978),M=(new Sc).fromArray(O),P=(new Sc).fromArray(N);function F(t,n,r){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var s=0;s<r;s++)e.texImage2D(n+s,0,6408,1,1,0,6408,5121,i);return a}var L={};function U(t){!0!==l[t]&&(e.enable(t),l[t]=!0)}function Z(t){!1!==l[t]&&(e.disable(t),l[t]=!1)}L[3553]=F(3553,3553,1),L[34067]=F(34067,34069,6),s.setClear(0,0,0,1),o.setClear(1),u.setClear(0),U(2929),o.setFunc(jo),j(!1),V(co),U(2884),H(_o);var B=(r={},(0,at.Z)(r,wo,32774),(0,at.Z)(r,ko,32778),(0,at.Z)(r,So,32779),r);if(a)B[Ro]=32775,B[Co]=32776;else{var z=t.get("EXT_blend_minmax");null!==z&&(B[Ro]=z.MIN_EXT,B[Co]=z.MAX_EXT)}var G=(i={},(0,at.Z)(i,Do,0),(0,at.Z)(i,Ao,1),(0,at.Z)(i,Oo,768),(0,at.Z)(i,Mo,770),(0,at.Z)(i,Bo,776),(0,at.Z)(i,Uo,774),(0,at.Z)(i,Fo,772),(0,at.Z)(i,No,769),(0,at.Z)(i,Po,771),(0,at.Z)(i,Zo,775),(0,at.Z)(i,Lo,773),i);function H(t,n,r,i,a,s,o,u){if(t!==_o){if(!1===p&&(U(3042),p=!0),t===Io)a=a||n,s=s||r,o=o||i,n===d&&a===y||(e.blendEquationSeparate(B[n],B[a]),d=n,y=a),r===v&&i===m&&s===g&&o===_||(e.blendFuncSeparate(G[r],G[i],G[s],G[o]),v=r,m=i,g=s,_=o),f=t,T=null;else if(t!==f||u!==T){if(d===wo&&y===wo||(e.blendEquation(32774),d=wo,y=wo),u)switch(t){case To:e.blendFuncSeparate(1,771,1,771);break;case Eo:e.blendFunc(1,1);break;case xo:e.blendFuncSeparate(0,0,769,771);break;case bo:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case To:e.blendFuncSeparate(770,771,1,771);break;case Eo:e.blendFunc(770,1);break;case xo:e.blendFunc(0,769);break;case bo:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,m=null,g=null,_=null,f=t,T=u}}else!0===p&&(Z(3042),p=!1)}function j(t){E!==t&&(t?e.frontFace(2304):e.frontFace(2305),E=t)}function V(t){t!==lo?(U(2884),t!==x&&(t===co?e.cullFace(1029):t===ho?e.cullFace(1028):e.cullFace(1032))):Z(2884),x=t}function W(t,n,r){t?(U(32823),I===n&&w===r||(e.polygonOffset(n,r),I=n,w=r)):Z(32823)}function Y(t){void 0===t&&(t=33984+k-1),D!==t&&(e.activeTexture(t),D=t)}return{buffers:{color:s,depth:o,stencil:u},enable:U,disable:Z,bindFramebuffer:function(t,n){return c[t]!==n&&(e.bindFramebuffer(t,n),c[t]=n,a&&(36009===t&&(c[36160]=n),36160===t&&(c[36009]=n)),!0)},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:H,setMaterial:function(e,t){e.side===go?Z(2884):U(2884);var n=e.side===yo;t&&(n=!n),j(n),e.blending===To&&!1===e.transparent?H(_o):H(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),s.setMask(e.colorWrite);var r=e.stencilWrite;u.setTest(r),r&&(u.setMask(e.stencilWriteMask),u.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),u.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),W(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?U(32926):Z(32926)},setFlipSided:j,setCullFace:V,setLineWidth:function(t){t!==b&&(S&&e.lineWidth(t),b=t)},setPolygonOffset:W,setScissorTest:function(e){e?U(3089):Z(3089)},activeTexture:Y,bindTexture:function(t,n){null===D&&Y();var r=A[D];void 0===r&&(r={type:void 0,texture:void 0},A[D]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||L[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=A[D];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===M.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),M.copy(t))},viewport:function(t){!1===P.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),P.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===a&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),l={},D=null,A={},c={},h=null,p=!1,f=null,d=null,v=null,m=null,y=null,g=null,_=null,T=!1,E=null,x=null,b=null,I=null,w=null,M.set(0,0,e.canvas.width,e.canvas.height),P.set(0,0,e.canvas.width,e.canvas.height),s.reset(),o.reset(),u.reset()}}}function zv(e,t,n,r,i,a,s){var o,u,l,c=i.isWebGL2,h=i.maxTextures,p=i.maxCubemapSize,f=i.maxTextureSize,d=i.maxSamples,v=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):void 0,m=new WeakMap,y=!1;try{y="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(z){}function g(e,t){return y?new OffscreenCanvas(e,t):Ec("canvas")}function _(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?vc:Math.floor,s=a(i*e.width),o=a(i*e.height);void 0===l&&(l=g(s,o));var u=n?g(s,o):l;return u.width=s,u.height=o,u.getContext("2d").drawImage(e,0,0,s,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+o+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function T(e){return fc(e.width)&&fc(e.height)}function E(e,t){return e.generateMipmaps&&t&&e.minFilter!==fu&&e.minFilter!==mu}function x(t){e.generateMipmap(t)}function b(n,r,i){if(!1===c)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var a=r;return 6403===r&&(5126===i&&(a=33326),5131===i&&(a=33325),5121===i&&(a=33321)),6407===r&&(5126===i&&(a=34837),5131===i&&(a=34843),5121===i&&(a=32849)),6408===r&&(5126===i&&(a=34836),5131===i&&(a=34842),5121===i&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||t.get("EXT_color_buffer_float"),a}function I(e){return e===fu||e===du||e===vu?9728:9729}function w(t){var n=t.target;n.removeEventListener("dispose",w),function(t){var n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&m.delete(n),s.memory.textures--}function k(t){var n=t.target;n.removeEventListener("dispose",k),function(t){var n=t.texture,i=r.get(t),a=r.get(n);if(!t)return;void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),s.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var o=0;o<6;o++)e.deleteFramebuffer(i.__webglFramebuffer[o]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[o]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(var u=0,l=n.length;u<l;u++){var c=r.get(n[u]);c.__webglTexture&&(e.deleteTexture(c.__webglTexture),s.memory.textures--),r.remove(n[u])}r.remove(n),r.remove(t)}(n)}var S=0;function R(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=s.render.frame;m.get(e)!==t&&(m.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void M(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function C(t,i){var s=r.get(t);t.version>0&&s.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;N(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var s=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),o=r.image[0]&&r.image[0].isDataTexture,u=[],l=0;l<6;l++)u[l]=s||o?o?r.image[l].image:r.image[l]:_(r.image[l],!1,!0,p);var h,f=T(u[0])||c,d=a.convert(r.format),v=a.convert(r.type),m=b(r.internalFormat,d,v,r.encoding);if(O(34067,r,f),s)for(var y=0;y<6;y++){h=u[y].mipmaps;for(var g=0;g<h.length;g++){var I=h[g];r.format!==Nu&&r.format!==Ou?null!==d?n.compressedTexImage2D(34069+y,g,m,I.width,I.height,0,I.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+y,g,m,I.width,I.height,0,d,v,I.data)}}else{h=r.mipmaps;for(var w=0;w<6;w++)if(o){n.texImage2D(34069+w,0,m,u[w].width,u[w].height,0,d,v,u[w].data);for(var k=0;k<h.length;k++){var S=h[k].image[w].image;n.texImage2D(34069+w,k+1,m,S.width,S.height,0,d,v,S.data)}}else{n.texImage2D(34069+w,0,m,d,v,u[w]);for(var R=0;R<h.length;R++){var C=h[R];n.texImage2D(34069+w,R+1,m,d,v,C.image[w])}}}E(r,f)&&x(34067);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(s,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,s.__webglTexture))}var D=(o={},(0,at.Z)(o,cu,10497),(0,at.Z)(o,hu,33071),(0,at.Z)(o,pu,33648),o),A=(u={},(0,at.Z)(u,fu,9728),(0,at.Z)(u,du,9984),(0,at.Z)(u,vu,9986),(0,at.Z)(u,mu,9729),(0,at.Z)(u,yu,9985),(0,at.Z)(u,gu,9987),u);function O(n,a,s){if(s?(e.texParameteri(n,10242,D[a.wrapS]),e.texParameteri(n,10243,D[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,D[a.wrapR]),e.texParameteri(n,10240,A[a.magFilter]),e.texParameteri(n,10241,A[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===hu&&a.wrapT===hu||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,I(a.magFilter)),e.texParameteri(n,10241,I(a.minFilter)),a.minFilter!==fu&&a.minFilter!==mu&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var o=t.get("EXT_texture_filter_anisotropic");if(a.type===wu&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&a.type===ku&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function N(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w),t.__webglTexture=e.createTexture(),s.memory.textures++)}function M(t,r,i){var s=3553;r.isDataTexture2DArray&&(s=35866),r.isDataTexture3D&&(s=32879),N(t,r),n.activeTexture(33984+i),n.bindTexture(s,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var o,u=function(e){return!c&&(e.wrapS!==hu||e.wrapT!==hu||e.minFilter!==fu&&e.minFilter!==mu)}(r)&&!1===T(r.image),l=_(r.image,u,!1,f),h=T(l)||c,p=a.convert(r.format),d=a.convert(r.type),v=b(r.internalFormat,p,d,r.encoding);O(s,r,h);var m=r.mipmaps;if(r.isDepthTexture)v=6402,c?v=r.type===wu?36012:r.type===Iu?33190:r.type===Du?35056:33189:r.type===wu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Lu&&6402===v&&r.type!==xu&&r.type!==Iu&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=xu,d=a.convert(r.type)),r.format===Uu&&6402===v&&(v=34041,r.type!==Du&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Du,d=a.convert(r.type))),n.texImage2D(3553,0,v,l.width,l.height,0,p,d,null);else if(r.isDataTexture)if(m.length>0&&h){for(var y=0,g=m.length;y<g;y++)o=m[y],n.texImage2D(3553,y,v,o.width,o.height,0,p,d,o.data);r.generateMipmaps=!1}else n.texImage2D(3553,0,v,l.width,l.height,0,p,d,l.data);else if(r.isCompressedTexture)for(var I=0,w=m.length;I<w;I++)o=m[I],r.format!==Nu&&r.format!==Ou?null!==p?n.compressedTexImage2D(3553,I,v,o.width,o.height,0,o.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,I,v,o.width,o.height,0,p,d,o.data);else if(r.isDataTexture2DArray)n.texImage3D(35866,0,v,l.width,l.height,l.depth,0,p,d,l.data);else if(r.isDataTexture3D)n.texImage3D(32879,0,v,l.width,l.height,l.depth,0,p,d,l.data);else{var k=function(e,t,n){return!0===E(e,n)?Math.log2(Math.max(t.width,t.height))+1:e.mipmaps.length>0?e.mipmaps.length:1}(r,l,h),S=c&&!0!==r.isVideoTexture,R=void 0===t.__version;if(m.length>0&&h){S&&R&&n.texStorage2D(3553,k,v,m[0].width,m[0].height);for(var C=0,D=m.length;C<D;C++)o=m[C],S?n.texSubImage2D(3553,C,0,0,p,d,o):n.texImage2D(3553,C,v,p,d,o);r.generateMipmaps=!1}else S?(R&&n.texStorage2D(3553,k,v,l.width,l.height),n.texSubImage2D(3553,0,0,0,p,d,l)):n.texImage2D(3553,0,v,p,d,l)}E(r,h)&&x(s),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function P(t,i,s,o,u){var l=a.convert(s.format),c=a.convert(s.type),h=b(s.internalFormat,l,c,s.encoding);r.get(i).__hasExternalTextures||(32879===u||35866===u?n.texImage3D(u,0,h,i.width,i.height,i.depth,0,l,c,null):n.texImage2D(u,0,h,i.width,i.height,0,l,c,null)),n.bindFramebuffer(36160,t),i.useRenderToTexture?v.framebufferTexture2DMultisampleEXT(36160,o,u,r.get(s).__webglTexture,0,U(i)):e.framebufferTexture2D(36160,o,u,r.get(s).__webglTexture,0),n.bindFramebuffer(36160,null)}function F(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r||n.useRenderToTexture){var s=n.depthTexture;s&&s.isDepthTexture&&(s.type===wu?i=36012:s.type===Iu&&(i=33190));var o=U(n);n.useRenderToTexture?v.renderbufferStorageMultisampleEXT(36161,o,i,n.width,n.height):e.renderbufferStorageMultisample(36161,o,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var u=U(n);r&&n.useRenderbuffer?e.renderbufferStorageMultisample(36161,u,35056,n.width,n.height):n.useRenderToTexture?v.renderbufferStorageMultisampleEXT(36161,u,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{var l=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,c=a.convert(l.format),h=a.convert(l.type),p=b(l.internalFormat,c,h,l.encoding),f=U(n);r&&n.useRenderbuffer?e.renderbufferStorageMultisample(36161,f,p,n.width,n.height):n.useRenderToTexture?v.renderbufferStorageMultisampleEXT(36161,f,p,n.width,n.height):e.renderbufferStorage(36161,p,n.width,n.height)}e.bindRenderbuffer(36161,null)}function L(t){var i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),R(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture,s=U(i);if(i.depthTexture.format===Lu)i.useRenderToTexture?v.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,s):e.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==Uu)throw new Error("Unknown depthTexture format");i.useRenderToTexture?v.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,s):e.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var s=0;s<6;s++)n.bindFramebuffer(36160,i.__webglFramebuffer[s]),i.__webglDepthbuffer[s]=e.createRenderbuffer(),F(i.__webglDepthbuffer[s],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),F(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function U(e){return c&&(e.useRenderbuffer||e.useRenderToTexture)?Math.min(d,e.samples):0}var Z=!1,B=!1;this.allocateTextureUnit=function(){var e=S;return e>=h&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+h),S+=1,e},this.resetTextureUnits=function(){S=0},this.setTexture2D=R,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?M(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?M(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=C,this.rebindTextures=function(e,t,n){var i=r.get(e);void 0!==t&&P(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&L(e)},this.setupRenderTarget=function(t){var o=t.texture,u=r.get(t),l=r.get(o);t.addEventListener("dispose",k),!0!==t.isWebGLMultipleRenderTargets&&(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=o.version,s.memory.textures++);var h=!0===t.isWebGLCubeRenderTarget,p=!0===t.isWebGLMultipleRenderTargets,f=o.isDataTexture3D||o.isDataTexture2DArray,d=T(t)||c;if(!c||o.format!==Ou||o.type!==wu&&o.type!==ku||(o.format=Nu,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){u.__webglFramebuffer=[];for(var v=0;v<6;v++)u.__webglFramebuffer[v]=e.createFramebuffer()}else if(u.__webglFramebuffer=e.createFramebuffer(),p)if(i.drawBuffers)for(var m=t.texture,y=0,g=m.length;y<g;y++){var _=r.get(m[y]);void 0===_.__webglTexture&&(_.__webglTexture=e.createTexture(),s.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(t.useRenderbuffer)if(c){u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,u.__webglColorRenderbuffer);var I=a.convert(o.format),w=a.convert(o.type),S=b(o.internalFormat,I,w,o.encoding),R=U(t);e.renderbufferStorageMultisample(36161,R,S,t.width,t.height),n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,u.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),F(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,l.__webglTexture),O(34067,o,d);for(var C=0;C<6;C++)P(u.__webglFramebuffer[C],t,o,36064,34069+C);E(o,d)&&x(34067),n.unbindTexture()}else if(p){for(var D=t.texture,A=0,N=D.length;A<N;A++){var M=D[A],Z=r.get(M);n.bindTexture(3553,Z.__webglTexture),O(3553,M,d),P(u.__webglFramebuffer,t,M,36064+A,3553),E(M,d)&&x(3553)}n.unbindTexture()}else{var B=3553;if(f)if(c)B=o.isDataTexture3D?32879:35866;else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(B,l.__webglTexture),O(B,o,d),P(u.__webglFramebuffer,t,o,36064,B),E(o,d)&&x(B),n.unbindTexture()}t.depthBuffer&&L(t)},this.updateRenderTargetMipmap=function(e){for(var t=T(e)||c,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,s=i.length;a<s;a++){var o=i[a];if(E(o,t)){var u=e.isWebGLCubeRenderTarget?34067:3553,l=r.get(o).__webglTexture;n.bindTexture(u,l),x(u),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.useRenderbuffer)if(c){var i=t.width,a=t.height,s=16384,o=[36064],u=t.stencilBuffer?33306:36096;t.depthBuffer&&o.push(u),t.ignoreDepthForMultisampleCopy||(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024));var l=r.get(t);n.bindFramebuffer(36008,l.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,l.__webglFramebuffer),t.ignoreDepthForMultisampleCopy&&(e.invalidateFramebuffer(36008,[u]),e.invalidateFramebuffer(36009,[u])),e.blitFramebuffer(0,0,i,a,0,0,i,a,s,9728),e.invalidateFramebuffer(36008,o),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,l.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=L,this.setupFrameBufferTexture=P,this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===Z&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Z=!0),e=e.texture),R(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),C(e,t)}}function Gv(e,t,n){var r=n.isWebGL2;return{convert:function(e){var n;if(e===_u)return 5121;if(e===Su)return 32819;if(e===Ru)return 32820;if(e===Cu)return 33635;if(e===Tu)return 5120;if(e===Eu)return 5122;if(e===xu)return 5123;if(e===bu)return 5124;if(e===Iu)return 5125;if(e===wu)return 5126;if(e===ku)return r?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(e===Au)return 6406;if(e===Ou)return 6407;if(e===Nu)return 6408;if(e===Mu)return 6409;if(e===Pu)return 6410;if(e===Lu)return 6402;if(e===Uu)return 34041;if(e===Zu)return 6403;if(e===Bu)return 36244;if(e===zu)return 33319;if(e===Gu)return 33320;if(e===Hu)return 36248;if(e===ju)return 36249;if(e===Vu||e===Wu||e===Yu||e===qu){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(e===Vu)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Wu)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Yu)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===qu)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===Xu||e===Ku||e===Qu||e===Ju){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===Xu)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Ku)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Qu)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Ju)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===$u)return null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===el||e===tl)&&null!==(n=t.get("WEBGL_compressed_texture_etc"))){if(e===el)return n.COMPRESSED_RGB8_ETC2;if(e===tl)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===nl||e===rl||e===il||e===al||e===sl||e===ol||e===ul||e===ll||e===cl||e===hl||e===pl||e===fl||e===dl||e===vl||e===yl||e===gl||e===_l||e===Tl||e===El||e===xl||e===bl||e===Il||e===wl||e===kl||e===Sl||e===Rl||e===Cl||e===Dl?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:e===ml?null!==(n=t.get("EXT_texture_compression_bptc"))?e:null:e===Du?r?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}var Hv=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,s.Z)(this,n),(e=t.call(this)).cameras=r,e}return(0,o.Z)(n)}(Hp);Hv.prototype.isArrayCamera=!0;var jv=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this)).type="Group",e}return(0,o.Z)(n)}(Mh);jv.prototype.isGroup=!0;var Vv={type:"move"},Wv=function(){function e(){(0,s.Z)(this,e),this._targetRay=null,this._grip=null,this._hand=null}return(0,o.Z)(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new jv,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new jv,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Oc,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Oc),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new jv,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Oc,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Oc),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,a=null,s=this._targetRay,o=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==s&&null!==(r=t.getPose(e.targetRaySpace,n))&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Vv)),u&&e.hand){a=!0;var l,c=b(e.hand.values());try{for(c.s();!(l=c.n()).done;){var h=l.value,p=t.getJointPose(h,n);if(void 0===u.joints[h.jointName]){var f=new jv;f.matrixAutoUpdate=!1,f.visible=!1,u.joints[h.jointName]=f,u.add(f)}var d=u.joints[h.jointName];null!==p&&(d.matrix.fromArray(p.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.jointRadius=p.radius),d.visible=null!==p}}catch(g){c.e(g)}finally{c.f()}var v=u.joints["index-finger-tip"],m=u.joints["thumb-tip"],y=v.position.distanceTo(m.position);u.inputState.pinching&&y>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&y<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1);return null!==s&&(s.visible=null!==r),null!==o&&(o.visible=null!==i),null!==u&&(u.visible=null!==a),this}}]),e}(),Yv=function(e){l(n,e);var t=v(n);function n(e,r,i,a,o,u,l,c,h,p){var f;if((0,s.Z)(this,n),(p=void 0!==p?p:Lu)!==Lu&&p!==Uu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&p===Lu&&(i=xu),void 0===i&&p===Uu&&(i=Du),(f=t.call(this,null,a,o,u,l,c,p,i,h)).image={width:e,height:r},f.magFilter=void 0!==l?l:fu,f.minFilter=void 0!==c?c:fu,f.flipY=!1,f.generateMipmaps=!1,f}return(0,o.Z)(n)}(wc);Yv.prototype.isDepthTexture=!0;var qv=function(e){l(n,e);var t=v(n);function n(e,r){var i;(0,s.Z)(this,n);var a=f(i=t.call(this)),o=null,u=1,l=null,c="local-floor",h=e.extensions.has("WEBGL_multisampled_render_to_texture"),p=null,d=null,v=null,m=null,y=!1,g=null,_=r.getContextAttributes(),T=null,E=null,x=[],b=new Map,I=new Hp;I.layers.enable(1),I.viewport=new Sc;var w=new Hp;w.layers.enable(2),w.viewport=new Sc;var k=[I,w],S=new Hv;S.layers.enable(1),S.layers.enable(2);var R=null,C=null;function D(e){var t=b.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function A(){b.forEach((function(e,t){e.disconnect(t)})),b.clear(),R=null,C=null,e.setRenderTarget(T),m=null,v=null,d=null,o=null,E=null,L.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function O(e){for(var t=o.inputSources,n=0;n<x.length;n++)b.set(t[n],x[n]);for(var r=0;r<e.removed.length;r++){var i=e.removed[r],a=b.get(i);a&&(a.dispatchEvent({type:"disconnected",data:i}),b.delete(i))}for(var s=0;s<e.added.length;s++){var u=e.added[s],l=b.get(u);l&&l.dispatchEvent({type:"connected",data:u})}}i.cameraAutoUpdate=!0,i.enabled=!1,i.isPresenting=!1,i.getController=function(e){var t=x[e];return void 0===t&&(t=new Wv,x[e]=t),t.getTargetRaySpace()},i.getControllerGrip=function(e){var t=x[e];return void 0===t&&(t=new Wv,x[e]=t),t.getGripSpace()},i.getHand=function(e){var t=x[e];return void 0===t&&(t=new Wv,x[e]=t),t.getHandSpace()},i.setFramebufferScaleFactor=function(e){u=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(e){c=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return l},i.getBaseLayer=function(){return null!==v?v:m},i.getBinding=function(){return d},i.getFrame=function(){return g},i.getSession=function(){return o},i.setSession=function(){var t=(0,ht.Z)((0,ct.Z)().mark((function t(n){var i,s,p,f,g;return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(o=n)){t.next=23;break}if(T=e.getRenderTarget(),o.addEventListener("select",D),o.addEventListener("selectstart",D),o.addEventListener("selectend",D),o.addEventListener("squeeze",D),o.addEventListener("squeezestart",D),o.addEventListener("squeezeend",D),o.addEventListener("end",A),o.addEventListener("inputsourceschange",O),!0===_.xrCompatible){t.next=14;break}return t.next=14,r.makeXRCompatible();case 14:return void 0===o.renderState.layers||!1===e.capabilities.isWebGL2?(i={antialias:void 0!==o.renderState.layers||_.antialias,alpha:_.alpha,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:u},m=new XRWebGLLayer(o,r,i),o.updateRenderState({baseLayer:m}),E=new Rc(m.framebufferWidth,m.framebufferHeight)):(y=_.antialias,s=null,p=null,f=null,_.depth&&(f=_.stencil?35056:33189,s=_.stencil?Uu:Lu,p=_.stencil?Du:xu),g={colorFormat:_.alpha||y?32856:32849,depthFormat:f,scaleFactor:u},d=new XRWebGLBinding(o,r),v=d.createProjectionLayer(g),o.updateRenderState({layers:[v]}),E=y?new Dc(v.textureWidth,v.textureHeight,{format:Nu,type:_u,depthTexture:new Yv(v.textureWidth,v.textureHeight,p,void 0,void 0,void 0,void 0,void 0,void 0,s),stencilBuffer:_.stencil,ignoreDepth:v.ignoreDepthValues,useRenderToTexture:h}):new Rc(v.textureWidth,v.textureHeight,{format:_.alpha?Nu:Ou,type:_u,depthTexture:new Yv(v.textureWidth,v.textureHeight,p,void 0,void 0,void 0,void 0,void 0,void 0,s),stencilBuffer:_.stencil,ignoreDepth:v.ignoreDepthValues})),this.setFoveation(0),t.next=18,o.requestReferenceSpace(c);case 18:l=t.sent,L.setContext(o),L.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 23:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var N=new Oc,M=new Oc;function P(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}i.updateCamera=function(e){if(null!==o){S.near=w.near=I.near=e.near,S.far=w.far=I.far=e.far,R===S.near&&C===S.far||(o.updateRenderState({depthNear:S.near,depthFar:S.far}),R=S.near,C=S.far);var t=e.parent,n=S.cameras;P(S,t);for(var r=0;r<n.length;r++)P(n[r],t);S.matrixWorld.decompose(S.position,S.quaternion,S.scale),e.position.copy(S.position),e.quaternion.copy(S.quaternion),e.scale.copy(S.scale),e.matrix.copy(S.matrix),e.matrixWorld.copy(S.matrixWorld);for(var i=e.children,a=0,s=i.length;a<s;a++)i[a].updateMatrixWorld(!0);2===n.length?function(e,t,n){N.setFromMatrixPosition(t.matrixWorld),M.setFromMatrixPosition(n.matrixWorld);var r=N.distanceTo(M),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,s=i[14]/(i[10]-1),o=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(a[8]+1)/a[0],p=s*c,f=s*h,d=r/(-c+h),v=d*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(d),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=s+d,y=o+d,g=p-v,_=f+(r-v),T=u*o/y*m,E=l*o/y*m;e.projectionMatrix.makePerspective(g,_,T,E,m,y)}(S,I,w):S.projectionMatrix.copy(I.projectionMatrix)}},i.getCamera=function(){return S},i.getFoveation=function(){return null!==v?v.fixedFoveation:null!==m?m.fixedFoveation:void 0},i.setFoveation=function(e){null!==v&&(v.fixedFoveation=e),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=e)};var F=null;var L=new nf;return L.setAnimationLoop((function(t,n){if(p=n.getViewerPose(l),g=n,null!==p){var r=p.views;null!==m&&(e.setRenderTargetFramebuffer(E,m.framebuffer),e.setRenderTarget(E));var i=!1;r.length!==S.cameras.length&&(S.cameras.length=0,i=!0);for(var a=0;a<r.length;a++){var s=r[a],u=null;if(null!==m)u=m.getViewport(s);else{var c=d.getViewSubImage(v,s);u=c.viewport,0===a&&(e.setRenderTargetTextures(E,c.colorTexture,v.ignoreDepthValues?void 0:c.depthStencilTexture),e.setRenderTarget(E))}var h=k[a];h.matrix.fromArray(s.transform.matrix),h.projectionMatrix.fromArray(s.projectionMatrix),h.viewport.set(u.x,u.y,u.width,u.height),0===a&&S.matrix.copy(h.matrix),!0===i&&S.cameras.push(h)}}for(var f=o.inputSources,y=0;y<x.length;y++){var _=x[y],T=f[y];_.update(T,n,l)}F&&F(t,n),g=null})),i.setAnimationLoop=function(e){F=e},i.dispose=function(){},i}return(0,o.Z)(n)}(rc);function Xv(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap),n.alphaTest>0&&(t.alphaTest.value=n.alphaTest);var r,i,a=e.get(n).envMap;a&&(t.envMap.value=a,t.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.ior.value=n.ior,t.refractionRatio.value=n.refractionRatio),n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularColorMap?r=n.specularColorMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap?r=n.thicknessMap:n.sheenColorMap?r=n.sheenColorMap:n.sheenRoughnessMap&&(r=n.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?i=n.aoMap:n.lightMap&&(i=n.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===yo&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===yo&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,a,s){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===yo&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===yo&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===yo&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===yo&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===yo&&e.clearcoatNormalScale.value.negate()));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,s):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===yo&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===yo&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===yo&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===yo&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,a):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Kv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0!==e.canvas?e.canvas:function(){var e=Ec("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,h=null,p=null,f=[],d=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=zl,this.physicallyCorrectLights=!1,this.toneMapping=Jo,this.toneMappingExposure=1;var v=this,m=!1,y=0,g=0,_=null,T=-1,E=null,x=new Sc,b=new Sc,I=null,w=t.width,k=t.height,S=1,R=null,C=null,D=new Sc(0,0,w,k),A=new Sc(0,0,w,k),O=!1,N=[],M=new tf,P=!1,F=!1,L=null,U=new lh,Z=new Oc,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function z(){return null===_?S:1}var G,H,j,V,W,Y,q,X,K,Q,J,$,ee,te,ne,re,ie,ae,se,oe,ue,le,ce,he=n;function pe(e,n){for(var r=0;r<e.length;r++){var i=e[r],a=t.getContext(i,n);if(null!==a)return a}return null}try{var fe={alpha:r,depth:i,stencil:a,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(oo)),t.addEventListener("webglcontextlost",ye,!1),t.addEventListener("webglcontextrestored",ge,!1),null===he){var de=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&de.shift(),null===(he=pe(de,fe)))throw pe(de)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(De){throw console.error("THREE.WebGLRenderer: "+De.message),De}function ve(){G=new Gf(he),H=new pf(he,G,e),G.init(H),le=new Gv(he,G,H),j=new Bv(he,G,H),N[0]=1029,V=new Vf(he),W=new Iv,Y=new zv(he,G,j,W,H,le,V),q=new df(v),X=new zf(v),K=new rf(he,H),ce=new cf(he,G,K,H),Q=new Hf(he,K,V,ce),J=new Qf(he,Q,K,V),se=new Kf(he,H,Y),re=new ff(W),$=new bv(v,q,X,G,H,ce,re),ee=new Xv(W),te=new Rv(W),ne=new Mv(G,H),ae=new lf(v,q,j,J,o),ie=new Zv(v,J,H),oe=new hf(he,G,V,H),ue=new jf(he,G,V,H),V.programs=$.programs,v.capabilities=H,v.extensions=G,v.properties=W,v.renderLists=te,v.shadowMap=ie,v.state=j,v.info=V}ve();var me=new qv(v,he);function ye(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var e=V.autoReset,t=ie.enabled,n=ie.autoUpdate,r=ie.needsUpdate,i=ie.type;ve(),V.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=r,ie.type=i}function _e(e){var t=e.target;t.removeEventListener("dispose",_e),function(e){(function(e){var t=W.get(e).programs;void 0!==t&&t.forEach((function(e){$.releaseProgram(e)}))})(e),W.remove(e)}(t)}this.xr=me,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){var e=G.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=G.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return S},this.setPixelRatio=function(e){void 0!==e&&(S=e,this.setSize(w,k,!1))},this.getSize=function(e){return e.set(w,k)},this.setSize=function(e,n,r){me.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(w=e,k=n,t.width=Math.floor(e*S),t.height=Math.floor(n*S),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(w*S,k*S).floor()},this.setDrawingBufferSize=function(e,n,r){w=e,k=n,S=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(x)},this.getViewport=function(e){return e.copy(D)},this.setViewport=function(e,t,n,r){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,r),j.viewport(x.copy(D).multiplyScalar(S).floor())},this.getScissor=function(e){return e.copy(A)},this.setScissor=function(e,t,n,r){e.isVector4?A.set(e.x,e.y,e.z,e.w):A.set(e,t,n,r),j.scissor(b.copy(A).multiplyScalar(S).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(e){j.setScissorTest(O=e)},this.setOpaqueSort=function(e){R=e},this.setTransparentSort=function(e){C=e},this.getClearColor=function(e){return e.copy(ae.getClearColor())},this.setClearColor=function(){ae.setClearColor.apply(ae,arguments)},this.getClearAlpha=function(){return ae.getClearAlpha()},this.setClearAlpha=function(){ae.setClearAlpha.apply(ae,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),he.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ye,!1),t.removeEventListener("webglcontextrestored",ge,!1),te.dispose(),ne.dispose(),W.dispose(),q.dispose(),X.dispose(),J.dispose(),ce.dispose(),me.dispose(),me.removeEventListener("sessionstart",Ee),me.removeEventListener("sessionend",xe),L&&(L.dispose(),L=null),be.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=B);var s=i.isMesh&&i.matrixWorld.determinant()<0,o=function(e,t,n,r,i){!0!==t.isScene&&(t=B);Y.resetTextureUnits();var a=t.fog,s=r.isMeshStandardMaterial?t.environment:null,o=null===_?v.outputEncoding:_.texture.encoding,u=(r.isMeshStandardMaterial?X:q).get(r.envMap||s),l=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,f=!!n.morphAttributes.normal,d=n.morphAttributes.position?n.morphAttributes.position.length:0,m=W.get(r),y=p.state.lights;if(!0===P&&(!0===F||e!==E)){var g=e===E&&r.id===T;re.setState(r,e,g)}var x=!1;r.version===m.__version?m.needsLights&&m.lightsStateVersion!==y.state.version||m.outputEncoding!==o||i.isInstancedMesh&&!1===m.instancing?x=!0:i.isInstancedMesh||!0!==m.instancing?i.isSkinnedMesh&&!1===m.skinning?x=!0:i.isSkinnedMesh||!0!==m.skinning?m.envMap!==u||r.fog&&m.fog!==a?x=!0:void 0===m.numClippingPlanes||m.numClippingPlanes===re.numPlanes&&m.numIntersection===re.numIntersection?(m.vertexAlphas!==l||m.vertexTangents!==c||m.morphTargets!==h||m.morphNormals!==f||!0===H.isWebGL2&&m.morphTargetsCount!==d)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,m.__version=r.version);var b=m.currentProgram;!0===x&&(b=Re(r,t,i));var I=!1,w=!1,R=!1,C=b.getUniforms(),D=m.uniforms;j.useProgram(b.program)&&(I=!0,w=!0,R=!0);r.id!==T&&(T=r.id,w=!0);if(I||E!==e){if(C.setValue(he,"projectionMatrix",e.projectionMatrix),H.logarithmicDepthBuffer&&C.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),E!==e&&(E=e,w=!0,R=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var A=C.map.cameraPosition;void 0!==A&&A.setValue(he,Z.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&C.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&C.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){C.setOptional(he,i,"bindMatrix"),C.setOptional(he,i,"bindMatrixInverse");var O=i.skeleton;O&&(H.floatVertexTextures?(null===O.boneTexture&&O.computeBoneTexture(),C.setValue(he,"boneTexture",O.boneTexture,Y),C.setValue(he,"boneTextureSize",O.boneTextureSize)):C.setOptional(he,O,"boneMatrices"))}!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||se.update(i,n,r,b);(w||m.receiveShadow!==i.receiveShadow)&&(m.receiveShadow=i.receiveShadow,C.setValue(he,"receiveShadow",i.receiveShadow));w&&(C.setValue(he,"toneMappingExposure",v.toneMappingExposure),m.needsLights&&(M=R,(N=D).ambientLightColor.needsUpdate=M,N.lightProbe.needsUpdate=M,N.directionalLights.needsUpdate=M,N.directionalLightShadows.needsUpdate=M,N.pointLights.needsUpdate=M,N.pointLightShadows.needsUpdate=M,N.spotLights.needsUpdate=M,N.spotLightShadows.needsUpdate=M,N.rectAreaLights.needsUpdate=M,N.hemisphereLights.needsUpdate=M),a&&r.fog&&ee.refreshFogUniforms(D,a),ee.refreshMaterialUniforms(D,r,S,k,L),nv.upload(he,m.uniformsList,D,Y));var N,M;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(nv.upload(he,m.uniformsList,D,Y),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&C.setValue(he,"center",i.center);return C.setValue(he,"modelViewMatrix",i.modelViewMatrix),C.setValue(he,"normalMatrix",i.normalMatrix),C.setValue(he,"modelMatrix",i.matrixWorld),b}(e,t,n,r,i);j.setMaterial(r,s);var u=n.index,l=n.attributes.position;if(null===u){if(void 0===l||0===l.count)return}else if(0===u.count)return;var c,h=1;!0===r.wireframe&&(u=Q.getWireframeAttribute(n),h=2),ce.setup(i,r,o,n,u);var f=oe;null!==u&&(c=K.get(u),(f=ue).setIndex(c));var d=null!==u?u.count:l.count,m=n.drawRange.start*h,y=n.drawRange.count*h,g=null!==a?a.start*h:0,x=null!==a?a.count*h:1/0,b=Math.max(m,g),I=Math.min(d,m+y,g+x)-1,w=Math.max(0,I-b+1);if(0!==w){if(i.isMesh)!0===r.wireframe?(j.setLineWidth(r.wireframeLinewidth*z()),f.setMode(1)):f.setMode(4);else if(i.isLine){var R=r.linewidth;void 0===R&&(R=1),j.setLineWidth(R*z()),i.isLineSegments?f.setMode(1):i.isLineLoop?f.setMode(2):f.setMode(3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);if(i.isInstancedMesh)f.renderInstances(b,w,i.count);else if(n.isInstancedBufferGeometry){var C=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(b,w,C)}else f.render(b,w)}},this.compile=function(e,t){(p=ne.get(e)).init(),d.push(p),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(p.pushLight(e),e.castShadow&&p.pushShadow(e))})),p.setupLights(v.physicallyCorrectLights),e.traverse((function(t){var n=t.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++){Re(n[r],e,t)}else Re(n,e,t)})),d.pop(),p=null};var Te=null;function Ee(){be.stop()}function xe(){be.start()}var be=new nf;function Ie(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)p.pushLight(e),e.castShadow&&p.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||M.intersectsSprite(e)){r&&Z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);var i=J.update(e),a=e.material;a.visible&&h.push(e,i,a,n,Z.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==V.render.frame&&(e.skeleton.update(),e.skeleton.frame=V.render.frame),!e.frustumCulled||M.intersectsObject(e))){r&&Z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);var s=J.update(e),o=e.material;if(Array.isArray(o))for(var u=s.groups,l=0,c=u.length;l<c;l++){var f=u[l],d=o[f.materialIndex];d&&d.visible&&h.push(e,s,d,n,Z.z,f)}else o.visible&&h.push(e,s,o,n,Z.z,null)}for(var v=e.children,m=0,y=v.length;m<y;m++)Ie(v[m],t,n,r)}}function we(e,t,n,r){var i=e.opaque,a=e.transmissive,o=e.transparent;p.setupLightsView(n),a.length>0&&function(e,t,n){if(null===L){var r=!0===s&&!0===H.isWebGL2;L=new(r?Dc:Rc)(1024,1024,{generateMipmaps:!0,type:null!==le.convert(ku)?ku:_u,minFilter:gu,magFilter:fu,wrapS:hu,wrapT:hu,useRenderToTexture:G.has("WEBGL_multisampled_render_to_texture")})}var i=v.getRenderTarget();v.setRenderTarget(L),v.clear();var a=v.toneMapping;v.toneMapping=Jo,ke(e,t,n),v.toneMapping=a,Y.updateMultisampleRenderTarget(L),Y.updateRenderTargetMipmap(L),v.setRenderTarget(i)}(i,t,n),r&&j.viewport(x.copy(r)),i.length>0&&ke(i,t,n),a.length>0&&ke(a,t,n),o.length>0&&ke(o,t,n)}function ke(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var s=e[i],o=s.object,u=s.geometry,l=null===r?s.material:r,c=s.group;o.layers.test(n.layers)&&Se(o,t,n,u,l,c)}}function Se(e,t,n,r,i,a){e.onBeforeRender(v,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(v,t,n,r,e,a),!0===i.transparent&&i.side===go?(i.side=yo,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,a),i.side=mo,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,a),i.side=go):v.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(v,t,n,r,i,a)}function Re(e,t,n){!0!==t.isScene&&(t=B);var r=W.get(e),i=p.state.lights,a=p.state.shadowsArray,s=i.state.version,o=$.getParameters(e,i.state,a,t,n),u=$.getProgramCacheKey(o),l=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?X:q).get(e.envMap||r.environment),void 0===l&&(e.addEventListener("dispose",_e),l=new Map,r.programs=l);var c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===s)return Ce(e,o),c}else o.uniforms=$.getUniforms(e),e.onBuild(n,o,v),e.onBeforeCompile(o,v),c=$.acquireProgram(o,u),l.set(u,c),r.uniforms=o.uniforms;var h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=re.uniform),Ce(e,o),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=s,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);var f=c.getUniforms(),d=nv.seqWithValue(f.seq,h);return r.currentProgram=c,r.uniformsList=d,c}function Ce(e,t){var n=W.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents}be.setAnimationLoop((function(e){Te&&Te(e)})),"undefined"!==typeof window&&be.setContext(window),this.setAnimationLoop=function(e){Te=e,me.setAnimationLoop(e),null===e?be.stop():be.start()},me.addEventListener("sessionstart",Ee),me.addEventListener("sessionend",xe),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==m){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===me.enabled&&!0===me.isPresenting&&(!0===me.cameraAutoUpdate&&me.updateCamera(t),t=me.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,_),(p=ne.get(e,d.length)).init(),d.push(p),U.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),M.setFromProjectionMatrix(U),F=this.localClippingEnabled,P=re.init(this.clippingPlanes,F,t),(h=te.get(e,f.length)).init(),f.push(h),Ie(e,t,0,v.sortObjects),h.finish(),!0===v.sortObjects&&h.sort(R,C),!0===P&&re.beginShadows();var n=p.state.shadowsArray;if(ie.render(n,e,t),!0===P&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),ae.render(h,e),p.setupLights(v.physicallyCorrectLights),t.isArrayCamera)for(var r=t.cameras,i=0,a=r.length;i<a;i++){var s=r[i];we(h,e,s,s.viewport)}else we(h,e,t);null!==_&&(Y.updateMultisampleRenderTarget(_),Y.updateRenderTargetMipmap(_)),!0===e.isScene&&e.onAfterRender(v,e,t),j.buffers.depth.setTest(!0),j.buffers.depth.setMask(!0),j.buffers.color.setMask(!0),j.setPolygonOffset(!1),ce.resetDefaultState(),T=-1,E=null,d.pop(),p=d.length>0?d[d.length-1]:null,f.pop(),h=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return g},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(e,t,n){W.get(e.texture).__webglTexture=t,W.get(e.depthTexture).__webglTexture=n;var r=W.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||e.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),e.useRenderToTexture=!1,e.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(e,t){var n=W.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_=e,y=t,g=n;var r=!0;if(e){var i=W.get(e);void 0!==i.__useDefaultFramebuffer?(j.bindFramebuffer(36160,null),r=!1):void 0===i.__webglFramebuffer?Y.setupRenderTarget(e):i.__hasExternalTextures&&Y.rebindTextures(e,W.get(e.texture).__webglTexture,W.get(e.depthTexture).__webglTexture)}var a=null,s=!1,o=!1;if(e){var u=e.texture;(u.isDataTexture3D||u.isDataTexture2DArray)&&(o=!0);var l=W.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(a=l[t],s=!0):a=e.useRenderbuffer?W.get(e).__webglMultisampledFramebuffer:l,x.copy(e.viewport),b.copy(e.scissor),I=e.scissorTest}else x.copy(D).multiplyScalar(S).floor(),b.copy(A).multiplyScalar(S).floor(),I=O;if(j.bindFramebuffer(36160,a)&&H.drawBuffers&&r){var c=!1;if(e)if(e.isWebGLMultipleRenderTargets){var h=e.texture;if(N.length!==h.length||36064!==N[0]){for(var p=0,f=h.length;p<f;p++)N[p]=36064+p;N.length=h.length,c=!0}}else 1===N.length&&36064===N[0]||(N[0]=36064,N.length=1,c=!0);else 1===N.length&&1029===N[0]||(N[0]=1029,N.length=1,c=!0);c&&(H.isWebGL2?he.drawBuffers(N):G.get("WEBGL_draw_buffers").drawBuffersWEBGL(N))}if(j.viewport(x),j.scissor(b),j.setScissorTest(I),s){var d=W.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,d.__webglTexture,n)}else if(o){var v=W.get(e.texture),m=t||0;he.framebufferTextureLayer(36160,36064,v.__webglTexture,n||0,m)}T=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,s){if(e&&e.isWebGLRenderTarget){var o=W.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){j.bindFramebuffer(36160,o);try{var u=e.texture,l=u.format,c=u.type;if(l!==Nu&&le.convert(l)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=c===ku&&(G.has("EXT_color_buffer_half_float")||H.isWebGL2&&G.has("EXT_color_buffer_float"));if(c!==_u&&le.convert(c)!==he.getParameter(35738)&&(c!==wu||!(H.isWebGL2||G.has("OES_texture_float")||G.has("WEBGL_color_buffer_float")))&&!h)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===he.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&he.readPixels(t,n,r,i,le.convert(l),le.convert(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var p=null!==_?W.get(_).__webglFramebuffer:null;j.bindFramebuffer(36160,p)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r),s=le.convert(t.format);H.isWebGL2&&(6407===s&&(s=32849),6408===s&&(s=32856)),Y.setTexture2D(t,0),he.copyTexImage2D(3553,n,s,e.x,e.y,i,a,0),j.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,a=t.image.height,s=le.convert(n.format),o=le.convert(n.type);Y.setTexture2D(n,0),he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,r,e.x,e.y,i,a,s,o,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):he.texSubImage2D(3553,r,e.x,e.y,s,o,t.image),0===r&&n.generateMipmaps&&he.generateMipmap(3553),j.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(v.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,s=e.max.x-e.min.x+1,o=e.max.y-e.min.y+1,u=e.max.z-e.min.z+1,l=le.convert(r.format),c=le.convert(r.type);if(r.isDataTexture3D)Y.setTexture3D(r,0),a=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Y.setTexture2DArray(r,0),a=35866}he.pixelStorei(37440,r.flipY),he.pixelStorei(37441,r.premultiplyAlpha),he.pixelStorei(3317,r.unpackAlignment);var h=he.getParameter(3314),p=he.getParameter(32878),f=he.getParameter(3316),d=he.getParameter(3315),m=he.getParameter(32877),y=n.isCompressedTexture?n.mipmaps[0]:n.image;he.pixelStorei(3314,y.width),he.pixelStorei(32878,y.height),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?he.texSubImage3D(a,i,t.x,t.y,t.z,s,o,u,l,c,y.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(a,i,t.x,t.y,t.z,s,o,u,l,y.data)):he.texSubImage3D(a,i,t.x,t.y,t.z,s,o,u,l,c,y),he.pixelStorei(3314,h),he.pixelStorei(32878,p),he.pixelStorei(3316,f),he.pixelStorei(3315,d),he.pixelStorei(32877,m),0===i&&r.generateMipmaps&&he.generateMipmap(a),j.unbindTexture()}},this.initTexture=function(e){Y.setTexture2D(e,0),j.unbindTexture()},this.resetState=function(){y=0,g=0,_=null,j.reset(),ce.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Kv.prototype.isWebGLRenderer=!0;var Qv=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(Kv);Qv.prototype.isWebGL1Renderer=!0;var Jv=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;(0,s.Z)(this,e),this.name="",this.color=new ep(t),this.density=n}return(0,o.Z)(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}();Jv.prototype.isFogExp2=!0;var $v=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;(0,s.Z)(this,e),this.name="",this.color=new ep(t),this.near=n,this.far=r}return(0,o.Z)(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}();$v.prototype.isFog=!0;var em=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this)).type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:f(e)})),e}return(0,o.Z)(n,[{key:"copy",value:function(e,t){return lt(c(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=lt(c(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}]),n}(Mh);em.prototype.isScene=!0;var tm=function(){function e(t,n){(0,s.Z)(this,e),this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=ec,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=lc()}return(0,o.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=lc()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=lc()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}();tm.prototype.isInterleavedBuffer=!0;var nm=new Oc,rm=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,s.Z)(this,e),this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=!0===i}return(0,o.Z)(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)nm.x=this.getX(t),nm.y=this.getY(t),nm.z=this.getZ(t),nm.applyMatrix4(e),this.setXYZ(t,nm.x,nm.y,nm.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)nm.x=this.getX(t),nm.y=this.getY(t),nm.z=this.getZ(t),nm.applyNormalMatrix(e),this.setXYZ(t,nm.x,nm.y,nm.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)nm.x=this.getX(t),nm.y=this.getY(t),nm.z=this.getZ(t),nm.transformDirection(e),this.setXYZ(t,nm.x,nm.y,nm.z);return this}},{key:"setX",value:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){return this.data.array[e*this.data.stride+this.offset]}},{key:"getY",value:function(e){return this.data.array[e*this.data.stride+this.offset+1]}},{key:"getZ",value:function(e){return this.data.array[e*this.data.stride+this.offset+2]}},{key:"getW",value:function(e){return this.data.array[e*this.data.stride+this.offset+3]}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[i+a]);return new ip(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}();rm.prototype.isInterleavedBufferAttribute=!0;var im,am=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).type="SpriteMaterial",r.color=new ep(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.setValues(e),r}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(Yh);am.prototype.isSpriteMaterial=!0;var sm=new Oc,om=new Oc,um=new Oc,lm=new yc,cm=new yc,hm=new lh,pm=new Oc,fm=new Oc,dm=new Oc,vm=new yc,mm=new yc,ym=new yc,gm=function(e){l(n,e);var t=v(n);function n(e){var r;if((0,s.Z)(this,n),(r=t.call(this)).type="Sprite",void 0===im){im=new vp;var i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new tm(i,5);im.setIndex([0,1,2,0,2,3]),im.setAttribute("position",new rm(a,3,0,!1)),im.setAttribute("uv",new rm(a,2,3,!1))}return r.geometry=im,r.material=void 0!==e?e:new am,r.center=new yc(.5,.5),r}return(0,o.Z)(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),om.setFromMatrixScale(this.matrixWorld),hm.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),um.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&om.multiplyScalar(-um.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var a=this.center;_m(pm.set(-.5,-.5,0),um,a,om,n,r),_m(fm.set(.5,-.5,0),um,a,om,n,r),_m(dm.set(.5,.5,0),um,a,om,n,r),vm.set(0,0),mm.set(1,0),ym.set(1,1);var s=e.ray.intersectTriangle(pm,fm,dm,!1,sm);if(null!==s||(_m(fm.set(-.5,.5,0),um,a,om,n,r),mm.set(0,1),null!==(s=e.ray.intersectTriangle(pm,dm,fm,!1,sm)))){var o=e.ray.origin.distanceTo(sm);o<e.near||o>e.far||t.push({distance:o,point:sm.clone(),uv:Vh.getUV(sm,pm,fm,dm,vm,mm,ym,new yc),face:null,object:this})}}},{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(Mh);function _m(e,t,n,r,i,a){lm.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(cm.x=a*lm.x-i*lm.y,cm.y=i*lm.x+a*lm.y):cm.copy(lm),e.copy(t),e.x+=cm.x,e.y+=cm.y,e.applyMatrix4(hm)}gm.prototype.isSprite=!0;var Tm=new Oc,Em=new Sc,xm=new Sc,bm=new Oc,Im=new lh,wm=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this,e,r)).type="SkinnedMesh",i.bindMode="attached",i.bindMatrix=new lh,i.bindMatrixInverse=new lh,i}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new Sc,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){lt(c(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;Em.fromBufferAttribute(r.attributes.skinIndex,e),xm.fromBufferAttribute(r.attributes.skinWeight,e),Tm.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var a=xm.getComponent(i);if(0!==a){var s=Em.getComponent(i);Im.multiplyMatrices(n.bones[s].matrixWorld,n.boneInverses[s]),t.addScaledVector(bm.copy(Tm).applyMatrix4(Im),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(Np);wm.prototype.isSkinnedMesh=!0;var km=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this)).type="Bone",e}return(0,o.Z)(n)}(Mh);km.prototype.isBone=!0;var Sm=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:fu,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:fu,d=arguments.length>10?arguments[10]:void 0,v=arguments.length>11?arguments[11]:void 0;return(0,s.Z)(this,n),(e=t.call(this,null,l,c,h,p,f,o,u,d,v)).image={data:r,width:i,height:a},e.magFilter=p,e.minFilter=f,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,o.Z)(n)}(wc);Sm.prototype.isDataTexture=!0;var Rm=new lh,Cm=new lh,Dm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,s.Z)(this,e),this.uuid=lc(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return(0,o.Z)(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new lh)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new lh;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,i=this.bones.length;r<i;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var s=e[i]?e[i].matrixWorld:Cm;Rm.multiplyMatrices(s,t[i]),Rm.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=dc(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new Sm(t,e,e,Nu,wu);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var i=e.bones[n],a=t[i];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),a=new km),this.bones.push(a),this.boneInverses.push((new lh).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,i=t.length;r<i;r++){var a=t[r];e.bones.push(a.uuid);var s=n[r];e.boneInverses.push(s.toArray())}return e}}]),e}(),Am=function(e){l(n,e);var t=v(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,s.Z)(this,n),"number"===typeof i&&(o=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(a=t.call(this,e,r,i)).meshPerAttribute=o,a}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=lt(c(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(ip);Am.prototype.isInstancedBufferAttribute=!0;var Om=new lh,Nm=new lh,Mm=[],Pm=new Np,Fm=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;return(0,s.Z)(this,n),(a=t.call(this,e,r)).instanceMatrix=new Am(new Float32Array(16*i),16),a.instanceColor=null,a.count=i,a.frustumCulled=!1,a}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(Pm.geometry=this.geometry,Pm.material=this.material,void 0!==Pm.material)for(var i=0;i<r;i++){this.getMatrixAt(i,Om),Nm.multiplyMatrices(n,Om),Pm.matrixWorld=Nm,Pm.raycast(e,Mm);for(var a=0,s=Mm.length;a<s;a++){var o=Mm[a];o.instanceId=i,o.object=this,t.push(o)}Mm.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new Am(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Np);Fm.prototype.isInstancedMesh=!0;var Lm=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).type="LineBasicMaterial",r.color=new ep(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.setValues(e),r}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}]),n}(Yh);Lm.prototype.isLineBasicMaterial=!0;var Um=new Oc,Zm=new Oc,Bm=new lh,zm=new uh,Gm=new eh,Hm=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vp,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Lm;return(0,s.Z)(this,n),(e=t.call(this)).type="Line",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)Um.fromBufferAttribute(t,r-1),Zm.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Um.distanceTo(Zm);e.setAttribute("lineDistance",new op(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Gm.copy(n.boundingSphere),Gm.applyMatrix4(r),Gm.radius+=i,!1!==e.ray.intersectsSphere(Gm)){Bm.copy(r).invert(),zm.copy(e.ray).applyMatrix4(Bm);var s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,u=new Oc,l=new Oc,c=new Oc,h=new Oc,p=this.isLineSegments?2:1;if(n.isBufferGeometry){var f=n.index,d=n.attributes.position;if(null!==f)for(var v=Math.max(0,a.start),m=Math.min(f.count,a.start+a.count)-1;v<m;v+=p){var y=f.getX(v),g=f.getX(v+1);if(u.fromBufferAttribute(d,y),l.fromBufferAttribute(d,g),!(zm.distanceSqToSegment(u,l,h,c)>o)){h.applyMatrix4(this.matrixWorld);var _=e.ray.origin.distanceTo(h);_<e.near||_>e.far||t.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var T=Math.max(0,a.start),E=Math.min(d.count,a.start+a.count)-1;T<E;T+=p){if(u.fromBufferAttribute(d,T),l.fromBufferAttribute(d,T+1),!(zm.distanceSqToSegment(u,l,h,c)>o)){h.applyMatrix4(this.matrixWorld);var x=e.ray.origin.distanceTo(h);x<e.near||x>e.far||t.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var s=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}else{var o=e.morphTargets;void 0!==o&&o.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(Mh);Hm.prototype.isLine=!0;var jm=new Oc,Vm=new Oc,Wm=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this,e,r)).type="LineSegments",i}return(0,o.Z)(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)jm.fromBufferAttribute(t,r),Vm.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+jm.distanceTo(Vm);e.setAttribute("lineDistance",new op(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(Hm);Wm.prototype.isLineSegments=!0;var Ym=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this,e,r)).type="LineLoop",i}return(0,o.Z)(n)}(Hm);Ym.prototype.isLineLoop=!0;var qm=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).type="PointsMaterial",r.color=new ep(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.setValues(e),r}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(Yh);qm.prototype.isPointsMaterial=!0;var Xm=new lh,Km=new uh,Qm=new eh,Jm=new Oc,$m=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vp,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new qm;return(0,s.Z)(this,n),(e=t.call(this)).type="Points",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Qm.copy(n.boundingSphere),Qm.applyMatrix4(r),Qm.radius+=i,!1!==e.ray.intersectsSphere(Qm)){Xm.copy(r).invert(),Km.copy(e.ray).applyMatrix4(Xm);var s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s;if(n.isBufferGeometry){var u=n.index,l=n.attributes.position;if(null!==u)for(var c=Math.max(0,a.start),h=Math.min(u.count,a.start+a.count);c<h;c++){var p=u.getX(c);Jm.fromBufferAttribute(l,p),ey(Jm,p,o,r,e,t,this)}else for(var f=Math.max(0,a.start),d=Math.min(l.count,a.start+a.count);f<d;f++)Jm.fromBufferAttribute(l,f),ey(Jm,f,o,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var s=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}else{var o=e.morphTargets;void 0!==o&&o.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(Mh);function ey(e,t,n,r,i,a,s){var o=Km.distanceSqToPoint(e);if(o<n){var u=new Oc;Km.closestPointToPoint(e,u),u.applyMatrix4(r);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:u,index:t,face:null,object:s})}}$m.prototype.isPoints=!0,function(e){l(n,e);var t=v(n);function n(e,r,i,a,o,u,l,c,h){var p;(0,s.Z)(this,n),(p=t.call(this,e,r,i,a,o,u,l,c,h)).format=void 0!==l?l:Ou,p.minFilter=void 0!==u?u:mu,p.magFilter=void 0!==o?o:mu,p.generateMipmaps=!1;var d=f(p);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){d.needsUpdate=!0,e.requestVideoFrameCallback(t)})),p}return(0,o.Z)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(wc).prototype.isVideoTexture=!0;var ty=function(e){l(n,e);var t=v(n);function n(e,r,i,a,o,u,l,c,h,p,f,d){var v;return(0,s.Z)(this,n),(v=t.call(this,null,u,l,c,h,p,a,o,f,d)).image={width:r,height:i},v.mipmaps=e,v.flipY=!1,v.generateMipmaps=!1,v}return(0,o.Z)(n)}(wc);ty.prototype.isCompressedTexture=!0,function(e){l(n,e);var t=v(n);function n(e,r,i,a,o,u,l,c,h){var p;return(0,s.Z)(this,n),(p=t.call(this,e,r,i,a,o,u,l,c,h)).needsUpdate=!0,p}return(0,o.Z)(n)}(wc).prototype.isCanvasTexture=!0;var ny=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;(0,s.Z)(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:r,radiusBottom:i,height:a,radialSegments:o,heightSegments:u,openEnded:l,thetaStart:c,thetaLength:h};var p=f(e);o=Math.floor(o),u=Math.floor(u);var d=[],v=[],m=[],y=[],g=0,_=[],T=a/2,E=0;function x(e){for(var t=g,n=new yc,a=new Oc,s=0,u=!0===e?r:i,l=!0===e?1:-1,f=1;f<=o;f++)v.push(0,T*l,0),m.push(0,l,0),y.push(.5,.5),g++;for(var _=g,x=0;x<=o;x++){var b=x/o*h+c,I=Math.cos(b),w=Math.sin(b);a.x=u*w,a.y=T*l,a.z=u*I,v.push(a.x,a.y,a.z),m.push(0,l,0),n.x=.5*I+.5,n.y=.5*w*l+.5,y.push(n.x,n.y),g++}for(var k=0;k<o;k++){var S=t+k,R=_+k;!0===e?d.push(R,R+1,S):d.push(R+1,R,S),s+=3}p.addGroup(E,s,!0===e?1:2),E+=s}return function(){for(var e=new Oc,t=new Oc,n=0,s=(i-r)/a,l=0;l<=u;l++){for(var f=[],x=l/u,b=x*(i-r)+r,I=0;I<=o;I++){var w=I/o,k=w*h+c,S=Math.sin(k),R=Math.cos(k);t.x=b*S,t.y=-x*a+T,t.z=b*R,v.push(t.x,t.y,t.z),e.set(S,s,R).normalize(),m.push(e.x,e.y,e.z),y.push(w,1-x),f.push(g++)}_.push(f)}for(var C=0;C<o;C++)for(var D=0;D<u;D++){var A=_[D][C],O=_[D+1][C],N=_[D+1][C+1],M=_[D][C+1];d.push(A,O,M),d.push(O,N,M),n+=6}p.addGroup(E,n,0),E+=n}(),!1===l&&(r>0&&x(!0),i>0&&x(!1)),e.setIndex(d),e.setAttribute("position",new op(v,3)),e.setAttribute("normal",new op(m,3)),e.setAttribute("uv",new op(y,2)),e}return(0,o.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(vp),ry=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return(0,s.Z)(this,n),(e=t.call(this,0,r,i,a,o,u,l,c)).type="ConeGeometry",e.parameters={radius:r,height:i,radialSegments:a,heightSegments:o,openEnded:u,thetaStart:l,thetaLength:c},e}return(0,o.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(ny),iy=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,s.Z)(this,n),(e=t.call(this)).type="PolyhedronGeometry",e.parameters={vertices:r,indices:i,radius:a,detail:o};var u=[],l=[];function c(e,t,n,r){for(var i=r+1,a=[],s=0;s<=i;s++){a[s]=[];for(var o=e.clone().lerp(n,s/i),u=t.clone().lerp(n,s/i),l=i-s,c=0;c<=l;c++)a[s][c]=0===c&&s===i?o:o.clone().lerp(u,c/l)}for(var p=0;p<i;p++)for(var f=0;f<2*(i-p)-1;f++){var d=Math.floor(f/2);f%2===0?(h(a[p][d+1]),h(a[p+1][d]),h(a[p][d])):(h(a[p][d+1]),h(a[p+1][d+1]),h(a[p+1][d]))}}function h(e){u.push(e.x,e.y,e.z)}function p(e,t){var n=3*e;t.x=r[n+0],t.y=r[n+1],t.z=r[n+2]}function f(e,t,n,r){r<0&&1===e.x&&(l[t]=e.x-1),0===n.x&&0===n.z&&(l[t]=r/2/Math.PI+.5)}function d(e){return Math.atan2(e.z,-e.x)}return function(e){for(var t=new Oc,n=new Oc,r=new Oc,a=0;a<i.length;a+=3)p(i[a+0],t),p(i[a+1],n),p(i[a+2],r),c(t,n,r,e)}(o),function(e){for(var t=new Oc,n=0;n<u.length;n+=3)t.x=u[n+0],t.y=u[n+1],t.z=u[n+2],t.normalize().multiplyScalar(e),u[n+0]=t.x,u[n+1]=t.y,u[n+2]=t.z}(a),function(){for(var e=new Oc,t=0;t<u.length;t+=3){e.x=u[t+0],e.y=u[t+1],e.z=u[t+2];var n=d(e)/2/Math.PI+.5,r=(i=e,Math.atan2(-i.y,Math.sqrt(i.x*i.x+i.z*i.z))/Math.PI+.5);l.push(n,1-r)}var i;(function(){for(var e=new Oc,t=new Oc,n=new Oc,r=new Oc,i=new yc,a=new yc,s=new yc,o=0,c=0;o<u.length;o+=9,c+=6){e.set(u[o+0],u[o+1],u[o+2]),t.set(u[o+3],u[o+4],u[o+5]),n.set(u[o+6],u[o+7],u[o+8]),i.set(l[c+0],l[c+1]),a.set(l[c+2],l[c+3]),s.set(l[c+4],l[c+5]),r.copy(e).add(t).add(n).divideScalar(3);var h=d(r);f(i,c+0,e,h),f(a,c+2,t,h),f(s,c+4,n,h)}})(),function(){for(var e=0;e<l.length;e+=6){var t=l[e+0],n=l[e+2],r=l[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(l[e+0]+=1),n<.2&&(l[e+2]+=1),r<.2&&(l[e+4]+=1))}}()}(),e.setAttribute("position",new op(u,3)),e.setAttribute("normal",new op(u.slice(),3)),e.setAttribute("uv",new op(l,2)),0===o?e.computeVertexNormals():e.normalizeNormals(),e}return(0,o.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.vertices,e.indices,e.radius,e.details)}}]),n}(vp),ay=new Oc,sy=new Oc,oy=new Oc,uy=new Vh,ly=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if((0,s.Z)(this,n),(e=t.call(this)).type="EdgesGeometry",e.parameters={geometry:r,thresholdAngle:i},null!==r){for(var a=Math.pow(10,4),o=Math.cos(oc*i),u=r.getIndex(),l=r.getAttribute("position"),c=u?u.count:l.count,h=[0,0,0],p=["a","b","c"],f=new Array(3),d={},v=[],m=0;m<c;m+=3){u?(h[0]=u.getX(m),h[1]=u.getX(m+1),h[2]=u.getX(m+2)):(h[0]=m,h[1]=m+1,h[2]=m+2);var y=uy.a,g=uy.b,_=uy.c;if(y.fromBufferAttribute(l,h[0]),g.fromBufferAttribute(l,h[1]),_.fromBufferAttribute(l,h[2]),uy.getNormal(oy),f[0]="".concat(Math.round(y.x*a),",").concat(Math.round(y.y*a),",").concat(Math.round(y.z*a)),f[1]="".concat(Math.round(g.x*a),",").concat(Math.round(g.y*a),",").concat(Math.round(g.z*a)),f[2]="".concat(Math.round(_.x*a),",").concat(Math.round(_.y*a),",").concat(Math.round(_.z*a)),f[0]!==f[1]&&f[1]!==f[2]&&f[2]!==f[0])for(var T=0;T<3;T++){var E=(T+1)%3,x=f[T],b=f[E],I=uy[p[T]],w=uy[p[E]],k="".concat(x,"_").concat(b),S="".concat(b,"_").concat(x);S in d&&d[S]?(oy.dot(d[S].normal)<=o&&(v.push(I.x,I.y,I.z),v.push(w.x,w.y,w.z)),d[S]=null):k in d||(d[k]={index0:h[T],index1:h[E],normal:oy.clone()})}}for(var R in d)if(d[R]){var C=d[R],D=C.index0,A=C.index1;ay.fromBufferAttribute(l,D),sy.fromBufferAttribute(l,A),v.push(ay.x,ay.y,ay.z),v.push(sy.x,sy.y,sy.z)}e.setAttribute("position",new op(v,3))}return e}return(0,o.Z)(n)}(vp),cy=function(){function e(){(0,s.Z)(this,e),this.type="Curve",this.arcLengthDivisions=200}return(0,o.Z)(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var a=1;a<=e;a++)i+=(t=this.getPoint(a/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var s,o=0,u=a-1;o<=u;)if((s=r[i=Math.floor(o+(u-o)/2)]-n)<0)o=i+1;else{if(!(s>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(a-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(a-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);var a=this.getPoint(r),s=this.getPoint(i),o=t||(a.isVector2?new yc:new Oc);return o.copy(s).sub(a).normalize(),o}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new Oc,r=[],i=[],a=[],s=new Oc,o=new lh,u=0;u<=e;u++){var l=u/e;r[u]=this.getTangentAt(l,new Oc)}i[0]=new Oc,a[0]=new Oc;var c=Number.MAX_VALUE,h=Math.abs(r[0].x),p=Math.abs(r[0].y),f=Math.abs(r[0].z);h<=c&&(c=h,n.set(1,0,0)),p<=c&&(c=p,n.set(0,1,0)),f<=c&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),a[0].crossVectors(r[0],i[0]);for(var d=1;d<=e;d++){if(i[d]=i[d-1].clone(),a[d]=a[d-1].clone(),s.crossVectors(r[d-1],r[d]),s.length()>Number.EPSILON){s.normalize();var v=Math.acos(cc(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(o.makeRotationAxis(s,v))}a[d].crossVectors(r[d],i[d])}if(!0===t){var m=Math.acos(cc(i[0].dot(i[e]),-1,1));m/=e,r[0].dot(s.crossVectors(i[0],i[e]))>0&&(m=-m);for(var y=1;y<=e;y++)i[y].applyMatrix4(o.makeRotationAxis(r[y],m*y)),a[y].crossVectors(r[y],i[y])}return{tangents:r,normals:i,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),hy=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return(0,s.Z)(this,n),(e=t.call(this)).type="EllipseCurve",e.aX=r,e.aY=i,e.xRadius=a,e.yRadius=o,e.aStartAngle=u,e.aEndAngle=l,e.aClockwise=c,e.aRotation=h,e}return(0,o.Z)(n,[{key:"getPoint",value:function(e,t){for(var n=t||new yc,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var s=this.aStartAngle+e*i,o=this.aX+this.xRadius*Math.cos(s),u=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=o-this.aX,p=u-this.aY;o=h*l-p*c+this.aX,u=h*c+p*l+this.aY}return n.set(o,u)}},{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=lt(c(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return lt(c(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(cy);hy.prototype.isEllipseCurve=!0;var py=function(e){l(n,e);var t=v(n);function n(e,r,i,a,o,u){var l;return(0,s.Z)(this,n),(l=t.call(this,e,r,i,i,a,o,u)).type="ArcCurve",l}return(0,o.Z)(n)}(hy);function fy(){var e=0,t=0,n=0,r=0;function i(i,a,s,o){e=i,t=s,n=-3*i+3*a-2*s-o,r=2*i-2*a+s+o}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,s,o){var u=(t-e)/a-(n-e)/(a+s)+(n-t)/s,l=(n-t)/s-(r-t)/(s+o)+(r-n)/o;i(t,n,u*=s,l*=s)},calc:function(i){var a=i*i;return e+t*i+n*a+r*(a*i)}}}py.prototype.isArcCurve=!0;var dy=new Oc,vy=new fy,my=new fy,yy=new fy,gy=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return(0,s.Z)(this,n),(e=t.call(this)).type="CatmullRomCurve3",e.points=r,e.closed=i,e.curveType=a,e.tension=o,e}return(0,o.Z)(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Oc,i=this.points,a=i.length,s=(a-(this.closed?0:1))*e,o=Math.floor(s),u=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:0===u&&o===a-1&&(o=a-2,u=1),this.closed||o>0?t=i[(o-1)%a]:(dy.subVectors(i[0],i[1]).add(i[0]),t=dy);var l=i[o%a],c=i[(o+1)%a];if(this.closed||o+2<a?n=i[(o+2)%a]:(dy.subVectors(i[a-1],i[a-2]).add(i[a-1]),n=dy),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,p=Math.pow(t.distanceToSquared(l),h),f=Math.pow(l.distanceToSquared(c),h),d=Math.pow(c.distanceToSquared(n),h);f<1e-4&&(f=1),p<1e-4&&(p=f),d<1e-4&&(d=f),vy.initNonuniformCatmullRom(t.x,l.x,c.x,n.x,p,f,d),my.initNonuniformCatmullRom(t.y,l.y,c.y,n.y,p,f,d),yy.initNonuniformCatmullRom(t.z,l.z,c.z,n.z,p,f,d)}else"catmullrom"===this.curveType&&(vy.initCatmullRom(t.x,l.x,c.x,n.x,this.tension),my.initCatmullRom(t.y,l.y,c.y,n.y,this.tension),yy.initCatmullRom(t.z,l.z,c.z,n.z,this.tension));return r.set(vy.calc(u),my.calc(u),yy.calc(u)),r}},{key:"copy",value:function(e){lt(c(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=lt(c(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){lt(c(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new Oc).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(cy);function _y(e,t,n,r,i){var a=.5*(r-t),s=.5*(i-n),o=e*e;return(2*n-2*r+a+s)*(e*o)+(-3*n+3*r-2*a-s)*o+a*e+n}function Ty(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Ey(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}gy.prototype.isCatmullRomCurve3=!0;var xy=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new yc,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new yc,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new yc,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new yc;return(0,s.Z)(this,n),(e=t.call(this)).type="CubicBezierCurve",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return(0,o.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new yc,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(Ey(e,n.x,r.x,i.x,a.x),Ey(e,n.y,r.y,i.y,a.y)),t}},{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=lt(c(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return lt(c(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(cy);xy.prototype.isCubicBezierCurve=!0;var by=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Oc,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Oc,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Oc,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Oc;return(0,s.Z)(this,n),(e=t.call(this)).type="CubicBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return(0,o.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Oc,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(Ey(e,n.x,r.x,i.x,a.x),Ey(e,n.y,r.y,i.y,a.y),Ey(e,n.z,r.z,i.z,a.z)),t}},{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=lt(c(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return lt(c(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(cy);by.prototype.isCubicBezierCurve3=!0;var Iy=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new yc,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new yc;return(0,s.Z)(this,n),(e=t.call(this)).type="LineCurve",e.v1=r,e.v2=i,e}return(0,o.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new yc;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new yc;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=lt(c(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return lt(c(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(cy);Iy.prototype.isLineCurve=!0;var wy=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Oc,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Oc;return(0,s.Z)(this,n),(e=t.call(this)).type="LineCurve3",e.isLineCurve3=!0,e.v1=r,e.v2=i,e}return(0,o.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Oc;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=lt(c(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return lt(c(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(cy),ky=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new yc,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new yc,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new yc;return(0,s.Z)(this,n),(e=t.call(this)).type="QuadraticBezierCurve",e.v0=r,e.v1=i,e.v2=a,e}return(0,o.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new yc,n=this.v0,r=this.v1,i=this.v2;return t.set(Ty(e,n.x,r.x,i.x),Ty(e,n.y,r.y,i.y)),t}},{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=lt(c(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return lt(c(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(cy);ky.prototype.isQuadraticBezierCurve=!0;var Sy=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Oc,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Oc,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Oc;return(0,s.Z)(this,n),(e=t.call(this)).type="QuadraticBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e}return(0,o.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Oc,n=this.v0,r=this.v1,i=this.v2;return t.set(Ty(e,n.x,r.x,i.x),Ty(e,n.y,r.y,i.y),Ty(e,n.z,r.z,i.z)),t}},{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=lt(c(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return lt(c(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(cy);Sy.prototype.isQuadraticBezierCurve3=!0;var Ry=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,s.Z)(this,n),(e=t.call(this)).type="SplineCurve",e.points=r,e}return(0,o.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new yc,n=this.points,r=(n.length-1)*e,i=Math.floor(r),a=r-i,s=n[0===i?i:i-1],o=n[i],u=n[i>n.length-2?n.length-1:i+1],l=n[i>n.length-3?n.length-1:i+2];return t.set(_y(a,s.x,o.x,u.x,l.x),_y(a,s.y,o.y,u.y,l.y)),t}},{key:"copy",value:function(e){lt(c(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=lt(c(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e}},{key:"fromJSON",value:function(e){lt(c(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new yc).fromArray(i))}return this}}]),n}(cy);Ry.prototype.isSplineCurve=!0;var Cy=Object.freeze({__proto__:null,ArcCurve:py,CatmullRomCurve3:gy,CubicBezierCurve:xy,CubicBezierCurve3:by,EllipseCurve:hy,LineCurve:Iy,LineCurve3:wy,QuadraticBezierCurve:ky,QuadraticBezierCurve3:Sy,SplineCurve:Ry}),Dy=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return(0,o.Z)(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Iy(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var a=r[i]-n,s=this.curves[i],o=s.getLength(),u=0===o?0:1-a/o;return s.getPointAt(u,t)}i++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],s=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,o=a.getPoints(s),u=0;u<o.length;u++){var l=o[u];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){lt(c(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=lt(c(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){lt(c(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push((new Cy[i.type]).fromJSON(i))}return this}}]),n}(cy),Ay=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).type="Path",r.currentPoint=new yc,e&&r.setFromPoints(e),r}return(0,o.Z)(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new Iy(this.currentPoint.clone(),new yc(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var i=new ky(this.currentPoint.clone(),new yc(e,t),new yc(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){var s=new xy(this.currentPoint.clone(),new yc(e,t),new yc(n,r),new yc(i,a));return this.curves.push(s),this.currentPoint.set(i,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new Ry(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,i,a){var s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,n,r,i,a),this}},{key:"absarc",value:function(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}},{key:"ellipse",value:function(e,t,n,r,i,a,s,o){var u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+u,t+l,n,r,i,a,s,o),this}},{key:"absellipse",value:function(e,t,n,r,i,a,s,o){var u=new hy(e,t,n,r,i,a,s,o);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=lt(c(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return lt(c(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(Dy),Oy=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).uuid=lc(),r.type="Shape",r.holes=[],r}return(0,o.Z)(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){lt(c(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=lt(c(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){lt(c(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push((new Ay).fromJSON(i))}return this}}]),n}(Ay),Ny=function(e,t){var n,r,i,a,s,o,u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,h=c?t[0]*l:e.length,p=My(e,0,h,l,!0),f=[];if(!p||p.next===p.prev)return f;if(c&&(p=function(e,t,n,r){var i,a,s,o=[];for(i=0,a=t.length;i<a;i++)(s=My(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===s.next&&(s.steiner=!0),o.push(Vy(s));for(o.sort(zy),i=0;i<o.length;i++)Gy(o[i],n),n=Py(n,n.next);return n}(e,t,p,l)),e.length>80*l){n=i=e[0],r=a=e[1];for(var d=l;d<h;d+=l)(s=e[d])<n&&(n=s),(o=e[d+1])<r&&(r=o),s>i&&(i=s),o>a&&(a=o);u=0!==(u=Math.max(i-n,a-r))?1/u:0}return Fy(p,f,l,n,r,u),f};function My(e,t,n,r,i){var a,s;if(i===function(e,t,n,r){for(var i=0,a=t,s=n-r;a<n;a+=r)i+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)s=tg(a,e[a],e[a+1],s);else for(a=n-r;a>=t;a-=r)s=tg(a,e[a],e[a+1],s);return s&&Xy(s,s.next)&&(ng(s),s=s.next),s}function Py(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Xy(r,r.next)&&0!==qy(r.prev,r,r.next))r=r.next;else{if(ng(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Fy(e,t,n,r,i,a,s){if(e){!s&&a&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=jy(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,s,o,u,l=1;do{for(n=e,e=null,a=null,s=0;n;){for(s++,r=n,o=0,t=0;t<l&&(o++,r=r.nextZ);t++);for(u=l;o>0||u>0&&r;)0!==o&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,l*=2}while(s>1)}(i)}(e,r,i,a);for(var o,u,l=e;e.prev!==e.next;)if(o=e.prev,u=e.next,a?Uy(e,r,i,a):Ly(e))t.push(o.i/n),t.push(e.i/n),t.push(u.i/n),ng(e),e=u.next,l=u.next;else if((e=u)===l){s?1===s?Fy(e=Zy(Py(e),t,n),t,n,r,i,a,2):2===s&&By(e,t,n,r,i,a):Fy(Py(e),t,n,r,i,a,1);break}}}function Ly(e){var t=e.prev,n=e,r=e.next;if(qy(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Wy(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&qy(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Uy(e,t,n,r){var i=e.prev,a=e,s=e.next;if(qy(i,a,s)>=0)return!1;for(var o=i.x<a.x?i.x<s.x?i.x:s.x:a.x<s.x?a.x:s.x,u=i.y<a.y?i.y<s.y?i.y:s.y:a.y<s.y?a.y:s.y,l=i.x>a.x?i.x>s.x?i.x:s.x:a.x>s.x?a.x:s.x,c=i.y>a.y?i.y>s.y?i.y:s.y:a.y>s.y?a.y:s.y,h=jy(o,u,t,n,r),p=jy(l,c,t,n,r),f=e.prevZ,d=e.nextZ;f&&f.z>=h&&d&&d.z<=p;){if(f!==e.prev&&f!==e.next&&Wy(i.x,i.y,a.x,a.y,s.x,s.y,f.x,f.y)&&qy(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==e.prev&&d!==e.next&&Wy(i.x,i.y,a.x,a.y,s.x,s.y,d.x,d.y)&&qy(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&Wy(i.x,i.y,a.x,a.y,s.x,s.y,f.x,f.y)&&qy(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=p;){if(d!==e.prev&&d!==e.next&&Wy(i.x,i.y,a.x,a.y,s.x,s.y,d.x,d.y)&&qy(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Zy(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Xy(i,a)&&Ky(i,r,r.next,a)&&$y(i,a)&&$y(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),ng(r),ng(r.next),r=e=a),r=r.next}while(r!==e);return Py(r)}function By(e,t,n,r,i,a){var s=e;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&Yy(s,o)){var u=eg(s,o);return s=Py(s,s.next),u=Py(u,u.next),Fy(s,t,n,r,i,a),void Fy(u,t,n,r,i,a)}o=o.next}s=s.next}while(s!==e)}function zy(e,t){return e.x-t.x}function Gy(e,t){if(t=function(e,t){var n,r=t,i=e.x,a=e.y,s=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var o=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=i&&o>s){if(s=o,o===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===s)return n;var u,l=n,c=n.x,h=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&Wy(a<h?i:s,a,c,h,a<h?s:i,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(i-r.x),$y(r,e)&&(u<p||u===p&&(r.x>n.x||r.x===n.x&&Hy(n,r)))&&(n=r,p=u)),r=r.next}while(r!==l);return n}(e,t),t){var n=eg(t,e);Py(t,t.next),Py(n,n.next)}}function Hy(e,t){return qy(e.prev,e,t.prev)<0&&qy(t.next,e,e.next)<0}function jy(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Vy(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Wy(e,t,n,r,i,a,s,o){return(i-s)*(t-o)-(e-s)*(a-o)>=0&&(e-s)*(r-o)-(n-s)*(t-o)>=0&&(n-s)*(a-o)-(i-s)*(r-o)>=0}function Yy(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ky(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&($y(e,t)&&$y(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(qy(e.prev,e,t.prev)||qy(e,t.prev,t))||Xy(e,t)&&qy(e.prev,e,e.next)>0&&qy(t.prev,t,t.next)>0)}function qy(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Xy(e,t){return e.x===t.x&&e.y===t.y}function Ky(e,t,n,r){var i=Jy(qy(e,t,n)),a=Jy(qy(e,t,r)),s=Jy(qy(n,r,e)),o=Jy(qy(n,r,t));return i!==a&&s!==o||(!(0!==i||!Qy(e,n,t))||(!(0!==a||!Qy(e,r,t))||(!(0!==s||!Qy(n,e,r))||!(0!==o||!Qy(n,t,r)))))}function Qy(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Jy(e){return e>0?1:e<0?-1:0}function $y(e,t){return qy(e.prev,e,e.next)<0?qy(e,t,e.next)>=0&&qy(e,e.prev,t)>=0:qy(e,t,e.prev)<0||qy(e,e.next,t)<0}function eg(e,t){var n=new rg(e.i,e.x,e.y),r=new rg(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function tg(e,t,n,r){var i=new rg(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ng(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function rg(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var ig=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],i=[];ag(e),sg(n,e);var a=e.length;t.forEach(ag);for(var s=0;s<t.length;s++)r.push(a),a+=t[s].length,sg(n,t[s]);for(var o=Ny(n,r),u=0;u<o.length;u+=3)i.push(o.slice(u,u+3));return i}}]),e}();function ag(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function sg(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var og=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Oy([new yc(.5,.5),new yc(-.5,.5),new yc(-.5,-.5),new yc(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Z)(this,n),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:r,options:i},r=Array.isArray(r)?r:[r];for(var a=f(e),o=[],u=[],l=0,c=r.length;l<c;l++){h(r[l])}function h(e){var t=[],n=void 0!==i.curveSegments?i.curveSegments:12,r=void 0!==i.steps?i.steps:1,s=void 0!==i.depth?i.depth:1,l=void 0===i.bevelEnabled||i.bevelEnabled,c=void 0!==i.bevelThickness?i.bevelThickness:.2,h=void 0!==i.bevelSize?i.bevelSize:c-.1,p=void 0!==i.bevelOffset?i.bevelOffset:0,f=void 0!==i.bevelSegments?i.bevelSegments:3,d=i.extrudePath,v=void 0!==i.UVGenerator?i.UVGenerator:ug;void 0!==i.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),s=i.amount);var m,y,g,_,T,E=!1;d&&(m=d.getSpacedPoints(r),E=!0,l=!1,y=d.computeFrenetFrames(r,!1),g=new Oc,_=new Oc,T=new Oc),l||(f=0,c=0,h=0,p=0);var x=e.extractPoints(n),b=x.shape,I=x.holes;if(!ig.isClockWise(b)){b=b.reverse();for(var w=0,k=I.length;w<k;w++){var S=I[w];ig.isClockWise(S)&&(I[w]=S.reverse())}}for(var R=ig.triangulateShape(b,I),C=b,D=0,A=I.length;D<A;D++){var O=I[D];b=b.concat(O)}function N(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var M=b.length,P=R.length;function F(e,t,n){var r,i,a,s=e.x-t.x,o=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=s*s+o*o,h=s*l-o*u;if(Math.abs(h)>Number.EPSILON){var p=Math.sqrt(c),f=Math.sqrt(u*u+l*l),d=t.x-o/p,v=t.y+s/p,m=((n.x-l/f-d)*l-(n.y+u/f-v)*u)/(s*l-o*u),y=(r=d+s*m-e.x)*r+(i=v+o*m-e.y)*i;if(y<=2)return new yc(r,i);a=Math.sqrt(y/2)}else{var g=!1;s>Number.EPSILON?u>Number.EPSILON&&(g=!0):s<-Number.EPSILON?u<-Number.EPSILON&&(g=!0):Math.sign(o)===Math.sign(l)&&(g=!0),g?(r=-o,i=s,a=Math.sqrt(c)):(r=s,i=o,a=Math.sqrt(c/2))}return new yc(r/a,i/a)}for(var L=[],U=0,Z=C.length,B=Z-1,z=U+1;U<Z;U++,B++,z++)B===Z&&(B=0),z===Z&&(z=0),L[U]=F(C[U],C[B],C[z]);for(var G,H=[],j=L.concat(),V=0,W=I.length;V<W;V++){var Y=I[V];G=[];for(var q=0,X=Y.length,K=X-1,Q=q+1;q<X;q++,K++,Q++)K===X&&(K=0),Q===X&&(Q=0),G[q]=F(Y[q],Y[K],Y[Q]);H.push(G),j=j.concat(G)}for(var J=0;J<f;J++){for(var $=J/f,ee=c*Math.cos($*Math.PI/2),te=h*Math.sin($*Math.PI/2)+p,ne=0,re=C.length;ne<re;ne++){var ie=N(C[ne],L[ne],te);Ae(ie.x,ie.y,-ee)}for(var ae=0,se=I.length;ae<se;ae++){var oe=I[ae];G=H[ae];for(var ue=0,le=oe.length;ue<le;ue++){var ce=N(oe[ue],G[ue],te);Ae(ce.x,ce.y,-ee)}}}for(var he=h+p,pe=0;pe<M;pe++){var fe=l?N(b[pe],j[pe],he):b[pe];E?(_.copy(y.normals[0]).multiplyScalar(fe.x),g.copy(y.binormals[0]).multiplyScalar(fe.y),T.copy(m[0]).add(_).add(g),Ae(T.x,T.y,T.z)):Ae(fe.x,fe.y,0)}for(var de=1;de<=r;de++)for(var ve=0;ve<M;ve++){var me=l?N(b[ve],j[ve],he):b[ve];E?(_.copy(y.normals[de]).multiplyScalar(me.x),g.copy(y.binormals[de]).multiplyScalar(me.y),T.copy(m[de]).add(_).add(g),Ae(T.x,T.y,T.z)):Ae(me.x,me.y,s/r*de)}for(var ye=f-1;ye>=0;ye--){for(var ge=ye/f,_e=c*Math.cos(ge*Math.PI/2),Te=h*Math.sin(ge*Math.PI/2)+p,Ee=0,xe=C.length;Ee<xe;Ee++){var be=N(C[Ee],L[Ee],Te);Ae(be.x,be.y,s+_e)}for(var Ie=0,we=I.length;Ie<we;Ie++){var ke=I[Ie];G=H[Ie];for(var Se=0,Re=ke.length;Se<Re;Se++){var Ce=N(ke[Se],G[Se],Te);E?Ae(Ce.x,Ce.y+m[r-1].y,m[r-1].x+_e):Ae(Ce.x,Ce.y,s+_e)}}}function De(e,t){for(var n=e.length;--n>=0;){var i=n,a=n-1;a<0&&(a=e.length-1);for(var s=0,o=r+2*f;s<o;s++){var u=M*s,l=M*(s+1);Ne(t+i+u,t+a+u,t+a+l,t+i+l)}}}function Ae(e,n,r){t.push(e),t.push(n),t.push(r)}function Oe(e,t,n){Me(e),Me(t),Me(n);var r=o.length/3,i=v.generateTopUV(a,o,r-3,r-2,r-1);Pe(i[0]),Pe(i[1]),Pe(i[2])}function Ne(e,t,n,r){Me(e),Me(t),Me(r),Me(t),Me(n),Me(r);var i=o.length/3,s=v.generateSideWallUV(a,o,i-6,i-3,i-2,i-1);Pe(s[0]),Pe(s[1]),Pe(s[3]),Pe(s[1]),Pe(s[2]),Pe(s[3])}function Me(e){o.push(t[3*e+0]),o.push(t[3*e+1]),o.push(t[3*e+2])}function Pe(e){u.push(e.x),u.push(e.y)}!function(){var e=o.length/3;if(l){for(var t=0,n=M*t,i=0;i<P;i++){var s=R[i];Oe(s[2]+n,s[1]+n,s[0]+n)}n=M*(t=r+2*f);for(var u=0;u<P;u++){var c=R[u];Oe(c[0]+n,c[1]+n,c[2]+n)}}else{for(var h=0;h<P;h++){var p=R[h];Oe(p[2],p[1],p[0])}for(var d=0;d<P;d++){var v=R[d];Oe(v[0]+M*r,v[1]+M*r,v[2]+M*r)}}a.addGroup(e,o.length/3-e,0)}(),function(){var e=o.length/3,t=0;De(C,t),t+=C.length;for(var n=0,r=I.length;n<r;n++){var i=I[n];De(i,t),t+=i.length}a.addGroup(e,o.length/3-e,1)}()}return e.setAttribute("position",new op(o,3)),e.setAttribute("uv",new op(u,2)),e.computeVertexNormals(),e}return(0,o.Z)(n,[{key:"toJSON",value:function(){var e=lt(c(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var s=t[e.shapes[i]];r.push(s)}var o=e.options.extrudePath;return void 0!==o&&(e.options.extrudePath=(new Cy[o.type]).fromJSON(o)),new n(r,e.options)}}]),n}(vp),ug={generateTopUV:function(e,t,n,r,i){var a=t[3*n],s=t[3*n+1],o=t[3*r],u=t[3*r+1],l=t[3*i],c=t[3*i+1];return[new yc(a,s),new yc(o,u),new yc(l,c)]},generateSideWallUV:function(e,t,n,r,i,a){var s=t[3*n],o=t[3*n+1],u=t[3*n+2],l=t[3*r],c=t[3*r+1],h=t[3*r+2],p=t[3*i],f=t[3*i+1],d=t[3*i+2],v=t[3*a],m=t[3*a+1],y=t[3*a+2];return Math.abs(o-c)<Math.abs(s-l)?[new yc(s,1-u),new yc(l,1-h),new yc(p,1-d),new yc(v,1-y)]:[new yc(o,1-u),new yc(c,1-h),new yc(f,1-d),new yc(m,1-y)]}};var lg=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,s.Z)(this,n);return(e=t.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],r,i)).type="OctahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,o.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(iy),cg=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Oy([new yc(0,.5),new yc(-.5,-.5),new yc(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;(0,s.Z)(this,n),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:r,curveSegments:i};var a=[],o=[],u=[],l=[],c=0,h=0;if(!1===Array.isArray(r))f(r);else for(var p=0;p<r.length;p++)f(r[p]),e.addGroup(c,h,p),c+=h,h=0;function f(e){var t=o.length/3,n=e.extractPoints(i),r=n.shape,s=n.holes;!1===ig.isClockWise(r)&&(r=r.reverse());for(var c=0,p=s.length;c<p;c++){var f=s[c];!0===ig.isClockWise(f)&&(s[c]=f.reverse())}for(var d=ig.triangulateShape(r,s),v=0,m=s.length;v<m;v++){var y=s[v];r=r.concat(y)}for(var g=0,_=r.length;g<_;g++){var T=r[g];o.push(T.x,T.y,0),u.push(0,0,1),l.push(T.x,T.y)}for(var E=0,x=d.length;E<x;E++){var b=d[E],I=b[0]+t,w=b[1]+t,k=b[2]+t;a.push(I,w,k),h+=3}}return e.setIndex(a),e.setAttribute("position",new op(o,3)),e.setAttribute("normal",new op(u,3)),e.setAttribute("uv",new op(l,2)),e}return(0,o.Z)(n,[{key:"toJSON",value:function(){var e=lt(c(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var s=t[e.shapes[i]];r.push(s)}return new n(r,e.curveSegments)}}]),n}(vp);var hg=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;(0,s.Z)(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:r,widthSegments:i,heightSegments:a,phiStart:o,phiLength:u,thetaStart:l,thetaLength:c},i=Math.max(3,Math.floor(i)),a=Math.max(2,Math.floor(a));for(var h=Math.min(l+c,Math.PI),p=0,f=[],d=new Oc,v=new Oc,m=[],y=[],g=[],_=[],T=0;T<=a;T++){var E=[],x=T/a,b=0;0==T&&0==l?b=.5/i:T==a&&h==Math.PI&&(b=-.5/i);for(var I=0;I<=i;I++){var w=I/i;d.x=-r*Math.cos(o+w*u)*Math.sin(l+x*c),d.y=r*Math.cos(l+x*c),d.z=r*Math.sin(o+w*u)*Math.sin(l+x*c),y.push(d.x,d.y,d.z),v.copy(d).normalize(),g.push(v.x,v.y,v.z),_.push(w+b,1-x),E.push(p++)}f.push(E)}for(var k=0;k<a;k++)for(var S=0;S<i;S++){var R=f[k][S+1],C=f[k][S],D=f[k+1][S],A=f[k+1][S+1];(0!==k||l>0)&&m.push(R,C,A),(k!==a-1||h<Math.PI)&&m.push(C,D,A)}return e.setIndex(m),e.setAttribute("position",new op(y,3)),e.setAttribute("normal",new op(g,3)),e.setAttribute("uv",new op(_,2)),e}return(0,o.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(vp),pg=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;(0,s.Z)(this,n),(e=t.call(this)).type="TorusGeometry",e.parameters={radius:r,tube:i,radialSegments:a,tubularSegments:o,arc:u},a=Math.floor(a),o=Math.floor(o);for(var l=[],c=[],h=[],p=[],f=new Oc,d=new Oc,v=new Oc,m=0;m<=a;m++)for(var y=0;y<=o;y++){var g=y/o*u,_=m/a*Math.PI*2;d.x=(r+i*Math.cos(_))*Math.cos(g),d.y=(r+i*Math.cos(_))*Math.sin(g),d.z=i*Math.sin(_),c.push(d.x,d.y,d.z),f.x=r*Math.cos(g),f.y=r*Math.sin(g),v.subVectors(d,f).normalize(),h.push(v.x,v.y,v.z),p.push(y/o),p.push(m/a)}for(var T=1;T<=a;T++)for(var E=1;E<=o;E++){var x=(o+1)*T+E-1,b=(o+1)*(T-1)+E-1,I=(o+1)*(T-1)+E,w=(o+1)*T+E;l.push(x,b,w),l.push(b,I,w)}return e.setIndex(l),e.setAttribute("position",new op(c,3)),e.setAttribute("normal",new op(h,3)),e.setAttribute("uv",new op(p,2)),e}return(0,o.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),n}(vp),fg=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((0,s.Z)(this,n),(e=t.call(this)).type="WireframeGeometry",e.parameters={geometry:r},null!==r){var i=[],a=new Set,o=new Oc,u=new Oc;if(null!==r.index){var l=r.attributes.position,c=r.index,h=r.groups;0===h.length&&(h=[{start:0,count:c.count,materialIndex:0}]);for(var p=0,f=h.length;p<f;++p)for(var d=h[p],v=d.start,m=v,y=v+d.count;m<y;m+=3)for(var g=0;g<3;g++){var _=c.getX(m+g),T=c.getX(m+(g+1)%3);o.fromBufferAttribute(l,_),u.fromBufferAttribute(l,T),!0===dg(o,u,a)&&(i.push(o.x,o.y,o.z),i.push(u.x,u.y,u.z))}}else for(var E=r.attributes.position,x=0,b=E.count/3;x<b;x++)for(var I=0;I<3;I++){var w=3*x+I,k=3*x+(I+1)%3;o.fromBufferAttribute(E,w),u.fromBufferAttribute(E,k),!0===dg(o,u,a)&&(i.push(o.x,o.y,o.z),i.push(u.x,u.y,u.z))}e.setAttribute("position",new op(i,3))}return e}return(0,o.Z)(n)}(vp);function dg(e,t,n){var r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r,i),!0)}var vg=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).type="ShadowMaterial",r.color=new ep(0),r.transparent=!0,r.setValues(e),r}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this}}]),n}(Yh);vg.prototype.isShadowMaterial=!0;var mg=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new ep(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new ep(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Kl,r.normalScale=new yc(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(Yh);mg.prototype.isMeshStandardMaterial=!0;var yg=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new yc(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty(f(r),"reflectivity",{get:function(){return cc(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.sheenColor=new ep(0),r.sheenColorMap=null,r.sheenRoughness=1,r.sheenRoughnessMap=null,r.transmissionMap=null,r.thickness=0,r.thicknessMap=null,r.attenuationDistance=0,r.attenuationColor=new ep(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularColor=new ep(1,1,1),r.specularColorMap=null,r._sheen=0,r._clearcoat=0,r._transmission=0,r.setValues(e),r}return(0,o.Z)(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]),n}(mg);yg.prototype.isMeshPhysicalMaterial=!0;var gg=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).type="MeshPhongMaterial",r.color=new ep(16777215),r.specular=new ep(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new ep(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Kl,r.normalScale=new yc(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=Xo,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(Yh);gg.prototype.isMeshPhongMaterial=!0;var _g=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).defines={TOON:""},r.type="MeshToonMaterial",r.color=new ep(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new ep(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Kl,r.normalScale=new yc(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(Yh);_g.prototype.isMeshToonMaterial=!0;var Tg=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Kl,r.normalScale=new yc(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.flatShading=!1,r.setValues(e),r}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(Yh);Tg.prototype.isMeshNormalMaterial=!0;var Eg=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).type="MeshLambertMaterial",r.color=new ep(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new ep(0),r.emissiveIntensity=1,r.emissiveMap=null,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=Xo,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(Yh);Eg.prototype.isMeshLambertMaterial=!0;var xg=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new ep(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Kl,r.normalScale=new yc(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.setValues(e),r}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}]),n}(Yh);xg.prototype.isMeshMatcapMaterial=!0;var bg=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(Lm);bg.prototype.isLineDashedMaterial=!0;var Ig={arraySlice:function(e,t,n){return Ig.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,s=0;s!==r;++a)for(var o=n[a]*t,u=0;u!==t;++u)i[s++]=e[o+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var s=a[r];if(void 0!==s)if(Array.isArray(s))do{void 0!==(s=a[r])&&(t.push(a.time),n.push.apply(n,s)),a=e[i++]}while(void 0!==a);else if(void 0!==s.toArray)do{void 0!==(s=a[r])&&(t.push(a.time),s.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(s=a[r])&&(t.push(a.time),n.push(s)),a=e[i++]}while(void 0!==a)}},subclip:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var s=[],o=0;o<a.tracks.length;++o){for(var u=a.tracks[o],l=u.getValueSize(),c=[],h=[],p=0;p<u.times.length;++p){var f=u.times[p]*i;if(!(f<n||f>=r)){c.push(u.times[p]);for(var d=0;d<l;++d)h.push(u.values[p*l+d])}}0!==c.length&&(u.times=Ig.convertArray(c,u.times.constructor),u.values=Ig.convertArray(h,u.values.constructor),s.push(u))}a.tracks=s;for(var v=1/0,m=0;m<a.tracks.length;++m)v>a.tracks[m].times[0]&&(v=a.tracks[m].times[0]);for(var y=0;y<a.tracks.length;++y)a.tracks[y].shift(-1*v);return a.resetDuration(),a},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,a=t/r,s=function(){var t=n.tracks[o],r=t.ValueTypeName;if("bool"===r||"string"===r)return"continue";var i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)return"continue";var s=0,u=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);var l=0,c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);var h,p=t.times.length-1;if(a<=t.times[0]){var f=s,d=u-s;h=Ig.arraySlice(t.values,f,d)}else if(a>=t.times[p]){var v=p*u+s,m=v+u-s;h=Ig.arraySlice(t.values,v,m)}else{var y=t.createInterpolant(),g=s,_=u-s;y.evaluate(a),h=Ig.arraySlice(y.resultBuffer,g,_)}"quaternion"===r&&(new Ac).fromArray(h).normalize().conjugate().toArray(h);for(var T=i.times.length,E=0;E<T;++E){var x=E*c+l;if("quaternion"===r)Ac.multiplyQuaternionsFlat(i.values,x,h,0,i.values,x);else for(var b=c-2*l,I=0;I<b;++I)i.values[x+I]-=h[I]}},o=0;o<i;++o)s();return e.blendMode=Zl,e}},wg=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return(0,o.Z)(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var s=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===s)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var o=t[1];e<o&&(n=2,i=o);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===u)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var l=n+a>>>1;e<t[l]?a=l:n=l+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}();wg.prototype.beforeStart_=wg.prototype.copySampleValue_,wg.prototype.afterEnd_=wg.prototype.copySampleValue_;var kg=function(e){l(n,e);var t=v(n);function n(e,r,i,a){var o;return(0,s.Z)(this,n),(o=t.call(this,e,r,i,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:Pl,endingEnd:Pl},o}return(0,o.Z)(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,s=r[i],o=r[a];if(void 0===s)switch(this.getSettings_().endingStart){case Fl:i=e,s=2*t-n;break;case Ll:s=t+r[i=r.length-2]-r[i+1];break;default:i=e,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case Fl:a=e,o=2*n-t;break;case Ll:a=1,o=n+r[1]-r[0];break;default:a=e-1,o=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-s),this._weightNext=u/(o-n),this._offsetPrev=i*l,this._offsetNext=a*l}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,u=o-s,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,p=this._weightNext,f=(n-t)/(r-t),d=f*f,v=d*f,m=-h*v+2*h*d-h*f,y=(1+h)*v+(-1.5-2*h)*d+(-.5+h)*f+1,g=(-1-p)*v+(1.5+p)*d+.5*f,_=p*v-p*d,T=0;T!==s;++T)i[T]=m*a[l+T]+y*a[u+T]+g*a[o+T]+_*a[c+T];return i}}]),n}(wg),Sg=function(e){l(n,e);var t=v(n);function n(e,r,i,a){return(0,s.Z)(this,n),t.call(this,e,r,i,a)}return(0,o.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,u=o-s,l=(n-t)/(r-t),c=1-l,h=0;h!==s;++h)i[h]=a[u+h]*c+a[o+h]*l;return i}}]),n}(wg),Rg=function(e){l(n,e);var t=v(n);function n(e,r,i,a){return(0,s.Z)(this,n),t.call(this,e,r,i,a)}return(0,o.Z)(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(wg),Cg=function(){function e(t,n,r,i){if((0,s.Z)(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Ig.convertArray(n,this.TimeBufferType),this.values=Ig.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return(0,o.Z)(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new Rg(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new Sg(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new kg(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case Ol:t=this.InterpolantFactoryMethodDiscrete;break;case Nl:t=this.InterpolantFactoryMethodLinear;break;case Ml:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ol;case this.InterpolantFactoryMethodLinear:return Nl;case this.InterpolantFactoryMethodSmooth:return Ml}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var s=this.getValueSize();this.times=Ig.arraySlice(n,i,a),this.values=Ig.arraySlice(this.values,i*s,a*s)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,s=0;s!==i;s++){var o=n[s];if("number"===typeof o&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,o),e=!1;break}if(null!==a&&a>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,o,a),e=!1;break}a=o}if(void 0!==r&&Ig.isTypedArray(r))for(var u=0,l=r.length;u!==l;++u){var c=r[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=Ig.arraySlice(this.times),t=Ig.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Ml,i=e.length-1,a=1,s=1;s<i;++s){var o=!1,u=e[s];if(u!==e[s+1]&&(1!==s||u!==e[0]))if(r)o=!0;else for(var l=s*n,c=l-n,h=l+n,p=0;p!==n;++p){var f=t[l+p];if(f!==t[c+p]||f!==t[h+p]){o=!0;break}}if(o){if(s!==a){e[a]=e[s];for(var d=s*n,v=a*n,m=0;m!==n;++m)t[v+m]=t[d+m]}++a}}if(i>0){e[a]=e[i];for(var y=i*n,g=a*n,_=0;_!==n;++_)t[g+_]=t[y+_];++a}return a!==e.length?(this.times=Ig.arraySlice(e,0,a),this.values=Ig.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=Ig.arraySlice(this.times,0),t=Ig.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Ig.convertArray(e.times,Array),values:Ig.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();Cg.prototype.TimeBufferType=Float32Array,Cg.prototype.ValueBufferType=Float32Array,Cg.prototype.DefaultInterpolation=Nl;var Dg=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(Cg);Dg.prototype.ValueTypeName="bool",Dg.prototype.ValueBufferType=Array,Dg.prototype.DefaultInterpolation=Ol,Dg.prototype.InterpolantFactoryMethodLinear=void 0,Dg.prototype.InterpolantFactoryMethodSmooth=void 0;var Ag=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(Cg);Ag.prototype.ValueTypeName="color";var Og=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(Cg);Og.prototype.ValueTypeName="number";var Ng=function(e){l(n,e);var t=v(n);function n(e,r,i,a){return(0,s.Z)(this,n),t.call(this,e,r,i,a)}return(0,o.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-t)/(r-t),u=e*s,l=u+s;u!==l;u+=4)Ac.slerpFlat(i,0,a,u-s,a,u,o);return i}}]),n}(wg),Mg=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new Ng(this.times,this.values,this.getValueSize(),e)}}]),n}(Cg);Mg.prototype.ValueTypeName="quaternion",Mg.prototype.DefaultInterpolation=Nl,Mg.prototype.InterpolantFactoryMethodSmooth=void 0;var Pg=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(Cg);Pg.prototype.ValueTypeName="string",Pg.prototype.ValueBufferType=Array,Pg.prototype.DefaultInterpolation=Ol,Pg.prototype.InterpolantFactoryMethodLinear=void 0,Pg.prototype.InterpolantFactoryMethodSmooth=void 0;var Fg=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(Cg);Fg.prototype.ValueTypeName="vector";var Lg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ul;(0,s.Z)(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=lc(),this.duration<0&&this.resetDuration()}return(0,o.Z)(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(Ug(n[i]).scale(r));var s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,a=n.length;i!==a;++i)t.push(Cg.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var i=t.length,a=[],s=0;s<i;s++){var o=[],u=[];o.push((s+i-1)%i,s,(s+1)%i),u.push(0,1,0);var l=Ig.getKeyframeOrder(o);o=Ig.sortedArray(o,1,l),u=Ig.sortedArray(u,1,l),r||0!==o[0]||(o.push(i),u.push(u[0])),a.push(new Og(".morphTargetInfluences["+t[s].name+"]",o,u).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,s=e.length;a<s;a++){var o=e[a],u=o.name.match(i);if(u&&u.length>1){var l=u[1],c=r[l];c||(r[l]=c=[]),c.push(o)}}var h=[];for(var p in r)h.push(this.CreateFromMorphTargetSequence(p,r[p],t,n));return h}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],s=[];Ig.flattenJSON(n,a,s,r),0!==a.length&&i.push(new e(t,a,s))}},r=[],i=e.name||"default",a=e.fps||30,s=e.blendMode,o=e.length||-1,u=e.hierarchy||[],l=0;l<u.length;l++){var c=u[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={},p=void 0;for(p=0;p<c.length;p++)if(c[p].morphTargets)for(var f=0;f<c[p].morphTargets.length;f++)h[c[p].morphTargets[f]]=-1;for(var d in h){for(var v=[],m=[],y=0;y!==c[p].morphTargets.length;++y){var g=c[p];v.push(g.time),m.push(g.morphTarget===d?1:0)}r.push(new Og(".morphTargetInfluence["+d+"]",v,m))}o=h.length*(a||1)}else{var _=".bones["+t[l].name+"]";n(Fg,_+".position",c,"pos",r),n(Mg,_+".quaternion",c,"rot",r),n(Fg,_+".scale",c,"scl",r)}}return 0===r.length?null:new this(i,o,r,s)}}]),e}();function Ug(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Og;case"vector":case"vector2":case"vector3":case"vector4":return Fg;case"color":return Ag;case"quaternion":return Mg;case"bool":case"boolean":return Dg;case"string":return Pg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];Ig.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var Zg={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Bg=(0,o.Z)((function e(t,n,r){(0,s.Z)(this,e);var i=this,a=!1,o=0,u=0,l=void 0,c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){u++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,u),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,u),o===u&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return l?l(e):e},this.setURLModifier=function(e){return l=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){var t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=c.length;t<n;t+=2){var r=c[t],i=c[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}})),zg=new Bg,Gg=function(){function e(t){(0,s.Z)(this,e),this.manager=void 0!==t?t:zg,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return(0,o.Z)(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),Hg={},jg=function(e){l(n,e);var t=v(n);function n(e){return(0,s.Z)(this,n),t.call(this,e)}return(0,o.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=Zg.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;if(void 0===Hg[e]){Hg[e]=[],Hg[e].push({onLoad:t,onProgress:n,onError:r});var s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(s).then((function(t){if(200===t.status||0===t.status){0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");var n=Hg[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),a=i?parseInt(i):0,s=0!==a,o=0;return new ReadableStream({start:function(e){!function t(){r.read().then((function(r){var i=r.done,u=r.value;if(i)e.close();else{o+=u.byteLength;for(var l=new ProgressEvent("progress",{lengthComputable:s,loaded:o,total:a}),c=0,h=n.length;c<h;c++){var p=n[c];p.onProgress&&p.onProgress(l)}e.enqueue(u),t()}}))}()}})}throw Error('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText))})).then((function(e){var t=new Response(e);switch(i.responseType){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((function(e){return(new DOMParser).parseFromString(e,i.mimeType)}));case"json":return t.json();default:return t.text()}})).then((function(t){Zg.add(e,t);var n=Hg[e];delete Hg[e];for(var r=0,a=n.length;r<a;r++){var s=n[r];s.onLoad&&s.onLoad(t)}i.manager.itemEnd(e)})).catch((function(t){var n=Hg[e];delete Hg[e];for(var r=0,a=n.length;r<a;r++){var s=n[r];s.onError&&s.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)})),this.manager.itemStart(e)}else Hg[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(Gg),Vg=function(e){l(n,e);var t=v(n);function n(e){return(0,s.Z)(this,n),t.call(this,e)}return(0,o.Z)(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Zg.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var s=Ec("img");function o(){l(),Zg.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){l(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function l(){s.removeEventListener("load",o,!1),s.removeEventListener("error",u,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(e),s.src=e,s}}]),n}(Gg),Wg=function(e){l(n,e);var t=v(n);function n(e){return(0,s.Z)(this,n),t.call(this,e)}return(0,o.Z)(n,[{key:"load",value:function(e,t,n,r){var i=new Yp,a=new Vg(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var s=0;function o(n){a.load(e[n],(function(e){i.images[n]=e,6===++s&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var u=0;u<e.length;++u)o(u);return i}}]),n}(Gg),Yg=function(e){l(n,e);var t=v(n);function n(e){return(0,s.Z)(this,n),t.call(this,e)}return(0,o.Z)(n,[{key:"load",value:function(e,t,n,r){var i=new wc,a=new Vg(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}]),n}(Gg),qg=function(e){l(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,s.Z)(this,n),(r=t.call(this)).type="Light",r.color=new ep(e),r.intensity=i,r}return(0,o.Z)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=lt(c(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(Mh);qg.prototype.isLight=!0;var Xg=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;return(0,s.Z)(this,n),(a=t.call(this,e,i)).type="HemisphereLight",a.position.copy(Mh.DefaultUp),a.updateMatrix(),a.groundColor=new ep(r),a}return(0,o.Z)(n,[{key:"copy",value:function(e){return qg.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}]),n}(qg);Xg.prototype.isHemisphereLight=!0;var Kg=new lh,Qg=new Oc,Jg=new Oc,$g=function(){function e(t){(0,s.Z)(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new yc(512,512),this.map=null,this.mapPass=null,this.matrix=new lh,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new tf,this._frameExtents=new yc(1,1),this._viewportCount=1,this._viewports=[new Sc(0,0,1,1)]}return(0,o.Z)(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;Qg.setFromMatrixPosition(e.matrixWorld),t.position.copy(Qg),Jg.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Jg),t.updateMatrixWorld(),Kg.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Kg),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),e_=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this,new Hp(50,1,.5,500))).focus=1,e}return(0,o.Z)(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*uc*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;r===t.fov&&i===t.aspect&&a===t.far||(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),lt(c(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}($g);e_.prototype.isSpotLightShadow=!0;var t_=function(e){l(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,s.Z)(this,n),(i=t.call(this,e,r)).type="SpotLight",i.position.copy(Mh.DefaultUp),i.updateMatrix(),i.target=new Mh,i.distance=a,i.angle=o,i.penumbra=u,i.decay=l,i.shadow=new e_,i}return(0,o.Z)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(qg);t_.prototype.isSpotLight=!0;var n_=new lh,r_=new Oc,i_=new Oc,a_=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this,new Hp(90,1,.5,500)))._frameExtents=new yc(4,2),e._viewportCount=6,e._viewports=[new Sc(2,1,1,1),new Sc(0,1,1,1),new Sc(3,1,1,1),new Sc(1,1,1,1),new Sc(3,0,1,1),new Sc(1,0,1,1)],e._cubeDirections=[new Oc(1,0,0),new Oc(-1,0,0),new Oc(0,0,1),new Oc(0,0,-1),new Oc(0,1,0),new Oc(0,-1,0)],e._cubeUps=[new Oc(0,1,0),new Oc(0,1,0),new Oc(0,1,0),new Oc(0,1,0),new Oc(0,0,1),new Oc(0,0,-1)],e}return(0,o.Z)(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),r_.setFromMatrixPosition(e.matrixWorld),n.position.copy(r_),i_.copy(n.position),i_.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(i_),n.updateMatrixWorld(),r.makeTranslation(-r_.x,-r_.y,-r_.z),n_.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(n_)}}]),n}($g);a_.prototype.isPointLightShadow=!0;var s_=function(e){l(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,s.Z)(this,n),(i=t.call(this,e,r)).type="PointLight",i.distance=a,i.decay=o,i.shadow=new a_,i}return(0,o.Z)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(qg);s_.prototype.isPointLight=!0;var o_=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.call(this,new vf(-5,5,5,-5,.5,500))}return(0,o.Z)(n)}($g);o_.prototype.isDirectionalLightShadow=!0;var u_=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this,e,r)).type="DirectionalLight",i.position.copy(Mh.DefaultUp),i.updateMatrix(),i.target=new Mh,i.shadow=new o_,i}return(0,o.Z)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(qg);u_.prototype.isDirectionalLight=!0;var l_=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this,e,r)).type="AmbientLight",i}return(0,o.Z)(n)}(qg);l_.prototype.isAmbientLight=!0;var c_=function(e){l(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return(0,s.Z)(this,n),(i=t.call(this,e,r)).type="RectAreaLight",i.width=a,i.height=o,i}return(0,o.Z)(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=lt(c(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(qg);c_.prototype.isRectAreaLight=!0;var h_=function(){function e(){(0,s.Z)(this,e),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Oc)}return(0,o.Z)(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}();h_.prototype.isSphericalHarmonics3=!0;var p_=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new h_,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,s.Z)(this,n),(e=t.call(this,void 0,i)).sh=r,e}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=lt(c(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(qg);p_.prototype.isLightProbe=!0;var f_=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(IQ){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}(),d_=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this)).type="InstancedBufferGeometry",e.instanceCount=1/0,e}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=lt(c(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(vp);d_.prototype.isInstancedBufferGeometry=!0;var v_,m_=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),r=t.call(this,e),"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return(0,o.Z)(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Zg.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(e,s).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Zg.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}]),n}(Gg);m_.prototype.isImageBitmapLoader=!0;var y_={getContext:function(){return void 0===v_&&(v_=new(window.AudioContext||window.webkitAudioContext)),v_},setContext:function(e){v_=e}},g_=function(e){l(n,e);var t=v(n);function n(e){return(0,s.Z)(this,n),t.call(this,e)}return(0,o.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new jg(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{var a=n.slice(0);y_.getContext().decodeAudioData(a,(function(e){t(e)}))}catch(IQ){r?r(IQ):console.error(IQ),i.manager.itemError(e)}}),n,r)}}]),n}(Gg),__=function(e){l(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,s.Z)(this,n),i=t.call(this,void 0,a);var o=(new ep).set(e),u=(new ep).set(r),l=new Oc(o.r,o.g,o.b),c=new Oc(u.r,u.g,u.b),h=Math.sqrt(Math.PI),p=h*Math.sqrt(.75);return i.sh.coefficients[0].copy(l).add(c).multiplyScalar(h),i.sh.coefficients[1].copy(l).sub(c).multiplyScalar(p),i}return(0,o.Z)(n)}(p_);__.prototype.isHemisphereLightProbe=!0;var T_=function(e){l(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,s.Z)(this,n),r=t.call(this,void 0,i);var a=(new ep).set(e);return r.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return(0,o.Z)(n)}(p_);T_.prototype.isAmbientLightProbe=!0;var E_=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,s.Z)(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return(0,o.Z)(e,[{key:"start",value:function(){this.startTime=x_(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=x_();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function x_(){return("undefined"===typeof performance?Date:performance).now()}var b_=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return(0,o.Z)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(Mh),I_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;(0,s.Z)(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return(0,o.Z)(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),w_=function(){function e(t,n,r){var i,a,o;switch((0,s.Z)(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return(0,o.Z)(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(var s=0;s!==r;++s)n[i+s]=n[s];a=t}else{var o=t/(a+=t);this._mixBufferRegion(n,i,0,o,r)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var o=t*this._origIndex;this._mixBufferRegion(n,r,o,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var u=t,l=t+t;u!==l;++u)if(n[u]!==n[u+t]){s.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,r){Ac.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,i){var a=this._workIndex*i;Ac.multiplyQuaternionsFlat(e,a,e,t,e,n),Ac.slerpFlat(e,t,e,t,e,a,r)}},{key:"_lerp",value:function(e,t,n,r,i){for(var a=1-r,s=0;s!==i;++s){var o=t+s;e[o]=e[o]*a+e[n+s]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,i){for(var a=0;a!==i;++a){var s=t+a;e[s]=e[s]+e[n+a]*r}}}]),e}(),k_="\\[\\]\\.:\\/",S_=new RegExp("["+k_+"]","g"),R_="[^"+k_+"]",C_="[^"+k_.replace("\\.","")+"]",D_=/((?:WC+[\/:])*)/.source.replace("WC",R_),A_=/(WCOD+)?/.source.replace("WCOD",C_),O_=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",R_),N_=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",R_),M_=new RegExp("^"+D_+A_+O_+N_+"$"),P_=["material","materials","bones"],F_=function(){function e(t,n,r){(0,s.Z)(this,e);var i=r||L_.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}return(0,o.Z)(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),L_=function(){function e(t,n,r){(0,s.Z)(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return(0,o.Z)(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var s=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===s){s=o;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==s){if(void 0===t[s])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[s]}}var u=t[i];if(void 0!==u){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else void 0!==u.fromArray&&void 0!==u.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(c=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(S_,"")}},{key:"parseTrackName",value:function(e){var t=M_.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==P_.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}]),e}();L_.Composite=F_,L_.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},L_.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},L_.prototype.GetterByBindingType=[L_.prototype._getValue_direct,L_.prototype._getValue_array,L_.prototype._getValue_arrayElement,L_.prototype._getValue_toArray],L_.prototype.SetterByBindingTypeAndVersioning=[[L_.prototype._setValue_direct,L_.prototype._setValue_direct_setNeedsUpdate,L_.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[L_.prototype._setValue_array,L_.prototype._setValue_array_setNeedsUpdate,L_.prototype._setValue_array_setMatrixWorldNeedsUpdate],[L_.prototype._setValue_arrayElement,L_.prototype._setValue_arrayElement_setNeedsUpdate,L_.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[L_.prototype._setValue_fromArray,L_.prototype._setValue_fromArray_setNeedsUpdate,L_.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var U_=function(){function e(){(0,s.Z)(this,e),this.uuid=lc(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}return(0,o.Z)(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,s=void 0,o=e.length,u=this.nCachedObjects_,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],p=h.uuid,f=t[p];if(void 0===f){f=o++,t[p]=f,e.push(h);for(var d=0,v=a;d!==v;++d)i[d].push(new L_(h,n[d],r[d]))}else if(f<u){s=e[f];var m=--u,y=e[m];t[y.uuid]=f,e[f]=y,t[p]=m,e[m]=h;for(var g=0,_=a;g!==_;++g){var T=i[g],E=T[m],x=T[f];T[f]=E,void 0===x&&(x=new L_(h,n[g],r[g])),T[m]=x}}else e[f]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=0,s=arguments.length;a!==s;++a){var o=arguments[a],u=o.uuid,l=t[u];if(void 0!==l&&l>=i){var c=i++,h=e[c];t[h.uuid]=l,e[l]=h,t[u]=c,e[c]=o;for(var p=0,f=r;p!==f;++p){var d=n[p],v=d[c],m=d[l];d[l]=v,d[c]=m}}}this.nCachedObjects_=i}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length,s=0,o=arguments.length;s!==o;++s){var u=arguments[s].uuid,l=t[u];if(void 0!==l)if(delete t[u],l<i){var c=--i,h=e[c],p=--a,f=e[p];t[h.uuid]=l,e[l]=h,t[f.uuid]=c,e[c]=f,e.pop();for(var d=0,v=r;d!==v;++d){var m=n[d],y=m[c],g=m[p];m[l]=y,m[c]=g,m.pop()}}else{var _=--a,T=e[_];_>0&&(t[T.uuid]=l),e[l]=T,e.pop();for(var E=0,x=r;E!==x;++E){var b=n[E];b[l]=b[_],b.pop()}}}this.nCachedObjects_=i}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,s=this._parsedPaths,o=this._objects,u=o.length,l=this.nCachedObjects_,c=new Array(u);r=i.length,n[e]=r,a.push(e),s.push(t),i.push(c);for(var h=l,p=o.length;h!==p;++h){var f=o[h];c[h]=new L_(f,e,t)}return c}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];t[e[s]]=n,a[n]=o,a.pop(),i[n]=i[s],i.pop(),r[n]=r[s],r.pop()}}}]),e}();U_.prototype.isAnimationObjectGroup=!0;var Z_=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;(0,s.Z)(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=i;for(var a=n.tracks,o=a.length,u=new Array(o),l={endingStart:Pl,endingEnd:Pl},c=0;c!==o;++c){var h=a[c].createInterpolant(null);u[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=u,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Al,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return(0,o.Z)(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,s=r/i;e.warp(1,a,t),this.warp(s,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,i=r.time,a=this.timeScale,s=this._timeScaleInterpolant;null===s&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);var o=s.parameterPositions,u=s.sampleValues;return o[0]=i,o[1]=i+n,u[0]=e/a,u[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var s=this._updateTime(t),o=this._updateWeight(e);if(o>0){var u=this._interpolants,l=this._propertyBindings;if(this.blendMode===Zl)for(var c=0,h=u.length;c!==h;++c)u[c].evaluate(s),l[c].accumulateAdditive(o);else for(var p=0,f=u.length;p!==f;++p)u[p].evaluate(s),l[p].accumulate(r,o)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=2202===n;if(0===e)return-1===i?r:a&&1===(1&i)?t-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){var s=Math.floor(r/t);r-=t*s,i+=Math.abs(s);var o=this.repetitions-i;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){var u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=r;if(a&&1===(1&i))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=Fl,r.endingEnd=Fl):(r.endingStart=e?this.zeroSlopeAtStart?Fl:Pl:Ll,r.endingEnd=t?this.zeroSlopeAtEnd?Fl:Pl:Ll)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var s=a.parameterPositions,o=a.sampleValues;return s[0]=i,o[0]=t,s[1]=i+e,o[1]=n,this}}]),e}(),B_=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this))._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return(0,o.Z)(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,s=e._interpolants,o=n.uuid,u=this._bindingsByRootAndName,l=u[o];void 0===l&&(l={},u[o]=l);for(var c=0;c!==i;++c){var h=r[c],p=h.name,f=l[p];if(void 0!==f)a[c]=f;else{if(void 0!==(f=a[c])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,o,p));continue}var d=t&&t._propertyBindings[c].binding.parsedPath;++(f=new w_(L_.create(n,p,d),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(f,o,p),a[c]=f}s[c].resultBuffer=f.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,s=i.length;a!==s;++a){var o=i[a];0===o.useCount++&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var s=a.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,s=a[i],o=s.knownActions,u=o[o.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,o[l]=u,o.pop(),e._byClipCacheIndex=null,delete s.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[i],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,s=a[r],o=t[t.length-1],u=e._cacheIndex;o._cacheIndex=u,t[u]=o,t.pop(),delete s[i],0===Object.keys(s).length&&delete a[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Sg(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,i=r.uuid,a="string"===typeof e?Lg.findByName(r,e):e,s=null!==a?a.uuid:e,o=this._actionsByClip[s],u=null;if(void 0===n&&(n=null!==a?a.blendMode:Ul),void 0!==o){var l=o.actionByRoot[i];if(void 0!==l&&l.blendMode===n)return l;u=o.knownActions[0],null===a&&(a=u._clip)}if(null===a)return null;var c=new Z_(this,a,t,n);return this._bindAction(c,u),this._addInactiveAction(c,s,i),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?Lg.findByName(n,e):e,a=i?i.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,s=0;s!==n;++s){t[s]._update(r,e,i,a)}for(var o=this._bindings,u=this._nActiveBindings,l=0;l!==u;++l)o[l].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,s=0,o=a.length;s!==o;++s){var u=a[s];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var s in a){var o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(rc);B_.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var z_=function(){function e(t){(0,s.Z)(this,e),"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return(0,o.Z)(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),G_=function(e){l(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,s.Z)(this,n),(i=t.call(this,e,r)).meshPerAttribute=a,i}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=lt(c(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=lt(c(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(tm);G_.prototype.isInstancedInterleavedBuffer=!0,function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}return(0,o.Z)(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}().prototype.isGLBufferAttribute=!0;var H_=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;(0,s.Z)(this,e),this.ray=new uh(t,n),this.near=r,this.far=i,this.camera=null,this.layers=new Th,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return(0,o.Z)(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return V_(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(j_),t}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,i=e.length;r<i;r++)V_(e[r],this,n,t);return n.sort(j_),n}}]),e}();function j_(e,t){return e.distance-t.distance}function V_(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var i=e.children,a=0,s=i.length;a<s;a++)V_(i[a],t,n,!0)}var W_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,s.Z)(this,e),this.radius=t,this.phi=n,this.theta=r,this}return(0,o.Z)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(cc(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Y_=new yc,q_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new yc(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new yc(-1/0,-1/0);(0,s.Z)(this,e),this.min=t,this.max=n}return(0,o.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Y_.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Y_.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();q_.prototype.isBox2=!0;var X_=new Oc,K_=new Oc,Q_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Oc,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Oc;(0,s.Z)(this,e),this.start=t,this.end=n}return(0,o.Z)(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){X_.subVectors(e,this.start),K_.subVectors(this.end,this.start);var n=K_.dot(K_),r=K_.dot(X_)/n;return t&&(r=cc(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),J_=new Oc,$_=new lh,eT=new lh,tT=function(e){l(n,e);var t=v(n);function n(e){var r;(0,s.Z)(this,n);for(var i=nT(e),a=new vp,o=[],u=[],l=new ep(0,0,1),c=new ep(0,1,0),h=0;h<i.length;h++){var p=i[h];p.parent&&p.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),u.push(l.r,l.g,l.b),u.push(c.r,c.g,c.b))}a.setAttribute("position",new op(o,3)),a.setAttribute("color",new op(u,3));var f=new Lm({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(r=t.call(this,a,f)).type="SkeletonHelper",r.isSkeletonHelper=!0,r.root=e,r.bones=i,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return(0,o.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,i=r.getAttribute("position");eT.copy(this.root.matrixWorld).invert();for(var a=0,s=0;a<t.length;a++){var o=t[a];o.parent&&o.parent.isBone&&($_.multiplyMatrices(eT,o.matrixWorld),J_.setFromMatrixPosition($_),i.setXYZ(s,J_.x,J_.y,J_.z),$_.multiplyMatrices(eT,o.parent.matrixWorld),J_.setFromMatrixPosition($_),i.setXYZ(s+1,J_.x,J_.y,J_.z),s+=2)}r.getAttribute("position").needsUpdate=!0,lt(c(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(Wm);function nT(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,nT(e.children[n]));return t}var rT=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;(0,s.Z)(this,n),a=new ep(a),o=new ep(o);for(var u=i/2,l=r/i,c=r/2,h=[],p=[],f=0,d=0,v=-c;f<=i;f++,v+=l){h.push(-c,0,v,c,0,v),h.push(v,0,-c,v,0,c);var m=f===u?a:o;m.toArray(p,d),d+=3,m.toArray(p,d),d+=3,m.toArray(p,d),d+=3,m.toArray(p,d),d+=3}var y=new vp;y.setAttribute("position",new op(h,3)),y.setAttribute("color",new op(p,3));var g=new Lm({vertexColors:!0,toneMapped:!1});return(e=t.call(this,y,g)).type="GridHelper",e}return(0,o.Z)(n)}(Wm);var iT=new Float32Array(1);new Int32Array(iT.buffer);cy.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(cy.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Ay.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},rT.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},tT.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Gg.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),f_.extractUrlBase(e)},Gg.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},q_.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},q_.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},q_.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},q_.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},Pc.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Pc.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Pc.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Pc.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Pc.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},eh.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},tf.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Q_.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},gc.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},gc.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},gc.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},gc.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},gc.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},gc.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},lh.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},lh.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},lh.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Oc).setFromMatrixColumn(this,3)},lh.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},lh.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},lh.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},lh.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},lh.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},lh.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},lh.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},lh.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},lh.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},lh.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},lh.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},lh.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},lh.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},lh.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},lh.prototype.makeFrustum=function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)},lh.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Jp.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Ac.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Ac.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},uh.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},uh.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},uh.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Vh.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Vh.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},Vh.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},Vh.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},Vh.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},Vh.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Vh.getBarycoord(e,t,n,r,i)},Vh.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Vh.getNormal(e,t,n,r)},Oy.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},Oy.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new og(this,e)},Oy.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new cg(this,e)},yc.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},yc.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},yc.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Oc.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Oc.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Oc.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},Oc.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},Oc.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},Oc.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},Oc.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Oc.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Oc.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Sc.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Sc.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Mh.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},Mh.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Mh.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},Mh.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Mh.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Mh.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Np.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Np.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),wm.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Hp.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(qg.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(ip.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===tc},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(tc)}}}),ip.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?tc:ec),this},ip.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},ip.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},vp.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},vp.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new ip(arguments[1],arguments[2])))},vp.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},vp.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},vp.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},vp.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},vp.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(vp.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),tm.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?tc:ec),this},tm.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},og.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},og.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},og.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},em.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},z_.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Yh.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ep}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(zp.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Kv.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},Kv.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},Kv.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Kv.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Kv.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Kv.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Kv.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Kv.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Kv.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Kv.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Kv.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Kv.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Kv.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Kv.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Kv.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},Kv.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Kv.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Kv.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Kv.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Kv.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Kv.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Kv.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Kv.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Kv.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Kv.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Kv.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?Gl:zl}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Zv.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Rc.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),b_.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new g_).load(e,(function(e){t.setBuffer(e)})),this},I_.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Wp.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Wp.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},bc.crossOrigin=void 0,bc.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Yg;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},bc.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Wg;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},bc.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},bc.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:oo}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=oo);var aT=new Oc,sT=new Oc,oT=new Oc,uT=new yc,lT=new yc,cT=new yc,hT=new Oc;function pT(e,t,n,r,i,a,s){aT.fromBufferAttribute(t,r),sT.fromBufferAttribute(t,i),oT.fromBufferAttribute(t,a);var o=function(e,t,n,r,i,a){return null===(a===yo?e.intersectTriangle(r,n,t,!0,i):e.intersectTriangle(t,n,r,a!==go,i))?null:{distance:e.origin.distanceTo(i),point:i.clone()}}(e,aT,sT,oT,hT,s);if(o){n&&(uT.fromBufferAttribute(n,r),lT.fromBufferAttribute(n,i),cT.fromBufferAttribute(n,a),o.uv=Vh.getUV(hT,aT,sT,oT,uT,lT,cT,new yc));var u={a:r,b:i,c:a,normal:new Oc,materialIndex:0};Vh.getNormal(aT,sT,oT,u.normal),o.face=u,o.faceIndex=r}return o}function fT(e,t,n,r,i){var a=3*r,s=e.index.getX(a),o=e.index.getX(a+1),u=e.index.getX(a+2),l=pT(n,e.attributes.position,e.attributes.uv,s,o,u,t);return l?(l.faceIndex=r,i&&i.push(l),l):null}function dT(e,t,n){return null===e?null:(e.point.applyMatrix4(t.matrixWorld),e.distance=e.point.distanceTo(n.ray.origin),e.object=t,e.distance<n.near||e.distance>n.far?null:e)}var vT=0,mT=1,yT=2,gT=2,_T=1.25,TT=1,ET=32,xT=65535,bT=Math.pow(2,-24),IT=(0,o.Z)((function e(){(0,s.Z)(this,e)}));function wT(e,t,n){return n.min.x=t[e],n.min.y=t[e+1],n.min.z=t[e+2],n.max.x=t[e+3],n.max.y=t[e+4],n.max.z=t[e+5],n}function kT(e){for(var t=-1,n=-1/0,r=0;r<3;r++){var i=e[r+3]-e[r];i>n&&(n=i,t=r)}return t}function ST(e,t){t.set(e)}function RT(e,t,n){for(var r,i,a=0;a<3;a++){var s=a+3;r=e[a],i=t[a],n[a]=r<i?r:i,r=e[s],i=t[s],n[s]=r>i?r:i}}function CT(e,t,n){for(var r=0;r<3;r++){var i=t[e+2*r],a=t[e+2*r+1],s=i-a,o=i+a;s<n[r]&&(n[r]=s),o>n[r+3]&&(n[r+3]=o)}}function DT(e){var t=e[3]-e[0],n=e[4]-e[1],r=e[5]-e[2];return 2*(t*n+n*r+r*t)}function AT(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=1/0,s=1/0,o=1/0,u=-1/0,l=-1/0,c=-1/0,h=1/0,p=1/0,f=1/0,d=-1/0,v=-1/0,m=-1/0,y=null!==i,g=6*t,_=6*(t+n);g<_;g+=6){var T=e[g+0],E=e[g+1],x=T-E,b=T+E;x<a&&(a=x),b>u&&(u=b),y&&T<h&&(h=T),y&&T>d&&(d=T);var I=e[g+2],w=e[g+3],k=I-w,S=I+w;k<s&&(s=k),S>l&&(l=S),y&&I<p&&(p=I),y&&I>v&&(v=I);var R=e[g+4],C=e[g+5],D=R-C,A=R+C;D<o&&(o=D),A>c&&(c=A),y&&R<f&&(f=R),y&&R>m&&(m=R)}r[0]=a,r[1]=s,r[2]=o,r[3]=u,r[4]=l,r[5]=c,y&&(i[0]=h,i[1]=p,i[2]=f,i[3]=d,i[4]=v,i[5]=m)}var OT=32,NT=function(e,t){return e.candidate-t.candidate},MT=new Array(OT).fill().map((function(){return{count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0}})),PT=new Float32Array(6);function FT(e,t){function n(e){f&&f(e/d)}function r(t,i,f){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!v&&m>=l&&(v=!0,c&&(console.warn("MeshBVH: Max depth of ".concat(l," reached when generating BVH. Consider increasing maxDepth.")),console.warn(e))),f<=h||m>=l)return n(i+f),t.offset=i,t.count=f,t;var y=function(e,t,n,r,i,s){var o=-1,u=0;if(s===vT)-1!==(o=kT(t))&&(u=(t[o]+t[o+3])/2);else if(s===mT)-1!==(o=kT(e))&&(u=function(e,t,n,r){for(var i=0,a=t,s=t+n;a<s;a++)i+=e[6*a+2*r];return i/n}(n,r,i,o));else if(s===yT)for(var l=DT(e),c=_T*i,h=6*r,p=6*(r+i),f=0;f<3;f++){var d=t[f],v=(t[f+3]-d)/OT;if(i<OT/4){var m=(0,a.Z)(MT);m.length=i;for(var y=0,g=h;g<p;g+=6,y++){var _=m[y];_.candidate=n[g+2*f],_.count=0;for(var T=_.bounds,E=_.leftCacheBounds,x=_.rightCacheBounds,b=0;b<3;b++)x[b]=1/0,x[b+3]=-1/0,E[b]=1/0,E[b+3]=-1/0,T[b]=1/0,T[b+3]=-1/0;CT(g,n,T)}m.sort(NT);for(var I=i,w=0;w<I;w++)for(var k=m[w];w+1<I&&m[w+1].candidate===k.candidate;)m.splice(w+1,1),I--;for(var S=h;S<p;S+=6)for(var R=n[S+2*f],C=0;C<I;C++){var D=m[C];R>=D.candidate?CT(S,n,D.rightCacheBounds):(CT(S,n,D.leftCacheBounds),D.count++)}for(var A=0;A<I;A++){var O=m[A],N=O.count,M=i-O.count,P=O.leftCacheBounds,F=O.rightCacheBounds,L=0;0!==N&&(L=DT(P)/l);var U=0;0!==M&&(U=DT(F)/l);var Z=TT+_T*(L*N+U*M);Z<c&&(o=f,c=Z,u=O.candidate)}}else{for(var B=0;B<OT;B++){var z=MT[B];z.count=0,z.candidate=d+v+B*v;for(var G=z.bounds,H=0;H<3;H++)G[H]=1/0,G[H+3]=-1/0}for(var j=h;j<p;j+=6){var V=~~((n[j+2*f]-d)/v);V>=OT&&(V=OT-1);var W=MT[V];W.count++,CT(j,n,W.bounds)}var Y=MT[OT-1];ST(Y.bounds,Y.rightCacheBounds);for(var q=OT-2;q>=0;q--){var X=MT[q],K=MT[q+1];RT(X.bounds,K.rightCacheBounds,X.rightCacheBounds)}for(var Q=0,J=0;J<OT-1;J++){var $=MT[J],ee=$.count,te=$.bounds,ne=MT[J+1].rightCacheBounds;0!==ee&&(0===Q?ST(te,PT):RT(te,PT,PT));var re=0,ie=0;0!==(Q+=ee)&&(re=DT(PT)/l);var ae=i-Q;0!==ae&&(ie=DT(ne)/l);var se=TT+_T*(re*Q+ie*ae);se<c&&(o=f,c=se,u=$.candidate)}}}else console.warn("MeshBVH: Invalid build strategy value ".concat(s," used."));return{axis:o,pos:u}}(t.boundingData,d,o,i,f,p);if(-1===y.axis)return n(i+f),t.offset=i,t.count=f,t;var g=function(e,t,n,r,i){for(var a=n,s=n+r-1,o=i.pos,u=2*i.axis;;){for(;a<=s&&t[6*a+u]<o;)a++;for(;a<=s&&t[6*s+u]>=o;)s--;if(!(a<s))return a;for(var l=0;l<3;l++){var c=e[3*a+l];e[3*a+l]=e[3*s+l],e[3*s+l]=c;var h=t[6*a+2*l+0];t[6*a+2*l+0]=t[6*s+2*l+0],t[6*s+2*l+0]=h;var p=t[6*a+2*l+1];t[6*a+2*l+1]=t[6*s+2*l+1],t[6*s+2*l+1]=p}a++,s--}}(u,o,i,f,y);if(g===i||g===i+f)n(i+f),t.offset=i,t.count=f;else{t.splitAxis=y.axis;var _=new IT,T=i,E=g-i;t.left=_,_.boundingData=new Float32Array(6),AT(o,T,E,_.boundingData,s),r(_,T,E,s,m+1);var x=new IT,b=g,I=f-E;t.right=x,x.boundingData=new Float32Array(6),AT(o,b,I,x.boundingData,s),r(x,b,I,s,m+1)}return t}!function(e,t){if(!e.index){var n,r=e.attributes.position.count,i=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;n=r>65535?new Uint32Array(new i(4*r)):new Uint16Array(new i(2*r)),e.setIndex(new ip(n,1));for(var a=0;a<r;a++)n[a]=a}}(e,t);var i=new Float32Array(6),s=new Float32Array(6),o=function(e,t){var n=e.attributes.position,r=e.index.array,i=r.length/3,a=new Float32Array(6*i),s=n.normalized,o=n.array,u=n.offset||0,l=3;n.isInterleavedBufferAttribute&&(l=n.data.stride);for(var c=["getX","getY","getZ"],h=0;h<i;h++){var p=3*h,f=6*h,d=void 0,v=void 0,m=void 0;s?(d=r[p+0],v=r[p+1],m=r[p+2]):(d=r[p+0]*l+u,v=r[p+1]*l+u,m=r[p+2]*l+u);for(var y=0;y<3;y++){var g=void 0,_=void 0,T=void 0;s?(g=n[c[y]](d),_=n[c[y]](v),T=n[c[y]](m)):(g=o[d+y],_=o[v+y],T=o[m+y]);var E=g;_<E&&(E=_),T<E&&(E=T);var x=g;_>x&&(x=_),T>x&&(x=T);var b=(x-E)/2,I=2*y;a[f+I+0]=E+b,a[f+I+1]=b+(Math.abs(E)+b)*bT,E<t[y]&&(t[y]=E),x>t[y+3]&&(t[y+3]=x)}}return a}(e,i),u=e.index.array,l=t.maxDepth,c=t.verbose,h=t.maxLeafTris,p=t.strategy,f=t.onProgress,d=e.index.count/3,v=!1,m=[],y=function(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];var t,n=[],r=new Set,i=b(e.groups);try{for(i.s();!(t=i.n()).done;){var a=t.value;r.add(a.start),r.add(a.start+a.count)}}catch(c){i.e(c)}finally{i.f()}for(var s=Array.from(r.values()).sort((function(e,t){return e-t})),o=0;o<s.length-1;o++){var u=s[o],l=s[o+1];n.push({offset:u/3,count:(l-u)/3})}return n}(e);if(1===y.length){var g=y[0],_=new IT;_.boundingData=i,function(e,t,n,r){for(var i=1/0,a=1/0,s=1/0,o=-1/0,u=-1/0,l=-1/0,c=6*t,h=6*(t+n);c<h;c+=6){var p=e[c+0];p<i&&(i=p),p>o&&(o=p);var f=e[c+2];f<a&&(a=f),f>u&&(u=f);var d=e[c+4];d<s&&(s=d),d>l&&(l=d)}r[0]=i,r[1]=a,r[2]=s,r[3]=o,r[4]=u,r[5]=l}(o,g.offset,g.count,s),r(_,g.offset,g.count,s),m.push(_)}else{var T,E=b(y);try{for(E.s();!(T=E.n()).done;){var x=T.value,I=new IT;I.boundingData=new Float32Array(6),AT(o,x.offset,x.count,I.boundingData,s),r(I,x.offset,x.count,s),m.push(I)}}catch(w){E.e(w)}finally{E.f()}}return m}var LT=function(){function e(){(0,s.Z)(this,e),this.min=1/0,this.max=-1/0}return(0,o.Z)(e,[{key:"setFromPointsField",value:function(e,t){for(var n=1/0,r=-1/0,i=0,a=e.length;i<a;i++){var s=e[i][t];n=s<n?s:n,r=s>r?s:r}this.min=n,this.max=r}},{key:"setFromPoints",value:function(e,t){for(var n=1/0,r=-1/0,i=0,a=t.length;i<a;i++){var s=t[i],o=e.dot(s);n=o<n?o:n,r=o>r?o:r}this.min=n,this.max=r}},{key:"isSeparated",value:function(e){return this.min>e.max||e.min>this.max}}]),e}();LT.prototype.setFromBox=function(){var e=new Oc;return function(t,n){for(var r=n.min,i=n.max,a=1/0,s=-1/0,o=0;o<=1;o++)for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){e.x=r.x*o+i.x*(1-o),e.y=r.y*u+i.y*(1-u),e.z=r.z*l+i.z*(1-l);var c=t.dot(e);a=Math.min(c,a),s=Math.max(c,s)}this.min=a,this.max=s}}();!function(){var e=new LT}();var UT=function(){var e=new Oc,t=new Oc,n=new Oc;return function(r,i,a){var s=r.start,o=e,u=i.start,l=t;n.subVectors(s,u),e.subVectors(r.end,r.start),t.subVectors(i.end,i.start);var c,h,p=n.dot(l),f=l.dot(o),d=l.dot(l),v=n.dot(o),m=o.dot(o)*d-f*f;h=(p+(c=0!==m?(p*f-v*d)/m:0)*f)/d,a.x=c,a.y=h}}(),ZT=function(){var e=new yc,t=new Oc,n=new Oc;return function(r,i,a,s){UT(r,i,e);var o,u,l=e.x,c=e.y;if(l>=0&&l<=1&&c>=0&&c<=1)return r.at(l,a),void i.at(c,s);if(l>=0&&l<=1)return c<0?i.at(0,s):i.at(1,s),void r.closestPointToPoint(s,!0,a);if(c>=0&&c<=1)return l<0?r.at(0,a):r.at(1,a),void i.closestPointToPoint(a,!0,s);o=l<0?r.start:r.end,u=c<0?i.start:i.end;var h=t,p=n;return r.closestPointToPoint(u,!0,t),i.closestPointToPoint(o,!0,n),h.distanceToSquared(u)<=p.distanceToSquared(o)?(a.copy(h),void s.copy(u)):(a.copy(o),void s.copy(p))}}(),BT=function(){var e=new Oc,t=new Oc,n=new Jp,r=new Q_;return function(i,a){var s=i.radius,o=i.center,u=a.a,l=a.b,c=a.c;if(r.start=u,r.end=l,r.closestPointToPoint(o,!0,e).distanceTo(o)<=s)return!0;if(r.start=u,r.end=c,r.closestPointToPoint(o,!0,e).distanceTo(o)<=s)return!0;if(r.start=l,r.end=c,r.closestPointToPoint(o,!0,e).distanceTo(o)<=s)return!0;var h=a.getPlane(n);if(Math.abs(h.distanceToPoint(o))<=s){var p=h.projectPoint(o,t);if(a.containsPoint(p))return!0}return!1}}(),zT=1e-15;function GT(e){return Math.abs(e)<zT}var HT=function(e){l(n,e);var t=v(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).isExtendedTriangle=!0,e.satAxes=new Array(4).fill().map((function(){return new Oc})),e.satBounds=new Array(4).fill().map((function(){return new LT})),e.points=[e.a,e.b,e.c],e.sphere=new eh,e.plane=new Jp,e.needsUpdate=!0,e}return(0,o.Z)(n,[{key:"intersectsSphere",value:function(e){return BT(e,this)}},{key:"update",value:function(){var e=this.a,t=this.b,n=this.c,r=this.points,i=this.satAxes,a=this.satBounds,s=i[0],o=a[0];this.getNormal(s),o.setFromPoints(s,r);var u=i[1],l=a[1];u.subVectors(e,t),l.setFromPoints(u,r);var c=i[2],h=a[2];c.subVectors(t,n),h.setFromPoints(c,r);var p=i[3],f=a[3];p.subVectors(n,e),f.setFromPoints(p,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(s,e),this.needsUpdate=!1}}]),n}(Vh);HT.prototype.closestPointToSegment=function(){var e=new Oc,t=new Oc,n=new Q_;return function(r){for(var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=r.start,u=r.end,l=this.points,c=1/0,h=0;h<3;h++){var p=(h+1)%3;n.start.copy(l[h]),n.end.copy(l[p]),ZT(n,r,e,t),(i=e.distanceToSquared(t))<c&&(c=i,a&&a.copy(e),s&&s.copy(t))}return this.closestPointToPoint(o,e),(i=o.distanceToSquared(e))<c&&(c=i,a&&a.copy(e),s&&s.copy(o)),this.closestPointToPoint(u,e),(i=u.distanceToSquared(e))<c&&(c=i,a&&a.copy(e),s&&s.copy(u)),Math.sqrt(c)}}(),HT.prototype.intersectsTriangle=function(){var e=new HT,t=new Array(3),n=new Array(3),r=new LT,i=new LT,a=new Oc,s=new Oc,o=new Oc,u=new Oc,l=new Q_,c=new Q_,h=new Q_;return function(p){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.needsUpdate&&this.update(),p.isExtendedTriangle?p.needsUpdate&&p.update():(e.copy(p),e.update(),p=e);var v=this.plane,m=p.plane;if(Math.abs(v.normal.dot(m.normal))>1-1e-10){var y=this.satBounds,g=this.satAxes;n[0]=p.a,n[1]=p.b,n[2]=p.c;for(var _=0;_<4;_++){var T=y[_],E=g[_];if(r.setFromPoints(E,n),T.isSeparated(r))return!1}var x=p.satBounds,b=p.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(var I=0;I<4;I++){var w=x[I],k=b[I];if(r.setFromPoints(k,t),w.isSeparated(r))return!1}for(var S=0;S<4;S++)for(var R=g[S],C=0;C<4;C++){var D=b[C];if(a.crossVectors(R,D),r.setFromPoints(a,t),i.setFromPoints(a,n),r.isSeparated(i))return!1}return f&&(d||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}for(var A=this.points,O=!1,N=0,M=0;M<3;M++){var P=A[M],F=A[(M+1)%3];l.start.copy(P),l.end.copy(F),l.delta(s);var L=O?c.start:c.end,U=GT(m.distanceToPoint(P));if(GT(m.normal.dot(s))&&U){c.copy(l),N=2;break}if((m.intersectLine(l,L)||U)&&!GT(L.distanceTo(F))){if(N++,O)break;O=!0}}if(1===N&&p.containsPoint(c.end))return f&&(f.start.copy(c.end),f.end.copy(c.end)),!0;if(2!==N)return!1;for(var Z=p.points,B=!1,z=0,G=0;G<3;G++){var H=Z[G],j=Z[(G+1)%3];l.start.copy(H),l.end.copy(j),l.delta(o);var V=B?h.start:h.end,W=GT(v.distanceToPoint(H));if(GT(v.normal.dot(o))&&W){h.copy(l),z=2;break}if((v.intersectLine(l,V)||W)&&!GT(V.distanceTo(j))){if(z++,B)break;B=!0}}if(1===z&&this.containsPoint(h.end))return f&&(f.start.copy(h.end),f.end.copy(h.end)),!0;if(2!==z)return!1;if(c.delta(s),h.delta(o),s.dot(o)<0){var Y=h.start;h.start=h.end,h.end=Y}var q=c.start.dot(s),X=c.end.dot(s),K=h.start.dot(s),Q=h.end.dot(s);return(q===Q||K===X||X<K!==q<Q)&&(f&&(u.subVectors(c.start,h.start),u.dot(s)>0?f.start.copy(c.start):f.start.copy(h.start),u.subVectors(c.end,h.end),u.dot(s)<0?f.end.copy(c.end):f.end.copy(h.end)),!0)}}(),HT.prototype.distanceToPoint=function(){var e=new Oc;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),HT.prototype.distanceToTriangle=function(){var e=new Oc,t=new Oc,n=["a","b","c"],r=new Q_,i=new Q_;return function(a){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=s||o?r:null;if(this.intersectsTriangle(a,u))return(s||o)&&(s&&u.getCenter(s),o&&u.getCenter(o)),0;for(var l=1/0,c=0;c<3;c++){var h=void 0,p=n[c],f=a[p];this.closestPointToPoint(f,e),(h=f.distanceToSquared(e))<l&&(l=h,s&&s.copy(e),o&&o.copy(f));var d=this[p];a.closestPointToPoint(d,e),(h=d.distanceToSquared(e))<l&&(l=h,s&&s.copy(d),o&&o.copy(e))}for(var v=0;v<3;v++){var m=n[v],y=n[(v+1)%3];r.set(this[m],this[y]);for(var g=0;g<3;g++){var _=n[g],T=n[(g+1)%3];i.set(a[_],a[T]),ZT(r,i,e,t);var E=e.distanceToSquared(t);E<l&&(l=E,s&&s.copy(e),o&&o.copy(t))}}return Math.sqrt(l)}}();var jT=function(){function e(t,n,r){(0,s.Z)(this,e),this.isOrientedBox=!0,this.min=new Oc,this.max=new Oc,this.matrix=new lh,this.invMatrix=new lh,this.points=new Array(8).fill().map((function(){return new Oc})),this.satAxes=new Array(3).fill().map((function(){return new Oc})),this.satBounds=new Array(3).fill().map((function(){return new LT})),this.alignedSatBounds=new Array(3).fill().map((function(){return new LT})),this.needsUpdate=!1,t&&this.min.copy(t),n&&this.max.copy(n),r&&this.matrix.copy(r)}return(0,o.Z)(e,[{key:"set",value:function(e,t,n){this.min.copy(e),this.max.copy(t),this.matrix.copy(n),this.needsUpdate=!0}},{key:"copy",value:function(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}]),e}();function VT(e,t,n,r){var i=e.a,a=e.b,s=e.c,o=t,u=t+1,l=t+2;n&&(o=n.getX(t),u=n.getX(t+1),l=n.getX(t+2)),i.x=r.getX(o),i.y=r.getY(o),i.z=r.getZ(o),a.x=r.getX(u),a.y=r.getY(u),a.z=r.getZ(u),s.x=r.getX(l),s.y=r.getY(l),s.z=r.getZ(l)}function WT(e,t,n,r,i,a,s){for(var o=n.index,u=n.attributes.position,l=e,c=t+e;l<c;l++)if(VT(s,3*l,o,u),s.needsUpdate=!0,r(s,l,i,a))return!0;return!1}jT.prototype.update=function(){for(var e=this.matrix,t=this.min,n=this.max,r=this.points,i=0;i<=1;i++)for(var a=0;a<=1;a++)for(var s=0;s<=1;s++){var o=r[1*i|2*a|4*s];o.x=i?n.x:t.x,o.y=a?n.y:t.y,o.z=s?n.z:t.z,o.applyMatrix4(e)}for(var u=this.satBounds,l=this.satAxes,c=r[0],h=0;h<3;h++){var p=l[h],f=u[h],d=r[1<<h];p.subVectors(c,d),f.setFromPoints(p,r)}var v=this.alignedSatBounds;v[0].setFromPointsField(r,"x"),v[1].setFromPointsField(r,"y"),v[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1},jT.prototype.intersectsBox=function(){var e=new LT;return function(t){this.needsUpdate&&this.update();var n=t.min,r=t.max,i=this.satBounds,a=this.satAxes,s=this.alignedSatBounds;if(e.min=n.x,e.max=r.x,s[0].isSeparated(e))return!1;if(e.min=n.y,e.max=r.y,s[1].isSeparated(e))return!1;if(e.min=n.z,e.max=r.z,s[2].isSeparated(e))return!1;for(var o=0;o<3;o++){var u=a[o],l=i[o];if(e.setFromBox(u,t),l.isSeparated(e))return!1}return!0}}(),jT.prototype.intersectsTriangle=function(){var e=new HT,t=new Array(3),n=new LT,r=new LT,i=new Oc;return function(a){this.needsUpdate&&this.update(),a.isExtendedTriangle?a.needsUpdate&&a.update():(e.copy(a),e.update(),a=e);var s=this.satBounds,o=this.satAxes;t[0]=a.a,t[1]=a.b,t[2]=a.c;for(var u=0;u<3;u++){var l=s[u],c=o[u];if(n.setFromPoints(c,t),l.isSeparated(n))return!1}for(var h=a.satBounds,p=a.satAxes,f=this.points,d=0;d<3;d++){var v=h[d],m=p[d];if(n.setFromPoints(m,f),v.isSeparated(n))return!1}for(var y=0;y<3;y++)for(var g=o[y],_=0;_<4;_++){var T=p[_];if(i.crossVectors(g,T),n.setFromPoints(i,t),r.setFromPoints(i,f),n.isSeparated(r))return!1}return!0}}(),jT.prototype.closestPointToPoint=function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t},jT.prototype.distanceToPoint=function(){var e=new Oc;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),jT.prototype.distanceToBox=function(){var e=["x","y","z"],t=new Array(12).fill().map((function(){return new Q_})),n=new Array(12).fill().map((function(){return new Q_})),r=new Oc,i=new Oc;return function(a){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.needsUpdate&&this.update(),this.intersectsBox(a))return(o||u)&&(a.getCenter(i),this.closestPointToPoint(i,r),a.closestPointToPoint(r,i),o&&o.copy(r),u&&u.copy(i)),0;for(var l=s*s,c=a.min,h=a.max,p=this.points,f=1/0,d=0;d<8;d++){var v=p[d];i.copy(v).clamp(c,h);var m=v.distanceToSquared(i);if(m<f&&(f=m,o&&o.copy(v),u&&u.copy(i),m<l))return Math.sqrt(m)}for(var y=0,g=0;g<3;g++)for(var _=0;_<=1;_++)for(var T=0;T<=1;T++){var E=(g+1)%3,x=(g+2)%3,b=1<<g|_<<E|T<<x,I=p[_<<E|T<<x],w=p[b];t[y].set(I,w);var k=e[g],S=e[E],R=e[x],C=n[y],D=C.start,A=C.end;D[k]=c[k],D[S]=_?c[S]:h[S],D[R]=T?c[R]:h[S],A[k]=h[k],A[S]=_?c[S]:h[S],A[R]=T?c[R]:h[S],y++}for(var O=0;O<=1;O++)for(var N=0;N<=1;N++)for(var M=0;M<=1;M++){i.x=O?h.x:c.x,i.y=N?h.y:c.y,i.z=M?h.z:c.z,this.closestPointToPoint(i,r);var P=i.distanceToSquared(r);if(P<f&&(f=P,o&&o.copy(r),u&&u.copy(i),P<l))return Math.sqrt(P)}for(var F=0;F<12;F++)for(var L=t[F],U=0;U<12;U++){var Z=n[U];ZT(L,Z,r,i);var B=r.distanceToSquared(i);if(B<f&&(f=B,o&&o.copy(r),u&&u.copy(i),B<l))return Math.sqrt(B)}return Math.sqrt(f)}}();var YT=function(){function e(t){(0,s.Z)(this,e),this._getNewPrimitive=t,this._primitives=[]}return(0,o.Z)(e,[{key:"getPrimitive",value:function(){var e=this._primitives;return 0===e.length?this._getNewPrimitive():e.pop()}},{key:"releasePrimitive",value:function(e){this._primitives.push(e)}}]),e}();function qT(e,t){return 65535===t[e+15]}function XT(e,t){return t[e+6]}function KT(e,t){return t[e+14]}function QT(e){return e+8}function JT(e,t){return t[e+6]}var $T=new Pc,eE=new Oc,tE=["x","y","z"];function nE(e,t,n,r,i){var a=2*e,s=uE,o=lE,u=cE;if(qT(a,o)){!function(e,t,n,r,i,a){for(var s=r,o=r+i;s<o;s++)fT(e,t,n,s,a)}(t,n,r,XT(e,u),KT(a,o),i)}else{var l=QT(e);sE(l,s,r,eE)&&nE(l,t,n,r,i);var c=JT(e,u);sE(c,s,r,eE)&&nE(c,t,n,r,i)}}function rE(e,t,n,r){var i=2*e,a=uE,s=lE,o=cE;if(qT(i,s))return function(e,t,n,r,i){for(var a=1/0,s=null,o=r,u=r+i;o<u;o++){var l=fT(e,t,n,o);l&&l.distance<a&&(s=l,a=l.distance)}return s}(t,n,r,XT(e,o),KT(i,s));var u,l,c=function(e,t){return t[e+7]}(e,o),h=tE[c],p=r.direction[h]>=0;p?(u=QT(e),l=JT(e,o)):(u=JT(e,o),l=QT(e));var f=sE(u,a,r,eE)?rE(u,t,n,r):null;if(f){var d=f.point[h];if(p?d<=a[l+c]:d>=a[l+c+3])return f}var v=sE(l,a,r,eE)?rE(l,t,n,r):null;return f&&v?f.distance<=v.distance?f:v:f||v||null}var iE=function(){var e,t,n=[],r=new YT((function(){return new Pc}));return function(){e=r.getPrimitive(),t=r.getPrimitive(),n.push(e,t);var a=i.apply(void 0,arguments);r.releasePrimitive(e),r.releasePrimitive(t),n.pop(),n.pop();var s=n.length;return s>0&&(t=n[s-1],e=n[s-2]),a};function i(n,r,a,s){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;function c(e){for(var t=2*e,n=lE,r=cE;!qT(t,n);)t=2*(e=QT(e));return XT(e,r)}function h(e){for(var t=2*e,n=lE,r=cE;!qT(t,n);)t=2*(e=JT(e,r));return XT(e,r)+KT(t,n)}var p=2*n,f=uE,d=lE,v=cE;if(qT(p,d)){var m=XT(n,v),y=KT(p,d);return wT(n,f,e),s(m,y,!1,l,u+n,e)}var g,_,T,E,x=QT(n),b=JT(n,v),I=x,w=b;if(o&&(E=t,wT(I,f,T=e),wT(w,f,E),g=o(T),(_=o(E))<g)){I=b,w=x;var k=g;g=_,_=k,T=E}T||wT(I,f,T=e);var S,R=a(T,qT(2*I,d),g,l+1,u+I);if(R===gT){var C=c(I);S=s(C,h(I)-C,!0,l+1,u+I,T)}else S=R&&i(I,r,a,s,o,u,l+1);if(S)return!0;wT(w,f,E=t);var D,A=a(E,qT(2*w,d),_,l+1,u+w);if(A===gT){var O=c(w);D=s(O,h(w)-O,!0,l+1,u+w,E)}else D=A&&i(w,r,a,s,o,u,l+1);return!!D}}(),aE=function(){var e=new HT,t=new HT,n=new lh,r=new jT,i=new jT;return function a(s,o,u,l){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,h=2*s,p=uE,f=lE,d=cE;if(null===c&&(u.boundingBox||u.computeBoundingBox(),r.set(u.boundingBox.min,u.boundingBox.max,l),c=r),!qT(h,f)){var v=s+8,m=d[s+6];return wT(v,p,$T),c.intersectsBox($T)&&a(v,o,u,l,c)?!0:(wT(m,p,$T),!(!c.intersectsBox($T)||!a(m,o,u,l,c)))}var y=o,g=y.index,_=y.attributes.position,T=u.index,E=u.attributes.position,x=XT(s,d),b=KT(h,f);if(n.copy(l).invert(),u.boundsTree){wT(s,p,i),i.matrix.copy(n),i.needsUpdate=!0;var I=u.boundsTree.shapecast({intersectsBounds:function(e){return i.intersectsBox(e)},intersectsTriangle:function(e){e.a.applyMatrix4(l),e.b.applyMatrix4(l),e.c.applyMatrix4(l),e.needsUpdate=!0;for(var n=3*x,r=3*(b+x);n<r;n+=3)if(VT(t,n,g,_),t.needsUpdate=!0,e.intersectsTriangle(t))return!0;return!1}});return I}for(var w=3*x,k=b+3*x;w<k;w+=3){VT(e,w,g,_),e.a.applyMatrix4(n),e.b.applyMatrix4(n),e.c.applyMatrix4(n),e.needsUpdate=!0;for(var S=0,R=T.count;S<R;S+=3)if(VT(t,S,T,E),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}}();function sE(e,t,n,r){return wT(e,t,$T),n.intersectBox($T,r)}var oE,uE,lE,cE,hE=[];function pE(e){oE&&hE.push(oE),oE=e,uE=new Float32Array(e),lE=new Uint16Array(e),cE=new Uint32Array(e)}function fE(){oE=null,uE=null,lE=null,cE=null,hE.length&&pE(hE.pop())}var dE=Symbol("skip tree generation"),vE=new Pc,mE=new Pc,yE=new lh,gE=new jT,_E=new jT,TE=new Oc,EE=new Oc,xE=new Oc,bE=new Oc,IE=new Oc,wE=new Pc,kE=new YT((function(){return new HT})),SE=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,s.Z)(this,e),!t.isBufferGeometry)throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t.index&&t.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.");if((n=Object.assign((0,at.Z)({strategy:vT,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null},dE,!1),n)).useSharedArrayBuffer&&"undefined"===typeof SharedArrayBuffer)throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,n[dE]||(this._roots=function(e,t){for(var n,r,i,a=FT(e,t),s=[],o=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,u=0;u<a.length;u++){var l=a[u],c=p(l),h=new o(ET*c);n=new Float32Array(h),r=new Uint32Array(h),i=new Uint16Array(h),f(0,l),s.push(h)}return s;function p(e){return e.count?1:1+p(e.left)+p(e.right)}function f(e,t){for(var a=e/4,s=e/2,o=!!t.count,u=t.boundingData,l=0;l<6;l++)n[a+l]=u[l];if(o){var c=t.offset,h=t.count;return r[a+6]=c,i[s+14]=h,i[s+15]=xT,e+ET}var p,d=t.left,v=t.right,m=t.splitAxis;if((p=f(e+ET,d))/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return r[a+6]=p/4,p=f(p,v),r[a+7]=m,p}}(t,n),!t.boundingBox&&n.setBoundingBox&&(t.boundingBox=this.getBoundingBox(new Pc))),this.geometry=t}return(0,o.Z)(e,[{key:"refit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&Array.isArray(e)&&(e=new Set(e));for(var t,n,r,i,a=this.geometry,s=a.index.array,o=a.attributes.position,u=0,l=this._roots,c=0,h=l.length;c<h;c++)t=l[c],n=new Uint32Array(t),r=new Uint16Array(t),i=new Float32Array(t),p(0,u),u+=t.byteLength;function p(t,a){var u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=2*t;if(r[l+15]===xT){for(var c=n[t+6],h=1/0,f=1/0,d=1/0,v=-1/0,m=-1/0,y=-1/0,g=3*c,_=3*(c+r[l+14]);g<_;g++){var T=s[g],E=o.getX(T),x=o.getY(T),b=o.getZ(T);E<h&&(h=E),E>v&&(v=E),x<f&&(f=x),x>m&&(m=x),b<d&&(d=b),b>y&&(y=b)}return(i[t+0]!==h||i[t+1]!==f||i[t+2]!==d||i[t+3]!==v||i[t+4]!==m||i[t+5]!==y)&&(i[t+0]=h,i[t+1]=f,i[t+2]=d,i[t+3]=v,i[t+4]=m,i[t+5]=y,!0)}var I=t+8,w=n[t+6],k=I+a,S=w+a,R=u,C=!1,D=!1;e?R||(C=e.has(k),D=e.has(S),R=!C&&!D):(C=!0,D=!0);var A=R||D,O=!1;(R||C)&&(O=p(I,a,R));var N=!1;A&&(N=p(w,a,R));var M=O||N;if(M)for(var P=0;P<3;P++){var F=I+P,L=w+P,U=i[F],Z=i[F+3],B=i[L],z=i[L+3];i[t+P]=U<B?U:B,i[t+P+3]=Z>z?Z:z}return M}}},{key:"traverse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._roots[t],r=new Uint32Array(n),i=new Uint16Array(n);!function t(a){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=2*a,u=i[o+15]===xT;if(u){var l=r[a+6],c=i[o+14];e(s,u,new Float32Array(n,4*a,6),l,c)}else{var h=a+ET/4,p=r[a+6],f=r[a+7];e(s,u,new Float32Array(n,4*a,6),f)||(t(h,s+1),t(p,s+1))}}(0)}},{key:"raycast",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mo,n=this._roots,r=this.geometry,i=[],a=t.isMaterial,s=Array.isArray(t),o=r.groups,u=a?t.side:t,l=0,c=n.length;l<c;l++){var h=s?t[o[l].materialIndex].side:u,p=i.length;if(pE(n[l]),nE(0,r,h,e,i),fE(),s)for(var f=o[l].materialIndex,d=p,v=i.length;d<v;d++)i[d].face.materialIndex=f}return i}},{key:"raycastFirst",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mo,n=this._roots,r=this.geometry,i=t.isMaterial,a=Array.isArray(t),s=null,o=r.groups,u=i?t.side:t,l=0,c=n.length;l<c;l++){var h=a?t[o[l].materialIndex].side:u;pE(n[l]);var p=rE(0,r,h,e);fE(),null!=p&&(null==s||p.distance<s.distance)&&(s=p,a&&(p.face.materialIndex=o[l].materialIndex))}return s}},{key:"intersectsGeometry",value:function(e,t){var n,r=this.geometry,i=!1,a=b(this._roots);try{for(a.s();!(n=a.n()).done;){if(pE(n.value),i=aE(0,r,e,t),fE(),i)break}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"shapecast",value:function(e,t,n){var r=this.geometry;if(e instanceof Function){if(t){var i=t;t=function(e,t,n,r){var a=3*t;return i(e,a,a+1,a+2,n,r)}}e={boundsTraverseOrder:n,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}var a=kE.getPrimitive(),s=e,o=s.boundsTraverseOrder,u=s.intersectsBounds,l=s.intersectsRange,c=s.intersectsTriangle;if(l&&c){var h=l;l=function(e,t,n,i,s){return!!h(e,t,n,i,s)||WT(e,t,r,c,n,i,a)}}else l||(l=c?function(e,t,n,i){return WT(e,t,r,c,n,i,a)}:function(e,t,n){return n});var p,f=!1,d=0,v=b(this._roots);try{for(v.s();!(p=v.n()).done;){var m=p.value;if(pE(m),f=iE(0,r,u,l,o,d),fE(),f)break;d+=m.byteLength}}catch(y){v.e(y)}finally{v.f()}return kE.releasePrimitive(a),f}},{key:"bvhcast",value:function(e,t,n){var r=n.intersectsRanges,i=n.intersectsTriangles,a=this.geometry.index,s=this.geometry.attributes.position,o=e.geometry.index,u=e.geometry.attributes.position;yE.copy(t).invert();var l=kE.getPrimitive(),c=kE.getPrimitive();if(i){var h=function(e,n,r,h,p,f,d,v){for(var m=r,y=r+h;m<y;m++){VT(c,3*m,o,u),c.a.applyMatrix4(t),c.b.applyMatrix4(t),c.c.applyMatrix4(t),c.needsUpdate=!0;for(var g=e,_=e+n;g<_;g++)if(VT(l,3*g,a,s),l.needsUpdate=!0,i(l,c,g,m,p,f,d,v))return!0}return!1};if(r){var p=r;r=function(e,t,n,r,i,a,s,o){return!!p(e,t,n,r,i,a,s,o)||h(e,t,n,r,i,a,s,o)}}else r=h}e.getBoundingBox(mE),mE.applyMatrix4(t);var f=this.shapecast({intersectsBounds:function(e){return mE.intersectsBox(e)},intersectsRange:function(t,n,i,a,s,o){return vE.copy(o),vE.applyMatrix4(yE),e.shapecast({intersectsBounds:function(e){return vE.intersectsBox(e)},intersectsRange:function(e,i,o,u,l){return r(t,n,e,i,a,s,u,l)}})}});return kE.releasePrimitive(l),kE.releasePrimitive(c),f}},{key:"intersectsBox",value:function(e,t){return gE.set(e.min,e.max,t),gE.needsUpdate=!0,this.shapecast({intersectsBounds:function(e){return gE.intersectsBox(e)},intersectsTriangle:function(e){return gE.intersectsTriangle(e)}})}},{key:"intersectsSphere",value:function(e){return this.shapecast({intersectsBounds:function(t){return e.intersectsBox(t)},intersectsTriangle:function(t){return t.intersectsSphere(e)}})}},{key:"closestPointToGeometry",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0;e.boundingBox||e.computeBoundingBox(),gE.set(e.boundingBox.min,e.boundingBox.max,t),gE.needsUpdate=!0;var s=this.geometry,o=s.attributes.position,u=s.index,l=e.attributes.position,c=e.index,h=kE.getPrimitive(),p=kE.getPrimitive(),f=EE,d=xE,v=null,m=null;r&&(v=bE,m=IE);var y=1/0,g=null,_=null;return yE.copy(t).invert(),_E.matrix.copy(yE),this.shapecast({boundsTraverseOrder:function(e){return gE.distanceToBox(e)},intersectsBounds:function(e,t,n){return n<y&&n<a&&(t&&(_E.min.copy(e.min),_E.max.copy(e.max),_E.needsUpdate=!0),!0)},intersectsRange:function(n,r){if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:function(e){return _E.distanceToBox(e)},intersectsBounds:function(e,t,n){return n<y&&n<a},intersectsRange:function(e,a){for(var s=3*e,T=3*(e+a);s<T;s+=3){VT(p,s,c,l),p.a.applyMatrix4(t),p.b.applyMatrix4(t),p.c.applyMatrix4(t),p.needsUpdate=!0;for(var E=3*n,x=3*(n+r);E<x;E+=3){VT(h,E,u,o),h.needsUpdate=!0;var b=h.distanceToTriangle(p,f,v);if(b<y&&(d.copy(f),m&&m.copy(v),y=b,g=E/3,_=s/3),b<i)return!0}}}});for(var s=0,T=c?c.count:l.count;s<T;s+=3){VT(p,s,c,l),p.a.applyMatrix4(t),p.b.applyMatrix4(t),p.c.applyMatrix4(t),p.needsUpdate=!0;for(var E=3*n,x=3*(n+r);E<x;E+=3){VT(h,E,u,o),h.needsUpdate=!0;var b=h.distanceToTriangle(p,f,v);if(b<y&&(d.copy(f),m&&m.copy(v),y=b,g=E/3,_=s/3),b<i)return!0}}}}),kE.releasePrimitive(h),kE.releasePrimitive(p),y===1/0?null:(n.point?n.point.copy(d):n.point=d.clone(),n.distance=y,n.faceIndex=g,r&&(r.point?r.point.copy(m):r.point=m.clone(),r.point.applyMatrix4(yE),d.applyMatrix4(yE),r.distance=d.sub(r.point).length(),r.faceIndex=_),n)}},{key:"closestPointToPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=n*n,a=r*r,s=1/0,o=null;if(this.shapecast({boundsTraverseOrder:function(t){return TE.copy(e).clamp(t.min,t.max),TE.distanceToSquared(e)},intersectsBounds:function(e,t,n){return n<s&&n<a},intersectsTriangle:function(t,n){t.closestPointToPoint(e,TE);var r=e.distanceToSquared(TE);return r<s&&(EE.copy(TE),s=r,o=n),r<i}}),s===1/0)return null;var u=Math.sqrt(s);return t.point?t.point.copy(EE):t.point=EE.clone(),t.distance=u,t.faceIndex=o,t}},{key:"getBoundingBox",value:function(e){return e.makeEmpty(),this._roots.forEach((function(t){wT(0,new Float32Array(t),wE),e.union(wE)})),e}}],[{key:"serialize",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),e.serialize(arguments[0],{cloneBuffers:void 0===arguments[2]||arguments[2]});n=ot({cloneBuffers:!0},n);var r,i=t.geometry,a=t._roots,s=i.getIndex();return r=n.cloneBuffers?{roots:a.map((function(e){return e.slice()})),index:s.array.slice()}:{roots:a,index:s.array},r}},{key:"deserialize",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("boolean"===typeof r)return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),e.deserialize(arguments[0],arguments[1],{setIndex:void 0===arguments[2]||arguments[2]});r=ot({setIndex:!0},r);var i=t.index,a=t.roots,s=new e(n,ot(ot({},r),{},(0,at.Z)({},dE,!0)));if(s._roots=a,r.setIndex){var o=n.getIndex();if(null===o){var u=new ip(t.index,1,!1);n.setIndex(u)}else o.array!==i&&(o.array.set(i),o.needsUpdate=!0)}return s}}]),e}(),RE=new uh,CE=new lh,DE=Np.prototype.raycast;function AE(e,t){if(this.geometry.boundsTree){if(void 0===this.material)return;CE.copy(this.matrixWorld).invert(),RE.copy(e.ray).applyMatrix4(CE);var n=this.geometry.boundsTree;if(!0===e.firstHitOnly){var r=dT(n.raycastFirst(RE,this.material),this,e);r&&t.push(r)}else for(var i=n.raycast(RE,this.material),a=0,s=i.length;a<s;a++){var o=dT(i[a],this,e);o&&t.push(o)}}else DE.call(this,e,t)}function OE(e){return this.boundsTree=new SE(this,e),this.boundsTree}function NE(){this.boundsTree=null}var ME=function(){function e(){var t=this;(0,s.Z)(this,e),this.trigger=function(e){t.handlers.slice(0).forEach((function(t){return t(e)}))},this.handlers=[]}return(0,o.Z)(e,[{key:"on",value:function(e){this.handlers.push(e)}},{key:"off",value:function(e){this.handlers=this.handlers.filter((function(t){return t!==e}))}},{key:"reset",value:function(){this.handlers.length=0}}]),e}(),PE={LEFT:1,RIGHT:2,MIDDLE:4},FE=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768});function LE(e){return e.isPerspectiveCamera}function UE(e){return e.isOrthographicCamera}var ZE=2*Math.PI,BE=Math.PI/2,zE=1e-5;function GE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zE;return Math.abs(e)<t}function HE(e,t){return GE(e-t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:zE)}function jE(e,t){return Math.round(e/t)*t}function VE(e){return isFinite(e)?e:e<0?-Number.MAX_VALUE:Number.MAX_VALUE}function WE(e){return Math.abs(e)<Number.MAX_VALUE?e:e*(1/0)}function YE(e,t){t.set(0,0),e.forEach((function(e){t.x+=e.clientX,t.y+=e.clientY})),t.x/=e.length,t.y/=e.length}function qE(e,t){return!!UE(e)&&(console.warn("".concat(t," is not supported in OrthographicCamera")),!0)}function XE(e){return e.invert?e.invert():e.inverse(),e}var KE,QE,JE,$E,ex,tx,nx,rx,ix,ax,sx,ox,ux,lx,cx,hx,px,fx,dx,vx,mx,yx,gx=function(){function e(){(0,s.Z)(this,e),this._listeners={}}return(0,o.Z)(e,[{key:"addEventListener",value:function(e,t){var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},{key:"removeAllEventListeners",value:function(e){e?Array.isArray(this._listeners[e])&&(this._listeners[e].length=0):this._listeners={}}},{key:"dispatchEvent",value:function(e){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}]),e}(),_x=1/8,Tx="undefined"!==typeof window,Ex=Tx&&/Mac/.test(navigator.platform),xx=!(Tx&&"PointerEvent"in window),bx=function(e){l(n,e);var t=v(n);function n(e,r){var i;(0,s.Z)(this,n),(i=t.call(this)).minPolarAngle=0,i.maxPolarAngle=Math.PI,i.minAzimuthAngle=-1/0,i.maxAzimuthAngle=1/0,i.minDistance=0,i.maxDistance=1/0,i.infinityDolly=!1,i.minZoom=.01,i.maxZoom=1/0,i.dampingFactor=.05,i.draggingDampingFactor=.25,i.azimuthRotateSpeed=1,i.polarRotateSpeed=1,i.dollySpeed=1,i.truckSpeed=2,i.dollyToCursor=!1,i.dragToOffset=!1,i.verticalDragToForward=!1,i.boundaryFriction=0,i.restThreshold=.01,i.colliderMeshes=[],i.cancel=function(){},i._enabled=!0,i._state=FE.NONE,i._viewport=null,i._affectOffset=!1,i._dollyControlAmount=0,i._hasRested=!0,i._boundaryEnclosesCamera=!1,i._needsUpdate=!0,i._updatedLastTime=!1,i._elementRect=new DOMRect,i._activePointers=[],i._truckInternal=function(e,t,n){if(LE(i._camera)){var r=tx.copy(i._camera.position).sub(i._target),a=i._camera.getEffectiveFOV()*KE.MathUtils.DEG2RAD,s=r.length()*Math.tan(.5*a),o=i.truckSpeed*e*s/i._elementRect.height,u=i.truckSpeed*t*s/i._elementRect.height;i.verticalDragToForward?(n?i.setFocalOffset(i._focalOffsetEnd.x+o,i._focalOffsetEnd.y,i._focalOffsetEnd.z,!0):i.truck(o,0,!0),i.forward(-u,!0)):n?i.setFocalOffset(i._focalOffsetEnd.x+o,i._focalOffsetEnd.y+u,i._focalOffsetEnd.z,!0):i.truck(o,u,!0)}else if(UE(i._camera)){var l=i._camera,c=e*(l.right-l.left)/l.zoom/i._elementRect.width,h=t*(l.top-l.bottom)/l.zoom/i._elementRect.height;n?i.setFocalOffset(i._focalOffsetEnd.x+c,i._focalOffsetEnd.y+h,i._focalOffsetEnd.z,!0):i.truck(c,h,!0)}},i._rotateInternal=function(e,t){var n=ZE*i.azimuthRotateSpeed*e/i._elementRect.height,r=ZE*i.polarRotateSpeed*t/i._elementRect.height;i.rotate(n,r,!0)},i._dollyInternal=function(e,t,n){var r=Math.pow(.95,-e*i.dollySpeed),a=i._sphericalEnd.radius*r,s=i._sphericalEnd.radius,o=s*(e>=0?-1:1);i.dollyTo(a),i.infinityDolly&&(a<i.minDistance||i.maxDistance===i.minDistance)&&(i._camera.getWorldDirection(tx),i._targetEnd.add(tx.normalize().multiplyScalar(o)),i._target.add(tx.normalize().multiplyScalar(o))),i.dollyToCursor&&(i._dollyControlAmount+=i._sphericalEnd.radius-s,i.infinityDolly&&(a<i.minDistance||i.maxDistance===i.minDistance)&&(i._dollyControlAmount-=o),i._dollyControlCoord.set(t,n))},i._zoomInternal=function(e,t,n){var r=Math.pow(.95,e*i.dollySpeed),a=i._zoomEnd;i.zoomTo(i._zoom*r),i.dollyToCursor&&(i._dollyControlAmount+=i._zoomEnd-a,i._dollyControlCoord.set(t,n))},"undefined"===typeof KE&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),i._camera=e,i._yAxisUpSpace=(new KE.Quaternion).setFromUnitVectors(i._camera.up,JE),i._yAxisUpSpaceInverse=XE(i._yAxisUpSpace.clone()),i._state=FE.NONE,i._target=new KE.Vector3,i._targetEnd=i._target.clone(),i._focalOffset=new KE.Vector3,i._focalOffsetEnd=i._focalOffset.clone(),i._spherical=(new KE.Spherical).setFromVector3(tx.copy(i._camera.position).applyQuaternion(i._yAxisUpSpace)),i._sphericalEnd=i._spherical.clone(),i._zoom=i._camera.zoom,i._zoomEnd=i._zoom,i._nearPlaneCorners=[new KE.Vector3,new KE.Vector3,new KE.Vector3,new KE.Vector3],i._updateNearPlaneCorners(),i._boundary=new KE.Box3(new KE.Vector3(-1/0,-1/0,-1/0),new KE.Vector3(1/0,1/0,1/0)),i._target0=i._target.clone(),i._position0=i._camera.position.clone(),i._zoom0=i._zoom,i._focalOffset0=i._focalOffset.clone(),i._dollyControlAmount=0,i._dollyControlCoord=new KE.Vector2,i.mouseButtons={left:FE.ROTATE,middle:FE.DOLLY,right:FE.TRUCK,wheel:LE(i._camera)?FE.DOLLY:UE(i._camera)?FE.ZOOM:FE.NONE},i.touches={one:FE.TOUCH_ROTATE,two:LE(i._camera)?FE.TOUCH_DOLLY_TRUCK:UE(i._camera)?FE.TOUCH_ZOOM_TRUCK:FE.NONE,three:FE.TOUCH_TRUCK};var a=new KE.Vector2,o=new KE.Vector2,u=new KE.Vector2,l=function(e){if(i._enabled&&i._domElement){var t={pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY,deltaX:0,deltaY:0};i._activePointers.push(t),i._domElement.ownerDocument.removeEventListener("pointermove",p,{passive:!1}),i._domElement.ownerDocument.removeEventListener("pointerup",v),i._domElement.ownerDocument.addEventListener("pointermove",p,{passive:!1}),i._domElement.ownerDocument.addEventListener("pointerup",v),E(e)}},c=function(e){if(i._enabled&&i._domElement){var t={pointerId:0,clientX:e.clientX,clientY:e.clientY,deltaX:0,deltaY:0};i._activePointers.push(t),i._domElement.ownerDocument.removeEventListener("mousemove",f),i._domElement.ownerDocument.removeEventListener("mouseup",m),i._domElement.ownerDocument.addEventListener("mousemove",f),i._domElement.ownerDocument.addEventListener("mouseup",m),E(e)}},h=function(e){i._enabled&&i._domElement&&(e.preventDefault(),Array.prototype.forEach.call(e.changedTouches,(function(e){var t={pointerId:e.identifier,clientX:e.clientX,clientY:e.clientY,deltaX:0,deltaY:0};i._activePointers.push(t)})),i._domElement.ownerDocument.removeEventListener("touchmove",d,{passive:!1}),i._domElement.ownerDocument.removeEventListener("touchend",y),i._domElement.ownerDocument.addEventListener("touchmove",d,{passive:!1}),i._domElement.ownerDocument.addEventListener("touchend",y),E(e))},p=function(e){e.cancelable&&e.preventDefault();var t=e.pointerId,n=i._findPointerById(t);if(n){if(n.clientX=e.clientX,n.clientY=e.clientY,n.deltaX=e.movementX,n.deltaY=e.movementY,"touch"===e.pointerType)switch(i._activePointers.length){case 1:i._state=i.touches.one;break;case 2:i._state=i.touches.two;break;case 3:i._state=i.touches.three}else i._state=0,(e.buttons&PE.LEFT)===PE.LEFT&&(i._state=i._state|i.mouseButtons.left),(e.buttons&PE.MIDDLE)===PE.MIDDLE&&(i._state=i._state|i.mouseButtons.middle),(e.buttons&PE.RIGHT)===PE.RIGHT&&(i._state=i._state|i.mouseButtons.right);x()}},f=function(e){var t=i._findPointerById(0);t&&(t.clientX=e.clientX,t.clientY=e.clientY,t.deltaX=e.movementX,t.deltaY=e.movementY,i._state=0,(e.buttons&PE.LEFT)===PE.LEFT&&(i._state=i._state|i.mouseButtons.left),(e.buttons&PE.MIDDLE)===PE.MIDDLE&&(i._state=i._state|i.mouseButtons.middle),(e.buttons&PE.RIGHT)===PE.RIGHT&&(i._state=i._state|i.mouseButtons.right),x())},d=function(e){e.cancelable&&e.preventDefault(),Array.prototype.forEach.call(e.changedTouches,(function(e){var t=e.identifier,n=i._findPointerById(t);n&&(n.clientX=e.clientX,n.clientY=e.clientY)})),x()},v=function(e){var t=e.pointerId,n=i._findPointerById(t);if(n&&i._activePointers.splice(i._activePointers.indexOf(n),1),"touch"===e.pointerType)switch(i._activePointers.length){case 0:i._state=FE.NONE;break;case 1:i._state=i.touches.one;break;case 2:i._state=i.touches.two;break;case 3:i._state=i.touches.three}else i._state=FE.NONE;b()},m=function(){var e=i._findPointerById(0);e&&i._activePointers.splice(i._activePointers.indexOf(e),1),i._state=FE.NONE,b()},y=function(e){switch(Array.prototype.forEach.call(e.changedTouches,(function(e){var t=e.identifier,n=i._findPointerById(t);n&&i._activePointers.splice(i._activePointers.indexOf(n),1)})),i._activePointers.length){case 0:i._state=FE.NONE;break;case 1:i._state=i.touches.one;break;case 2:i._state=i.touches.two;break;case 3:i._state=i.touches.three}b()},g=-1,_=function(e){if(i._enabled&&i.mouseButtons.wheel!==FE.NONE){if(e.preventDefault(),i.dollyToCursor||i.mouseButtons.wheel===FE.ROTATE||i.mouseButtons.wheel===FE.TRUCK){var t=performance.now();g-t<1e3&&i._getClientRect(i._elementRect),g=t}var n=Ex?-1:-3,r=1===e.deltaMode?e.deltaY/n:e.deltaY/(10*n),a=i.dollyToCursor?(e.clientX-i._elementRect.x)/i._elementRect.width*2-1:0,s=i.dollyToCursor?(e.clientY-i._elementRect.y)/i._elementRect.height*-2+1:0;switch(i.mouseButtons.wheel){case FE.ROTATE:i._rotateInternal(e.deltaX,e.deltaY);break;case FE.TRUCK:i._truckInternal(e.deltaX,e.deltaY,!1);break;case FE.OFFSET:i._truckInternal(e.deltaX,e.deltaY,!0);break;case FE.DOLLY:i._dollyInternal(-r,a,s);break;case FE.ZOOM:i._zoomInternal(-r,a,s)}i.dispatchEvent({type:"control"})}},T=function(e){i._enabled&&e.preventDefault()},E=function(e){if(i._enabled){if(YE(i._activePointers,ex),i._getClientRect(i._elementRect),a.copy(ex),o.copy(ex),i._activePointers.length>=2){var t=ex.x-i._activePointers[1].clientX,n=ex.y-i._activePointers[1].clientY,r=Math.sqrt(t*t+n*n);u.set(0,r);var s=.5*(i._activePointers[0].clientX+i._activePointers[1].clientX),l=.5*(i._activePointers[0].clientY+i._activePointers[1].clientY);o.set(s,l)}if("touches"in e||"pointerType"in e&&"touch"===e.pointerType)switch(i._activePointers.length){case 1:i._state=i.touches.one;break;case 2:i._state=i.touches.two;break;case 3:i._state=i.touches.three}else i._state=0,(e.buttons&PE.LEFT)===PE.LEFT&&(i._state=i._state|i.mouseButtons.left),(e.buttons&PE.MIDDLE)===PE.MIDDLE&&(i._state=i._state|i.mouseButtons.middle),(e.buttons&PE.RIGHT)===PE.RIGHT&&(i._state=i._state|i.mouseButtons.right);i.dispatchEvent({type:"controlstart"})}},x=function(){if(i._enabled){YE(i._activePointers,ex);var e=i._domElement&&document.pointerLockElement===i._domElement,t=e?-i._activePointers[0].deltaX:o.x-ex.x,n=e?-i._activePointers[0].deltaY:o.y-ex.y;if(o.copy(ex),(i._state&FE.ROTATE)!==FE.ROTATE&&(i._state&FE.TOUCH_ROTATE)!==FE.TOUCH_ROTATE&&(i._state&FE.TOUCH_DOLLY_ROTATE)!==FE.TOUCH_DOLLY_ROTATE&&(i._state&FE.TOUCH_ZOOM_ROTATE)!==FE.TOUCH_ZOOM_ROTATE||i._rotateInternal(t,n),(i._state&FE.DOLLY)===FE.DOLLY||(i._state&FE.ZOOM)===FE.ZOOM){var r=i.dollyToCursor?(a.x-i._elementRect.x)/i._elementRect.width*2-1:0,s=i.dollyToCursor?(a.y-i._elementRect.y)/i._elementRect.height*-2+1:0;(i._state&FE.DOLLY)===FE.DOLLY?i._dollyInternal(n*_x,r,s):i._zoomInternal(n*_x,r,s)}if((i._state&FE.TOUCH_DOLLY)===FE.TOUCH_DOLLY||(i._state&FE.TOUCH_ZOOM)===FE.TOUCH_ZOOM||(i._state&FE.TOUCH_DOLLY_TRUCK)===FE.TOUCH_DOLLY_TRUCK||(i._state&FE.TOUCH_ZOOM_TRUCK)===FE.TOUCH_ZOOM_TRUCK||(i._state&FE.TOUCH_DOLLY_OFFSET)===FE.TOUCH_DOLLY_OFFSET||(i._state&FE.TOUCH_ZOOM_OFFSET)===FE.TOUCH_ZOOM_OFFSET||(i._state&FE.TOUCH_DOLLY_ROTATE)===FE.TOUCH_DOLLY_ROTATE||(i._state&FE.TOUCH_ZOOM_ROTATE)===FE.TOUCH_ZOOM_ROTATE){var l=ex.x-i._activePointers[1].clientX,c=ex.y-i._activePointers[1].clientY,h=Math.sqrt(l*l+c*c),p=u.y-h;u.set(0,h);var f=i.dollyToCursor?(o.x-i._elementRect.x)/i._elementRect.width*2-1:0,d=i.dollyToCursor?(o.y-i._elementRect.y)/i._elementRect.height*-2+1:0;(i._state&FE.TOUCH_DOLLY)===FE.TOUCH_DOLLY||(i._state&FE.TOUCH_DOLLY_ROTATE)===FE.TOUCH_DOLLY_ROTATE||(i._state&FE.TOUCH_DOLLY_TRUCK)===FE.TOUCH_DOLLY_TRUCK||(i._state&FE.TOUCH_DOLLY_OFFSET)===FE.TOUCH_DOLLY_OFFSET?i._dollyInternal(p*_x,f,d):i._zoomInternal(p*_x,f,d)}(i._state&FE.TRUCK)!==FE.TRUCK&&(i._state&FE.TOUCH_TRUCK)!==FE.TOUCH_TRUCK&&(i._state&FE.TOUCH_DOLLY_TRUCK)!==FE.TOUCH_DOLLY_TRUCK&&(i._state&FE.TOUCH_ZOOM_TRUCK)!==FE.TOUCH_ZOOM_TRUCK||i._truckInternal(t,n,!1),(i._state&FE.OFFSET)!==FE.OFFSET&&(i._state&FE.TOUCH_OFFSET)!==FE.TOUCH_OFFSET&&(i._state&FE.TOUCH_DOLLY_OFFSET)!==FE.TOUCH_DOLLY_OFFSET&&(i._state&FE.TOUCH_ZOOM_OFFSET)!==FE.TOUCH_ZOOM_OFFSET||i._truckInternal(t,n,!0),i.dispatchEvent({type:"control"})}},b=function(){YE(i._activePointers,ex),o.copy(ex),0===i._activePointers.length&&i._domElement&&(i._domElement.ownerDocument.removeEventListener("pointermove",p,{passive:!1}),i._domElement.ownerDocument.removeEventListener("pointerup",v),i._domElement.ownerDocument.removeEventListener("touchmove",d,{passive:!1}),i._domElement.ownerDocument.removeEventListener("touchend",y),i.dispatchEvent({type:"controlend"}))};return i._addAllEventListeners=function(e){i._domElement=e,i._domElement.style.touchAction="none",i._domElement.style.userSelect="none",i._domElement.style.webkitUserSelect="none",i._domElement.addEventListener("pointerdown",l),xx&&i._domElement.addEventListener("mousedown",c),xx&&i._domElement.addEventListener("touchstart",h),i._domElement.addEventListener("pointercancel",v),i._domElement.addEventListener("wheel",_,{passive:!1}),i._domElement.addEventListener("contextmenu",T)},i._removeAllEventListeners=function(){i._domElement&&(i._domElement.removeEventListener("pointerdown",l),i._domElement.removeEventListener("mousedown",c),i._domElement.removeEventListener("touchstart",h),i._domElement.removeEventListener("pointercancel",v),i._domElement.removeEventListener("wheel",_,{passive:!1}),i._domElement.removeEventListener("contextmenu",T),i._domElement.ownerDocument.removeEventListener("pointermove",p,{passive:!1}),i._domElement.ownerDocument.removeEventListener("mousemove",f),i._domElement.ownerDocument.removeEventListener("touchmove",d,{passive:!1}),i._domElement.ownerDocument.removeEventListener("pointerup",v),i._domElement.ownerDocument.removeEventListener("mouseup",m),i._domElement.ownerDocument.removeEventListener("touchend",y))},i.cancel=function(){i._state!==FE.NONE&&(i._state=FE.NONE,i._activePointers.length=0,b())},r&&i.connect(r),i.update(0),i}return(0,o.Z)(n,[{key:"camera",get:function(){return this._camera},set:function(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._domElement&&(this._enabled=e,e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}},{key:"active",get:function(){return!this._hasRested}},{key:"currentAction",get:function(){return this._state}},{key:"distance",get:function(){return this._spherical.radius},set:function(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}},{key:"azimuthAngle",get:function(){return this._spherical.theta},set:function(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}},{key:"polarAngle",get:function(){return this._spherical.phi},set:function(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}},{key:"boundaryEnclosesCamera",get:function(){return this._boundaryEnclosesCamera},set:function(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}},{key:"addEventListener",value:function(e,t){lt(c(n.prototype),"addEventListener",this).call(this,e,t)}},{key:"removeEventListener",value:function(e,t){lt(c(n.prototype),"removeEventListener",this).call(this,e,t)}},{key:"rotate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}},{key:"rotateAzimuthTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.rotateTo(e,this._sphericalEnd.phi,t)}},{key:"rotatePolarTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.rotateTo(this._sphericalEnd.theta,e,t)}},{key:"rotateTo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=KE.MathUtils.clamp(e,this.minAzimuthAngle,this.maxAzimuthAngle),i=KE.MathUtils.clamp(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=i,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);var a=!n||HE(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&HE(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(a)}},{key:"dolly",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.dollyTo(this._sphericalEnd.radius-e,t)}},{key:"dollyTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._sphericalEnd.radius,r=KE.MathUtils.clamp(e,this.minDistance,this.maxDistance);if(this.colliderMeshes.length>=1){var i=this._collisionTest(),a=HE(i,this._spherical.radius);if(!(n>r)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(r,i)}else this._sphericalEnd.radius=r;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);var s=!t||HE(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}},{key:"zoom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.zoomTo(this._zoomEnd+e,t)}},{key:"zoomTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._zoomEnd=KE.MathUtils.clamp(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);var n=!t||HE(this._zoom,this._zoomEnd,this.restThreshold);return this._createOnRestPromise(n)}},{key:"pan",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,n)}},{key:"truck",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._camera.updateMatrix(),ix.setFromMatrixColumn(this._camera.matrix,0),ax.setFromMatrixColumn(this._camera.matrix,1),ix.multiplyScalar(e),ax.multiplyScalar(-t);var r=tx.copy(ix).add(ax),i=nx.copy(this._targetEnd).add(r);return this.moveTo(i.x,i.y,i.z,n)}},{key:"forward",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];tx.setFromMatrixColumn(this._camera.matrix,0),tx.crossVectors(this._camera.up,tx),tx.multiplyScalar(e);var n=nx.copy(this._targetEnd).add(tx);return this.moveTo(n.x,n.y,n.z,t)}},{key:"moveTo",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=tx.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,i,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);var a=!r||HE(this._target.x,this._targetEnd.x,this.restThreshold)&&HE(this._target.y,this._targetEnd.y,this.restThreshold)&&HE(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(a)}},{key:"fitToBox",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.cover,i=void 0!==r&&r,a=n.paddingLeft,s=void 0===a?0:a,o=n.paddingRight,u=void 0===o?0:o,l=n.paddingBottom,c=void 0===l?0:l,h=n.paddingTop,p=void 0===h?0:h,f=[],d=e.isBox3?hx.copy(e):hx.setFromObject(e);d.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());var v=jE(this._sphericalEnd.theta,BE),m=jE(this._sphericalEnd.phi,BE);f.push(this.rotateTo(v,m,t));var y=tx.setFromSpherical(this._sphericalEnd).normalize(),g=dx.setFromUnitVectors(y,$E),_=HE(Math.abs(y.y),1);_&&g.multiply(vx.setFromAxisAngle(JE,v)),g.multiply(this._yAxisUpSpaceInverse);var T=px.makeEmpty();nx.copy(d.min).applyQuaternion(g),T.expandByPoint(nx),nx.copy(d.min).setX(d.max.x).applyQuaternion(g),T.expandByPoint(nx),nx.copy(d.min).setY(d.max.y).applyQuaternion(g),T.expandByPoint(nx),nx.copy(d.max).setZ(d.min.z).applyQuaternion(g),T.expandByPoint(nx),nx.copy(d.min).setZ(d.max.z).applyQuaternion(g),T.expandByPoint(nx),nx.copy(d.max).setY(d.min.y).applyQuaternion(g),T.expandByPoint(nx),nx.copy(d.max).setX(d.min.x).applyQuaternion(g),T.expandByPoint(nx),nx.copy(d.max).applyQuaternion(g),T.expandByPoint(nx),T.min.x-=s,T.min.y-=c,T.max.x+=u,T.max.y+=p,g.setFromUnitVectors($E,y),_&&g.premultiply(vx.invert()),g.premultiply(this._yAxisUpSpace);var E=T.getSize(tx),x=T.getCenter(nx).applyQuaternion(g);if(LE(this._camera)){var b=this.getDistanceToFitBox(E.x,E.y,E.z,i);f.push(this.moveTo(x.x,x.y,x.z,t)),f.push(this.dollyTo(b,t)),f.push(this.setFocalOffset(0,0,0,t))}else if(UE(this._camera)){var I=this._camera,w=I.right-I.left,k=I.top-I.bottom,S=i?Math.max(w/E.x,k/E.y):Math.min(w/E.x,k/E.y);f.push(this.moveTo(x.x,x.y,x.z,t)),f.push(this.zoomTo(S,t)),f.push(this.setFocalOffset(0,0,0,t))}return Promise.all(f)}},{key:"fitToSphere",value:function(e,t){var n=[],r=e instanceof KE.Sphere?fx.copy(e):function(e,t){var n=t,r=n.center;hx.makeEmpty(),e.traverseVisible((function(e){e.isMesh&&hx.expandByObject(e)})),hx.getCenter(r);var i=0;return e.traverseVisible((function(e){if(e.isMesh){var t=e,n=t.geometry.clone();if(n.applyMatrix4(t.matrixWorld),n.isBufferGeometry)for(var a=n.attributes.position,s=0,o=a.count;s<o;s++)tx.fromBufferAttribute(a,s),i=Math.max(i,r.distanceToSquared(tx));else for(var u=n.attributes.position,l=new KE.Vector3,c=0,h=u.count;c<h;c++)l.fromBufferAttribute(u,c),i=Math.max(i,r.distanceToSquared(l))}})),n.radius=Math.sqrt(i),n}(e,fx);if(n.push(this.moveTo(r.center.x,r.center.y,r.center.z,t)),LE(this._camera)){var i=this.getDistanceToFitSphere(r.radius);n.push(this.dollyTo(i,t))}else if(UE(this._camera)){var a=this._camera.right-this._camera.left,s=this._camera.top-this._camera.bottom,o=2*r.radius,u=Math.min(a/o,s/o);n.push(this.zoomTo(u,t))}return n.push(this.setFocalOffset(0,0,0,t)),Promise.all(n)}},{key:"setLookAt",value:function(e,t,n,r,i,a){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=nx.set(r,i,a),u=tx.set(e,t,n);this._targetEnd.copy(o),this._sphericalEnd.setFromVector3(u.sub(o).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,s||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));var l=!s||HE(this._target.x,this._targetEnd.x,this.restThreshold)&&HE(this._target.y,this._targetEnd.y,this.restThreshold)&&HE(this._target.z,this._targetEnd.z,this.restThreshold)&&HE(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&HE(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&HE(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(l)}},{key:"lerpLookAt",value:function(e,t,n,r,i,a,s,o,u,l,c,h,p){var f=arguments.length>13&&void 0!==arguments[13]&&arguments[13],d=tx.set(r,i,a),v=nx.set(e,t,n);lx.setFromVector3(v.sub(d).applyQuaternion(this._yAxisUpSpace));var m=rx.set(l,c,h),y=nx.set(s,o,u);cx.setFromVector3(y.sub(m).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(d.lerp(m,p));var g=cx.theta-lx.theta,_=cx.phi-lx.phi,T=cx.radius-lx.radius;this._sphericalEnd.set(lx.radius+T*p,lx.phi+_*p,lx.theta+g*p),this.normalizeRotations(),this._needsUpdate=!0,f||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));var E=!f||HE(this._target.x,this._targetEnd.x,this.restThreshold)&&HE(this._target.y,this._targetEnd.y,this.restThreshold)&&HE(this._target.z,this._targetEnd.z,this.restThreshold)&&HE(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&HE(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&HE(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(E)}},{key:"setPosition",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}},{key:"setTarget",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.getPosition(tx),a=this.setLookAt(i.x,i.y,i.z,e,t,n,r);return this._sphericalEnd.phi=KE.MathUtils.clamp(this.polarAngle,this.minPolarAngle,this.maxPolarAngle),a}},{key:"setFocalOffset",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd),this._affectOffset=!GE(e)||!GE(t)||!GE(n);var i=!r||HE(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&HE(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&HE(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}},{key:"setOrbitPoint",value:function(e,t,n){this._camera.updateMatrixWorld(),ix.setFromMatrixColumn(this._camera.matrixWorldInverse,0),ax.setFromMatrixColumn(this._camera.matrixWorldInverse,1),sx.setFromMatrixColumn(this._camera.matrixWorldInverse,2);var r=tx.set(e,t,n),i=r.distanceTo(this._camera.position),a=r.sub(this._camera.position);ix.multiplyScalar(a.x),ax.multiplyScalar(a.y),sx.multiplyScalar(a.z),tx.copy(ix).add(ax).add(sx),tx.z=tx.z+i,this.dollyTo(i,!1),this.setFocalOffset(-tx.x,tx.y,-tx.z,!1),this.moveTo(e,t,n,!1)}},{key:"setBoundary",value:function(e){if(!e)return this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),void(this._needsUpdate=!0);this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}},{key:"setViewport",value:function(e,t,n,r){null!==e?(this._viewport=this._viewport||new KE.Vector4,"number"===typeof e?this._viewport.set(e,t,n,r):this._viewport.copy(e)):this._viewport=null}},{key:"getDistanceToFitBox",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(qE(this._camera,"getDistanceToFitBox"))return this._spherical.radius;var i=e/t,a=this._camera.getEffectiveFOV()*KE.MathUtils.DEG2RAD,s=this._camera.aspect;return.5*((r?i>s:i<s)?t:e/s)/Math.tan(.5*a)+.5*n}},{key:"getDistanceToFitSphere",value:function(e){if(qE(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;var t=this._camera.getEffectiveFOV()*KE.MathUtils.DEG2RAD,n=2*Math.atan(Math.tan(.5*t)*this._camera.aspect),r=1<this._camera.aspect?t:n;return e/Math.sin(.5*r)}},{key:"getTarget",value:function(e){return(e&&e.isVector3?e:new KE.Vector3).copy(this._targetEnd)}},{key:"getPosition",value:function(e){return(e&&e.isVector3?e:new KE.Vector3).setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)}},{key:"getFocalOffset",value:function(e){return(e&&e.isVector3?e:new KE.Vector3).copy(this._focalOffsetEnd)}},{key:"normalizeRotations",value:function(){this._sphericalEnd.theta=this._sphericalEnd.theta%ZE,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=ZE),this._spherical.theta+=ZE*Math.round((this._sphericalEnd.theta-this._spherical.theta)/ZE)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}},{key:"saveState",value:function(){this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}},{key:"updateCameraUp",value:function(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,JE),XE(this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace))}},{key:"update",value:function(e){var t=this._state===FE.NONE?this.dampingFactor:this.draggingDampingFactor,n=Math.min(t*e*60,1),r=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,a=this._sphericalEnd.radius-this._spherical.radius,s=ox.subVectors(this._targetEnd,this._target),o=ux.subVectors(this._focalOffsetEnd,this._focalOffset);if(GE(r)&&GE(i)&&GE(a)&&GE(s.x)&&GE(s.y)&&GE(s.z)&&GE(o.x)&&GE(o.y)&&GE(o.z)?(this._spherical.copy(this._sphericalEnd),this._target.copy(this._targetEnd),this._focalOffset.copy(this._focalOffsetEnd)):(this._spherical.set(this._spherical.radius+a*n,this._spherical.phi+i*n,this._spherical.theta+r*n),this._target.add(s.multiplyScalar(n)),this._focalOffset.add(o.multiplyScalar(n)),this._needsUpdate=!0),0!==this._dollyControlAmount){if(LE(this._camera)){var u=this._camera,l=tx.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),c=nx.copy(l).cross(u.up).normalize();0===c.lengthSq()&&(c.x=1);var h=rx.crossVectors(c,l),p=this._sphericalEnd.radius*Math.tan(u.getEffectiveFOV()*KE.MathUtils.DEG2RAD*.5),f=(this._sphericalEnd.radius-this._dollyControlAmount-this._sphericalEnd.radius)/this._sphericalEnd.radius,d=tx.copy(this._targetEnd).add(c.multiplyScalar(this._dollyControlCoord.x*p*u.aspect)).add(h.multiplyScalar(this._dollyControlCoord.y*p));this._targetEnd.lerp(d,f)}else if(UE(this._camera)){var v=this._camera,m=tx.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(v.near+v.far)/(v.near-v.far)).unproject(v),y=nx.set(0,0,-1).applyQuaternion(v.quaternion),g=rx.copy(m).add(y.multiplyScalar(-m.dot(v.up))),_=-(this._zoom-this._dollyControlAmount-this._zoomEnd)/this._zoom,T=tx.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),E=this._targetEnd.dot(T);this._targetEnd.lerp(g,_);var x=this._targetEnd.dot(T),b=T.multiplyScalar(x-E);this._targetEnd.sub(b)}this._target.copy(this._targetEnd),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._dollyControlAmount=0}var I=this._zoomEnd-this._zoom;this._zoom+=I*n,this._camera.zoom!==this._zoom&&(GE(I)&&(this._zoom=this._zoomEnd),this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);var w=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,w),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),this._affectOffset&&(this._camera.updateMatrixWorld(),ix.setFromMatrixColumn(this._camera.matrix,0),ax.setFromMatrixColumn(this._camera.matrix,1),sx.setFromMatrixColumn(this._camera.matrix,2),ix.multiplyScalar(this._focalOffset.x),ax.multiplyScalar(-this._focalOffset.y),sx.multiplyScalar(this._focalOffset.z),tx.copy(ix).add(ax).add(sx),this._camera.position.add(tx)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),tx.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);var k=this._needsUpdate;return k&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):k?(this.dispatchEvent({type:"update"}),GE(r,this.restThreshold)&&GE(i,this.restThreshold)&&GE(a,this.restThreshold)&&GE(s.x,this.restThreshold)&&GE(s.y,this.restThreshold)&&GE(s.z,this.restThreshold)&&GE(o.x,this.restThreshold)&&GE(o.y,this.restThreshold)&&GE(o.z,this.restThreshold)&&GE(I,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!k&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._updatedLastTime=k,this._needsUpdate=!1,k}},{key:"toJSON",value:function(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:VE(this.maxDistance),minZoom:this.minZoom,maxZoom:VE(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:VE(this.maxPolarAngle),minAzimuthAngle:VE(this.minAzimuthAngle),maxAzimuthAngle:VE(this.maxAzimuthAngle),dampingFactor:this.dampingFactor,draggingDampingFactor:this.draggingDampingFactor,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:tx.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}},{key:"fromJSON",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=JSON.parse(e),r=tx.fromArray(n.position);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=WE(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=WE(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=WE(n.maxPolarAngle),this.minAzimuthAngle=WE(n.minAzimuthAngle),this.maxAzimuthAngle=WE(n.maxAzimuthAngle),this.dampingFactor=n.dampingFactor,this.draggingDampingFactor=n.draggingDampingFactor,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),lx.setFromVector3(r.sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(lx.theta,lx.phi,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}},{key:"connect",value:function(e){this._domElement?console.warn("camera-controls is already connected."):(e.setAttribute("data-camera-controls-version","1.38.1"),this._addAllEventListeners(e))}},{key:"disconnect",value:function(){this._removeAllEventListeners(),this._domElement=void 0}},{key:"dispose",value:function(){this.disconnect(),this._domElement&&"setAttribute"in this._domElement&&this._domElement.removeAttribute("data-camera-controls-version")}},{key:"_findPointerById",value:function(e){var t=null;return this._activePointers.some((function(n){return n.pointerId===e&&(t=n,!0)})),t}},{key:"_encloseToBoundary",value:function(e,t,n){var r=t.lengthSq();if(0===r)return e;var i=nx.copy(t).add(e),a=this._boundary.clampPoint(i,rx).sub(i),s=a.lengthSq();if(0===s)return e.add(t);if(s===r)return e;if(0===n)return e.add(t).add(a);var o=1+n*s/t.dot(a);return e.add(nx.copy(t).multiplyScalar(o)).add(a.multiplyScalar(1-n))}},{key:"_updateNearPlaneCorners",value:function(){if(LE(this._camera)){var e=this._camera,t=e.near,n=e.getEffectiveFOV()*KE.MathUtils.DEG2RAD,r=Math.tan(.5*n)*t,i=r*e.aspect;this._nearPlaneCorners[0].set(-i,-r,0),this._nearPlaneCorners[1].set(i,-r,0),this._nearPlaneCorners[2].set(i,r,0),this._nearPlaneCorners[3].set(-i,r,0)}else if(UE(this._camera)){var a=this._camera,s=1/a.zoom,o=a.left*s,u=a.right*s,l=a.top*s,c=a.bottom*s;this._nearPlaneCorners[0].set(o,l,0),this._nearPlaneCorners[1].set(u,l,0),this._nearPlaneCorners[2].set(u,c,0),this._nearPlaneCorners[3].set(o,c,0)}}},{key:"_collisionTest",value:function(){var e=1/0;if(!(this.colliderMeshes.length>=1))return e;if(qE(this._camera,"_collisionTest"))return e;var t=tx.setFromSpherical(this._spherical).divideScalar(this._spherical.radius);mx.lookAt(QE,t,this._camera.up);for(var n=0;n<4;n++){var r=nx.copy(this._nearPlaneCorners[n]);r.applyMatrix4(mx);var i=rx.addVectors(this._target,r);yx.set(i,t),yx.far=this._spherical.radius+1;var a=yx.intersectObjects(this.colliderMeshes);0!==a.length&&a[0].distance<e&&(e=a[0].distance)}return e}},{key:"_getClientRect",value:function(e){if(this._domElement){var t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}}},{key:"_createOnRestPromise",value:function(e){var t=this;return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise((function(e){t.addEventListener("rest",(function n(){t.removeEventListener("rest",n),e()}))})))}},{key:"_addAllEventListeners",value:function(e){}},{key:"_removeAllEventListeners",value:function(){}}],[{key:"install",value:function(e){KE=e.THREE,QE=Object.freeze(new KE.Vector3(0,0,0)),JE=Object.freeze(new KE.Vector3(0,1,0)),$E=Object.freeze(new KE.Vector3(0,0,1)),ex=new KE.Vector2,tx=new KE.Vector3,nx=new KE.Vector3,rx=new KE.Vector3,ix=new KE.Vector3,ax=new KE.Vector3,sx=new KE.Vector3,ox=new KE.Vector3,ux=new KE.Vector3,lx=new KE.Spherical,cx=new KE.Spherical,hx=new KE.Box3,px=new KE.Box3,fx=new KE.Sphere,dx=new KE.Quaternion,vx=new KE.Quaternion,mx=new KE.Matrix4,yx=new KE.Raycaster}},{key:"ACTION",get:function(){return FE}}]),n}(gx);var Ix=(0,o.Z)((function e(){var t=this;(0,s.Z)(this,e),this.isDisposeable=function(){return"dispose"in t},this.isResizeable=function(){return"resize"in t&&"getSize"in t},this.isUpdateable=function(){return"afterUpdate"in t&&"beforeUpdate"in t&&"update"in t},this.isHideable=function(){return"visible"in t}})),wx=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).components=e,r.name="SimpleCamera",r.beforeUpdate=new ME,r.afterUpdate=new ME,r._perspectiveCamera=r.setupCamera(),r.activeCamera=r._perspectiveCamera,r.controls=r.setupCameraControls(),e.scene.get().add(r._perspectiveCamera),r.setupEvents(),r}return(0,o.Z)(n,[{key:"enabled",get:function(){return this.controls.enabled},set:function(e){this.controls.enabled=e}},{key:"get",value:function(){return this.activeCamera}},{key:"dispose",value:function(){this.enabled=!1,this.beforeUpdate.reset(),this.afterUpdate.reset(),this._perspectiveCamera.removeFromParent(),this.controls.dispose()}},{key:"update",value:function(e){this.enabled&&(this.beforeUpdate.trigger(this),this.controls.update(e),this.afterUpdate.trigger(this))}},{key:"updateAspect",value:function(){if(this.components.renderer.isResizeable()){var e=this.components.renderer.getSize();this._perspectiveCamera.aspect=e.width/e.height,this._perspectiveCamera.updateProjectionMatrix()}}},{key:"setupCamera",value:function(){var e=window.innerWidth/window.innerHeight,t=new Hp(60,e,1,1e3);return t.position.set(50,50,50),t.lookAt(new Oc(0,0,0)),t}},{key:"setupCameraControls",value:function(){bx.install({THREE:n.getSubsetOfThree()});var e=this.components.renderer.get().domElement,t=new bx(this._perspectiveCamera,e);return t.dampingFactor=.2,t.dollyToCursor=!0,t.infinityDolly=!0,t.setTarget(0,0,0),t}},{key:"setupEvents",value:function(){var e=this;window.addEventListener("resize",(function(){e.updateAspect()}))}}],[{key:"getSubsetOfThree",value:function(){return{MOUSE:uo,Vector2:yc,Vector3:Oc,Vector4:Sc,Quaternion:Ac,Matrix4:lh,Spherical:W_,Box3:Pc,Sphere:eh,Raycaster:H_,MathUtils:mc}}}]),n}(Ix),kx=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("div");return(0,s.Z)(this,n),(e=t.call(this)).element=r,e.element.style.position="absolute",e.element.style.userSelect="none",e.element.setAttribute("draggable",!1),e.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))})),e}return(0,o.Z)(n,[{key:"copy",value:function(e,t){return lt(c(n.prototype),"copy",this).call(this,e,t),this.element=e.element.cloneNode(!0),this}}]),n}(Mh);kx.prototype.isCSS2DObject=!0;var Sx=new Oc,Rx=new lh,Cx=new lh,Dx=new Oc,Ax=new Oc,Ox=(0,o.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.Z)(this,e);var n,r,i,a,o=this,u={objects:new WeakMap},l=void 0!==t.element?t.element:document.createElement("div");function c(e,t,n){if(e.isCSS2DObject){e.onBeforeRender(o,t,n),Sx.setFromMatrixPosition(e.matrixWorld),Sx.applyMatrix4(Cx);var r=e.element;/apple/i.test(navigator.vendor)?r.style.transform="translate(-50%,-50%) translate("+Math.round(Sx.x*i+i)+"px,"+Math.round(-Sx.y*a+a)+"px)":r.style.transform="translate(-50%,-50%) translate("+(Sx.x*i+i)+"px,"+(-Sx.y*a+a)+"px)",r.style.display=e.visible&&Sx.z>=-1&&Sx.z<=1?"":"none";var s={distanceToCameraSquared:h(n,e)};u.objects.set(e,s),r.parentNode!==l&&l.appendChild(r),e.onAfterRender(o,t,n)}for(var p=0,f=e.children.length;p<f;p++)c(e.children[p],t,n)}function h(e,t){return Dx.setFromMatrixPosition(e.matrixWorld),Ax.setFromMatrixPosition(t.matrixWorld),Dx.distanceToSquared(Ax)}l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:n,height:r}},this.render=function(e,t){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Rx.copy(t.matrixWorldInverse),Cx.multiplyMatrices(t.projectionMatrix,Rx),c(e,e,t),function(e){for(var t=function(e){var t=[];return e.traverse((function(e){e.isCSS2DObject&&t.push(e)})),t}(e).sort((function(e,t){return u.objects.get(e).distanceToCameraSquared-u.objects.get(t).distanceToCameraSquared})),n=t.length,r=0,i=t.length;r<i;r++)t[r].element.style.zIndex=n-r}(e)},this.setSize=function(e,t){i=(n=e)/2,a=(r=t)/2,l.style.width=e+"px",l.style.height=t+"px"}})),Nx=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,[{key:"dispose",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e.removeFromParent(),this.disposeGeometryAndMaterials(e,t),n&&e.children.length&&this.disposeChildren(e),e.material=[],e.children.length=0}},{key:"disposeGeometry",value:function(e){e.boundsTree&&e.disposeBoundsTree(),e.dispose()}},{key:"disposeGeometryAndMaterials",value:function(t,n){t.geometry&&this.disposeGeometry(t.geometry),n&&e.disposeMaterial(t)}},{key:"disposeChildren",value:function(e){var t,n=b(e.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.dispose(r)}}catch(i){n.e(i)}finally{n.f()}}}],[{key:"disposeMaterial",value:function(e){if(e.material)if(Array.isArray(e.material)){var t,n=b(e.material);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}}else e.material.dispose()}}]),e}();new Oc,new Oc,new Oc;var Mx="ifcjs-dimension-preview",Px=function(){function e(t,n){(0,s.Z)(this,e),this.boundingBox=new Np,this._disposer=new Nx,this._root=new jv,this._endpoints=[],this._components=t,this.start=n.start,this.end=n.end,this._length=this.getLength(),this.center=this.getCenter(),this._line=this.createLine(n),this.newEndpointMesh(n),this.newEndpointMesh(n),this.label=this.newText(),this._root.renderOrder=2,this._components.scene.get().add(this._root)}return(0,o.Z)(e,[{key:"visible",set:function(e){e?(this._components.scene.get().add(this._root),this._root.add(this.label)):(this._root.removeFromParent(),this.label.removeFromParent())}},{key:"geometry",set:function(e){var t,n=b(this._endpoints);try{for(n.s();!(t=n.n()).done;){t.value.geometry=e}}catch(r){n.e(r)}finally{n.f()}}},{key:"endPoint",set:function(e){this.end=e,this.updateEndpointPosition(e),this.updateEndpointMeshes(e),this.updateLabel()}},{key:"dispose",value:function(){this.visible=!1,this._disposer.dispose(this._root),this._disposer.dispose(this._line);var e,t=b(this._endpoints);try{for(t.s();!(e=t.n()).done;){e.value.removeFromParent()}}catch(n){t.e(n)}finally{t.f()}this._endpoints.length=0,this.label.removeFromParent(),this.label.element.remove(),this.boundingBox&&this._disposer.dispose(this.boundingBox)}},{key:"createBoundingBox",value:function(){this.boundingBox.geometry=new Pp(1,1,this._length),this.boundingBox.position.copy(this.center),this.boundingBox.lookAt(this.end),this.boundingBox.visible=!1,this._root.add(this.boundingBox)}},{key:"updateLabel",value:function(){this._length=this.getLength(),this.label.element.textContent=this.getTextContent(),this.center=this.getCenter(),this.label.position.set(this.center.x,this.center.y,this.center.z),this._line.computeLineDistances()}},{key:"updateEndpointMeshes",value:function(e){this._endpoints[1].position.copy(e),this._endpoints[1].lookAt(this.start),this._endpoints[0].lookAt(this.end)}},{key:"updateEndpointPosition",value:function(e){var t=this._line.geometry.attributes.position;t.setXYZ(1,e.x,e.y,e.z),t.needsUpdate=!0}},{key:"createLine",value:function(e){var t=new vp;t.setFromPoints([e.start,e.end]);var n=new Hm(t,e.lineMaterial);return this._root.add(n),n}},{key:"newEndpointMesh",value:function(e){var t=0===this._endpoints.length,n=t?this.start:this.end,r=t?this.end:this.start,i=e.endpoint.clone();i.position.copy(n),i.lookAt(r),this._endpoints.push(i),this._root.add(i)}},{key:"newText",value:function(){var e=document.createElement("div");e.className="ifcjs-dimension-label",e.textContent=this.getTextContent();var t=new kx(e);return t.position.set(this.center.x,this.center.y,this.center.z),this._root.add(t),t}},{key:"getTextContent",value:function(){return"".concat(this._length/e.scale," ").concat(e.units)}},{key:"getLength",value:function(){return parseFloat(this.start.distanceTo(this.end).toFixed(2))}},{key:"getCenter",value:function(){var e=this.end.clone().sub(this.start),t=.5*e.length();return e=e.normalize().multiplyScalar(t),this.start.clone().add(e)}}]),e}();Px.scale=1,Px.units="m";var Fx=function(){function e(t){var n=this;(0,s.Z)(this,e),this.dom=t,this._position=new yc,this.updateMouseInfo=function(e){n._event=e},this.setupMousePositionUpdate()}return(0,o.Z)(e,[{key:"position",get:function(){if(this._event){var e=this.dom.getBoundingClientRect();this._position.x=this.getPositionX(e,this._event),this._position.y=this.getPositionY(e,this._event)}return this._position}},{key:"dispose",value:function(){this.dom.removeEventListener("mousemove",this.updateMouseInfo)}},{key:"getPositionY",value:function(e,t){return-(t.clientY-e.top)/(e.bottom-e.top)*2+1}},{key:"getPositionX",value:function(e,t){return(t.clientX-e.left)/(e.right-e.left)*2-1}},{key:"setupMousePositionUpdate",value:function(){this.dom.addEventListener("mousemove",this.updateMouseInfo)}}]),e}(),Lx=function(e){l(n,e);var t=v(n);function n(e){var r;(0,s.Z)(this,n),(r=t.call(this)).components=e,r.name="SimpleRaycaster",r.enabled=!0,r._raycaster=new H_;var i=e.renderer.get().domElement;return r._mouse=new Fx(i),r}return(0,o.Z)(n,[{key:"get",value:function(){return this._raycaster}},{key:"castRay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.components.meshes,t=this.components.camera.get();this._raycaster.setFromCamera(this._mouse.position,t);var n=this._raycaster.intersectObjects(e),r=this.filterClippingPlanes(n);return r.length>0?r[0]:null}},{key:"filterClippingPlanes",value:function(e){var t=this.components.renderer;if(!t.clippingPlanes)return e;var n=t.clippingPlanes;return e.length<=0||!n||(null===n||void 0===n?void 0:n.length)<=0?e:e.filter((function(e){return n.every((function(t){return t.distanceToPoint(e.point)>0}))}))}}]),n}(Ix),Ux=function(e){l(n,e);var t=v(n);function n(e){var r;(0,s.Z)(this,n),(r=t.call(this)).components=e,r.name="SimpleDimensions",r.beforeUpdate=new ME,r.afterUpdate=new ME,r.onCreate=new ME,r.onDelete=new ME,r.snapDistance=.25,r._lineMaterial=new bg({color:0,linewidth:2,depthTest:!1,dashSize:.2,gapSize:.2}),r._dimensions=[],r._visible=!0,r._enabled=!1,r._disposer=new Nx,r._temp={isDragging:!1,start:new Oc,end:new Oc,dimension:void 0},r._raycaster=new Lx(r.components),r._endpointMesh=r.newEndpointMesh();var i=document.createElement("div");return i.className=Mx,r.previewElement=new kx(i),r.previewElement.visible=!1,r}return(0,o.Z)(n,[{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e,this.previewVisible=e}},{key:"visible",get:function(){return this._visible},set:function(e){this._visible=e,this._visible||(this.enabled=!1);var t,n=b(this._dimensions);try{for(n.s();!(t=n.n()).done;){t.value.visible=this._visible}}catch(r){n.e(r)}finally{n.f()}}},{key:"color",set:function(e){this._endpointMesh.material.color=e,this._lineMaterial.color=e}},{key:"geometry",get:function(){return this._endpointMesh.geometry},set:function(e){this._endpointMesh.geometry=e;var t,n=b(this._dimensions);try{for(n.s();!(t=n.n()).done;){t.value.geometry=e}}catch(r){n.e(r)}finally{n.f()}}},{key:"previewVisible",set:function(e){var t,n=null===(t=this.components.scene)||void 0===t?void 0:t.get();e?n.add(this.previewElement):this.previewElement.removeFromParent()}},{key:"get",value:function(){return this._dimensions}},{key:"dispose",value:function(){this.enabled=!1,this._dimensions.forEach((function(e){return e.dispose()})),this._dimensions=[],this._disposer.dispose(this._endpointMesh),this._endpointMesh.removeFromParent(),this.previewElement.removeFromParent(),this.previewElement.element.remove()}},{key:"update",value:function(e){if(this._enabled){this.beforeUpdate.trigger(this);var t=this._raycaster.castRay();if(this.previewElement.visible=!!t,!t)return;this.previewElement.visible=!0;var n=this.getClosestVertex(t);if(this.previewElement.visible=!!n,!n)return;this.previewElement.position.set(n.x,n.y,n.z),this._temp.isDragging&&this.drawInProcess(),this.afterUpdate.trigger(this)}}},{key:"create",value:function(e){this._enabled&&(this._temp.isDragging?this.drawEnd():this.drawStart(e))}},{key:"delete",value:function(){if(this._enabled&&0!==this._dimensions.length){var e=this.getBoundingBoxes(),t=this._raycaster.castRay(e);if(t){var n=this._dimensions.find((function(e){return e.boundingBox===t.object}));if(n){var r=this._dimensions.indexOf(n);this._dimensions.splice(r,1),n.dispose(),this.onDelete.trigger(n)}}}}},{key:"deleteAll",value:function(){var e=this;this._dimensions.forEach((function(t){t.dispose(),e.onDelete.trigger(t)})),this._dimensions=[]}},{key:"cancelDrawing",value:function(){var e;this._temp.dimension&&(this._temp.isDragging=!1,null===(e=this._temp.dimension)||void 0===e||e.dispose(),this._temp.dimension=void 0)}},{key:"drawStart",value:function(e){var t=e?[e]:void 0,n=this._raycaster.castRay(t);n&&(this._temp.isDragging=!0,this._temp.start=e?n.point:this.getClosestVertex(n))}},{key:"drawInProcess",value:function(){var e=this._raycaster.castRay();if(e){var t=this.getClosestVertex(e);t&&(this._temp.end=t,this._temp.dimension||(this._temp.dimension=this.drawDimension()),this._temp.dimension.endPoint=this._temp.end)}}},{key:"drawEnd",value:function(){this._temp.dimension&&(this._temp.dimension.createBoundingBox(),this._dimensions.push(this._temp.dimension),this._temp.dimension=void 0,this._temp.isDragging=!1,this.onCreate.trigger(this._temp.dimension))}},{key:"newEndpointMesh",value:function(){var e=n.getDefaultEndpointGeometry(),t=new tp({color:0,depthTest:!1});return new Np(e,t)}},{key:"drawDimension",value:function(){return new Px(this.components,{start:this._temp.start,end:this._temp.end,lineMaterial:this._lineMaterial,endpoint:this._endpointMesh})}},{key:"getBoundingBoxes",value:function(){return this._dimensions.map((function(e){return e.boundingBox})).filter((function(e){return void 0!==e}))}},{key:"getClosestVertex",value:function(e){var t=this,r=new Oc,i=!1,a=Number.MAX_SAFE_INTEGER,s=n.getVertices(e);return null===s||void 0===s||s.forEach((function(n){if(n){var s=e.point.distanceTo(n);s>a||s>t.snapDistance||(i=!0,r=n,a=e.point.distanceTo(n))}})),i?r:e.point}}],[{key:"getDefaultEndpointGeometry",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.4,t=new ry(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,e);return t.translate(0,-e/2,0),t.rotateX(-Math.PI/2),t}},{key:"getVertices",value:function(e){var t=e.object;if(!e.face||!t)return null;var r=t.geometry;return[n.getVertex(e.face.a,r),n.getVertex(e.face.b,r),n.getVertex(e.face.c,r)].map((function(e){return null===e||void 0===e?void 0:e.applyMatrix4(t.matrixWorld)}))}},{key:"getVertex",value:function(e,t){if(void 0===e)return null;var n=t.attributes.position;return new Oc(n.getX(e),n.getY(e),n.getZ(e))}}]),n}(Ix),Zx=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).name="SimpleGrid",r.enabled=!0,r._disposer=new Nx,r._grid=new rT(50,50),e.scene.get().add(r._grid),r}return(0,o.Z)(n,[{key:"visible",get:function(){return this._grid.visible},set:function(e){this._grid.visible=e}},{key:"get",value:function(){return this._grid}},{key:"dispose",value:function(){this._disposer.dispose(this._grid)}}]),n}(Ix),Bx=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.apply(this,arguments)).clippingPlanes=[],e}return(0,o.Z)(n,[{key:"togglePlane",value:function(e,t,n){t.isLocal=n;var r=this.clippingPlanes.indexOf(t);e&&-1===r?this.clippingPlanes.push(t):!e&&r>-1&&this.clippingPlanes.splice(r,1),this.get().clippingPlanes=this.clippingPlanes.filter((function(e){return!e.isLocal}))}}]),n}(Ix),zx=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this)).components=e,i.container=r,i.name="SimpleRenderer",i.enabled=!0,i.beforeUpdate=new ME,i.afterUpdate=new ME,i._renderer2D=new Ox,i._renderer=new Kv({antialias:!0,alpha:!0}),i._renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),i.setupRenderers(),i.setupEvents(),i.resize(),i}return(0,o.Z)(n,[{key:"get",value:function(){return this._renderer}},{key:"update",value:function(e){var t,n;this.beforeUpdate.trigger(this);var r=null===(t=this.components.scene)||void 0===t?void 0:t.get(),i=null===(n=this.components.camera)||void 0===n?void 0:n.get();r&&i&&(this._renderer.render(r,i),this._renderer2D.render(r,i),this.afterUpdate.trigger(this))}},{key:"dispose",value:function(){this.enabled=!1,this._renderer.domElement.remove(),this._renderer.dispose(),this.afterUpdate.reset(),this.beforeUpdate.reset()}},{key:"getSize",value:function(){return new yc(this._renderer.domElement.clientWidth,this._renderer.domElement.clientHeight)}},{key:"resize",value:function(){var e=this.container.clientWidth,t=this.container.clientHeight;this._renderer.setSize(e,t),this._renderer2D.setSize(e,t)}},{key:"setupRenderers",value:function(){this._renderer.localClippingEnabled=!0,this.container.appendChild(this._renderer.domElement),this._renderer2D.domElement.style.position="absolute",this._renderer2D.domElement.style.top="0px",this._renderer2D.domElement.style.pointerEvents="none",this.container.appendChild(this._renderer2D.domElement)}},{key:"setupEvents",value:function(){var e=this;window.addEventListener("resize",(function(){e.resize()}))}}]),n}(Bx),Gx=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).enabled=!0,r.name="SimpleScene",r._disposer=new Nx,r._scene=new em,r._scene.background=new ep(13421772),r}return(0,o.Z)(n,[{key:"get",value:function(){return this._scene}},{key:"dispose",value:function(){var e,t=b(this._scene.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.geometry&&this._disposer.dispose(n)}}catch(r){t.e(r)}finally{t.f()}this._scene.children=[]}}]),n}(Ix),Hx=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this)).components=e,i.PlaneType=r,i.name="SimpleClipper",i.onCreate=new ME,i.onDelete=new ME,i._material=new tp({color:16776960,side:go,transparent:!0,opacity:.2}),i.orthogonalY=!1,i.toleranceOrthogonalY=.7,i.onStartDragging=new ME,i.onEndDragging=new ME,i._planes=[],i._size=5,i._enabled=!1,i._onStartDragging=function(){i.onStartDragging.trigger()},i._onEndDragging=function(){i.onEndDragging.trigger()},i}return(0,o.Z)(n,[{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e;var t,n=b(this.planes3D);try{for(n.s();!(t=n.n()).done;){t.value.enabled=e}}catch(r){n.e(r)}finally{n.f()}this.updateMaterials()}},{key:"material",get:function(){return this._material},set:function(e){this._material=e;var t,n=b(this._planes);try{for(n.s();!(t=n.n()).done;){t.value.planeMaterial=e}}catch(r){n.e(r)}finally{n.f()}}},{key:"size",get:function(){return this._size},set:function(e){this._size=e;var t,n=b(this._planes);try{for(n.s();!(t=n.n()).done;){t.value.size=e}}catch(r){n.e(r)}finally{n.f()}}},{key:"planes3D",get:function(){return this._planes.filter((function(e){return!e.isPlan}))}},{key:"get",value:function(){return this._planes}},{key:"dispose",value:function(){this._enabled=!1;var e,t=b(this._planes);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(n){t.e(n)}finally{t.f()}this._planes.length=0,this._material.dispose(),this.onStartDragging.reset(),this.onEndDragging.reset()}},{key:"create",value:function(){if(this.enabled){var e=this.components.raycaster.castRay();e&&this.createPlaneFromIntersection(e)}}},{key:"createFromNormalAndCoplanarPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.newPlane(t,e,n);return this.updateMaterials(),r}},{key:"delete",value:function(e){this.enabled&&(e||(e=this.pickPlane()),e&&this.deletePlane(e))}},{key:"deleteAll",value:function(){for(;this._planes.length>0;)this.delete(this._planes[0])}},{key:"deletePlane",value:function(e){var t=this._planes.indexOf(e);-1!==t&&(this._planes.splice(t,1),this.components.renderer.togglePlane(!1,e.get()),e.dispose(),this.updateMaterials(),this.onDelete.trigger(e))}},{key:"pickPlane",value:function(){var e=this.getAllPlaneMeshes(),t=this.components.raycaster.castRay(e);if(t){var n=t.object;return this._planes.find((function(e){return e.meshes.includes(n)}))}}},{key:"getAllPlaneMeshes",value:function(){var e,t=[],n=b(this.planes3D);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,a.Z)(r.meshes))}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"createPlaneFromIntersection",value:function(e){var t,n=e.point.distanceTo(new Oc(0,0,0)),r=null===(t=e.face)||void 0===t?void 0:t.normal;if(n&&r){var i=this.getWorldNormal(e,r),a=this.newPlane(e.point,i.negate(),!1);this.components.renderer.togglePlane(!0,a.get()),this.updateMaterials()}}},{key:"getWorldNormal",value:function(e,t){var n=(new gc).getNormalMatrix(e.object.matrixWorld),r=t.clone().applyMatrix3(n).normalize();return this.normalizePlaneDirectionY(r),r}},{key:"normalizePlaneDirectionY",value:function(e){this.orthogonalY&&(e.y>this.toleranceOrthogonalY&&(e.x=0,e.y=1,e.z=0),e.y<-this.toleranceOrthogonalY&&(e.x=0,e.y=-1,e.z=0))}},{key:"newPlane",value:function(e,t,n){var r=this.newPlaneInstance(e,t,n);return r.onStartDragging.on(this._onStartDragging),r.onEndDragging.on(this._onEndDragging),this._planes.push(r),this.onCreate.trigger(r),r}},{key:"newPlaneInstance",value:function(e,t,n){return new this.PlaneType(this.components,e,t,this.size,this._material,n)}},{key:"updateMaterials",value:function(){var e=this.components.renderer.clippingPlanes;this.components.meshes.forEach((function(t){Array.isArray(t.material)?t.material.forEach((function(t){return t.clippingPlanes=e})):t.material.clippingPlanes=e}))}}]),n}(Ix),jx=new H_,Vx=new Oc,Wx=new Oc,Yx=new Ac,qx={X:new Oc(1,0,0),Y:new Oc(0,1,0),Z:new Oc(0,0,1)},Xx={type:"change"},Kx={type:"mouseDown"},Qx={type:"mouseUp",mode:null},Jx={type:"objectChange"},$x=function(e){l(n,e);var t=v(n);function n(e,r){var i;(0,s.Z)(this,n),i=t.call(this),void 0===r&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),r=document),i.visible=!1,i.domElement=r,i.domElement.style.touchAction="none";var a=new Tb;i._gizmo=a,i.add(a);var o=new Eb;i._plane=o,i.add(o);var u=f(i);function l(e,t){var n=t;Object.defineProperty(u,e,{get:function(){return void 0!==n?n:t},set:function(t){n!==t&&(n=t,o[e]=t,a[e]=t,u.dispatchEvent({type:e+"-changed",value:t}),u.dispatchEvent(Xx))}}),u[e]=t,o[e]=t,a[e]=t}l("camera",e),l("object",void 0),l("enabled",!0),l("axis",null),l("mode","translate"),l("translationSnap",null),l("rotationSnap",null),l("scaleSnap",null),l("space","world"),l("size",1),l("dragging",!1),l("showX",!0),l("showY",!0),l("showZ",!0);var c=new Oc,h=new Oc,p=new Ac,d=new Ac,v=new Oc,m=new Ac,y=new Oc,g=new Oc,_=new Oc,T=new Oc;return l("worldPosition",c),l("worldPositionStart",h),l("worldQuaternion",p),l("worldQuaternionStart",d),l("cameraPosition",v),l("cameraQuaternion",m),l("pointStart",y),l("pointEnd",g),l("rotationAxis",_),l("rotationAngle",0),l("eye",T),i._offset=new Oc,i._startNorm=new Oc,i._endNorm=new Oc,i._cameraScale=new Oc,i._parentPosition=new Oc,i._parentQuaternion=new Ac,i._parentQuaternionInv=new Ac,i._parentScale=new Oc,i._worldScaleStart=new Oc,i._worldQuaternionInv=new Ac,i._worldScale=new Oc,i._positionStart=new Oc,i._quaternionStart=new Ac,i._scaleStart=new Oc,i._getPointer=eb.bind(f(i)),i._onPointerDown=nb.bind(f(i)),i._onPointerHover=tb.bind(f(i)),i._onPointerMove=rb.bind(f(i)),i._onPointerUp=ib.bind(f(i)),i.domElement.addEventListener("pointerdown",i._onPointerDown),i.domElement.addEventListener("pointermove",i._onPointerHover),i.domElement.addEventListener("pointerup",i._onPointerUp),i}return(0,o.Z)(n,[{key:"updateMatrixWorld",value:function(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),lt(c(n.prototype),"updateMatrixWorld",this).call(this,this)}},{key:"pointerHover",value:function(e){if(void 0!==this.object&&!0!==this.dragging){jx.setFromCamera(e,this.camera);var t=ab(this._gizmo.picker[this.mode],jx);this.axis=t?t.object.name:null}}},{key:"pointerDown",value:function(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){jx.setFromCamera(e,this.camera);var t=ab(this._plane,jx,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,Kx.mode=this.mode,this.dispatchEvent(Kx)}}},{key:"pointerMove",value:function(e){var t=this.axis,n=this.mode,r=this.object,i=this.space;if("scale"===n?i="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(i="world"),void 0!==r&&null!==t&&!1!==this.dragging&&-1===e.button){jx.setFromCamera(e,this.camera);var a=ab(this._plane,jx,!0);if(a){if(this.pointEnd.copy(a.point).sub(this.worldPositionStart),"translate"===n)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===i&&"XYZ"!==t&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===t.indexOf("X")&&(this._offset.x=0),-1===t.indexOf("Y")&&(this._offset.y=0),-1===t.indexOf("Z")&&(this._offset.z=0),"local"===i&&"XYZ"!==t?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),r.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===i&&(r.position.applyQuaternion(Yx.copy(this._quaternionStart).invert()),-1!==t.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(this._quaternionStart)),"world"===i&&(r.parent&&r.position.add(Vx.setFromMatrixPosition(r.parent.matrixWorld)),-1!==t.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(Vx.setFromMatrixPosition(r.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){var s=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(s*=-1),Wx.set(s,s,s)}else Vx.copy(this.pointStart),Wx.copy(this.pointEnd),Vx.applyQuaternion(this._worldQuaternionInv),Wx.applyQuaternion(this._worldQuaternionInv),Wx.divide(Vx),-1===t.search("X")&&(Wx.x=1),-1===t.search("Y")&&(Wx.y=1),-1===t.search("Z")&&(Wx.z=1);r.scale.copy(this._scaleStart).multiply(Wx),this.scaleSnap&&(-1!==t.search("X")&&(r.scale.x=Math.round(r.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(r.scale.y=Math.round(r.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(r.scale.z=Math.round(r.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this._offset.copy(this.pointEnd).sub(this.pointStart);var o=20/this.worldPosition.distanceTo(Vx.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===t?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Vx.copy(this.rotationAxis).cross(this.eye))*o):"X"!==t&&"Y"!==t&&"Z"!==t||(this.rotationAxis.copy(qx[t]),Vx.copy(qx[t]),"local"===i&&Vx.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(Vx.cross(this.eye).normalize())*o),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===i&&"E"!==t&&"XYZE"!==t?(r.quaternion.copy(this._quaternionStart),r.quaternion.multiply(Yx.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),r.quaternion.copy(Yx.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),r.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(Xx),this.dispatchEvent(Jx)}}}},{key:"pointerUp",value:function(e){0===e.button&&(this.dragging&&null!==this.axis&&(Qx.mode=this.mode,this.dispatchEvent(Qx)),this.dragging=!1,this.axis=null)}},{key:"dispose",value:function(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))}},{key:"attach",value:function(e){return this.object=e,this.visible=!0,this}},{key:"detach",value:function(){return this.object=void 0,this.visible=!1,this.axis=null,this}},{key:"getRaycaster",value:function(){return jx}},{key:"getMode",value:function(){return this.mode}},{key:"setMode",value:function(e){this.mode=e}},{key:"setTranslationSnap",value:function(e){this.translationSnap=e}},{key:"setRotationSnap",value:function(e){this.rotationSnap=e}},{key:"setScaleSnap",value:function(e){this.scaleSnap=e}},{key:"setSize",value:function(e){this.size=e}},{key:"setSpace",value:function(e){this.space=e}},{key:"update",value:function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}]),n}(Mh);function eb(e){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};var t=this.domElement.getBoundingClientRect();return{x:(e.clientX-t.left)/t.width*2-1,y:-(e.clientY-t.top)/t.height*2+1,button:e.button}}function tb(e){if(this.enabled)switch(e.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(e))}}function nb(e){this.enabled&&(this.domElement.setPointerCapture(e.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(e)),this.pointerDown(this._getPointer(e)))}function rb(e){this.enabled&&this.pointerMove(this._getPointer(e))}function ib(e){this.enabled&&(this.domElement.releasePointerCapture(e.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(e)))}function ab(e,t,n){for(var r=t.intersectObject(e,!0),i=0;i<r.length;i++)if(r[i].object.visible||n)return r[i];return!1}$x.prototype.isTransformControls=!0;var sb=new _h,ob=new Oc(0,1,0),ub=new Oc(0,0,0),lb=new lh,cb=new Ac,hb=new Ac,pb=new Oc,fb=new lh,db=new Oc(1,0,0),vb=new Oc(0,1,0),mb=new Oc(0,0,1),yb=new Oc,gb=new Oc,_b=new Oc,Tb=function(e){l(n,e);var t=v(n);function n(){var e;(0,s.Z)(this,n),(e=t.call(this)).type="TransformControlsGizmo";var r=new tp({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=new Lm({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),a=r.clone();a.opacity=.15;var o=i.clone();o.opacity=.5;var u=r.clone();u.color.setHex(16711680);var l=r.clone();l.color.setHex(65280);var c=r.clone();c.color.setHex(255);var h=r.clone();h.color.setHex(16711680),h.opacity=.5;var p=r.clone();p.color.setHex(65280),p.opacity=.5;var f=r.clone();f.color.setHex(255),f.opacity=.5;var d=r.clone();d.opacity=.25;var v=r.clone();v.color.setHex(16776960),v.opacity=.25,r.clone().color.setHex(16776960);var m=r.clone();m.color.setHex(7895160);var y=new ny(0,.04,.1,12);y.translate(0,.05,0);var g=new Pp(.08,.08,.08);g.translate(0,.04,0);var _=new vp;_.setAttribute("position",new op([0,0,0,1,0,0],3));var T=new ny(.0075,.0075,.5,3);function E(e,t){var n=new pg(e,.0075,3,64,t*Math.PI*2);return n.rotateY(Math.PI/2),n.rotateX(Math.PI/2),n}T.translate(0,.25,0);var x={X:[[new Np(y,u),[.5,0,0],[0,0,-Math.PI/2]],[new Np(y,u),[-.5,0,0],[0,0,Math.PI/2]],[new Np(T,u),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new Np(y,l),[0,.5,0]],[new Np(y,l),[0,-.5,0],[Math.PI,0,0]],[new Np(T,l)]],Z:[[new Np(y,c),[0,0,.5],[Math.PI/2,0,0]],[new Np(y,c),[0,0,-.5],[-Math.PI/2,0,0]],[new Np(T,c),null,[Math.PI/2,0,0]]],XYZ:[[new Np(new lg(.1,0),d.clone()),[0,0,0]]],XY:[[new Np(new Pp(.15,.15,.01),f.clone()),[.15,.15,0]]],YZ:[[new Np(new Pp(.15,.15,.01),h.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Np(new Pp(.15,.15,.01),p.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},b={X:[[new Np(new ny(.2,0,.6,4),a),[.3,0,0],[0,0,-Math.PI/2]],[new Np(new ny(.2,0,.6,4),a),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Np(new ny(.2,0,.6,4),a),[0,.3,0]],[new Np(new ny(.2,0,.6,4),a),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Np(new ny(.2,0,.6,4),a),[0,0,.3],[Math.PI/2,0,0]],[new Np(new ny(.2,0,.6,4),a),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new Np(new lg(.2,0),a)]],XY:[[new Np(new Pp(.2,.2,.01),a),[.15,.15,0]]],YZ:[[new Np(new Pp(.2,.2,.01),a),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Np(new Pp(.2,.2,.01),a),[.15,0,.15],[-Math.PI/2,0,0]]]},I={START:[[new Np(new lg(.01,2),o),null,null,null,"helper"]],END:[[new Np(new lg(.01,2),o),null,null,null,"helper"]],DELTA:[[new Hm(function(){var e=new vp;return e.setAttribute("position",new op([0,0,0,1,1,1],3)),e}(),o),null,null,null,"helper"]],X:[[new Hm(_,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Hm(_,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Hm(_,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},w={XYZE:[[new Np(E(.5,1),m),null,[0,Math.PI/2,0]]],X:[[new Np(E(.5,.5),u)]],Y:[[new Np(E(.5,.5),l),null,[0,0,-Math.PI/2]]],Z:[[new Np(E(.5,.5),c),null,[0,Math.PI/2,0]]],E:[[new Np(E(.75,1),v),null,[0,Math.PI/2,0]]]},k={AXIS:[[new Hm(_,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},S={XYZE:[[new Np(new hg(.25,10,8),a)]],X:[[new Np(new pg(.5,.1,4,24),a),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Np(new pg(.5,.1,4,24),a),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Np(new pg(.5,.1,4,24),a),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Np(new pg(.75,.1,2,24),a)]]},R={X:[[new Np(g,u),[.5,0,0],[0,0,-Math.PI/2]],[new Np(T,u),[0,0,0],[0,0,-Math.PI/2]],[new Np(g,u),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new Np(g,l),[0,.5,0]],[new Np(T,l)],[new Np(g,l),[0,-.5,0],[0,0,Math.PI]]],Z:[[new Np(g,c),[0,0,.5],[Math.PI/2,0,0]],[new Np(T,c),[0,0,0],[Math.PI/2,0,0]],[new Np(g,c),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new Np(new Pp(.15,.15,.01),f),[.15,.15,0]]],YZ:[[new Np(new Pp(.15,.15,.01),h),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Np(new Pp(.15,.15,.01),p),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Np(new Pp(.1,.1,.1),d.clone())]]},C={X:[[new Np(new ny(.2,0,.6,4),a),[.3,0,0],[0,0,-Math.PI/2]],[new Np(new ny(.2,0,.6,4),a),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Np(new ny(.2,0,.6,4),a),[0,.3,0]],[new Np(new ny(.2,0,.6,4),a),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Np(new ny(.2,0,.6,4),a),[0,0,.3],[Math.PI/2,0,0]],[new Np(new ny(.2,0,.6,4),a),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new Np(new Pp(.2,.2,.01),a),[.15,.15,0]]],YZ:[[new Np(new Pp(.2,.2,.01),a),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Np(new Pp(.2,.2,.01),a),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Np(new Pp(.2,.2,.2),a),[0,0,0]]]},D={X:[[new Hm(_,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Hm(_,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Hm(_,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function A(e){var t=new Mh;for(var n in e)for(var r=e[n].length;r--;){var i=e[n][r][0].clone(),a=e[n][r][1],s=e[n][r][2],o=e[n][r][3],u=e[n][r][4];i.name=n,i.tag=u,a&&i.position.set(a[0],a[1],a[2]),s&&i.rotation.set(s[0],s[1],s[2]),o&&i.scale.set(o[0],o[1],o[2]),i.updateMatrix();var l=i.geometry.clone();l.applyMatrix4(i.matrix),i.geometry=l,i.renderOrder=1/0,i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),t.add(i)}return t}return e.gizmo={},e.picker={},e.helper={},e.add(e.gizmo.translate=A(x)),e.add(e.gizmo.rotate=A(w)),e.add(e.gizmo.scale=A(R)),e.add(e.picker.translate=A(b)),e.add(e.picker.rotate=A(S)),e.add(e.picker.scale=A(C)),e.add(e.helper.translate=A(I)),e.add(e.helper.rotate=A(k)),e.add(e.helper.scale=A(D)),e.picker.translate.visible=!1,e.picker.rotate.visible=!1,e.picker.scale.visible=!1,e}return(0,o.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=this,r="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:hb;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var i=[];i=(i=(i=i.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var a=function(){var e,n=i[s];if(n.visible=!0,n.rotation.set(0,0,0),n.position.copy(t.worldPosition),e=t.camera.isOrthographicCamera?(t.camera.top-t.camera.bottom)/t.camera.zoom:t.worldPosition.distanceTo(t.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*t.camera.fov/360)/t.camera.zoom,7),n.scale.set(1,1,1).multiplyScalar(e*t.size/4),"helper"===n.tag)return n.visible=!1,"AXIS"===n.name?(n.position.copy(t.worldPositionStart),n.visible=!!t.axis,"X"===t.axis&&(Yx.setFromEuler(sb.set(0,0,0)),n.quaternion.copy(r).multiply(Yx),Math.abs(ob.copy(db).applyQuaternion(r).dot(t.eye))>.9&&(n.visible=!1)),"Y"===t.axis&&(Yx.setFromEuler(sb.set(0,0,Math.PI/2)),n.quaternion.copy(r).multiply(Yx),Math.abs(ob.copy(vb).applyQuaternion(r).dot(t.eye))>.9&&(n.visible=!1)),"Z"===t.axis&&(Yx.setFromEuler(sb.set(0,Math.PI/2,0)),n.quaternion.copy(r).multiply(Yx),Math.abs(ob.copy(mb).applyQuaternion(r).dot(t.eye))>.9&&(n.visible=!1)),"XYZE"===t.axis&&(Yx.setFromEuler(sb.set(0,Math.PI/2,0)),ob.copy(t.rotationAxis),n.quaternion.setFromRotationMatrix(lb.lookAt(ub,ob,vb)),n.quaternion.multiply(Yx),n.visible=t.dragging),"E"===t.axis&&(n.visible=!1)):"START"===n.name?(n.position.copy(t.worldPositionStart),n.visible=t.dragging):"END"===n.name?(n.position.copy(t.worldPosition),n.visible=t.dragging):"DELTA"===n.name?(n.position.copy(t.worldPositionStart),n.quaternion.copy(t.worldQuaternionStart),Vx.set(1e-10,1e-10,1e-10).add(t.worldPositionStart).sub(t.worldPosition).multiplyScalar(-1),Vx.applyQuaternion(t.worldQuaternionStart.clone().invert()),n.scale.copy(Vx),n.visible=t.dragging):(n.quaternion.copy(r),t.dragging?n.position.copy(t.worldPositionStart):n.position.copy(t.worldPosition),t.axis&&(n.visible=-1!==t.axis.search(n.name))),"continue";if(n.quaternion.copy(r),"translate"===t.mode||"scale"===t.mode){var a=.99;"X"===n.name&&Math.abs(ob.copy(db).applyQuaternion(r).dot(t.eye))>a&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),"Y"===n.name&&Math.abs(ob.copy(vb).applyQuaternion(r).dot(t.eye))>a&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),"Z"===n.name&&Math.abs(ob.copy(mb).applyQuaternion(r).dot(t.eye))>a&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),"XY"===n.name&&Math.abs(ob.copy(mb).applyQuaternion(r).dot(t.eye))<.2&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),"YZ"===n.name&&Math.abs(ob.copy(db).applyQuaternion(r).dot(t.eye))<.2&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),"XZ"===n.name&&Math.abs(ob.copy(vb).applyQuaternion(r).dot(t.eye))<.2&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1)}else"rotate"===t.mode&&(cb.copy(r),ob.copy(t.eye).applyQuaternion(Yx.copy(r).invert()),-1!==n.name.search("E")&&n.quaternion.setFromRotationMatrix(lb.lookAt(t.eye,ub,vb)),"X"===n.name&&(Yx.setFromAxisAngle(db,Math.atan2(-ob.y,ob.z)),Yx.multiplyQuaternions(cb,Yx),n.quaternion.copy(Yx)),"Y"===n.name&&(Yx.setFromAxisAngle(vb,Math.atan2(ob.x,ob.z)),Yx.multiplyQuaternions(cb,Yx),n.quaternion.copy(Yx)),"Z"===n.name&&(Yx.setFromAxisAngle(mb,Math.atan2(ob.y,ob.x)),Yx.multiplyQuaternions(cb,Yx),n.quaternion.copy(Yx)));n.visible=n.visible&&(-1===n.name.indexOf("X")||t.showX),n.visible=n.visible&&(-1===n.name.indexOf("Y")||t.showY),n.visible=n.visible&&(-1===n.name.indexOf("Z")||t.showZ),n.visible=n.visible&&(-1===n.name.indexOf("E")||t.showX&&t.showY&&t.showZ),n.material._color=n.material._color||n.material.color.clone(),n.material._opacity=n.material._opacity||n.material.opacity,n.material.color.copy(n.material._color),n.material.opacity=n.material._opacity,t.enabled&&t.axis&&(n.name===t.axis||t.axis.split("").some((function(e){return n.name===e})))&&(n.material.color.setHex(16776960),n.material.opacity=1)},s=0;s<i.length;s++)a();lt(c(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(Mh);Tb.prototype.isTransformControlsGizmo=!0;var Eb=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this,new af(1e5,1e5,2,2),new tp({visible:!1,wireframe:!0,side:go,transparent:!0,opacity:.1,toneMapped:!1}))).type="TransformControlsPlane",e}return(0,o.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(t="local"),yb.copy(db).applyQuaternion("local"===t?this.worldQuaternion:hb),gb.copy(vb).applyQuaternion("local"===t?this.worldQuaternion:hb),_b.copy(mb).applyQuaternion("local"===t?this.worldQuaternion:hb),ob.copy(gb),this.mode){case"translate":case"scale":switch(this.axis){case"X":ob.copy(this.eye).cross(yb),pb.copy(yb).cross(ob);break;case"Y":ob.copy(this.eye).cross(gb),pb.copy(gb).cross(ob);break;case"Z":ob.copy(this.eye).cross(_b),pb.copy(_b).cross(ob);break;case"XY":pb.copy(_b);break;case"YZ":pb.copy(yb);break;case"XZ":ob.copy(_b),pb.copy(gb);break;case"XYZ":case"E":pb.set(0,0,0)}break;default:pb.set(0,0,0)}0===pb.length()?this.quaternion.copy(this.cameraQuaternion):(fb.lookAt(Vx.set(0,0,0),pb,ob),this.quaternion.setFromRotationMatrix(fb)),lt(c(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(Np);Eb.prototype.isTransformControlsPlane=!0;var xb=function(e){l(n,e);var t=v(n);function n(e,r,i,a,o,u){var l;return(0,s.Z)(this,n),(l=t.call(this)).name="SimplePlane",l.afterUpdate=new ME,l.beforeUpdate=new ME,l.onStartDragging=new ME,l.onEndDragging=new ME,l.isPlan=!1,l._plane=new Jp,l._visible=!0,l._enabled=!0,l._arrowBoundBox=new Np,l._hiddenMaterial=new tp({visible:!1}),l._components=e,l._normal=i,l._origin=r,l.isPlan=u,l._components.renderer.togglePlane(!0,l._plane),l._planeMesh=n.newPlaneMesh(a,o),l._helper=l.newHelper(),l._controls=l.newTransformControls(),l._plane.setFromNormalAndCoplanarPoint(i,r),u||l.setupEvents(),l}return(0,o.Z)(n,[{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e,this._components.renderer.togglePlane(e,this._plane),this._visible=e,this._controls.visible=e,this._helper.visible=e}},{key:"meshes",get:function(){return[this._planeMesh,this._arrowBoundBox]}},{key:"planeMaterial",get:function(){return this._planeMesh.material},set:function(e){this._planeMesh.material=e}},{key:"size",get:function(){return this._planeMesh.scale.x},set:function(e){this._planeMesh.scale.set(e,e,e)}},{key:"update",value:function(){this._enabled&&(this.beforeUpdate.trigger(this._plane),this._plane.setFromNormalAndCoplanarPoint(this._normal,this._helper.position),this.afterUpdate.trigger(this._plane))}},{key:"get",value:function(){return this._plane}},{key:"dispose",value:function(){this._enabled=!1,this.beforeUpdate.reset(),this.afterUpdate.reset(),this.onStartDragging.reset(),this.onEndDragging.reset(),this._helper.removeFromParent(),this._components.renderer.togglePlane(!1,this._plane),this._arrowBoundBox.removeFromParent(),this._arrowBoundBox.geometry.dispose(),this._planeMesh.geometry.dispose(),this._controls.removeFromParent(),this._controls.dispose()}},{key:"newTransformControls",value:function(){var e=this._components.camera.get(),t=this._components.renderer.get().domElement,n=new $x(e,t);return this.initializeControls(n),this.isPlan||this._components.scene.get().add(n),n}},{key:"initializeControls",value:function(e){e.attach(this._helper),e.showX=!1,e.showY=!1,e.setSpace("local"),this.createArrowBoundingBox(),e.children[0].children[0].add(this._arrowBoundBox)}},{key:"createArrowBoundingBox",value:function(){this._arrowBoundBox.geometry=new ny(.18,.18,1.2),this._arrowBoundBox.material=this._hiddenMaterial,this._arrowBoundBox.rotateX(Math.PI/2),this._arrowBoundBox.updateMatrix(),this._arrowBoundBox.geometry.applyMatrix4(this._arrowBoundBox.matrix)}},{key:"setupEvents",value:function(){var e=this;this._controls.addEventListener("change",(function(){return e.update()})),this._controls.addEventListener("dragging-changed",(function(t){return e.onDraggingChanged(t)}))}},{key:"onDraggingChanged",value:function(e){this._enabled&&(this._visible=!e.value,this.preventCameraMovement(),this.notifyDraggingChanged(e))}},{key:"notifyDraggingChanged",value:function(e){e.value?this.onStartDragging.trigger():this.onEndDragging.trigger()}},{key:"preventCameraMovement",value:function(){this._components.camera.enabled=this._visible}},{key:"newHelper",value:function(){var e=new Mh;return e.lookAt(this._normal),e.position.copy(this._origin),this._planeMesh.position.z+=.01,e.add(this._planeMesh),this.isPlan||this._components.scene.get().add(e),e}}],[{key:"newPlaneMesh",value:function(e,t){var n=new af(1),r=new Np(n,t);return r.scale.set(e,e,e),r}}]),n}(Ix),bb=function(){function e(){(0,s.Z)(this,e),this.tools=[]}return(0,o.Z)(e,[{key:"add",value:function(e){this.tools.push(e)}},{key:"remove",value:function(e){var t=this.tools.findIndex((function(t){return t===e}));return t>-1&&(this.tools.splice(t,1),!0)}},{key:"get",value:function(e){return this.tools.find((function(t){return t.name===e}))}},{key:"update",value:function(e){var t,n=b(this.tools);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.enabled&&r.isUpdateable()&&r.update(e)}}catch(i){n.e(i)}finally{n.f()}}},{key:"dispose",value:function(){var e,t=b(this.tools);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.enabled=!1,n.isDisposeable()&&n.dispose()}}catch(r){t.e(r)}finally{t.f()}this.tools=[]}}]),e}(),Ib=function(){function e(){var t=this;(0,s.Z)(this,e),this.meshes=[],this._enabled=!0,this.update=function(){if(t._enabled){var n=t._clock.getDelta();e.update(t.scene,n),e.update(t.renderer,n),e.update(t.camera,n),t.tools.update(n),t.renderer.get().setAnimationLoop(t.update)}},this._clock=new E_,this.tools=new bb,e.setupBVH()}return(0,o.Z)(e,[{key:"renderer",get:function(){if(!this._renderer)throw new Error("Renderer hasn't been initialised.");return this._renderer},set:function(e){this._renderer=e}},{key:"scene",get:function(){if(!this._scene)throw new Error("Scene hasn't been initialised.");return this._scene},set:function(e){this._scene=e}},{key:"camera",get:function(){if(!this._camera)throw new Error("Camera hasn't been initialised.");return this._camera},set:function(e){this._camera=e}},{key:"raycaster",get:function(){if(!this._raycaster)throw new Error("Raycaster hasn't been initialised.");return this._raycaster},set:function(e){this._raycaster=e}},{key:"init",value:function(){this._clock.start(),this.update()}},{key:"dispose",value:function(){this._enabled=!1,this.tools.dispose(),this.renderer.isDisposeable()&&this.renderer.dispose(),this.scene.isDisposeable()&&this.scene.dispose(),this.camera.isDisposeable()&&this.camera.dispose()}}],[{key:"update",value:function(e,t){e.isUpdateable()&&e.enabled&&e.update(t)}},{key:"setupBVH",value:function(){vp.prototype.computeBoundsTree=OE,vp.prototype.disposeBoundsTree=NE,Np.prototype.raycast=AE}}]),e}(),wb=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).dracoLoader=null,r.ktx2Loader=null,r.meshoptDecoder=null,r.pluginCallbacks=[],r.register((function(e){return new Db(e)})),r.register((function(e){return new Fb(e)})),r.register((function(e){return new Lb(e)})),r.register((function(e){return new Ab(e)})),r.register((function(e){return new Ob(e)})),r.register((function(e){return new Nb(e)})),r.register((function(e){return new Mb(e)})),r.register((function(e){return new Pb(e)})),r.register((function(e){return new Rb(e)})),r.register((function(e){return new Ub(e)})),r}return(0,o.Z)(n,[{key:"load",value:function(e,t,n,r){var i,a=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:f_.extractUrlBase(e),this.manager.itemStart(e);var s=function(t){r?r(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},o=new jg(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{a.parse(n,i,(function(n){t(n),a.manager.itemEnd(e)}),s)}catch(IQ){s(IQ)}}),n,s)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){var i,a={},s={};if("string"===typeof e)i=e;else if(f_.decodeText(new Uint8Array(e,0,4))===Zb){try{a[Sb.KHR_BINARY_GLTF]=new Gb(e)}catch(d){return void(r&&r(d))}i=a[Sb.KHR_BINARY_GLTF].content}else i=f_.decodeText(new Uint8Array(e));var o=JSON.parse(i);if(void 0===o.asset||o.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var u=new TI(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(var l=0;l<this.pluginCallbacks.length;l++){var c=this.pluginCallbacks[l](u);s[c.name]=c,a[c.name]=!0}if(o.extensionsUsed)for(var h=0;h<o.extensionsUsed.length;++h){var p=o.extensionsUsed[h],f=o.extensionsRequired||[];switch(p){case Sb.KHR_MATERIALS_UNLIT:a[p]=new Cb;break;case Sb.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[p]=new Wb;break;case Sb.KHR_DRACO_MESH_COMPRESSION:a[p]=new Hb(o,this.dracoLoader);break;case Sb.KHR_TEXTURE_TRANSFORM:a[p]=new jb;break;case Sb.KHR_MESH_QUANTIZATION:a[p]=new Yb;break;default:f.indexOf(p)>=0&&void 0===s[p]&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}u.setExtensions(a),u.setPlugins(s),u.parse(n,r)}}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}]),n}(Gg);function kb(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var Sb={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"},Rb=function(){function e(t){(0,s.Z)(this,e),this.parser=t,this.name=Sb.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return(0,o.Z)(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var i,a=t.json,s=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],o=new ep(16777215);void 0!==s.color&&o.fromArray(s.color);var u=void 0!==s.range?s.range:0;switch(s.type){case"directional":(i=new u_(o)).target.position.set(0,0,-1),i.add(i.target);break;case"point":(i=new s_(o)).distance=u;break;case"spot":(i=new t_(o)).distance=u,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,i.angle=s.spot.outerConeAngle,i.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return i.position.set(0,0,0),i.decay=2,void 0!==s.intensity&&(i.intensity=s.intensity),i.name=t.createUniqueName(s.name||"light_"+e),r=Promise.resolve(i),t.cache.add(n,r),r}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}]),e}(),Cb=function(){function e(){(0,s.Z)(this,e),this.name=Sb.KHR_MATERIALS_UNLIT}return(0,o.Z)(e,[{key:"getMaterialType",value:function(){return tp}},{key:"extendParams",value:function(e,t,n){var r=[];e.color=new ep(1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var a=i.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture))}return Promise.all(r)}}]),e}(),Db=function(){function e(t){(0,s.Z)(this,e),this.parser=t,this.name=Sb.KHR_MATERIALS_CLEARCOAT}return(0,o.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?yg:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var s=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new yc(s,s)}return Promise.all(i)}}]),e}(),Ab=function(){function e(t){(0,s.Z)(this,e),this.parser=t,this.name=Sb.KHR_MATERIALS_SHEEN}return(0,o.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?yg:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[];t.sheenColor=new ep(0,0,0),t.sheenRoughness=0,t.sheen=1;var a=r.extensions[this.name];return void 0!==a.sheenColorFactor&&t.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture)),void 0!==a.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(i)}}]),e}(),Ob=function(){function e(t){(0,s.Z)(this,e),this.parser=t,this.name=Sb.KHR_MATERIALS_TRANSMISSION}return(0,o.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?yg:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}]),e}(),Nb=function(){function e(t){(0,s.Z)(this,e),this.parser=t,this.name=Sb.KHR_MATERIALS_VOLUME}return(0,o.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?yg:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||0;var s=a.attenuationColor||[1,1,1];return t.attenuationColor=new ep(s[0],s[1],s[2]),Promise.all(i)}}]),e}(),Mb=function(){function e(t){(0,s.Z)(this,e),this.parser=t,this.name=Sb.KHR_MATERIALS_IOR}return(0,o.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?yg:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}]),e}(),Pb=function(){function e(t){(0,s.Z)(this,e),this.parser=t,this.name=Sb.KHR_MATERIALS_SPECULAR}return(0,o.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?yg:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));var s=a.specularColorFactor||[1,1,1];return t.specularColor=new ep(s[0],s[1],s[2]),void 0!==a.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture).then((function(e){e.encoding=Gl}))),Promise.all(i)}}]),e}(),Fb=function(){function e(t){(0,s.Z)(this,e),this.parser=t,this.name=Sb.KHR_TEXTURE_BASISU}return(0,o.Z)(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var i=r.extensions[this.name],a=n.images[i.source],s=t.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a,s)}}]),e}(),Lb=function(){function e(t){(0,s.Z)(this,e),this.parser=t,this.name=Sb.EXT_TEXTURE_WEBP,this.isSupported=null}return(0,o.Z)(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var a=i.extensions[t],s=r.images[a.source],o=n.textureLoader;if(s.uri){var u=n.options.manager.getHandler(s.uri);null!==u&&(o=u)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,s,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),Ub=function(){function e(t){(0,s.Z)(this,e),this.name=Sb.EXT_MESHOPT_COMPRESSION,this.parser=t}return(0,o.Z)(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,a.ready]).then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,i=r.count,s=r.byteStride,o=new ArrayBuffer(i*s),u=new Uint8Array(e[0],t,n);return a.decodeGltfBuffer(new Uint8Array(o),i,s,u,r.mode,r.filter),o}))}return null}}]),e}(),Zb="glTF",Bb=1313821514,zb=5130562,Gb=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.name=Sb.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12);if(this.header={magic:f_.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Zb)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-12,i=new DataView(t,12),a=0;a<r;){var o=i.getUint32(a,!0);a+=4;var u=i.getUint32(a,!0);if(a+=4,u===Bb){var l=new Uint8Array(t,12+a,o);this.content=f_.decodeText(l)}else if(u===zb){var c=12+a;this.body=t.slice(c,c+o)}a+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),Hb=function(){function e(t,n){if((0,s.Z)(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Sb.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return(0,o.Z)(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,s={},o={},u={};for(var l in a){var c=uI[l]||l.toLowerCase();s[c]=a[l]}for(var h in e.attributes){var p=uI[h]||h.toLowerCase();if(void 0!==a[h]){var f=n.accessors[e.attributes[h]],d=iI[f.componentType];u[p]=d,o[p]=!0===f.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],i=o[n];void 0!==i&&(r.normalized=i)}t(e)}),s,u)}))}))}}]),e}(),jb=function(){function e(){(0,s.Z)(this,e),this.name=Sb.KHR_TEXTURE_TRANSFORM}return(0,o.Z)(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}]),e}(),Vb=function(e){l(n,e);var t=v(n);function n(e){var r;(0,s.Z)(this,n),(r=t.call(this)).isGLTFSpecularGlossinessMaterial=!0;var i=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),a=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),o=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),u=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),l=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),c={specular:{value:(new ep).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};return r._extraUniforms=c,r.onBeforeCompile=function(e){for(var t in c)e.uniforms[t]=c[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",i).replace("#include <metalnessmap_pars_fragment>",a).replace("#include <roughnessmap_fragment>",o).replace("#include <metalnessmap_fragment>",u).replace("#include <lights_physical_fragment>",l)},Object.defineProperties(f(r),{specular:{get:function(){return c.specular.value},set:function(e){c.specular.value=e}},specularMap:{get:function(){return c.specularMap.value},set:function(e){c.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return c.glossiness.value},set:function(e){c.glossiness.value=e}},glossinessMap:{get:function(){return c.glossinessMap.value},set:function(e){c.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete r.metalness,delete r.roughness,delete r.metalnessMap,delete r.roughnessMap,r.setValues(e),r}return(0,o.Z)(n,[{key:"copy",value:function(e){return lt(c(n.prototype),"copy",this).call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}]),n}(mg),Wb=function(){function e(){(0,s.Z)(this,e),this.name=Sb.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}return(0,o.Z)(e,[{key:"getMaterialType",value:function(){return Vb}},{key:"extendParams",value:function(e,t,n){var r=t.extensions[this.name];e.color=new ep(1,1,1),e.opacity=1;var i=[];if(Array.isArray(r.diffuseFactor)){var a=r.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new ep(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new ep(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var s=r.specularGlossinessTexture;i.push(n.assignTexture(e,"glossinessMap",s)),i.push(n.assignTexture(e,"specularMap",s))}return Promise.all(i)}},{key:"createMaterial",value:function(e){var t=new Vb(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=Kl,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}]),e}(),Yb=(0,o.Z)((function e(){(0,s.Z)(this,e),this.name=Sb.KHR_MESH_QUANTIZATION})),qb=function(e){l(n,e);var t=v(n);function n(e,r,i,a){return(0,s.Z)(this,n),t.call(this,e,r,i,a)}return(0,o.Z)(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,a=0;a!==r;a++)t[a]=n[i+a];return t}}]),n}(wg);qb.prototype.beforeStart_=qb.prototype.copySampleValue_,qb.prototype.afterEnd_=qb.prototype.copySampleValue_,qb.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=2*s,u=3*s,l=r-t,c=(n-t)/l,h=c*c,p=h*c,f=e*u,d=f-u,v=-2*p+3*h,m=p-h,y=1-v,g=m-h+c,_=0;_!==s;_++){var T=a[d+_+s],E=a[d+_+o]*l,x=a[f+_+s],b=a[f+_]*l;i[_]=y*T+g*E+v*x+m*b}return i};var Xb=new Ac,Kb=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"interpolate_",value:function(e,t,r,i){var a=lt(c(n.prototype),"interpolate_",this).call(this,e,t,r,i);return Xb.fromArray(a).normalize().toArray(a),a}}]),n}(qb),Qb=0,Jb=1,$b=2,eI=3,tI=4,nI=5,rI=6,iI={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},aI={9728:fu,9729:mu,9984:du,9985:yu,9986:vu,9987:gu},sI={33071:hu,33648:pu,10497:cu},oI={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},uI={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},lI={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},cI={CUBICSPLINE:void 0,LINEAR:Nl,STEP:Ol},hI="OPAQUE",pI="MASK",fI="BLEND";function dI(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function vI(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function mI(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(var a=0,s=i.length;a<s;a++)e.morphTargetDictionary[i[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function yI(e){var t=e.extensions&&e.extensions[Sb.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+gI(t.attributes):e.indices+":"+gI(e.attributes)+":"+e.mode}function gI(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function _I(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var TI=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Z)(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new kb,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new m_(this.options.manager):this.textureLoader=new Yg(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new jg(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return(0,o.Z)(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};dI(i,a,r),vI(a,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(a)}))).then((function(){e(a)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,i=t.length;r<i;r++)for(var a=t[r].joints,s=0,o=a.length;s<o;s++)e[a[s]].isBone=!0;for(var u=0,l=e.length;u<l;u++){var c=e[u];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(n[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var r=this;if(e.refs[t]<=1)return n;var a=n.clone();return function e(t,n){var a=r.associations.get(t);null!=a&&r.associations.set(n,a);var s,o=b(t.children.entries());try{for(o.s();!(s=o.n()).done;){var u=(0,i.Z)(s.value,2),l=u[0];e(u[1],n.children[l])}}catch(c){o.e(c)}finally{o.f()}}(n,a),a.name+="_instance_"+e.uses[t]++,a}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);i&&n.push(i)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Sb.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,i){n.load(f_.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){var i,a,s=e[0],o=oI[r.type],u=iI[r.componentType],l=u.BYTES_PER_ELEMENT,c=l*o,h=r.byteOffset||0,p=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,f=!0===r.normalized;if(p&&p!==c){var d=Math.floor(h/p),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+d+":"+r.count,m=t.cache.get(v);m||(i=new u(s,d*p,r.count*p/l),m=new tm(i,p/l),t.cache.add(v,m)),a=new rm(m,o,h%p/l,f)}else i=null===s?new u(r.count*o):new u(s,h,r.count*o),a=new ip(i,o,f);if(void 0!==r.sparse){var y=oI.SCALAR,g=iI[r.sparse.indices.componentType],_=r.sparse.indices.byteOffset||0,T=r.sparse.values.byteOffset||0,E=new g(e[1],_,r.sparse.count*y),x=new u(e[2],T,r.sparse.count*o);null!==s&&(a=new ip(a.array.slice(),a.itemSize,a.normalized));for(var b=0,I=E.length;b<I;b++){var w=E[b];if(a.setX(w,x[b*o]),o>=2&&a.setY(w,x[b*o+1]),o>=3&&a.setZ(w,x[b*o+2]),o>=4&&a.setW(w,x[b*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,r=t.textures[e],i=t.images[r.source],a=this.textureLoader;if(i.uri){var s=n.manager.getHandler(i.uri);null!==s&&(a=s)}return this.loadTextureImage(e,i,a)}},{key:"loadTextureImage",value:function(e,t,n){var r=this,i=this.json,a=this.options,s=i.textures[e],o=(t.uri||t.bufferView)+":"+s.sampler;if(this.textureCache[o])return this.textureCache[o];var u=self.URL||self.webkitURL,l=t.uri||"",c=!1;if(void 0!==t.bufferView)l=r.getDependency("bufferView",t.bufferView).then((function(e){c=!0;var n=new Blob([e],{type:t.mimeType});return l=u.createObjectURL(n)}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var h=Promise.resolve(l).then((function(e){return new Promise((function(t,r){var i=t;!0===n.isImageBitmapLoader&&(i=function(e){var n=new wc(e);n.needsUpdate=!0,t(n)}),n.load(f_.resolveURL(e,a.path),i,void 0,r)}))})).then((function(t){!0===c&&u.revokeObjectURL(l),t.flipY=!1,s.name&&(t.name=s.name);var n=(i.samplers||{})[s.sampler]||{};return t.magFilter=aI[n.magFilter]||mu,t.minFilter=aI[n.minFilter]||gu,t.wrapS=sI[n.wrapS]||cu,t.wrapT=sI[n.wrapT]||cu,r.associations.set(t,{textures:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",l),null}));return this.textureCache[o]=h,h}},{key:"assignTexture",value:function(e,t,n){var r=this;return this.getDependency("texture",n.index).then((function(i){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[Sb.KHR_TEXTURE_TRANSFORM]){var a=void 0!==n.extensions?n.extensions[Sb.KHR_TEXTURE_TRANSFORM]:void 0;if(a){var s=r.associations.get(i);i=r.extensions[Sb.KHR_TEXTURE_TRANSFORM].extendTexture(i,a),r.associations.set(i,s)}}return e[t]=i,i}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){var s="PointsMaterial:"+n.uuid,o=this.cache.get(s);o||(o=new qm,Yh.prototype.copy.call(o,n),o.color.copy(n.color),o.map=n.map,o.sizeAttenuation=!1,this.cache.add(s,o)),n=o}else if(e.isLine){var u="LineBasicMaterial:"+n.uuid,l=this.cache.get(u);l||(l=new Lm,Yh.prototype.copy.call(l,n),l.color.copy(n.color),this.cache.add(u,l)),n=l}if(r||i||a){var c="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(c+="specular-glossiness:"),r&&(c+="derivative-tangents:"),i&&(c+="vertex-colors:"),a&&(c+="flat-shading:");var h=this.cache.get(c);h||(h=n.clone(),i&&(h.vertexColors=!0),a&&(h.flatShading=!0),r&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(c,h),this.associations.set(h,this.associations.get(n))),n=h}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}},{key:"getMaterialType",value:function(){return mg}},{key:"loadMaterial",value:function(e){var t,n=this,r=this.json,i=this.extensions,a=r.materials[e],s={},o=a.extensions||{},u=[];if(o[Sb.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var l=i[Sb.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=l.getMaterialType(),u.push(l.extendParams(s,a,n))}else if(o[Sb.KHR_MATERIALS_UNLIT]){var c=i[Sb.KHR_MATERIALS_UNLIT];t=c.getMaterialType(),u.push(c.extendParams(s,a,n))}else{var h=a.pbrMetallicRoughness||{};if(s.color=new ep(1,1,1),s.opacity=1,Array.isArray(h.baseColorFactor)){var p=h.baseColorFactor;s.color.fromArray(p),s.opacity=p[3]}void 0!==h.baseColorTexture&&u.push(n.assignTexture(s,"map",h.baseColorTexture)),s.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,s.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(u.push(n.assignTexture(s,"metalnessMap",h.metallicRoughnessTexture)),u.push(n.assignTexture(s,"roughnessMap",h.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),u.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)}))))}!0===a.doubleSided&&(s.side=go);var f=a.alphaMode||hI;if(f===fI?(s.transparent=!0,s.depthWrite=!1):(s.format=Ou,s.transparent=!1,f===pI&&(s.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==tp&&(u.push(n.assignTexture(s,"normalMap",a.normalTexture)),s.normalScale=new yc(1,1),void 0!==a.normalTexture.scale)){var d=a.normalTexture.scale;s.normalScale.set(d,d)}return void 0!==a.occlusionTexture&&t!==tp&&(u.push(n.assignTexture(s,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(s.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==tp&&(s.emissive=(new ep).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==tp&&u.push(n.assignTexture(s,"emissiveMap",a.emissiveTexture)),Promise.all(u).then((function(){var r;return r=t===Vb?i[Sb.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new t(s),a.name&&(r.name=a.name),r.map&&(r.map.encoding=Gl),r.emissiveMap&&(r.emissiveMap.encoding=Gl),vI(r,a),n.associations.set(r,{materials:e}),a.extensions&&dI(i,r,a),r}))}},{key:"createUniqueName",value:function(e){for(var t=L_.sanitizeNodeName(e||""),n=t,r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[Sb.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return xI(n,e,t)}))}for(var a=[],s=0,o=e.length;s<o;s++){var u=e[s],l=yI(u),c=r[l];if(c)a.push(c.promise);else{var h=void 0;h=u.extensions&&u.extensions[Sb.KHR_DRACO_MESH_COMPRESSION]?i(u):xI(new vp,u,t),r[l]={primitive:u,promise:h},a.push(h)}}return Promise.all(a)}},{key:"loadMesh",value:function(e){for(var t,n=this,r=this.json,i=this.extensions,a=r.meshes[e],s=a.primitives,o=[],u=0,l=s.length;u<l;u++){var c=void 0===s[u].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new mg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:mo})),t.DefaultMaterial):this.getDependency("material",s[u].material);o.push(c)}return o.push(n.loadGeometries(s)),Promise.all(o).then((function(t){for(var r=t.slice(0,t.length-1),o=t[t.length-1],u=[],l=0,c=o.length;l<c;l++){var h=o[l],p=s[l],f=void 0,d=r[l];if(p.mode===tI||p.mode===nI||p.mode===rI||void 0===p.mode)!0!==(f=!0===a.isSkinnedMesh?new wm(h,d):new Np(h,d)).isSkinnedMesh||f.geometry.attributes.skinWeight.normalized||f.normalizeSkinWeights(),p.mode===nI?f.geometry=bI(f.geometry,1):p.mode===rI&&(f.geometry=bI(f.geometry,Bl));else if(p.mode===Jb)f=new Wm(h,d);else if(p.mode===eI)f=new Hm(h,d);else if(p.mode===$b)f=new Ym(h,d);else{if(p.mode!==Qb)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);f=new $m(h,d)}Object.keys(f.geometry.morphAttributes).length>0&&mI(f,a),f.name=n.createUniqueName(a.name||"mesh_"+e),vI(f,a),p.extensions&&dI(i,f,p),n.assignFinalMaterial(f),u.push(f)}for(var v=0,m=u.length;v<m;v++)n.associations.set(u[v],{meshes:e,primitives:v});if(1===u.length)return u[0];var y=new jv;n.associations.set(y,{meshes:e});for(var g=0,_=u.length;g<_;g++)y.add(u[g]);return y}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new Hp(mc.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new vf(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),vI(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=[],r=[],i=[],a=[],s=[],o=0,u=t.channels.length;o<u;o++){var l=t.channels[o],c=t.samplers[l.sampler],h=l.target,p=void 0!==h.node?h.node:h.id,f=void 0!==t.parameters?t.parameters[c.input]:c.input,d=void 0!==t.parameters?t.parameters[c.output]:c.output;n.push(this.getDependency("node",p)),r.push(this.getDependency("accessor",f)),i.push(this.getDependency("accessor",d)),a.push(c),s.push(h)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(a),Promise.all(s)]).then((function(n){for(var r=n[0],i=n[1],a=n[2],s=n[3],o=n[4],u=[],l=function(){var e,t=r[c],n=i[c],l=a[c],h=s[c],p=o[c];if(void 0===t)return"continue";switch(t.updateMatrix(),t.matrixAutoUpdate=!0,lI[p.path]){case lI.weights:e=Og;break;case lI.rotation:e=Mg;break;default:e=Fg}var f=t.name?t.name:t.uuid,d=void 0!==h.interpolation?cI[h.interpolation]:Nl,v=[];lI[p.path]===lI.weights?t.traverse((function(e){e.morphTargetInfluences&&v.push(e.name?e.name:e.uuid)})):v.push(f);var m=l.array;if(l.normalized){for(var y=_I(m.constructor),g=new Float32Array(m.length),_=0,T=m.length;_<T;_++)g[_]=m[_]*y;m=g}for(var E=0,x=v.length;E<x;E++){var b=new e(v[E]+"."+lI[p.path],n.array,m,d);"CUBICSPLINE"===h.interpolation&&(b.createInterpolant=function(e){return new(this instanceof Mg?Kb:qb)(this.times,this.values,this.getValueSize()/3,e)},b.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(b)}},c=0,h=r.length;c<h;c++)l();var p=t.name?t.name:"animation_"+e;return new Lg(p,void 0,u)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}},{key:"loadNode",value:function(e){var t=this.json,n=this.extensions,r=this,i=t.nodes[e],a=i.name?r.createUniqueName(i.name):"";return function(){var t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==i.camera&&t.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){var s;if((s=!0===i.isBone?new km:t.length>1?new jv:1===t.length?t[0]:new Mh)!==t[0])for(var o=0,u=t.length;o<u;o++)s.add(t[o]);if(i.name&&(s.userData.name=i.name,s.name=a),vI(s,i),i.extensions&&dI(n,s,i),void 0!==i.matrix){var l=new lh;l.fromArray(i.matrix),s.applyMatrix4(l)}else void 0!==i.translation&&s.position.fromArray(i.translation),void 0!==i.rotation&&s.quaternion.fromArray(i.rotation),void 0!==i.scale&&s.scale.fromArray(i.scale);return r.associations.has(s)||r.associations.set(s,{}),r.associations.get(s).nodes=e,s}))}},{key:"loadScene",value:function(e){var t=this.json,n=this.extensions,r=this.json.scenes[e],a=this,s=new jv;r.name&&(s.name=a.createUniqueName(r.name)),vI(s,r),r.extensions&&dI(n,s,r);for(var o=r.nodes||[],u=[],l=0,c=o.length;l<c;l++)u.push(EI(o[l],s,t,a));return Promise.all(u).then((function(){return a.associations=function(e){var t,n=new Map,r=b(a.associations);try{for(r.s();!(t=r.n()).done;){var s=(0,i.Z)(t.value,2),o=s[0],u=s[1];(o instanceof Yh||o instanceof wc)&&n.set(o,u)}}catch(l){r.e(l)}finally{r.f()}return e.traverse((function(e){var t=a.associations.get(e);null!=t&&n.set(e,t)})),n}(s),s}))}}]),e}();function EI(e,t,n,r){var i=n.nodes[e];return r.getDependency("node",e).then((function(e){return void 0===i.skin?e:r.getDependency("skin",i.skin).then((function(e){for(var n=[],i=0,a=(t=e).joints.length;i<a;i++)n.push(r.getDependency("node",t.joints[i]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var r=[],i=[],a=0,s=n.length;a<s;a++){var o=n[a];if(o){r.push(o);var u=new lh;void 0!==t.inverseBindMatrices&&u.fromArray(t.inverseBindMatrices.array,16*a),i.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}e.bind(new Dm(r,i),e.matrixWorld)}})),e}));var t})).then((function(e){t.add(e);var a=[];if(i.children)for(var s=i.children,o=0,u=s.length;o<u;o++){var l=s[o];a.push(EI(l,e,n,r))}return Promise.all(a)}))}function xI(e,t,n){var r=t.attributes,i=[];function a(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var s in r){var o=uI[s]||s.toLowerCase();o in e.attributes||i.push(a(r[s],o))}if(void 0!==t.indices&&!e.index){var u=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(u)}return vI(e,t),function(e,t,n){var r=t.attributes,i=new Pc;if(void 0!==r.POSITION){var a=n.json.accessors[r.POSITION],s=a.min,o=a.max;if(void 0!==s&&void 0!==o){if(i.set(new Oc(s[0],s[1],s[2]),new Oc(o[0],o[1],o[2])),a.normalized){var u=_I(iI[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}var l=t.targets;if(void 0!==l){for(var c=new Oc,h=new Oc,p=0,f=l.length;p<f;p++){var d=l[p];if(void 0!==d.POSITION){var v=n.json.accessors[d.POSITION],m=v.min,y=v.max;if(void 0!==m&&void 0!==y){if(h.setX(Math.max(Math.abs(m[0]),Math.abs(y[0]))),h.setY(Math.max(Math.abs(m[1]),Math.abs(y[1]))),h.setZ(Math.max(Math.abs(m[2]),Math.abs(y[2]))),v.normalized){var g=_I(iI[v.componentType]);h.multiplyScalar(g)}c.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(c)}e.boundingBox=i;var _=new eh;i.getCenter(_.center),_.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=_}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,i=!1,a=0,s=t.length;a<s;a++){var o=t[a];if(void 0!==o.POSITION&&(r=!0),void 0!==o.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(e);for(var u=[],l=[],c=0,h=t.length;c<h;c++){var p=t[c];if(r){var f=void 0!==p.POSITION?n.getDependency("accessor",p.POSITION):e.attributes.position;u.push(f)}if(i){var d=void 0!==p.NORMAL?n.getDependency("accessor",p.NORMAL):e.attributes.normal;l.push(d)}}return Promise.all([Promise.all(u),Promise.all(l)]).then((function(t){var n=t[0],a=t[1];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function bI(e,t){var n=e.getIndex();if(null===n){var r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<i.count;a++)r.push(a);e.setIndex(r),n=e.getIndex()}var s=n.count-2,o=[];if(t===Bl)for(var u=1;u<=s;u++)o.push(n.getX(0)),o.push(n.getX(u)),o.push(n.getX(u+1));else for(var l=0;l<s;l++)l%2===0?(o.push(n.getX(l)),o.push(n.getX(l+1)),o.push(n.getX(l+2))):(o.push(n.getX(l+2)),o.push(n.getX(l+1)),o.push(n.getX(l)));o.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(o),c}var II=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,s.Z)(this,t),this.x=e,this.y=n,this.z=r,this.w=i}return(0,o.Z)(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=.01,s=.1,o=e.elements,u=o[0],l=o[4],c=o[8],h=o[1],p=o[5],f=o[9],d=o[2],v=o[6],m=o[10];if(Math.abs(l-h)<a&&Math.abs(c-d)<a&&Math.abs(f-v)<a){if(Math.abs(l+h)<s&&Math.abs(c+d)<s&&Math.abs(f+v)<s&&Math.abs(u+p+m-3)<s)return this.set(1,0,0,0),this;t=Math.PI;var y=(u+1)/2,g=(p+1)/2,_=(m+1)/2,T=(l+h)/4,E=(c+d)/4,x=(f+v)/4;return y>g&&y>_?y<a?(n=0,r=.707106781,i=.707106781):(r=T/(n=Math.sqrt(y)),i=E/n):g>_?g<a?(n=.707106781,r=0,i=.707106781):(n=T/(r=Math.sqrt(g)),i=x/r):_<a?(n=.707106781,r=.707106781,i=0):(n=E/(i=Math.sqrt(_)),r=x/i),this.set(n,r,i,t),this}var b=Math.sqrt((v-f)*(v-f)+(c-d)*(c-d)+(h-l)*(h-l));return Math.abs(b)<.001&&(b=1),this.x=(v-f)/b,this.y=(c-d)/b,this.z=(h-l)/b,this.w=Math.acos((u+p+m-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:e,value:(0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);II.prototype.isVector4=!0;for(var wI=[],kI=0;kI<256;kI++)wI[kI]=(kI<16?"0":"")+kI.toString(16);Math.PI,Math.PI;function SI(e,t,n){return Math.max(t,Math.min(n,e))}function RI(e,t){return(e%t+t)%t}function CI(e,t,n){return(1-n)*e+n*t}var DI=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,s.Z)(this,e),this._x=t,this._y=n,this._z=r,this._w=i}return(0,o.Z)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e._order,s=Math.cos,o=Math.sin,u=s(n/2),l=s(r/2),c=s(i/2),h=o(n/2),p=o(r/2),f=o(i/2);switch(a){case"XYZ":this._x=h*l*c+u*p*f,this._y=u*p*c-h*l*f,this._z=u*l*f+h*p*c,this._w=u*l*c-h*p*f;break;case"YXZ":this._x=h*l*c+u*p*f,this._y=u*p*c-h*l*f,this._z=u*l*f-h*p*c,this._w=u*l*c+h*p*f;break;case"ZXY":this._x=h*l*c-u*p*f,this._y=u*p*c+h*l*f,this._z=u*l*f+h*p*c,this._w=u*l*c-h*p*f;break;case"ZYX":this._x=h*l*c-u*p*f,this._y=u*p*c+h*l*f,this._z=u*l*f-h*p*c,this._w=u*l*c+h*p*f;break;case"YZX":this._x=h*l*c+u*p*f,this._y=u*p*c+h*l*f,this._z=u*l*f-h*p*c,this._w=u*l*c-h*p*f;break;case"XZY":this._x=h*l*c-u*p*f,this._y=u*p*c-h*l*f,this._z=u*l*f+h*p*c,this._w=u*l*c+h*p*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],s=t[5],o=t[9],u=t[2],l=t[6],c=t[10],h=n+s+c;if(h>0){var p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(l-o)*p,this._y=(i-u)*p,this._z=(a-r)*p}else if(n>s&&n>c){var f=2*Math.sqrt(1+n-s-c);this._w=(l-o)/f,this._x=.25*f,this._y=(r+a)/f,this._z=(i+u)/f}else if(s>c){var d=2*Math.sqrt(1+s-n-c);this._w=(i-u)/d,this._x=(r+a)/d,this._y=.25*d,this._z=(o+l)/d}else{var v=2*Math.sqrt(1+c-n-s);this._w=(a-r)/v,this._x=(i+u)/v,this._y=(o+l)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(SI(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,s=t._x,o=t._y,u=t._z,l=t._w;return this._x=n*l+a*s+r*u-i*o,this._y=r*l+a*o+i*s-n*u,this._z=i*l+a*u+n*o-r*s,this._w=a*l-n*s-r*o-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,s=a*e._w+n*e._x+r*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var o=1-s*s;if(o<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(o),c=Math.atan2(l,s),h=Math.sin((1-t)*c)/l,p=Math.sin(t*c)/l;return this._w=a*h+this._w*p,this._x=n*h+this._x*p,this._y=r*h+this._y*p,this._z=i*h+this._z*p,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}},{key:"slerpFlat",value:function(e,t,n,r,i,a,s){var o=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[a+0],p=i[a+1],f=i[a+2],d=i[a+3];if(0===s)return e[t+0]=o,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===s)return e[t+0]=h,e[t+1]=p,e[t+2]=f,void(e[t+3]=d);if(c!==d||o!==h||u!==p||l!==f){var v=1-s,m=o*h+u*p+l*f+c*d,y=m>=0?1:-1,g=1-m*m;if(g>Number.EPSILON){var _=Math.sqrt(g),T=Math.atan2(_,m*y);v=Math.sin(v*T)/_,s=Math.sin(s*T)/_}var E=s*y;if(o=o*v+h*E,u=u*v+p*E,l=l*v+f*E,c=c*v+d*E,v===1-s){var x=1/Math.sqrt(o*o+u*u+l*l+c*c);o*=x,u*=x,l*=x,c*=x}}e[t]=o,e[t+1]=u,e[t+2]=l,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var s=n[r],o=n[r+1],u=n[r+2],l=n[r+3],c=i[a],h=i[a+1],p=i[a+2],f=i[a+3];return e[t]=s*f+l*c+o*p-u*h,e[t+1]=o*f+l*h+u*c-s*p,e[t+2]=u*f+l*p+s*h-o*c,e[t+3]=l*f-s*c-o*h-u*p,e}}]),e}();DI.prototype.isQuaternion=!0;var AI=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,s.Z)(this,t),this.x=e,this.y=n,this.z=r}return(0,o.Z)(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(NI.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(NI.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,s=e.z,o=e.w,u=o*t+a*r-s*n,l=o*n+s*t-i*r,c=o*r+i*n-a*t,h=-i*t-a*n-s*r;return this.x=u*o+h*-i+l*-s-c*-a,this.y=l*o+h*-a+c*-i-u*-s,this.z=c*o+h*-s+u*-a-l*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,s=t.y,o=t.z;return this.x=r*o-i*s,this.y=i*a-n*o,this.z=n*s-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return OI.copy(this).projectOnVector(e),this.sub(OI)}},{key:"reflect",value:function(e){return this.sub(OI.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(SI(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:e,value:(0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);AI.prototype.isVector3=!0;var OI=new AI,NI=new DI,MI=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,s.Z)(this,t),this.x=e,this.y=n}return(0,o.Z)(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:e,value:(0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);MI.prototype.isVector2=!0;var PI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},FI={h:0,s:0,l:0},LI={h:0,s:0,l:0};function UI(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function ZI(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function BI(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var zI=function(){function e(t,n,r){return(0,s.Z)(this,e),void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}return(0,o.Z)(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:"setRGB",value:function(e,t,n){return this.r=e,this.g=t,this.b=n,this}},{key:"setHSL",value:function(e,t,n){if(e=RI(e,1),t=SI(t,0,1),n=SI(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=UI(i,r,e+1/3),this.g=UI(i,r,e),this.b=UI(i,r,e-1/3)}return this}},{key:"setStyle",value:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){var s=parseFloat(r[1])/360,o=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(s,o,u)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var t=PI[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copyGammaToLinear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}},{key:"copyLinearToGamma",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}},{key:"convertGammaToLinear",value:function(e){return this.copyGammaToLinear(this,e),this}},{key:"convertLinearToGamma",value:function(e){return this.copyLinearToGamma(this,e),this}},{key:"copySRGBToLinear",value:function(e){return this.r=ZI(e.r),this.g=ZI(e.g),this.b=ZI(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=BI(e.r),this.g=BI(e.g),this.b=BI(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t,n,r=this.r,i=this.g,a=this.b,s=Math.max(r,i,a),o=Math.min(r,i,a),u=(o+s)/2;if(o===s)t=0,n=0;else{var l=s-o;switch(n=u<=.5?l/(s+o):l/(2-s-o),s){case r:t=(i-a)/l+(i<a?6:0);break;case i:t=(a-r)/l+2;break;case a:t=(r-i)/l+4}t/=6}return e.h=t,e.s=n,e.l=u,e}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(FI),FI.h+=e,FI.s+=t,FI.l+=n,this.setHSL(FI.h,FI.s,FI.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(FI),e.getHSL(LI);var n=CI(FI.h,LI.h,t),r=CI(FI.s,LI.s,t),i=CI(FI.l,LI.l,t);return this.setHSL(n,r,i),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),e}();zI.NAMES=PI,zI.prototype.isColor=!0,zI.prototype.r=1,zI.prototype.g=1,zI.prototype.b=1;var GI=35044,HI=new AI,jI=new MI,VI=function(){function e(t,n,r){if((0,s.Z)(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===r,this.usage=GI,this.updateRange={offset:0,count:-1},this.version=0}return(0,o.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new zI),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new MI),t[n++]=a.x,t[n++]=a.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new AI),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new II),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)jI.fromBufferAttribute(this,t),jI.applyMatrix3(e),this.setXY(t,jI.x,jI.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)HI.fromBufferAttribute(this,r),HI.applyMatrix3(e),this.setXYZ(r,HI.x,HI.y,HI.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)HI.x=this.getX(t),HI.y=this.getY(t),HI.z=this.getZ(t),HI.applyMatrix4(e),this.setXYZ(t,HI.x,HI.y,HI.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)HI.x=this.getX(t),HI.y=this.getY(t),HI.z=this.getZ(t),HI.applyNormalMatrix(e),this.setXYZ(t,HI.x,HI.y,HI.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)HI.x=this.getX(t),HI.y=this.getY(t),HI.z=this.getZ(t),HI.transformDirection(e),this.setXYZ(t,HI.x,HI.y,HI.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==GI&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}();VI.prototype.isBufferAttribute=!0;var WI=function(e){l(n,e);var t=v(n);function n(e,r,i){return(0,s.Z)(this,n),t.call(this,new Uint16Array(e),r,i)}return(0,o.Z)(n)}(VI);WI.prototype.isFloat16BufferAttribute=!0;var YI=function(){function e(){(0,s.Z)(this,e),this.pluginCallbacks=[],this.register((function(e){return new xw(e)})),this.register((function(e){return new bw(e)})),this.register((function(e){return new Iw(e)})),this.register((function(e){return new kw(e)})),this.register((function(e){return new Sw(e)})),this.register((function(e){return new ww(e)}))}return(0,o.Z)(e,[{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){"object"===typeof n&&(console.warn("THREE.GLTFExporter: parse() expects options as the fourth argument now."),r=n);for(var i=new Ew,a=[],s=0,o=this.pluginCallbacks.length;s<o;s++)a.push(this.pluginCallbacks[s](i));i.setPlugins(a),i.write(e,t,r).catch(n)}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.parse(e,r,i,t)}))}}]),e}(),qI=0,XI=1,KI=2,QI=3,JI=4,$I=5121,ew=5123,tw=5126,nw=5125,rw=34962,iw=34963,aw=9728,sw=9729,ow=9984,uw=9985,lw=9986,cw=9987,hw=33071,pw=33648,fw=10497,dw={};dw[fu]=aw,dw[du]=ow,dw[vu]=lw,dw[mu]=sw,dw[yu]=uw,dw[gu]=cw,dw[hu]=hw,dw[cu]=fw,dw[pu]=pw;var vw={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"};function mw(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}function yw(e){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(e).buffer;for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);t[n]=i>255?32:i}return t.buffer}function gw(e){return 4*Math.ceil(e/4)}function _w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=gw(e.byteLength);if(n!==e.byteLength){var r=new Uint8Array(n);if(r.set(new Uint8Array(e)),0!==t)for(var i=e.byteLength;i<n;i++)r[i]=t;return r.buffer}return e}var Tw=null,Ew=function(){function e(){(0,s.Z)(this,e),this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}return(0,o.Z)(e,[{key:"setPlugins",value:function(e){this.plugins=e}},{key:"write",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r){var i,a,s,o,u,l,c,h;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},r),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(t),e.next=5,Promise.all(this.pending);case 5:a=(i=this).buffers,s=i.json,r=i.options,o=i.extensionsUsed,u=new Blob(a,{type:"application/octet-stream"}),(l=Object.keys(o)).length>0&&(s.extensionsUsed=l),s.buffers&&s.buffers.length>0&&(s.buffers[0].byteLength=u.size),!0===r.binary?((c=new window.FileReader).readAsArrayBuffer(u),c.onloadend=function(){var e=_w(c.result),t=new DataView(new ArrayBuffer(8));t.setUint32(0,e.byteLength,!0),t.setUint32(4,5130562,!0);var r=_w(yw(JSON.stringify(s)),32),i=new DataView(new ArrayBuffer(8));i.setUint32(0,r.byteLength,!0),i.setUint32(4,1313821514,!0);var a=new ArrayBuffer(12),o=new DataView(a);o.setUint32(0,1179937895,!0),o.setUint32(4,2,!0);var u=12+i.byteLength+r.byteLength+t.byteLength+e.byteLength;o.setUint32(8,u,!0);var l=new Blob([a,i,r,t,e],{type:"application/octet-stream"}),h=new window.FileReader;h.readAsArrayBuffer(l),h.onloadend=function(){n(h.result)}}):s.buffers&&s.buffers.length>0?((h=new window.FileReader).readAsDataURL(u),h.onloadend=function(){var e=h.result;s.buffers[0].uri=e,n(s)}):n(s);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"serializeUserData",value:function(e,t){if(0!==Object.keys(e.userData).length){var n=this.options,r=this.extensionsUsed;try{var i=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&i.gltfExtensions){for(var a in void 0===t.extensions&&(t.extensions={}),i.gltfExtensions)t.extensions[a]=i.gltfExtensions[a],r[a]=!0;delete i.gltfExtensions}Object.keys(i).length>0&&(t.extras=i)}catch(s){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+s.message)}}}},{key:"getUID",value:function(e){return this.uids.has(e)||this.uids.set(e,this.uid++),this.uids.get(e)}},{key:"isNormalizedNormalAttribute",value:function(e){if(this.cache.attributesNormalized.has(e))return!1;for(var t=new Oc,n=0,r=e.count;n<r;n++)if(Math.abs(t.fromBufferAttribute(e,n).length()-1)>5e-4)return!1;return!0}},{key:"createNormalizedNormalAttribute",value:function(e){var t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);for(var n=e.clone(),r=new Oc,i=0,a=n.count;i<a;i++)r.fromBufferAttribute(n,i),0===r.x&&0===r.y&&0===r.z?r.setX(1):r.normalize(),n.setXYZ(i,r.x,r.y,r.z);return t.attributesNormalized.set(e,n),n}},{key:"applyTextureTransform",value:function(e,t){var n=!1,r={};0===t.offset.x&&0===t.offset.y||(r.offset=t.offset.toArray(),n=!0),0!==t.rotation&&(r.rotation=t.rotation,n=!0),1===t.repeat.x&&1===t.repeat.y||(r.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}},{key:"processBuffer",value:function(e){var t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}},{key:"processBufferView",value:function(e,t,n,r,i){var a,s=this.json;s.bufferViews||(s.bufferViews=[]),a=t===$I?1:t===ew?2:4;for(var o=gw(r*e.itemSize*a),u=new DataView(new ArrayBuffer(o)),l=0,c=n;c<n+r;c++)for(var h=0;h<e.itemSize;h++){var p=void 0;e.itemSize>4?p=e.array[c*e.itemSize+h]:0===h?p=e.getX(c):1===h?p=e.getY(c):2===h?p=e.getZ(c):3===h&&(p=e.getW(c)),t===tw?u.setFloat32(l,p,!0):t===nw?u.setUint32(l,p,!0):t===ew?u.setUint16(l,p,!0):t===$I&&u.setUint8(l,p),l+=a}var f={buffer:this.processBuffer(u.buffer),byteOffset:this.byteOffset,byteLength:o};return void 0!==i&&(f.target=i),i===rw&&(f.byteStride=e.itemSize*a),this.byteOffset+=o,s.bufferViews.push(f),{id:s.bufferViews.length-1,byteLength:0}}},{key:"processBufferViewImage",value:function(e){var t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),new Promise((function(r){var i=new window.FileReader;i.readAsArrayBuffer(e),i.onloadend=function(){var e=_w(i.result),a={buffer:t.processBuffer(e),byteOffset:t.byteOffset,byteLength:e.byteLength};t.byteOffset+=e.byteLength,r(n.bufferViews.push(a)-1)}}))}},{key:"processAccessor",value:function(e,t,n,r){var i,a=this.options,s=this.json;if(e.array.constructor===Float32Array)i=tw;else if(e.array.constructor===Uint32Array)i=nw;else if(e.array.constructor===Uint16Array)i=ew;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");i=$I}if(void 0===n&&(n=0),void 0===r&&(r=e.count),a.truncateDrawRange&&void 0!==t&&null===t.index){var o=n+r,u=t.drawRange.count===1/0?e.count:t.drawRange.start+t.drawRange.count;n=Math.max(n,t.drawRange.start),(r=Math.min(o,u)-n)<0&&(r=0)}if(0===r)return null;var l,c=function(e,t,n){for(var r={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)},i=t;i<t+n;i++)for(var a=0;a<e.itemSize;a++){var s=void 0;e.itemSize>4?s=e.array[i*e.itemSize+a]:0===a?s=e.getX(i):1===a?s=e.getY(i):2===a?s=e.getZ(i):3===a&&(s=e.getW(i)),r.min[a]=Math.min(r.min[a],s),r.max[a]=Math.max(r.max[a],s)}return r}(e,n,r);void 0!==t&&(l=e===t.index?iw:rw);var h=this.processBufferView(e,i,n,r,l),p={bufferView:h.id,byteOffset:h.byteOffset,componentType:i,count:r,max:c.max,min:c.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(p.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(p)-1}},{key:"processImage",value:function(e,t,n){var r=this,i=r.cache,a=r.json,s=r.options,o=r.pending;i.images.has(e)||i.images.set(e,{});var u=i.images.get(e),l=t===Nu?"image/png":"image/jpeg",c=l+":flipY/"+n.toString();if(void 0!==u[c])return u[c];a.images||(a.images=[]);var h={mimeType:l};if(s.embedImages){var p=Tw=Tw||document.createElement("canvas");p.width=Math.min(e.width,s.maxTextureSize),p.height=Math.min(e.height,s.maxTextureSize);var f=p.getContext("2d");if(!0===n&&(f.translate(0,p.height),f.scale(1,-1)),"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap)f.drawImage(e,0,0,p.width,p.height);else{t!==Nu&&t!==Ou&&console.error("GLTFExporter: Only RGB and RGBA formats are supported."),(e.width>s.maxTextureSize||e.height>s.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);var d=new Uint8ClampedArray(e.height*e.width*4);if(t===Nu)for(var v=0;v<d.length;v+=4)d[v+0]=e.data[v+0],d[v+1]=e.data[v+1],d[v+2]=e.data[v+2],d[v+3]=e.data[v+3];else for(var m=0,y=0;m<d.length;m+=4,y+=3)d[m+0]=e.data[y+0],d[m+1]=e.data[y+1],d[m+2]=e.data[y+2],d[m+3]=255;f.putImageData(new ImageData(d,e.width,e.height),0,0)}!0===s.binary?o.push(new Promise((function(e){p.toBlob((function(t){r.processBufferViewImage(t).then((function(t){h.bufferView=t,e()}))}),l)}))):h.uri=p.toDataURL(l)}else h.uri=e.src;var g=a.images.push(h)-1;return u[c]=g,g}},{key:"processSampler",value:function(e){var t=this.json;t.samplers||(t.samplers=[]);var n={magFilter:dw[e.magFilter],minFilter:dw[e.minFilter],wrapS:dw[e.wrapS],wrapT:dw[e.wrapT]};return t.samplers.push(n)-1}},{key:"processTexture",value:function(e){var t=this.cache,n=this.json;if(t.textures.has(e))return t.textures.get(e);n.textures||(n.textures=[]);var r={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY)};e.name&&(r.name=e.name),this._invokeAll((function(t){t.writeTexture&&t.writeTexture(e,r)}));var i=n.textures.push(r)-1;return t.textures.set(e,i),i}},{key:"processMaterial",value:function(e){var t=this.cache,n=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);var r={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");var i=e.color.toArray().concat([e.opacity]);if(mw(i,[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=i),e.isMeshStandardMaterial?(r.pbrMetallicRoughness.metallicFactor=e.metalness,r.pbrMetallicRoughness.roughnessFactor=e.roughness):(r.pbrMetallicRoughness.metallicFactor=.5,r.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap)if(e.metalnessMap===e.roughnessMap){var a={index:this.processTexture(e.metalnessMap)};this.applyTextureTransform(a,e.metalnessMap),r.pbrMetallicRoughness.metallicRoughnessTexture=a}else console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.");if(e.map){var s={index:this.processTexture(e.map)};this.applyTextureTransform(s,e.map),r.pbrMetallicRoughness.baseColorTexture=s}if(e.emissive){var o=e.emissive.clone().multiplyScalar(e.emissiveIntensity),u=Math.max(o.r,o.g,o.b);if(u>1&&(o.multiplyScalar(1/u),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),u>0&&(r.emissiveFactor=o.toArray()),e.emissiveMap){var l={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(l,e.emissiveMap),r.emissiveTexture=l}}if(e.normalMap){var c={index:this.processTexture(e.normalMap)};e.normalScale&&1!==e.normalScale.x&&(c.scale=e.normalScale.x),this.applyTextureTransform(c,e.normalMap),r.normalTexture=c}if(e.aoMap){var h={index:this.processTexture(e.aoMap),texCoord:1};1!==e.aoMapIntensity&&(h.strength=e.aoMapIntensity),this.applyTextureTransform(h,e.aoMap),r.occlusionTexture=h}e.transparent?r.alphaMode="BLEND":e.alphaTest>0&&(r.alphaMode="MASK",r.alphaCutoff=e.alphaTest),e.side===go&&(r.doubleSided=!0),""!==e.name&&(r.name=e.name),this.serializeUserData(e,r),this._invokeAll((function(t){t.writeMaterial&&t.writeMaterial(e,r)}));var p=n.materials.push(r)-1;return t.materials.set(e,p),p}},{key:"processMesh",value:function(e){var t=this.cache,n=this.json,r=[e.geometry.uuid];if(Array.isArray(e.material))for(var i=0,a=e.material.length;i<a;i++)r.push(e.material[i].uuid);else r.push(e.material.uuid);var s=r.join(":");if(t.meshes.has(s))return t.meshes.get(s);var o,u=e.geometry;if(o=e.isLineSegments?XI:e.isLineLoop?KI:e.isLine?QI:e.isPoints?qI:e.material.wireframe?XI:JI,!0!==u.isBufferGeometry)throw new Error("THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.");var l={},c={},h=[],p=[],f={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},d=u.getAttribute("normal");void 0===d||this.isNormalizedNormalAttribute(d)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),u.setAttribute("normal",this.createNormalizedNormalAttribute(d)));var v=null;for(var m in u.attributes)if("morph"!==m.substr(0,5)){var y=u.attributes[m];m=f[m]||m.toUpperCase();if(/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(m)||(m="_"+m),t.attributes.has(this.getUID(y)))c[m]=t.attributes.get(this.getUID(y));else{v=null;var g=y.array;"JOINTS_0"!==m||g instanceof Uint16Array||g instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),v=new ip(new Uint16Array(g),y.itemSize,y.normalized));var _=this.processAccessor(v||y,u);null!==_&&(c[m]=_,t.attributes.set(this.getUID(y),_))}}if(void 0!==d&&u.setAttribute("normal",d),0===Object.keys(c).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){var T=[],E=[],x={};if(void 0!==e.morphTargetDictionary)for(var b in e.morphTargetDictionary)x[e.morphTargetDictionary[b]]=b;for(var I=0;I<e.morphTargetInfluences.length;++I){var w={},k=!1;for(var S in u.morphAttributes)if("position"===S||"normal"===S){var R=u.morphAttributes[S][I],C=S.toUpperCase(),D=u.attributes[S];if(t.attributes.has(this.getUID(R)))w[C]=t.attributes.get(this.getUID(R));else{var A=R.clone();if(!u.morphTargetsRelative)for(var O=0,N=R.count;O<N;O++)A.setXYZ(O,R.getX(O)-D.getX(O),R.getY(O)-D.getY(O),R.getZ(O)-D.getZ(O));w[C]=this.processAccessor(A,u),t.attributes.set(this.getUID(D),w[C])}}else k||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),k=!0);p.push(w),T.push(e.morphTargetInfluences[I]),void 0!==e.morphTargetDictionary&&E.push(x[I])}l.weights=T,E.length>0&&(l.extras={},l.extras.targetNames=E)}var M=Array.isArray(e.material);if(M&&0===u.groups.length)return null;for(var P=M?e.material:[e.material],F=M?u.groups:[{materialIndex:0,start:void 0,count:void 0}],L=0,U=F.length;L<U;L++){var Z={mode:o,attributes:c};if(this.serializeUserData(u,Z),p.length>0&&(Z.targets=p),null!==u.index){var B=this.getUID(u.index);void 0===F[L].start&&void 0===F[L].count||(B+=":"+F[L].start+":"+F[L].count),t.attributes.has(B)?Z.indices=t.attributes.get(B):(Z.indices=this.processAccessor(u.index,u,F[L].start,F[L].count),t.attributes.set(B,Z.indices)),null===Z.indices&&delete Z.indices}var z=this.processMaterial(P[F[L].materialIndex]);null!==z&&(Z.material=z),h.push(Z)}l.primitives=h,n.meshes||(n.meshes=[]),this._invokeAll((function(t){t.writeMesh&&t.writeMesh(e,l)}));var G=n.meshes.push(l)-1;return t.meshes.set(s,G),G}},{key:"processCamera",value:function(e){var t=this.json;t.cameras||(t.cameras=[]);var n=e.isOrthographicCamera,r={type:n?"orthographic":"perspective"};return n?r.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:r.perspective={aspectRatio:e.aspect,yfov:mc.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(r.name=e.type),t.cameras.push(r)-1}},{key:"processAnimation",value:function(e,t){var n=this.json,r=this.nodeMap;n.animations||(n.animations=[]);for(var i=(e=YI.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,a=[],s=[],o=0;o<i.length;++o){var u=i[o],l=L_.parseTrackName(u.name),c=L_.findNode(t,l.nodeName),h=vw[l.propertyName];if("bones"===l.objectName&&(c=!0===c.isSkinnedMesh?c.skeleton.getBoneByName(l.objectIndex):void 0),!c||!h)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',u.name),null;var p=u.values.length/u.times.length;h===vw.morphTargetInfluences&&(p/=c.morphTargetInfluences.length);var f=void 0;!0===u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(f="CUBICSPLINE",p/=3):f=u.getInterpolation()===Ol?"STEP":"LINEAR",s.push({input:this.processAccessor(new ip(u.times,1)),output:this.processAccessor(new ip(u.values,p)),interpolation:f}),a.push({sampler:s.length-1,target:{node:r.get(c),path:h}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:s,channels:a}),n.animations.length-1}},{key:"processSkin",value:function(e){var t=this.json,n=this.nodeMap,r=t.nodes[n.get(e)],i=e.skeleton;if(void 0===i)return null;var a=e.skeleton.bones[0];if(void 0===a)return null;for(var s=[],o=new Float32Array(16*i.bones.length),u=new lh,l=0;l<i.bones.length;++l)s.push(n.get(i.bones[l])),u.copy(i.boneInverses[l]),u.multiply(e.bindMatrix).toArray(o,16*l);return void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new ip(o,16)),joints:s,skeleton:n.get(a)}),r.skin=t.skins.length-1}},{key:"processNode",value:function(e){var t=this.json,n=this.options,r=this.nodeMap;t.nodes||(t.nodes=[]);var i={};if(n.trs){var a=e.quaternion.toArray(),s=e.position.toArray(),o=e.scale.toArray();mw(a,[0,0,0,1])||(i.rotation=a),mw(s,[0,0,0])||(i.translation=s),mw(o,[1,1,1])||(i.scale=o)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===mw(e.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(i.matrix=e.matrix.elements);if(""!==e.name&&(i.name=String(e.name)),this.serializeUserData(e,i),e.isMesh||e.isLine||e.isPoints){var u=this.processMesh(e);null!==u&&(i.mesh=u)}else e.isCamera&&(i.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){for(var l=[],c=0,h=e.children.length;c<h;c++){var p=e.children[c];if(p.visible||!1===n.onlyVisible){var f=this.processNode(p);null!==f&&l.push(f)}}l.length>0&&(i.children=l)}this._invokeAll((function(t){t.writeNode&&t.writeNode(e,i)}));var d=t.nodes.push(i)-1;return r.set(e,d),d}},{key:"processScene",value:function(e){var t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);var r={};""!==e.name&&(r.name=e.name),t.scenes.push(r);for(var i=[],a=0,s=e.children.length;a<s;a++){var o=e.children[a];if(o.visible||!1===n.onlyVisible){var u=this.processNode(o);null!==u&&i.push(u)}}i.length>0&&(r.nodes=i),this.serializeUserData(e,r)}},{key:"processObjects",value:function(e){var t=new em;t.name="AuxScene";for(var n=0;n<e.length;n++)t.children.push(e[n]);this.processScene(t)}},{key:"processInput",value:function(e){var t=this.options;e=e instanceof Array?e:[e],this._invokeAll((function(t){t.beforeParse&&t.beforeParse(e)}));for(var n=[],r=0;r<e.length;r++)e[r]instanceof em?this.processScene(e[r]):n.push(e[r]);n.length>0&&this.processObjects(n);for(var i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(var a=0;a<t.animations.length;++a)this.processAnimation(t.animations[a],e[0]);this._invokeAll((function(t){t.afterParse&&t.afterParse(e)}))}},{key:"_invokeAll",value:function(e){for(var t=0,n=this.plugins.length;t<n;t++)e(this.plugins[t])}}]),e}(),xw=function(){function e(t){(0,s.Z)(this,e),this.writer=t,this.name="KHR_lights_punctual"}return(0,o.Z)(e,[{key:"writeNode",value:function(e,t){if(e.isLight)if(e.isDirectionalLight||e.isPointLight||e.isSpotLight){var n=this.writer,r=n.json,i=n.extensionsUsed,a={};e.name&&(a.name=e.name),a.color=e.color.toArray(),a.intensity=e.intensity,e.isDirectionalLight?a.type="directional":e.isPointLight?(a.type="point",e.distance>0&&(a.range=e.distance)):e.isSpotLight&&(a.type="spot",e.distance>0&&(a.range=e.distance),a.spot={},a.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,a.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!e.target||e.target.parent===e&&0===e.target.position.x&&0===e.target.position.y&&-1===e.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),i[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},i[this.name]=!0);var s=r.extensions[this.name].lights;s.push(a),t.extensions=t.extensions||{},t.extensions[this.name]={light:s.length-1}}else console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e)}}]),e}(),bw=function(){function e(t){(0,s.Z)(this,e),this.writer=t,this.name="KHR_materials_unlit"}return(0,o.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshBasicMaterial){var n=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},n[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}}]),e}(),Iw=function(){function e(t){(0,s.Z)(this,e),this.writer=t,this.name="KHR_materials_pbrSpecularGlossiness"}return(0,o.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isGLTFSpecularGlossinessMaterial){var n=this.writer,r=n.extensionsUsed,i={};t.pbrMetallicRoughness.baseColorFactor&&(i.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);var a=[1,1,1];if(e.specular.toArray(a,0),i.specularFactor=a,i.glossinessFactor=e.glossiness,t.pbrMetallicRoughness.baseColorTexture&&(i.diffuseTexture=t.pbrMetallicRoughness.baseColorTexture),e.specularMap){var s={index:n.processTexture(e.specularMap)};n.applyTextureTransform(s,e.specularMap),i.specularGlossinessTexture=s}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),ww=function(){function e(t){(0,s.Z)(this,e),this.writer=t,this.name="KHR_materials_clearcoat"}return(0,o.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial){var n=this.writer,r=n.extensionsUsed,i={};if(i.clearcoatFactor=e.clearcoat,e.clearcoatMap){var a={index:n.processTexture(e.clearcoatMap)};n.applyTextureTransform(a,e.clearcoatMap),i.clearcoatTexture=a}if(i.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){var s={index:n.processTexture(e.clearcoatRoughnessMap)};n.applyTextureTransform(s,e.clearcoatRoughnessMap),i.clearcoatRoughnessTexture=s}if(e.clearcoatNormalMap){var o={index:n.processTexture(e.clearcoatNormalMap)};n.applyTextureTransform(o,e.clearcoatNormalMap),i.clearcoatNormalTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),kw=function(){function e(t){(0,s.Z)(this,e),this.writer=t,this.name="KHR_materials_transmission"}return(0,o.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.transmission){var n=this.writer,r=n.extensionsUsed,i={};if(i.transmissionFactor=e.transmission,e.transmissionMap){var a={index:n.processTexture(e.transmissionMap)};n.applyTextureTransform(a,e.transmissionMap),i.transmissionTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),Sw=function(){function e(t){(0,s.Z)(this,e),this.writer=t,this.name="KHR_materials_volume"}return(0,o.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.transmission){var n=this.writer,r=n.extensionsUsed,i={};if(i.thicknessFactor=e.thickness,e.thicknessMap){var a={index:n.processTexture(e.thicknessMap)};n.applyTextureTransform(a,e.thicknessMap),i.thicknessTexture=a}i.attenuationDistance=e.attenuationDistance,i.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}();YI.Utils={insertKeyframe:function(e,t){var n,r=.001,i=e.getValueSize(),a=new e.TimeBufferType(e.times.length+1),s=new e.ValueBufferType(e.values.length+i),o=e.createInterpolant(new e.ValueBufferType(i));if(0===e.times.length){a[0]=t;for(var u=0;u<i;u++)s[u]=0;n=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<r)return 0;a[0]=t,a.set(e.times,1),s.set(o.evaluate(t),0),s.set(e.values,i),n=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<r)return e.times.length-1;a[a.length-1]=t,a.set(e.times,0),s.set(e.values,0),s.set(o.evaluate(t),e.values.length),n=a.length-1}else for(var l=0;l<e.times.length;l++){if(Math.abs(e.times[l]-t)<r)return l;if(e.times[l]<t&&e.times[l+1]>t){a.set(e.times.slice(0,l+1),0),a[l+1]=t,a.set(e.times.slice(l+1),l+2),s.set(e.values.slice(0,(l+1)*i),0),s.set(o.evaluate(t),(l+1)*i),s.set(e.values.slice((l+1)*i),(l+2)*i),n=l+1;break}}return e.times=a,e.values=s,n},mergeMorphTargetTracks:function(e,t){for(var n=[],r={},i=e.tracks,a=0;a<i.length;++a){var s=i[a],o=L_.parseTrackName(s.name),u=L_.findNode(t,o.nodeName);if("morphTargetInfluences"===o.propertyName&&void 0!==o.propertyIndex){if(s.createInterpolant!==s.InterpolantFactoryMethodDiscrete&&s.createInterpolant!==s.InterpolantFactoryMethodLinear){if(s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),(s=s.clone()).setInterpolation(Nl)}var l=u.morphTargetInfluences.length,c=u.morphTargetDictionary[o.propertyIndex];if(void 0===c)throw new Error("THREE.GLTFExporter: Morph target name not found: "+o.propertyIndex);var h=void 0;if(void 0!==r[u.uuid]){var p=s.createInterpolant(new s.ValueBufferType(1));h=r[u.uuid];for(var f=0;f<h.times.length;f++)h.values[f*l+c]=p.evaluate(h.times[f]);for(var d=0;d<s.times.length;d++){var v=this.insertKeyframe(h,s.times[d]);h.values[v*l+c]=s.values[d]}}else{for(var m=new((h=s.clone()).ValueBufferType)(l*h.times.length),y=0;y<h.times.length;y++)m[y*l+c]=h.values[y];h.name=(o.nodeName||"")+".morphTargetInfluences",h.values=m,r[u.uuid]=h,n.push(h)}}else n.push(s)}return e.tracks=n,e}};var Rw=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;return(0,s.Z)(this,n),(a=t.call(this,e,r,i)).elementCount=0,a.exportOptions={trs:!1,onlyVisible:!1,truncateDrawRange:!0,binary:!0,maxTextureSize:0},a.exporter=new YI,a.material=n.newMaterialArray(r),a.geometry=a.newFragmentGeometry(e),a}return(0,o.Z)(n,[{key:"export",value:function(){var e=this,t=this;return new Promise((function(n){e.exporter.parse(t,(function(e){return n(e)}),(function(e){return console.log(e)}),e.exportOptions)}))}},{key:"newFragmentGeometry",value:function(e){if(!e.index)throw new Error("The geometry must be indexed!");if(!e.attributes.blockID){var t=e.attributes.position.count,r=new Uint16Array(t);r.fill(this.elementCount++),e.attributes.blockID=new VI(r,1)}var i=e.index.count;return n.initializeGroups(e,i),e}}],[{key:"initializeGroups",value:function(e,t){e.groups.length||e.groups.push({start:0,count:t,materialIndex:0})}},{key:"newMaterialArray",value:function(e){return Array.isArray(e)||(e=[e]),e}}]),n}(Fm),Cw=function(){function e(t){(0,s.Z)(this,e),this.indices=e.initializeBlocks(t),this.generateGeometryIndexMap(t)}return(0,o.Z)(e,[{key:"generateGeometryIndexMap",value:function(e){var t,n=e.mesh.geometry,r=b(n.groups);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.fillBlocksMapWithGroupInfo(i,n)}}catch(a){r.e(a)}finally{r.f()}}},{key:"getSubsetID",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DEFAULT",r=e,i=t?t.uuid:"DEFAULT";return"".concat(r," - ").concat(i," - ").concat(n)}},{key:"dispose",value:function(){this.indices=null}},{key:"fillBlocksMapWithGroupInfo",value:function(e,t){for(var n=-1,r=e.materialIndex,i=e.start,a=i+e.count-1,s=-1,o=-1,u=i;u<=a;u++){var l=t.index.array[u],c=t.attributes.blockID.array[l];if(-1===n&&(n=c,s=u),u===a){this.getMaterialStore(c,r).push(s,a);break}if(n!==c)o=u-1,this.getMaterialStore(n,r).push(s,o),n=c,s=u}}},{key:"getMaterialStore",value:function(e,t){void 0===this.indices.map.get(e)&&this.indices.map.set(e,{});var n=this.indices.map.get(e);if(void 0===n)throw new Error("Geometry map generation error");return void 0===n[t]&&(n[t]=[]),n[t]}}],[{key:"initializeBlocks",value:function(e){var t=e.mesh.geometry;return{indexCache:t.index.array.slice(0,t.index.array.length),map:new Map}}}]),e}(),Dw=function(){function e(t){(0,s.Z)(this,e),this.fragment=t,this.tempIndex=[],this.blocksMap=new Cw(t),this.initializeSubsetGroups(t);var n=t.mesh.geometry.attributes.blockID.array;this.visibleIds=new Set(n),this.ids=new Set(n),this.add(Array.from(this.ids),!0)}return(0,o.Z)(e,[{key:"count",get:function(){return this.ids.size}},{key:"reset",value:function(){this.add(Array.from(this.ids),!0)}},{key:"add",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.filterIndices(n);var r=e.filter((function(e){return!t.visibleIds.has(e)}));this.constructSubsetByMaterial(e),r.forEach((function(e){return t.visibleIds.add(e)})),this.fragment.mesh.geometry.setIndex(this.tempIndex),this.tempIndex.length=0}},{key:"remove",value:function(e){var t=this;e.forEach((function(e){return t.visibleIds.has(e)&&t.visibleIds.delete(e)}));var n=Array.from(this.visibleIds);this.add(n,!0)}},{key:"dispose",value:function(){this.blocksMap.dispose(),this.tempIndex=[],this.visibleIds.clear(),this.visibleIds=null,this.ids.clear(),this.ids=null}},{key:"initializeSubsetGroups",value:function(e){var t=e.mesh.geometry;t.groups=JSON.parse(JSON.stringify(t.groups)),this.resetGroups(t)}},{key:"filterIndices",value:function(e){var t=this.fragment.mesh.geometry;e?(t.setIndex([]),this.resetGroups(t)):this.tempIndex=Array.from(t.index.array)}},{key:"constructSubsetByMaterial",value:function(e){for(var t=this.fragment.mesh.geometry.groups.length,n={count:0},r=0;r<t;r++)this.insertNewIndices(e,r,n)}},{key:"insertNewIndices",value:function(e,t,n){var r=this.getAllIndicesOfGroup(e,t);this.insertIndicesAtGroup(r,t,n)}},{key:"insertIndicesAtGroup",value:function(e,t,n){var r=this.getCurrentGroup(t);r.start+=n.count;var i=r.start+r.count;if(n.count+=e.length,e.length>0){var a=i,s=this.tempIndex.slice(0,a),o=this.tempIndex.slice(a);this.tempIndex=Array.prototype.concat.apply([],[s,e,o]),r.count+=e.length}}},{key:"getCurrentGroup",value:function(e){return this.fragment.mesh.geometry.groups[e]}},{key:"resetGroups",value:function(e){e.groups.forEach((function(e){e.start=0,e.count=0}))}},{key:"getAllIndicesOfGroup",value:function(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=[],a=b(e);try{for(a.s();!(n=a.n()).done;){var s=n.value,o=this.blocksMap.indices.map.get(s);if(o){var u=o[t];u&&this.getIndexChunk(u,i,t,r)}}}catch(l){a.e(l)}finally{a.f()}return i}},{key:"getIndexChunk",value:function(e,t,n,r){for(var i=e.length/2,a=0;a<i;a++)for(var s=2*a,o=e[s],u=e[s+1],l=o;l<=u;l++)r?t.push(this.blocksMap.indices.indexCache[l]):(t[n]||(t[n]=[]),t[n].push(this.blocksMap.indices.indexCache[l]))}}]),e}(),Aw=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,null,[{key:"apply",value:function(t){e.initialized||(vp.prototype.computeBoundsTree=OE,vp.prototype.disposeBoundsTree=NE,Np.prototype.raycast=AE,e.initialized=!0),t.boundsTree||t.computeBoundsTree()}},{key:"dispose",value:function(e){e.disposeBoundsTree()}}]),e}();Aw.initialized=!1;var Ow=function(){function e(t,n,r){(0,s.Z)(this,e),this.fragments={},this.items=[],this.hiddenInstances={},this.mesh=new Rw(t,n,r),this.id=this.mesh.uuid,this.capacity=r,this.blocks=new Dw(this),Aw.apply(t)}return(0,o.Z)(e,[{key:"dispose",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.items=null,e&&(this.mesh.material.forEach((function(e){return e.dispose()})),Aw.dispose(this.mesh.geometry),this.mesh.geometry.dispose()),this.mesh.removeFromParent(),this.mesh.dispose(),this.mesh=null,this.disposeNestedFragments()}},{key:"getItemID",value:function(e,t){var n=this.getItemIndex(e,t);return this.items[n]}},{key:"getInstanceAndBlockID",value:function(e){var t=this.items.indexOf(e);return{instanceID:this.getInstanceIDFromIndex(t),blockID:t%this.blocks.count}}},{key:"getVertexBlockID",value:function(e,t){return e.attributes.blockID.array[t]}},{key:"getItemData",value:function(e){var t=this.items.indexOf(e);return{instanceID:Math.ceil(t/this.blocks.count),blockID:t%this.blocks.count}}},{key:"getInstance",value:function(e,t){return this.mesh.getMatrixAt(e,t)}},{key:"setInstance",value:function(e,t){this.checkIfInstanceExist(e),this.mesh.setMatrixAt(e,t.transform),this.mesh.instanceMatrix.needsUpdate=!0,t.ids&&this.saveItemsInMap(t.ids,e)}},{key:"addInstances",value:function(e){this.resizeCapacityIfNeeded(e.length);var t=this.mesh.count;this.mesh.count+=e.length;for(var n=0;n<e.length;n++)this.setInstance(t+n,e[n])}},{key:"removeInstances",value:function(e){this.mesh.count<=1?this.clear():(this.deleteAndRearrangeInstances(e),this.mesh.count-=e.length,this.mesh.instanceMatrix.needsUpdate=!0)}},{key:"clear",value:function(){this.mesh.clear(),this.mesh.count=0,this.items=[]}},{key:"addFragment",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mesh.material,r=this.initializeGeometry();n===this.mesh.material&&this.copyGroups(r);var i=new e(r,n,this.capacity);return i.mesh.applyMatrix4(this.mesh.matrix),i.mesh.updateMatrix(),this.fragments[t]=i,this.fragments[t]}},{key:"removeFragment",value:function(e){var t=this.fragments[e];t&&(t.dispose(!1),delete this.fragments[e])}},{key:"resetVisibility",value:function(){if(this.blocks.count>1)this.blocks.reset();else{var e=Object.keys(this.hiddenInstances);this.makeInstancesVisible(e),this.hiddenInstances={}}}},{key:"setVisibility",value:function(e,t){this.blocks.count>1?(this.toggleBlockVisibility(t,e),this.mesh.geometry.disposeBoundsTree(),Aw.apply(this.mesh.geometry)):this.toggleInstanceVisibility(t,e)}},{key:"resize",value:function(e){var t,n=this.createFragmentMeshWithNewSize(e);this.capacity=e;var r=this.mesh;null===(t=r.parent)||void 0===t||t.add(n),r.removeFromParent(),this.mesh=n,r.dispose()}},{key:"export",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,n,r,i,a;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mesh.export();case 2:return t=e.sent,n=new File([new Blob([t])],"".concat(this.id,".glb")),r={matrices:Array.from(this.mesh.instanceMatrix.array),ids:this.items,id:this.id},i=JSON.stringify(r),a=new File([new Blob([i])],"".concat(this.id,".json")),e.abrupt("return",{geometry:n,data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"copyGroups",value:function(e){e.groups=[];var t,n=b(this.mesh.geometry.groups);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.groups.push(ot({},r))}}catch(i){n.e(i)}finally{n.f()}}},{key:"initializeGeometry",value:function(){var e=new vp;return e.setAttribute("position",this.mesh.geometry.attributes.position),e.setAttribute("normal",this.mesh.geometry.attributes.normal),e.setAttribute("blockID",this.mesh.geometry.attributes.blockID),e.setIndex(Array.from(this.mesh.geometry.index.array)),e}},{key:"saveItemsInMap",value:function(e,t){this.checkBlockNumberValid(e);var n,r=0,i=b(e);try{for(i.s();!(n=i.n()).done;){var a=n.value,s=this.getItemIndex(t,r);this.items[s]=a,r++}}catch(o){i.e(o)}finally{i.f()}}},{key:"resizeCapacityIfNeeded",value:function(e){var t=e+this.mesh.count;t>this.capacity&&this.resize(t)}},{key:"createFragmentMeshWithNewSize",value:function(e){var t=new Rw(this.mesh.geometry,this.mesh.material,e);return t.count=this.mesh.count,t}},{key:"disposeNestedFragments",value:function(){for(var e=Object.values(this.fragments),t=0;t<e.length;t++)e[t].dispose();this.fragments={}}},{key:"checkBlockNumberValid",value:function(e){if(e.length>this.blocks.count)throw new Error("You passed more items (".concat(e.length,") than blocks in this instance (").concat(this.blocks.count,")"))}},{key:"checkIfInstanceExist",value:function(e){if(e>this.mesh.count)throw new Error("The given index (".concat(e,") exceeds the instances in this fragment (").concat(this.mesh.count,")"))}},{key:"deleteAndRearrangeInstances",value:function(e){var t,n=[],r=b(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=this.deleteAndRearrange(i);a&&n.push(a)}}catch(l){r.e(l)}finally{r.f()}var s,o=b(e);try{for(o.s();!(s=o.n()).done;){var u=s.value;delete this.hiddenInstances[u]}}catch(l){o.e(l)}finally{o.f()}return n}},{key:"deleteAndRearrange",value:function(e){var t=this.items.indexOf(e);if(-1===t)return null;this.mesh.count--;var n=t===this.mesh.count,r=this.getInstanceIDFromIndex(t),i=new lh,a=new lh;if(this.mesh.getMatrixAt(r,a),n)return this.items.pop(),{ids:[e],transform:a};var s=this.mesh.count;return this.items[t]=this.items[s],this.items.pop(),this.mesh.getMatrixAt(s,i),this.mesh.setMatrixAt(r,i),this.mesh.instanceMatrix.needsUpdate=!0,{ids:[e],transform:a}}},{key:"getItemIndex",value:function(e,t){return e*this.blocks.count+t}},{key:"getInstanceIDFromIndex",value:function(e){return Math.trunc(e/this.blocks.count)}},{key:"toggleInstanceVisibility",value:function(e,t){e?this.makeInstancesVisible(t):this.makeInstancesInvisible(t)}},{key:"makeInstancesInvisible",value:function(e){e=this.filterHiddenItems(e,!1);var t,n=b(this.deleteAndRearrangeInstances(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;r.ids&&(this.hiddenInstances[r.ids[0]]=r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"makeInstancesVisible",value:function(e){var t,n=[],r=b(e=this.filterHiddenItems(e,!0));try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(this.hiddenInstances[i]),delete this.hiddenInstances[i]}}catch(a){r.e(a)}finally{r.f()}this.addInstances(n)}},{key:"filterHiddenItems",value:function(e,t){var n=Object.keys(this.hiddenInstances);return e.filter((function(e){return t?n.includes(e):!n.includes(e)}))}},{key:"toggleBlockVisibility",value:function(e,t){var n=this,r=t.map((function(e){return n.getInstanceAndBlockID(e).blockID}));e?this.blocks.add(r,!1):this.blocks.remove(r)}}]),e}();function Nw(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),a={},s={},o=e[0].morphTargetsRelative,u=new vp,l=0,c=0;c<e.length;++c){var h=e[c],p=0;if(n!==(null!==h.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(var f in h.attributes){if(!r.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;void 0===a[f]&&(a[f]=[]),a[f].push(h.attributes[f]),p++}if(p!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(o!==h.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(var d in h.morphAttributes){if(!i.has(d))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===s[d]&&(s[d]=[]),s[d].push(h.morphAttributes[d])}if(u.userData.mergedUserData=u.userData.mergedUserData||[],u.userData.mergedUserData.push(h.userData),t){var v=void 0;if(n)v=h.index.count;else{if(void 0===h.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;v=h.attributes.position.count}u.addGroup(l,v,c),l+=v}}if(n){for(var m=0,y=[],g=0;g<e.length;++g){for(var _=e[g].index,T=0;T<_.count;++T)y.push(_.getX(T)+m);m+=e[g].attributes.position.count}u.setIndex(y)}for(var E in a){var x=Mw(a[E]);if(!x)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+E+" attribute."),null;u.setAttribute(E,x)}for(var b in s){var I=s[b][0].length;if(0===I)break;u.morphAttributes=u.morphAttributes||{},u.morphAttributes[b]=[];for(var w=0;w<I;++w){for(var k=[],S=0;S<s[b].length;++S)k.push(s[b][S][w]);var R=Mw(k);if(!R)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+b+" morphAttribute."),null;u.morphAttributes[b].push(R)}}return u}function Mw(e){for(var t,n,r,i=0,a=0;a<e.length;++a){var s=e[a];if(s.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===t&&(t=s.array.constructor),t!==s.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=s.itemSize),n!==s.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===r&&(r=s.normalized),r!==s.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=s.array.length}for(var o=new t(i),u=0,l=0;l<e.length;++l)o.set(e[l].array,u),u+=e[l].array.length;return new ip(o,n,r)}var Pw=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,null,[{key:"merge",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],i=[],a=b(e);try{for(a.s();!(t=a.n()).done;){var s=t.value,o=this.mergeGeomsOfSameMaterial(s,n);r.push(o),i.push(o.index.count)}}catch(l){a.e(l)}finally{a.f()}var u=Nw(r);return this.setupMaterialGroups(i,u),this.cleanUp(r),u}},{key:"mergeGltfMeshes",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new vp,r=t[0].geometry.attributes,this.getMeshesAttributes(n,r),this.getMeshesIndices(n,t),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMeshesAttributes",value:function(e,t){e.setAttribute("blockID",t._blockid),e.setAttribute("position",t.position),e.setAttribute("normal",t.normal),e.groups=[]}},{key:"getMeshesIndices",value:function(e,t){var n,r={index:0,material:0},i=[],a=b(t);try{for(a.s();!(n=a.n()).done;){var s=n.value,o=s.geometry.index;this.getIndicesOfMesh(o,i),this.getMeshGroup(e,r,o),this.cleanUpMesh(s)}}catch(u){a.e(u)}finally{a.f()}e.setIndex(i)}},{key:"getMeshGroup",value:function(e,t,n){e.groups.push({start:t.index,count:n.count,materialIndex:t.material++}),t.index+=n.count}},{key:"cleanUpMesh",value:function(e){e.geometry.setIndex([]),e.geometry.attributes={},e.geometry.dispose()}},{key:"getIndicesOfMesh",value:function(e,t){var n,r=b(e.array);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.push(i)}}catch(a){r.e(a)}finally{r.f()}}},{key:"cleanUp",value:function(e){e.forEach((function(e){return e.dispose()})),e.length=0}},{key:"setupMaterialGroups",value:function(e,t){var n,r=0,i=0,a=b(e);try{for(a.s();!(n=a.n()).done;){var s=n.value,o={start:r,count:s,materialIndex:i++};t.groups.push(o),r+=s}}catch(u){a.e(u)}finally{a.f()}}},{key:"mergeGeomsOfSameMaterial",value:function(e,t){this.checkAllGeometriesAreIndexed(e),t&&this.splitByBlocks(e);var n=Nw(e);return this.cleanUp(e),n}},{key:"splitByBlocks",value:function(e){var t,n=0,r=b(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.attributes.position.count,s=new Uint8Array(a).fill(n++);i.setAttribute("blockID",new ip(s,1))}}catch(o){r.e(o)}finally{r.f()}}},{key:"checkAllGeometriesAreIndexed",value:function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){if(!t.value.index)throw new Error("All geometries must be indexed!")}}catch(r){n.e(r)}finally{n.f()}}}]),e}(),Fw=function(){function e(){(0,s.Z)(this,e),this.loader=new wb}return(0,o.Z)(e,[{key:"load",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s,o,u,l,c;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loader.loadAsync(t);case 2:return r=e.sent,i=r.scene.children[0],a=!!i.children.length,s=a?i.children:[r.scene.children[0]],e.next=8,Pw.mergeGltfMeshes(s);case 8:return o=e.sent,u=this.getMaterials(s),e.next=12,fetch(n);case 12:return l=e.sent,e.next=15,l.json();case 15:return c=e.sent,e.abrupt("return",this.getFragment(o,u,c));case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getFragment",value:function(e,t,n){var r=this.getInstances(n),i=new Ow(e,t,r.length);n.id&&(i.id=n.id,i.mesh.uuid=n.id);for(var a=0;a<r.length;a++)i.setInstance(a,r[a]);return i}},{key:"getInstances",value:function(e){for(var t=0,n=[],r=16===e.matrices.length?e.ids.length:1,i=0;i<e.matrices.length-15;i+=16){for(var a=[],s=0;s<16;s++)a.push(e.matrices[s+i]);var o=(new lh).fromArray(a),u=t*r,l=e.ids.slice(u,u+r);t++,n.push({ids:l,transform:o})}return n}},{key:"getMaterials",value:function(e){return e.map((function(e){var t=e.material;return new Eg({color:t.color,opacity:t.opacity,transparent:t.transparent})}))}}]),e}(),Lw=function(){function e(t,n){(0,s.Z)(this,e),this.components=t,this.fragments=n,this.active=!1,this.highlightMats={},this.tempMatrix=new lh,this.selection={}}return(0,o.Z)(e,[{key:"dispose",value:function(){for(var e in this.highlightMats){var t,n=b(this.highlightMats[e]||[]);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}}this.highlightMats={}}},{key:"add",value:function(e,t){if(this.highlightMats[e])throw new Error("A highlight with this name already exists.");this.highlightMats[e]=t,this.selection[e]={},this.update()}},{key:"update",value:function(){for(var e in this.fragments.list){var t=this.fragments.list[e];this.addHighlightToFragment(t)}}},{key:"highlight",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.active)return null;this.checkSelection(e);var r=this.fragments.meshes,i=this.components.raycaster.castRay(r);if(!i)return this.clear(e),null;var a=i.object,s=a.geometry,o=null===(t=i.face)||void 0===t?void 0:t.a,u=i.instanceId;if(!s||!o||void 0===u)return null;n&&this.clear(e),this.selection[e][a.uuid]||(this.selection[e][a.uuid]=new Set);var l=this.fragments.list[a.uuid],c=l.getVertexBlockID(s,o),h=l.getItemID(u,c);return this.selection[e][a.uuid].add(h),this.updateFragmentHighlight(e,a.uuid),{id:h,fragment:l}}},{key:"highlightByID",value:function(e,t){(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.clear(e);var n=this.selection[e];for(var r in t){n[r]||(n[r]=new Set);var i,a=b(t[r]);try{for(a.s();!(i=a.n()).done;){var s=i.value;n[r].add(s)}}catch(o){a.e(o)}finally{a.f()}this.updateFragmentHighlight(e,r)}}},{key:"clear",value:function(e){var t,n=b(e?[e]:Object.keys(this.selection));try{for(n.s();!(t=n.n()).done;){var r=t.value;this.clearStyle(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"clearStyle",value:function(e){for(var t in this.selection[e]){var n=this.fragments.list[t];if(n){var r=n.fragments[e];r&&r.mesh.removeFromParent()}}this.selection[e]={}}},{key:"updateFragmentHighlight",value:function(e,t){var n=this.selection[e][t],r=this.fragments.list[t];if(r){var i=r.fragments[e];if(i){var a=this.components.scene.get(),s=i.blocks.count>1;if(a.add(i.mesh),s){var o,u=[],l=b(n);try{for(l.s();!(o=l.n()).done;){var c=o.value,h=r.getInstanceAndBlockID(c).blockID;r.blocks.visibleIds.has(h)&&u.push(h)}}catch(y){l.e(y)}finally{l.f()}r.getInstance(0,this.tempMatrix),i.setInstance(0,{ids:Array.from(n),transform:this.tempMatrix}),i.blocks.add(u,!0)}else{var p,f=0,d=b(n);try{for(d.s();!(p=d.n()).done;){var v=p.value;i.mesh.count=f+1;var m=r.getInstanceAndBlockID(v).instanceID;r.getInstance(m,this.tempMatrix),i.setInstance(f,{ids:[v],transform:this.tempMatrix}),f++}}catch(y){d.e(y)}finally{d.f()}}}}}},{key:"checkSelection",value:function(e){if(!this.selection[e])throw new Error("Selection ".concat(e," does not exist."))}},{key:"addHighlightToFragment",value:function(e){for(var t in this.highlightMats)if(!e.fragments[t]){var n=this.highlightMats[t];e.addFragment(t,n),e.fragments[t].mesh.renderOrder=1}}}]),e}(),Uw=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:512,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:512,u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];(0,s.Z)(this,e),this.components=t,this.fragment=n,this.updateInterval=i,this.rtWidth=a,this.rtHeight=o,this.autoUpdate=u,this.enabled=!0,this.viewUpdated=new ME,this.needsUpdate=!1,this.fragmentColorMap=new Map,this.renderDebugFrame=!1,this.visibleFragments=[],this.meshes=new Map,this._previouslyVisibleMeshes=new Set,this._transparentMat=new tp({transparent:!0,opacity:0}),this._disposer=new Nx,this._colors={r:0,g:0,b:0,i:0},this._scene=new em,this.updateVisibility=function(e){if(r.enabled&&(r.needsUpdate||e)){var t=r.components.camera.get();t.updateMatrix(),r.renderer.setSize(r.rtWidth,r.rtHeight),r.renderer.setRenderTarget(r.renderTarget),r.renderer.render(r._scene,t),r.renderer.readRenderTargetPixels(r.renderTarget,0,0,r.rtWidth,r.rtHeight,r._buffer),r.renderer.setRenderTarget(null),r.renderDebugFrame&&r.renderer.render(r._scene,t),r.worker.postMessage({buffer:r._buffer}),r.needsUpdate=!1,r.viewUpdated.trigger()}},this.handleWorkerMessage=function(e){var t=e.data.colors,n=new Set(r._previouslyVisibleMeshes);r._previouslyVisibleMeshes.clear(),r.visibleFragments=[];var i,a=b(t.values());try{for(a.s();!(i=a.n()).done;){var s=i.value,o=r.fragmentColorMap.get(s);o&&(r.visibleFragments.push(o),o.mesh.visible=!0,r._previouslyVisibleMeshes.add(o.id),n.delete(o.id),r.cullEdges(o,!0))}}catch(p){a.e(p)}finally{a.f()}var u,l=b(n);try{for(l.s();!(u=l.n()).done;){var c=u.value,h=r.fragment.list[c];h.mesh.visible=!1,r.cullEdges(h,!1)}}catch(p){l.e(p)}finally{l.f()}},this.renderer=new Kv;var l=this.components.renderer.clippingPlanes;this.renderer.clippingPlanes=l,this.renderTarget=new Rc(a,o),this.bufferSize=a*o*4,this._buffer=new Uint8Array(this.bufferSize),this.materialCache=new Map;var c=new Blob(['\n      addEventListener("message", (event) => {\n        const { buffer } = event.data;\n        const colors = new Set();\n        for (let i = 0; i < buffer.length; i += 4) {\n            const r = buffer[i];\n            const g = buffer[i + 1];\n            const b = buffer[i + 2];\n            const code = "" + r + "-" + g + "-" + b;\n            colors.add(code);\n        }\n        postMessage({ colors });\n      });\n    '],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(c)),this.worker.addEventListener("message",this.handleWorkerMessage),u&&window.setInterval(this.updateVisibility,i)}return(0,o.Z)(e,[{key:"dispose",value:function(){for(var e in this.enabled=!1,this._scene.children.length=0,this.viewUpdated.reset(),this.worker.terminate(),this.renderer.dispose(),this.renderTarget.dispose(),this._buffer=null,this._transparentMat.dispose(),this.viewUpdated.reset(),this.fragmentColorMap.clear(),this.visibleFragments=[],this.materialCache){var t=this.materialCache.get(e);t&&t.dispose()}for(var n in this.meshes){var r=this.meshes.get(n);r&&this._disposer.dispose(r)}this.meshes.clear()}},{key:"add",value:function(e){if(this.enabled){var t,n=e.mesh,r=n.geometry,i=n.material,a=this.getNextColor(),s=a.r,o=a.g,u=a.b,l=a.code,c=this.getMaterial(s,o,u);if(Array.isArray(i)){var h,p=!0,f=[],d=b(i);try{for(d.s();!(h=d.n()).done;){var v=h.value;this.isTransparent(v)?f.push(this._transparentMat):(p=!1,f.push(c))}}catch(y){d.e(y)}finally{d.f()}if(p)return void c.dispose();t=f}else{if(this.isTransparent(i))return void c.dispose();t=c}this.fragmentColorMap.set(l,e);var m=new Fm(r,t,e.capacity);e.mesh.visible=!1,m.instanceMatrix=e.mesh.instanceMatrix,m.applyMatrix4(e.mesh.matrix),m.updateMatrix(),this._scene.add(m),this.meshes.set(e.id,m)}}},{key:"getMaterial",value:function(e,t,n){var r="rgb(".concat(e,", ").concat(t,", ").concat(n,")"),i=this.materialCache.get(r),a=this.components.renderer.clippingPlanes;return i||(i=new tp({color:new ep(r),clippingPlanes:a}),this.materialCache.set(r,i)),i}},{key:"isTransparent",value:function(e){return e.transparent&&e.opacity<1}},{key:"getNextColor",value:function(){return 0===this._colors.i&&(this._colors.b++,256===this._colors.b&&(this._colors.b=0,this._colors.i=1)),1===this._colors.i&&(this._colors.g++,this._colors.i=0,256===this._colors.g&&(this._colors.g=0,this._colors.i=2)),2===this._colors.i&&(this._colors.r++,this._colors.i=1,256===this._colors.r&&(this._colors.r=0,this._colors.i=0)),{r:this._colors.r,g:this._colors.g,b:this._colors.b,code:"".concat(this._colors.r,"-").concat(this._colors.g,"-").concat(this._colors.b)}}},{key:"cullEdges",value:function(e,t){t&&this.updateEdges(e),this.fragment.edges.edgesList[e.id]&&(this.fragment.edges.edgesList[e.id].visible=t)}},{key:"updateEdges",value:function(e){this.fragment.edges.edgesToUpdate.has(e.id)&&(this.fragment.edges.generate(e),this.fragment.edges.edgesToUpdate.delete(e.id))}}]),e}(),Zw=function(){function e(t){(0,s.Z)(this,e),this.groupSystems={category:{},floor:{}},this._fragments=t}return(0,o.Z)(e,[{key:"dispose",value:function(){this.groupSystems={}}},{key:"add",value:function(e,t){for(var n in t){this.groupSystems[n]||(this.groupSystems[n]={});var r=this.groupSystems[n],i=t[n];for(var a in i)r[a]||(r[a]={}),r[a][e]=i[a]}}},{key:"setVisibility",value:function(e,t,n){var r=this.groupSystems[e][t];for(var i in r){var a=this._fragments.list[i],s=r[i];a.setVisibility(s,n)}}},{key:"remove",value:function(e){for(var t in this.groupSystems){var n=this.groupSystems[t];for(var r in n){delete n[r][e]}}}},{key:"get",value:function(e){var t=Object.keys(e).length,n={};for(var r in e){var i=e[r],a=this.groupSystems[r][i];if(a)for(var s in a){n[s]||(n[s]={});var o,u=b(a[s]);try{for(u.s();!(o=u.n()).done;){var l=o.value;n[s][l]?n[s][l]++:n[s][l]=1}}catch(d){u.e(d)}finally{u.f()}}}var c={};for(var h in n){var p=n[h];for(var f in p){p[f]===t&&(c[h]||(c[h]=[]),c[h].push(f))}}return c}}]),e}(),Bw=function(){function e(t){(0,s.Z)(this,e),this.edgesList={},this.edgesToUpdate=new Set,this.threshold=80,this._mat4=new lh,this._dummy=new Mh,this._pos=[],this._rot=[],this._scl=[],this.lineMat=new Lm({color:5592405,onBeforeCompile:function(e){e.vertexShader="\n    attribute vec3 instT;\n    attribute vec4 instR;\n    attribute vec3 instS;\n    \n    // http://barradeau.com/blog/?p=1109\n    vec3 trs( inout vec3 position, vec3 T, vec4 R, vec3 S ) {\n        position *= S;\n        position += 2.0 * cross( R.xyz, cross( R.xyz, position ) + R.w * position );\n        position += T;\n        return position;\n    }\n    ".concat(e.vertexShader,"\n").replace("#include <begin_vertex>","#include <begin_vertex>\n      transformed = trs(transformed, instT, instR, instS);\n")}}),this.disposer=new Nx,this._components=t}return(0,o.Z)(e,[{key:"dispose",value:function(){for(var e in this.edgesList){var t=this.edgesList[e];this.disposer.dispose(t,!0)}this.lineMat.dispose(),this.edgesList={},this.edgesToUpdate.clear()}},{key:"generate",value:function(e){if(this.edgesList[e.id]){var t=this.edgesList[e.id];t.removeFromParent(),t.geometry.dispose(),t.geometry=null,delete this.edgesList[e.id]}this.getInstanceTransforms(e);var n=new ly(e.mesh.geometry,this.threshold),r=(new d_).copy(n);r.instanceCount=1/0,this.setAttributes(r);var i=new Wm(r,this.lineMat);return i.frustumCulled=!1,this._components.scene.get().add(i),this.edgesList[e.id]=i,this.updateInstancedEdges(e,r),i.visible=!1,i}},{key:"updateInstancedEdges",value:function(e,t){for(var n=0;n<e.mesh.count;n++)e.mesh.getMatrixAt(n,this._mat4),this._mat4.decompose(this._dummy.position,this._dummy.quaternion,this._dummy.scale),this.linesTRS(n,this._dummy,t)}},{key:"setAttributes",value:function(e){e.setAttribute("instT",new Am(new Float32Array(this._pos),3)),e.setAttribute("instR",new Am(new Float32Array(this._rot),4)),e.setAttribute("instS",new Am(new Float32Array(this._scl),3)),this._pos.length=0,this._rot.length=0,this._scl.length=0}},{key:"getInstanceTransforms",value:function(e){for(var t=0;t<e.mesh.count;t++)e.getInstance(t,this._dummy.matrix),this._dummy.updateMatrix(),this._pos.push(this._dummy.position.x,this._dummy.position.y,this._dummy.position.z),this._rot.push(this._dummy.quaternion.x,this._dummy.quaternion.y,this._dummy.quaternion.z,this._dummy.quaternion.w),this._scl.push(this._dummy.scale.x,this._dummy.scale.y,this._dummy.scale.z)}},{key:"linesTRS",value:function(e,t,n){n.attributes.instT.setXYZ(e,t.position.x,t.position.y,t.position.z),n.attributes.instT.needsUpdate=!0,n.attributes.instR.setXYZW(e,t.quaternion.x,t.quaternion.y,t.quaternion.z,t.quaternion.w),n.attributes.instR.needsUpdate=!0,n.attributes.instS.setXYZ(e,t.scale.x,t.scale.y,t.scale.z),n.attributes.instS.needsUpdate=!0}}]),e}(),zw=function(){function e(t){(0,s.Z)(this,e),this.fragments=t,this.originals={},this.materials=new Set}return(0,o.Z)(e,[{key:"dispose",value:function(){var e,t=b(this.materials);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(n){t.e(n)}finally{t.f()}this.materials.clear()}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.keys(this.fragments.list);this.materials.add(e);var n,r=b(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=this.fragments.list[i];this.save(a),a.mesh.material=e}}catch(s){r.e(s)}finally{r.f()}}},{key:"reset",value:function(){var e,t=b(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(this.fragments.list));try{for(t.s();!(e=t.n()).done;){var n=e.value,r=this.fragments.list[n],i=this.originals[n];i&&(r.mesh.material=i)}}catch(a){t.e(a)}finally{t.f()}}},{key:"save",value:function(e){this.originals[e.id]||(this.originals[e.id]=e.mesh.material)}}]),e}(),Gw=function(){function e(){(0,s.Z)(this,e),this.properties={},this.fragmentGuid=new Map}return(0,o.Z)(e,[{key:"dispose",value:function(){this.properties={},this.fragmentGuid.clear()}},{key:"add",value:function(e){var t=Object.values(e).find((function(e){return"IFCPROJECT"===e.type})).GlobalId;return this.properties[t]=e,t}},{key:"assign",value:function(e,t){this.fragmentGuid.set(t,e)}},{key:"getItemsOfType",value:function(e,t){var n=this.properties[e];return Object.values(n).filter((function(e){return e.type===t}))}},{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)throw new Error("This fragment has no properties assigned.");var r=this.properties[e][t],i=r.expressID;return n&&this.getPropertySets(e,i,r),r}},{key:"getPropertySets",value:function(e,t,n){this.getItemsOfType(e,"IFCRELDEFINESBYPROPERTIES");var r,i=this.getPsetDefinition(e,t),a=this.properties[e],s=b(i);try{for(s.s();!(r=s.n()).done;){var o=r.value;o.HasProperties&&(o.HasProperties=o.HasProperties.map((function(e){return a[e]}))),o.Quantities&&(o.Quantities=o.Quantities.map((function(e){return a[e]})))}}catch(u){s.e(u)}finally{s.f()}n.psets=i}},{key:"getPsetDefinition",value:function(e,t){var n=this.getItemsOfType(e,"IFCRELDEFINESBYPROPERTIES").filter((function(e){return e.RelatedObjects.includes(t)})),r=this.properties[e];return n.map((function(e){return r[e.RelatingPropertyDefinition]}))}}]),e}(),Hw=function(){function e(t){(0,s.Z)(this,e),this.props=t,this.relAggregates="IFCRELAGGREGATES",this.relSpatial="IFCRELCONTAINEDINSPATIALSTRUCTURE"}return(0,o.Z)(e,[{key:"generate",value:function(e){var t={expressID:this.props.getItemsOfType(e,"IFCPROJECT")[0].expressID,type:"IFCPROJECT",children:[]},n=this.props.getItemsOfType(e,this.relAggregates),r=this.props.getItemsOfType(e,this.relSpatial);return this.constructSpatialNode(e,t,n,r),t}},{key:"constructSpatialNode",value:function(e,t,n,r){var i,s=r.filter((function(e){return e.RelatingStructure===t.expressID})),o=n.filter((function(e){return e.RelatingObject===t.expressID})),u=[],l=b(s);try{for(l.s();!(i=l.n()).done;){var c=i.value;u.push.apply(u,(0,a.Z)(c.RelatedElements))}}catch(E){l.e(E)}finally{l.f()}var h,p=[],f=b(o);try{for(f.s();!(h=f.n()).done;){var d=h.value;p.push.apply(p,(0,a.Z)(d.RelatedObjects))}}catch(E){f.e(E)}finally{f.f()}for(var v=[].concat(u,p),m=[],y=0;y<v.length;y++){var g=v[y],_=this.props.get(e,g.toString()),T={expressID:_.expressID,type:_.type,children:[]};this.constructSpatialNode(e,T,n,r),m.push(T)}t.children=m}}]),e}(),jw="/index.js",Vw=Object.defineProperty,Ww=Object.getOwnPropertySymbols,Yw=Object.prototype.hasOwnProperty,qw=Object.prototype.propertyIsEnumerable,Xw=function(e,t,n){return t in e?Vw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Kw=function(e,t){for(var n in t||(t={}))Yw.call(t,n)&&Xw(e,n,t[n]);if(Ww){var r,i=b(Ww(t));try{for(i.s();!(r=i.n()).done;){n=r.value;qw.call(t,n)&&Xw(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},Qw=function(e){return n(5226)(e)},Jw=function(e,t){return function(){return t||(0,e[Object.keys(e)[0]])((t={exports:{}}).exports,t),t.exports}},$w=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{o(n.next(e))}catch(IQ){i(IQ)}},s=function(e){try{o(n.throw(e))}catch(IQ){i(IQ)}},o=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,s)};o((n=n.apply(e,t)).next())}))},ek=Jw({"(disabled):crypto":function(){}}),tk=Jw({"dist/web-ifc-mt.js":function(e,t){var r=function(){var e="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||jw,function(t){function r(){return U.buffer!=K&&fe(U.buffer),Q}function i(){return U.buffer!=K&&fe(U.buffer),J}function a(){return U.buffer!=K&&fe(U.buffer),$}function s(){return U.buffer!=K&&fe(U.buffer),ee}function o(){return U.buffer!=K&&fe(U.buffer),te}function u(){return U.buffer!=K&&fe(U.buffer),ne}function l(){return U.buffer!=K&&fe(U.buffer),ie}var c,h,p="undefined"!==typeof(t=t||{})?t:{};p.ready=new Promise((function(e,t){c=e,h=t}));var f,d={};for(f in p)p.hasOwnProperty(f)&&(d[f]=p[f]);var v,m,y,g,_,T=[],E="./this.program",x=function(e,t){throw t},b="object"===typeof window,I="function"===typeof importScripts,w="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node,k=p.ENVIRONMENT_IS_PTHREAD||!1,S="";function R(e){return p.locateFile?p.locateFile(e,S):S+e}if(w){var C;S=I?Qw("path").dirname(S)+"/":"//",v=function(e,t){return g||(g=Qw("fs")),_||(_=Qw("path")),e=_.normalize(e),g.readFileSync(e,t?null:"utf8")},y=function(e){var t=v(e,!0);return t.buffer||(t=new Uint8Array(t)),G(t.buffer),t},m=function(e,t,n){g||(g=Qw("fs")),_||(_=Qw("path")),e=_.normalize(e),g.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&(E=process.argv[1].replace(/\\/g,"/")),T=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof zr))throw e})),process.on("unhandledRejection",Ae),x=function(e,t){if(xe())throw process.exitCode=e,t;process.exit(e)},p.inspect=function(){return"[Emscripten Module object]"};try{C=Qw("worker_threads")}catch(IQ){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),IQ}n.g.Worker=C.Worker}else(b||I)&&(I?S=self.location.href:"undefined"!==typeof document&&document.currentScript&&(S=document.currentScript.src),e&&(S=e),S=0!==S.indexOf("blob:")?S.substr(0,S.lastIndexOf("/")+1):"",w?(v=function(e,t){return g||(g=Qw("fs")),_||(_=Qw("path")),e=_.normalize(e),g.readFileSync(e,t?null:"utf8")},y=function(e){var t=v(e,!0);return t.buffer||(t=new Uint8Array(t)),G(t.buffer),t},m=function(e,t,n){g||(g=Qw("fs")),_||(_=Qw("path")),e=_.normalize(e),g.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))}):(v=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},I&&(y=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),m=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}),function(e){document.title=e});w&&"undefined"===typeof performance&&(n.g.performance=Qw("perf_hooks").performance);var D=p.print||console.log.bind(console),A=p.printErr||console.warn.bind(console);for(f in d)d.hasOwnProperty(f)&&(p[f]=d[f]);d=null,p.arguments&&(T=p.arguments),p.thisProgram&&(E=p.thisProgram),p.quit&&(x=p.quit);var O=16;function N(e){N.shown||(N.shown={}),N.shown[e]||(N.shown[e]=1,A(e))}var M,P=0,F=function(e){P=e},L=function(){return P};Atomics.load,Atomics.store,Atomics.compareExchange;p.wasmBinary&&(M=p.wasmBinary);var U,Z,B=p.noExitRuntime||!0;"object"!==typeof WebAssembly&&Ae("no native wasm support detected");var z=!1;function G(e,t){e||Ae("Assertion failed: "+t)}function H(e){var t=new TextDecoder(e);this.decode=function(e){return e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode.call(t,e)}}var j="undefined"!==typeof TextDecoder?new H("utf8"):void 0;function V(e,t,n){for(var r=(t>>>=0)+n,i=t;e[i>>>0]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&j)return j.decode(e.subarray(t>>>0,i>>>0));for(var a="";t<i;){var s=e[t++>>>0];if(128&s){var o=63&e[t++>>>0];if(192!=(224&s)){var u=63&e[t++>>>0];if((s=224==(240&s)?(15&s)<<12|o<<6|u:(7&s)<<18|o<<12|u<<6|63&e[t++>>>0])<65536)a+=String.fromCharCode(s);else{var l=s-65536;a+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else a+=String.fromCharCode((31&s)<<6|o)}else a+=String.fromCharCode(s)}return a}function W(e,t){return(e>>>=0)?V(i(),e,t):""}function Y(e,t,n,r){if(!(r>0))return 0;for(var i=n>>>=0,a=n+r-1,s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o>=55296&&o<=57343)o=65536+((1023&o)<<10)|1023&e.charCodeAt(++s);if(o<=127){if(n>=a)break;t[n++>>>0]=o}else if(o<=2047){if(n+1>=a)break;t[n++>>>0]=192|o>>6,t[n++>>>0]=128|63&o}else if(o<=65535){if(n+2>=a)break;t[n++>>>0]=224|o>>12,t[n++>>>0]=128|o>>6&63,t[n++>>>0]=128|63&o}else{if(n+3>=a)break;t[n++>>>0]=240|o>>18,t[n++>>>0]=128|o>>12&63,t[n++>>>0]=128|o>>6&63,t[n++>>>0]=128|63&o}}return t[n>>>0]=0,n-i}function q(e,t,n){return Y(e,i(),t,n)}function X(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}var K,Q,J,$,ee,te,ne,re,ie,ae="undefined"!==typeof TextDecoder?new H("utf-16le"):void 0;function se(e,t){for(var n=e,r=n>>1,o=r+t/2;!(r>=o)&&s()[r>>>0];)++r;if((n=r<<1)-e>32&&ae)return ae.decode(i().subarray(e>>>0,n>>>0));for(var u="",l=0;!(l>=t/2);++l){var c=a()[e+2*l>>>1];if(0==c)break;u+=String.fromCharCode(c)}return u}function oe(e,t,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var r=t,i=(n-=2)<2*e.length?n/2:e.length,s=0;s<i;++s){var o=e.charCodeAt(s);a()[t>>>1]=o,t+=2}return a()[t>>>1]=0,t-r}function ue(e){return 2*e.length}function le(e,t){for(var n=0,r="";!(n>=t/4);){var i=o()[e+4*n>>>2];if(0==i)break;if(++n,i>=65536){var a=i-65536;r+=String.fromCharCode(55296|a>>10,56320|1023&a)}else r+=String.fromCharCode(i)}return r}function ce(e,t,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var r=t>>>=0,i=r+n-4,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a);if(o()[t>>>2]=s,(t+=4)+4>i)break}return o()[t>>>2]=0,t-r}function he(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&++n,t+=4}return t}function pe(e,t){return e%t>0&&(e+=t-e%t),e}function fe(e){K=e,p.HEAP8=Q=new Int8Array(e),p.HEAP16=$=new Int16Array(e),p.HEAP32=te=new Int32Array(e),p.HEAPU8=J=new Uint8Array(e),p.HEAPU16=ee=new Uint16Array(e),p.HEAPU32=ne=new Uint32Array(e),p.HEAPF32=re=new Float32Array(e),p.HEAPF64=ie=new Float64Array(e)}k&&(K=p.buffer);var de,ve=p.INITIAL_MEMORY||16777216;if(k)U=p.wasmMemory,K=p.buffer;else if(p.wasmMemory)U=p.wasmMemory;else if(!((U=new WebAssembly.Memory({initial:ve/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw A("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),w&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");U&&(K=U.buffer),ve=K.byteLength,fe(K);var me=[],ye=[],ge=[],_e=[],Te=[],Ee=0;function xe(){return B||Ee>0}function be(){!0,k||(p.noFSInit||rt.init.initialized||rt.init(),rt.ignorePermissions=!1,et.init(),Be(ye))}function Ie(e){me.unshift(e)}function we(e){Te.unshift(e)}var ke=0,Se=null,Re=null;function Ce(e){ke++,p.monitorRunDependencies&&p.monitorRunDependencies(ke)}function De(e){if(ke--,p.monitorRunDependencies&&p.monitorRunDependencies(ke),0==ke&&(null!==Se&&(clearInterval(Se),Se=null),Re)){var t=Re;Re=null,t()}}function Ae(e){p.onAbort&&p.onAbort(e),k&&console.error("Pthread aborting at "+(new Error).stack),A(e+=""),z=!0,1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw h(t),t}p.preloadedImages={},p.preloadedAudios={};var Oe,Ne,Me,Pe="data:application/octet-stream;base64,";function Fe(e){return e.startsWith(Pe)}function Le(e){return e.startsWith("file://")}function Ue(e){try{if(e==Oe&&M)return new Uint8Array(M);if(y)return y(e);throw"both async and sync fetching of the wasm failed"}catch(t){Ae(t)}}Fe(Oe="web-ifc-mt.wasm")||(Oe=R(Oe));var Ze={56684:function(){throw"Canceled!"},56702:function(e,t){setTimeout((function(){Tr(e,t)}),0)}};function Be(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"===typeof n?void 0===t.arg?de.get(n)():de.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(p)}}function ze(e,t){if(e<=0||e>r().length||!0&e||t<0)return-28;if(0==t)return 0;t>=2147483647&&(t=1/0);var n=Atomics.load(o(),Br>>2),i=0;if(n==e&&(Atomics.compareExchange(o(),Br>>2,n,0)==n&&(i=1,--t<=0)))return 1;var a=Atomics.notify(o(),e>>2,t);if(a>=0)return a+i;throw"Atomics.notify returned an unexpected value "+a}p._emscripten_futex_wake=ze;var Ge,He={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],initMainThreadBlock:function(){for(var e=navigator.hardwareConcurrency,t=0;t<e;++t)He.allocateUnusedWorker()},initRuntime:function(){for(var e=mr(228),t=0;t<57;++t)u()[e/4+t>>>0]=0;o()[e+12>>>2]=e;var n=e+152;o()[n>>>2]=n;var r=mr(512);for(t=0;t<128;++t)u()[r/4+t>>>0]=0;Atomics.store(u(),e+100>>2,r),Atomics.store(u(),e+40>>2,e),wr(e,!I,1),_r(e)},initWorker:function(){},pthreads:{},threadExitHandlers:[],runExitHandlers:function(){for(;He.threadExitHandlers.length>0;)He.threadExitHandlers.pop()();Cr()},runExitHandlersAndDeinitThread:function(e,t){Atomics.store(u(),e+56>>2,1),Atomics.store(u(),e+60>>2,0),He.runExitHandlers(),Atomics.store(u(),e+4>>2,t),Atomics.store(u(),e+0>>2,1),ze(e+0,2147483647),wr(0,0,0)},setExitStatus:function(e){e},threadExit:function(e){var t=Rr();t&&(He.runExitHandlersAndDeinitThread(t,e),k&&postMessage({cmd:"exit"}))},threadCancel:function(){He.runExitHandlersAndDeinitThread(Rr(),-1),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var e in He.pthreads){(r=He.pthreads[e])&&r.worker&&He.returnWorkerToPool(r.worker)}He.pthreads={};for(var t=0;t<He.unusedWorkers.length;++t){(n=He.unusedWorkers[t]).terminate()}He.unusedWorkers=[];for(t=0;t<He.runningWorkers.length;++t){var n,r=(n=He.runningWorkers[t]).pthread;He.freeThreadData(r),n.terminate()}He.runningWorkers=[]},freeThreadData:function(e){if(e){if(e.threadInfoStruct){var t=o()[e.threadInfoStruct+100>>>2];o()[e.threadInfoStruct+100>>>2]=0,yr(t),yr(e.threadInfoStruct)}e.threadInfoStruct=0,e.allocatedOwnStack&&e.stackBase&&yr(e.stackBase),e.stackBase=0,e.worker&&(e.worker.pthread=null)}},returnWorkerToPool:function(e){He.runWithoutMainThreadQueuedCalls((function(){delete He.pthreads[e.pthread.threadInfoStruct],He.unusedWorkers.push(e),He.runningWorkers.splice(He.runningWorkers.indexOf(e),1),He.freeThreadData(e.pthread),e.pthread=void 0}))},runWithoutMainThreadQueuedCalls:function(e){o()[Zr>>>2]=0;try{e()}finally{o()[Zr>>>2]=1}},receiveObjectTransfer:function(e){},threadInit:function(){for(var e in He.tlsInitFunctions)He.tlsInitFunctions[e]()},loadWasmModuleToWorker:function(t,n){t.onmessage=function(e){var r=e.data,i=r.cmd;if(t.pthread&&(He.currentProxiedOperationCallerThread=t.pthread.threadInfoStruct),r.targetThread&&r.targetThread!=Rr()){var a=He.pthreads[r.targetThread];return a?a.worker.postMessage(e.data,r.transferList):console.error('Internal error! Worker sent a message "'+i+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void(He.currentProxiedOperationCallerThread=void 0)}if("processQueuedMainThreadWork"===i)xr();else if("spawnThread"===i)tr(e.data);else if("cleanupThread"===i)!function(e){if(k)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cleanupThread!";var t=He.pthreads[e];if(t){o()[e+12>>>2]=0;var n=t.worker;He.returnWorkerToPool(n)}}(r.thread);else if("killThread"===i)!function(e){if(k)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in killThread!";o()[e+12>>>2]=0;var t=He.pthreads[e];t.worker.terminate(),He.freeThreadData(t),He.runningWorkers.splice(He.runningWorkers.indexOf(t.worker),1),t.worker.pthread=void 0}(r.thread);else if("cancelThread"===i)!function(e){if(k)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cancelThread!";He.pthreads[e].worker.postMessage({cmd:"cancel"})}(r.thread);else if("loaded"===i)t.loaded=!0,n&&n(t),t.runPthread&&(t.runPthread(),delete t.runPthread);else if("print"===i)D("Thread "+r.threadId+": "+r.text);else if("printErr"===i)A("Thread "+r.threadId+": "+r.text);else if("alert"===i)alert("Thread "+r.threadId+": "+r.text);else if("exit"===i){t.pthread&&Atomics.load(u(),t.pthread.threadInfoStruct+64>>2)&&He.returnWorkerToPool(t)}else if("exitProcess"===i)try{Hr(r.returnCode)}catch(s){if(s instanceof zr)return;throw s}else"cancelDone"===i?He.returnWorkerToPool(t):"objectTransfer"===i?He.receiveObjectTransfer(e.data):"setimmediate"===e.data.target?t.postMessage(e.data):A("worker sent an unknown command "+i);He.currentProxiedOperationCallerThread=void 0},t.onerror=function(e){A("pthread sent an error! "+e.filename+":"+e.lineno+": "+e.message)},w&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("exit",(function(e){}))),t.postMessage({cmd:"load",urlOrBlob:p.mainScriptUrlOrBlob||e,wasmMemory:U,wasmModule:Z})},allocateUnusedWorker:function(){var e=R("web-ifc-mt.worker.js");He.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==He.unusedWorkers.length&&(He.allocateUnusedWorker(),He.loadWasmModuleToWorker(He.unusedWorkers[0])),He.unusedWorkers.pop()},busySpinWait:function(e){for(var t=performance.now()+e;performance.now()<t;);}};p.establishStackSpace=function(e,t){Nr(e,t),Ar(e)},p.invokeEntryPoint=function(e,t){return de.get(e)(t)},Ge=w?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:k?function(){return performance.now()-p.__performance_now_clock_drift}:function(){return performance.now()};var je=!0;function Ve(e){return o()[Sr()>>>2]=e,e}function We(e){this.excPtr=e,this.ptr=e-16,this.set_type=function(e){o()[this.ptr+4>>>2]=e},this.get_type=function(){return o()[this.ptr+4>>>2]},this.set_destructor=function(e){o()[this.ptr+8>>>2]=e},this.get_destructor=function(){return o()[this.ptr+8>>>2]},this.set_refcount=function(e){o()[this.ptr>>>2]=e},this.set_caught=function(e){e=e?1:0,r()[this.ptr+12>>>0]=e},this.get_caught=function(){return 0!=r()[this.ptr+12>>>0]},this.set_rethrown=function(e){e=e?1:0,r()[this.ptr+13>>>0]=e},this.get_rethrown=function(){return 0!=r()[this.ptr+13>>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){Atomics.add(o(),this.ptr+0>>2,1)},this.release_ref=function(){return 1===Atomics.sub(o(),this.ptr+0>>2,1)}}function Ye(e){this.free=function(){yr(this.ptr),this.ptr=0},this.set_base_ptr=function(e){o()[this.ptr>>>2]=e},this.get_base_ptr=function(){return o()[this.ptr>>>2]},this.set_adjusted_ptr=function(e){o()[this.ptr+4>>>2]=e},this.get_adjusted_ptr_addr=function(){return this.ptr+4},this.get_adjusted_ptr=function(){return o()[this.ptr+4>>>2]},this.get_exception_ptr=function(){if(Fr(this.get_exception_info().get_type()))return o()[this.get_base_ptr()>>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.get_base_ptr()},this.get_exception_info=function(){return new We(this.get_base_ptr())},void 0===e?(this.ptr=mr(8),this.set_adjusted_ptr(0)):this.ptr=e}var qe=[];var Xe=0;var Ke=0;function Qe(e){return yr(new We(e).ptr)}var Je={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return e=Je.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"),e||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=Je.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:function(e){if("/"===e)return"/";var t=(e=(e=Je.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return Je.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return Je.normalize(e.join("/"))},join2:function(e,t){return Je.normalize(e+"/"+t)}};var $e={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:rt.cwd();if("string"!==typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t="/"===r.charAt(0)}return e=Je.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"),(t?"/":"")+e||"."},relative:function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=$e.resolve(e).substr(1),t=$e.resolve(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),a=Math.min(r.length,i.length),s=a,o=0;o<a;o++)if(r[o]!==i[o]){s=o;break}var u=[];for(o=s;o<r.length;o++)u.push("..");return(u=u.concat(i.slice(s))).join("/")}},et={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){et.ttys[e]={input:[],output:[],ops:t},rt.registerDevice(e,et.stream_ops)},stream_ops:{open:function(e){var t=et.ttys[e.node.rdev];if(!t)throw new rt.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.get_char)throw new rt.ErrnoError(60);for(var a=0,s=0;s<r;s++){var o;try{o=e.tty.ops.get_char(e.tty)}catch(IQ){throw new rt.ErrnoError(29)}if(void 0===o&&0===a)throw new rt.ErrnoError(6);if(null===o||void 0===o)break;a++,t[n+s]=o}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.put_char)throw new rt.ErrnoError(60);try{for(var a=0;a<r;a++)e.tty.ops.put_char(e.tty,t[n+a])}catch(IQ){throw new rt.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(w){var n=Buffer.alloc(256),r=0;try{r=g.readSync(process.stdin.fd,n,0,256,null)}catch(IQ){if(!IQ.toString().includes("EOF"))throw IQ;r=0}t=r>0?n.slice(0,r).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;e.input=fr(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(D(V(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(D(V(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(A(V(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(A(V(e.output,0)),e.output=[])}}};function tt(e){e=function(e,t){return t||(t=O),Math.ceil(e/t)*t}(e,65536);var t=Lr(65536,e);return t?(function(e,t){i().fill(0,e,e+t)}(t,e),t):0}var nt={ops_table:null,mount:function(e){return nt.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(rt.isBlkdev(n)||rt.isFIFO(n))throw new rt.ErrnoError(63);nt.ops_table||(nt.ops_table={dir:{node:{getattr:nt.node_ops.getattr,setattr:nt.node_ops.setattr,lookup:nt.node_ops.lookup,mknod:nt.node_ops.mknod,rename:nt.node_ops.rename,unlink:nt.node_ops.unlink,rmdir:nt.node_ops.rmdir,readdir:nt.node_ops.readdir,symlink:nt.node_ops.symlink},stream:{llseek:nt.stream_ops.llseek}},file:{node:{getattr:nt.node_ops.getattr,setattr:nt.node_ops.setattr},stream:{llseek:nt.stream_ops.llseek,read:nt.stream_ops.read,write:nt.stream_ops.write,allocate:nt.stream_ops.allocate,mmap:nt.stream_ops.mmap,msync:nt.stream_ops.msync}},link:{node:{getattr:nt.node_ops.getattr,setattr:nt.node_ops.setattr,readlink:nt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:nt.node_ops.getattr,setattr:nt.node_ops.setattr},stream:rt.chrdev_stream_ops}});var i=rt.createNode(e,t,n,r);return rt.isDir(i.mode)?(i.node_ops=nt.ops_table.dir.node,i.stream_ops=nt.ops_table.dir.stream,i.contents={}):rt.isFile(i.mode)?(i.node_ops=nt.ops_table.file.node,i.stream_ops=nt.ops_table.file.stream,i.usedBytes=0,i.contents=null):rt.isLink(i.mode)?(i.node_ops=nt.ops_table.link.node,i.stream_ops=nt.ops_table.link.stream):rt.isChrdev(i.mode)&&(i.node_ops=nt.ops_table.chrdev.node,i.stream_ops=nt.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i,e.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){t>>>=0;var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(t>>>=0,e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=rt.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,rt.isDir(e.mode)?t.size=4096:rt.isFile(e.mode)?t.size=e.usedBytes:rt.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&nt.resizeFileStorage(e,t.size)},lookup:function(e,t){throw rt.genericErrors[44]},mknod:function(e,t,n,r){return nt.createNode(e,t,n,r)},rename:function(e,t,n){if(rt.isDir(e.mode)){var r;try{r=rt.lookupNode(t,n)}catch(IQ){}if(r)for(var i in r.contents)throw new rt.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=rt.lookupNode(e,t);for(var r in n.contents)throw new rt.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var r=nt.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!rt.isLink(e.mode))throw new rt.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,r,i){var a=e.node.contents;if(i>=e.node.usedBytes)return 0;var s=Math.min(e.node.usedBytes-i,r);if(s>8&&a.subarray)t.set(a.subarray(i,i+s),n);else for(var o=0;o<s;o++)t[n+o]=a[i+o];return s},write:function(e,t,n,i,a,s){if(t.buffer===r().buffer&&(s=!1),!i)return 0;var o=e.node;if(o.timestamp=Date.now(),t.subarray&&(!o.contents||o.contents.subarray)){if(s)return o.contents=t.subarray(n,n+i),o.usedBytes=i,i;if(0===o.usedBytes&&0===a)return o.contents=t.slice(n,n+i),o.usedBytes=i,i;if(a+i<=o.usedBytes)return o.contents.set(t.subarray(n,n+i),a),i}if(nt.expandFileStorage(o,a+i),o.contents.subarray&&t.subarray)o.contents.set(t.subarray(n,n+i),a);else for(var u=0;u<i;u++)o.contents[a+u]=t[n+u];return o.usedBytes=Math.max(o.usedBytes,a+i),i},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&rt.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new rt.ErrnoError(28);return r},allocate:function(e,t,n){nt.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,i,a,s){if(0!==t)throw new rt.ErrnoError(28);if(!rt.isFile(e.node.mode))throw new rt.ErrnoError(43);var o,u,l=e.node.contents;if(2&s||l.buffer!==K){if((i>0||i+n<l.length)&&(l=l.subarray?l.subarray(i,i+n):Array.prototype.slice.call(l,i,i+n)),u=!0,!(o=tt(n)))throw new rt.ErrnoError(48);o>>>=0,r().set(l,o>>>0)}else u=!1,o=l.byteOffset;return{ptr:o,allocated:u}},msync:function(e,t,n,r,i){if(!rt.isFile(e.node.mode))throw new rt.ErrnoError(43);if(2&i)return 0;nt.stream_ops.write(e,t,0,r,n,!1);return 0}}};var rt={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(e,t){if(t=t||{},!(e=$e.resolve(rt.cwd(),e)))return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var r in n)void 0===t[r]&&(t[r]=n[r]);if(t.recurse_count>8)throw new rt.ErrnoError(32);for(var i=Je.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),a=rt.root,s="/",o=0;o<i.length;o++){var u=o===i.length-1;if(u&&t.parent)break;if(a=rt.lookupNode(a,i[o]),s=Je.join2(s,i[o]),rt.isMountpoint(a)&&(!u||u&&t.follow_mount)&&(a=a.mounted.root),!u||t.follow)for(var l=0;rt.isLink(a.mode);){var c=rt.readlink(s);if(s=$e.resolve(Je.dirname(s),c),a=rt.lookupPath(s,{recurse_count:t.recurse_count}).node,l++>40)throw new rt.ErrnoError(32)}}return{path:s,node:a}},getPath:function(e){for(var t;;){if(rt.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%rt.nameTable.length},hashAddNode:function(e){var t=rt.hashName(e.parent.id,e.name);e.name_next=rt.nameTable[t],rt.nameTable[t]=e},hashRemoveNode:function(e){var t=rt.hashName(e.parent.id,e.name);if(rt.nameTable[t]===e)rt.nameTable[t]=e.name_next;else for(var n=rt.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:function(e,t){var n=rt.mayLookup(e);if(n)throw new rt.ErrnoError(n,e);for(var r=rt.hashName(e.id,t),i=rt.nameTable[r];i;i=i.name_next){var a=i.name;if(i.parent.id===e.id&&a===t)return i}return rt.lookup(e,t)},createNode:function(e,t,n,r){var i=new rt.FSNode(e,t,n,r);return rt.hashAddNode(i),i},destroyNode:function(e){rt.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768===(61440&e)},isDir:function(e){return 16384===(61440&e)},isLink:function(e){return 40960===(61440&e)},isChrdev:function(e){return 8192===(61440&e)},isBlkdev:function(e){return 24576===(61440&e)},isFIFO:function(e){return 4096===(61440&e)},isSocket:function(e){return 49152===(49152&e)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(e){var t=rt.flagModes[e];if("undefined"===typeof t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return rt.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2},mayLookup:function(e){var t=rt.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:function(e,t){try{rt.lookupNode(e,t);return 20}catch(IQ){}return rt.nodePermissions(e,"wx")},mayDelete:function(e,t,n){var r;try{r=rt.lookupNode(e,t)}catch(IQ){return IQ.errno}var i=rt.nodePermissions(e,"wx");if(i)return i;if(n){if(!rt.isDir(r.mode))return 54;if(rt.isRoot(r)||rt.getPath(r)===rt.cwd())return 10}else if(rt.isDir(r.mode))return 31;return 0},mayOpen:function(e,t){return e?rt.isLink(e.mode)?32:rt.isDir(e.mode)&&("r"!==rt.flagsToPermissionString(t)||512&t)?31:rt.nodePermissions(e,rt.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||rt.MAX_OPEN_FDS;for(var n=e;n<=t;n++)if(!rt.streams[n])return n;throw new rt.ErrnoError(33)},getStream:function(e){return rt.streams[e]},createStream:function(e,t,n){rt.FSStream||(rt.FSStream=function(){},rt.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!==(2097155&this.flags)}},isWrite:{get:function(){return 0!==(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var r=new rt.FSStream;for(var i in e)r[i]=e[i];e=r;var a=rt.nextfd(t,n);return e.fd=a,rt.streams[a]=e,e},closeStream:function(e){rt.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=rt.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new rt.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){rt.devices[e]={stream_ops:t}},getDevice:function(e){return rt.devices[e]},getMounts:function(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs:function(e,t){"function"===typeof e&&(t=e,e=!1),rt.syncFSRequests++,rt.syncFSRequests>1&&A("warning: "+rt.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=rt.getMounts(rt.root.mount),r=0;function i(e){return rt.syncFSRequests--,t(e)}function a(e){if(e)return a.errored?void 0:(a.errored=!0,i(e));++r>=n.length&&i(null)}n.forEach((function(t){if(!t.type.syncfs)return a(null);t.type.syncfs(t,e,a)}))},mount:function(e,t,n){var r,i="/"===n,a=!n;if(i&&rt.root)throw new rt.ErrnoError(10);if(!i&&!a){var s=rt.lookupPath(n,{follow_mount:!1});if(n=s.path,r=s.node,rt.isMountpoint(r))throw new rt.ErrnoError(10);if(!rt.isDir(r.mode))throw new rt.ErrnoError(54)}var o={type:e,opts:t,mountpoint:n,mounts:[]},u=e.mount(o);return u.mount=o,o.root=u,i?rt.root=u:r&&(r.mounted=o,r.mount&&r.mount.mounts.push(o)),u},unmount:function(e){var t=rt.lookupPath(e,{follow_mount:!1});if(!rt.isMountpoint(t.node))throw new rt.ErrnoError(28);var n=t.node,r=n.mounted,i=rt.getMounts(r);Object.keys(rt.nameTable).forEach((function(e){for(var t=rt.nameTable[e];t;){var n=t.name_next;i.includes(t.mount)&&rt.destroyNode(t),t=n}})),n.mounted=null;var a=n.mount.mounts.indexOf(r);n.mount.mounts.splice(a,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,n){var r=rt.lookupPath(e,{parent:!0}).node,i=Je.basename(e);if(!i||"."===i||".."===i)throw new rt.ErrnoError(28);var a=rt.mayCreate(r,i);if(a)throw new rt.ErrnoError(a);if(!r.node_ops.mknod)throw new rt.ErrnoError(63);return r.node_ops.mknod(r,i,t,n)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,rt.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,rt.mknod(e,t,0)},mkdirTree:function(e,t){for(var n=e.split("/"),r="",i=0;i<n.length;++i)if(n[i]){r+="/"+n[i];try{rt.mkdir(r,t)}catch(IQ){if(20!=IQ.errno)throw IQ}}},mkdev:function(e,t,n){return"undefined"===typeof n&&(n=t,t=438),t|=8192,rt.mknod(e,t,n)},symlink:function(e,t){if(!$e.resolve(e))throw new rt.ErrnoError(44);var n=rt.lookupPath(t,{parent:!0}).node;if(!n)throw new rt.ErrnoError(44);var r=Je.basename(t),i=rt.mayCreate(n,r);if(i)throw new rt.ErrnoError(i);if(!n.node_ops.symlink)throw new rt.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename:function(e,t){var n,r,i=Je.dirname(e),a=Je.dirname(t),s=Je.basename(e),o=Je.basename(t);if(n=rt.lookupPath(e,{parent:!0}).node,r=rt.lookupPath(t,{parent:!0}).node,!n||!r)throw new rt.ErrnoError(44);if(n.mount!==r.mount)throw new rt.ErrnoError(75);var u,l=rt.lookupNode(n,s),c=$e.relative(e,a);if("."!==c.charAt(0))throw new rt.ErrnoError(28);if("."!==(c=$e.relative(t,i)).charAt(0))throw new rt.ErrnoError(55);try{u=rt.lookupNode(r,o)}catch(IQ){}if(l!==u){var h=rt.isDir(l.mode),p=rt.mayDelete(n,s,h);if(p)throw new rt.ErrnoError(p);if(p=u?rt.mayDelete(r,o,h):rt.mayCreate(r,o))throw new rt.ErrnoError(p);if(!n.node_ops.rename)throw new rt.ErrnoError(63);if(rt.isMountpoint(l)||u&&rt.isMountpoint(u))throw new rt.ErrnoError(10);if(r!==n&&(p=rt.nodePermissions(n,"w")))throw new rt.ErrnoError(p);try{rt.trackingDelegate.willMovePath&&rt.trackingDelegate.willMovePath(e,t)}catch(IQ){A("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+IQ.message)}rt.hashRemoveNode(l);try{n.node_ops.rename(l,r,o)}catch(IQ){throw IQ}finally{rt.hashAddNode(l)}try{rt.trackingDelegate.onMovePath&&rt.trackingDelegate.onMovePath(e,t)}catch(IQ){A("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+IQ.message)}}},rmdir:function(e){var t=rt.lookupPath(e,{parent:!0}).node,n=Je.basename(e),r=rt.lookupNode(t,n),i=rt.mayDelete(t,n,!0);if(i)throw new rt.ErrnoError(i);if(!t.node_ops.rmdir)throw new rt.ErrnoError(63);if(rt.isMountpoint(r))throw new rt.ErrnoError(10);try{rt.trackingDelegate.willDeletePath&&rt.trackingDelegate.willDeletePath(e)}catch(IQ){A("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+IQ.message)}t.node_ops.rmdir(t,n),rt.destroyNode(r);try{rt.trackingDelegate.onDeletePath&&rt.trackingDelegate.onDeletePath(e)}catch(IQ){A("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+IQ.message)}},readdir:function(e){var t=rt.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new rt.ErrnoError(54);return t.node_ops.readdir(t)},unlink:function(e){var t=rt.lookupPath(e,{parent:!0}).node,n=Je.basename(e),r=rt.lookupNode(t,n),i=rt.mayDelete(t,n,!1);if(i)throw new rt.ErrnoError(i);if(!t.node_ops.unlink)throw new rt.ErrnoError(63);if(rt.isMountpoint(r))throw new rt.ErrnoError(10);try{rt.trackingDelegate.willDeletePath&&rt.trackingDelegate.willDeletePath(e)}catch(IQ){A("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+IQ.message)}t.node_ops.unlink(t,n),rt.destroyNode(r);try{rt.trackingDelegate.onDeletePath&&rt.trackingDelegate.onDeletePath(e)}catch(IQ){A("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+IQ.message)}},readlink:function(e){var t=rt.lookupPath(e).node;if(!t)throw new rt.ErrnoError(44);if(!t.node_ops.readlink)throw new rt.ErrnoError(28);return $e.resolve(rt.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var n=rt.lookupPath(e,{follow:!t}).node;if(!n)throw new rt.ErrnoError(44);if(!n.node_ops.getattr)throw new rt.ErrnoError(63);return n.node_ops.getattr(n)},lstat:function(e){return rt.stat(e,!0)},chmod:function(e,t,n){var r;"string"===typeof e?r=rt.lookupPath(e,{follow:!n}).node:r=e;if(!r.node_ops.setattr)throw new rt.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:function(e,t){rt.chmod(e,t,!0)},fchmod:function(e,t){var n=rt.getStream(e);if(!n)throw new rt.ErrnoError(8);rt.chmod(n.node,t)},chown:function(e,t,n,r){var i;"string"===typeof e?i=rt.lookupPath(e,{follow:!r}).node:i=e;if(!i.node_ops.setattr)throw new rt.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:function(e,t,n){rt.chown(e,t,n,!0)},fchown:function(e,t,n){var r=rt.getStream(e);if(!r)throw new rt.ErrnoError(8);rt.chown(r.node,t,n)},truncate:function(e,t){if(t<0)throw new rt.ErrnoError(28);var n;"string"===typeof e?n=rt.lookupPath(e,{follow:!0}).node:n=e;if(!n.node_ops.setattr)throw new rt.ErrnoError(63);if(rt.isDir(n.mode))throw new rt.ErrnoError(31);if(!rt.isFile(n.mode))throw new rt.ErrnoError(28);var r=rt.nodePermissions(n,"w");if(r)throw new rt.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var n=rt.getStream(e);if(!n)throw new rt.ErrnoError(8);if(0===(2097155&n.flags))throw new rt.ErrnoError(28);rt.truncate(n.node,t)},utime:function(e,t,n){var r=rt.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open:function(e,t,n,r,i){if(""===e)throw new rt.ErrnoError(44);var a;if(n="undefined"===typeof n?438:n,n=64&(t="string"===typeof t?rt.modeStringToFlags(t):t)?4095&n|32768:0,"object"===typeof e)a=e;else{e=Je.normalize(e);try{a=rt.lookupPath(e,{follow:!(131072&t)}).node}catch(IQ){}}var s=!1;if(64&t)if(a){if(128&t)throw new rt.ErrnoError(20)}else a=rt.mknod(e,n,0),s=!0;if(!a)throw new rt.ErrnoError(44);if(rt.isChrdev(a.mode)&&(t&=-513),65536&t&&!rt.isDir(a.mode))throw new rt.ErrnoError(54);if(!s){var o=rt.mayOpen(a,t);if(o)throw new rt.ErrnoError(o)}512&t&&rt.truncate(a,0),t&=-131713;var u=rt.createStream({node:a,path:rt.getPath(a),flags:t,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1},r,i);u.stream_ops.open&&u.stream_ops.open(u),!p.logReadFiles||1&t||(rt.readFiles||(rt.readFiles={}),e in rt.readFiles||(rt.readFiles[e]=1,A("FS.trackingDelegate error on read file: "+e)));try{if(rt.trackingDelegate.onOpenFile){var l=0;1!==(2097155&t)&&(l|=rt.tracking.openFlags.READ),0!==(2097155&t)&&(l|=rt.tracking.openFlags.WRITE),rt.trackingDelegate.onOpenFile(e,l)}}catch(IQ){A("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+IQ.message)}return u},close:function(e){if(rt.isClosed(e))throw new rt.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(IQ){throw IQ}finally{rt.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,n){if(rt.isClosed(e))throw new rt.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new rt.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new rt.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:function(e,t,n,r,i){if(n>>>=0,r<0||i<0)throw new rt.ErrnoError(28);if(rt.isClosed(e))throw new rt.ErrnoError(8);if(1===(2097155&e.flags))throw new rt.ErrnoError(8);if(rt.isDir(e.node.mode))throw new rt.ErrnoError(31);if(!e.stream_ops.read)throw new rt.ErrnoError(28);var a="undefined"!==typeof i;if(a){if(!e.seekable)throw new rt.ErrnoError(70)}else i=e.position;var s=e.stream_ops.read(e,t,n,r,i);return a||(e.position+=s),s},write:function(e,t,n,r,i,a){if(n>>>=0,r<0||i<0)throw new rt.ErrnoError(28);if(rt.isClosed(e))throw new rt.ErrnoError(8);if(0===(2097155&e.flags))throw new rt.ErrnoError(8);if(rt.isDir(e.node.mode))throw new rt.ErrnoError(31);if(!e.stream_ops.write)throw new rt.ErrnoError(28);e.seekable&&1024&e.flags&&rt.llseek(e,0,2);var s="undefined"!==typeof i;if(s){if(!e.seekable)throw new rt.ErrnoError(70)}else i=e.position;var o=e.stream_ops.write(e,t,n,r,i,a);s||(e.position+=o);try{e.path&&rt.trackingDelegate.onWriteToFile&&rt.trackingDelegate.onWriteToFile(e.path)}catch(IQ){A("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+IQ.message)}return o},allocate:function(e,t,n){if(rt.isClosed(e))throw new rt.ErrnoError(8);if(t<0||n<=0)throw new rt.ErrnoError(28);if(0===(2097155&e.flags))throw new rt.ErrnoError(8);if(!rt.isFile(e.node.mode)&&!rt.isDir(e.node.mode))throw new rt.ErrnoError(43);if(!e.stream_ops.allocate)throw new rt.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:function(e,t,n,r,i,a){if(t>>>=0,0!==(2&i)&&0===(2&a)&&2!==(2097155&e.flags))throw new rt.ErrnoError(2);if(1===(2097155&e.flags))throw new rt.ErrnoError(2);if(!e.stream_ops.mmap)throw new rt.ErrnoError(43);return e.stream_ops.mmap(e,t,n,r,i,a)},msync:function(e,t,n,r,i){return n>>>=0,e&&e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,i):0},munmap:function(e){return 0},ioctl:function(e,t,n){if(!e.stream_ops.ioctl)throw new rt.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:function(e,t){if((t=t||{}).flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var n,r=rt.open(e,t.flags),i=rt.stat(e).size,a=new Uint8Array(i);return rt.read(r,a,0,i,0),"utf8"===t.encoding?n=V(a,0):"binary"===t.encoding&&(n=a),rt.close(r),n},writeFile:function(e,t,n){(n=n||{}).flags=n.flags||577;var r=rt.open(e,n.flags,n.mode);if("string"===typeof t){var i=new Uint8Array(X(t)+1),a=Y(t,i,0,i.length);rt.write(r,i,0,a,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");rt.write(r,t,0,t.byteLength,void 0,n.canOwn)}rt.close(r)},cwd:function(){return rt.currentPath},chdir:function(e){var t=rt.lookupPath(e,{follow:!0});if(null===t.node)throw new rt.ErrnoError(44);if(!rt.isDir(t.node.mode))throw new rt.ErrnoError(54);var n=rt.nodePermissions(t.node,"x");if(n)throw new rt.ErrnoError(n);rt.currentPath=t.path},createDefaultDirectories:function(){rt.mkdir("/tmp"),rt.mkdir("/home"),rt.mkdir("/home/web_user")},createDefaultDevices:function(){rt.mkdir("/dev"),rt.registerDevice(rt.makedev(1,3),{read:function(){return 0},write:function(e,t,n,r,i){return r}}),rt.mkdev("/dev/null",rt.makedev(1,3)),et.register(rt.makedev(5,0),et.default_tty_ops),et.register(rt.makedev(6,0),et.default_tty1_ops),rt.mkdev("/dev/tty",rt.makedev(5,0)),rt.mkdev("/dev/tty1",rt.makedev(6,0));var e=function(){if("object"===typeof crypto&&"function"===typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}if(w)try{var t=ek();return function(){return t.randomBytes(1)[0]}}catch(IQ){}return function(){Ae("randomDevice")}}();rt.createDevice("/dev","random",e),rt.createDevice("/dev","urandom",e),rt.mkdir("/dev/shm"),rt.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){rt.mkdir("/proc");var e=rt.mkdir("/proc/self");rt.mkdir("/proc/self/fd"),rt.mount({mount:function(){var t=rt.createNode(e,"fd",16895,73);return t.node_ops={lookup:function(e,t){var n=+t,r=rt.getStream(n);if(!r)throw new rt.ErrnoError(8);var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return r.path}}};return i.parent=i,i}},t}},{},"/proc/self/fd")},createStandardStreams:function(){p.stdin?rt.createDevice("/dev","stdin",p.stdin):rt.symlink("/dev/tty","/dev/stdin"),p.stdout?rt.createDevice("/dev","stdout",null,p.stdout):rt.symlink("/dev/tty","/dev/stdout"),p.stderr?rt.createDevice("/dev","stderr",null,p.stderr):rt.symlink("/dev/tty1","/dev/stderr");rt.open("/dev/stdin",0),rt.open("/dev/stdout",1),rt.open("/dev/stderr",1)},ensureErrnoError:function(){rt.ErrnoError||(rt.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},rt.ErrnoError.prototype=new Error,rt.ErrnoError.prototype.constructor=rt.ErrnoError,[44].forEach((function(e){rt.genericErrors[e]=new rt.ErrnoError(e),rt.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:function(){rt.ensureErrnoError(),rt.nameTable=new Array(4096),rt.mount(nt,{},"/"),rt.createDefaultDirectories(),rt.createDefaultDevices(),rt.createSpecialDirectories(),rt.filesystems={MEMFS:nt}},init:function(e,t,n){rt.init.initialized=!0,rt.ensureErrnoError(),p.stdin=e||p.stdin,p.stdout=t||p.stdout,p.stderr=n||p.stderr,rt.createStandardStreams()},quit:function(){rt.init.initialized=!1;var e=p._fflush;e&&e(0);for(var t=0;t<rt.streams.length;t++){var n=rt.streams[t];n&&rt.close(n)}},getMode:function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n},findObject:function(e,t){var n=rt.analyzePath(e,t);return n.exists?n.object:null},analyzePath:function(e,t){try{e=(r=rt.lookupPath(e,{follow:!t})).path}catch(IQ){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=rt.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=Je.basename(e),r=rt.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(IQ){n.error=IQ.errno}return n},createPath:function(e,t,n,r){e="string"===typeof e?e:rt.getPath(e);for(var i=t.split("/").reverse();i.length;){var a=i.pop();if(a){var s=Je.join2(e,a);try{rt.mkdir(s)}catch(IQ){}e=s}}return s},createFile:function(e,t,n,r,i){var a=Je.join2("string"===typeof e?e:rt.getPath(e),t),s=rt.getMode(r,i);return rt.create(a,s)},createDataFile:function(e,t,n,r,i,a){var s=t?Je.join2("string"===typeof e?e:rt.getPath(e),t):e,o=rt.getMode(r,i),u=rt.create(s,o);if(n){if("string"===typeof n){for(var l=new Array(n.length),c=0,h=n.length;c<h;++c)l[c]=n.charCodeAt(c);n=l}rt.chmod(u,146|o);var p=rt.open(u,577);rt.write(p,n,0,n.length,0,a),rt.close(p),rt.chmod(u,o)}return u},createDevice:function(e,t,n,r){var i=Je.join2("string"===typeof e?e:rt.getPath(e),t),a=rt.getMode(!!n,!!r);rt.createDevice.major||(rt.createDevice.major=64);var s=rt.makedev(rt.createDevice.major++,0);return rt.registerDevice(s,{open:function(e){e.seekable=!1},close:function(e){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,t,r,i,a){for(var s=0,o=0;o<i;o++){var u;try{u=n()}catch(IQ){throw new rt.ErrnoError(29)}if(void 0===u&&0===s)throw new rt.ErrnoError(6);if(null===u||void 0===u)break;s++,t[r+o]=u}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,n,i,a){for(var s=0;s<i;s++)try{r(t[n+s])}catch(IQ){throw new rt.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),s}}),rt.mkdev(i,a,s)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!==typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!v)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=fr(v(e.url),!0),e.usedBytes=e.contents.length}catch(IQ){throw new rt.ErrnoError(29)}},createLazyFile:function(e,t,n,r,i){function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},a.prototype.setDataGetter=function(e){this.getter=e},a.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),i=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,a=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,s=1048576;i||(s=r);var o=this;o.setDataGetter((function(e){var t=e*s,i=(e+1)*s-1;if(i=Math.min(i,r-1),"undefined"===typeof o.chunks[e]&&(o.chunks[e]=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",n,!1),r!==s&&i.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(i.responseType="arraybuffer"),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw new Error("Couldn't load "+n+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):fr(i.responseText||"",!0)}(t,i)),"undefined"===typeof o.chunks[e])throw new Error("doXHR failed!");return o.chunks[e]})),!a&&r||(s=r=1,r=this.getter(0).length,s=r,D("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=s,this.lengthKnown=!0},"undefined"!==typeof XMLHttpRequest){if(!I)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var s=new a;Object.defineProperties(s,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var o={isDevice:!1,contents:s}}else o={isDevice:!1,url:n};var u=rt.createFile(e,t,o,r,i);o.contents?u.contents=o.contents:o.url&&(u.contents=null,u.url=o.url),Object.defineProperties(u,{usedBytes:{get:function(){return this.contents.length}}});var l={};return Object.keys(u.stream_ops).forEach((function(e){var t=u.stream_ops[e];l[e]=function(){return rt.forceLoadFile(u),t.apply(null,arguments)}})),l.read=function(e,t,n,r,i){rt.forceLoadFile(u);var a=e.node.contents;if(i>=a.length)return 0;var s=Math.min(a.length-i,r);if(a.slice)for(var o=0;o<s;o++)t[n+o]=a[i+o];else for(o=0;o<s;o++)t[n+o]=a.get(i+o);return s},u.stream_ops=l,u},createPreloadedFile:function(e,t,n,r,i,a,s,o,u,l){Browser.init();var c=t?$e.resolve(Je.join2(e,t)):e;function h(n){function h(n){l&&l(),o||rt.createDataFile(e,t,n,r,i,u),a&&a(),De()}var f=!1;p.preloadPlugins.forEach((function(e){f||e.canHandle(c)&&(e.handle(n,c,h,(function(){s&&s(),De()})),f=!0)})),f||h(n)}Ce(),"string"==typeof n?function(e,t,n,r){var i=r?"":"al "+e;m(e,(function(n){G(n,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(n)),i&&De()}),(function(t){if(!n)throw'Loading data file "'+e+'" failed.';n()})),i&&Ce()}(n,(function(e){h(e)}),s):h(n)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=rt.indexedDB();try{var i=r.open(rt.DB_NAME(),rt.DB_VERSION)}catch(IQ){return n(IQ)}i.onupgradeneeded=function(){D("creating db"),i.result.createObjectStore(rt.DB_STORE_NAME)},i.onsuccess=function(){var r=i.result.transaction([rt.DB_STORE_NAME],"readwrite"),a=r.objectStore(rt.DB_STORE_NAME),s=0,o=0,u=e.length;function l(){0==o?t():n()}e.forEach((function(e){var t=a.put(rt.analyzePath(e).object.contents,e);t.onsuccess=function(){++s+o==u&&l()},t.onerror=function(){o++,s+o==u&&l()}})),r.onerror=n},i.onerror=n},loadFilesFromDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=rt.indexedDB();try{var i=r.open(rt.DB_NAME(),rt.DB_VERSION)}catch(IQ){return n(IQ)}i.onupgradeneeded=n,i.onsuccess=function(){var r=i.result;try{var a=r.transaction([rt.DB_STORE_NAME],"readonly")}catch(IQ){return void n(IQ)}var s=a.objectStore(rt.DB_STORE_NAME),o=0,u=0,l=e.length;function c(){0==u?t():n()}e.forEach((function(e){var t=s.get(e);t.onsuccess=function(){rt.analyzePath(e).exists&&rt.unlink(e),rt.createDataFile(Je.dirname(e),Je.basename(e),t.result,!0,!0,!0),++o+u==l&&c()},t.onerror=function(){u++,o+u==l&&c()}})),a.onerror=n},i.onerror=n}},it={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,t,n){if("/"===t[0])return t;var r;if(-100===e)r=rt.cwd();else{var i=rt.getStream(e);if(!i)throw new rt.ErrnoError(8);r=i.path}if(0==t.length){if(!n)throw new rt.ErrnoError(44);return r}return Je.join2(r,t)},doStat:function(e,t,n){try{var r=e(t)}catch(IQ){if(IQ&&IQ.node&&Je.normalize(t)!==Je.normalize(rt.getPath(IQ.node)))return-54;throw IQ}return o()[n>>>2]=r.dev,o()[n+4>>>2]=0,o()[n+8>>>2]=r.ino,o()[n+12>>>2]=r.mode,o()[n+16>>>2]=r.nlink,o()[n+20>>>2]=r.uid,o()[n+24>>>2]=r.gid,o()[n+28>>>2]=r.rdev,o()[n+32>>>2]=0,Me=[r.size>>>0,(Ne=r.size,+Math.abs(Ne)>=1?Ne>0?(0|Math.min(+Math.floor(Ne/4294967296),4294967295))>>>0:~~+Math.ceil((Ne-+(~~Ne>>>0))/4294967296)>>>0:0)],o()[n+40>>>2]=Me[0],o()[n+44>>>2]=Me[1],o()[n+48>>>2]=4096,o()[n+52>>>2]=r.blocks,o()[n+56>>>2]=r.atime.getTime()/1e3|0,o()[n+60>>>2]=0,o()[n+64>>>2]=r.mtime.getTime()/1e3|0,o()[n+68>>>2]=0,o()[n+72>>>2]=r.ctime.getTime()/1e3|0,o()[n+76>>>2]=0,Me=[r.ino>>>0,(Ne=r.ino,+Math.abs(Ne)>=1?Ne>0?(0|Math.min(+Math.floor(Ne/4294967296),4294967295))>>>0:~~+Math.ceil((Ne-+(~~Ne>>>0))/4294967296)>>>0:0)],o()[n+80>>>2]=Me[0],o()[n+84>>>2]=Me[1],0},doMsync:function(e,t,n,r,a){var s=i().slice(e,e+n);rt.msync(t,s,a,n,r)},doMkdir:function(e,t){return"/"===(e=Je.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),rt.mkdir(e,t,0),0},doMknod:function(e,t,n){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return rt.mknod(e,t,n),0},doReadlink:function(e,t,n){if(n<=0)return-28;var i=rt.readlink(e),a=Math.min(n,X(i)),s=r()[t+a>>>0];return q(i,t,n+1),r()[t+a>>>0]=s,a},doAccess:function(e,t){if(-8&t)return-28;var n;if(!(n=rt.lookupPath(e,{follow:!0}).node))return-44;var r="";return 4&t&&(r+="r"),2&t&&(r+="w"),1&t&&(r+="x"),r&&rt.nodePermissions(n,r)?-2:0},doDup:function(e,t,n){var r=rt.getStream(n);return r&&rt.close(r),rt.open(e,t,0,n,n).fd},doReadv:function(e,t,n,i){for(var a=0,s=0;s<n;s++){var u=o()[t+8*s>>>2],l=o()[t+(8*s+4)>>>2],c=rt.read(e,r(),u,l,i);if(c<0)return-1;if(a+=c,c<l)break}return a},doWritev:function(e,t,n,i){for(var a=0,s=0;s<n;s++){var u=o()[t+8*s>>>2],l=o()[t+(8*s+4)>>>2],c=rt.write(e,r(),u,l,i);if(c<0)return-1;a+=c}return a},varargs:void 0,get:function(){return it.varargs+=4,o()[it.varargs-4>>>2]},getStr:function(e){return W(e)},getStreamFromFD:function(e){var t=rt.getStream(e);if(!t)throw new rt.ErrnoError(8);return t},get64:function(e,t){return e}};function at(e,t,n){if(k)return Pn(2,1,e,t,n);it.varargs=n;try{var r=it.getStreamFromFD(e);switch(t){case 0:return(i=it.get())<0?-28:rt.open(r.path,r.flags,0,i).fd;case 1:case 2:case 13:case 14:return 0;case 3:return r.flags;case 4:var i=it.get();return r.flags|=i,0;case 12:i=it.get();return a()[i+0>>>1]=2,0;case 16:case 8:default:return-28;case 9:return Ve(28),-1}}catch(IQ){return"undefined"!==typeof rt&&IQ instanceof rt.ErrnoError||Ae(IQ),-IQ.errno}}function st(e,t,n){if(k)return Pn(3,1,e,t,n);it.varargs=n;try{var r=it.getStreamFromFD(e);switch(t){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return r.tty?0:-59;case 21519:if(!r.tty)return-59;var i=it.get();return o()[i>>>2]=0,0;case 21520:return r.tty?-28:-59;case 21531:i=it.get();return rt.ioctl(r,t,i);default:Ae("bad ioctl syscall "+t)}}catch(IQ){return"undefined"!==typeof rt&&IQ instanceof rt.ErrnoError||Ae(IQ),-IQ.errno}}function ot(e,t,n){if(k)return Pn(4,1,e,t,n);it.varargs=n;try{var r=it.getStr(e),i=n?it.get():0;return rt.open(r,t,i).fd}catch(IQ){return"undefined"!==typeof rt&&IQ instanceof rt.ErrnoError||Ae(IQ),-IQ.errno}}var ut={};function lt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function ct(e){return this.fromWireType(u()[e>>>2])}var ht={},pt={},ft={},dt=48,vt=57;function mt(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=dt&&t<=vt?"_"+e:e}function yt(e,t){return e=mt(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function gt(e,t){var n=yt(t,(function(e){this.name=t,this.message=e;var n=new Error(e).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var _t=void 0;function Tt(e){throw new _t(e)}function Et(e,t,n){function r(t){var r=n(t);r.length!==e.length&&Tt("Mismatched type converter count");for(var i=0;i<e.length;++i)Rt(e[i],r[i])}e.forEach((function(e){ft[e]=t}));var i=new Array(t.length),a=[],s=0;t.forEach((function(e,t){pt.hasOwnProperty(e)?i[t]=pt[e]:(a.push(e),ht.hasOwnProperty(e)||(ht[e]=[]),ht[e].push((function(){i[t]=pt[e],++s===a.length&&r(i)})))})),0===a.length&&r(i)}var xt={};function bt(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var It=void 0;function wt(e){for(var t="",n=e;i()[n>>>0];)t+=It[i()[n++>>>0]];return t}var kt=void 0;function St(e){throw new kt(e)}function Rt(e,t,n){if(n=n||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||St('type "'+r+'" must have a positive integer typeid pointer'),pt.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;St("Cannot register type '"+r+"' twice")}if(pt[e]=t,delete ft[e],ht.hasOwnProperty(e)){var i=ht[e];delete ht[e],i.forEach((function(e){e()}))}}function Ct(e){if(!(this instanceof Ht))return!1;if(!(e instanceof Ht))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,r=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;r.baseClass;)i=r.upcast(i),r=r.baseClass;return t===r&&n===i}function Dt(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function At(e){St(e.$$.ptrType.registeredClass.name+" instance already deleted")}var Ot=!1;function Nt(e){}function Mt(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function Pt(e){return"undefined"===typeof FinalizationGroup?(Pt=function(e){return e},e):(Ot=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next()){var n=t.value;n.ptr?Mt(n):console.warn("object already deleted: "+n.ptr)}})),Nt=function(e){Ot.unregister(e.$$)},(Pt=function(e){return Ot.register(e,e.$$,e.$$),e})(e))}function Ft(){if(this.$$.ptr||At(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Pt(Object.create(Object.getPrototypeOf(this),{$$:{value:Dt(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function Lt(){this.$$.ptr||At(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&St("Object already scheduled for deletion"),Nt(this),Mt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Ut(){return!this.$$.ptr}var Zt=void 0,Bt=[];function zt(){for(;Bt.length;){var e=Bt.pop();e.$$.deleteScheduled=!1,e.delete()}}function Gt(){return this.$$.ptr||At(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&St("Object already scheduled for deletion"),Bt.push(this),1===Bt.length&&Zt&&Zt(zt),this.$$.deleteScheduled=!0,this}function Ht(){}var jt={};function Vt(e,t,n){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||St("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}function Wt(e,t,n){p.hasOwnProperty(e)?((void 0===n||void 0!==p[e].overloadTable&&void 0!==p[e].overloadTable[n])&&St("Cannot register public name '"+e+"' twice"),Vt(p,e,e),p.hasOwnProperty(n)&&St("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),p[e].overloadTable[n]=t):(p[e]=t,void 0!==n&&(p[e].numArguments=n))}function Yt(e,t,n,r,i,a,s,o){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=i,this.getActualType=a,this.upcast=s,this.downcast=o,this.pureVirtualFunctions=[]}function qt(e,t,n){for(;t!==n;)t.upcast||St("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function Xt(e,t){if(null===t)return this.isReference&&St("null is not a valid "+this.name),0;t.$$||St('Cannot pass "'+Sn(t)+'" as a '+this.name),t.$$.ptr||St("Cannot pass deleted object as a pointer of type "+this.name);var n=t.$$.ptrType.registeredClass;return qt(t.$$.ptr,n,this.registeredClass)}function Kt(e,t){var n;if(null===t)return this.isReference&&St("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,n),n):0;t.$$||St('Cannot pass "'+Sn(t)+'" as a '+this.name),t.$$.ptr||St("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&St("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;if(n=qt(t.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&St("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:St("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var i=t.clone();n=this.rawShare(n,In((function(){i.delete()}))),null!==e&&e.push(this.rawDestructor,n)}break;default:St("Unsupporting sharing policy")}return n}function Qt(e,t){if(null===t)return this.isReference&&St("null is not a valid "+this.name),0;t.$$||St('Cannot pass "'+Sn(t)+'" as a '+this.name),t.$$.ptr||St("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&St("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;return qt(t.$$.ptr,n,this.registeredClass)}function Jt(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function $t(e){this.rawDestructor&&this.rawDestructor(e)}function en(e){null!==e&&e.delete()}function tn(e,t,n){if(t===n)return e;if(void 0===n.baseClass)return null;var r=tn(e,t,n.baseClass);return null===r?null:n.downcast(r)}function nn(){return Object.keys(sn).length}function rn(){var e=[];for(var t in sn)sn.hasOwnProperty(t)&&e.push(sn[t]);return e}function an(e){Zt=e,Bt.length&&Zt&&Zt(zt)}var sn={};function on(e,t){return t=function(e,t){for(void 0===t&&St("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),sn[t]}function un(e,t){return t.ptrType&&t.ptr||Tt("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!==!!t.smartPtr&&Tt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Pt(Object.create(e,{$$:{value:t}}))}function ln(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=on(this.registeredClass,t);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var r=n.clone();return this.destructor(e),r}function i(){return this.isSmartPointer?un(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):un(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var a,s=this.registeredClass.getActualType(t),o=jt[s];if(!o)return i.call(this);a=this.isConst?o.constPointerType:o.pointerType;var u=tn(t,this.registeredClass,a.registeredClass);return null===u?i.call(this):this.isSmartPointer?un(a.registeredClass.instancePrototype,{ptrType:a,ptr:u,smartPtrType:this,smartPtr:e}):un(a.registeredClass.instancePrototype,{ptrType:a,ptr:u})}function cn(e,t,n,r,i,a,s,o,u,l,c){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=r,this.isSmartPointer=i,this.pointeeType=a,this.sharingPolicy=s,this.rawGetPointee=o,this.rawConstructor=u,this.rawShare=l,this.rawDestructor=c,i||void 0!==t.baseClass?this.toWireType=Kt:r?(this.toWireType=Xt,this.destructorFunction=null):(this.toWireType=Qt,this.destructorFunction=null)}function hn(e,t,n){p.hasOwnProperty(e)||Tt("Replacing nonexistant public symbol"),void 0!==p[e].overloadTable&&void 0!==n?p[e].overloadTable[n]=t:(p[e]=t,p[e].argCount=n)}function pn(e,t,n){return e.includes("j")?function(e,t,n){var r=p["dynCall_"+e];return n&&n.length?r.apply(null,[t].concat(n)):r.call(null,t)}(e,t,n):de.get(t).apply(null,n)}function fn(e,t){var n=(e=wt(e)).includes("j")?function(e,t){var n=[];return function(){n.length=arguments.length;for(var r=0;r<arguments.length;r++)n[r]=arguments[r];return pn(e,t,n)}}(e,t):de.get(t);return"function"!==typeof n&&St("unknown function pointer with signature "+e+": "+t),n}var dn=void 0;function vn(e){var t=gr(e),n=wt(t);return yr(t),n}function mn(e,t){var n=[],r={};throw t.forEach((function e(t){r[t]||pt[t]||(ft[t]?ft[t].forEach(e):(n.push(t),r[t]=!0))})),new dn(e+": "+n.map(vn).join([", "]))}function yn(e,t){for(var n=[],r=0;r<e;r++)n.push(o()[(t>>2)+r>>>0]);return n}function gn(e,t,n,r,i){var a=t.length;a<2&&St("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var s=null!==t[1]&&null!==n,o=!1,u=1;u<t.length;++u)if(null!==t[u]&&void 0===t[u].destructorFunction){o=!0;break}var l="void"!==t[0].name,c="",h="";for(u=0;u<a-2;++u)c+=(0!==u?", ":"")+"arg"+u,h+=(0!==u?", ":"")+"arg"+u+"Wired";var p="return function "+mt(e)+"("+c+") {\nif (arguments.length !== "+(a-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(a-2)+" args!');\n}\n";o&&(p+="var destructors = [];\n");var f=o?"destructors":"null",d=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],v=[St,r,i,lt,t[0],t[1]];s&&(p+="var thisWired = classParam.toWireType("+f+", this);\n");for(u=0;u<a-2;++u)p+="var arg"+u+"Wired = argType"+u+".toWireType("+f+", arg"+u+"); // "+t[u+2].name+"\n",d.push("argType"+u),v.push(t[u+2]);if(s&&(h="thisWired"+(h.length>0?", ":"")+h),p+=(l?"var rv = ":"")+"invoker(fn"+(h.length>0?", ":"")+h+");\n",o)p+="runDestructors(destructors);\n";else for(u=s?1:2;u<t.length;++u){var m=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==t[u].destructorFunction&&(p+=m+"_dtor("+m+"); // "+t[u].name+"\n",d.push(m+"_dtor"),v.push(t[u].destructorFunction))}l&&(p+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),p+="}\n",d.push(p);var y=function(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=yt(e.name||"unknownFunctionName",(function(){}));n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return i instanceof Object?i:r}(Function,d).apply(null,v);return y}var _n=[],Tn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function En(e){e>4&&0===--Tn[e].refcount&&(Tn[e]=void 0,_n.push(e))}function xn(){for(var e=0,t=5;t<Tn.length;++t)void 0!==Tn[t]&&++e;return e}function bn(){for(var e=5;e<Tn.length;++e)if(void 0!==Tn[e])return Tn[e];return null}function In(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=_n.length?_n.pop():Tn.length;return Tn[t]={refcount:1,value:e},t}}function wn(e,t,n){switch(t){case 0:return function(e){var t=n?r():i();return this.fromWireType(t[e>>>0])};case 1:return function(e){var t=n?a():s();return this.fromWireType(t[e>>>1])};case 2:return function(e){var t=n?o():u();return this.fromWireType(t[e>>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function kn(e,t){var n=pt[e];return void 0===n&&St(t+" has unknown type "+vn(e)),n}function Sn(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function Rn(e,t){switch(t){case 2:return function(e){return this.fromWireType((U.buffer!=K&&fe(U.buffer),re)[e>>>2])};case 3:return function(e){return this.fromWireType(l()[e>>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Cn(e,t,n){switch(t){case 0:return n?function(e){return r()[e>>>0]}:function(e){return i()[e>>>0]};case 1:return n?function(e){return a()[e>>>1]}:function(e){return s()[e>>>1]};case 2:return n?function(e){return o()[e>>>2]}:function(e){return u()[e>>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Dn(e){return e||St("Cannot use deleted val. handle = "+e),Tn[e].value}var An={};function On(e){var t=An[e];return void 0===t?wt(e):t}function Nn(){return"object"===typeof globalThis?globalThis:Function("return this")()}var Mn=[];function Pn(e,t){for(var n=arguments.length-2,r=Dr(),i=n,a=Or(8*i),s=a>>3,o=0;o<n;o++){var u=arguments[2+o];l()[s+o>>>0]=u}var c=br(e,i,a,t);return Ar(r),c}var Fn=[];function Ln(e){try{return U.grow(e-K.byteLength+65535>>>16),fe(U.buffer),1}catch(IQ){}}var Un={inEventHandler:0,removeAllEventListeners:function(){for(var e=Un.eventHandlers.length-1;e>=0;--e)Un._removeHandler(e);Un.eventHandlers=[],Un.deferredCalls=[]},registerRemoveEventListeners:function(){Un.removeEventListenersRegistered||(_e.push(Un.removeAllEventListeners),Un.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function r(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var i in Un.deferredCalls){var a=Un.deferredCalls[i];if(a.targetFunction==e&&r(a.argsList,n))return}Un.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),Un.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<Un.deferredCalls.length;++t)Un.deferredCalls[t].targetFunction==e&&(Un.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return Un.inEventHandler&&Un.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(Un.canPerformEventHandlerRequests())for(var e=0;e<Un.deferredCalls.length;++e){var t=Un.deferredCalls[e];Un.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<Un.eventHandlers.length;++n)Un.eventHandlers[n].target!=e||t&&t!=Un.eventHandlers[n].eventTypeString||Un._removeHandler(n--)},_removeHandler:function(e){var t=Un.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),Un.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++Un.inEventHandler,Un.currentEventHandler=e,Un.runDeferredCalls(),e.handlerFunc(t),Un.runDeferredCalls(),--Un.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),Un.eventHandlers.push(e),Un.registerRemoveEventListeners();else for(var n=0;n<Un.eventHandlers.length;++n)Un.eventHandlers[n].target==e.target&&Un.eventHandlers[n].eventTypeString==e.eventTypeString&&Un._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(e,t,n,r,i){var a=Dr(),s=Or(12);o()[s>>>2]=n,o()[s+4>>>2]=r,o()[s+8>>>2]=i,Ir(0,e,637534208,t,r,s),Ar(a)},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return He.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function Zn(e,t,n,r){var i=Dr(),a=Or(12),s=0;t&&(s=function(e){var t=X(e)+1,n=mr(t);return q(e,n,t),n}(t)),o()[a>>>2]=s,o()[a+4>>>2]=n,o()[a+8>>>2]=r,Ir(0,e,657457152,0,s,a),Ar(i)}var Bn=[0,"undefined"!==typeof document?document:0,"undefined"!==typeof window?window:0];function zn(e){var t;return e=(t=e)>2?W(t):t,Bn[e]||("undefined"!==typeof document?document.querySelector(e):void 0)}function Gn(e){return zn(e)}function Hn(e,t,n){var r=Gn(e);if(!r)return-4;if(r.canvasSharedPtr&&(o()[r.canvasSharedPtr>>>2]=t,o()[r.canvasSharedPtr+4>>>2]=n),!r.offscreenCanvas&&r.controlTransferredOffscreen)return r.canvasSharedPtr?(function(e,t,n,r){Zn(e,t=t?W(t):"",n,r)}(o()[r.canvasSharedPtr+8>>>2],e,t,n),1):-4;r.offscreenCanvas&&(r=r.offscreenCanvas);var i=!1;if(r.GLctxObject&&r.GLctxObject.GLctx){var a=r.GLctxObject.GLctx.getParameter(2978);i=0===a[0]&&0===a[1]&&a[2]===r.width&&a[3]===r.height}return r.width=t,r.height=n,i&&r.GLctxObject.GLctx.viewport(0,0,t,n),0}function jn(e,t,n){return k?Pn(5,1,e,t,n):Hn(e,t,n)}var Vn={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function(e){Vn.lastError||(Vn.lastError=e)},getNewId:function(e){for(var t=Vn.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:function(e,t,n,r){for(var i="",a=0;a<t;++a){var s=r?o()[r+4*a>>>2]:-1;i+=W(o()[n+4*a>>>2],s<0?void 0:s)}return i},createContext:function(e,t){e.getContextSafariWebGL2Fixed||(e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=function(t,n){var r=e.getContextSafariWebGL2Fixed(t,n);return"webgl"==t==r instanceof WebGLRenderingContext?r:null});var n=e.getContext("webgl",t);return n?Vn.registerContext(n,t):0},registerContext:function(e,t){var n=mr(8);o()[n+4>>>2]=Rr();var r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=r),Vn.contexts[n]=r,("undefined"===typeof t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&Vn.initExtensions(r),n},makeContextCurrent:function(e){return Vn.currentContext=Vn.contexts[e],p.ctx=ur=Vn.currentContext&&Vn.currentContext.GLctx,!(e&&!ur)},getContext:function(e){return Vn.contexts[e]},deleteContext:function(e){Vn.currentContext===Vn.contexts[e]&&(Vn.currentContext=null),"object"===typeof Un&&Un.removeAllHandlersOnTarget(Vn.contexts[e].GLctx.canvas),Vn.contexts[e]&&Vn.contexts[e].GLctx.canvas&&(Vn.contexts[e].GLctx.canvas.GLctxObject=void 0),yr(Vn.contexts[e].handle),Vn.contexts[e]=null},initExtensions:function(e){if(e||(e=Vn.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t,n=e.GLctx;!function(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,r,i){t.drawArraysInstancedANGLE(e,n,r,i)},e.drawElementsInstanced=function(e,n,r,i,a){t.drawElementsInstancedANGLE(e,n,r,i,a)}}(n),function(e){var t=e.getExtension("OES_vertex_array_object");if(t)e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)}}(n),function(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)}}(n),n.disjointTimerQueryExt=n.getExtension("EXT_disjoint_timer_query"),(t=n).multiDrawWebgl=t.getExtension("WEBGL_multi_draw"),(n.getSupportedExtensions()||[]).forEach((function(e){e.includes("lose_context")||e.includes("debug")||n.getExtension(e)}))}}},Wn=["default","low-power","high-performance"];var Yn={};function qn(){if(!qn.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"===typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:E||"./this.program"};for(var t in Yn)void 0===Yn[t]?delete e[t]:e[t]=Yn[t];var n=[];for(var t in e)n.push(t+"="+e[t]);qn.strings=n}return qn.strings}function Xn(e,t){if(k)return Pn(6,1,e,t);try{var n=0;return qn().forEach((function(i,a){var s=t+n;o()[e+4*a>>>2]=s,function(e,t,n){for(var i=0;i<e.length;++i)r()[t++>>>0]=e.charCodeAt(i);n||(r()[t>>>0]=0)}(i,s),n+=i.length+1})),0}catch(IQ){return"undefined"!==typeof rt&&IQ instanceof rt.ErrnoError||Ae(IQ),IQ.errno}}function Kn(e,t){if(k)return Pn(7,1,e,t);try{var n=qn();o()[e>>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),o()[t>>>2]=r,0}catch(IQ){return"undefined"!==typeof rt&&IQ instanceof rt.ErrnoError||Ae(IQ),IQ.errno}}function Qn(e){if(k)return Pn(8,1,e);try{var t=it.getStreamFromFD(e);return rt.close(t),0}catch(IQ){return"undefined"!==typeof rt&&IQ instanceof rt.ErrnoError||Ae(IQ),IQ.errno}}function Jn(e,t,n,r){if(k)return Pn(9,1,e,t,n,r);try{var i=it.getStreamFromFD(e),a=it.doReadv(i,t,n);return o()[r>>>2]=a,0}catch(IQ){return"undefined"!==typeof rt&&IQ instanceof rt.ErrnoError||Ae(IQ),IQ.errno}}function $n(e,t,n,r,i){if(k)return Pn(10,1,e,t,n,r,i);try{var a=it.getStreamFromFD(e),s=4294967296*n+(t>>>0),u=9007199254740992;return s<=-u||s>=u?-61:(rt.llseek(a,s,r),Me=[a.position>>>0,(Ne=a.position,+Math.abs(Ne)>=1?Ne>0?(0|Math.min(+Math.floor(Ne/4294967296),4294967295))>>>0:~~+Math.ceil((Ne-+(~~Ne>>>0))/4294967296)>>>0:0)],o()[i>>>2]=Me[0],o()[i+4>>>2]=Me[1],a.getdents&&0===s&&0===r&&(a.getdents=null),0)}catch(IQ){return"undefined"!==typeof rt&&IQ instanceof rt.ErrnoError||Ae(IQ),IQ.errno}}function er(e,t,n,r){if(k)return Pn(11,1,e,t,n,r);try{var i=it.getStreamFromFD(e),a=it.doWritev(i,t,n);return o()[r>>>2]=a,0}catch(IQ){return"undefined"!==typeof rt&&IQ instanceof rt.ErrnoError||Ae(IQ),IQ.errno}}function tr(e){if(k)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var t=He.getNewWorker();if(!t)return 6;if(void 0!==t.pthread)throw"Internal error!";if(!e.pthread_ptr)throw"Internal error, no pthread ptr!";He.runningWorkers.push(t);for(var n=mr(512),r=0;r<128;++r)o()[n+4*r>>>2]=0;var i=e.stackBase+e.stackSize,a=He.pthreads[e.pthread_ptr]={worker:t,stackBase:e.stackBase,stackSize:e.stackSize,allocatedOwnStack:e.allocatedOwnStack,threadInfoStruct:e.pthread_ptr},s=a.threadInfoStruct>>2;Atomics.store(u(),s+16,e.detached),Atomics.store(u(),s+25,n),Atomics.store(u(),s+10,a.threadInfoStruct),Atomics.store(u(),s+20,e.stackSize),Atomics.store(u(),s+19,i),Atomics.store(u(),s+26,e.stackSize),Atomics.store(u(),s+28,i),Atomics.store(u(),s+29,e.detached);var l=kr()+40;Atomics.store(u(),s+43,l),t.pthread=a;var c={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr,stackBase:e.stackBase,stackSize:e.stackSize};return t.runPthread=function(){c.time=performance.now(),t.postMessage(c,e.transferList)},t.loaded&&(t.runPthread(),delete t.runPthread),0}function nr(e){return e%4===0&&(e%100!==0||e%400===0)}function rr(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}var ir=[31,29,31,30,31,30,31,31,30,31,30,31],ar=[31,28,31,30,31,30,31,31,30,31,30,31];function sr(e,t){for(var n=new Date(e.getTime());t>0;){var r=nr(n.getFullYear()),i=n.getMonth(),a=(r?ir:ar)[i];if(!(t>a-n.getDate()))return n.setDate(n.getDate()+t),n;t-=a-n.getDate()+1,n.setDate(1),i<11?n.setMonth(i+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}function or(e,t,n,i){var a=o()[i+40>>>2],s={tm_sec:o()[i>>>2],tm_min:o()[i+4>>>2],tm_hour:o()[i+8>>>2],tm_mday:o()[i+12>>>2],tm_mon:o()[i+16>>>2],tm_year:o()[i+20>>>2],tm_wday:o()[i+24>>>2],tm_yday:o()[i+28>>>2],tm_isdst:o()[i+32>>>2],tm_gmtoff:o()[i+36>>>2],tm_zone:a?W(a):""},u=W(n),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in l)u=u.replace(new RegExp(c,"g"),l[c]);var h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["January","February","March","April","May","June","July","August","September","October","November","December"];function f(e,t,n){for(var r="number"===typeof e?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function d(e,t){return f(e,t,"0")}function v(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function m(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function y(e){var t=sr(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),i=m(n),a=m(r);return v(i,t)<=0?v(a,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return h[e.tm_wday].substring(0,3)},"%A":function(e){return h[e.tm_wday]},"%b":function(e){return p[e.tm_mon].substring(0,3)},"%B":function(e){return p[e.tm_mon]},"%C":function(e){return d((e.tm_year+1900)/100|0,2)},"%d":function(e){return d(e.tm_mday,2)},"%e":function(e){return f(e.tm_mday,2," ")},"%g":function(e){return y(e).toString().substring(2)},"%G":function(e){return y(e)},"%H":function(e){return d(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),d(t,2)},"%j":function(e){return d(e.tm_mday+rr(nr(e.tm_year+1900)?ir:ar,e.tm_mon-1),3)},"%m":function(e){return d(e.tm_mon+1,2)},"%M":function(e){return d(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return d(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),n=0===t.getDay()?t:sr(t,7-t.getDay()),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(v(n,r)<0){var i=rr(nr(r.getFullYear())?ir:ar,r.getMonth()-1)-31,a=31-n.getDate()+i+r.getDate();return d(Math.ceil(a/7),2)}return 0===v(n,t)?"01":"00"},"%V":function(e){var t,n=new Date(e.tm_year+1900,0,4),r=new Date(e.tm_year+1901,0,4),i=m(n),a=m(r),s=sr(new Date(e.tm_year+1900,0,1),e.tm_yday);return v(s,i)<0?"53":v(a,s)<=0?"01":(t=i.getFullYear()<e.tm_year+1900?e.tm_yday+32-i.getDate():e.tm_yday+1-i.getDate(),d(Math.ceil(t/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),n=1===t.getDay()?t:sr(t,0===t.getDay()?1:7-t.getDay()+1),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(v(n,r)<0){var i=rr(nr(r.getFullYear())?ir:ar,r.getMonth()-1)-31,a=31-n.getDate()+i+r.getDate();return d(Math.ceil(a/7),2)}return 0===v(n,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var c in g)u.includes(c)&&(u=u.replace(new RegExp(c,"g"),g[c](s)));var _,T,E=fr(u,!1);return E.length>t?0:(_=E,T=e,r().set(_,T>>>0),E.length-1)}k||He.initMainThreadBlock();var ur,lr=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=rt.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r},cr=365,hr=146;Object.defineProperties(lr.prototype,{read:{get:function(){return(this.mode&cr)===cr},set:function(e){e?this.mode|=cr:this.mode&=-366}},write:{get:function(){return(this.mode&hr)===hr},set:function(e){e?this.mode|=hr:this.mode&=-147}},isFolder:{get:function(){return rt.isDir(this.mode)}},isDevice:{get:function(){return rt.isChrdev(this.mode)}}}),rt.FSNode=lr,rt.staticInit(),p.FS_createPath=rt.createPath,p.FS_createDataFile=rt.createDataFile,p.FS_createPreloadedFile=rt.createPreloadedFile,p.FS_createLazyFile=rt.createLazyFile,p.FS_createDevice=rt.createDevice,p.FS_unlink=rt.unlink,_t=p.InternalError=gt(Error,"InternalError"),function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);It=e}(),kt=p.BindingError=gt(Error,"BindingError"),Ht.prototype.isAliasOf=Ct,Ht.prototype.clone=Ft,Ht.prototype.delete=Lt,Ht.prototype.isDeleted=Ut,Ht.prototype.deleteLater=Gt,cn.prototype.getPointee=Jt,cn.prototype.destructor=$t,cn.prototype.argPackAdvance=8,cn.prototype.readValueFromPointer=ct,cn.prototype.deleteObject=en,cn.prototype.fromWireType=ln,p.getInheritedInstanceCount=nn,p.getLiveInheritedInstances=rn,p.flushPendingDeletes=zt,p.setDelayFunction=an,dn=p.UnboundTypeError=gt(Error,"UnboundTypeError"),p.count_emval_handles=xn,p.get_first_emval=bn;var pr=[null,function(e,t){if(k)return Pn(1,1,e,t)},at,st,ot,jn,Xn,Kn,Qn,Jn,$n,er];function fr(e,t,n){var r=n>0?n:X(e)+1,i=new Array(r),a=Y(e,i,0,i.length);return t&&(i.length=a),i}var dr,vr={z:function(e,t,n,r){Ae("Assertion failed: "+W(e)+", at: "+[t?W(t):"unknown filename",n,r?W(r):"unknown function"])},n:function(e){return mr(e+16)+16},v:function(e){var t=new Ye(e),n=t.get_exception_info();return n.get_caught()||(n.set_caught(!0),Xe--),n.set_rethrown(!1),qe.push(t),function(e){e.add_ref()}(n),t.get_exception_ptr()},y:function(){Mr(0);var e=qe.pop();!function(e){if(e.release_ref()&&!e.get_rethrown()){var t=e.get_destructor();t&&de.get(t)(e.excPtr),Qe(e.excPtr)}}(e.get_exception_info()),e.free(),Ke=0},c:function(){var e=Ke;if(!e)return F(0),0;var t=new We(e).get_type(),n=new Ye;if(n.set_base_ptr(e),n.set_adjusted_ptr(e),!t)return F(0),0|n.ptr;for(var r=Array.prototype.slice.call(arguments),i=0;i<r.length;i++){var a=r[i];if(0===a||a===t)break;if(Pr(a,t,n.get_adjusted_ptr_addr()))return F(a),0|n.ptr}return F(t),0|n.ptr},m:function(){var e=Ke;if(!e)return F(0),0;var t=new We(e).get_type(),n=new Ye;if(n.set_base_ptr(e),n.set_adjusted_ptr(e),!t)return F(0),0|n.ptr;for(var r=Array.prototype.slice.call(arguments),i=0;i<r.length;i++){var a=r[i];if(0===a||a===t)break;if(Pr(a,t,n.get_adjusted_ptr_addr()))return F(a),0|n.ptr}return F(t),0|n.ptr},C:Qe,ba:function(){var e=qe.pop();e||Ae("no exception to throw");var t=e.get_exception_info(),n=e.get_base_ptr();throw t.get_rethrown()?e.free():(qe.push(e),t.set_rethrown(!0),t.set_caught(!1),Xe++),Ke=n,n},La:function(e,t){He.threadExitHandlers.push((function(){de.get(e)(t)}))},o:function(e,t,n){throw new We(e).init(t,n),Ke=e,Xe++,e},ta:function(){return Xe},i:function(e){var t=new Ye(e),n=t.get_base_ptr();throw Ke||(Ke=n),t.free(),n},da:at,ua:st,va:ot,Oa:function(e){var t=ut[e];delete ut[e];var n=t.elements,r=n.length,i=n.map((function(e){return e.getterReturnType})).concat(n.map((function(e){return e.setterArgumentType}))),a=t.rawConstructor,s=t.rawDestructor;Et([e],i,(function(e){return n.forEach((function(t,n){var i=e[n],a=t.getter,s=t.getterContext,o=e[n+r],u=t.setter,l=t.setterContext;t.read=function(e){return i.fromWireType(a(s,e))},t.write=function(e,t){var n=[];u(l,e,o.toWireType(n,t)),lt(n)}})),[{name:t.name,fromWireType:function(e){for(var t=new Array(r),i=0;i<r;++i)t[i]=n[i].read(e);return s(e),t},toWireType:function(e,i){if(r!==i.length)throw new TypeError("Incorrect number of tuple elements for "+t.name+": expected="+r+", actual="+i.length);for(var o=a(),u=0;u<r;++u)n[u].write(o,i[u]);return null!==e&&e.push(s,o),o},argPackAdvance:8,readValueFromPointer:ct,destructorFunction:s}]}))},Ra:function(e){var t=xt[e];delete xt[e];var n=t.rawConstructor,r=t.rawDestructor,i=t.fields;Et([e],i.map((function(e){return e.getterReturnType})).concat(i.map((function(e){return e.setterArgumentType}))),(function(e){var a={};return i.forEach((function(t,n){var r=t.fieldName,s=e[n],o=t.getter,u=t.getterContext,l=e[n+i.length],c=t.setter,h=t.setterContext;a[r]={read:function(e){return s.fromWireType(o(u,e))},write:function(e,t){var n=[];c(h,e,l.toWireType(n,t)),lt(n)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var n in a)t[n]=a[n].read(e);return r(e),t},toWireType:function(e,t){for(var i in a)if(!(i in t))throw new TypeError('Missing field:  "'+i+'"');var s=n();for(i in a)a[i].write(s,t[i]);return null!==e&&e.push(r,s),s},argPackAdvance:8,readValueFromPointer:ct,destructorFunction:r}]}))},_a:function(e,t,n,r,i){},Ja:function(e,t,n,i,s){var u=bt(n);Rt(e,{name:t=wt(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?i:s},argPackAdvance:8,readValueFromPointer:function(e){var i;if(1===n)i=r();else if(2===n)i=a();else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);i=o()}return this.fromWireType(i[e>>>u])},destructorFunction:null})},O:function(e,t,n,r,i,a,s,o,u,l,c,h,p){c=wt(c),a=fn(i,a),o&&(o=fn(s,o)),l&&(l=fn(u,l)),p=fn(h,p);var f=mt(c);Wt(f,(function(){mn("Cannot construct "+c+" due to unbound types",[r])})),Et([e,t,n],r?[r]:[],(function(t){var n,i;t=t[0],i=r?(n=t.registeredClass).instancePrototype:Ht.prototype;var s=yt(f,(function(){if(Object.getPrototypeOf(this)!==u)throw new kt("Use 'new' to construct "+c);if(void 0===h.constructor_body)throw new kt(c+" has no accessible constructor");var e=h.constructor_body[arguments.length];if(void 0===e)throw new kt("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(h.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),u=Object.create(i,{constructor:{value:s}});s.prototype=u;var h=new Yt(c,s,u,p,n,a,o,l),d=new cn(c,h,!0,!1,!1),v=new cn(c+"*",h,!1,!1,!1),m=new cn(c+" const*",h,!1,!0,!1);return jt[e]={pointerType:v,constPointerType:m},hn(f,s),[d,v,m]}))},N:function(e,t,n,r,i,a){G(t>0);var s=yn(t,n);i=fn(r,i);var o=[a],u=[];Et([],[e],(function(e){var n="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new kt("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){mn("Cannot construct "+e.name+" due to unbound types",s)},Et([],s,(function(r){return e.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&St(n+" called with "+arguments.length+" arguments, expected "+(t-1)),u.length=0,o.length=t;for(var e=1;e<t;++e)o[e]=r[e].toWireType(u,arguments[e-1]);var a=i.apply(null,o);return lt(u),r[0].fromWireType(a)},[]})),[]}))},q:function(e,t,n,r,i,a,s,o){var u=yn(n,r);t=wt(t),a=fn(i,a),Et([],[e],(function(e){var r=(e=e[0]).name+"."+t;function i(){mn("Cannot call "+r+" due to unbound types",u)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),o&&e.registeredClass.pureVirtualFunctions.push(t);var l=e.registeredClass.instancePrototype,c=l[t];return void 0===c||void 0===c.overloadTable&&c.className!==e.name&&c.argCount===n-2?(i.argCount=n-2,i.className=e.name,l[t]=i):(Vt(l,t,r),l[t].overloadTable[n-2]=i),Et([],u,(function(i){var o=gn(r,i,e,a,s);return void 0===l[t].overloadTable?(o.argCount=n-2,l[t]=o):l[t].overloadTable[n-2]=o,[]})),[]}))},Ia:function(e,t){Rt(e,{name:t=wt(t),fromWireType:function(e){var t=Tn[e].value;return En(e),t},toWireType:function(e,t){return In(t)},argPackAdvance:8,readValueFromPointer:ct,destructorFunction:null})},Ma:function(e,t,n,r){var i=bt(n);function a(){}t=wt(t),a.values={},Rt(e,{name:t,constructor:a,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:wn(t,i,r),destructorFunction:null}),Wt(t,a)},T:function(e,t,n){var r=kn(e,"enum");t=wt(t);var i=r.constructor,a=Object.create(r.constructor.prototype,{value:{value:n},constructor:{value:yt(r.name+"_"+t,(function(){}))}});i.values[n]=a,i[t]=a},ja:function(e,t,n){var r=bt(n);Rt(e,{name:t=wt(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!==typeof t&&"boolean"!==typeof t)throw new TypeError('Cannot convert "'+Sn(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:Rn(t,r),destructorFunction:null})},t:function(e,t,n,r,i,a){var s=yn(t,n);e=wt(e),i=fn(r,i),Wt(e,(function(){mn("Cannot call "+e+" due to unbound types",s)}),t-1),Et([],s,(function(n){var r=[n[0],null].concat(n.slice(1));return hn(e,gn(e,r,null,i,a),t-1),[]}))},B:function(e,t,n,r,i){t=wt(t),-1===i&&(i=4294967295);var a=bt(n),s=function(e){return e};if(0===r){var o=32-8*n;s=function(e){return e<<o>>>o}}var u=t.includes("unsigned");Rt(e,{name:t,fromWireType:s,toWireType:function(e,n){if("number"!==typeof n&&"boolean"!==typeof n)throw new TypeError('Cannot convert "'+Sn(n)+'" to '+this.name);if(n<r||n>i)throw new TypeError('Passing a number "'+Sn(n)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+r+", "+i+"]!");return u?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:Cn(t,a,0!==r),destructorFunction:null})},x:function(e,t,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function i(e){e>>=2;var t=u(),n=t[e>>>0],i=t[e+1>>>0];return new r(K,i,n)}Rt(e,{name:n=wt(n),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},ka:function(e,t){var n="std::string"===(t=wt(t));Rt(e,{name:t,fromWireType:function(e){var t,r=u()[e>>>2];if(n)for(var a=e+4,s=0;s<=r;++s){var o=e+4+s;if(s==r||0==i()[o>>>0]){var l=W(a,o-a);void 0===t?t=l:(t+=String.fromCharCode(0),t+=l),a=o+1}}else{var c=new Array(r);for(s=0;s<r;++s)c[s]=String.fromCharCode(i()[e+4+s>>>0]);t=c.join("")}return yr(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r="string"===typeof t;r||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||St("Cannot pass non-string to std::string");var a=(n&&r?function(){return X(t)}:function(){return t.length})(),s=mr(4+a+1);if(s>>>=0,u()[s>>>2]=a,n&&r)q(t,s+4,a+1);else if(r)for(var o=0;o<a;++o){var l=t.charCodeAt(o);l>255&&(yr(s),St("String has UTF-16 code units that do not fit in 8 bits")),i()[s+4+o>>>0]=l}else for(o=0;o<a;++o)i()[s+4+o>>>0]=t[o];return null!==e&&e.push(yr,s),s},argPackAdvance:8,readValueFromPointer:ct,destructorFunction:function(e){yr(e)}})},Y:function(e,t,n){var r,i,a,o,l;n=wt(n),2===t?(r=se,i=oe,o=ue,a=function(){return s()},l=1):4===t&&(r=le,i=ce,o=he,a=function(){return u()},l=2),Rt(e,{name:n,fromWireType:function(e){for(var n,i=u()[e>>>2],s=a(),o=e+4,c=0;c<=i;++c){var h=e+4+c*t;if(c==i||0==s[h>>>l]){var p=r(o,h-o);void 0===n?n=p:(n+=String.fromCharCode(0),n+=p),o=h+t}}return yr(e),n},toWireType:function(e,r){"string"!==typeof r&&St("Cannot pass non-string to C++ string type "+n);var a=o(r),s=mr(4+a+t);return s>>>=0,u()[s>>>2]=a>>l,i(r,s+4,a+t),null!==e&&e.push(yr,s),s},argPackAdvance:8,readValueFromPointer:ct,destructorFunction:function(e){yr(e)}})},Pa:function(e,t,n,r,i,a){ut[e]={name:wt(t),rawConstructor:fn(n,r),rawDestructor:fn(i,a),elements:[]}},Na:function(e,t,n,r,i,a,s,o,u){ut[e].elements.push({getterReturnType:t,getter:fn(n,r),getterContext:i,setterArgumentType:a,setter:fn(s,o),setterContext:u})},M:function(e,t,n,r,i,a){xt[e]={name:wt(t),rawConstructor:fn(n,r),rawDestructor:fn(i,a),fields:[]}},Qa:function(e,t,n,r,i,a,s,o,u,l){xt[e].fields.push({fieldName:wt(t),getterReturnType:n,getter:fn(r,i),getterContext:a,setterArgumentType:s,setter:fn(o,u),setterContext:l})},Ka:function(e,t){Rt(e,{isVoid:!0,name:t=wt(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},Ca:function(e,t){if(e==t)postMessage({cmd:"processQueuedMainThreadWork"});else if(k)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var n=He.pthreads[e],r=n&&n.worker;if(!r)return;r.postMessage({cmd:"processThreadQueue"})}return 1},U:function(e,t,n){e=Dn(e),t=kn(t,"emval::as");var r=[],i=In(r);return o()[n>>>2]=i,t.toWireType(r,e)},la:function(e,t,n,r){e=Dn(e);for(var i=function(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=kn(o()[(t>>2)+r>>>0],"parameter "+r);return n}(t,n),a=new Array(t),s=0;s<t;++s){var u=i[s];a[s]=u.readValueFromPointer(r),r+=u.argPackAdvance}return In(e.apply(void 0,a))},xa:En,$a:function(e){return 0===e?In(Nn()):(e=On(e),In(Nn()[e]))},Ua:function(e,t){return In((e=Dn(e))[t=Dn(t)])},aa:function(e){e>4&&(Tn[e].refcount+=1)},pa:function(e,t){return(e=Dn(e))instanceof(t=Dn(t))},Xa:function(e){return"number"===typeof(e=Dn(e))},Wa:function(){return In([])},Z:function(e){return In(On(e))},Va:function(){return In({})},Ta:function(e){lt(Tn[e].value),En(e)},Sa:function(e,t,n){e=Dn(e),t=Dn(t),n=Dn(n),e[t]=n},D:function(e,t){return In((e=kn(e,"_emval_take_value")).readValueFromPointer(t))},ia:function(){Ae()},ca:function(e,t){var n;if(0===e)n=Date.now();else{if(1!==e&&4!==e||!je)return Ve(28),-1;n=Ge()}return o()[t>>>2]=n/1e3|0,o()[t+4>>>2]=n%1e3*1e3*1e3|0,0},ga:function(e,t,n){var r=function(e,t){var n;for(Mn.length=0,t>>=2;n=i()[e++>>>0];){var r=n<105;r&&1&t&&t++,Mn.push(r?l()[t++>>>1]:o()[t>>>0]),++t}return Mn}(t,n);return Ze[e].apply(null,r)},wa:function(){w||I||N("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},fa:function(e,t){},K:function(e,t,n){if(e<=0||e>r().length||!0&e)return-28;if(b){if(Atomics.load(o(),e>>2)!=t)return-6;var i=performance.now(),a=i+n;for(Atomics.exchange(o(),Br>>2,e);;){if((i=performance.now())>a)return Atomics.exchange(o(),Br>>2,0),-73;if(0==Atomics.exchange(o(),Br>>2,0))break;if(xr(),Atomics.load(o(),e>>2)!=t)return-6;Atomics.exchange(o(),Br>>2,e)}return 0}var s=Atomics.wait(o(),e>>2,t,n);if("timed-out"===s)return-73;if("not-equal"===s)return-6;if("ok"===s)return 0;throw"Atomics.wait returned an unexpected value "+s},J:ze,S:Ge,ra:function(e,t,n){i().copyWithin(e>>>0,t>>>0,t+n>>>0)},ya:function(e,t,n){Fn.length=t;for(var r=n>>3,i=0;i<t;i++)Fn[i]=l()[r+i>>>0];return(e<0?Ze[-e-1]:pr[e]).apply(null,Fn)},sa:function(e){var t=i().length;if((e>>>=0)<=t)return!1;var n=4294901760;if(e>n)return!1;for(var r=1;r<=4;r*=2){var a=t*(1+.2/r);if(a=Math.min(a,e+100663296),Ln(Math.min(n,pe(Math.max(e,a),65536))))return!0}return!1},za:function(e,t,n){return Gn(e)?Hn(e,t,n):jn(e,t,n)},ea:function(e){},Aa:function(e,t){return function(e,t){var n=t>>2,r=o()[n+6>>>0],i={alpha:!!o()[n+0>>>0],depth:!!o()[n+1>>>0],stencil:!!o()[n+2>>>0],antialias:!!o()[n+3>>>0],premultipliedAlpha:!!o()[n+4>>>0],preserveDrawingBuffer:!!o()[n+5>>>0],powerPreference:Wn[r],failIfMajorPerformanceCaveat:!!o()[n+7>>>0],majorVersion:o()[n+8>>>0],minorVersion:o()[n+9>>>0],enableExtensionsByDefault:o()[n+10>>>0],explicitSwapControl:o()[n+11>>>0],proxyContextToMainThread:o()[n+12>>>0],renderViaOffscreenBackBuffer:o()[n+13>>>0]},a=Gn(e);return a?i.explicitSwapControl?0:Vn.createContext(a,i):0}(e,t)},Ea:Xn,Fa:Kn,ha:Qn,Ha:Jn,Za:$n,Ga:er,b:function(){return L()},qa:function(){He.initRuntime()},I:function(e,t,n,r){var i=Dr();try{return de.get(e)(t,n,r)}catch(IQ){if(Ar(i),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},E:function(e){var t=Dr();try{return de.get(e)()}catch(IQ){if(Ar(t),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},d:function(e,t){var n=Dr();try{return de.get(e)(t)}catch(IQ){if(Ar(n),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},Q:function(e,t,n){var r=Dr();try{return de.get(e)(t,n)}catch(IQ){if(Ar(r),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},j:function(e,t,n){var r=Dr();try{return de.get(e)(t,n)}catch(IQ){if(Ar(r),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},k:function(e,t,n,r){var i=Dr();try{return de.get(e)(t,n,r)}catch(IQ){if(Ar(i),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},R:function(e,t,n,r,i){var a=Dr();try{return de.get(e)(t,n,r,i)}catch(IQ){if(Ar(a),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},na:function(e,t,n,r,i,a){var s=Dr();try{return de.get(e)(t,n,r,i,a)}catch(IQ){if(Ar(s),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},G:function(e,t,n,r,i,a){var s=Dr();try{return de.get(e)(t,n,r,i,a)}catch(IQ){if(Ar(s),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},A:function(e,t,n,r,i,a,s){var o=Dr();try{return de.get(e)(t,n,r,i,a,s)}catch(IQ){if(Ar(o),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},_:function(e,t,n,r,i,a,s,o){var u=Dr();try{return de.get(e)(t,n,r,i,a,s,o)}catch(IQ){if(Ar(u),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},P:function(e,t,n,r,i,a,s,o,u){var l=Dr();try{return de.get(e)(t,n,r,i,a,s,o,u)}catch(IQ){if(Ar(l),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},W:function(e,t,n,r,i,a,s,o,u,l,c,h){var p=Dr();try{return de.get(e)(t,n,r,i,a,s,o,u,l,c,h)}catch(IQ){if(Ar(p),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},Ya:function(e){var t=Dr();try{return Ur(e)}catch(IQ){if(Ar(t),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},g:function(e){var t=Dr();try{de.get(e)()}catch(IQ){if(Ar(t),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},f:function(e,t){var n=Dr();try{de.get(e)(t)}catch(IQ){if(Ar(n),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},L:function(e,t,n,r,i){var a=Dr();try{de.get(e)(t,n,r,i)}catch(IQ){if(Ar(a),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},H:function(e,t,n,r,i,a,s){var o=Dr();try{de.get(e)(t,n,r,i,a,s)}catch(IQ){if(Ar(o),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},h:function(e,t,n){var r=Dr();try{de.get(e)(t,n)}catch(IQ){if(Ar(r),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},s:function(e,t,n,r,i){var a=Dr();try{de.get(e)(t,n,r,i)}catch(IQ){if(Ar(a),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},e:function(e,t,n,r){var i=Dr();try{de.get(e)(t,n,r)}catch(IQ){if(Ar(i),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},l:function(e,t,n,r,i){var a=Dr();try{de.get(e)(t,n,r,i)}catch(IQ){if(Ar(a),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},$:function(e,t,n,r,i,a){var s=Dr();try{de.get(e)(t,n,r,i,a)}catch(IQ){if(Ar(s),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},X:function(e,t,n,r,i,a,s,o){var u=Dr();try{de.get(e)(t,n,r,i,a,s,o)}catch(IQ){if(Ar(u),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},F:function(e,t,n,r,i,a){var s=Dr();try{de.get(e)(t,n,r,i,a)}catch(IQ){if(Ar(s),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},w:function(e,t,n,r,i,a,s){var o=Dr();try{de.get(e)(t,n,r,i,a,s)}catch(IQ){if(Ar(o),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},r:function(e,t,n,r,i,a,s,o){var u=Dr();try{de.get(e)(t,n,r,i,a,s,o)}catch(IQ){if(Ar(u),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},u:function(e,t,n,r,i,a,s,o,u,l){var c=Dr();try{de.get(e)(t,n,r,i,a,s,o,u,l)}catch(IQ){if(Ar(c),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},p:function(e,t,n,r,i,a,s,o,u,l,c){var h=Dr();try{de.get(e)(t,n,r,i,a,s,o,u,l,c)}catch(IQ){if(Ar(h),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},V:function(e,t,n,r,i,a,s,o,u,l,c,h,p,f,d,v){var m=Dr();try{de.get(e)(t,n,r,i,a,s,o,u,l,c,h,p,f,d,v)}catch(IQ){if(Ar(m),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;Mr(1,0)}},oa:function(e){return e},a:U||p.wasmMemory,Ba:function(e,t,n,r){if("undefined"===typeof SharedArrayBuffer)return A("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!e)return A("pthread_create called with a null thread pointer!"),28;var i=[];if(k&&0===i.length)return Er(687865856,e,t,n,r);var a=0,s=0,l=0;t&&-1!=t?(a=o()[t>>>2],a+=81920,s=o()[t+8>>>2],l=0!==o()[t+12>>>2]):a=2097152;var c=0==s;c?s=Lr(16,a):G((s-=a)>0);for(var h=mr(228),p=0;p<57;++p)u()[(h>>2)+p>>>0]=0;o()[e>>>2]=h,o()[h+12>>>2]=h;var f=h+152;o()[f>>>2]=f;var d={stackBase:s,stackSize:a,allocatedOwnStack:c,detached:l,startRoutine:n,pthread_ptr:h,arg:r,transferList:i};return k?(d.cmd="spawnThread",postMessage(d,i),0):tr(d)},ma:function(e){F(e)},Da:function(e,t,n,r){return or(e,t,n,r)}},mr=(function(){var e={a:vr};function t(e,t){var n=e.exports;if(p.asm=n,de=p.asm.db,function(e){ye.unshift(e)}(p.asm.ab),He.tlsInitFunctions.push(p.asm.fb),Z=t,!k){var r=He.unusedWorkers.length;He.unusedWorkers.forEach((function(e){He.loadWasmModuleToWorker(e,(function(){--r||De()}))}))}}function n(e){t(e.instance,e.module)}function r(t){return function(){if(!M&&(b||I)){if("function"===typeof fetch&&!Le(Oe))return fetch(Oe,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Oe+"'";return e.arrayBuffer()})).catch((function(){return Ue(Oe)}));if(m)return new Promise((function(e,t){m(Oe,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return Ue(Oe)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){A("failed to asynchronously prepare wasm: "+e),Ae(e)}))}if(k||Ce(),p.instantiateWasm)try{return p.instantiateWasm(e,t)}catch(IQ){return A("Module.instantiateWasm callback failed with error: "+IQ),!1}(M||"function"!==typeof WebAssembly.instantiateStreaming||Fe(Oe)||Le(Oe)||"function"!==typeof fetch?r(n):fetch(Oe,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return A("wasm streaming compile failed: "+e),A("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(h)}(),p.___wasm_call_ctors=function(){return(p.___wasm_call_ctors=p.asm.ab).apply(null,arguments)},p._main=function(){return(p._main=p.asm.bb).apply(null,arguments)},p._malloc=function(){return(mr=p._malloc=p.asm.cb).apply(null,arguments)}),yr=p._free=function(){return(yr=p._free=p.asm.eb).apply(null,arguments)},gr=(p._emscripten_tls_init=function(){return(p._emscripten_tls_init=p.asm.fb).apply(null,arguments)},p.___getTypeName=function(){return(gr=p.___getTypeName=p.asm.gb).apply(null,arguments)}),_r=(p.___embind_register_native_and_builtin_types=function(){return(p.___embind_register_native_and_builtin_types=p.asm.hb).apply(null,arguments)},p._emscripten_current_thread_process_queued_calls=function(){return(p._emscripten_current_thread_process_queued_calls=p.asm.ib).apply(null,arguments)},p._emscripten_register_main_browser_thread_id=function(){return(_r=p._emscripten_register_main_browser_thread_id=p.asm.jb).apply(null,arguments)}),Tr=p.__emscripten_do_dispatch_to_thread=function(){return(Tr=p.__emscripten_do_dispatch_to_thread=p.asm.kb).apply(null,arguments)},Er=p._emscripten_sync_run_in_main_thread_4=function(){return(Er=p._emscripten_sync_run_in_main_thread_4=p.asm.lb).apply(null,arguments)},xr=p._emscripten_main_thread_process_queued_calls=function(){return(xr=p._emscripten_main_thread_process_queued_calls=p.asm.mb).apply(null,arguments)},br=p._emscripten_run_in_main_runtime_thread_js=function(){return(br=p._emscripten_run_in_main_runtime_thread_js=p.asm.nb).apply(null,arguments)},Ir=p.__emscripten_call_on_thread=function(){return(Ir=p.__emscripten_call_on_thread=p.asm.ob).apply(null,arguments)},wr=p.__emscripten_thread_init=function(){return(wr=p.__emscripten_thread_init=p.asm.pb).apply(null,arguments)},kr=p._emscripten_get_global_libc=function(){return(kr=p._emscripten_get_global_libc=p.asm.qb).apply(null,arguments)},Sr=p.___errno_location=function(){return(Sr=p.___errno_location=p.asm.rb).apply(null,arguments)},Rr=p._pthread_self=function(){return(Rr=p._pthread_self=p.asm.sb).apply(null,arguments)},Cr=p.___pthread_tsd_run_dtors=function(){return(Cr=p.___pthread_tsd_run_dtors=p.asm.tb).apply(null,arguments)},Dr=p.stackSave=function(){return(Dr=p.stackSave=p.asm.ub).apply(null,arguments)},Ar=p.stackRestore=function(){return(Ar=p.stackRestore=p.asm.vb).apply(null,arguments)},Or=p.stackAlloc=function(){return(Or=p.stackAlloc=p.asm.wb).apply(null,arguments)},Nr=p._emscripten_stack_set_limits=function(){return(Nr=p._emscripten_stack_set_limits=p.asm.xb).apply(null,arguments)},Mr=p._setThrew=function(){return(Mr=p._setThrew=p.asm.yb).apply(null,arguments)},Pr=p.___cxa_can_catch=function(){return(Pr=p.___cxa_can_catch=p.asm.zb).apply(null,arguments)},Fr=p.___cxa_is_pointer_type=function(){return(Fr=p.___cxa_is_pointer_type=p.asm.Ab).apply(null,arguments)},Lr=p._memalign=function(){return(Lr=p._memalign=p.asm.Bb).apply(null,arguments)},Ur=(p.dynCall_jiji=function(){return(p.dynCall_jiji=p.asm.Cb).apply(null,arguments)},p.dynCall_j=function(){return(Ur=p.dynCall_j=p.asm.Db).apply(null,arguments)}),Zr=(p.dynCall_viijii=function(){return(p.dynCall_viijii=p.asm.Eb).apply(null,arguments)},p.dynCall_iiiiij=function(){return(p.dynCall_iiiiij=p.asm.Fb).apply(null,arguments)},p.dynCall_iiiiijj=function(){return(p.dynCall_iiiiijj=p.asm.Gb).apply(null,arguments)},p.dynCall_iiiiiijj=function(){return(p.dynCall_iiiiiijj=p.asm.Hb).apply(null,arguments)},p.__emscripten_allow_main_runtime_queued_calls=56672),Br=p.__emscripten_main_thread_futex=60132;function zr(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}p.addRunDependency=Ce,p.removeRunDependency=De,p.FS_createPath=rt.createPath,p.FS_createDataFile=rt.createDataFile,p.FS_createPreloadedFile=rt.createPreloadedFile,p.FS_createLazyFile=rt.createLazyFile,p.FS_createDevice=rt.createDevice,p.FS_unlink=rt.unlink,p.keepRuntimeAlive=xe,p.FS=rt,p.PThread=He,p.PThread=He,p.wasmMemory=U,p.ExitStatus=zr;function Gr(e){if(e=e||T,!(ke>0)){if(k)return c(p),be(),void postMessage({cmd:"loaded"});!function(){if(!k){if(p.preRun)for("function"==typeof p.preRun&&(p.preRun=[p.preRun]);p.preRun.length;)Ie(p.preRun.shift());Be(me)}}(),ke>0||(p.setStatus?(p.setStatus("Running..."),setTimeout((function(){setTimeout((function(){p.setStatus("")}),1),t()}),1)):t())}function t(){dr||(dr=!0,p.calledRun=!0,z||(be(),k||Be(ge),c(p),p.onRuntimeInitialized&&p.onRuntimeInitialized(),jr&&function(e){var t=p._main;try{Hr(t(0,0),!0)}catch(IQ){if(IQ instanceof zr||"unwind"==IQ)return;var n=IQ;IQ&&"object"===typeof IQ&&IQ.stack&&(n=[IQ,IQ.stack]),A("exception thrown: "+n),x(1,IQ)}finally{!0}}(),function(){if(!k){if(p.postRun)for("function"==typeof p.postRun&&(p.postRun=[p.postRun]);p.postRun.length;)we(p.postRun.shift());Be(Te)}}()))}}function Hr(e,t){if(e,!t&&k)throw postMessage({cmd:"exitProcess",returnCode:e}),new zr(e);xe()||(He.terminateAllThreads(),k||!0,p.onExit&&p.onExit(e),z=!0),x(e,new zr(e))}if(Re=function e(){dr||Gr(),dr||(Re=e)},p.run=Gr,p.preInit)for("function"==typeof p.preInit&&(p.preInit=[p.preInit]);p.preInit.length>0;)p.preInit.pop()();var jr=!0;return p.noInitialRun&&(jr=!1),k&&(B=!1,He.initWorker()),Gr(),t.ready}}();"object"===typeof e&&"object"===typeof t?t.exports=r:"function"===typeof define&&n.amdO?define([],(function(){return r})):"object"===typeof e&&(e.WebIFCWasm=r)}}),nk=Jw({"dist/web-ifc.js":function(e,t){var r=function(){var e="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||jw,function(t){var n,r,i="undefined"!==typeof(t=t||{})?t:{};i.ready=new Promise((function(e,t){n=e,r=t}));var a,s={};for(a in i)i.hasOwnProperty(a)&&(s[a]=i[a]);var o,u,l,c,h,p=[],f="./this.program",d=function(e,t){throw t},v="object"===typeof window,m="function"===typeof importScripts,y="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node,g="";y?(g=m?Qw("path").dirname(g)+"/":"//",o=function(e,t){return c||(c=Qw("fs")),h||(h=Qw("path")),e=h.normalize(e),c.readFileSync(e,t?null:"utf8")},l=function(e){var t=o(e,!0);return t.buffer||(t=new Uint8Array(t)),R(t.buffer),t},u=function(e,t,n){c||(c=Qw("fs")),h||(h=Qw("path")),e=h.normalize(e),c.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&(f=process.argv[1].replace(/\\/g,"/")),p=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof Pn))throw e})),process.on("unhandledRejection",fe),d=function(e,t){if(ae())throw process.exitCode=e,t;process.exit(e)},i.inspect=function(){return"[Emscripten Module object]"}):(v||m)&&(m?g=self.location.href:"undefined"!==typeof document&&document.currentScript&&(g=document.currentScript.src),e&&(g=e),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",o=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},m&&(l=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),u=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var _=i.print||console.log.bind(console),T=i.printErr||console.warn.bind(console);for(a in s)s.hasOwnProperty(a)&&(i[a]=s[a]);s=null,i.arguments&&(p=i.arguments),i.thisProgram&&(f=i.thisProgram),i.quit&&(d=i.quit);var E,x=0,b=function(e){x=e},I=function(){return x};i.wasmBinary&&(E=i.wasmBinary);var w,k=i.noExitRuntime||!0;"object"!==typeof WebAssembly&&fe("no native wasm support detected");var S=!1;function R(e,t){e||fe("Assertion failed: "+t)}var C="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function D(e,t,n){for(var r=(t>>>=0)+n,i=t;e[i>>>0]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&C)return C.decode(e.subarray(t>>>0,i>>>0));for(var a="";t<i;){var s=e[t++>>>0];if(128&s){var o=63&e[t++>>>0];if(192!=(224&s)){var u=63&e[t++>>>0];if((s=224==(240&s)?(15&s)<<12|o<<6|u:(7&s)<<18|o<<12|u<<6|63&e[t++>>>0])<65536)a+=String.fromCharCode(s);else{var l=s-65536;a+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else a+=String.fromCharCode((31&s)<<6|o)}else a+=String.fromCharCode(s)}return a}function A(e,t){return(e>>>=0)?D(L,e,t):""}function O(e,t,n,r){if(!(r>0))return 0;for(var i=n>>>=0,a=n+r-1,s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o>=55296&&o<=57343)o=65536+((1023&o)<<10)|1023&e.charCodeAt(++s);if(o<=127){if(n>=a)break;t[n++>>>0]=o}else if(o<=2047){if(n+1>=a)break;t[n++>>>0]=192|o>>6,t[n++>>>0]=128|63&o}else if(o<=65535){if(n+2>=a)break;t[n++>>>0]=224|o>>12,t[n++>>>0]=128|o>>6&63,t[n++>>>0]=128|63&o}else{if(n+3>=a)break;t[n++>>>0]=240|o>>18,t[n++>>>0]=128|o>>12&63,t[n++>>>0]=128|o>>6&63,t[n++>>>0]=128|63&o}}return t[n>>>0]=0,n-i}function N(e,t,n){return O(e,L,t,n)}function M(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}var P,F,L,U,Z,B,z,G,H,j="undefined"!==typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function V(e,t){for(var n=e,r=n>>1,i=r+t/2;!(r>=i)&&Z[r>>>0];)++r;if((n=r<<1)-e>32&&j)return j.decode(L.subarray(e>>>0,n>>>0));for(var a="",s=0;!(s>=t/2);++s){var o=U[e+2*s>>>1];if(0==o)break;a+=String.fromCharCode(o)}return a}function W(e,t,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var r=t,i=(n-=2)<2*e.length?n/2:e.length,a=0;a<i;++a){var s=e.charCodeAt(a);U[t>>>1]=s,t+=2}return U[t>>>1]=0,t-r}function Y(e){return 2*e.length}function q(e,t){for(var n=0,r="";!(n>=t/4);){var i=B[e+4*n>>>2];if(0==i)break;if(++n,i>=65536){var a=i-65536;r+=String.fromCharCode(55296|a>>10,56320|1023&a)}else r+=String.fromCharCode(i)}return r}function X(e,t,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var r=t>>>=0,i=r+n-4,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a);if(B[t>>>2]=s,(t+=4)+4>i)break}return B[t>>>2]=0,t-r}function K(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&++n,t+=4}return t}function Q(e,t){return e%t>0&&(e+=t-e%t),e}function J(e){P=e,i.HEAP8=F=new Int8Array(e),i.HEAP16=U=new Int16Array(e),i.HEAP32=B=new Int32Array(e),i.HEAPU8=L=new Uint8Array(e),i.HEAPU16=Z=new Uint16Array(e),i.HEAPU32=z=new Uint32Array(e),i.HEAPF32=G=new Float32Array(e),i.HEAPF64=H=new Float64Array(e)}i.INITIAL_MEMORY;var $,ee=[],te=[],ne=[],re=[],ie=0;function ae(){return k||ie>0}function se(e){ee.unshift(e)}function oe(e){re.unshift(e)}var ue=0,le=null,ce=null;function he(e){ue++,i.monitorRunDependencies&&i.monitorRunDependencies(ue)}function pe(e){if(ue--,i.monitorRunDependencies&&i.monitorRunDependencies(ue),0==ue&&(null!==le&&(clearInterval(le),le=null),ce)){var t=ce;ce=null,t()}}function fe(e){i.onAbort&&i.onAbort(e),T(e+=""),S=!0,1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}i.preloadedImages={},i.preloadedAudios={};var de,ve,me,ye,ge="data:application/octet-stream;base64,";function _e(e){return e.startsWith(ge)}function Te(e){return e.startsWith("file://")}function Ee(e){try{if(e==de&&E)return new Uint8Array(E);if(l)return l(e);throw"both async and sync fetching of the wasm failed"}catch(t){fe(t)}}function xe(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"===typeof n?void 0===t.arg?$.get(n)():$.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(i)}}function be(e){this.excPtr=e,this.ptr=e-16,this.set_type=function(e){B[this.ptr+4>>>2]=e},this.get_type=function(){return B[this.ptr+4>>>2]},this.set_destructor=function(e){B[this.ptr+8>>>2]=e},this.get_destructor=function(){return B[this.ptr+8>>>2]},this.set_refcount=function(e){B[this.ptr>>>2]=e},this.set_caught=function(e){e=e?1:0,F[this.ptr+12>>>0]=e},this.get_caught=function(){return 0!=F[this.ptr+12>>>0]},this.set_rethrown=function(e){e=e?1:0,F[this.ptr+13>>>0]=e},this.get_rethrown=function(){return 0!=F[this.ptr+13>>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=B[this.ptr>>>2];B[this.ptr>>>2]=e+1},this.release_ref=function(){var e=B[this.ptr>>>2];return B[this.ptr>>>2]=e-1,1===e}}function Ie(e){this.free=function(){kn(this.ptr),this.ptr=0},this.set_base_ptr=function(e){B[this.ptr>>>2]=e},this.get_base_ptr=function(){return B[this.ptr>>>2]},this.set_adjusted_ptr=function(e){B[this.ptr+4>>>2]=e},this.get_adjusted_ptr_addr=function(){return this.ptr+4},this.get_adjusted_ptr=function(){return B[this.ptr+4>>>2]},this.get_exception_ptr=function(){if(Nn(this.get_exception_info().get_type()))return B[this.get_base_ptr()>>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.get_base_ptr()},this.get_exception_info=function(){return new be(this.get_base_ptr())},void 0===e?(this.ptr=wn(8),this.set_adjusted_ptr(0)):this.ptr=e}_e(de="web-ifc.wasm")||(ve=de,de=i.locateFile?i.locateFile(ve,g):g+ve);var we=[];var ke=0;var Se=0;function Re(e){return kn(new be(e).ptr)}function Ce(e){return B[Rn()>>>2]=e,e}var De={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return e=De.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"),e||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=De.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:function(e){if("/"===e)return"/";var t=(e=(e=De.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return De.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return De.normalize(e.join("/"))},join2:function(e,t){return De.normalize(e+"/"+t)}};var Ae={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:Me.cwd();if("string"!==typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t="/"===r.charAt(0)}return e=De.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"),(t?"/":"")+e||"."},relative:function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=Ae.resolve(e).substr(1),t=Ae.resolve(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),a=Math.min(r.length,i.length),s=a,o=0;o<a;o++)if(r[o]!==i[o]){s=o;break}var u=[];for(o=s;o<r.length;o++)u.push("..");return(u=u.concat(i.slice(s))).join("/")}},Oe={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Oe.ttys[e]={input:[],output:[],ops:t},Me.registerDevice(e,Oe.stream_ops)},stream_ops:{open:function(e){var t=Oe.ttys[e.node.rdev];if(!t)throw new Me.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.get_char)throw new Me.ErrnoError(60);for(var a=0,s=0;s<r;s++){var o;try{o=e.tty.ops.get_char(e.tty)}catch(IQ){throw new Me.ErrnoError(29)}if(void 0===o&&0===a)throw new Me.ErrnoError(6);if(null===o||void 0===o)break;a++,t[n+s]=o}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.put_char)throw new Me.ErrnoError(60);try{for(var a=0;a<r;a++)e.tty.ops.put_char(e.tty,t[n+a])}catch(IQ){throw new Me.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(y){var n=Buffer.alloc(256),r=0;try{r=c.readSync(process.stdin.fd,n,0,256,null)}catch(IQ){if(!IQ.toString().includes("EOF"))throw IQ;r=0}t=r>0?n.slice(0,r).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;e.input=xn(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(_(D(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(_(D(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(T(D(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(T(D(e.output,0)),e.output=[])}}};var Ne={ops_table:null,mount:function(e){return Ne.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(Me.isBlkdev(n)||Me.isFIFO(n))throw new Me.ErrnoError(63);Ne.ops_table||(Ne.ops_table={dir:{node:{getattr:Ne.node_ops.getattr,setattr:Ne.node_ops.setattr,lookup:Ne.node_ops.lookup,mknod:Ne.node_ops.mknod,rename:Ne.node_ops.rename,unlink:Ne.node_ops.unlink,rmdir:Ne.node_ops.rmdir,readdir:Ne.node_ops.readdir,symlink:Ne.node_ops.symlink},stream:{llseek:Ne.stream_ops.llseek}},file:{node:{getattr:Ne.node_ops.getattr,setattr:Ne.node_ops.setattr},stream:{llseek:Ne.stream_ops.llseek,read:Ne.stream_ops.read,write:Ne.stream_ops.write,allocate:Ne.stream_ops.allocate,mmap:Ne.stream_ops.mmap,msync:Ne.stream_ops.msync}},link:{node:{getattr:Ne.node_ops.getattr,setattr:Ne.node_ops.setattr,readlink:Ne.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Ne.node_ops.getattr,setattr:Ne.node_ops.setattr},stream:Me.chrdev_stream_ops}});var i=Me.createNode(e,t,n,r);return Me.isDir(i.mode)?(i.node_ops=Ne.ops_table.dir.node,i.stream_ops=Ne.ops_table.dir.stream,i.contents={}):Me.isFile(i.mode)?(i.node_ops=Ne.ops_table.file.node,i.stream_ops=Ne.ops_table.file.stream,i.usedBytes=0,i.contents=null):Me.isLink(i.mode)?(i.node_ops=Ne.ops_table.link.node,i.stream_ops=Ne.ops_table.link.stream):Me.isChrdev(i.mode)&&(i.node_ops=Ne.ops_table.chrdev.node,i.stream_ops=Ne.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i,e.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){t>>>=0;var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(t>>>=0,e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=Me.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Me.isDir(e.mode)?t.size=4096:Me.isFile(e.mode)?t.size=e.usedBytes:Me.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&Ne.resizeFileStorage(e,t.size)},lookup:function(e,t){throw Me.genericErrors[44]},mknod:function(e,t,n,r){return Ne.createNode(e,t,n,r)},rename:function(e,t,n){if(Me.isDir(e.mode)){var r;try{r=Me.lookupNode(t,n)}catch(IQ){}if(r)for(var i in r.contents)throw new Me.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=Me.lookupNode(e,t);for(var r in n.contents)throw new Me.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var r=Ne.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!Me.isLink(e.mode))throw new Me.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,r,i){var a=e.node.contents;if(i>=e.node.usedBytes)return 0;var s=Math.min(e.node.usedBytes-i,r);if(s>8&&a.subarray)t.set(a.subarray(i,i+s),n);else for(var o=0;o<s;o++)t[n+o]=a[i+o];return s},write:function(e,t,n,r,i,a){if(t.buffer===F.buffer&&(a=!1),!r)return 0;var s=e.node;if(s.timestamp=Date.now(),t.subarray&&(!s.contents||s.contents.subarray)){if(a)return s.contents=t.subarray(n,n+r),s.usedBytes=r,r;if(0===s.usedBytes&&0===i)return s.contents=t.slice(n,n+r),s.usedBytes=r,r;if(i+r<=s.usedBytes)return s.contents.set(t.subarray(n,n+r),i),r}if(Ne.expandFileStorage(s,i+r),s.contents.subarray&&t.subarray)s.contents.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)s.contents[i+o]=t[n+o];return s.usedBytes=Math.max(s.usedBytes,i+r),r},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&Me.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new Me.ErrnoError(28);return r},allocate:function(e,t,n){Ne.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,r,i,a){if(0!==t)throw new Me.ErrnoError(28);if(!Me.isFile(e.node.mode))throw new Me.ErrnoError(43);var s,o,u=e.node.contents;if(2&a||u.buffer!==P){if((r>0||r+n<u.length)&&(u=u.subarray?u.subarray(r,r+n):Array.prototype.slice.call(u,r,r+n)),o=!0,!(s=void fe()))throw new Me.ErrnoError(48);s>>>=0,F.set(u,s>>>0)}else o=!1,s=u.byteOffset;return{ptr:s,allocated:o}},msync:function(e,t,n,r,i){if(!Me.isFile(e.node.mode))throw new Me.ErrnoError(43);if(2&i)return 0;Ne.stream_ops.write(e,t,0,r,n,!1);return 0}}};var Me={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(e,t){if(t=t||{},!(e=Ae.resolve(Me.cwd(),e)))return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var r in n)void 0===t[r]&&(t[r]=n[r]);if(t.recurse_count>8)throw new Me.ErrnoError(32);for(var i=De.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),a=Me.root,s="/",o=0;o<i.length;o++){var u=o===i.length-1;if(u&&t.parent)break;if(a=Me.lookupNode(a,i[o]),s=De.join2(s,i[o]),Me.isMountpoint(a)&&(!u||u&&t.follow_mount)&&(a=a.mounted.root),!u||t.follow)for(var l=0;Me.isLink(a.mode);){var c=Me.readlink(s);if(s=Ae.resolve(De.dirname(s),c),a=Me.lookupPath(s,{recurse_count:t.recurse_count}).node,l++>40)throw new Me.ErrnoError(32)}}return{path:s,node:a}},getPath:function(e){for(var t;;){if(Me.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%Me.nameTable.length},hashAddNode:function(e){var t=Me.hashName(e.parent.id,e.name);e.name_next=Me.nameTable[t],Me.nameTable[t]=e},hashRemoveNode:function(e){var t=Me.hashName(e.parent.id,e.name);if(Me.nameTable[t]===e)Me.nameTable[t]=e.name_next;else for(var n=Me.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:function(e,t){var n=Me.mayLookup(e);if(n)throw new Me.ErrnoError(n,e);for(var r=Me.hashName(e.id,t),i=Me.nameTable[r];i;i=i.name_next){var a=i.name;if(i.parent.id===e.id&&a===t)return i}return Me.lookup(e,t)},createNode:function(e,t,n,r){var i=new Me.FSNode(e,t,n,r);return Me.hashAddNode(i),i},destroyNode:function(e){Me.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768===(61440&e)},isDir:function(e){return 16384===(61440&e)},isLink:function(e){return 40960===(61440&e)},isChrdev:function(e){return 8192===(61440&e)},isBlkdev:function(e){return 24576===(61440&e)},isFIFO:function(e){return 4096===(61440&e)},isSocket:function(e){return 49152===(49152&e)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(e){var t=Me.flagModes[e];if("undefined"===typeof t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return Me.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2},mayLookup:function(e){var t=Me.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:function(e,t){try{Me.lookupNode(e,t);return 20}catch(IQ){}return Me.nodePermissions(e,"wx")},mayDelete:function(e,t,n){var r;try{r=Me.lookupNode(e,t)}catch(IQ){return IQ.errno}var i=Me.nodePermissions(e,"wx");if(i)return i;if(n){if(!Me.isDir(r.mode))return 54;if(Me.isRoot(r)||Me.getPath(r)===Me.cwd())return 10}else if(Me.isDir(r.mode))return 31;return 0},mayOpen:function(e,t){return e?Me.isLink(e.mode)?32:Me.isDir(e.mode)&&("r"!==Me.flagsToPermissionString(t)||512&t)?31:Me.nodePermissions(e,Me.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||Me.MAX_OPEN_FDS;for(var n=e;n<=t;n++)if(!Me.streams[n])return n;throw new Me.ErrnoError(33)},getStream:function(e){return Me.streams[e]},createStream:function(e,t,n){Me.FSStream||(Me.FSStream=function(){},Me.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!==(2097155&this.flags)}},isWrite:{get:function(){return 0!==(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var r=new Me.FSStream;for(var i in e)r[i]=e[i];e=r;var a=Me.nextfd(t,n);return e.fd=a,Me.streams[a]=e,e},closeStream:function(e){Me.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=Me.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new Me.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){Me.devices[e]={stream_ops:t}},getDevice:function(e){return Me.devices[e]},getMounts:function(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs:function(e,t){"function"===typeof e&&(t=e,e=!1),Me.syncFSRequests++,Me.syncFSRequests>1&&T("warning: "+Me.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=Me.getMounts(Me.root.mount),r=0;function i(e){return Me.syncFSRequests--,t(e)}function a(e){if(e)return a.errored?void 0:(a.errored=!0,i(e));++r>=n.length&&i(null)}n.forEach((function(t){if(!t.type.syncfs)return a(null);t.type.syncfs(t,e,a)}))},mount:function(e,t,n){var r,i="/"===n,a=!n;if(i&&Me.root)throw new Me.ErrnoError(10);if(!i&&!a){var s=Me.lookupPath(n,{follow_mount:!1});if(n=s.path,r=s.node,Me.isMountpoint(r))throw new Me.ErrnoError(10);if(!Me.isDir(r.mode))throw new Me.ErrnoError(54)}var o={type:e,opts:t,mountpoint:n,mounts:[]},u=e.mount(o);return u.mount=o,o.root=u,i?Me.root=u:r&&(r.mounted=o,r.mount&&r.mount.mounts.push(o)),u},unmount:function(e){var t=Me.lookupPath(e,{follow_mount:!1});if(!Me.isMountpoint(t.node))throw new Me.ErrnoError(28);var n=t.node,r=n.mounted,i=Me.getMounts(r);Object.keys(Me.nameTable).forEach((function(e){for(var t=Me.nameTable[e];t;){var n=t.name_next;i.includes(t.mount)&&Me.destroyNode(t),t=n}})),n.mounted=null;var a=n.mount.mounts.indexOf(r);n.mount.mounts.splice(a,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,n){var r=Me.lookupPath(e,{parent:!0}).node,i=De.basename(e);if(!i||"."===i||".."===i)throw new Me.ErrnoError(28);var a=Me.mayCreate(r,i);if(a)throw new Me.ErrnoError(a);if(!r.node_ops.mknod)throw new Me.ErrnoError(63);return r.node_ops.mknod(r,i,t,n)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,Me.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,Me.mknod(e,t,0)},mkdirTree:function(e,t){for(var n=e.split("/"),r="",i=0;i<n.length;++i)if(n[i]){r+="/"+n[i];try{Me.mkdir(r,t)}catch(IQ){if(20!=IQ.errno)throw IQ}}},mkdev:function(e,t,n){return"undefined"===typeof n&&(n=t,t=438),t|=8192,Me.mknod(e,t,n)},symlink:function(e,t){if(!Ae.resolve(e))throw new Me.ErrnoError(44);var n=Me.lookupPath(t,{parent:!0}).node;if(!n)throw new Me.ErrnoError(44);var r=De.basename(t),i=Me.mayCreate(n,r);if(i)throw new Me.ErrnoError(i);if(!n.node_ops.symlink)throw new Me.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename:function(e,t){var n,r,i=De.dirname(e),a=De.dirname(t),s=De.basename(e),o=De.basename(t);if(n=Me.lookupPath(e,{parent:!0}).node,r=Me.lookupPath(t,{parent:!0}).node,!n||!r)throw new Me.ErrnoError(44);if(n.mount!==r.mount)throw new Me.ErrnoError(75);var u,l=Me.lookupNode(n,s),c=Ae.relative(e,a);if("."!==c.charAt(0))throw new Me.ErrnoError(28);if("."!==(c=Ae.relative(t,i)).charAt(0))throw new Me.ErrnoError(55);try{u=Me.lookupNode(r,o)}catch(IQ){}if(l!==u){var h=Me.isDir(l.mode),p=Me.mayDelete(n,s,h);if(p)throw new Me.ErrnoError(p);if(p=u?Me.mayDelete(r,o,h):Me.mayCreate(r,o))throw new Me.ErrnoError(p);if(!n.node_ops.rename)throw new Me.ErrnoError(63);if(Me.isMountpoint(l)||u&&Me.isMountpoint(u))throw new Me.ErrnoError(10);if(r!==n&&(p=Me.nodePermissions(n,"w")))throw new Me.ErrnoError(p);try{Me.trackingDelegate.willMovePath&&Me.trackingDelegate.willMovePath(e,t)}catch(IQ){T("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+IQ.message)}Me.hashRemoveNode(l);try{n.node_ops.rename(l,r,o)}catch(IQ){throw IQ}finally{Me.hashAddNode(l)}try{Me.trackingDelegate.onMovePath&&Me.trackingDelegate.onMovePath(e,t)}catch(IQ){T("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+IQ.message)}}},rmdir:function(e){var t=Me.lookupPath(e,{parent:!0}).node,n=De.basename(e),r=Me.lookupNode(t,n),i=Me.mayDelete(t,n,!0);if(i)throw new Me.ErrnoError(i);if(!t.node_ops.rmdir)throw new Me.ErrnoError(63);if(Me.isMountpoint(r))throw new Me.ErrnoError(10);try{Me.trackingDelegate.willDeletePath&&Me.trackingDelegate.willDeletePath(e)}catch(IQ){T("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+IQ.message)}t.node_ops.rmdir(t,n),Me.destroyNode(r);try{Me.trackingDelegate.onDeletePath&&Me.trackingDelegate.onDeletePath(e)}catch(IQ){T("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+IQ.message)}},readdir:function(e){var t=Me.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new Me.ErrnoError(54);return t.node_ops.readdir(t)},unlink:function(e){var t=Me.lookupPath(e,{parent:!0}).node,n=De.basename(e),r=Me.lookupNode(t,n),i=Me.mayDelete(t,n,!1);if(i)throw new Me.ErrnoError(i);if(!t.node_ops.unlink)throw new Me.ErrnoError(63);if(Me.isMountpoint(r))throw new Me.ErrnoError(10);try{Me.trackingDelegate.willDeletePath&&Me.trackingDelegate.willDeletePath(e)}catch(IQ){T("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+IQ.message)}t.node_ops.unlink(t,n),Me.destroyNode(r);try{Me.trackingDelegate.onDeletePath&&Me.trackingDelegate.onDeletePath(e)}catch(IQ){T("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+IQ.message)}},readlink:function(e){var t=Me.lookupPath(e).node;if(!t)throw new Me.ErrnoError(44);if(!t.node_ops.readlink)throw new Me.ErrnoError(28);return Ae.resolve(Me.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var n=Me.lookupPath(e,{follow:!t}).node;if(!n)throw new Me.ErrnoError(44);if(!n.node_ops.getattr)throw new Me.ErrnoError(63);return n.node_ops.getattr(n)},lstat:function(e){return Me.stat(e,!0)},chmod:function(e,t,n){var r;"string"===typeof e?r=Me.lookupPath(e,{follow:!n}).node:r=e;if(!r.node_ops.setattr)throw new Me.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:function(e,t){Me.chmod(e,t,!0)},fchmod:function(e,t){var n=Me.getStream(e);if(!n)throw new Me.ErrnoError(8);Me.chmod(n.node,t)},chown:function(e,t,n,r){var i;"string"===typeof e?i=Me.lookupPath(e,{follow:!r}).node:i=e;if(!i.node_ops.setattr)throw new Me.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:function(e,t,n){Me.chown(e,t,n,!0)},fchown:function(e,t,n){var r=Me.getStream(e);if(!r)throw new Me.ErrnoError(8);Me.chown(r.node,t,n)},truncate:function(e,t){if(t<0)throw new Me.ErrnoError(28);var n;"string"===typeof e?n=Me.lookupPath(e,{follow:!0}).node:n=e;if(!n.node_ops.setattr)throw new Me.ErrnoError(63);if(Me.isDir(n.mode))throw new Me.ErrnoError(31);if(!Me.isFile(n.mode))throw new Me.ErrnoError(28);var r=Me.nodePermissions(n,"w");if(r)throw new Me.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var n=Me.getStream(e);if(!n)throw new Me.ErrnoError(8);if(0===(2097155&n.flags))throw new Me.ErrnoError(28);Me.truncate(n.node,t)},utime:function(e,t,n){var r=Me.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open:function(e,t,n,r,a){if(""===e)throw new Me.ErrnoError(44);var s;if(n="undefined"===typeof n?438:n,n=64&(t="string"===typeof t?Me.modeStringToFlags(t):t)?4095&n|32768:0,"object"===typeof e)s=e;else{e=De.normalize(e);try{s=Me.lookupPath(e,{follow:!(131072&t)}).node}catch(IQ){}}var o=!1;if(64&t)if(s){if(128&t)throw new Me.ErrnoError(20)}else s=Me.mknod(e,n,0),o=!0;if(!s)throw new Me.ErrnoError(44);if(Me.isChrdev(s.mode)&&(t&=-513),65536&t&&!Me.isDir(s.mode))throw new Me.ErrnoError(54);if(!o){var u=Me.mayOpen(s,t);if(u)throw new Me.ErrnoError(u)}512&t&&Me.truncate(s,0),t&=-131713;var l=Me.createStream({node:s,path:Me.getPath(s),flags:t,seekable:!0,position:0,stream_ops:s.stream_ops,ungotten:[],error:!1},r,a);l.stream_ops.open&&l.stream_ops.open(l),!i.logReadFiles||1&t||(Me.readFiles||(Me.readFiles={}),e in Me.readFiles||(Me.readFiles[e]=1,T("FS.trackingDelegate error on read file: "+e)));try{if(Me.trackingDelegate.onOpenFile){var c=0;1!==(2097155&t)&&(c|=Me.tracking.openFlags.READ),0!==(2097155&t)&&(c|=Me.tracking.openFlags.WRITE),Me.trackingDelegate.onOpenFile(e,c)}}catch(IQ){T("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+IQ.message)}return l},close:function(e){if(Me.isClosed(e))throw new Me.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(IQ){throw IQ}finally{Me.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,n){if(Me.isClosed(e))throw new Me.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new Me.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new Me.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:function(e,t,n,r,i){if(n>>>=0,r<0||i<0)throw new Me.ErrnoError(28);if(Me.isClosed(e))throw new Me.ErrnoError(8);if(1===(2097155&e.flags))throw new Me.ErrnoError(8);if(Me.isDir(e.node.mode))throw new Me.ErrnoError(31);if(!e.stream_ops.read)throw new Me.ErrnoError(28);var a="undefined"!==typeof i;if(a){if(!e.seekable)throw new Me.ErrnoError(70)}else i=e.position;var s=e.stream_ops.read(e,t,n,r,i);return a||(e.position+=s),s},write:function(e,t,n,r,i,a){if(n>>>=0,r<0||i<0)throw new Me.ErrnoError(28);if(Me.isClosed(e))throw new Me.ErrnoError(8);if(0===(2097155&e.flags))throw new Me.ErrnoError(8);if(Me.isDir(e.node.mode))throw new Me.ErrnoError(31);if(!e.stream_ops.write)throw new Me.ErrnoError(28);e.seekable&&1024&e.flags&&Me.llseek(e,0,2);var s="undefined"!==typeof i;if(s){if(!e.seekable)throw new Me.ErrnoError(70)}else i=e.position;var o=e.stream_ops.write(e,t,n,r,i,a);s||(e.position+=o);try{e.path&&Me.trackingDelegate.onWriteToFile&&Me.trackingDelegate.onWriteToFile(e.path)}catch(IQ){T("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+IQ.message)}return o},allocate:function(e,t,n){if(Me.isClosed(e))throw new Me.ErrnoError(8);if(t<0||n<=0)throw new Me.ErrnoError(28);if(0===(2097155&e.flags))throw new Me.ErrnoError(8);if(!Me.isFile(e.node.mode)&&!Me.isDir(e.node.mode))throw new Me.ErrnoError(43);if(!e.stream_ops.allocate)throw new Me.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:function(e,t,n,r,i,a){if(t>>>=0,0!==(2&i)&&0===(2&a)&&2!==(2097155&e.flags))throw new Me.ErrnoError(2);if(1===(2097155&e.flags))throw new Me.ErrnoError(2);if(!e.stream_ops.mmap)throw new Me.ErrnoError(43);return e.stream_ops.mmap(e,t,n,r,i,a)},msync:function(e,t,n,r,i){return n>>>=0,e&&e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,i):0},munmap:function(e){return 0},ioctl:function(e,t,n){if(!e.stream_ops.ioctl)throw new Me.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:function(e,t){if((t=t||{}).flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var n,r=Me.open(e,t.flags),i=Me.stat(e).size,a=new Uint8Array(i);return Me.read(r,a,0,i,0),"utf8"===t.encoding?n=D(a,0):"binary"===t.encoding&&(n=a),Me.close(r),n},writeFile:function(e,t,n){(n=n||{}).flags=n.flags||577;var r=Me.open(e,n.flags,n.mode);if("string"===typeof t){var i=new Uint8Array(M(t)+1),a=O(t,i,0,i.length);Me.write(r,i,0,a,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");Me.write(r,t,0,t.byteLength,void 0,n.canOwn)}Me.close(r)},cwd:function(){return Me.currentPath},chdir:function(e){var t=Me.lookupPath(e,{follow:!0});if(null===t.node)throw new Me.ErrnoError(44);if(!Me.isDir(t.node.mode))throw new Me.ErrnoError(54);var n=Me.nodePermissions(t.node,"x");if(n)throw new Me.ErrnoError(n);Me.currentPath=t.path},createDefaultDirectories:function(){Me.mkdir("/tmp"),Me.mkdir("/home"),Me.mkdir("/home/web_user")},createDefaultDevices:function(){Me.mkdir("/dev"),Me.registerDevice(Me.makedev(1,3),{read:function(){return 0},write:function(e,t,n,r,i){return r}}),Me.mkdev("/dev/null",Me.makedev(1,3)),Oe.register(Me.makedev(5,0),Oe.default_tty_ops),Oe.register(Me.makedev(6,0),Oe.default_tty1_ops),Me.mkdev("/dev/tty",Me.makedev(5,0)),Me.mkdev("/dev/tty1",Me.makedev(6,0));var e=function(){if("object"===typeof crypto&&"function"===typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}if(y)try{var t=ek();return function(){return t.randomBytes(1)[0]}}catch(IQ){}return function(){fe("randomDevice")}}();Me.createDevice("/dev","random",e),Me.createDevice("/dev","urandom",e),Me.mkdir("/dev/shm"),Me.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){Me.mkdir("/proc");var e=Me.mkdir("/proc/self");Me.mkdir("/proc/self/fd"),Me.mount({mount:function(){var t=Me.createNode(e,"fd",16895,73);return t.node_ops={lookup:function(e,t){var n=+t,r=Me.getStream(n);if(!r)throw new Me.ErrnoError(8);var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return r.path}}};return i.parent=i,i}},t}},{},"/proc/self/fd")},createStandardStreams:function(){i.stdin?Me.createDevice("/dev","stdin",i.stdin):Me.symlink("/dev/tty","/dev/stdin"),i.stdout?Me.createDevice("/dev","stdout",null,i.stdout):Me.symlink("/dev/tty","/dev/stdout"),i.stderr?Me.createDevice("/dev","stderr",null,i.stderr):Me.symlink("/dev/tty1","/dev/stderr");Me.open("/dev/stdin",0),Me.open("/dev/stdout",1),Me.open("/dev/stderr",1)},ensureErrnoError:function(){Me.ErrnoError||(Me.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},Me.ErrnoError.prototype=new Error,Me.ErrnoError.prototype.constructor=Me.ErrnoError,[44].forEach((function(e){Me.genericErrors[e]=new Me.ErrnoError(e),Me.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:function(){Me.ensureErrnoError(),Me.nameTable=new Array(4096),Me.mount(Ne,{},"/"),Me.createDefaultDirectories(),Me.createDefaultDevices(),Me.createSpecialDirectories(),Me.filesystems={MEMFS:Ne}},init:function(e,t,n){Me.init.initialized=!0,Me.ensureErrnoError(),i.stdin=e||i.stdin,i.stdout=t||i.stdout,i.stderr=n||i.stderr,Me.createStandardStreams()},quit:function(){Me.init.initialized=!1;var e=i._fflush;e&&e(0);for(var t=0;t<Me.streams.length;t++){var n=Me.streams[t];n&&Me.close(n)}},getMode:function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n},findObject:function(e,t){var n=Me.analyzePath(e,t);return n.exists?n.object:null},analyzePath:function(e,t){try{e=(r=Me.lookupPath(e,{follow:!t})).path}catch(IQ){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=Me.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=De.basename(e),r=Me.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(IQ){n.error=IQ.errno}return n},createPath:function(e,t,n,r){e="string"===typeof e?e:Me.getPath(e);for(var i=t.split("/").reverse();i.length;){var a=i.pop();if(a){var s=De.join2(e,a);try{Me.mkdir(s)}catch(IQ){}e=s}}return s},createFile:function(e,t,n,r,i){var a=De.join2("string"===typeof e?e:Me.getPath(e),t),s=Me.getMode(r,i);return Me.create(a,s)},createDataFile:function(e,t,n,r,i,a){var s=t?De.join2("string"===typeof e?e:Me.getPath(e),t):e,o=Me.getMode(r,i),u=Me.create(s,o);if(n){if("string"===typeof n){for(var l=new Array(n.length),c=0,h=n.length;c<h;++c)l[c]=n.charCodeAt(c);n=l}Me.chmod(u,146|o);var p=Me.open(u,577);Me.write(p,n,0,n.length,0,a),Me.close(p),Me.chmod(u,o)}return u},createDevice:function(e,t,n,r){var i=De.join2("string"===typeof e?e:Me.getPath(e),t),a=Me.getMode(!!n,!!r);Me.createDevice.major||(Me.createDevice.major=64);var s=Me.makedev(Me.createDevice.major++,0);return Me.registerDevice(s,{open:function(e){e.seekable=!1},close:function(e){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,t,r,i,a){for(var s=0,o=0;o<i;o++){var u;try{u=n()}catch(IQ){throw new Me.ErrnoError(29)}if(void 0===u&&0===s)throw new Me.ErrnoError(6);if(null===u||void 0===u)break;s++,t[r+o]=u}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,n,i,a){for(var s=0;s<i;s++)try{r(t[n+s])}catch(IQ){throw new Me.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),s}}),Me.mkdev(i,a,s)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!==typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!o)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=xn(o(e.url),!0),e.usedBytes=e.contents.length}catch(IQ){throw new Me.ErrnoError(29)}},createLazyFile:function(e,t,n,r,i){function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},a.prototype.setDataGetter=function(e){this.getter=e},a.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),i=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,a=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,s=1048576;i||(s=r);var o=this;o.setDataGetter((function(e){var t=e*s,i=(e+1)*s-1;if(i=Math.min(i,r-1),"undefined"===typeof o.chunks[e]&&(o.chunks[e]=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",n,!1),r!==s&&i.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(i.responseType="arraybuffer"),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw new Error("Couldn't load "+n+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):xn(i.responseText||"",!0)}(t,i)),"undefined"===typeof o.chunks[e])throw new Error("doXHR failed!");return o.chunks[e]})),!a&&r||(s=r=1,r=this.getter(0).length,s=r,_("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=s,this.lengthKnown=!0},"undefined"!==typeof XMLHttpRequest){if(!m)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var s=new a;Object.defineProperties(s,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var o={isDevice:!1,contents:s}}else o={isDevice:!1,url:n};var u=Me.createFile(e,t,o,r,i);o.contents?u.contents=o.contents:o.url&&(u.contents=null,u.url=o.url),Object.defineProperties(u,{usedBytes:{get:function(){return this.contents.length}}});var l={};return Object.keys(u.stream_ops).forEach((function(e){var t=u.stream_ops[e];l[e]=function(){return Me.forceLoadFile(u),t.apply(null,arguments)}})),l.read=function(e,t,n,r,i){Me.forceLoadFile(u);var a=e.node.contents;if(i>=a.length)return 0;var s=Math.min(a.length-i,r);if(a.slice)for(var o=0;o<s;o++)t[n+o]=a[i+o];else for(o=0;o<s;o++)t[n+o]=a.get(i+o);return s},u.stream_ops=l,u},createPreloadedFile:function(e,t,n,r,a,s,o,l,c,h){Browser.init();var p=t?Ae.resolve(De.join2(e,t)):e;function f(n){function u(n){h&&h(),l||Me.createDataFile(e,t,n,r,a,c),s&&s(),pe()}var f=!1;i.preloadPlugins.forEach((function(e){f||e.canHandle(p)&&(e.handle(n,p,u,(function(){o&&o(),pe()})),f=!0)})),f||u(n)}he(),"string"==typeof n?function(e,t,n,r){var i=r?"":"al "+e;u(e,(function(n){R(n,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(n)),i&&pe()}),(function(t){if(!n)throw'Loading data file "'+e+'" failed.';n()})),i&&he()}(n,(function(e){f(e)}),o):f(n)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=Me.indexedDB();try{var i=r.open(Me.DB_NAME(),Me.DB_VERSION)}catch(IQ){return n(IQ)}i.onupgradeneeded=function(){_("creating db"),i.result.createObjectStore(Me.DB_STORE_NAME)},i.onsuccess=function(){var r=i.result.transaction([Me.DB_STORE_NAME],"readwrite"),a=r.objectStore(Me.DB_STORE_NAME),s=0,o=0,u=e.length;function l(){0==o?t():n()}e.forEach((function(e){var t=a.put(Me.analyzePath(e).object.contents,e);t.onsuccess=function(){++s+o==u&&l()},t.onerror=function(){o++,s+o==u&&l()}})),r.onerror=n},i.onerror=n},loadFilesFromDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=Me.indexedDB();try{var i=r.open(Me.DB_NAME(),Me.DB_VERSION)}catch(IQ){return n(IQ)}i.onupgradeneeded=n,i.onsuccess=function(){var r=i.result;try{var a=r.transaction([Me.DB_STORE_NAME],"readonly")}catch(IQ){return void n(IQ)}var s=a.objectStore(Me.DB_STORE_NAME),o=0,u=0,l=e.length;function c(){0==u?t():n()}e.forEach((function(e){var t=s.get(e);t.onsuccess=function(){Me.analyzePath(e).exists&&Me.unlink(e),Me.createDataFile(De.dirname(e),De.basename(e),t.result,!0,!0,!0),++o+u==l&&c()},t.onerror=function(){u++,o+u==l&&c()}})),a.onerror=n},i.onerror=n}},Pe={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,t,n){if("/"===t[0])return t;var r;if(-100===e)r=Me.cwd();else{var i=Me.getStream(e);if(!i)throw new Me.ErrnoError(8);r=i.path}if(0==t.length){if(!n)throw new Me.ErrnoError(44);return r}return De.join2(r,t)},doStat:function(e,t,n){try{var r=e(t)}catch(IQ){if(IQ&&IQ.node&&De.normalize(t)!==De.normalize(Me.getPath(IQ.node)))return-54;throw IQ}return B[n>>>2]=r.dev,B[n+4>>>2]=0,B[n+8>>>2]=r.ino,B[n+12>>>2]=r.mode,B[n+16>>>2]=r.nlink,B[n+20>>>2]=r.uid,B[n+24>>>2]=r.gid,B[n+28>>>2]=r.rdev,B[n+32>>>2]=0,ye=[r.size>>>0,(me=r.size,+Math.abs(me)>=1?me>0?(0|Math.min(+Math.floor(me/4294967296),4294967295))>>>0:~~+Math.ceil((me-+(~~me>>>0))/4294967296)>>>0:0)],B[n+40>>>2]=ye[0],B[n+44>>>2]=ye[1],B[n+48>>>2]=4096,B[n+52>>>2]=r.blocks,B[n+56>>>2]=r.atime.getTime()/1e3|0,B[n+60>>>2]=0,B[n+64>>>2]=r.mtime.getTime()/1e3|0,B[n+68>>>2]=0,B[n+72>>>2]=r.ctime.getTime()/1e3|0,B[n+76>>>2]=0,ye=[r.ino>>>0,(me=r.ino,+Math.abs(me)>=1?me>0?(0|Math.min(+Math.floor(me/4294967296),4294967295))>>>0:~~+Math.ceil((me-+(~~me>>>0))/4294967296)>>>0:0)],B[n+80>>>2]=ye[0],B[n+84>>>2]=ye[1],0},doMsync:function(e,t,n,r,i){var a=L.slice(e,e+n);Me.msync(t,a,i,n,r)},doMkdir:function(e,t){return"/"===(e=De.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),Me.mkdir(e,t,0),0},doMknod:function(e,t,n){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return Me.mknod(e,t,n),0},doReadlink:function(e,t,n){if(n<=0)return-28;var r=Me.readlink(e),i=Math.min(n,M(r)),a=F[t+i>>>0];return N(r,t,n+1),F[t+i>>>0]=a,i},doAccess:function(e,t){if(-8&t)return-28;var n;if(!(n=Me.lookupPath(e,{follow:!0}).node))return-44;var r="";return 4&t&&(r+="r"),2&t&&(r+="w"),1&t&&(r+="x"),r&&Me.nodePermissions(n,r)?-2:0},doDup:function(e,t,n){var r=Me.getStream(n);return r&&Me.close(r),Me.open(e,t,0,n,n).fd},doReadv:function(e,t,n,r){for(var i=0,a=0;a<n;a++){var s=B[t+8*a>>>2],o=B[t+(8*a+4)>>>2],u=Me.read(e,F,s,o,r);if(u<0)return-1;if(i+=u,u<o)break}return i},doWritev:function(e,t,n,r){for(var i=0,a=0;a<n;a++){var s=B[t+8*a>>>2],o=B[t+(8*a+4)>>>2],u=Me.write(e,F,s,o,r);if(u<0)return-1;i+=u}return i},varargs:void 0,get:function(){return Pe.varargs+=4,B[Pe.varargs-4>>>2]},getStr:function(e){return A(e)},getStreamFromFD:function(e){var t=Me.getStream(e);if(!t)throw new Me.ErrnoError(8);return t},get64:function(e,t){return e}};var Fe={};function Le(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function Ue(e){return this.fromWireType(z[e>>>2])}var Ze={},Be={},ze={},Ge=48,He=57;function je(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=Ge&&t<=He?"_"+e:e}function Ve(e,t){return e=je(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function We(e,t){var n=Ve(t,(function(e){this.name=t,this.message=e;var n=new Error(e).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var Ye=void 0;function qe(e){throw new Ye(e)}function Xe(e,t,n){function r(t){var r=n(t);r.length!==e.length&&qe("Mismatched type converter count");for(var i=0;i<e.length;++i)nt(e[i],r[i])}e.forEach((function(e){ze[e]=t}));var i=new Array(t.length),a=[],s=0;t.forEach((function(e,t){Be.hasOwnProperty(e)?i[t]=Be[e]:(a.push(e),Ze.hasOwnProperty(e)||(Ze[e]=[]),Ze[e].push((function(){i[t]=Be[e],++s===a.length&&r(i)})))})),0===a.length&&r(i)}var Ke={};function Qe(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var Je=void 0;function $e(e){for(var t="",n=e;L[n>>>0];)t+=Je[L[n++>>>0]];return t}var et=void 0;function tt(e){throw new et(e)}function nt(e,t,n){if(n=n||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||tt('type "'+r+'" must have a positive integer typeid pointer'),Be.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;tt("Cannot register type '"+r+"' twice")}if(Be[e]=t,delete ze[e],Ze.hasOwnProperty(e)){var i=Ze[e];delete Ze[e],i.forEach((function(e){e()}))}}function rt(e){if(!(this instanceof yt))return!1;if(!(e instanceof yt))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,r=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;r.baseClass;)i=r.upcast(i),r=r.baseClass;return t===r&&n===i}function it(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function at(e){tt(e.$$.ptrType.registeredClass.name+" instance already deleted")}var st=!1;function ot(e){}function ut(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function lt(e){return"undefined"===typeof FinalizationGroup?(lt=function(e){return e},e):(st=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next()){var n=t.value;n.ptr?ut(n):console.warn("object already deleted: "+n.ptr)}})),ot=function(e){st.unregister(e.$$)},(lt=function(e){return st.register(e,e.$$,e.$$),e})(e))}function ct(){if(this.$$.ptr||at(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=lt(Object.create(Object.getPrototypeOf(this),{$$:{value:it(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function ht(){this.$$.ptr||at(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&tt("Object already scheduled for deletion"),ot(this),ut(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function pt(){return!this.$$.ptr}var ft=void 0,dt=[];function vt(){for(;dt.length;){var e=dt.pop();e.$$.deleteScheduled=!1,e.delete()}}function mt(){return this.$$.ptr||at(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&tt("Object already scheduled for deletion"),dt.push(this),1===dt.length&&ft&&ft(vt),this.$$.deleteScheduled=!0,this}function yt(){}var gt={};function _t(e,t,n){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||tt("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}function Tt(e,t,n){i.hasOwnProperty(e)?((void 0===n||void 0!==i[e].overloadTable&&void 0!==i[e].overloadTable[n])&&tt("Cannot register public name '"+e+"' twice"),_t(i,e,e),i.hasOwnProperty(n)&&tt("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),i[e].overloadTable[n]=t):(i[e]=t,void 0!==n&&(i[e].numArguments=n))}function Et(e,t,n,r,i,a,s,o){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=i,this.getActualType=a,this.upcast=s,this.downcast=o,this.pureVirtualFunctions=[]}function xt(e,t,n){for(;t!==n;)t.upcast||tt("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function bt(e,t){if(null===t)return this.isReference&&tt("null is not a valid "+this.name),0;t.$$||tt('Cannot pass "'+en(t)+'" as a '+this.name),t.$$.ptr||tt("Cannot pass deleted object as a pointer of type "+this.name);var n=t.$$.ptrType.registeredClass;return xt(t.$$.ptr,n,this.registeredClass)}function It(e,t){var n;if(null===t)return this.isReference&&tt("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,n),n):0;t.$$||tt('Cannot pass "'+en(t)+'" as a '+this.name),t.$$.ptr||tt("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&tt("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;if(n=xt(t.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&tt("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:tt("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var i=t.clone();n=this.rawShare(n,Qt((function(){i.delete()}))),null!==e&&e.push(this.rawDestructor,n)}break;default:tt("Unsupporting sharing policy")}return n}function wt(e,t){if(null===t)return this.isReference&&tt("null is not a valid "+this.name),0;t.$$||tt('Cannot pass "'+en(t)+'" as a '+this.name),t.$$.ptr||tt("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&tt("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;return xt(t.$$.ptr,n,this.registeredClass)}function kt(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function St(e){this.rawDestructor&&this.rawDestructor(e)}function Rt(e){null!==e&&e.delete()}function Ct(e,t,n){if(t===n)return e;if(void 0===n.baseClass)return null;var r=Ct(e,t,n.baseClass);return null===r?null:n.downcast(r)}function Dt(){return Object.keys(Nt).length}function At(){var e=[];for(var t in Nt)Nt.hasOwnProperty(t)&&e.push(Nt[t]);return e}function Ot(e){ft=e,dt.length&&ft&&ft(vt)}var Nt={};function Mt(e,t){return t=function(e,t){for(void 0===t&&tt("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),Nt[t]}function Pt(e,t){return t.ptrType&&t.ptr||qe("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!==!!t.smartPtr&&qe("Both smartPtrType and smartPtr must be specified"),t.count={value:1},lt(Object.create(e,{$$:{value:t}}))}function Ft(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Mt(this.registeredClass,t);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var r=n.clone();return this.destructor(e),r}function i(){return this.isSmartPointer?Pt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Pt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var a,s=this.registeredClass.getActualType(t),o=gt[s];if(!o)return i.call(this);a=this.isConst?o.constPointerType:o.pointerType;var u=Ct(t,this.registeredClass,a.registeredClass);return null===u?i.call(this):this.isSmartPointer?Pt(a.registeredClass.instancePrototype,{ptrType:a,ptr:u,smartPtrType:this,smartPtr:e}):Pt(a.registeredClass.instancePrototype,{ptrType:a,ptr:u})}function Lt(e,t,n,r,i,a,s,o,u,l,c){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=r,this.isSmartPointer=i,this.pointeeType=a,this.sharingPolicy=s,this.rawGetPointee=o,this.rawConstructor=u,this.rawShare=l,this.rawDestructor=c,i||void 0!==t.baseClass?this.toWireType=It:r?(this.toWireType=bt,this.destructorFunction=null):(this.toWireType=wt,this.destructorFunction=null)}function Ut(e,t,n){i.hasOwnProperty(e)||qe("Replacing nonexistant public symbol"),void 0!==i[e].overloadTable&&void 0!==n?i[e].overloadTable[n]=t:(i[e]=t,i[e].argCount=n)}function Zt(e,t,n){return e.includes("j")?function(e,t,n){var r=i["dynCall_"+e];return n&&n.length?r.apply(null,[t].concat(n)):r.call(null,t)}(e,t,n):$.get(t).apply(null,n)}function Bt(e,t){var n=(e=$e(e)).includes("j")?function(e,t){var n=[];return function(){n.length=arguments.length;for(var r=0;r<arguments.length;r++)n[r]=arguments[r];return Zt(e,t,n)}}(e,t):$.get(t);return"function"!==typeof n&&tt("unknown function pointer with signature "+e+": "+t),n}var zt=void 0;function Gt(e){var t=Sn(e),n=$e(t);return kn(t),n}function Ht(e,t){var n=[],r={};throw t.forEach((function e(t){r[t]||Be[t]||(ze[t]?ze[t].forEach(e):(n.push(t),r[t]=!0))})),new zt(e+": "+n.map(Gt).join([", "]))}function jt(e,t){for(var n=[],r=0;r<e;r++)n.push(B[(t>>2)+r>>>0]);return n}function Vt(e,t,n,r,i){var a=t.length;a<2&&tt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var s=null!==t[1]&&null!==n,o=!1,u=1;u<t.length;++u)if(null!==t[u]&&void 0===t[u].destructorFunction){o=!0;break}var l="void"!==t[0].name,c="",h="";for(u=0;u<a-2;++u)c+=(0!==u?", ":"")+"arg"+u,h+=(0!==u?", ":"")+"arg"+u+"Wired";var p="return function "+je(e)+"("+c+") {\nif (arguments.length !== "+(a-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(a-2)+" args!');\n}\n";o&&(p+="var destructors = [];\n");var f=o?"destructors":"null",d=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],v=[tt,r,i,Le,t[0],t[1]];s&&(p+="var thisWired = classParam.toWireType("+f+", this);\n");for(u=0;u<a-2;++u)p+="var arg"+u+"Wired = argType"+u+".toWireType("+f+", arg"+u+"); // "+t[u+2].name+"\n",d.push("argType"+u),v.push(t[u+2]);if(s&&(h="thisWired"+(h.length>0?", ":"")+h),p+=(l?"var rv = ":"")+"invoker(fn"+(h.length>0?", ":"")+h+");\n",o)p+="runDestructors(destructors);\n";else for(u=s?1:2;u<t.length;++u){var m=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==t[u].destructorFunction&&(p+=m+"_dtor("+m+"); // "+t[u].name+"\n",d.push(m+"_dtor"),v.push(t[u].destructorFunction))}l&&(p+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),p+="}\n",d.push(p);var y=function(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=Ve(e.name||"unknownFunctionName",(function(){}));n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return i instanceof Object?i:r}(Function,d).apply(null,v);return y}var Wt=[],Yt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function qt(e){e>4&&0===--Yt[e].refcount&&(Yt[e]=void 0,Wt.push(e))}function Xt(){for(var e=0,t=5;t<Yt.length;++t)void 0!==Yt[t]&&++e;return e}function Kt(){for(var e=5;e<Yt.length;++e)if(void 0!==Yt[e])return Yt[e];return null}function Qt(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=Wt.length?Wt.pop():Yt.length;return Yt[t]={refcount:1,value:e},t}}function Jt(e,t,n){switch(t){case 0:return function(e){var t=n?F:L;return this.fromWireType(t[e>>>0])};case 1:return function(e){var t=n?U:Z;return this.fromWireType(t[e>>>1])};case 2:return function(e){var t=n?B:z;return this.fromWireType(t[e>>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function $t(e,t){var n=Be[e];return void 0===n&&tt(t+" has unknown type "+Gt(e)),n}function en(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function tn(e,t){switch(t){case 2:return function(e){return this.fromWireType(G[e>>>2])};case 3:return function(e){return this.fromWireType(H[e>>>3])};default:throw new TypeError("Unknown float type: "+e)}}function nn(e,t,n){switch(t){case 0:return n?function(e){return F[e>>>0]}:function(e){return L[e>>>0]};case 1:return n?function(e){return U[e>>>1]}:function(e){return Z[e>>>1]};case 2:return n?function(e){return B[e>>>2]}:function(e){return z[e>>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function rn(e){return e||tt("Cannot use deleted val. handle = "+e),Yt[e].value}var an,sn={};function on(e){var t=sn[e];return void 0===t?$e(e):t}function un(){return"object"===typeof globalThis?globalThis:Function("return this")()}an=y?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:function(){return performance.now()};var ln=!0;function cn(e){try{return w.grow(e-P.byteLength+65535>>>16),J(w.buffer),1}catch(IQ){}}var hn={};function pn(){if(!pn.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"===typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:f||"./this.program"};for(var t in hn)void 0===hn[t]?delete e[t]:e[t]=hn[t];var n=[];for(var t in e)n.push(t+"="+e[t]);pn.strings=n}return pn.strings}function fn(e){return e%4===0&&(e%100!==0||e%400===0)}function dn(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}var vn=[31,29,31,30,31,30,31,31,30,31,30,31],mn=[31,28,31,30,31,30,31,31,30,31,30,31];function yn(e,t){for(var n=new Date(e.getTime());t>0;){var r=fn(n.getFullYear()),i=n.getMonth(),a=(r?vn:mn)[i];if(!(t>a-n.getDate()))return n.setDate(n.getDate()+t),n;t-=a-n.getDate()+1,n.setDate(1),i<11?n.setMonth(i+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}function gn(e,t,n,r){var i=B[r+40>>>2],a={tm_sec:B[r>>>2],tm_min:B[r+4>>>2],tm_hour:B[r+8>>>2],tm_mday:B[r+12>>>2],tm_mon:B[r+16>>>2],tm_year:B[r+20>>>2],tm_wday:B[r+24>>>2],tm_yday:B[r+28>>>2],tm_isdst:B[r+32>>>2],tm_gmtoff:B[r+36>>>2],tm_zone:i?A(i):""},s=A(n),o={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var u in o)s=s.replace(new RegExp(u,"g"),o[u]);var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"];function h(e,t,n){for(var r="number"===typeof e?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function p(e,t){return h(e,t,"0")}function f(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function d(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function v(e){var t=yn(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),i=d(n),a=d(r);return f(i,t)<=0?f(a,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var m={"%a":function(e){return l[e.tm_wday].substring(0,3)},"%A":function(e){return l[e.tm_wday]},"%b":function(e){return c[e.tm_mon].substring(0,3)},"%B":function(e){return c[e.tm_mon]},"%C":function(e){return p((e.tm_year+1900)/100|0,2)},"%d":function(e){return p(e.tm_mday,2)},"%e":function(e){return h(e.tm_mday,2," ")},"%g":function(e){return v(e).toString().substring(2)},"%G":function(e){return v(e)},"%H":function(e){return p(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),p(t,2)},"%j":function(e){return p(e.tm_mday+dn(fn(e.tm_year+1900)?vn:mn,e.tm_mon-1),3)},"%m":function(e){return p(e.tm_mon+1,2)},"%M":function(e){return p(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return p(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),n=0===t.getDay()?t:yn(t,7-t.getDay()),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(f(n,r)<0){var i=dn(fn(r.getFullYear())?vn:mn,r.getMonth()-1)-31,a=31-n.getDate()+i+r.getDate();return p(Math.ceil(a/7),2)}return 0===f(n,t)?"01":"00"},"%V":function(e){var t,n=new Date(e.tm_year+1900,0,4),r=new Date(e.tm_year+1901,0,4),i=d(n),a=d(r),s=yn(new Date(e.tm_year+1900,0,1),e.tm_yday);return f(s,i)<0?"53":f(a,s)<=0?"01":(t=i.getFullYear()<e.tm_year+1900?e.tm_yday+32-i.getDate():e.tm_yday+1-i.getDate(),p(Math.ceil(t/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),n=1===t.getDay()?t:yn(t,0===t.getDay()?1:7-t.getDay()+1),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(f(n,r)<0){var i=dn(fn(r.getFullYear())?vn:mn,r.getMonth()-1)-31,a=31-n.getDate()+i+r.getDate();return p(Math.ceil(a/7),2)}return 0===f(n,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var u in m)s.includes(u)&&(s=s.replace(new RegExp(u,"g"),m[u](a)));var y,g,_=xn(s,!1);return _.length>t?0:(y=_,g=e,F.set(y,g>>>0),_.length-1)}var _n=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=Me.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r},Tn=365,En=146;function xn(e,t,n){var r=n>0?n:M(e)+1,i=new Array(r),a=O(e,i,0,i.length);return t&&(i.length=a),i}Object.defineProperties(_n.prototype,{read:{get:function(){return(this.mode&Tn)===Tn},set:function(e){e?this.mode|=Tn:this.mode&=-366}},write:{get:function(){return(this.mode&En)===En},set:function(e){e?this.mode|=En:this.mode&=-147}},isFolder:{get:function(){return Me.isDir(this.mode)}},isDevice:{get:function(){return Me.isChrdev(this.mode)}}}),Me.FSNode=_n,Me.staticInit(),i.FS_createPath=Me.createPath,i.FS_createDataFile=Me.createDataFile,i.FS_createPreloadedFile=Me.createPreloadedFile,i.FS_createLazyFile=Me.createLazyFile,i.FS_createDevice=Me.createDevice,i.FS_unlink=Me.unlink,Ye=i.InternalError=We(Error,"InternalError"),function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Je=e}(),et=i.BindingError=We(Error,"BindingError"),yt.prototype.isAliasOf=rt,yt.prototype.clone=ct,yt.prototype.delete=ht,yt.prototype.isDeleted=pt,yt.prototype.deleteLater=mt,Lt.prototype.getPointee=kt,Lt.prototype.destructor=St,Lt.prototype.argPackAdvance=8,Lt.prototype.readValueFromPointer=Ue,Lt.prototype.deleteObject=Rt,Lt.prototype.fromWireType=Ft,i.getInheritedInstanceCount=Dt,i.getLiveInheritedInstances=At,i.flushPendingDeletes=vt,i.setDelayFunction=Ot,zt=i.UnboundTypeError=We(Error,"UnboundTypeError"),i.count_emval_handles=Xt,i.get_first_emval=Kt;var bn,In={ga:function(e,t,n,r){fe("Assertion failed: "+A(e)+", at: "+[t?A(t):"unknown filename",n,r?A(r):"unknown function"])},m:function(e){return wn(e+16)+16},u:function(e){var t=new Ie(e),n=t.get_exception_info();return n.get_caught()||(n.set_caught(!0),ke--),n.set_rethrown(!1),we.push(t),function(e){e.add_ref()}(n),t.get_exception_ptr()},x:function(){An(0);var e=we.pop();!function(e){if(e.release_ref()&&!e.get_rethrown()){var t=e.get_destructor();t&&$.get(t)(e.excPtr),Re(e.excPtr)}}(e.get_exception_info()),e.free(),Se=0},b:function(){var e=Se;if(!e)return b(0),0;var t=new be(e).get_type(),n=new Ie;if(n.set_base_ptr(e),n.set_adjusted_ptr(e),!t)return b(0),0|n.ptr;for(var r=Array.prototype.slice.call(arguments),i=0;i<r.length;i++){var a=r[i];if(0===a||a===t)break;if(On(a,t,n.get_adjusted_ptr_addr()))return b(a),0|n.ptr}return b(t),0|n.ptr},l:function(){var e=Se;if(!e)return b(0),0;var t=new be(e).get_type(),n=new Ie;if(n.set_base_ptr(e),n.set_adjusted_ptr(e),!t)return b(0),0|n.ptr;for(var r=Array.prototype.slice.call(arguments),i=0;i<r.length;i++){var a=r[i];if(0===a||a===t)break;if(On(a,t,n.get_adjusted_ptr_addr()))return b(a),0|n.ptr}return b(t),0|n.ptr},A:Re,$:function(){var e=we.pop();e||fe("no exception to throw");var t=e.get_exception_info(),n=e.get_base_ptr();throw t.get_rethrown()?e.free():(we.push(e),t.set_rethrown(!0),t.set_caught(!1),ke++),Se=n,n},n:function(e,t,n){throw new be(e).init(t,n),Se=e,ke++,e},pa:function(){return ke},h:function(e){var t=new Ie(e),n=t.get_base_ptr();throw Se||(Se=n),t.free(),n},ba:function(e,t,n){Pe.varargs=n;try{var r=Pe.getStreamFromFD(e);switch(t){case 0:return(i=Pe.get())<0?-28:Me.open(r.path,r.flags,0,i).fd;case 1:case 2:case 13:case 14:return 0;case 3:return r.flags;case 4:var i=Pe.get();return r.flags|=i,0;case 12:i=Pe.get();return U[i+0>>>1]=2,0;case 16:case 8:default:return-28;case 9:return Ce(28),-1}}catch(IQ){return"undefined"!==typeof Me&&IQ instanceof Me.ErrnoError||fe(IQ),-IQ.errno}},qa:function(e,t,n){Pe.varargs=n;try{var r=Pe.getStreamFromFD(e);switch(t){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return r.tty?0:-59;case 21519:if(!r.tty)return-59;var i=Pe.get();return B[i>>>2]=0,0;case 21520:return r.tty?-28:-59;case 21531:i=Pe.get();return Me.ioctl(r,t,i);default:fe("bad ioctl syscall "+t)}}catch(IQ){return"undefined"!==typeof Me&&IQ instanceof Me.ErrnoError||fe(IQ),-IQ.errno}},ra:function(e,t,n){Pe.varargs=n;try{var r=Pe.getStr(e),i=n?Pe.get():0;return Me.open(r,t,i).fd}catch(IQ){return"undefined"!==typeof Me&&IQ instanceof Me.ErrnoError||fe(IQ),-IQ.errno}},Ca:function(e){var t=Fe[e];delete Fe[e];var n=t.elements,r=n.length,i=n.map((function(e){return e.getterReturnType})).concat(n.map((function(e){return e.setterArgumentType}))),a=t.rawConstructor,s=t.rawDestructor;Xe([e],i,(function(e){return n.forEach((function(t,n){var i=e[n],a=t.getter,s=t.getterContext,o=e[n+r],u=t.setter,l=t.setterContext;t.read=function(e){return i.fromWireType(a(s,e))},t.write=function(e,t){var n=[];u(l,e,o.toWireType(n,t)),Le(n)}})),[{name:t.name,fromWireType:function(e){for(var t=new Array(r),i=0;i<r;++i)t[i]=n[i].read(e);return s(e),t},toWireType:function(e,i){if(r!==i.length)throw new TypeError("Incorrect number of tuple elements for "+t.name+": expected="+r+", actual="+i.length);for(var o=a(),u=0;u<r;++u)n[u].write(o,i[u]);return null!==e&&e.push(s,o),o},argPackAdvance:8,readValueFromPointer:Ue,destructorFunction:s}]}))},Fa:function(e){var t=Ke[e];delete Ke[e];var n=t.rawConstructor,r=t.rawDestructor,i=t.fields;Xe([e],i.map((function(e){return e.getterReturnType})).concat(i.map((function(e){return e.setterArgumentType}))),(function(e){var a={};return i.forEach((function(t,n){var r=t.fieldName,s=e[n],o=t.getter,u=t.getterContext,l=e[n+i.length],c=t.setter,h=t.setterContext;a[r]={read:function(e){return s.fromWireType(o(u,e))},write:function(e,t){var n=[];c(h,e,l.toWireType(n,t)),Le(n)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var n in a)t[n]=a[n].read(e);return r(e),t},toWireType:function(e,t){for(var i in a)if(!(i in t))throw new TypeError('Missing field:  "'+i+'"');var s=n();for(i in a)a[i].write(s,t[i]);return null!==e&&e.push(r,s),s},argPackAdvance:8,readValueFromPointer:Ue,destructorFunction:r}]}))},ka:function(e,t,n,r,i){},ya:function(e,t,n,r,i){var a=Qe(n);nt(e,{name:t=$e(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:i},argPackAdvance:8,readValueFromPointer:function(e){var r;if(1===n)r=F;else if(2===n)r=U;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);r=B}return this.fromWireType(r[e>>>a])},destructorFunction:null})},K:function(e,t,n,r,i,a,s,o,u,l,c,h,p){c=$e(c),a=Bt(i,a),o&&(o=Bt(s,o)),l&&(l=Bt(u,l)),p=Bt(h,p);var f=je(c);Tt(f,(function(){Ht("Cannot construct "+c+" due to unbound types",[r])})),Xe([e,t,n],r?[r]:[],(function(t){var n,i;t=t[0],i=r?(n=t.registeredClass).instancePrototype:yt.prototype;var s=Ve(f,(function(){if(Object.getPrototypeOf(this)!==u)throw new et("Use 'new' to construct "+c);if(void 0===h.constructor_body)throw new et(c+" has no accessible constructor");var e=h.constructor_body[arguments.length];if(void 0===e)throw new et("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(h.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),u=Object.create(i,{constructor:{value:s}});s.prototype=u;var h=new Et(c,s,u,p,n,a,o,l),d=new Lt(c,h,!0,!1,!1),v=new Lt(c+"*",h,!1,!1,!1),m=new Lt(c+" const*",h,!1,!0,!1);return gt[e]={pointerType:v,constPointerType:m},Ut(f,s),[d,v,m]}))},J:function(e,t,n,r,i,a){R(t>0);var s=jt(t,n);i=Bt(r,i);var o=[a],u=[];Xe([],[e],(function(e){var n="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new et("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){Ht("Cannot construct "+e.name+" due to unbound types",s)},Xe([],s,(function(r){return e.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&tt(n+" called with "+arguments.length+" arguments, expected "+(t-1)),u.length=0,o.length=t;for(var e=1;e<t;++e)o[e]=r[e].toWireType(u,arguments[e-1]);var a=i.apply(null,o);return Le(u),r[0].fromWireType(a)},[]})),[]}))},p:function(e,t,n,r,i,a,s,o){var u=jt(n,r);t=$e(t),a=Bt(i,a),Xe([],[e],(function(e){var r=(e=e[0]).name+"."+t;function i(){Ht("Cannot call "+r+" due to unbound types",u)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),o&&e.registeredClass.pureVirtualFunctions.push(t);var l=e.registeredClass.instancePrototype,c=l[t];return void 0===c||void 0===c.overloadTable&&c.className!==e.name&&c.argCount===n-2?(i.argCount=n-2,i.className=e.name,l[t]=i):(_t(l,t,r),l[t].overloadTable[n-2]=i),Xe([],u,(function(i){var o=Vt(r,i,e,a,s);return void 0===l[t].overloadTable?(o.argCount=n-2,l[t]=o):l[t].overloadTable[n-2]=o,[]})),[]}))},xa:function(e,t){nt(e,{name:t=$e(t),fromWireType:function(e){var t=Yt[e].value;return qt(e),t},toWireType:function(e,t){return Qt(t)},argPackAdvance:8,readValueFromPointer:Ue,destructorFunction:null})},Aa:function(e,t,n,r){var i=Qe(n);function a(){}t=$e(t),a.values={},nt(e,{name:t,constructor:a,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:Jt(t,i,r),destructorFunction:null}),Tt(t,a)},Q:function(e,t,n){var r=$t(e,"enum");t=$e(t);var i=r.constructor,a=Object.create(r.constructor.prototype,{value:{value:n},constructor:{value:Ve(r.name+"_"+t,(function(){}))}});i.values[n]=a,i[t]=a},ea:function(e,t,n){var r=Qe(n);nt(e,{name:t=$e(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!==typeof t&&"boolean"!==typeof t)throw new TypeError('Cannot convert "'+en(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:tn(t,r),destructorFunction:null})},s:function(e,t,n,r,i,a){var s=jt(t,n);e=$e(e),i=Bt(r,i),Tt(e,(function(){Ht("Cannot call "+e+" due to unbound types",s)}),t-1),Xe([],s,(function(n){var r=[n[0],null].concat(n.slice(1));return Ut(e,Vt(e,r,null,i,a),t-1),[]}))},z:function(e,t,n,r,i){t=$e(t),-1===i&&(i=4294967295);var a=Qe(n),s=function(e){return e};if(0===r){var o=32-8*n;s=function(e){return e<<o>>>o}}var u=t.includes("unsigned");nt(e,{name:t,fromWireType:s,toWireType:function(e,n){if("number"!==typeof n&&"boolean"!==typeof n)throw new TypeError('Cannot convert "'+en(n)+'" to '+this.name);if(n<r||n>i)throw new TypeError('Passing a number "'+en(n)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+r+", "+i+"]!");return u?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:nn(t,a,0!==r),destructorFunction:null})},w:function(e,t,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function i(e){var t=z,n=t[(e>>=2)>>>0],i=t[e+1>>>0];return new r(P,i,n)}nt(e,{name:n=$e(n),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},fa:function(e,t){var n="std::string"===(t=$e(t));nt(e,{name:t,fromWireType:function(e){var t,r=z[e>>>2];if(n)for(var i=e+4,a=0;a<=r;++a){var s=e+4+a;if(a==r||0==L[s>>>0]){var o=A(i,s-i);void 0===t?t=o:(t+=String.fromCharCode(0),t+=o),i=s+1}}else{var u=new Array(r);for(a=0;a<r;++a)u[a]=String.fromCharCode(L[e+4+a>>>0]);t=u.join("")}return kn(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r="string"===typeof t;r||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||tt("Cannot pass non-string to std::string");var i=(n&&r?function(){return M(t)}:function(){return t.length})(),a=wn(4+i+1);if(z[(a>>>=0)>>>2]=i,n&&r)N(t,a+4,i+1);else if(r)for(var s=0;s<i;++s){var o=t.charCodeAt(s);o>255&&(kn(a),tt("String has UTF-16 code units that do not fit in 8 bits")),L[a+4+s>>>0]=o}else for(s=0;s<i;++s)L[a+4+s>>>0]=t[s];return null!==e&&e.push(kn,a),a},argPackAdvance:8,readValueFromPointer:Ue,destructorFunction:function(e){kn(e)}})},U:function(e,t,n){var r,i,a,s,o;n=$e(n),2===t?(r=V,i=W,s=Y,a=function(){return Z},o=1):4===t&&(r=q,i=X,s=K,a=function(){return z},o=2),nt(e,{name:n,fromWireType:function(e){for(var n,i=z[e>>>2],s=a(),u=e+4,l=0;l<=i;++l){var c=e+4+l*t;if(l==i||0==s[c>>>o]){var h=r(u,c-u);void 0===n?n=h:(n+=String.fromCharCode(0),n+=h),u=c+t}}return kn(e),n},toWireType:function(e,r){"string"!==typeof r&&tt("Cannot pass non-string to C++ string type "+n);var a=s(r),u=wn(4+a+t);return z[(u>>>=0)>>>2]=a>>o,i(r,u+4,a+t),null!==e&&e.push(kn,u),u},argPackAdvance:8,readValueFromPointer:Ue,destructorFunction:function(e){kn(e)}})},Da:function(e,t,n,r,i,a){Fe[e]={name:$e(t),rawConstructor:Bt(n,r),rawDestructor:Bt(i,a),elements:[]}},Ba:function(e,t,n,r,i,a,s,o,u){Fe[e].elements.push({getterReturnType:t,getter:Bt(n,r),getterContext:i,setterArgumentType:a,setter:Bt(s,o),setterContext:u})},I:function(e,t,n,r,i,a){Ke[e]={name:$e(t),rawConstructor:Bt(n,r),rawDestructor:Bt(i,a),fields:[]}},Ea:function(e,t,n,r,i,a,s,o,u,l){Ke[e].fields.push({fieldName:$e(t),getterReturnType:n,getter:Bt(r,i),getterContext:a,setterArgumentType:s,setter:Bt(o,u),setterContext:l})},za:function(e,t){nt(e,{isVoid:!0,name:t=$e(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},R:function(e,t,n){e=rn(e),t=$t(t,"emval::as");var r=[],i=Qt(r);return B[n>>>2]=i,t.toWireType(r,e)},ha:function(e,t,n,r){e=rn(e);for(var i=function(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=$t(B[(t>>2)+r>>>0],"parameter "+r);return n}(t,n),a=new Array(t),s=0;s<t;++s){var o=i[s];a[s]=o.readValueFromPointer(r),r+=o.argPackAdvance}return Qt(e.apply(void 0,a))},na:qt,Ma:function(e){return 0===e?Qt(un()):(e=on(e),Qt(un()[e]))},Ia:function(e,t){return Qt((e=rn(e))[t=rn(t)])},_:function(e){e>4&&(Yt[e].refcount+=1)},la:function(e,t){return(e=rn(e))instanceof(t=rn(t))},La:function(e){return"number"===typeof(e=rn(e))},Ka:function(){return Qt([])},V:function(e){return Qt(on(e))},Ja:function(){return Qt({})},Ha:function(e){Le(Yt[e].value),qt(e)},Ga:function(e,t,n){e=rn(e),t=rn(t),n=rn(n),e[t]=n},B:function(e,t){return Qt((e=$t(e,"_emval_take_value")).readValueFromPointer(t))},da:function(){fe()},aa:function(e,t){var n;if(0===e)n=Date.now();else{if(1!==e&&4!==e||!ln)return Ce(28),-1;n=an()}return B[t>>>2]=n/1e3|0,B[t+4>>>2]=n%1e3*1e3*1e3|0,0},oa:function(e,t,n){L.copyWithin(e>>>0,t>>>0,t+n>>>0)},T:function(e){var t=L.length,n=4294901760;if((e>>>=0)>n)return!1;for(var r=1;r<=4;r*=2){var i=t*(1+.2/r);if(i=Math.min(i,e+100663296),cn(Math.min(n,Q(Math.max(e,i),65536))))return!0}return!1},ta:function(e,t){try{var n=0;return pn().forEach((function(r,i){var a=t+n;B[e+4*i>>>2]=a,function(e,t,n){for(var r=0;r<e.length;++r)F[t++>>>0]=e.charCodeAt(r);n||(F[t>>>0]=0)}(r,a),n+=r.length+1})),0}catch(IQ){return"undefined"!==typeof Me&&IQ instanceof Me.ErrnoError||fe(IQ),IQ.errno}},ua:function(e,t){try{var n=pn();B[e>>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),B[t>>>2]=r,0}catch(IQ){return"undefined"!==typeof Me&&IQ instanceof Me.ErrnoError||fe(IQ),IQ.errno}},ca:function(e){try{var t=Pe.getStreamFromFD(e);return Me.close(t),0}catch(IQ){return"undefined"!==typeof Me&&IQ instanceof Me.ErrnoError||fe(IQ),IQ.errno}},wa:function(e,t,n,r){try{var i=Pe.getStreamFromFD(e),a=Pe.doReadv(i,t,n);return B[r>>>2]=a,0}catch(IQ){return"undefined"!==typeof Me&&IQ instanceof Me.ErrnoError||fe(IQ),IQ.errno}},ja:function(e,t,n,r,i){try{var a=Pe.getStreamFromFD(e),s=4294967296*n+(t>>>0),o=9007199254740992;return s<=-o||s>=o?-61:(Me.llseek(a,s,r),ye=[a.position>>>0,(me=a.position,+Math.abs(me)>=1?me>0?(0|Math.min(+Math.floor(me/4294967296),4294967295))>>>0:~~+Math.ceil((me-+(~~me>>>0))/4294967296)>>>0:0)],B[i>>>2]=ye[0],B[i+4>>>2]=ye[1],a.getdents&&0===s&&0===r&&(a.getdents=null),0)}catch(IQ){return"undefined"!==typeof Me&&IQ instanceof Me.ErrnoError||fe(IQ),IQ.errno}},va:function(e,t,n,r){try{var i=Pe.getStreamFromFD(e),a=Pe.doWritev(i,t,n);return B[r>>>2]=a,0}catch(IQ){return"undefined"!==typeof Me&&IQ instanceof Me.ErrnoError||fe(IQ),IQ.errno}},a:function(){return I()},G:function(e,t,n,r){var i=Cn();try{return $.get(e)(t,n,r)}catch(IQ){if(Dn(i),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},C:function(e){var t=Cn();try{return $.get(e)()}catch(IQ){if(Dn(t),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},c:function(e,t){var n=Cn();try{return $.get(e)(t)}catch(IQ){if(Dn(n),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},O:function(e,t,n){var r=Cn();try{return $.get(e)(t,n)}catch(IQ){if(Dn(r),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},i:function(e,t,n){var r=Cn();try{return $.get(e)(t,n)}catch(IQ){if(Dn(r),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},j:function(e,t,n,r){var i=Cn();try{return $.get(e)(t,n,r)}catch(IQ){if(Dn(i),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},P:function(e,t,n,r,i){var a=Cn();try{return $.get(e)(t,n,r,i)}catch(IQ){if(Dn(a),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},X:function(e,t,n,r,i,a){var s=Cn();try{return $.get(e)(t,n,r,i,a)}catch(IQ){if(Dn(s),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},E:function(e,t,n,r,i,a){var s=Cn();try{return $.get(e)(t,n,r,i,a)}catch(IQ){if(Dn(s),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},y:function(e,t,n,r,i,a,s){var o=Cn();try{return $.get(e)(t,n,r,i,a,s)}catch(IQ){if(Dn(o),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},Y:function(e,t,n,r,i,a,s,o){var u=Cn();try{return $.get(e)(t,n,r,i,a,s,o)}catch(IQ){if(Dn(u),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},N:function(e,t,n,r,i,a,s,o,u){var l=Cn();try{return $.get(e)(t,n,r,i,a,s,o,u)}catch(IQ){if(Dn(l),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},M:function(e,t,n,r,i,a,s,o,u,l,c,h){var p=Cn();try{return $.get(e)(t,n,r,i,a,s,o,u,l,c,h)}catch(IQ){if(Dn(p),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},ia:function(e){var t=Cn();try{return Mn(e)}catch(IQ){if(Dn(t),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},f:function(e){var t=Cn();try{$.get(e)()}catch(IQ){if(Dn(t),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},e:function(e,t){var n=Cn();try{$.get(e)(t)}catch(IQ){if(Dn(n),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},H:function(e,t,n,r,i){var a=Cn();try{$.get(e)(t,n,r,i)}catch(IQ){if(Dn(a),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},F:function(e,t,n,r,i,a,s){var o=Cn();try{$.get(e)(t,n,r,i,a,s)}catch(IQ){if(Dn(o),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},g:function(e,t,n){var r=Cn();try{$.get(e)(t,n)}catch(IQ){if(Dn(r),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},r:function(e,t,n,r,i){var a=Cn();try{$.get(e)(t,n,r,i)}catch(IQ){if(Dn(a),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},d:function(e,t,n,r){var i=Cn();try{$.get(e)(t,n,r)}catch(IQ){if(Dn(i),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},k:function(e,t,n,r,i){var a=Cn();try{$.get(e)(t,n,r,i)}catch(IQ){if(Dn(a),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},Z:function(e,t,n,r,i,a){var s=Cn();try{$.get(e)(t,n,r,i,a)}catch(IQ){if(Dn(s),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},S:function(e,t,n,r,i,a,s,o){var u=Cn();try{$.get(e)(t,n,r,i,a,s,o)}catch(IQ){if(Dn(u),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},D:function(e,t,n,r,i,a){var s=Cn();try{$.get(e)(t,n,r,i,a)}catch(IQ){if(Dn(s),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},v:function(e,t,n,r,i,a,s){var o=Cn();try{$.get(e)(t,n,r,i,a,s)}catch(IQ){if(Dn(o),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},q:function(e,t,n,r,i,a,s,o){var u=Cn();try{$.get(e)(t,n,r,i,a,s,o)}catch(IQ){if(Dn(u),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},t:function(e,t,n,r,i,a,s,o,u,l){var c=Cn();try{$.get(e)(t,n,r,i,a,s,o,u,l)}catch(IQ){if(Dn(c),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},o:function(e,t,n,r,i,a,s,o,u,l,c){var h=Cn();try{$.get(e)(t,n,r,i,a,s,o,u,l,c)}catch(IQ){if(Dn(h),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},L:function(e,t,n,r,i,a,s,o,u,l,c,h,p,f,d,v){var m=Cn();try{$.get(e)(t,n,r,i,a,s,o,u,l,c,h,p,f,d,v)}catch(IQ){if(Dn(m),IQ!==IQ+0&&"longjmp"!==IQ)throw IQ;An(1,0)}},ma:function(e){return e},W:function(e){b(e)},sa:function(e,t,n,r){return gn(e,t,n,r)}},wn=(function(){var e={a:In};function t(e,t){var n=e.exports;i.asm=n,J((w=i.asm.Na).buffer),$=i.asm.Ra,function(e){te.unshift(e)}(i.asm.Oa),pe()}function n(e){t(e.instance)}function a(t){return function(){if(!E&&(v||m)){if("function"===typeof fetch&&!Te(de))return fetch(de,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+de+"'";return e.arrayBuffer()})).catch((function(){return Ee(de)}));if(u)return new Promise((function(e,t){u(de,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return Ee(de)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){T("failed to asynchronously prepare wasm: "+e),fe(e)}))}if(he(),i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(IQ){return T("Module.instantiateWasm callback failed with error: "+IQ),!1}(E||"function"!==typeof WebAssembly.instantiateStreaming||_e(de)||Te(de)||"function"!==typeof fetch?a(n):fetch(de,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return T("wasm streaming compile failed: "+e),T("falling back to ArrayBuffer instantiation"),a(n)}))}))).catch(r)}(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.Oa).apply(null,arguments)},i._main=function(){return(i._main=i.asm.Pa).apply(null,arguments)},i._malloc=function(){return(wn=i._malloc=i.asm.Qa).apply(null,arguments)}),kn=i._free=function(){return(kn=i._free=i.asm.Sa).apply(null,arguments)},Sn=i.___getTypeName=function(){return(Sn=i.___getTypeName=i.asm.Ta).apply(null,arguments)},Rn=(i.___embind_register_native_and_builtin_types=function(){return(i.___embind_register_native_and_builtin_types=i.asm.Ua).apply(null,arguments)},i.___errno_location=function(){return(Rn=i.___errno_location=i.asm.Va).apply(null,arguments)}),Cn=i.stackSave=function(){return(Cn=i.stackSave=i.asm.Wa).apply(null,arguments)},Dn=i.stackRestore=function(){return(Dn=i.stackRestore=i.asm.Xa).apply(null,arguments)},An=i._setThrew=function(){return(An=i._setThrew=i.asm.Ya).apply(null,arguments)},On=i.___cxa_can_catch=function(){return(On=i.___cxa_can_catch=i.asm.Za).apply(null,arguments)},Nn=i.___cxa_is_pointer_type=function(){return(Nn=i.___cxa_is_pointer_type=i.asm._a).apply(null,arguments)},Mn=(i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.$a).apply(null,arguments)},i.dynCall_j=function(){return(Mn=i.dynCall_j=i.asm.ab).apply(null,arguments)});i.dynCall_viijii=function(){return(i.dynCall_viijii=i.asm.bb).apply(null,arguments)},i.dynCall_iiiiij=function(){return(i.dynCall_iiiiij=i.asm.cb).apply(null,arguments)},i.dynCall_iiiiijj=function(){return(i.dynCall_iiiiijj=i.asm.db).apply(null,arguments)},i.dynCall_iiiiiijj=function(){return(i.dynCall_iiiiiijj=i.asm.eb).apply(null,arguments)};function Pn(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}i.addRunDependency=he,i.removeRunDependency=pe,i.FS_createPath=Me.createPath,i.FS_createDataFile=Me.createDataFile,i.FS_createPreloadedFile=Me.createPreloadedFile,i.FS_createLazyFile=Me.createLazyFile,i.FS_createDevice=Me.createDevice,i.FS_unlink=Me.unlink,i.FS=Me;function Fn(e){var t=i._main;try{!function(e,t){e,ae()||(!0,i.onExit&&i.onExit(e),S=!0);d(e,new Pn(e))}(t(0,0))}catch(IQ){if(IQ instanceof Pn||"unwind"==IQ)return;var n=IQ;IQ&&"object"===typeof IQ&&IQ.stack&&(n=[IQ,IQ.stack]),T("exception thrown: "+n),d(1,IQ)}finally{!0}}function Ln(e){function t(){bn||(bn=!0,i.calledRun=!0,S||(!0,i.noFSInit||Me.init.initialized||Me.init(),Me.ignorePermissions=!1,Oe.init(),xe(te),xe(ne),n(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),Un&&Fn(),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)oe(i.postRun.shift());xe(re)}()))}e=e||p,ue>0||(!function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)se(i.preRun.shift());xe(ee)}(),ue>0||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),t()}),1)):t()))}if(ce=function e(){bn||Ln(),bn||(ce=e)},i.run=Ln,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();var Un=!0;return i.noInitialRun&&(Un=!1),Ln(),t.ready}}();"object"===typeof e&&"object"===typeof t?t.exports=r:"function"===typeof define&&n.amdO?define([],(function(){return r})):"object"===typeof e&&(e.WebIFCWasm=r)}}),rk=4288193352,ik=1634111441,ak=177149247,sk=2056796094,ok=3087945054,uk=325726236,lk=1674181508,ck=277319702,hk=753842376,pk=2906023776,fk=4196446775,dk=32344328,vk=644574406,mk=963979645,yk=4031249490,gk=3299480353,_k=2979338954,Tk=1095909175,Ek=3124254112,xk=2938176219,bk=635142910,Ik=3758799889,wk=1051757585,kk=4217484030,Sk=3999819293,Rk=3902619387,Ck=3296154744,Dk=1677625105,Ak=639361253,Ok=843113511,Nk=905975707,Mk=3221913625,Pk=3571504051,Fk=2272882330,Lk=25142252,Uk=4136498852,Zk=3640358203,Bk=1973544240,zk=3495092785,Gk=4074379575,Hk=3426335179,jk=1335981549,Vk=1052013943,Wk=1062813311,Yk=1945004755,qk=3040386961,Xk=3041715199,Kk=395920057,Qk=3242481149,Jk=342316401,$k=3518393246,eS=1360408905,tS=1904799276,nS=862014818,rS=3310460725,iS=264262732,aS=402227799,sS=1003880860,oS=1758889154,uS=4123344466,lS=1623761950,cS=1658829314,hS=2814081492,pS=3747195512,fS=484807127,dS=1209101575,vS=2853485674,mS=24185140,yS=1310830890,gS=3415622556,_S=647756555,TS=2827207264,ES=2143335405,xS=1287392070,bS=819412036,IS=1426591983,wS=2058353004,kS=4278956645,SS=182646315,RS=2188021234,CS=3132237377,DS=987401354,AS=707683696,OS=2223149337,NS=3508470533,MS=900683007,PS=263784265,FS=1509553395,LS=3493046030,US=3009204131,ZS=3319311131,BS=2068733104,zS=4175244083,GS=2176052936,HS=76236018,jS=629592764,VS=1154579445,WS=377706215,YS=1437502449,qS=1073191201,XS=1911478936,KS=2474470126,QS=3588315303,JS=3079942009,$S=3694346114,eR=1687234759,tR=310824031,nR=3612865200,rR=3171933400,iR=1156407060,aR=3740093272,sR=1946335990,oR=103090709,uR=3651124850,lR=738039164,cR=2295281155,hR=3219374653,pR=90941305,fR=2262370178,dR=3024970846,vR=3283111854,mR=4021432810,yR=979691226,gR=3027567501,_R=2320036040,TR=160246688,ER=2655215786,xR=3242617779,bR=4186316022,IR=781010003,wR=1401173127,kR=2016517767,SR=3053780830,RR=4086658281,CR=1329646415,DR=4097777520,AR=1529196076,OR=3127900445,NR=3027962421,MR=3420628829,PR=3856911033,FR=1999602285,LR=1412071761,UR=2706606064,ZR=463610769,BR=1404847402,zR=331165859,GR=4252922144,HR=682877961,jR=3544373492,VR=1179482911,WR=1004757350,YR=4243806635,qR=214636428,XR=2445595289,KR=2757150158,QR=3136571912,JR=1807405624,$R=530289379,eC=1621171031,tC=2082059205,nC=734778138,rC=1235345126,iC=3689010777,aC=3657597509,sC=1975003073,oC=3979015343,uC=2218152070,lC=603775116,cC=3101698114,hC=1162798199,pC=413509423,fC=812556717,dC=3824725483,vC=2347447852,mC=3663046924,yC=3825984169,gC=1620046519,_C=3026737570,TC=180925521,EC=630975310,xC=4292641817,bC=4207607924,IC=1530820697,wC=2391383451,kC=2769231204,SC=926996030,RC=2391406946,CC=4156078855,DC=3512223829,AC=4237592921,OC=3304561284,NC=486154966,MC=[rk,ik,ak,sk,ok,uk,lk,ck,hk,pk,fk,dk,vk,mk,yk,gk,_k,Tk,Ek,xk,bk,Ik,wk,kk,Sk,Rk,Ck,Dk,Ak,Ok,Nk,Mk,Pk,Fk,Lk,Uk,Zk,Bk,zk,Gk,Hk,jk,Vk,Wk,Yk,qk,Xk,Kk,Qk,Jk,$k,eS,tS,nS,rS,iS,aS,sS,oS,uS,lS,cS,hS,pS,fS,dS,vS,mS,yS,gS,_S,TS,ES,xS,bS,IS,wS,kS,SS,RS,CS,DS,AS,OS,NS,MS,PS,FS,LS,US,ZS,BS,zS,GS,HS,jS,VS,WS,YS,qS,XS,KS,QS,JS,$S,eR,tR,nR,rR,iR,aR,sR,uR,lR,cR,hR,pR,fR,dR,vR,mR,yR,gR,_R,kR,SR,RR,CR,DR,AR,OR,NR,MR,PR,FR,LR,UR,ZR,BR,zR,GR,HR,jR,VR,WR,YR,qR,XR,KR,QR,JR,$R,eC,tC,nC,rC,iC,aC,sC,oC,uC,lC,cC,hC,pC,fC,dC,vC,mC,yC,gC,_C,EC,xC,bC,IC,wC,kC,SC,RC,CC,DC,AC,OC,NC],PC={3821786052:function(e){return UN.FromTape(e.ID,e.type,e.arguments)},2296667514:function(e){return ZN.FromTape(e.ID,e.type,e.arguments)},3630933823:function(e){return BN.FromTape(e.ID,e.type,e.arguments)},4288193352:function(e){return zN.FromTape(e.ID,e.type,e.arguments)},2874132201:function(e){return GN.FromTape(e.ID,e.type,e.arguments)},618182010:function(e){return HN.FromTape(e.ID,e.type,e.arguments)},1635779807:function(e){return jN.FromTape(e.ID,e.type,e.arguments)},2603310189:function(e){return VN.FromTape(e.ID,e.type,e.arguments)},3406155212:function(e){return WN.FromTape(e.ID,e.type,e.arguments)},1634111441:function(e){return YN.FromTape(e.ID,e.type,e.arguments)},177149247:function(e){return qN.FromTape(e.ID,e.type,e.arguments)},1411407467:function(e){return XN.FromTape(e.ID,e.type,e.arguments)},3352864051:function(e){return KN.FromTape(e.ID,e.type,e.arguments)},2056796094:function(e){return QN.FromTape(e.ID,e.type,e.arguments)},1871374353:function(e){return JN.FromTape(e.ID,e.type,e.arguments)},3087945054:function(e){return $N.FromTape(e.ID,e.type,e.arguments)},3001207471:function(e){return eM.FromTape(e.ID,e.type,e.arguments)},325726236:function(e){return tM.FromTape(e.ID,e.type,e.arguments)},749761778:function(e){return nM.FromTape(e.ID,e.type,e.arguments)},3199563722:function(e){return rM.FromTape(e.ID,e.type,e.arguments)},2483840362:function(e){return iM.FromTape(e.ID,e.type,e.arguments)},3379348081:function(e){return aM.FromTape(e.ID,e.type,e.arguments)},3239324667:function(e){return sM.FromTape(e.ID,e.type,e.arguments)},4263986512:function(e){return oM.FromTape(e.ID,e.type,e.arguments)},53199957:function(e){return uM.FromTape(e.ID,e.type,e.arguments)},2029264950:function(e){return lM.FromTape(e.ID,e.type,e.arguments)},3512275521:function(e){return cM.FromTape(e.ID,e.type,e.arguments)},1674181508:function(e){return hM.FromTape(e.ID,e.type,e.arguments)},669184980:function(e){return pM.FromTape(e.ID,e.type,e.arguments)},639542469:function(e){return fM.FromTape(e.ID,e.type,e.arguments)},411424972:function(e){return dM.FromTape(e.ID,e.type,e.arguments)},130549933:function(e){return vM.FromTape(e.ID,e.type,e.arguments)},3869604511:function(e){return mM.FromTape(e.ID,e.type,e.arguments)},3798115385:function(e){return yM.FromTape(e.ID,e.type,e.arguments)},1310608509:function(e){return gM.FromTape(e.ID,e.type,e.arguments)},2705031697:function(e){return _M.FromTape(e.ID,e.type,e.arguments)},3460190687:function(e){return TM.FromTape(e.ID,e.type,e.arguments)},3207858831:function(e){return EM.FromTape(e.ID,e.type,e.arguments)},277319702:function(e){return xM.FromTape(e.ID,e.type,e.arguments)},1532957894:function(e){return bM.FromTape(e.ID,e.type,e.arguments)},4261334040:function(e){return IM.FromTape(e.ID,e.type,e.arguments)},3125803723:function(e){return wM.FromTape(e.ID,e.type,e.arguments)},2740243338:function(e){return kM.FromTape(e.ID,e.type,e.arguments)},1967976161:function(e){return SM.FromTape(e.ID,e.type,e.arguments)},2461110595:function(e){return RM.FromTape(e.ID,e.type,e.arguments)},2887950389:function(e){return CM.FromTape(e.ID,e.type,e.arguments)},167062518:function(e){return DM.FromTape(e.ID,e.type,e.arguments)},753842376:function(e){return AM.FromTape(e.ID,e.type,e.arguments)},2906023776:function(e){return OM.FromTape(e.ID,e.type,e.arguments)},819618141:function(e){return NM.FromTape(e.ID,e.type,e.arguments)},4196446775:function(e){return MM.FromTape(e.ID,e.type,e.arguments)},3649138523:function(e){return PM.FromTape(e.ID,e.type,e.arguments)},616511568:function(e){return FM.FromTape(e.ID,e.type,e.arguments)},1334484129:function(e){return LM.FromTape(e.ID,e.type,e.arguments)},32344328:function(e){return UM.FromTape(e.ID,e.type,e.arguments)},231477066:function(e){return ZM.FromTape(e.ID,e.type,e.arguments)},3649129432:function(e){return BM.FromTape(e.ID,e.type,e.arguments)},2736907675:function(e){return zM.FromTape(e.ID,e.type,e.arguments)},4037036970:function(e){return GM.FromTape(e.ID,e.type,e.arguments)},1136057603:function(e){return HM.FromTape(e.ID,e.type,e.arguments)},1560379544:function(e){return jM.FromTape(e.ID,e.type,e.arguments)},3367102660:function(e){return VM.FromTape(e.ID,e.type,e.arguments)},1387855156:function(e){return WM.FromTape(e.ID,e.type,e.arguments)},2069777674:function(e){return YM.FromTape(e.ID,e.type,e.arguments)},1260505505:function(e){return qM.FromTape(e.ID,e.type,e.arguments)},4182860854:function(e){return XM.FromTape(e.ID,e.type,e.arguments)},2581212453:function(e){return KM.FromTape(e.ID,e.type,e.arguments)},2713105998:function(e){return QM.FromTape(e.ID,e.type,e.arguments)},644574406:function(e){return JM.FromTape(e.ID,e.type,e.arguments)},963979645:function(e){return $M.FromTape(e.ID,e.type,e.arguments)},4031249490:function(e){return eP.FromTape(e.ID,e.type,e.arguments)},3299480353:function(e){return tP.FromTape(e.ID,e.type,e.arguments)},2979338954:function(e){return nP.FromTape(e.ID,e.type,e.arguments)},39481116:function(e){return rP.FromTape(e.ID,e.type,e.arguments)},1095909175:function(e){return iP.FromTape(e.ID,e.type,e.arguments)},1909888760:function(e){return aP.FromTape(e.ID,e.type,e.arguments)},1950629157:function(e){return sP.FromTape(e.ID,e.type,e.arguments)},3124254112:function(e){return oP.FromTape(e.ID,e.type,e.arguments)},1177604601:function(e){return uP.FromTape(e.ID,e.type,e.arguments)},2938176219:function(e){return lP.FromTape(e.ID,e.type,e.arguments)},2188180465:function(e){return cP.FromTape(e.ID,e.type,e.arguments)},2898889636:function(e){return hP.FromTape(e.ID,e.type,e.arguments)},635142910:function(e){return pP.FromTape(e.ID,e.type,e.arguments)},395041908:function(e){return fP.FromTape(e.ID,e.type,e.arguments)},3758799889:function(e){return dP.FromTape(e.ID,e.type,e.arguments)},3293546465:function(e){return vP.FromTape(e.ID,e.type,e.arguments)},1051757585:function(e){return mP.FromTape(e.ID,e.type,e.arguments)},2674252688:function(e){return yP.FromTape(e.ID,e.type,e.arguments)},4217484030:function(e){return gP.FromTape(e.ID,e.type,e.arguments)},1285652485:function(e){return _P.FromTape(e.ID,e.type,e.arguments)},3999819293:function(e){return TP.FromTape(e.ID,e.type,e.arguments)},3203706013:function(e){return EP.FromTape(e.ID,e.type,e.arguments)},1123145078:function(e){return xP.FromTape(e.ID,e.type,e.arguments)},574549367:function(e){return bP.FromTape(e.ID,e.type,e.arguments)},1675464909:function(e){return IP.FromTape(e.ID,e.type,e.arguments)},2059837836:function(e){return wP.FromTape(e.ID,e.type,e.arguments)},59481748:function(e){return kP.FromTape(e.ID,e.type,e.arguments)},3749851601:function(e){return SP.FromTape(e.ID,e.type,e.arguments)},3486308946:function(e){return RP.FromTape(e.ID,e.type,e.arguments)},3331915920:function(e){return CP.FromTape(e.ID,e.type,e.arguments)},1416205885:function(e){return DP.FromTape(e.ID,e.type,e.arguments)},3150382593:function(e){return AP.FromTape(e.ID,e.type,e.arguments)},3902619387:function(e){return OP.FromTape(e.ID,e.type,e.arguments)},2951183804:function(e){return NP.FromTape(e.ID,e.type,e.arguments)},3296154744:function(e){return MP.FromTape(e.ID,e.type,e.arguments)},2197970202:function(e){return PP.FromTape(e.ID,e.type,e.arguments)},2611217952:function(e){return FP.FromTape(e.ID,e.type,e.arguments)},2937912522:function(e){return LP.FromTape(e.ID,e.type,e.arguments)},1383045692:function(e){return UP.FromTape(e.ID,e.type,e.arguments)},1062206242:function(e){return ZP.FromTape(e.ID,e.type,e.arguments)},1677625105:function(e){return BP.FromTape(e.ID,e.type,e.arguments)},3893394355:function(e){return zP.FromTape(e.ID,e.type,e.arguments)},747523909:function(e){return GP.FromTape(e.ID,e.type,e.arguments)},647927063:function(e){return HP.FromTape(e.ID,e.type,e.arguments)},2205249479:function(e){return jP.FromTape(e.ID,e.type,e.arguments)},639361253:function(e){return VP.FromTape(e.ID,e.type,e.arguments)},2301859152:function(e){return WP.FromTape(e.ID,e.type,e.arguments)},776857604:function(e){return YP.FromTape(e.ID,e.type,e.arguments)},3285139300:function(e){return qP.FromTape(e.ID,e.type,e.arguments)},3264961684:function(e){return XP.FromTape(e.ID,e.type,e.arguments)},843113511:function(e){return KP.FromTape(e.ID,e.type,e.arguments)},905975707:function(e){return QP.FromTape(e.ID,e.type,e.arguments)},300633059:function(e){return JP.FromTape(e.ID,e.type,e.arguments)},3221913625:function(e){return $P.FromTape(e.ID,e.type,e.arguments)},400855858:function(e){return eF.FromTape(e.ID,e.type,e.arguments)},2542286263:function(e){return tF.FromTape(e.ID,e.type,e.arguments)},3875453745:function(e){return nF.FromTape(e.ID,e.type,e.arguments)},3732776249:function(e){return rF.FromTape(e.ID,e.type,e.arguments)},15328376:function(e){return iF.FromTape(e.ID,e.type,e.arguments)},2485617015:function(e){return aF.FromTape(e.ID,e.type,e.arguments)},1485152156:function(e){return sF.FromTape(e.ID,e.type,e.arguments)},3571504051:function(e){return oF.FromTape(e.ID,e.type,e.arguments)},3850581409:function(e){return uF.FromTape(e.ID,e.type,e.arguments)},2272882330:function(e){return lF.FromTape(e.ID,e.type,e.arguments)},2816379211:function(e){return cF.FromTape(e.ID,e.type,e.arguments)},2510884976:function(e){return hF.FromTape(e.ID,e.type,e.arguments)},370225590:function(e){return pF.FromTape(e.ID,e.type,e.arguments)},1981873012:function(e){return fF.FromTape(e.ID,e.type,e.arguments)},2859738748:function(e){return dF.FromTape(e.ID,e.type,e.arguments)},45288368:function(e){return vF.FromTape(e.ID,e.type,e.arguments)},2614616156:function(e){return mF.FromTape(e.ID,e.type,e.arguments)},2732653382:function(e){return yF.FromTape(e.ID,e.type,e.arguments)},775493141:function(e){return gF.FromTape(e.ID,e.type,e.arguments)},1959218052:function(e){return _F.FromTape(e.ID,e.type,e.arguments)},3898045240:function(e){return TF.FromTape(e.ID,e.type,e.arguments)},2185764099:function(e){return EF.FromTape(e.ID,e.type,e.arguments)},1060000209:function(e){return xF.FromTape(e.ID,e.type,e.arguments)},4105962743:function(e){return bF.FromTape(e.ID,e.type,e.arguments)},488727124:function(e){return IF.FromTape(e.ID,e.type,e.arguments)},1525564444:function(e){return wF.FromTape(e.ID,e.type,e.arguments)},2559216714:function(e){return kF.FromTape(e.ID,e.type,e.arguments)},2574617495:function(e){return SF.FromTape(e.ID,e.type,e.arguments)},3419103109:function(e){return RF.FromTape(e.ID,e.type,e.arguments)},3050246964:function(e){return CF.FromTape(e.ID,e.type,e.arguments)},3293443760:function(e){return DF.FromTape(e.ID,e.type,e.arguments)},25142252:function(e){return AF.FromTape(e.ID,e.type,e.arguments)},578613899:function(e){return OF.FromTape(e.ID,e.type,e.arguments)},2889183280:function(e){return NF.FromTape(e.ID,e.type,e.arguments)},2713554722:function(e){return MF.FromTape(e.ID,e.type,e.arguments)},4136498852:function(e){return PF.FromTape(e.ID,e.type,e.arguments)},335055490:function(e){return FF.FromTape(e.ID,e.type,e.arguments)},3640358203:function(e){return LF.FromTape(e.ID,e.type,e.arguments)},2954562838:function(e){return UF.FromTape(e.ID,e.type,e.arguments)},1785450214:function(e){return ZF.FromTape(e.ID,e.type,e.arguments)},1466758467:function(e){return BF.FromTape(e.ID,e.type,e.arguments)},3895139033:function(e){return zF.FromTape(e.ID,e.type,e.arguments)},1419761937:function(e){return GF.FromTape(e.ID,e.type,e.arguments)},602808272:function(e){return HF.FromTape(e.ID,e.type,e.arguments)},1973544240:function(e){return jF.FromTape(e.ID,e.type,e.arguments)},1916426348:function(e){return VF.FromTape(e.ID,e.type,e.arguments)},3295246426:function(e){return WF.FromTape(e.ID,e.type,e.arguments)},1815067380:function(e){return YF.FromTape(e.ID,e.type,e.arguments)},2506170314:function(e){return qF.FromTape(e.ID,e.type,e.arguments)},2147822146:function(e){return XF.FromTape(e.ID,e.type,e.arguments)},539742890:function(e){return KF.FromTape(e.ID,e.type,e.arguments)},3495092785:function(e){return QF.FromTape(e.ID,e.type,e.arguments)},1457835157:function(e){return JF.FromTape(e.ID,e.type,e.arguments)},2601014836:function(e){return $F.FromTape(e.ID,e.type,e.arguments)},2827736869:function(e){return eL.FromTape(e.ID,e.type,e.arguments)},2629017746:function(e){return tL.FromTape(e.ID,e.type,e.arguments)},1186437898:function(e){return nL.FromTape(e.ID,e.type,e.arguments)},3800577675:function(e){return rL.FromTape(e.ID,e.type,e.arguments)},1105321065:function(e){return iL.FromTape(e.ID,e.type,e.arguments)},2367409068:function(e){return aL.FromTape(e.ID,e.type,e.arguments)},3510044353:function(e){return sL.FromTape(e.ID,e.type,e.arguments)},1213902940:function(e){return oL.FromTape(e.ID,e.type,e.arguments)},4074379575:function(e){return uL.FromTape(e.ID,e.type,e.arguments)},3961806047:function(e){return lL.FromTape(e.ID,e.type,e.arguments)},3426335179:function(e){return cL.FromTape(e.ID,e.type,e.arguments)},1306400036:function(e){return hL.FromTape(e.ID,e.type,e.arguments)},3632507154:function(e){return pL.FromTape(e.ID,e.type,e.arguments)},1765591967:function(e){return fL.FromTape(e.ID,e.type,e.arguments)},1045800335:function(e){return dL.FromTape(e.ID,e.type,e.arguments)},2949456006:function(e){return vL.FromTape(e.ID,e.type,e.arguments)},32440307:function(e){return mL.FromTape(e.ID,e.type,e.arguments)},1335981549:function(e){return yL.FromTape(e.ID,e.type,e.arguments)},2635815018:function(e){return gL.FromTape(e.ID,e.type,e.arguments)},1945343521:function(e){return _L.FromTape(e.ID,e.type,e.arguments)},1052013943:function(e){return TL.FromTape(e.ID,e.type,e.arguments)},1599208980:function(e){return EL.FromTape(e.ID,e.type,e.arguments)},562808652:function(e){return xL.FromTape(e.ID,e.type,e.arguments)},1062813311:function(e){return bL.FromTape(e.ID,e.type,e.arguments)},2063403501:function(e){return IL.FromTape(e.ID,e.type,e.arguments)},1945004755:function(e){return wL.FromTape(e.ID,e.type,e.arguments)},3256556792:function(e){return kL.FromTape(e.ID,e.type,e.arguments)},3040386961:function(e){return SL.FromTape(e.ID,e.type,e.arguments)},3849074793:function(e){return RL.FromTape(e.ID,e.type,e.arguments)},3041715199:function(e){return CL.FromTape(e.ID,e.type,e.arguments)},3205830791:function(e){return DL.FromTape(e.ID,e.type,e.arguments)},1154170062:function(e){return AL.FromTape(e.ID,e.type,e.arguments)},770865208:function(e){return OL.FromTape(e.ID,e.type,e.arguments)},3732053477:function(e){return NL.FromTape(e.ID,e.type,e.arguments)},395920057:function(e){return ML.FromTape(e.ID,e.type,e.arguments)},2963535650:function(e){return PL.FromTape(e.ID,e.type,e.arguments)},1714330368:function(e){return FL.FromTape(e.ID,e.type,e.arguments)},3242481149:function(e){return LL.FromTape(e.ID,e.type,e.arguments)},526551008:function(e){return UL.FromTape(e.ID,e.type,e.arguments)},2323601079:function(e){return ZL.FromTape(e.ID,e.type,e.arguments)},445594917:function(e){return BL.FromTape(e.ID,e.type,e.arguments)},4006246654:function(e){return zL.FromTape(e.ID,e.type,e.arguments)},342316401:function(e){return GL.FromTape(e.ID,e.type,e.arguments)},869906466:function(e){return HL.FromTape(e.ID,e.type,e.arguments)},3518393246:function(e){return jL.FromTape(e.ID,e.type,e.arguments)},3760055223:function(e){return VL.FromTape(e.ID,e.type,e.arguments)},1360408905:function(e){return WL.FromTape(e.ID,e.type,e.arguments)},2030761528:function(e){return YL.FromTape(e.ID,e.type,e.arguments)},3900360178:function(e){return qL.FromTape(e.ID,e.type,e.arguments)},476780140:function(e){return XL.FromTape(e.ID,e.type,e.arguments)},1472233963:function(e){return KL.FromTape(e.ID,e.type,e.arguments)},1904799276:function(e){return QL.FromTape(e.ID,e.type,e.arguments)},663422040:function(e){return JL.FromTape(e.ID,e.type,e.arguments)},862014818:function(e){return $L.FromTape(e.ID,e.type,e.arguments)},2417008758:function(e){return eU.FromTape(e.ID,e.type,e.arguments)},3310460725:function(e){return tU.FromTape(e.ID,e.type,e.arguments)},3277789161:function(e){return nU.FromTape(e.ID,e.type,e.arguments)},264262732:function(e){return rU.FromTape(e.ID,e.type,e.arguments)},1534661035:function(e){return iU.FromTape(e.ID,e.type,e.arguments)},402227799:function(e){return aU.FromTape(e.ID,e.type,e.arguments)},1217240411:function(e){return sU.FromTape(e.ID,e.type,e.arguments)},1003880860:function(e){return oU.FromTape(e.ID,e.type,e.arguments)},712377611:function(e){return uU.FromTape(e.ID,e.type,e.arguments)},1758889154:function(e){return lU.FromTape(e.ID,e.type,e.arguments)},4123344466:function(e){return cU.FromTape(e.ID,e.type,e.arguments)},2397081782:function(e){return hU.FromTape(e.ID,e.type,e.arguments)},1623761950:function(e){return pU.FromTape(e.ID,e.type,e.arguments)},2590856083:function(e){return fU.FromTape(e.ID,e.type,e.arguments)},1883228015:function(e){return dU.FromTape(e.ID,e.type,e.arguments)},339256511:function(e){return vU.FromTape(e.ID,e.type,e.arguments)},2777663545:function(e){return mU.FromTape(e.ID,e.type,e.arguments)},1704287377:function(e){return yU.FromTape(e.ID,e.type,e.arguments)},2835456948:function(e){return gU.FromTape(e.ID,e.type,e.arguments)},1658829314:function(e){return _U.FromTape(e.ID,e.type,e.arguments)},2107101300:function(e){return TU.FromTape(e.ID,e.type,e.arguments)},2814081492:function(e){return EU.FromTape(e.ID,e.type,e.arguments)},132023988:function(e){return xU.FromTape(e.ID,e.type,e.arguments)},3747195512:function(e){return bU.FromTape(e.ID,e.type,e.arguments)},3174744832:function(e){return IU.FromTape(e.ID,e.type,e.arguments)},484807127:function(e){return wU.FromTape(e.ID,e.type,e.arguments)},3390157468:function(e){return kU.FromTape(e.ID,e.type,e.arguments)},4148101412:function(e){return SU.FromTape(e.ID,e.type,e.arguments)},211053100:function(e){return RU.FromTape(e.ID,e.type,e.arguments)},4024345920:function(e){return CU.FromTape(e.ID,e.type,e.arguments)},297599258:function(e){return DU.FromTape(e.ID,e.type,e.arguments)},4294318154:function(e){return AU.FromTape(e.ID,e.type,e.arguments)},3200245327:function(e){return OU.FromTape(e.ID,e.type,e.arguments)},1437805879:function(e){return NU.FromTape(e.ID,e.type,e.arguments)},1209101575:function(e){return MU.FromTape(e.ID,e.type,e.arguments)},2853485674:function(e){return PU.FromTape(e.ID,e.type,e.arguments)},2242383968:function(e){return FU.FromTape(e.ID,e.type,e.arguments)},1040185647:function(e){return LU.FromTape(e.ID,e.type,e.arguments)},3548104201:function(e){return UU.FromTape(e.ID,e.type,e.arguments)},477187591:function(e){return ZU.FromTape(e.ID,e.type,e.arguments)},2804161546:function(e){return BU.FromTape(e.ID,e.type,e.arguments)},2556980723:function(e){return zU.FromTape(e.ID,e.type,e.arguments)},2047409740:function(e){return GU.FromTape(e.ID,e.type,e.arguments)},1809719519:function(e){return HU.FromTape(e.ID,e.type,e.arguments)},803316827:function(e){return jU.FromTape(e.ID,e.type,e.arguments)},3008276851:function(e){return VU.FromTape(e.ID,e.type,e.arguments)},807026263:function(e){return WU.FromTape(e.ID,e.type,e.arguments)},3737207727:function(e){return YU.FromTape(e.ID,e.type,e.arguments)},24185140:function(e){return qU.FromTape(e.ID,e.type,e.arguments)},1310830890:function(e){return XU.FromTape(e.ID,e.type,e.arguments)},4219587988:function(e){return KU.FromTape(e.ID,e.type,e.arguments)},3415622556:function(e){return QU.FromTape(e.ID,e.type,e.arguments)},346874300:function(e){return JU.FromTape(e.ID,e.type,e.arguments)},647756555:function(e){return $U.FromTape(e.ID,e.type,e.arguments)},2489546625:function(e){return eZ.FromTape(e.ID,e.type,e.arguments)},2827207264:function(e){return tZ.FromTape(e.ID,e.type,e.arguments)},2143335405:function(e){return nZ.FromTape(e.ID,e.type,e.arguments)},1287392070:function(e){return rZ.FromTape(e.ID,e.type,e.arguments)},738692330:function(e){return iZ.FromTape(e.ID,e.type,e.arguments)},374418227:function(e){return aZ.FromTape(e.ID,e.type,e.arguments)},315944413:function(e){return sZ.FromTape(e.ID,e.type,e.arguments)},819412036:function(e){return oZ.FromTape(e.ID,e.type,e.arguments)},1810631287:function(e){return uZ.FromTape(e.ID,e.type,e.arguments)},1426591983:function(e){return lZ.FromTape(e.ID,e.type,e.arguments)},4222183408:function(e){return cZ.FromTape(e.ID,e.type,e.arguments)},2652556860:function(e){return hZ.FromTape(e.ID,e.type,e.arguments)},2058353004:function(e){return pZ.FromTape(e.ID,e.type,e.arguments)},3907093117:function(e){return fZ.FromTape(e.ID,e.type,e.arguments)},4278956645:function(e){return dZ.FromTape(e.ID,e.type,e.arguments)},3198132628:function(e){return vZ.FromTape(e.ID,e.type,e.arguments)},182646315:function(e){return mZ.FromTape(e.ID,e.type,e.arguments)},4037862832:function(e){return yZ.FromTape(e.ID,e.type,e.arguments)},2188021234:function(e){return gZ.FromTape(e.ID,e.type,e.arguments)},3815607619:function(e){return _Z.FromTape(e.ID,e.type,e.arguments)},3132237377:function(e){return TZ.FromTape(e.ID,e.type,e.arguments)},1482959167:function(e){return EZ.FromTape(e.ID,e.type,e.arguments)},987401354:function(e){return xZ.FromTape(e.ID,e.type,e.arguments)},1834744321:function(e){return bZ.FromTape(e.ID,e.type,e.arguments)},707683696:function(e){return IZ.FromTape(e.ID,e.type,e.arguments)},1339347760:function(e){return wZ.FromTape(e.ID,e.type,e.arguments)},2223149337:function(e){return kZ.FromTape(e.ID,e.type,e.arguments)},2297155007:function(e){return SZ.FromTape(e.ID,e.type,e.arguments)},3508470533:function(e){return RZ.FromTape(e.ID,e.type,e.arguments)},3009222698:function(e){return CZ.FromTape(e.ID,e.type,e.arguments)},900683007:function(e){return DZ.FromTape(e.ID,e.type,e.arguments)},1893162501:function(e){return AZ.FromTape(e.ID,e.type,e.arguments)},263784265:function(e){return OZ.FromTape(e.ID,e.type,e.arguments)},4238390223:function(e){return NZ.FromTape(e.ID,e.type,e.arguments)},1509553395:function(e){return MZ.FromTape(e.ID,e.type,e.arguments)},1268542332:function(e){return PZ.FromTape(e.ID,e.type,e.arguments)},3493046030:function(e){return FZ.FromTape(e.ID,e.type,e.arguments)},4095422895:function(e){return LZ.FromTape(e.ID,e.type,e.arguments)},987898635:function(e){return UZ.FromTape(e.ID,e.type,e.arguments)},3448662350:function(e){return ZZ.FromTape(e.ID,e.type,e.arguments)},2453401579:function(e){return BZ.FromTape(e.ID,e.type,e.arguments)},4142052618:function(e){return zZ.FromTape(e.ID,e.type,e.arguments)},3590301190:function(e){return GZ.FromTape(e.ID,e.type,e.arguments)},3009204131:function(e){return HZ.FromTape(e.ID,e.type,e.arguments)},852622518:function(e){return jZ.FromTape(e.ID,e.type,e.arguments)},178086475:function(e){return VZ.FromTape(e.ID,e.type,e.arguments)},2706460486:function(e){return WZ.FromTape(e.ID,e.type,e.arguments)},812098782:function(e){return YZ.FromTape(e.ID,e.type,e.arguments)},3319311131:function(e){return qZ.FromTape(e.ID,e.type,e.arguments)},1251058090:function(e){return XZ.FromTape(e.ID,e.type,e.arguments)},2068733104:function(e){return KZ.FromTape(e.ID,e.type,e.arguments)},1806887404:function(e){return QZ.FromTape(e.ID,e.type,e.arguments)},1484403080:function(e){return JZ.FromTape(e.ID,e.type,e.arguments)},3905492369:function(e){return $Z.FromTape(e.ID,e.type,e.arguments)},3570813810:function(e){return eB.FromTape(e.ID,e.type,e.arguments)},2571569899:function(e){return tB.FromTape(e.ID,e.type,e.arguments)},178912537:function(e){return nB.FromTape(e.ID,e.type,e.arguments)},2294589976:function(e){return rB.FromTape(e.ID,e.type,e.arguments)},1437953363:function(e){return iB.FromTape(e.ID,e.type,e.arguments)},2133299955:function(e){return aB.FromTape(e.ID,e.type,e.arguments)},4175244083:function(e){return sB.FromTape(e.ID,e.type,e.arguments)},3946677679:function(e){return oB.FromTape(e.ID,e.type,e.arguments)},3113134337:function(e){return uB.FromTape(e.ID,e.type,e.arguments)},2391368822:function(e){return lB.FromTape(e.ID,e.type,e.arguments)},3741457305:function(e){return cB.FromTape(e.ID,e.type,e.arguments)},3020489413:function(e){return hB.FromTape(e.ID,e.type,e.arguments)},2176052936:function(e){return pB.FromTape(e.ID,e.type,e.arguments)},4288270099:function(e){return fB.FromTape(e.ID,e.type,e.arguments)},572779678:function(e){return dB.FromTape(e.ID,e.type,e.arguments)},3827777499:function(e){return vB.FromTape(e.ID,e.type,e.arguments)},428585644:function(e){return mB.FromTape(e.ID,e.type,e.arguments)},1585845231:function(e){return yB.FromTape(e.ID,e.type,e.arguments)},76236018:function(e){return gB.FromTape(e.ID,e.type,e.arguments)},1051575348:function(e){return _B.FromTape(e.ID,e.type,e.arguments)},2655187982:function(e){return TB.FromTape(e.ID,e.type,e.arguments)},3452421091:function(e){return EB.FromTape(e.ID,e.type,e.arguments)},4162380809:function(e){return xB.FromTape(e.ID,e.type,e.arguments)},629592764:function(e){return bB.FromTape(e.ID,e.type,e.arguments)},1161773419:function(e){return IB.FromTape(e.ID,e.type,e.arguments)},1566485204:function(e){return wB.FromTape(e.ID,e.type,e.arguments)},1402838566:function(e){return kB.FromTape(e.ID,e.type,e.arguments)},125510826:function(e){return SB.FromTape(e.ID,e.type,e.arguments)},2604431987:function(e){return RB.FromTape(e.ID,e.type,e.arguments)},4266656042:function(e){return CB.FromTape(e.ID,e.type,e.arguments)},1520743889:function(e){return DB.FromTape(e.ID,e.type,e.arguments)},3422422726:function(e){return AB.FromTape(e.ID,e.type,e.arguments)},1281925730:function(e){return OB.FromTape(e.ID,e.type,e.arguments)},3092502836:function(e){return NB.FromTape(e.ID,e.type,e.arguments)},388784114:function(e){return MB.FromTape(e.ID,e.type,e.arguments)},1154579445:function(e){return PB.FromTape(e.ID,e.type,e.arguments)},2624227202:function(e){return FB.FromTape(e.ID,e.type,e.arguments)},1008929658:function(e){return LB.FromTape(e.ID,e.type,e.arguments)},1425443689:function(e){return UB.FromTape(e.ID,e.type,e.arguments)},3057273783:function(e){return ZB.FromTape(e.ID,e.type,e.arguments)},2347385850:function(e){return BB.FromTape(e.ID,e.type,e.arguments)},1838606355:function(e){return zB.FromTape(e.ID,e.type,e.arguments)},1847130766:function(e){return GB.FromTape(e.ID,e.type,e.arguments)},3708119e3:function(e){return HB.FromTape(e.ID,e.type,e.arguments)},2852063980:function(e){return jB.FromTape(e.ID,e.type,e.arguments)},760658860:function(e){return VB.FromTape(e.ID,e.type,e.arguments)},2022407955:function(e){return WB.FromTape(e.ID,e.type,e.arguments)},248100487:function(e){return YB.FromTape(e.ID,e.type,e.arguments)},3303938423:function(e){return qB.FromTape(e.ID,e.type,e.arguments)},1303795690:function(e){return XB.FromTape(e.ID,e.type,e.arguments)},1847252529:function(e){return KB.FromTape(e.ID,e.type,e.arguments)},2199411900:function(e){return QB.FromTape(e.ID,e.type,e.arguments)},2235152071:function(e){return JB.FromTape(e.ID,e.type,e.arguments)},164193824:function(e){return $B.FromTape(e.ID,e.type,e.arguments)},3079605661:function(e){return ez.FromTape(e.ID,e.type,e.arguments)},3404854881:function(e){return tz.FromTape(e.ID,e.type,e.arguments)},552965576:function(e){return nz.FromTape(e.ID,e.type,e.arguments)},3265635763:function(e){return rz.FromTape(e.ID,e.type,e.arguments)},853536259:function(e){return iz.FromTape(e.ID,e.type,e.arguments)},1507914824:function(e){return az.FromTape(e.ID,e.type,e.arguments)},2597039031:function(e){return sz.FromTape(e.ID,e.type,e.arguments)},377706215:function(e){return oz.FromTape(e.ID,e.type,e.arguments)},2108223431:function(e){return uz.FromTape(e.ID,e.type,e.arguments)},1437502449:function(e){return lz.FromTape(e.ID,e.type,e.arguments)},1114901282:function(e){return cz.FromTape(e.ID,e.type,e.arguments)},1073191201:function(e){return hz.FromTape(e.ID,e.type,e.arguments)},1911478936:function(e){return pz.FromTape(e.ID,e.type,e.arguments)},3181161470:function(e){return fz.FromTape(e.ID,e.type,e.arguments)},3368373690:function(e){return dz.FromTape(e.ID,e.type,e.arguments)},2998442950:function(e){return vz.FromTape(e.ID,e.type,e.arguments)},2706619895:function(e){return mz.FromTape(e.ID,e.type,e.arguments)},2474470126:function(e){return yz.FromTape(e.ID,e.type,e.arguments)},977012517:function(e){return gz.FromTape(e.ID,e.type,e.arguments)},1918398963:function(e){return _z.FromTape(e.ID,e.type,e.arguments)},3888040117:function(e){return Tz.FromTape(e.ID,e.type,e.arguments)},219451334:function(e){return Ez.FromTape(e.ID,e.type,e.arguments)},3701648758:function(e){return xz.FromTape(e.ID,e.type,e.arguments)},2251480897:function(e){return bz.FromTape(e.ID,e.type,e.arguments)},4143007308:function(e){return Iz.FromTape(e.ID,e.type,e.arguments)},590820931:function(e){return wz.FromTape(e.ID,e.type,e.arguments)},3388369263:function(e){return kz.FromTape(e.ID,e.type,e.arguments)},3505215534:function(e){return Sz.FromTape(e.ID,e.type,e.arguments)},2485787929:function(e){return Rz.FromTape(e.ID,e.type,e.arguments)},2665983363:function(e){return Cz.FromTape(e.ID,e.type,e.arguments)},3588315303:function(e){return Dz.FromTape(e.ID,e.type,e.arguments)},3079942009:function(e){return Az.FromTape(e.ID,e.type,e.arguments)},4251960020:function(e){return Oz.FromTape(e.ID,e.type,e.arguments)},1411181986:function(e){return Nz.FromTape(e.ID,e.type,e.arguments)},643959842:function(e){return Mz.FromTape(e.ID,e.type,e.arguments)},1029017970:function(e){return Pz.FromTape(e.ID,e.type,e.arguments)},144952367:function(e){return Fz.FromTape(e.ID,e.type,e.arguments)},3694346114:function(e){return Lz.FromTape(e.ID,e.type,e.arguments)},2837617999:function(e){return Uz.FromTape(e.ID,e.type,e.arguments)},1207048766:function(e){return Zz.FromTape(e.ID,e.type,e.arguments)},2529465313:function(e){return Bz.FromTape(e.ID,e.type,e.arguments)},2519244187:function(e){return zz.FromTape(e.ID,e.type,e.arguments)},1682466193:function(e){return Gz.FromTape(e.ID,e.type,e.arguments)},2382730787:function(e){return Hz.FromTape(e.ID,e.type,e.arguments)},3566463478:function(e){return jz.FromTape(e.ID,e.type,e.arguments)},3327091369:function(e){return Vz.FromTape(e.ID,e.type,e.arguments)},2077209135:function(e){return Wz.FromTape(e.ID,e.type,e.arguments)},101040310:function(e){return Yz.FromTape(e.ID,e.type,e.arguments)},3021840470:function(e){return qz.FromTape(e.ID,e.type,e.arguments)},2483315170:function(e){return Xz.FromTape(e.ID,e.type,e.arguments)},2226359599:function(e){return Kz.FromTape(e.ID,e.type,e.arguments)},1687234759:function(e){return Qz.FromTape(e.ID,e.type,e.arguments)},1158309216:function(e){return Jz.FromTape(e.ID,e.type,e.arguments)},310824031:function(e){return $z.FromTape(e.ID,e.type,e.arguments)},804291784:function(e){return eG.FromTape(e.ID,e.type,e.arguments)},3612865200:function(e){return tG.FromTape(e.ID,e.type,e.arguments)},4231323485:function(e){return nG.FromTape(e.ID,e.type,e.arguments)},597895409:function(e){return rG.FromTape(e.ID,e.type,e.arguments)},2004835150:function(e){return iG.FromTape(e.ID,e.type,e.arguments)},603570806:function(e){return aG.FromTape(e.ID,e.type,e.arguments)},1663979128:function(e){return sG.FromTape(e.ID,e.type,e.arguments)},220341763:function(e){return oG.FromTape(e.ID,e.type,e.arguments)},3171933400:function(e){return uG.FromTape(e.ID,e.type,e.arguments)},1156407060:function(e){return lG.FromTape(e.ID,e.type,e.arguments)},4017108033:function(e){return cG.FromTape(e.ID,e.type,e.arguments)},2067069095:function(e){return hG.FromTape(e.ID,e.type,e.arguments)},4022376103:function(e){return pG.FromTape(e.ID,e.type,e.arguments)},1423911732:function(e){return fG.FromTape(e.ID,e.type,e.arguments)},2924175390:function(e){return dG.FromTape(e.ID,e.type,e.arguments)},2775532180:function(e){return vG.FromTape(e.ID,e.type,e.arguments)},2839578677:function(e){return mG.FromTape(e.ID,e.type,e.arguments)},3724593414:function(e){return yG.FromTape(e.ID,e.type,e.arguments)},3740093272:function(e){return gG.FromTape(e.ID,e.type,e.arguments)},1946335990:function(e){return _G.FromTape(e.ID,e.type,e.arguments)},3355820592:function(e){return TG.FromTape(e.ID,e.type,e.arguments)},759155922:function(e){return EG.FromTape(e.ID,e.type,e.arguments)},2559016684:function(e){return xG.FromTape(e.ID,e.type,e.arguments)},3727388367:function(e){return bG.FromTape(e.ID,e.type,e.arguments)},3778827333:function(e){return IG.FromTape(e.ID,e.type,e.arguments)},3967405729:function(e){return wG.FromTape(e.ID,e.type,e.arguments)},1775413392:function(e){return kG.FromTape(e.ID,e.type,e.arguments)},677532197:function(e){return SG.FromTape(e.ID,e.type,e.arguments)},2022622350:function(e){return RG.FromTape(e.ID,e.type,e.arguments)},1304840413:function(e){return CG.FromTape(e.ID,e.type,e.arguments)},3119450353:function(e){return DG.FromTape(e.ID,e.type,e.arguments)},2417041796:function(e){return AG.FromTape(e.ID,e.type,e.arguments)},2744685151:function(e){return OG.FromTape(e.ID,e.type,e.arguments)},569719735:function(e){return NG.FromTape(e.ID,e.type,e.arguments)},2945172077:function(e){return MG.FromTape(e.ID,e.type,e.arguments)},4208778838:function(e){return PG.FromTape(e.ID,e.type,e.arguments)},673634403:function(e){return FG.FromTape(e.ID,e.type,e.arguments)},2095639259:function(e){return LG.FromTape(e.ID,e.type,e.arguments)},3958567839:function(e){return UG.FromTape(e.ID,e.type,e.arguments)},2802850158:function(e){return ZG.FromTape(e.ID,e.type,e.arguments)},103090709:function(e){return BG.FromTape(e.ID,e.type,e.arguments)},653396225:function(e){return zG.FromTape(e.ID,e.type,e.arguments)},2904328755:function(e){return GG.FromTape(e.ID,e.type,e.arguments)},3843373140:function(e){return HG.FromTape(e.ID,e.type,e.arguments)},3651124850:function(e){return jG.FromTape(e.ID,e.type,e.arguments)},2598011224:function(e){return VG.FromTape(e.ID,e.type,e.arguments)},986844984:function(e){return WG.FromTape(e.ID,e.type,e.arguments)},871118103:function(e){return YG.FromTape(e.ID,e.type,e.arguments)},1680319473:function(e){return qG.FromTape(e.ID,e.type,e.arguments)},148025276:function(e){return XG.FromTape(e.ID,e.type,e.arguments)},4166981789:function(e){return KG.FromTape(e.ID,e.type,e.arguments)},3710013099:function(e){return QG.FromTape(e.ID,e.type,e.arguments)},2752243245:function(e){return JG.FromTape(e.ID,e.type,e.arguments)},941946838:function(e){return $G.FromTape(e.ID,e.type,e.arguments)},1451395588:function(e){return eH.FromTape(e.ID,e.type,e.arguments)},3357820518:function(e){return tH.FromTape(e.ID,e.type,e.arguments)},492091185:function(e){return nH.FromTape(e.ID,e.type,e.arguments)},3650150729:function(e){return rH.FromTape(e.ID,e.type,e.arguments)},110355661:function(e){return iH.FromTape(e.ID,e.type,e.arguments)},3521284610:function(e){return aH.FromTape(e.ID,e.type,e.arguments)},1482703590:function(e){return sH.FromTape(e.ID,e.type,e.arguments)},738039164:function(e){return oH.FromTape(e.ID,e.type,e.arguments)},2295281155:function(e){return uH.FromTape(e.ID,e.type,e.arguments)},655969474:function(e){return lH.FromTape(e.ID,e.type,e.arguments)},1842657554:function(e){return cH.FromTape(e.ID,e.type,e.arguments)},3219374653:function(e){return hH.FromTape(e.ID,e.type,e.arguments)},90941305:function(e){return pH.FromTape(e.ID,e.type,e.arguments)},2250791053:function(e){return fH.FromTape(e.ID,e.type,e.arguments)},2044713172:function(e){return dH.FromTape(e.ID,e.type,e.arguments)},2093928680:function(e){return vH.FromTape(e.ID,e.type,e.arguments)},931644368:function(e){return mH.FromTape(e.ID,e.type,e.arguments)},2090586900:function(e){return yH.FromTape(e.ID,e.type,e.arguments)},3252649465:function(e){return gH.FromTape(e.ID,e.type,e.arguments)},2405470396:function(e){return _H.FromTape(e.ID,e.type,e.arguments)},825690147:function(e){return TH.FromTape(e.ID,e.type,e.arguments)},2262370178:function(e){return EH.FromTape(e.ID,e.type,e.arguments)},2893384427:function(e){return xH.FromTape(e.ID,e.type,e.arguments)},3024970846:function(e){return bH.FromTape(e.ID,e.type,e.arguments)},3283111854:function(e){return IH.FromTape(e.ID,e.type,e.arguments)},2324767716:function(e){return wH.FromTape(e.ID,e.type,e.arguments)},1469900589:function(e){return kH.FromTape(e.ID,e.type,e.arguments)},1232101972:function(e){return SH.FromTape(e.ID,e.type,e.arguments)},683857671:function(e){return RH.FromTape(e.ID,e.type,e.arguments)},2770003689:function(e){return CH.FromTape(e.ID,e.type,e.arguments)},3615266464:function(e){return DH.FromTape(e.ID,e.type,e.arguments)},2798486643:function(e){return AH.FromTape(e.ID,e.type,e.arguments)},3454111270:function(e){return OH.FromTape(e.ID,e.type,e.arguments)},3915482550:function(e){return NH.FromTape(e.ID,e.type,e.arguments)},2433181523:function(e){return MH.FromTape(e.ID,e.type,e.arguments)},4021432810:function(e){return PH.FromTape(e.ID,e.type,e.arguments)},3413951693:function(e){return FH.FromTape(e.ID,e.type,e.arguments)},1580146022:function(e){return LH.FromTape(e.ID,e.type,e.arguments)},3765753017:function(e){return UH.FromTape(e.ID,e.type,e.arguments)},979691226:function(e){return ZH.FromTape(e.ID,e.type,e.arguments)},2572171363:function(e){return BH.FromTape(e.ID,e.type,e.arguments)},3027567501:function(e){return zH.FromTape(e.ID,e.type,e.arguments)},964333572:function(e){return GH.FromTape(e.ID,e.type,e.arguments)},2320036040:function(e){return HH.FromTape(e.ID,e.type,e.arguments)},2310774935:function(e){return jH.FromTape(e.ID,e.type,e.arguments)},160246688:function(e){return VH.FromTape(e.ID,e.type,e.arguments)},3939117080:function(e){return WH.FromTape(e.ID,e.type,e.arguments)},1683148259:function(e){return YH.FromTape(e.ID,e.type,e.arguments)},2495723537:function(e){return qH.FromTape(e.ID,e.type,e.arguments)},1307041759:function(e){return XH.FromTape(e.ID,e.type,e.arguments)},1027710054:function(e){return KH.FromTape(e.ID,e.type,e.arguments)},4278684876:function(e){return QH.FromTape(e.ID,e.type,e.arguments)},2857406711:function(e){return JH.FromTape(e.ID,e.type,e.arguments)},205026976:function(e){return $H.FromTape(e.ID,e.type,e.arguments)},1865459582:function(e){return ej.FromTape(e.ID,e.type,e.arguments)},4095574036:function(e){return tj.FromTape(e.ID,e.type,e.arguments)},919958153:function(e){return nj.FromTape(e.ID,e.type,e.arguments)},2728634034:function(e){return rj.FromTape(e.ID,e.type,e.arguments)},982818633:function(e){return ij.FromTape(e.ID,e.type,e.arguments)},3840914261:function(e){return aj.FromTape(e.ID,e.type,e.arguments)},2655215786:function(e){return sj.FromTape(e.ID,e.type,e.arguments)},826625072:function(e){return oj.FromTape(e.ID,e.type,e.arguments)},1204542856:function(e){return uj.FromTape(e.ID,e.type,e.arguments)},3945020480:function(e){return lj.FromTape(e.ID,e.type,e.arguments)},4201705270:function(e){return cj.FromTape(e.ID,e.type,e.arguments)},3190031847:function(e){return hj.FromTape(e.ID,e.type,e.arguments)},2127690289:function(e){return pj.FromTape(e.ID,e.type,e.arguments)},1638771189:function(e){return fj.FromTape(e.ID,e.type,e.arguments)},504942748:function(e){return dj.FromTape(e.ID,e.type,e.arguments)},3678494232:function(e){return vj.FromTape(e.ID,e.type,e.arguments)},3242617779:function(e){return mj.FromTape(e.ID,e.type,e.arguments)},886880790:function(e){return yj.FromTape(e.ID,e.type,e.arguments)},2802773753:function(e){return gj.FromTape(e.ID,e.type,e.arguments)},2565941209:function(e){return _j.FromTape(e.ID,e.type,e.arguments)},2551354335:function(e){return Tj.FromTape(e.ID,e.type,e.arguments)},693640335:function(e){return Ej.FromTape(e.ID,e.type,e.arguments)},1462361463:function(e){return xj.FromTape(e.ID,e.type,e.arguments)},4186316022:function(e){return bj.FromTape(e.ID,e.type,e.arguments)},307848117:function(e){return Ij.FromTape(e.ID,e.type,e.arguments)},781010003:function(e){return wj.FromTape(e.ID,e.type,e.arguments)},3940055652:function(e){return kj.FromTape(e.ID,e.type,e.arguments)},279856033:function(e){return Sj.FromTape(e.ID,e.type,e.arguments)},427948657:function(e){return Rj.FromTape(e.ID,e.type,e.arguments)},3268803585:function(e){return Cj.FromTape(e.ID,e.type,e.arguments)},1441486842:function(e){return Dj.FromTape(e.ID,e.type,e.arguments)},750771296:function(e){return Aj.FromTape(e.ID,e.type,e.arguments)},1245217292:function(e){return Oj.FromTape(e.ID,e.type,e.arguments)},4122056220:function(e){return Nj.FromTape(e.ID,e.type,e.arguments)},366585022:function(e){return Mj.FromTape(e.ID,e.type,e.arguments)},3451746338:function(e){return Pj.FromTape(e.ID,e.type,e.arguments)},3523091289:function(e){return Fj.FromTape(e.ID,e.type,e.arguments)},1521410863:function(e){return Lj.FromTape(e.ID,e.type,e.arguments)},1401173127:function(e){return Uj.FromTape(e.ID,e.type,e.arguments)},478536968:function(e){return Zj.FromTape(e.ID,e.type,e.arguments)},816062949:function(e){return Bj.FromTape(e.ID,e.type,e.arguments)},1076942058:function(e){return zj.FromTape(e.ID,e.type,e.arguments)},3377609919:function(e){return Gj.FromTape(e.ID,e.type,e.arguments)},3008791417:function(e){return Hj.FromTape(e.ID,e.type,e.arguments)},1660063152:function(e){return jj.FromTape(e.ID,e.type,e.arguments)},2914609552:function(e){return Vj.FromTape(e.ID,e.type,e.arguments)},2943643501:function(e){return Wj.FromTape(e.ID,e.type,e.arguments)},1608871552:function(e){return Yj.FromTape(e.ID,e.type,e.arguments)},2439245199:function(e){return qj.FromTape(e.ID,e.type,e.arguments)},1042787934:function(e){return Xj.FromTape(e.ID,e.type,e.arguments)},1856042241:function(e){return Kj.FromTape(e.ID,e.type,e.arguments)},3243963512:function(e){return Qj.FromTape(e.ID,e.type,e.arguments)},4158566097:function(e){return Jj.FromTape(e.ID,e.type,e.arguments)},3626867408:function(e){return $j.FromTape(e.ID,e.type,e.arguments)},2016517767:function(e){return eV.FromTape(e.ID,e.type,e.arguments)},2781568857:function(e){return tV.FromTape(e.ID,e.type,e.arguments)},2341007311:function(e){return nV.FromTape(e.ID,e.type,e.arguments)},2778083089:function(e){return rV.FromTape(e.ID,e.type,e.arguments)},448429030:function(e){return iV.FromTape(e.ID,e.type,e.arguments)},3053780830:function(e){return aV.FromTape(e.ID,e.type,e.arguments)},1768891740:function(e){return sV.FromTape(e.ID,e.type,e.arguments)},1054537805:function(e){return oV.FromTape(e.ID,e.type,e.arguments)},2157484638:function(e){return uV.FromTape(e.ID,e.type,e.arguments)},2042790032:function(e){return lV.FromTape(e.ID,e.type,e.arguments)},4165799628:function(e){return cV.FromTape(e.ID,e.type,e.arguments)},1862484736:function(e){return hV.FromTape(e.ID,e.type,e.arguments)},1290935644:function(e){return pV.FromTape(e.ID,e.type,e.arguments)},1509187699:function(e){return fV.FromTape(e.ID,e.type,e.arguments)},4086658281:function(e){return dV.FromTape(e.ID,e.type,e.arguments)},1783015770:function(e){return vV.FromTape(e.ID,e.type,e.arguments)},1329646415:function(e){return mV.FromTape(e.ID,e.type,e.arguments)},4074543187:function(e){return yV.FromTape(e.ID,e.type,e.arguments)},867548509:function(e){return gV.FromTape(e.ID,e.type,e.arguments)},3982875396:function(e){return _V.FromTape(e.ID,e.type,e.arguments)},4240577450:function(e){return TV.FromTape(e.ID,e.type,e.arguments)},4124623270:function(e){return EV.FromTape(e.ID,e.type,e.arguments)},3692461612:function(e){return xV.FromTape(e.ID,e.type,e.arguments)},3663146110:function(e){return bV.FromTape(e.ID,e.type,e.arguments)},4097777520:function(e){return IV.FromTape(e.ID,e.type,e.arguments)},1529196076:function(e){return wV.FromTape(e.ID,e.type,e.arguments)},3127900445:function(e){return kV.FromTape(e.ID,e.type,e.arguments)},3027962421:function(e){return SV.FromTape(e.ID,e.type,e.arguments)},2533589738:function(e){return RV.FromTape(e.ID,e.type,e.arguments)},2609359061:function(e){return CV.FromTape(e.ID,e.type,e.arguments)},3420628829:function(e){return DV.FromTape(e.ID,e.type,e.arguments)},1072016465:function(e){return AV.FromTape(e.ID,e.type,e.arguments)},723233188:function(e){return OV.FromTape(e.ID,e.type,e.arguments)},3856911033:function(e){return NV.FromTape(e.ID,e.type,e.arguments)},1999602285:function(e){return MV.FromTape(e.ID,e.type,e.arguments)},1305183839:function(e){return PV.FromTape(e.ID,e.type,e.arguments)},3812236995:function(e){return FV.FromTape(e.ID,e.type,e.arguments)},1412071761:function(e){return LV.FromTape(e.ID,e.type,e.arguments)},710998568:function(e){return UV.FromTape(e.ID,e.type,e.arguments)},2706606064:function(e){return ZV.FromTape(e.ID,e.type,e.arguments)},3893378262:function(e){return BV.FromTape(e.ID,e.type,e.arguments)},463610769:function(e){return zV.FromTape(e.ID,e.type,e.arguments)},2481509218:function(e){return GV.FromTape(e.ID,e.type,e.arguments)},451544542:function(e){return HV.FromTape(e.ID,e.type,e.arguments)},4015995234:function(e){return jV.FromTape(e.ID,e.type,e.arguments)},1404847402:function(e){return VV.FromTape(e.ID,e.type,e.arguments)},3112655638:function(e){return WV.FromTape(e.ID,e.type,e.arguments)},331165859:function(e){return YV.FromTape(e.ID,e.type,e.arguments)},4252922144:function(e){return qV.FromTape(e.ID,e.type,e.arguments)},1039846685:function(e){return XV.FromTape(e.ID,e.type,e.arguments)},338393293:function(e){return KV.FromTape(e.ID,e.type,e.arguments)},682877961:function(e){return QV.FromTape(e.ID,e.type,e.arguments)},3544373492:function(e){return JV.FromTape(e.ID,e.type,e.arguments)},2515109513:function(e){return $V.FromTape(e.ID,e.type,e.arguments)},1179482911:function(e){return eW.FromTape(e.ID,e.type,e.arguments)},2273995522:function(e){return tW.FromTape(e.ID,e.type,e.arguments)},1004757350:function(e){return nW.FromTape(e.ID,e.type,e.arguments)},4243806635:function(e){return rW.FromTape(e.ID,e.type,e.arguments)},214636428:function(e){return iW.FromTape(e.ID,e.type,e.arguments)},2445595289:function(e){return aW.FromTape(e.ID,e.type,e.arguments)},2757150158:function(e){return sW.FromTape(e.ID,e.type,e.arguments)},3136571912:function(e){return oW.FromTape(e.ID,e.type,e.arguments)},1807405624:function(e){return uW.FromTape(e.ID,e.type,e.arguments)},2162789131:function(e){return lW.FromTape(e.ID,e.type,e.arguments)},385403989:function(e){return cW.FromTape(e.ID,e.type,e.arguments)},3478079324:function(e){return hW.FromTape(e.ID,e.type,e.arguments)},1252848954:function(e){return pW.FromTape(e.ID,e.type,e.arguments)},1595516126:function(e){return fW.FromTape(e.ID,e.type,e.arguments)},609421318:function(e){return dW.FromTape(e.ID,e.type,e.arguments)},2668620305:function(e){return vW.FromTape(e.ID,e.type,e.arguments)},2473145415:function(e){return mW.FromTape(e.ID,e.type,e.arguments)},1973038258:function(e){return yW.FromTape(e.ID,e.type,e.arguments)},1597423693:function(e){return gW.FromTape(e.ID,e.type,e.arguments)},1190533807:function(e){return _W.FromTape(e.ID,e.type,e.arguments)},2525727697:function(e){return TW.FromTape(e.ID,e.type,e.arguments)},3408363356:function(e){return EW.FromTape(e.ID,e.type,e.arguments)},530289379:function(e){return xW.FromTape(e.ID,e.type,e.arguments)},1621171031:function(e){return bW.FromTape(e.ID,e.type,e.arguments)},2082059205:function(e){return IW.FromTape(e.ID,e.type,e.arguments)},734778138:function(e){return wW.FromTape(e.ID,e.type,e.arguments)},1235345126:function(e){return kW.FromTape(e.ID,e.type,e.arguments)},3689010777:function(e){return SW.FromTape(e.ID,e.type,e.arguments)},2986769608:function(e){return RW.FromTape(e.ID,e.type,e.arguments)},3657597509:function(e){return CW.FromTape(e.ID,e.type,e.arguments)},1975003073:function(e){return DW.FromTape(e.ID,e.type,e.arguments)},3979015343:function(e){return AW.FromTape(e.ID,e.type,e.arguments)},2218152070:function(e){return OW.FromTape(e.ID,e.type,e.arguments)},603775116:function(e){return NW.FromTape(e.ID,e.type,e.arguments)},2830218821:function(e){return MW.FromTape(e.ID,e.type,e.arguments)},3958052878:function(e){return PW.FromTape(e.ID,e.type,e.arguments)},3049322572:function(e){return FW.FromTape(e.ID,e.type,e.arguments)},148013059:function(e){return LW.FromTape(e.ID,e.type,e.arguments)},4095615324:function(e){return UW.FromTape(e.ID,e.type,e.arguments)},2233826070:function(e){return ZW.FromTape(e.ID,e.type,e.arguments)},2513912981:function(e){return BW.FromTape(e.ID,e.type,e.arguments)},699246055:function(e){return zW.FromTape(e.ID,e.type,e.arguments)},2028607225:function(e){return GW.FromTape(e.ID,e.type,e.arguments)},3101698114:function(e){return HW.FromTape(e.ID,e.type,e.arguments)},2809605785:function(e){return jW.FromTape(e.ID,e.type,e.arguments)},4124788165:function(e){return VW.FromTape(e.ID,e.type,e.arguments)},2934153892:function(e){return WW.FromTape(e.ID,e.type,e.arguments)},1300840506:function(e){return YW.FromTape(e.ID,e.type,e.arguments)},3303107099:function(e){return qW.FromTape(e.ID,e.type,e.arguments)},1607154358:function(e){return XW.FromTape(e.ID,e.type,e.arguments)},1878645084:function(e){return KW.FromTape(e.ID,e.type,e.arguments)},846575682:function(e){return QW.FromTape(e.ID,e.type,e.arguments)},1351298697:function(e){return JW.FromTape(e.ID,e.type,e.arguments)},626085974:function(e){return $W.FromTape(e.ID,e.type,e.arguments)},2247615214:function(e){return eY.FromTape(e.ID,e.type,e.arguments)},1260650574:function(e){return tY.FromTape(e.ID,e.type,e.arguments)},1096409881:function(e){return nY.FromTape(e.ID,e.type,e.arguments)},230924584:function(e){return rY.FromTape(e.ID,e.type,e.arguments)},1162798199:function(e){return iY.FromTape(e.ID,e.type,e.arguments)},2315554128:function(e){return aY.FromTape(e.ID,e.type,e.arguments)},2254336722:function(e){return sY.FromTape(e.ID,e.type,e.arguments)},413509423:function(e){return oY.FromTape(e.ID,e.type,e.arguments)},1580310250:function(e){return uY.FromTape(e.ID,e.type,e.arguments)},3071757647:function(e){return lY.FromTape(e.ID,e.type,e.arguments)},985171141:function(e){return cY.FromTape(e.ID,e.type,e.arguments)},2043862942:function(e){return hY.FromTape(e.ID,e.type,e.arguments)},531007025:function(e){return pY.FromTape(e.ID,e.type,e.arguments)},812556717:function(e){return fY.FromTape(e.ID,e.type,e.arguments)},5716631:function(e){return dY.FromTape(e.ID,e.type,e.arguments)},3473067441:function(e){return vY.FromTape(e.ID,e.type,e.arguments)},1549132990:function(e){return mY.FromTape(e.ID,e.type,e.arguments)},2771591690:function(e){return yY.FromTape(e.ID,e.type,e.arguments)},3206491090:function(e){return gY.FromTape(e.ID,e.type,e.arguments)},912023232:function(e){return _Y.FromTape(e.ID,e.type,e.arguments)},3824725483:function(e){return TY.FromTape(e.ID,e.type,e.arguments)},2347447852:function(e){return EY.FromTape(e.ID,e.type,e.arguments)},3081323446:function(e){return xY.FromTape(e.ID,e.type,e.arguments)},3663046924:function(e){return bY.FromTape(e.ID,e.type,e.arguments)},2281632017:function(e){return IY.FromTape(e.ID,e.type,e.arguments)},2415094496:function(e){return wY.FromTape(e.ID,e.type,e.arguments)},2387106220:function(e){return kY.FromTape(e.ID,e.type,e.arguments)},901063453:function(e){return SY.FromTape(e.ID,e.type,e.arguments)},4282788508:function(e){return RY.FromTape(e.ID,e.type,e.arguments)},3124975700:function(e){return CY.FromTape(e.ID,e.type,e.arguments)},1447204868:function(e){return DY.FromTape(e.ID,e.type,e.arguments)},1983826977:function(e){return AY.FromTape(e.ID,e.type,e.arguments)},2636378356:function(e){return OY.FromTape(e.ID,e.type,e.arguments)},1640371178:function(e){return NY.FromTape(e.ID,e.type,e.arguments)},280115917:function(e){return MY.FromTape(e.ID,e.type,e.arguments)},1742049831:function(e){return PY.FromTape(e.ID,e.type,e.arguments)},2552916305:function(e){return FY.FromTape(e.ID,e.type,e.arguments)},1210645708:function(e){return LY.FromTape(e.ID,e.type,e.arguments)},3611470254:function(e){return UY.FromTape(e.ID,e.type,e.arguments)},1199560280:function(e){return ZY.FromTape(e.ID,e.type,e.arguments)},3101149627:function(e){return BY.FromTape(e.ID,e.type,e.arguments)},581633288:function(e){return zY.FromTape(e.ID,e.type,e.arguments)},1377556343:function(e){return GY.FromTape(e.ID,e.type,e.arguments)},1735638870:function(e){return HY.FromTape(e.ID,e.type,e.arguments)},1935646853:function(e){return jY.FromTape(e.ID,e.type,e.arguments)},3825984169:function(e){return VY.FromTape(e.ID,e.type,e.arguments)},1692211062:function(e){return WY.FromTape(e.ID,e.type,e.arguments)},2595432518:function(e){return YY.FromTape(e.ID,e.type,e.arguments)},1620046519:function(e){return qY.FromTape(e.ID,e.type,e.arguments)},2097647324:function(e){return XY.FromTape(e.ID,e.type,e.arguments)},2715220739:function(e){return KY.FromTape(e.ID,e.type,e.arguments)},2916149573:function(e){return QY.FromTape(e.ID,e.type,e.arguments)},1229763772:function(e){return JY.FromTape(e.ID,e.type,e.arguments)},3593883385:function(e){return $Y.FromTape(e.ID,e.type,e.arguments)},3026737570:function(e){return eq.FromTape(e.ID,e.type,e.arguments)},1600972822:function(e){return tq.FromTape(e.ID,e.type,e.arguments)},1628702193:function(e){return nq.FromTape(e.ID,e.type,e.arguments)},3736923433:function(e){return rq.FromTape(e.ID,e.type,e.arguments)},2347495698:function(e){return iq.FromTape(e.ID,e.type,e.arguments)},3698973494:function(e){return aq.FromTape(e.ID,e.type,e.arguments)},427810014:function(e){return sq.FromTape(e.ID,e.type,e.arguments)},180925521:function(e){return oq.FromTape(e.ID,e.type,e.arguments)},630975310:function(e){return uq.FromTape(e.ID,e.type,e.arguments)},3179687236:function(e){return lq.FromTape(e.ID,e.type,e.arguments)},4292641817:function(e){return cq.FromTape(e.ID,e.type,e.arguments)},1911125066:function(e){return hq.FromTape(e.ID,e.type,e.arguments)},4207607924:function(e){return pq.FromTape(e.ID,e.type,e.arguments)},728799441:function(e){return fq.FromTape(e.ID,e.type,e.arguments)},1417489154:function(e){return dq.FromTape(e.ID,e.type,e.arguments)},2799835756:function(e){return vq.FromTape(e.ID,e.type,e.arguments)},2759199220:function(e){return mq.FromTape(e.ID,e.type,e.arguments)},1907098498:function(e){return yq.FromTape(e.ID,e.type,e.arguments)},1530820697:function(e){return gq.FromTape(e.ID,e.type,e.arguments)},3956297820:function(e){return _q.FromTape(e.ID,e.type,e.arguments)},2391383451:function(e){return Tq.FromTape(e.ID,e.type,e.arguments)},3313531582:function(e){return Eq.FromTape(e.ID,e.type,e.arguments)},2769231204:function(e){return xq.FromTape(e.ID,e.type,e.arguments)},891718957:function(e){return bq.FromTape(e.ID,e.type,e.arguments)},926996030:function(e){return Iq.FromTape(e.ID,e.type,e.arguments)},2391406946:function(e){return wq.FromTape(e.ID,e.type,e.arguments)},4156078855:function(e){return kq.FromTape(e.ID,e.type,e.arguments)},3512223829:function(e){return Sq.FromTape(e.ID,e.type,e.arguments)},1898987631:function(e){return Rq.FromTape(e.ID,e.type,e.arguments)},4237592921:function(e){return Cq.FromTape(e.ID,e.type,e.arguments)},1133259667:function(e){return Dq.FromTape(e.ID,e.type,e.arguments)},3304561284:function(e){return Aq.FromTape(e.ID,e.type,e.arguments)},336235671:function(e){return Oq.FromTape(e.ID,e.type,e.arguments)},512836454:function(e){return Nq.FromTape(e.ID,e.type,e.arguments)},486154966:function(e){return Mq.FromTape(e.ID,e.type,e.arguments)},1299126871:function(e){return Pq.FromTape(e.ID,e.type,e.arguments)},4009809668:function(e){return Fq.FromTape(e.ID,e.type,e.arguments)},4088093105:function(e){return Lq.FromTape(e.ID,e.type,e.arguments)},1028945134:function(e){return Uq.FromTape(e.ID,e.type,e.arguments)},4218914973:function(e){return Zq.FromTape(e.ID,e.type,e.arguments)},3342526732:function(e){return Bq.FromTape(e.ID,e.type,e.arguments)},1236880293:function(e){return zq.FromTape(e.ID,e.type,e.arguments)},2543172580:function(e){return Gq.FromTape(e.ID,e.type,e.arguments)},1033361043:function(e){return Hq.FromTape(e.ID,e.type,e.arguments)}};var FC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));FC.EMAIL="EMAIL",FC.FAX="FAX",FC.PHONE="PHONE",FC.POST="POST",FC.VERBAL="VERBAL",FC.USERDEFINED="USERDEFINED",FC.NOTDEFINED="NOTDEFINED";var LC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));LC.DEAD_LOAD_G="DEAD_LOAD_G",LC.COMPLETION_G1="COMPLETION_G1",LC.LIVE_LOAD_Q="LIVE_LOAD_Q",LC.SNOW_S="SNOW_S",LC.WIND_W="WIND_W",LC.PRESTRESSING_P="PRESTRESSING_P",LC.SETTLEMENT_U="SETTLEMENT_U",LC.TEMPERATURE_T="TEMPERATURE_T",LC.EARTHQUAKE_E="EARTHQUAKE_E",LC.FIRE="FIRE",LC.IMPULSE="IMPULSE",LC.IMPACT="IMPACT",LC.TRANSPORT="TRANSPORT",LC.ERECTION="ERECTION",LC.PROPPING="PROPPING",LC.SYSTEM_IMPERFECTION="SYSTEM_IMPERFECTION",LC.SHRINKAGE="SHRINKAGE",LC.CREEP="CREEP",LC.LACK_OF_FIT="LACK_OF_FIT",LC.BUOYANCY="BUOYANCY",LC.ICE="ICE",LC.CURRENT="CURRENT",LC.WAVE="WAVE",LC.RAIN="RAIN",LC.BRAKES="BRAKES",LC.USERDEFINED="USERDEFINED",LC.NOTDEFINED="NOTDEFINED";var UC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));UC.PERMANENT_G="PERMANENT_G",UC.VARIABLE_Q="VARIABLE_Q",UC.EXTRAORDINARY_A="EXTRAORDINARY_A",UC.USERDEFINED="USERDEFINED",UC.NOTDEFINED="NOTDEFINED";var ZC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));ZC.ELECTRICACTUATOR="ELECTRICACTUATOR",ZC.HANDOPERATEDACTUATOR="HANDOPERATEDACTUATOR",ZC.HYDRAULICACTUATOR="HYDRAULICACTUATOR",ZC.PNEUMATICACTUATOR="PNEUMATICACTUATOR",ZC.THERMOSTATICACTUATOR="THERMOSTATICACTUATOR",ZC.USERDEFINED="USERDEFINED",ZC.NOTDEFINED="NOTDEFINED";var BC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));BC.OFFICE="OFFICE",BC.SITE="SITE",BC.HOME="HOME",BC.DISTRIBUTIONPOINT="DISTRIBUTIONPOINT",BC.USERDEFINED="USERDEFINED";var zC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));zC.CONSTANTFLOW="CONSTANTFLOW",zC.VARIABLEFLOWPRESSUREDEPENDANT="VARIABLEFLOWPRESSUREDEPENDANT",zC.VARIABLEFLOWPRESSUREINDEPENDANT="VARIABLEFLOWPRESSUREINDEPENDANT",zC.USERDEFINED="USERDEFINED",zC.NOTDEFINED="NOTDEFINED";var GC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));GC.DIFFUSER="DIFFUSER",GC.GRILLE="GRILLE",GC.LOUVRE="LOUVRE",GC.REGISTER="REGISTER",GC.USERDEFINED="USERDEFINED",GC.NOTDEFINED="NOTDEFINED";var HC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));HC.FIXEDPLATECOUNTERFLOWEXCHANGER="FIXEDPLATECOUNTERFLOWEXCHANGER",HC.FIXEDPLATECROSSFLOWEXCHANGER="FIXEDPLATECROSSFLOWEXCHANGER",HC.FIXEDPLATEPARALLELFLOWEXCHANGER="FIXEDPLATEPARALLELFLOWEXCHANGER",HC.ROTARYWHEEL="ROTARYWHEEL",HC.RUNAROUNDCOILLOOP="RUNAROUNDCOILLOOP",HC.HEATPIPE="HEATPIPE",HC.TWINTOWERENTHALPYRECOVERYLOOPS="TWINTOWERENTHALPYRECOVERYLOOPS",HC.THERMOSIPHONSEALEDTUBEHEATEXCHANGERS="THERMOSIPHONSEALEDTUBEHEATEXCHANGERS",HC.THERMOSIPHONCOILTYPEHEATEXCHANGERS="THERMOSIPHONCOILTYPEHEATEXCHANGERS",HC.USERDEFINED="USERDEFINED",HC.NOTDEFINED="NOTDEFINED";var jC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));jC.BELL="BELL",jC.BREAKGLASSBUTTON="BREAKGLASSBUTTON",jC.LIGHT="LIGHT",jC.MANUALPULLBOX="MANUALPULLBOX",jC.SIREN="SIREN",jC.WHISTLE="WHISTLE",jC.USERDEFINED="USERDEFINED",jC.NOTDEFINED="NOTDEFINED";var VC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));VC.USERDEFINED="USERDEFINED",VC.NOTDEFINED="NOTDEFINED";var WC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));WC.IN_PLANE_LOADING_2D="IN_PLANE_LOADING_2D",WC.OUT_PLANE_LOADING_2D="OUT_PLANE_LOADING_2D",WC.LOADING_3D="LOADING_3D",WC.USERDEFINED="USERDEFINED",WC.NOTDEFINED="NOTDEFINED";var YC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));YC.FIRST_ORDER_THEORY="FIRST_ORDER_THEORY",YC.SECOND_ORDER_THEORY="SECOND_ORDER_THEORY",YC.THIRD_ORDER_THEORY="THIRD_ORDER_THEORY",YC.FULL_NONLINEAR_THEORY="FULL_NONLINEAR_THEORY",YC.USERDEFINED="USERDEFINED",YC.NOTDEFINED="NOTDEFINED";var qC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));qC.ADD="ADD",qC.DIVIDE="DIVIDE",qC.MULTIPLY="MULTIPLY",qC.SUBTRACT="SUBTRACT";var XC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));XC.SITE="SITE",XC.FACTORY="FACTORY",XC.NOTDEFINED="NOTDEFINED";var KC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));KC.AMPLIFIER="AMPLIFIER",KC.CAMERA="CAMERA",KC.DISPLAY="DISPLAY",KC.MICROPHONE="MICROPHONE",KC.PLAYER="PLAYER",KC.PROJECTOR="PROJECTOR",KC.RECEIVER="RECEIVER",KC.SPEAKER="SPEAKER",KC.SWITCHER="SWITCHER",KC.TELEPHONE="TELEPHONE",KC.TUNER="TUNER",KC.USERDEFINED="USERDEFINED",KC.NOTDEFINED="NOTDEFINED";var QC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));QC.POLYLINE_FORM="POLYLINE_FORM",QC.CIRCULAR_ARC="CIRCULAR_ARC",QC.ELLIPTIC_ARC="ELLIPTIC_ARC",QC.PARABOLIC_ARC="PARABOLIC_ARC",QC.HYPERBOLIC_ARC="HYPERBOLIC_ARC",QC.UNSPECIFIED="UNSPECIFIED";var JC=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));JC.PLANE_SURF="PLANE_SURF",JC.CYLINDRICAL_SURF="CYLINDRICAL_SURF",JC.CONICAL_SURF="CONICAL_SURF",JC.SPHERICAL_SURF="SPHERICAL_SURF",JC.TOROIDAL_SURF="TOROIDAL_SURF",JC.SURF_OF_REVOLUTION="SURF_OF_REVOLUTION",JC.RULED_SURF="RULED_SURF",JC.GENERALISED_CONE="GENERALISED_CONE",JC.QUADRIC_SURF="QUADRIC_SURF",JC.SURF_OF_LINEAR_EXTRUSION="SURF_OF_LINEAR_EXTRUSION",JC.UNSPECIFIED="UNSPECIFIED";var $C=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));$C.BEAM="BEAM",$C.JOIST="JOIST",$C.HOLLOWCORE="HOLLOWCORE",$C.LINTEL="LINTEL",$C.SPANDREL="SPANDREL",$C.T_BEAM="T_BEAM",$C.GIRDER_SEGMENT="GIRDER_SEGMENT",$C.DIAPHRAGM="DIAPHRAGM",$C.PIERCAP="PIERCAP",$C.HATSTONE="HATSTONE",$C.CORNICE="CORNICE",$C.EDGEBEAM="EDGEBEAM",$C.USERDEFINED="USERDEFINED",$C.NOTDEFINED="NOTDEFINED";var eD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));eD.FIXED_MOVEMENT="FIXED_MOVEMENT",eD.GUIDED_LONGITUDINAL="GUIDED_LONGITUDINAL",eD.GUIDED_TRANSVERSAL="GUIDED_TRANSVERSAL",eD.FREE_MOVEMENT="FREE_MOVEMENT",eD.NOTDEFINED="NOTDEFINED";var tD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));tD.CYLINDRICAL="CYLINDRICAL",tD.SPHERICAL="SPHERICAL",tD.ELASTOMERIC="ELASTOMERIC",tD.POT="POT",tD.GUIDE="GUIDE",tD.ROCKER="ROCKER",tD.ROLLER="ROLLER",tD.DISK="DISK",tD.USERDEFINED="USERDEFINED",tD.NOTDEFINED="NOTDEFINED";var nD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));nD.GREATERTHAN="GREATERTHAN",nD.GREATERTHANOREQUALTO="GREATERTHANOREQUALTO",nD.LESSTHAN="LESSTHAN",nD.LESSTHANOREQUALTO="LESSTHANOREQUALTO",nD.EQUALTO="EQUALTO",nD.NOTEQUALTO="NOTEQUALTO",nD.INCLUDES="INCLUDES",nD.NOTINCLUDES="NOTINCLUDES",nD.INCLUDEDIN="INCLUDEDIN",nD.NOTINCLUDEDIN="NOTINCLUDEDIN";var rD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));rD.WATER="WATER",rD.STEAM="STEAM",rD.USERDEFINED="USERDEFINED",rD.NOTDEFINED="NOTDEFINED";var iD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));iD.UNION="UNION",iD.INTERSECTION="INTERSECTION",iD.DIFFERENCE="DIFFERENCE";var aD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));aD.ABUTMENT="ABUTMENT",aD.DECK="DECK",aD.DECK_SEGMENT="DECK_SEGMENT",aD.FOUNDATION="FOUNDATION",aD.PIER="PIER",aD.PIER_SEGMENT="PIER_SEGMENT",aD.PYLON="PYLON",aD.SUBSTRUCTURE="SUBSTRUCTURE",aD.SUPERSTRUCTURE="SUPERSTRUCTURE",aD.SURFACESTRUCTURE="SURFACESTRUCTURE",aD.USERDEFINED="USERDEFINED",aD.NOTDEFINED="NOTDEFINED";var sD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));sD.ARCHED="ARCHED",sD.CABLE_STAYED="CABLE_STAYED",sD.CANTILEVER="CANTILEVER",sD.CULVERT="CULVERT",sD.FRAMEWORK="FRAMEWORK",sD.GIRDER="GIRDER",sD.SUSPENSION="SUSPENSION",sD.TRUSS="TRUSS",sD.USERDEFINED="USERDEFINED",sD.NOTDEFINED="NOTDEFINED";var oD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));oD.INSULATION="INSULATION",oD.PRECASTPANEL="PRECASTPANEL",oD.APRON="APRON",oD.USERDEFINED="USERDEFINED",oD.NOTDEFINED="NOTDEFINED";var uD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));uD.COMPLEX="COMPLEX",uD.ELEMENT="ELEMENT",uD.PARTIAL="PARTIAL",uD.PROVISIONFORVOID="PROVISIONFORVOID",uD.PROVISIONFORSPACE="PROVISIONFORSPACE",uD.USERDEFINED="USERDEFINED",uD.NOTDEFINED="NOTDEFINED";var lD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));lD.FENESTRATION="FENESTRATION",lD.FOUNDATION="FOUNDATION",lD.LOADBEARING="LOADBEARING",lD.OUTERSHELL="OUTERSHELL",lD.SHADING="SHADING",lD.TRANSPORT="TRANSPORT",lD.REINFORCING="REINFORCING",lD.PRESTRESSING="PRESTRESSING",lD.USERDEFINED="USERDEFINED",lD.NOTDEFINED="NOTDEFINED";var cD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));cD.USERDEFINED="USERDEFINED",cD.NOTDEFINED="NOTDEFINED";var hD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));hD.BEND="BEND",hD.CROSS="CROSS",hD.REDUCER="REDUCER",hD.TEE="TEE",hD.USERDEFINED="USERDEFINED",hD.NOTDEFINED="NOTDEFINED";var pD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));pD.CABLELADDERSEGMENT="CABLELADDERSEGMENT",pD.CABLETRAYSEGMENT="CABLETRAYSEGMENT",pD.CABLETRUNKINGSEGMENT="CABLETRUNKINGSEGMENT",pD.CONDUITSEGMENT="CONDUITSEGMENT",pD.USERDEFINED="USERDEFINED",pD.NOTDEFINED="NOTDEFINED";var fD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));fD.CONNECTOR="CONNECTOR",fD.ENTRY="ENTRY",fD.EXIT="EXIT",fD.JUNCTION="JUNCTION",fD.TRANSITION="TRANSITION",fD.USERDEFINED="USERDEFINED",fD.NOTDEFINED="NOTDEFINED";var dD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));dD.BUSBARSEGMENT="BUSBARSEGMENT",dD.CABLESEGMENT="CABLESEGMENT",dD.CONDUCTORSEGMENT="CONDUCTORSEGMENT",dD.CORESEGMENT="CORESEGMENT",dD.USERDEFINED="USERDEFINED",dD.NOTDEFINED="NOTDEFINED";var vD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));vD.WELL="WELL",vD.CAISSON="CAISSON",vD.USERDEFINED="USERDEFINED",vD.NOTDEFINED="NOTDEFINED";var mD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));mD.NOCHANGE="NOCHANGE",mD.MODIFIED="MODIFIED",mD.ADDED="ADDED",mD.DELETED="DELETED",mD.NOTDEFINED="NOTDEFINED";var yD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));yD.AIRCOOLED="AIRCOOLED",yD.WATERCOOLED="WATERCOOLED",yD.HEATRECOVERY="HEATRECOVERY",yD.USERDEFINED="USERDEFINED",yD.NOTDEFINED="NOTDEFINED";var gD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));gD.USERDEFINED="USERDEFINED",gD.NOTDEFINED="NOTDEFINED";var _D=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));_D.DXCOOLINGCOIL="DXCOOLINGCOIL",_D.ELECTRICHEATINGCOIL="ELECTRICHEATINGCOIL",_D.GASHEATINGCOIL="GASHEATINGCOIL",_D.HYDRONICCOIL="HYDRONICCOIL",_D.STEAMHEATINGCOIL="STEAMHEATINGCOIL",_D.WATERCOOLINGCOIL="WATERCOOLINGCOIL",_D.WATERHEATINGCOIL="WATERHEATINGCOIL",_D.USERDEFINED="USERDEFINED",_D.NOTDEFINED="NOTDEFINED";var TD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));TD.COLUMN="COLUMN",TD.PILASTER="PILASTER",TD.PIERSTEM="PIERSTEM",TD.PIERSTEM_SEGMENT="PIERSTEM_SEGMENT",TD.STANDCOLUMN="STANDCOLUMN",TD.USERDEFINED="USERDEFINED",TD.NOTDEFINED="NOTDEFINED";var ED=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));ED.ANTENNA="ANTENNA",ED.COMPUTER="COMPUTER",ED.FAX="FAX",ED.GATEWAY="GATEWAY",ED.MODEM="MODEM",ED.NETWORKAPPLIANCE="NETWORKAPPLIANCE",ED.NETWORKBRIDGE="NETWORKBRIDGE",ED.NETWORKHUB="NETWORKHUB",ED.PRINTER="PRINTER",ED.REPEATER="REPEATER",ED.ROUTER="ROUTER",ED.SCANNER="SCANNER",ED.USERDEFINED="USERDEFINED",ED.NOTDEFINED="NOTDEFINED";var xD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));xD.P_COMPLEX="P_COMPLEX",xD.Q_COMPLEX="Q_COMPLEX";var bD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));bD.DYNAMIC="DYNAMIC",bD.RECIPROCATING="RECIPROCATING",bD.ROTARY="ROTARY",bD.SCROLL="SCROLL",bD.TROCHOIDAL="TROCHOIDAL",bD.SINGLESTAGE="SINGLESTAGE",bD.BOOSTER="BOOSTER",bD.OPENTYPE="OPENTYPE",bD.HERMETIC="HERMETIC",bD.SEMIHERMETIC="SEMIHERMETIC",bD.WELDEDSHELLHERMETIC="WELDEDSHELLHERMETIC",bD.ROLLINGPISTON="ROLLINGPISTON",bD.ROTARYVANE="ROTARYVANE",bD.SINGLESCREW="SINGLESCREW",bD.TWINSCREW="TWINSCREW",bD.USERDEFINED="USERDEFINED",bD.NOTDEFINED="NOTDEFINED";var ID=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));ID.AIRCOOLED="AIRCOOLED",ID.EVAPORATIVECOOLED="EVAPORATIVECOOLED",ID.WATERCOOLED="WATERCOOLED",ID.WATERCOOLEDBRAZEDPLATE="WATERCOOLEDBRAZEDPLATE",ID.WATERCOOLEDSHELLCOIL="WATERCOOLEDSHELLCOIL",ID.WATERCOOLEDSHELLTUBE="WATERCOOLEDSHELLTUBE",ID.WATERCOOLEDTUBEINTUBE="WATERCOOLEDTUBEINTUBE",ID.USERDEFINED="USERDEFINED",ID.NOTDEFINED="NOTDEFINED";var wD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));wD.ATPATH="ATPATH",wD.ATSTART="ATSTART",wD.ATEND="ATEND",wD.NOTDEFINED="NOTDEFINED";var kD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));kD.HARD="HARD",kD.SOFT="SOFT",kD.ADVISORY="ADVISORY",kD.USERDEFINED="USERDEFINED",kD.NOTDEFINED="NOTDEFINED";var SD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));SD.DEMOLISHING="DEMOLISHING",SD.EARTHMOVING="EARTHMOVING",SD.ERECTING="ERECTING",SD.HEATING="HEATING",SD.LIGHTING="LIGHTING",SD.PAVING="PAVING",SD.PUMPING="PUMPING",SD.TRANSPORTING="TRANSPORTING",SD.USERDEFINED="USERDEFINED",SD.NOTDEFINED="NOTDEFINED";var RD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));RD.AGGREGATES="AGGREGATES",RD.CONCRETE="CONCRETE",RD.DRYWALL="DRYWALL",RD.FUEL="FUEL",RD.GYPSUM="GYPSUM",RD.MASONRY="MASONRY",RD.METAL="METAL",RD.PLASTIC="PLASTIC",RD.WOOD="WOOD",RD.NOTDEFINED="NOTDEFINED",RD.USERDEFINED="USERDEFINED";var CD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));CD.ASSEMBLY="ASSEMBLY",CD.FORMWORK="FORMWORK",CD.USERDEFINED="USERDEFINED",CD.NOTDEFINED="NOTDEFINED";var DD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));DD.FLOATING="FLOATING",DD.PROGRAMMABLE="PROGRAMMABLE",DD.PROPORTIONAL="PROPORTIONAL",DD.MULTIPOSITION="MULTIPOSITION",DD.TWOPOSITION="TWOPOSITION",DD.USERDEFINED="USERDEFINED",DD.NOTDEFINED="NOTDEFINED";var AD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));AD.ACTIVE="ACTIVE",AD.PASSIVE="PASSIVE",AD.USERDEFINED="USERDEFINED",AD.NOTDEFINED="NOTDEFINED";var OD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));OD.NATURALDRAFT="NATURALDRAFT",OD.MECHANICALINDUCEDDRAFT="MECHANICALINDUCEDDRAFT",OD.MECHANICALFORCEDDRAFT="MECHANICALFORCEDDRAFT",OD.USERDEFINED="USERDEFINED",OD.NOTDEFINED="NOTDEFINED";var ND=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));ND.USERDEFINED="USERDEFINED",ND.NOTDEFINED="NOTDEFINED";var MD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));MD.BUDGET="BUDGET",MD.COSTPLAN="COSTPLAN",MD.ESTIMATE="ESTIMATE",MD.TENDER="TENDER",MD.PRICEDBILLOFQUANTITIES="PRICEDBILLOFQUANTITIES",MD.UNPRICEDBILLOFQUANTITIES="UNPRICEDBILLOFQUANTITIES",MD.SCHEDULEOFRATES="SCHEDULEOFRATES",MD.USERDEFINED="USERDEFINED",MD.NOTDEFINED="NOTDEFINED";var PD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));PD.CEILING="CEILING",PD.FLOORING="FLOORING",PD.CLADDING="CLADDING",PD.ROOFING="ROOFING",PD.MOLDING="MOLDING",PD.SKIRTINGBOARD="SKIRTINGBOARD",PD.INSULATION="INSULATION",PD.MEMBRANE="MEMBRANE",PD.SLEEVING="SLEEVING",PD.WRAPPING="WRAPPING",PD.COPING="COPING",PD.USERDEFINED="USERDEFINED",PD.NOTDEFINED="NOTDEFINED";var FD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));FD.OFFICE="OFFICE",FD.SITE="SITE",FD.USERDEFINED="USERDEFINED",FD.NOTDEFINED="NOTDEFINED";var LD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));LD.USERDEFINED="USERDEFINED",LD.NOTDEFINED="NOTDEFINED";var UD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));UD.LINEAR="LINEAR",UD.LOG_LINEAR="LOG_LINEAR",UD.LOG_LOG="LOG_LOG",UD.NOTDEFINED="NOTDEFINED";var ZD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));ZD.BACKDRAFTDAMPER="BACKDRAFTDAMPER",ZD.BALANCINGDAMPER="BALANCINGDAMPER",ZD.BLASTDAMPER="BLASTDAMPER",ZD.CONTROLDAMPER="CONTROLDAMPER",ZD.FIREDAMPER="FIREDAMPER",ZD.FIRESMOKEDAMPER="FIRESMOKEDAMPER",ZD.FUMEHOODEXHAUST="FUMEHOODEXHAUST",ZD.GRAVITYDAMPER="GRAVITYDAMPER",ZD.GRAVITYRELIEFDAMPER="GRAVITYRELIEFDAMPER",ZD.RELIEFDAMPER="RELIEFDAMPER",ZD.SMOKEDAMPER="SMOKEDAMPER",ZD.USERDEFINED="USERDEFINED",ZD.NOTDEFINED="NOTDEFINED";var BD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));BD.MEASURED="MEASURED",BD.PREDICTED="PREDICTED",BD.SIMULATED="SIMULATED",BD.USERDEFINED="USERDEFINED",BD.NOTDEFINED="NOTDEFINED";var zD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));zD.ANGULARVELOCITYUNIT="ANGULARVELOCITYUNIT",zD.AREADENSITYUNIT="AREADENSITYUNIT",zD.COMPOUNDPLANEANGLEUNIT="COMPOUNDPLANEANGLEUNIT",zD.DYNAMICVISCOSITYUNIT="DYNAMICVISCOSITYUNIT",zD.HEATFLUXDENSITYUNIT="HEATFLUXDENSITYUNIT",zD.INTEGERCOUNTRATEUNIT="INTEGERCOUNTRATEUNIT",zD.ISOTHERMALMOISTURECAPACITYUNIT="ISOTHERMALMOISTURECAPACITYUNIT",zD.KINEMATICVISCOSITYUNIT="KINEMATICVISCOSITYUNIT",zD.LINEARVELOCITYUNIT="LINEARVELOCITYUNIT",zD.MASSDENSITYUNIT="MASSDENSITYUNIT",zD.MASSFLOWRATEUNIT="MASSFLOWRATEUNIT",zD.MOISTUREDIFFUSIVITYUNIT="MOISTUREDIFFUSIVITYUNIT",zD.MOLECULARWEIGHTUNIT="MOLECULARWEIGHTUNIT",zD.SPECIFICHEATCAPACITYUNIT="SPECIFICHEATCAPACITYUNIT",zD.THERMALADMITTANCEUNIT="THERMALADMITTANCEUNIT",zD.THERMALCONDUCTANCEUNIT="THERMALCONDUCTANCEUNIT",zD.THERMALRESISTANCEUNIT="THERMALRESISTANCEUNIT",zD.THERMALTRANSMITTANCEUNIT="THERMALTRANSMITTANCEUNIT",zD.VAPORPERMEABILITYUNIT="VAPORPERMEABILITYUNIT",zD.VOLUMETRICFLOWRATEUNIT="VOLUMETRICFLOWRATEUNIT",zD.ROTATIONALFREQUENCYUNIT="ROTATIONALFREQUENCYUNIT",zD.TORQUEUNIT="TORQUEUNIT",zD.MOMENTOFINERTIAUNIT="MOMENTOFINERTIAUNIT",zD.LINEARMOMENTUNIT="LINEARMOMENTUNIT",zD.LINEARFORCEUNIT="LINEARFORCEUNIT",zD.PLANARFORCEUNIT="PLANARFORCEUNIT",zD.MODULUSOFELASTICITYUNIT="MODULUSOFELASTICITYUNIT",zD.SHEARMODULUSUNIT="SHEARMODULUSUNIT",zD.LINEARSTIFFNESSUNIT="LINEARSTIFFNESSUNIT",zD.ROTATIONALSTIFFNESSUNIT="ROTATIONALSTIFFNESSUNIT",zD.MODULUSOFSUBGRADEREACTIONUNIT="MODULUSOFSUBGRADEREACTIONUNIT",zD.ACCELERATIONUNIT="ACCELERATIONUNIT",zD.CURVATUREUNIT="CURVATUREUNIT",zD.HEATINGVALUEUNIT="HEATINGVALUEUNIT",zD.IONCONCENTRATIONUNIT="IONCONCENTRATIONUNIT",zD.LUMINOUSINTENSITYDISTRIBUTIONUNIT="LUMINOUSINTENSITYDISTRIBUTIONUNIT",zD.MASSPERLENGTHUNIT="MASSPERLENGTHUNIT",zD.MODULUSOFLINEARSUBGRADEREACTIONUNIT="MODULUSOFLINEARSUBGRADEREACTIONUNIT",zD.MODULUSOFROTATIONALSUBGRADEREACTIONUNIT="MODULUSOFROTATIONALSUBGRADEREACTIONUNIT",zD.PHUNIT="PHUNIT",zD.ROTATIONALMASSUNIT="ROTATIONALMASSUNIT",zD.SECTIONAREAINTEGRALUNIT="SECTIONAREAINTEGRALUNIT",zD.SECTIONMODULUSUNIT="SECTIONMODULUSUNIT",zD.SOUNDPOWERLEVELUNIT="SOUNDPOWERLEVELUNIT",zD.SOUNDPOWERUNIT="SOUNDPOWERUNIT",zD.SOUNDPRESSURELEVELUNIT="SOUNDPRESSURELEVELUNIT",zD.SOUNDPRESSUREUNIT="SOUNDPRESSUREUNIT",zD.TEMPERATUREGRADIENTUNIT="TEMPERATUREGRADIENTUNIT",zD.TEMPERATURERATEOFCHANGEUNIT="TEMPERATURERATEOFCHANGEUNIT",zD.THERMALEXPANSIONCOEFFICIENTUNIT="THERMALEXPANSIONCOEFFICIENTUNIT",zD.WARPINGCONSTANTUNIT="WARPINGCONSTANTUNIT",zD.WARPINGMOMENTUNIT="WARPINGMOMENTUNIT",zD.USERDEFINED="USERDEFINED";var GD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));GD.POSITIVE="POSITIVE",GD.NEGATIVE="NEGATIVE";var HD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));HD.ANCHORPLATE="ANCHORPLATE",HD.BRACKET="BRACKET",HD.SHOE="SHOE",HD.EXPANSION_JOINT_DEVICE="EXPANSION_JOINT_DEVICE",HD.USERDEFINED="USERDEFINED",HD.NOTDEFINED="NOTDEFINED";var jD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));jD.FORMEDDUCT="FORMEDDUCT",jD.INSPECTIONCHAMBER="INSPECTIONCHAMBER",jD.INSPECTIONPIT="INSPECTIONPIT",jD.MANHOLE="MANHOLE",jD.METERCHAMBER="METERCHAMBER",jD.SUMP="SUMP",jD.TRENCH="TRENCH",jD.VALVECHAMBER="VALVECHAMBER",jD.USERDEFINED="USERDEFINED",jD.NOTDEFINED="NOTDEFINED";var VD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));VD.CABLE="CABLE",VD.CABLECARRIER="CABLECARRIER",VD.DUCT="DUCT",VD.PIPE="PIPE",VD.USERDEFINED="USERDEFINED",VD.NOTDEFINED="NOTDEFINED";var WD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));WD.AIRCONDITIONING="AIRCONDITIONING",WD.AUDIOVISUAL="AUDIOVISUAL",WD.CHEMICAL="CHEMICAL",WD.CHILLEDWATER="CHILLEDWATER",WD.COMMUNICATION="COMMUNICATION",WD.COMPRESSEDAIR="COMPRESSEDAIR",WD.CONDENSERWATER="CONDENSERWATER",WD.CONTROL="CONTROL",WD.CONVEYING="CONVEYING",WD.DATA="DATA",WD.DISPOSAL="DISPOSAL",WD.DOMESTICCOLDWATER="DOMESTICCOLDWATER",WD.DOMESTICHOTWATER="DOMESTICHOTWATER",WD.DRAINAGE="DRAINAGE",WD.EARTHING="EARTHING",WD.ELECTRICAL="ELECTRICAL",WD.ELECTROACOUSTIC="ELECTROACOUSTIC",WD.EXHAUST="EXHAUST",WD.FIREPROTECTION="FIREPROTECTION",WD.FUEL="FUEL",WD.GAS="GAS",WD.HAZARDOUS="HAZARDOUS",WD.HEATING="HEATING",WD.LIGHTING="LIGHTING",WD.LIGHTNINGPROTECTION="LIGHTNINGPROTECTION",WD.MUNICIPALSOLIDWASTE="MUNICIPALSOLIDWASTE",WD.OIL="OIL",WD.OPERATIONAL="OPERATIONAL",WD.POWERGENERATION="POWERGENERATION",WD.RAINWATER="RAINWATER",WD.REFRIGERATION="REFRIGERATION",WD.SECURITY="SECURITY",WD.SEWAGE="SEWAGE",WD.SIGNAL="SIGNAL",WD.STORMWATER="STORMWATER",WD.TELEPHONE="TELEPHONE",WD.TV="TV",WD.VACUUM="VACUUM",WD.VENT="VENT",WD.VENTILATION="VENTILATION",WD.WASTEWATER="WASTEWATER",WD.WATERSUPPLY="WATERSUPPLY",WD.USERDEFINED="USERDEFINED",WD.NOTDEFINED="NOTDEFINED";var YD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));YD.PUBLIC="PUBLIC",YD.RESTRICTED="RESTRICTED",YD.CONFIDENTIAL="CONFIDENTIAL",YD.PERSONAL="PERSONAL",YD.USERDEFINED="USERDEFINED",YD.NOTDEFINED="NOTDEFINED";var qD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));qD.DRAFT="DRAFT",qD.FINALDRAFT="FINALDRAFT",qD.FINAL="FINAL",qD.REVISION="REVISION",qD.NOTDEFINED="NOTDEFINED";var XD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));XD.SWINGING="SWINGING",XD.DOUBLE_ACTING="DOUBLE_ACTING",XD.SLIDING="SLIDING",XD.FOLDING="FOLDING",XD.REVOLVING="REVOLVING",XD.ROLLINGUP="ROLLINGUP",XD.FIXEDPANEL="FIXEDPANEL",XD.USERDEFINED="USERDEFINED",XD.NOTDEFINED="NOTDEFINED";var KD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));KD.LEFT="LEFT",KD.MIDDLE="MIDDLE",KD.RIGHT="RIGHT",KD.NOTDEFINED="NOTDEFINED";var QD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));QD.ALUMINIUM="ALUMINIUM",QD.HIGH_GRADE_STEEL="HIGH_GRADE_STEEL",QD.STEEL="STEEL",QD.WOOD="WOOD",QD.ALUMINIUM_WOOD="ALUMINIUM_WOOD",QD.ALUMINIUM_PLASTIC="ALUMINIUM_PLASTIC",QD.PLASTIC="PLASTIC",QD.USERDEFINED="USERDEFINED",QD.NOTDEFINED="NOTDEFINED";var JD=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));JD.SINGLE_SWING_LEFT="SINGLE_SWING_LEFT",JD.SINGLE_SWING_RIGHT="SINGLE_SWING_RIGHT",JD.DOUBLE_DOOR_SINGLE_SWING="DOUBLE_DOOR_SINGLE_SWING",JD.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT="DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT",JD.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT="DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT",JD.DOUBLE_SWING_LEFT="DOUBLE_SWING_LEFT",JD.DOUBLE_SWING_RIGHT="DOUBLE_SWING_RIGHT",JD.DOUBLE_DOOR_DOUBLE_SWING="DOUBLE_DOOR_DOUBLE_SWING",JD.SLIDING_TO_LEFT="SLIDING_TO_LEFT",JD.SLIDING_TO_RIGHT="SLIDING_TO_RIGHT",JD.DOUBLE_DOOR_SLIDING="DOUBLE_DOOR_SLIDING",JD.FOLDING_TO_LEFT="FOLDING_TO_LEFT",JD.FOLDING_TO_RIGHT="FOLDING_TO_RIGHT",JD.DOUBLE_DOOR_FOLDING="DOUBLE_DOOR_FOLDING",JD.REVOLVING="REVOLVING",JD.ROLLINGUP="ROLLINGUP",JD.USERDEFINED="USERDEFINED",JD.NOTDEFINED="NOTDEFINED";var $D=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));$D.DOOR="DOOR",$D.GATE="GATE",$D.TRAPDOOR="TRAPDOOR",$D.USERDEFINED="USERDEFINED",$D.NOTDEFINED="NOTDEFINED";var eA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));eA.SINGLE_SWING_LEFT="SINGLE_SWING_LEFT",eA.SINGLE_SWING_RIGHT="SINGLE_SWING_RIGHT",eA.DOUBLE_DOOR_SINGLE_SWING="DOUBLE_DOOR_SINGLE_SWING",eA.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT="DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT",eA.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT="DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT",eA.DOUBLE_SWING_LEFT="DOUBLE_SWING_LEFT",eA.DOUBLE_SWING_RIGHT="DOUBLE_SWING_RIGHT",eA.DOUBLE_DOOR_DOUBLE_SWING="DOUBLE_DOOR_DOUBLE_SWING",eA.SLIDING_TO_LEFT="SLIDING_TO_LEFT",eA.SLIDING_TO_RIGHT="SLIDING_TO_RIGHT",eA.DOUBLE_DOOR_SLIDING="DOUBLE_DOOR_SLIDING",eA.FOLDING_TO_LEFT="FOLDING_TO_LEFT",eA.FOLDING_TO_RIGHT="FOLDING_TO_RIGHT",eA.DOUBLE_DOOR_FOLDING="DOUBLE_DOOR_FOLDING",eA.REVOLVING="REVOLVING",eA.ROLLINGUP="ROLLINGUP",eA.SWING_FIXED_LEFT="SWING_FIXED_LEFT",eA.SWING_FIXED_RIGHT="SWING_FIXED_RIGHT",eA.USERDEFINED="USERDEFINED",eA.NOTDEFINED="NOTDEFINED";var tA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));tA.BEND="BEND",tA.CONNECTOR="CONNECTOR",tA.ENTRY="ENTRY",tA.EXIT="EXIT",tA.JUNCTION="JUNCTION",tA.OBSTRUCTION="OBSTRUCTION",tA.TRANSITION="TRANSITION",tA.USERDEFINED="USERDEFINED",tA.NOTDEFINED="NOTDEFINED";var nA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));nA.RIGIDSEGMENT="RIGIDSEGMENT",nA.FLEXIBLESEGMENT="FLEXIBLESEGMENT",nA.USERDEFINED="USERDEFINED",nA.NOTDEFINED="NOTDEFINED";var rA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));rA.FLATOVAL="FLATOVAL",rA.RECTANGULAR="RECTANGULAR",rA.ROUND="ROUND",rA.USERDEFINED="USERDEFINED",rA.NOTDEFINED="NOTDEFINED";var iA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));iA.DISHWASHER="DISHWASHER",iA.ELECTRICCOOKER="ELECTRICCOOKER",iA.FREESTANDINGELECTRICHEATER="FREESTANDINGELECTRICHEATER",iA.FREESTANDINGFAN="FREESTANDINGFAN",iA.FREESTANDINGWATERHEATER="FREESTANDINGWATERHEATER",iA.FREESTANDINGWATERCOOLER="FREESTANDINGWATERCOOLER",iA.FREEZER="FREEZER",iA.FRIDGE_FREEZER="FRIDGE_FREEZER",iA.HANDDRYER="HANDDRYER",iA.KITCHENMACHINE="KITCHENMACHINE",iA.MICROWAVE="MICROWAVE",iA.PHOTOCOPIER="PHOTOCOPIER",iA.REFRIGERATOR="REFRIGERATOR",iA.TUMBLEDRYER="TUMBLEDRYER",iA.VENDINGMACHINE="VENDINGMACHINE",iA.WASHINGMACHINE="WASHINGMACHINE",iA.USERDEFINED="USERDEFINED",iA.NOTDEFINED="NOTDEFINED";var aA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));aA.CONSUMERUNIT="CONSUMERUNIT",aA.DISTRIBUTIONBOARD="DISTRIBUTIONBOARD",aA.MOTORCONTROLCENTRE="MOTORCONTROLCENTRE",aA.SWITCHBOARD="SWITCHBOARD",aA.USERDEFINED="USERDEFINED",aA.NOTDEFINED="NOTDEFINED";var sA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));sA.BATTERY="BATTERY",sA.CAPACITORBANK="CAPACITORBANK",sA.HARMONICFILTER="HARMONICFILTER",sA.INDUCTORBANK="INDUCTORBANK",sA.UPS="UPS",sA.USERDEFINED="USERDEFINED",sA.NOTDEFINED="NOTDEFINED";var oA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));oA.CHP="CHP",oA.ENGINEGENERATOR="ENGINEGENERATOR",oA.STANDALONE="STANDALONE",oA.USERDEFINED="USERDEFINED",oA.NOTDEFINED="NOTDEFINED";var uA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));uA.DC="DC",uA.INDUCTION="INDUCTION",uA.POLYPHASE="POLYPHASE",uA.RELUCTANCESYNCHRONOUS="RELUCTANCESYNCHRONOUS",uA.SYNCHRONOUS="SYNCHRONOUS",uA.USERDEFINED="USERDEFINED",uA.NOTDEFINED="NOTDEFINED";var lA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));lA.TIMECLOCK="TIMECLOCK",lA.TIMEDELAY="TIMEDELAY",lA.RELAY="RELAY",lA.USERDEFINED="USERDEFINED",lA.NOTDEFINED="NOTDEFINED";var cA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));cA.ACCESSORY_ASSEMBLY="ACCESSORY_ASSEMBLY",cA.ARCH="ARCH",cA.BEAM_GRID="BEAM_GRID",cA.BRACED_FRAME="BRACED_FRAME",cA.GIRDER="GIRDER",cA.REINFORCEMENT_UNIT="REINFORCEMENT_UNIT",cA.RIGID_FRAME="RIGID_FRAME",cA.SLAB_FIELD="SLAB_FIELD",cA.TRUSS="TRUSS",cA.ABUTMENT="ABUTMENT",cA.PIER="PIER",cA.PYLON="PYLON",cA.CROSS_BRACING="CROSS_BRACING",cA.DECK="DECK",cA.USERDEFINED="USERDEFINED",cA.NOTDEFINED="NOTDEFINED";var hA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));hA.COMPLEX="COMPLEX",hA.ELEMENT="ELEMENT",hA.PARTIAL="PARTIAL";var pA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));pA.EXTERNALCOMBUSTION="EXTERNALCOMBUSTION",pA.INTERNALCOMBUSTION="INTERNALCOMBUSTION",pA.USERDEFINED="USERDEFINED",pA.NOTDEFINED="NOTDEFINED";var fA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));fA.DIRECTEVAPORATIVERANDOMMEDIAAIRCOOLER="DIRECTEVAPORATIVERANDOMMEDIAAIRCOOLER",fA.DIRECTEVAPORATIVERIGIDMEDIAAIRCOOLER="DIRECTEVAPORATIVERIGIDMEDIAAIRCOOLER",fA.DIRECTEVAPORATIVESLINGERSPACKAGEDAIRCOOLER="DIRECTEVAPORATIVESLINGERSPACKAGEDAIRCOOLER",fA.DIRECTEVAPORATIVEPACKAGEDROTARYAIRCOOLER="DIRECTEVAPORATIVEPACKAGEDROTARYAIRCOOLER",fA.DIRECTEVAPORATIVEAIRWASHER="DIRECTEVAPORATIVEAIRWASHER",fA.INDIRECTEVAPORATIVEPACKAGEAIRCOOLER="INDIRECTEVAPORATIVEPACKAGEAIRCOOLER",fA.INDIRECTEVAPORATIVEWETCOIL="INDIRECTEVAPORATIVEWETCOIL",fA.INDIRECTEVAPORATIVECOOLINGTOWERORCOILCOOLER="INDIRECTEVAPORATIVECOOLINGTOWERORCOILCOOLER",fA.INDIRECTDIRECTCOMBINATION="INDIRECTDIRECTCOMBINATION",fA.USERDEFINED="USERDEFINED",fA.NOTDEFINED="NOTDEFINED";var dA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));dA.DIRECTEXPANSION="DIRECTEXPANSION",dA.DIRECTEXPANSIONSHELLANDTUBE="DIRECTEXPANSIONSHELLANDTUBE",dA.DIRECTEXPANSIONTUBEINTUBE="DIRECTEXPANSIONTUBEINTUBE",dA.DIRECTEXPANSIONBRAZEDPLATE="DIRECTEXPANSIONBRAZEDPLATE",dA.FLOODEDSHELLANDTUBE="FLOODEDSHELLANDTUBE",dA.SHELLANDCOIL="SHELLANDCOIL",dA.USERDEFINED="USERDEFINED",dA.NOTDEFINED="NOTDEFINED";var vA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));vA.EVENTRULE="EVENTRULE",vA.EVENTMESSAGE="EVENTMESSAGE",vA.EVENTTIME="EVENTTIME",vA.EVENTCOMPLEX="EVENTCOMPLEX",vA.USERDEFINED="USERDEFINED",vA.NOTDEFINED="NOTDEFINED";var mA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));mA.STARTEVENT="STARTEVENT",mA.ENDEVENT="ENDEVENT",mA.INTERMEDIATEEVENT="INTERMEDIATEEVENT",mA.USERDEFINED="USERDEFINED",mA.NOTDEFINED="NOTDEFINED";var yA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));yA.EXTERNAL="EXTERNAL",yA.EXTERNAL_EARTH="EXTERNAL_EARTH",yA.EXTERNAL_WATER="EXTERNAL_WATER",yA.EXTERNAL_FIRE="EXTERNAL_FIRE",yA.USERDEFINED="USERDEFINED",yA.NOTDEFINED="NOTDEFINED";var gA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));gA.CENTRIFUGALFORWARDCURVED="CENTRIFUGALFORWARDCURVED",gA.CENTRIFUGALRADIAL="CENTRIFUGALRADIAL",gA.CENTRIFUGALBACKWARDINCLINEDCURVED="CENTRIFUGALBACKWARDINCLINEDCURVED",gA.CENTRIFUGALAIRFOIL="CENTRIFUGALAIRFOIL",gA.TUBEAXIAL="TUBEAXIAL",gA.VANEAXIAL="VANEAXIAL",gA.PROPELLORAXIAL="PROPELLORAXIAL",gA.USERDEFINED="USERDEFINED",gA.NOTDEFINED="NOTDEFINED";var _A=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));_A.GLUE="GLUE",_A.MORTAR="MORTAR",_A.WELD="WELD",_A.USERDEFINED="USERDEFINED",_A.NOTDEFINED="NOTDEFINED";var TA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));TA.AIRPARTICLEFILTER="AIRPARTICLEFILTER",TA.COMPRESSEDAIRFILTER="COMPRESSEDAIRFILTER",TA.ODORFILTER="ODORFILTER",TA.OILFILTER="OILFILTER",TA.STRAINER="STRAINER",TA.WATERFILTER="WATERFILTER",TA.USERDEFINED="USERDEFINED",TA.NOTDEFINED="NOTDEFINED";var EA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));EA.BREECHINGINLET="BREECHINGINLET",EA.FIREHYDRANT="FIREHYDRANT",EA.HOSEREEL="HOSEREEL",EA.SPRINKLER="SPRINKLER",EA.SPRINKLERDEFLECTOR="SPRINKLERDEFLECTOR",EA.USERDEFINED="USERDEFINED",EA.NOTDEFINED="NOTDEFINED";var xA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));xA.SOURCE="SOURCE",xA.SINK="SINK",xA.SOURCEANDSINK="SOURCEANDSINK",xA.NOTDEFINED="NOTDEFINED";var bA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));bA.PRESSUREGAUGE="PRESSUREGAUGE",bA.THERMOMETER="THERMOMETER",bA.AMMETER="AMMETER",bA.FREQUENCYMETER="FREQUENCYMETER",bA.POWERFACTORMETER="POWERFACTORMETER",bA.PHASEANGLEMETER="PHASEANGLEMETER",bA.VOLTMETER_PEAK="VOLTMETER_PEAK",bA.VOLTMETER_RMS="VOLTMETER_RMS",bA.USERDEFINED="USERDEFINED",bA.NOTDEFINED="NOTDEFINED";var IA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));IA.ENERGYMETER="ENERGYMETER",IA.GASMETER="GASMETER",IA.OILMETER="OILMETER",IA.WATERMETER="WATERMETER",IA.USERDEFINED="USERDEFINED",IA.NOTDEFINED="NOTDEFINED";var wA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));wA.CAISSON_FOUNDATION="CAISSON_FOUNDATION",wA.FOOTING_BEAM="FOOTING_BEAM",wA.PAD_FOOTING="PAD_FOOTING",wA.PILE_CAP="PILE_CAP",wA.STRIP_FOOTING="STRIP_FOOTING",wA.USERDEFINED="USERDEFINED",wA.NOTDEFINED="NOTDEFINED";var kA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));kA.CHAIR="CHAIR",kA.TABLE="TABLE",kA.DESK="DESK",kA.BED="BED",kA.FILECABINET="FILECABINET",kA.SHELF="SHELF",kA.SOFA="SOFA",kA.USERDEFINED="USERDEFINED",kA.NOTDEFINED="NOTDEFINED";var SA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));SA.TERRAIN="TERRAIN",SA.SOIL_BORING_POINT="SOIL_BORING_POINT",SA.USERDEFINED="USERDEFINED",SA.NOTDEFINED="NOTDEFINED";var RA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));RA.GRAPH_VIEW="GRAPH_VIEW",RA.SKETCH_VIEW="SKETCH_VIEW",RA.MODEL_VIEW="MODEL_VIEW",RA.PLAN_VIEW="PLAN_VIEW",RA.REFLECTED_PLAN_VIEW="REFLECTED_PLAN_VIEW",RA.SECTION_VIEW="SECTION_VIEW",RA.ELEVATION_VIEW="ELEVATION_VIEW",RA.USERDEFINED="USERDEFINED",RA.NOTDEFINED="NOTDEFINED";var CA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));CA.GLOBAL_COORDS="GLOBAL_COORDS",CA.LOCAL_COORDS="LOCAL_COORDS";var DA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));DA.RECTANGULAR="RECTANGULAR",DA.RADIAL="RADIAL",DA.TRIANGULAR="TRIANGULAR",DA.IRREGULAR="IRREGULAR",DA.USERDEFINED="USERDEFINED",DA.NOTDEFINED="NOTDEFINED";var AA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));AA.PLATE="PLATE",AA.SHELLANDTUBE="SHELLANDTUBE",AA.USERDEFINED="USERDEFINED",AA.NOTDEFINED="NOTDEFINED";var OA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));OA.STEAMINJECTION="STEAMINJECTION",OA.ADIABATICAIRWASHER="ADIABATICAIRWASHER",OA.ADIABATICPAN="ADIABATICPAN",OA.ADIABATICWETTEDELEMENT="ADIABATICWETTEDELEMENT",OA.ADIABATICATOMIZING="ADIABATICATOMIZING",OA.ADIABATICULTRASONIC="ADIABATICULTRASONIC",OA.ADIABATICRIGIDMEDIA="ADIABATICRIGIDMEDIA",OA.ADIABATICCOMPRESSEDAIRNOZZLE="ADIABATICCOMPRESSEDAIRNOZZLE",OA.ASSISTEDELECTRIC="ASSISTEDELECTRIC",OA.ASSISTEDNATURALGAS="ASSISTEDNATURALGAS",OA.ASSISTEDPROPANE="ASSISTEDPROPANE",OA.ASSISTEDBUTANE="ASSISTEDBUTANE",OA.ASSISTEDSTEAM="ASSISTEDSTEAM",OA.USERDEFINED="USERDEFINED",OA.NOTDEFINED="NOTDEFINED";var NA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));NA.CYCLONIC="CYCLONIC",NA.GREASE="GREASE",NA.OIL="OIL",NA.PETROL="PETROL",NA.USERDEFINED="USERDEFINED",NA.NOTDEFINED="NOTDEFINED";var MA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));MA.INTERNAL="INTERNAL",MA.EXTERNAL="EXTERNAL",MA.EXTERNAL_EARTH="EXTERNAL_EARTH",MA.EXTERNAL_WATER="EXTERNAL_WATER",MA.EXTERNAL_FIRE="EXTERNAL_FIRE",MA.NOTDEFINED="NOTDEFINED";var PA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));PA.ASSETINVENTORY="ASSETINVENTORY",PA.SPACEINVENTORY="SPACEINVENTORY",PA.FURNITUREINVENTORY="FURNITUREINVENTORY",PA.USERDEFINED="USERDEFINED",PA.NOTDEFINED="NOTDEFINED";var FA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));FA.DATA="DATA",FA.POWER="POWER",FA.USERDEFINED="USERDEFINED",FA.NOTDEFINED="NOTDEFINED";var LA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));LA.UNIFORM_KNOTS="UNIFORM_KNOTS",LA.QUASI_UNIFORM_KNOTS="QUASI_UNIFORM_KNOTS",LA.PIECEWISE_BEZIER_KNOTS="PIECEWISE_BEZIER_KNOTS",LA.UNSPECIFIED="UNSPECIFIED";var UA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));UA.ADMINISTRATION="ADMINISTRATION",UA.CARPENTRY="CARPENTRY",UA.CLEANING="CLEANING",UA.CONCRETE="CONCRETE",UA.DRYWALL="DRYWALL",UA.ELECTRIC="ELECTRIC",UA.FINISHING="FINISHING",UA.FLOORING="FLOORING",UA.GENERAL="GENERAL",UA.HVAC="HVAC",UA.LANDSCAPING="LANDSCAPING",UA.MASONRY="MASONRY",UA.PAINTING="PAINTING",UA.PAVING="PAVING",UA.PLUMBING="PLUMBING",UA.ROOFING="ROOFING",UA.SITEGRADING="SITEGRADING",UA.STEELWORK="STEELWORK",UA.SURVEYING="SURVEYING",UA.USERDEFINED="USERDEFINED",UA.NOTDEFINED="NOTDEFINED";var ZA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));ZA.COMPACTFLUORESCENT="COMPACTFLUORESCENT",ZA.FLUORESCENT="FLUORESCENT",ZA.HALOGEN="HALOGEN",ZA.HIGHPRESSUREMERCURY="HIGHPRESSUREMERCURY",ZA.HIGHPRESSURESODIUM="HIGHPRESSURESODIUM",ZA.LED="LED",ZA.METALHALIDE="METALHALIDE",ZA.OLED="OLED",ZA.TUNGSTENFILAMENT="TUNGSTENFILAMENT",ZA.USERDEFINED="USERDEFINED",ZA.NOTDEFINED="NOTDEFINED";var BA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));BA.AXIS1="AXIS1",BA.AXIS2="AXIS2",BA.AXIS3="AXIS3";var zA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));zA.TYPE_A="TYPE_A",zA.TYPE_B="TYPE_B",zA.TYPE_C="TYPE_C",zA.NOTDEFINED="NOTDEFINED";var GA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));GA.COMPACTFLUORESCENT="COMPACTFLUORESCENT",GA.FLUORESCENT="FLUORESCENT",GA.HIGHPRESSUREMERCURY="HIGHPRESSUREMERCURY",GA.HIGHPRESSURESODIUM="HIGHPRESSURESODIUM",GA.LIGHTEMITTINGDIODE="LIGHTEMITTINGDIODE",GA.LOWPRESSURESODIUM="LOWPRESSURESODIUM",GA.LOWVOLTAGEHALOGEN="LOWVOLTAGEHALOGEN",GA.MAINVOLTAGEHALOGEN="MAINVOLTAGEHALOGEN",GA.METALHALIDE="METALHALIDE",GA.TUNGSTENFILAMENT="TUNGSTENFILAMENT",GA.NOTDEFINED="NOTDEFINED";var HA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));HA.POINTSOURCE="POINTSOURCE",HA.DIRECTIONSOURCE="DIRECTIONSOURCE",HA.SECURITYLIGHTING="SECURITYLIGHTING",HA.USERDEFINED="USERDEFINED",HA.NOTDEFINED="NOTDEFINED";var jA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));jA.LOAD_GROUP="LOAD_GROUP",jA.LOAD_CASE="LOAD_CASE",jA.LOAD_COMBINATION="LOAD_COMBINATION",jA.USERDEFINED="USERDEFINED",jA.NOTDEFINED="NOTDEFINED";var VA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));VA.LOGICALAND="LOGICALAND",VA.LOGICALOR="LOGICALOR",VA.LOGICALXOR="LOGICALXOR",VA.LOGICALNOTAND="LOGICALNOTAND",VA.LOGICALNOTOR="LOGICALNOTOR";var WA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));WA.ANCHORBOLT="ANCHORBOLT",WA.BOLT="BOLT",WA.DOWEL="DOWEL",WA.NAIL="NAIL",WA.NAILPLATE="NAILPLATE",WA.RIVET="RIVET",WA.SCREW="SCREW",WA.SHEARCONNECTOR="SHEARCONNECTOR",WA.STAPLE="STAPLE",WA.STUDSHEARCONNECTOR="STUDSHEARCONNECTOR",WA.COUPLER="COUPLER",WA.USERDEFINED="USERDEFINED",WA.NOTDEFINED="NOTDEFINED";var YA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));YA.AIRSTATION="AIRSTATION",YA.FEEDAIRUNIT="FEEDAIRUNIT",YA.OXYGENGENERATOR="OXYGENGENERATOR",YA.OXYGENPLANT="OXYGENPLANT",YA.VACUUMSTATION="VACUUMSTATION",YA.USERDEFINED="USERDEFINED",YA.NOTDEFINED="NOTDEFINED";var qA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));qA.BRACE="BRACE",qA.CHORD="CHORD",qA.COLLAR="COLLAR",qA.MEMBER="MEMBER",qA.MULLION="MULLION",qA.PLATE="PLATE",qA.POST="POST",qA.PURLIN="PURLIN",qA.RAFTER="RAFTER",qA.STRINGER="STRINGER",qA.STRUT="STRUT",qA.STUD="STUD",qA.STIFFENING_RIB="STIFFENING_RIB",qA.ARCH_SEGMENT="ARCH_SEGMENT",qA.SUSPENSION_CABLE="SUSPENSION_CABLE",qA.SUSPENDER="SUSPENDER",qA.STAY_CABLE="STAY_CABLE",qA.USERDEFINED="USERDEFINED",qA.NOTDEFINED="NOTDEFINED";var XA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));XA.BELTDRIVE="BELTDRIVE",XA.COUPLING="COUPLING",XA.DIRECTDRIVE="DIRECTDRIVE",XA.USERDEFINED="USERDEFINED",XA.NOTDEFINED="NOTDEFINED";var KA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));KA.NULL="NULL";var QA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));QA.PRODUCT="PRODUCT",QA.PROCESS="PROCESS",QA.CONTROL="CONTROL",QA.RESOURCE="RESOURCE",QA.ACTOR="ACTOR",QA.GROUP="GROUP",QA.PROJECT="PROJECT",QA.NOTDEFINED="NOTDEFINED";var JA=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));JA.CODECOMPLIANCE="CODECOMPLIANCE",JA.CODEWAIVER="CODEWAIVER",JA.DESIGNINTENT="DESIGNINTENT",JA.EXTERNAL="EXTERNAL",JA.HEALTHANDSAFETY="HEALTHANDSAFETY",JA.MERGECONFLICT="MERGECONFLICT",JA.MODELVIEW="MODELVIEW",JA.PARAMETER="PARAMETER",JA.REQUIREMENT="REQUIREMENT",JA.SPECIFICATION="SPECIFICATION",JA.TRIGGERCONDITION="TRIGGERCONDITION",JA.USERDEFINED="USERDEFINED",JA.NOTDEFINED="NOTDEFINED";var $A=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));$A.ASSIGNEE="ASSIGNEE",$A.ASSIGNOR="ASSIGNOR",$A.LESSEE="LESSEE",$A.LESSOR="LESSOR",$A.LETTINGAGENT="LETTINGAGENT",$A.OWNER="OWNER",$A.TENANT="TENANT",$A.USERDEFINED="USERDEFINED",$A.NOTDEFINED="NOTDEFINED";var eO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));eO.OPENING="OPENING",eO.RECESS="RECESS",eO.USERDEFINED="USERDEFINED",eO.NOTDEFINED="NOTDEFINED";var tO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));tO.AUDIOVISUALOUTLET="AUDIOVISUALOUTLET",tO.COMMUNICATIONSOUTLET="COMMUNICATIONSOUTLET",tO.POWEROUTLET="POWEROUTLET",tO.DATAOUTLET="DATAOUTLET",tO.TELEPHONEOUTLET="TELEPHONEOUTLET",tO.USERDEFINED="USERDEFINED",tO.NOTDEFINED="NOTDEFINED";var nO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));nO.USERDEFINED="USERDEFINED",nO.NOTDEFINED="NOTDEFINED";var rO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));rO.GRILL="GRILL",rO.LOUVER="LOUVER",rO.SCREEN="SCREEN",rO.USERDEFINED="USERDEFINED",rO.NOTDEFINED="NOTDEFINED";var iO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));iO.ACCESS="ACCESS",iO.BUILDING="BUILDING",iO.WORK="WORK",iO.USERDEFINED="USERDEFINED",iO.NOTDEFINED="NOTDEFINED";var aO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));aO.PHYSICAL="PHYSICAL",aO.VIRTUAL="VIRTUAL",aO.NOTDEFINED="NOTDEFINED";var sO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));sO.CAST_IN_PLACE="CAST_IN_PLACE",sO.COMPOSITE="COMPOSITE",sO.PRECAST_CONCRETE="PRECAST_CONCRETE",sO.PREFAB_STEEL="PREFAB_STEEL",sO.USERDEFINED="USERDEFINED",sO.NOTDEFINED="NOTDEFINED";var oO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));oO.BORED="BORED",oO.DRIVEN="DRIVEN",oO.JETGROUTING="JETGROUTING",oO.COHESION="COHESION",oO.FRICTION="FRICTION",oO.SUPPORT="SUPPORT",oO.USERDEFINED="USERDEFINED",oO.NOTDEFINED="NOTDEFINED";var uO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));uO.BEND="BEND",uO.CONNECTOR="CONNECTOR",uO.ENTRY="ENTRY",uO.EXIT="EXIT",uO.JUNCTION="JUNCTION",uO.OBSTRUCTION="OBSTRUCTION",uO.TRANSITION="TRANSITION",uO.USERDEFINED="USERDEFINED",uO.NOTDEFINED="NOTDEFINED";var lO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));lO.CULVERT="CULVERT",lO.FLEXIBLESEGMENT="FLEXIBLESEGMENT",lO.RIGIDSEGMENT="RIGIDSEGMENT",lO.GUTTER="GUTTER",lO.SPOOL="SPOOL",lO.USERDEFINED="USERDEFINED",lO.NOTDEFINED="NOTDEFINED";var cO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));cO.CURTAIN_PANEL="CURTAIN_PANEL",cO.SHEET="SHEET",cO.FLANGE_PLATE="FLANGE_PLATE",cO.WEB_PLATE="WEB_PLATE",cO.STIFFENER_PLATE="STIFFENER_PLATE",cO.GUSSET_PLATE="GUSSET_PLATE",cO.COVER_PLATE="COVER_PLATE",cO.SPLICE_PLATE="SPLICE_PLATE",cO.BASE_PLATE="BASE_PLATE",cO.USERDEFINED="USERDEFINED",cO.NOTDEFINED="NOTDEFINED";var hO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));hO.CURVE3D="CURVE3D",hO.PCURVE_S1="PCURVE_S1",hO.PCURVE_S2="PCURVE_S2";var pO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));pO.ADVICE_CAUTION="ADVICE_CAUTION",pO.ADVICE_NOTE="ADVICE_NOTE",pO.ADVICE_WARNING="ADVICE_WARNING",pO.CALIBRATION="CALIBRATION",pO.DIAGNOSTIC="DIAGNOSTIC",pO.SHUTDOWN="SHUTDOWN",pO.STARTUP="STARTUP",pO.USERDEFINED="USERDEFINED",pO.NOTDEFINED="NOTDEFINED";var fO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));fO.CURVE="CURVE",fO.AREA="AREA";var dO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));dO.CHANGEORDER="CHANGEORDER",dO.MAINTENANCEWORKORDER="MAINTENANCEWORKORDER",dO.MOVEORDER="MOVEORDER",dO.PURCHASEORDER="PURCHASEORDER",dO.WORKORDER="WORKORDER",dO.USERDEFINED="USERDEFINED",dO.NOTDEFINED="NOTDEFINED";var vO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));vO.PROJECTED_LENGTH="PROJECTED_LENGTH",vO.TRUE_LENGTH="TRUE_LENGTH";var mO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));mO.BLISTER="BLISTER",mO.DEVIATOR="DEVIATOR",mO.USERDEFINED="USERDEFINED",mO.NOTDEFINED="NOTDEFINED";var yO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));yO.PSET_TYPEDRIVENONLY="PSET_TYPEDRIVENONLY",yO.PSET_TYPEDRIVENOVERRIDE="PSET_TYPEDRIVENOVERRIDE",yO.PSET_OCCURRENCEDRIVEN="PSET_OCCURRENCEDRIVEN",yO.PSET_PERFORMANCEDRIVEN="PSET_PERFORMANCEDRIVEN",yO.QTO_TYPEDRIVENONLY="QTO_TYPEDRIVENONLY",yO.QTO_TYPEDRIVENOVERRIDE="QTO_TYPEDRIVENOVERRIDE",yO.QTO_OCCURRENCEDRIVEN="QTO_OCCURRENCEDRIVEN",yO.NOTDEFINED="NOTDEFINED";var gO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));gO.ELECTRONIC="ELECTRONIC",gO.ELECTROMAGNETIC="ELECTROMAGNETIC",gO.RESIDUALCURRENT="RESIDUALCURRENT",gO.THERMAL="THERMAL",gO.USERDEFINED="USERDEFINED",gO.NOTDEFINED="NOTDEFINED";var _O=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));_O.CIRCUITBREAKER="CIRCUITBREAKER",_O.EARTHLEAKAGECIRCUITBREAKER="EARTHLEAKAGECIRCUITBREAKER",_O.EARTHINGSWITCH="EARTHINGSWITCH",_O.FUSEDISCONNECTOR="FUSEDISCONNECTOR",_O.RESIDUALCURRENTCIRCUITBREAKER="RESIDUALCURRENTCIRCUITBREAKER",_O.RESIDUALCURRENTSWITCH="RESIDUALCURRENTSWITCH",_O.VARISTOR="VARISTOR",_O.USERDEFINED="USERDEFINED",_O.NOTDEFINED="NOTDEFINED";var TO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));TO.CIRCULATOR="CIRCULATOR",TO.ENDSUCTION="ENDSUCTION",TO.SPLITCASE="SPLITCASE",TO.SUBMERSIBLEPUMP="SUBMERSIBLEPUMP",TO.SUMPPUMP="SUMPPUMP",TO.VERTICALINLINE="VERTICALINLINE",TO.VERTICALTURBINE="VERTICALTURBINE",TO.USERDEFINED="USERDEFINED",TO.NOTDEFINED="NOTDEFINED";var EO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));EO.HANDRAIL="HANDRAIL",EO.GUARDRAIL="GUARDRAIL",EO.BALUSTRADE="BALUSTRADE",EO.USERDEFINED="USERDEFINED",EO.NOTDEFINED="NOTDEFINED";var xO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));xO.STRAIGHT="STRAIGHT",xO.SPIRAL="SPIRAL",xO.USERDEFINED="USERDEFINED",xO.NOTDEFINED="NOTDEFINED";var bO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));bO.STRAIGHT_RUN_RAMP="STRAIGHT_RUN_RAMP",bO.TWO_STRAIGHT_RUN_RAMP="TWO_STRAIGHT_RUN_RAMP",bO.QUARTER_TURN_RAMP="QUARTER_TURN_RAMP",bO.TWO_QUARTER_TURN_RAMP="TWO_QUARTER_TURN_RAMP",bO.HALF_TURN_RAMP="HALF_TURN_RAMP",bO.SPIRAL_RAMP="SPIRAL_RAMP",bO.USERDEFINED="USERDEFINED",bO.NOTDEFINED="NOTDEFINED";var IO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));IO.DAILY="DAILY",IO.WEEKLY="WEEKLY",IO.MONTHLY_BY_DAY_OF_MONTH="MONTHLY_BY_DAY_OF_MONTH",IO.MONTHLY_BY_POSITION="MONTHLY_BY_POSITION",IO.BY_DAY_COUNT="BY_DAY_COUNT",IO.BY_WEEKDAY_COUNT="BY_WEEKDAY_COUNT",IO.YEARLY_BY_DAY_OF_MONTH="YEARLY_BY_DAY_OF_MONTH",IO.YEARLY_BY_POSITION="YEARLY_BY_POSITION";var wO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));wO.KILOPOINT="KILOPOINT",wO.MILEPOINT="MILEPOINT",wO.STATION="STATION",wO.USERDEFINED="USERDEFINED",wO.NOTDEFINED="NOTDEFINED";var kO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));kO.BLINN="BLINN",kO.FLAT="FLAT",kO.GLASS="GLASS",kO.MATT="MATT",kO.METAL="METAL",kO.MIRROR="MIRROR",kO.PHONG="PHONG",kO.PLASTIC="PLASTIC",kO.STRAUSS="STRAUSS",kO.NOTDEFINED="NOTDEFINED";var SO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));SO.MAIN="MAIN",SO.SHEAR="SHEAR",SO.LIGATURE="LIGATURE",SO.STUD="STUD",SO.PUNCHING="PUNCHING",SO.EDGE="EDGE",SO.RING="RING",SO.ANCHORING="ANCHORING",SO.USERDEFINED="USERDEFINED",SO.NOTDEFINED="NOTDEFINED";var RO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));RO.PLAIN="PLAIN",RO.TEXTURED="TEXTURED";var CO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));CO.ANCHORING="ANCHORING",CO.EDGE="EDGE",CO.LIGATURE="LIGATURE",CO.MAIN="MAIN",CO.PUNCHING="PUNCHING",CO.RING="RING",CO.SHEAR="SHEAR",CO.STUD="STUD",CO.SPACEBAR="SPACEBAR",CO.USERDEFINED="USERDEFINED",CO.NOTDEFINED="NOTDEFINED";var DO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));DO.USERDEFINED="USERDEFINED",DO.NOTDEFINED="NOTDEFINED";var AO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));AO.SUPPLIER="SUPPLIER",AO.MANUFACTURER="MANUFACTURER",AO.CONTRACTOR="CONTRACTOR",AO.SUBCONTRACTOR="SUBCONTRACTOR",AO.ARCHITECT="ARCHITECT",AO.STRUCTURALENGINEER="STRUCTURALENGINEER",AO.COSTENGINEER="COSTENGINEER",AO.CLIENT="CLIENT",AO.BUILDINGOWNER="BUILDINGOWNER",AO.BUILDINGOPERATOR="BUILDINGOPERATOR",AO.MECHANICALENGINEER="MECHANICALENGINEER",AO.ELECTRICALENGINEER="ELECTRICALENGINEER",AO.PROJECTMANAGER="PROJECTMANAGER",AO.FACILITIESMANAGER="FACILITIESMANAGER",AO.CIVILENGINEER="CIVILENGINEER",AO.COMMISSIONINGENGINEER="COMMISSIONINGENGINEER",AO.ENGINEER="ENGINEER",AO.OWNER="OWNER",AO.CONSULTANT="CONSULTANT",AO.CONSTRUCTIONMANAGER="CONSTRUCTIONMANAGER",AO.FIELDCONSTRUCTIONMANAGER="FIELDCONSTRUCTIONMANAGER",AO.RESELLER="RESELLER",AO.USERDEFINED="USERDEFINED";var OO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));OO.FLAT_ROOF="FLAT_ROOF",OO.SHED_ROOF="SHED_ROOF",OO.GABLE_ROOF="GABLE_ROOF",OO.HIP_ROOF="HIP_ROOF",OO.HIPPED_GABLE_ROOF="HIPPED_GABLE_ROOF",OO.GAMBREL_ROOF="GAMBREL_ROOF",OO.MANSARD_ROOF="MANSARD_ROOF",OO.BARREL_ROOF="BARREL_ROOF",OO.RAINBOW_ROOF="RAINBOW_ROOF",OO.BUTTERFLY_ROOF="BUTTERFLY_ROOF",OO.PAVILION_ROOF="PAVILION_ROOF",OO.DOME_ROOF="DOME_ROOF",OO.FREEFORM="FREEFORM",OO.USERDEFINED="USERDEFINED",OO.NOTDEFINED="NOTDEFINED";var NO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));NO.EXA="EXA",NO.PETA="PETA",NO.TERA="TERA",NO.GIGA="GIGA",NO.MEGA="MEGA",NO.KILO="KILO",NO.HECTO="HECTO",NO.DECA="DECA",NO.DECI="DECI",NO.CENTI="CENTI",NO.MILLI="MILLI",NO.MICRO="MICRO",NO.NANO="NANO",NO.PICO="PICO",NO.FEMTO="FEMTO",NO.ATTO="ATTO";var MO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));MO.AMPERE="AMPERE",MO.BECQUEREL="BECQUEREL",MO.CANDELA="CANDELA",MO.COULOMB="COULOMB",MO.CUBIC_METRE="CUBIC_METRE",MO.DEGREE_CELSIUS="DEGREE_CELSIUS",MO.FARAD="FARAD",MO.GRAM="GRAM",MO.GRAY="GRAY",MO.HENRY="HENRY",MO.HERTZ="HERTZ",MO.JOULE="JOULE",MO.KELVIN="KELVIN",MO.LUMEN="LUMEN",MO.LUX="LUX",MO.METRE="METRE",MO.MOLE="MOLE",MO.NEWTON="NEWTON",MO.OHM="OHM",MO.PASCAL="PASCAL",MO.RADIAN="RADIAN",MO.SECOND="SECOND",MO.SIEMENS="SIEMENS",MO.SIEVERT="SIEVERT",MO.SQUARE_METRE="SQUARE_METRE",MO.STERADIAN="STERADIAN",MO.TESLA="TESLA",MO.VOLT="VOLT",MO.WATT="WATT",MO.WEBER="WEBER";var PO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));PO.BATH="BATH",PO.BIDET="BIDET",PO.CISTERN="CISTERN",PO.SHOWER="SHOWER",PO.SINK="SINK",PO.SANITARYFOUNTAIN="SANITARYFOUNTAIN",PO.TOILETPAN="TOILETPAN",PO.URINAL="URINAL",PO.WASHHANDBASIN="WASHHANDBASIN",PO.WCSEAT="WCSEAT",PO.USERDEFINED="USERDEFINED",PO.NOTDEFINED="NOTDEFINED";var FO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));FO.UNIFORM="UNIFORM",FO.TAPERED="TAPERED";var LO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));LO.COSENSOR="COSENSOR",LO.CO2SENSOR="CO2SENSOR",LO.CONDUCTANCESENSOR="CONDUCTANCESENSOR",LO.CONTACTSENSOR="CONTACTSENSOR",LO.FIRESENSOR="FIRESENSOR",LO.FLOWSENSOR="FLOWSENSOR",LO.FROSTSENSOR="FROSTSENSOR",LO.GASSENSOR="GASSENSOR",LO.HEATSENSOR="HEATSENSOR",LO.HUMIDITYSENSOR="HUMIDITYSENSOR",LO.IDENTIFIERSENSOR="IDENTIFIERSENSOR",LO.IONCONCENTRATIONSENSOR="IONCONCENTRATIONSENSOR",LO.LEVELSENSOR="LEVELSENSOR",LO.LIGHTSENSOR="LIGHTSENSOR",LO.MOISTURESENSOR="MOISTURESENSOR",LO.MOVEMENTSENSOR="MOVEMENTSENSOR",LO.PHSENSOR="PHSENSOR",LO.PRESSURESENSOR="PRESSURESENSOR",LO.RADIATIONSENSOR="RADIATIONSENSOR",LO.RADIOACTIVITYSENSOR="RADIOACTIVITYSENSOR",LO.SMOKESENSOR="SMOKESENSOR",LO.SOUNDSENSOR="SOUNDSENSOR",LO.TEMPERATURESENSOR="TEMPERATURESENSOR",LO.WINDSENSOR="WINDSENSOR",LO.USERDEFINED="USERDEFINED",LO.NOTDEFINED="NOTDEFINED";var UO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));UO.START_START="START_START",UO.START_FINISH="START_FINISH",UO.FINISH_START="FINISH_START",UO.FINISH_FINISH="FINISH_FINISH",UO.USERDEFINED="USERDEFINED",UO.NOTDEFINED="NOTDEFINED";var ZO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));ZO.JALOUSIE="JALOUSIE",ZO.SHUTTER="SHUTTER",ZO.AWNING="AWNING",ZO.USERDEFINED="USERDEFINED",ZO.NOTDEFINED="NOTDEFINED";var BO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));BO.P_SINGLEVALUE="P_SINGLEVALUE",BO.P_ENUMERATEDVALUE="P_ENUMERATEDVALUE",BO.P_BOUNDEDVALUE="P_BOUNDEDVALUE",BO.P_LISTVALUE="P_LISTVALUE",BO.P_TABLEVALUE="P_TABLEVALUE",BO.P_REFERENCEVALUE="P_REFERENCEVALUE",BO.Q_LENGTH="Q_LENGTH",BO.Q_AREA="Q_AREA",BO.Q_VOLUME="Q_VOLUME",BO.Q_COUNT="Q_COUNT",BO.Q_WEIGHT="Q_WEIGHT",BO.Q_TIME="Q_TIME";var zO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));zO.FLOOR="FLOOR",zO.ROOF="ROOF",zO.LANDING="LANDING",zO.BASESLAB="BASESLAB",zO.APPROACH_SLAB="APPROACH_SLAB",zO.PAVING="PAVING",zO.WEARING="WEARING",zO.SIDEWALK="SIDEWALK",zO.USERDEFINED="USERDEFINED",zO.NOTDEFINED="NOTDEFINED";var GO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));GO.SOLARCOLLECTOR="SOLARCOLLECTOR",GO.SOLARPANEL="SOLARPANEL",GO.USERDEFINED="USERDEFINED",GO.NOTDEFINED="NOTDEFINED";var HO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));HO.CONVECTOR="CONVECTOR",HO.RADIATOR="RADIATOR",HO.USERDEFINED="USERDEFINED",HO.NOTDEFINED="NOTDEFINED";var jO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));jO.SPACE="SPACE",jO.PARKING="PARKING",jO.GFA="GFA",jO.INTERNAL="INTERNAL",jO.EXTERNAL="EXTERNAL",jO.USERDEFINED="USERDEFINED",jO.NOTDEFINED="NOTDEFINED";var VO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));VO.CONSTRUCTION="CONSTRUCTION",VO.FIRESAFETY="FIRESAFETY",VO.LIGHTING="LIGHTING",VO.OCCUPANCY="OCCUPANCY",VO.SECURITY="SECURITY",VO.THERMAL="THERMAL",VO.TRANSPORT="TRANSPORT",VO.VENTILATION="VENTILATION",VO.USERDEFINED="USERDEFINED",VO.NOTDEFINED="NOTDEFINED";var WO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));WO.BIRDCAGE="BIRDCAGE",WO.COWL="COWL",WO.RAINWATERHOPPER="RAINWATERHOPPER",WO.USERDEFINED="USERDEFINED",WO.NOTDEFINED="NOTDEFINED";var YO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));YO.STRAIGHT="STRAIGHT",YO.WINDER="WINDER",YO.SPIRAL="SPIRAL",YO.CURVED="CURVED",YO.FREEFORM="FREEFORM",YO.USERDEFINED="USERDEFINED",YO.NOTDEFINED="NOTDEFINED";var qO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));qO.STRAIGHT_RUN_STAIR="STRAIGHT_RUN_STAIR",qO.TWO_STRAIGHT_RUN_STAIR="TWO_STRAIGHT_RUN_STAIR",qO.QUARTER_WINDING_STAIR="QUARTER_WINDING_STAIR",qO.QUARTER_TURN_STAIR="QUARTER_TURN_STAIR",qO.HALF_WINDING_STAIR="HALF_WINDING_STAIR",qO.HALF_TURN_STAIR="HALF_TURN_STAIR",qO.TWO_QUARTER_WINDING_STAIR="TWO_QUARTER_WINDING_STAIR",qO.TWO_QUARTER_TURN_STAIR="TWO_QUARTER_TURN_STAIR",qO.THREE_QUARTER_WINDING_STAIR="THREE_QUARTER_WINDING_STAIR",qO.THREE_QUARTER_TURN_STAIR="THREE_QUARTER_TURN_STAIR",qO.SPIRAL_STAIR="SPIRAL_STAIR",qO.DOUBLE_RETURN_STAIR="DOUBLE_RETURN_STAIR",qO.CURVED_RUN_STAIR="CURVED_RUN_STAIR",qO.TWO_CURVED_RUN_STAIR="TWO_CURVED_RUN_STAIR",qO.USERDEFINED="USERDEFINED",qO.NOTDEFINED="NOTDEFINED";var XO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));XO.READWRITE="READWRITE",XO.READONLY="READONLY",XO.LOCKED="LOCKED",XO.READWRITELOCKED="READWRITELOCKED",XO.READONLYLOCKED="READONLYLOCKED";var KO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));KO.CONST="CONST",KO.LINEAR="LINEAR",KO.POLYGONAL="POLYGONAL",KO.EQUIDISTANT="EQUIDISTANT",KO.SINUS="SINUS",KO.PARABOLA="PARABOLA",KO.DISCRETE="DISCRETE",KO.USERDEFINED="USERDEFINED",KO.NOTDEFINED="NOTDEFINED";var QO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));QO.RIGID_JOINED_MEMBER="RIGID_JOINED_MEMBER",QO.PIN_JOINED_MEMBER="PIN_JOINED_MEMBER",QO.CABLE="CABLE",QO.TENSION_MEMBER="TENSION_MEMBER",QO.COMPRESSION_MEMBER="COMPRESSION_MEMBER",QO.USERDEFINED="USERDEFINED",QO.NOTDEFINED="NOTDEFINED";var JO=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));JO.CONST="CONST",JO.BILINEAR="BILINEAR",JO.DISCRETE="DISCRETE",JO.ISOCONTOUR="ISOCONTOUR",JO.USERDEFINED="USERDEFINED",JO.NOTDEFINED="NOTDEFINED";var $O=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));$O.BENDING_ELEMENT="BENDING_ELEMENT",$O.MEMBRANE_ELEMENT="MEMBRANE_ELEMENT",$O.SHELL="SHELL",$O.USERDEFINED="USERDEFINED",$O.NOTDEFINED="NOTDEFINED";var eN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));eN.PURCHASE="PURCHASE",eN.WORK="WORK",eN.USERDEFINED="USERDEFINED",eN.NOTDEFINED="NOTDEFINED";var tN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));tN.MARK="MARK",tN.TAG="TAG",tN.TREATMENT="TREATMENT",tN.DEFECT="DEFECT",tN.USERDEFINED="USERDEFINED",tN.NOTDEFINED="NOTDEFINED";var nN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));nN.POSITIVE="POSITIVE",nN.NEGATIVE="NEGATIVE",nN.BOTH="BOTH";var rN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));rN.CONTACTOR="CONTACTOR",rN.DIMMERSWITCH="DIMMERSWITCH",rN.EMERGENCYSTOP="EMERGENCYSTOP",rN.KEYPAD="KEYPAD",rN.MOMENTARYSWITCH="MOMENTARYSWITCH",rN.SELECTORSWITCH="SELECTORSWITCH",rN.STARTER="STARTER",rN.SWITCHDISCONNECTOR="SWITCHDISCONNECTOR",rN.TOGGLESWITCH="TOGGLESWITCH",rN.USERDEFINED="USERDEFINED",rN.NOTDEFINED="NOTDEFINED";var iN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));iN.PANEL="PANEL",iN.WORKSURFACE="WORKSURFACE",iN.USERDEFINED="USERDEFINED",iN.NOTDEFINED="NOTDEFINED";var aN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));aN.BASIN="BASIN",aN.BREAKPRESSURE="BREAKPRESSURE",aN.EXPANSION="EXPANSION",aN.FEEDANDEXPANSION="FEEDANDEXPANSION",aN.PRESSUREVESSEL="PRESSUREVESSEL",aN.STORAGE="STORAGE",aN.VESSEL="VESSEL",aN.USERDEFINED="USERDEFINED",aN.NOTDEFINED="NOTDEFINED";var sN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));sN.ELAPSEDTIME="ELAPSEDTIME",sN.WORKTIME="WORKTIME",sN.NOTDEFINED="NOTDEFINED";var oN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));oN.ATTENDANCE="ATTENDANCE",oN.CONSTRUCTION="CONSTRUCTION",oN.DEMOLITION="DEMOLITION",oN.DISMANTLE="DISMANTLE",oN.DISPOSAL="DISPOSAL",oN.INSTALLATION="INSTALLATION",oN.LOGISTIC="LOGISTIC",oN.MAINTENANCE="MAINTENANCE",oN.MOVE="MOVE",oN.OPERATION="OPERATION",oN.REMOVAL="REMOVAL",oN.RENOVATION="RENOVATION",oN.USERDEFINED="USERDEFINED",oN.NOTDEFINED="NOTDEFINED";var uN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));uN.COUPLER="COUPLER",uN.FIXED_END="FIXED_END",uN.TENSIONING_END="TENSIONING_END",uN.USERDEFINED="USERDEFINED",uN.NOTDEFINED="NOTDEFINED";var lN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));lN.DUCT="DUCT",lN.COUPLER="COUPLER",lN.GROUTING_DUCT="GROUTING_DUCT",lN.TRUMPET="TRUMPET",lN.DIABOLO="DIABOLO",lN.USERDEFINED="USERDEFINED",lN.NOTDEFINED="NOTDEFINED";var cN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));cN.BAR="BAR",cN.COATED="COATED",cN.STRAND="STRAND",cN.WIRE="WIRE",cN.USERDEFINED="USERDEFINED",cN.NOTDEFINED="NOTDEFINED";var hN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));hN.LEFT="LEFT",hN.RIGHT="RIGHT",hN.UP="UP",hN.DOWN="DOWN";var pN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));pN.CONTINUOUS="CONTINUOUS",pN.DISCRETE="DISCRETE",pN.DISCRETEBINARY="DISCRETEBINARY",pN.PIECEWISEBINARY="PIECEWISEBINARY",pN.PIECEWISECONSTANT="PIECEWISECONSTANT",pN.PIECEWISECONTINUOUS="PIECEWISECONTINUOUS",pN.NOTDEFINED="NOTDEFINED";var fN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));fN.CURRENT="CURRENT",fN.FREQUENCY="FREQUENCY",fN.INVERTER="INVERTER",fN.RECTIFIER="RECTIFIER",fN.VOLTAGE="VOLTAGE",fN.USERDEFINED="USERDEFINED",fN.NOTDEFINED="NOTDEFINED";var dN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));dN.DISCONTINUOUS="DISCONTINUOUS",dN.CONTINUOUS="CONTINUOUS",dN.CONTSAMEGRADIENT="CONTSAMEGRADIENT",dN.CONTSAMEGRADIENTSAMECURVATURE="CONTSAMEGRADIENTSAMECURVATURE";var vN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));vN.BIQUADRATICPARABOLA="BIQUADRATICPARABOLA",vN.BLOSSCURVE="BLOSSCURVE",vN.CLOTHOIDCURVE="CLOTHOIDCURVE",vN.COSINECURVE="COSINECURVE",vN.CUBICPARABOLA="CUBICPARABOLA",vN.SINECURVE="SINECURVE";var mN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));mN.ELEVATOR="ELEVATOR",mN.ESCALATOR="ESCALATOR",mN.MOVINGWALKWAY="MOVINGWALKWAY",mN.CRANEWAY="CRANEWAY",mN.LIFTINGGEAR="LIFTINGGEAR",mN.USERDEFINED="USERDEFINED",mN.NOTDEFINED="NOTDEFINED";var yN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));yN.CARTESIAN="CARTESIAN",yN.PARAMETER="PARAMETER",yN.UNSPECIFIED="UNSPECIFIED";var gN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));gN.FINNED="FINNED",gN.USERDEFINED="USERDEFINED",gN.NOTDEFINED="NOTDEFINED";var _N=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));_N.ABSORBEDDOSEUNIT="ABSORBEDDOSEUNIT",_N.AMOUNTOFSUBSTANCEUNIT="AMOUNTOFSUBSTANCEUNIT",_N.AREAUNIT="AREAUNIT",_N.DOSEEQUIVALENTUNIT="DOSEEQUIVALENTUNIT",_N.ELECTRICCAPACITANCEUNIT="ELECTRICCAPACITANCEUNIT",_N.ELECTRICCHARGEUNIT="ELECTRICCHARGEUNIT",_N.ELECTRICCONDUCTANCEUNIT="ELECTRICCONDUCTANCEUNIT",_N.ELECTRICCURRENTUNIT="ELECTRICCURRENTUNIT",_N.ELECTRICRESISTANCEUNIT="ELECTRICRESISTANCEUNIT",_N.ELECTRICVOLTAGEUNIT="ELECTRICVOLTAGEUNIT",_N.ENERGYUNIT="ENERGYUNIT",_N.FORCEUNIT="FORCEUNIT",_N.FREQUENCYUNIT="FREQUENCYUNIT",_N.ILLUMINANCEUNIT="ILLUMINANCEUNIT",_N.INDUCTANCEUNIT="INDUCTANCEUNIT",_N.LENGTHUNIT="LENGTHUNIT",_N.LUMINOUSFLUXUNIT="LUMINOUSFLUXUNIT",_N.LUMINOUSINTENSITYUNIT="LUMINOUSINTENSITYUNIT",_N.MAGNETICFLUXDENSITYUNIT="MAGNETICFLUXDENSITYUNIT",_N.MAGNETICFLUXUNIT="MAGNETICFLUXUNIT",_N.MASSUNIT="MASSUNIT",_N.PLANEANGLEUNIT="PLANEANGLEUNIT",_N.POWERUNIT="POWERUNIT",_N.PRESSUREUNIT="PRESSUREUNIT",_N.RADIOACTIVITYUNIT="RADIOACTIVITYUNIT",_N.SOLIDANGLEUNIT="SOLIDANGLEUNIT",_N.THERMODYNAMICTEMPERATUREUNIT="THERMODYNAMICTEMPERATUREUNIT",_N.TIMEUNIT="TIMEUNIT",_N.VOLUMEUNIT="VOLUMEUNIT",_N.USERDEFINED="USERDEFINED";var TN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));TN.ALARMPANEL="ALARMPANEL",TN.CONTROLPANEL="CONTROLPANEL",TN.GASDETECTIONPANEL="GASDETECTIONPANEL",TN.INDICATORPANEL="INDICATORPANEL",TN.MIMICPANEL="MIMICPANEL",TN.HUMIDISTAT="HUMIDISTAT",TN.THERMOSTAT="THERMOSTAT",TN.WEATHERSTATION="WEATHERSTATION",TN.USERDEFINED="USERDEFINED",TN.NOTDEFINED="NOTDEFINED";var EN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));EN.AIRHANDLER="AIRHANDLER",EN.AIRCONDITIONINGUNIT="AIRCONDITIONINGUNIT",EN.DEHUMIDIFIER="DEHUMIDIFIER",EN.SPLITSYSTEM="SPLITSYSTEM",EN.ROOFTOPUNIT="ROOFTOPUNIT",EN.USERDEFINED="USERDEFINED",EN.NOTDEFINED="NOTDEFINED";var xN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));xN.AIRRELEASE="AIRRELEASE",xN.ANTIVACUUM="ANTIVACUUM",xN.CHANGEOVER="CHANGEOVER",xN.CHECK="CHECK",xN.COMMISSIONING="COMMISSIONING",xN.DIVERTING="DIVERTING",xN.DRAWOFFCOCK="DRAWOFFCOCK",xN.DOUBLECHECK="DOUBLECHECK",xN.DOUBLEREGULATING="DOUBLEREGULATING",xN.FAUCET="FAUCET",xN.FLUSHING="FLUSHING",xN.GASCOCK="GASCOCK",xN.GASTAP="GASTAP",xN.ISOLATING="ISOLATING",xN.MIXING="MIXING",xN.PRESSUREREDUCING="PRESSUREREDUCING",xN.PRESSURERELIEF="PRESSURERELIEF",xN.REGULATING="REGULATING",xN.SAFETYCUTOFF="SAFETYCUTOFF",xN.STEAMTRAP="STEAMTRAP",xN.STOPCOCK="STOPCOCK",xN.USERDEFINED="USERDEFINED",xN.NOTDEFINED="NOTDEFINED";var bN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));bN.BENDING_YIELD="BENDING_YIELD",bN.SHEAR_YIELD="SHEAR_YIELD",bN.AXIAL_YIELD="AXIAL_YIELD",bN.FRICTION="FRICTION",bN.VISCOUS="VISCOUS",bN.RUBBER="RUBBER",bN.USERDEFINED="USERDEFINED",bN.NOTDEFINED="NOTDEFINED";var IN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));IN.COMPRESSION="COMPRESSION",IN.SPRING="SPRING",IN.BASE="BASE",IN.USERDEFINED="USERDEFINED",IN.NOTDEFINED="NOTDEFINED";var wN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));wN.CUTOUT="CUTOUT",wN.NOTCH="NOTCH",wN.HOLE="HOLE",wN.MITER="MITER",wN.CHAMFER="CHAMFER",wN.EDGE="EDGE",wN.USERDEFINED="USERDEFINED",wN.NOTDEFINED="NOTDEFINED";var kN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));kN.MOVABLE="MOVABLE",kN.PARAPET="PARAPET",kN.PARTITIONING="PARTITIONING",kN.PLUMBINGWALL="PLUMBINGWALL",kN.SHEAR="SHEAR",kN.SOLIDWALL="SOLIDWALL",kN.STANDARD="STANDARD",kN.POLYGONAL="POLYGONAL",kN.ELEMENTEDWALL="ELEMENTEDWALL",kN.RETAININGWALL="RETAININGWALL",kN.USERDEFINED="USERDEFINED",kN.NOTDEFINED="NOTDEFINED";var SN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));SN.FLOORTRAP="FLOORTRAP",SN.FLOORWASTE="FLOORWASTE",SN.GULLYSUMP="GULLYSUMP",SN.GULLYTRAP="GULLYTRAP",SN.ROOFDRAIN="ROOFDRAIN",SN.WASTEDISPOSALUNIT="WASTEDISPOSALUNIT",SN.WASTETRAP="WASTETRAP",SN.USERDEFINED="USERDEFINED",SN.NOTDEFINED="NOTDEFINED";var RN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));RN.SIDEHUNGRIGHTHAND="SIDEHUNGRIGHTHAND",RN.SIDEHUNGLEFTHAND="SIDEHUNGLEFTHAND",RN.TILTANDTURNRIGHTHAND="TILTANDTURNRIGHTHAND",RN.TILTANDTURNLEFTHAND="TILTANDTURNLEFTHAND",RN.TOPHUNG="TOPHUNG",RN.BOTTOMHUNG="BOTTOMHUNG",RN.PIVOTHORIZONTAL="PIVOTHORIZONTAL",RN.PIVOTVERTICAL="PIVOTVERTICAL",RN.SLIDINGHORIZONTAL="SLIDINGHORIZONTAL",RN.SLIDINGVERTICAL="SLIDINGVERTICAL",RN.REMOVABLECASEMENT="REMOVABLECASEMENT",RN.FIXEDCASEMENT="FIXEDCASEMENT",RN.OTHEROPERATION="OTHEROPERATION",RN.NOTDEFINED="NOTDEFINED";var CN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));CN.LEFT="LEFT",CN.MIDDLE="MIDDLE",CN.RIGHT="RIGHT",CN.BOTTOM="BOTTOM",CN.TOP="TOP",CN.NOTDEFINED="NOTDEFINED";var DN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));DN.ALUMINIUM="ALUMINIUM",DN.HIGH_GRADE_STEEL="HIGH_GRADE_STEEL",DN.STEEL="STEEL",DN.WOOD="WOOD",DN.ALUMINIUM_WOOD="ALUMINIUM_WOOD",DN.PLASTIC="PLASTIC",DN.OTHER_CONSTRUCTION="OTHER_CONSTRUCTION",DN.NOTDEFINED="NOTDEFINED";var AN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));AN.SINGLE_PANEL="SINGLE_PANEL",AN.DOUBLE_PANEL_VERTICAL="DOUBLE_PANEL_VERTICAL",AN.DOUBLE_PANEL_HORIZONTAL="DOUBLE_PANEL_HORIZONTAL",AN.TRIPLE_PANEL_VERTICAL="TRIPLE_PANEL_VERTICAL",AN.TRIPLE_PANEL_BOTTOM="TRIPLE_PANEL_BOTTOM",AN.TRIPLE_PANEL_TOP="TRIPLE_PANEL_TOP",AN.TRIPLE_PANEL_LEFT="TRIPLE_PANEL_LEFT",AN.TRIPLE_PANEL_RIGHT="TRIPLE_PANEL_RIGHT",AN.TRIPLE_PANEL_HORIZONTAL="TRIPLE_PANEL_HORIZONTAL",AN.USERDEFINED="USERDEFINED",AN.NOTDEFINED="NOTDEFINED";var ON=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));ON.WINDOW="WINDOW",ON.SKYLIGHT="SKYLIGHT",ON.LIGHTDOME="LIGHTDOME",ON.USERDEFINED="USERDEFINED",ON.NOTDEFINED="NOTDEFINED";var NN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));NN.SINGLE_PANEL="SINGLE_PANEL",NN.DOUBLE_PANEL_VERTICAL="DOUBLE_PANEL_VERTICAL",NN.DOUBLE_PANEL_HORIZONTAL="DOUBLE_PANEL_HORIZONTAL",NN.TRIPLE_PANEL_VERTICAL="TRIPLE_PANEL_VERTICAL",NN.TRIPLE_PANEL_BOTTOM="TRIPLE_PANEL_BOTTOM",NN.TRIPLE_PANEL_TOP="TRIPLE_PANEL_TOP",NN.TRIPLE_PANEL_LEFT="TRIPLE_PANEL_LEFT",NN.TRIPLE_PANEL_RIGHT="TRIPLE_PANEL_RIGHT",NN.TRIPLE_PANEL_HORIZONTAL="TRIPLE_PANEL_HORIZONTAL",NN.USERDEFINED="USERDEFINED",NN.NOTDEFINED="NOTDEFINED";var MN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));MN.FIRSTSHIFT="FIRSTSHIFT",MN.SECONDSHIFT="SECONDSHIFT",MN.THIRDSHIFT="THIRDSHIFT",MN.USERDEFINED="USERDEFINED",MN.NOTDEFINED="NOTDEFINED";var PN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));PN.ACTUAL="ACTUAL",PN.BASELINE="BASELINE",PN.PLANNED="PLANNED",PN.USERDEFINED="USERDEFINED",PN.NOTDEFINED="NOTDEFINED";var FN=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t}));FN.ACTUAL="ACTUAL",FN.BASELINE="BASELINE",FN.PLANNED="PLANNED",FN.USERDEFINED="USERDEFINED",FN.NOTDEFINED="NOTDEFINED";var LN,UN=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.PredefinedType=c,this.Status=h,this.LongDescription=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.PredefinedType),e.push(this.Status),e.push(this.LongDescription),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),ZN=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.TheActor=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.TheActor),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),BN=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Role=r,this.UserDefinedRole=i,this.Description=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Role),e.push(this.UserDefinedRole),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),zN=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),GN=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),HN=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Purpose=r,this.Description=i,this.UserDefinedPurpose=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Purpose),e.push(this.Description),e.push(this.UserDefinedPurpose),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),jN=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Outer=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Outer),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),VN=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Outer=r,this.Voids=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Outer),e.push(this.Voids),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),WN=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Bounds=r,this.FaceSurface=i,this.SameSense=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Bounds),e.push(this.FaceSurface),e.push(this.SameSense),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),YN=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),qN=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),XN=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),KN=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),QN=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),JN=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),$N=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),eM=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),tM=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Axis=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Axis),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),nM=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.StartDistAlong=r,this.Segments=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.StartDistAlong),e.push(this.Segments),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),rM=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.TangentialContinuity=r,this.StartTag=i,this.EndTag=a,this.CurveGeometry=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.TangentialContinuity),e.push(this.StartTag),e.push(this.EndTag),e.push(this.CurveGeometry),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),iM=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.TangentialContinuity=r,this.StartTag=i,this.EndTag=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.TangentialContinuity),e.push(this.StartTag),e.push(this.EndTag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),aM=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.TangentialContinuity=r,this.StartTag=i,this.EndTag=a,this.StartDistAlong=o,this.HorizontalLength=u,this.StartHeight=l,this.StartGradient=c,this.Radius=h,this.IsConvex=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.TangentialContinuity),e.push(this.StartTag),e.push(this.EndTag),e.push(this.StartDistAlong),e.push(this.HorizontalLength),e.push(this.StartHeight),e.push(this.StartGradient),e.push(this.Radius),e.push(this.IsConvex),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),sM=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.TangentialContinuity=r,this.StartTag=i,this.EndTag=a,this.StartDistAlong=o,this.HorizontalLength=u,this.StartHeight=l,this.StartGradient=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.TangentialContinuity),e.push(this.StartTag),e.push(this.EndTag),e.push(this.StartDistAlong),e.push(this.HorizontalLength),e.push(this.StartHeight),e.push(this.StartGradient),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),oM=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.TangentialContinuity=r,this.StartTag=i,this.EndTag=a,this.StartDistAlong=o,this.HorizontalLength=u,this.StartHeight=l,this.StartGradient=c,this.ParabolaConstant=h,this.IsConvex=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.TangentialContinuity),e.push(this.StartTag),e.push(this.EndTag),e.push(this.StartDistAlong),e.push(this.HorizontalLength),e.push(this.StartHeight),e.push(this.StartGradient),e.push(this.ParabolaConstant),e.push(this.IsConvex),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),uM=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Segments=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Segments),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),lM=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.TangentialContinuity=r,this.StartTag=i,this.EndTag=a,this.StartDistAlong=o,this.HorizontalLength=u,this.StartHeight=l,this.StartGradient=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.TangentialContinuity),e.push(this.StartTag),e.push(this.EndTag),e.push(this.StartDistAlong),e.push(this.HorizontalLength),e.push(this.StartHeight),e.push(this.StartGradient),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),cM=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Horizontal=r,this.Vertical=i,this.Tag=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Horizontal),e.push(this.Vertical),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),hM=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),pM=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.OuterBoundary=r,this.InnerBoundaries=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.OuterBoundary),e.push(this.InnerBoundaries),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),fM=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ApplicationDeveloper=r,this.Version=i,this.ApplicationFullName=a,this.ApplicationIdentifier=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ApplicationDeveloper),e.push(this.Version),e.push(this.ApplicationFullName),e.push(this.ApplicationIdentifier),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),dM=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.AppliedValue=a,this.UnitBasis=o,this.ApplicableDate=u,this.FixedUntilDate=l,this.Category=c,this.Condition=h,this.ArithmeticOperator=p,this.Components=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.AppliedValue),e.push(this.UnitBasis),e.push(this.ApplicableDate),e.push(this.FixedUntilDate),e.push(this.Category),e.push(this.Condition),e.push(this.ArithmeticOperator),e.push(this.Components),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),vM=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Identifier=r,this.Name=i,this.Description=a,this.TimeOfApproval=o,this.Status=u,this.Level=l,this.Qualifier=c,this.RequestingApproval=h,this.GivingApproval=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Identifier),e.push(this.Name),e.push(this.Description),e.push(this.TimeOfApproval),e.push(this.Status),e.push(this.Level),e.push(this.Qualifier),e.push(this.RequestingApproval),e.push(this.GivingApproval),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),mM=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.RelatingApproval=a,this.RelatedApprovals=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.RelatingApproval),e.push(this.RelatedApprovals),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),yM=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.OuterCurve=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.OuterCurve),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),gM=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Curve=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Curve),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),_M=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.OuterCurve=a,this.InnerCurves=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.OuterCurve),e.push(this.InnerCurves),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),TM=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m,y){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.OriginalValue=c,this.CurrentValue=h,this.TotalReplacementCost=p,this.Owner=f,this.User=d,this.ResponsiblePerson=v,this.IncorporationDate=m,this.DepreciatedValue=y}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.OriginalValue),e.push(this.CurrentValue),e.push(this.TotalReplacementCost),e.push(this.Owner),e.push(this.User),e.push(this.ResponsiblePerson),e.push(this.IncorporationDate),e.push(this.DepreciatedValue),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),EM=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m,y,g){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Position=a,this.BottomFlangeWidth=o,this.OverallDepth=u,this.WebThickness=l,this.BottomFlangeThickness=c,this.BottomFlangeFilletRadius=h,this.TopFlangeWidth=p,this.TopFlangeThickness=f,this.TopFlangeFilletRadius=d,this.BottomFlangeEdgeRadius=v,this.BottomFlangeSlope=m,this.TopFlangeEdgeRadius=y,this.TopFlangeSlope=g}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Position),e.push(this.BottomFlangeWidth),e.push(this.OverallDepth),e.push(this.WebThickness),e.push(this.BottomFlangeThickness),e.push(this.BottomFlangeFilletRadius),e.push(this.TopFlangeWidth),e.push(this.TopFlangeThickness),e.push(this.TopFlangeFilletRadius),e.push(this.BottomFlangeEdgeRadius),e.push(this.BottomFlangeSlope),e.push(this.TopFlangeEdgeRadius),e.push(this.TopFlangeSlope),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),xM=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),bM=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),IM=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Location=r,this.Axis=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Location),e.push(this.Axis),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),wM=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Location=r,this.RefDirection=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Location),e.push(this.RefDirection),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),kM=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Location=r,this.Axis=i,this.RefDirection=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Location),e.push(this.Axis),e.push(this.RefDirection),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),SM=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Degree=r,this.ControlPointsList=i,this.CurveForm=a,this.ClosedCurve=o,this.SelfIntersect=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Degree),e.push(this.ControlPointsList),e.push(this.CurveForm),e.push(this.ClosedCurve),e.push(this.SelfIntersect),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),RM=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Degree=r,this.ControlPointsList=i,this.CurveForm=a,this.ClosedCurve=o,this.SelfIntersect=u,this.KnotMultiplicities=l,this.Knots=c,this.KnotSpec=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Degree),e.push(this.ControlPointsList),e.push(this.CurveForm),e.push(this.ClosedCurve),e.push(this.SelfIntersect),e.push(this.KnotMultiplicities),e.push(this.Knots),e.push(this.KnotSpec),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),CM=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.UDegree=r,this.VDegree=i,this.ControlPointsList=a,this.SurfaceForm=o,this.UClosed=u,this.VClosed=l,this.SelfIntersect=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.UDegree),e.push(this.VDegree),e.push(this.ControlPointsList),e.push(this.SurfaceForm),e.push(this.UClosed),e.push(this.VClosed),e.push(this.SelfIntersect),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),DM=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.UDegree=r,this.VDegree=i,this.ControlPointsList=a,this.SurfaceForm=o,this.UClosed=u,this.VClosed=l,this.SelfIntersect=c,this.UMultiplicities=h,this.VMultiplicities=p,this.UKnots=f,this.VKnots=d,this.KnotSpec=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.UDegree),e.push(this.VDegree),e.push(this.ControlPointsList),e.push(this.SurfaceForm),e.push(this.UClosed),e.push(this.VClosed),e.push(this.SelfIntersect),e.push(this.UMultiplicities),e.push(this.VMultiplicities),e.push(this.UKnots),e.push(this.VKnots),e.push(this.KnotSpec),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),AM=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),OM=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),NM=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),MM=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),PM=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),FM=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.RepeatS=r,this.RepeatT=i,this.Mode=a,this.TextureTransform=o,this.Parameter=u,this.RasterFormat=l,this.RasterCode=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.RepeatS),e.push(this.RepeatT),e.push(this.Mode),e.push(this.TextureTransform),e.push(this.Parameter),e.push(this.RasterFormat),e.push(this.RasterCode),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),LM=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Position=r,this.XLength=i,this.YLength=a,this.ZLength=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Position),e.push(this.XLength),e.push(this.YLength),e.push(this.ZLength),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),UM=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),ZM=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),BM=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Operator=r,this.FirstOperand=i,this.SecondOperand=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Operator),e.push(this.FirstOperand),e.push(this.SecondOperand),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),zM=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Operator=r,this.FirstOperand=i,this.SecondOperand=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Operator),e.push(this.FirstOperand),e.push(this.SecondOperand),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),GM=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),HM=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Segments=r,this.SelfIntersect=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Segments),e.push(this.SelfIntersect),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),jM=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.TranslationalStiffnessByLengthX=i,this.TranslationalStiffnessByLengthY=a,this.TranslationalStiffnessByLengthZ=o,this.RotationalStiffnessByLengthX=u,this.RotationalStiffnessByLengthY=l,this.RotationalStiffnessByLengthZ=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.TranslationalStiffnessByLengthX),e.push(this.TranslationalStiffnessByLengthY),e.push(this.TranslationalStiffnessByLengthZ),e.push(this.RotationalStiffnessByLengthX),e.push(this.RotationalStiffnessByLengthY),e.push(this.RotationalStiffnessByLengthZ),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),VM=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.TranslationalStiffnessByAreaX=i,this.TranslationalStiffnessByAreaY=a,this.TranslationalStiffnessByAreaZ=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.TranslationalStiffnessByAreaX),e.push(this.TranslationalStiffnessByAreaY),e.push(this.TranslationalStiffnessByAreaZ),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),WM=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.TranslationalStiffnessX=i,this.TranslationalStiffnessY=a,this.TranslationalStiffnessZ=o,this.RotationalStiffnessX=u,this.RotationalStiffnessY=l,this.RotationalStiffnessZ=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.TranslationalStiffnessX),e.push(this.TranslationalStiffnessY),e.push(this.TranslationalStiffnessZ),e.push(this.RotationalStiffnessX),e.push(this.RotationalStiffnessY),e.push(this.RotationalStiffnessZ),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),YM=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.TranslationalStiffnessX=i,this.TranslationalStiffnessY=a,this.TranslationalStiffnessZ=o,this.RotationalStiffnessX=u,this.RotationalStiffnessY=l,this.RotationalStiffnessZ=c,this.WarpingStiffness=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.TranslationalStiffnessX),e.push(this.TranslationalStiffnessY),e.push(this.TranslationalStiffnessZ),e.push(this.RotationalStiffnessX),e.push(this.RotationalStiffnessY),e.push(this.RotationalStiffnessZ),e.push(this.WarpingStiffness),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),qM=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),XM=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),KM=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Corner=r,this.XDim=i,this.YDim=a,this.ZDim=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Corner),e.push(this.XDim),e.push(this.YDim),e.push(this.ZDim),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),QM=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.BaseSurface=r,this.AgreementFlag=i,this.Enclosure=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.BaseSurface),e.push(this.AgreementFlag),e.push(this.Enclosure),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),JM=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.LongName=h,this.CompositionType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.LongName),e.push(this.CompositionType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),$M=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.LongName=h,this.CompositionType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.LongName),e.push(this.CompositionType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),eP=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.LongName=h,this.CompositionType=p,this.ElevationOfRefHeight=f,this.ElevationOfTerrain=d,this.BuildingAddress=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.LongName),e.push(this.CompositionType),e.push(this.ElevationOfRefHeight),e.push(this.ElevationOfTerrain),e.push(this.BuildingAddress),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),tP=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),nP=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),rP=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),iP=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),aP=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),sP=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),oP=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.LongName=h,this.CompositionType=p,this.Elevation=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.LongName),e.push(this.CompositionType),e.push(this.Elevation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),uP=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.PredefinedType=l,this.LongName=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.PredefinedType),e.push(this.LongName),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),lP=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),cP=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),hP=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Position=a,this.Depth=o,this.Width=u,this.WallThickness=l,this.Girth=c,this.InternalFilletRadius=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Position),e.push(this.Depth),e.push(this.Width),e.push(this.WallThickness),e.push(this.Girth),e.push(this.InternalFilletRadius),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),pP=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),fP=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),dP=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),vP=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),mP=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),yP=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),gP=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),_P=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),TP=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),EP=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),xP=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Coordinates=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Coordinates),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),bP=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),IP=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.CoordList=r,this.TagList=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.CoordList),e.push(this.TagList),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),wP=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.CoordList=r,this.TagList=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.CoordList),e.push(this.TagList),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),kP=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Axis1=r,this.Axis2=i,this.LocalOrigin=a,this.Scale=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Axis1),e.push(this.Axis2),e.push(this.LocalOrigin),e.push(this.Scale),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),SP=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Axis1=r,this.Axis2=i,this.LocalOrigin=a,this.Scale=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Axis1),e.push(this.Axis2),e.push(this.LocalOrigin),e.push(this.Scale),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),RP=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Axis1=r,this.Axis2=i,this.LocalOrigin=a,this.Scale=o,this.Scale2=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Axis1),e.push(this.Axis2),e.push(this.LocalOrigin),e.push(this.Scale),e.push(this.Scale2),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),CP=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Axis1=r,this.Axis2=i,this.LocalOrigin=a,this.Scale=o,this.Axis3=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Axis1),e.push(this.Axis2),e.push(this.LocalOrigin),e.push(this.Scale),e.push(this.Axis3),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),DP=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Axis1=r,this.Axis2=i,this.LocalOrigin=a,this.Scale=o,this.Axis3=u,this.Scale2=l,this.Scale3=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Axis1),e.push(this.Axis2),e.push(this.LocalOrigin),e.push(this.Scale),e.push(this.Axis3),e.push(this.Scale2),e.push(this.Scale3),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),AP=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Curve=a,this.Thickness=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Curve),e.push(this.Thickness),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),OP=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),NP=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),MP=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),PP=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),FP=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Position=r,this.Radius=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Position),e.push(this.Radius),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),LP=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Position=a,this.Radius=o,this.WallThickness=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Position),e.push(this.Radius),e.push(this.WallThickness),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),UP=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Position=a,this.Radius=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Position),e.push(this.Radius),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),ZP=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.StartPoint=r,this.StartDirection=i,this.SegmentLength=a,this.Radius=o,this.IsCCW=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.StartPoint),e.push(this.StartDirection),e.push(this.SegmentLength),e.push(this.Radius),e.push(this.IsCCW),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),BP=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),zP=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),GP=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Source=r,this.Edition=i,this.EditionDate=a,this.Name=o,this.Description=u,this.Location=l,this.ReferenceTokens=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Source),e.push(this.Edition),e.push(this.EditionDate),e.push(this.Name),e.push(this.Description),e.push(this.Location),e.push(this.ReferenceTokens),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),HP=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Location=r,this.Identification=i,this.Name=a,this.ReferencedSource=o,this.Description=u,this.Sort=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Location),e.push(this.Identification),e.push(this.Name),e.push(this.ReferencedSource),e.push(this.Description),e.push(this.Sort),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),jP=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.CfsFaces=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.CfsFaces),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),VP=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),WP=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),YP=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Red=i,this.Green=a,this.Blue=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Red),e.push(this.Green),e.push(this.Blue),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),qP=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ColourList=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ColourList),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),XP=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),KP=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),QP=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),JP=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),$P=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),eF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),tF=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.UsageName=a,this.HasProperties=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.UsageName),e.push(this.HasProperties),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),nF=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.UsageName=u,this.TemplateType=l,this.HasPropertyTemplates=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.UsageName),e.push(this.TemplateType),e.push(this.HasPropertyTemplates),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),rF=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Segments=r,this.SelfIntersect=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Segments),e.push(this.SelfIntersect),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),iF=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Segments=r,this.SelfIntersect=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Segments),e.push(this.SelfIntersect),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),aF=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Transition=r,this.SameSense=i,this.ParentCurve=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Transition),e.push(this.SameSense),e.push(this.ParentCurve),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),sF=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Profiles=a,this.Label=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Profiles),e.push(this.Label),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),oF=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),uF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),lF=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),cF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),hF=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Position=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Position),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),pF=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.CfsFaces=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.CfsFaces),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),fF=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.CurveOnRelatingElement=r,this.CurveOnRelatedElement=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.CurveOnRelatingElement),e.push(this.CurveOnRelatedElement),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),dF=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),vF=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.PointOnRelatingElement=r,this.PointOnRelatedElement=i,this.EccentricityInX=a,this.EccentricityInY=o,this.EccentricityInZ=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.PointOnRelatingElement),e.push(this.PointOnRelatedElement),e.push(this.EccentricityInX),e.push(this.EccentricityInY),e.push(this.EccentricityInZ),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),mF=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.PointOnRelatingElement=r,this.PointOnRelatedElement=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.PointOnRelatingElement),e.push(this.PointOnRelatedElement),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),yF=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SurfaceOnRelatingElement=r,this.SurfaceOnRelatedElement=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SurfaceOnRelatingElement),e.push(this.SurfaceOnRelatedElement),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),gF=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.VolumeOnRelatingElement=r,this.VolumeOnRelatedElement=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.VolumeOnRelatingElement),e.push(this.VolumeOnRelatedElement),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),_F=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.ConstraintGrade=a,this.ConstraintSource=o,this.CreatingActor=u,this.CreationTime=l,this.UserDefinedGrade=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.ConstraintGrade),e.push(this.ConstraintSource),e.push(this.CreatingActor),e.push(this.CreationTime),e.push(this.UserDefinedGrade),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),TF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.LongDescription=c,this.Usage=h,this.BaseCosts=p,this.BaseQuantity=f,this.PredefinedType=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.LongDescription),e.push(this.Usage),e.push(this.BaseCosts),e.push(this.BaseQuantity),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),EF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.Identification=c,this.LongDescription=h,this.ResourceType=p,this.BaseCosts=f,this.BaseQuantity=d,this.PredefinedType=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.Identification),e.push(this.LongDescription),e.push(this.ResourceType),e.push(this.BaseCosts),e.push(this.BaseQuantity),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),xF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.LongDescription=c,this.Usage=h,this.BaseCosts=p,this.BaseQuantity=f,this.PredefinedType=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.LongDescription),e.push(this.Usage),e.push(this.BaseCosts),e.push(this.BaseQuantity),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),bF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.Identification=c,this.LongDescription=h,this.ResourceType=p,this.BaseCosts=f,this.BaseQuantity=d,this.PredefinedType=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.Identification),e.push(this.LongDescription),e.push(this.ResourceType),e.push(this.BaseCosts),e.push(this.BaseQuantity),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),IF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.LongDescription=c,this.Usage=h,this.BaseCosts=p,this.BaseQuantity=f,this.PredefinedType=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.LongDescription),e.push(this.Usage),e.push(this.BaseCosts),e.push(this.BaseQuantity),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),wF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.Identification=c,this.LongDescription=h,this.ResourceType=p,this.BaseCosts=f,this.BaseQuantity=d,this.PredefinedType=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.Identification),e.push(this.LongDescription),e.push(this.ResourceType),e.push(this.BaseCosts),e.push(this.BaseQuantity),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),kF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.LongDescription=c,this.Usage=h,this.BaseCosts=p,this.BaseQuantity=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.LongDescription),e.push(this.Usage),e.push(this.BaseCosts),e.push(this.BaseQuantity),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),SF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.Identification=c,this.LongDescription=h,this.ResourceType=p,this.BaseCosts=f,this.BaseQuantity=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.Identification),e.push(this.LongDescription),e.push(this.ResourceType),e.push(this.BaseCosts),e.push(this.BaseQuantity),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),RF=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.LongName=l,this.Phase=c,this.RepresentationContexts=h,this.UnitsInContext=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.LongName),e.push(this.Phase),e.push(this.RepresentationContexts),e.push(this.UnitsInContext),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),CF=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Dimensions=r,this.UnitType=i,this.Name=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Dimensions),e.push(this.UnitType),e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),DF=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),AF=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),OF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),NF=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Dimensions=r,this.UnitType=i,this.Name=a,this.ConversionFactor=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Dimensions),e.push(this.UnitType),e.push(this.Name),e.push(this.ConversionFactor),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),MF=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Dimensions=r,this.UnitType=i,this.Name=a,this.ConversionFactor=o,this.ConversionOffset=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Dimensions),e.push(this.UnitType),e.push(this.Name),e.push(this.ConversionFactor),e.push(this.ConversionOffset),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),PF=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),FF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),LF=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),UF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),ZF=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SourceCRS=r,this.TargetCRS=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SourceCRS),e.push(this.TargetCRS),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),BF=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.GeodeticDatum=a,this.VerticalDatum=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.GeodeticDatum),e.push(this.VerticalDatum),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),zF=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.PredefinedType=c,this.CostValues=h,this.CostQuantities=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.PredefinedType),e.push(this.CostValues),e.push(this.CostQuantities),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),GF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.PredefinedType=c,this.Status=h,this.SubmittedOn=p,this.UpdateDate=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.PredefinedType),e.push(this.Status),e.push(this.SubmittedOn),e.push(this.UpdateDate),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),HF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.AppliedValue=a,this.UnitBasis=o,this.ApplicableDate=u,this.FixedUntilDate=l,this.Category=c,this.Condition=h,this.ArithmeticOperator=p,this.Components=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.AppliedValue),e.push(this.UnitBasis),e.push(this.ApplicableDate),e.push(this.FixedUntilDate),e.push(this.Category),e.push(this.Condition),e.push(this.ArithmeticOperator),e.push(this.Components),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),jF=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),VF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),WF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.LongDescription=c,this.Usage=h,this.BaseCosts=p,this.BaseQuantity=f,this.PredefinedType=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.LongDescription),e.push(this.Usage),e.push(this.BaseCosts),e.push(this.BaseQuantity),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),YF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.Identification=c,this.LongDescription=h,this.ResourceType=p,this.BaseCosts=f,this.BaseQuantity=d,this.PredefinedType=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.Identification),e.push(this.LongDescription),e.push(this.ResourceType),e.push(this.BaseCosts),e.push(this.BaseQuantity),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),qF=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Position=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Position),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),XF=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.TreeRootExpression=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.TreeRootExpression),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),KF=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.RelatingMonetaryUnit=a,this.RelatedMonetaryUnit=o,this.ExchangeRate=u,this.RateDateTime=l,this.RateSource=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.RelatingMonetaryUnit),e.push(this.RelatedMonetaryUnit),e.push(this.ExchangeRate),e.push(this.RateDateTime),e.push(this.RateSource),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),QF=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),JF=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),$F=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),eL=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.BasisSurface=r,this.OuterBoundary=i,this.InnerBoundaries=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.BasisSurface),e.push(this.OuterBoundary),e.push(this.InnerBoundaries),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),tL=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.BasisSurface=r,this.Boundaries=i,this.ImplicitOuter=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.BasisSurface),e.push(this.Boundaries),e.push(this.ImplicitOuter),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),nL=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.StartPoint=r,this.StartDirection=i,this.SegmentLength=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.StartPoint),e.push(this.StartDirection),e.push(this.SegmentLength),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),rL=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.CurveFont=i,this.CurveWidth=a,this.CurveColour=o,this.ModelOrDraughting=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.CurveFont),e.push(this.CurveWidth),e.push(this.CurveColour),e.push(this.ModelOrDraughting),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),iL=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.PatternList=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.PatternList),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),aL=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.CurveFont=i,this.CurveFontScaling=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.CurveFont),e.push(this.CurveFontScaling),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),sL=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.VisibleSegmentLength=r,this.InvisibleSegmentLength=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.VisibleSegmentLength),e.push(this.InvisibleSegmentLength),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),oL=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Position=r,this.Radius=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Position),e.push(this.Radius),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),uL=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),lL=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),cL=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),hL=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),pL=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.ParentProfile=a,this.Operator=o,this.Label=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.ParentProfile),e.push(this.Operator),e.push(this.Label),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),fL=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Elements=r,this.UnitType=i,this.UserDefinedType=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Elements),e.push(this.UnitType),e.push(this.UserDefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),dL=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Unit=r,this.Exponent=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Unit),e.push(this.Exponent),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),vL=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.LengthExponent=r,this.MassExponent=i,this.TimeExponent=a,this.ElectricCurrentExponent=o,this.ThermodynamicTemperatureExponent=u,this.AmountOfSubstanceExponent=l,this.LuminousIntensityExponent=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.LengthExponent),e.push(this.MassExponent),e.push(this.TimeExponent),e.push(this.ElectricCurrentExponent),e.push(this.ThermodynamicTemperatureExponent),e.push(this.AmountOfSubstanceExponent),e.push(this.LuminousIntensityExponent),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),mL=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.DirectionRatios=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.DirectionRatios),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),yL=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),gL=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),_L=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.DistanceAlong=r,this.OffsetLateral=i,this.OffsetVertical=a,this.OffsetLongitudinal=o,this.AlongHorizontal=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.DistanceAlong),e.push(this.OffsetLateral),e.push(this.OffsetVertical),e.push(this.OffsetLongitudinal),e.push(this.AlongHorizontal),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),TL=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),EL=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),xL=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.LongName=l,this.PredefinedType=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.LongName),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),bL=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),IL=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),wL=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),kL=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),SL=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),RL=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),CL=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.FlowDirection=h,this.PredefinedType=p,this.SystemType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.FlowDirection),e.push(this.PredefinedType),e.push(this.SystemType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),DL=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.LongName=l,this.PredefinedType=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.LongName),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),AL=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m,y,g,_,T){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Identification=r,this.Name=i,this.Description=a,this.Location=o,this.Purpose=u,this.IntendedUse=l,this.Scope=c,this.Revision=h,this.DocumentOwner=p,this.Editors=f,this.CreationTime=d,this.LastRevisionTime=v,this.ElectronicFormat=m,this.ValidFrom=y,this.ValidUntil=g,this.Confidentiality=_,this.Status=T}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Identification),e.push(this.Name),e.push(this.Description),e.push(this.Location),e.push(this.Purpose),e.push(this.IntendedUse),e.push(this.Scope),e.push(this.Revision),e.push(this.DocumentOwner),e.push(this.Editors),e.push(this.CreationTime),e.push(this.LastRevisionTime),e.push(this.ElectronicFormat),e.push(this.ValidFrom),e.push(this.ValidUntil),e.push(this.Confidentiality),e.push(this.Status),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),OL=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.RelatingDocument=a,this.RelatedDocuments=o,this.RelationshipType=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.RelatingDocument),e.push(this.RelatedDocuments),e.push(this.RelationshipType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),NL=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Location=r,this.Identification=i,this.Name=a,this.Description=o,this.ReferencedDocument=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Location),e.push(this.Identification),e.push(this.Name),e.push(this.Description),e.push(this.ReferencedDocument),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),ML=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.OverallHeight=p,this.OverallWidth=f,this.PredefinedType=d,this.OperationType=v,this.UserDefinedOperationType=m}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.OverallHeight),e.push(this.OverallWidth),e.push(this.PredefinedType),e.push(this.OperationType),e.push(this.UserDefinedOperationType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),PL=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m,y,g,_,T){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.LiningDepth=u,this.LiningThickness=l,this.ThresholdDepth=c,this.ThresholdThickness=h,this.TransomThickness=p,this.TransomOffset=f,this.LiningOffset=d,this.ThresholdOffset=v,this.CasingThickness=m,this.CasingDepth=y,this.ShapeAspectStyle=g,this.LiningToPanelOffsetX=_,this.LiningToPanelOffsetY=T}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.LiningDepth),e.push(this.LiningThickness),e.push(this.ThresholdDepth),e.push(this.ThresholdThickness),e.push(this.TransomThickness),e.push(this.TransomOffset),e.push(this.LiningOffset),e.push(this.ThresholdOffset),e.push(this.CasingThickness),e.push(this.CasingDepth),e.push(this.ShapeAspectStyle),e.push(this.LiningToPanelOffsetX),e.push(this.LiningToPanelOffsetY),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),FL=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.PanelDepth=u,this.PanelOperation=l,this.PanelWidth=c,this.PanelPosition=h,this.ShapeAspectStyle=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.PanelDepth),e.push(this.PanelOperation),e.push(this.PanelWidth),e.push(this.PanelPosition),e.push(this.ShapeAspectStyle),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),LL=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.OverallHeight=p,this.OverallWidth=f,this.PredefinedType=d,this.OperationType=v,this.UserDefinedOperationType=m}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.OverallHeight),e.push(this.OverallWidth),e.push(this.PredefinedType),e.push(this.OperationType),e.push(this.UserDefinedOperationType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),UL=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.OperationType=p,this.ConstructionType=f,this.ParameterTakesPrecedence=d,this.Sizeable=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.OperationType),e.push(this.ConstructionType),e.push(this.ParameterTakesPrecedence),e.push(this.Sizeable),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),ZL=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f,this.OperationType=d,this.ParameterTakesPrecedence=v,this.UserDefinedOperationType=m}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e.push(this.OperationType),e.push(this.ParameterTakesPrecedence),e.push(this.UserDefinedOperationType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),BL=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),zL=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),GL=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),HL=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),jL=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),VL=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),WL=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),YL=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),qL=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.EdgeStart=r,this.EdgeEnd=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.EdgeStart),e.push(this.EdgeEnd),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),XL=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.EdgeStart=r,this.EdgeEnd=i,this.EdgeGeometry=a,this.SameSense=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.EdgeStart),e.push(this.EdgeEnd),e.push(this.EdgeGeometry),e.push(this.SameSense),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),KL=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.EdgeList=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.EdgeList),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),QL=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),JL=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),$L=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),eU=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),tU=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),nU=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),rU=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),iU=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),aU=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),sU=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),oU=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),uU=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),lU=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),cU=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.AssemblyPlace=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.AssemblyPlace),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),hU=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),pU=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),fU=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),dU=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.MethodOfMeasurement=u,this.Quantities=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.MethodOfMeasurement),e.push(this.Quantities),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),vU=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),mU=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Position=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Position),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),yU=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Position=r,this.SemiAxis1=i,this.SemiAxis2=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Position),e.push(this.SemiAxis1),e.push(this.SemiAxis2),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),gU=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Position=a,this.SemiAxis1=o,this.SemiAxis2=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Position),e.push(this.SemiAxis1),e.push(this.SemiAxis2),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),_U=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),TU=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),EU=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),xU=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),bU=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),IU=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),wU=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),kU=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),SU=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.LongDescription=c,this.PredefinedType=h,this.EventTriggerType=p,this.UserDefinedEventTriggerType=f,this.EventOccurenceTime=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.LongDescription),e.push(this.PredefinedType),e.push(this.EventTriggerType),e.push(this.UserDefinedEventTriggerType),e.push(this.EventOccurenceTime),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),RU=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.DataOrigin=i,this.UserDefinedDataOrigin=a,this.ActualDate=o,this.EarlyDate=u,this.LateDate=l,this.ScheduleDate=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.DataOrigin),e.push(this.UserDefinedDataOrigin),e.push(this.ActualDate),e.push(this.EarlyDate),e.push(this.LateDate),e.push(this.ScheduleDate),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),CU=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.Identification=c,this.LongDescription=h,this.ProcessType=p,this.PredefinedType=f,this.EventTriggerType=d,this.UserDefinedEventTriggerType=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.Identification),e.push(this.LongDescription),e.push(this.ProcessType),e.push(this.PredefinedType),e.push(this.EventTriggerType),e.push(this.UserDefinedEventTriggerType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),DU=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Properties=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Properties),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),AU=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),OU=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Location=r,this.Identification=i,this.Name=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Location),e.push(this.Identification),e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),NU=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.RelatingReference=a,this.RelatedResourceObjects=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.RelatingReference),e.push(this.RelatedResourceObjects),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),MU=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.LongName=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.LongName),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),PU=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.LongName=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.LongName),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),FU=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Location=r,this.Identification=i,this.Name=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Location),e.push(this.Identification),e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),LU=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Location=r,this.Identification=i,this.Name=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Location),e.push(this.Identification),e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),UU=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Location=r,this.Identification=i,this.Name=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Location),e.push(this.Identification),e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),ZU=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SweptArea=r,this.Position=i,this.ExtrudedDirection=a,this.Depth=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SweptArea),e.push(this.Position),e.push(this.ExtrudedDirection),e.push(this.Depth),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),BU=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SweptArea=r,this.Position=i,this.ExtrudedDirection=a,this.Depth=o,this.EndSweptArea=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SweptArea),e.push(this.Position),e.push(this.ExtrudedDirection),e.push(this.Depth),e.push(this.EndSweptArea),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),zU=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Bounds=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Bounds),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),GU=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.FbsmFaces=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.FbsmFaces),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),HU=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Bound=r,this.Orientation=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Bound),e.push(this.Orientation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),jU=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Bound=r,this.Orientation=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Bound),e.push(this.Orientation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),VU=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Bounds=r,this.FaceSurface=i,this.SameSense=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Bounds),e.push(this.FaceSurface),e.push(this.SameSense),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),WU=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Outer=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Outer),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),YU=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Outer=r,this.Voids=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Outer),e.push(this.Voids),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),qU=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.LongName=h,this.CompositionType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.LongName),e.push(this.CompositionType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),XU=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.LongName=h,this.CompositionType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.LongName),e.push(this.CompositionType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),KU=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.TensionFailureX=i,this.TensionFailureY=a,this.TensionFailureZ=o,this.CompressionFailureX=u,this.CompressionFailureY=l,this.CompressionFailureZ=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.TensionFailureX),e.push(this.TensionFailureY),e.push(this.TensionFailureZ),e.push(this.CompressionFailureX),e.push(this.CompressionFailureY),e.push(this.CompressionFailureZ),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),QU=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),JU=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),$U=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),eZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),tZ=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),nZ=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),rZ=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),iZ=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.FillStyles=i,this.ModelorDraughting=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.FillStyles),e.push(this.ModelorDraughting),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),aZ=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.HatchLineAppearance=r,this.StartOfNextHatchLine=i,this.PointOfReferenceHatchLine=a,this.PatternStart=o,this.HatchLineAngle=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.HatchLineAppearance),e.push(this.StartOfNextHatchLine),e.push(this.PointOfReferenceHatchLine),e.push(this.PatternStart),e.push(this.HatchLineAngle),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),sZ=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.TilingPattern=r,this.Tiles=i,this.TilingScale=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.TilingPattern),e.push(this.Tiles),e.push(this.TilingScale),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),oZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),uZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),lZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),cZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),hZ=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SweptArea=r,this.Position=i,this.Directrix=a,this.StartParam=o,this.EndParam=u,this.FixedReference=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SweptArea),e.push(this.Position),e.push(this.Directrix),e.push(this.StartParam),e.push(this.EndParam),e.push(this.FixedReference),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),pZ=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),fZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),dZ=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),vZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),mZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),yZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),gZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),_Z=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),TZ=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),EZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),xZ=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),bZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),IZ=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),wZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),kZ=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),SZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),RZ=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),CZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),DZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),AZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),OZ=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),NZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),MZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),PZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.AssemblyPlace=f,this.PredefinedType=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.AssemblyPlace),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),FZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),LZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),UZ=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Elements=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Elements),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),ZZ=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ContextIdentifier=r,this.ContextType=i,this.CoordinateSpaceDimension=a,this.Precision=o,this.WorldCoordinateSystem=u,this.TrueNorth=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ContextIdentifier),e.push(this.ContextType),e.push(this.CoordinateSpaceDimension),e.push(this.Precision),e.push(this.WorldCoordinateSystem),e.push(this.TrueNorth),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),BZ=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),zZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ContextIdentifier=r,this.ContextType=i,this.CoordinateSpaceDimension=a,this.Precision=o,this.WorldCoordinateSystem=u,this.TrueNorth=l,this.ParentContext=c,this.TargetScale=h,this.TargetView=p,this.UserDefinedTargetView=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ContextIdentifier),e.push(this.ContextType),e.push(this.CoordinateSpaceDimension),e.push(this.Precision),e.push(this.WorldCoordinateSystem),e.push(this.TrueNorth),e.push(this.ParentContext),e.push(this.TargetScale),e.push(this.TargetView),e.push(this.UserDefinedTargetView),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),GZ=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Elements=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Elements),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),HZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.UAxes=h,this.VAxes=p,this.WAxes=f,this.PredefinedType=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.UAxes),e.push(this.VAxes),e.push(this.WAxes),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),jZ=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.AxisTag=r,this.AxisCurve=i,this.SameSense=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.AxisTag),e.push(this.AxisCurve),e.push(this.SameSense),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),VZ=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.PlacementRelTo=r,this.PlacementLocation=i,this.PlacementRefDirection=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.PlacementRelTo),e.push(this.PlacementLocation),e.push(this.PlacementRefDirection),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),WZ=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),YZ=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.BaseSurface=r,this.AgreementFlag=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.BaseSurface),e.push(this.AgreementFlag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),qZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),XZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),KZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),QZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),JZ=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Position=a,this.OverallWidth=o,this.OverallDepth=u,this.WebThickness=l,this.FlangeThickness=c,this.FilletRadius=h,this.FlangeEdgeRadius=p,this.FlangeSlope=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Position),e.push(this.OverallWidth),e.push(this.OverallDepth),e.push(this.WebThickness),e.push(this.FlangeThickness),e.push(this.FilletRadius),e.push(this.FlangeEdgeRadius),e.push(this.FlangeSlope),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),$Z=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.RepeatS=r,this.RepeatT=i,this.Mode=a,this.TextureTransform=o,this.Parameter=u,this.URLReference=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.RepeatS),e.push(this.RepeatT),e.push(this.Mode),e.push(this.TextureTransform),e.push(this.Parameter),e.push(this.URLReference),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),eB=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.MappedTo=r,this.Opacity=i,this.Colours=a,this.ColourIndex=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.MappedTo),e.push(this.Opacity),e.push(this.Colours),e.push(this.ColourIndex),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),tB=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Points=r,this.Segments=i,this.SelfIntersect=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Points),e.push(this.Segments),e.push(this.SelfIntersect),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),nB=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.CoordIndex=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.CoordIndex),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),rB=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.CoordIndex=r,this.InnerCoordIndices=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.CoordIndex),e.push(this.InnerCoordIndices),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),iB=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Maps=r,this.MappedTo=i,this.TexCoords=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Maps),e.push(this.MappedTo),e.push(this.TexCoords),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),aB=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Maps=r,this.MappedTo=i,this.TexCoords=a,this.TexCoordIndex=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Maps),e.push(this.MappedTo),e.push(this.TexCoords),e.push(this.TexCoordIndex),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),sB=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),oB=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),uB=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Curve3D=r,this.AssociatedGeometry=i,this.MasterRepresentation=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Curve3D),e.push(this.AssociatedGeometry),e.push(this.MasterRepresentation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),lB=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.PredefinedType=l,this.Jurisdiction=c,this.ResponsiblePersons=h,this.LastUpdateDate=p,this.CurrentValue=f,this.OriginalValue=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.PredefinedType),e.push(this.Jurisdiction),e.push(this.ResponsiblePersons),e.push(this.LastUpdateDate),e.push(this.CurrentValue),e.push(this.OriginalValue),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),cB=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.StartTime=a,this.EndTime=o,this.TimeSeriesDataType=u,this.DataOrigin=l,this.UserDefinedDataOrigin=c,this.Unit=h,this.Values=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.StartTime),e.push(this.EndTime),e.push(this.TimeSeriesDataType),e.push(this.DataOrigin),e.push(this.UserDefinedDataOrigin),e.push(this.Unit),e.push(this.Values),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),hB=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.TimeStamp=r,this.ListValues=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.TimeStamp),e.push(this.ListValues),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),pB=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),fB=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),dB=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Position=a,this.Depth=o,this.Width=u,this.Thickness=l,this.FilletRadius=c,this.EdgeRadius=h,this.LegSlope=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Position),e.push(this.Depth),e.push(this.Width),e.push(this.Thickness),e.push(this.FilletRadius),e.push(this.EdgeRadius),e.push(this.LegSlope),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),vB=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.LongDescription=c,this.Usage=h,this.BaseCosts=p,this.BaseQuantity=f,this.PredefinedType=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.LongDescription),e.push(this.Usage),e.push(this.BaseCosts),e.push(this.BaseQuantity),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),mB=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.Identification=c,this.LongDescription=h,this.ResourceType=p,this.BaseCosts=f,this.BaseQuantity=d,this.PredefinedType=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.Identification),e.push(this.LongDescription),e.push(this.ResourceType),e.push(this.BaseCosts),e.push(this.BaseQuantity),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),yB=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.DataOrigin=i,this.UserDefinedDataOrigin=a,this.LagValue=o,this.DurationType=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.DataOrigin),e.push(this.UserDefinedDataOrigin),e.push(this.LagValue),e.push(this.DurationType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),gB=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),_B=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),TB=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Version=i,this.Publisher=a,this.VersionDate=o,this.Location=u,this.Description=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Version),e.push(this.Publisher),e.push(this.VersionDate),e.push(this.Location),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),EB=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Location=r,this.Identification=i,this.Name=a,this.Description=o,this.Language=u,this.ReferencedLibrary=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Location),e.push(this.Identification),e.push(this.Name),e.push(this.Description),e.push(this.Language),e.push(this.ReferencedLibrary),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),xB=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.MainPlaneAngle=r,this.SecondaryPlaneAngle=i,this.LuminousIntensity=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.MainPlaneAngle),e.push(this.SecondaryPlaneAngle),e.push(this.LuminousIntensity),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),bB=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),IB=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),wB=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.LightDistributionCurve=r,this.DistributionData=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.LightDistributionCurve),e.push(this.DistributionData),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),kB=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.LightColour=i,this.AmbientIntensity=a,this.Intensity=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.LightColour),e.push(this.AmbientIntensity),e.push(this.Intensity),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),SB=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.LightColour=i,this.AmbientIntensity=a,this.Intensity=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.LightColour),e.push(this.AmbientIntensity),e.push(this.Intensity),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),RB=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.LightColour=i,this.AmbientIntensity=a,this.Intensity=o,this.Orientation=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.LightColour),e.push(this.AmbientIntensity),e.push(this.Intensity),e.push(this.Orientation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),CB=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.LightColour=i,this.AmbientIntensity=a,this.Intensity=o,this.Position=u,this.ColourAppearance=l,this.ColourTemperature=c,this.LuminousFlux=h,this.LightEmissionSource=p,this.LightDistributionDataSource=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.LightColour),e.push(this.AmbientIntensity),e.push(this.Intensity),e.push(this.Position),e.push(this.ColourAppearance),e.push(this.ColourTemperature),e.push(this.LuminousFlux),e.push(this.LightEmissionSource),e.push(this.LightDistributionDataSource),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),DB=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.LightColour=i,this.AmbientIntensity=a,this.Intensity=o,this.Position=u,this.Radius=l,this.ConstantAttenuation=c,this.DistanceAttenuation=h,this.QuadricAttenuation=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.LightColour),e.push(this.AmbientIntensity),e.push(this.Intensity),e.push(this.Position),e.push(this.Radius),e.push(this.ConstantAttenuation),e.push(this.DistanceAttenuation),e.push(this.QuadricAttenuation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),AB=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.LightColour=i,this.AmbientIntensity=a,this.Intensity=o,this.Position=u,this.Radius=l,this.ConstantAttenuation=c,this.DistanceAttenuation=h,this.QuadricAttenuation=p,this.Orientation=f,this.ConcentrationExponent=d,this.SpreadAngle=v,this.BeamWidthAngle=m}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.LightColour),e.push(this.AmbientIntensity),e.push(this.Intensity),e.push(this.Position),e.push(this.Radius),e.push(this.ConstantAttenuation),e.push(this.DistanceAttenuation),e.push(this.QuadricAttenuation),e.push(this.Orientation),e.push(this.ConcentrationExponent),e.push(this.SpreadAngle),e.push(this.BeamWidthAngle),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),OB=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Pnt=r,this.Dir=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Pnt),e.push(this.Dir),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),NB=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.StartPoint=r,this.StartDirection=i,this.SegmentLength=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.StartPoint),e.push(this.StartDirection),e.push(this.SegmentLength),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),MB=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.PlacementRelTo=r,this.PlacementMeasuredAlong=i,this.Distance=a,this.Orientation=o,this.CartesianPosition=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.PlacementRelTo),e.push(this.PlacementMeasuredAlong),e.push(this.Distance),e.push(this.Orientation),e.push(this.CartesianPosition),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),PB=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Axis=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Axis),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),FB=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.PlacementRelTo=r,this.RelativePlacement=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.PlacementRelTo),e.push(this.RelativePlacement),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),LB=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),UB=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Outer=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Outer),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),ZB=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SourceCRS=r,this.TargetCRS=i,this.Eastings=a,this.Northings=o,this.OrthogonalHeight=u,this.XAxisAbscissa=l,this.XAxisOrdinate=c,this.Scale=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SourceCRS),e.push(this.TargetCRS),e.push(this.Eastings),e.push(this.Northings),e.push(this.OrthogonalHeight),e.push(this.XAxisAbscissa),e.push(this.XAxisOrdinate),e.push(this.Scale),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),BB=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.MappingSource=r,this.MappingTarget=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.MappingSource),e.push(this.MappingTarget),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),zB=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Category=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Category),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),GB=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.MaterialClassifications=r,this.ClassifiedMaterial=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.MaterialClassifications),e.push(this.ClassifiedMaterial),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),HB=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Material=a,this.Fraction=o,this.Category=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Material),e.push(this.Fraction),e.push(this.Category),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),jB=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.MaterialConstituents=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.MaterialConstituents),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),VB=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),WB=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Representations=a,this.RepresentedMaterial=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Representations),e.push(this.RepresentedMaterial),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),YB=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Material=r,this.LayerThickness=i,this.IsVentilated=a,this.Name=o,this.Description=u,this.Category=l,this.Priority=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Material),e.push(this.LayerThickness),e.push(this.IsVentilated),e.push(this.Name),e.push(this.Description),e.push(this.Category),e.push(this.Priority),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),qB=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.MaterialLayers=r,this.LayerSetName=i,this.Description=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.MaterialLayers),e.push(this.LayerSetName),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),XB=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ForLayerSet=r,this.LayerSetDirection=i,this.DirectionSense=a,this.OffsetFromReferenceLine=o,this.ReferenceExtent=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ForLayerSet),e.push(this.LayerSetDirection),e.push(this.DirectionSense),e.push(this.OffsetFromReferenceLine),e.push(this.ReferenceExtent),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),KB=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Material=r,this.LayerThickness=i,this.IsVentilated=a,this.Name=o,this.Description=u,this.Category=l,this.Priority=c,this.OffsetDirection=h,this.OffsetValues=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Material),e.push(this.LayerThickness),e.push(this.IsVentilated),e.push(this.Name),e.push(this.Description),e.push(this.Category),e.push(this.Priority),e.push(this.OffsetDirection),e.push(this.OffsetValues),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),QB=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Materials=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Materials),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),JB=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Material=a,this.Profile=o,this.Priority=u,this.Category=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Material),e.push(this.Profile),e.push(this.Priority),e.push(this.Category),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),$B=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.MaterialProfiles=a,this.CompositeProfile=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.MaterialProfiles),e.push(this.CompositeProfile),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),ez=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ForProfileSet=r,this.CardinalPoint=i,this.ReferenceExtent=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ForProfileSet),e.push(this.CardinalPoint),e.push(this.ReferenceExtent),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),tz=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ForProfileSet=r,this.CardinalPoint=i,this.ReferenceExtent=a,this.ForProfileEndSet=o,this.CardinalEndPoint=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ForProfileSet),e.push(this.CardinalPoint),e.push(this.ReferenceExtent),e.push(this.ForProfileEndSet),e.push(this.CardinalEndPoint),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),nz=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Material=a,this.Profile=o,this.Priority=u,this.Category=l,this.OffsetValues=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Material),e.push(this.Profile),e.push(this.Priority),e.push(this.Category),e.push(this.OffsetValues),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),rz=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Properties=a,this.Material=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Properties),e.push(this.Material),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),iz=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.RelatingMaterial=a,this.RelatedMaterials=o,this.Expression=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.RelatingMaterial),e.push(this.RelatedMaterials),e.push(this.Expression),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),az=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),sz=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ValueComponent=r,this.UnitComponent=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ValueComponent),e.push(this.UnitComponent),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),oz=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.NominalDiameter=p,this.NominalLength=f,this.PredefinedType=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.NominalDiameter),e.push(this.NominalLength),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),uz=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f,this.NominalDiameter=d,this.NominalLength=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e.push(this.NominalDiameter),e.push(this.NominalLength),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),lz=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),cz=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),hz=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),pz=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),fz=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),dz=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.ConstraintGrade=a,this.ConstraintSource=o,this.CreatingActor=u,this.CreationTime=l,this.UserDefinedGrade=c,this.Benchmark=h,this.ValueSource=p,this.DataValue=f,this.ReferencePath=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.ConstraintGrade),e.push(this.ConstraintSource),e.push(this.CreatingActor),e.push(this.CreationTime),e.push(this.UserDefinedGrade),e.push(this.Benchmark),e.push(this.ValueSource),e.push(this.DataValue),e.push(this.ReferencePath),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),vz=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.ParentProfile=a,this.Operator=o,this.Label=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.ParentProfile),e.push(this.Operator),e.push(this.Label),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),mz=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Currency=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Currency),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),yz=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),gz=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),_z=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Dimensions=r,this.UnitType=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Dimensions),e.push(this.UnitType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),Tz=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Ez=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),xz=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.PlacementRelTo=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.PlacementRelTo),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),bz=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.ConstraintGrade=a,this.ConstraintSource=o,this.CreatingActor=u,this.CreationTime=l,this.UserDefinedGrade=c,this.BenchmarkValues=h,this.LogicalAggregator=p,this.ObjectiveQualifier=f,this.UserDefinedQualifier=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.ConstraintGrade),e.push(this.ConstraintSource),e.push(this.CreatingActor),e.push(this.CreationTime),e.push(this.UserDefinedGrade),e.push(this.BenchmarkValues),e.push(this.LogicalAggregator),e.push(this.ObjectiveQualifier),e.push(this.UserDefinedQualifier),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Iz=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.TheActor=l,this.PredefinedType=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.TheActor),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),wz=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.BasisCurve=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.BasisCurve),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),kz=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.BasisCurve=r,this.Distance=i,this.SelfIntersect=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.BasisCurve),e.push(this.Distance),e.push(this.SelfIntersect),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),Sz=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.BasisCurve=r,this.Distance=i,this.SelfIntersect=a,this.RefDirection=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.BasisCurve),e.push(this.Distance),e.push(this.SelfIntersect),e.push(this.RefDirection),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),Rz=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.BasisCurve=r,this.OffsetValues=i,this.Tag=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.BasisCurve),e.push(this.OffsetValues),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),Cz=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.CfsFaces=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.CfsFaces),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),Dz=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Az=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Oz=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Identification=r,this.Name=i,this.Description=a,this.Roles=o,this.Addresses=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Identification),e.push(this.Name),e.push(this.Description),e.push(this.Roles),e.push(this.Addresses),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Nz=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.RelatingOrganization=a,this.RelatedOrganizations=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.RelatingOrganization),e.push(this.RelatedOrganizations),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),Mz=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.LateralAxisDirection=r,this.VerticalAxisDirection=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.LateralAxisDirection),e.push(this.VerticalAxisDirection),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),Pz=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.EdgeStart=r,this.EdgeEnd=i,this.EdgeElement=a,this.Orientation=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.EdgeStart),e.push(this.EdgeEnd),e.push(this.EdgeElement),e.push(this.Orientation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),Fz=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Segments=r,this.SelfIntersect=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Segments),e.push(this.SelfIntersect),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),Lz=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Uz=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Zz=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.OwningUser=r,this.OwningApplication=i,this.State=a,this.ChangeAction=o,this.LastModifiedDate=u,this.LastModifyingUser=l,this.LastModifyingApplication=c,this.CreationDate=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.OwningUser),e.push(this.OwningApplication),e.push(this.State),e.push(this.ChangeAction),e.push(this.LastModifiedDate),e.push(this.LastModifyingUser),e.push(this.LastModifyingApplication),e.push(this.CreationDate),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Bz=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Position=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Position),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),zz=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.EdgeList=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.EdgeList),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),Gz=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.BasisSurface=r,this.ReferenceCurve=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.BasisSurface),e.push(this.ReferenceCurve),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),Hz=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.LifeCyclePhase=c,this.PredefinedType=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.LifeCyclePhase),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),jz=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.OperationType=u,this.PanelPosition=l,this.FrameDepth=c,this.FrameThickness=h,this.ShapeAspectStyle=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.OperationType),e.push(this.PanelPosition),e.push(this.FrameDepth),e.push(this.FrameThickness),e.push(this.ShapeAspectStyle),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Vz=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.PredefinedType=c,this.Status=h,this.LongDescription=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.PredefinedType),e.push(this.Status),e.push(this.LongDescription),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Wz=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Identification=r,this.FamilyName=i,this.GivenName=a,this.MiddleNames=o,this.PrefixTitles=u,this.SuffixTitles=l,this.Roles=c,this.Addresses=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Identification),e.push(this.FamilyName),e.push(this.GivenName),e.push(this.MiddleNames),e.push(this.PrefixTitles),e.push(this.SuffixTitles),e.push(this.Roles),e.push(this.Addresses),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Yz=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ThePerson=r,this.TheOrganization=i,this.Roles=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ThePerson),e.push(this.TheOrganization),e.push(this.Roles),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),qz=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.HasQuantities=a,this.Discrimination=o,this.Quality=u,this.Usage=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.HasQuantities),e.push(this.Discrimination),e.push(this.Quality),e.push(this.Usage),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Xz=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),Kz=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Unit=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Unit),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),Qz=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p,this.ConstructionType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e.push(this.ConstructionType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Jz=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),$z=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),eG=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),tG=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),nG=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),rG=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.RepeatS=r,this.RepeatT=i,this.Mode=a,this.TextureTransform=o,this.Parameter=u,this.Width=l,this.Height=c,this.ColourComponents=h,this.Pixel=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.RepeatS),e.push(this.RepeatT),e.push(this.Mode),e.push(this.TextureTransform),e.push(this.Parameter),e.push(this.Width),e.push(this.Height),e.push(this.ColourComponents),e.push(this.Pixel),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),iG=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Location=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Location),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),aG=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SizeInX=r,this.SizeInY=i,this.Placement=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SizeInX),e.push(this.SizeInY),e.push(this.Placement),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),sG=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SizeInX=r,this.SizeInY=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SizeInX),e.push(this.SizeInY),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),oG=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Position=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Position),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),uG=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),lG=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),cG=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),hG=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),pG=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.BasisCurve=r,this.PointParameter=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.BasisCurve),e.push(this.PointParameter),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),fG=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.BasisSurface=r,this.PointParameterU=i,this.PointParameterV=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.BasisSurface),e.push(this.PointParameterU),e.push(this.PointParameterV),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),dG=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Polygon=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Polygon),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),vG=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.BaseSurface=r,this.AgreementFlag=i,this.Position=a,this.PolygonalBoundary=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.BaseSurface),e.push(this.AgreementFlag),e.push(this.Position),e.push(this.PolygonalBoundary),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),mG=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Coordinates=r,this.Closed=i,this.Faces=a,this.PnIndex=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Coordinates),e.push(this.Closed),e.push(this.Faces),e.push(this.PnIndex),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),yG=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Points=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Points),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),gG=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),_G=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),TG=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Purpose=r,this.Description=i,this.UserDefinedPurpose=a,this.InternalLocation=o,this.AddressLines=u,this.PostalBox=l,this.Town=c,this.Region=h,this.PostalCode=p,this.Country=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Purpose),e.push(this.Description),e.push(this.UserDefinedPurpose),e.push(this.InternalLocation),e.push(this.AddressLines),e.push(this.PostalBox),e.push(this.Town),e.push(this.Region),e.push(this.PostalCode),e.push(this.Country),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),EG=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),xG=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),bG=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),IG=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),wG=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),kG=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),SG=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),RG=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.AssignedItems=a,this.Identifier=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.AssignedItems),e.push(this.Identifier),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),CG=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.AssignedItems=a,this.Identifier=o,this.LayerOn=u,this.LayerFrozen=l,this.LayerBlocked=c,this.LayerStyles=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.AssignedItems),e.push(this.Identifier),e.push(this.LayerOn),e.push(this.LayerFrozen),e.push(this.LayerBlocked),e.push(this.LayerStyles),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),DG=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),AG=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Styles=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Styles),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),OG=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.LongDescription=c,this.PredefinedType=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.LongDescription),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),NG=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.Identification=c,this.LongDescription=h,this.ProcessType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.Identification),e.push(this.LongDescription),e.push(this.ProcessType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),MG=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.LongDescription=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.LongDescription),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),PG=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),FG=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Representations=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Representations),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),LG=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Representations=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Representations),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),UG=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),ZG=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Properties=a,this.ProfileDefinition=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Properties),e.push(this.ProfileDefinition),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),BG=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.LongName=l,this.Phase=c,this.RepresentationContexts=h,this.UnitsInContext=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.LongName),e.push(this.Phase),e.push(this.RepresentationContexts),e.push(this.UnitsInContext),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),zG=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.LongName=l,this.Phase=c,this.RepresentationContexts=h,this.UnitsInContext=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.LongName),e.push(this.Phase),e.push(this.RepresentationContexts),e.push(this.UnitsInContext),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),GG=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.PredefinedType=c,this.Status=h,this.LongDescription=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.PredefinedType),e.push(this.Status),e.push(this.LongDescription),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),HG=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.GeodeticDatum=a,this.VerticalDatum=o,this.MapProjection=u,this.MapZone=l,this.MapUnit=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.GeodeticDatum),e.push(this.VerticalDatum),e.push(this.MapProjection),e.push(this.MapZone),e.push(this.MapUnit),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),jG=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),VG=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),WG=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),YG=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.UpperBoundValue=a,this.LowerBoundValue=o,this.Unit=u,this.SetPointValue=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.UpperBoundValue),e.push(this.LowerBoundValue),e.push(this.Unit),e.push(this.SetPointValue),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),qG=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),XG=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.DependingProperty=a,this.DependantProperty=o,this.Expression=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.DependingProperty),e.push(this.DependantProperty),e.push(this.Expression),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),KG=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.EnumerationValues=a,this.EnumerationReference=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.EnumerationValues),e.push(this.EnumerationReference),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),QG=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.EnumerationValues=i,this.Unit=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.EnumerationValues),e.push(this.Unit),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),JG=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.ListValues=a,this.Unit=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.ListValues),e.push(this.Unit),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),$G=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.UsageName=a,this.PropertyReference=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.UsageName),e.push(this.PropertyReference),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),eH=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.HasProperties=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.HasProperties),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),tH=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),nH=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.TemplateType=u,this.ApplicableEntity=l,this.HasPropertyTemplates=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.TemplateType),e.push(this.ApplicableEntity),e.push(this.HasPropertyTemplates),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),rH=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.NominalValue=a,this.Unit=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.NominalValue),e.push(this.Unit),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),iH=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.DefiningValues=a,this.DefinedValues=o,this.Expression=u,this.DefiningUnit=l,this.DefinedUnit=c,this.CurveInterpolation=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.DefiningValues),e.push(this.DefinedValues),e.push(this.Expression),e.push(this.DefiningUnit),e.push(this.DefinedUnit),e.push(this.CurveInterpolation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),aH=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),sH=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),oH=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),uH=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),lH=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),cH=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),hH=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.ProxyType=h,this.Tag=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.ProxyType),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),pH=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),fH=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),dH=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Unit=a,this.AreaValue=o,this.Formula=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Unit),e.push(this.AreaValue),e.push(this.Formula),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),vH=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Unit=a,this.CountValue=o,this.Formula=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Unit),e.push(this.CountValue),e.push(this.Formula),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),mH=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Unit=a,this.LengthValue=o,this.Formula=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Unit),e.push(this.LengthValue),e.push(this.Formula),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),yH=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),gH=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Unit=a,this.TimeValue=o,this.Formula=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Unit),e.push(this.TimeValue),e.push(this.Formula),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),_H=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Unit=a,this.VolumeValue=o,this.Formula=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Unit),e.push(this.VolumeValue),e.push(this.Formula),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),TH=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.Unit=a,this.WeightValue=o,this.Formula=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.Unit),e.push(this.WeightValue),e.push(this.Formula),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),EH=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),xH=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),bH=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),IH=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),wH=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),kH=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),SH=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Degree=r,this.ControlPointsList=i,this.CurveForm=a,this.ClosedCurve=o,this.SelfIntersect=u,this.KnotMultiplicities=l,this.Knots=c,this.KnotSpec=h,this.WeightsData=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Degree),e.push(this.ControlPointsList),e.push(this.CurveForm),e.push(this.ClosedCurve),e.push(this.SelfIntersect),e.push(this.KnotMultiplicities),e.push(this.Knots),e.push(this.KnotSpec),e.push(this.WeightsData),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),RH=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.UDegree=r,this.VDegree=i,this.ControlPointsList=a,this.SurfaceForm=o,this.UClosed=u,this.VClosed=l,this.SelfIntersect=c,this.UMultiplicities=h,this.VMultiplicities=p,this.UKnots=f,this.VKnots=d,this.KnotSpec=v,this.WeightsData=m}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.UDegree),e.push(this.VDegree),e.push(this.ControlPointsList),e.push(this.SurfaceForm),e.push(this.UClosed),e.push(this.VClosed),e.push(this.SelfIntersect),e.push(this.UMultiplicities),e.push(this.VMultiplicities),e.push(this.UKnots),e.push(this.VKnots),e.push(this.KnotSpec),e.push(this.WeightsData),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),CH=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Position=a,this.XDim=o,this.YDim=u,this.WallThickness=l,this.InnerFilletRadius=c,this.OuterFilletRadius=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Position),e.push(this.XDim),e.push(this.YDim),e.push(this.WallThickness),e.push(this.InnerFilletRadius),e.push(this.OuterFilletRadius),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),DH=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Position=a,this.XDim=o,this.YDim=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Position),e.push(this.XDim),e.push(this.YDim),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),AH=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Position=r,this.XLength=i,this.YLength=a,this.Height=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Position),e.push(this.XLength),e.push(this.YLength),e.push(this.Height),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),OH=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.BasisSurface=r,this.U1=i,this.V1=a,this.U2=o,this.V2=u,this.Usense=l,this.Vsense=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.BasisSurface),e.push(this.U1),e.push(this.V1),e.push(this.U2),e.push(this.V2),e.push(this.Usense),e.push(this.Vsense),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),NH=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.RecurrenceType=r,this.DayComponent=i,this.WeekdayComponent=a,this.MonthComponent=o,this.Position=u,this.Interval=l,this.Occurrences=c,this.TimePeriods=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.RecurrenceType),e.push(this.DayComponent),e.push(this.WeekdayComponent),e.push(this.MonthComponent),e.push(this.Position),e.push(this.Interval),e.push(this.Occurrences),e.push(this.TimePeriods),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),MH=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.TypeIdentifier=r,this.AttributeIdentifier=i,this.InstanceName=a,this.ListPositions=o,this.InnerReference=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.TypeIdentifier),e.push(this.AttributeIdentifier),e.push(this.InstanceName),e.push(this.ListPositions),e.push(this.InnerReference),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),PH=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.PredefinedType=h,this.RestartDistance=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.PredefinedType),e.push(this.RestartDistance),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),FH=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.StartTime=a,this.EndTime=o,this.TimeSeriesDataType=u,this.DataOrigin=l,this.UserDefinedDataOrigin=c,this.Unit=h,this.TimeStep=p,this.Values=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.StartTime),e.push(this.EndTime),e.push(this.TimeSeriesDataType),e.push(this.DataOrigin),e.push(this.UserDefinedDataOrigin),e.push(this.Unit),e.push(this.TimeStep),e.push(this.Values),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),LH=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.TotalCrossSectionArea=r,this.SteelGrade=i,this.BarSurface=a,this.EffectiveDepth=o,this.NominalBarDiameter=u,this.BarCount=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.TotalCrossSectionArea),e.push(this.SteelGrade),e.push(this.BarSurface),e.push(this.EffectiveDepth),e.push(this.NominalBarDiameter),e.push(this.BarCount),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),UH=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.DefinitionType=u,this.ReinforcementSectionDefinitions=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.DefinitionType),e.push(this.ReinforcementSectionDefinitions),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),ZH=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m,y){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.SteelGrade=p,this.NominalDiameter=f,this.CrossSectionArea=d,this.BarLength=v,this.PredefinedType=m,this.BarSurface=y}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.SteelGrade),e.push(this.NominalDiameter),e.push(this.CrossSectionArea),e.push(this.BarLength),e.push(this.PredefinedType),e.push(this.BarSurface),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),BH=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m,y,g,_){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f,this.NominalDiameter=d,this.CrossSectionArea=v,this.BarLength=m,this.BarSurface=y,this.BendingShapeCode=g,this.BendingParameters=_}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e.push(this.NominalDiameter),e.push(this.CrossSectionArea),e.push(this.BarLength),e.push(this.BarSurface),e.push(this.BendingShapeCode),e.push(this.BendingParameters),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),zH=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.SteelGrade=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.SteelGrade),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),GH=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),HH=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m,y,g,_,T,E){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.SteelGrade=p,this.MeshLength=f,this.MeshWidth=d,this.LongitudinalBarNominalDiameter=v,this.TransverseBarNominalDiameter=m,this.LongitudinalBarCrossSectionArea=y,this.TransverseBarCrossSectionArea=g,this.LongitudinalBarSpacing=_,this.TransverseBarSpacing=T,this.PredefinedType=E}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.SteelGrade),e.push(this.MeshLength),e.push(this.MeshWidth),e.push(this.LongitudinalBarNominalDiameter),e.push(this.TransverseBarNominalDiameter),e.push(this.LongitudinalBarCrossSectionArea),e.push(this.TransverseBarCrossSectionArea),e.push(this.LongitudinalBarSpacing),e.push(this.TransverseBarSpacing),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),jH=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m,y,g,_,T,E,x,b){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f,this.MeshLength=d,this.MeshWidth=v,this.LongitudinalBarNominalDiameter=m,this.TransverseBarNominalDiameter=y,this.LongitudinalBarCrossSectionArea=g,this.TransverseBarCrossSectionArea=_,this.LongitudinalBarSpacing=T,this.TransverseBarSpacing=E,this.BendingShapeCode=x,this.BendingParameters=b}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e.push(this.MeshLength),e.push(this.MeshWidth),e.push(this.LongitudinalBarNominalDiameter),e.push(this.TransverseBarNominalDiameter),e.push(this.LongitudinalBarCrossSectionArea),e.push(this.TransverseBarCrossSectionArea),e.push(this.LongitudinalBarSpacing),e.push(this.TransverseBarSpacing),e.push(this.BendingShapeCode),e.push(this.BendingParameters),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),VH=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingObject=u,this.RelatedObjects=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingObject),e.push(this.RelatedObjects),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),WH=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.RelatedObjectsType=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.RelatedObjectsType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),YH=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.RelatedObjectsType=l,this.RelatingActor=c,this.ActingRole=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.RelatedObjectsType),e.push(this.RelatingActor),e.push(this.ActingRole),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),qH=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.RelatedObjectsType=l,this.RelatingControl=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.RelatedObjectsType),e.push(this.RelatingControl),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),XH=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.RelatedObjectsType=l,this.RelatingGroup=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.RelatedObjectsType),e.push(this.RelatingGroup),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),KH=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.RelatedObjectsType=l,this.RelatingGroup=c,this.Factor=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.RelatedObjectsType),e.push(this.RelatingGroup),e.push(this.Factor),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),QH=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.RelatedObjectsType=l,this.RelatingProcess=c,this.QuantityInProcess=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.RelatedObjectsType),e.push(this.RelatingProcess),e.push(this.QuantityInProcess),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),JH=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.RelatedObjectsType=l,this.RelatingProduct=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.RelatedObjectsType),e.push(this.RelatingProduct),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),$H=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.RelatedObjectsType=l,this.RelatingResource=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.RelatedObjectsType),e.push(this.RelatingResource),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),ej=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),tj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.RelatingApproval=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.RelatingApproval),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),nj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.RelatingClassification=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.RelatingClassification),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),rj=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.Intent=l,this.RelatingConstraint=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.Intent),e.push(this.RelatingConstraint),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),ij=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.RelatingDocument=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.RelatingDocument),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),aj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.RelatingLibrary=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.RelatingLibrary),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),sj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.RelatingMaterial=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.RelatingMaterial),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),oj=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),uj=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ConnectionGeometry=u,this.RelatingElement=l,this.RelatedElement=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ConnectionGeometry),e.push(this.RelatingElement),e.push(this.RelatedElement),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),lj=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ConnectionGeometry=u,this.RelatingElement=l,this.RelatedElement=c,this.RelatingPriorities=h,this.RelatedPriorities=p,this.RelatedConnectionType=f,this.RelatingConnectionType=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ConnectionGeometry),e.push(this.RelatingElement),e.push(this.RelatedElement),e.push(this.RelatingPriorities),e.push(this.RelatedPriorities),e.push(this.RelatedConnectionType),e.push(this.RelatingConnectionType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),cj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingPort=u,this.RelatedElement=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingPort),e.push(this.RelatedElement),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),hj=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingPort=u,this.RelatedPort=l,this.RealizingElement=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingPort),e.push(this.RelatedPort),e.push(this.RealizingElement),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),pj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingElement=u,this.RelatedStructuralActivity=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingElement),e.push(this.RelatedStructuralActivity),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),fj=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingStructuralMember=u,this.RelatedStructuralConnection=l,this.AppliedCondition=c,this.AdditionalConditions=h,this.SupportedLength=p,this.ConditionCoordinateSystem=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingStructuralMember),e.push(this.RelatedStructuralConnection),e.push(this.AppliedCondition),e.push(this.AdditionalConditions),e.push(this.SupportedLength),e.push(this.ConditionCoordinateSystem),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),dj=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingStructuralMember=u,this.RelatedStructuralConnection=l,this.AppliedCondition=c,this.AdditionalConditions=h,this.SupportedLength=p,this.ConditionCoordinateSystem=f,this.ConnectionConstraint=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingStructuralMember),e.push(this.RelatedStructuralConnection),e.push(this.AppliedCondition),e.push(this.AdditionalConditions),e.push(this.SupportedLength),e.push(this.ConditionCoordinateSystem),e.push(this.ConnectionConstraint),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),vj=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ConnectionGeometry=u,this.RelatingElement=l,this.RelatedElement=c,this.RealizingElements=h,this.ConnectionType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ConnectionGeometry),e.push(this.RelatingElement),e.push(this.RelatedElement),e.push(this.RealizingElements),e.push(this.ConnectionType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),mj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedElements=u,this.RelatingStructure=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedElements),e.push(this.RelatingStructure),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),yj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingBuildingElement=u,this.RelatedCoverings=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingBuildingElement),e.push(this.RelatedCoverings),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),gj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingSpace=u,this.RelatedCoverings=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingSpace),e.push(this.RelatedCoverings),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),_j=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingContext=u,this.RelatedDefinitions=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingContext),e.push(this.RelatedDefinitions),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Tj=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),Ej=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),xj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.RelatingObject=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.RelatingObject),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),bj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.RelatingPropertyDefinition=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.RelatingPropertyDefinition),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Ij=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedPropertySets=u,this.RelatingTemplate=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedPropertySets),e.push(this.RelatingTemplate),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),wj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedObjects=u,this.RelatingType=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedObjects),e.push(this.RelatingType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),kj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingOpeningElement=u,this.RelatedBuildingElement=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingOpeningElement),e.push(this.RelatedBuildingElement),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Sj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedControlElements=u,this.RelatingFlowElement=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedControlElements),e.push(this.RelatingFlowElement),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Rj=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingElement=u,this.RelatedElement=l,this.InterferenceGeometry=c,this.InterferenceType=h,this.ImpliedOrder=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingElement),e.push(this.RelatedElement),e.push(this.InterferenceGeometry),e.push(this.InterferenceType),e.push(this.ImpliedOrder),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Cj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingObject=u,this.RelatedObjects=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingObject),e.push(this.RelatedObjects),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Dj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingPositioningElement=u,this.RelatedProducts=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingPositioningElement),e.push(this.RelatedProducts),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Aj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingElement=u,this.RelatedFeatureElement=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingElement),e.push(this.RelatedFeatureElement),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Oj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatedElements=u,this.RelatingStructure=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatedElements),e.push(this.RelatingStructure),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Nj=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingProcess=u,this.RelatedProcess=l,this.TimeLag=c,this.SequenceType=h,this.UserDefinedSequenceType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingProcess),e.push(this.RelatedProcess),e.push(this.TimeLag),e.push(this.SequenceType),e.push(this.UserDefinedSequenceType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Mj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingSystem=u,this.RelatedBuildings=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingSystem),e.push(this.RelatedBuildings),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Pj=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingSpace=u,this.RelatedBuildingElement=l,this.ConnectionGeometry=c,this.PhysicalOrVirtualBoundary=h,this.InternalOrExternalBoundary=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingSpace),e.push(this.RelatedBuildingElement),e.push(this.ConnectionGeometry),e.push(this.PhysicalOrVirtualBoundary),e.push(this.InternalOrExternalBoundary),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Fj=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingSpace=u,this.RelatedBuildingElement=l,this.ConnectionGeometry=c,this.PhysicalOrVirtualBoundary=h,this.InternalOrExternalBoundary=p,this.ParentBoundary=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingSpace),e.push(this.RelatedBuildingElement),e.push(this.ConnectionGeometry),e.push(this.PhysicalOrVirtualBoundary),e.push(this.InternalOrExternalBoundary),e.push(this.ParentBoundary),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Lj=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingSpace=u,this.RelatedBuildingElement=l,this.ConnectionGeometry=c,this.PhysicalOrVirtualBoundary=h,this.InternalOrExternalBoundary=p,this.ParentBoundary=f,this.CorrespondingBoundary=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingSpace),e.push(this.RelatedBuildingElement),e.push(this.ConnectionGeometry),e.push(this.PhysicalOrVirtualBoundary),e.push(this.InternalOrExternalBoundary),e.push(this.ParentBoundary),e.push(this.CorrespondingBoundary),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Uj=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.RelatingBuildingElement=u,this.RelatedOpeningElement=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.RelatingBuildingElement),e.push(this.RelatedOpeningElement),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Zj=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),Bj=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Transition=r,this.SameSense=i,this.ParentCurve=a,this.ParamLength=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Transition),e.push(this.SameSense),e.push(this.ParentCurve),e.push(this.ParamLength),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),zj=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ContextOfItems=r,this.RepresentationIdentifier=i,this.RepresentationType=a,this.Items=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ContextOfItems),e.push(this.RepresentationIdentifier),e.push(this.RepresentationType),e.push(this.Items),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),Gj=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ContextIdentifier=r,this.ContextType=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ContextIdentifier),e.push(this.ContextType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),Hj=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),jj=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.MappingOrigin=r,this.MappedRepresentation=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.MappingOrigin),e.push(this.MappedRepresentation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),Vj=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.LongDescription=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.LongDescription),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Wj=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.RelatedResourceObjects=a,this.RelatingApproval=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.RelatedResourceObjects),e.push(this.RelatingApproval),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),Yj=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.RelatingConstraint=a,this.RelatedResourceObjects=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.RelatingConstraint),e.push(this.RelatedResourceObjects),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),qj=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),Xj=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m,y,g,_,T,E){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.DataOrigin=i,this.UserDefinedDataOrigin=a,this.ScheduleWork=o,this.ScheduleUsage=u,this.ScheduleStart=l,this.ScheduleFinish=c,this.ScheduleContour=h,this.LevelingDelay=p,this.IsOverAllocated=f,this.StatusTime=d,this.ActualWork=v,this.ActualUsage=m,this.ActualStart=y,this.ActualFinish=g,this.RemainingWork=_,this.RemainingUsage=T,this.Completion=E}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.DataOrigin),e.push(this.UserDefinedDataOrigin),e.push(this.ScheduleWork),e.push(this.ScheduleUsage),e.push(this.ScheduleStart),e.push(this.ScheduleFinish),e.push(this.ScheduleContour),e.push(this.LevelingDelay),e.push(this.IsOverAllocated),e.push(this.StatusTime),e.push(this.ActualWork),e.push(this.ActualUsage),e.push(this.ActualStart),e.push(this.ActualFinish),e.push(this.RemainingWork),e.push(this.RemainingUsage),e.push(this.Completion),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Kj=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SweptArea=r,this.Position=i,this.Axis=a,this.Angle=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SweptArea),e.push(this.Position),e.push(this.Axis),e.push(this.Angle),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),Qj=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SweptArea=r,this.Position=i,this.Axis=a,this.Angle=o,this.EndSweptArea=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SweptArea),e.push(this.Position),e.push(this.Axis),e.push(this.Angle),e.push(this.EndSweptArea),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Jj=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Position=r,this.Height=i,this.BottomRadius=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Position),e.push(this.Height),e.push(this.BottomRadius),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),$j=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Position=r,this.Height=i,this.Radius=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Position),e.push(this.Height),e.push(this.Radius),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),eV=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),tV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),nV=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),rV=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Position=a,this.XDim=o,this.YDim=u,this.RoundingRadius=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Position),e.push(this.XDim),e.push(this.YDim),e.push(this.RoundingRadius),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),iV=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Dimensions=r,this.UnitType=i,this.Prefix=a,this.Name=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Dimensions),e.push(this.UnitType),e.push(this.Prefix),e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),aV=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),sV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),oV=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.DataOrigin=i,this.UserDefinedDataOrigin=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.DataOrigin),e.push(this.UserDefinedDataOrigin),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),uV=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Curve3D=r,this.AssociatedGeometry=i,this.MasterRepresentation=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Curve3D),e.push(this.AssociatedGeometry),e.push(this.MasterRepresentation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),lV=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SectionType=r,this.StartProfile=i,this.EndProfile=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SectionType),e.push(this.StartProfile),e.push(this.EndProfile),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),cV=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.LongitudinalStartPosition=r,this.LongitudinalEndPosition=i,this.TransversePosition=a,this.ReinforcementRole=o,this.SectionDefinition=u,this.CrossSectionReinforcementDefinitions=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.LongitudinalStartPosition),e.push(this.LongitudinalEndPosition),e.push(this.TransversePosition),e.push(this.ReinforcementRole),e.push(this.SectionDefinition),e.push(this.CrossSectionReinforcementDefinitions),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),hV=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Directrix=r,this.CrossSections=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Directrix),e.push(this.CrossSections),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),pV=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Directrix=r,this.CrossSections=i,this.CrossSectionPositions=a,this.FixedAxisVertical=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Directrix),e.push(this.CrossSections),e.push(this.CrossSectionPositions),e.push(this.FixedAxisVertical),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),fV=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SpineCurve=r,this.CrossSections=i,this.CrossSectionPositions=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SpineCurve),e.push(this.CrossSections),e.push(this.CrossSectionPositions),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),dV=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),vV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),mV=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),yV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),gV=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ShapeRepresentations=r,this.Name=i,this.Description=a,this.ProductDefinitional=o,this.PartOfProductDefinitionShape=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ShapeRepresentations),e.push(this.Name),e.push(this.Description),e.push(this.ProductDefinitional),e.push(this.PartOfProductDefinitionShape),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),_V=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ContextOfItems=r,this.RepresentationIdentifier=i,this.RepresentationType=a,this.Items=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ContextOfItems),e.push(this.RepresentationIdentifier),e.push(this.RepresentationType),e.push(this.Items),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),TV=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ContextOfItems=r,this.RepresentationIdentifier=i,this.RepresentationType=a,this.Items=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ContextOfItems),e.push(this.RepresentationIdentifier),e.push(this.RepresentationType),e.push(this.Items),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),EV=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SbsmBoundary=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SbsmBoundary),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),xV=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),bV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.TemplateType=u,this.PrimaryMeasureType=l,this.SecondaryMeasureType=c,this.Enumerators=h,this.PrimaryUnit=p,this.SecondaryUnit=f,this.Expression=d,this.AccessState=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.TemplateType),e.push(this.PrimaryMeasureType),e.push(this.SecondaryMeasureType),e.push(this.Enumerators),e.push(this.PrimaryUnit),e.push(this.SecondaryUnit),e.push(this.Expression),e.push(this.AccessState),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),IV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m,y){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.LongName=h,this.CompositionType=p,this.RefLatitude=f,this.RefLongitude=d,this.RefElevation=v,this.LandTitleNumber=m,this.SiteAddress=y}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.LongName),e.push(this.CompositionType),e.push(this.RefLatitude),e.push(this.RefLongitude),e.push(this.RefElevation),e.push(this.LandTitleNumber),e.push(this.SiteAddress),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),wV=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),kV=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),SV=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),RV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),CV=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.SlippageX=i,this.SlippageY=a,this.SlippageZ=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.SlippageX),e.push(this.SlippageY),e.push(this.SlippageZ),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),DV=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),AV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),OV=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),NV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.LongName=h,this.CompositionType=p,this.PredefinedType=f,this.ElevationWithFlooring=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.LongName),e.push(this.CompositionType),e.push(this.PredefinedType),e.push(this.ElevationWithFlooring),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),MV=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),PV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),FV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f,this.LongName=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e.push(this.LongName),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),LV=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.LongName=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.LongName),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),UV=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),ZV=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.LongName=h,this.CompositionType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.LongName),e.push(this.CompositionType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),BV=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),zV=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.LongName=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.LongName),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),GV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f,this.LongName=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e.push(this.LongName),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),HV=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Position=r,this.Radius=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Position),e.push(this.Radius),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),jV=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Position=r,this.Radius=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Position),e.push(this.Radius),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),VV=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),WV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),YV=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),qV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.NumberOfRisers=p,this.NumberOfTreads=f,this.RiserHeight=d,this.TreadLength=v,this.PredefinedType=m}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.NumberOfRisers),e.push(this.NumberOfTreads),e.push(this.RiserHeight),e.push(this.TreadLength),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),XV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),KV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),QV=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.AppliedLoad=h,this.GlobalOrLocal=p,this.DestabilizingLoad=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.AppliedLoad),e.push(this.GlobalOrLocal),e.push(this.DestabilizingLoad),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),JV=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.AppliedLoad=h,this.GlobalOrLocal=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.AppliedLoad),e.push(this.GlobalOrLocal),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),$V=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.PredefinedType=l,this.OrientationOf2DPlane=c,this.LoadedBy=h,this.HasResults=p,this.SharedPlacement=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.PredefinedType),e.push(this.OrientationOf2DPlane),e.push(this.LoadedBy),e.push(this.HasResults),e.push(this.SharedPlacement),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),eW=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.AppliedCondition=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.AppliedCondition),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),tW=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),nW=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.AppliedLoad=h,this.GlobalOrLocal=p,this.DestabilizingLoad=f,this.ProjectedOrTrue=d,this.PredefinedType=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.AppliedLoad),e.push(this.GlobalOrLocal),e.push(this.DestabilizingLoad),e.push(this.ProjectedOrTrue),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),rW=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.AppliedCondition=h,this.Axis=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.AppliedCondition),e.push(this.Axis),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),iW=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.PredefinedType=h,this.Axis=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.PredefinedType),e.push(this.Axis),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),aW=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.PredefinedType=h,this.Axis=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.PredefinedType),e.push(this.Axis),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),sW=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.AppliedLoad=h,this.GlobalOrLocal=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.AppliedLoad),e.push(this.GlobalOrLocal),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),oW=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),uW=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.AppliedLoad=h,this.GlobalOrLocal=p,this.DestabilizingLoad=f,this.ProjectedOrTrue=d,this.PredefinedType=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.AppliedLoad),e.push(this.GlobalOrLocal),e.push(this.DestabilizingLoad),e.push(this.ProjectedOrTrue),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),lW=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),cW=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.PredefinedType=l,this.ActionType=c,this.ActionSource=h,this.Coefficient=p,this.Purpose=f,this.SelfWeightCoefficients=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.PredefinedType),e.push(this.ActionType),e.push(this.ActionSource),e.push(this.Coefficient),e.push(this.Purpose),e.push(this.SelfWeightCoefficients),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),hW=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Values=i,this.Locations=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Values),e.push(this.Locations),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),pW=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.PredefinedType=l,this.ActionType=c,this.ActionSource=h,this.Coefficient=p,this.Purpose=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.PredefinedType),e.push(this.ActionType),e.push(this.ActionSource),e.push(this.Coefficient),e.push(this.Purpose),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),fW=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.LinearForceX=i,this.LinearForceY=a,this.LinearForceZ=o,this.LinearMomentX=u,this.LinearMomentY=l,this.LinearMomentZ=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.LinearForceX),e.push(this.LinearForceY),e.push(this.LinearForceZ),e.push(this.LinearMomentX),e.push(this.LinearMomentY),e.push(this.LinearMomentZ),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),dW=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),vW=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.PlanarForceX=i,this.PlanarForceY=a,this.PlanarForceZ=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.PlanarForceX),e.push(this.PlanarForceY),e.push(this.PlanarForceZ),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),mW=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.DisplacementX=i,this.DisplacementY=a,this.DisplacementZ=o,this.RotationalDisplacementRX=u,this.RotationalDisplacementRY=l,this.RotationalDisplacementRZ=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.DisplacementX),e.push(this.DisplacementY),e.push(this.DisplacementZ),e.push(this.RotationalDisplacementRX),e.push(this.RotationalDisplacementRY),e.push(this.RotationalDisplacementRZ),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),yW=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.DisplacementX=i,this.DisplacementY=a,this.DisplacementZ=o,this.RotationalDisplacementRX=u,this.RotationalDisplacementRY=l,this.RotationalDisplacementRZ=c,this.Distortion=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.DisplacementX),e.push(this.DisplacementY),e.push(this.DisplacementZ),e.push(this.RotationalDisplacementRX),e.push(this.RotationalDisplacementRY),e.push(this.RotationalDisplacementRZ),e.push(this.Distortion),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),gW=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.ForceX=i,this.ForceY=a,this.ForceZ=o,this.MomentX=u,this.MomentY=l,this.MomentZ=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.ForceX),e.push(this.ForceY),e.push(this.ForceZ),e.push(this.MomentX),e.push(this.MomentY),e.push(this.MomentZ),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),_W=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.ForceX=i,this.ForceY=a,this.ForceZ=o,this.MomentX=u,this.MomentY=l,this.MomentZ=c,this.WarpingMoment=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.ForceX),e.push(this.ForceY),e.push(this.ForceZ),e.push(this.MomentX),e.push(this.MomentY),e.push(this.MomentZ),e.push(this.WarpingMoment),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),TW=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),EW=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.DeltaTConstant=i,this.DeltaTY=a,this.DeltaTZ=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.DeltaTConstant),e.push(this.DeltaTY),e.push(this.DeltaTZ),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),xW=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),bW=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.AppliedLoad=h,this.GlobalOrLocal=p,this.DestabilizingLoad=f,this.ProjectedOrTrue=d,this.PredefinedType=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.AppliedLoad),e.push(this.GlobalOrLocal),e.push(this.DestabilizingLoad),e.push(this.ProjectedOrTrue),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),IW=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.AppliedLoad=h,this.GlobalOrLocal=p,this.DestabilizingLoad=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.AppliedLoad),e.push(this.GlobalOrLocal),e.push(this.DestabilizingLoad),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),wW=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.AppliedCondition=h,this.ConditionCoordinateSystem=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.AppliedCondition),e.push(this.ConditionCoordinateSystem),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),kW=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.AppliedLoad=h,this.GlobalOrLocal=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.AppliedLoad),e.push(this.GlobalOrLocal),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),SW=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.AppliedLoad=h,this.GlobalOrLocal=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.AppliedLoad),e.push(this.GlobalOrLocal),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),RW=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.TheoryType=l,this.ResultForLoadGroup=c,this.IsLinear=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.TheoryType),e.push(this.ResultForLoadGroup),e.push(this.IsLinear),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),CW=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.AppliedLoad=h,this.GlobalOrLocal=p,this.DestabilizingLoad=f,this.ProjectedOrTrue=d,this.PredefinedType=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.AppliedLoad),e.push(this.GlobalOrLocal),e.push(this.DestabilizingLoad),e.push(this.ProjectedOrTrue),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),DW=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.AppliedCondition=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.AppliedCondition),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),AW=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.PredefinedType=h,this.Thickness=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.PredefinedType),e.push(this.Thickness),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),OW=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.PredefinedType=h,this.Thickness=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.PredefinedType),e.push(this.Thickness),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),NW=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.AppliedLoad=h,this.GlobalOrLocal=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.AppliedLoad),e.push(this.GlobalOrLocal),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),MW=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ContextOfItems=r,this.RepresentationIdentifier=i,this.RepresentationType=a,this.Items=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ContextOfItems),e.push(this.RepresentationIdentifier),e.push(this.RepresentationType),e.push(this.Items),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),PW=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Item=r,this.Styles=i,this.Name=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Item),e.push(this.Styles),e.push(this.Name),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),FW=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ContextOfItems=r,this.RepresentationIdentifier=i,this.RepresentationType=a,this.Items=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ContextOfItems),e.push(this.RepresentationIdentifier),e.push(this.RepresentationType),e.push(this.Items),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),LW=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.LongDescription=c,this.Usage=h,this.BaseCosts=p,this.BaseQuantity=f,this.PredefinedType=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.LongDescription),e.push(this.Usage),e.push(this.BaseCosts),e.push(this.BaseQuantity),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),UW=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.Identification=c,this.LongDescription=h,this.ResourceType=p,this.BaseCosts=f,this.BaseQuantity=d,this.PredefinedType=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.Identification),e.push(this.LongDescription),e.push(this.ResourceType),e.push(this.BaseCosts),e.push(this.BaseQuantity),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),ZW=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.EdgeStart=r,this.EdgeEnd=i,this.ParentEdge=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.EdgeStart),e.push(this.EdgeEnd),e.push(this.ParentEdge),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),BW=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),zW=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Curve3D=r,this.AssociatedGeometry=i,this.MasterRepresentation=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Curve3D),e.push(this.AssociatedGeometry),e.push(this.MasterRepresentation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),GW=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SweptArea=r,this.Position=i,this.Directrix=a,this.StartParam=o,this.EndParam=u,this.ReferenceSurface=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SweptArea),e.push(this.Position),e.push(this.Directrix),e.push(this.StartParam),e.push(this.EndParam),e.push(this.ReferenceSurface),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),HW=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),jW=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SweptCurve=r,this.Position=i,this.ExtrudedDirection=a,this.Depth=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SweptCurve),e.push(this.Position),e.push(this.ExtrudedDirection),e.push(this.Depth),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),VW=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SweptCurve=r,this.Position=i,this.AxisPosition=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SweptCurve),e.push(this.Position),e.push(this.AxisPosition),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),WW=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.SurfaceReinforcement1=i,this.SurfaceReinforcement2=a,this.ShearReinforcement=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.SurfaceReinforcement1),e.push(this.SurfaceReinforcement2),e.push(this.ShearReinforcement),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),YW=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Side=i,this.Styles=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Side),e.push(this.Styles),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),qW=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.DiffuseTransmissionColour=r,this.DiffuseReflectionColour=i,this.TransmissionColour=a,this.ReflectanceColour=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.DiffuseTransmissionColour),e.push(this.DiffuseReflectionColour),e.push(this.TransmissionColour),e.push(this.ReflectanceColour),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),XW=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.RefractionIndex=r,this.DispersionFactor=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.RefractionIndex),e.push(this.DispersionFactor),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),KW=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SurfaceColour=r,this.Transparency=i,this.DiffuseColour=a,this.TransmissionColour=o,this.DiffuseTransmissionColour=u,this.ReflectionColour=l,this.SpecularColour=c,this.SpecularHighlight=h,this.ReflectanceMethod=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SurfaceColour),e.push(this.Transparency),e.push(this.DiffuseColour),e.push(this.TransmissionColour),e.push(this.DiffuseTransmissionColour),e.push(this.ReflectionColour),e.push(this.SpecularColour),e.push(this.SpecularHighlight),e.push(this.ReflectanceMethod),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),QW=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SurfaceColour=r,this.Transparency=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SurfaceColour),e.push(this.Transparency),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),JW=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Textures=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Textures),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),$W=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.RepeatS=r,this.RepeatT=i,this.Mode=a,this.TextureTransform=o,this.Parameter=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.RepeatS),e.push(this.RepeatT),e.push(this.Mode),e.push(this.TextureTransform),e.push(this.Parameter),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),eY=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SweptArea=r,this.Position=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SweptArea),e.push(this.Position),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),tY=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Directrix=r,this.Radius=i,this.InnerRadius=a,this.StartParam=o,this.EndParam=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Directrix),e.push(this.Radius),e.push(this.InnerRadius),e.push(this.StartParam),e.push(this.EndParam),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),nY=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Directrix=r,this.Radius=i,this.InnerRadius=a,this.StartParam=o,this.EndParam=u,this.FilletRadius=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Directrix),e.push(this.Radius),e.push(this.InnerRadius),e.push(this.StartParam),e.push(this.EndParam),e.push(this.FilletRadius),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),rY=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.SweptCurve=r,this.Position=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.SweptCurve),e.push(this.Position),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),iY=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),aY=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),sY=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),oY=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),uY=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),lY=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Position=a,this.Depth=o,this.FlangeWidth=u,this.WebThickness=l,this.FlangeThickness=c,this.FilletRadius=h,this.FlangeEdgeRadius=p,this.WebEdgeRadius=f,this.WebSlope=d,this.FlangeSlope=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Position),e.push(this.Depth),e.push(this.FlangeWidth),e.push(this.WebThickness),e.push(this.FlangeThickness),e.push(this.FilletRadius),e.push(this.FlangeEdgeRadius),e.push(this.WebEdgeRadius),e.push(this.WebSlope),e.push(this.FlangeSlope),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),cY=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Rows=i,this.Columns=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Rows),e.push(this.Columns),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),hY=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Identifier=r,this.Name=i,this.Description=a,this.Unit=o,this.ReferencePath=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Identifier),e.push(this.Name),e.push(this.Description),e.push(this.Unit),e.push(this.ReferencePath),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),pY=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.RowCells=r,this.IsHeading=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.RowCells),e.push(this.IsHeading),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),fY=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),dY=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),vY=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.LongDescription=c,this.Status=h,this.WorkMethod=p,this.IsMilestone=f,this.Priority=d,this.TaskTime=v,this.PredefinedType=m}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.LongDescription),e.push(this.Status),e.push(this.WorkMethod),e.push(this.IsMilestone),e.push(this.Priority),e.push(this.TaskTime),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),mY=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m,y,g,_,T,E,x,b){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.DataOrigin=i,this.UserDefinedDataOrigin=a,this.DurationType=o,this.ScheduleDuration=u,this.ScheduleStart=l,this.ScheduleFinish=c,this.EarlyStart=h,this.EarlyFinish=p,this.LateStart=f,this.LateFinish=d,this.FreeFloat=v,this.TotalFloat=m,this.IsCritical=y,this.StatusTime=g,this.ActualDuration=_,this.ActualStart=T,this.ActualFinish=E,this.RemainingTime=x,this.Completion=b}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.DataOrigin),e.push(this.UserDefinedDataOrigin),e.push(this.DurationType),e.push(this.ScheduleDuration),e.push(this.ScheduleStart),e.push(this.ScheduleFinish),e.push(this.EarlyStart),e.push(this.EarlyFinish),e.push(this.LateStart),e.push(this.LateFinish),e.push(this.FreeFloat),e.push(this.TotalFloat),e.push(this.IsCritical),e.push(this.StatusTime),e.push(this.ActualDuration),e.push(this.ActualStart),e.push(this.ActualFinish),e.push(this.RemainingTime),e.push(this.Completion),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),yY=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m,y,g,_,T,E,x,b,I){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.DataOrigin=i,this.UserDefinedDataOrigin=a,this.DurationType=o,this.ScheduleDuration=u,this.ScheduleStart=l,this.ScheduleFinish=c,this.EarlyStart=h,this.EarlyFinish=p,this.LateStart=f,this.LateFinish=d,this.FreeFloat=v,this.TotalFloat=m,this.IsCritical=y,this.StatusTime=g,this.ActualDuration=_,this.ActualStart=T,this.ActualFinish=E,this.RemainingTime=x,this.Completion=b,this.Recurrence=I}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.DataOrigin),e.push(this.UserDefinedDataOrigin),e.push(this.DurationType),e.push(this.ScheduleDuration),e.push(this.ScheduleStart),e.push(this.ScheduleFinish),e.push(this.EarlyStart),e.push(this.EarlyFinish),e.push(this.LateStart),e.push(this.LateFinish),e.push(this.FreeFloat),e.push(this.TotalFloat),e.push(this.IsCritical),e.push(this.StatusTime),e.push(this.ActualDuration),e.push(this.ActualStart),e.push(this.ActualFinish),e.push(this.RemainingTime),e.push(this.Completion),e.push(this.Recurrence),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),gY=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.Identification=c,this.LongDescription=h,this.ProcessType=p,this.PredefinedType=f,this.WorkMethod=d}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.Identification),e.push(this.LongDescription),e.push(this.ProcessType),e.push(this.PredefinedType),e.push(this.WorkMethod),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),_Y=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Purpose=r,this.Description=i,this.UserDefinedPurpose=a,this.TelephoneNumbers=o,this.FacsimileNumbers=u,this.PagerNumber=l,this.ElectronicMailAddresses=c,this.WWWHomePageURL=h,this.MessagingIDs=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Purpose),e.push(this.Description),e.push(this.UserDefinedPurpose),e.push(this.TelephoneNumbers),e.push(this.FacsimileNumbers),e.push(this.PagerNumber),e.push(this.ElectronicMailAddresses),e.push(this.WWWHomePageURL),e.push(this.MessagingIDs),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),TY=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m,y,g,_,T){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.SteelGrade=p,this.PredefinedType=f,this.NominalDiameter=d,this.CrossSectionArea=v,this.TensionForce=m,this.PreStress=y,this.FrictionCoefficient=g,this.AnchorageSlip=_,this.MinCurvatureRadius=T}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.SteelGrade),e.push(this.PredefinedType),e.push(this.NominalDiameter),e.push(this.CrossSectionArea),e.push(this.TensionForce),e.push(this.PreStress),e.push(this.FrictionCoefficient),e.push(this.AnchorageSlip),e.push(this.MinCurvatureRadius),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),EY=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.SteelGrade=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.SteelGrade),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),xY=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),bY=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.SteelGrade=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.SteelGrade),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),IY=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),wY=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f,this.NominalDiameter=d,this.CrossSectionArea=v,this.SheathDiameter=m}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e.push(this.NominalDiameter),e.push(this.CrossSectionArea),e.push(this.SheathDiameter),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),kY=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Coordinates=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Coordinates),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),SY=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),RY=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Literal=r,this.Placement=i,this.Path=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Literal),e.push(this.Placement),e.push(this.Path),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),CY=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Literal=r,this.Placement=i,this.Path=a,this.Extent=o,this.BoxAlignment=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Literal),e.push(this.Placement),e.push(this.Path),e.push(this.Extent),e.push(this.BoxAlignment),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),DY=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.TextCharacterAppearance=i,this.TextStyle=a,this.TextFontStyle=o,this.ModelOrDraughting=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.TextCharacterAppearance),e.push(this.TextStyle),e.push(this.TextFontStyle),e.push(this.ModelOrDraughting),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),AY=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.FontFamily=i,this.FontStyle=a,this.FontVariant=o,this.FontWeight=u,this.FontSize=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.FontFamily),e.push(this.FontStyle),e.push(this.FontVariant),e.push(this.FontWeight),e.push(this.FontSize),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),OY=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Colour=r,this.BackgroundColour=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Colour),e.push(this.BackgroundColour),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),NY=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.TextIndent=r,this.TextAlign=i,this.TextDecoration=a,this.LetterSpacing=o,this.WordSpacing=u,this.TextTransform=l,this.LineHeight=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.TextIndent),e.push(this.TextAlign),e.push(this.TextDecoration),e.push(this.LetterSpacing),e.push(this.WordSpacing),e.push(this.TextTransform),e.push(this.LineHeight),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),MY=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Maps=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Maps),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),PY=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Maps=r,this.Mode=i,this.Parameter=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Maps),e.push(this.Mode),e.push(this.Parameter),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),FY=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Maps=r,this.Vertices=i,this.MappedTo=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Maps),e.push(this.Vertices),e.push(this.MappedTo),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),LY=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Coordinates=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Coordinates),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),UY=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.TexCoordsList=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.TexCoordsList),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),ZY=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.StartTime=r,this.EndTime=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.StartTime),e.push(this.EndTime),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),BY=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.Description=i,this.StartTime=a,this.EndTime=o,this.TimeSeriesDataType=u,this.DataOrigin=l,this.UserDefinedDataOrigin=c,this.Unit=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.Description),e.push(this.StartTime),e.push(this.EndTime),e.push(this.TimeSeriesDataType),e.push(this.DataOrigin),e.push(this.UserDefinedDataOrigin),e.push(this.Unit),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),zY=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ListValues=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ListValues),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),GY=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),HY=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ContextOfItems=r,this.RepresentationIdentifier=i,this.RepresentationType=a,this.Items=o}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ContextOfItems),e.push(this.RepresentationIdentifier),e.push(this.RepresentationType),e.push(this.Items),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++])}}]),e}(),jY=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Position=r,this.MajorRadius=i,this.MinorRadius=a}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Position),e.push(this.MajorRadius),e.push(this.MinorRadius),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++])}}]),e}(),VY=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),WY=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),YY=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.StartPoint=r,this.StartDirection=i,this.SegmentLength=a,this.StartRadius=o,this.EndRadius=u,this.IsStartRadiusCCW=l,this.IsEndRadiusCCW=c,this.TransitionCurveType=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.StartPoint),e.push(this.StartDirection),e.push(this.SegmentLength),e.push(this.StartRadius),e.push(this.EndRadius),e.push(this.IsStartRadiusCCW),e.push(this.IsEndRadiusCCW),e.push(this.TransitionCurveType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),qY=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),XY=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),KY=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Position=a,this.BottomXDim=o,this.TopXDim=u,this.YDim=l,this.TopXOffset=c}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Position),e.push(this.BottomXDim),e.push(this.TopXDim),e.push(this.YDim),e.push(this.TopXOffset),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),QY=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Coordinates=r,this.Normals=i,this.Closed=a,this.CoordIndex=o,this.PnIndex=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Coordinates),e.push(this.Normals),e.push(this.Closed),e.push(this.CoordIndex),e.push(this.PnIndex),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),JY=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Coordinates=r,this.Normals=i,this.Closed=a,this.CoordIndex=o,this.PnIndex=u,this.Flags=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Coordinates),e.push(this.Normals),e.push(this.Closed),e.push(this.CoordIndex),e.push(this.PnIndex),e.push(this.Flags),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),$Y=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.BasisCurve=r,this.Trim1=i,this.Trim2=a,this.SenseAgreement=o,this.MasterRepresentation=u}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.BasisCurve),e.push(this.Trim1),e.push(this.Trim2),e.push(this.SenseAgreement),e.push(this.MasterRepresentation),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),eq=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),tq=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),nq=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),rq=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.Identification=c,this.LongDescription=h,this.ProcessType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.Identification),e.push(this.LongDescription),e.push(this.ProcessType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),iq=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),aq=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.Identification=c,this.LongDescription=h,this.ResourceType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.Identification),e.push(this.LongDescription),e.push(this.ResourceType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),sq=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Position=a,this.Depth=o,this.FlangeWidth=u,this.WebThickness=l,this.FlangeThickness=c,this.FilletRadius=h,this.EdgeRadius=p,this.FlangeSlope=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Position),e.push(this.Depth),e.push(this.FlangeWidth),e.push(this.WebThickness),e.push(this.FlangeThickness),e.push(this.FilletRadius),e.push(this.EdgeRadius),e.push(this.FlangeSlope),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),oq=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Units=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Units),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),uq=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),lq=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),cq=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),hq=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),pq=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),fq=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),dq=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Orientation=r,this.Magnitude=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Orientation),e.push(this.Magnitude),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),vq=function(){function e(t,n){(0,s.Z)(this,e),this.expressID=t,this.type=n}return(0,o.Z)(e,[{key:"ToTape",value:function(){return[]}}],[{key:"FromTape",value:function(t,n,r){return new e(t,n)}}]),e}(),mq=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.LoopVertex=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.LoopVertex),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),yq=function(){function e(t,n,r){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.VertexGeometry=r}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.VertexGeometry),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++])}}]),e}(),gq=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),_q=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Tq=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Eq=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),xq=function(){function e(t,n,r,i,a,o,u,l,c,h){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),bq=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.IntersectingAxes=r,this.OffsetDistances=i}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.IntersectingAxes),e.push(this.OffsetDistances),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++])}}]),e}(),Iq=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),wq=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),kq=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Sq=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Rq=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Cq=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Dq=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Aq=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.OverallHeight=p,this.OverallWidth=f,this.PredefinedType=d,this.PartitioningType=v,this.UserDefinedPartitioningType=m}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.OverallHeight),e.push(this.OverallWidth),e.push(this.PredefinedType),e.push(this.PartitioningType),e.push(this.UserDefinedPartitioningType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Oq=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m,y,g,_){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.LiningDepth=u,this.LiningThickness=l,this.TransomThickness=c,this.MullionThickness=h,this.FirstTransomOffset=p,this.SecondTransomOffset=f,this.FirstMullionOffset=d,this.SecondMullionOffset=v,this.ShapeAspectStyle=m,this.LiningOffset=y,this.LiningToPanelOffsetX=g,this.LiningToPanelOffsetY=_}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.LiningDepth),e.push(this.LiningThickness),e.push(this.TransomThickness),e.push(this.MullionThickness),e.push(this.FirstTransomOffset),e.push(this.SecondTransomOffset),e.push(this.FirstMullionOffset),e.push(this.SecondMullionOffset),e.push(this.ShapeAspectStyle),e.push(this.LiningOffset),e.push(this.LiningToPanelOffsetX),e.push(this.LiningToPanelOffsetY),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Nq=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.OperationType=u,this.PanelPosition=l,this.FrameDepth=c,this.FrameThickness=h,this.ShapeAspectStyle=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.OperationType),e.push(this.PanelPosition),e.push(this.FrameDepth),e.push(this.FrameThickness),e.push(this.ShapeAspectStyle),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Mq=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.ObjectPlacement=l,this.Representation=c,this.Tag=h,this.OverallHeight=p,this.OverallWidth=f,this.PredefinedType=d,this.PartitioningType=v,this.UserDefinedPartitioningType=m}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.ObjectPlacement),e.push(this.Representation),e.push(this.Tag),e.push(this.OverallHeight),e.push(this.OverallWidth),e.push(this.PredefinedType),e.push(this.PartitioningType),e.push(this.UserDefinedPartitioningType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Pq=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ConstructionType=p,this.OperationType=f,this.ParameterTakesPrecedence=d,this.Sizeable=v}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ConstructionType),e.push(this.OperationType),e.push(this.ParameterTakesPrecedence),e.push(this.Sizeable),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Fq=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ApplicableOccurrence=u,this.HasPropertySets=l,this.RepresentationMaps=c,this.Tag=h,this.ElementType=p,this.PredefinedType=f,this.PartitioningType=d,this.ParameterTakesPrecedence=v,this.UserDefinedPartitioningType=m}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ApplicableOccurrence),e.push(this.HasPropertySets),e.push(this.RepresentationMaps),e.push(this.Tag),e.push(this.ElementType),e.push(this.PredefinedType),e.push(this.PartitioningType),e.push(this.ParameterTakesPrecedence),e.push(this.UserDefinedPartitioningType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Lq=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.WorkingTimes=c,this.ExceptionTimes=h,this.PredefinedType=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.WorkingTimes),e.push(this.ExceptionTimes),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Uq=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.CreationDate=c,this.Creators=h,this.Purpose=p,this.Duration=f,this.TotalFloat=d,this.StartTime=v,this.FinishTime=m}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.CreationDate),e.push(this.Creators),e.push(this.Purpose),e.push(this.Duration),e.push(this.TotalFloat),e.push(this.StartTime),e.push(this.FinishTime),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Zq=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m,y){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.CreationDate=c,this.Creators=h,this.Purpose=p,this.Duration=f,this.TotalFloat=d,this.StartTime=v,this.FinishTime=m,this.PredefinedType=y}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.CreationDate),e.push(this.Creators),e.push(this.Purpose),e.push(this.Duration),e.push(this.TotalFloat),e.push(this.StartTime),e.push(this.FinishTime),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Bq=function(){function e(t,n,r,i,a,o,u,l,c,h,p,f,d,v,m,y){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.Identification=l,this.CreationDate=c,this.Creators=h,this.Purpose=p,this.Duration=f,this.TotalFloat=d,this.StartTime=v,this.FinishTime=m,this.PredefinedType=y}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.Identification),e.push(this.CreationDate),e.push(this.Creators),e.push(this.Purpose),e.push(this.Duration),e.push(this.TotalFloat),e.push(this.StartTime),e.push(this.FinishTime),e.push(this.PredefinedType),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),zq=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.Name=r,this.DataOrigin=i,this.UserDefinedDataOrigin=a,this.RecurrencePattern=o,this.Start=u,this.Finish=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.Name),e.push(this.DataOrigin),e.push(this.UserDefinedDataOrigin),e.push(this.RecurrencePattern),e.push(this.Start),e.push(this.Finish),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Gq=function(){function e(t,n,r,i,a,o,u,l,c,h,p){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.ProfileType=r,this.ProfileName=i,this.Position=a,this.Depth=o,this.FlangeWidth=u,this.WebThickness=l,this.FlangeThickness=c,this.FilletRadius=h,this.EdgeRadius=p}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.ProfileType),e.push(this.ProfileName),e.push(this.Position),e.push(this.Depth),e.push(this.FlangeWidth),e.push(this.WebThickness),e.push(this.FlangeThickness),e.push(this.FilletRadius),e.push(this.EdgeRadius),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),Hq=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.expressID=t,this.type=n,this.GlobalId=r,this.OwnerHistory=i,this.Name=a,this.Description=o,this.ObjectType=u,this.LongName=l}return(0,o.Z)(e,[{key:"ToTape",value:function(){var e=[];return e.push(this.GlobalId),e.push(this.OwnerHistory),e.push(this.Name),e.push(this.Description),e.push(this.ObjectType),e.push(this.LongName),e}}],[{key:"FromTape",value:function(t,n,r){var i=0;return new e(t,n,r[i++],r[i++],r[i++],r[i++],r[i++],r[i++])}}]),e}(),jq={103090709:"IFCPROJECT",4097777520:"IFCSITE",4031249490:"IFCBUILDING",3124254112:"IFCBUILDINGSTOREY",3856911033:"IFCSPACE",1674181508:"IFCANNOTATION",25142252:"IFCCONTROLLER",32344328:"IFCBOILER",76236018:"IFCLAMP",90941305:"IFCPUMP",177149247:"IFCAIRTERMINALBOX",182646315:"IFCFLOWINSTRUMENT",263784265:"IFCFURNISHINGELEMENT",264262732:"IFCELECTRICGENERATOR",277319702:"IFCAUDIOVISUALAPPLIANCE",310824031:"IFCPIPEFITTING",331165859:"IFCSTAIR",342316401:"IFCDUCTFITTING",377706215:"IFCMECHANICALFASTENER",395920057:"IFCDOOR",402227799:"IFCELECTRICMOTOR",413509423:"IFCSYSTEMFURNITUREELEMENT",484807127:"IFCEVAPORATOR",486154966:"IFCWINDOWSTANDARDCASE",629592764:"IFCLIGHTFIXTURE",630975310:"IFCUNITARYCONTROLELEMENT",635142910:"IFCCABLECARRIERFITTING",639361253:"IFCCOIL",647756555:"IFCFASTENER",707683696:"IFCFLOWSTORAGEDEVICE",738039164:"IFCPROTECTIVEDEVICE",753842376:"IFCBEAM",812556717:"IFCTANK",819412036:"IFCFILTER",843113511:"IFCCOLUMN",862014818:"IFCELECTRICDISTRIBUTIONBOARD",900683007:"IFCFOOTING",905975707:"IFCCOLUMNSTANDARDCASE",926996030:"IFCVOIDINGFEATURE",979691226:"IFCREINFORCINGBAR",987401354:"IFCFLOWSEGMENT",1003880860:"IFCELECTRICTIMECONTROL",1051757585:"IFCCABLEFITTING",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",1073191201:"IFCMEMBER",1095909175:"IFCBUILDINGELEMENTPROXY",1156407060:"IFCPLATESTANDARDCASE",1162798199:"IFCSWITCHINGDEVICE",1329646415:"IFCSHADINGDEVICE",1335981549:"IFCDISCRETEACCESSORY",1360408905:"IFCDUCTSILENCER",1404847402:"IFCSTACKTERMINAL",1426591983:"IFCFIRESUPPRESSIONTERMINAL",1437502449:"IFCMEDICALDEVICE",1509553395:"IFCFURNITURE",1529196076:"IFCSLAB",1620046519:"IFCTRANSPORTELEMENT",1634111441:"IFCAIRTERMINAL",1658829314:"IFCENERGYCONVERSIONDEVICE",1677625105:"IFCCIVILELEMENT",1687234759:"IFCPILE",1904799276:"IFCELECTRICAPPLIANCE",1911478936:"IFCMEMBERSTANDARDCASE",1945004755:"IFCDISTRIBUTIONELEMENT",1973544240:"IFCCOVERING",1999602285:"IFCSPACEHEATER",2016517767:"IFCROOF",2056796094:"IFCAIRTOAIRHEATRECOVERY",2058353004:"IFCFLOWCONTROLLER",2068733104:"IFCHUMIDIFIER",2176052936:"IFCJUNCTIONBOX",2188021234:"IFCFLOWMETER",2223149337:"IFCFLOWTERMINAL",2262370178:"IFCRAILING",2272882330:"IFCCONDENSER",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",2320036040:"IFCREINFORCINGMESH",2347447852:"IFCTENDONANCHOR",2391383451:"IFCVIBRATIONISOLATOR",2391406946:"IFCWALL",2474470126:"IFCMOTORCONNECTION",2769231204:"IFCVIRTUALELEMENT",2814081492:"IFCENGINE",2906023776:"IFCBEAMSTANDARDCASE",2938176219:"IFCBURNER",2979338954:"IFCBUILDINGELEMENTPART",3024970846:"IFCRAMP",3026737570:"IFCTUBEBUNDLE",3027962421:"IFCSLABSTANDARDCASE",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",3053780830:"IFCSANITARYTERMINAL",3079942009:"IFCOPENINGSTANDARDCASE",3087945054:"IFCALARM",3101698114:"IFCSURFACEFEATURE",3127900445:"IFCSLABELEMENTEDCASE",3132237377:"IFCFLOWMOVINGDEVICE",3171933400:"IFCPLATE",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",3242481149:"IFCDOORSTANDARDCASE",3283111854:"IFCRAMPFLIGHT",3296154744:"IFCCHIMNEY",3304561284:"IFCWINDOW",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",3319311131:"IFCHEATEXCHANGER",3415622556:"IFCFAN",3420628829:"IFCSOLARDEVICE",3493046030:"IFCGEOGRAPHICELEMENT",3495092785:"IFCCURTAINWALL",3508470533:"IFCFLOWTREATMENTDEVICE",3512223829:"IFCWALLSTANDARDCASE",3518393246:"IFCDUCTSEGMENT",3571504051:"IFCCOMPRESSOR",3588315303:"IFCOPENINGELEMENT",3612865200:"IFCPIPESEGMENT",3640358203:"IFCCOOLINGTOWER",3651124850:"IFCPROJECTIONELEMENT",3694346114:"IFCOUTLET",3747195512:"IFCEVAPORATIVECOOLER",3758799889:"IFCCABLECARRIERSEGMENT",3824725483:"IFCTENDON",3825984169:"IFCTRANSFORMER",3902619387:"IFCCHILLER",4074379575:"IFCDAMPER",4086658281:"IFCSENSOR",4123344466:"IFCELEMENTASSEMBLY",4136498852:"IFCCOOLEDBEAM",4156078855:"IFCWALLELEMENTEDCASE",4175244083:"IFCINTERCEPTOR",4207607924:"IFCVALVE",4217484030:"IFCCABLESEGMENT",4237592921:"IFCWASTETERMINAL",4252922144:"IFCSTAIRFLIGHT",4278956645:"IFCFLOWFITTING",4288193352:"IFCACTUATOR",4292641817:"IFCUNITARYEQUIPMENT",3009204131:"IFCGRID"},Vq={3821786052:"IFCACTIONREQUEST",2296667514:"IFCACTOR",3630933823:"IFCACTORROLE",4288193352:"IFCACTUATOR",2874132201:"IFCACTUATORTYPE",618182010:"IFCADDRESS",1635779807:"IFCADVANCEDBREP",2603310189:"IFCADVANCEDBREPWITHVOIDS",3406155212:"IFCADVANCEDFACE",1634111441:"IFCAIRTERMINAL",177149247:"IFCAIRTERMINALBOX",1411407467:"IFCAIRTERMINALBOXTYPE",3352864051:"IFCAIRTERMINALTYPE",2056796094:"IFCAIRTOAIRHEATRECOVERY",1871374353:"IFCAIRTOAIRHEATRECOVERYTYPE",3087945054:"IFCALARM",3001207471:"IFCALARMTYPE",325726236:"IFCALIGNMENT",749761778:"IFCALIGNMENT2DHORIZONTAL",3199563722:"IFCALIGNMENT2DHORIZONTALSEGMENT",2483840362:"IFCALIGNMENT2DSEGMENT",3379348081:"IFCALIGNMENT2DVERSEGCIRCULARARC",3239324667:"IFCALIGNMENT2DVERSEGLINE",4263986512:"IFCALIGNMENT2DVERSEGPARABOLICARC",53199957:"IFCALIGNMENT2DVERTICAL",2029264950:"IFCALIGNMENT2DVERTICALSEGMENT",3512275521:"IFCALIGNMENTCURVE",1674181508:"IFCANNOTATION",669184980:"IFCANNOTATIONFILLAREA",639542469:"IFCAPPLICATION",411424972:"IFCAPPLIEDVALUE",130549933:"IFCAPPROVAL",3869604511:"IFCAPPROVALRELATIONSHIP",3798115385:"IFCARBITRARYCLOSEDPROFILEDEF",1310608509:"IFCARBITRARYOPENPROFILEDEF",2705031697:"IFCARBITRARYPROFILEDEFWITHVOIDS",3460190687:"IFCASSET",3207858831:"IFCASYMMETRICISHAPEPROFILEDEF",277319702:"IFCAUDIOVISUALAPPLIANCE",1532957894:"IFCAUDIOVISUALAPPLIANCETYPE",4261334040:"IFCAXIS1PLACEMENT",3125803723:"IFCAXIS2PLACEMENT2D",2740243338:"IFCAXIS2PLACEMENT3D",1967976161:"IFCBSPLINECURVE",2461110595:"IFCBSPLINECURVEWITHKNOTS",2887950389:"IFCBSPLINESURFACE",167062518:"IFCBSPLINESURFACEWITHKNOTS",753842376:"IFCBEAM",2906023776:"IFCBEAMSTANDARDCASE",819618141:"IFCBEAMTYPE",4196446775:"IFCBEARING",3649138523:"IFCBEARINGTYPE",616511568:"IFCBLOBTEXTURE",1334484129:"IFCBLOCK",32344328:"IFCBOILER",231477066:"IFCBOILERTYPE",3649129432:"IFCBOOLEANCLIPPINGRESULT",2736907675:"IFCBOOLEANRESULT",4037036970:"IFCBOUNDARYCONDITION",1136057603:"IFCBOUNDARYCURVE",1560379544:"IFCBOUNDARYEDGECONDITION",3367102660:"IFCBOUNDARYFACECONDITION",1387855156:"IFCBOUNDARYNODECONDITION",2069777674:"IFCBOUNDARYNODECONDITIONWARPING",1260505505:"IFCBOUNDEDCURVE",4182860854:"IFCBOUNDEDSURFACE",2581212453:"IFCBOUNDINGBOX",2713105998:"IFCBOXEDHALFSPACE",644574406:"IFCBRIDGE",963979645:"IFCBRIDGEPART",4031249490:"IFCBUILDING",3299480353:"IFCBUILDINGELEMENT",2979338954:"IFCBUILDINGELEMENTPART",39481116:"IFCBUILDINGELEMENTPARTTYPE",1095909175:"IFCBUILDINGELEMENTPROXY",1909888760:"IFCBUILDINGELEMENTPROXYTYPE",1950629157:"IFCBUILDINGELEMENTTYPE",3124254112:"IFCBUILDINGSTOREY",1177604601:"IFCBUILDINGSYSTEM",2938176219:"IFCBURNER",2188180465:"IFCBURNERTYPE",2898889636:"IFCCSHAPEPROFILEDEF",635142910:"IFCCABLECARRIERFITTING",395041908:"IFCCABLECARRIERFITTINGTYPE",3758799889:"IFCCABLECARRIERSEGMENT",3293546465:"IFCCABLECARRIERSEGMENTTYPE",1051757585:"IFCCABLEFITTING",2674252688:"IFCCABLEFITTINGTYPE",4217484030:"IFCCABLESEGMENT",1285652485:"IFCCABLESEGMENTTYPE",3999819293:"IFCCAISSONFOUNDATION",3203706013:"IFCCAISSONFOUNDATIONTYPE",1123145078:"IFCCARTESIANPOINT",574549367:"IFCCARTESIANPOINTLIST",1675464909:"IFCCARTESIANPOINTLIST2D",2059837836:"IFCCARTESIANPOINTLIST3D",59481748:"IFCCARTESIANTRANSFORMATIONOPERATOR",3749851601:"IFCCARTESIANTRANSFORMATIONOPERATOR2D",3486308946:"IFCCARTESIANTRANSFORMATIONOPERATOR2DNONUNIFORM",3331915920:"IFCCARTESIANTRANSFORMATIONOPERATOR3D",1416205885:"IFCCARTESIANTRANSFORMATIONOPERATOR3DNONUNIFORM",3150382593:"IFCCENTERLINEPROFILEDEF",3902619387:"IFCCHILLER",2951183804:"IFCCHILLERTYPE",3296154744:"IFCCHIMNEY",2197970202:"IFCCHIMNEYTYPE",2611217952:"IFCCIRCLE",2937912522:"IFCCIRCLEHOLLOWPROFILEDEF",1383045692:"IFCCIRCLEPROFILEDEF",1062206242:"IFCCIRCULARARCSEGMENT2D",1677625105:"IFCCIVILELEMENT",3893394355:"IFCCIVILELEMENTTYPE",747523909:"IFCCLASSIFICATION",647927063:"IFCCLASSIFICATIONREFERENCE",2205249479:"IFCCLOSEDSHELL",639361253:"IFCCOIL",2301859152:"IFCCOILTYPE",776857604:"IFCCOLOURRGB",3285139300:"IFCCOLOURRGBLIST",3264961684:"IFCCOLOURSPECIFICATION",843113511:"IFCCOLUMN",905975707:"IFCCOLUMNSTANDARDCASE",300633059:"IFCCOLUMNTYPE",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",400855858:"IFCCOMMUNICATIONSAPPLIANCETYPE",2542286263:"IFCCOMPLEXPROPERTY",3875453745:"IFCCOMPLEXPROPERTYTEMPLATE",3732776249:"IFCCOMPOSITECURVE",15328376:"IFCCOMPOSITECURVEONSURFACE",2485617015:"IFCCOMPOSITECURVESEGMENT",1485152156:"IFCCOMPOSITEPROFILEDEF",3571504051:"IFCCOMPRESSOR",3850581409:"IFCCOMPRESSORTYPE",2272882330:"IFCCONDENSER",2816379211:"IFCCONDENSERTYPE",2510884976:"IFCCONIC",370225590:"IFCCONNECTEDFACESET",1981873012:"IFCCONNECTIONCURVEGEOMETRY",2859738748:"IFCCONNECTIONGEOMETRY",45288368:"IFCCONNECTIONPOINTECCENTRICITY",2614616156:"IFCCONNECTIONPOINTGEOMETRY",2732653382:"IFCCONNECTIONSURFACEGEOMETRY",775493141:"IFCCONNECTIONVOLUMEGEOMETRY",1959218052:"IFCCONSTRAINT",3898045240:"IFCCONSTRUCTIONEQUIPMENTRESOURCE",2185764099:"IFCCONSTRUCTIONEQUIPMENTRESOURCETYPE",1060000209:"IFCCONSTRUCTIONMATERIALRESOURCE",4105962743:"IFCCONSTRUCTIONMATERIALRESOURCETYPE",488727124:"IFCCONSTRUCTIONPRODUCTRESOURCE",1525564444:"IFCCONSTRUCTIONPRODUCTRESOURCETYPE",2559216714:"IFCCONSTRUCTIONRESOURCE",2574617495:"IFCCONSTRUCTIONRESOURCETYPE",3419103109:"IFCCONTEXT",3050246964:"IFCCONTEXTDEPENDENTUNIT",3293443760:"IFCCONTROL",25142252:"IFCCONTROLLER",578613899:"IFCCONTROLLERTYPE",2889183280:"IFCCONVERSIONBASEDUNIT",2713554722:"IFCCONVERSIONBASEDUNITWITHOFFSET",4136498852:"IFCCOOLEDBEAM",335055490:"IFCCOOLEDBEAMTYPE",3640358203:"IFCCOOLINGTOWER",2954562838:"IFCCOOLINGTOWERTYPE",1785450214:"IFCCOORDINATEOPERATION",1466758467:"IFCCOORDINATEREFERENCESYSTEM",3895139033:"IFCCOSTITEM",1419761937:"IFCCOSTSCHEDULE",602808272:"IFCCOSTVALUE",1973544240:"IFCCOVERING",1916426348:"IFCCOVERINGTYPE",3295246426:"IFCCREWRESOURCE",1815067380:"IFCCREWRESOURCETYPE",2506170314:"IFCCSGPRIMITIVE3D",2147822146:"IFCCSGSOLID",539742890:"IFCCURRENCYRELATIONSHIP",3495092785:"IFCCURTAINWALL",1457835157:"IFCCURTAINWALLTYPE",2601014836:"IFCCURVE",2827736869:"IFCCURVEBOUNDEDPLANE",2629017746:"IFCCURVEBOUNDEDSURFACE",1186437898:"IFCCURVESEGMENT2D",3800577675:"IFCCURVESTYLE",1105321065:"IFCCURVESTYLEFONT",2367409068:"IFCCURVESTYLEFONTANDSCALING",3510044353:"IFCCURVESTYLEFONTPATTERN",1213902940:"IFCCYLINDRICALSURFACE",4074379575:"IFCDAMPER",3961806047:"IFCDAMPERTYPE",3426335179:"IFCDEEPFOUNDATION",1306400036:"IFCDEEPFOUNDATIONTYPE",3632507154:"IFCDERIVEDPROFILEDEF",1765591967:"IFCDERIVEDUNIT",1045800335:"IFCDERIVEDUNITELEMENT",2949456006:"IFCDIMENSIONALEXPONENTS",32440307:"IFCDIRECTION",1335981549:"IFCDISCRETEACCESSORY",2635815018:"IFCDISCRETEACCESSORYTYPE",1945343521:"IFCDISTANCEEXPRESSION",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",1599208980:"IFCDISTRIBUTIONCHAMBERELEMENTTYPE",562808652:"IFCDISTRIBUTIONCIRCUIT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",2063403501:"IFCDISTRIBUTIONCONTROLELEMENTTYPE",1945004755:"IFCDISTRIBUTIONELEMENT",3256556792:"IFCDISTRIBUTIONELEMENTTYPE",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",3849074793:"IFCDISTRIBUTIONFLOWELEMENTTYPE",3041715199:"IFCDISTRIBUTIONPORT",3205830791:"IFCDISTRIBUTIONSYSTEM",1154170062:"IFCDOCUMENTINFORMATION",770865208:"IFCDOCUMENTINFORMATIONRELATIONSHIP",3732053477:"IFCDOCUMENTREFERENCE",395920057:"IFCDOOR",2963535650:"IFCDOORLININGPROPERTIES",1714330368:"IFCDOORPANELPROPERTIES",3242481149:"IFCDOORSTANDARDCASE",526551008:"IFCDOORSTYLE",2323601079:"IFCDOORTYPE",445594917:"IFCDRAUGHTINGPREDEFINEDCOLOUR",4006246654:"IFCDRAUGHTINGPREDEFINEDCURVEFONT",342316401:"IFCDUCTFITTING",869906466:"IFCDUCTFITTINGTYPE",3518393246:"IFCDUCTSEGMENT",3760055223:"IFCDUCTSEGMENTTYPE",1360408905:"IFCDUCTSILENCER",2030761528:"IFCDUCTSILENCERTYPE",3900360178:"IFCEDGE",476780140:"IFCEDGECURVE",1472233963:"IFCEDGELOOP",1904799276:"IFCELECTRICAPPLIANCE",663422040:"IFCELECTRICAPPLIANCETYPE",862014818:"IFCELECTRICDISTRIBUTIONBOARD",2417008758:"IFCELECTRICDISTRIBUTIONBOARDTYPE",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",3277789161:"IFCELECTRICFLOWSTORAGEDEVICETYPE",264262732:"IFCELECTRICGENERATOR",1534661035:"IFCELECTRICGENERATORTYPE",402227799:"IFCELECTRICMOTOR",1217240411:"IFCELECTRICMOTORTYPE",1003880860:"IFCELECTRICTIMECONTROL",712377611:"IFCELECTRICTIMECONTROLTYPE",1758889154:"IFCELEMENT",4123344466:"IFCELEMENTASSEMBLY",2397081782:"IFCELEMENTASSEMBLYTYPE",1623761950:"IFCELEMENTCOMPONENT",2590856083:"IFCELEMENTCOMPONENTTYPE",1883228015:"IFCELEMENTQUANTITY",339256511:"IFCELEMENTTYPE",2777663545:"IFCELEMENTARYSURFACE",1704287377:"IFCELLIPSE",2835456948:"IFCELLIPSEPROFILEDEF",1658829314:"IFCENERGYCONVERSIONDEVICE",2107101300:"IFCENERGYCONVERSIONDEVICETYPE",2814081492:"IFCENGINE",132023988:"IFCENGINETYPE",3747195512:"IFCEVAPORATIVECOOLER",3174744832:"IFCEVAPORATIVECOOLERTYPE",484807127:"IFCEVAPORATOR",3390157468:"IFCEVAPORATORTYPE",4148101412:"IFCEVENT",211053100:"IFCEVENTTIME",4024345920:"IFCEVENTTYPE",297599258:"IFCEXTENDEDPROPERTIES",4294318154:"IFCEXTERNALINFORMATION",3200245327:"IFCEXTERNALREFERENCE",1437805879:"IFCEXTERNALREFERENCERELATIONSHIP",1209101575:"IFCEXTERNALSPATIALELEMENT",2853485674:"IFCEXTERNALSPATIALSTRUCTUREELEMENT",2242383968:"IFCEXTERNALLYDEFINEDHATCHSTYLE",1040185647:"IFCEXTERNALLYDEFINEDSURFACESTYLE",3548104201:"IFCEXTERNALLYDEFINEDTEXTFONT",477187591:"IFCEXTRUDEDAREASOLID",2804161546:"IFCEXTRUDEDAREASOLIDTAPERED",2556980723:"IFCFACE",2047409740:"IFCFACEBASEDSURFACEMODEL",1809719519:"IFCFACEBOUND",803316827:"IFCFACEOUTERBOUND",3008276851:"IFCFACESURFACE",807026263:"IFCFACETEDBREP",3737207727:"IFCFACETEDBREPWITHVOIDS",24185140:"IFCFACILITY",1310830890:"IFCFACILITYPART",4219587988:"IFCFAILURECONNECTIONCONDITION",3415622556:"IFCFAN",346874300:"IFCFANTYPE",647756555:"IFCFASTENER",2489546625:"IFCFASTENERTYPE",2827207264:"IFCFEATUREELEMENT",2143335405:"IFCFEATUREELEMENTADDITION",1287392070:"IFCFEATUREELEMENTSUBTRACTION",738692330:"IFCFILLAREASTYLE",374418227:"IFCFILLAREASTYLEHATCHING",315944413:"IFCFILLAREASTYLETILES",819412036:"IFCFILTER",1810631287:"IFCFILTERTYPE",1426591983:"IFCFIRESUPPRESSIONTERMINAL",4222183408:"IFCFIRESUPPRESSIONTERMINALTYPE",2652556860:"IFCFIXEDREFERENCESWEPTAREASOLID",2058353004:"IFCFLOWCONTROLLER",3907093117:"IFCFLOWCONTROLLERTYPE",4278956645:"IFCFLOWFITTING",3198132628:"IFCFLOWFITTINGTYPE",182646315:"IFCFLOWINSTRUMENT",4037862832:"IFCFLOWINSTRUMENTTYPE",2188021234:"IFCFLOWMETER",3815607619:"IFCFLOWMETERTYPE",3132237377:"IFCFLOWMOVINGDEVICE",1482959167:"IFCFLOWMOVINGDEVICETYPE",987401354:"IFCFLOWSEGMENT",1834744321:"IFCFLOWSEGMENTTYPE",707683696:"IFCFLOWSTORAGEDEVICE",1339347760:"IFCFLOWSTORAGEDEVICETYPE",2223149337:"IFCFLOWTERMINAL",2297155007:"IFCFLOWTERMINALTYPE",3508470533:"IFCFLOWTREATMENTDEVICE",3009222698:"IFCFLOWTREATMENTDEVICETYPE",900683007:"IFCFOOTING",1893162501:"IFCFOOTINGTYPE",263784265:"IFCFURNISHINGELEMENT",4238390223:"IFCFURNISHINGELEMENTTYPE",1509553395:"IFCFURNITURE",1268542332:"IFCFURNITURETYPE",3493046030:"IFCGEOGRAPHICELEMENT",4095422895:"IFCGEOGRAPHICELEMENTTYPE",987898635:"IFCGEOMETRICCURVESET",3448662350:"IFCGEOMETRICREPRESENTATIONCONTEXT",2453401579:"IFCGEOMETRICREPRESENTATIONITEM",4142052618:"IFCGEOMETRICREPRESENTATIONSUBCONTEXT",3590301190:"IFCGEOMETRICSET",3009204131:"IFCGRID",852622518:"IFCGRIDAXIS",178086475:"IFCGRIDPLACEMENT",2706460486:"IFCGROUP",812098782:"IFCHALFSPACESOLID",3319311131:"IFCHEATEXCHANGER",1251058090:"IFCHEATEXCHANGERTYPE",2068733104:"IFCHUMIDIFIER",1806887404:"IFCHUMIDIFIERTYPE",1484403080:"IFCISHAPEPROFILEDEF",3905492369:"IFCIMAGETEXTURE",3570813810:"IFCINDEXEDCOLOURMAP",2571569899:"IFCINDEXEDPOLYCURVE",178912537:"IFCINDEXEDPOLYGONALFACE",2294589976:"IFCINDEXEDPOLYGONALFACEWITHVOIDS",1437953363:"IFCINDEXEDTEXTUREMAP",2133299955:"IFCINDEXEDTRIANGLETEXTUREMAP",4175244083:"IFCINTERCEPTOR",3946677679:"IFCINTERCEPTORTYPE",3113134337:"IFCINTERSECTIONCURVE",2391368822:"IFCINVENTORY",3741457305:"IFCIRREGULARTIMESERIES",3020489413:"IFCIRREGULARTIMESERIESVALUE",2176052936:"IFCJUNCTIONBOX",4288270099:"IFCJUNCTIONBOXTYPE",572779678:"IFCLSHAPEPROFILEDEF",3827777499:"IFCLABORRESOURCE",428585644:"IFCLABORRESOURCETYPE",1585845231:"IFCLAGTIME",76236018:"IFCLAMP",1051575348:"IFCLAMPTYPE",2655187982:"IFCLIBRARYINFORMATION",3452421091:"IFCLIBRARYREFERENCE",4162380809:"IFCLIGHTDISTRIBUTIONDATA",629592764:"IFCLIGHTFIXTURE",1161773419:"IFCLIGHTFIXTURETYPE",1566485204:"IFCLIGHTINTENSITYDISTRIBUTION",1402838566:"IFCLIGHTSOURCE",125510826:"IFCLIGHTSOURCEAMBIENT",2604431987:"IFCLIGHTSOURCEDIRECTIONAL",4266656042:"IFCLIGHTSOURCEGONIOMETRIC",1520743889:"IFCLIGHTSOURCEPOSITIONAL",3422422726:"IFCLIGHTSOURCESPOT",1281925730:"IFCLINE",3092502836:"IFCLINESEGMENT2D",388784114:"IFCLINEARPLACEMENT",1154579445:"IFCLINEARPOSITIONINGELEMENT",2624227202:"IFCLOCALPLACEMENT",1008929658:"IFCLOOP",1425443689:"IFCMANIFOLDSOLIDBREP",3057273783:"IFCMAPCONVERSION",2347385850:"IFCMAPPEDITEM",1838606355:"IFCMATERIAL",1847130766:"IFCMATERIALCLASSIFICATIONRELATIONSHIP",3708119e3:"IFCMATERIALCONSTITUENT",2852063980:"IFCMATERIALCONSTITUENTSET",760658860:"IFCMATERIALDEFINITION",2022407955:"IFCMATERIALDEFINITIONREPRESENTATION",248100487:"IFCMATERIALLAYER",3303938423:"IFCMATERIALLAYERSET",1303795690:"IFCMATERIALLAYERSETUSAGE",1847252529:"IFCMATERIALLAYERWITHOFFSETS",2199411900:"IFCMATERIALLIST",2235152071:"IFCMATERIALPROFILE",164193824:"IFCMATERIALPROFILESET",3079605661:"IFCMATERIALPROFILESETUSAGE",3404854881:"IFCMATERIALPROFILESETUSAGETAPERING",552965576:"IFCMATERIALPROFILEWITHOFFSETS",3265635763:"IFCMATERIALPROPERTIES",853536259:"IFCMATERIALRELATIONSHIP",1507914824:"IFCMATERIALUSAGEDEFINITION",2597039031:"IFCMEASUREWITHUNIT",377706215:"IFCMECHANICALFASTENER",2108223431:"IFCMECHANICALFASTENERTYPE",1437502449:"IFCMEDICALDEVICE",1114901282:"IFCMEDICALDEVICETYPE",1073191201:"IFCMEMBER",1911478936:"IFCMEMBERSTANDARDCASE",3181161470:"IFCMEMBERTYPE",3368373690:"IFCMETRIC",2998442950:"IFCMIRROREDPROFILEDEF",2706619895:"IFCMONETARYUNIT",2474470126:"IFCMOTORCONNECTION",977012517:"IFCMOTORCONNECTIONTYPE",1918398963:"IFCNAMEDUNIT",3888040117:"IFCOBJECT",219451334:"IFCOBJECTDEFINITION",3701648758:"IFCOBJECTPLACEMENT",2251480897:"IFCOBJECTIVE",4143007308:"IFCOCCUPANT",590820931:"IFCOFFSETCURVE",3388369263:"IFCOFFSETCURVE2D",3505215534:"IFCOFFSETCURVE3D",2485787929:"IFCOFFSETCURVEBYDISTANCES",2665983363:"IFCOPENSHELL",3588315303:"IFCOPENINGELEMENT",3079942009:"IFCOPENINGSTANDARDCASE",4251960020:"IFCORGANIZATION",1411181986:"IFCORGANIZATIONRELATIONSHIP",643959842:"IFCORIENTATIONEXPRESSION",1029017970:"IFCORIENTEDEDGE",144952367:"IFCOUTERBOUNDARYCURVE",3694346114:"IFCOUTLET",2837617999:"IFCOUTLETTYPE",1207048766:"IFCOWNERHISTORY",2529465313:"IFCPARAMETERIZEDPROFILEDEF",2519244187:"IFCPATH",1682466193:"IFCPCURVE",2382730787:"IFCPERFORMANCEHISTORY",3566463478:"IFCPERMEABLECOVERINGPROPERTIES",3327091369:"IFCPERMIT",2077209135:"IFCPERSON",101040310:"IFCPERSONANDORGANIZATION",3021840470:"IFCPHYSICALCOMPLEXQUANTITY",2483315170:"IFCPHYSICALQUANTITY",2226359599:"IFCPHYSICALSIMPLEQUANTITY",1687234759:"IFCPILE",1158309216:"IFCPILETYPE",310824031:"IFCPIPEFITTING",804291784:"IFCPIPEFITTINGTYPE",3612865200:"IFCPIPESEGMENT",4231323485:"IFCPIPESEGMENTTYPE",597895409:"IFCPIXELTEXTURE",2004835150:"IFCPLACEMENT",603570806:"IFCPLANARBOX",1663979128:"IFCPLANAREXTENT",220341763:"IFCPLANE",3171933400:"IFCPLATE",1156407060:"IFCPLATESTANDARDCASE",4017108033:"IFCPLATETYPE",2067069095:"IFCPOINT",4022376103:"IFCPOINTONCURVE",1423911732:"IFCPOINTONSURFACE",2924175390:"IFCPOLYLOOP",2775532180:"IFCPOLYGONALBOUNDEDHALFSPACE",2839578677:"IFCPOLYGONALFACESET",3724593414:"IFCPOLYLINE",3740093272:"IFCPORT",1946335990:"IFCPOSITIONINGELEMENT",3355820592:"IFCPOSTALADDRESS",759155922:"IFCPREDEFINEDCOLOUR",2559016684:"IFCPREDEFINEDCURVEFONT",3727388367:"IFCPREDEFINEDITEM",3778827333:"IFCPREDEFINEDPROPERTIES",3967405729:"IFCPREDEFINEDPROPERTYSET",1775413392:"IFCPREDEFINEDTEXTFONT",677532197:"IFCPRESENTATIONITEM",2022622350:"IFCPRESENTATIONLAYERASSIGNMENT",1304840413:"IFCPRESENTATIONLAYERWITHSTYLE",3119450353:"IFCPRESENTATIONSTYLE",2417041796:"IFCPRESENTATIONSTYLEASSIGNMENT",2744685151:"IFCPROCEDURE",569719735:"IFCPROCEDURETYPE",2945172077:"IFCPROCESS",4208778838:"IFCPRODUCT",673634403:"IFCPRODUCTDEFINITIONSHAPE",2095639259:"IFCPRODUCTREPRESENTATION",3958567839:"IFCPROFILEDEF",2802850158:"IFCPROFILEPROPERTIES",103090709:"IFCPROJECT",653396225:"IFCPROJECTLIBRARY",2904328755:"IFCPROJECTORDER",3843373140:"IFCPROJECTEDCRS",3651124850:"IFCPROJECTIONELEMENT",2598011224:"IFCPROPERTY",986844984:"IFCPROPERTYABSTRACTION",871118103:"IFCPROPERTYBOUNDEDVALUE",1680319473:"IFCPROPERTYDEFINITION",148025276:"IFCPROPERTYDEPENDENCYRELATIONSHIP",4166981789:"IFCPROPERTYENUMERATEDVALUE",3710013099:"IFCPROPERTYENUMERATION",2752243245:"IFCPROPERTYLISTVALUE",941946838:"IFCPROPERTYREFERENCEVALUE",1451395588:"IFCPROPERTYSET",3357820518:"IFCPROPERTYSETDEFINITION",492091185:"IFCPROPERTYSETTEMPLATE",3650150729:"IFCPROPERTYSINGLEVALUE",110355661:"IFCPROPERTYTABLEVALUE",3521284610:"IFCPROPERTYTEMPLATE",1482703590:"IFCPROPERTYTEMPLATEDEFINITION",738039164:"IFCPROTECTIVEDEVICE",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",655969474:"IFCPROTECTIVEDEVICETRIPPINGUNITTYPE",1842657554:"IFCPROTECTIVEDEVICETYPE",3219374653:"IFCPROXY",90941305:"IFCPUMP",2250791053:"IFCPUMPTYPE",2044713172:"IFCQUANTITYAREA",2093928680:"IFCQUANTITYCOUNT",931644368:"IFCQUANTITYLENGTH",2090586900:"IFCQUANTITYSET",3252649465:"IFCQUANTITYTIME",2405470396:"IFCQUANTITYVOLUME",825690147:"IFCQUANTITYWEIGHT",2262370178:"IFCRAILING",2893384427:"IFCRAILINGTYPE",3024970846:"IFCRAMP",3283111854:"IFCRAMPFLIGHT",2324767716:"IFCRAMPFLIGHTTYPE",1469900589:"IFCRAMPTYPE",1232101972:"IFCRATIONALBSPLINECURVEWITHKNOTS",683857671:"IFCRATIONALBSPLINESURFACEWITHKNOTS",2770003689:"IFCRECTANGLEHOLLOWPROFILEDEF",3615266464:"IFCRECTANGLEPROFILEDEF",2798486643:"IFCRECTANGULARPYRAMID",3454111270:"IFCRECTANGULARTRIMMEDSURFACE",3915482550:"IFCRECURRENCEPATTERN",2433181523:"IFCREFERENCE",4021432810:"IFCREFERENT",3413951693:"IFCREGULARTIMESERIES",1580146022:"IFCREINFORCEMENTBARPROPERTIES",3765753017:"IFCREINFORCEMENTDEFINITIONPROPERTIES",979691226:"IFCREINFORCINGBAR",2572171363:"IFCREINFORCINGBARTYPE",3027567501:"IFCREINFORCINGELEMENT",964333572:"IFCREINFORCINGELEMENTTYPE",2320036040:"IFCREINFORCINGMESH",2310774935:"IFCREINFORCINGMESHTYPE",160246688:"IFCRELAGGREGATES",3939117080:"IFCRELASSIGNS",1683148259:"IFCRELASSIGNSTOACTOR",2495723537:"IFCRELASSIGNSTOCONTROL",1307041759:"IFCRELASSIGNSTOGROUP",1027710054:"IFCRELASSIGNSTOGROUPBYFACTOR",4278684876:"IFCRELASSIGNSTOPROCESS",2857406711:"IFCRELASSIGNSTOPRODUCT",205026976:"IFCRELASSIGNSTORESOURCE",1865459582:"IFCRELASSOCIATES",4095574036:"IFCRELASSOCIATESAPPROVAL",919958153:"IFCRELASSOCIATESCLASSIFICATION",2728634034:"IFCRELASSOCIATESCONSTRAINT",982818633:"IFCRELASSOCIATESDOCUMENT",3840914261:"IFCRELASSOCIATESLIBRARY",2655215786:"IFCRELASSOCIATESMATERIAL",826625072:"IFCRELCONNECTS",1204542856:"IFCRELCONNECTSELEMENTS",3945020480:"IFCRELCONNECTSPATHELEMENTS",4201705270:"IFCRELCONNECTSPORTTOELEMENT",3190031847:"IFCRELCONNECTSPORTS",2127690289:"IFCRELCONNECTSSTRUCTURALACTIVITY",1638771189:"IFCRELCONNECTSSTRUCTURALMEMBER",504942748:"IFCRELCONNECTSWITHECCENTRICITY",3678494232:"IFCRELCONNECTSWITHREALIZINGELEMENTS",3242617779:"IFCRELCONTAINEDINSPATIALSTRUCTURE",886880790:"IFCRELCOVERSBLDGELEMENTS",2802773753:"IFCRELCOVERSSPACES",2565941209:"IFCRELDECLARES",2551354335:"IFCRELDECOMPOSES",693640335:"IFCRELDEFINES",1462361463:"IFCRELDEFINESBYOBJECT",4186316022:"IFCRELDEFINESBYPROPERTIES",307848117:"IFCRELDEFINESBYTEMPLATE",781010003:"IFCRELDEFINESBYTYPE",3940055652:"IFCRELFILLSELEMENT",279856033:"IFCRELFLOWCONTROLELEMENTS",427948657:"IFCRELINTERFERESELEMENTS",3268803585:"IFCRELNESTS",1441486842:"IFCRELPOSITIONS",750771296:"IFCRELPROJECTSELEMENT",1245217292:"IFCRELREFERENCEDINSPATIALSTRUCTURE",4122056220:"IFCRELSEQUENCE",366585022:"IFCRELSERVICESBUILDINGS",3451746338:"IFCRELSPACEBOUNDARY",3523091289:"IFCRELSPACEBOUNDARY1STLEVEL",1521410863:"IFCRELSPACEBOUNDARY2NDLEVEL",1401173127:"IFCRELVOIDSELEMENT",478536968:"IFCRELATIONSHIP",816062949:"IFCREPARAMETRISEDCOMPOSITECURVESEGMENT",1076942058:"IFCREPRESENTATION",3377609919:"IFCREPRESENTATIONCONTEXT",3008791417:"IFCREPRESENTATIONITEM",1660063152:"IFCREPRESENTATIONMAP",2914609552:"IFCRESOURCE",2943643501:"IFCRESOURCEAPPROVALRELATIONSHIP",1608871552:"IFCRESOURCECONSTRAINTRELATIONSHIP",2439245199:"IFCRESOURCELEVELRELATIONSHIP",1042787934:"IFCRESOURCETIME",1856042241:"IFCREVOLVEDAREASOLID",3243963512:"IFCREVOLVEDAREASOLIDTAPERED",4158566097:"IFCRIGHTCIRCULARCONE",3626867408:"IFCRIGHTCIRCULARCYLINDER",2016517767:"IFCROOF",2781568857:"IFCROOFTYPE",2341007311:"IFCROOT",2778083089:"IFCROUNDEDRECTANGLEPROFILEDEF",448429030:"IFCSIUNIT",3053780830:"IFCSANITARYTERMINAL",1768891740:"IFCSANITARYTERMINALTYPE",1054537805:"IFCSCHEDULINGTIME",2157484638:"IFCSEAMCURVE",2042790032:"IFCSECTIONPROPERTIES",4165799628:"IFCSECTIONREINFORCEMENTPROPERTIES",1862484736:"IFCSECTIONEDSOLID",1290935644:"IFCSECTIONEDSOLIDHORIZONTAL",1509187699:"IFCSECTIONEDSPINE",4086658281:"IFCSENSOR",1783015770:"IFCSENSORTYPE",1329646415:"IFCSHADINGDEVICE",4074543187:"IFCSHADINGDEVICETYPE",867548509:"IFCSHAPEASPECT",3982875396:"IFCSHAPEMODEL",4240577450:"IFCSHAPEREPRESENTATION",4124623270:"IFCSHELLBASEDSURFACEMODEL",3692461612:"IFCSIMPLEPROPERTY",3663146110:"IFCSIMPLEPROPERTYTEMPLATE",4097777520:"IFCSITE",1529196076:"IFCSLAB",3127900445:"IFCSLABELEMENTEDCASE",3027962421:"IFCSLABSTANDARDCASE",2533589738:"IFCSLABTYPE",2609359061:"IFCSLIPPAGECONNECTIONCONDITION",3420628829:"IFCSOLARDEVICE",1072016465:"IFCSOLARDEVICETYPE",723233188:"IFCSOLIDMODEL",3856911033:"IFCSPACE",1999602285:"IFCSPACEHEATER",1305183839:"IFCSPACEHEATERTYPE",3812236995:"IFCSPACETYPE",1412071761:"IFCSPATIALELEMENT",710998568:"IFCSPATIALELEMENTTYPE",2706606064:"IFCSPATIALSTRUCTUREELEMENT",3893378262:"IFCSPATIALSTRUCTUREELEMENTTYPE",463610769:"IFCSPATIALZONE",2481509218:"IFCSPATIALZONETYPE",451544542:"IFCSPHERE",4015995234:"IFCSPHERICALSURFACE",1404847402:"IFCSTACKTERMINAL",3112655638:"IFCSTACKTERMINALTYPE",331165859:"IFCSTAIR",4252922144:"IFCSTAIRFLIGHT",1039846685:"IFCSTAIRFLIGHTTYPE",338393293:"IFCSTAIRTYPE",682877961:"IFCSTRUCTURALACTION",3544373492:"IFCSTRUCTURALACTIVITY",2515109513:"IFCSTRUCTURALANALYSISMODEL",1179482911:"IFCSTRUCTURALCONNECTION",2273995522:"IFCSTRUCTURALCONNECTIONCONDITION",1004757350:"IFCSTRUCTURALCURVEACTION",4243806635:"IFCSTRUCTURALCURVECONNECTION",214636428:"IFCSTRUCTURALCURVEMEMBER",2445595289:"IFCSTRUCTURALCURVEMEMBERVARYING",2757150158:"IFCSTRUCTURALCURVEREACTION",3136571912:"IFCSTRUCTURALITEM",1807405624:"IFCSTRUCTURALLINEARACTION",2162789131:"IFCSTRUCTURALLOAD",385403989:"IFCSTRUCTURALLOADCASE",3478079324:"IFCSTRUCTURALLOADCONFIGURATION",1252848954:"IFCSTRUCTURALLOADGROUP",1595516126:"IFCSTRUCTURALLOADLINEARFORCE",609421318:"IFCSTRUCTURALLOADORRESULT",2668620305:"IFCSTRUCTURALLOADPLANARFORCE",2473145415:"IFCSTRUCTURALLOADSINGLEDISPLACEMENT",1973038258:"IFCSTRUCTURALLOADSINGLEDISPLACEMENTDISTORTION",1597423693:"IFCSTRUCTURALLOADSINGLEFORCE",1190533807:"IFCSTRUCTURALLOADSINGLEFORCEWARPING",2525727697:"IFCSTRUCTURALLOADSTATIC",3408363356:"IFCSTRUCTURALLOADTEMPERATURE",530289379:"IFCSTRUCTURALMEMBER",1621171031:"IFCSTRUCTURALPLANARACTION",2082059205:"IFCSTRUCTURALPOINTACTION",734778138:"IFCSTRUCTURALPOINTCONNECTION",1235345126:"IFCSTRUCTURALPOINTREACTION",3689010777:"IFCSTRUCTURALREACTION",2986769608:"IFCSTRUCTURALRESULTGROUP",3657597509:"IFCSTRUCTURALSURFACEACTION",1975003073:"IFCSTRUCTURALSURFACECONNECTION",3979015343:"IFCSTRUCTURALSURFACEMEMBER",2218152070:"IFCSTRUCTURALSURFACEMEMBERVARYING",603775116:"IFCSTRUCTURALSURFACEREACTION",2830218821:"IFCSTYLEMODEL",3958052878:"IFCSTYLEDITEM",3049322572:"IFCSTYLEDREPRESENTATION",148013059:"IFCSUBCONTRACTRESOURCE",4095615324:"IFCSUBCONTRACTRESOURCETYPE",2233826070:"IFCSUBEDGE",2513912981:"IFCSURFACE",699246055:"IFCSURFACECURVE",2028607225:"IFCSURFACECURVESWEPTAREASOLID",3101698114:"IFCSURFACEFEATURE",2809605785:"IFCSURFACEOFLINEAREXTRUSION",4124788165:"IFCSURFACEOFREVOLUTION",2934153892:"IFCSURFACEREINFORCEMENTAREA",1300840506:"IFCSURFACESTYLE",3303107099:"IFCSURFACESTYLELIGHTING",1607154358:"IFCSURFACESTYLEREFRACTION",1878645084:"IFCSURFACESTYLERENDERING",846575682:"IFCSURFACESTYLESHADING",1351298697:"IFCSURFACESTYLEWITHTEXTURES",626085974:"IFCSURFACETEXTURE",2247615214:"IFCSWEPTAREASOLID",1260650574:"IFCSWEPTDISKSOLID",1096409881:"IFCSWEPTDISKSOLIDPOLYGONAL",230924584:"IFCSWEPTSURFACE",1162798199:"IFCSWITCHINGDEVICE",2315554128:"IFCSWITCHINGDEVICETYPE",2254336722:"IFCSYSTEM",413509423:"IFCSYSTEMFURNITUREELEMENT",1580310250:"IFCSYSTEMFURNITUREELEMENTTYPE",3071757647:"IFCTSHAPEPROFILEDEF",985171141:"IFCTABLE",2043862942:"IFCTABLECOLUMN",531007025:"IFCTABLEROW",812556717:"IFCTANK",5716631:"IFCTANKTYPE",3473067441:"IFCTASK",1549132990:"IFCTASKTIME",2771591690:"IFCTASKTIMERECURRING",3206491090:"IFCTASKTYPE",912023232:"IFCTELECOMADDRESS",3824725483:"IFCTENDON",2347447852:"IFCTENDONANCHOR",3081323446:"IFCTENDONANCHORTYPE",3663046924:"IFCTENDONCONDUIT",2281632017:"IFCTENDONCONDUITTYPE",2415094496:"IFCTENDONTYPE",2387106220:"IFCTESSELLATEDFACESET",901063453:"IFCTESSELLATEDITEM",4282788508:"IFCTEXTLITERAL",3124975700:"IFCTEXTLITERALWITHEXTENT",1447204868:"IFCTEXTSTYLE",1983826977:"IFCTEXTSTYLEFONTMODEL",2636378356:"IFCTEXTSTYLEFORDEFINEDFONT",1640371178:"IFCTEXTSTYLETEXTMODEL",280115917:"IFCTEXTURECOORDINATE",1742049831:"IFCTEXTURECOORDINATEGENERATOR",2552916305:"IFCTEXTUREMAP",1210645708:"IFCTEXTUREVERTEX",3611470254:"IFCTEXTUREVERTEXLIST",1199560280:"IFCTIMEPERIOD",3101149627:"IFCTIMESERIES",581633288:"IFCTIMESERIESVALUE",1377556343:"IFCTOPOLOGICALREPRESENTATIONITEM",1735638870:"IFCTOPOLOGYREPRESENTATION",1935646853:"IFCTOROIDALSURFACE",3825984169:"IFCTRANSFORMER",1692211062:"IFCTRANSFORMERTYPE",2595432518:"IFCTRANSITIONCURVESEGMENT2D",1620046519:"IFCTRANSPORTELEMENT",2097647324:"IFCTRANSPORTELEMENTTYPE",2715220739:"IFCTRAPEZIUMPROFILEDEF",2916149573:"IFCTRIANGULATEDFACESET",1229763772:"IFCTRIANGULATEDIRREGULARNETWORK",3593883385:"IFCTRIMMEDCURVE",3026737570:"IFCTUBEBUNDLE",1600972822:"IFCTUBEBUNDLETYPE",1628702193:"IFCTYPEOBJECT",3736923433:"IFCTYPEPROCESS",2347495698:"IFCTYPEPRODUCT",3698973494:"IFCTYPERESOURCE",427810014:"IFCUSHAPEPROFILEDEF",180925521:"IFCUNITASSIGNMENT",630975310:"IFCUNITARYCONTROLELEMENT",3179687236:"IFCUNITARYCONTROLELEMENTTYPE",4292641817:"IFCUNITARYEQUIPMENT",1911125066:"IFCUNITARYEQUIPMENTTYPE",4207607924:"IFCVALVE",728799441:"IFCVALVETYPE",1417489154:"IFCVECTOR",2799835756:"IFCVERTEX",2759199220:"IFCVERTEXLOOP",1907098498:"IFCVERTEXPOINT",1530820697:"IFCVIBRATIONDAMPER",3956297820:"IFCVIBRATIONDAMPERTYPE",2391383451:"IFCVIBRATIONISOLATOR",3313531582:"IFCVIBRATIONISOLATORTYPE",2769231204:"IFCVIRTUALELEMENT",891718957:"IFCVIRTUALGRIDINTERSECTION",926996030:"IFCVOIDINGFEATURE",2391406946:"IFCWALL",4156078855:"IFCWALLELEMENTEDCASE",3512223829:"IFCWALLSTANDARDCASE",1898987631:"IFCWALLTYPE",4237592921:"IFCWASTETERMINAL",1133259667:"IFCWASTETERMINALTYPE",3304561284:"IFCWINDOW",336235671:"IFCWINDOWLININGPROPERTIES",512836454:"IFCWINDOWPANELPROPERTIES",486154966:"IFCWINDOWSTANDARDCASE",1299126871:"IFCWINDOWSTYLE",4009809668:"IFCWINDOWTYPE",4088093105:"IFCWORKCALENDAR",1028945134:"IFCWORKCONTROL",4218914973:"IFCWORKPLAN",3342526732:"IFCWORKSCHEDULE",1236880293:"IFCWORKTIME",2543172580:"IFCZSHAPEPROFILEDEF",1033361043:"IFCZONE"},Wq={aggregates:{name:TR,relating:"RelatingObject",related:"RelatedObjects",key:"children"},spatial:{name:xR,relating:"RelatingStructure",related:"RelatedElements",key:"children"},psets:{name:bR,relating:"RelatingPropertyDefinition",related:"RelatedObjects",key:"hasPsets"},materials:{name:ER,relating:"RelatingMaterial",related:"RelatedObjects",key:"hasMaterial"},type:{name:IR,relating:"RelatingType",related:"RelatedObjects",key:"hasType"}},Yq=function(){function e(t){(0,s.Z)(this,e),this.api=t}return(0,o.Z)(e,[{key:"getIfcType",value:function(e){return Vq[e]}},{key:"getItemProperties",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return $w(this,null,(0,ct.Z)().mark((function r(){return(0,ct.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.api.GetLine(e,t,n));case 1:case"end":return r.stop()}}),r,this)})))}},{key:"getPropertySets",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return $w(this,null,(0,ct.Z)().mark((function r(){return(0,ct.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getProperty(e,t,n,Wq.psets);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r,this)})))}},{key:"getTypeProperties",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return $w(this,null,(0,ct.Z)().mark((function r(){return(0,ct.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getProperty(e,t,n,Wq.type);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r,this)})))}},{key:"getMaterialsProperties",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return $w(this,null,(0,ct.Z)().mark((function r(){return(0,ct.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getProperty(e,t,n,Wq.materials);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r,this)})))}},{key:"getSpatialStructure",value:function(t,n){return $w(this,null,(0,ct.Z)().mark((function r(){var i,a,s,o;return(0,ct.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getAllTypesOfModel(t);case 2:return r.next=4,this.getSpatialTreeChunks(t);case 4:return i=r.sent,r.next=7,this.api.GetLineIDsWithType(t,oR);case 7:return a=r.sent,s=a.get(0),o=e.newIfcProject(s),r.next=12,this.getSpatialNode(t,o,i,n);case 12:return this.cleanupTypes(),r.abrupt("return",o);case 14:case"end":return r.stop()}}),r,this)})))}},{key:"getAllItemsOfType",value:function(e,t,n){return $w(this,null,(0,ct.Z)().mark((function r(){var i,a,s,o,u;return(0,ct.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=[],r.next=3,this.api.GetLineIDsWithType(e,t);case 3:for(a=r.sent,s=0;s<a.size();s++)i.push(a.get(s));if(n){r.next=7;break}return r.abrupt("return",i);case 7:o=[],u=0;case 9:if(!(u<i.length)){r.next=18;break}return r.t0=o,r.next=13,this.api.GetLine(e,i[u]);case 13:r.t1=r.sent,r.t0.push.call(r.t0,r.t1);case 15:u++,r.next=9;break;case 18:return r.abrupt("return",o);case 19:case"end":return r.stop()}}),r,this)})))}},{key:"getProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return $w(this,null,(0,ct.Z)().mark((function i(){var a,s,o;return(0,ct.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.getAllRelatedItemsOfType(e,t,r);case 2:a=i.sent,s=[],o=0;case 5:if(!(o<a.length)){i.next=14;break}return i.t0=s,i.next=9,this.api.GetLine(e,a[o],n);case 9:i.t1=i.sent,i.t0.push.call(i.t0,i.t1);case 11:o++,i.next=5;break;case 14:return i.abrupt("return",s);case 15:case"end":return i.stop()}}),i,this)})))}},{key:"getChunks",value:function(e,t,n){return $w(this,null,(0,ct.Z)().mark((function r(){var i,a,s;return(0,ct.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.api.GetLineIDsWithType(e,n.name);case 2:i=r.sent,a=0;case 4:if(!(a<i.size())){r.next=12;break}return r.next=7,this.api.GetLine(e,i.get(a),!1);case 7:s=r.sent,this.saveChunk(t,n,s);case 9:a++,r.next=4;break;case 12:case"end":return r.stop()}}),r,this)})))}},{key:"getSpatialNode",value:function(e,t,n,r){return $w(this,null,(0,ct.Z)().mark((function i(){return(0,ct.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.getChildren(e,t,n,Wq.aggregates,r);case 2:return i.next=4,this.getChildren(e,t,n,Wq.spatial,r);case 4:case"end":return i.stop()}}),i,this)})))}},{key:"getChildren",value:function(e,t,n,r,i){return $w(this,null,(0,ct.Z)().mark((function a(){var s,o,u,l,c,h,p;return(0,ct.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(void 0!=(s=n[t.expressID])){a.next=3;break}return a.abrupt("return");case 3:o=r.key,u=[],l=0;case 6:if(!(l<s.length)){a.next=20;break}if(c=s[l],h=this.newNode(c),!i){a.next=14;break}return a.next=12,this.getItemProperties(e,h.expressID);case 12:p=a.sent,h=Kw(Kw({},p),h);case 14:return a.next=16,this.getSpatialNode(e,h,n,i);case 16:u.push(h);case 17:l++,a.next=6;break;case 20:t[o]=u;case 21:case"end":return a.stop()}}),a,this)})))}},{key:"newNode",value:function(e){return{expressID:e,type:this.getNodeType(e),children:[]}}},{key:"getNodeType",value:function(e){var t=this.types[e];return jq[t]}},{key:"getSpatialTreeChunks",value:function(e){return $w(this,null,(0,ct.Z)().mark((function t(){var n;return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={},t.next=3,this.getChunks(e,n,Wq.aggregates);case 3:return t.next=5,this.getChunks(e,n,Wq.spatial);case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"saveChunk",value:function(e,t,n){var r=n[t.relating].value,i=n[t.related].map((function(e){return e.value}));void 0==e[r]?e[r]=i:e[r]=e[r].concat(i)}},{key:"getRelated",value:function(e,t,n){var r=e[t.relating];Array.isArray(r)?r.forEach((function(e){return n.push(e.value)})):n.push(r.value)}},{key:"getAllRelatedItemsOfType",value:function(t,n,r){return $w(this,null,(0,ct.Z)().mark((function i(){var a,s,o,u;return(0,ct.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.api.GetLineIDsWithType(t,r.name);case 2:a=i.sent,s=[],o=0;case 5:if(!(o<a.size())){i.next=14;break}return i.next=8,this.api.GetLine(t,a.get(o));case 8:u=i.sent,e.isRelated(n,u,r)&&this.getRelated(u,r,s);case 11:o++,i.next=5;break;case 14:return i.abrupt("return",s);case 15:case"end":return i.stop()}}),i,this)})))}},{key:"cleanupTypes",value:function(){this.types={}}},{key:"getAllTypesOfModel",value:function(e){return $w(this,null,(0,ct.Z)().mark((function t(){var n,r,i,a,s,o,u;return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={},r=Object.keys(jq).map((function(e){return parseInt(e)})),i=0;case 3:if(!(i<r.length)){t.next=13;break}return a=r[i],t.next=7,this.api.GetLineIDsWithType(e,a);case 7:for(s=t.sent,o=s.size(),u=0;u<o;u++)n[s.get(u)]=a;case 10:i++,t.next=3;break;case 13:this.types=n;case 14:case"end":return t.stop()}}),t,this)})))}}],[{key:"isRelated",value:function(e,t,n){var r=t[n.related];return Array.isArray(r)?r.map((function(e){return e.value})).includes(e):r.value===e}},{key:"newIfcProject",value:function(e){return{expressID:e,type:"IFCPROJECT",children:[]}}}]),e}();LN="undefined"!==typeof self&&self.crossOriginIsolated?tk():nk();var qq=function(){function e(){(0,s.Z)(this,e),this.wasmModule=void 0,this.fs=void 0,this.wasmPath="",this.isWasmPathAbsolute=!1,this.ifcGuidMap=new Map,this.properties=new Yq(this)}return(0,o.Z)(e,[{key:"Init",value:function(e){return $w(this,null,(0,ct.Z)().mark((function t(){var n,r=this;return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!LN){t.next=8;break}return n=function(e,t){return e.endsWith(".wasm")?r.isWasmPathAbsolute?r.wasmPath+e:t+r.wasmPath+e:t+e},t.next=4,LN({noInitialRun:!0,locateFile:e||n});case 4:this.wasmModule=t.sent,this.fs=this.wasmModule.FS,t.next=9;break;case 8:console.error("Could not find wasm module at './web-ifc' from web-ifc-api.ts");case 9:case"end":return t.stop()}}),t,this)})))}},{key:"OpenModel",value:function(e,t){var n=this,r=Kw({COORDINATE_TO_ORIGIN:!1,USE_FAST_BOOLS:!1,CIRCLE_SEGMENTS_LOW:5,CIRCLE_SEGMENTS_MEDIUM:8,CIRCLE_SEGMENTS_HIGH:12,BOOL_ABORT_THRESHOLD:1e4},t),i=0;return this.wasmModule.OpenModel(r,(function(t,r){var a=Math.min(e.byteLength-i,r),s=n.wasmModule.HEAPU8.subarray(t,t+r),o=e.subarray(i,i+a);return s.set(o),i+=a,a}))}},{key:"CreateModel",value:function(e){var t=Kw({COORDINATE_TO_ORIGIN:!1,USE_FAST_BOOLS:!1,CIRCLE_SEGMENTS_LOW:5,CIRCLE_SEGMENTS_MEDIUM:8,CIRCLE_SEGMENTS_HIGH:12,BOOL_ABORT_THRESHOLD:1e4},e);return this.wasmModule.CreateModel(t)}},{key:"ExportFileAsIFC",value:function(e){this.wasmModule.ExportFileAsIFC(e);var t=this.fs.readFile("/export.ifc");return this.wasmModule.FS_unlink("/export.ifc"),t}},{key:"GetGeometry",value:function(e,t){return this.wasmModule.GetGeometry(e,t)}},{key:"GetLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.GetRawLineData(e,t),i=PC[r.type](r);return n&&this.FlattenLine(e,i),i}},{key:"GetAndClearErrors",value:function(e){return this.wasmModule.GetAndClearErrors(e)}},{key:"WriteLine",value:function(e,t){var n=this;if(Object.keys(t).forEach((function(r){var i=t[r];if(i&&void 0!==i.expressID)n.WriteLine(e,i),t[r]={type:5,value:i.expressID};else if(Array.isArray(i)&&i.length>0)for(var a=0;a<i.length;a++)void 0!==i[a].expressID&&(n.WriteLine(e,i[a]),t[r][a]={type:5,value:i[a].expressID})})),void 0!=t.expressID&&void 0!=t.type&&void 0!==t.ToType){var r={ID:t.expressID,type:t.type,arguments:t.ToTape()};this.WriteRawLineData(e,r)}else console.warn("Line object cannot be serialized: ",t)}},{key:"FlattenLine",value:function(e,t){var n=this;Object.keys(t).forEach((function(r){var i=t[r];if(i&&5===i.type)t[r]=n.GetLine(e,i.value,!0);else if(Array.isArray(i)&&i.length>0&&5===i[0].type)for(var a=0;a<i.length;a++)t[r][a]=n.GetLine(e,i[a].value,!0)}))}},{key:"GetRawLineData",value:function(e,t){return this.wasmModule.GetLine(e,t)}},{key:"WriteRawLineData",value:function(e,t){return this.wasmModule.WriteLine(e,t.ID,t.type,t.arguments)}},{key:"GetLineIDsWithType",value:function(e,t){return this.wasmModule.GetLineIDsWithType(e,t)}},{key:"GetAllLines",value:function(e){return this.wasmModule.GetAllLines(e)}},{key:"SetGeometryTransformation",value:function(e,t){16==t.length?this.wasmModule.SetGeometryTransformation(e,t):console.log("Bad transformation matrix size: ".concat(t.length))}},{key:"GetCoordinationMatrix",value:function(e){return this.wasmModule.GetCoordinationMatrix(e)}},{key:"GetVertexArray",value:function(e,t){return this.getSubArray(this.wasmModule.HEAPF32,e,t)}},{key:"GetIndexArray",value:function(e,t){return this.getSubArray(this.wasmModule.HEAPU32,e,t)}},{key:"getSubArray",value:function(e,t,n){return e.subarray(t/4,t/4+n).slice(0)}},{key:"CloseModel",value:function(e){this.ifcGuidMap.delete(e),this.wasmModule.CloseModel(e)}},{key:"StreamAllMeshes",value:function(e,t){this.wasmModule.StreamAllMeshes(e,t)}},{key:"StreamAllMeshesWithTypes",value:function(e,t,n){this.wasmModule.StreamAllMeshesWithTypes(e,t,n)}},{key:"IsModelOpen",value:function(e){return this.wasmModule.IsModelOpen(e)}},{key:"LoadAllGeometry",value:function(e){return this.wasmModule.LoadAllGeometry(e)}},{key:"GetFlatMesh",value:function(e,t){return this.wasmModule.GetFlatMesh(e,t)}},{key:"CreateIfcGuidToExpressIdMapping",value:function(e){for(var t=new Map,n=0;n<MC.length;n++)for(var r=MC[n],i=this.GetLineIDsWithType(e,r),a=i.size(),s=0;s<a;s++){var o=i.get(s),u=this.GetLine(e,o).GlobalId.value;t.set(o,u),t.set(u,o)}this.ifcGuidMap.set(e,t)}},{key:"SetWasmPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.wasmPath=e,this.isWasmPathAbsolute=t}}]),e}(),Xq=(0,o.Z)((function e(){(0,s.Z)(this,e),this.instancedCategories=new Set,this.includeProperties=!0,this.optionalCategories=[PR],this.wasm={path:"",absolute:!1},this.webIfc={COORDINATE_TO_ORIGIN:!0,USE_FAST_BOOLS:!0},this.instancedCategories.add(PS),this.instancedCategories.add(OC),this.instancedCategories.add(Kk)})),Kq=function(){function e(t,n,r){(0,s.Z)(this,e),this._referenceMatrix=new lh,this._isFirstMatrix=!0,this._voids=new Set,this._geometriesByMaterial={},this._items={},this._webIfc=t,this._items=n,this._materials=r}return(0,o.Z)(e,[{key:"streamMesh",value:function(t,n){this.reset(t);var r=e.getGeometryID(n);!this._items[r]?this.generateBufferGeometries(n,r):this.getGeometryTransformation(n,r)}},{key:"cleanUp",value:function(){this._geometriesByMaterial={},this._voids.clear()}},{key:"addVoid",value:function(e){this._voids.add(e)}},{key:"reset",value:function(e){this._geometriesByMaterial={},this._referenceMatrix=new lh,this._isFirstMatrix=!0,this._webIfc=null,this._webIfc=e}},{key:"getGeometryTransformation",value:function(t,n){var r=this._items[n].referenceMatrix,i=t.geometries.get(0),a=e.getMeshMatrix(i);a.multiply(r),this._items[n].instances.push({id:t.expressID,matrix:a,hasVoids:this._voids.has(t.expressID)})}},{key:"generateBufferGeometries",value:function(e,t){for(var n=e.geometries.size(),r=0;r<n;r++){var i=e.geometries.get(r),a=this.getBufferGeometry(i.geometryExpressID);if(!a)return;this.applyTransform(i,a),this.sortGeometriesByMaterials(i,a)}this.saveGeometryInstances(t,e)}},{key:"saveGeometryInstances",value:function(e,t){this._items[e]={instances:[{id:t.expressID,matrix:new lh,hasVoids:this._voids.has(t.expressID)}],geometriesByMaterial:this._geometriesByMaterial,referenceMatrix:this._referenceMatrix}}},{key:"sortGeometriesByMaterials",value:function(e,t){var n=this.saveMaterials(e);this._geometriesByMaterial[n]?this._geometriesByMaterial[n].push(t):this._geometriesByMaterial[n]=[t]}},{key:"saveMaterials",value:function(e){var t=e.color,n="".concat(t.x).concat(t.y).concat(t.z).concat(t.w);return void 0!==this._materials[n]||this.saveNewMaterial(n,t),n}},{key:"saveNewMaterial",value:function(e,t){this._materials[e]=new Eg({color:new ep(t.x,t.y,t.z),transparent:1!==t.w,opacity:t.w,side:go})}},{key:"applyTransform",value:function(t,n){var r=e.getMeshMatrix(t);n.applyMatrix4(r),this._isFirstMatrix&&(this._referenceMatrix=(new lh).copy(r).invert(),this._isFirstMatrix=!1)}},{key:"getBufferGeometry",value:function(e){var t=this._webIfc.GetGeometry(0,e),n=this.getVertices(t);if(!n.length)return null;var r=this.getIndices(t);if(!r.length)return null;var i=this.constructGeometry(n,r);return t.delete(),i}},{key:"getIndices",value:function(e){return this._webIfc.GetIndexArray(e.GetIndexData(),e.GetIndexDataSize())}},{key:"getVertices",value:function(e){return this._webIfc.GetVertexArray(e.GetVertexData(),e.GetVertexDataSize())}},{key:"constructGeometry",value:function(e,t){for(var n=new vp,r=new Float32Array(e.length/2),i=new Float32Array(e.length/2),a=0;a<e.length;a+=6)r[a/2]=e[a],r[a/2+1]=e[a+1],r[a/2+2]=e[a+2],i[a/2]=e[a+3],i[a/2+1]=e[a+4],i[a/2+2]=e[a+5];return n.setAttribute("position",new ip(r,3)),n.setAttribute("normal",new ip(i,3)),n.setIndex(new ip(t,1)),n}}],[{key:"getMeshMatrix",value:function(e){var t=e.flatTransformation,n=new lh;return n.fromArray(t),n}},{key:"getGeometryID",value:function(e){for(var t="",n=e.geometries.size(),r=0;r<n;r++){t+=e.geometries.get(r).geometryExpressID}return t}}]),e}(),Qq={103090709:"IFCPROJECT",4097777520:"IFCSITE",4031249490:"IFCBUILDING",3124254112:"IFCBUILDINGSTOREY",3856911033:"IFCSPACE",1674181508:"IFCANNOTATION",25142252:"IFCCONTROLLER",32344328:"IFCBOILER",76236018:"IFCLAMP",90941305:"IFCPUMP",177149247:"IFCAIRTERMINALBOX",182646315:"IFCFLOWINSTRUMENT",263784265:"IFCFURNISHINGELEMENT",264262732:"IFCELECTRICGENERATOR",277319702:"IFCAUDIOVISUALAPPLIANCE",310824031:"IFCPIPEFITTING",331165859:"IFCSTAIR",342316401:"IFCDUCTFITTING",377706215:"IFCMECHANICALFASTENER",395920057:"IFCDOOR",402227799:"IFCELECTRICMOTOR",413509423:"IFCSYSTEMFURNITUREELEMENT",484807127:"IFCEVAPORATOR",486154966:"IFCWINDOWSTANDARDCASE",629592764:"IFCLIGHTFIXTURE",630975310:"IFCUNITARYCONTROLELEMENT",635142910:"IFCCABLECARRIERFITTING",639361253:"IFCCOIL",647756555:"IFCFASTENER",707683696:"IFCFLOWSTORAGEDEVICE",738039164:"IFCPROTECTIVEDEVICE",753842376:"IFCBEAM",812556717:"IFCTANK",819412036:"IFCFILTER",843113511:"IFCCOLUMN",862014818:"IFCELECTRICDISTRIBUTIONBOARD",900683007:"IFCFOOTING",905975707:"IFCCOLUMNSTANDARDCASE",926996030:"IFCVOIDINGFEATURE",979691226:"IFCREINFORCINGBAR",987401354:"IFCFLOWSEGMENT",1003880860:"IFCELECTRICTIMECONTROL",1051757585:"IFCCABLEFITTING",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",1073191201:"IFCMEMBER",1095909175:"IFCBUILDINGELEMENTPROXY",1156407060:"IFCPLATESTANDARDCASE",1162798199:"IFCSWITCHINGDEVICE",1329646415:"IFCSHADINGDEVICE",1335981549:"IFCDISCRETEACCESSORY",1360408905:"IFCDUCTSILENCER",1404847402:"IFCSTACKTERMINAL",1426591983:"IFCFIRESUPPRESSIONTERMINAL",1437502449:"IFCMEDICALDEVICE",1509553395:"IFCFURNITURE",1529196076:"IFCSLAB",1620046519:"IFCTRANSPORTELEMENT",1634111441:"IFCAIRTERMINAL",1658829314:"IFCENERGYCONVERSIONDEVICE",1677625105:"IFCCIVILELEMENT",1687234759:"IFCPILE",1904799276:"IFCELECTRICAPPLIANCE",1911478936:"IFCMEMBERSTANDARDCASE",1945004755:"IFCDISTRIBUTIONELEMENT",1973544240:"IFCCOVERING",1999602285:"IFCSPACEHEATER",2016517767:"IFCROOF",2056796094:"IFCAIRTOAIRHEATRECOVERY",2058353004:"IFCFLOWCONTROLLER",2068733104:"IFCHUMIDIFIER",2176052936:"IFCJUNCTIONBOX",2188021234:"IFCFLOWMETER",2223149337:"IFCFLOWTERMINAL",2262370178:"IFCRAILING",2272882330:"IFCCONDENSER",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",2320036040:"IFCREINFORCINGMESH",2347447852:"IFCTENDONANCHOR",2391383451:"IFCVIBRATIONISOLATOR",2391406946:"IFCWALL",2474470126:"IFCMOTORCONNECTION",2769231204:"IFCVIRTUALELEMENT",2814081492:"IFCENGINE",2906023776:"IFCBEAMSTANDARDCASE",2938176219:"IFCBURNER",2979338954:"IFCBUILDINGELEMENTPART",3024970846:"IFCRAMP",3026737570:"IFCTUBEBUNDLE",3027962421:"IFCSLABSTANDARDCASE",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",3053780830:"IFCSANITARYTERMINAL",3079942009:"IFCOPENINGSTANDARDCASE",3087945054:"IFCALARM",3101698114:"IFCSURFACEFEATURE",3127900445:"IFCSLABELEMENTEDCASE",3132237377:"IFCFLOWMOVINGDEVICE",3171933400:"IFCPLATE",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",3242481149:"IFCDOORSTANDARDCASE",3283111854:"IFCRAMPFLIGHT",3296154744:"IFCCHIMNEY",3304561284:"IFCWINDOW",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",3319311131:"IFCHEATEXCHANGER",3415622556:"IFCFAN",3420628829:"IFCSOLARDEVICE",3493046030:"IFCGEOGRAPHICELEMENT",3495092785:"IFCCURTAINWALL",3508470533:"IFCFLOWTREATMENTDEVICE",3512223829:"IFCWALLSTANDARDCASE",3518393246:"IFCDUCTSEGMENT",3571504051:"IFCCOMPRESSOR",3588315303:"IFCOPENINGELEMENT",3612865200:"IFCPIPESEGMENT",3640358203:"IFCCOOLINGTOWER",3651124850:"IFCPROJECTIONELEMENT",3694346114:"IFCOUTLET",3747195512:"IFCEVAPORATIVECOOLER",3758799889:"IFCCABLECARRIERSEGMENT",3824725483:"IFCTENDON",3825984169:"IFCTRANSFORMER",3902619387:"IFCCHILLER",4074379575:"IFCDAMPER",4086658281:"IFCSENSOR",4123344466:"IFCELEMENTASSEMBLY",4136498852:"IFCCOOLEDBEAM",4156078855:"IFCWALLELEMENTEDCASE",4175244083:"IFCINTERCEPTOR",4207607924:"IFCVALVE",4217484030:"IFCCABLESEGMENT",4237592921:"IFCWASTETERMINAL",4252922144:"IFCSTAIRFLIGHT",4278956645:"IFCFLOWFITTING",4288193352:"IFCACTUATOR",4292641817:"IFCUNITARYEQUIPMENT",3009204131:"IFCGRID"},Jq=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,[{key:"getAll",value:function(e,t){for(var n={},r=this.getCategories(),i=0;i<r.length;i++)for(var a=r[i],s=e.GetLineIDsWithType(t,a),o=s.size(),u=0;u<o;u++)n[s.get(u)]=a;return n}},{key:"getCategories",value:function(){var e=Object.keys(Qq).map((function(e){return parseInt(e,10)}));return e}}]),e}(),$q={3821786052:"IFCACTIONREQUEST",2296667514:"IFCACTOR",3630933823:"IFCACTORROLE",4288193352:"IFCACTUATOR",2874132201:"IFCACTUATORTYPE",618182010:"IFCADDRESS",1635779807:"IFCADVANCEDBREP",2603310189:"IFCADVANCEDBREPWITHVOIDS",3406155212:"IFCADVANCEDFACE",1634111441:"IFCAIRTERMINAL",177149247:"IFCAIRTERMINALBOX",1411407467:"IFCAIRTERMINALBOXTYPE",3352864051:"IFCAIRTERMINALTYPE",2056796094:"IFCAIRTOAIRHEATRECOVERY",1871374353:"IFCAIRTOAIRHEATRECOVERYTYPE",3087945054:"IFCALARM",3001207471:"IFCALARMTYPE",325726236:"IFCALIGNMENT",749761778:"IFCALIGNMENT2DHORIZONTAL",3199563722:"IFCALIGNMENT2DHORIZONTALSEGMENT",2483840362:"IFCALIGNMENT2DSEGMENT",3379348081:"IFCALIGNMENT2DVERSEGCIRCULARARC",3239324667:"IFCALIGNMENT2DVERSEGLINE",4263986512:"IFCALIGNMENT2DVERSEGPARABOLICARC",53199957:"IFCALIGNMENT2DVERTICAL",2029264950:"IFCALIGNMENT2DVERTICALSEGMENT",3512275521:"IFCALIGNMENTCURVE",1674181508:"IFCANNOTATION",669184980:"IFCANNOTATIONFILLAREA",639542469:"IFCAPPLICATION",411424972:"IFCAPPLIEDVALUE",130549933:"IFCAPPROVAL",3869604511:"IFCAPPROVALRELATIONSHIP",3798115385:"IFCARBITRARYCLOSEDPROFILEDEF",1310608509:"IFCARBITRARYOPENPROFILEDEF",2705031697:"IFCARBITRARYPROFILEDEFWITHVOIDS",3460190687:"IFCASSET",3207858831:"IFCASYMMETRICISHAPEPROFILEDEF",277319702:"IFCAUDIOVISUALAPPLIANCE",1532957894:"IFCAUDIOVISUALAPPLIANCETYPE",4261334040:"IFCAXIS1PLACEMENT",3125803723:"IFCAXIS2PLACEMENT2D",2740243338:"IFCAXIS2PLACEMENT3D",1967976161:"IFCBSPLINECURVE",2461110595:"IFCBSPLINECURVEWITHKNOTS",2887950389:"IFCBSPLINESURFACE",167062518:"IFCBSPLINESURFACEWITHKNOTS",753842376:"IFCBEAM",2906023776:"IFCBEAMSTANDARDCASE",819618141:"IFCBEAMTYPE",4196446775:"IFCBEARING",3649138523:"IFCBEARINGTYPE",616511568:"IFCBLOBTEXTURE",1334484129:"IFCBLOCK",32344328:"IFCBOILER",231477066:"IFCBOILERTYPE",3649129432:"IFCBOOLEANCLIPPINGRESULT",2736907675:"IFCBOOLEANRESULT",4037036970:"IFCBOUNDARYCONDITION",1136057603:"IFCBOUNDARYCURVE",1560379544:"IFCBOUNDARYEDGECONDITION",3367102660:"IFCBOUNDARYFACECONDITION",1387855156:"IFCBOUNDARYNODECONDITION",2069777674:"IFCBOUNDARYNODECONDITIONWARPING",1260505505:"IFCBOUNDEDCURVE",4182860854:"IFCBOUNDEDSURFACE",2581212453:"IFCBOUNDINGBOX",2713105998:"IFCBOXEDHALFSPACE",644574406:"IFCBRIDGE",963979645:"IFCBRIDGEPART",4031249490:"IFCBUILDING",3299480353:"IFCBUILDINGELEMENT",2979338954:"IFCBUILDINGELEMENTPART",39481116:"IFCBUILDINGELEMENTPARTTYPE",1095909175:"IFCBUILDINGELEMENTPROXY",1909888760:"IFCBUILDINGELEMENTPROXYTYPE",1950629157:"IFCBUILDINGELEMENTTYPE",3124254112:"IFCBUILDINGSTOREY",1177604601:"IFCBUILDINGSYSTEM",2938176219:"IFCBURNER",2188180465:"IFCBURNERTYPE",2898889636:"IFCCSHAPEPROFILEDEF",635142910:"IFCCABLECARRIERFITTING",395041908:"IFCCABLECARRIERFITTINGTYPE",3758799889:"IFCCABLECARRIERSEGMENT",3293546465:"IFCCABLECARRIERSEGMENTTYPE",1051757585:"IFCCABLEFITTING",2674252688:"IFCCABLEFITTINGTYPE",4217484030:"IFCCABLESEGMENT",1285652485:"IFCCABLESEGMENTTYPE",3999819293:"IFCCAISSONFOUNDATION",3203706013:"IFCCAISSONFOUNDATIONTYPE",1123145078:"IFCCARTESIANPOINT",574549367:"IFCCARTESIANPOINTLIST",1675464909:"IFCCARTESIANPOINTLIST2D",2059837836:"IFCCARTESIANPOINTLIST3D",59481748:"IFCCARTESIANTRANSFORMATIONOPERATOR",3749851601:"IFCCARTESIANTRANSFORMATIONOPERATOR2D",3486308946:"IFCCARTESIANTRANSFORMATIONOPERATOR2DNONUNIFORM",3331915920:"IFCCARTESIANTRANSFORMATIONOPERATOR3D",1416205885:"IFCCARTESIANTRANSFORMATIONOPERATOR3DNONUNIFORM",3150382593:"IFCCENTERLINEPROFILEDEF",3902619387:"IFCCHILLER",2951183804:"IFCCHILLERTYPE",3296154744:"IFCCHIMNEY",2197970202:"IFCCHIMNEYTYPE",2611217952:"IFCCIRCLE",2937912522:"IFCCIRCLEHOLLOWPROFILEDEF",1383045692:"IFCCIRCLEPROFILEDEF",1062206242:"IFCCIRCULARARCSEGMENT2D",1677625105:"IFCCIVILELEMENT",3893394355:"IFCCIVILELEMENTTYPE",747523909:"IFCCLASSIFICATION",647927063:"IFCCLASSIFICATIONREFERENCE",2205249479:"IFCCLOSEDSHELL",639361253:"IFCCOIL",2301859152:"IFCCOILTYPE",776857604:"IFCCOLOURRGB",3285139300:"IFCCOLOURRGBLIST",3264961684:"IFCCOLOURSPECIFICATION",843113511:"IFCCOLUMN",905975707:"IFCCOLUMNSTANDARDCASE",300633059:"IFCCOLUMNTYPE",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",400855858:"IFCCOMMUNICATIONSAPPLIANCETYPE",2542286263:"IFCCOMPLEXPROPERTY",3875453745:"IFCCOMPLEXPROPERTYTEMPLATE",3732776249:"IFCCOMPOSITECURVE",15328376:"IFCCOMPOSITECURVEONSURFACE",2485617015:"IFCCOMPOSITECURVESEGMENT",1485152156:"IFCCOMPOSITEPROFILEDEF",3571504051:"IFCCOMPRESSOR",3850581409:"IFCCOMPRESSORTYPE",2272882330:"IFCCONDENSER",2816379211:"IFCCONDENSERTYPE",2510884976:"IFCCONIC",370225590:"IFCCONNECTEDFACESET",1981873012:"IFCCONNECTIONCURVEGEOMETRY",2859738748:"IFCCONNECTIONGEOMETRY",45288368:"IFCCONNECTIONPOINTECCENTRICITY",2614616156:"IFCCONNECTIONPOINTGEOMETRY",2732653382:"IFCCONNECTIONSURFACEGEOMETRY",775493141:"IFCCONNECTIONVOLUMEGEOMETRY",1959218052:"IFCCONSTRAINT",3898045240:"IFCCONSTRUCTIONEQUIPMENTRESOURCE",2185764099:"IFCCONSTRUCTIONEQUIPMENTRESOURCETYPE",1060000209:"IFCCONSTRUCTIONMATERIALRESOURCE",4105962743:"IFCCONSTRUCTIONMATERIALRESOURCETYPE",488727124:"IFCCONSTRUCTIONPRODUCTRESOURCE",1525564444:"IFCCONSTRUCTIONPRODUCTRESOURCETYPE",2559216714:"IFCCONSTRUCTIONRESOURCE",2574617495:"IFCCONSTRUCTIONRESOURCETYPE",3419103109:"IFCCONTEXT",3050246964:"IFCCONTEXTDEPENDENTUNIT",3293443760:"IFCCONTROL",25142252:"IFCCONTROLLER",578613899:"IFCCONTROLLERTYPE",2889183280:"IFCCONVERSIONBASEDUNIT",2713554722:"IFCCONVERSIONBASEDUNITWITHOFFSET",4136498852:"IFCCOOLEDBEAM",335055490:"IFCCOOLEDBEAMTYPE",3640358203:"IFCCOOLINGTOWER",2954562838:"IFCCOOLINGTOWERTYPE",1785450214:"IFCCOORDINATEOPERATION",1466758467:"IFCCOORDINATEREFERENCESYSTEM",3895139033:"IFCCOSTITEM",1419761937:"IFCCOSTSCHEDULE",602808272:"IFCCOSTVALUE",1973544240:"IFCCOVERING",1916426348:"IFCCOVERINGTYPE",3295246426:"IFCCREWRESOURCE",1815067380:"IFCCREWRESOURCETYPE",2506170314:"IFCCSGPRIMITIVE3D",2147822146:"IFCCSGSOLID",539742890:"IFCCURRENCYRELATIONSHIP",3495092785:"IFCCURTAINWALL",1457835157:"IFCCURTAINWALLTYPE",2601014836:"IFCCURVE",2827736869:"IFCCURVEBOUNDEDPLANE",2629017746:"IFCCURVEBOUNDEDSURFACE",1186437898:"IFCCURVESEGMENT2D",3800577675:"IFCCURVESTYLE",1105321065:"IFCCURVESTYLEFONT",2367409068:"IFCCURVESTYLEFONTANDSCALING",3510044353:"IFCCURVESTYLEFONTPATTERN",1213902940:"IFCCYLINDRICALSURFACE",4074379575:"IFCDAMPER",3961806047:"IFCDAMPERTYPE",3426335179:"IFCDEEPFOUNDATION",1306400036:"IFCDEEPFOUNDATIONTYPE",3632507154:"IFCDERIVEDPROFILEDEF",1765591967:"IFCDERIVEDUNIT",1045800335:"IFCDERIVEDUNITELEMENT",2949456006:"IFCDIMENSIONALEXPONENTS",32440307:"IFCDIRECTION",1335981549:"IFCDISCRETEACCESSORY",2635815018:"IFCDISCRETEACCESSORYTYPE",1945343521:"IFCDISTANCEEXPRESSION",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",1599208980:"IFCDISTRIBUTIONCHAMBERELEMENTTYPE",562808652:"IFCDISTRIBUTIONCIRCUIT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",2063403501:"IFCDISTRIBUTIONCONTROLELEMENTTYPE",1945004755:"IFCDISTRIBUTIONELEMENT",3256556792:"IFCDISTRIBUTIONELEMENTTYPE",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",3849074793:"IFCDISTRIBUTIONFLOWELEMENTTYPE",3041715199:"IFCDISTRIBUTIONPORT",3205830791:"IFCDISTRIBUTIONSYSTEM",1154170062:"IFCDOCUMENTINFORMATION",770865208:"IFCDOCUMENTINFORMATIONRELATIONSHIP",3732053477:"IFCDOCUMENTREFERENCE",395920057:"IFCDOOR",2963535650:"IFCDOORLININGPROPERTIES",1714330368:"IFCDOORPANELPROPERTIES",3242481149:"IFCDOORSTANDARDCASE",526551008:"IFCDOORSTYLE",2323601079:"IFCDOORTYPE",445594917:"IFCDRAUGHTINGPREDEFINEDCOLOUR",4006246654:"IFCDRAUGHTINGPREDEFINEDCURVEFONT",342316401:"IFCDUCTFITTING",869906466:"IFCDUCTFITTINGTYPE",3518393246:"IFCDUCTSEGMENT",3760055223:"IFCDUCTSEGMENTTYPE",1360408905:"IFCDUCTSILENCER",2030761528:"IFCDUCTSILENCERTYPE",3900360178:"IFCEDGE",476780140:"IFCEDGECURVE",1472233963:"IFCEDGELOOP",1904799276:"IFCELECTRICAPPLIANCE",663422040:"IFCELECTRICAPPLIANCETYPE",862014818:"IFCELECTRICDISTRIBUTIONBOARD",2417008758:"IFCELECTRICDISTRIBUTIONBOARDTYPE",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",3277789161:"IFCELECTRICFLOWSTORAGEDEVICETYPE",264262732:"IFCELECTRICGENERATOR",1534661035:"IFCELECTRICGENERATORTYPE",402227799:"IFCELECTRICMOTOR",1217240411:"IFCELECTRICMOTORTYPE",1003880860:"IFCELECTRICTIMECONTROL",712377611:"IFCELECTRICTIMECONTROLTYPE",1758889154:"IFCELEMENT",4123344466:"IFCELEMENTASSEMBLY",2397081782:"IFCELEMENTASSEMBLYTYPE",1623761950:"IFCELEMENTCOMPONENT",2590856083:"IFCELEMENTCOMPONENTTYPE",1883228015:"IFCELEMENTQUANTITY",339256511:"IFCELEMENTTYPE",2777663545:"IFCELEMENTARYSURFACE",1704287377:"IFCELLIPSE",2835456948:"IFCELLIPSEPROFILEDEF",1658829314:"IFCENERGYCONVERSIONDEVICE",2107101300:"IFCENERGYCONVERSIONDEVICETYPE",2814081492:"IFCENGINE",132023988:"IFCENGINETYPE",3747195512:"IFCEVAPORATIVECOOLER",3174744832:"IFCEVAPORATIVECOOLERTYPE",484807127:"IFCEVAPORATOR",3390157468:"IFCEVAPORATORTYPE",4148101412:"IFCEVENT",211053100:"IFCEVENTTIME",4024345920:"IFCEVENTTYPE",297599258:"IFCEXTENDEDPROPERTIES",4294318154:"IFCEXTERNALINFORMATION",3200245327:"IFCEXTERNALREFERENCE",1437805879:"IFCEXTERNALREFERENCERELATIONSHIP",1209101575:"IFCEXTERNALSPATIALELEMENT",2853485674:"IFCEXTERNALSPATIALSTRUCTUREELEMENT",2242383968:"IFCEXTERNALLYDEFINEDHATCHSTYLE",1040185647:"IFCEXTERNALLYDEFINEDSURFACESTYLE",3548104201:"IFCEXTERNALLYDEFINEDTEXTFONT",477187591:"IFCEXTRUDEDAREASOLID",2804161546:"IFCEXTRUDEDAREASOLIDTAPERED",2556980723:"IFCFACE",2047409740:"IFCFACEBASEDSURFACEMODEL",1809719519:"IFCFACEBOUND",803316827:"IFCFACEOUTERBOUND",3008276851:"IFCFACESURFACE",807026263:"IFCFACETEDBREP",3737207727:"IFCFACETEDBREPWITHVOIDS",24185140:"IFCFACILITY",1310830890:"IFCFACILITYPART",4219587988:"IFCFAILURECONNECTIONCONDITION",3415622556:"IFCFAN",346874300:"IFCFANTYPE",647756555:"IFCFASTENER",2489546625:"IFCFASTENERTYPE",2827207264:"IFCFEATUREELEMENT",2143335405:"IFCFEATUREELEMENTADDITION",1287392070:"IFCFEATUREELEMENTSUBTRACTION",738692330:"IFCFILLAREASTYLE",374418227:"IFCFILLAREASTYLEHATCHING",315944413:"IFCFILLAREASTYLETILES",819412036:"IFCFILTER",1810631287:"IFCFILTERTYPE",1426591983:"IFCFIRESUPPRESSIONTERMINAL",4222183408:"IFCFIRESUPPRESSIONTERMINALTYPE",2652556860:"IFCFIXEDREFERENCESWEPTAREASOLID",2058353004:"IFCFLOWCONTROLLER",3907093117:"IFCFLOWCONTROLLERTYPE",4278956645:"IFCFLOWFITTING",3198132628:"IFCFLOWFITTINGTYPE",182646315:"IFCFLOWINSTRUMENT",4037862832:"IFCFLOWINSTRUMENTTYPE",2188021234:"IFCFLOWMETER",3815607619:"IFCFLOWMETERTYPE",3132237377:"IFCFLOWMOVINGDEVICE",1482959167:"IFCFLOWMOVINGDEVICETYPE",987401354:"IFCFLOWSEGMENT",1834744321:"IFCFLOWSEGMENTTYPE",707683696:"IFCFLOWSTORAGEDEVICE",1339347760:"IFCFLOWSTORAGEDEVICETYPE",2223149337:"IFCFLOWTERMINAL",2297155007:"IFCFLOWTERMINALTYPE",3508470533:"IFCFLOWTREATMENTDEVICE",3009222698:"IFCFLOWTREATMENTDEVICETYPE",900683007:"IFCFOOTING",1893162501:"IFCFOOTINGTYPE",263784265:"IFCFURNISHINGELEMENT",4238390223:"IFCFURNISHINGELEMENTTYPE",1509553395:"IFCFURNITURE",1268542332:"IFCFURNITURETYPE",3493046030:"IFCGEOGRAPHICELEMENT",4095422895:"IFCGEOGRAPHICELEMENTTYPE",987898635:"IFCGEOMETRICCURVESET",3448662350:"IFCGEOMETRICREPRESENTATIONCONTEXT",2453401579:"IFCGEOMETRICREPRESENTATIONITEM",4142052618:"IFCGEOMETRICREPRESENTATIONSUBCONTEXT",3590301190:"IFCGEOMETRICSET",3009204131:"IFCGRID",852622518:"IFCGRIDAXIS",178086475:"IFCGRIDPLACEMENT",2706460486:"IFCGROUP",812098782:"IFCHALFSPACESOLID",3319311131:"IFCHEATEXCHANGER",1251058090:"IFCHEATEXCHANGERTYPE",2068733104:"IFCHUMIDIFIER",1806887404:"IFCHUMIDIFIERTYPE",1484403080:"IFCISHAPEPROFILEDEF",3905492369:"IFCIMAGETEXTURE",3570813810:"IFCINDEXEDCOLOURMAP",2571569899:"IFCINDEXEDPOLYCURVE",178912537:"IFCINDEXEDPOLYGONALFACE",2294589976:"IFCINDEXEDPOLYGONALFACEWITHVOIDS",1437953363:"IFCINDEXEDTEXTUREMAP",2133299955:"IFCINDEXEDTRIANGLETEXTUREMAP",4175244083:"IFCINTERCEPTOR",3946677679:"IFCINTERCEPTORTYPE",3113134337:"IFCINTERSECTIONCURVE",2391368822:"IFCINVENTORY",3741457305:"IFCIRREGULARTIMESERIES",3020489413:"IFCIRREGULARTIMESERIESVALUE",2176052936:"IFCJUNCTIONBOX",4288270099:"IFCJUNCTIONBOXTYPE",572779678:"IFCLSHAPEPROFILEDEF",3827777499:"IFCLABORRESOURCE",428585644:"IFCLABORRESOURCETYPE",1585845231:"IFCLAGTIME",76236018:"IFCLAMP",1051575348:"IFCLAMPTYPE",2655187982:"IFCLIBRARYINFORMATION",3452421091:"IFCLIBRARYREFERENCE",4162380809:"IFCLIGHTDISTRIBUTIONDATA",629592764:"IFCLIGHTFIXTURE",1161773419:"IFCLIGHTFIXTURETYPE",1566485204:"IFCLIGHTINTENSITYDISTRIBUTION",1402838566:"IFCLIGHTSOURCE",125510826:"IFCLIGHTSOURCEAMBIENT",2604431987:"IFCLIGHTSOURCEDIRECTIONAL",4266656042:"IFCLIGHTSOURCEGONIOMETRIC",1520743889:"IFCLIGHTSOURCEPOSITIONAL",3422422726:"IFCLIGHTSOURCESPOT",1281925730:"IFCLINE",3092502836:"IFCLINESEGMENT2D",388784114:"IFCLINEARPLACEMENT",1154579445:"IFCLINEARPOSITIONINGELEMENT",2624227202:"IFCLOCALPLACEMENT",1008929658:"IFCLOOP",1425443689:"IFCMANIFOLDSOLIDBREP",3057273783:"IFCMAPCONVERSION",2347385850:"IFCMAPPEDITEM",1838606355:"IFCMATERIAL",1847130766:"IFCMATERIALCLASSIFICATIONRELATIONSHIP",3708119e3:"IFCMATERIALCONSTITUENT",2852063980:"IFCMATERIALCONSTITUENTSET",760658860:"IFCMATERIALDEFINITION",2022407955:"IFCMATERIALDEFINITIONREPRESENTATION",248100487:"IFCMATERIALLAYER",3303938423:"IFCMATERIALLAYERSET",1303795690:"IFCMATERIALLAYERSETUSAGE",1847252529:"IFCMATERIALLAYERWITHOFFSETS",2199411900:"IFCMATERIALLIST",2235152071:"IFCMATERIALPROFILE",164193824:"IFCMATERIALPROFILESET",3079605661:"IFCMATERIALPROFILESETUSAGE",3404854881:"IFCMATERIALPROFILESETUSAGETAPERING",552965576:"IFCMATERIALPROFILEWITHOFFSETS",3265635763:"IFCMATERIALPROPERTIES",853536259:"IFCMATERIALRELATIONSHIP",1507914824:"IFCMATERIALUSAGEDEFINITION",2597039031:"IFCMEASUREWITHUNIT",377706215:"IFCMECHANICALFASTENER",2108223431:"IFCMECHANICALFASTENERTYPE",1437502449:"IFCMEDICALDEVICE",1114901282:"IFCMEDICALDEVICETYPE",1073191201:"IFCMEMBER",1911478936:"IFCMEMBERSTANDARDCASE",3181161470:"IFCMEMBERTYPE",3368373690:"IFCMETRIC",2998442950:"IFCMIRROREDPROFILEDEF",2706619895:"IFCMONETARYUNIT",2474470126:"IFCMOTORCONNECTION",977012517:"IFCMOTORCONNECTIONTYPE",1918398963:"IFCNAMEDUNIT",3888040117:"IFCOBJECT",219451334:"IFCOBJECTDEFINITION",3701648758:"IFCOBJECTPLACEMENT",2251480897:"IFCOBJECTIVE",4143007308:"IFCOCCUPANT",590820931:"IFCOFFSETCURVE",3388369263:"IFCOFFSETCURVE2D",3505215534:"IFCOFFSETCURVE3D",2485787929:"IFCOFFSETCURVEBYDISTANCES",2665983363:"IFCOPENSHELL",3588315303:"IFCOPENINGELEMENT",3079942009:"IFCOPENINGSTANDARDCASE",4251960020:"IFCORGANIZATION",1411181986:"IFCORGANIZATIONRELATIONSHIP",643959842:"IFCORIENTATIONEXPRESSION",1029017970:"IFCORIENTEDEDGE",144952367:"IFCOUTERBOUNDARYCURVE",3694346114:"IFCOUTLET",2837617999:"IFCOUTLETTYPE",1207048766:"IFCOWNERHISTORY",2529465313:"IFCPARAMETERIZEDPROFILEDEF",2519244187:"IFCPATH",1682466193:"IFCPCURVE",2382730787:"IFCPERFORMANCEHISTORY",3566463478:"IFCPERMEABLECOVERINGPROPERTIES",3327091369:"IFCPERMIT",2077209135:"IFCPERSON",101040310:"IFCPERSONANDORGANIZATION",3021840470:"IFCPHYSICALCOMPLEXQUANTITY",2483315170:"IFCPHYSICALQUANTITY",2226359599:"IFCPHYSICALSIMPLEQUANTITY",1687234759:"IFCPILE",1158309216:"IFCPILETYPE",310824031:"IFCPIPEFITTING",804291784:"IFCPIPEFITTINGTYPE",3612865200:"IFCPIPESEGMENT",4231323485:"IFCPIPESEGMENTTYPE",597895409:"IFCPIXELTEXTURE",2004835150:"IFCPLACEMENT",603570806:"IFCPLANARBOX",1663979128:"IFCPLANAREXTENT",220341763:"IFCPLANE",3171933400:"IFCPLATE",1156407060:"IFCPLATESTANDARDCASE",4017108033:"IFCPLATETYPE",2067069095:"IFCPOINT",4022376103:"IFCPOINTONCURVE",1423911732:"IFCPOINTONSURFACE",2924175390:"IFCPOLYLOOP",2775532180:"IFCPOLYGONALBOUNDEDHALFSPACE",2839578677:"IFCPOLYGONALFACESET",3724593414:"IFCPOLYLINE",3740093272:"IFCPORT",1946335990:"IFCPOSITIONINGELEMENT",3355820592:"IFCPOSTALADDRESS",759155922:"IFCPREDEFINEDCOLOUR",2559016684:"IFCPREDEFINEDCURVEFONT",3727388367:"IFCPREDEFINEDITEM",3778827333:"IFCPREDEFINEDPROPERTIES",3967405729:"IFCPREDEFINEDPROPERTYSET",1775413392:"IFCPREDEFINEDTEXTFONT",677532197:"IFCPRESENTATIONITEM",2022622350:"IFCPRESENTATIONLAYERASSIGNMENT",1304840413:"IFCPRESENTATIONLAYERWITHSTYLE",3119450353:"IFCPRESENTATIONSTYLE",2417041796:"IFCPRESENTATIONSTYLEASSIGNMENT",2744685151:"IFCPROCEDURE",569719735:"IFCPROCEDURETYPE",2945172077:"IFCPROCESS",4208778838:"IFCPRODUCT",673634403:"IFCPRODUCTDEFINITIONSHAPE",2095639259:"IFCPRODUCTREPRESENTATION",3958567839:"IFCPROFILEDEF",2802850158:"IFCPROFILEPROPERTIES",103090709:"IFCPROJECT",653396225:"IFCPROJECTLIBRARY",2904328755:"IFCPROJECTORDER",3843373140:"IFCPROJECTEDCRS",3651124850:"IFCPROJECTIONELEMENT",2598011224:"IFCPROPERTY",986844984:"IFCPROPERTYABSTRACTION",871118103:"IFCPROPERTYBOUNDEDVALUE",1680319473:"IFCPROPERTYDEFINITION",148025276:"IFCPROPERTYDEPENDENCYRELATIONSHIP",4166981789:"IFCPROPERTYENUMERATEDVALUE",3710013099:"IFCPROPERTYENUMERATION",2752243245:"IFCPROPERTYLISTVALUE",941946838:"IFCPROPERTYREFERENCEVALUE",1451395588:"IFCPROPERTYSET",3357820518:"IFCPROPERTYSETDEFINITION",492091185:"IFCPROPERTYSETTEMPLATE",3650150729:"IFCPROPERTYSINGLEVALUE",110355661:"IFCPROPERTYTABLEVALUE",3521284610:"IFCPROPERTYTEMPLATE",1482703590:"IFCPROPERTYTEMPLATEDEFINITION",738039164:"IFCPROTECTIVEDEVICE",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",655969474:"IFCPROTECTIVEDEVICETRIPPINGUNITTYPE",1842657554:"IFCPROTECTIVEDEVICETYPE",3219374653:"IFCPROXY",90941305:"IFCPUMP",2250791053:"IFCPUMPTYPE",2044713172:"IFCQUANTITYAREA",2093928680:"IFCQUANTITYCOUNT",931644368:"IFCQUANTITYLENGTH",2090586900:"IFCQUANTITYSET",3252649465:"IFCQUANTITYTIME",2405470396:"IFCQUANTITYVOLUME",825690147:"IFCQUANTITYWEIGHT",2262370178:"IFCRAILING",2893384427:"IFCRAILINGTYPE",3024970846:"IFCRAMP",3283111854:"IFCRAMPFLIGHT",2324767716:"IFCRAMPFLIGHTTYPE",1469900589:"IFCRAMPTYPE",1232101972:"IFCRATIONALBSPLINECURVEWITHKNOTS",683857671:"IFCRATIONALBSPLINESURFACEWITHKNOTS",2770003689:"IFCRECTANGLEHOLLOWPROFILEDEF",3615266464:"IFCRECTANGLEPROFILEDEF",2798486643:"IFCRECTANGULARPYRAMID",3454111270:"IFCRECTANGULARTRIMMEDSURFACE",3915482550:"IFCRECURRENCEPATTERN",2433181523:"IFCREFERENCE",4021432810:"IFCREFERENT",3413951693:"IFCREGULARTIMESERIES",1580146022:"IFCREINFORCEMENTBARPROPERTIES",3765753017:"IFCREINFORCEMENTDEFINITIONPROPERTIES",979691226:"IFCREINFORCINGBAR",2572171363:"IFCREINFORCINGBARTYPE",3027567501:"IFCREINFORCINGELEMENT",964333572:"IFCREINFORCINGELEMENTTYPE",2320036040:"IFCREINFORCINGMESH",2310774935:"IFCREINFORCINGMESHTYPE",160246688:"IFCRELAGGREGATES",3939117080:"IFCRELASSIGNS",1683148259:"IFCRELASSIGNSTOACTOR",2495723537:"IFCRELASSIGNSTOCONTROL",1307041759:"IFCRELASSIGNSTOGROUP",1027710054:"IFCRELASSIGNSTOGROUPBYFACTOR",4278684876:"IFCRELASSIGNSTOPROCESS",2857406711:"IFCRELASSIGNSTOPRODUCT",205026976:"IFCRELASSIGNSTORESOURCE",1865459582:"IFCRELASSOCIATES",4095574036:"IFCRELASSOCIATESAPPROVAL",919958153:"IFCRELASSOCIATESCLASSIFICATION",2728634034:"IFCRELASSOCIATESCONSTRAINT",982818633:"IFCRELASSOCIATESDOCUMENT",3840914261:"IFCRELASSOCIATESLIBRARY",2655215786:"IFCRELASSOCIATESMATERIAL",826625072:"IFCRELCONNECTS",1204542856:"IFCRELCONNECTSELEMENTS",3945020480:"IFCRELCONNECTSPATHELEMENTS",4201705270:"IFCRELCONNECTSPORTTOELEMENT",3190031847:"IFCRELCONNECTSPORTS",2127690289:"IFCRELCONNECTSSTRUCTURALACTIVITY",1638771189:"IFCRELCONNECTSSTRUCTURALMEMBER",504942748:"IFCRELCONNECTSWITHECCENTRICITY",3678494232:"IFCRELCONNECTSWITHREALIZINGELEMENTS",3242617779:"IFCRELCONTAINEDINSPATIALSTRUCTURE",886880790:"IFCRELCOVERSBLDGELEMENTS",2802773753:"IFCRELCOVERSSPACES",2565941209:"IFCRELDECLARES",2551354335:"IFCRELDECOMPOSES",693640335:"IFCRELDEFINES",1462361463:"IFCRELDEFINESBYOBJECT",4186316022:"IFCRELDEFINESBYPROPERTIES",307848117:"IFCRELDEFINESBYTEMPLATE",781010003:"IFCRELDEFINESBYTYPE",3940055652:"IFCRELFILLSELEMENT",279856033:"IFCRELFLOWCONTROLELEMENTS",427948657:"IFCRELINTERFERESELEMENTS",3268803585:"IFCRELNESTS",1441486842:"IFCRELPOSITIONS",750771296:"IFCRELPROJECTSELEMENT",1245217292:"IFCRELREFERENCEDINSPATIALSTRUCTURE",4122056220:"IFCRELSEQUENCE",366585022:"IFCRELSERVICESBUILDINGS",3451746338:"IFCRELSPACEBOUNDARY",3523091289:"IFCRELSPACEBOUNDARY1STLEVEL",1521410863:"IFCRELSPACEBOUNDARY2NDLEVEL",1401173127:"IFCRELVOIDSELEMENT",478536968:"IFCRELATIONSHIP",816062949:"IFCREPARAMETRISEDCOMPOSITECURVESEGMENT",1076942058:"IFCREPRESENTATION",3377609919:"IFCREPRESENTATIONCONTEXT",3008791417:"IFCREPRESENTATIONITEM",1660063152:"IFCREPRESENTATIONMAP",2914609552:"IFCRESOURCE",2943643501:"IFCRESOURCEAPPROVALRELATIONSHIP",1608871552:"IFCRESOURCECONSTRAINTRELATIONSHIP",2439245199:"IFCRESOURCELEVELRELATIONSHIP",1042787934:"IFCRESOURCETIME",1856042241:"IFCREVOLVEDAREASOLID",3243963512:"IFCREVOLVEDAREASOLIDTAPERED",4158566097:"IFCRIGHTCIRCULARCONE",3626867408:"IFCRIGHTCIRCULARCYLINDER",2016517767:"IFCROOF",2781568857:"IFCROOFTYPE",2341007311:"IFCROOT",2778083089:"IFCROUNDEDRECTANGLEPROFILEDEF",448429030:"IFCSIUNIT",3053780830:"IFCSANITARYTERMINAL",1768891740:"IFCSANITARYTERMINALTYPE",1054537805:"IFCSCHEDULINGTIME",2157484638:"IFCSEAMCURVE",2042790032:"IFCSECTIONPROPERTIES",4165799628:"IFCSECTIONREINFORCEMENTPROPERTIES",1862484736:"IFCSECTIONEDSOLID",1290935644:"IFCSECTIONEDSOLIDHORIZONTAL",1509187699:"IFCSECTIONEDSPINE",4086658281:"IFCSENSOR",1783015770:"IFCSENSORTYPE",1329646415:"IFCSHADINGDEVICE",4074543187:"IFCSHADINGDEVICETYPE",867548509:"IFCSHAPEASPECT",3982875396:"IFCSHAPEMODEL",4240577450:"IFCSHAPEREPRESENTATION",4124623270:"IFCSHELLBASEDSURFACEMODEL",3692461612:"IFCSIMPLEPROPERTY",3663146110:"IFCSIMPLEPROPERTYTEMPLATE",4097777520:"IFCSITE",1529196076:"IFCSLAB",3127900445:"IFCSLABELEMENTEDCASE",3027962421:"IFCSLABSTANDARDCASE",2533589738:"IFCSLABTYPE",2609359061:"IFCSLIPPAGECONNECTIONCONDITION",3420628829:"IFCSOLARDEVICE",1072016465:"IFCSOLARDEVICETYPE",723233188:"IFCSOLIDMODEL",3856911033:"IFCSPACE",1999602285:"IFCSPACEHEATER",1305183839:"IFCSPACEHEATERTYPE",3812236995:"IFCSPACETYPE",1412071761:"IFCSPATIALELEMENT",710998568:"IFCSPATIALELEMENTTYPE",2706606064:"IFCSPATIALSTRUCTUREELEMENT",3893378262:"IFCSPATIALSTRUCTUREELEMENTTYPE",463610769:"IFCSPATIALZONE",2481509218:"IFCSPATIALZONETYPE",451544542:"IFCSPHERE",4015995234:"IFCSPHERICALSURFACE",1404847402:"IFCSTACKTERMINAL",3112655638:"IFCSTACKTERMINALTYPE",331165859:"IFCSTAIR",4252922144:"IFCSTAIRFLIGHT",1039846685:"IFCSTAIRFLIGHTTYPE",338393293:"IFCSTAIRTYPE",682877961:"IFCSTRUCTURALACTION",3544373492:"IFCSTRUCTURALACTIVITY",2515109513:"IFCSTRUCTURALANALYSISMODEL",1179482911:"IFCSTRUCTURALCONNECTION",2273995522:"IFCSTRUCTURALCONNECTIONCONDITION",1004757350:"IFCSTRUCTURALCURVEACTION",4243806635:"IFCSTRUCTURALCURVECONNECTION",214636428:"IFCSTRUCTURALCURVEMEMBER",2445595289:"IFCSTRUCTURALCURVEMEMBERVARYING",2757150158:"IFCSTRUCTURALCURVEREACTION",3136571912:"IFCSTRUCTURALITEM",1807405624:"IFCSTRUCTURALLINEARACTION",2162789131:"IFCSTRUCTURALLOAD",385403989:"IFCSTRUCTURALLOADCASE",3478079324:"IFCSTRUCTURALLOADCONFIGURATION",1252848954:"IFCSTRUCTURALLOADGROUP",1595516126:"IFCSTRUCTURALLOADLINEARFORCE",609421318:"IFCSTRUCTURALLOADORRESULT",2668620305:"IFCSTRUCTURALLOADPLANARFORCE",2473145415:"IFCSTRUCTURALLOADSINGLEDISPLACEMENT",1973038258:"IFCSTRUCTURALLOADSINGLEDISPLACEMENTDISTORTION",1597423693:"IFCSTRUCTURALLOADSINGLEFORCE",1190533807:"IFCSTRUCTURALLOADSINGLEFORCEWARPING",2525727697:"IFCSTRUCTURALLOADSTATIC",3408363356:"IFCSTRUCTURALLOADTEMPERATURE",530289379:"IFCSTRUCTURALMEMBER",1621171031:"IFCSTRUCTURALPLANARACTION",2082059205:"IFCSTRUCTURALPOINTACTION",734778138:"IFCSTRUCTURALPOINTCONNECTION",1235345126:"IFCSTRUCTURALPOINTREACTION",3689010777:"IFCSTRUCTURALREACTION",2986769608:"IFCSTRUCTURALRESULTGROUP",3657597509:"IFCSTRUCTURALSURFACEACTION",1975003073:"IFCSTRUCTURALSURFACECONNECTION",3979015343:"IFCSTRUCTURALSURFACEMEMBER",2218152070:"IFCSTRUCTURALSURFACEMEMBERVARYING",603775116:"IFCSTRUCTURALSURFACEREACTION",2830218821:"IFCSTYLEMODEL",3958052878:"IFCSTYLEDITEM",3049322572:"IFCSTYLEDREPRESENTATION",148013059:"IFCSUBCONTRACTRESOURCE",4095615324:"IFCSUBCONTRACTRESOURCETYPE",2233826070:"IFCSUBEDGE",2513912981:"IFCSURFACE",699246055:"IFCSURFACECURVE",2028607225:"IFCSURFACECURVESWEPTAREASOLID",3101698114:"IFCSURFACEFEATURE",2809605785:"IFCSURFACEOFLINEAREXTRUSION",4124788165:"IFCSURFACEOFREVOLUTION",2934153892:"IFCSURFACEREINFORCEMENTAREA",1300840506:"IFCSURFACESTYLE",3303107099:"IFCSURFACESTYLELIGHTING",1607154358:"IFCSURFACESTYLEREFRACTION",1878645084:"IFCSURFACESTYLERENDERING",846575682:"IFCSURFACESTYLESHADING",1351298697:"IFCSURFACESTYLEWITHTEXTURES",626085974:"IFCSURFACETEXTURE",2247615214:"IFCSWEPTAREASOLID",1260650574:"IFCSWEPTDISKSOLID",1096409881:"IFCSWEPTDISKSOLIDPOLYGONAL",230924584:"IFCSWEPTSURFACE",1162798199:"IFCSWITCHINGDEVICE",2315554128:"IFCSWITCHINGDEVICETYPE",2254336722:"IFCSYSTEM",413509423:"IFCSYSTEMFURNITUREELEMENT",1580310250:"IFCSYSTEMFURNITUREELEMENTTYPE",3071757647:"IFCTSHAPEPROFILEDEF",985171141:"IFCTABLE",2043862942:"IFCTABLECOLUMN",531007025:"IFCTABLEROW",812556717:"IFCTANK",5716631:"IFCTANKTYPE",3473067441:"IFCTASK",1549132990:"IFCTASKTIME",2771591690:"IFCTASKTIMERECURRING",3206491090:"IFCTASKTYPE",912023232:"IFCTELECOMADDRESS",3824725483:"IFCTENDON",2347447852:"IFCTENDONANCHOR",3081323446:"IFCTENDONANCHORTYPE",3663046924:"IFCTENDONCONDUIT",2281632017:"IFCTENDONCONDUITTYPE",2415094496:"IFCTENDONTYPE",2387106220:"IFCTESSELLATEDFACESET",901063453:"IFCTESSELLATEDITEM",4282788508:"IFCTEXTLITERAL",3124975700:"IFCTEXTLITERALWITHEXTENT",1447204868:"IFCTEXTSTYLE",1983826977:"IFCTEXTSTYLEFONTMODEL",2636378356:"IFCTEXTSTYLEFORDEFINEDFONT",1640371178:"IFCTEXTSTYLETEXTMODEL",280115917:"IFCTEXTURECOORDINATE",1742049831:"IFCTEXTURECOORDINATEGENERATOR",2552916305:"IFCTEXTUREMAP",1210645708:"IFCTEXTUREVERTEX",3611470254:"IFCTEXTUREVERTEXLIST",1199560280:"IFCTIMEPERIOD",3101149627:"IFCTIMESERIES",581633288:"IFCTIMESERIESVALUE",1377556343:"IFCTOPOLOGICALREPRESENTATIONITEM",1735638870:"IFCTOPOLOGYREPRESENTATION",1935646853:"IFCTOROIDALSURFACE",3825984169:"IFCTRANSFORMER",1692211062:"IFCTRANSFORMERTYPE",2595432518:"IFCTRANSITIONCURVESEGMENT2D",1620046519:"IFCTRANSPORTELEMENT",2097647324:"IFCTRANSPORTELEMENTTYPE",2715220739:"IFCTRAPEZIUMPROFILEDEF",2916149573:"IFCTRIANGULATEDFACESET",1229763772:"IFCTRIANGULATEDIRREGULARNETWORK",3593883385:"IFCTRIMMEDCURVE",3026737570:"IFCTUBEBUNDLE",1600972822:"IFCTUBEBUNDLETYPE",1628702193:"IFCTYPEOBJECT",3736923433:"IFCTYPEPROCESS",2347495698:"IFCTYPEPRODUCT",3698973494:"IFCTYPERESOURCE",427810014:"IFCUSHAPEPROFILEDEF",180925521:"IFCUNITASSIGNMENT",630975310:"IFCUNITARYCONTROLELEMENT",3179687236:"IFCUNITARYCONTROLELEMENTTYPE",4292641817:"IFCUNITARYEQUIPMENT",1911125066:"IFCUNITARYEQUIPMENTTYPE",4207607924:"IFCVALVE",728799441:"IFCVALVETYPE",1417489154:"IFCVECTOR",2799835756:"IFCVERTEX",2759199220:"IFCVERTEXLOOP",1907098498:"IFCVERTEXPOINT",1530820697:"IFCVIBRATIONDAMPER",3956297820:"IFCVIBRATIONDAMPERTYPE",2391383451:"IFCVIBRATIONISOLATOR",3313531582:"IFCVIBRATIONISOLATORTYPE",2769231204:"IFCVIRTUALELEMENT",891718957:"IFCVIRTUALGRIDINTERSECTION",926996030:"IFCVOIDINGFEATURE",2391406946:"IFCWALL",4156078855:"IFCWALLELEMENTEDCASE",3512223829:"IFCWALLSTANDARDCASE",1898987631:"IFCWALLTYPE",4237592921:"IFCWASTETERMINAL",1133259667:"IFCWASTETERMINALTYPE",3304561284:"IFCWINDOW",336235671:"IFCWINDOWLININGPROPERTIES",512836454:"IFCWINDOWPANELPROPERTIES",486154966:"IFCWINDOWSTANDARDCASE",1299126871:"IFCWINDOWSTYLE",4009809668:"IFCWINDOWTYPE",4088093105:"IFCWORKCALENDAR",1028945134:"IFCWORKCONTROL",4218914973:"IFCWORKPLAN",3342526732:"IFCWORKSCHEDULE",1236880293:"IFCWORKTIME",2543172580:"IFCZSHAPEPROFILEDEF",1033361043:"IFCZONE"},eX=new Set([1123145078,574549367,1675464909,2059837836,3798115385,32440307,3125803723,3207858831,2740243338,2624227202,4240577450,3615266464,3724593414,220341763,477187591,1878645084,1300840506,3303107099,1607154358,1878645084,846575682,1351298697,2417041796,3049322572,3331915920,1416205885,776857604,3285139300,3958052878,2827736869,2732653382,673634403,3448662350,4142052618,2924175390,803316827,2556980723,1809719519,2205249479,807026263,3737207727,1660063152,2347385850,3940055652,2705031697,3732776249,2485617015,2611217952,1704287377,2937912522,2770003689,1281925730,1484403080,3448662350,4142052618,3800577675,4006246654,3590301190,1383045692,2775532180,2047409740,370225590,3593883385,2665983363,4124623270,812098782,3649129432,987898635,1105321065,3510044353,1635779807,2603310189,3406155212,1310608509,4261334040,2736907675,3649129432,1136057603,1260505505,4182860854,2713105998,2898889636,59481748,3749851601,3486308946,3150382593,1062206242,3264961684,15328376,1485152156,370225590,1981873012,2859738748,45288368,2614616156,2732653382,775493141,2147822146,2601014836,2629017746,1186437898,2367409068,1213902940,3632507154,3900360178,476780140,1472233963,2804161546,3008276851,738692330,374418227,315944413,3905492369,3570813810,2571569899,178912537,2294589976,1437953363,2133299955,572779678,3092502836,388784114,2624227202,1425443689,3057273783,2347385850,1682466193,2519244187,2839578677,3958567839,2513912981,2830218821,427810014]),tX=function(){function e(){(0,s.Z)(this,e),this.loadProgress=new ME,this.propertiesSerialized=new ME,this._progress=0}return(0,o.Z)(e,[{key:"export",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s,o,u,l;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllGeometriesIDs(n,t);case 2:return r=e.sent,(i={}).coordinationMatrix=t.GetCoordinationMatrix(n),e.next=7,t.GetAllLines(n);case 7:a=e.sent,s=a.size(),this._progress=.1,o=0,u=0;case 12:if(!(u<s)){e.next=30;break}if(l=a.get(u),r.has(l)){e.next=25;break}return e.prev=15,e.next=18,t.GetLine(n,l);case 18:i[l]=e.sent,e.next=24;break;case 21:e.prev=21,e.t0=e.catch(15),console.log("Properties of the element ".concat(l," could not be processed"));case 24:o++;case 25:void 0!==this.size&&o>this.size&&(this.propertiesSerialized.trigger(i),i=null,i={},o=0),u/s>this._progress&&(this.loadProgress.trigger({progress:u,total:s}),this._progress+=.1);case 27:u++,e.next=12;break;case 30:this.propertiesSerialized.trigger(i),i=null;case 32:case"end":return e.stop()}}),e,this,[[15,21]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAllGeometriesIDs",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s,o,u,l;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Set,i=Array.from(eX),a=0;case 3:if(!(a<i.length)){e.next=13;break}return s=i[a],e.next=7,n.GetLineIDsWithType(t,s);case 7:for(o=e.sent,u=o.size(),l=0;l<u;l++)r.add(o.get(l));case 10:a++,e.next=3;break;case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),nX=function(){function e(){(0,s.Z)(this,e),this.floorProperties=[],this.itemsByFloor={}}return(0,o.Z)(e,[{key:"setupFloors",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.reset(),e.next=3,this.getFloors(t);case 3:r=e.sent,i=b(r),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return s=a.value,e.next=11,this.getFloorProperties(t,s,n);case 11:this.saveFloorRelations(s);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[5,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){this.floorProperties=[],this.itemsByFloor={}}},{key:"reset",value:function(){this.floorProperties=[],this.itemsByFloor={}}},{key:"getFloorProperties",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r){var i,a,s;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.expressID,a=t.properties,e.next=4,a.getItemProperties(0,i,!1);case 4:return s=e.sent,e.next=7,this.getHeight(s,t,a,r);case 7:s.SceneHeight=e.sent,this.floorProperties.push(s);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getHeight",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r,i){var a,s,o,u;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.ObjectPlacement.value,s=n.GetCoordinationMatrix(0),o=s[13]*i.factor,e.next=5,r.getItemProperties(0,a,!0);case 5:return u=e.sent,e.abrupt("return",this.getPlacementHeight(u,i)+o);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"getPlacementHeight",value:function(e,t){var n,r,i=0,a=null===(r=null===(n=e.RelativePlacement)||void 0===n?void 0:n.Location)||void 0===r?void 0:r.Coordinates;return a&&(i+=a[2].value*t.complement*t.factor),e.PlacementRelTo&&(i+=this.getPlacementHeight(e.PlacementRelTo,t)),i}},{key:"saveFloorRelations",value:function(e){var t,n=b(e.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.itemsByFloor[r.expressID]=e.expressID,r.children.length){var i,a=b(r.children);try{for(a.s();!(i=a.n()).done;){var s=i.value;this.itemsByFloor[s.expressID]=e.expressID}}catch(o){a.e(o)}finally{a.f()}}}}catch(o){n.e(o)}finally{n.f()}}},{key:"getFloors",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.properties.getSpatialStructure(0);case 2:return n=e.sent,r=n.children[0].children[0].children,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),rX=function(){function e(){(0,s.Z)(this,e),this.factor=1,this.complement=1}return(0,o.Z)(e,[{key:"apply",value:function(e){var t=this.getScaleMatrix().multiply(e);e.copy(t)}},{key:"setUp",value:function(e){var t;this.factor=1;var n=this.getLengthUnits(e);"FOOT"===n.Name.value?this.factor=.3048:"MILLI"===(null===(t=n.Prefix)||void 0===t?void 0:t.value)&&(this.complement=.001)}},{key:"getLengthUnits",value:function(e){var t=e.GetLineIDsWithType(0,TC).get(0),n=e.GetLine(0,t).Units[0].value;return e.GetLine(0,n)}},{key:"getScaleMatrix",value:function(){return(new lh).fromArray([this.factor,0,0,0,0,this.factor,0,0,0,0,this.factor,0,0,0,0,1])}}]),e}(),iX=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.apply(this,arguments)).fragments=[],e}return(0,o.Z)(n)}(jv),aX=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,[{key:"getHelper",value:function(e){var t,n=new Mh,r=0,i=0,a=0,s=0,o=b(e);try{for(o.s();!(t=o.n()).done;)for(var u=t.value.attributes.position.array,l=0;l<u.length;l+=3)r+=u[l],i+=u[l+1],a+=u[l+2],s++}catch(K){o.e(K)}finally{o.f()}s>0&&(r/=s,i/=s,a/=s);for(var c=new Oc(r,i,a),h=new Oc,p=new Oc,f=new Oc,d=0,v=0,m=0,y=0,g=0,_=0,T=1e13,E=0;E<15;E++){var x=new Oc;0===E&&(x=new Oc(1,0,0)),1===E&&(x=new Oc(1,0,1)),2===E&&(x=new Oc(1,1,0)),3===E&&(x=new Oc(1,1,1)),4===E&&(x=new Oc(0,1,1)),5===E&&(x=new Oc(1,0,.5)),6===E&&(x=new Oc(1,.5,0)),7===E&&(x=new Oc(1,1,.5)),8===E&&(x=new Oc(0,1,.5)),9===E&&(x=new Oc(.5,0,1)),10===E&&(x=new Oc(.5,1,0)),11===E&&(x=new Oc(.5,1,1)),12===E&&(x=new Oc(0,.5,1)),13===E&&(x=new Oc(.5,.5,1)),14===E&&(x=new Oc(1,.5,.5)),x.normalize();var I=new Oc(x.x,x.y,x.z);I.cross(new Oc(0,0,1));var w=new Oc(I.x,I.y,I.z);w.cross(x),x.normalize(),I.normalize(),w.normalize();var k,S=-1e10,R=-1e10,C=-1e10,D=1e10,A=1e10,O=1e10,N=b(e);try{for(N.s();!(k=N.n()).done;)for(var M=k.value.attributes.position.array,P=0;P<M.length;P+=3){var F=M[P],L=M[P+1],U=M[P+2],Z=F-c.x,B=L-c.y,z=U-c.z,G=new Oc(Z,B,z),H=x.dot(G),j=I.dot(G),V=w.dot(G);H>S&&(S=H),j>R&&(R=j),V>C&&(C=V),H<D&&(D=H),j<A&&(A=j),V<O&&(O=V)}}catch(K){N.e(K)}finally{N.f()}var W=S-D,Y=R-A,q=C-O,X=W*Y*q;X<T&&(T=X,h=x,p=I,f=w,d=W,v=Y,m=q,y=(S+D)/2,g=(R+A)/2,_=(C+O)/2)}return c.x+=y*h.x,c.y+=y*h.y,c.z+=y*h.z,c.x+=g*p.x,c.y+=g*p.y,c.z+=g*p.z,c.x+=_*f.x,c.y+=_*f.y,c.z+=_*f.z,h=h.setLength(d),p=p.setLength(v),f=f.setLength(m),n.matrix=new lh,n.matrix.set(h.x,h.y,h.z,0,p.x,p.y,p.z,0,f.x,f.y,f.z,0,c.x,c.y,c.z,1),n.matrix.transpose(),n}}]),e}(),sX=function(){function e(t,n,r){(0,s.Z)(this,e),this._categories={},this._model=new iX,this._ifcCategories=new Jq,this._uniqueItems={},this._units=new rX,this._boundingBoxes={},this._transparentBoundingBoxes={},this._expressIDfragmentIDMap={},this._transform=new aX,this._propertyExporter=new tX,this._spatialTree=new nX,this._items=t,this._materials=n,this._settings=r}return(0,o.Z)(e,[{key:"reset",value:function(){this._model=new iX,this._uniqueItems={},this._boundingBoxes={},this._transparentBoundingBoxes={}}},{key:"cleanUp",value:function(){this._spatialTree.cleanUp(),this._categories={},this._model=new iX,this._ifcCategories=new Jq,this._uniqueItems={},this._units=new rX,this._propertyExporter=new tX}},{key:"setupCategories",value:function(e){this._categories=this._ifcCategories.getAll(e,0)}},{key:"generateFragmentData",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._units.setUp(t);case 2:return e.next=4,this._spatialTree.setupFloors(t,this._units);case 4:return this.processAllFragmentsData(),this.processAllUniqueItems(),e.next=8,this.saveModelData(t);case 8:return e.abrupt("return",this._model);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveModelData",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._model.boundingBoxes=this._boundingBoxes,this._model.transparentBoundingBoxes=this._transparentBoundingBoxes,this._model.expressIDFragmentIDMap=this._expressIDfragmentIDMap,this._model.levelRelationships=this._spatialTree.itemsByFloor,this._model.floorsProperties=this._spatialTree.floorProperties,this._model.allTypes=$q,this._model.itemTypes=this._categories,this._model.coordinationMatrix=this.getCoordinationMatrix(t),e.next=10,this.getModelProperties(t);case 10:this._model.properties=e.sent;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCoordinationMatrix",value:function(e){var t=e.GetCoordinationMatrix(0);return(new lh).fromArray(t)}},{key:"getModelProperties",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n=this;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._settings.includeProperties){e.next=2;break}return e.abrupt("return",{});case 2:return e.abrupt("return",new Promise((function(e){n._propertyExporter.propertiesSerialized.on((function(t){e(t)})),n._propertyExporter.export(t,0)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processAllFragmentsData",value:function(){for(var e=0,t=Object.values(this._items);e<t.length;e++){var n=t[e];this.processFragmentData(n)}}},{key:"processFragmentData",value:function(e){var t=e.instances[0].id,n=this._categories[t],r=1===e.instances.length,i=this._settings.instancedCategories.has(n),a=0===Object.keys(this._spatialTree.itemsByFloor).length;!r||i||a?this.processInstancedItems(e):this.processMergedItems(e)}},{key:"processMergedItems",value:function(e){for(var t in e.geometriesByMaterial){var n=e.instances[0],r=this._categories[n.id],i=this._spatialTree.itemsByFloor[n.id];this.initializeItem(e,r,i,t),this.applyTransformToMergedGeometries(e,r,i,t)}}},{key:"applyTransformToMergedGeometries",value:function(e,t,n,r){var i=e.geometriesByMaterial[r],a=e.instances[0];this._units.apply(a.matrix);var s,o=b(i);try{for(o.s();!(s=o.n()).done;){var u=s.value;u.userData.id=a.id,this._uniqueItems[t][n][r].geoms.push(u),u.applyMatrix4(a.matrix)}}catch(l){o.e(l)}finally{o.f()}}},{key:"initializeItem",value:function(e,t,n,r){this._uniqueItems[t]||(this._uniqueItems[t]={}),this._uniqueItems[t][n]||(this._uniqueItems[t][n]={}),this._uniqueItems[t][n][r]||(this._uniqueItems[t][n][r]={geoms:[],hasVoids:e.instances[0].hasVoids})}},{key:"processInstancedItems",value:function(e){var t=this,n=this.createInstancedFragment(e);this.setFragmentInstances(e,n),n.mesh.updateMatrix(),this._model.fragments.push(n),this._model.add(n.mesh);for(var r=Object.keys(e.geometriesByMaterial).map((function(e){return t._materials[e]})),i=this.areMatsTransparent(r)||e.instances[0].hasVoids,a=this.getBoxes(i),s=this._transform.getHelper([n.mesh.geometry]),o=0;o<n.mesh.count;o++){var u=new lh,l=new Mh;n.getInstance(o,u),l.applyMatrix4(s.matrix),l.applyMatrix4(u),l.updateMatrix();var c=n.getItemID(o,0);a[c]=l.matrix.elements,this._expressIDfragmentIDMap[c]=n.id}}},{key:"getBoxes",value:function(e){return e?this._transparentBoundingBoxes:this._boundingBoxes}},{key:"areMatsTransparent",value:function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){if(t.value.transparent)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"setFragmentInstances",value:function(e,t){for(var n=0;n<e.instances.length;n++){var r=e.instances[n];this._units.apply(r.matrix),t.setInstance(n,{ids:[r.id.toString()],transform:r.matrix})}}},{key:"createInstancedFragment",value:function(e){var t=this.getMaterials(e),n=Object.values(e.geometriesByMaterial),r=Pw.merge(n);return new Ow(r,t,e.instances.length)}},{key:"getMaterials",value:function(e){var t=this,n=Object.keys(e.geometriesByMaterial).map((function(e){return t._materials[e]}));return n}},{key:"processAllUniqueItems",value:function(){for(var e=0,t=Object.keys(this._uniqueItems);e<t.length;e++){var n=t[e];for(var r in this._uniqueItems[n]){var i=parseInt(n,10),a=parseInt(r,10);void 0!==a&&void 0!==i&&this.processUniqueItem(i,a)}}}},{key:"processUniqueItem",value:function(e,t){var n=this._uniqueItems[e][t];if(n){for(var r=Object.values(n),i=r.map((function(e){return e.geoms})),a=this.processIDsAndBuffer(i),s=a.buffer,o=a.ids,u=this.getUniqueItemMaterial(e,t),l={},c=!1,h=0,p=r;h<p.length;h++){var f=p[h];c=c||f.hasVoids;var d,v=b(f.geoms);try{for(v.s();!(d=v.n()).done;){var m=d.value,y=m.userData.id;l[y]||(l[y]=[]),l[y].push(m)}}catch(S){v.e(S)}finally{v.f()}}var g=this.areMatsTransparent(u)||c,_=this.getBoxes(g);for(var T in l){var E=l[T],x=this._transform.getHelper(E);_[T]=x.matrix.elements}var I=Pw.merge(i),w=this.newMergedFragment(I,s,u,o);for(var k in this._model.fragments.push(w),this._model.add(w.mesh),l)this._expressIDfragmentIDMap[k]=w.id}}},{key:"newMergedFragment",value:function(e,t,n,r){e.setAttribute("blockID",new ip(t,1));var i=new Ow(e,n,1),a=Array.from(r).map((function(e){return e.toString()}));return i.setInstance(0,{ids:a,transform:new lh}),i}},{key:"processBuffer",value:function(e,t){var n,r=new Uint32Array(t),i=this.getBufferTempData(),a=b(e);try{for(a.s();!(n=a.n()).done;){var s,o=b(n.value);try{for(o.s();!(s=o.n()).done;){var u=s.value;this.updateBufferIDs(i,u);var l=u.attributes.position.count,c=i.currentIDs.get(u.userData.id);r.fill(c,i.offset,i.offset+l),i.offset+=l}}catch(h){o.e(h)}finally{o.f()}}}catch(h){a.e(h)}finally{a.f()}return r}},{key:"updateBufferIDs",value:function(e,t){e.currentIDs.has(t.userData.id)||e.currentIDs.set(t.userData.id,e.blockID++)}},{key:"getBufferTempData",value:function(){return{currentIDs:new Map,offset:0,blockID:0}}},{key:"processIDsAndBuffer",value:function(e){var t,n=0,r=new Set,i=b(e);try{for(i.s();!(t=i.n()).done;){var a,s=b(t.value);try{for(s.s();!(a=s.n()).done;){var o=a.value;n+=o.attributes.position.count,r.add(o.userData.id)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){i.e(u)}finally{i.f()}return{buffer:this.processBuffer(e,n),ids:r}}},{key:"getUniqueItemMaterial",value:function(e,t){var n=this,r=Object.keys(this._uniqueItems[e][t]).map((function(e){return n._materials[e]}));return r}}]),e}(),oX=function(){function e(t){(0,s.Z)(this,e),this.settings=new Xq,this._webIfc=new qq,this._items={},this._materials={},this._geometry=new Kq(this._webIfc,this._items,this._materials),this._converter=new sX(this._items,this._materials,this.settings),this._fragments=t}return(0,o.Z)(e,[{key:"dispose",value:function(){this.disposeWebIfc(),this.disposeMaterials(),this.disposeItems(),this._geometry.cleanUp(),this._geometry=null,this._converter.cleanUp(),this._converter=null}},{key:"load",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializeWebIfc();case 2:return e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.arrayBuffer();case 7:return r=e.sent,i=new Uint8Array(r),this._webIfc.OpenModel(i,this.settings.webIfc),e.abrupt("return",this.loadAllGeometry());case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeWebIfc",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.settings.wasm,n=t.path,r=t.absolute,this._webIfc.SetWasmPath(n,r),e.next=4,this._webIfc.Init();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadAllGeometry",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,n,r,i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadAllCategories();case 2:return e.next=4,this._converter.generateFragmentData(this._webIfc);case 4:t=e.sent,this.cleanUp(),n=b(t.fragments);try{for(n.s();!(r=n.n()).done;)i=r.value,this._fragments.list[i.id]=i}catch(a){n.e(a)}finally{n.f()}return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadAllCategories",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._converter.setupCategories(this._webIfc),this.loadOptionalCategories(),e.next=4,this.setupVoids();case 4:return e.next=6,this.loadMainCategories();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadMainCategories",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t=this;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._webIfc.StreamAllMeshes(0,(function(e){t._geometry.streamMesh(t._webIfc,e)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupVoids",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,n,r,i,a,s;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this._webIfc.GetLineIDsWithType(0,wR),n=this._webIfc.properties,r=t.size(),i=0;case 4:if(!(i<r)){e.next=13;break}return e.next=7,n.getItemProperties(0,t.get(i));case 7:a=e.sent,s=a.RelatingBuildingElement.value,this._geometry.addVoid(s);case 10:i++,e.next=4;break;case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadOptionalCategories",value:function(){var e=this,t=this.settings.optionalCategories;this._webIfc.StreamAllMeshesWithTypes(0,t,(function(t){e._geometry.streamMesh(e._webIfc,t)}))}},{key:"cleanUp",value:function(){this.resetWebIfc(),this._geometry.cleanUp(),this._converter.cleanUp(),this.resetObject(this._items),this.resetObject(this._materials)}},{key:"resetWebIfc",value:function(){this.disposeWebIfc(),this._webIfc=new qq}},{key:"resetObject",value:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){delete e[n[t]]}}},{key:"disposeWebIfc",value:function(){this._webIfc=null}},{key:"disposeMaterials",value:function(){for(var e in this._materials)this._materials[e].dispose()}},{key:"disposeItems",value:function(){for(var e in this._items){var t=this._items[e].geometriesByMaterial;for(var n in t){var r,i=b(t[n]);try{for(i.s();!(r=i.n()).done;){r.value.dispose()}}catch(a){i.e(a)}finally{i.f()}}}}}]),e}(),uX=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:512,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];(0,s.Z)(this,e),this.components=t,this.updateInterval=r,this.rtWidth=i,this.rtHeight=a,this.autoUpdate=o,this.scene=new em,this.fragmentsDiscovered=new ME,this.enabled=!0,this.opaqueMeshes=[],this.transparentMeshes=[],this.fragmentColorMap=new Map,this.fragmentModelMap=new Map,this.fragmentMeshMap={},this.exclusions=new Map,this.needsUpdate=!1,this.renderDebugFrame=!1,this.isFirstRenderingPass=!0,this.discoveredFragments=new Set,this.undiscoveredFragments=new Map,this.previouslyDiscoveredFragments=new Set,this.visibleExpressId=[],this._disposer=new Nx,this.scaleFactor=1e-5,this.invisibleBoxes=new Set,this.colors={r:0,g:0,b:0,i:0},this.updateVisibility=function(e){if(n.opaqueMeshes&&n.enabled&&(n.needsUpdate||e)){var t=n.components.camera.get();t.updateMatrix(),n.renderer.setSize(n.rtWidth,n.rtHeight),n.renderer.setRenderTarget(n.renderTarget),n.renderer.render(n.scene,t),n.renderer.readRenderTargetPixels(n.renderTarget,0,0,n.rtWidth,n.rtHeight,n._buffer),n.worker.postMessage({buffer:n._buffer});var r,i=b(n.transparentMeshes);try{for(i.s();!(r=i.n()).done;){var a=r.value;n.scene.add(a)}}catch(u){i.e(u)}finally{i.f()}n.renderer.render(n.scene,t),n.renderer.readRenderTargetPixels(n.renderTarget,0,0,n.rtWidth,n.rtHeight,n._buffer),n.worker.postMessage({buffer:n._buffer}),n.renderer.setRenderTarget(null),n.renderDebugFrame&&n.isFirstRenderingPass&&n.renderer.render(n.scene,t);var s,o=b(n.transparentMeshes);try{for(o.s();!(s=o.n()).done;){s.value.removeFromParent()}}catch(u){o.e(u)}finally{o.f()}n.needsUpdate=!1}},this.handleWorkerMessage=function(e){var t=e.data.colors,r=n.getFragmentsIDs(t);n.isFirstRenderingPass?n.renderFirstPass(r):n.renderSecondPass(r)},this.renderer=new Kv;var u=this.components.renderer.clippingPlanes;this.renderer.clippingPlanes=u,this.renderTarget=new Rc(i,a),this.bufferSize=i*a*4,this._buffer=new Uint8Array(this.bufferSize);var l=new Blob(['\n      addEventListener("message", (event) => {\n        const { buffer } = event.data;\n        const colors = new Set();\n        for (let i = 0; i < buffer.length; i += 4) {\n            const r = buffer[i];\n            const g = buffer[i + 1];\n            const b = buffer[i + 2];\n            const code = "" + r + "-" + g + "-" + b;\n            colors.add(code);\n        }\n        postMessage({ colors });\n      });\n    '],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(l)),this.worker.addEventListener("message",this.handleWorkerMessage),o&&window.setInterval(this.updateVisibility,r)}return(0,o.Z)(e,[{key:"dispose",value:function(){this.enabled=!1,this.worker.terminate(),this.fragmentsDiscovered.reset(),this.renderTarget.dispose(),this.renderer.dispose(),this.scene.children.length=0;var e,t=b(this.transparentMeshes);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._disposer.dispose(n)}}catch(l){t.e(l)}finally{t.f()}var r,i=b(this.opaqueMeshes);try{for(i.s();!(r=i.n()).done;){var a=r.value;this._disposer.dispose(a)}}catch(l){i.e(l)}finally{i.f()}for(var s in this.fragmentMeshMap)for(var o in this.fragmentMeshMap[s]){var u=this.fragmentMeshMap[s][o].mesh;this._disposer.dispose(u)}this.fragmentMeshMap={},this.transparentMeshes=[],this.opaqueMeshes=[],this._buffer=null,this.exclusions.clear(),this.discoveredFragments.clear(),this.undiscoveredFragments.clear(),this.previouslyDiscoveredFragments.clear(),this.fragmentColorMap.clear(),this.invisibleBoxes.clear()}},{key:"getNextColor",value:function(){return 0===this.colors.i&&(this.colors.b++,256===this.colors.b&&(this.colors.b=0,this.colors.i=1)),1===this.colors.i&&(this.colors.g++,this.colors.i=0,256===this.colors.g&&(this.colors.g=0,this.colors.i=2)),2===this.colors.i&&(this.colors.r++,this.colors.i=1,256===this.colors.r&&(this.colors.r=0,this.colors.i=0)),{r:this.colors.r,g:this.colors.g,b:this.colors.b,code:"".concat(this.colors.r,"-").concat(this.colors.g,"-").concat(this.colors.b)}}},{key:"loadBoxes",value:function(e,t,n,r){for(var i=Object.values(t),a=new Pp,s=this.components.renderer.clippingPlanes,o=new tp({clippingPlanes:s}),u=new Fm(a,o,i.length),l=new lh,c=Object.keys(t),h=0;h<i.length;h++){var p=c[h],f=r[parseInt(c[h],10)];this.fragmentModelMap.set(f,e);var d=this.getNextColor();l.fromArray(i[h]),u.setMatrixAt(h,l),u.setColorAt(h,new ep("rgb(".concat(d.r,",").concat(d.g,", ").concat(d.b,")"))),void 0===this.fragmentMeshMap[f]&&(this.fragmentMeshMap[f]={}),this.fragmentMeshMap[f][p]={mesh:u,index:h},this.fragmentColorMap.set(d.code,f)}for(var v=Object.values(n),m=new Pp,y=new tp,g=new Fm(m,y,v.length),_=new lh,T=Object.keys(n),E=0;E<v.length;E++){var x=T[E],b=r[parseInt(T[E],10)],I=this.getNextColor();_.fromArray(v[E]),g.setMatrixAt(E,_),g.setColorAt(E,new ep("rgb(".concat(I.r,",").concat(I.g,", ").concat(I.b,")"))),void 0===this.fragmentMeshMap[b]&&(this.fragmentMeshMap[b]={}),this.fragmentMeshMap[b][x]={mesh:g,index:E},this.fragmentModelMap.set(b,e),this.fragmentColorMap.set(I.code,b)}this.scene.add(u),this.opaqueMeshes.push(u),this.transparentMeshes.push(g)}},{key:"toggleVisibility",value:function(e,t){var n=new lh,r=this.getScaleMatrix(e);for(var i in t){var a,s=b(t[i]);try{for(s.s();!(a=s.n()).done;){var o=a.value,u=this.fragmentMeshMap[i][o];if(u){var l="".concat(i,"-").concat(u.index);!this.invisibleBoxes.has(l)!==e&&(e?this.invisibleBoxes.delete(l):this.invisibleBoxes.add(l),u.mesh.getMatrixAt(u.index,n),n.premultiply(r),u.mesh.setMatrixAt(u.index,n),u.mesh.instanceMatrix.needsUpdate=!0)}}}catch(c){s.e(c)}finally{s.f()}}}},{key:"getFragmentsIDs",value:function(e){var t,n=new Set,r=b(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(void 0!==i){var a=this.fragmentColorMap.get(i);n.add(a)}}}catch(s){r.e(s)}finally{r.f()}return n}},{key:"renderFirstPass",value:function(e){this.discoveredFragments.clear(),this.saveFoundFragments(e),this.isFirstRenderingPass=!1}},{key:"renderSecondPass",value:function(e){this.saveFoundFragments(e);var t,n=b(this.previouslyDiscoveredFragments);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.has(r)||this.undiscoveredFragments.set(r,performance.now())}}catch(h){n.e(h)}finally{n.f()}var i,a={},s=b(this.discoveredFragments);try{for(s.s();!(i=s.n()).done;){var o=i.value;this.previouslyDiscoveredFragments.has(o)||this.saveDiscovered(o,a),this.previouslyDiscoveredFragments.add(o)}}catch(h){s.e(h)}finally{s.f()}var u,l=b(e);try{for(l.s();!(u=l.n()).done;){var c=u.value;this.undiscoveredFragments.delete(c)}}catch(h){l.e(h)}finally{l.f()}this.fragmentsDiscovered.trigger(a),this.isFirstRenderingPass=!0}},{key:"saveDiscovered",value:function(e,t){var n=this.fragmentModelMap.get(e);if(!n)throw new Error("Error when getting model of fragment");t[n]||(t[n]=[]),t[n].push(e)}},{key:"saveFoundFragments",value:function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;void 0!==r&&this.discoveredFragments.add(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"getScaleMatrix",value:function(e){var t=(new lh).fromArray([this.scaleFactor,0,0,0,0,this.scaleFactor,0,0,0,0,this.scaleFactor,0,0,0,0,1]);return e||t.invert(),t}}]),e}(),lX=function(){function e(t){(0,s.Z)(this,e),this.fragments=t,this.height=10,this.groupName="",this.enabled=!1,this.initialized=!1,this.explodedFragments=new Set}return(0,o.Z)(e,[{key:"dispose",value:function(){this.explodedFragments.clear()}},{key:"explode",value:function(){this.initialized=!0,this.enabled=!0,this.update()}},{key:"reset",value:function(){this.initialized=!0,this.enabled=!1,this.update()}},{key:"update",value:function(){if(this.initialized){var e=this.enabled?1:-1,t=0,n=this.fragments.groups.groupSystems[this.groupName];for(var r in n){for(var i in n[r]){var a=this.fragments.list[i],s=r+i;if(a&&((!this.enabled||!this.explodedFragments.has(s))&&(this.enabled||this.explodedFragments.has(s)))){this.enabled?this.explodedFragments.add(s):this.explodedFragments.delete(s);var o=this.getOffsetY(t*e);if(1===a.blocks.count){var u,l=b(n[r][i]);try{for(l.s();!(u=l.n()).done;){var c=u.value,h=new lh,p=a.getInstanceAndBlockID(c).instanceID;a.getInstance(p,h),h.premultiply(o),a.setInstance(p,{transform:h,ids:[c]}),this.updateMemoryCulling(i,c,o)}}catch(y){l.e(y)}finally{l.f()}}else{var f=new lh;a.getInstance(0,f),f.premultiply(o),a.setInstance(0,{transform:f,ids:a.items});var d,v=b(a.items);try{for(v.s();!(d=v.n()).done;){var m=d.value;this.updateMemoryCulling(i,m,o)}}catch(y){v.e(y)}finally{v.f()}}a.mesh.instanceMatrix.needsUpdate=!0}}t++}}}},{key:"updateMemoryCulling",value:function(e,t,n){var r=new lh,i=this.fragments.memoryCuller.fragmentMeshMap[e];if(i){var a=i[t];a&&(a.mesh.getMatrixAt(a.index,r),r.premultiply(n),a.mesh.setMatrixAt(a.index,r),a.mesh.instanceMatrix.needsUpdate=!0)}}},{key:"getOffsetY",value:function(e){return(new lh).fromArray([1,0,0,0,0,1,0,0,0,0,1,0,0,e*this.height,0,1])}}]),e}(),cX=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).components=e,r.name="Fragments",r.enabled=!0,r.list={},r.ifcLoader=new oX(f(r)),r.groups=new Zw(f(r)),r.properties=new Gw,r.tree=new Hw(r.properties),r._loader=new Fw,r.highlighter=new Lw(e,f(r)),r.exploder=new lX(f(r)),r.edges=new Bw(e),r.materials=new zw(f(r)),r.culler=new Uw(e,f(r)),r.memoryCuller=new uX(e),r}return(0,o.Z)(n,[{key:"get",value:function(){return Object.values(this.list)}},{key:"meshes",get:function(){var e=[];for(var t in this.list)e.push(this.list[t].mesh);return e}},{key:"dispose",value:function(){this.disposeFragmentList(),this.ifcLoader.dispose(),this.groups.dispose(),this.properties.dispose(),this.highlighter.dispose(),this.edges.dispose(),this.exploder.dispose(),this.materials.dispose(),this.culler.dispose(),this.memoryCuller.dispose()}},{key:"load",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loader.load(t,n);case 2:return r=e.sent,this.list[r.id]=r,this.culler.add(r),this.components.scene.get().add(r.mesh),this.components.meshes.push(r.mesh),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeFragmentList",value:function(){for(var e in this.list){var t=this.list[e];this.removeFragmentMesh(t),t.dispose(!0)}this.list={}}},{key:"removeFragmentMesh",value:function(e){var t=this.components.meshes,n=e.mesh;t.includes(n)&&t.splice(t.indexOf(n),1)}}]),n}(Ix),hX=function(){function e(t,n){(0,s.Z)(this,e),this.components=t,this._previousDistance=-1,this._camera=n;var r="Perspective";this._currentCamera=n.get(r),this._currentProjection=r}return(0,o.Z)(e,[{key:"projection",get:function(){return this._currentProjection}},{key:"setProjection",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.projection!==t){e.next=2;break}return e.abrupt("return");case 2:if("Orthographic"!==t){e.next=6;break}this.setOrthoCamera(),e.next=8;break;case 6:return e.next=8,this.setPerspectiveCamera();case 8:return e.next=10,this.updateActiveCamera();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setOrthoCamera",value:function(){if("FirstPerson"!==this._camera.currentMode.id){this._previousDistance=this._camera.controls.distance,this._camera.controls.distance=200;var e=this.getDims(),t=e.width,n=e.height;this.setupOrthoCamera(n,t),this._currentCamera=this._camera.get("Orthographic"),this._currentProjection="Orthographic"}}},{key:"updateActiveCamera",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t=this;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout((function(){t._camera.activeCamera=t._currentCamera,e()}),50)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getDims",value:function(){var e=new Oc;this._camera.get("Perspective").getWorldDirection(e);var t=new Oc;this._camera.controls.getTarget(t);var n=t.clone().sub(this._camera.get("Perspective").position).dot(e),r=this.components.renderer.getSize(),i=r.x/r.y,a=this._camera.get("Perspective"),s=2*n*Math.atan(a.fov*(Math.PI/180)/2);return{width:s*i,height:s}}},{key:"setupOrthoCamera",value:function(e,t){this._camera.controls.mouseButtons.wheel=bx.ACTION.ZOOM;var n=this._camera.get("Perspective"),r=this._camera.get("Orthographic");r.zoom=1,r.left=t/-2,r.right=t/2,r.top=e/2,r.bottom=e/-2,r.updateProjectionMatrix(),r.position.copy(n.position),r.quaternion.copy(n.quaternion),this._camera.controls.camera=r}},{key:"setPerspectiveCamera",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._camera.controls.mouseButtons.wheel=bx.ACTION.DOLLY,t=this._camera.get("Perspective"),n=this._camera.get("Orthographic"),t.position.copy(n.position),t.quaternion.copy(n.quaternion),this._camera.controls.mouseButtons.wheel=bx.ACTION.DOLLY,this._camera.controls.distance=this._previousDistance,e.next=9,this._camera.controls.zoomTo(1);case 9:t.updateProjectionMatrix(),this._camera.controls.camera=t,this._currentCamera=t,this._currentProjection="Perspective";case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),pX=function(){function e(t){(0,s.Z)(this,e),this.camera=t,this.enabled=!0,this.id="Orbit",this.projectionChanged=new ME,this.activateOrbitControls()}return(0,o.Z)(e,[{key:"toggle",value:function(e){this.enabled=e,e&&this.activateOrbitControls()}},{key:"activateOrbitControls",value:function(){var e=this.camera.controls;e.minDistance=1,e.maxDistance=300,e.truckSpeed=2}}]),e}(),fX=function(){function e(t){(0,s.Z)(this,e),this.camera=t,this.enabled=!1,this.id="Plan",this.projectionChanged=new ME,this.mouseInitialized=!1,this.defaultAzimuthSpeed=t.controls.azimuthRotateSpeed,this.defaultPolarSpeed=t.controls.polarRotateSpeed}return(0,o.Z)(e,[{key:"toggle",value:function(e){this.enabled=e;var t=this.camera.controls;t.azimuthRotateSpeed=e?0:this.defaultAzimuthSpeed,t.polarRotateSpeed=e?0:this.defaultPolarSpeed,this.mouseInitialized||(this.mouseAction1=t.touches.one,this.mouseAction2=t.touches.two,this.mouseInitialized=!0),e?(t.mouseButtons.left=bx.ACTION.TRUCK,t.touches.one=bx.ACTION.TOUCH_TRUCK,t.touches.two=bx.ACTION.TOUCH_ZOOM):(t.mouseButtons.left=bx.ACTION.ROTATE,t.touches.one=this.mouseAction1,t.touches.two=this.mouseAction2)}}]),e}(),dX=function(){function e(t){(0,s.Z)(this,e),this.camera=t,this.enabled=!1,this.id="FirstPerson",this.projectionChanged=new ME}return(0,o.Z)(e,[{key:"toggle",value:function(e){if(this.enabled=e,e){if("Perspective"!==this.camera.getProjection())return void this.camera.setNavigationMode("Orbit");this.setupFirstPersonCamera()}}},{key:"setupFirstPersonCamera",value:function(){var e=this.camera.controls,t=new Oc;e.camera.getWorldPosition(t);var n=new Oc;e.distance--,e.camera.getWorldPosition(n),e.minDistance=1,e.maxDistance=1,e.distance=1,e.moveTo(n.x,n.y,n.z),e.truckSpeed=50,e.mouseButtons.wheel=bx.ACTION.DOLLY,e.touches.two=bx.ACTION.TOUCH_ZOOM_TRUCK}}]),e}(),vX=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).projectionChanged=new ME,r._userInputButtons={},r._frustumSize=50,r._navigationModes=new Map,r._orthoCamera=r.newOrthoCamera(),r._navigationModes.set("Orbit",new pX(f(r))),r._navigationModes.set("FirstPerson",new dX(f(r))),r._navigationModes.set("Plan",new fX(f(r))),r.currentMode=r._navigationModes.get("Orbit"),r.currentMode.toggle(!0,{preventTargetAdjustment:!0}),r.toggleEvents(!0),r._projectionManager=new hX(e,f(r)),r}return(0,o.Z)(n,[{key:"dispose",value:function(){lt(c(n.prototype),"dispose",this).call(this),this.toggleEvents(!1),this._orthoCamera.removeFromParent()}},{key:"get",value:function(e){return e?"Orthographic"===e?this._orthoCamera:this._perspectiveCamera:this.activeCamera}},{key:"getProjection",value:function(){return this._projectionManager.projection}},{key:"toggleProjection",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getProjection(),n="Perspective"===t?"Orthographic":"Perspective",e.next=4,this.setProjection(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setProjection",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._projectionManager.setProjection(t);case 2:this.projectionChanged.trigger(this.activeCamera);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleUserInput",value:function(e){e?this.enableUserInput():this.disableUserInput()}},{key:"setNavigationMode",value:function(e){if(this.currentMode.id!==e){if(this.currentMode.toggle(!1),!this._navigationModes.has(e))throw new Error("The specified mode does not exist!");this.currentMode=this._navigationModes.get(e),this.currentMode.toggle(!0)}}},{key:"updateAspect",value:function(){lt(c(n.prototype),"updateAspect",this).call(this),this.setOrthoCameraAspect()}},{key:"fitModelToFrame",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,n,r,i,a,s,o,u,l,c,h,p,f,d,v,m=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.length>0&&void 0!==m[0]?m[0]:this.components.meshes,this.enabled){e.next=3;break}return e.abrupt("return");case 3:n=this.components.scene.get(),console.log(n),r=Number.MAX_VALUE,i=Number.MIN_VALUE,a=new Oc(r,r,r),s=new Oc(i,i,i),o=b(t);try{for(o.s();!(u=o.n()).done;)l=u.value,(c=(new Pc).setFromObject(l)).min.x<a.x&&(a.x=c.min.x),c.min.y<a.y&&(a.y=c.min.y),c.min.z<a.z&&(a.z=c.min.z),c.max.x>s.x&&(s.x=c.max.x),c.max.y>s.y&&(s.y=c.max.y),c.max.z>s.z&&(s.z=c.max.z)}catch(y){o.e(y)}finally{o.f()}return h=new Pc(a,s),p=new Oc,h.getSize(p),f=new Oc,h.getCenter(f),.5,d=.5*Math.max(p.x,p.y,p.z),v=new eh(f,d),e.next=21,this.controls.fitToSphere(v,!0);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disableUserInput",value:function(){this._userInputButtons.left=this.controls.mouseButtons.left,this._userInputButtons.right=this.controls.mouseButtons.right,this._userInputButtons.middle=this.controls.mouseButtons.middle,this._userInputButtons.wheel=this.controls.mouseButtons.wheel,this.controls.mouseButtons.left=0,this.controls.mouseButtons.right=0,this.controls.mouseButtons.middle=0,this.controls.mouseButtons.wheel=0}},{key:"enableUserInput",value:function(){0!==Object.keys(this._userInputButtons).length&&(this.controls.mouseButtons.left=this._userInputButtons.left,this.controls.mouseButtons.right=this._userInputButtons.right,this.controls.mouseButtons.middle=this._userInputButtons.middle,this.controls.mouseButtons.wheel=this._userInputButtons.wheel)}},{key:"newOrthoCamera",value:function(){var e=this.components.renderer.getSize(),t=e.x/e.y;return new vf(this._frustumSize*t/-2,this._frustumSize*t/2,this._frustumSize/2,this._frustumSize/-2,.1,1e3)}},{key:"setOrthoCameraAspect",value:function(){var e=this.components.renderer.getSize(),t=e.x/e.y;this._orthoCamera.left=-this._frustumSize*t/2,this._orthoCamera.right=this._frustumSize*t/2,this._orthoCamera.top=this._frustumSize/2,this._orthoCamera.bottom=-this._frustumSize/2,this._orthoCamera.updateProjectionMatrix()}},{key:"toggleEvents",value:function(e){for(var t=0,n=Object.values(this._navigationModes);t<n.length;t++){var r=n[t];e?r.projectionChanged.on(this.projectionChanged.trigger):r.projectionChanged.reset()}}}]),n}(wx);function mX(e,t,n,r){return mX="undefined"!==typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var i,a=ut(e,t);if(a){if((i=Object.getOwnPropertyDescriptor(a,t)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,t)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,t,i)}else(0,at.Z)(r,t,n);return!0},mX(e,t,n,r)}function yX(e,t,n,r,i){if(!mX(e,t,n,r||e)&&i)throw new TypeError("failed to set property");return n}var gX=new Pc,_X=new Oc,TX=function(e){l(n,e);var t=v(n);function n(){var e;(0,s.Z)(this,n),(e=t.call(this)).type="LineSegmentsGeometry";return e.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),e.setAttribute("position",new op([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),e.setAttribute("uv",new op([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2)),e}return(0,o.Z)(n,[{key:"applyMatrix4",value:function(e){var t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==t&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"setPositions",value:function(e){var t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));var n=new G_(t,6,1);return this.setAttribute("instanceStart",new rm(n,3,0)),this.setAttribute("instanceEnd",new rm(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}},{key:"setColors",value:function(e){var t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));var n=new G_(t,6,1);return this.setAttribute("instanceColorStart",new rm(n,3,0)),this.setAttribute("instanceColorEnd",new rm(n,3,3)),this}},{key:"fromWireframeGeometry",value:function(e){return this.setPositions(e.attributes.position.array),this}},{key:"fromEdgesGeometry",value:function(e){return this.setPositions(e.attributes.position.array),this}},{key:"fromMesh",value:function(e){return this.fromWireframeGeometry(new fg(e.geometry)),this}},{key:"fromLineSegments",value:function(e){var t=e.geometry;if(!t.isGeometry)return t.isBufferGeometry&&this.setPositions(t.attributes.position.array),this;console.error("THREE.LineSegmentsGeometry no longer supports Geometry. Use THREE.BufferGeometry instead.")}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Pc);var e=this.attributes.instanceStart,t=this.attributes.instanceEnd;void 0!==e&&void 0!==t&&(this.boundingBox.setFromBufferAttribute(e),gX.setFromBufferAttribute(t),this.boundingBox.union(gX))}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new eh),null===this.boundingBox&&this.computeBoundingBox();var e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(void 0!==e&&void 0!==t){var n=this.boundingSphere.center;this.boundingBox.getCenter(n);for(var r=0,i=0,a=e.count;i<a;i++)_X.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(_X)),_X.fromBufferAttribute(t,i),r=Math.max(r,n.distanceToSquared(_X));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}},{key:"toJSON",value:function(){}},{key:"applyMatrix",value:function(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}]),n}(d_);TX.prototype.isLineSegmentsGeometry=!0,of.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new yc(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},uf.line={uniforms:Up.merge([of.common,of.fog,of.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tworldStart = start.xyz;\n\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t#else\n\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// get the offset direction as perpendicular to the view vector\n\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\tvec3 offset;\n\t\t\t\tif ( position.y < 0.5 ) {\n\n\t\t\t\t\toffset = normalize( cross( start.xyz, worldDir ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\toffset = normalize( cross( end.xyz, worldDir ) );\n\n\t\t\t\t}\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\tfloat forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );\n\n\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t// extend the line bounds to encompass  endcaps\n\t\t\t\t\tstart.xyz += - worldDir * linewidth * 0.5;\n\t\t\t\t\tend.xyz += worldDir * linewidth * 0.5;\n\n\t\t\t\t\t// shift the position of the quad so it hugs the forward edge of the line\n\t\t\t\t\toffset.xy -= dir * forwardOffset;\n\t\t\t\t\toffset.z += 0.5;\n\n\t\t\t\t#endif\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\toffset.xy += dir * 2.0 * forwardOffset;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth * 0.5;\n\n\t\t\t\t// set the world position\n\t\t\t\tworldPos = ( position.y < 0.5 ) ? start : end;\n\t\t\t\tworldPos.xyz += offset;\n\n\t\t\t\t// project the worldpos\n\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t// segements overlap neatly\n\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t#else\n\n\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\tdir.x /= aspect;\n\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\toffset += - dir;\n\n\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\toffset += dir;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth;\n\n\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t// select end\n\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t// back to clip space\n\t\t\t\toffset *= clip.w;\n\n\t\t\t\tclip.xy += offset;\n\n\t\t\t#endif\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\t\tuniform float linewidth;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashOffset;\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\tfloat mua;\n\t\t\tfloat mub;\n\n\t\t\tvec3 p13 = p1 - p3;\n\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\tmua = numer / denom;\n\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\treturn vec2( mua, mub );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tfloat alpha = opacity;\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\tfloat len = length( delta );\n\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#endif\n\n\t\t\t#else\n\n\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t#else\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, alpha );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"};var EX=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),r=t.call(this,{type:"LineMaterial",uniforms:Up.clone(uf.line.uniforms),vertexShader:uf.line.vertexShader,fragmentShader:uf.line.fragmentShader,clipping:!0}),Object.defineProperties(f(r),{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(e){!0===e?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},dashed:{enumerable:!0,get:function(){return Boolean("USE_DASH"in this.defines)},set:function(e){Boolean(e)!==Boolean("USE_DASH"in this.defines)&&(this.needsUpdate=!0),!0===e?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(e){this.uniforms.dashOffset.value=e}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}},alphaToCoverage:{enumerable:!0,get:function(){return Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)},set:function(e){Boolean(e)!==Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)&&(this.needsUpdate=!0),!0===e?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),r.setValues(e),r}return(0,o.Z)(n)}(zp);EX.prototype.isLineMaterial=!0;var xX=new Oc,bX=new Oc,IX=new Sc,wX=new Sc,kX=new Sc,SX=new Oc,RX=new lh,CX=new Q_,DX=new Oc,AX=new Pc,OX=new eh,NX=new Sc;function MX(e,t,n,r){return NX.set(0,0,-t,1).applyMatrix4(e.projectionMatrix),NX.multiplyScalar(1/NX.w),NX.x=n/r.width,NX.y=n/r.height,NX.applyMatrix4(e.projectionMatrixInverse),NX.multiplyScalar(1/NX.w),Math.abs(Math.max(NX.x,NX.y))}var PX=function(e){l(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new TX,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new EX({color:16777215*Math.random()});return(0,s.Z)(this,n),(e=t.call(this,r,i)).type="LineSegments2",e}return(0,o.Z)(n,[{key:"computeLineDistances",value:function(){for(var e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,r=new Float32Array(2*t.count),i=0,a=0,s=t.count;i<s;i++,a+=2)xX.fromBufferAttribute(t,i),bX.fromBufferAttribute(n,i),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+xX.distanceTo(bX);var o=new G_(r,2,1);return e.setAttribute("instanceDistanceStart",new rm(o,1,0)),e.setAttribute("instanceDistanceEnd",new rm(o,1,1)),this}},{key:"raycast",value:function(e,t){null===e.camera&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var n=void 0!==e.params.Line2&&e.params.Line2.threshold||0,r=e.ray,i=e.camera,a=i.projectionMatrix,s=this.matrixWorld,o=this.geometry,u=this.material,l=u.resolution,c=u.linewidth+n,h=o.attributes.instanceStart,p=o.attributes.instanceEnd,f=-i.near;null===o.boundingSphere&&o.computeBoundingSphere(),OX.copy(o.boundingSphere).applyMatrix4(s);var d=MX(i,Math.max(i.near,OX.distanceToPoint(r.origin)),c,l);if(OX.radius+=d,!1!==e.ray.intersectsSphere(OX)){null===o.boundingBox&&o.computeBoundingBox(),AX.copy(o.boundingBox).applyMatrix4(s);var v=MX(i,Math.max(i.near,AX.distanceToPoint(r.origin)),c,l);if(AX.max.x+=v,AX.max.y+=v,AX.max.z+=v,AX.min.x-=v,AX.min.y-=v,AX.min.z-=v,!1!==e.ray.intersectsBox(AX)){r.at(1,kX),kX.w=1,kX.applyMatrix4(i.matrixWorldInverse),kX.applyMatrix4(a),kX.multiplyScalar(1/kX.w),kX.x*=l.x/2,kX.y*=l.y/2,kX.z=0,SX.copy(kX),RX.multiplyMatrices(i.matrixWorldInverse,s);for(var m=0,y=h.count;m<y;m++){if(IX.fromBufferAttribute(h,m),wX.fromBufferAttribute(p,m),IX.w=1,wX.w=1,IX.applyMatrix4(RX),wX.applyMatrix4(RX),!(IX.z>f&&wX.z>f)){if(IX.z>f){var g=IX.z-wX.z,_=(IX.z-f)/g;IX.lerp(wX,_)}else if(wX.z>f){var T=wX.z-IX.z,E=(wX.z-f)/T;wX.lerp(IX,E)}IX.applyMatrix4(a),wX.applyMatrix4(a),IX.multiplyScalar(1/IX.w),wX.multiplyScalar(1/wX.w),IX.x*=l.x/2,IX.y*=l.y/2,wX.x*=l.x/2,wX.y*=l.y/2,CX.start.copy(IX),CX.start.z=0,CX.end.copy(wX),CX.end.z=0;var x=CX.closestPointToPointParameter(SX,!0);CX.at(x,DX);var b=mc.lerp(IX.z,wX.z,x),I=b>=-1&&b<=1,w=SX.distanceTo(DX)<.5*c;if(I&&w){CX.start.fromBufferAttribute(h,m),CX.end.fromBufferAttribute(p,m),CX.start.applyMatrix4(s),CX.end.applyMatrix4(s);var k=new Oc,S=new Oc;r.distanceSqToSegment(CX.start,CX.end,S,k),t.push({point:S,pointOnLine:k,distance:r.origin.distanceTo(S),object:this,face:null,faceIndex:m,uv:null,uv2:null})}}}}}}}]),n}(Np);PX.prototype.isLineSegments2=!0;var FX=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;return(0,s.Z)(this,n),(a=t.call(this)).name="ClippingEdges",a.enabled=!0,a._edges={},a._disposer=new Nx,a._visible=!0,a._inverseMatrix=new lh,a._localPlane=new Jp,a._tempLine=new Q_,a._tempVector=new Oc,a.afterUpdate=new ME,a.beforeUpdate=new ME,a._components=e,a._plane=r,a._styles=i,a}return(0,o.Z)(n,[{key:"visible",get:function(){return this._visible},set:function(e){this._visible=e;for(var t=0,n=Object.keys(this._edges);t<n.length;t++){var r=n[t];this.updateEdgesVisibility(r,e)}e&&this.update()}},{key:"update",value:function(){for(var e=0,t=Object.values(this._styles.get());e<t.length;e++){var n=t[e];this.drawEdges(n.name)}}},{key:"get",value:function(){return this._edges}},{key:"dispose",value:function(){for(var e=0,t=Object.values(this._edges);e<t.length;e++){var r=t[e];this._disposer.disposeGeometry(r.generatorGeometry),this._disposer.dispose(r.mesh,!1)}n._basicEdges.removeFromParent(),n._basicEdges.geometry.dispose(),n._basicEdges=new Wm}},{key:"newThickEdges",value:function(e){var t=this._styles.get()[e].material,n=new TX,r=new PX(n,t);return r.material.polygonOffset=!0,r.material.polygonOffsetFactor=-2,r.material.polygonOffsetUnits=1,r.renderOrder=3,r}},{key:"drawEdges",value:function(e){var t=this,r=this._styles.get()[e];this._edges[e]||this.initializeStyle(e);var i=this._edges[e],a=0,s=i.generatorGeometry.attributes.position;(s.array.fill(0),r.meshes.filter((function(e){return e.geometry})).forEach((function(e){if(!e.geometry.boundsTree)throw new Error("Boundstree not found for clipping edges subset.");var n=e;if(n.count>1)for(var r=0;r<n.count;r++){var i=new Np(e.geometry);i.matrix.copy(e.matrix);var o=new lh;n.getMatrixAt(r,o),i.applyMatrix4(o),i.applyMatrix4(e.matrix),i.updateMatrix(),i.updateMatrixWorld(),t._inverseMatrix.copy(i.matrixWorld).invert(),t._localPlane.copy(t._plane).applyMatrix4(t._inverseMatrix),a=t.shapecast(i,s,a)}else t._inverseMatrix.copy(e.matrixWorld).invert(),t._localPlane.copy(t._plane).applyMatrix4(t._inverseMatrix),a=t.shapecast(e,s,a)})),i.mesh.geometry.setDrawRange(0,a),i.mesh.position.copy(this._plane.normal).multiplyScalar(1e-4),s.needsUpdate=!0,Number.isNaN(i.generatorGeometry.attributes.position.array[0]))||(n._basicEdges.geometry=i.generatorGeometry,i.mesh.geometry.fromLineSegments(n._basicEdges),this._components.scene.get().add(i.mesh))}},{key:"initializeStyle",value:function(e){this._edges[e]={name:e,generatorGeometry:n.newGeneratorGeometry(),mesh:this.newThickEdges(e)}}},{key:"shapecast",value:function(e,t,n){var r=this;return e.geometry.boundsTree.shapecast({intersectsBounds:function(e){return r._localPlane.intersectsBox(e)},intersectsTriangle:function(i){var a=0;if(r._tempLine.start.copy(i.a),r._tempLine.end.copy(i.b),r._localPlane.intersectLine(r._tempLine,r._tempVector)){var s=r._tempVector.applyMatrix4(e.matrixWorld);t.setXYZ(n,s.x,s.y,s.z),a++,n++}if(r._tempLine.start.copy(i.b),r._tempLine.end.copy(i.c),r._localPlane.intersectLine(r._tempLine,r._tempVector)){var o=r._tempVector.applyMatrix4(e.matrixWorld);t.setXYZ(n,o.x,o.y,o.z),a++,n++}if(r._tempLine.start.copy(i.c),r._tempLine.end.copy(i.a),r._localPlane.intersectLine(r._tempLine,r._tempVector)){var u=r._tempVector.applyMatrix4(e.matrixWorld);t.setXYZ(n,u.x,u.y,u.z),a++,n++}2!==a&&(n-=a)}}),n}},{key:"updateEdgesVisibility",value:function(e,t){var n=this._edges[e];(n.mesh.visible=t,t)?this._components.scene.get().add(n.mesh):n.mesh.removeFromParent()}}],[{key:"newGeneratorGeometry",value:function(){var e=new vp,t=new Float32Array(3e5),n=new ip(t,3,!1);return n.setUsage(tc),e.setAttribute("position",n),e}}]),n}(Ix);FX._basicEdges=new Wm;var LX=function(e){l(n,e);var t=v(n);function n(e,r,i,a,o,u,l){var c;return(0,s.Z)(this,n),(c=t.call(this,e,r,i,a,o,u)).edgesMaxUpdateRate=50,c.lastUpdate=-1,c.updateTimeout=-1,c.edges=new FX(e,c._plane,l),c}return(0,o.Z)(n,[{key:"enabled",set:function(e){yX(c(n.prototype),"enabled",e,this,!0),this.edges.visible=e}},{key:"dispose",value:function(){lt(c(n.prototype),"dispose",this).call(this),this.edges.dispose()}},{key:"update",value:function(){var e=this;lt(c(n.prototype),"update",this).call(this);var t=Date.now();this.lastUpdate+this.edgesMaxUpdateRate<t?(this.lastUpdate=t,this.edges.update()):-1===this.updateTimeout&&(this.updateTimeout=window.setTimeout((function(){e.update(),e.updateTimeout=-1}),this.edgesMaxUpdateRate))}}]),n}(xb),UX=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).components=e,r.name="EdgesStyles",r.enabled=!0,r._styles={},r._defaultMaterial=new EX({color:0,linewidth:.001}),r.afterUpdate=new ME,r.beforeUpdate=new ME,r}return(0,o.Z)(n,[{key:"get",value:function(){return this._styles}},{key:"update",value:function(e){this.beforeUpdate.trigger(this._styles),this.afterUpdate.trigger(this._styles)}},{key:"create",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s,o,u=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.length>2&&void 0!==u[2]?u[2]:this._defaultMaterial,i=b(n);try{for(i.s();!(a=i.n()).done;)(s=a.value).geometry.boundsTree||s.geometry.computeBoundsTree()}catch(l){i.e(l)}finally{i.f()}o=this.components.renderer,r.clippingPlanes=o.clippingPlanes,this._styles[t]={name:t,material:r,meshes:n};case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){for(var e=0,t=Object.values(this._styles);e<t.length;e++){var n=t[e];n.meshes.length=0,n.material.dispose()}this._styles={}}}]),n}(Ix),ZX=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this,e,r)).name="EdgesClipper",i.styles=new UX(e),i}return(0,o.Z)(n,[{key:"dispose",value:function(){lt(c(n.prototype),"dispose",this).call(this),this.styles.dispose()}},{key:"updateEdges",value:function(){if(this.enabled){var e,t=b(this._planes);try{for(t.s();!(e=t.n()).done;){e.value.update()}}catch(n){t.e(n)}finally{t.f()}}}},{key:"newPlaneInstance",value:function(e,t,n){return new this.PlaneType(this.components,e,t,this.size,this._material,n,this.styles)}}]),n}(Hx),BX={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"},zX=function(){function e(){(0,s.Z)(this,e),this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}return(0,o.Z)(e,[{key:"setSize",value:function(){}},{key:"render",value:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}]),e}(),GX=new vf(-1,1,1,-1,0,1),HX=new vp;HX.setAttribute("position",new op([-1,3,0,-1,-1,0,3,-1,0],3)),HX.setAttribute("uv",new op([0,2,0,0,2,0],2));var jX=function(){function e(t){(0,s.Z)(this,e),this._mesh=new Np(HX,t)}return(0,o.Z)(e,[{key:"dispose",value:function(){this._mesh.geometry.dispose()}},{key:"render",value:function(e){e.render(this._mesh,GX)}},{key:"material",get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}]),e}(),VX=(new vf(-1,1,1,-1,0,1),new vp);VX.setAttribute("position",new op([-1,3,0,-1,-1,0,3,-1,0],3)),VX.setAttribute("uv",new op([0,2,0,0,2,0],2));var WX={defines:{NUM_SAMPLES:7,NUM_RINGS:4,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new yc(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new lh},cameraInverseProjectionMatrix:{value:new lh},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\n\t\tvarying vec2 vUv;\n\n\t\t#if DIFFUSE_TEXTURE == 1\n\t\tuniform sampler2D tDiffuse;\n\t\t#endif\n\n\t\tuniform sampler2D tDepth;\n\n\t\t#if NORMAL_TEXTURE == 1\n\t\tuniform sampler2D tNormal;\n\t\t#endif\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\n\t\tuniform float scale;\n\t\tuniform float intensity;\n\t\tuniform float bias;\n\t\tuniform float kernelRadius;\n\t\tuniform float minResolution;\n\t\tuniform vec2 size;\n\t\tuniform float randomSeed;\n\n\t\t// RGBA depth\n\n\t\t#include <packing>\n\n\t\tvec4 getDefaultColor( const in vec2 screenPosition ) {\n\t\t\t#if DIFFUSE_TEXTURE == 1\n\t\t\treturn texture2D( tDiffuse, vUv );\n\t\t\t#else\n\t\t\treturn vec4( 1.0 );\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t\t\t#else\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\n\t\tvec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\n\t\t\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\n\t\t\tclipPosition *= clipW; // unprojection.\n\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\n\t\t}\n\n\t\tvec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {\n\t\t\t#if NORMAL_TEXTURE == 1\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\n\t\t\t#else\n\t\t\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );\n\t\t\t#endif\n\t\t}\n\n\t\tfloat scaleDividedByCameraFar;\n\t\tfloat minResolutionMultipliedByCameraFar;\n\n\t\tfloat getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\n\t\t\tvec3 viewDelta = sampleViewPosition - centerViewPosition;\n\t\t\tfloat viewDistance = length( viewDelta );\n\t\t\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;\n\n\t\t\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );\n\t\t}\n\n\t\t// moving costly divides into consts\n\t\tconst float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\n\t\tconst float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\n\n\t\tfloat getAmbientOcclusion( const in vec3 centerViewPosition ) {\n\t\t\t// precompute some variables require in getOcclusion.\n\t\t\tscaleDividedByCameraFar = scale / cameraFar;\n\t\t\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;\n\t\t\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );\n\n\t\t\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\n\t\t\tfloat angle = rand( vUv + randomSeed ) * PI2;\n\t\t\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;\n\t\t\tvec2 radiusStep = radius;\n\n\t\t\tfloat occlusionSum = 0.0;\n\t\t\tfloat weightSum = 0.0;\n\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {\n\t\t\t\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;\n\t\t\t\tradius += radiusStep;\n\t\t\t\tangle += ANGLE_STEP;\n\n\t\t\t\tfloat sampleDepth = getDepth( sampleUv );\n\t\t\t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfloat sampleViewZ = getViewZ( sampleDepth );\n\t\t\t\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );\n\t\t\t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );\n\t\t\t\tweightSum += 1.0;\n\t\t\t}\n\n\t\t\tif( weightSum == 0.0 ) discard;\n\n\t\t\treturn occlusionSum * ( intensity / weightSum );\n\t\t}\n\n\t\tvoid main() {\n\t\t\tfloat centerDepth = getDepth( vUv );\n\t\t\tif( centerDepth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat centerViewZ = getViewZ( centerDepth );\n\t\t\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );\n\n\t\t\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );\n\n\t\t\tgl_FragColor = getDefaultColor( vUv );\n\t\t\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;\n\t\t}"},YX={defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new yc(512,512)},sampleUvOffsets:{value:[new yc(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:"\n\n\t\t#include <common>\n\n\t\tuniform vec2 size;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec2 vInvSize;\n\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tvInvSize = 1.0 / size;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\t\t#include <packing>\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform float depthCutoff;\n\n\t\tuniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];\n\t\tuniform float sampleWeights[ KERNEL_RADIUS + 1 ];\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec2 vInvSize;\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t\t\t#else\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\n\t\tvoid main() {\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tif( depth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat centerViewZ = -getViewZ( depth );\n\t\t\tbool rBreak = false, lBreak = false;\n\n\t\t\tfloat weightSum = sampleWeights[0];\n\t\t\tvec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;\n\n\t\t\tfor( int i = 1; i <= KERNEL_RADIUS; i ++ ) {\n\n\t\t\t\tfloat sampleWeight = sampleWeights[i];\n\t\t\t\tvec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;\n\n\t\t\t\tvec2 sampleUv = vUv + sampleUvOffset;\n\t\t\t\tfloat viewZ = -getViewZ( getDepth( sampleUv ) );\n\n\t\t\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;\n\n\t\t\t\tif( ! rBreak ) {\n\t\t\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\n\t\t\t\t\tweightSum += sampleWeight;\n\t\t\t\t}\n\n\t\t\t\tsampleUv = vUv - sampleUvOffset;\n\t\t\t\tviewZ = -getViewZ( getDepth( sampleUv ) );\n\n\t\t\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;\n\n\t\t\t\tif( ! lBreak ) {\n\t\t\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\n\t\t\t\t\tweightSum += sampleWeight;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgl_FragColor = diffuseSum / weightSum;\n\t\t}"},qX={createSampleWeights:function(e,t){for(var n=[],r=0;r<=e;r++)n.push(XX(r,t));return n},createSampleOffsets:function(e,t){for(var n=[],r=0;r<=e;r++)n.push(t.clone().multiplyScalar(r));return n},configure:function(e,t,n,r){e.defines.KERNEL_RADIUS=t,e.uniforms.sampleUvOffsets.value=qX.createSampleOffsets(t,r),e.uniforms.sampleWeights.value=qX.createSampleWeights(t,n),e.needsUpdate=!0}};function XX(e,t){return Math.exp(-e*e/(t*t*2))/(Math.sqrt(2*Math.PI)*t)}var KX={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );\n\t\t\tgl_FragColor = vec4( vec3( depth ), opacity );\n\n\t\t}"},QX=function(e){l(n,e);var t=v(n);function n(e,r){var i,a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new yc(256,256);return(0,s.Z)(this,n),(i=t.call(this)).scene=e,i.camera=r,i.clear=!0,i.needsSwap=!1,i.supportsDepthTextureExtension=o,i.supportsNormalTexture=u,i.originalClearColor=new ep,i._oldClearColor=new ep,i.oldClearAlpha=1,i.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},i.resolution=new yc(l.x,l.y),i.saoRenderTarget=new Rc(i.resolution.x,i.resolution.y,{minFilter:mu,magFilter:mu,format:Nu}),i.blurIntermediateRenderTarget=i.saoRenderTarget.clone(),i.beautyRenderTarget=i.saoRenderTarget.clone(),i.normalRenderTarget=new Rc(i.resolution.x,i.resolution.y,{minFilter:fu,magFilter:fu,format:Nu}),i.depthRenderTarget=i.normalRenderTarget.clone(),i.supportsDepthTextureExtension&&((a=new Yv).type=xu,i.beautyRenderTarget.depthTexture=a,i.beautyRenderTarget.depthBuffer=!0),i.depthMaterial=new Pv,i.depthMaterial.depthPacking=Xl,i.depthMaterial.blending=_o,i.normalMaterial=new Tg,i.normalMaterial.blending=_o,void 0===WX&&console.error("THREE.SAOPass relies on SAOShader"),i.saoMaterial=new zp({defines:Object.assign({},WX.defines),fragmentShader:WX.fragmentShader,vertexShader:WX.vertexShader,uniforms:Up.clone(WX.uniforms)}),i.saoMaterial.extensions.derivatives=!0,i.saoMaterial.defines.DEPTH_PACKING=i.supportsDepthTextureExtension?0:1,i.saoMaterial.defines.NORMAL_TEXTURE=i.supportsNormalTexture?1:0,i.saoMaterial.defines.PERSPECTIVE_CAMERA=i.camera.isPerspectiveCamera?1:0,i.saoMaterial.uniforms.tDepth.value=i.supportsDepthTextureExtension?a:i.depthRenderTarget.texture,i.saoMaterial.uniforms.tNormal.value=i.normalRenderTarget.texture,i.saoMaterial.uniforms.size.value.set(i.resolution.x,i.resolution.y),i.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(i.camera.projectionMatrixInverse),i.saoMaterial.uniforms.cameraProjectionMatrix.value=i.camera.projectionMatrix,i.saoMaterial.blending=_o,void 0===YX&&console.error("THREE.SAOPass relies on DepthLimitedBlurShader"),i.vBlurMaterial=new zp({uniforms:Up.clone(YX.uniforms),defines:Object.assign({},YX.defines),vertexShader:YX.vertexShader,fragmentShader:YX.fragmentShader}),i.vBlurMaterial.defines.DEPTH_PACKING=i.supportsDepthTextureExtension?0:1,i.vBlurMaterial.defines.PERSPECTIVE_CAMERA=i.camera.isPerspectiveCamera?1:0,i.vBlurMaterial.uniforms.tDiffuse.value=i.saoRenderTarget.texture,i.vBlurMaterial.uniforms.tDepth.value=i.supportsDepthTextureExtension?a:i.depthRenderTarget.texture,i.vBlurMaterial.uniforms.size.value.set(i.resolution.x,i.resolution.y),i.vBlurMaterial.blending=_o,i.hBlurMaterial=new zp({uniforms:Up.clone(YX.uniforms),defines:Object.assign({},YX.defines),vertexShader:YX.vertexShader,fragmentShader:YX.fragmentShader}),i.hBlurMaterial.defines.DEPTH_PACKING=i.supportsDepthTextureExtension?0:1,i.hBlurMaterial.defines.PERSPECTIVE_CAMERA=i.camera.isPerspectiveCamera?1:0,i.hBlurMaterial.uniforms.tDiffuse.value=i.blurIntermediateRenderTarget.texture,i.hBlurMaterial.uniforms.tDepth.value=i.supportsDepthTextureExtension?a:i.depthRenderTarget.texture,i.hBlurMaterial.uniforms.size.value.set(i.resolution.x,i.resolution.y),i.hBlurMaterial.blending=_o,void 0===BX&&console.error("THREE.SAOPass relies on CopyShader"),i.materialCopy=new zp({uniforms:Up.clone(BX.uniforms),vertexShader:BX.vertexShader,fragmentShader:BX.fragmentShader,blending:_o}),i.materialCopy.transparent=!0,i.materialCopy.depthTest=!1,i.materialCopy.depthWrite=!1,i.materialCopy.blending=Io,i.materialCopy.blendSrc=Uo,i.materialCopy.blendDst=Do,i.materialCopy.blendEquation=wo,i.materialCopy.blendSrcAlpha=Fo,i.materialCopy.blendDstAlpha=Do,i.materialCopy.blendEquationAlpha=wo,void 0===KX&&console.error("THREE.SAOPass relies on UnpackDepthRGBAShader"),i.depthCopy=new zp({uniforms:Up.clone(KX.uniforms),vertexShader:KX.vertexShader,fragmentShader:KX.fragmentShader,blending:_o}),i.fsQuad=new jX(null),i}return(0,o.Z)(n,[{key:"render",value:function(e,t,n){if(this.renderToScreen&&(this.materialCopy.blending=_o,this.materialCopy.uniforms.tDiffuse.value=n.texture,this.materialCopy.needsUpdate=!0,this.renderPass(e,this.materialCopy,null)),1!==this.params.output){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();var r=e.autoClear;e.autoClear=!1,e.setRenderTarget(this.depthRenderTarget),e.clear(),this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;var i=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=i,this.hBlurMaterial.uniforms.depthCutoff.value=i,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),this.prevStdDev===this.params.saoBlurStdDev&&this.prevNumSamples===this.params.saoBlurRadius||(qX.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new yc(0,1)),qX.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new yc(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),e.setClearColor(0),e.setRenderTarget(this.beautyRenderTarget),e.clear(),e.render(this.scene,this.camera),this.supportsDepthTextureExtension||this.renderOverride(e,this.depthMaterial,this.depthRenderTarget,0,1),this.supportsNormalTexture&&this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(e,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(e,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(e,this.hBlurMaterial,this.saoRenderTarget,16777215,1));var a=this.materialCopy;3===this.params.output?this.supportsDepthTextureExtension?(this.materialCopy.uniforms.tDiffuse.value=this.beautyRenderTarget.depthTexture,this.materialCopy.needsUpdate=!0):(this.depthCopy.uniforms.tDiffuse.value=this.depthRenderTarget.texture,this.depthCopy.needsUpdate=!0,a=this.depthCopy):4===this.params.output?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),0===this.params.output?a.blending=Io:a.blending=_o,this.renderPass(e,a,this.renderToScreen?null:n),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=r}}},{key:"renderPass",value:function(e,t,n,r,i){e.getClearColor(this.originalClearColor);var a=e.getClearAlpha(),s=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,void 0!==r&&null!==r&&(e.setClearColor(r),e.setClearAlpha(i||0),e.clear()),this.fsQuad.material=t,this.fsQuad.render(e),e.autoClear=s,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}},{key:"renderOverride",value:function(e,t,n,r,i){e.getClearColor(this.originalClearColor);var a=e.getClearAlpha(),s=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,r=t.clearColor||r,i=t.clearAlpha||i,void 0!==r&&null!==r&&(e.setClearColor(r),e.setClearAlpha(i||0),e.clear()),this.scene.overrideMaterial=t,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=s,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}},{key:"setSize",value:function(e,t){this.beautyRenderTarget.setSize(e,t),this.saoRenderTarget.setSize(e,t),this.blurIntermediateRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.depthRenderTarget.setSize(e,t),this.saoMaterial.uniforms.size.value.set(e,t),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(e,t),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(e,t),this.hBlurMaterial.needsUpdate=!0}}]),n}(zX);QX.OUTPUT={Beauty:1,Default:0,SAO:2,Depth:3,Normal:4};new yc(1/1024,1/512);var JX=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this)).clipper=e,i.camera=r,i.name="PlanNavigator",i.enabled=!1,i.defaultSectionOffset=1.5,i.defaultCameraOffset=30,i.storeys=[],i.plans={},i.floorPlanViewCached=!1,i.previousCamera=new Oc,i.previousTarget=new Oc,i.previousProjection="Perspective",i}return(0,o.Z)(n,[{key:"get",value:function(){return this.plans}},{key:"dispose",value:function(){this.storeys=[],this.plans={},this.clipper.dispose()}},{key:"create",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.plans[t.id]){e.next=2;break}throw new Error("There's already a plan with the id: ".concat(t.id));case 2:return this.plans[t.id]=t,e.next=5,this.createClippingPlane(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"goTo",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],(null===(r=this.currentPlan)||void 0===r?void 0:r.id)!==t){e.next=3;break}return e.abrupt("return");case 3:if(this.storeCameraPosition(),this.hidePreviousClippingPlane(),this.updateCurrentPlan(t),this.activateCurrentPlan(),this.enabled){e.next=11;break}return e.next=10,this.moveCameraTo2DPlanPosition(n);case 10:this.enabled=!0;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"exitPlanView",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,n=arguments;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],this.enabled){e.next=3;break}return e.abrupt("return");case 3:return this.enabled=!1,this.cacheFloorplanView(),this.camera.setNavigationMode("Orbit"),e.next=8,this.camera.setProjection(this.previousProjection);case 8:return this.currentPlan&&this.currentPlan.plane&&(this.currentPlan.plane.enabled=!1),this.currentPlan=void 0,e.next=12,this.camera.controls.setLookAt(this.previousCamera.x,this.previousCamera.y,this.previousCamera.z,this.previousTarget.x,this.previousTarget.y,this.previousTarget.z,t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"storeCameraPosition",value:function(){this.enabled?this.cacheFloorplanView():this.store3dCameraPosition()}},{key:"createClippingPlane",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.normal,r=t.point,(i=this.clipper.createFromNormalAndCoplanarPoint(n,r,!0)).enabled=!1,this.plans[t.id].plane=i,e.next=6,i.edges.update();case 6:i.edges.visible=!1;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cacheFloorplanView",value:function(){this.floorPlanViewCached=!0,this.camera.controls.saveState()}},{key:"moveCameraTo2DPlanPosition",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.floorPlanViewCached){e.next=5;break}return e.next=3,this.camera.controls.reset(t);case 3:e.next=7;break;case 5:return e.next=7,this.camera.controls.setLookAt(0,100,0,0,0,0,t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"activateCurrentPlan",value:function(){if(!this.currentPlan)throw new Error("Current plan is not defined.");this.currentPlan.plane&&(this.currentPlan.plane.enabled=!0),this.camera.setNavigationMode("Plan");var e=this.currentPlan.ortho?"Orthographic":"Perspective";this.camera.setProjection(e)}},{key:"store3dCameraPosition",value:function(){this.camera.get().getWorldPosition(this.previousCamera),this.camera.controls.getTarget(this.previousTarget),this.previousProjection=this.camera.getProjection()}},{key:"updateCurrentPlan",value:function(e){if(!this.plans[e])throw new Error("The specified plan is undefined!");this.currentPlan=this.plans[e]}},{key:"hidePreviousClippingPlane",value:function(){var e,t=null===(e=this.currentPlan)||void 0===e?void 0:e.plane;t&&(t.enabled=!1)}}]),n}(Ix),$X=function(e){l(n,e);var t=v(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Oc(Math.PI/2,0,0);return(0,s.Z)(this,n),(a=t.call(this)).name="MapboxRenderer",a.enabled=!0,a.beforeUpdate=new ME,a.afterUpdate=new ME,a.initialized=new ME,a._labelRenderer=new Ox,a._renderer=new Kv,a._initError="Mapbox scene isn't initialized yet!",a.updateLabelRendererSize=function(){var e;(null===(e=a._renderer)||void 0===e?void 0:e.domElement)&&a._labelRenderer.setSize(a._renderer.domElement.clientWidth,a._renderer.domElement.clientHeight)},a._components=e,a._map=r,a._modelTransform=a.newModelTransform(i,o),a.setupMap(r),a.setup3DBuildings(),a}return(0,o.Z)(n,[{key:"get",value:function(){return this._renderer}},{key:"getSize",value:function(){if(!this._renderer)throw new Error(this._initError);return new yc(this._renderer.domElement.clientWidth,this._renderer.domElement.clientHeight)}},{key:"resize",value:function(){}},{key:"dispose",value:function(){this.enabled=!1,window.removeEventListener("resize",this.updateLabelRendererSize),this._renderer.dispose(),this._map.remove(),this._map=null}},{key:"initialize",value:function(e){var t=new Kv({canvas:this._map.getCanvas(),context:e,antialias:!0});this._renderer=t,this._renderer.autoClear=!1,this.initializeLabelRenderer(),this.initialized.trigger(t)}},{key:"setupMap",value:function(e){var t=this,n=this._components.scene.get(),r=this.newMapboxLayer((function(e,n){return t.initialize(n)}),(function(e,r){return t.render(n,r)}));e.on("style.load",(function(){e.addLayer(r,"waterway-label")}))}},{key:"newMapboxLayer",value:function(e,t){return{id:"3d-model",type:"custom",renderingMode:"3d",onAdd:e,render:t}}},{key:"newModelTransform",value:function(e,t){return{translateX:e.x,translateY:e.y,translateZ:e.z,rotateX:t.x,rotateY:t.y,rotateZ:t.z,scale:e.meterInMercatorCoordinateUnits()}}},{key:"render",value:function(e,t){if(this._renderer&&this.enabled){this.beforeUpdate.trigger(this);var n=(new lh).makeRotationAxis(new Oc(1,0,0),this._modelTransform.rotateX),r=(new lh).makeRotationAxis(new Oc(0,1,0),this._modelTransform.rotateY),i=(new lh).makeRotationAxis(new Oc(0,0,1),this._modelTransform.rotateZ),a=(new lh).fromArray(t),s=(new lh).makeTranslation(this._modelTransform.translateX,this._modelTransform.translateY,this._modelTransform.translateZ).scale(new Oc(this._modelTransform.scale,-this._modelTransform.scale,this._modelTransform.scale)).multiply(n).multiply(r).multiply(i),o=this._components.camera.get();o.projectionMatrix=a.multiply(s),this._renderer.resetState(),this._renderer.render(e,o),this._labelRenderer.render(e,o),this._map.triggerRepaint(),this.afterUpdate.trigger(this)}}},{key:"initializeLabelRenderer",value:function(){var e,t;this.updateLabelRendererSize(),window.addEventListener("resize",this.updateLabelRendererSize),this._labelRenderer.domElement.style.position="absolute",this._labelRenderer.domElement.style.top="0px";var n=this._labelRenderer.domElement;null===(t=null===(e=this._renderer)||void 0===e?void 0:e.domElement.parentElement)||void 0===t||t.appendChild(n)}},{key:"setup3DBuildings",value:function(){var e=this;this._map.on("load",(function(){var t=e._map.getStyle().layers.find((function(e){return"symbol"===e.type&&e.layout["text-field"]})).id;e._map.addLayer({id:"add-3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}},t)}))}}]),n}(Bx),eK=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.apply(this,arguments)).enabled=!0,e.name="MapboxCamera",e._camera=new Gp,e}return(0,o.Z)(n,[{key:"get",value:function(){return this._camera}}]),n}(Ix);Pn("firebase","9.17.2","app");var tK,nK="firebasestorage.googleapis.com",rK="storageBucket",iK=12e4,aK=6e5,sK=function(e){l(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,s.Z)(this,n),(i=t.call(this,oK(e),"Firebase Storage: ".concat(r," (").concat(oK(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(f(i),n.prototype),i}return(0,o.Z)(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return oK(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Ct);function oK(e){return"storage/"+e}function uK(){return new sK(tK.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function lK(){return new sK(tK.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cK(){return new sK(tK.CANCELED,"User canceled the upload/download.")}function hK(){return new sK(tK.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function pK(e){return new sK(tK.INVALID_ARGUMENT,e)}function fK(){return new sK(tK.APP_DELETED,"The Firebase app was deleted.")}function dK(e,t){return new sK(tK.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function vK(e){throw new sK(tK.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(tK||(tK={}));var mK,yK=function(){function e(t,n){(0,s.Z)(this,e),this.bucket=t,this.path_=n}return(0,o.Z)(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(IQ){return new e(t,"")}if(""===r.path)return r;throw i=t,new sK(tK.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}for(var o=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(n===nK?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}],l=0;l<u.length;l++){var c=u[l],h=c.regex.exec(t);if(h){var p=h[c.indices.bucket],f=h[c.indices.path];f||(f=""),r=new e(p,f),c.postModify(r);break}}if(null==r)throw function(e){return new sK(tK.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),gK=function(){function e(t){(0,s.Z)(this,e),this.promise_=Promise.reject(t)}return(0,o.Z)(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function _K(e){return"string"===typeof e||e instanceof String}function TK(e){return EK()&&e instanceof Blob}function EK(){return"undefined"!==typeof Blob&&!kt()}function xK(e,t,n,r){if(r<t)throw pK("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw pK("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function bK(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function IK(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function wK(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(mK||(mK={}));var kK=function(){function e(t,n,r,i,a,o,u,l,c,h,p){var f=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];(0,s.Z)(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=p,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){f.resolve_=e,f.reject_=t,f.start_()}))}return(0,o.Z)(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var s=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(s)?r():r(s)}catch(IQ){i(IQ)}else if(null!==a){var o=uK();o.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,o)):i(o)}else{if(n.canceled)i(e.appDelete_?fK():cK());else i(lK())}};this.canceled_?t(0,new SK(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,s=!1,o=0;function u(){return 2===o}var l=!1;function c(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((function(){i=null,e(f,u())}),t)}function p(){a&&clearTimeout(a)}function f(e){if(l)p();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return p(),void c.call.apply(c,[null,e].concat(n));var a;if(u()||s)return p(),void c.call.apply(c,[null,e].concat(n));r<64&&(r*=2),1===o?(o=2,a=0):a=1e3*(r+Math.random()),h(a)}}var d=!1;function v(e){d||(d=!0,p(),l||(null!==i?(e||(o=2),clearTimeout(i),h(0)):e||(o=1)))}return h(0),a=setTimeout((function(){s=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new SK(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===mK.NO_ERROR,a=r.getStatus();if(!n||wK(a,e.additionalRetryCodes_)&&e.retry){var s=r.getErrorCode()===mK.ABORT;t(!1,new SK(!1,null,s))}else{var o=-1!==e.successCodes_.indexOf(a);t(!0,new SK(o,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),SK=(0,o.Z)((function e(t,n,r){(0,s.Z)(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function RK(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function CK(){for(var e=RK(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(EK())return new Blob(n);throw new sK(tK.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function DK(e){if("undefined"===typeof atob)throw t="base-64",new sK(tK.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var AK={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},OK=(0,o.Z)((function e(t,n){(0,s.Z)(this,e),this.data=t,this.contentType=n||null}));function NK(e,t){switch(e){case AK.RAW:return new OK(MK(t));case AK.BASE64:case AK.BASE64URL:return new OK(PK(e,t));case AK.DATA_URL:return new OK(function(e){var t=new FK(e);return t.base64?PK(AK.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(IQ){throw dK(AK.DATA_URL,"Malformed data URL.")}return MK(t)}(t.rest)}(t),new FK(t).contentType)}throw uK()}function MK(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function PK(e,t){switch(e){case AK.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw dK(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case AK.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw dK(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=DK(t)}catch(IQ){if(IQ.message.includes("polyfill"))throw IQ;throw dK(e,"Invalid character found")}for(var o=new Uint8Array(s.length),u=0;u<s.length;u++)o[u]=s.charCodeAt(u);return o}var FK=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw dK(AK.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){var n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var LK=function(){function e(t,n){(0,s.Z)(this,e);var r=0,i="";TK(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return(0,o.Z)(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(TK(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(EK()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(CK.apply(null,i))}var a=n.map((function(e){return _K(e)?NK(AK.RAW,e).data:e.data_})),s=0;a.forEach((function(e){s+=e.byteLength}));var o=new Uint8Array(s),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)o[u++]=e[t]})),new e(o,!0)}}]),e}();function UK(e){var t;try{t=JSON.parse(e)}catch(IQ){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function ZK(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function BK(e,t){return t}var zK=(0,o.Z)((function e(t,n,r,i){(0,s.Z)(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||BK})),GK=null;function HK(){if(GK)return GK;var e=[];e.push(new zK("bucket")),e.push(new zK("generation")),e.push(new zK("metageneration")),e.push(new zK("name","fullPath",!0));var t=new zK("name");t.xform=function(e,t){return function(e){return!_K(e)||e.length<2?e:ZK(e)}(t)},e.push(t);var n=new zK("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new zK("timeCreated")),e.push(new zK("updated")),e.push(new zK("md5Hash",null,!0)),e.push(new zK("cacheControl",null,!0)),e.push(new zK("contentDisposition",null,!0)),e.push(new zK("contentEncoding",null,!0)),e.push(new zK("contentLanguage",null,!0)),e.push(new zK("contentType",null,!0)),e.push(new zK("metadata","customMetadata",!0)),GK=e}function jK(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var s=n[a];r[s.local]=s.xform(r,t[s.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new yK(n,r);return t._makeStorageReference(i)}})}(r,e),r}function VK(e,t,n){var r=UK(t);return null===r?null:jK(e,r,n)}function WK(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var YK=(0,o.Z)((function e(t,n,r,i){(0,s.Z)(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function qK(e){if(!e)throw uK()}function XK(e,t){return function(n,r){var i=VK(e,r,t);return qK(null!==i),i}}function KK(e,t){return function(n,r){var i=VK(e,r,t);return qK(null!==i),function(e,t,n,r){var i=UK(t);if(null===i)return null;if(!_K(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var s=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return bK("/b/"+s(i)+"/o/"+s(a),n,r)+IK({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function QK(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new sK(tK.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new sK(tK.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new sK(tK.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new sK(tK.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function JK(e){var t=QK(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new sK(tK.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function $K(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function eQ(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var o=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+o;var u=$K(t,r,i),l="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+WK(u,n)+"\r\n--"+o+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",c="\r\n--"+o+"--",h=LK.getBlob(l,r,c);if(null===h)throw hK();var p={name:u.fullPath},f=bK(a,e.host,e._protocol),d=e.maxUploadRetryTime,v=new YK(f,"POST",XK(e,n),d);return v.urlParams=p,v.headers=s,v.body=h.uploadData(),v.errorHandler=QK(t),v}var tQ=null,nQ=function(){function e(){var t=this;(0,s.Z)(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=mK.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=mK.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=mK.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return(0,o.Z)(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw vK("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw vK("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw vK("cannot .getStatus() before sending");try{return this.xhr_.status}catch(IQ){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw vK("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw vK("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),rQ=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(nQ);function iQ(){return tQ?tQ():new rQ}var aQ=function(){function e(t,n){(0,s.Z)(this,e),this._service=t,this._location=n instanceof yK?n:yK.makeFromUrl(n,t.host)}return(0,o.Z)(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new yK(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return ZK(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new yK(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new sK(tK.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function sQ(e,t,n){e._throwIfRoot("uploadBytes");var r=eQ(e.storage,e._location,HK(),new LK(t,!0),n);return e.storage.makeRequestWithTokens(r,iQ).then((function(t){return{metadata:t,ref:e}}))}function oQ(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=bK(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new YK(r,"GET",KK(e,n),i);return a.errorHandler=JK(t),a}(e.storage,e._location,HK());return e.storage.makeRequestWithTokens(t,iQ).then((function(e){if(null===e)throw new sK(tK.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function uQ(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=bK(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new YK(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=JK(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,iQ)}function lQ(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new yK(e._location.bucket,n);return new aQ(e.storage,r)}function cQ(e,t){if(e instanceof fQ){var n=e;if(null==n._bucket)throw new sK(tK.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rK+"' property when initializing the app?");var r=new aQ(n,n._bucket);return null!=t?cQ(r,t):r}return void 0!==t?lQ(e,t):e}function hQ(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof fQ)return new aQ(e,t);throw pK("To use ref(service, url), the first argument must be a Storage instance.")}return cQ(e,t)}function pQ(e,t){var n=null===t||void 0===t?void 0:t[rK];return null==n?null:yK.makeFromBucketSpec(n,e)}var fQ=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=nK,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=iK,this._maxUploadRetryTime=aK,this._requests=new Set,this._bucket=null!=i?yK.makeFromBucketSpec(i,this._host):pQ(this._host,this.app.options)}return(0,o.Z)(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=yK.makeFromBucketSpec(this._url,e):this._bucket=pQ(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){xK("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){xK("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t,n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new aQ(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new gK(fK());var s=function(e,t,n,r,i,a){var s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=IK(e.urlParams),u=e.url+o,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(l,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new kK(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(s),s.getPromise().then((function(){return i._requests.delete(s)}),(function(){return i._requests.delete(s)})),s}},{key:"makeRequestWithTokens",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,a,s,o;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,a=(0,i.Z)(r,2),s=a[0],o=a[1],e.abrupt("return",this._makeRequest(t,n,s,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),dQ="@firebase/storage",vQ="0.11.2",mQ="storage";function yQ(e,t,n){return sQ(e=Zt(e),t,n)}function gQ(e){return oQ(e=Zt(e))}function _Q(e){return uQ(e=Zt(e))}function TQ(e,t){return hQ(e=Zt(e),t)}function EQ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn(),t=arguments.length>1?arguments[1]:void 0,n=Rn(e=Zt(e),mQ).getImmediate({identifier:t}),r=Tt("storage");return r&&xQ.apply(void 0,[n].concat((0,a.Z)(r))),n}function xQ(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:It(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function bQ(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new fQ(r,i,a,n,On)}Sn(new Bt(mQ,bQ,"PUBLIC").setMultipleInstances(!0)),Pn(dQ,vQ,""),Pn(dQ,vQ,"esm2017");var IQ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,wQ=Object.keys,kQ=Array.isArray;function SQ(e,t){return"object"!=typeof t||wQ(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||IQ.Promise||(IQ.Promise=Promise);var RQ=Object.getPrototypeOf,CQ={}.hasOwnProperty;function DQ(e,t){return CQ.call(e,t)}function AQ(e,t){"function"==typeof t&&(t=t(RQ(e))),("undefined"==typeof Reflect?wQ:Reflect.ownKeys)(t).forEach((function(n){NQ(e,n,t[n])}))}var OQ=Object.defineProperty;function NQ(e,t,n,r){OQ(e,t,SQ(n&&DQ(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function MQ(e){return{from:function(t){return e.prototype=Object.create(t.prototype),NQ(e.prototype,"constructor",e),{extend:AQ.bind(null,e.prototype)}}}}var PQ=Object.getOwnPropertyDescriptor;function FQ(e,t){var n;return PQ(e,t)||(n=RQ(e))&&FQ(n,t)}var LQ=[].slice;function UQ(e,t,n){return LQ.call(e,t,n)}function ZQ(e,t){return t(e)}function BQ(e){if(!e)throw new Error("Assertion Failed")}function zQ(e){IQ.setImmediate?setImmediate(e):setTimeout(e,0)}function GQ(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function HQ(e,t){if(DQ(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var a=HQ(e,t[r]);n.push(a)}return n}var s=t.indexOf(".");if(-1!==s){var o=e[t.substr(0,s)];return void 0===o?void 0:HQ(o,t.substr(s+1))}}function jQ(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){BQ("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)jQ(e,t[r],n[r])}else{var a=t.indexOf(".");if(-1!==a){var s=t.substr(0,a),o=t.substr(a+1);if(""===o)void 0===n?kQ(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var u=e[s];u&&DQ(e,s)||(u=e[s]={}),jQ(u,o,n)}}else void 0===n?kQ(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function VQ(e){var t={};for(var n in e)DQ(e,n)&&(t[n]=e[n]);return t}var WQ=[].concat;function YQ(e){return WQ.apply([],e)}var qQ="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(YQ([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return IQ[e]})),XQ=qQ.map((function(e){return IQ[e]}));GQ(qQ,(function(e){return[e,!0]}));var KQ=null;function QQ(e){KQ="undefined"!=typeof WeakMap&&new WeakMap;var t=JQ(e);return KQ=null,t}function JQ(e){if(!e||"object"!=typeof e)return e;var t=KQ&&KQ.get(e);if(t)return t;if(kQ(e)){t=[],KQ&&KQ.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(JQ(e[n]))}else if(XQ.indexOf(e.constructor)>=0)t=e;else{var i=RQ(e);for(var a in t=i===Object.prototype?{}:Object.create(i),KQ&&KQ.set(e,t),e)DQ(e,a)&&(t[a]=JQ(e[a]))}return t}var $Q={}.toString;function eJ(e){return $Q.call(e).slice(8,-1)}var tJ="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",nJ="symbol"==typeof tJ?function(e){var t;return null!=e&&(t=e[tJ])&&t.apply(e)}:function(){return null},rJ={};function iJ(e){var t,n,r,i;if(1===arguments.length){if(kQ(e))return e.slice();if(this===rJ&&"string"==typeof e)return[e];if(i=nJ(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var aJ="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},sJ="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function oJ(e,t){sJ=e,uJ=t}var uJ=function(){return!0},lJ=!new Error("").stack;function cJ(){if(lJ)try{throw cJ.arguments,new Error}catch(IQ){return IQ}return new Error}function hJ(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(uJ).map((function(e){return"\n"+e})).join("")):""}var pJ=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],fJ=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(pJ),dJ={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function vJ(e,t){this._e=cJ(),this.name=e,this.message=t}function mJ(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function yJ(e,t,n,r){this._e=cJ(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=mJ(e,t)}function gJ(e,t){this._e=cJ(),this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=mJ(e,t)}MQ(vJ).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+hJ(this._e,2))}},toString:function(){return this.name+": "+this.message}}),MQ(yJ).from(vJ),MQ(gJ).from(vJ);var _J=fJ.reduce((function(e,t){return e[t]=t+"Error",e}),{}),TJ=vJ,EJ=fJ.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=cJ(),this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=dJ[t]||n,this.inner=null)}return MQ(r).from(TJ),e[t]=r,e}),{});EJ.Syntax=SyntaxError,EJ.Type=TypeError,EJ.Range=RangeError;var xJ=pJ.reduce((function(e,t){return e[t+"Error"]=EJ[t],e}),{}),bJ=fJ.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=EJ[t]),e}),{});function IJ(){}function wJ(e){return e}function kJ(e,t){return null==e||e===wJ?t:function(n){return t(e(n))}}function SJ(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function RJ(e,t){return e===IJ?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?SJ(r,this.onsuccess):r),i&&(this.onerror=this.onerror?SJ(i,this.onerror):i),void 0!==a?a:n}}function CJ(e,t){return e===IJ?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?SJ(n,this.onsuccess):n),r&&(this.onerror=this.onerror?SJ(r,this.onerror):r)}}function DJ(e,t){return e===IJ?t:function(n){var r=e.apply(this,arguments);SQ(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?SJ(i,this.onsuccess):i),a&&(this.onerror=this.onerror?SJ(a,this.onerror):a),void 0===r?void 0===s?void 0:s:SQ(r,s)}}function AJ(e,t){return e===IJ?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function OJ(e,t){return e===IJ?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then((function(){return t.apply(r,a)}))}return t.apply(this,arguments)}}bJ.ModifyError=yJ,bJ.DexieError=vJ,bJ.BulkError=gJ;var NJ={},MJ="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,RQ(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,RQ(t),e]}(),PJ=(0,i.Z)(MJ,3),FJ=PJ[0],LJ=PJ[1],UJ=PJ[2],ZJ=LJ&&LJ.then,BJ=FJ&&FJ.constructor,zJ=!!UJ,GJ=!1,HJ=UJ?function(){UJ.then(p$)}:IQ.setImmediate?setImmediate.bind(null,p$):IQ.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){p$(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(p$,0)},jJ=function(e,t){$J.push([e,t]),WJ&&(HJ(),WJ=!1)},VJ=!0,WJ=!0,YJ=[],qJ=[],XJ=null,KJ=wJ,QJ={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:F$,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{F$(e[0],e[1])}catch(e){}}))}},JJ=QJ,$J=[],e$=0,t$=[];function n$(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=IJ,this._lib=!1;var t=this._PSD=JJ;if(sJ&&(this._stackHolder=cJ(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==NJ)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&s$(this,this._value))}this._state=null,this._value=null,++t.ref,a$(this,e)}var r$={get:function(){var e=JJ,t=x$;function n(n,r){var i=this,a=!e.global&&(e!==JJ||t!==x$),s=a&&!k$(),o=new n$((function(t,o){u$(i,new i$(M$(n,e,a,s),M$(r,e,a,s),t,o,e))}));return sJ&&h$(o,this),o}return n.prototype=NJ,n},set:function(e){NQ(this,"then",e&&e.prototype===NJ?r$:{get:function(){return e},set:r$.set})}};function i$(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function a$(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&f$();t&&"function"==typeof t.then?a$(e,(function(e,n){t instanceof n$?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,o$(e)),n&&d$()}}),s$.bind(null,e))}catch(t){s$(e,t)}}function s$(e,t){if(qJ.push(t),null===e._state){var n=e._lib&&f$();t=KJ(t),e._state=!1,e._value=t,sJ&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,void 0)}catch(e){}}((function(){var n=FQ(t,"stack");t._promise=e,NQ(t,"stack",{get:function(){return GJ?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){YJ.some((function(t){return t._value===e._value}))||YJ.push(e)}(e),o$(e),n&&d$()}}function o$(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)u$(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===e$&&(++e$,jJ((function(){0==--e$&&v$()}),[]))}function u$(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++e$,jJ(l$,[n,e,t])}else e._listeners.push(t)}function l$(e,t,n){try{XJ=t;var r,i=t._value;t._state?r=e(i):(qJ.length&&(qJ=[]),r=e(i),-1===qJ.indexOf(i)&&function(e){for(var t=YJ.length;t;)if(YJ[--t]._value===e._value)return void YJ.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{XJ=null,0==--e$&&v$(),--n.psd.ref||n.psd.finalize()}}function c$(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,a,s=e._value;null!=s?(i=s.name||"Error",a=s.message||s,r=hJ(s,0)):(i=s,a=""),t.push(i+(a?": "+a:"")+r)}return sJ&&((r=hJ(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&c$(e._prev,t,n)),t}function h$(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function p$(){f$()&&d$()}function f$(){var e=VJ;return VJ=!1,WJ=!1,e}function d$(){var e,t,n;do{for(;$J.length>0;)for(e=$J,$J=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while($J.length>0);VJ=!0,WJ=!0}function v$(){var e=YJ;YJ=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=t$.slice(0),n=t.length;n;)t[--n]()}function m$(e){return new n$(NJ,!1,e)}function y$(e,t){var n=JJ;return function(){var r=f$(),i=JJ;try{return D$(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{D$(i,!1),r&&d$()}}}AQ(n$.prototype,{then:r$,_then:function(e,t){u$(this,new i$(null,null,e,t,JJ))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):m$(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):m$(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),m$(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{GJ=!0;var e=c$(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{GJ=!1}}},timeout:function(e,t){var n=this;return e<1/0?new n$((function(r,i){var a=setTimeout((function(){return i(new EJ.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,a))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&NQ(n$.prototype,Symbol.toStringTag,"Dexie.Promise"),QJ.env=A$(),AQ(n$,{all:function(){var e=iJ.apply(null,arguments).map(S$);return new n$((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,a){return n$.resolve(i).then((function(n){e[a]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof n$)return e;if(e&&"function"==typeof e.then)return new n$((function(t,n){e.then(t,n)}));var t=new n$(NJ,!0,e);return h$(t,XJ),t},reject:m$,race:function(){var e=iJ.apply(null,arguments).map(S$);return new n$((function(t,n){e.map((function(e){return n$.resolve(e).then(t,n)}))}))},PSD:{get:function(){return JJ},set:function(e){return JJ=e}},totalEchoes:{get:function(){return x$}},newPSD:I$,usePSD:O$,scheduler:{get:function(){return jJ},set:function(e){jJ=e}},rejectionMapper:{get:function(){return KJ},set:function(e){KJ=e}},follow:function(e,t){return new n$((function(n,r){return I$((function(t,n){var r=JJ;r.unhandleds=[],r.onunhandled=n,r.finalize=SJ((function(){var e=this;!function(e){t$.push((function t(){e(),t$.splice(t$.indexOf(t),1)})),++e$,jJ((function(){0==--e$&&v$()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),BJ&&(BJ.allSettled&&NQ(n$,"allSettled",(function(){var e=iJ.apply(null,arguments).map(S$);return new n$((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return n$.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),BJ.any&&"undefined"!=typeof AggregateError&&NQ(n$,"any",(function(){var e=iJ.apply(null,arguments).map(S$);return new n$((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,a){return n$.resolve(e).then((function(e){return t(e)}),(function(e){i[a]=e,--r||n(new AggregateError(i))}))}))}))})));var g$={awaits:0,echoes:0,id:0},_$=0,T$=[],E$=0,x$=0,b$=0;function I$(e,t,n,r){var i=JJ,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++b$;var s=QJ.env;a.env=zJ?{Promise:n$,PromiseProp:{value:n$,configurable:!0,writable:!0},all:n$.all,race:n$.race,allSettled:n$.allSettled,any:n$.any,resolve:n$.resolve,reject:n$.reject,nthen:P$(s.nthen,a),gthen:P$(s.gthen,a)}:{},t&&SQ(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=O$(a,e,n,r);return 0===a.ref&&a.finalize(),o}function w$(){return g$.id||(g$.id=++_$),++g$.awaits,g$.echoes+=100,g$.id}function k$(){return!!g$.awaits&&(0==--g$.awaits&&(g$.id=0),g$.echoes=100*g$.awaits,!0)}function S$(e){return g$.echoes&&e&&e.constructor===BJ?(w$(),e.then((function(e){return k$(),e}),(function(e){return k$(),L$(e)}))):e}function R$(e){++x$,g$.echoes&&0!=--g$.echoes||(g$.echoes=g$.id=0),T$.push(JJ),D$(e,!0)}function C$(){var e=T$[T$.length-1];T$.pop(),D$(e,!1)}function D$(e,t){var n=JJ;if((t?!g$.echoes||E$++&&e===JJ:!E$||--E$&&e===JJ)||N$(t?R$.bind(null,e):C$),e!==JJ&&(JJ=e,n===QJ&&(QJ.env=A$()),zJ)){var r=QJ.env.Promise,i=e.env;LJ.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(IQ,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function A$(){var e=IQ.Promise;return zJ?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(IQ,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:LJ.then,gthen:e.prototype.then}:{}}function O$(e,t,n,r,i){var a=JJ;try{return D$(e,!0),t(n,r,i)}finally{D$(a,!1)}}function N$(e){ZJ.call(FJ,e)}function M$(e,t,n,r){return"function"!=typeof e?e:function(){var i=JJ;n&&w$(),D$(t,!0);try{return e.apply(this,arguments)}finally{D$(i,!1),r&&N$(k$)}}}function P$(e,t){return function(n,r){return e.call(this,M$(n,t),M$(r,t))}}function F$(e,t){var n;try{n=t.onuncatched(e)}catch(IQ){}if(!1!==n)try{var r,i={promise:t,reason:e};if(IQ.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),SQ(r,i)):IQ.CustomEvent&&SQ(r=new CustomEvent("unhandledrejection",{detail:i}),i),r&&IQ.dispatchEvent&&(dispatchEvent(r),!IQ.PromiseRejectionEvent&&IQ.onunhandledrejection))try{IQ.onunhandledrejection(r)}catch(IQ){}sJ&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: ".concat(e.stack||e))}catch(IQ){}}-1===(""+ZJ).indexOf("[native code]")&&(w$=k$=IJ);var L$=n$.reject;function U$(e,t,n,r){if(e.idbdb&&(e._state.openComplete||JJ.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===_J.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return U$(e,t,n,r)}))):L$(i)}return i._promise(t,(function(e,t){return I$((function(){return JJ.trans=i,r(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}if(e._state.openComplete)return L$(new EJ.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return L$(new EJ.DatabaseClosed);e.open().catch(IJ)}return e._state.dbReadyPromise.then((function(){return U$(e,t,n,r)}))}var Z$=String.fromCharCode(65535),B$="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",z$=[],G$="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),H$=G$,j$=G$,V$=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};function W$(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Y$={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function q$(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=QQ(t))[e],t}}var X$=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,[{key:"_trans",value:function(e,t,n){var r=this._tx||JJ.trans,i=this.name;function a(e,n,r){if(!r.schema[i])throw new EJ.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var s=f$();try{return r&&r.db===this.db?r===JJ.trans?r._promise(e,a,n):I$((function(){return r._promise(e,a,n)}),{trans:r,transless:JJ.transless||JJ}):U$(this.db,e,[this.name],a)}finally{s&&d$()}}},{key:"get",value:function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)}},{key:"where",value:function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(kQ(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=wQ(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==Z$)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));!n&&sJ&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit of a compound index [").concat(t.join("+"),"]"));var r=this.schema.idxByName,a=this.db._deps.indexedDB;function s(e,t){try{return 0===a.cmp(e,t)}catch(e){return!1}}var o=t.reduce((function(t,n){var a=(0,i.Z)(t,2),o=a[0],u=a[1],l=r[n],c=e[n];return[o||l,o||!l?W$(u,l&&l.multi?function(e){var t=HQ(e,n);return kQ(t)&&t.some((function(e){return s(c,e)}))}:function(e){return s(c,HQ(e,n))}):u]}),[null,null]),u=(0,i.Z)(o,2),l=u[0],c=u[1];return l?this.where(l.name).equals(e[l.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")}},{key:"filter",value:function(e){return this.toCollection().and(e)}},{key:"count",value:function(e){return this.toCollection().count(e)}},{key:"offset",value:function(e){return this.toCollection().offset(e)}},{key:"limit",value:function(e){return this.toCollection().limit(e)}},{key:"each",value:function(e){return this.toCollection().each(e)}},{key:"toArray",value:function(e){return this.toCollection().toArray(e)}},{key:"toCollection",value:function(){return new this.db.Collection(new this.db.WhereClause(this))}},{key:"orderBy",value:function(e){return new this.db.Collection(new this.db.WhereClause(this,kQ(e)?"[".concat(e.join("+"),"]"):e))}},{key:"reverse",value:function(){return this.toCollection().reverse()}},{key:"mapToClass",value:function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(DQ(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}},{key:"defineClass",value:function(){return this.mapToClass((function(e){SQ(this,e)}))}},{key:"add",value:function(e,t){var n=this,r=this.schema.primKey,i=r.auto,a=r.keyPath,s=e;return a&&i&&(s=q$(a)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[s]})})).then((function(e){return e.numFailures?n$.reject(e.failures[0]):e.lastResult})).then((function(t){if(a)try{jQ(e,a,t)}catch(e){}return t}))}},{key:"update",value:function(e,t){if("object"!=typeof e||kQ(e))return this.where(":id").equals(e).modify(t);var n=HQ(e,this.schema.primKey.keyPath);if(void 0===n)return L$(new EJ.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?wQ(t).forEach((function(n){jQ(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}},{key:"put",value:function(e,t){var n=this,r=this.schema.primKey,i=r.auto,a=r.keyPath,s=e;return a&&i&&(s=q$(a)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[s],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?n$.reject(e.failures[0]):e.lastResult})).then((function(t){if(a)try{jQ(e,a,t)}catch(e){}return t}))}},{key:"delete",value:function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?n$.reject(e.failures[0]):void 0}))}},{key:"clear",value:function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Y$})})).then((function(e){return e.numFailures?n$.reject(e.failures[0]):void 0}))}},{key:"bulkGet",value:function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))}},{key:"bulkAdd",value:function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,s=n.auto,o=n.keyPath;if(o&&i)throw new EJ.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new EJ.InvalidArgument("Arguments objects and keys must have the same length");var u=e.length,l=o&&s?e.map(q$(o)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:l,wantResults:a}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,s=e.failures;if(0===t)return a?n:i;throw new gJ("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(u," operations failed"),s)}))}))}},{key:"bulkPut",value:function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,s=n.auto,o=n.keyPath;if(o&&i)throw new EJ.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new EJ.InvalidArgument("Arguments objects and keys must have the same length");var u=e.length,l=o&&s?e.map(q$(o)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:l,wantResults:a}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,s=e.failures;if(0===t)return a?n:i;throw new gJ("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(u," operations failed"),s)}))}))}},{key:"bulkDelete",value:function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,a=e.failures;if(0===r)return i;throw new gJ("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),a)}))}}]),e}();function K$(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,a=new Array(i-1);--i;)a[i-1]=arguments[i];return t[n].subscribe.apply(null,a),e}if("string"==typeof n)return t[n]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(e,r,i){if("object"==typeof e)return s(e);r||(r=AJ),i||(i=IJ);var a={subscribers:[],fire:i,subscribe:function(e){-1===a.subscribers.indexOf(e)&&(a.subscribers.push(e),a.fire=r(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter((function(t){return t!==e})),a.fire=a.subscribers.reduce(r,i)}};return t[e]=n[e]=a,a}function s(e){wQ(e).forEach((function(t){var n=e[t];if(kQ(n))a(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new EJ.InvalidArgument("Invalid event config");var r=a(t,wJ,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){zQ((function(){e.apply(null,t)}))}))}))}}))}}function Q$(e,t){return MQ(t).from({prototype:e}),t}function J$(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function $$(e,t){e.filter=W$(e.filter,t)}function e0(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return W$(r(),t())}:t,e.justLimit=n&&!r}function t0(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new EJ.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function n0(e,t,n){var r=t0(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function r0(e,t,n,r){var i=e.replayFilter?W$(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},s=function(e,n,r){if(!i||i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var s=n.primaryKey,o=""+s;"[object ArrayBuffer]"===o&&(o=""+new Uint8Array(s)),DQ(a,o)||(a[o]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(s,n),i0(n0(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return i0(n0(e,r,n),W$(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function i0(e,t,n,r){var i=y$(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=IJ}),(function(t){e.fail(t),n=IJ}))||i(e.value,e,(function(e){return n=e})),n()}))}))}function a0(e,t){try{var n=s0(e),r=s0(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}(o0(e),o0(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a){var s=a0(e[a],t[a]);if(0!==s)return s}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function s0(e){var t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";var n=eJ(e);return"ArrayBuffer"===n?"binary":n}function o0(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var u0=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,[{key:"_read",value:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,L$.bind(null,n.error)):n.table._trans("readonly",e).then(t)}},{key:"_write",value:function(e){var t=this._ctx;return t.error?t.table._trans(null,L$.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}},{key:"_addAlgorithm",value:function(e){var t=this._ctx;t.algorithm=W$(t.algorithm,e)}},{key:"_iterate",value:function(e,t){return r0(this._ctx,e,t,this._ctx.table.core)}},{key:"clone",value:function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&SQ(n,e),t._ctx=n,t}},{key:"raw",value:function(){return this._ctx.valueMapper=null,this}},{key:"each",value:function(e){var t=this._ctx;return this._read((function(n){return r0(t,e,n,t.table.core)}))}},{key:"count",value:function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(J$(n,!0))return r.count({trans:e,query:{index:t0(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return r0(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)}},{key:"sortBy",value:function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function a(e,t){return t?a(e[n[t]],t-1):e[r]}var s="next"===this._ctx.dir?1:-1;function o(e,t){var n=a(e,i),r=a(t,i);return n<r?-s:n>r?s:0}return this.toArray((function(e){return e.sort(o)})).then(t)}},{key:"toArray",value:function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&J$(n,!0)&&n.limit>0){var r=n.valueMapper,i=t0(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var a=[];return r0(n,(function(e){return a.push(e)}),e,n.table.core).then((function(){return a}))}),e)}},{key:"offset",value:function(e){var t=this._ctx;return e<=0||(t.offset+=e,J$(t)?e0(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):e0(t,(function(){var t=e;return function(){return--t<0}}))),this}},{key:"limit",value:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),e0(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}},{key:"until",value:function(e,t){return $$(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this}},{key:"first",value:function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}},{key:"last",value:function(e){return this.reverse().first(e)}},{key:"filter",value:function(e){var t,n;return $$(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=W$(t.isMatch,n),this}},{key:"and",value:function(e){return this.filter(e)}},{key:"or",value:function(e){return new this.db.WhereClause(this._ctx.table,e,this)}},{key:"reverse",value:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}},{key:"desc",value:function(){return this.reverse()}},{key:"eachKey",value:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}},{key:"eachUniqueKey",value:function(e){return this._ctx.unique="unique",this.eachKey(e)}},{key:"eachPrimaryKey",value:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}},{key:"keys",value:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}},{key:"primaryKeys",value:function(e){var t=this._ctx;if("next"===t.dir&&J$(t,!0)&&t.limit>0)return this._read((function(e){var n=t0(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}},{key:"uniqueKeys",value:function(e){return this._ctx.unique="unique",this.keys(e)}},{key:"firstKey",value:function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}},{key:"lastKey",value:function(e){return this.reverse().firstKey(e)}},{key:"distinct",value:function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return $$(this._ctx,(function(e){var t=e.primaryKey.toString(),r=DQ(n,t);return n[t]=!0,!r})),this}},{key:"modify",value:function(e){var t=this,n=this._ctx;return this._write((function(r){var i;if("function"==typeof e)i=e;else{var a=wQ(e),s=a.length;i=function(t){for(var n=!1,r=0;r<s;++r){var i=a[r],o=e[i];HQ(t,i)!==o&&(jQ(t,i,o),n=!0)}return n}}var o=n.table.core,u=o.schema.primaryKey,l=u.outbound,c=u.extractKey,h=t.db._options.modifyChunkSize||200,p=[],f=0,d=[],v=function(e,t){var n=t.failures,r=t.numFailures;f+=e-r;var i,a=b(wQ(n));try{for(a.s();!(i=a.n()).done;){var s=i.value;p.push(n[s])}}catch(o){a.e(o)}finally{a.f()}};return t.clone().primaryKeys().then((function(t){return function a(s){var u=Math.min(h,t.length-s);return o.getMany({trans:r,keys:t.slice(s,s+u),cache:"immutable"}).then((function(p){for(var f=[],d=[],m=l?[]:null,y=[],g=0;g<u;++g){var _=p[g],T={value:QQ(_),primKey:t[s+g]};!1!==i.call(T,T.value,T)&&(null==T.value?y.push(t[s+g]):l||0===a0(c(_),c(T.value))?(d.push(T.value),l&&m.push(t[s+g])):(y.push(t[s+g]),f.push(T.value)))}var E=J$(n)&&n.limit===1/0&&("function"!=typeof e||e===l0)&&{index:n.index,range:n.range};return Promise.resolve(f.length>0&&o.mutate({trans:r,type:"add",values:f}).then((function(e){for(var t in e.failures)y.splice(parseInt(t),1);v(f.length,e)}))).then((function(){return(d.length>0||E&&"object"==typeof e)&&o.mutate({trans:r,type:"put",keys:m,values:d,criteria:E,changeSpec:"function"!=typeof e&&e}).then((function(e){return v(d.length,e)}))})).then((function(){return(y.length>0||E&&e===l0)&&o.mutate({trans:r,type:"delete",keys:y,criteria:E}).then((function(e){return v(y.length,e)}))})).then((function(){return t.length>s+u&&a(s+h)}))}))}(0).then((function(){if(p.length>0)throw new yJ("Error modifying one or more objects",p,f,d);return t.length}))}))}))}},{key:"delete",value:function(){var e=this._ctx,t=e.range;return J$(e)&&(e.isPrimKey&&!j$||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures,r=(e.lastResult,e.results,e.numFailures);if(r)throw new yJ("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify(l0)}}]),e}(),l0=function(e,t){return t.value=null};function c0(e,t){return e<t?-1:e===t?0:1}function h0(e,t){return e>t?-1:e===t?0:1}function p0(e,t,n){var r=e instanceof g0?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function f0(e){return new e.Collection(e,(function(){return y0("")})).limit(0)}function d0(e,t,n,r,i,a){for(var s=Math.min(e.length,r.length),o=-1,u=0;u<s;++u){var l=t[u];if(l!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):o>=0?e.substr(0,o)+t[o]+n.substr(o+1):null;i(e[u],l)<0&&(o=u)}return s<r.length&&"next"===a?e+n.substr(e.length):s<e.length&&"prev"===a?e.substr(0,n.length):o<0?null:e.substr(0,o)+r[o]+n.substr(o+1)}function v0(e,t,n,r){var i,a,s,o,u,l,c,h=n.length;if(!n.every((function(e){return"string"==typeof e})))return p0(e,"String expected.");function p(e){i=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),a=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),s="next"===e?c0:h0;var t=n.map((function(e){return{lower:a(e),upper:i(e)}})).sort((function(e,t){return s(e.lower,t.lower)}));o=t.map((function(e){return e.upper})),u=t.map((function(e){return e.lower})),l=e,c="next"===e?"":r}p("next");var f=new e.Collection(e,(function(){return m0(o[0],u[h-1]+r)}));f._ondirectionchange=function(e){p(e)};var d=0;return f._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var p=a(i);if(t(p,u,d))return!0;for(var f=null,v=d;v<h;++v){var m=d0(i,p,o[v],u[v],s,l);null===m&&null===f?d=v+1:(null===f||s(f,m)>0)&&(f=m)}return n(null!==f?function(){e.continue(f+c)}:r),!1})),f}function m0(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function y0(e){return{type:1,lower:e,upper:e}}var g0=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,[{key:"Collection",get:function(){return this._ctx.table.db.Collection}},{key:"between",value:function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?f0(this):new this.Collection(this,(function(){return m0(e,t,!n,!r)}))}catch(e){return p0(this,B$)}}},{key:"equals",value:function(e){return null==e?p0(this,B$):new this.Collection(this,(function(){return y0(e)}))}},{key:"above",value:function(e){return null==e?p0(this,B$):new this.Collection(this,(function(){return m0(e,void 0,!0)}))}},{key:"aboveOrEqual",value:function(e){return null==e?p0(this,B$):new this.Collection(this,(function(){return m0(e,void 0,!1)}))}},{key:"below",value:function(e){return null==e?p0(this,B$):new this.Collection(this,(function(){return m0(void 0,e,!1,!0)}))}},{key:"belowOrEqual",value:function(e){return null==e?p0(this,B$):new this.Collection(this,(function(){return m0(void 0,e)}))}},{key:"startsWith",value:function(e){return"string"!=typeof e?p0(this,"String expected."):this.between(e,e+Z$,!0,!0)}},{key:"startsWithIgnoreCase",value:function(e){return""===e?this.startsWith(e):v0(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Z$)}},{key:"equalsIgnoreCase",value:function(e){return v0(this,(function(e,t){return e===t[0]}),[e],"")}},{key:"anyOfIgnoreCase",value:function(){var e=iJ.apply(rJ,arguments);return 0===e.length?f0(this):v0(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")}},{key:"startsWithAnyOfIgnoreCase",value:function(){var e=iJ.apply(rJ,arguments);return 0===e.length?f0(this):v0(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Z$)}},{key:"anyOf",value:function(){var e=this,t=iJ.apply(rJ,arguments),n=this._cmp;try{t.sort(n)}catch(t){return p0(this,B$)}if(0===t.length)return f0(this);var r=new this.Collection(this,(function(){return m0(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,a){for(var s=e.key;n(s,t[i])>0;)if(++i===t.length)return r(a),!1;return 0===n(s,t[i])||(r((function(){e.continue(t[i])})),!1)})),r}},{key:"notEqual",value:function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}},{key:"noneOf",value:function(){var e=iJ.apply(rJ,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return p0(this,B$)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}},{key:"inAnyRange",value:function(e,t){var n=this,r=this._cmp,i=this._ascending,a=this._descending,s=this._min,o=this._max;if(0===e.length)return f0(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return p0(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",EJ.InvalidArgument);var u,l=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers,h=i;function p(e,t){return h(e[0],t[0])}try{u=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var a=e[n];if(r(t[0],a[1])<0&&r(t[1],a[0])>0){a[0]=s(a[0],t[0]),a[1]=o(a[1],t[1]);break}}return n===i&&e.push(t),e}),[]),u.sort(p)}catch(e){return p0(this,B$)}var f=0,d=c?function(e){return i(e,u[f][1])>0}:function(e){return i(e,u[f][1])>=0},v=l?function(e){return a(e,u[f][0])>0}:function(e){return a(e,u[f][0])>=0},m=d,y=new this.Collection(this,(function(){return m0(u[0][0],u[u.length-1][1],!l,!c)}));return y._ondirectionchange=function(e){"next"===e?(m=d,h=i):(m=v,h=a),u.sort(p)},y._addAlgorithm((function(e,t,r){for(var a=e.key;m(a);)if(++f===u.length)return t(r),!1;return!!function(e){return!d(e)&&!v(e)}(a)||(0===n._cmp(a,u[f][1])||0===n._cmp(a,u[f][0])||t((function(){h===i?e.continue(u[f][0]):e.continue(u[f][1])})),!1)})),y}},{key:"startsWithAnyOf",value:function(){var e=iJ.apply(rJ,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?f0(this):this.inAnyRange(e.map((function(e){return[e,e+Z$]}))):p0(this,"startsWithAnyOf() only works with strings")}}]),e}();function _0(e){return y$((function(t){return T0(t),e(t.target.error),!1}))}function T0(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var E0=K$(null,"storagemutated"),x0=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,[{key:"_lock",value:function(){return BQ(!JJ.global),++this._reculock,1!==this._reculock||JJ.global||(JJ.lockOwnerFor=this),this}},{key:"_unlock",value:function(){if(BQ(!JJ.global),0==--this._reculock)for(JJ.global||(JJ.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{O$(e[1],e[0])}catch(e){}}return this}},{key:"_locked",value:function(){return this._reculock&&JJ.lockOwnerFor!==this}},{key:"create",value:function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(BQ(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new EJ.DatabaseClosed(r);case"MissingAPIError":throw new EJ.MissingAPI(r.message,r);default:throw new EJ.OpenFailed(r)}if(!this.active)throw new EJ.TransactionInactive;return BQ(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=y$((function(n){T0(n),t._reject(e.error)})),e.onabort=y$((function(n){T0(n),t.active&&t._reject(new EJ.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=y$((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&E0.storagemutated.fire(e.mutatedParts)})),this}},{key:"_promise",value:function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return L$(new EJ.ReadOnly("Transaction is readonly"));if(!this.active)return L$(new EJ.TransactionInactive);if(this._locked())return new n$((function(i,a){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,a)},JJ])}));if(n)return I$((function(){var e=new n$((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new n$((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i}},{key:"_root",value:function(){return this.parent?this.parent._root():this}},{key:"waitFor",value:function(e){var t=this._root(),n=n$.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new n$((function(e,r){n.then((function(n){return t._waitingQueue.push(y$(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(y$(r.bind(null,e)))})).finally((function(){t._waitingFor===i&&(t._waitingFor=null)}))}))}},{key:"abort",value:function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new EJ.Abort))}},{key:"table",value:function(e){var t=this._memoizedTables||(this._memoizedTables={});if(DQ(t,e))return t[e];var n=this.schema[e];if(!n)throw new EJ.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}]),e}();function b0(e,t,n,r,i,a,s){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+I0(t)}}function I0(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function w0(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:GQ(n,(function(e){return[e.name,e]}))}}var k0=function(e){try{return e.only([[]]),k0=function(){return[[]]},[[]]}catch(e){return k0=function(){return Z$},Z$}};function S0(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return HQ(t,e)}}(e):function(t){return HQ(t,e)}}function R0(e){return[].slice.call(e)}var C0=0;function D0(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function A0(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,i=e.lowerOpen,a=e.upperOpen;return void 0===n?void 0===r?null:t.upperBound(r,!!a):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!a)}var a=function(e,t){var n=R0(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=kQ(t),i=null==t,a={},s={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:S0(t)},indexes:R0(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,i=e.keyPath,s={name:t,compound:kQ(i),keyPath:i,unique:n,multiEntry:r,extractKey:S0(i)};return a[D0(i)]=s,s})),getIndexByKeyPath:function(e){return a[D0(e)]}};return a[":id"]=s.primaryKey,null!=t&&(a[D0(t)]=s.primaryKey),s}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),s=a.schema,o=a.hasGetAll,u=s.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(e){var n=e.trans,a=e.type,s=e.keys,o=e.values,u=e.range;return new Promise((function(e,l){e=y$(e);var c=n.objectStore(t),h=null==c.keyPath,p="put"===a||"add"===a;if(!p&&"delete"!==a&&"deleteRange"!==a)throw new Error("Invalid operation type: "+a);var f,d=(s||o||{length:1}).length;if(s&&o&&s.length!==o.length)throw new Error("Given keys array must have same length as given values array.");if(0===d)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var v=[],m=[],y=0,g=function(e){++y,T0(e)};if("deleteRange"===a){if(4===u.type)return e({numFailures:y,failures:m,results:[],lastResult:void 0});3===u.type?v.push(f=c.clear()):v.push(f=c.delete(r(u)))}else{var _=p?h?[o,s]:[o,null]:[s,null],T=(0,i.Z)(_,2),E=T[0],x=T[1];if(p)for(var b=0;b<d;++b)v.push(f=x&&void 0!==x[b]?c[a](E[b],x[b]):c[a](E[b])),f.onerror=g;else for(var I=0;I<d;++I)v.push(f=c[a](E[I])),f.onerror=g}var w=function(t){var n=t.target.result;v.forEach((function(e,t){return null!=e.error&&(m[t]=e.error)})),e({numFailures:y,failures:m,results:"delete"===a?s:v.map((function(e){return e.result})),lastResult:n})};f.onerror=function(e){g(e),w(e)},f.onsuccess=w}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,i){e=y$(e);for(var a,s=n.objectStore(t),o=r.length,u=new Array(o),l=0,c=0,h=function(t){var n=t.target;u[n._pos]=n.result,++c===l&&e(u)},p=_0(i),f=0;f<o;++f)null!=r[f]&&((a=s.get(r[f]))._pos=f,a.onsuccess=h,a.onerror=p,++l);0===l&&e(u)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,i){e=y$(e);var a=n.objectStore(t).get(r);a.onsuccess=function(t){return e(t.target.result)},a.onerror=_0(i)}))},query:function(e){return function(n){return new Promise((function(i,a){i=y$(i);var s=n.trans,o=n.values,u=n.limit,l=n.query,c=u===1/0?void 0:u,h=l.index,p=l.range,f=s.objectStore(t),d=h.isPrimaryKey?f:f.index(h.name),v=r(p);if(0===u)return i({result:[]});if(e){var m=o?d.getAll(v,c):d.getAllKeys(v,c);m.onsuccess=function(e){return i({result:e.target.result})},m.onerror=_0(a)}else{var y=0,g=o||!("openKeyCursor"in d)?d.openCursor(v):d.openKeyCursor(v),_=[];g.onsuccess=function(e){var t=g.result;return t?(_.push(o?t.value:t.primaryKey),++y===u?i({result:_}):void t.continue()):i({result:_})},g.onerror=_0(a)}}))}}(o),openCursor:function(e){var n=e.trans,i=e.values,a=e.query,s=e.reverse,o=e.unique;return new Promise((function(e,u){e=y$(e);var l=a.index,c=a.range,h=n.objectStore(t),p=l.isPrimaryKey?h:h.index(l.name),f=s?o?"prevunique":"prev":o?"nextunique":"next",d=i||!("openKeyCursor"in p)?p.openCursor(r(c),f):p.openKeyCursor(r(c),f);d.onerror=_0(u),d.onsuccess=y$((function(t){var r=d.result;if(r){r.___id=++C0,r.done=!1;var i=r.continue.bind(r),a=r.continuePrimaryKey;a&&(a=a.bind(r));var s=r.advance.bind(r),o=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=y$(u),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=y$(e),d.onerror=_0(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=o,e(t)}})),n=function(){if(d.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return d.onsuccess=y$((function(e){d.onsuccess=n,n()})),r.continue=i,r.continuePrimaryKey=a,r.advance=s,n(),t},e(r)}else e(null)}),u)}))},count:function(e){var n=e.query,i=e.trans,a=n.index,s=n.range;return new Promise((function(e,n){var o=i.objectStore(t),u=a.isPrimaryKey?o:o.index(a.name),l=r(s),c=l?u.count(l):u.count();c.onsuccess=y$((function(t){return e(t.target.result)})),c.onerror=_0(n)}))}}}(e)})),l={};return u.forEach((function(e){return l[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!l[e])throw new Error("Table '".concat(e,"' not found"));return l[e]},MIN_KEY:-1/0,MAX_KEY:k0(t),schema:s}}function O0(e,t){var n=e._novip,r=t.db,i=function(e,t,n,r){var i=n.IDBKeyRange,a=(n.indexedDB,function(e,t){return t.reduce((function(e,t){var n=t.create;return ot(ot({},e),n(e))}),e)}(A0(t,i,r),e.dbcore));return{dbcore:a}}(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach((function(e){var t=e.name;n.core.schema.tables.some((function(e){return e.name===t}))&&(e.core=n.core.table(t),n[t]instanceof n.Table&&(n[t].core=e.core))}))}function N0(e,t,n,r){var i=e._novip;n.forEach((function(e){var n=r[e];t.forEach((function(t){var r=FQ(t,e);(!r||"value"in r&&void 0===r.value)&&(t===i.Transaction.prototype||t instanceof i.Transaction?NQ(t,e,{get:function(){return this.table(e)},set:function(t){OQ(this,e,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):t[e]=new i.Table(e,n))}))}))}function M0(e,t){var n=e._novip;t.forEach((function(e){for(var t in e)e[t]instanceof n.Table&&delete e[t]}))}function P0(e,t){return e._cfg.version-t._cfg.version}function F0(e,t,n,r){var i=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var s=a._reject.bind(a),o=JJ.transless||JJ;I$((function(){JJ.trans=a,JJ.transless=o,0===t?(wQ(i).forEach((function(e){U0(n,e,i[e].primKey,i[e].indexes)})),O0(e,n),n$.follow((function(){return e.on.populate.fire(a)})).catch(s)):function(e,t,n,r){var i=e._novip,a=[],s=i._versions,o=i._dbSchema=B0(i,i.idbdb,r),u=!1;return s.filter((function(e){return e._cfg.version>=t})).forEach((function(e){a.push((function(){var a=o,s=e._cfg.dbschema;z0(i,a,r),z0(i,s,r),o=i._dbSchema=s;var l=L0(a,s);l.add.forEach((function(e){U0(r,e[0],e[1].primKey,e[1].indexes)})),l.change.forEach((function(e){if(e.recreate)throw new EJ.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return Z0(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),Z0(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var c=e._cfg.contentUpgrade;if(c&&e._cfg.version>t){O0(i,r),n._memoizedTables={},u=!0;var h=VQ(s);l.del.forEach((function(e){h[e]=a[e]})),M0(i,[i.Transaction.prototype]),N0(i,[i.Transaction.prototype],wQ(h),h),n.schema=h;var p,f=aJ(c);f&&w$();var d=n$.follow((function(){if((p=c(n))&&f){var e=k$.bind(null,null);p.then(e,e)}}));return p&&"function"==typeof p.then?n$.resolve(p):d.then((function(){return p}))}})),a.push((function(t){u&&H$||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((function(n){return null==e[n]&&t.db.deleteObjectStore(n)}))}(e._cfg.dbschema,t),M0(i,[i.Transaction.prototype]),N0(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema}))})),function e(){return a.length?n$.resolve(a.shift()(n.idbtrans)).then(e):n$.resolve()}().then((function(){var e,t;t=r,wQ(e=o).forEach((function(n){t.db.objectStoreNames.contains(n)||U0(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,a,n).catch(s)}))}function L0(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],a=t[n];if(i){var s={name:n,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!G$)s.recreate=!0,r.change.push(s);else{var o=i.idxByName,u=a.idxByName,l=void 0;for(l in o)u[l]||s.del.push(l);for(l in u){var c=o[l],h=u[l];c?c.src!==h.src&&s.change.push(h):s.add.push(h)}(s.del.length>0||s.add.length>0||s.change.length>0)&&r.change.push(s)}}else r.add.push([n,a])}return r}function U0(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return Z0(i,e)})),i}function Z0(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function B0(e,t,n){var r={};return UQ(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),i=t.keyPath,a=b0(I0(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),s=[],o=0;o<t.indexNames.length;++o){var u=t.index(t.indexNames[o]);i=u.keyPath;var l=b0(u.name,i,!!u.unique,!!u.multiEntry,!1,i&&"string"!=typeof i,!1);s.push(l)}r[e]=w0(e,a,s)})),r}function z0(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,a=0;a<i.length;++a){var s=i[a],o=n.objectStore(s);r._hasGetAll="getAll"in o;for(var u=0;u<o.indexNames.length;++u){var l=o.indexNames[u],c=o.index(l).keyPath,h="string"==typeof c?c:"["+UQ(c).join("+")+"]";if(t[s]){var p=t[s].idxByName[h];p&&(p.name=l,delete t[s].idxByName[h],t[s].idxByName[l]=p)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&IQ.WorkerGlobalScope&&IQ instanceof IQ.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}var G0=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,[{key:"_parseStoresSpec",value:function(e,t){wQ(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return b0(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),kQ(r),0===t)})),i=r.shift();if(i.multi)throw new EJ.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new EJ.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new EJ.Schema("Index must have a name and cannot be an empty string")})),t[n]=w0(n,i,r)}}))}},{key:"stores",value:function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?SQ(this._cfg.storesSource,e):e;var n=t._versions,r={},i={};return n.forEach((function(e){SQ(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),t._dbSchema=i,M0(t,[t._allTables,t,t.Transaction.prototype]),N0(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],wQ(i),i),t._storeNames=wQ(i),this}},{key:"upgrade",value:function(e){return this._cfg.contentUpgrade=OJ(this._cfg.contentUpgrade||IJ,e),this}}]),e}();function H0(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new h1("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function j0(e){return e&&"function"==typeof e.databases}function V0(e){return I$((function(){return JJ.letThrough=!0,e()}))}function W0(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function Y0(e){var t=function(t){return e.next(t)},n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t),a=i.value;return i.done?a:a&&"function"==typeof a.then?a.then(n,r):kQ(a)?Promise.all(a).then(n,r):n(a)}}return i(t)()}function q0(e,t,n){var r=arguments.length;if(r<2)throw new EJ.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,YQ(i),n]}function X0(e,t,n,r,i){return n$.resolve().then((function(){var a=JJ.transless||JJ,s=e._createTransaction(t,n,e._dbSchema,r),o={trans:s,transless:a};if(r)s.idbtrans=r.idbtrans;else try{s.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===_J.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return X0(e,t,n,null,i)}))):L$(r)}var u,l=aJ(i);l&&w$();var c=n$.follow((function(){if(u=i.call(s,s))if(l){var e=k$.bind(null,null);u.then(e,e)}else"function"==typeof u.next&&"function"==typeof u.throw&&(u=Y0(u))}),o);return(u&&"function"==typeof u.then?n$.resolve(u).then((function(e){return s.active?e:L$(new EJ.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):c.then((function(){return u}))).then((function(e){return r&&s._resolve(),s._completion.then((function(){return e}))})).catch((function(e){return s._reject(e),L$(e)}))}))}function K0(e,t,n){for(var r=kQ(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Q0={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return ot(ot({},e),{},{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function s(e,t,n){var r=D0(e),o=i[r]=i[r]||[],u=null==e?0:"string"==typeof e?1:e.length,l=t>0,c=ot(ot({},n),{},{isVirtual:l,keyTail:t,keyLength:u,extractKey:S0(e),unique:!l&&n.unique});return o.push(c),c.isPrimaryKey||a.push(c),u>1&&s(2===u?e[0]:e.slice(0,u-1),t+1,n),o.sort((function(e,t){return e.keyTail-t.keyTail})),c}var o=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[o];var u,l=b(r.indexes);try{for(l.s();!(u=l.n()).done;){var c=u.value;s(c.keyPath,0,c)}}catch(f){l.e(f)}finally{l.f()}function h(t){var n,r,i=t.query.index;return i.isVirtual?ot(ot({},t),{},{query:{index:i,range:(n=t.query.range,r=i.keyTail,{type:1===n.type?2:n.type,lower:K0(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:K0(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0})}}):t}var p=ot(ot({},n),{},{schema:ot(ot({},r),{},{primaryKey:o,indexes:a,getIndexByKeyPath:function(e){var t=i[D0(e)];return t&&t[0]}}),count:function(e){return n.count(h(e))},query:function(e){return n.query(h(e))},openCursor:function(t){var r=t.query.index,i=r.keyTail,a=r.isVirtual,s=r.keyLength;return a?n.openCursor(h(t)).then((function(n){return n&&function(n){var r=Object.create(n,{continue:{value:function(r){null!=r?n.continue(K0(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,s).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(K0(t,e.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===s?e[0]:e.slice(0,s)}},value:{get:function(){return n.value}}});return r}(n)})):n.openCursor(t)}});return p}})}};function J0(e,t,n,r){return n=n||{},r=r||"",wQ(e).forEach((function(i){if(DQ(t,i)){var a=e[i],s=t[i];if("object"==typeof a&&"object"==typeof s&&a&&s){var o=eJ(a);o!==eJ(s)?n[r+i]=t[i]:"Object"===o?J0(a,s,n,r+i+"."):a!==s&&(n[r+i]=t[i])}else a!==s&&(n[r+i]=t[i])}else n[r+i]=void 0})),wQ(t).forEach((function(i){DQ(e,i)||(n[r+i]=t[i])})),n}var $0={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return ot(ot({},e),{},{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=ot(ot({},n),{},{mutate:function(e){var i=JJ.trans,s=i.table(t).hook,o=s.deleting,u=s.creating,l=s.updating;switch(e.type){case"add":if(u.fire===IJ)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"put":if(u.fire===IJ&&l.fire===IJ)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"delete":if(o.fire===IJ)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"deleteRange":if(o.fire===IJ)break;return i._promise("readwrite",(function(){return function(e){return h(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function c(e){var t=JJ.trans,i=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?ot(ot({},e),{},{keys:i}):ot({},e)).type&&(e.values=(0,a.Z)(e.values)),e.keys&&(e.keys=(0,a.Z)(e.keys)),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,i).then((function(a){var s=i.map((function(n,i){var s=a[i],c={onerror:null,onsuccess:null};if("delete"===e.type)o.fire.call(c,n,s,t);else if("add"===e.type||void 0===s){var h=u.fire.call(c,n,e.values[i],t);null==n&&null!=h&&(n=h,e.keys[i]=n,r.outbound||jQ(e.values[i],r.keyPath,n))}else{var p=J0(s,e.values[i]),f=l.fire.call(c,p,n,s,t);if(f){var d=e.values[i];Object.keys(f).forEach((function(e){DQ(d,e)?d[e]=f[e]:jQ(d,e,f[e])}))}}return c}));return n.mutate(e).then((function(t){for(var n=t.failures,r=t.results,o=t.numFailures,u=t.lastResult,l=0;l<i.length;++l){var c=r?r[l]:i[l],h=s[l];null==c?h.onerror&&h.onerror(n[l]):h.onsuccess&&h.onsuccess("put"===e.type&&a[l]?e.values[l]:c)}return{failures:n,results:r,numFailures:o,lastResult:u}})).catch((function(e){return s.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}function h(e,t,i){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:i}).then((function(n){var r=n.result;return c({type:"delete",keys:r,trans:e}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):r.length<i?{failures:[],numFailures:0,lastResult:void 0}:h(e,ot(ot({},t),{},{lower:r[r.length-1],lowerOpen:!0}),i)}))}))}}});return i}})}};function e1(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)0===a0(t.keys[i],e[a])&&(r.push(n?QQ(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch(e){return null}}var t1={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return ot(ot({},n),{},{getMany:function(e){if(!e.cache)return n.getMany(e);var t=e1(e.keys,e.trans._cache,"clone"===e.cache);return t?n$.resolve(t):n.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?QQ(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function n1(e){return!("from"in e)}var r1=function e(t,n){if(!this){var r=new e;return t&&"d"in t&&SQ(r,t),r}SQ(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0})};function i1(e,t,n){var r=a0(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(n1(e))return SQ(e,{from:t,to:n,d:1});var i=e.l,a=e.r;if(a0(n,e.from)<0)return i?i1(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},o1(e);if(a0(t,e.to)>0)return a?i1(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},o1(e);a0(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),a0(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var s=!e.r;i&&!e.l&&a1(e,i),a&&s&&a1(e,a)}}function a1(e,t){n1(t)||function e(t,n){var r=n.from,i=n.to,a=n.l,s=n.r;i1(t,r,i),a&&e(t,a),s&&e(t,s)}(e,t)}function s1(e){var t=n1(e)?null:{s:0,n:e};return{next:function(e){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&a0(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||a0(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function o1(e){var t,n,r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a="r"===i?"l":"r",s=ot({},e),o=e[i];e.from=o.from,e.to=o.to,e[i]=o[i],s[i]=o[a],e[a]=s,s.d=u1(s)}e.d=u1(e)}function u1(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}AQ(r1.prototype,(0,at.Z)({add:function(e){return a1(this,e),this},addKey:function(e){return i1(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return i1(t,e,e)})),this}},tJ,(function(){return s1(this)})));var l1,c1={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new r1(e.MIN_KEY,e.MAX_KEY);return ot(ot({},e),{},{table:function(r){var a=e.table(r),s=a.schema,o=s.primaryKey,u=o.extractKey,l=o.outbound,c=ot(ot({},a),{},{mutate:function(e){var o=e.trans,u=o.mutatedParts||(o.mutatedParts={}),l=function(e){var n="idb://".concat(t,"/").concat(r,"/").concat(e);return u[n]||(u[n]=new r1)},c=l(""),h=l(":dels"),p=e.type,f="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[],d=(0,i.Z)(f,2),v=d[0],m=d[1],y=e.trans._cache;return a.mutate(e).then((function(e){if(kQ(v)){"delete"!==p&&(v=e.results),c.addKeys(v);var t=e1(v,y);t||"add"===p||h.addKeys(v),(t||m)&&function(e,t,n,r){t.indexes.forEach((function(t){var i=e(t.name||"");function a(e){return null!=e?t.extractKey(e):null}var s=function(e){return t.multiEntry&&kQ(e)?e.forEach((function(e){return i.addKey(e)})):i.addKey(e)};(n||r).forEach((function(e,t){var i=n&&a(n[t]),o=r&&a(r[t]);0!==a0(i,o)&&(null!=i&&s(i),null!=o&&s(o))}))}))}(l,s,t,m)}else if(v){var r={from:v.lower,to:v.upper};h.add(r),c.add(r)}else c.add(n),h.add(n),s.indexes.forEach((function(e){return l(e.name).add(n)}));return e}))}}),h=function(t){var n,r,i=t.query,a=i.index,s=i.range;return[a,new r1(null!==(n=s.lower)&&void 0!==n?n:e.MIN_KEY,null!==(r=s.upper)&&void 0!==r?r:e.MAX_KEY)]},p={get:function(e){return[o,new r1(e.key)]},getMany:function(e){return[o,(new r1).addKeys(e.keys)]},count:h,query:h,openCursor:h};return wQ(p).forEach((function(e){c[e]=function(s){var o=JJ.subscr;if(o){var c=function(e){var n="idb://".concat(t,"/").concat(r,"/").concat(e);return o[n]||(o[n]=new r1)},h=c(""),f=c(":dels"),d=p[e](s),v=(0,i.Z)(d,2),m=v[0],y=v[1];if(c(m.name||"").add(y),!m.isPrimaryKey){if("count"!==e){var g="query"===e&&l&&s.values&&a.query(ot(ot({},s),{},{values:!1}));return a[e].apply(this,arguments).then((function(t){if("query"===e){if(l&&s.values)return g.then((function(e){var n=e.result;return h.addKeys(n),t}));var n=s.values?t.result.map(u):t.result;s.values?h.addKeys(n):f.addKeys(n)}else if("openCursor"===e){var r=t,i=s.values;return r&&Object.create(r,{key:{get:function(){return f.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return f.addKey(e),e}},value:{get:function(){return i&&h.addKey(r.primaryKey),r.value}}})}return t}))}f.add(n)}}return a[e].apply(this,arguments)}})),c}})}},h1=function(){function e(t,n){var r=this;(0,s.Z)(this,e),this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=ot({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o,u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:IJ,dbReadyPromise:null,cancelOpen:IJ,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};u.dbReadyPromise=new n$((function(e){u.dbReadyResolve=e})),u.openCanceller=new n$((function(e,t){u.cancelOpen=t})),this._state=u,this.name=t,this.on=K$(this,"populate","blocked","versionchange","close",{ready:[OJ,IJ]}),this.on.ready.subscribe=ZQ(this.on.ready.subscribe,(function(t){return function(n,i){e.vip((function(){var e=r._state;if(e.openComplete)e.dbOpenError||n$.resolve().then(n),i&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),i&&t(n);else{t(n);var a=r;i||t((function e(){a.on.ready.unsubscribe(n),a.on.ready.unsubscribe(e)}))}}))}})),this.Collection=(o=this,Q$(u0.prototype,(function(e,t){this.db=o;var n=Y$,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,a=i.table,s=a.hook.reading.fire;this._ctx={table:a,index:i.index,isPrimKey:!i.index||a.schema.primKey.keyPath&&i.index===a.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:s!==wJ?s:null}}))),this.Table=function(e){return Q$(X$.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:K$(null,{creating:[RJ,IJ],reading:[kJ,wJ],updating:[DJ,IJ],deleting:[CJ,IJ]})}))}(this),this.Transaction=function(e){return Q$(x0.prototype,(function(t,n,r,i,a){var s=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=K$(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new n$((function(e,t){s._resolve=e,s._reject=t})),this._completion.then((function(){s.active=!1,s.on.complete.fire()}),(function(e){var t=s.active;return s.active=!1,s.on.error.fire(e),s.parent?s.parent._reject(e):t&&s.idbtrans&&s.idbtrans.abort(),L$(e)}))}))}(this),this.Version=function(e){return Q$(G0.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Q$(g0.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var i=e._deps.indexedDB;if(!i)throw new EJ.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(e,t){return i.cmp(t,e)},this._max=function(e,t){return i.cmp(e,t)>0?e:t},this._min=function(e,t){return i.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))})),this._maxKey=k0(n.IDBKeyRange),this._createTransaction=function(e,t,n,i){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),z$.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Q0),this.use($0),this.use(c1),this.use(t1),this.vip=Object.create(this,{_vip:{value:!0}}),a.forEach((function(e){return e(r)}))}return(0,o.Z)(e,[{key:"version",value:function(e){if(isNaN(e)||e<.1)throw new EJ.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new EJ.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(P0),n.stores({}),this._state.autoSchema=!1,n)}},{key:"_whenReady",value:function(e){var t=this;return this.idbdb&&(this._state.openComplete||JJ.letThrough||this._vip)?e():new n$((function(e,n){if(t._state.openComplete)return n(new EJ.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new EJ.DatabaseClosed);t.open().catch(IJ)}t._state.dbReadyPromise.then(e,n)})).then(e)}},{key:"use",value:function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;i&&this.unuse({stack:t,name:i});var a=this._middlewares[t]||(this._middlewares[t]=[]);return a.push({stack:t,create:n,level:null==r?10:r,name:i}),a.sort((function(e,t){return e.level-t.level})),this}},{key:"unuse",value:function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this}},{key:"open",value:function(){return function(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?L$(t.dbOpenError):e}));sJ&&(t.openCanceller._stackHolder=cJ()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new EJ.DatabaseClosed("db.open() was cancelled")}var a=t.dbReadyResolve,s=null,o=!1;return n$.race([r,("undefined"==typeof navigator?n$.resolve():W0()).then((function(){return new n$((function(r,a){if(i(),!n)throw new EJ.MissingAPI;var u=e.name,l=t.autoSchema?n.open(u):n.open(u,Math.round(10*e.verno));if(!l)throw new EJ.MissingAPI;l.onerror=_0(a),l.onblocked=y$(e._fireOnBlocked),l.onupgradeneeded=y$((function(r){if(s=l.transaction,t.autoSchema&&!e._options.allowEmptyDB){l.onerror=T0,s.abort(),l.result.close();var i=n.deleteDatabase(u);i.onsuccess=i.onerror=y$((function(){a(new EJ.NoSuchDatabase("Database ".concat(u," doesnt exist")))}))}else{s.onerror=_0(a);var c=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;o=c<1,e._novip.idbdb=l.result,F0(e,c/10,s,a)}}),a),l.onsuccess=y$((function(){s=null;var n,i=e._novip.idbdb=l.result,a=UQ(i.objectStoreNames);if(a.length>0)try{var c=i.transaction(1===(n=a).length?n[0]:n,"readonly");t.autoSchema?function(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=B0(0,t,n);r._storeNames=UQ(t.objectStoreNames,0),N0(r,[r._allTables],wQ(i),i)}(e,i,c):(z0(e,e._dbSchema,c),function(e,t){var n=L0(B0(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,c)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),O0(e,c)}catch(e){}z$.push(e),i.onversionchange=y$((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),i.onclose=y$((function(t){e.on("close").fire(t)})),o&&function(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!j0(n)&&"__dbnames"!==t&&H0(n,r).put({name:t}).catch(IJ)}(e._deps,u),r()}),a)}))}))]).then((function(){return i(),t.onReadyBeingFired=[],n$.resolve(V0((function(){return e.on.ready.fire(e.vip)}))).then((function n(){if(t.onReadyBeingFired.length>0){var r=t.onReadyBeingFired.reduce(OJ,IJ);return t.onReadyBeingFired=[],n$.resolve(V0((function(){return r(e.vip)}))).then(n)}}))})).finally((function(){t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((function(){return e})).catch((function(n){t.dbOpenError=n;try{s&&s.abort()}catch(e){}return r===t.openCanceller&&e._close(),L$(n)})).finally((function(){t.openComplete=!0,a()}))}(this)}},{key:"_close",value:function(){var e=this._state,t=z$.indexOf(this);if(t>=0&&z$.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new n$((function(t){e.dbReadyResolve=t})),e.openCanceller=new n$((function(t,n){e.cancelOpen=n}))}},{key:"close",value:function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new EJ.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}},{key:"delete",value:function(){var e=this,t=arguments.length>0,n=this._state;return new n$((function(r,i){var a=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=y$((function(){!function(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!j0(n)&&"__dbnames"!==t&&H0(n,r).delete(t).catch(IJ)}(e._deps,e.name),r()})),t.onerror=_0(i),t.onblocked=e._fireOnBlocked};if(t)throw new EJ.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(a):a()}))}},{key:"backendDB",value:function(){return this.idbdb}},{key:"isOpen",value:function(){return null!==this.idbdb}},{key:"hasBeenClosed",value:function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}},{key:"hasFailed",value:function(){return null!==this._state.dbOpenError}},{key:"dynamicallyOpened",value:function(){return this._state.autoSchema}},{key:"tables",get:function(){var e=this;return wQ(this._allTables).map((function(t){return e._allTables[t]}))}},{key:"transaction",value:function(){var e=q0.apply(this,arguments);return this._transaction.apply(this,e)}},{key:"_transaction",value:function(e,t,n){var r=this,i=JJ.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var a,s,o=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(s=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||"readonly"===e)a="readonly";else{if("rw"!=e&&"readwrite"!=e)throw new EJ.InvalidArgument("Invalid transaction mode: "+e);a="readwrite"}if(i){if("readonly"===i.mode&&"readwrite"===a){if(!o)throw new EJ.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&s.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!o)throw new EJ.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),o&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,(function(t,n){n(e)})):L$(e)}var u=X0.bind(null,this,a,s,i,n);return i?i._promise(a,u,"lock"):JJ.trans?O$(JJ.transless,(function(){return r._whenReady(u)})):this._whenReady(u)}},{key:"table",value:function(e){if(!DQ(this._allTables,e))throw new EJ.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]}}]),e}(),p1="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",f1=function(){function e(t){(0,s.Z)(this,e),this._subscribe=t}return(0,o.Z)(e,[{key:"subscribe",value:function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}},{key:p1,value:function(){return this}}]),e}();function d1(e,t){return wQ(t).forEach((function(n){a1(e[n]||(e[n]=new r1),t[n])})),e}try{l1={indexedDB:IQ.indexedDB||IQ.mozIndexedDB||IQ.webkitIndexedDB||IQ.msIndexedDB,IDBKeyRange:IQ.IDBKeyRange||IQ.webkitIDBKeyRange}}catch(IQ){l1={indexedDB:null,IDBKeyRange:null}}var v1=h1;function m1(e){var t=y1;try{y1=!0,E0.storagemutated.fire(e)}finally{y1=t}}AQ(v1,ot(ot({},bJ),{},{delete:function(e){return new v1(e,{addons:[]}).delete()},exists:function(e){return new v1(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return function(e){var t=e.indexedDB,n=e.IDBKeyRange;return j0(t)?Promise.resolve(t.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return"__dbnames"!==e}))})):H0(t,n).toCollection().primaryKeys()}(v1.dependencies).then(e)}catch(e){return L$(new EJ.MissingAPI)}},defineClass:function(){return function(e){SQ(this,e)}},ignoreTransaction:function(e){return JJ.trans?O$(JJ.transless,e):e()},vip:V0,async:function(e){return function(){try{var t=Y0(e.apply(this,arguments));return t&&"function"==typeof t.then?t:n$.resolve(t)}catch(e){return L$(e)}}},spawn:function(e,t,n){try{var r=Y0(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:n$.resolve(r)}catch(e){return L$(e)}},currentTransaction:{get:function(){return JJ.trans||null}},waitFor:function(e,t){var n=n$.resolve("function"==typeof e?v1.ignoreTransaction(e):e).timeout(t||6e4);return JJ.trans?JJ.trans.waitFor(n):n},Promise:n$,debug:{get:function(){return sJ},set:function(e){oJ(e,"dexie"===e?function(){return!0}:V$)}},derive:MQ,extend:SQ,props:AQ,override:ZQ,Events:K$,on:E0,liveQuery:function(e){return new f1((function(t){var n=aJ(e),r=!1,i={},a={},s={get closed(){return r},unsubscribe:function(){r=!0,E0.storagemutated.unsubscribe(c)}};t.start&&t.start(s);var o=!1,u=!1;function l(){return wQ(a).some((function(e){return i[e]&&function(e,t){var n=s1(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=s1(e),s=a.next(i.from),o=s.value;!r.done&&!s.done;){if(a0(o.from,i.to)<=0&&a0(o.to,i.from)>=0)return!0;a0(i.from,o.from)<0?i=(r=n.next(o.from)).value:o=(s=a.next(i.from)).value}return!1}(i[e],a[e])}))}var c=function(e){d1(i,e),l()&&h()},h=function h(){if(!o&&!r){i={};var p={},f=function(t){n&&w$();var r=function(){return I$(e,{subscr:t,trans:null})},i=JJ.trans?O$(JJ.transless,r):r();return n&&i.then(k$,k$),i}(p);u||(E0("storagemutated",c),u=!0),o=!0,Promise.resolve(f).then((function(e){o=!1,r||(l()?h():(i={},a=p,t.next&&t.next(e)))}),(function(e){o=!1,t.error&&t.error(e),s.unsubscribe()}))}};return h(),s}))},extendObservabilitySet:d1,getByKeyPath:HQ,setByKeyPath:jQ,delByKeyPath:function(e,t){"string"==typeof t?jQ(e,t,void 0):"length"in t&&[].map.call(t,(function(t){jQ(e,t,void 0)}))},shallowClone:VQ,deepClone:QQ,getObjectDiff:J0,cmp:a0,asap:zQ,minKey:-1/0,addons:[],connections:z$,errnames:_J,dependencies:l1,semVer:"3.2.3",version:"3.2.3".split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)}))})),v1.maxKey=k0(v1.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(E0("storagemutated",(function(e){var t;y1||(G$?(t=document.createEvent("CustomEvent")).initCustomEvent("x-storagemutated-1",!0,!0,e):t=new CustomEvent("x-storagemutated-1",{detail:e}),y1=!0,dispatchEvent(t),y1=!1)})),addEventListener("x-storagemutated-1",(function(e){var t=e.detail;y1||m1(t)})));var y1=!1;if("undefined"!=typeof BroadcastChannel){var g1=new BroadcastChannel("x-storagemutated-1");"function"==typeof g1.unref&&g1.unref(),E0("storagemutated",(function(e){y1||g1.postMessage(e)})),g1.onmessage=function(e){e.data&&m1(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){E0("storagemutated",(function(e){try{y1||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&(0,a.Z)(self.clients.matchAll({includeUncontrolled:!0})).forEach((function(t){return t.postMessage({type:"x-storagemutated-1",changedParts:e})})))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(function(e){if("x-storagemutated-1"===e.key){var t=JSON.parse(e.newValue);t&&m1(t.changedParts)}}));var _1=self.document&&navigator.serviceWorker;_1&&_1.addEventListener("message",(function(e){var t=e.data;t&&"x-storagemutated-1"===t.type&&m1(t.changedParts)}))}n$.rejectionMapper=function(e,t){if(!e||e instanceof vJ||e instanceof TypeError||e instanceof SyntaxError||!e.name||!xJ[e.name])return e;var n=new xJ[e.name](t||e.message,e);return"stack"in e&&NQ(n,"stack",{get:function(){return this.inner.stack}}),n},oJ(sJ,V$);var T1=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this,"ModelDatabase")).models=void 0,e.version(2).stores({models:"id, file"}),e}return(0,o.Z)(n)}(h1),E1=function(){function e(){(0,s.Z)(this,e),this.db=new T1}return(0,o.Z)(e,[{key:"getModels",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i,a,s,o,u;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.open();case 2:n=Mn(),r=EQ(n),i=[],a=b(t.models),e.prev=6,a.s();case 8:if((s=a.n()).done){e.next=16;break}return o=s.value,e.next=12,this.getModelURL(r,o.id);case 12:u=e.sent,i.push(u);case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),a.e(e.t0);case 21:return e.prev=21,a.f(),e.finish(21);case 24:return this.db.close(),e.abrupt("return",i);case 26:case"end":return e.stop()}}),e,this,[[6,18,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"clearCache",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.open();case 2:n=b(t.models);try{for(n.s();!(r=n.n()).done;)i=r.value,localStorage.removeItem(i.id)}catch(a){n.e(a)}finally{n.f()}return e.next=6,this.db.delete();case 6:this.db=new T1,this.db.close();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteModelsCache",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.open();case 2:n=b(t),e.prev=3,n.s();case 5:if((r=n.n()).done){e.next=13;break}if(i=r.value,!this.isModelCached(i)){e.next=11;break}return localStorage.removeItem(i),e.next=11,this.db.models.where("id").equals(i).delete();case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:this.db.close();case 22:case"end":return e.stop()}}),e,this,[[3,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getModelURL",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isModelCached(n)){e.next=4;break}return e.abrupt("return",this.getModelFromLocalCache(n));case 4:return e.abrupt("return",this.getModelFromFirebase(t,n));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getModelFromFirebase",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=TQ(t,n),e.next=3,gQ(r);case 3:return i=e.sent,e.next=6,this.cacheModel(n,i);case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getModelFromLocalCache",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.models.where("id").equals(t).toArray();case 2:return n=e.sent,r=n[0].file,e.abrupt("return",URL.createObjectURL(r));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isModelCached",value:function(e){return null!==localStorage.getItem(e)}},{key:"cacheModel",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=performance.now().toString(),localStorage.setItem(t,r),e.next=4,fetch(n);case 4:return i=e.sent,e.next=7,i.blob();case 7:return a=e.sent,e.next=10,this.db.models.add({id:t,file:a});case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function x1(e,t){this.v=e,this.k=t}function b1(e){var t={},n=!1;function r(t,r){return n=!0,{done:!1,value:new x1(r=new Promise((function(n){n(e[t](r))})),1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function I1(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new w1(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function w1(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return w1=function(e){this.s=e,this.n=e.next},w1.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new w1(e)}function k1(e){return new x1(e,0)}function S1(e){var t,n;function r(t,n){try{var a=e[t](n),s=a.value,o=s instanceof x1;Promise.resolve(o?s.v:s).then((function(n){if(o){var u="return"===t?"return":"next";if(!s.k||n.done)return r(u,n);n=e[u](n).value}i(a.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(u){i("throw",u)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(a,s){var o={key:e,arg:i,resolve:a,reject:s,next:null};n?n=n.next=o:(t=n=o,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function R1(e){return function(){return new S1(e.apply(this,arguments))}}S1.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},S1.prototype.next=function(e){return this._invoke("next",e)},S1.prototype.throw=function(e){return this._invoke("throw",e)},S1.prototype.return=function(e){return this._invoke("return",e)},"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value:function(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value:function(e,t,n){var r=Number(0xffffffffn&t),i=Number(t>>32n);this.setUint32(e+(n?0:4),r,n),this.setUint32(e+(n?4:0),i,n)}});var C1=function(e){return new DataView(new ArrayBuffer(e))},D1=function(e){return new Uint8Array(e.buffer||e)},A1=function(e){return(new TextEncoder).encode(String(e))},O1=function(e){return Math.min(4294967295,Number(e))},N1=function(e){return Math.min(65535,Number(e))};function M1(e,t){if(void 0===t||t instanceof Date||(t=new Date(t)),e instanceof File)return{isFile:1,t:t||new Date(e.lastModified),i:e.stream()};if(e instanceof Response)return{isFile:1,t:t||new Date(e.headers.get("Last-Modified")||Date.now()),i:e.body};if(void 0===t)t=new Date;else if(isNaN(t))throw new Error("Invalid modification date.");if(void 0===e)return{isFile:0,t:t};if("string"==typeof e)return{isFile:1,t:t,i:A1(e)};if(e instanceof Blob)return{isFile:1,t:t,i:e.stream()};if(e instanceof Uint8Array||e instanceof ReadableStream)return{isFile:1,t:t,i:e};if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return{isFile:1,t:t,i:D1(e)};if(Symbol.asyncIterator in e)return{isFile:1,t:t,i:P1(e)};throw new TypeError("Unsupported input format.")}function P1(e){var t="next"in e?e:e[Symbol.asyncIterator]();return new ReadableStream({pull:function(e){return(0,ht.Z)((0,ct.Z)().mark((function n(){var r,i,a;return(0,ct.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=0;case 1:if(!(e.desiredSize>r)){n.next=12;break}return n.next=4,t.next();case 4:if((i=n.sent).value){n.next=8;break}return e.close(),n.abrupt("break",12);case 8:a=F1(i.value),e.enqueue(a),r+=a.byteLength;case 10:n.next=1;break;case 12:case"end":return n.stop()}}),n)})))()}})}function F1(e){return"string"==typeof e?A1(e):e instanceof Uint8Array?e:D1(e)}function L1(e,t,n){if(void 0===t||t instanceof Uint8Array||(t=A1(t)),e instanceof File)return{o:Z1(t||A1(e.name)),A:BigInt(e.size)};if(e instanceof Response){var r=e.headers.get("content-disposition"),i=r&&r.match(/;\s*filename\*?=["']?(.*?)["']?$/i),a=i&&i[1]||e.url&&new URL(e.url).pathname.split("/").findLast(Boolean),s=a&&decodeURIComponent(a),o=n||+e.headers.get("content-length");return{o:Z1(t||A1(s)),A:BigInt(o)}}return t=Z1(t,void 0!==e||void 0!==n),"string"==typeof e?{o:t,A:BigInt(A1(e).length)}:e instanceof Blob?{o:t,A:BigInt(e.size)}:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?{o:t,A:BigInt(e.byteLength)}:{o:t,A:U1(e,n)}}function U1(e,t){return t>-1?BigInt(t):e?void 0:0n}function Z1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e||e.every((function(e){return 47===e})))throw new Error("The file must have a name.");if(t)for(;47===e[e.length-1];)e=e.subarray(0,-1);else 47!==e[e.length-1]&&(e=new Uint8Array([].concat((0,a.Z)(e),[47])));return e}var B1=new WebAssembly.Instance(new WebAssembly.Module(Uint8Array.from(atob("AGFzbQEAAAABCgJgAABgAn9/AXwDAwIAAQUDAQACBwkCAW0CAAFjAAEIAQAKlQECSQEDfwNAIAEhAEEAIQIDQCAAQQF2IABBAXFBoIbi7X5scyEAIAJBAWoiAkEIRw0ACyABQQJ0IAA2AgAgAUEBaiIBQYACRw0ACwtJAQF/IAFBf3MhAUGAgAQhAkGAgAQgAGohAANAIAFB/wFxIAItAABzQQJ0KAIAIAFBCHZzIQEgAkEBaiICIABJDQALIAFBf3O4Cw"),(function(e){return e.charCodeAt(0)})))),z1=B1.exports,G1=z1.c,H1=z1.m,j1=D1(H1).subarray(65536);function V1(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=b((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>65536)){e.next=6;break}return e.next=3,t.subarray(0,65536);case 3:t=t.subarray(65536);case 4:e.next=0;break;case 6:if(e.t0=t.length,!e.t0){e.next=10;break}return e.next=10,t;case 10:case"end":return e.stop()}}),e)}))(e));try{for(r.s();!(t=r.n()).done;){var i=t.value;j1.set(i),n=G1(i.length,n)}}catch(a){r.e(a)}finally{r.f()}return n}function W1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.getSeconds()>>1|e.getMinutes()<<5|e.getHours()<<11,i=e.getDate()|e.getMonth()+1<<5|e.getFullYear()-1980<<9;t.setUint16(n,r,1),t.setUint16(n+2,i,1)}function Y1(e){var t=C1(30);return t.setUint32(0,1347093252),t.setUint32(4,754976768),W1(e.t,t,10),t.setUint16(26,e.o.length,1),D1(t)}function q1(e){return X1.apply(this,arguments)}function X1(){return X1=R1((0,ct.Z)().mark((function e(t){var n,r,i,a;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.i,e.t0="then"in n,!e.t0){e.next=6;break}return e.next=5,k1(n);case 5:n=e.sent;case 6:if(!(n instanceof Uint8Array)){e.next=13;break}return e.next=9,n;case 9:t.u=V1(n,0),t.A=BigInt(n.length),e.next=28;break;case 13:t.A=0n,r=n.getReader();case 15:return e.next=17,k1(r.read());case 17:if(i=e.sent,a=i.value,!i.done){e.next=22;break}return e.abrupt("break",28);case 22:return t.u=V1(a,t.u),t.A+=BigInt(a.length),e.next=26,a;case 26:e.next=15;break;case 28:case"end":return e.stop()}}),e)}))),X1.apply(this,arguments)}function K1(e,t){var n=C1(16+(t?8:0));return n.setUint32(0,1347094280),n.setUint32(4,e.isFile?e.u:0,1),t?(n.setBigUint64(8,e.A,1),n.setBigUint64(16,e.A,1)):(n.setUint32(8,O1(e.A),1),n.setUint32(12,O1(e.A),1)),D1(n)}function Q1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=C1(46);return r.setUint32(0,1347092738),r.setUint32(4,755182848),r.setUint16(8,2048),W1(e.t,r,12),r.setUint32(16,e.isFile?e.u:0,1),r.setUint32(20,O1(e.A),1),r.setUint32(24,O1(e.A),1),r.setUint16(28,e.o.length,1),r.setUint16(30,n,1),r.setUint16(40,e.isFile?33204:16893,1),r.setUint32(42,O1(t),1),D1(r)}function J1(e,t,n){var r=C1(n);return r.setUint16(0,1,1),r.setUint16(2,n-4,1),16&n&&(r.setBigUint64(4,e.A,1),r.setBigUint64(12,e.A,1)),r.setBigUint64(n-8,t,1),D1(r)}function $1(e){return e instanceof File||e instanceof Response?[[e],[e]]:[[e.input,e.name,e.size],[e.input,e.lastModified]]}var e2=function(e){return function(e){var t,n=BigInt(22),r=0n,i=0,a=b(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(!s.o)throw new Error("Every file must have a non-empty name.");if(void 0===s.A)throw new Error('Missing size for file "'.concat((new TextDecoder).decode(s.o),'".'));var o=s.A>=0xffffffffn,u=r>=0xffffffffn;r+=BigInt(46+s.o.length+(o&&8))+s.A,n+=BigInt(s.o.length+46+(12*u|28*o)),i||(i=o)}}catch(l){a.e(l)}finally{a.f()}return(i||r>=0xffffffffn)&&(n+=BigInt(76)),n+r}((0,ct.Z)().mark((function e(t){var n,r,i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=b(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,L1.apply(void 0,(0,a.Z)($1(i)[0]));case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))(e))};function t2(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={"Content-Type":"application/zip","Content-Disposition":"attachment"};return("bigint"==typeof t.length||Number.isInteger(t.length))&&t.length>0&&(n["Content-Length"]=String(t.length)),t.metadata&&(n["Content-Length"]=String(e2(t.metadata))),new Response(function(e){return P1(function(){var e=R1((0,ct.Z)().mark((function e(t){var n,r,i,a,s,o,u,l,c,h,p,f,d,v,m,y,g,_;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=0n,i=0n,a=0,s=!1,o=!1,e.prev=4,l=I1(t);case 6:return e.next=8,k1(l.next());case 8:if(!(s=!(c=e.sent).done)){e.next=30;break}return h=c.value,e.next=12,Y1(h);case 12:return e.next=14,h.o;case 14:if(e.t0=h.isFile,!e.t0){e.next=17;break}return e.delegateYield(b1(I1(q1(h))),"t1",17);case 17:return p=h.A>=0xffffffffn,f=12*(r>=0xffffffffn)|28*p,e.next=20,K1(h,p);case 20:n.push(Q1(h,r,f)),n.push(h.o),f&&n.push(J1(h,r,f)),p&&(r+=8n),i++,r+=BigInt(46+h.o.length)+h.A,a||(a=p);case 27:s=!1,e.next=6;break;case 30:e.next=36;break;case 32:e.prev=32,e.t2=e.catch(4),o=!0,u=e.t2;case 36:if(e.prev=36,e.prev=37,!s||null==l.return){e.next=41;break}return e.next=41,k1(l.return());case 41:if(e.prev=41,!o){e.next=44;break}throw u;case 44:return e.finish(41);case 45:return e.finish(36);case 46:d=0n,v=0,m=n;case 48:if(!(v<m.length)){e.next=56;break}return y=m[v],e.next=52,y;case 52:d+=BigInt(y.length);case 53:v++,e.next=48;break;case 56:if(!(a||r>=0xffffffffn)){e.next=70;break}return(g=C1(76)).setUint32(0,1347094022),g.setBigUint64(4,BigInt(44),1),g.setUint32(12,755182848),g.setBigUint64(24,i,1),g.setBigUint64(32,i,1),g.setBigUint64(40,d,1),g.setBigUint64(48,r,1),g.setUint32(56,1347094023),g.setBigUint64(64,r+d,1),g.setUint32(72,1,1),e.next=70,D1(g);case 70:return(_=C1(22)).setUint32(0,1347093766),_.setUint16(8,N1(i),1),_.setUint16(10,N1(i),1),_.setUint32(12,O1(d),1),_.setUint32(16,O1(r),1),e.next=78,D1(_);case 78:case"end":return e.stop()}}),e,null,[[4,32,36,46],[37,,41,45]])})));return function(t){return e.apply(this,arguments)}}()(function(){var e=R1((0,ct.Z)().mark((function e(t){var n,r,s,o,u,l,c,h,p,f;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,r=!1,e.prev=2,o=I1(t);case 4:return e.next=6,k1(o.next());case 6:if(!(n=!(u=e.sent).done)){e.next=14;break}return l=u.value,c=$1(l),h=(0,i.Z)(c,2),p=h[0],f=h[1],e.next=11,Object.assign(M1.apply(void 0,(0,a.Z)(f)),L1.apply(void 0,(0,a.Z)(p)));case 11:n=!1,e.next=4;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),r=!0,s=e.t0;case 20:if(e.prev=20,e.prev=21,!n||null==o.return){e.next=25;break}return e.next=25,k1(o.return());case 25:if(e.prev=25,!r){e.next=28;break}throw s;case 28:return e.finish(25);case 29:return e.finish(20);case 30:case"end":return e.stop()}}),e,null,[[2,16,20,30],[21,,25,29]])})));return function(t){return e.apply(this,arguments)}}()(e)))}(e),{headers:n})}var n2,r2=n(1018),i2=function(){function e(t,n,r){var i=this;(0,s.Z)(this,e),this.database=new E1,this.components=void 0,this.fragments=void 0,this.floorplans=[],this.whiteMaterial=new tp({color:"white"}),this.properties={},this.sceneEvents=[],this.events=void 0,this.setupEvents=function(){i.sceneEvents=[{name:"mouseup",action:i.updateCulling},{name:"wheel",action:i.updateCulling},{name:"mousemove",action:i.preselect},{name:"click",action:i.select},{name:"keydown",action:i.createClippingPlane},{name:"keydown",action:i.createDimension},{name:"keydown",action:i.deleteClippingPlaneOrDimension}],i.toggleEvents(!0)},this.createClippingPlane=function(e){if("KeyP"===e.code){var t=i.getClipper();t&&t.create()}},this.createDimension=function(e){if("KeyD"===e.code){var t=i.getDimensions();t&&t.create()}},this.deleteClippingPlaneOrDimension=function(e){"Delete"===e.code&&(i.getDimensions().delete(),i.getClipper().delete())},this.updateCulling=function(){i.fragments.culler.needsUpdate=!0},this.preselect=function(){i.fragments.highlighter.highlight("preselection")},this.select=function(){var e=i.fragments.highlighter.highlight("selection");if(e){var t=i.properties[e.fragment.id][e.id];if(t){var n=[];for(var r in t){var a=t[r];a||(a="Unknown"),a.value&&(a=a.value),"number"===typeof a&&(a=a.toString()),n.push({name:r,value:a})}return i.events.trigger({type:"UPDATE_PROPERTIES",payload:n})}}i.events.trigger({type:"UPDATE_PROPERTIES",payload:[]})},this.events=r,this.components=new Ib;var a=new Gx(this.components),o=a.get();o.background=null;var u=new u_;u.position.set(5,10,3),u.intensity=.5,o.add(u);var l=new l_;l.intensity=.5,o.add(l),this.components.scene=a,this.components.renderer=new zx(this.components,t);var c=new vX(this.components);this.components.camera=c,this.components.raycaster=new Lx(this.components),this.components.init();var h=new Ux(this.components);this.components.tools.add(h);var p=new ZX(this.components,LX);this.components.tools.add(p);var f=new EX({color:0,linewidth:.001});p.styles.create("thin_lines",[],f);var d=new JX(p,c);this.components.tools.add(d);var v=new Zx(this.components);this.components.tools.add(v),this.fragments=new cX(this.components),this.components.tools.add(this.fragments),this.fragments.highlighter.active=!0;var m=new tp({color:1668818}),y=new tp({color:1668818,opacity:.5,transparent:!0});this.fragments.highlighter.add("selection",[m]),this.fragments.highlighter.add("preselection",[y]),this.loadAllModels(n),this.fragments.exploder.groupName="floor",this.setupEvents()}return(0,o.Z)(e,[{key:"container",get:function(){return this.components.renderer.get().domElement.parentElement}},{key:"dispose",value:function(){this.components.dispose(),this.properties={},this.toggleEvents(!1),this.whiteMaterial.dispose(),this.components=null,this.fragments=null}},{key:"toggleEvents",value:function(e){var t,n=b(this.sceneEvents);try{for(n.s();!(t=n.n()).done;){var r=t.value;e?window.addEventListener(r.name,r.action):window.removeEventListener(r.name,r.action)}}catch(i){n.e(i)}finally{n.f()}}},{key:"explode",value:function(e){var t=this.fragments.exploder;e?t.explode():t.reset()}},{key:"toggleClippingPlanes",value:function(e){var t=this.getClipper();t&&(t.enabled=e)}},{key:"toggleDimensions",value:function(e){var t=this.getDimensions();t&&(t.enabled=e)}},{key:"toggleFloorplan",value:function(e,t){var n=this.getFloorNav();if(this.floorplans.length)if(e&&t){this.toggleGrid(!1),this.toggleEdges(!0);this.floorplans[0];n.goTo(t.id),this.fragments.materials.apply(this.whiteMaterial)}else this.toggleGrid(!0),this.toggleEdges(!1),this.fragments.materials.reset(),n.exitPlanView()}},{key:"getClipper",value:function(){return this.components.tools.get("EdgesClipper")}},{key:"getDimensions",value:function(){return this.components.tools.get("SimpleDimensions")}},{key:"convertIfcToFragments",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i,a;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new cX(this.components)).ifcLoader.settings.optionalCategories.length=0,n.ifcLoader.settings.wasm={path:"../../",absolute:!1},n.ifcLoader.settings.webIfc={COORDINATE_TO_ORIGIN:!0,USE_FAST_BOOLS:!0},r=URL.createObjectURL(t),e.next=7,n.ifcLoader.load(r);case 7:return i=e.sent,e.next=10,this.serializeFragments(i);case 10:return a=e.sent,n.dispose(),n=null,e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleGrid",value:function(e){this.components.tools.get("SimpleGrid").get().visible=e}},{key:"getFloorNav",value:function(){return this.components.tools.get("PlanNavigator")}},{key:"toggleEdges",value:function(e){for(var t=Object.values(this.fragments.edges.edgesList),n=this.components.scene.get(),r=0,i=t;r<i.length;r++){var a=i[r];e?n.add(a):a.removeFromParent()}}},{key:"serializeFragments",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i,a,s;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=b(t.fragments),e.prev=2,r.s();case 4:if((i=r.n()).done){e.next=12;break}return a=i.value,e.next=8,a.export();case 8:s=e.sent,n.push(s.geometry,s.data);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:return n.push(new File([JSON.stringify(t.properties)],"properties.json")),n.push(new File([JSON.stringify(t.levelRelationships)],"levels-relationship.json")),n.push(new File([JSON.stringify(t.itemTypes)],"model-types.json")),n.push(new File([JSON.stringify(t.allTypes)],"all-types.json")),n.push(new File([JSON.stringify(t.floorsProperties)],"levels-properties.json")),n.push(new File([JSON.stringify(t.coordinationMatrix)],"coordination-matrix.json")),n.push(new File([JSON.stringify(t.expressIDFragmentIDMap)],"express-fragment-map.json")),e.abrupt("return",t2(n).blob());case 28:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"loadAllModels",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i,a,s,o,u,l,c,h,p,f,d,v,m,y,g,_,T,E,x,I,w,k,S,R,C,D,A,O,N,M,P,F,L,U,Z,B,z,G;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.getModels(t);case 2:n=e.sent,r=b(n),e.prev=4,r.s();case 6:if((i=r.n()).done){e.next=92;break}return a=i.value,e.next=10,(0,r2.Ri)(a);case 10:return s=e.sent,o=s.entries,u=Object.keys(o),e.next=15,o["properties.json"].json();case 15:return l=e.sent,e.next=18,o["all-types.json"].json();case 18:return c=e.sent,e.next=21,o["model-types.json"].json();case 21:return h=e.sent,e.next=24,o["levels-properties.json"].json();case 24:return p=e.sent,e.next=27,o["levels-relationship.json"].json();case 27:if(f=e.sent,d=1.5,v=this.getFloorNav(),0!==this.floorplans.length){e.next=51;break}m=b(p),e.prev=32,m.s();case 34:if((y=m.n()).done){e.next=42;break}return g=y.value,_=g.SceneHeight+d,this.floorplans.push({id:g.expressID,name:g.Name.value}),e.next=40,v.create({id:g.expressID,ortho:!0,normal:new Oc(0,-1,0),point:new Oc(0,_,0)});case 40:e.next=34;break;case 42:e.next=47;break;case 44:e.prev=44,e.t0=e.catch(32),m.e(e.t0);case 47:return e.prev=47,m.f(),e.finish(47);case 50:this.events.trigger({type:"UPDATE_FLOORPLANS",payload:this.floorplans});case 51:T=0;case 52:if(!(T<u.length)){e.next=88;break}if(u[T].includes(".glb")){e.next=56;break}return e.abrupt("continue",85);case 56:return E=u[T],e.next=59,o[E].blob();case 59:return x=e.sent,I=URL.createObjectURL(x),w=E.substring(0,E.indexOf(".glb"))+".json",e.next=64,o[w].blob();case 64:return k=e.sent,S=URL.createObjectURL(k),e.next=68,this.fragments.load(I,S);case 68:return R=e.sent,this.properties[R.id]=l,e.next=72,o[w].json();case 72:C=e.sent,this.fragments.edges.generate(R).removeFromParent(),D=this.getClipper().styles.get(),D.thin_lines.meshes.push(R.mesh),A={category:{},floor:{}},O={},N=b(p);try{for(N.s();!(M=N.n()).done;)P=M.value,O[P.expressID]=P.Name.value}catch(H){N.e(H)}finally{N.f()}F=b(C.ids);try{for(F.s();!(L=F.n()).done;)U=L.value,Z=h[U],B=c[Z],A.category[B]||(A.category[B]=[]),A.category[B].push(U),z=f[U],G=O[z],A.floor[G]||(A.floor[G]=[]),A.floor[G].push(U)}catch(H){F.e(H)}finally{F.f()}this.fragments.groups.add(R.id,A);case 85:T++,e.next=52;break;case 88:this.fragments.culler.needsUpdate=!0,this.fragments.highlighter.update();case 90:e.next=6;break;case 92:e.next=97;break;case 94:e.prev=94,e.t1=e.catch(4),r.e(e.t1);case 97:return e.prev=97,r.f(),e.finish(97);case 100:case"end":return e.stop()}}),e,this,[[4,94,97,100],[32,44,47,50]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),a2={viewer:null,start:function(e,t,n){this.viewer||(this.viewer=new i2(e,t,n))},remove:function(){this.viewer&&(console.log("Viewer removed"),this.viewer.dispose(),this.viewer=null)},convertIfcToFragments:function(e){var t=this;return(0,ht.Z)((0,ct.Z)().mark((function n(){return(0,ct.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.viewer){n.next=2;break}throw new Error("Viewer not active");case 2:return n.abrupt("return",t.viewer.convertIfcToFragments(e));case 3:case"end":return n.stop()}}),n)})))()},deleteModels:function(e){var t=this;return(0,ht.Z)((0,ct.Z)().mark((function n(){return(0,ct.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.viewer){n.next=3;break}return n.next=3,t.viewer.database.deleteModelsCache(e);case 3:case"end":return n.stop()}}),n)})))()},refreshModels:function(e,t){var n=this;return(0,ht.Z)((0,ct.Z)().mark((function r(){var i;return(0,ct.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n.viewer&&(i=n.viewer.container,n.viewer.dispose(),n.viewer=null,n.viewer=new i2(i,e,t));case 1:case"end":return r.stop()}}),r)})))()},explode:function(e){this.viewer&&this.viewer.explode(e)},toggleClippingPlanes:function(e){this.viewer&&this.viewer.toggleClippingPlanes(e)},toggleDimensions:function(e){this.viewer&&this.viewer.toggleDimensions(e)},toggleFloorplan:function(e,t){this.viewer&&this.viewer.toggleFloorplan(e,t)}},s2="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},o2={},u2=u2||{},l2=s2||self;function c2(){}function h2(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function p2(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var f2="closure_uid_"+(1e9*Math.random()>>>0),d2=0;function v2(e,t,n){return e.call.apply(e.bind,arguments)}function m2(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function y2(e,t,n){return(y2=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v2:m2).apply(null,arguments)}function g2(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function _2(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function T2(){this.s=this.s,this.o=this.o}T2.prototype.s=!1,T2.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,f2)&&e[f2]||(e[f2]=++d2)}(this)},T2.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var E2=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function x2(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function b2(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(h2(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var s=0;s<a;s++)e[i+s]=r[s]}else e.push(r)}}function I2(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}I2.prototype.h=function(){this.defaultPrevented=!0};var w2=function(){if(!l2.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{l2.addEventListener("test",c2,t),l2.removeEventListener("test",c2,t)}catch(MQ){}return e}();function k2(e){return/^[\s\xa0]*$/.test(e)}var S2=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function R2(e,t){return e<t?-1:e>t?1:0}function C2(){var e=l2.navigator;return e&&(e=e.userAgent)?e:""}function D2(e){return-1!=C2().indexOf(e)}function A2(e){return A2[" "](e),e}A2[" "]=c2;var O2,N2=D2("Opera"),M2=D2("Trident")||D2("MSIE"),P2=D2("Edge"),F2=P2||M2,L2=D2("Gecko")&&!(-1!=C2().toLowerCase().indexOf("webkit")&&!D2("Edge"))&&!(D2("Trident")||D2("MSIE"))&&!D2("Edge"),U2=-1!=C2().toLowerCase().indexOf("webkit")&&!D2("Edge");function Z2(){var e=l2.document;return e?e.documentMode:void 0}e:{var B2="",z2=function(){var e=C2();return L2?/rv:([^\);]+)(\)|;)/.exec(e):P2?/Edge\/([\d\.]+)/.exec(e):M2?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):U2?/WebKit\/(\S+)/.exec(e):N2?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(z2&&(B2=z2?z2[1]:""),M2){var G2=Z2();if(null!=G2&&G2>parseFloat(B2)){O2=String(G2);break e}}O2=B2}var H2,j2={};function V2(){return function(e){var t=j2;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=S2(String(O2)).split("."),n=S2("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",s=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=R2(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||R2(0==a[2].length,0==s[2].length)||R2(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(l2.document&&M2){var W2=Z2();H2=W2||(parseInt(O2,10)||void 0)}else H2=void 0;var Y2=H2;function q2(e,t){if(I2.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(L2){e:{try{A2(t.nodeName);var i=!0;break e}catch(LQ){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:X2[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&q2.X.h.call(this)}}_2(q2,I2);var X2={2:"touch",3:"pen",4:"mouse"};q2.prototype.h=function(){q2.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var K2="closure_listenable_"+(1e6*Math.random()|0),Q2=0;function J2(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Q2,this.ba=this.ea=!1}function $2(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function e3(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function t3(e){var t={};for(var n in e)t[n]=e[n];return t}var n3="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function r3(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<n3.length;a++)n=n3[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function i3(e){this.src=e,this.g={},this.h=0}function a3(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=E2(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&($2(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function s3(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}i3.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var s=s3(e,t,r,i);return-1<s?(t=e[s],n||(t.ea=!1)):((t=new J2(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var o3="closure_lm_"+(1e6*Math.random()|0),u3={};function l3(e,t,n,r,i){if(r&&r.once)return h3(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)l3(e,t[a],n,r,i);return null}return n=g3(n),e&&e[K2]?e.N(t,n,p2(r)?!!r.capture:!!r,i):c3(e,t,n,!1,r,i)}function c3(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var s=p2(i)?!!i.capture:!!i,o=m3(e);if(o||(e[o3]=o=new i3(e)),(n=o.add(t,n,r,s,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=v3;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)w2||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(d3(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function h3(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)h3(e,t[a],n,r,i);return null}return n=g3(n),e&&e[K2]?e.O(t,n,p2(r)?!!r.capture:!!r,i):c3(e,t,n,!0,r,i)}function p3(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)p3(e,t[a],n,r,i);else r=p2(r)?!!r.capture:!!r,n=g3(n),e&&e[K2]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=s3(a=e.g[t],n,r,i))&&($2(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=m3(e))&&(t=e.g[t.toString()],e=-1,t&&(e=s3(t,n,r,i)),(n=-1<e?t[e]:null)&&f3(n))}function f3(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[K2])a3(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(d3(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=m3(t))?(a3(n,e),0==n.h&&(n.src=null,t[o3]=null)):$2(e)}}}function d3(e){return e in u3?u3[e]:u3[e]="on"+e}function v3(e,t){if(e.ba)e=!0;else{t=new q2(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&f3(e),e=n.call(r,t)}return e}function m3(e){return(e=e[o3])instanceof i3?e:null}var y3="__closure_events_fn_"+(1e9*Math.random()>>>0);function g3(e){return"function"===typeof e?e:(e[y3]||(e[y3]=function(t){return e.handleEvent(t)}),e[y3])}function _3(){T2.call(this),this.i=new i3(this),this.P=this,this.I=null}function T3(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new I2(t,e);else if(t instanceof I2)t.target=t.target||e;else{var i=t;r3(t=new I2(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var s=t.g=n[a];i=E3(s,r,!0,t)&&i}if(i=E3(s=t.g=e,r,!0,t)&&i,i=E3(s,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=E3(s=t.g=n[a],r,!1,t)&&i}function E3(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var s=t[a];if(s&&!s.ba&&s.capture==n){var o=s.listener,u=s.ha||s.src;s.ea&&a3(e.i,s),i=!1!==o.call(u,r)&&i}}return i&&!r.defaultPrevented}_2(_3,T2),_3.prototype[K2]=!0,_3.prototype.removeEventListener=function(e,t,n,r){p3(this,e,t,n,r)},_3.prototype.M=function(){if(_3.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$2(n[r]);delete t.g[e],t.h--}}this.I=null},_3.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},_3.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var x3=l2.JSON.stringify;function b3(){var e=A3,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var I3,w3=function(){function e(){(0,s.Z)(this,e),this.h=this.g=null}return(0,o.Z)(e,[{key:"add",value:function(e,t){var n=k3.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),k3=new(function(){function e(t,n){(0,s.Z)(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return(0,o.Z)(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new S3}),(function(e){return e.reset()})),S3=function(){function e(){(0,s.Z)(this,e),this.next=this.g=this.h=null}return(0,o.Z)(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function R3(e){l2.setTimeout((function(){throw e}),0)}function C3(e,t){I3||function(){var e=l2.Promise.resolve(void 0);I3=function(){e.then(O3)}}(),D3||(I3(),D3=!0),A3.add(e,t)}var D3=!1,A3=new w3;function O3(){for(var e;e=b3();){try{e.h.call(e.g)}catch(MQ){R3(MQ)}var t=k3;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}D3=!1}function N3(e,t){_3.call(this),this.h=e||1,this.g=t||l2,this.j=y2(this.lb,this),this.l=Date.now()}function M3(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function P3(e,t,n){if("function"===typeof e)n&&(e=y2(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=y2(e.handleEvent,e)}return 2147483647<Number(t)?-1:l2.setTimeout(e,t||0)}function F3(e){e.g=P3((function(){e.g=null,e.i&&(e.i=!1,F3(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}_2(N3,_3),(n2=N3.prototype).ca=!1,n2.R=null,n2.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),T3(this,"tick"),this.ca&&(M3(this),this.start()))}},n2.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},n2.M=function(){N3.X.M.call(this),M3(this),delete this.g};var L3=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return(0,o.Z)(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:F3(this)}},{key:"M",value:function(){lt(c(n.prototype),"M",this).call(this),this.g&&(l2.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(T2);function U3(e){T2.call(this),this.h=e,this.g={}}_2(U3,T2);var Z3=[];function B3(e,t,n,r){Array.isArray(n)||(n&&(Z3[0]=n.toString()),n=Z3);for(var i=0;i<n.length;i++){var a=l3(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function z3(e){e3(e.g,(function(e,t){this.g.hasOwnProperty(t)&&f3(e)}),e),e.g={}}function G3(){this.g=!0}function H3(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var s=1;s<i.length;s++)i[s]=""}}}return x3(n)}catch(kQ){return t}}(e,n)+(r?" "+r:"")}))}U3.prototype.M=function(){U3.X.M.call(this),z3(this)},U3.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},G3.prototype.Aa=function(){this.g=!1},G3.prototype.info=function(){};var j3={},V3=null;function W3(){return V3=V3||new _3}function Y3(e){I2.call(this,j3.Pa,e)}function q3(e){var t=W3();T3(t,new Y3(t))}function X3(e,t){I2.call(this,j3.STAT_EVENT,e),this.stat=t}function K3(e){var t=W3();T3(t,new X3(t,e))}function Q3(e,t){I2.call(this,j3.Qa,e),this.size=t}function J3(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return l2.setTimeout((function(){e()}),t)}j3.Pa="serverreachability",_2(Y3,I2),j3.STAT_EVENT="statevent",_2(X3,I2),j3.Qa="timingevent",_2(Q3,I2);var $3={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},e4={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function t4(){}function n4(e){return e.h||(e.h=e.i())}function r4(){}t4.prototype.h=null;var i4,a4={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function s4(){I2.call(this,"d")}function o4(){I2.call(this,"c")}function u4(){}function l4(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new U3(this),this.O=h4,e=F2?125:void 0,this.T=new N3(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new c4}function c4(){this.i=null,this.g="",this.h=!1}_2(s4,I2),_2(o4,I2),_2(u4,t4),u4.prototype.g=function(){return new XMLHttpRequest},u4.prototype.i=function(){return{}},i4=new u4;var h4=45e3,p4={},f4={};function d4(e,t,n){e.K=1,e.v=N4(R4(t)),e.s=n,e.P=!0,v4(e,null)}function v4(e,t){e.F=Date.now(),_4(e),e.A=R4(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),W4(n.i,"t",r),e.C=0,n=e.l.H,e.h=new c4,e.g=W5(e.l,n?t:null,!e.s),0<e.N&&(e.L=new L3(y2(e.La,e,e.g),e.N)),B3(e.S,e.g,"readystatechange",e.ib),t=e.H?t3(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),q3(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var s="",o=a.split("&"),u=0;u<o.length;u++){var l=o[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");s=2<=h.length&&"type"==h[1]?s+(c+"=")+l+"&":s+(c+"=redacted&")}}else s=null;else s=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function m4(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function y4(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=g4(e,n))==f4){4==t&&(e.o=4,K3(14),i=!1),H3(e.j,e.m,null,"[Incomplete Response]");break}if(r==p4){e.o=4,K3(15),H3(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}H3(e.j,e.m,r,null),I4(e,r)}m4(e)&&r!=f4&&r!=p4&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,K3(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),U5(t),t.K=!0,K3(11))):(H3(e.j,e.m,n,"[Invalid Chunked Response]"),b4(e),x4(e))}function g4(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?f4:(n=Number(t.substring(n,r)),isNaN(n)?p4:(r+=1)+n>t.length?f4:(t=t.substr(r,n),e.C=r+n,t))}function _4(e){e.V=Date.now()+e.O,T4(e,e.O)}function T4(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=J3(y2(e.gb,e),t)}function E4(e){e.B&&(l2.clearTimeout(e.B),e.B=null)}function x4(e){0==e.l.G||e.I||z5(e.l,e)}function b4(e){E4(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,M3(e.T),z3(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function I4(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||$4(n.h,e)))if(!e.J&&$4(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;B5(n),D5(n)}L5(n),K3(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=J3(y2(n.cb,n),6e3));if(1>=J4(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else H5(n,11)}else if((e.J||n.g==e)&&B5(n),!k2(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var s=a[3];null!=s&&(n.ma=s,n.j.info("VER="+n.ma));var o=a[4];null!=o&&(n.Ca=o,n.j.info("SVER="+n.Ca));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=r.h;h.g||-1==c.indexOf("spdy")&&-1==c.indexOf("quic")&&-1==c.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(e5(h,h.h),h.h=null))}if(r.D){var p=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;p&&(r.za=p,O4(r.F,r.D,p))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var f=e;if((r=n).sa=V5(r,r.H?r.ka:null,r.V),f.J){t5(r.h,f);var d=f,v=r.J;v&&d.setTimeout(v),d.B&&(E4(d),_4(d)),r.g=f}else F5(r);0<n.i.length&&O5(n)}else"stop"!=a[0]&&"close"!=a[0]||H5(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?H5(n,7):C5(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}q3()}catch(a){}}function w4(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(h2(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(h2(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(h2(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(n2=l4.prototype).setTimeout=function(e){this.O=e},n2.ib=function(e){e=e.target;var t=this.L;t&&3==b5(e)?t.l():this.La(e)},n2.La=function(e){try{if(e==this.g)e:{var t=b5(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||F2||this.g&&(this.h.h||this.g.fa()||I5(this.g)))){this.I||4!=t||7==n||q3(),E4(this);var r=this.g.aa();this.Y=r;t:if(m4(this)){var i=I5(this.g);e="";var a=i.length,s=4==b5(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){b4(this),x4(this);var o="";break t}this.h.i=new l2.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:s&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+s}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,l=this.g;if((u=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k2(u)){var c=u;break t}}c=null}if(!(r=c)){this.i=!1,this.o=3,K3(12),b4(this),x4(this);break e}H3(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,I4(this,r)}this.P?(y4(this,t,o),F2&&this.i&&3==t&&(B3(this.S,this.T,"tick",this.hb),this.T.start())):(H3(this.j,this.m,o,null),I4(this,o)),4==t&&b4(this),this.i&&!this.I&&(4==t?z5(this.l,this):(this.i=!1,_4(this)))}else 400==r&&0<o.indexOf("Unknown SID")?(this.o=3,K3(12)):(this.o=0,K3(13)),b4(this),x4(this)}}}catch(t){}},n2.hb=function(){if(this.g){var e=b5(this.g),t=this.g.fa();this.C<t.length&&(E4(this),y4(this,e,t),this.i&&4!=e&&_4(this))}},n2.cancel=function(){this.I=!0,b4(this)},n2.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(q3(),K3(17)),b4(this),this.o=2,x4(this)):T4(this,this.V-e)};var k4=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function S4(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof S4){this.h=void 0!==t?t:e.h,C4(this,e.j),this.s=e.s,this.g=e.g,D4(this,e.m),this.l=e.l,t=e.i;var n=new G4;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),A4(this,n),this.o=e.o}else e&&(n=String(e).match(k4))?(this.h=!!t,C4(this,n[1]||"",!0),this.s=M4(n[2]||""),this.g=M4(n[3]||"",!0),D4(this,n[4]),this.l=M4(n[5]||"",!0),A4(this,n[6]||"",!0),this.o=M4(n[7]||"")):(this.h=!!t,this.i=new G4(null,this.h))}function R4(e){return new S4(e)}function C4(e,t,n){e.j=n?M4(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function D4(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function A4(e,t,n){t instanceof G4?(e.i=t,function(e,t){t&&!e.j&&(H4(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(j4(this,t),W4(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=P4(t,B4)),e.i=new G4(t,e.h))}function O4(e,t,n){e.i.set(t,n)}function N4(e){return O4(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function M4(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function P4(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,F4),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function F4(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}S4.prototype.toString=function(){var e=[],t=this.j;t&&e.push(P4(t,L4,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(P4(t,L4,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(P4(n,"/"==n.charAt(0)?Z4:U4,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",P4(n,z4)),e.join("")};var L4=/[#\/\?@]/g,U4=/[#\?:]/g,Z4=/[#\?]/g,B4=/[#\?@]/g,z4=/#/g;function G4(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function H4(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function j4(e,t){H4(e),t=Y4(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function V4(e,t){return H4(e),t=Y4(e,t),e.g.has(t)}function W4(e,t,n){j4(e,t),0<n.length&&(e.i=null,e.g.set(Y4(e,t),x2(n)),e.h+=n.length)}function Y4(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(n2=G4.prototype).add=function(e,t){H4(this),this.i=null,e=Y4(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},n2.forEach=function(e,t){H4(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},n2.oa=function(){H4(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},n2.W=function(e){H4(this);var t=[];if("string"===typeof e)V4(this,e)&&(t=t.concat(this.g.get(Y4(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},n2.set=function(e,t){return H4(this),this.i=null,V4(this,e=Y4(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},n2.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},n2.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")};var q4=(0,o.Z)((function e(t,n){(0,s.Z)(this,e),this.h=t,this.g=n}));function X4(e){this.l=e||K4,l2.PerformanceNavigationTiming?e=0<(e=l2.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(l2.g&&l2.g.Ga&&l2.g.Ga()&&l2.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var K4=10;function Q4(e){return!!e.h||!!e.g&&e.g.size>=e.j}function J4(e){return e.h?1:e.g?e.g.size:0}function $4(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function e5(e,t){e.g?e.g.add(t):e.h=t}function t5(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function n5(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=b(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return x2(e.i)}function r5(){}function i5(){this.g=new r5}function a5(e,t,n){var r=n||"";try{w4(e,(function(e,n){var i=e;p2(e)&&(i=x3(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(IQ){throw t.push(r+"type="+encodeURIComponent("_badmap")),IQ}}function s5(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(LQ){}}function o5(e){this.l=e.ac||null,this.j=e.jb||!1}function u5(e,t){_3.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=l5,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}X4.prototype.cancel=function(){if(this.i=n5(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=b(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},r5.prototype.stringify=function(e){return l2.JSON.stringify(e,void 0)},r5.prototype.parse=function(e){return l2.JSON.parse(e,void 0)},_2(o5,t4),o5.prototype.g=function(){return new u5(this.l,this.j)},o5.prototype.i=function(e){return function(){return e}}({}),_2(u5,_3);var l5=0;function c5(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function h5(e){e.readyState=4,e.l=null,e.j=null,e.A=null,p5(e)}function p5(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(n2=u5.prototype).open=function(e,t){if(this.readyState!=l5)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,p5(this)},n2.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||l2).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},n2.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,h5(this)),this.readyState=l5},n2.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,p5(this)),this.g&&(this.readyState=3,p5(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof l2.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;c5(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},n2.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?h5(this):p5(this),3==this.readyState&&c5(this)}},n2.Va=function(e){this.g&&(this.response=this.responseText=e,h5(this))},n2.Ua=function(e){this.g&&(this.response=e,h5(this))},n2.ga=function(){this.g&&h5(this)},n2.setRequestHeader=function(e,t){this.v.append(e,t)},n2.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},n2.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(u5.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var f5=l2.JSON.parse;function d5(e){_3.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=v5,this.K=this.L=!1}_2(d5,_3);var v5="",m5=/^https?$/i,y5=["POST","PUT"];function g5(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,_5(e),E5(e)}function _5(e){e.D||(e.D=!0,T3(e,"complete"),T3(e,"error"))}function T5(e){if(e.h&&"undefined"!=typeof u2&&(!e.C[1]||4!=b5(e)||2!=e.aa()))if(e.v&&4==b5(e))P3(e.Ha,0,e);else if(T3(e,"readystatechange"),4==b5(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(k4)[1]||null;if(!a&&l2.self&&l2.self.location){var s=l2.self.location.protocol;a=s.substr(0,s.length-1)}i=!m5.test(a?a.toLowerCase():"")}t=i}if(t)T3(e,"complete"),T3(e,"success");else{e.m=6;try{var o=2<b5(e)?e.g.statusText:""}catch(OQ){o=""}e.j=o+" ["+e.aa()+"]",_5(e)}}finally{E5(e)}}}function E5(e,t){if(e.g){x5(e);var n=e.g,r=e.C[0]?c2:null;e.g=null,e.C=null,t||T3(e,"ready");try{n.onreadystatechange=r}catch(IQ){}}}function x5(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(l2.clearTimeout(e.A),e.A=null)}function b5(e){return e.g?e.g.readyState:0}function I5(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case v5:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(HQ){return null}}function w5(e){var t="";return e3(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function k5(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=w5(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):O4(e,t,n))}function S5(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function R5(e){this.Ca=0,this.i=[],this.j=new G3,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=S5("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=S5("baseRetryDelayMs",5e3,e),this.bb=S5("retryDelaySeedMs",1e4,e),this.$a=S5("forwardChannelMaxRetries",2,e),this.ta=S5("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new X4(e&&e.concurrentRequestLimit),this.Fa=new i5,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function C5(e){if(A5(e),3==e.G){var t=e.U++,n=R4(e.F);O4(n,"SID",e.I),O4(n,"RID",t),O4(n,"TYPE","terminate"),M5(e,n),(t=new l4(e,e.j,t,void 0)).K=2,t.v=N4(R4(n)),n=!1,l2.navigator&&l2.navigator.sendBeacon&&(n=l2.navigator.sendBeacon(t.v.toString(),"")),!n&&l2.Image&&((new Image).src=t.v,n=!0),n||(t.g=W5(t.l,null),t.g.da(t.v)),t.F=Date.now(),_4(t)}j5(e)}function D5(e){e.g&&(U5(e),e.g.cancel(),e.g=null)}function A5(e){D5(e),e.u&&(l2.clearTimeout(e.u),e.u=null),B5(e),e.h.cancel(),e.m&&("number"===typeof e.m&&l2.clearTimeout(e.m),e.m=null)}function O5(e){Q4(e.h)||e.m||(e.m=!0,C3(e.Ja,e),e.C=0)}function N5(e,t){var n;n=t?t.m:e.U++;var r=R4(e.F);O4(r,"SID",e.I),O4(r,"RID",n),O4(r,"AID",e.T),M5(e,r),e.o&&e.s&&k5(r,e.o,e.s),n=new l4(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=P5(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),e5(e.h,n),d4(n,r,t)}function M5(e,t){e.ia&&e3(e.ia,(function(e,n){O4(t,n,e)})),e.l&&w4({},(function(e,n){O4(t,n,e)}))}function P5(e,t,n){n=Math.min(e.i.length,n);var r=e.l?y2(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var s=["count="+n];-1==a?0<n?(a=i[0].h,s.push("ofs="+a)):a=0:s.push("ofs="+a);for(var o=!0,u=0;u<n;u++){var l=i[u].h,c=i[u].g;if(0>(l-=a))a=Math.max(0,i[u].h-100),o=!1;else try{a5(c,s,"req"+l+"_")}catch(oJ){r&&r(c)}}if(o){r=s.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function F5(e){e.g||e.u||(e.Z=1,C3(e.Ia,e),e.A=0)}function L5(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=J3(y2(e.Ia,e),G5(e,e.A)),e.A++,!0)}function U5(e){null!=e.B&&(l2.clearTimeout(e.B),e.B=null)}function Z5(e){e.g=new l4(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=R4(e.sa);O4(t,"RID","rpc"),O4(t,"SID",e.I),O4(t,"CI",e.L?"0":"1"),O4(t,"AID",e.T),O4(t,"TYPE","xmlhttp"),M5(e,t),e.o&&e.s&&k5(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=N4(R4(t)),n.s=null,n.P=!0,v4(n,e)}function B5(e){null!=e.v&&(l2.clearTimeout(e.v),e.v=null)}function z5(e,t){var n=null;if(e.g==t){B5(e),U5(e),e.g=null;var r=2}else{if(!$4(e.h,t))return;n=t.D,t5(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;T3(r=W3(),new Q3(r,n)),O5(e)}else F5(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(J4(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=J3(y2(e.Ja,e,t),G5(e,e.C)),e.C++,!0))}(e,t)||2==r&&L5(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:H5(e,5);break;case 4:H5(e,10);break;case 3:H5(e,6);break;default:H5(e,2)}}function G5(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function H5(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=y2(e.kb,e);n||(n=new S4("//www.google.com/images/cleardot.gif"),l2.location&&"http"==l2.location.protocol||C4(n,"https"),N4(n)),function(e,t){var n=new G3;if(l2.Image){var r=new Image;r.onload=g2(s5,n,r,"TestLoadImage: loaded",!0,t),r.onerror=g2(s5,n,r,"TestLoadImage: error",!1,t),r.onabort=g2(s5,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=g2(s5,n,r,"TestLoadImage: timeout",!1,t),l2.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else K3(2);e.G=0,e.l&&e.l.va(t),j5(e),A5(e)}function j5(e){if(e.G=0,e.la=[],e.l){var t=n5(e.h);0==t.length&&0==e.i.length||(b2(e.la,t),b2(e.la,e.i),e.h.i.length=0,x2(e.i),e.i.length=0),e.l.ua()}}function V5(e,t,n){var r=n instanceof S4?R4(n):new S4(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),D4(r,r.m);else{var i=l2.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new S4(null,void 0);r&&C4(a,r),t&&(a.g=t),i&&D4(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&O4(r,n,t),O4(r,"VER",e.ma),M5(e,r),r}function W5(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new d5(new o5({jb:!0})):new d5(e.ra)).Ka(e.H),t}function Y5(){}function q5(){if(M2&&!(10<=Number(Y2)))throw Error("Environmental error: no available transport.")}function X5(e,t){_3.call(this),this.g=new R5(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!k2(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k2(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new J5(this)}function K5(e){s4.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Q5(){o4.call(this),this.status=1}function J5(e){this.g=e}(n2=d5.prototype).Ka=function(e){this.L=e},n2.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():i4.g(),this.C=this.u?n4(this.u):n4(i4),this.g.onreadystatechange=y2(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void g5(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var s,o=b(r.keys());try{for(o.s();!(s=o.n()).done;){var u=s.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),a=l2.FormData&&e instanceof l2.FormData,!(0<=E2(y5,t))||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var l,c=b(n);try{for(c.s();!(l=c.n()).done;){var h=(0,i.Z)(l.value,2),p=h[0],f=h[1];this.g.setRequestHeader(p,f)}}catch(d){c.e(d)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{x5(this),0<this.B&&((this.K=function(e){return M2&&V2()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=y2(this.qa,this)):this.A=P3(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){g5(this,u)}},n2.qa=function(){"undefined"!=typeof u2&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,T3(this,"timeout"),this.abort(8))},n2.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,T3(this,"complete"),T3(this,"abort"),E5(this))},n2.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),E5(this,!0)),d5.X.M.call(this)},n2.Ha=function(){this.s||(this.F||this.v||this.l?T5(this):this.fb())},n2.fb=function(){T5(this)},n2.aa=function(){try{return 2<b5(this)?this.g.status:-1}catch(AQ){return-1}},n2.fa=function(){try{return this.g?this.g.responseText:""}catch(AQ){return""}},n2.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),f5(t)}},n2.Ea=function(){return this.m},n2.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(n2=R5.prototype).ma=8,n2.G=1,n2.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new l4(this,this.j,e,void 0),n=this.s;if(this.S&&(n?r3(n=t3(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=P5(this,t,r),O4(i=R4(this.F),"RID",e),O4(i,"CVER",22),this.D&&O4(i,"X-HTTP-Session-Id",this.D),M5(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(w5(n)))+"&"+r:this.o&&k5(i,this.o,n)),e5(this.h,t),this.Ya&&O4(i,"TYPE","init"),this.O?(O4(i,"$req",r),O4(i,"SID","null"),t.Z=!0,d4(t,i,null)):d4(t,i,r),this.G=2}}else 3==this.G&&(e?N5(this,e):0==this.i.length||Q4(this.h)||N5(this))},n2.Ia=function(){if(this.u=null,Z5(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=J3(y2(this.eb,this),e)}},n2.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,K3(10),D5(this),Z5(this))},n2.cb=function(){null!=this.v&&(this.v=null,D5(this),L5(this),K3(19))},n2.kb=function(e){e?(this.j.info("Successfully pinged google.com"),K3(2)):(this.j.info("Failed to ping google.com"),K3(1))},(n2=Y5.prototype).xa=function(){},n2.wa=function(){},n2.va=function(){},n2.ua=function(){},n2.Ra=function(){},q5.prototype.g=function(e,t){return new X5(e,t)},_2(X5,_3),X5.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;K3(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=V5(e,null,e.V),O5(e)},X5.prototype.close=function(){C5(this.g)},X5.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=x3(e),e=n);t.i.push(new q4(t.ab++,e)),3==t.G&&O5(t)},X5.prototype.M=function(){this.g.l=null,delete this.j,C5(this.g),delete this.g,X5.X.M.call(this)},_2(K5,s4),_2(Q5,o4),_2(J5,Y5),J5.prototype.xa=function(){T3(this.g,"a")},J5.prototype.wa=function(e){T3(this.g,new K5(e))},J5.prototype.va=function(e){T3(this.g,new Q5)},J5.prototype.ua=function(){T3(this.g,"b")},q5.prototype.createWebChannel=q5.prototype.g,X5.prototype.send=X5.prototype.u,X5.prototype.open=X5.prototype.m,X5.prototype.close=X5.prototype.close,$3.NO_ERROR=0,$3.TIMEOUT=8,$3.HTTP_ERROR=6,e4.COMPLETE="complete",r4.EventType=a4,a4.OPEN="a",a4.CLOSE="b",a4.ERROR="c",a4.MESSAGE="d",_3.prototype.listen=_3.prototype.N,d5.prototype.listenOnce=d5.prototype.O,d5.prototype.getLastError=d5.prototype.Oa,d5.prototype.getLastErrorCode=d5.prototype.Ea,d5.prototype.getStatus=d5.prototype.aa,d5.prototype.getResponseJson=d5.prototype.Sa,d5.prototype.getResponseText=d5.prototype.fa,d5.prototype.send=d5.prototype.da,d5.prototype.setWithCredentials=d5.prototype.Ka;var $5=o2.createWebChannelTransport=function(){return new q5},e6=o2.getStatEventTarget=function(){return W3()},t6=o2.ErrorCode=$3,n6=o2.EventType=e4,r6=o2.Event=j3,i6=o2.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},a6=o2.FetchXmlHttpFactory=o5,s6=o2.WebChannel=r4,o6=o2.XhrIo=d5,u6="@firebase/firestore",l6=function(){function e(t){(0,s.Z)(this,e),this.uid=t}return(0,o.Z)(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();l6.UNAUTHENTICATED=new l6(null),l6.GOOGLE_CREDENTIALS=new l6("google-credentials-uid"),l6.FIRST_PARTY=new l6("first-party-uid"),l6.MOCK_USER=new l6("mock-user");var c6="9.17.2",h6=new Qt("@firebase/firestore");function p6(){return h6.logLevel}function f6(e){if(h6.logLevel<=jt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(m6);h6.debug.apply(h6,["Firestore (".concat(c6,"): ").concat(e)].concat((0,a.Z)(i)))}}function d6(e){if(h6.logLevel<=jt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(m6);h6.error.apply(h6,["Firestore (".concat(c6,"): ").concat(e)].concat((0,a.Z)(i)))}}function v6(e){if(h6.logLevel<=jt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(m6);h6.warn.apply(h6,["Firestore (".concat(c6,"): ").concat(e)].concat((0,a.Z)(i)))}}function m6(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function y6(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(c6,") INTERNAL ASSERTION FAILED: ")+e;throw d6(t),new Error(t)}function g6(e,t){e||y6()}function _6(e,t){return e}var T6={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},E6=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return(0,o.Z)(n)}(Ct),x6=(0,o.Z)((function e(){var t=this;(0,s.Z)(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),b6=(0,o.Z)((function e(t,n){(0,s.Z)(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),I6=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(l6.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),w6=function(){function e(t){(0,s.Z)(this,e),this.token=t,this.changeListener=null}return(0,o.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),k6=function(){function e(t){(0,s.Z)(this,e),this.t=t,this.currentUser=l6.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return(0,o.Z)(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new x6;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new x6,e.enqueueRetryable((function(){return i(n.currentUser)}))};var s=function(){var t=a;e.enqueueRetryable((0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},o=function(e){f6("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),s()};this.t.onInit((function(e){return o(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?o(e):(f6("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new x6)}}),0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(f6("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(g6("string"==typeof n.accessToken),new b6(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return g6(null===e||"string"==typeof e),new l6(e)}}]),e}(),S6=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=l6.FIRST_PARTY,this.p=new Map}return(0,o.Z)(e,[{key:"I",value:function(){return this.g?this.g():(g6(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),R6=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return(0,o.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(new S6(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(l6.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),C6=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),D6=function(){function e(t){(0,s.Z)(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return(0,o.Z)(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&f6("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,f6("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){f6("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):f6("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(g6("string"==typeof t.token),e.A=t.token,new C6(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function A6(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var O6=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=A6(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function N6(e,t){return e<t?-1:e>t?1:0}function M6(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var P6=function(){function e(t,n){if((0,s.Z)(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new E6(T6.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new E6(T6.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new E6(T6.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new E6(T6.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return(0,o.Z)(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?N6(this.nanoseconds,e.nanoseconds):N6(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),F6=function(){function e(t){(0,s.Z)(this,e),this.timestamp=t}return(0,o.Z)(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new P6(0,0))}},{key:"max",value:function(){return new e(new P6(253402300799,999999999))}}]),e}(),L6=function(){function e(t,n,r){(0,s.Z)(this,e),void 0===n?n=0:n>t.length&&y6(),void 0===r?r=t.length-n:r>t.length-n&&y6(),this.segments=t,this.offset=n,this.len=r}return(0,o.Z)(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),U6=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var s=0,o=r;s<o.length;s++){var u=o[s];if(u.indexOf("//")>=0)throw new E6(T6.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,(0,a.Z)(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(L6),Z6=/^[_a-zA-Z][_a-zA-Z0-9]*$/,B6=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Z6.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new E6(T6.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},s=!1;i<e.length;){var o=e[i];if("\\"===o){if(i+1===e.length)throw new E6(T6.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new E6(T6.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===o?(s=!s,i++):"."!==o||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new E6(T6.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(L6),z6=function(){function e(t){(0,s.Z)(this,e),this.path=t}return(0,o.Z)(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===U6.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(U6.fromString(t))}},{key:"fromName",value:function(t){return new e(U6.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(U6.emptyPath())}},{key:"comparator",value:function(e,t){return U6.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new U6(t.slice()))}}]),e}(),G6=(0,o.Z)((function e(t,n,r,i){(0,s.Z)(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));G6.UNKNOWN_ID=-1;function H6(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=F6.fromTimestamp(1e9===r?new P6(n+1,0):new P6(n,r));return new V6(i,z6.empty(),t)}function j6(e){return new V6(e.readTime,e.key,-1)}var V6=function(){function e(t,n,r){(0,s.Z)(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return(0,o.Z)(e,null,[{key:"min",value:function(){return new e(F6.min(),z6.empty(),-1)}},{key:"max",value:function(){return new e(F6.max(),z6.empty(),-1)}}]),e}();function W6(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=z6.comparator(e.documentKey,t.documentKey))?n:N6(e.largestBatchId,t.largestBatchId)}var Y6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",q6=function(){function e(){(0,s.Z)(this,e),this.onCommittedListeners=[]}return(0,o.Z)(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function X6(e){return K6.apply(this,arguments)}function K6(){return K6=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===T6.FAILED_PRECONDITION&&t.message===Y6){e.next=2;break}throw t;case 2:f6("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),K6.apply(this,arguments)}var Q6=function(){function e(t){var n=this;(0,s.Z)(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return(0,o.Z)(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&y6(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=b(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),s=0,o=function(){var o=u;n(t[o]).next((function(t){a[o]=t,++s===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)o()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function J6(e){return"IndexedDbTransactionError"===e.name}var $6=function(){function e(t,n){var r=this;(0,s.Z)(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return(0,o.Z)(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();$6.at=-1;var e8=(0,o.Z)((function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=l})),t8=function(){function e(t,n){(0,s.Z)(this,e),this.projectId=t,this.database=n||"(default)"}return(0,o.Z)(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function n8(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function r8(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function i8(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function a8(e){return null==e}function s8(e){return 0===e&&1/e==-1/0}function o8(e){return"number"==typeof e&&Number.isInteger(e)&&!s8(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var u8=function(e){l(n,e);var t=v(n);function n(){var e;return(0,s.Z)(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return(0,o.Z)(n)}(y(Error));var l8=function(e){function t(e){(0,s.Z)(this,t),this.binaryString=e}return(0,o.Z)(t,[{key:e,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return N6(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw e instanceof DOMException?new u8("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}(Symbol.iterator);l8.EMPTY_BYTE_STRING=new l8("");var c8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function h8(e){if(g6(!!e),"string"==typeof e){var t=0,n=c8.exec(e);if(g6(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:p8(e.seconds),nanos:p8(e.nanos)}}function p8(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function f8(e){return"string"==typeof e?l8.fromBase64String(e):l8.fromUint8Array(e)}function d8(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function v8(e){var t=e.mapValue.fields.__previous_value__;return d8(t)?v8(t):t}function m8(e){var t=h8(e.mapValue.fields.__local_write_time__.timestampValue);return new P6(t.seconds,t.nanos)}var y8={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function g8(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?d8(e)?4:O8(e)?9007199254740991:10:y6()}function _8(e,t){if(e===t)return!0;var n=g8(e);if(n!==g8(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return m8(e).isEqual(m8(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=h8(e.timestampValue),r=h8(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return f8(e.bytesValue).isEqual(f8(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return p8(e.geoPointValue.latitude)===p8(t.geoPointValue.latitude)&&p8(e.geoPointValue.longitude)===p8(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return p8(e.integerValue)===p8(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=p8(e.doubleValue),r=p8(t.doubleValue);return n===r?s8(n)===s8(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return M6(e.arrayValue.values||[],t.arrayValue.values||[],_8);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(n8(n)!==n8(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!_8(n[i],r[i])))return!1;return!0}(e,t);default:return y6()}}function T8(e,t){return void 0!==(e.values||[]).find((function(e){return _8(e,t)}))}function E8(e,t){if(e===t)return 0;var n=g8(e),r=g8(t);if(n!==r)return N6(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return N6(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=p8(e.integerValue||e.doubleValue),r=p8(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return x8(e.timestampValue,t.timestampValue);case 4:return x8(m8(e),m8(t));case 5:return N6(e.stringValue,t.stringValue);case 6:return function(e,t){var n=f8(e),r=f8(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=N6(n[i],r[i]);if(0!==a)return a}return N6(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=N6(p8(e.latitude),p8(t.latitude));return 0!==n?n:N6(p8(e.longitude),p8(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=E8(n[i],r[i]);if(a)return a}return N6(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===y8.mapValue&&t===y8.mapValue)return 0;if(e===y8.mapValue)return 1;if(t===y8.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var s=0;s<r.length&&s<a.length;++s){var o=N6(r[s],a[s]);if(0!==o)return o;var u=E8(n[r[s]],i[a[s]]);if(0!==u)return u}return N6(r.length,a.length)}(e.mapValue,t.mapValue);default:throw y6()}}function x8(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return N6(e,t);var n=h8(e),r=h8(t),i=N6(n.seconds,r.seconds);return 0!==i?i:N6(n.nanos,r.nanos)}function b8(e){return I8(e)}function I8(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=h8(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?f8(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,z6.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=b(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=I8(a)}}catch(s){i.e(s)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=b(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(I8(e.fields[a]))}}catch(s){i.e(s)}finally{i.f()}return n+"}"}(e.mapValue):y6();var t,n}function w8(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function k8(e){return!!e&&"integerValue"in e}function S8(e){return!!e&&"arrayValue"in e}function R8(e){return!!e&&"nullValue"in e}function C8(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function D8(e){return!!e&&"mapValue"in e}function A8(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return r8(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=A8(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=A8(e.arrayValue.values[r]);return n}return Object.assign({},e)}function O8(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var N8=(0,o.Z)((function e(t,n){(0,s.Z)(this,e),this.position=t,this.inclusive=n}));function M8(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],s=e.position[i];if(r=a.field.isKeyField()?z6.comparator(z6.fromName(s.referenceValue),n.key):E8(s,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function P8(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!_8(e.position[n],t.position[n]))return!1;return!0}var F8=(0,o.Z)((function e(){(0,s.Z)(this,e)})),L8=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;return(0,s.Z)(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return(0,o.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(E8(t,this.value)):null!==t&&g8(this.value)===g8(t)&&this.matchesComparison(E8(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return y6()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new V8(e,t,r):"array-contains"===t?new X8(e,r):"in"===t?new K8(e,r):"not-in"===t?new Q8(e,r):"array-contains-any"===t?new J8(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new W8(e,n):new Y8(e,n)}}]),n}(F8),U8=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this)).filters=e,i.op=r,i.ft=null,i}return(0,o.Z)(n,[{key:"matches",value:function(e){return Z8(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ft||(this.ft=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ft}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.dt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"dt",value:function(e){var t,n=b(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(F8);function Z8(e){return"and"===e.op}function B8(e){return z8(e)&&Z8(e)}function z8(e){var t,n=b(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof U8)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function G8(e){if(e instanceof L8)return e.field.canonicalString()+e.op.toString()+b8(e.value);if(B8(e))return e.filters.map((function(e){return G8(e)})).join(",");var t=e.filters.map((function(e){return G8(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function H8(e,t){return e instanceof L8?function(e,t){return t instanceof L8&&e.op===t.op&&e.field.isEqual(t.field)&&_8(e.value,t.value)}(e,t):e instanceof U8?function(e,t){return t instanceof U8&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&H8(n,t.filters[r])}),!0)}(e,t):void y6()}function j8(e){return e instanceof L8?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(b8(e.value))}(e):e instanceof U8?function(e){return e.op.toString()+" {"+e.getFilters().map(j8).join(" ,")+"}"}(e):"Filter"}var V8=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;return(0,s.Z)(this,n),(a=t.call(this,e,r,i)).key=z6.fromName(i.referenceValue),a}return(0,o.Z)(n,[{key:"matches",value:function(e){var t=z6.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(L8),W8=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this,e,"in",r)).keys=q8("in",r),i}return(0,o.Z)(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(L8),Y8=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this,e,"not-in",r)).keys=q8("not-in",r),i}return(0,o.Z)(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(L8);function q8(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return z6.fromName(e.referenceValue)}))}var X8=function(e){l(n,e);var t=v(n);function n(e,r){return(0,s.Z)(this,n),t.call(this,e,"array-contains",r)}return(0,o.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return S8(t)&&T8(t.arrayValue,this.value)}}]),n}(L8),K8=function(e){l(n,e);var t=v(n);function n(e,r){return(0,s.Z)(this,n),t.call(this,e,"in",r)}return(0,o.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&T8(this.value.arrayValue,t)}}]),n}(L8),Q8=function(e){l(n,e);var t=v(n);function n(e,r){return(0,s.Z)(this,n),t.call(this,e,"not-in",r)}return(0,o.Z)(n,[{key:"matches",value:function(e){if(T8(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!T8(this.value.arrayValue,t)}}]),n}(L8),J8=function(e){l(n,e);var t=v(n);function n(e,r){return(0,s.Z)(this,n),t.call(this,e,"array-contains-any",r)}return(0,o.Z)(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!S8(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return T8(t.value.arrayValue,e)}))}}]),n}(L8),$8=(0,o.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";(0,s.Z)(this,e),this.field=t,this.dir=n}));function e7(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var t7=function(){function e(t,n){(0,s.Z)(this,e),this.comparator=t,this.root=n||r7.EMPTY}return(0,o.Z)(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,r7.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,r7.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new n7(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new n7(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new n7(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new n7(this.root,e,this.comparator,!0)}}]),e}(),n7=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return(0,o.Z)(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),r7=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return(0,o.Z)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw y6();if(this.right.isRed())throw y6();var e=this.left.check();if(e!==this.right.check())throw y6();return e+(this.isRed()?0:1)}}]),e}();r7.EMPTY=null,r7.RED=!0,r7.BLACK=!1,r7.EMPTY=new(function(){function e(){(0,s.Z)(this,e),this.size=0}return(0,o.Z)(e,[{key:"key",get:function(){throw y6()}},{key:"value",get:function(){throw y6()}},{key:"color",get:function(){throw y6()}},{key:"left",get:function(){throw y6()}},{key:"right",get:function(){throw y6()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new r7(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var i7=function(){function e(t){(0,s.Z)(this,e),this.comparator=t,this.data=new t7(this.comparator)}return(0,o.Z)(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new a7(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new a7(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),a7=function(){function e(t){(0,s.Z)(this,e),this.iter=t}return(0,o.Z)(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var s7=function(){function e(t){(0,s.Z)(this,e),this.fields=t,t.sort(B6.comparator)}return(0,o.Z)(e,[{key:"unionWith",value:function(t){var n,r=new i7(B6.comparator),i=b(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(l){i.e(l)}finally{i.f()}var s,o=b(t);try{for(o.s();!(s=o.n()).done;){var u=s.value;r=r.add(u)}}catch(l){o.e(l)}finally{o.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=b(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return M6(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),o7=function(){function e(t){(0,s.Z)(this,e),this.value=t}return(0,o.Z)(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!D8(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=A8(t)}},{key:"setAll",value:function(e){var t=this,n=B6.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var s=t.getFieldsMap(n);t.applyChanges(s,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=A8(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());D8(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return _8(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];D8(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){r8(t,(function(t,n){return e[t]=n}));var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(s){i.e(s)}finally{i.f()}}},{key:"clone",value:function(){return new e(A8(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function u7(e){var t=[];return r8(e.fields,(function(e,n){var r=new B6([e]);if(D8(n)){var i=u7(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,s=b(i);try{for(s.s();!(a=s.n()).done;){var o=a.value;t.push(r.child(o))}}catch(u){s.e(u)}finally{s.f()}}}else t.push(r)})),new s7(t)}var l7=function(){function e(t,n,r,i,a,o,u){(0,s.Z)(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return(0,o.Z)(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(F6.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=o7.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=o7.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=F6.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,F6.min(),F6.min(),F6.min(),o7.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,F6.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,F6.min(),F6.min(),o7.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,F6.min(),F6.min(),o7.empty(),2)}}]),e}(),c7=(0,o.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;(0,s.Z)(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this._t=null}));function h7(e){return new c7(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function p7(e){var t=_6(e);if(null===t._t){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return G8(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),a8(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return b8(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return b8(e)})).join(",")),t._t=n}return t._t}function f7(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!e7(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!H8(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!P8(e.startAt,t.startAt)&&P8(e.endAt,t.endAt)}function d7(e){return z6.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var v7=(0,o.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;(0,s.Z)(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=l,this.wt=null,this.gt=null,this.startAt,this.endAt}));function m7(e,t,n,r,i,a,s,o){return new v7(e,t,n,r,i,a,s,o)}function y7(e){return new v7(e)}function g7(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function _7(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function T7(e){var t,n=b(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function E7(e){return null!==e.collectionGroup}function x7(e){var t=_6(e);if(null===t.wt){t.wt=[];var n=T7(t),r=_7(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new $8(n)),t.wt.push(new $8(B6.keyField(),"asc"));else{var i,a=!1,s=b(t.explicitOrderBy);try{for(s.s();!(i=s.n()).done;){var o=i.value;t.wt.push(o),o.field.isKeyField()&&(a=!0)}}catch(l){s.e(l)}finally{s.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new $8(B6.keyField(),u))}}}return t.wt}function b7(e){var t=_6(e);if(!t.gt)if("F"===t.limitType)t.gt=h7(t.path,t.collectionGroup,x7(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=b(x7(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,s="desc"===a.dir?"asc":"desc";r.push(new $8(a.field,s))}}catch(l){i.e(l)}finally{i.f()}var o=t.endAt?new N8(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new N8(t.startAt.position,t.startAt.inclusive):null;t.gt=h7(t.path,t.collectionGroup,r,t.filters,t.limit,o,u)}return t.gt}function I7(e,t){t.getFirstInequalityField(),T7(e);var n=e.filters.concat([t]);return new v7(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function w7(e,t,n){return new v7(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function k7(e,t){return f7(b7(e),b7(t))&&e.limitType===t.limitType}function S7(e){return"".concat(p7(b7(e)),"|lt:").concat(e.limitType)}function R7(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return j8(e)})).join(", "),"]")),a8(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return b8(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return b8(e)})).join(",")),"Target(".concat(t,")")}(b7(e)),"; limitType=").concat(e.limitType,")")}function C7(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):z6.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=b(x7(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=b(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=M8(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,x7(e),t))&&!(e.endAt&&!function(e,t,n){var r=M8(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,x7(e),t))}(e,t)}function D7(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function A7(e){return function(t,n){var r,i=!1,a=b(x7(e));try{for(a.s();!(r=a.n()).done;){var s=r.value,o=O7(s,t,n);if(0!==o)return o;i=i||s.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function O7(e,t,n){var r=e.field.isKeyField()?z6.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?E8(r,i):y6()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return y6()}}function N7(e,t){if(e.yt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:s8(t)?"-0":t}}function M7(e){return{integerValue:""+e}}function P7(e,t){return o8(t)?M7(t):N7(e,t)}var F7=(0,o.Z)((function e(){(0,s.Z)(this,e),this._=void 0}));function L7(e,t,n){return e instanceof B7?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof z7?G7(e,t):e instanceof H7?j7(e,t):function(e,t){var n=Z7(e,t),r=W7(n)+W7(e.It);return k8(n)&&k8(e.It)?M7(r):N7(e.Tt,r)}(e,t)}function U7(e,t,n){return e instanceof z7?G7(e,t):e instanceof H7?j7(e,t):n}function Z7(e,t){return e instanceof V7?k8(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var B7=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(F7),z7=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).elements=e,r}return(0,o.Z)(n)}(F7);function G7(e,t){var n,r=Y7(t),i=b(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return _8(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}return{arrayValue:{values:r}}}var H7=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).elements=e,r}return(0,o.Z)(n)}(F7);function j7(e,t){var n,r=Y7(t),i=b(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!_8(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}return{arrayValue:{values:r}}}var V7=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this)).Tt=e,i.It=r,i}return(0,o.Z)(n)}(F7);function W7(e){return p8(e.integerValue||e.doubleValue)}function Y7(e){return S8(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var q7=(0,o.Z)((function e(t,n){(0,s.Z)(this,e),this.version=t,this.transformResults=n})),X7=function(){function e(t,n){(0,s.Z)(this,e),this.updateTime=t,this.exists=n}return(0,o.Z)(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function K7(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Q7=(0,o.Z)((function e(){(0,s.Z)(this,e)}));function J7(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new c9(e.key,X7.none()):new r9(e.key,e.data,X7.none());var n,r=e.data,i=o7.empty(),a=new i7(B6.comparator),s=b(t.fields);try{for(s.s();!(n=s.n()).done;){var o=n.value;if(!a.has(o)){var u=r.field(o);null===u&&o.length>1&&(o=o.popLast(),u=r.field(o)),null===u?i.delete(o):i.set(o,u),a=a.add(o)}}}catch(l){s.e(l)}finally{s.f()}return new i9(e.key,i,new s7(a.toArray()),X7.none())}function $7(e,t,n){e instanceof r9?function(e,t,n){var r=e.value.clone(),i=s9(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof i9?function(e,t,n){if(K7(e.precondition,t)){var r=s9(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(a9(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function e9(e,t,n,r){return e instanceof r9?function(e,t,n,r){if(!K7(e.precondition,t))return n;var i=e.value.clone(),a=o9(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof i9?function(e,t,n,r){if(!K7(e.precondition,t))return n;var i=o9(e.fieldTransforms,r,t),a=t.data;return a.setAll(a9(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return K7(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function t9(e,t){var n,r=null,i=b(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,s=t.data.field(a.field),o=Z7(a.transform,s||null);null!=o&&(null===r&&(r=o7.empty()),r.set(a.field,o))}}catch(u){i.e(u)}finally{i.f()}return r||null}function n9(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&M6(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof z7&&t instanceof z7||e instanceof H7&&t instanceof H7?M6(e.elements,t.elements,_8):e instanceof V7&&t instanceof V7?_8(e.It,t.It):e instanceof B7&&t instanceof B7}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var r9=function(e){l(n,e);var t=v(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,s.Z)(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return(0,o.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Q7),i9=function(e){l(n,e);var t=v(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,s.Z)(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return(0,o.Z)(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Q7);function a9(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function s9(e,t,n){var r=new Map;g6(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],s=a.transform,o=t.data.field(a.field);r.set(a.field,U7(s,o,n[i]))}return r}function o9(e,t,n){var r,i=new Map,a=b(e);try{for(a.s();!(r=a.n()).done;){var s=r.value,o=s.transform,u=n.data.field(s.field);i.set(s.field,L7(o,u,t))}}catch(l){a.e(l)}finally{a.f()}return i}var u9,l9,c9=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return(0,o.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Q7),h9=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return(0,o.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Q7),p9=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.count=t}));function f9(e){switch(e){default:return y6();case T6.CANCELLED:case T6.UNKNOWN:case T6.DEADLINE_EXCEEDED:case T6.RESOURCE_EXHAUSTED:case T6.INTERNAL:case T6.UNAVAILABLE:case T6.UNAUTHENTICATED:return!1;case T6.INVALID_ARGUMENT:case T6.NOT_FOUND:case T6.ALREADY_EXISTS:case T6.PERMISSION_DENIED:case T6.FAILED_PRECONDITION:case T6.ABORTED:case T6.OUT_OF_RANGE:case T6.UNIMPLEMENTED:case T6.DATA_LOSS:return!0}}function d9(e){if(void 0===e)return d6("GRPC error has no .code"),T6.UNKNOWN;switch(e){case u9.OK:return T6.OK;case u9.CANCELLED:return T6.CANCELLED;case u9.UNKNOWN:return T6.UNKNOWN;case u9.DEADLINE_EXCEEDED:return T6.DEADLINE_EXCEEDED;case u9.RESOURCE_EXHAUSTED:return T6.RESOURCE_EXHAUSTED;case u9.INTERNAL:return T6.INTERNAL;case u9.UNAVAILABLE:return T6.UNAVAILABLE;case u9.UNAUTHENTICATED:return T6.UNAUTHENTICATED;case u9.INVALID_ARGUMENT:return T6.INVALID_ARGUMENT;case u9.NOT_FOUND:return T6.NOT_FOUND;case u9.ALREADY_EXISTS:return T6.ALREADY_EXISTS;case u9.PERMISSION_DENIED:return T6.PERMISSION_DENIED;case u9.FAILED_PRECONDITION:return T6.FAILED_PRECONDITION;case u9.ABORTED:return T6.ABORTED;case u9.OUT_OF_RANGE:return T6.OUT_OF_RANGE;case u9.UNIMPLEMENTED:return T6.UNIMPLEMENTED;case u9.DATA_LOSS:return T6.DATA_LOSS;default:return y6()}}(l9=u9||(u9={}))[l9.OK=0]="OK",l9[l9.CANCELLED=1]="CANCELLED",l9[l9.UNKNOWN=2]="UNKNOWN",l9[l9.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",l9[l9.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",l9[l9.NOT_FOUND=5]="NOT_FOUND",l9[l9.ALREADY_EXISTS=6]="ALREADY_EXISTS",l9[l9.PERMISSION_DENIED=7]="PERMISSION_DENIED",l9[l9.UNAUTHENTICATED=16]="UNAUTHENTICATED",l9[l9.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",l9[l9.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",l9[l9.ABORTED=10]="ABORTED",l9[l9.OUT_OF_RANGE=11]="OUT_OF_RANGE",l9[l9.UNIMPLEMENTED=12]="UNIMPLEMENTED",l9[l9.INTERNAL=13]="INTERNAL",l9[l9.UNAVAILABLE=14]="UNAVAILABLE",l9[l9.DATA_LOSS=15]="DATA_LOSS";var v9=function(){function e(t,n){(0,s.Z)(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return(0,o.Z)(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,a=b(n);try{for(a.s();!(r=a.n()).done;){var s=(0,i.Z)(r.value,2),o=s[0],u=s[1];if(this.equalsFn(o,e))return u}}catch(l){a.e(l)}finally{a.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){r8(this.inner,(function(t,n){var r,a=b(n);try{for(a.s();!(r=a.n()).done;){var s=(0,i.Z)(r.value,2),o=s[0],u=s[1];e(o,u)}}catch(l){a.e(l)}finally{a.f()}}))}},{key:"isEmpty",value:function(){return i8(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),m9=new t7(z6.comparator);function y9(){return m9}var g9=new t7(z6.comparator);function _9(){for(var e=g9,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var s=a[i];e=e.insert(s.key,s)}return e}function T9(e){var t=g9;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function E9(){return b9()}function x9(){return b9()}function b9(){return new v9((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var I9=new t7(z6.comparator),w9=new i7(z6.comparator);function k9(){for(var e=w9,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var s=a[i];e=e.add(s)}return e}var S9=new i7(N6);function R9(){return S9}var C9=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return(0,o.Z)(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,D9.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(F6.min(),i,R9(),y9(),k9())}}]),e}(),D9=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return(0,o.Z)(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,k9(),k9(),k9())}}]),e}(),A9=(0,o.Z)((function e(t,n,r,i){(0,s.Z)(this,e),this.Et=t,this.removedTargetIds=n,this.key=r,this.At=i})),O9=(0,o.Z)((function e(t,n){(0,s.Z)(this,e),this.targetId=t,this.Rt=n})),N9=(0,o.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l8.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,s.Z)(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),M9=function(){function e(){(0,s.Z)(this,e),this.bt=0,this.vt=L9(),this.Pt=l8.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}return(0,o.Z)(e,[{key:"current",get:function(){return this.Vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"Dt",get:function(){return 0!==this.bt}},{key:"Ct",get:function(){return this.St}},{key:"xt",value:function(e){e.approximateByteSize()>0&&(this.St=!0,this.Pt=e)}},{key:"Nt",value:function(){var e=k9(),t=k9(),n=k9();return this.vt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:y6()}})),new D9(this.Pt,this.Vt,e,t,n)}},{key:"kt",value:function(){this.St=!1,this.vt=L9()}},{key:"Ot",value:function(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}},{key:"Mt",value:function(e){this.St=!0,this.vt=this.vt.remove(e)}},{key:"Ft",value:function(){this.bt+=1}},{key:"$t",value:function(){this.bt-=1}},{key:"Bt",value:function(){this.St=!0,this.Vt=!0}}]),e}(),P9=function(){function e(t){(0,s.Z)(this,e),this.Lt=t,this.qt=new Map,this.Ut=y9(),this.Kt=F9(),this.Gt=new i7(N6)}return(0,o.Z)(e,[{key:"Qt",value:function(e){var t,n=b(e.Et);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.At&&e.At.isFoundDocument()?this.jt(r,e.At):this.zt(r,e.key,e.At)}}catch(o){n.e(o)}finally{n.f()}var i,a=b(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var s=i.value;this.zt(s,e.key,e.At)}}catch(o){a.e(o)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Ht(n);switch(e.state){case 0:t.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.$t(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.$t(),r.Dt||t.removeTarget(n);break;case 3:t.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:t.Jt(n)&&(t.Yt(n),r.xt(e.resumeToken));break;default:y6()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((function(e,r){n.Jt(r)&&t(r)}))}},{key:"Zt",value:function(e){var t=e.targetId,n=e.Rt.count,r=this.Xt(t);if(r){var i=r.target;if(d7(i))if(0===n){var a=new z6(i.path);this.zt(t,a,l7.newNoDocument(a,F6.min()))}else g6(1===n);else this.te(t)!==n&&(this.Yt(t),this.Gt=this.Gt.add(t))}}},{key:"ee",value:function(e){var t=this,n=new Map;this.qt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&d7(a.target)){var s=new z6(a.target.path);null!==t.Ut.get(s)||t.ne(i,s)||t.zt(i,s,l7.newNoDocument(s,e))}r.Ct&&(n.set(i,r.Nt()),r.kt())}}));var r=k9();this.Kt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new C9(e,n,this.Gt,this.Ut,r);return this.Ut=y9(),this.Kt=F9(),this.Gt=new i7(N6),i}},{key:"jt",value:function(e,t){if(this.Jt(e)){var n=this.ne(e,t.key)?2:0;this.Ht(e).Ot(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}}},{key:"zt",value:function(e,t,n){if(this.Jt(e)){var r=this.Ht(e);this.ne(e,t)?r.Ot(t,1):r.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.qt.delete(e)}},{key:"te",value:function(e){var t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ft",value:function(e){this.Ht(e).Ft()}},{key:"Ht",value:function(e){var t=this.qt.get(e);return t||(t=new M9,this.qt.set(e,t)),t}},{key:"se",value:function(e){var t=this.Kt.get(e);return t||(t=new i7(N6),this.Kt=this.Kt.insert(e,t)),t}},{key:"Jt",value:function(e){var t=null!==this.Xt(e);return t||f6("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}},{key:"Yt",value:function(e){var t=this;this.qt.set(e,new M9),this.Lt.getRemoteKeysForTarget(e).forEach((function(n){t.zt(e,n,null)}))}},{key:"ne",value:function(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}]),e}();function F9(){return new t7(z6.comparator)}function L9(){return new t7(z6.comparator)}var U9={asc:"ASCENDING",desc:"DESCENDING"},Z9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},B9={and:"AND",or:"OR"},z9=(0,o.Z)((function e(t,n){(0,s.Z)(this,e),this.databaseId=t,this.yt=n}));function G9(e,t){return e.yt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function H9(e,t){return e.yt?t.toBase64():t.toUint8Array()}function j9(e,t){return G9(e,t.toTimestamp())}function V9(e){return g6(!!e),F6.fromTimestamp(function(e){var t=h8(e);return new P6(t.seconds,t.nanos)}(e))}function W9(e,t){return function(e){return new U6(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Y9(e){var t=U6.fromString(e);return g6(fee(t)),t}function q9(e,t){return W9(e.databaseId,t.path)}function X9(e,t){var n=Y9(t);if(n.get(1)!==e.databaseId.projectId)throw new E6(T6.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new E6(T6.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new z6($9(n))}function K9(e,t){return W9(e.databaseId,t)}function Q9(e){var t=Y9(e);return 4===t.length?U6.emptyPath():$9(t)}function J9(e){return new U6(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function $9(e){return g6(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function eee(e,t,n){return{name:q9(e,t),fields:n.value.mapValue.fields}}function tee(e,t){var n;if(t instanceof r9)n={update:eee(e,t.key,t.value)};else if(t instanceof c9)n={delete:q9(e,t.key)};else if(t instanceof i9)n={update:eee(e,t.key,t.data),updateMask:pee(t.fieldMask)};else{if(!(t instanceof h9))return y6();n={verify:q9(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof B7)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof z7)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof H7)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof V7)return{fieldPath:t.field.canonicalString(),increment:n.It};throw y6()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:j9(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:y6()}(e,t.precondition)),n}function nee(e,t){return{documents:[K9(e,t.path)]}}function ree(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=K9(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=K9(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return hee(U8.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:lee(e.field),direction:see(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var s,o=function(e,t){return e.yt||a8(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(s=t.startAt).inclusive,values:s.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function iee(e){var t=Q9(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){g6(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var s=[];n.where&&(s=function(e){var t=aee(e);return t instanceof U8&&B8(t)?t.getFilters():[t]}(n.where));var o=[];n.orderBy&&(o=n.orderBy.map((function(e){return function(e){return new $8(cee(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return a8(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=function(e){var t=!!e.before,n=e.values||[];return new N8(n,t)}(n.startAt));var c=null;return n.endAt&&(c=function(e){var t=!e.before,n=e.values||[];return new N8(n,t)}(n.endAt)),m7(t,i,o,s,u,"F",l,c)}function aee(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=cee(e.unaryFilter.field);return L8.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=cee(e.unaryFilter.field);return L8.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=cee(e.unaryFilter.field);return L8.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=cee(e.unaryFilter.field);return L8.create(i,"!=",{nullValue:"NULL_VALUE"});default:return y6()}}(e):void 0!==e.fieldFilter?function(e){return L8.create(cee(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return y6()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return U8.create(e.compositeFilter.filters.map((function(e){return aee(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return y6()}}(e.compositeFilter.op))}(e):y6()}function see(e){return U9[e]}function oee(e){return Z9[e]}function uee(e){return B9[e]}function lee(e){return{fieldPath:e.canonicalString()}}function cee(e){return B6.fromServerFormat(e.fieldPath)}function hee(e){return e instanceof L8?function(e){if("=="===e.op){if(C8(e.value))return{unaryFilter:{field:lee(e.field),op:"IS_NAN"}};if(R8(e.value))return{unaryFilter:{field:lee(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(C8(e.value))return{unaryFilter:{field:lee(e.field),op:"IS_NOT_NAN"}};if(R8(e.value))return{unaryFilter:{field:lee(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lee(e.field),op:oee(e.op),value:e.value}}}(e):e instanceof U8?function(e){var t=e.getFilters().map((function(e){return hee(e)}));return 1===t.length?t[0]:{compositeFilter:{op:uee(e.op),filters:t}}}(e):y6()}function pee(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function fee(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var dee=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),vee=([].concat((0,a.Z)(dee),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),mee=vee;[].concat(mee,["indexConfiguration","indexState","indexEntries"]);var yee=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return(0,o.Z)(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&$7(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=b(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=e9(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,s=b(this.mutations);try{for(s.s();!(a=s.n()).done;){var o=a.value;o.key.isEqual(e.key)&&(t=e9(o,e,t,this.localWriteTime))}}catch(u){s.e(u)}finally{s.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=x9();return this.mutations.forEach((function(i){var a=e.get(i.key),s=a.overlayedDocument,o=n.applyToLocalView(s,a.mutatedFields),u=J7(s,o=t.has(i.key)?null:o);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(F6.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),k9())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&M6(this.mutations,e.mutations,(function(e,t){return n9(e,t)}))&&M6(this.baseMutations,e.baseMutations,(function(e,t){return n9(e,t)}))}}]),e}(),gee=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return(0,o.Z)(e,null,[{key:"from",value:function(t,n,r){g6(t.mutations.length===r.length);for(var i=I9,a=t.mutations,s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new e(t,n,r,i)}}]),e}(),_ee=function(){function e(t,n){(0,s.Z)(this,e),this.largestBatchId=t,this.mutation=n}return(0,o.Z)(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Tee=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:F6.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:F6.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:l8.EMPTY_BYTE_STRING;(0,s.Z)(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return(0,o.Z)(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Eee=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.oe=t}));function xee(e){var t=iee({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?w7(t,t.limit,"L"):t}var bee=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,[{key:"ae",value:function(e,t){this.he(e,t),t.le()}},{key:"he",value:function(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(p8(e.integerValue));else if("doubleValue"in e){var n=p8(e.doubleValue);isNaN(n)?this.fe(t,13):(this.fe(t,15),s8(n)?t.de(0):t.de(n))}else if("timestampValue"in e){var r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e("".concat(r.seconds||"")),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(f8(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.fe(t,45),t.de(i.latitude||0),t.de(i.longitude||0)}else"mapValue"in e?O8(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):y6()}},{key:"we",value:function(e,t){this.fe(t,25),this.Te(e,t)}},{key:"Te",value:function(e,t){t._e(e)}},{key:"pe",value:function(e,t){var n=e.fields||{};this.fe(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.we(a,t),this.he(n[a],t)}}},{key:"Ie",value:function(e,t){var n=e.values||[];this.fe(t,50);var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.he(a,t)}}catch(s){i.e(s)}finally{i.f()}}},{key:"ye",value:function(e,t){var n=this;this.fe(t,37),z6.fromName(e).path.forEach((function(e){n.fe(t,60),n.Te(e,t)}))}},{key:"fe",value:function(e,t){e.de(t)}},{key:"me",value:function(e){e.de(2)}}]),e}();bee.Ee=new bee;var Iee=function(){function e(){(0,s.Z)(this,e),this.Ze=new wee}return(0,o.Z)(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ze.add(t),Q6.resolve()}},{key:"getCollectionParents",value:function(e,t){return Q6.resolve(this.Ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Q6.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Q6.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Q6.resolve(null)}},{key:"getIndexType",value:function(e,t){return Q6.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Q6.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Q6.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Q6.resolve(V6.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Q6.resolve(V6.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Q6.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Q6.resolve()}}]),e}(),wee=function(){function e(){(0,s.Z)(this,e),this.index={}}return(0,o.Z)(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new i7(U6.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new i7(U6.comparator)).toArray()}}]),e}();new Uint8Array(0);var kee=function(){function e(t,n,r){(0,s.Z)(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return(0,o.Z)(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();kee.DEFAULT_COLLECTION_PERCENTILE=10,kee.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kee.DEFAULT=new kee(41943040,kee.DEFAULT_COLLECTION_PERCENTILE,kee.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kee.DISABLED=new kee(-1,0,0);var See=function(){function e(t){(0,s.Z)(this,e),this.Pn=t}return(0,o.Z)(e,[{key:"next",value:function(){return this.Pn+=2,this.Pn}}],[{key:"Vn",value:function(){return new e(0)}},{key:"Sn",value:function(){return new e(-1)}}]),e}();var Ree=function(){function e(){(0,s.Z)(this,e),this.changes=new v9((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return(0,o.Z)(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,l7.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Q6.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var Cee=(0,o.Z)((function e(t,n){(0,s.Z)(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Dee=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return(0,o.Z)(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&e9(r.mutation,e,s7.empty(),P6.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,k9()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k9(),i=E9();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=_9();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=E9();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,k9())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=y9(),a=b9(),s=b9();return t.forEach((function(e,t){var s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof i9)?i=i.insert(t.key,t):void 0!==s?(a.set(t.key,s.mutation.getFieldMask()),e9(s.mutation,t,s.mutation.getFieldMask(),P6.now())):a.set(t.key,s7.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return s.set(e,new Cee(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),s}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=b9(),i=new t7((function(e,t){return e-t})),a=k9();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=b(e);try{var s=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var s=r.get(n)||s7.empty();s=e.applyToLocalView(a,s),r.set(n,s);var o=(i.get(e.batchId)||k9()).add(n);i=i.insert(e.batchId,o)}}))};for(a.s();!(n=a.n()).done;)s()}catch(o){a.e(o)}finally{a.f()}})).next((function(){for(var s=[],o=i.getReverseIterator(),u=function(){var i=o.getNext(),u=i.key,l=i.value,c=x9();l.forEach((function(e){if(!a.has(e)){var n=J7(t.get(e),r.get(e));null!==n&&c.set(e,n),a=a.add(e)}})),s.push(n.documentOverlayCache.saveOverlays(e,u,c))};o.hasNext();)u();return Q6.waitFor(s)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return z6.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):E7(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var s=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Q6.resolve(E9()),o=-1,u=a;return s.next((function(t){return Q6.forEach(t,(function(t,n){return o<n.largestBatchId&&(o=n.largestBatchId),a.get(t)?Q6.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,k9())})).next((function(e){return{batchId:o,changes:T9(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new z6(t)).next((function(e){var t=_9();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=_9();return this.indexManager.getCollectionParents(e,i).next((function(s){return Q6.forEach(s,(function(s){var o=function(e,t){return new v7(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return r.getDocumentsMatchingCollectionQuery(e,o,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,l7.newInvalidDocument(r)))}));var n=_9();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&e9(a.mutation,i,s7.empty(),P6.now()),C7(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Aee=function(){function e(t){(0,s.Z)(this,e),this.Tt=t,this.es=new Map,this.ns=new Map}return(0,o.Z)(e,[{key:"getBundleMetadata",value:function(e,t){return Q6.resolve(this.es.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.es.set(t.id,{id:(n=t).id,version:n.version,createTime:V9(n.createTime)}),Q6.resolve()}},{key:"getNamedQuery",value:function(e,t){return Q6.resolve(this.ns.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ns.set(t.name,function(e){return{name:e.name,query:xee(e.bundledQuery),readTime:V9(e.readTime)}}(t)),Q6.resolve()}}]),e}(),Oee=function(){function e(){(0,s.Z)(this,e),this.overlays=new t7(z6.comparator),this.ss=new Map}return(0,o.Z)(e,[{key:"getOverlay",value:function(e,t){return Q6.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=E9();return Q6.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ce(e,t,i)})),Q6.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ss.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ss.delete(n)),Q6.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=E9(),i=t.length+1,a=new z6(t.child("")),s=this.overlays.getIteratorFrom(a);s.hasNext();){var o=s.getNext().value,u=o.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&o.largestBatchId>n&&r.set(o.getKey(),o)}return Q6.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new t7((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var s=a.getNext().value;if(s.getKey().getCollectionGroup()===t&&s.largestBatchId>n){var o=i.get(s.largestBatchId);null===o&&(o=E9(),i=i.insert(s.largestBatchId,o)),o.set(s.getKey(),s)}}for(var u=E9(),l=i.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Q6.resolve(u)}},{key:"ce",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ss.get(r.largestBatchId).delete(n.key);this.ss.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new _ee(t,n));var a=this.ss.get(t);void 0===a&&(a=k9(),this.ss.set(t,a)),this.ss.set(t,a.add(n.key))}}]),e}(),Nee=function(){function e(){(0,s.Z)(this,e),this.rs=new i7(Mee.os),this.us=new i7(Mee.cs)}return(0,o.Z)(e,[{key:"isEmpty",value:function(){return this.rs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Mee(e,t);this.rs=this.rs.add(n),this.us=this.us.add(n)}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ls(new Mee(e,t))}},{key:"fs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ds",value:function(e){var t=this,n=new z6(new U6([])),r=new Mee(n,e),i=new Mee(n,e+1),a=[];return this.us.forEachInRange([r,i],(function(e){t.ls(e),a.push(e.key)})),a}},{key:"_s",value:function(){var e=this;this.rs.forEach((function(t){return e.ls(t)}))}},{key:"ls",value:function(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}},{key:"ws",value:function(e){var t=new z6(new U6([])),n=new Mee(t,e),r=new Mee(t,e+1),i=k9();return this.us.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Mee(e,0),n=this.rs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Mee=function(){function e(t,n){(0,s.Z)(this,e),this.key=t,this.gs=n}return(0,o.Z)(e,null,[{key:"os",value:function(e,t){return z6.comparator(e.key,t.key)||N6(e.gs,t.gs)}},{key:"cs",value:function(e,t){return N6(e.gs,t.gs)||z6.comparator(e.key,t.key)}}]),e}(),Pee=function(){function e(t,n){(0,s.Z)(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new i7(Mee.os)}return(0,o.Z)(e,[{key:"checkEmpty",value:function(e){return Q6.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new yee(i,t,n,r);this.mutationQueue.push(a);var s,o=b(r);try{for(o.s();!(s=o.n()).done;){var u=s.value;this.ps=this.ps.add(new Mee(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(l){o.e(l)}finally{o.f()}return Q6.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Q6.resolve(this.Is(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ts(n),i=r<0?0:r;return Q6.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Q6.resolve(0===this.mutationQueue.length?-1:this.ys-1)}},{key:"getAllMutationBatches",value:function(e){return Q6.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Mee(t,0),i=new Mee(t,Number.POSITIVE_INFINITY),a=[];return this.ps.forEachInRange([r,i],(function(e){var t=n.Is(e.gs);a.push(t)})),Q6.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new i7(N6);return t.forEach((function(e){var t=new Mee(e,0),i=new Mee(e,Number.POSITIVE_INFINITY);n.ps.forEachInRange([t,i],(function(e){r=r.add(e.gs)}))})),Q6.resolve(this.Es(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;z6.isDocumentKey(i)||(i=i.child(""));var a=new Mee(new z6(i),0),s=new i7(N6);return this.ps.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.gs)),!0)}),a),Q6.resolve(this.Es(s))}},{key:"Es",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Is(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;g6(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ps;return Q6.forEach(t.mutations,(function(i){var a=new Mee(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ps=r}))}},{key:"bn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Mee(t,0),r=this.ps.firstAfterOrEqual(n);return Q6.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Q6.resolve()}},{key:"As",value:function(e,t){return this.Ts(e)}},{key:"Ts",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Is",value:function(e){var t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Fee=function(){function e(t){(0,s.Z)(this,e),this.Rs=t,this.docs=new t7(z6.comparator),this.size=0}return(0,o.Z)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Rs(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Q6.resolve(n?n.document.mutableCopy():l7.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=y9();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():l7.newInvalidDocument(e))})),Q6.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=y9(),a=t.path,s=new z6(a.child("")),o=this.docs.getIteratorFrom(s);o.hasNext();){var u=o.getNext(),l=u.key,c=u.value.document;if(!a.isPrefixOf(l.path))break;l.path.length>a.length+1||W6(j6(c),n)<=0||(r.has(c.key)||C7(t,c))&&(i=i.insert(c.key,c.mutableCopy()))}return Q6.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){y6()}},{key:"bs",value:function(e,t){return Q6.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Lee(this)}},{key:"getSize",value:function(e){return Q6.resolve(this.size)}}]),e}(),Lee=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).Xn=e,r}return(0,o.Z)(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Xn.addEntry(e,i)):t.Xn.removeEntry(r)})),Q6.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Xn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Xn.getEntries(e,t)}}]),n}(Ree),Uee=function(){function e(t){(0,s.Z)(this,e),this.persistence=t,this.vs=new v9((function(e){return p7(e)}),f7),this.lastRemoteSnapshotVersion=F6.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new Nee,this.targetCount=0,this.Ss=See.Vn()}return(0,o.Z)(e,[{key:"forEachTarget",value:function(e,t){return this.vs.forEach((function(e,n){return t(n)})),Q6.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Q6.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Q6.resolve(this.Ps)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ss.next(),Q6.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ps&&(this.Ps=t),Q6.resolve()}},{key:"xn",value:function(e){this.vs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ss=new See(t),this.highestTargetId=t),e.sequenceNumber>this.Ps&&(this.Ps=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.xn(t),this.targetCount+=1,Q6.resolve()}},{key:"updateTargetData",value:function(e,t){return this.xn(t),Q6.resolve()}},{key:"removeTargetData",value:function(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,Q6.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.vs.forEach((function(s,o){o.sequenceNumber<=t&&null===n.get(o.targetId)&&(r.vs.delete(s),a.push(r.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),Q6.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Q6.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.vs.get(t)||null;return Q6.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Vs.hs(t,n),Q6.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Vs.fs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Q6.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Vs.ds(t),Q6.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Vs.ws(t);return Q6.resolve(n)}},{key:"containsKey",value:function(e,t){return Q6.resolve(this.Vs.containsKey(t))}}]),e}(),Zee=function(){function e(t,n){var r=this;(0,s.Z)(this,e),this.Ds={},this.overlays={},this.Cs=new $6(0),this.xs=!1,this.xs=!0,this.referenceDelegate=t(this),this.Ns=new Uee(this),this.indexManager=new Iee,this.remoteDocumentCache=new Fee((function(e){return r.referenceDelegate.ks(e)})),this.Tt=new Eee(n),this.Os=new Aee(this.Tt)}return(0,o.Z)(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.xs=!1,Promise.resolve()}},{key:"started",get:function(){return this.xs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Oee,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ds[e.toKey()];return n||(n=new Pee(t,this.referenceDelegate),this.Ds[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ns}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Os}},{key:"runTransaction",value:function(e,t,n){var r=this;f6("MemoryPersistence","Starting transaction:",e);var i=new Bee(this.Cs.next());return this.referenceDelegate.Ms(),n(i).next((function(e){return r.referenceDelegate.Fs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e,t){return Q6.or(Object.values(this.Ds).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Bee=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return(0,o.Z)(n)}(q6),zee=function(){function e(t){(0,s.Z)(this,e),this.persistence=t,this.Bs=new Nee,this.Ls=null}return(0,o.Z)(e,[{key:"Us",get:function(){if(this.Ls)return this.Ls;throw y6()}},{key:"addReference",value:function(e,t,n){return this.Bs.addReference(n,t),this.Us.delete(n.toString()),Q6.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Bs.removeReference(n,t),this.Us.add(n.toString()),Q6.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Us.add(t.toString()),Q6.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Bs.ds(t.targetId).forEach((function(e){return n.Us.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Us.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ms",value:function(){this.Ls=new Set}},{key:"Fs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q6.forEach(this.Us,(function(r){var i=z6.fromPath(r);return t.Ks(e,i).next((function(e){e||n.removeEntry(i,F6.min())}))})).next((function(){return t.Ls=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ks(e,t).next((function(e){e?n.Us.delete(t.toString()):n.Us.add(t.toString())}))}},{key:"ks",value:function(e){return 0}},{key:"Ks",value:function(e,t){var n=this;return Q6.or([function(){return Q6.resolve(n.Bs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.$s(e,t)}])}}],[{key:"qs",value:function(t){return new e(t)}}]),e}();var Gee=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.targetId=t,this.fromCache=n,this.Ci=r,this.xi=i}return(0,o.Z)(e,null,[{key:"Ni",value:function(t,n){var r,i=k9(),a=k9(),s=b(n.docChanges);try{for(s.s();!(r=s.n()).done;){var o=r.value;switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}}}catch(u){s.e(u)}finally{s.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Hee=function(){function e(){(0,s.Z)(this,e),this.ki=!1}return(0,o.Z)(e,[{key:"initialize",value:function(e,t){this.Oi=e,this.indexManager=t,this.ki=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Mi(e,t).next((function(a){return a||i.Fi(e,t,r,n)})).next((function(n){return n||i.$i(e,t)}))}},{key:"Mi",value:function(e,t){var n=this;if(g7(t))return Q6.resolve(null);var r=b7(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=w7(t,null,"F"),r=b7(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var s=k9.apply(void 0,(0,a.Z)(i));return n.Oi.getDocuments(e,s).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var a=n.Bi(t,i);return n.Li(t,a,s,r.readTime)?n.Mi(e,w7(t,null,"F")):n.qi(e,a,t,r)}))}))})))}))}},{key:"Fi",value:function(e,t,n,r){var i=this;return g7(t)||r.isEqual(F6.min())?this.$i(e,t):this.Oi.getDocuments(e,n).next((function(a){var s=i.Bi(t,a);return i.Li(t,s,n,r)?i.$i(e,t):(p6()<=jt.DEBUG&&f6("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),R7(t)),i.qi(e,s,t,H6(r,-1)))}))}},{key:"Bi",value:function(e,t){var n=new i7(A7(e));return t.forEach((function(t,r){C7(e,r)&&(n=n.add(r))})),n}},{key:"Li",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"$i",value:function(e,t){return p6()<=jt.DEBUG&&f6("QueryEngine","Using full collection scan to execute query:",R7(t)),this.Oi.getDocumentsMatchingQuery(e,t,V6.min())}},{key:"qi",value:function(e,t,n,r){return this.Oi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),jee=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.persistence=t,this.Ui=n,this.Tt=i,this.Ki=new t7(N6),this.Gi=new v9((function(e){return p7(e)}),f7),this.Qi=new Map,this.ji=t.getRemoteDocumentCache(),this.Ns=t.getTargetCache(),this.Os=t.getBundleCache(),this.zi(r)}return(0,o.Z)(e,[{key:"zi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Dee(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ki)}))}}]),e}();function Vee(e,t,n,r){return new jee(e,t,n,r)}function Wee(e,t){return Yee.apply(this,arguments)}function Yee(){return Yee=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_6(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.zi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],s=[],o=k9(),u=b(t);try{for(u.s();!(i=u.n()).done;){var l=i.value;a.push(l.batchId);var c,h=b(l.mutations);try{for(h.s();!(c=h.n()).done;){var p=c.value;o=o.add(p.key)}}catch(_){h.e(_)}finally{h.f()}}}catch(_){u.e(_)}finally{u.f()}var f,d=b(n);try{for(d.s();!(f=d.n()).done;){var v=f.value;s.push(v.batchId);var m,y=b(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;o=o.add(g.key)}}catch(_){y.e(_)}finally{y.f()}}}catch(_){d.e(_)}finally{d.f()}return r.localDocuments.getDocuments(e,o).next((function(e){return{Wi:e,removedBatchIds:a,addedBatchIds:s}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Yee.apply(this,arguments)}function qee(e,t){var n=_6(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ji.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),s=Q6.resolve();return a.forEach((function(e){s=s.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);g6(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=k9(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Xee(e){var t=_6(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ns.getLastRemoteSnapshotVersion(e)}))}function Kee(e,t){var n=_6(e),r=t.snapshotVersion,i=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ji.newChangeBuffer({trackRemovals:!0});i=n.Ki;var s=[];t.targetChanges.forEach((function(a,o){var u=i.get(o);if(u){s.push(n.Ns.removeMatchingKeys(e,a.removedDocuments,o).next((function(){return n.Ns.addMatchingKeys(e,a.addedDocuments,o)})));var l=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(o)?l=l.withResumeToken(l8.EMPTY_BYTE_STRING,F6.min()).withLastLimboFreeSnapshotVersion(F6.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)),i=i.insert(o,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,l,a)&&s.push(n.Ns.updateTargetData(e,l))}}));var o=y9(),u=k9();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(Qee(e,a,t.documentUpdates).next((function(e){o=e.Hi,u=e.Ji}))),!r.isEqual(F6.min())){var l=n.Ns.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ns.setTargetsMetadata(e,e.currentSequenceNumber,r)}));s.push(l)}return Q6.waitFor(s).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,o,u)})).next((function(){return o}))})).then((function(e){return n.Ki=i,e}))}function Qee(e,t,n){var r=k9(),i=k9();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=y9();return n.forEach((function(n,a){var s=e.get(n);a.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(F6.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):f6("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),{Hi:r,Ji:i}}))}function Jee(e,t){var n=_6(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function $ee(e,t){var n=_6(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ns.getTargetData(e,t).next((function(i){return i?(r=i,Q6.resolve(r)):n.Ns.allocateTargetId(e).next((function(i){return r=new Tee(t,i,0,e.currentSequenceNumber),n.Ns.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ki.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(e.targetId,e),n.Gi.set(t,e.targetId)),e}))}function ete(e,t,n){return tte.apply(this,arguments)}function tte(){return tte=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r){var i,a,s;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_6(t),a=i.Ki.get(n),s=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",s,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),J6(e.t1)){e.next=12;break}throw e.t1;case 12:f6("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ki=i.Ki.remove(n),i.Gi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),tte.apply(this,arguments)}function nte(e,t,n){var r=_6(e),i=F6.min(),a=k9();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=_6(e),i=r.Gi.get(n);return void 0!==i?Q6.resolve(r.Ki.get(i)):r.Ns.getTargetData(t,n)}(r,e,b7(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Ui.getDocumentsMatchingQuery(e,t,n?i:F6.min(),n?a:k9())})).next((function(e){return rte(r,D7(t),e),{documents:e,Yi:a}}))}))}function rte(e,t,n){var r=e.Qi.get(t)||F6.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Qi.set(t,r)}var ite=function(){function e(){(0,s.Z)(this,e),this.activeTargetIds=R9()}return(0,o.Z)(e,[{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"ir",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"nr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),ate=function(){function e(){(0,s.Z)(this,e),this.Ur=new ite,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return(0,o.Z)(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Kr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.ir(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Kr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new ite,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),ste=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,[{key:"Gr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),ote=function(){function e(){var t=this;(0,s.Z)(this,e),this.Qr=function(){return t.jr()},this.zr=function(){return t.Wr()},this.Hr=[],this.Jr()}return(0,o.Z)(e,[{key:"Gr",value:function(e){this.Hr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}},{key:"Jr",value:function(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}},{key:"jr",value:function(){f6("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=b(this.Hr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){f6("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=b(this.Hr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),ute={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},lte=function(){function e(t){(0,s.Z)(this,e),this.Yr=t.Yr,this.Zr=t.Zr}return(0,o.Z)(e,[{key:"Xr",value:function(e){this.eo=e}},{key:"no",value:function(e){this.so=e}},{key:"onMessage",value:function(e){this.io=e}},{key:"close",value:function(){this.Zr()}},{key:"send",value:function(e){this.Yr(e)}},{key:"ro",value:function(){this.eo()}},{key:"oo",value:function(e){this.so(e)}},{key:"uo",value:function(e){this.io(e)}}]),e}(),cte=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return(0,o.Z)(n,[{key:"wo",value:function(e,t,n,r){return new Promise((function(i,a){var s=new o6;s.setWithCredentials(!0),s.listenOnce(n6.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case t6.NO_ERROR:var t=s.getResponseJson();f6("Connection","XHR received:",JSON.stringify(t)),i(t);break;case t6.TIMEOUT:f6("Connection",'RPC "'+e+'" timed out'),a(new E6(T6.DEADLINE_EXCEEDED,"Request time out"));break;case t6.HTTP_ERROR:var n=s.getStatus();if(f6("Connection",'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var o=null==r?void 0:r.error;if(o&&o.status&&o.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(T6).indexOf(t)>=0?t:T6.UNKNOWN}(o.status);a(new E6(u,o.message))}else a(new E6(T6.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new E6(T6.UNAVAILABLE,"Connection failed."));break;default:y6()}}finally{f6("Connection",'RPC "'+e+'" completed.')}}));var o=JSON.stringify(r);s.send(t,"POST",o,n,15)}))}},{key:"yo",value:function(e,t,n){var r=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=$5(),a=e6(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new a6({})),this._o(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var o=r.join("");f6("Connection","Creating WebChannel: "+o,s);var u=i.createWebChannel(o,s),l=!1,c=!1,h=new lte({Yr:function(e){c?f6("Connection","Not sending because WebChannel is closed:",e):(l||(f6("Connection","Opening WebChannel transport."),u.open(),l=!0),f6("Connection","WebChannel sending:",e),u.send(e))},Zr:function(){return u.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(u,s6.EventType.OPEN,(function(){c||f6("Connection","WebChannel transport opened.")})),p(u,s6.EventType.CLOSE,(function(){c||(c=!0,f6("Connection","WebChannel transport closed"),h.oo())})),p(u,s6.EventType.ERROR,(function(e){c||(c=!0,v6("Connection","WebChannel transport errored:",e),h.oo(new E6(T6.UNAVAILABLE,"The operation could not be completed")))})),p(u,s6.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];g6(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){f6("Connection","WebChannel received error:",i);var a=i.status,s=function(e){var t=u9[e];if(void 0!==t)return d9(t)}(a),o=i.message;void 0===s&&(s=T6.INTERNAL,o="Unknown error status: "+a+" with message "+i.message),c=!0,h.oo(new E6(s,o)),u.close()}else f6("Connection","WebChannel received:",n),h.uo(n)}})),p(a,r6.STAT_EVENT,(function(e){e.stat===i6.PROXY?f6("Connection","Detected buffering proxy"):e.stat===i6.NOPROXY&&f6("Connection","Detected no buffering proxy")})),setTimeout((function(){h.ro()}),0),h}}]),n}(function(){function e(t){(0,s.Z)(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.co=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return(0,o.Z)(e,[{key:"ho",get:function(){return!1}},{key:"lo",value:function(e,t,n,r,i){var a=this.fo(e,t);f6("RestConnection","Sending: ",a,n);var s={};return this._o(s,r,i),this.wo(e,a,s,n).then((function(e){return f6("RestConnection","Received: ",e),e}),(function(t){throw v6("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"mo",value:function(e,t,n,r,i,a){return this.lo(e,t,n,r,i)}},{key:"_o",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+c6,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"fo",value:function(e,t){var n=ute[e];return"".concat(this.co,"/v1/").concat(t,":").concat(n)}}]),e}());function hte(){return"undefined"!=typeof document?document:null}function pte(e){return new z9(e,!0)}var fte=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;(0,s.Z)(this,e),this.Ys=t,this.timerId=n,this.po=r,this.Io=i,this.To=a,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}return(0,o.Z)(e,[{key:"reset",value:function(){this.Eo=0}},{key:"bo",value:function(){this.Eo=this.To}},{key:"vo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Eo+this.Po()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,n-r);i>0&&f6("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Eo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,(function(){return t.Ro=Date.now(),e()})),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}},{key:"Vo",value:function(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}},{key:"cancel",value:function(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}},{key:"Po",value:function(){return(Math.random()-.5)*this.Eo}}]),e}(),dte=function(){function e(t,n,r,i,a,o,u,l){(0,s.Z)(this,e),this.Ys=t,this.So=r,this.Do=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=l,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new fte(t,n)}return(0,o.Z)(e,[{key:"Oo",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Fo()}},{key:"stop",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Oo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$o",value:function(){this.state=0,this.ko.reset()}},{key:"Bo",value:function(){var e=this;this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,(function(){return e.Lo()})))}},{key:"qo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Lo",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"Ko",value:function(){this.No&&(this.No.cancel(),this.No=null)}},{key:"close",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,4!==t?this.ko.reset():n&&n.code===T6.RESOURCE_EXHAUSTED?(d6(n.toString()),d6("Using maximum backoff delay to prevent overloading the backend."),this.ko.bo()):n&&n.code===T6.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Go(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.no(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Go",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=(0,i.Z)(t,2),a=r[0],s=r[1];e.Co===n&&e.jo(a,s)}),(function(n){t((function(){var t=new E6(T6.UNKNOWN,"Fetching auth token failed: "+n.message);return e.zo(t)}))}))}},{key:"jo",value:function(e,t){var n=this,r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.No=n.Ys.enqueueAfterDelay(n.Do,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.no((function(e){r((function(){return n.zo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Fo",value:function(){var e=this;this.state=5,this.ko.vo((0,ht.Z)((0,ct.Z)().mark((function t(){return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"zo",value:function(e){return f6("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Qo",value:function(e){var t=this;return function(n){t.Ys.enqueueAndForget((function(){return t.Co===e?n():(f6("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),vte=function(e){l(n,e);var t=v(n);function n(e,r,i,a,o,u){var l;return(0,s.Z)(this,n),(l=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).Tt=o,l}return(0,o.Z)(n,[{key:"Wo",value:function(e,t){return this.connection.yo("Listen",e,t)}},{key:"onMessage",value:function(e){this.ko.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:y6()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.yt?(g6(void 0===t||"string"==typeof t),l8.fromBase64String(t||"")):(g6(void 0===t||t instanceof Uint8Array),l8.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,o=s&&function(e){var t=void 0===e.code?T6.UNKNOWN:d9(e.code);return new E6(t,e.message||"")}(s);n=new N9(r,i,a,o||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var l=X9(e,u.document.name),c=V9(u.document.updateTime),h=u.document.createTime?V9(u.document.createTime):F6.min(),p=new o7({mapValue:{fields:u.document.fields}}),f=l7.newFoundDocument(l,c,h,p),d=u.targetIds||[],v=u.removedTargetIds||[];n=new A9(d,v,f.key,f)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=X9(e,m.document),g=m.readTime?V9(m.readTime):F6.min(),_=l7.newNoDocument(y,g),T=m.removedTargetIds||[];n=new A9([],T,_.key,_)}else if("documentRemove"in t){t.documentRemove;var E=t.documentRemove;E.document;var x=X9(e,E.document),b=E.removedTargetIds||[];n=new A9([],b,x,null)}else{if(!("filter"in t))return y6();t.filter;var I=t.filter;I.targetId;var w=I.count||0,k=new p9(w),S=I.targetId;n=new O9(S,k)}return n}(this.Tt,e),n=function(e){if(!("targetChange"in e))return F6.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?F6.min():t.readTime?V9(t.readTime):F6.min()}(e);return this.listener.Ho(t,n)}},{key:"Jo",value:function(e){var t={};t.database=J9(this.Tt),t.addTarget=function(e,t){var n,r=t.target;return(n=d7(r)?{documents:nee(e,r)}:{query:ree(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=H9(e,t.resumeToken):t.snapshotVersion.compareTo(F6.min())>0&&(n.readTime=G9(e,t.snapshotVersion.toTimestamp())),n}(this.Tt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return y6()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.Tt,e);n&&(t.labels=n),this.qo(t)}},{key:"Yo",value:function(e){var t={};t.database=J9(this.Tt),t.removeTarget=e,this.qo(t)}}]),n}(dte),mte=function(e){l(n,e);var t=v(n);function n(e,r,i,a,o,u){var l;return(0,s.Z)(this,n),(l=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).Tt=o,l.Zo=!1,l}return(0,o.Z)(n,[{key:"Xo",get:function(){return this.Zo}},{key:"start",value:function(){this.Zo=!1,this.lastStreamToken=void 0,lt(c(n.prototype),"start",this).call(this)}},{key:"Go",value:function(){this.Zo&&this.tu([])}},{key:"Wo",value:function(e,t){return this.connection.yo("Write",e,t)}},{key:"onMessage",value:function(e){if(g6(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();var t=function(e,t){return e&&e.length>0?(g6(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?V9(e.updateTime):V9(t);return n.isEqual(F6.min())&&(n=V9(t)),new q7(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=V9(e.commitTime);return this.listener.eu(n,t)}return g6(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}},{key:"su",value:function(){var e={};e.database=J9(this.Tt),this.qo(e)}},{key:"tu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return tee(t.Tt,e)}))};this.qo(n)}}]),n}(dte),yte=function(e){l(n,e);var t=v(n);function n(e,r,i,a){var o;return(0,s.Z)(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.Tt=a,o.iu=!1,o}return(0,o.Z)(n,[{key:"ru",value:function(){if(this.iu)throw new E6(T6.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"lo",value:function(e,t,n){var r=this;return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var s=(0,i.Z)(a,2),o=s[0],u=s[1];return r.connection.lo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===T6.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new E6(T6.UNKNOWN,e.toString())}))}},{key:"mo",value:function(e,t,n,r){var a=this;return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(s){var o=(0,i.Z)(s,2),u=o[0],l=o[1];return a.connection.mo(e,t,n,u,l,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===T6.UNAUTHENTICATED&&(a.authCredentials.invalidateToken(),a.appCheckCredentials.invalidateToken()),e):new E6(T6.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.iu=!0}}]),n}(function(){return(0,o.Z)((function e(){(0,s.Z)(this,e)}))}());var gte=function(){function e(t,n){(0,s.Z)(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}return(0,o.Z)(e,[{key:"au",value:function(){var e=this;0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.uu=null,e.lu("Backend didn't respond within 10 seconds."),e.hu("Offline"),Promise.resolve()})))}},{key:"fu",value:function(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.hu("Offline")))}},{key:"set",value:function(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}},{key:"hu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"lu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.cu?(d6(t),this.cu=!1):f6("OnlineStateTracker",t)}},{key:"du",value:function(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}]),e}(),_te=(0,o.Z)((function e(t,n,r,i,a){var o=this;(0,s.Z)(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=a,this.yu.Gr((function(e){r.enqueueAndForget((0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Dte(o),!e.t0){e.next=5;break}return f6("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=_6(t)).mu.add(4),e.next=4,xte(n);case 4:return n.pu.set("Unknown"),n.mu.delete(4),e.next=8,Tte(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.pu=new gte(r,i)}));function Tte(e){return Ete.apply(this,arguments)}function Ete(){return Ete=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Dte(t)){e.next=18;break}n=b(t.gu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Ete.apply(this,arguments)}function xte(e){return bte.apply(this,arguments)}function bte(){return bte=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=b(t.gu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),bte.apply(this,arguments)}function Ite(e,t){var n=_6(e);n.wu.has(t.targetId)||(n.wu.set(t.targetId,t),Cte(n)?Rte(n):ane(n).Mo()&&kte(n,t))}function wte(e,t){var n=_6(e),r=ane(n);n.wu.delete(t),r.Mo()&&Ste(n,t),0===n.wu.size&&(r.Mo()?r.Bo():Dte(n)&&n.pu.set("Unknown"))}function kte(e,t){e.Iu.Ft(t.targetId),ane(e).Jo(t)}function Ste(e,t){e.Iu.Ft(t),ane(e).Yo(t)}function Rte(e){e.Iu=new P9({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ie:function(t){return e.wu.get(t)||null}}),ane(e).start(),e.pu.au()}function Cte(e){return Dte(e)&&!ane(e).Oo()&&e.wu.size>0}function Dte(e){return 0===_6(e).mu.size}function Ate(e){e.Iu=void 0}function Ote(e){return Nte.apply(this,arguments)}function Nte(){return Nte=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.wu.forEach((function(e,n){kte(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Nte.apply(this,arguments)}function Mte(e,t){return Pte.apply(this,arguments)}function Pte(){return Pte=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ate(t),Cte(t)?(t.pu.fu(n),Rte(t)):t.pu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Pte.apply(this,arguments)}function Fte(e,t,n){return Lte.apply(this,arguments)}function Lte(){return Lte=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r){var i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.pu.set("Online"),!(n instanceof N9&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=b(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(s=a.value,e.t0=t.wu.has(s),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(s,r);case 10:t.wu.delete(s),t.Iu.removeTarget(s);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),f6("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Ute(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof A9?t.Iu.Qt(n):n instanceof O9?t.Iu.Zt(n):t.Iu.Wt(n),r.isEqual(F6.min())){e.next=29;break}return e.prev=14,e.next=17,Xee(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Iu.ee(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.wu.get(r);i&&e.wu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.wu.get(t);if(n){e.wu.set(t,n.withResumeToken(l8.EMPTY_BYTE_STRING,n.snapshotVersion)),Ste(e,t);var r=new Tee(n.target,t,1,n.sequenceNumber);kte(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),f6("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Ute(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Lte.apply(this,arguments)}function Ute(e,t,n){return Zte.apply(this,arguments)}function Zte(){return Zte=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J6(n)){e.next=2;break}throw n;case 2:return t.mu.add(1),e.next=5,xte(t);case 5:t.pu.set("Offline"),r||(r=function(){return Xee(t.localStore)}),t.asyncQueue.enqueueRetryable((0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f6("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.mu.delete(1),e.next=6,Tte(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Zte.apply(this,arguments)}function Bte(e,t){return t().catch((function(n){return Ute(e,n,t)}))}function zte(e){return Gte.apply(this,arguments)}function Gte(){return Gte=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i,a;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_6(t),r=sne(n),i=n._u.length>0?n._u[n._u.length-1].batchId:-1;case 2:if(!Hte(n)){e.next=19;break}return e.prev=3,e.next=6,Jee(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n._u.length&&r.Bo(),e.abrupt("break",19);case 10:i=a.batchId,jte(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Ute(n,e.t0);case 17:e.next=2;break;case 19:Vte(n)&&Wte(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Gte.apply(this,arguments)}function Hte(e){return Dte(e)&&e._u.length<10}function jte(e,t){e._u.push(t);var n=sne(e);n.Mo()&&n.Xo&&n.tu(t.mutations)}function Vte(e){return Dte(e)&&!sne(e).Oo()&&e._u.length>0}function Wte(e){sne(e).start()}function Yte(e){return qte.apply(this,arguments)}function qte(){return qte=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sne(t).su();case 1:case"end":return e.stop()}}),e)}))),qte.apply(this,arguments)}function Xte(e){return Kte.apply(this,arguments)}function Kte(){return Kte=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i,a;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=sne(t),r=b(t._u);try{for(r.s();!(i=r.n()).done;)a=i.value,n.tu(a.mutations)}catch(s){r.e(s)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Kte.apply(this,arguments)}function Qte(e,t,n){return Jte.apply(this,arguments)}function Jte(){return Jte=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r){var i,a;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t._u.shift(),a=gee.from(i,n,r),e.next=3,Bte(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,zte(t);case 5:case"end":return e.stop()}}),e)}))),Jte.apply(this,arguments)}function $te(e,t){return ene.apply(this,arguments)}function ene(){return ene=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&sne(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f9(i=n.code)||i===T6.ABORTED){e.next=7;break}return r=t._u.shift(),sne(t).$o(),e.next=5,Bte(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,zte(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Vte(t)&&Wte(t);case 5:case"end":return e.stop()}}),e)}))),ene.apply(this,arguments)}function tne(e,t){return nne.apply(this,arguments)}function nne(){return nne=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=_6(t)).asyncQueue.verifyOperationInProgress(),f6("RemoteStore","RemoteStore received new credentials"),i=Dte(r),r.mu.add(3),e.next=6,xte(r);case 6:return i&&r.pu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.mu.delete(3),e.next=12,Tte(r);case 12:case"end":return e.stop()}}),e)}))),nne.apply(this,arguments)}function rne(e,t){return ine.apply(this,arguments)}function ine(){return ine=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_6(t),!n){e.next=7;break}return r.mu.delete(2),e.next=5,Tte(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.mu.add(2),e.next=12,xte(r);case 12:r.pu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),ine.apply(this,arguments)}function ane(e){return e.Tu||(e.Tu=function(e,t,n){var r=_6(e);return r.ru(),new vte(t,r.connection,r.authCredentials,r.appCheckCredentials,r.Tt,n)}(e.datastore,e.asyncQueue,{Xr:Ote.bind(null,e),no:Mte.bind(null,e),Ho:Fte.bind(null,e)}),e.gu.push(function(){var t=(0,ht.Z)((0,ct.Z)().mark((function t(n){return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Tu.$o(),Cte(e)?Rte(e):e.pu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Tu.stop();case 6:Ate(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}function sne(e){return e.Eu||(e.Eu=function(e,t,n){var r=_6(e);return r.ru(),new mte(t,r.connection,r.authCredentials,r.appCheckCredentials,r.Tt,n)}(e.datastore,e.asyncQueue,{Xr:Yte.bind(null,e),no:$te.bind(null,e),nu:Xte.bind(null,e),eu:Qte.bind(null,e)}),e.gu.push(function(){var t=(0,ht.Z)((0,ct.Z)().mark((function t(n){return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Eu.$o(),t.next=4,zte(e);case 4:t.next=9;break;case 6:return t.next=8,e.Eu.stop();case 8:e._u.length>0&&(f6("RemoteStore","Stopping write stream with ".concat(e._u.length," pending writes")),e._u=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Eu}var one=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new x6,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return(0,o.Z)(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new E6(T6.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var s=new e(t,n,Date.now()+r,i,a);return s.start(r),s}}]),e}();function une(e,t){if(d6("AsyncQueue","".concat(t,": ").concat(e)),J6(e))return new E6(T6.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var lne=function(){function e(t){(0,s.Z)(this,e),this.comparator=t?function(e,n){return t(e,n)||z6.comparator(e.key,n.key)}:function(e,t){return z6.comparator(e.key,t.key)},this.keyedMap=_9(),this.sortedSet=new t7(this.comparator)}return(0,o.Z)(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),cne=function(){function e(){(0,s.Z)(this,e),this.Au=new t7(z6.comparator)}return(0,o.Z)(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Au.get(t);n?0!==e.type&&3===n.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==n.type?this.Au=this.Au.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Au=this.Au.remove(t):1===e.type&&2===n.type?this.Au=this.Au.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):y6():this.Au=this.Au.insert(t,e)}},{key:"Ru",value:function(){var e=[];return this.Au.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),hne=function(){function e(t,n,r,i,a,o,u,l,c){(0,s.Z)(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=l,this.hasCachedResults=c}return(0,o.Z)(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&k7(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var s=[];return n.forEach((function(e){s.push({type:0,doc:e})})),new e(t,n,lne.emptySet(n),s,r,i,!0,!1,a)}}]),e}(),pne=(0,o.Z)((function e(){(0,s.Z)(this,e),this.bu=void 0,this.listeners=[]})),fne=(0,o.Z)((function e(){(0,s.Z)(this,e),this.queries=new v9((function(e){return S7(e)}),k7),this.onlineState="Unknown",this.vu=new Set}));function dne(e,t){return vne.apply(this,arguments)}function vne(){return vne=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s,o;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_6(t),i=n.query,a=!1,(s=r.queries.get(i))||(a=!0,s=new pne),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:s.bu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),o=une(e.t0,"Initialization of query '".concat(R7(n.query),"' failed")),e.abrupt("return",void n.onError(o));case 13:r.queries.set(i,s),s.listeners.push(n),n.Pu(r.onlineState),s.bu&&n.Vu(s.bu)&&Tne(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),vne.apply(this,arguments)}function mne(e,t){return yne.apply(this,arguments)}function yne(){return yne=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s,o;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_6(t),i=n.query,a=!1,(s=r.queries.get(i))&&(o=s.listeners.indexOf(n))>=0&&(s.listeners.splice(o,1),a=0===s.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),yne.apply(this,arguments)}function gne(e,t){var n,r=_6(e),i=!1,a=b(t);try{for(a.s();!(n=a.n()).done;){var s=n.value,o=s.query,u=r.queries.get(o);if(u){var l,c=b(u.listeners);try{for(c.s();!(l=c.n()).done;){l.value.Vu(s)&&(i=!0)}}catch(h){c.e(h)}finally{c.f()}u.bu=s}}}catch(h){a.e(h)}finally{a.f()}i&&Tne(r)}function _ne(e,t,n){var r=_6(e),i=r.queries.get(t);if(i){var a,s=b(i.listeners);try{for(s.s();!(a=s.n()).done;){a.value.onError(n)}}catch(o){s.e(o)}finally{s.f()}}r.queries.delete(t)}function Tne(e){e.vu.forEach((function(e){e.next()}))}var Ene=function(){function e(t,n,r){(0,s.Z)(this,e),this.query=t,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}return(0,o.Z)(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=b(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(s){r.e(s)}finally{r.f()}e=new hne(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Du?this.xu(e)&&(this.Su.next(e),a=!0):this.Nu(e,this.onlineState)&&(this.ku(e),a=!0),this.Cu=e,a}},{key:"onError",value:function(e){this.Su.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}},{key:"Nu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ou||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"xu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"ku",value:function(e){e=hne.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}]),e}();var xne=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.key=t})),bne=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.key=t})),Ine=function(){function e(t,n){(0,s.Z)(this,e),this.query=t,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=k9(),this.mutatedKeys=k9(),this.ju=A7(t),this.zu=new lne(this.ju)}return(0,o.Z)(e,[{key:"Wu",get:function(){return this.Ku}},{key:"Hu",value:function(e,t){var n=this,r=t?t.Ju:new cne,i=t?t.zu:this.zu,a=t?t.mutatedKeys:this.mutatedKeys,s=i,o=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),h=C7(n.query,t)?t:null,p=!!c&&n.mutatedKeys.has(c.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;c&&h?c.data.isEqual(h.data)?p!==f&&(r.track({type:3,doc:h}),d=!0):n.Yu(c,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.ju(h,u)>0||l&&n.ju(h,l)<0)&&(o=!0)):!c&&h?(r.track({type:0,doc:h}),d=!0):c&&!h&&(r.track({type:1,doc:c}),d=!0,(u||l)&&(o=!0)),d&&(h?(s=s.add(h),a=f?a.add(e):a.delete(e)):(s=s.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){var c="F"===this.query.limitType?s.last():s.first();s=s.delete(c.key),a=a.delete(c.key),r.track({type:1,doc:c})}return{zu:s,Ju:r,Li:o,mutatedKeys:a}}},{key:"Yu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;var a=e.Ju.Ru();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return y6()}};return n(e)-n(t)}(e.type,t.type)||r.ju(e.doc,t.doc)})),this.Zu(n);var s=t?this.Xu():[],o=0===this.Qu.size&&this.current?1:0,u=o!==this.Gu;return this.Gu=o,0!==a.length||u?{snapshot:new hne(this.query,e.zu,i,a,e.mutatedKeys,0===o,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),tc:s}:{tc:s}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new cne,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}},{key:"ec",value:function(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}},{key:"Zu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Ku=t.Ku.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Ku=t.Ku.delete(e)})),this.current=e.current)}},{key:"Xu",value:function(){var e=this;if(!this.current)return[];var t=this.Qu;this.Qu=k9(),this.zu.forEach((function(t){e.ec(t.key)&&(e.Qu=e.Qu.add(t.key))}));var n=[];return t.forEach((function(t){e.Qu.has(t)||n.push(new bne(t))})),this.Qu.forEach((function(e){t.has(e)||n.push(new xne(e))})),n}},{key:"nc",value:function(e){this.Ku=e.Yi,this.Qu=k9();var t=this.Hu(e.documents);return this.applyChanges(t,!0)}},{key:"sc",value:function(){return hne.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}]),e}(),wne=(0,o.Z)((function e(t,n,r){(0,s.Z)(this,e),this.query=t,this.targetId=n,this.view=r})),kne=(0,o.Z)((function e(t){(0,s.Z)(this,e),this.key=t,this.ic=!1})),Sne=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.rc={},this.oc=new v9((function(e){return S7(e)}),k7),this.uc=new Map,this.cc=new Set,this.ac=new t7(z6.comparator),this.hc=new Map,this.lc=new Nee,this.fc={},this.dc=new Map,this._c=See.Sn(),this.onlineState="Unknown",this.wc=void 0}return(0,o.Z)(e,[{key:"isPrimaryClient",get:function(){return!0===this.wc}}]),e}();function Rne(e,t){return Cne.apply(this,arguments)}function Cne(){return Cne=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s,o,u;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=rre(t),!(s=r.oc.get(n))){e.next=6;break}i=s.targetId,r.sharedClientState.addLocalQueryTarget(i),a=s.view.sc(),e.next=15;break;case 6:return e.next=8,$ee(r.localStore,b7(n));case 8:return o=e.sent,r.isPrimaryClient&&Ite(r.remoteStore,o),u=r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.targetId,e.next=14,Dne(r,n,i,"current"===u,o.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Cne.apply(this,arguments)}function Dne(e,t,n,r,i){return Ane.apply(this,arguments)}function Ane(){return Ane=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r,i,a){var s,o,u,l,c,h;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.mc=function(e,n,r){return function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r,i){var a,s,o;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Hu(r),e.t0=a.Li,!e.t0){e.next=6;break}return e.next=5,nte(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Hu(t,a)}));case 5:a=e.sent;case 6:return s=i&&i.targetChanges.get(n.targetId),o=n.view.applyChanges(a,t.isPrimaryClient,s),e.abrupt("return",(Xne(t,n.targetId,o.tc),o.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,nte(t.localStore,n,!0);case 3:return s=e.sent,o=new Ine(n,s.Yi),u=o.Hu(s.documents),l=D9.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),c=o.applyChanges(u,t.isPrimaryClient,l),Xne(t,r,c.tc),h=new wne(n,r,o),e.abrupt("return",(t.oc.set(n,h),t.uc.has(r)?t.uc.get(r).push(n):t.uc.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Ane.apply(this,arguments)}function One(e,t){return Nne.apply(this,arguments)}function Nne(){return Nne=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_6(t),i=r.oc.get(n),!((a=r.uc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.uc.set(i.targetId,a.filter((function(e){return!k7(e,n)}))),void r.oc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,ete(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),wte(r.remoteStore,i.targetId),Yne(r,i.targetId)})).catch(X6);case 9:e.next=14;break;case 11:return Yne(r,i.targetId),e.next=14,ete(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Nne.apply(this,arguments)}function Mne(e,t,n){return Pne.apply(this,arguments)}function Pne(){return Pne=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r){var i,a,s;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ire(t),e.prev=1,e.next=4,function(e,t){var n,r,i=_6(e),a=P6.now(),s=t.reduce((function(e,t){return e.add(t.key)}),k9());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var o=y9(),u=k9();return i.ji.getEntries(e,s).next((function(e){(o=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,o)})).next((function(r){n=r;var s,o=[],u=b(t);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=t9(l,n.get(l.key).overlayedDocument);null!=c&&o.push(new i9(l.key,c,u7(c.value.mapValue),X7.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,o,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:T9(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.fc[e.currentUser.toKey()];r||(r=new t7(N6)),r=r.insert(t,n),e.fc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Jne(i,a.changes);case 9:return e.next=11,zte(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),s=une(e.t0,"Failed to persist write"),r.reject(s);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Pne.apply(this,arguments)}function Fne(e,t){return Lne.apply(this,arguments)}function Lne(){return Lne=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_6(t),e.prev=1,e.next=4,Kee(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.hc.get(t);n&&(g6(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ic=!0:e.modifiedDocuments.size>0?g6(n.ic):e.removedDocuments.size>0&&(g6(n.ic),n.ic=!1))})),e.next=8,Jne(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,X6(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Lne.apply(this,arguments)}function Une(e,t,n){var r=_6(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.oc.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=_6(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=b(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(s){a.e(s)}finally{a.f()}})),r&&Tne(n)}(r.eventManager,t),i.length&&r.rc.Ho(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Zne(e,t,n){return Bne.apply(this,arguments)}function Bne(){return Bne=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r){var i,a,s,o,u,l;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=_6(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.hc.get(n),!(s=a&&a.key)){e.next=14;break}return o=(o=new t7(z6.comparator)).insert(s,l7.newNoDocument(s,F6.min())),u=k9().add(s),l=new C9(F6.min(),new Map,new i7(N6),o,u),e.next=9,Fne(i,l);case 9:i.ac=i.ac.remove(s),i.hc.delete(n),Qne(i),e.next=16;break;case 14:return e.next=16,ete(i.localStore,n,!1).then((function(){return Yne(i,n,r)})).catch(X6);case 16:case"end":return e.stop()}}),e)}))),Bne.apply(this,arguments)}function zne(e,t){return Gne.apply(this,arguments)}function Gne(){return Gne=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_6(t),i=n.batch.batchId,e.prev=1,e.next=4,qee(r.localStore,n);case 4:return a=e.sent,Wne(r,i,null),Vne(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Jne(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,X6(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Gne.apply(this,arguments)}function Hne(e,t,n){return jne.apply(this,arguments)}function jne(){return jne=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r){var i,a;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_6(t),e.prev=1,e.next=4,function(e,t){var n=_6(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return g6(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Wne(i,n,r),Vne(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Jne(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,X6(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),jne.apply(this,arguments)}function Vne(e,t){(e.dc.get(t)||[]).forEach((function(e){e.resolve()})),e.dc.delete(t)}function Wne(e,t,n){var r=_6(e),i=r.fc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.fc[r.currentUser.toKey()]=i}}function Yne(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=b(e.uc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.oc.delete(a),n&&e.rc.gc(a,n)}}catch(s){i.e(s)}finally{i.f()}e.uc.delete(t),e.isPrimaryClient&&e.lc.ds(t).forEach((function(t){e.lc.containsKey(t)||qne(e,t)}))}function qne(e,t){e.cc.delete(t.path.canonicalString());var n=e.ac.get(t);null!==n&&(wte(e.remoteStore,n),e.ac=e.ac.remove(t),e.hc.delete(n),Qne(e))}function Xne(e,t,n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof xne?(e.lc.addReference(a.key,t),Kne(e,a)):a instanceof bne?(f6("SyncEngine","Document no longer in limbo: "+a.key),e.lc.removeReference(a.key,t),e.lc.containsKey(a.key)||qne(e,a.key)):y6()}}catch(s){i.e(s)}finally{i.f()}}function Kne(e,t){var n=t.key,r=n.path.canonicalString();e.ac.get(n)||e.cc.has(r)||(f6("SyncEngine","New document in limbo: "+n),e.cc.add(r),Qne(e))}function Qne(e){for(;e.cc.size>0&&e.ac.size<e.maxConcurrentLimboResolutions;){var t=e.cc.values().next().value;e.cc.delete(t);var n=new z6(U6.fromString(t)),r=e._c.next();e.hc.set(r,new kne(n)),e.ac=e.ac.insert(n,r),Ite(e.remoteStore,new Tee(b7(y7(n.path)),r,2,$6.at))}}function Jne(e,t,n){return $ne.apply(this,arguments)}function $ne(){return $ne=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r){var i,a,s,o;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_6(t),a=[],s=[],o=[],e.t0=i.oc.isEmpty(),e.t0){e.next=9;break}return i.oc.forEach((function(e,t){o.push(i.mc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Gee.Ni(t.targetId,e);s.push(n)}})))})),e.next=6,Promise.all(o);case 6:return i.rc.Ho(a),e.next=9,function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s,o,u,l,c;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_6(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Q6.forEach(n,(function(t){return Q6.forEach(t.Ci,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Q6.forEach(t.xi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),J6(e.t0)){e.next=10;break}throw e.t0;case 10:f6("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=b(n);try{for(i.s();!(a=i.n()).done;)s=a.value,o=s.targetId,s.fromCache||(u=r.Ki.get(o),l=u.snapshotVersion,c=u.withLastLimboFreeSnapshotVersion(l),r.Ki=r.Ki.insert(o,c))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,s);case 9:case"end":return e.stop()}}),e)}))),$ne.apply(this,arguments)}function ere(e,t){return tre.apply(this,arguments)}function tre(){return tre=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=_6(t)).currentUser.isEqual(n)){e.next=11;break}return f6("SyncEngine","User change. New user:",n.toKey()),e.next=5,Wee(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.dc.forEach((function(e){e.forEach((function(e){e.reject(new E6(T6.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.dc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Jne(r,i.Wi);case 11:case"end":return e.stop()}}),e)}))),tre.apply(this,arguments)}function nre(e,t){var n=_6(e),r=n.hc.get(t);if(r&&r.ic)return k9().add(r.key);var i=k9(),a=n.uc.get(t);if(!a)return i;var s,o=b(a);try{for(o.s();!(s=o.n()).done;){var u=s.value,l=n.oc.get(u);i=i.unionWith(l.view.Wu)}}catch(c){o.e(c)}finally{o.f()}return i}function rre(e){var t=_6(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Fne.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=nre.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Zne.bind(null,t),t.rc.Ho=gne.bind(null,t.eventManager),t.rc.gc=_ne.bind(null,t.eventManager),t}function ire(e){var t=_6(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=zne.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Hne.bind(null,t),t}var are=function(){function e(){(0,s.Z)(this,e),this.synchronizeTabs=!1}return(0,o.Z)(e,[{key:"initialize",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Tt=pte(t.databaseInfo.databaseId),this.sharedClientState=this.Ic(t),this.persistence=this.Tc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ec(t),this.gcScheduler=this.Ac(t,this.localStore),this.indexBackfillerScheduler=this.Rc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ac",value:function(e,t){return null}},{key:"Rc",value:function(e,t){return null}},{key:"Ec",value:function(e){return Vee(this.persistence,new Hee,e.initialUser,this.Tt)}},{key:"Tc",value:function(e){return new Zee(zee.qs,this.Tt)}},{key:"Ic",value:function(e){return new ate}},{key:"terminate",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),sre=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,[{key:"initialize",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r=this;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Une(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ere.bind(null,this.syncEngine),e.next=12,rne(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new fne}},{key:"createDatastore",value:function(e){var t,n=pte(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new cte(t));return function(e,t,n,r){return new yte(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,s=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Une(s.syncEngine,e,0)},a=ote.C()?new ote:new ste,new _te(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,s){var o=new Sne(e,t,n,r,i,a);return s&&(o.wc=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_6(t),f6("RemoteStore","RemoteStore shutting down."),n.mu.add(5),e.next=5,xte(n);case 5:n.yu.shutdown(),n.pu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var ore=function(){function e(t){(0,s.Z)(this,e),this.observer=t,this.muted=!1}return(0,o.Z)(e,[{key:"next",value:function(e){this.observer.next&&this.vc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.vc(this.observer.error,e):d6("Uncaught Error in snapshot listener:",e.toString())}},{key:"Pc",value:function(){this.muted=!0}},{key:"vc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),ure=function(){function e(t,n,r,i){var a=this;(0,s.Z)(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=l6.UNAUTHENTICATED,this.clientId=O6.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f6("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return f6("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return(0,o.Z)(e,[{key:"getConfiguration",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new E6(T6.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new x6;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ht.Z)((0,ct.Z)().mark((function n(){var r;return(0,ct.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=une(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function lre(e,t){return cre.apply(this,arguments)}function cre(){return cre=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),f6("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Wee(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),cre.apply(this,arguments)}function hre(e,t){return pre.apply(this,arguments)}function pre(){return pre=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,fre(t);case 3:return r=e.sent,f6("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return tne(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return tne(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),pre.apply(this,arguments)}function fre(e){return dre.apply(this,arguments)}function dre(){return dre=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return f6("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,lre(t,new are);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),dre.apply(this,arguments)}function vre(e){return mre.apply(this,arguments)}function mre(){return mre=(0,ht.Z)((0,ct.Z)().mark((function e(t){return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return f6("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,hre(t,new sre);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),mre.apply(this,arguments)}function yre(e){return vre(e).then((function(e){return e.syncEngine}))}function gre(e){return _re.apply(this,arguments)}function _re(){return _re=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vre(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Rne.bind(null,n.syncEngine),r.onUnlisten=One.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),_re.apply(this,arguments)}var Tre=new Map;function Ere(e,t,n){if(!n)throw new E6(T6.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function xre(e){if(!z6.isDocumentKey(e))throw new E6(T6.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function bre(e){if(z6.isDocumentKey(e))throw new E6(T6.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ire(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":y6()}function wre(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new E6(T6.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ire(e);throw new E6(T6.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var kre=function(){function e(t){var n;if((0,s.Z)(this,e),void 0===t.host){if(void 0!==t.ssl)throw new E6(T6.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new E6(T6.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new E6(T6.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return(0,o.Z)(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Sre=function(){function e(t,n,r,i){(0,s.Z)(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kre({}),this._settingsFrozen=!1}return(0,o.Z)(e,[{key:"app",get:function(){if(!this._app)throw new E6(T6.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new E6(T6.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kre(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new I6;switch(e.type){case"gapi":var t=e.client;return new R6(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new E6(T6.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Tre.get(e);t&&(f6("ComponentProvider","Removing Datastore"),Tre.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Rre(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=wre(e,Sre))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&v6("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var s,o;if("string"==typeof i.mockUserToken)s=i.mockUserToken,o=l6.MOCK_USER;else{s=It(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new E6(T6.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");o=new l6(u)}e._authCredentials=new w6(new b6(s,o))}}var Cre=function(){function e(t,n,r){(0,s.Z)(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return(0,o.Z)(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Are(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Dre=function(){function e(t,n,r){(0,s.Z)(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return(0,o.Z)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Are=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;return(0,s.Z)(this,n),(a=t.call(this,e,r,y7(i)))._path=i,a.type="collection",a}return(0,o.Z)(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Cre(this.firestore,null,new z6(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Dre);function Ore(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Zt(e),Ere("collection","path",t),e instanceof Sre){var a=U6.fromString.apply(U6,[t].concat(r));return bre(a),new Are(e,null,a)}if(!(e instanceof Cre||e instanceof Are))throw new E6(T6.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var s=e._path.child(U6.fromString.apply(U6,[t].concat(r)));return bre(s),new Are(e.firestore,null,s)}function Nre(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Zt(e),1===arguments.length&&(t=O6.R()),Ere("doc","path",t),e instanceof Sre){var a=U6.fromString.apply(U6,[t].concat(r));return xre(a),new Cre(e,null,new z6(a))}if(!(e instanceof Cre||e instanceof Are))throw new E6(T6.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var s=e._path.child(U6.fromString.apply(U6,[t].concat(r)));return xre(s),new Cre(e.firestore,e instanceof Are?e.converter:null,new z6(s))}var Mre=function(){function e(){var t=this;(0,s.Z)(this,e),this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new fte(this,"async_queue_retry"),this.Hc=function(){var e=hte();e&&f6("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ko.Vo()};var n=hte();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Hc)}return(0,o.Z)(e,[{key:"isShuttingDown",get:function(){return this.Kc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Jc(),this.Yc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;var t=hte();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Jc(),this.Kc)return new Promise((function(){}));var n=new x6;return this.Yc((function(){return t.Kc&&t.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Uc.push(e),t.Zc()}))}},{key:"Zc",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t=this;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Uc.length){e.next=14;break}return e.prev=1,e.next=4,this.Uc[0]();case 4:this.Uc.shift(),this.ko.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),J6(e.t0)){e.next=12;break}throw e.t0;case 12:f6("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Uc.length>0&&this.ko.vo((function(){return t.Zc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Yc",value:function(e){var t=this,n=this.qc.then((function(){return t.jc=!0,e().catch((function(e){t.Qc=e,t.jc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw d6("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.jc=!1,e}))}));return this.qc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);var i=one.createAndSchedule(this,e,t,n,(function(e){return r.Xc(e)}));return this.Gc.push(i),i}},{key:"Jc",value:function(){this.Qc&&y6()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ta",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(){var t;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.qc,e.next=3,t;case 3:if(t!==this.qc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ea",value:function(e){var t,n=b(this.Gc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"na",value:function(e){var t=this;return this.ta().then((function(){t.Gc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=b(t.Gc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ta()}))}},{key:"sa",value:function(e){this.Wc.push(e)}},{key:"Xc",value:function(e){var t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}]),e}();function Pre(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=b(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(s){i.e(s)}finally{i.f()}return!1}(e)}var Fre=function(e){l(n,e);var t=v(n);function n(e,r,i,a){var o;return(0,s.Z)(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Mre,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return(0,o.Z)(n,[{key:"_terminate",value:function(){return this._firestoreClient||Zre(this),this._firestoreClient.terminate()}}]),n}(Sre);function Lre(e,t){var n="string"==typeof e?e:t||"(default)",r=Rn("object"==typeof e?e:Mn(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=Tt("firestore");i&&Rre.apply(void 0,[r].concat((0,a.Z)(i)))}return r}function Ure(e){return e._firestoreClient||Zre(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Zre(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new e8(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new ure(e._authCredentials,e._appCheckCredentials,e._queue,r)}var Bre=function(){function e(t){(0,s.Z)(this,e),this._byteString=t}return(0,o.Z)(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(l8.fromBase64String(t))}catch(t){throw new E6(T6.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(l8.fromUint8Array(t))}}]),e}(),zre=function(){function e(){(0,s.Z)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new E6(T6.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new B6(n)}return(0,o.Z)(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Gre=(0,o.Z)((function e(t){(0,s.Z)(this,e),this._methodName=t})),Hre=function(){function e(t,n){if((0,s.Z)(this,e),!isFinite(t)||t<-90||t>90)throw new E6(T6.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new E6(T6.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return(0,o.Z)(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return N6(this._lat,e._lat)||N6(this._long,e._long)}}]),e}(),jre=/^__.*__$/,Vre=function(){function e(t,n,r){(0,s.Z)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,o.Z)(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new i9(e,this.data,this.fieldMask,t,this.fieldTransforms):new r9(e,this.data,t,this.fieldTransforms)}}]),e}(),Wre=function(){function e(t,n,r){(0,s.Z)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,o.Z)(e,[{key:"toMutation",value:function(e,t){return new i9(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Yre(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw y6()}}var qre=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.settings=t,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ia(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return(0,o.Z)(e,[{key:"path",get:function(){return this.settings.path}},{key:"ra",get:function(){return this.settings.ra}},{key:"oa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ua",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.oa({path:n,ca:!1});return r.aa(e),r}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.oa({path:n,ca:!1});return r.ia(),r}},{key:"la",value:function(e){return this.oa({path:void 0,ca:!0})}},{key:"fa",value:function(e){return lie(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ia",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.aa(this.path.get(e))}},{key:"aa",value:function(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(Yre(this.ra)&&jre.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}]),e}(),Xre=function(){function e(t,n,r){(0,s.Z)(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.Tt=r||pte(t)}return(0,o.Z)(e,[{key:"wa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new qre({ra:e,methodName:t,_a:n,path:B6.emptyPath(),ca:!1,da:r},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}]),e}();function Kre(e){var t=e._freezeSettings(),n=pte(e._databaseId);return new Xre(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Qre(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=e.wa(a.merge||a.mergeFields?2:0,t,n,i);aie("Data must be an object, but it was:",s,r);var o,u,l=rie(r,s);if(a.merge)o=new s7(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){var c,h=[],p=b(a.mergeFields);try{for(p.s();!(c=p.n()).done;){var f=sie(t,c.value,n);if(!s.contains(f))throw new E6(T6.INVALID_ARGUMENT,"Field '".concat(f,"' is specified in your field mask but missing from your input data."));cie(h,f)||h.push(f)}}catch(d){p.e(d)}finally{p.f()}o=new s7(h),u=s.fieldTransforms.filter((function(e){return o.covers(e.field)}))}else o=null,u=s.fieldTransforms;return new Vre(new o7(l),o,u)}var Jre=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ra)throw 1===e.ra?e.fa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.fa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Gre);function $re(e,t,n,r){var i=e.wa(1,t,n);aie("Data must be an object, but it was:",i,r);var a=[],s=o7.empty();r8(r,(function(e,r){var o=uie(t,e,n);r=Zt(r);var u=i.ha(o);if(r instanceof Jre)a.push(o);else{var l=nie(r,u);null!=l&&(a.push(o),s.set(o,l))}}));var o=new s7(a);return new Wre(s,o,i.fieldTransforms)}function eie(e,t,n,r,i,a){var s=e.wa(1,t,n),o=[sie(t,r,n)],u=[i];if(a.length%2!=0)throw new E6(T6.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var l=0;l<a.length;l+=2)o.push(sie(t,a[l])),u.push(a[l+1]);for(var c=[],h=o7.empty(),p=o.length-1;p>=0;--p)if(!cie(c,o[p])){var f=o[p],d=u[p];d=Zt(d);var v=s.ha(f);if(d instanceof Jre)c.push(f);else{var m=nie(d,v);null!=m&&(c.push(f),h.set(f,m))}}var y=new s7(c);return new Wre(h,y,s.fieldTransforms)}function tie(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return nie(n,e.wa(r?4:3,t))}function nie(e,t){if(iie(e=Zt(e)))return aie("Unsupported field value:",t,e),rie(e,t);if(e instanceof Gre)return function(e,t){if(!Yre(t.ra))throw t.fa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.fa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ca&&4!==t.ra)throw t.fa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=b(e);try{for(a.s();!(n=a.n()).done;){var s=nie(n.value,t.la(i));null==s&&(s={nullValue:"NULL_VALUE"}),r.push(s),i++}}catch(o){a.e(o)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Zt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return P7(t.Tt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=P6.fromDate(e);return{timestampValue:G9(t.Tt,n)}}if(e instanceof P6){var r=new P6(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:G9(t.Tt,r)}}if(e instanceof Hre)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Bre)return{bytesValue:H9(t.Tt,e._byteString)};if(e instanceof Cre){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.fa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:W9(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.fa("Unsupported field value: ".concat(Ire(e)))}(e,t)}function rie(e,t){var n={};return i8(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):r8(e,(function(e,r){var i=nie(r,t.ua(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function iie(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof P6||e instanceof Hre||e instanceof Bre||e instanceof Cre||e instanceof Gre)}function aie(e,t,n){if(!iie(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Ire(n);throw"an object"===r?t.fa(e+" a custom object"):t.fa(e+" "+r)}}function sie(e,t,n){if((t=Zt(t))instanceof zre)return t._internalPath;if("string"==typeof t)return uie(e,t);throw lie("Field path arguments must be of type string or ",e,!1,void 0,n)}var oie=new RegExp("[~\\*/\\[\\]]");function uie(e,t,n){if(t.search(oie)>=0)throw lie("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return m(zre,(0,a.Z)(t.split(".")))._internalPath}catch(RQ){throw lie("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function lie(e,t,n,r,i){var a=r&&!r.isEmpty(),s=void 0!==i,o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";var u="";return(a||s)&&(u+=" (found",a&&(u+=" in field ".concat(r)),s&&(u+=" in document ".concat(i)),u+=")"),new E6(T6.INVALID_ARGUMENT,o+e+u)}function cie(e,t){return e.some((function(e){return e.isEqual(t)}))}var hie=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return(0,o.Z)(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Cre(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new pie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(fie("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),pie=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"data",value:function(){return lt(c(n.prototype),"data",this).call(this)}}]),n}(hie);function fie(e,t){return"string"==typeof t?uie(e,t):t instanceof zre?t._internalPath:t._delegate._internalPath}function die(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new E6(T6.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var vie=(0,o.Z)((function e(){(0,s.Z)(this,e)})),mie=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(vie);function yie(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof vie&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Tie})).length,n=e.filter((function(e){return e instanceof gie})).length;if(t>1||t>0&&n>0)throw new E6(T6.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var s,o=b(n);try{for(o.s();!(s=o.n()).done;){e=s.value._apply(e)}}catch(u){o.e(u)}finally{o.f()}return e}var gie=function(e){l(n,e);var t=v(n);function n(e,r,i){var a;return(0,s.Z)(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return(0,o.Z)(n,[{key:"_apply",value:function(e){var t=this._parse(e);return bie(e._query,t),new Dre(e.firestore,e.converter,I7(e._query,t))}},{key:"_parse",value:function(e){var t=Kre(e.firestore),n=function(e,t,n,r,i,a,s){var o;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new E6(T6.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){xie(s,a);var u,l=[],c=b(s);try{for(c.s();!(u=c.n()).done;){var h=u.value;l.push(Eie(r,e,h))}}catch(p){c.e(p)}finally{c.f()}o={arrayValue:{values:l}}}else o=Eie(r,e,s)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||xie(s,a),o=tie(n,"where",s,"in"===a||"not-in"===a);return L8.create(i,a,o)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(mie);function _ie(e,t,n){var r=t,i=fie("where",e);return gie._create(i,r,n)}var Tie=function(e){l(n,e);var t=v(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return(0,o.Z)(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:U8.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=b(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;bie(r,a),r=I7(r,a)}}catch(s){i.e(s)}finally{i.f()}}(e._query,t),new Dre(e.firestore,e.converter,I7(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(vie);function Eie(e,t,n){if("string"==typeof(n=Zt(n))){if(""===n)throw new E6(T6.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!E7(t)&&-1!==n.indexOf("/"))throw new E6(T6.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(U6.fromString(n));if(!z6.isDocumentKey(r))throw new E6(T6.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return w8(e,new z6(r))}if(n instanceof Cre)return w8(e,n._key);throw new E6(T6.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ire(n),"."))}function xie(e,t){if(!Array.isArray(e)||0===e.length)throw new E6(T6.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function bie(e,t){if(t.isInequality()){var n=T7(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new E6(T6.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=_7(e);null!==i&&Iie(e,r,i)}var a=function(e,t){var n,r=b(e);try{for(r.s();!(n=r.n()).done;){var i,a=b(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var s=i.value;if(t.indexOf(s.op)>=0)return s.op}}catch(o){a.e(o)}finally{a.f()}}}catch(o){r.e(o)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new E6(T6.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new E6(T6.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Iie(e,t,n){if(!n.isEqual(t))throw new E6(T6.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var wie=function(){function e(){(0,s.Z)(this,e)}return(0,o.Z)(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(g8(e)){case 0:return null;case 1:return e.booleanValue;case 2:return p8(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(f8(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw y6()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return r8(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Hre(p8(e.latitude),p8(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=v8(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(m8(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=h8(e);return new P6(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=U6.fromString(e);g6(fee(n));var r=new t8(n.get(1),n.get(3)),i=new z6(n.popFirst(5));return r.isEqual(t)||d6("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function kie(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Sie=function(){function e(t,n){(0,s.Z)(this,e),this.hasPendingWrites=t,this.fromCache=n}return(0,o.Z)(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Rie=function(e){l(n,e);var t=v(n);function n(e,r,i,a,o,u){var l;return(0,s.Z)(this,n),(l=t.call(this,e,r,i,a,u))._firestore=e,l._firestoreImpl=e,l.metadata=o,l}return(0,o.Z)(n,[{key:"exists",value:function(){return lt(c(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Cie(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(fie("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(hie),Cie=function(e){l(n,e);var t=v(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return lt(c(n.prototype),"data",this).call(this,e)}}]),n}(Rie),Die=function(){function e(t,n,r,i){(0,s.Z)(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Sie(i.hasPendingWrites,i.fromCache),this.query=r}return(0,o.Z)(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Cie(n._firestore,n._userDataWriter,r.key,r,new Sie(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new E6(T6.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Cie(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Sie(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Cie(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Sie(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Aie(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function Aie(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return y6()}}var Oie=function(e){l(n,e);var t=v(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).firestore=e,r}return(0,o.Z)(n,[{key:"convertBytes",value:function(e){return new Bre(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cre(this.firestore,null,t)}}]),n}(wie);function Nie(e,t,n){e=wre(e,Cre);for(var r=wre(e.firestore,Fre),i=Kre(r),a=arguments.length,s=new Array(a>3?a-3:0),o=3;o<a;o++)s[o-3]=arguments[o];return Lie(r,[("string"==typeof(t=Zt(t))||t instanceof zre?eie(i,"updateDoc",e._key,t,n,s):$re(i,"updateDoc",e._key,t)).toMutation(e._key,X7.exists(!0))])}function Mie(e){return Lie(wre(e.firestore,Fre),[new c9(e._key,X7.none())])}function Pie(e,t){var n=wre(e.firestore,Fre),r=Nre(e),i=kie(e.converter,t);return Lie(n,[Qre(Kre(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,X7.exists(!1))]).then((function(){return r}))}function Fie(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,s;e=Zt(e);var o={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||Pre(n[u])||(o=n[u],u++);var l,c,h,p={includeMetadataChanges:o.includeMetadataChanges};if(Pre(n[u])){var f=n[u];n[u]=null===(i=f.next)||void 0===i?void 0:i.bind(f),n[u+1]=null===(a=f.error)||void 0===a?void 0:a.bind(f),n[u+2]=null===(s=f.complete)||void 0===s?void 0:s.bind(f)}if(e instanceof Cre)c=wre(e.firestore,Fre),h=y7(e._key.path),l={next:function(t){n[u]&&n[u](Uie(c,e,t))},error:n[u+1],complete:n[u+2]};else{var d=wre(e,Dre);c=wre(d.firestore,Fre),h=d._query;var v=new Oie(c);l={next:function(e){n[u]&&n[u](new Die(c,v,d,e))},error:n[u+1],complete:n[u+2]},die(e._query)}return function(e,t,n,r){var i=new ore(r),a=new Ene(t,i,n);return e.asyncQueue.enqueueAndForget((0,ht.Z)((0,ct.Z)().mark((function t(){return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=dne,t.next=3,gre(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Pc(),e.asyncQueue.enqueueAndForget((0,ht.Z)((0,ct.Z)().mark((function t(){return(0,ct.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=mne,t.next=3,gre(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ure(c),h,p,l)}function Lie(e,t){return function(e,t){var n=new x6;return e.asyncQueue.enqueueAndForget((0,ht.Z)((0,ct.Z)().mark((function r(){return(0,ct.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Mne,r.next=3,yre(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Ure(e),t)}function Uie(e,t,n){var r=n.docs.get(t._key),i=new Oie(e);return new Rie(e,i,t._key,r,new Sie(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){c6=e}(On),Sn(new Bt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),s=new Fre(new k6(e.getProvider("auth-internal")),new D6(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new E6(T6.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new t8(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Pn(u6,"3.8.4",e),Pn(u6,"3.8.4","esm2017")}();var Zie={Login:function(e){!function(e,t,n){rs.apply(this,arguments)}(ro(),new Qi)},Logout:function(){!function(e){Zt(e).signOut()}(ro())},deleteBuilding:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s,o,u,l,c;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lre(Mn()),e.next=3,Mie(Nre(r,"buildings",t.uid));case 3:i=Mn(),a=EQ(i),s=[],o=b(t.models),e.prev=7,o.s();case 9:if((u=o.n()).done){e.next=17;break}return l=u.value,c=TQ(a,l.id),e.next=14,_Q(c);case 14:s.push(l.id);case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),o.e(e.t0);case 22:return e.prev=22,o.f(),e.finish(22);case 25:return e.next=27,a2.deleteModels(s);case 27:n.trigger({type:"CLOSE_BUILDING"});case 28:case"end":return e.stop()}}),e,null,[[7,19,22,25]])})));return function(t,n){return e.apply(this,arguments)}}(),updateBuilding:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Lre(Mn()),e.next=3,Nie(Nre(n,"buildings",t.uid),ot({},t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uploadModel:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r,i){var a,s,o;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Mn(),s=EQ(a),o=TQ(s,t.id),e.next=5,yQ(o,n);case 5:return e.next=7,a2.refreshModels(r,i);case 7:i.trigger({type:"UPDATE_BUILDING",payload:r});case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),deleteModel:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n,r){var i,a,s;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Mn(),a=EQ(i),s=TQ(a,t.id),e.next=5,_Q(s);case 5:return e.next=7,a2.deleteModels([t.id]);case 7:return e.next=9,a2.refreshModels(n,r);case 9:r.trigger({type:"UPDATE_BUILDING",payload:n});case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},Bie=n(5056),zie=function(){function e(){(0,s.Z)(this,e),this.buildings="buildings"}return(0,o.Z)(e,[{key:"add",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i,a,s,o,u;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Lre(Mn()),r=t.lat,i=t.lng,a=t.userId,s=t.name,o=t.models,e.next=4,Pie(Ore(n,this.buildings),{lat:r,lng:i,userId:a,name:s,models:o});case 4:return u=e.sent,e.abrupt("return",u.id);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBuildings",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Lre(Mn()),r=yie(Ore(n,this.buildings),_ie("userId","==",t.uid)),e.abrupt("return",new Promise((function(e){var t=Fie(r,(function(n){var r=[];n.docs.forEach((function(e){r.push(ot(ot({},e.data()),{},{uid:e.id}))})),t(),e(r)}))})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Gie=function(){function e(t,n){var r=this;(0,s.Z)(this,e),this.components=new Ib,this.style="mapbox://styles/mapbox/dark-v10",this.clickedCoordinates={lat:0,lng:0},this.map=void 0,this.center={lat:0,lng:0},this.labels={},this.database=new zie,this.events=void 0,this.storeMousePosition=function(e){r.clickedCoordinates=ot({},e.lngLat)},this.events=n;var i=this.getConfig(t);this.map=this.createMap(i),this.initializeComponents(i),this.setupScene()}return(0,o.Z)(e,[{key:"dispose",value:function(){for(var e in this.components.dispose(),this.map=null,this.components=null,this.labels){var t=this.labels[e];t.removeFromParent(),t.element.remove()}this.labels={}}},{key:"getAllBuildings",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.getBuildings(t);case 2:n=e.sent,this.components&&this.addToScene(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addBuilding",value:function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t){var n,r,i,a,s;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.clickedCoordinates,r=n.lat,i=n.lng,a=t.uid,s={userId:a,lat:r,lng:i,uid:"",name:"",models:[]},e.next=5,this.database.add(s);case 5:s.uid=e.sent,this.addToScene([s]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addToScene",value:function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.uid,a=r.lng,s=r.lat,o=this.createHtmlElement(r),u=new kx(o),l=Bie.MercatorCoordinate.fromLngLat(ot({},this.center),0),c=l.meterInMercatorCoordinateUnits(),h=Bie.MercatorCoordinate.fromLngLat({lng:a,lat:s},0);h.x/=c,h.y/=c,l.x/=c,l.y/=c,u.position.set(h.x-l.x,0,h.y-l.y),this.components.scene.get().add(u),this.labels[i]=u}}catch(p){n.e(p)}finally{n.f()}}},{key:"createHtmlElement",value:function(e){var t=this,n=document.createElement("div");return n.textContent="\ud83c\udfe2",n.onclick=function(){t.events.trigger({type:"OPEN_BUILDING",payload:e})},n.classList.add("thumbnail"),n}},{key:"setupScene",value:function(){var e=this.components.scene.get();e.background=null;var t=new u_(16777215);t.position.set(0,-70,100).normalize(),e.add(t);var n=new u_(16777215);n.position.set(0,70,100).normalize(),e.add(n)}},{key:"initializeComponents",value:function(e){this.components.scene=new Gx(this.components),this.components.camera=new eK,this.components.renderer=this.createRenderer(e),this.components.init()}},{key:"createRenderer",value:function(e){var t=this.getCoordinates(e);return new $X(this.components,this.map,t)}},{key:"getCoordinates",value:function(e){return Bie.MercatorCoordinate.fromLngLat(e.center,0)}},{key:"createMap",value:function(e){var t=new Bie.Map(ot(ot({},e),{},{style:this.style,antialias:!0}));return t.on("contextmenu",this.storeMousePosition),t}},{key:"getConfig",value:function(e){var t=[-90.46915555170892,14.653434059802578];return this.center={lng:t[0],lat:t[1]},{container:e,accessToken:"pk.eyJ1IjoiYmltY2EiLCJhIjoiY2xmMXJ4ZGhrMGJhazN4bGg2YTAwZG5heSJ9.OQdD57WTOQigRXhxpjfaqA",zoom:15,pitch:60,bearing:-40,center:t,buildings:[]}}}]),e}(),Hie={map:null,start:function(e,t,n){var r=this;return(0,ht.Z)((0,ct.Z)().mark((function i(){return(0,ct.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r.map){i.next=5;break}return console.log("Map started"),r.map=new Gie(e,n),i.next=5,r.map.getAllBuildings(t);case 5:case"end":return i.stop()}}),i)})))()},remove:function(){this.map&&(console.log("Map removed"),this.map.dispose(),this.map=null)},addBuilding:function(e){this.map&&this.map.addBuilding(e)}},jie=function(){var e=(0,ht.Z)((0,ct.Z)().mark((function e(t,n){var r,i,a,s,o,u,l,c,h,p,f,d,v,m,y,g,_;return(0,ct.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("LOGIN"!==t.type){e.next=2;break}return e.abrupt("return",Zie.Login(t));case 2:if("LOGOUT"!==t.type){e.next=4;break}return e.abrupt("return",Zie.Logout());case 4:if("START_MAP"!==t.type){e.next=7;break}return r=t.payload,i=r.container,a=r.user,e.abrupt("return",Hie.start(i,a,n));case 7:if("REMOVE_MAP"!==t.type&&"OPEN_BUILDING"!==t.type){e.next=9;break}return e.abrupt("return",Hie.remove());case 9:if("ADD_BUILDING"!==t.type){e.next=11;break}return e.abrupt("return",Hie.addBuilding(t.payload));case 11:if("DELETE_BUILDING"!==t.type){e.next=13;break}return e.abrupt("return",Zie.deleteBuilding(t.payload,n));case 13:if("UPDATE_BUILDING"!==t.type){e.next=15;break}return e.abrupt("return",Zie.updateBuilding(t.payload));case 15:if("UPLOAD_MODEL"!==t.type){e.next=21;break}return s=t.payload,o=s.model,u=s.file,l=s.building,e.next=19,a2.convertIfcToFragments(u);case 19:return c=e.sent,e.abrupt("return",Zie.uploadModel(o,c,l,n));case 21:if("DELETE_MODEL"!==t.type){e.next=24;break}return h=t.payload,p=h.model,f=h.building,e.abrupt("return",Zie.deleteModel(p,f,n));case 24:if("START_BUILDING"!==t.type){e.next=27;break}return d=t.payload,v=d.container,m=d.building,e.abrupt("return",a2.start(v,m,n));case 27:if("CLOSE_BUILDING"!==t.type){e.next=29;break}return e.abrupt("return",a2.remove());case 29:if("EXPLODE_MODEL"!==t.type){e.next=31;break}return e.abrupt("return",a2.explode(t.payload));case 31:if("TOGGLE_CLIPPER"!==t.type){e.next=33;break}return e.abrupt("return",a2.toggleClippingPlanes(t.payload));case 33:if("TOGGLE_DIMENSIONS"!==t.type){e.next=35;break}return e.abrupt("return",a2.toggleDimensions(t.payload));case 35:if("TOGGLE_FLOORPLAN"!==t.type){e.next=38;break}return y=t.payload,g=y.active,_=y.floorplan,e.abrupt("return",a2.toggleFloorplan(g,_));case 38:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Vie=function(){function e(){(0,s.Z)(this,e),this.list={}}return(0,o.Z)(e,[{key:"on",value:function(e,t){this.list[e]||(this.list[e]=[]),this.list[e].push(t)}},{key:"trigger",value:function(e){if(this.list[e.type]){var t,n=b(this.list[e.type]);try{for(n.s();!(t=n.n()).done;){(0,t.value)(e.payload)}}catch(r){n.e(r)}finally{n.f()}}}}]),e}(),Wie={user:null,building:null,floorplans:[],properties:[]},Yie=function(e,t){return"UPDATE_USER"===t.type?ot(ot({},e),{},{user:t.payload}):"OPEN_BUILDING"===t.type||"UPDATE_BUILDING"===t.type?ot(ot({},e),{},{building:t.payload}):"CLOSE_BUILDING"===t.type?ot(ot({},e),{},{building:null}):"UPDATE_FLOORPLANS"===t.type?ot(ot({},e),{},{floorplans:t.payload}):"UPDATE_PROPERTIES"===t.type?ot(ot({},e),{},{properties:t.payload}):ot({},e)},qie=(0,e.createContext)([Wie,function(){}]),Xie=function(t){var n,r=t.children,a=(0,e.useReducer)(Yie,Wie),s=(0,i.Z)(a,2),o=s[0],u=s[1],l=new Vie,c=function(e){u(e),jie(e,l)},h=b(it);try{var p=function(){var e=n.value;l.on(e,(function(t){c({type:e,payload:t})}))};for(h.s();!(n=h.n()).done;)p()}catch(f){h.e(f)}finally{h.f()}return(0,Je.jsxs)(qie.Provider,{value:[o,c],children:[(0,Je.jsx)(so,{}),r]})},Kie=function(){return(0,e.useContext)(qie)},Qie=n(2248);function Jie(){return(0,Qe.Z)(Qie.Z)}var $ie=n(1921),eae=n(7551),tae=n(8564),nae=n(9394),rae=n(7430),iae=n(2298);function aae(e){return(0,iae.Z)("MuiDivider",e)}(0,rae.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var sae=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],oae=(0,tae.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})((function(e){var t=e.theme,n=e.ownerState;return(0,ze.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):(0,eae.Fq)(t.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})}),(function(e){var t=e.theme,n=e.ownerState;return(0,ze.Z)({},n.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider),top:"50%",content:'""',transform:"translateY(50%)"}})}),(function(e){var t=e.theme,n=e.ownerState;return(0,ze.Z)({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:"thin solid ".concat((t.vars||t).palette.divider),transform:"translateX(0%)"}})}),(function(e){var t=e.ownerState;return(0,ze.Z)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),uae=(0,tae.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:function(e,t){var n=e.ownerState;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})((function(e){var t=e.theme,n=e.ownerState;return(0,ze.Z)({display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)")},"vertical"===n.orientation&&{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")})})),lae=e.forwardRef((function(e,t){var n=(0,nae.Z)({props:e,name:"MuiDivider"}),r=n.absolute,i=void 0!==r&&r,a=n.children,s=n.className,o=n.component,u=void 0===o?a?"div":"hr":o,l=n.flexItem,c=void 0!==l&&l,h=n.light,p=void 0!==h&&h,f=n.orientation,d=void 0===f?"horizontal":f,v=n.role,m=void 0===v?"hr"!==u?"separator":void 0:v,y=n.textAlign,g=void 0===y?"center":y,_=n.variant,T=void 0===_?"fullWidth":_,E=(0,Ge.Z)(n,sae),x=(0,ze.Z)({},n,{absolute:i,component:u,flexItem:c,light:p,orientation:d,role:m,textAlign:g,variant:T}),b=function(e){var t=e.absolute,n=e.children,r=e.classes,i=e.flexItem,a=e.light,s=e.orientation,o=e.textAlign,u={root:["root",t&&"absolute",e.variant,a&&"light","vertical"===s&&"vertical",i&&"flexItem",n&&"withChildren",n&&"vertical"===s&&"withChildrenVertical","right"===o&&"vertical"!==s&&"textAlignRight","left"===o&&"vertical"!==s&&"textAlignLeft"],wrapper:["wrapper","vertical"===s&&"wrapperVertical"]};return(0,$ie.Z)(u,aae,r)}(x);return(0,Je.jsx)(oae,(0,ze.Z)({as:u,className:(0,He.Z)(b.root,s),role:m,ref:t,ownerState:x},E,{children:a?(0,Je.jsx)(uae,{className:b.wrapper,ownerState:x,children:a}):null}))})),cae=lae,hae=n(6983),pae=n(3236),fae=n(9127);function dae(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function vae(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,u(e,t)}var mae=e.createContext(null);function yae(t,n){var r=Object.create(null);return t&&e.Children.map(t,(function(e){return e})).forEach((function(t){r[t.key]=function(t){return n&&(0,e.isValidElement)(t)?n(t):t}(t)})),r}function gae(e,t,n){return null!=n[t]?n[t]:e.props[t]}function _ae(t,n,r){var i=yae(t.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var s in e)s in t?a.length&&(i[s]=a,a=[]):a.push(s);var o={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var l=i[u][r];o[i[u][r]]=n(l)}o[u]=n(u)}for(r=0;r<a.length;r++)o[a[r]]=n(a[r]);return o}(n,i);return Object.keys(a).forEach((function(s){var o=a[s];if((0,e.isValidElement)(o)){var u=s in n,l=s in i,c=n[s],h=(0,e.isValidElement)(c)&&!c.props.in;!l||u&&!h?l||!u||h?l&&u&&(0,e.isValidElement)(c)&&(a[s]=(0,e.cloneElement)(o,{onExited:r.bind(null,o),in:c.props.in,exit:gae(o,"exit",t),enter:gae(o,"enter",t)})):a[s]=(0,e.cloneElement)(o,{in:!1}):a[s]=(0,e.cloneElement)(o,{onExited:r.bind(null,o),in:!0,exit:gae(o,"exit",t),enter:gae(o,"enter",t)})}})),a}var Tae=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Eae=function(t){function n(e,n){var r,i=(r=t.call(this,e,n)||this).handleExited.bind(f(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}vae(n,t);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(t,n){var r,i,a=n.children,s=n.handleExited;return{children:n.firstRender?(r=t,i=s,yae(r.children,(function(t){return(0,e.cloneElement)(t,{onExited:i.bind(null,t),in:!0,appear:gae(t,"appear",r),enter:gae(t,"enter",r),exit:gae(t,"exit",r)})}))):_ae(t,a,s),firstRender:!1}},r.handleExited=function(e,t){var n=yae(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,ze.Z)({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var t=this.props,n=t.component,r=t.childFactory,i=(0,Ge.Z)(t,["component","childFactory"]),a=this.state.contextValue,s=Tae(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?e.createElement(mae.Provider,{value:a},s):e.createElement(mae.Provider,{value:a},e.createElement(n,i,s))},n}(e.Component);Eae.propTypes={},Eae.defaultProps={component:"div",childFactory:function(e){return e}};var xae=Eae,bae=(n(5296),n(6132)),Iae=(n(7861),n(4911)),wae=n(1086),kae=n(5696),Sae=(0,bae.w)((function(t,n){var r=t.styles,i=(0,wae.O)([r],void 0,(0,e.useContext)(bae.T)),a=(0,e.useRef)();return(0,kae.j)((function(){var e=n.key+"-global",t=new n.sheet.constructor({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),r=!1,s=document.querySelector('style[data-emotion="'+e+" "+i.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==s&&(r=!0,s.setAttribute("data-emotion",e),t.hydrate([s])),a.current=[t,r],function(){t.flush()}}),[n]),(0,kae.j)((function(){var e=a.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==i.next&&(0,Iae.My)(n,i.next,!0),t.tags.length){var r=t.tags[t.tags.length-1].nextElementSibling;t.before=r,t.flush()}n.insert("",i,t,!1)}}),[n,i.name]),null}));function Rae(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,wae.O)(t)}var Cae=function(){var e=Rae.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var Dae=function(t){var n=t.className,r=t.classes,a=t.pulsate,s=void 0!==a&&a,o=t.rippleX,u=t.rippleY,l=t.rippleSize,c=t.in,h=t.onExited,p=t.timeout,f=e.useState(!1),d=(0,i.Z)(f,2),v=d[0],m=d[1],y=(0,He.Z)(n,r.ripple,r.rippleVisible,s&&r.ripplePulsate),g={width:l,height:l,top:-l/2+u,left:-l/2+o},_=(0,He.Z)(r.child,v&&r.childLeaving,s&&r.childPulsate);return c||v||m(!0),e.useEffect((function(){if(!c&&null!=h){var e=setTimeout(h,p);return function(){clearTimeout(e)}}}),[h,c,p]),(0,Je.jsx)("span",{className:y,style:g,children:(0,Je.jsx)("span",{className:_})})};var Aae,Oae,Nae,Mae,Pae,Fae,Lae,Uae,Zae=(0,rae.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Bae=["center","classes","className"],zae=80,Gae=Cae(Pae||(Pae=Aae||(Aae=dae(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),Hae=Cae(Fae||(Fae=Oae||(Oae=dae(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),jae=Cae(Lae||(Lae=Nae||(Nae=dae(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),Vae=(0,tae.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Wae=(0,tae.ZP)(Dae,{name:"MuiTouchRipple",slot:"Ripple"})(Uae||(Uae=Mae||(Mae=dae(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),Zae.rippleVisible,Gae,550,(function(e){return e.theme.transitions.easing.easeInOut}),Zae.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),Zae.child,Zae.childLeaving,Hae,550,(function(e){return e.theme.transitions.easing.easeInOut}),Zae.childPulsate,jae,(function(e){return e.theme.transitions.easing.easeInOut})),Yae=e.forwardRef((function(t,n){var r=(0,nae.Z)({props:t,name:"MuiTouchRipple"}),s=r.center,o=void 0!==s&&s,u=r.classes,l=void 0===u?{}:u,c=r.className,h=(0,Ge.Z)(r,Bae),p=e.useState([]),f=(0,i.Z)(p,2),d=f[0],v=f[1],m=e.useRef(0),y=e.useRef(null);e.useEffect((function(){y.current&&(y.current(),y.current=null)}),[d]);var g=e.useRef(!1),_=e.useRef(null),T=e.useRef(null),E=e.useRef(null);e.useEffect((function(){return function(){clearTimeout(_.current)}}),[]);var x=e.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,s=e.cb;v((function(e){return[].concat((0,a.Z)(e),[(0,Je.jsx)(Wae,{classes:{ripple:(0,He.Z)(l.ripple,Zae.ripple),rippleVisible:(0,He.Z)(l.rippleVisible,Zae.rippleVisible),ripplePulsate:(0,He.Z)(l.ripplePulsate,Zae.ripplePulsate),child:(0,He.Z)(l.child,Zae.child),childLeaving:(0,He.Z)(l.childLeaving,Zae.childLeaving),childPulsate:(0,He.Z)(l.childPulsate,Zae.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},m.current)])})),m.current+=1,y.current=s}),[l]),b=e.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=t.pulsate,i=void 0!==r&&r,a=t.center,s=void 0===a?o||t.pulsate:a,u=t.fakeElement,l=void 0!==u&&u;if("mousedown"===(null==e?void 0:e.type)&&g.current)g.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(g.current=!0);var c,h,p,f=l?null:E.current,d=f?f.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(d.width/2),h=Math.round(d.height/2);else{var v=e.touches&&e.touches.length>0?e.touches[0]:e,m=v.clientX,y=v.clientY;c=Math.round(m-d.left),h=Math.round(y-d.top)}if(s)(p=Math.sqrt((2*Math.pow(d.width,2)+Math.pow(d.height,2))/3))%2===0&&(p+=1);else{var b=2*Math.max(Math.abs((f?f.clientWidth:0)-c),c)+2,I=2*Math.max(Math.abs((f?f.clientHeight:0)-h),h)+2;p=Math.sqrt(Math.pow(b,2)+Math.pow(I,2))}null!=e&&e.touches?null===T.current&&(T.current=function(){x({pulsate:i,rippleX:c,rippleY:h,rippleSize:p,cb:n})},_.current=setTimeout((function(){T.current&&(T.current(),T.current=null)}),zae)):x({pulsate:i,rippleX:c,rippleY:h,rippleSize:p,cb:n})}}),[o,x]),I=e.useCallback((function(){b({},{pulsate:!0})}),[b]),w=e.useCallback((function(e,t){if(clearTimeout(_.current),"touchend"===(null==e?void 0:e.type)&&T.current)return T.current(),T.current=null,void(_.current=setTimeout((function(){w(e,t)})));T.current=null,v((function(e){return e.length>0?e.slice(1):e})),y.current=t}),[]);return e.useImperativeHandle(n,(function(){return{pulsate:I,start:b,stop:w}}),[I,b,w]),(0,Je.jsx)(Vae,(0,ze.Z)({className:(0,He.Z)(Zae.root,l.root,c),ref:E},h,{children:(0,Je.jsx)(xae,{component:null,exit:!0,children:d})}))})),qae=Yae;function Xae(e){return(0,iae.Z)("MuiButtonBase",e)}var Kae,Qae=(0,rae.Z)("MuiButtonBase",["root","disabled","focusVisible"]),Jae=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],$ae=(0,tae.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((Kae={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,at.Z)(Kae,"&.".concat(Qae.disabled),{pointerEvents:"none",cursor:"default"}),(0,at.Z)(Kae,"@media print",{colorAdjust:"exact"}),Kae)),ese=e.forwardRef((function(t,n){var r=(0,nae.Z)({props:t,name:"MuiButtonBase"}),a=r.action,s=r.centerRipple,o=void 0!==s&&s,u=r.children,l=r.className,c=r.component,h=void 0===c?"button":c,p=r.disabled,f=void 0!==p&&p,d=r.disableRipple,v=void 0!==d&&d,m=r.disableTouchRipple,y=void 0!==m&&m,g=r.focusRipple,_=void 0!==g&&g,T=r.LinkComponent,E=void 0===T?"a":T,x=r.onBlur,b=r.onClick,I=r.onContextMenu,w=r.onDragLeave,k=r.onFocus,S=r.onFocusVisible,R=r.onKeyDown,C=r.onKeyUp,D=r.onMouseDown,A=r.onMouseLeave,O=r.onMouseUp,N=r.onTouchEnd,M=r.onTouchMove,P=r.onTouchStart,F=r.tabIndex,L=void 0===F?0:F,U=r.TouchRippleProps,Z=r.touchRippleRef,B=r.type,z=(0,Ge.Z)(r,Jae),G=e.useRef(null),H=e.useRef(null),j=(0,hae.Z)(H,Z),V=(0,fae.Z)(),W=V.isFocusVisibleRef,Y=V.onFocus,q=V.onBlur,X=V.ref,K=e.useState(!1),Q=(0,i.Z)(K,2),J=Q[0],$=Q[1];f&&J&&$(!1),e.useImperativeHandle(a,(function(){return{focusVisible:function(){$(!0),G.current.focus()}}}),[]);var ee=e.useState(!1),te=(0,i.Z)(ee,2),ne=te[0],re=te[1];e.useEffect((function(){re(!0)}),[]);var ie=ne&&!v&&!f;function ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;return(0,pae.Z)((function(r){return t&&t(r),!n&&H.current&&H.current[e](r),!0}))}e.useEffect((function(){J&&_&&!v&&ne&&H.current.pulsate()}),[v,_,J,ne]);var se=ae("start",D),oe=ae("stop",I),ue=ae("stop",w),le=ae("stop",O),ce=ae("stop",(function(e){J&&e.preventDefault(),A&&A(e)})),he=ae("start",P),pe=ae("stop",N),fe=ae("stop",M),de=ae("stop",(function(e){q(e),!1===W.current&&$(!1),x&&x(e)}),!1),ve=(0,pae.Z)((function(e){G.current||(G.current=e.currentTarget),Y(e),!0===W.current&&($(!0),S&&S(e)),k&&k(e)})),me=function(){var e=G.current;return h&&"button"!==h&&!("A"===e.tagName&&e.href)},ye=e.useRef(!1),ge=(0,pae.Z)((function(e){_&&!ye.current&&J&&H.current&&" "===e.key&&(ye.current=!0,H.current.stop(e,(function(){H.current.start(e)}))),e.target===e.currentTarget&&me()&&" "===e.key&&e.preventDefault(),R&&R(e),e.target===e.currentTarget&&me()&&"Enter"===e.key&&!f&&(e.preventDefault(),b&&b(e))})),_e=(0,pae.Z)((function(e){_&&" "===e.key&&H.current&&J&&!e.defaultPrevented&&(ye.current=!1,H.current.stop(e,(function(){H.current.pulsate(e)}))),C&&C(e),b&&e.target===e.currentTarget&&me()&&" "===e.key&&!e.defaultPrevented&&b(e)})),Te=h;"button"===Te&&(z.href||z.to)&&(Te=E);var Ee={};"button"===Te?(Ee.type=void 0===B?"button":B,Ee.disabled=f):(z.href||z.to||(Ee.role="button"),f&&(Ee["aria-disabled"]=f));var xe=(0,hae.Z)(n,X,G);var be=(0,ze.Z)({},r,{centerRipple:o,component:h,disabled:f,disableRipple:v,disableTouchRipple:y,focusRipple:_,tabIndex:L,focusVisible:J}),Ie=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,i=e.classes,a={root:["root",t&&"disabled",n&&"focusVisible"]},s=(0,$ie.Z)(a,Xae,i);return n&&r&&(s.root+=" ".concat(r)),s}(be);return(0,Je.jsxs)($ae,(0,ze.Z)({as:Te,className:(0,He.Z)(Ie.root,l),ownerState:be,onBlur:de,onClick:b,onContextMenu:oe,onFocus:ve,onKeyDown:ge,onKeyUp:_e,onMouseDown:se,onMouseLeave:ce,onMouseUp:le,onDragLeave:ue,onTouchEnd:pe,onTouchMove:fe,onTouchStart:he,ref:xe,tabIndex:f?-1:L,type:B},Ee,z,{children:[u,ie?(0,Je.jsx)(qae,(0,ze.Z)({ref:j,center:o},U)):null]}))})),tse=ese,nse=n(1615);function rse(e){return(0,iae.Z)("MuiIconButton",e)}var ise=(0,rae.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),ase=["edge","children","className","color","disabled","disableFocusRipple","size"],sse=(0,tae.ZP)(tse,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"default"!==n.color&&t["color".concat((0,nse.Z)(n.color))],n.edge&&t["edge".concat((0,nse.Z)(n.edge))],t["size".concat((0,nse.Z)(n.size))]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,ze.Z)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,eae.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(function(e){var t,n=e.theme,r=e.ownerState,i=null==(t=(n.vars||n).palette)?void 0:t[r.color];return(0,ze.Z)({},"inherit"===r.color&&{color:"inherit"},"inherit"!==r.color&&"default"!==r.color&&(0,ze.Z)({color:null==i?void 0:i.main},!r.disableRipple&&{"&:hover":(0,ze.Z)({},i&&{backgroundColor:n.vars?"rgba(".concat(i.mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,eae.Fq)(i.main,n.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===r.size&&{padding:5,fontSize:n.typography.pxToRem(18)},"large"===r.size&&{padding:12,fontSize:n.typography.pxToRem(28)},(0,at.Z)({},"&.".concat(ise.disabled),{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}))})),ose=e.forwardRef((function(e,t){var n=(0,nae.Z)({props:e,name:"MuiIconButton"}),r=n.edge,i=void 0!==r&&r,a=n.children,s=n.className,o=n.color,u=void 0===o?"default":o,l=n.disabled,c=void 0!==l&&l,h=n.disableFocusRipple,p=void 0!==h&&h,f=n.size,d=void 0===f?"medium":f,v=(0,Ge.Z)(n,ase),m=(0,ze.Z)({},n,{edge:i,color:u,disabled:c,disableFocusRipple:p,size:d}),y=function(e){var t=e.classes,n=e.disabled,r=e.color,i=e.edge,a=e.size,s={root:["root",n&&"disabled","default"!==r&&"color".concat((0,nse.Z)(r)),i&&"edge".concat((0,nse.Z)(i)),"size".concat((0,nse.Z)(a))]};return(0,$ie.Z)(s,rse,t)}(m);return(0,Je.jsx)(sse,(0,ze.Z)({className:(0,He.Z)(y.root,s),centerRipple:!0,focusRipple:!p,disabled:c,ref:t,ownerState:m},v,{children:a}))})),use=ose,lse=n(9790),cse=n(4045);var hse=e.createContext({});function pse(e){return(0,iae.Z)("MuiList",e)}(0,rae.Z)("MuiList",["root","padding","dense","subheader"]);var fse=["children","className","component","dense","disablePadding","subheader"],dse=(0,tae.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((function(e){var t=e.ownerState;return(0,ze.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),vse=e.forwardRef((function(t,n){var r=(0,nae.Z)({props:t,name:"MuiList"}),i=r.children,a=r.className,s=r.component,o=void 0===s?"ul":s,u=r.dense,l=void 0!==u&&u,c=r.disablePadding,h=void 0!==c&&c,p=r.subheader,f=(0,Ge.Z)(r,fse),d=e.useMemo((function(){return{dense:l}}),[l]),v=(0,ze.Z)({},r,{component:o,dense:l,disablePadding:h}),m=function(e){var t=e.classes,n={root:["root",!e.disablePadding&&"padding",e.dense&&"dense",e.subheader&&"subheader"]};return(0,$ie.Z)(n,pse,t)}(v);return(0,Je.jsx)(hse.Provider,{value:d,children:(0,Je.jsxs)(dse,(0,ze.Z)({as:o,className:(0,He.Z)(m.root,a),ref:n,ownerState:v},f,{children:[p,i]}))})})),mse=vse;function yse(e){return"string"===typeof e}var gse=n(7816),_se=n(3118);function Tse(e){return(0,iae.Z)("MuiListItem",e)}var Ese=(0,rae.Z)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);function xse(e){return(0,iae.Z)("MuiListItemButton",e)}var bse=(0,rae.Z)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Ise(e){return(0,iae.Z)("MuiListItemSecondaryAction",e)}(0,rae.Z)("MuiListItemSecondaryAction",["root","disableGutters"]);var wse=["className"],kse=(0,tae.ZP)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.disableGutters&&t.disableGutters]}})((function(e){var t=e.ownerState;return(0,ze.Z)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})})),Sse=e.forwardRef((function(t,n){var r=(0,nae.Z)({props:t,name:"MuiListItemSecondaryAction"}),i=r.className,a=(0,Ge.Z)(r,wse),s=e.useContext(hse),o=(0,ze.Z)({},r,{disableGutters:s.disableGutters}),u=function(e){var t=e.disableGutters,n=e.classes,r={root:["root",t&&"disableGutters"]};return(0,$ie.Z)(r,Ise,n)}(o);return(0,Je.jsx)(kse,(0,ze.Z)({className:(0,He.Z)(u.root,i),ownerState:o,ref:n},a))}));Sse.muiName="ListItemSecondaryAction";var Rse=Sse,Cse=["className"],Dse=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Ase=(0,tae.ZP)("div",{name:"MuiListItem",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,ze.Z)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!r.disablePadding&&(0,ze.Z)({paddingTop:8,paddingBottom:8},r.dense&&{paddingTop:4,paddingBottom:4},!r.disableGutters&&{paddingLeft:16,paddingRight:16},!!r.secondaryAction&&{paddingRight:48}),!!r.secondaryAction&&(0,at.Z)({},"& > .".concat(bse.root),{paddingRight:48}),(t={},(0,at.Z)(t,"&.".concat(Ese.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),(0,at.Z)(t,"&.".concat(Ese.selected),(0,at.Z)({backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,eae.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(Ese.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,eae.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,at.Z)(t,"&.".concat(Ese.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity}),t),"flex-start"===r.alignItems&&{alignItems:"flex-start"},r.divider&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider),backgroundClip:"padding-box"},r.button&&(0,at.Z)({transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(Ese.selected,":hover"),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,eae.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,eae.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),r.hasSecondaryAction&&{paddingRight:48})})),Ose=(0,tae.ZP)("li",{name:"MuiListItem",slot:"Container",overridesResolver:function(e,t){return t.container}})({position:"relative"}),Nse=e.forwardRef((function(t,n){var r=(0,nae.Z)({props:t,name:"MuiListItem"}),i=r.alignItems,a=void 0===i?"center":i,s=r.autoFocus,o=void 0!==s&&s,u=r.button,l=void 0!==u&&u,c=r.children,h=r.className,p=r.component,f=r.components,d=void 0===f?{}:f,v=r.componentsProps,m=void 0===v?{}:v,y=r.ContainerComponent,g=void 0===y?"li":y,_=r.ContainerProps,T=(void 0===_?{}:_).className,E=r.dense,x=void 0!==E&&E,b=r.disabled,I=void 0!==b&&b,w=r.disableGutters,k=void 0!==w&&w,S=r.disablePadding,R=void 0!==S&&S,C=r.divider,D=void 0!==C&&C,A=r.focusVisibleClassName,O=r.secondaryAction,N=r.selected,M=void 0!==N&&N,P=r.slotProps,F=void 0===P?{}:P,L=r.slots,U=void 0===L?{}:L,Z=(0,Ge.Z)(r.ContainerProps,Cse),B=(0,Ge.Z)(r,Dse),z=e.useContext(hse),G=e.useMemo((function(){return{dense:x||z.dense||!1,alignItems:a,disableGutters:k}}),[a,z.dense,x,k]),H=e.useRef(null);(0,_se.Z)((function(){o&&H.current&&H.current.focus()}),[o]);var j=e.Children.toArray(c),V=j.length&&(0,gse.Z)(j[j.length-1],["ListItemSecondaryAction"]),W=(0,ze.Z)({},r,{alignItems:a,autoFocus:o,button:l,dense:G.dense,disabled:I,disableGutters:k,disablePadding:R,divider:D,hasSecondaryAction:V,selected:M}),Y=function(e){var t=e.alignItems,n=e.button,r=e.classes,i=e.dense,a=e.disabled,s={root:["root",i&&"dense",!e.disableGutters&&"gutters",!e.disablePadding&&"padding",e.divider&&"divider",a&&"disabled",n&&"button","flex-start"===t&&"alignItemsFlexStart",e.hasSecondaryAction&&"secondaryAction",e.selected&&"selected"],container:["container"]};return(0,$ie.Z)(s,Tse,r)}(W),q=(0,hae.Z)(H,n),X=U.root||d.Root||Ase,K=F.root||m.root||{},Q=(0,ze.Z)({className:(0,He.Z)(Y.root,K.className,h),disabled:I},B),J=p||"li";return l&&(Q.component=p||"div",Q.focusVisibleClassName=(0,He.Z)(Ese.focusVisible,A),J=tse),V?(J=Q.component||p?J:"div","li"===g&&("li"===J?J="div":"li"===Q.component&&(Q.component="div")),(0,Je.jsx)(hse.Provider,{value:G,children:(0,Je.jsxs)(Ose,(0,ze.Z)({as:g,className:(0,He.Z)(Y.container,T),ref:q,ownerState:W},Z,{children:[(0,Je.jsx)(X,(0,ze.Z)({},K,!yse(X)&&{as:J,ownerState:(0,ze.Z)({},W,K.ownerState)},Q,{children:j})),j.pop()]}))})):(0,Je.jsx)(hse.Provider,{value:G,children:(0,Je.jsxs)(X,(0,ze.Z)({},K,{as:J,ref:q},!yse(X)&&{ownerState:(0,ze.Z)({},W,K.ownerState)},Q,{children:[j,O&&(0,Je.jsx)(Rse,{children:O})]}))})})),Mse=Nse,Pse=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],Fse=(0,tae.ZP)(tse,{shouldForwardProp:function(e){return(0,tae.FO)(e)||"classes"===e},name:"MuiListItemButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,ze.Z)((t={display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,at.Z)(t,"&.".concat(bse.selected),(0,at.Z)({backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,eae.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(bse.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,eae.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,at.Z)(t,"&.".concat(bse.selected,":hover"),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,eae.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,eae.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),(0,at.Z)(t,"&.".concat(bse.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),(0,at.Z)(t,"&.".concat(bse.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity}),t),r.divider&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider),backgroundClip:"padding-box"},"flex-start"===r.alignItems&&{alignItems:"flex-start"},!r.disableGutters&&{paddingLeft:16,paddingRight:16},r.dense&&{paddingTop:4,paddingBottom:4})})),Lse=e.forwardRef((function(t,n){var r=(0,nae.Z)({props:t,name:"MuiListItemButton"}),i=r.alignItems,a=void 0===i?"center":i,s=r.autoFocus,o=void 0!==s&&s,u=r.component,l=void 0===u?"div":u,c=r.children,h=r.dense,p=void 0!==h&&h,f=r.disableGutters,d=void 0!==f&&f,v=r.divider,m=void 0!==v&&v,y=r.focusVisibleClassName,g=r.selected,_=void 0!==g&&g,T=r.className,E=(0,Ge.Z)(r,Pse),x=e.useContext(hse),b=e.useMemo((function(){return{dense:p||x.dense||!1,alignItems:a,disableGutters:d}}),[a,x.dense,p,d]),I=e.useRef(null);(0,_se.Z)((function(){o&&I.current&&I.current.focus()}),[o]);var w=(0,ze.Z)({},r,{alignItems:a,dense:b.dense,disableGutters:d,divider:m,selected:_}),k=function(e){var t=e.alignItems,n=e.classes,r=e.dense,i=e.disabled,a={root:["root",r&&"dense",!e.disableGutters&&"gutters",e.divider&&"divider",i&&"disabled","flex-start"===t&&"alignItemsFlexStart",e.selected&&"selected"]},s=(0,$ie.Z)(a,xse,n);return(0,ze.Z)({},n,s)}(w),S=(0,hae.Z)(I,n);return(0,Je.jsx)(hse.Provider,{value:b,children:(0,Je.jsx)(Fse,(0,ze.Z)({ref:S,href:E.href||E.to,component:(E.href||E.to)&&"div"===l?"button":l,focusVisibleClassName:(0,He.Z)(k.focusVisible,y),ownerState:w,className:(0,He.Z)(k.root,T)},E,{classes:k,children:c}))})})),Use=Lse;function Zse(e){return(0,iae.Z)("MuiListItemIcon",e)}(0,rae.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);var Bse=["className"],zse=(0,tae.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((function(e){var t=e.theme,n=e.ownerState;return(0,ze.Z)({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})})),Gse=e.forwardRef((function(t,n){var r=(0,nae.Z)({props:t,name:"MuiListItemIcon"}),i=r.className,a=(0,Ge.Z)(r,Bse),s=e.useContext(hse),o=(0,ze.Z)({},r,{alignItems:s.alignItems}),u=function(e){var t=e.alignItems,n=e.classes,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,$ie.Z)(r,Zse,n)}(o);return(0,Je.jsx)(zse,(0,ze.Z)({className:(0,He.Z)(u.root,i),ownerState:o,ref:n},a))})),Hse=Gse;function jse(e){return(0,iae.Z)("MuiTypography",e)}(0,rae.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var Vse=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Wse=(0,tae.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat((0,nse.Z)(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((function(e){var t=e.theme,n=e.ownerState;return(0,ze.Z)({margin:0},n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),Yse={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},qse={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Xse=e.forwardRef((function(e,t){var n=(0,nae.Z)({props:e,name:"MuiTypography"}),r=function(e){return qse[e]||e}(n.color),i=Ke((0,ze.Z)({},n,{color:r})),a=i.align,s=void 0===a?"inherit":a,o=i.className,u=i.component,l=i.gutterBottom,c=void 0!==l&&l,h=i.noWrap,p=void 0!==h&&h,f=i.paragraph,d=void 0!==f&&f,v=i.variant,m=void 0===v?"body1":v,y=i.variantMapping,g=void 0===y?Yse:y,_=(0,Ge.Z)(i,Vse),T=(0,ze.Z)({},i,{align:s,color:r,className:o,component:u,gutterBottom:c,noWrap:p,paragraph:d,variant:m,variantMapping:g}),E=u||(d?"p":g[m]||Yse[m])||"span",x=function(e){var t=e.align,n=e.gutterBottom,r=e.noWrap,i=e.paragraph,a=e.variant,s=e.classes,o={root:["root",a,"inherit"!==e.align&&"align".concat((0,nse.Z)(t)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,$ie.Z)(o,jse,s)}(T);return(0,Je.jsx)(Wse,(0,ze.Z)({as:E,ref:t,ownerState:T,className:(0,He.Z)(x.root,o)},_))})),Kse=Xse;function Qse(e){return(0,iae.Z)("MuiListItemText",e)}var Jse=(0,rae.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),$se=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],eoe=(0,tae.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,at.Z)({},"& .".concat(Jse.primary),t.primary),(0,at.Z)({},"& .".concat(Jse.secondary),t.secondary),t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})((function(e){var t=e.ownerState;return(0,ze.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})})),toe=e.forwardRef((function(t,n){var r=(0,nae.Z)({props:t,name:"MuiListItemText"}),i=r.children,a=r.className,s=r.disableTypography,o=void 0!==s&&s,u=r.inset,l=void 0!==u&&u,c=r.primary,h=r.primaryTypographyProps,p=r.secondary,f=r.secondaryTypographyProps,d=(0,Ge.Z)(r,$se),v=e.useContext(hse).dense,m=null!=c?c:i,y=p,g=(0,ze.Z)({},r,{disableTypography:o,inset:l,primary:!!m,secondary:!!y,dense:v}),_=function(e){var t=e.classes,n=e.inset,r=e.primary,i=e.secondary,a={root:["root",n&&"inset",e.dense&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,$ie.Z)(a,Qse,t)}(g);return null==m||m.type===Kse||o||(m=(0,Je.jsx)(Kse,(0,ze.Z)({variant:v?"body2":"body1",className:_.primary,component:null!=h&&h.variant?void 0:"span",display:"block"},h,{children:m}))),null==y||y.type===Kse||o||(y=(0,Je.jsx)(Kse,(0,ze.Z)({variant:"body2",className:_.secondary,color:"text.secondary",display:"block"},f,{children:y}))),(0,Je.jsxs)(eoe,(0,ze.Z)({className:(0,He.Z)(_.root,a),ownerState:g,ref:n},d,{children:[m,y]}))})),noe=toe,roe=n(7748),ioe=n(2854),aoe=n(6034),soe=n(1945),ooe=n(4588),uoe=n(961),loe=n(9344),coe=n(1997),hoe=n(3973);var poe=function(e){var t=e.open,n=e.onToggleMenu,r=Kie(),a=(0,i.Z)(r,2),s=function(e,t,n){return[{name:"Info",icon:(0,Je.jsx)(uoe.Z,{}),action:function(){n(!0,"BuildingInfo")}},{name:"Models",icon:(0,Je.jsx)(ooe.Z,{}),action:function(){n(!0,"ModelList")}},{name:"Floorplans",icon:(0,Je.jsx)(soe.Z,{}),action:function(){n(!0,"Floorplans")}},{name:"Properties",icon:(0,Je.jsx)(hoe.Z,{}),action:function(){n(!0,"Properties")}},{name:"Issues",icon:(0,Je.jsx)(aoe.Z,{}),action:function(){}},{name:"Map viewer",icon:(0,Je.jsx)(roe.Z,{}),action:function(){t({type:"CLOSE_BUILDING"})}},{name:"Excel",icon:(0,Je.jsx)(loe.Z,{}),action:function(){}},{name:"Delete building",icon:(0,Je.jsx)(coe.Z,{}),action:function(){t({type:"DELETE_BUILDING",payload:e.building})}},{name:"Log out",icon:(0,Je.jsx)(ioe.Z,{}),action:function(){t({type:"LOGOUT"})}}]}(a[0],a[1],n);return(0,Je.jsx)(mse,{children:s.map((function(e){return(0,Je.jsx)(Mse,{onClick:e.action,disablePadding:!0,sx:{display:"block"},children:(0,Je.jsxs)(Use,{sx:{minHeight:48,justifyContent:t?"initial":"center",px:2.5},children:[(0,Je.jsx)(Hse,{sx:{minWidth:0,mr:t?3:"auto",justifyContent:"center"},children:e.icon}),(0,Je.jsx)(noe,{primary:e.name,sx:{opacity:t?1:0}})]})},e.name)}))})},foe=function(e){return((e<1?5.11916*Math.pow(e,2):4.5*Math.log(e+1)+2)/100).toFixed(2)};function doe(e){return(0,iae.Z)("MuiPaper",e)}(0,rae.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var voe=["className","component","elevation","square","variant"],moe=(0,tae.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,ze.Z)({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!r.square&&{borderRadius:n.shape.borderRadius},"outlined"===r.variant&&{border:"1px solid ".concat((n.vars||n).palette.divider)},"elevation"===r.variant&&(0,ze.Z)({boxShadow:(n.vars||n).shadows[r.elevation]},!n.vars&&"dark"===n.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,eae.Fq)("#fff",foe(r.elevation)),", ").concat((0,eae.Fq)("#fff",foe(r.elevation)),")")},n.vars&&{backgroundImage:null==(t=n.vars.overlays)?void 0:t[r.elevation]}))})),yoe=e.forwardRef((function(e,t){var n=(0,nae.Z)({props:e,name:"MuiPaper"}),r=n.className,i=n.component,a=void 0===i?"div":i,s=n.elevation,o=void 0===s?1:s,u=n.square,l=void 0!==u&&u,c=n.variant,h=void 0===c?"elevation":c,p=(0,Ge.Z)(n,voe),f=(0,ze.Z)({},n,{component:a,elevation:o,square:l,variant:h}),d=function(e){var t=e.square,n=e.elevation,r=e.variant,i=e.classes,a={root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,$ie.Z)(a,doe,i)}(f);return(0,Je.jsx)(moe,(0,ze.Z)({as:a,ownerState:f,className:(0,He.Z)(d.root,r),ref:t},p))})),goe=yoe;function _oe(e){return(0,iae.Z)("MuiAppBar",e)}(0,rae.Z)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);var Toe=["className","color","enableColorOnDark","position"],Eoe=function(e,t){return e?"".concat(null==e?void 0:e.replace(")",""),", ").concat(t,")"):t},xoe=(0,tae.ZP)(goe,{name:"MuiAppBar",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["position".concat((0,nse.Z)(n.position))],t["color".concat((0,nse.Z)(n.color))]]}})((function(e){var t=e.theme,n=e.ownerState,r="light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[900];return(0,ze.Z)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},!t.vars&&(0,ze.Z)({},"default"===n.color&&{backgroundColor:r,color:t.palette.getContrastText(r)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:t.palette[n.color].main,color:t.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===t.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&(0,ze.Z)({backgroundColor:"transparent",color:"inherit"},"dark"===t.palette.mode&&{backgroundImage:"none"})),t.vars&&(0,ze.Z)({},"default"===n.color&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette.AppBar.defaultBg:Eoe(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":n.enableColorOnDark?t.vars.palette.text.primary:Eoe(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},n.color&&!n.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette[n.color].main:Eoe(t.vars.palette.AppBar.darkBg,t.vars.palette[n.color].main),"--AppBar-color":n.enableColorOnDark?t.vars.palette[n.color].contrastText:Eoe(t.vars.palette.AppBar.darkColor,t.vars.palette[n.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:"inherit"===n.color?"inherit":"var(--AppBar-color)"},"transparent"===n.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),boe=e.forwardRef((function(e,t){var n=(0,nae.Z)({props:e,name:"MuiAppBar"}),r=n.className,i=n.color,a=void 0===i?"primary":i,s=n.enableColorOnDark,o=void 0!==s&&s,u=n.position,l=void 0===u?"fixed":u,c=(0,Ge.Z)(n,Toe),h=(0,ze.Z)({},n,{color:a,position:l,enableColorOnDark:o}),p=function(e){var t=e.color,n=e.position,r=e.classes,i={root:["root","color".concat((0,nse.Z)(t)),"position".concat((0,nse.Z)(n))]};return(0,$ie.Z)(i,_oe,r)}(h);return(0,Je.jsx)(xoe,(0,ze.Z)({square:!0,component:"header",ownerState:h,elevation:4,className:(0,He.Z)(p.root,r,"fixed"===l&&"mui-fixed"),ref:t},c))})),Ioe=boe,woe=n(7472),koe=n(9081),Soe=n(2780),Roe=n(4246),Coe=n(1168),Doe=n(2678),Aoe=n(9265);var Ooe=e.forwardRef((function(t,n){var r=t.children,a=t.container,s=t.disablePortal,o=void 0!==s&&s,u=e.useState(null),l=(0,i.Z)(u,2),c=l[0],h=l[1],p=(0,woe.Z)(e.isValidElement(r)?r.ref:null,n);if((0,Doe.Z)((function(){o||h(function(e){return"function"===typeof e?e():e}(a)||document.body)}),[a,o]),(0,Doe.Z)((function(){if(c&&!o)return(0,Aoe.Z)(n,c),function(){(0,Aoe.Z)(n,null)}}),[n,c,o]),o){if(e.isValidElement(r)){var f={ref:p};return e.cloneElement(r,f)}return(0,Je.jsx)(e.Fragment,{children:r})}return(0,Je.jsx)(e.Fragment,{children:c?Coe.createPortal(r,c):c})}));var Noe=Ooe,Moe=n(3282);function Poe(e){var t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}function Foe(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Loe(e){return parseInt((0,Moe.Z)(e).getComputedStyle(e).paddingRight,10)||0}function Uoe(e,t,n,r,i){var s=[t,n].concat((0,a.Z)(r));[].forEach.call(e.children,(function(e){var t=-1===s.indexOf(e),n=!function(e){var t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&Foe(e,i)}))}function Zoe(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function Boe(e,t){var n=[],r=e.container;if(!t.disableScrollLock){if(function(e){var t=(0,koe.Z)(e);return t.body===e?(0,Moe.Z)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){var i=Poe((0,koe.Z)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(Loe(r)+i,"px");var a=(0,koe.Z)(r).querySelectorAll(".mui-fixed");[].forEach.call(a,(function(e){n.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(Loe(e)+i,"px")}))}var s;if(r.parentNode instanceof DocumentFragment)s=(0,koe.Z)(r).body;else{var o=r.parentElement,u=(0,Moe.Z)(r);s="HTML"===(null==o?void 0:o.nodeName)&&"scroll"===u.getComputedStyle(o).overflowY?o:r}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return function(){n.forEach((function(e){var t=e.value,n=e.el,r=e.property;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var zoe=function(){function e(){(0,s.Z)(this,e),this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}return(0,o.Z)(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&Foe(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Uoe(t,e.mount,e.modalRef,r,!0);var i=Zoe(this.containers,(function(e){return e.container===t}));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}},{key:"mount",value:function(e,t){var n=Zoe(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=Boe(r,t))}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.modals.indexOf(e);if(-1===n)return n;var r=Zoe(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&Foe(e.modalRef,t),Uoe(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{var a=i.modals[i.modals.length-1];a.modalRef&&Foe(a.modalRef,!1)}return n}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}(),Goe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Hoe(e){var t=[],n=[];return Array.from(e.querySelectorAll(Goe)).forEach((function(e,r){var i=function(e){var t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;var t=function(t){return e.ownerDocument.querySelector('input[type="radio"]'.concat(t))},n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort((function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex})).map((function(e){return e.node})).concat(t)}function joe(){return!0}var Voe=function(t){var n=t.children,r=t.disableAutoFocus,i=void 0!==r&&r,a=t.disableEnforceFocus,s=void 0!==a&&a,o=t.disableRestoreFocus,u=void 0!==o&&o,l=t.getTabbable,c=void 0===l?Hoe:l,h=t.isEnabled,p=void 0===h?joe:h,f=t.open,d=e.useRef(!1),v=e.useRef(null),m=e.useRef(null),y=e.useRef(null),g=e.useRef(null),_=e.useRef(!1),T=e.useRef(null),E=(0,woe.Z)(n.ref,T),x=e.useRef(null);e.useEffect((function(){f&&T.current&&(_.current=!i)}),[i,f]),e.useEffect((function(){if(f&&T.current){var e=(0,koe.Z)(T.current);return T.current.contains(e.activeElement)||(T.current.hasAttribute("tabIndex")||T.current.setAttribute("tabIndex","-1"),_.current&&T.current.focus()),function(){u||(y.current&&y.current.focus&&(d.current=!0,y.current.focus()),y.current=null)}}}),[f]),e.useEffect((function(){if(f&&T.current){var e=(0,koe.Z)(T.current),t=function(t){var n=T.current;if(null!==n)if(e.hasFocus()&&!s&&p()&&!d.current){if(!n.contains(e.activeElement)){if(t&&g.current!==t.target||e.activeElement!==g.current)g.current=null;else if(null!==g.current)return;if(!_.current)return;var r=[];if(e.activeElement!==v.current&&e.activeElement!==m.current||(r=c(T.current)),r.length>0){var i,a,o=Boolean((null==(i=x.current)?void 0:i.shiftKey)&&"Tab"===(null==(a=x.current)?void 0:a.key)),u=r[0],l=r[r.length-1];"string"!==typeof u&&"string"!==typeof l&&(o?l.focus():u.focus())}else n.focus()}}else d.current=!1},n=function(t){x.current=t,!s&&p()&&"Tab"===t.key&&e.activeElement===T.current&&t.shiftKey&&(d.current=!0,m.current&&m.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",n,!0);var r=setInterval((function(){e.activeElement&&"BODY"===e.activeElement.tagName&&t(null)}),50);return function(){clearInterval(r),e.removeEventListener("focusin",t),e.removeEventListener("keydown",n,!0)}}}),[i,s,u,p,f,c]);var b=function(e){null===y.current&&(y.current=e.relatedTarget),_.current=!0};return(0,Je.jsxs)(e.Fragment,{children:[(0,Je.jsx)("div",{tabIndex:f?0:-1,onFocus:b,ref:v,"data-testid":"sentinelStart"}),e.cloneElement(n,{ref:E,onFocus:function(e){null===y.current&&(y.current=e.relatedTarget),_.current=!0,g.current=e.target;var t=n.props.onFocus;t&&t(e)}}),(0,Je.jsx)("div",{tabIndex:f?0:-1,onFocus:b,ref:m,"data-testid":"sentinelEnd"})]})};function Woe(e){return(0,iae.Z)("MuiModal",e)}(0,rae.Z)("MuiModal",["root","hidden","backdrop"]);function Yoe(e){if(void 0===e)return{};var t={};return Object.keys(e).filter((function(t){return!(t.match(/^on[A-Z]/)&&"function"===typeof e[t])})).forEach((function(n){t[n]=e[n]})),t}function qoe(e){var t=e.getSlotProps,n=e.additionalProps,r=e.externalSlotProps,i=e.externalForwardedProps,a=e.className;if(!t){var s=(0,He.Z)(null==i?void 0:i.className,null==r?void 0:r.className,a,null==n?void 0:n.className),o=(0,ze.Z)({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),u=(0,ze.Z)({},n,i,r);return s.length>0&&(u.className=s),Object.keys(o).length>0&&(u.style=o),{props:u,internalRef:void 0}}var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};var n={};return Object.keys(e).filter((function(n){return n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n)})).forEach((function(t){n[t]=e[t]})),n}((0,ze.Z)({},i,r)),c=Yoe(r),h=Yoe(i),p=t(l),f=(0,He.Z)(null==p?void 0:p.className,null==n?void 0:n.className,a,null==i?void 0:i.className,null==r?void 0:r.className),d=(0,ze.Z)({},null==p?void 0:p.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),v=(0,ze.Z)({},p,n,h,c);return f.length>0&&(v.className=f),Object.keys(d).length>0&&(v.style=d),{props:v,internalRef:p.ref}}function Xoe(e,t){return"function"===typeof e?e(t):e}var Koe=["elementType","externalSlotProps","ownerState"];function Qoe(e){var t,n=e.elementType,r=e.externalSlotProps,i=e.ownerState,a=(0,Ge.Z)(e,Koe),s=Xoe(r,i),o=qoe((0,ze.Z)({},a,{externalSlotProps:s})),u=o.props,l=o.internalRef,c=(0,woe.Z)(l,null==s?void 0:s.ref,null==(t=e.additionalProps)?void 0:t.ref),h=function(e,t,n){return void 0===e||yse(e)?t:(0,ze.Z)({},t,{ownerState:(0,ze.Z)({},t.ownerState,n)})}(n,(0,ze.Z)({},u,{ref:c}),i);return h}var Joe={disableDefaultClasses:!1},$oe=e.createContext(Joe);var eue=["children","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],tue=function(t){var n=t.open,r=t.exited,i={root:["root",!n&&r&&"hidden"],backdrop:["backdrop"]};return(0,$ie.Z)(i,function(t){var n=e.useContext($oe).disableDefaultClasses;return function(e){return n?"":t(e)}}(Woe))};var nue=new zoe,rue=e.forwardRef((function(t,n){var r,a,s=t.children,o=t.closeAfterTransition,u=void 0!==o&&o,l=t.component,c=t.container,h=t.disableAutoFocus,p=void 0!==h&&h,f=t.disableEnforceFocus,d=void 0!==f&&f,v=t.disableEscapeKeyDown,m=void 0!==v&&v,y=t.disablePortal,g=void 0!==y&&y,_=t.disableRestoreFocus,T=void 0!==_&&_,E=t.disableScrollLock,x=void 0!==E&&E,b=t.hideBackdrop,I=void 0!==b&&b,w=t.keepMounted,k=void 0!==w&&w,S=t.manager,R=void 0===S?nue:S,C=t.onBackdropClick,D=t.onClose,A=t.onKeyDown,O=t.open,N=t.onTransitionEnter,M=t.onTransitionExited,P=t.slotProps,F=void 0===P?{}:P,L=t.slots,U=void 0===L?{}:L,Z=(0,Ge.Z)(t,eue),B=e.useState(!O),z=(0,i.Z)(B,2),G=z[0],H=z[1],j=e.useRef({}),V=e.useRef(null),W=e.useRef(null),Y=(0,woe.Z)(W,n),q=function(e){return!!e&&e.props.hasOwnProperty("in")}(s),X=null==(r=t["aria-hidden"])||r,K=function(){return j.current.modalRef=W.current,j.current.mountNode=V.current,j.current},Q=function(){R.mount(K(),{disableScrollLock:x}),W.current&&(W.current.scrollTop=0)},J=(0,Soe.Z)((function(){var e=function(e){return"function"===typeof e?e():e}(c)||(0,koe.Z)(V.current).body;R.add(K(),e),W.current&&Q()})),$=e.useCallback((function(){return R.isTopModal(K())}),[R]),ee=(0,Soe.Z)((function(e){V.current=e,e&&W.current&&(O&&$()?Q():Foe(W.current,X))})),te=e.useCallback((function(){R.remove(K(),X)}),[R,X]);e.useEffect((function(){return function(){te()}}),[te]),e.useEffect((function(){O?J():q&&u||te()}),[O,te,q,u,J]);var ne=(0,ze.Z)({},t,{closeAfterTransition:u,disableAutoFocus:p,disableEnforceFocus:d,disableEscapeKeyDown:m,disablePortal:g,disableRestoreFocus:T,disableScrollLock:x,exited:G,hideBackdrop:I,keepMounted:k}),re=tue(ne),ie={};void 0===s.props.tabIndex&&(ie.tabIndex="-1"),q&&(ie.onEnter=(0,Roe.Z)((function(){H(!1),N&&N()}),s.props.onEnter),ie.onExited=(0,Roe.Z)((function(){H(!0),M&&M(),u&&te()}),s.props.onExited));var ae=null!=(a=null!=l?l:U.root)?a:"div",se=Qoe({elementType:ae,externalSlotProps:F.root,externalForwardedProps:Z,additionalProps:{ref:Y,role:"presentation",onKeyDown:function(e){A&&A(e),"Escape"===e.key&&$()&&(m||(e.stopPropagation(),D&&D(e,"escapeKeyDown")))}},className:re.root,ownerState:ne}),oe=U.backdrop,ue=Qoe({elementType:oe,externalSlotProps:F.backdrop,additionalProps:{"aria-hidden":!0,onClick:function(e){e.target===e.currentTarget&&(C&&C(e),D&&D(e,"backdropClick"))},open:O},className:re.backdrop,ownerState:ne});return k||O||q&&!G?(0,Je.jsx)(Noe,{ref:ee,container:c,disablePortal:g,children:(0,Je.jsxs)(ae,(0,ze.Z)({},se,{children:[!I&&oe?(0,Je.jsx)(oe,(0,ze.Z)({},ue)):null,(0,Je.jsx)(Voe,{disableEnforceFocus:d,disableAutoFocus:p,disableRestoreFocus:T,isEnabled:$,open:O,children:e.cloneElement(s,ie)})]}))}):null})),iue=rue,aue=!1,sue="unmounted",oue="exited",uue="entering",lue="entered",cue="exiting",hue=function(t){function n(e,n){var r;r=t.call(this,e,n)||this;var i,a=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?a?(i=oue,r.appearStatus=uue):i=lue:i=e.unmountOnExit||e.mountOnEnter?sue:oue,r.state={status:i},r.nextCallback=null,r}vae(n,t),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===sue?{status:oue}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==uue&&n!==lue&&(t=uue):n!==uue&&n!==lue||(t=cue)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===uue){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Coe.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===oue&&this.setState({status:sue})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[Coe.findDOMNode(this),r],a=i[0],s=i[1],o=this.getTimeouts(),u=r?o.appear:o.enter;!e&&!n||aue?this.safeSetState({status:lue},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,s),this.safeSetState({status:uue},(function(){t.props.onEntering(a,s),t.onTransitionEnd(u,(function(){t.safeSetState({status:lue},(function(){t.props.onEntered(a,s)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Coe.findDOMNode(this);t&&!aue?(this.props.onExit(r),this.safeSetState({status:cue},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:oue},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:oue},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Coe.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],s=i[1];this.props.addEndListener(a,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var t=this.state.status;if(t===sue)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,Ge.Z)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(mae.Provider,{value:null},"function"===typeof r?r(t,i):e.cloneElement(e.Children.only(r),i))},n}(e.Component);function pue(){}hue.contextType=mae,hue.propTypes={},hue.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:pue,onEntering:pue,onEntered:pue,onExit:pue,onExiting:pue,onExited:pue},hue.UNMOUNTED=sue,hue.EXITED=oue,hue.ENTERING=uue,hue.ENTERED=lue,hue.EXITING=cue;var fue=hue,due=function(e){return e.scrollTop};function vue(e,t){var n,r,i=e.timeout,a=e.easing,s=e.style,o=void 0===s?{}:s;return{duration:null!=(n=o.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=o.transitionTimingFunction)?r:"object"===typeof a?a[t.mode]:a,delay:o.transitionDelay}}var mue=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],yue={entering:{opacity:1},entered:{opacity:1}},gue=e.forwardRef((function(t,n){var r=Jie(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},a=t.addEndListener,s=t.appear,o=void 0===s||s,u=t.children,l=t.easing,c=t.in,h=t.onEnter,p=t.onEntered,f=t.onEntering,d=t.onExit,v=t.onExited,m=t.onExiting,y=t.style,g=t.timeout,_=void 0===g?i:g,T=t.TransitionComponent,E=void 0===T?fue:T,x=(0,Ge.Z)(t,mue),b=e.useRef(null),I=(0,hae.Z)(b,u.ref,n),w=function(e){return function(t){if(e){var n=b.current;void 0===t?e(n):e(n,t)}}},k=w(f),S=w((function(e,t){due(e);var n=vue({style:y,timeout:_,easing:l},{mode:"enter"});e.style.webkitTransition=r.transitions.create("opacity",n),e.style.transition=r.transitions.create("opacity",n),h&&h(e,t)})),R=w(p),C=w(m),D=w((function(e){var t=vue({style:y,timeout:_,easing:l},{mode:"exit"});e.style.webkitTransition=r.transitions.create("opacity",t),e.style.transition=r.transitions.create("opacity",t),d&&d(e)})),A=w(v);return(0,Je.jsx)(E,(0,ze.Z)({appear:o,in:c,nodeRef:b,onEnter:S,onEntered:R,onEntering:k,onExit:D,onExited:A,onExiting:C,addEndListener:function(e){a&&a(b.current,e)},timeout:_},x,{children:function(t,n){return e.cloneElement(u,(0,ze.Z)({style:(0,ze.Z)({opacity:0,visibility:"exited"!==t||c?void 0:"hidden"},yue[t],y,u.props.style),ref:I},n))}}))})),_ue=gue;function Tue(e){return(0,iae.Z)("MuiBackdrop",e)}(0,rae.Z)("MuiBackdrop",["root","invisible"]);var Eue=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],xue=(0,tae.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.invisible&&t.invisible]}})((function(e){var t=e.ownerState;return(0,ze.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),bue=e.forwardRef((function(e,t){var n,r,i,a=(0,nae.Z)({props:e,name:"MuiBackdrop"}),s=a.children,o=a.className,u=a.component,l=void 0===u?"div":u,c=a.components,h=void 0===c?{}:c,p=a.componentsProps,f=void 0===p?{}:p,d=a.invisible,v=void 0!==d&&d,m=a.open,y=a.slotProps,g=void 0===y?{}:y,_=a.slots,T=void 0===_?{}:_,E=a.TransitionComponent,x=void 0===E?_ue:E,b=a.transitionDuration,I=(0,Ge.Z)(a,Eue),w=(0,ze.Z)({},a,{component:l,invisible:v}),k=function(e){var t=e.classes,n={root:["root",e.invisible&&"invisible"]};return(0,$ie.Z)(n,Tue,t)}(w),S=null!=(n=g.root)?n:f.root;return(0,Je.jsx)(x,(0,ze.Z)({in:m,timeout:b},I,{children:(0,Je.jsx)(xue,(0,ze.Z)({"aria-hidden":!0},S,{as:null!=(r=null!=(i=T.root)?i:h.Root)?r:l,className:(0,He.Z)(k.root,o,null==S?void 0:S.className),ownerState:(0,ze.Z)({},w,null==S?void 0:S.ownerState),classes:k,ref:t,children:s}))}))})),Iue=bue,wue=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],kue=(0,tae.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.open&&n.exited&&t.hidden]}})((function(e){var t=e.theme,n=e.ownerState;return(0,ze.Z)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),Sue=(0,tae.ZP)(Iue,{name:"MuiModal",slot:"Backdrop",overridesResolver:function(e,t){return t.backdrop}})({zIndex:-1}),Rue=e.forwardRef((function(t,n){var r,a,s,o,u,l,c=(0,nae.Z)({name:"MuiModal",props:t}),h=c.BackdropComponent,p=void 0===h?Sue:h,f=c.BackdropProps,d=c.classes,v=c.className,m=c.closeAfterTransition,y=void 0!==m&&m,g=c.children,_=c.component,T=c.components,E=void 0===T?{}:T,x=c.componentsProps,b=void 0===x?{}:x,I=c.disableAutoFocus,w=void 0!==I&&I,k=c.disableEnforceFocus,S=void 0!==k&&k,R=c.disableEscapeKeyDown,C=void 0!==R&&R,D=c.disablePortal,A=void 0!==D&&D,O=c.disableRestoreFocus,N=void 0!==O&&O,M=c.disableScrollLock,P=void 0!==M&&M,F=c.hideBackdrop,L=void 0!==F&&F,U=c.keepMounted,Z=void 0!==U&&U,B=c.slotProps,z=c.slots,G=c.theme,H=(0,Ge.Z)(c,wue),j=e.useState(!0),V=(0,i.Z)(j,2),W=V[0],Y=V[1],q={closeAfterTransition:y,disableAutoFocus:w,disableEnforceFocus:S,disableEscapeKeyDown:C,disablePortal:A,disableRestoreFocus:N,disableScrollLock:P,hideBackdrop:L,keepMounted:Z},X=(0,ze.Z)({},c,q,{exited:W}),K=null!=(r=null!=(a=null==z?void 0:z.root)?a:E.Root)?r:kue,Q=null!=(s=null!=(o=null==z?void 0:z.backdrop)?o:E.Backdrop)?s:p,J=null!=(u=null==B?void 0:B.root)?u:b.root,$=null!=(l=null==B?void 0:B.backdrop)?l:b.backdrop;return(0,Je.jsx)(iue,(0,ze.Z)({slots:{root:K,backdrop:Q},slotProps:{root:function(){return(0,ze.Z)({},Xoe(J,X),!yse(K)&&{as:_,theme:G},{className:(0,He.Z)(v,null==J?void 0:J.className,null==d?void 0:d.root,!X.open&&X.exited&&(null==d?void 0:d.hidden))})},backdrop:function(){return(0,ze.Z)({},f,Xoe($,X),{className:(0,He.Z)(null==$?void 0:$.className,null==d?void 0:d.backdrop)})}},onTransitionEnter:function(){return Y(!1)},onTransitionExited:function(){return Y(!0)},ref:n},H,q,{children:g}))})),Cue=Rue,Due=n(8706),Aue=n(3533),Oue=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Nue(e,t,n){var r,i=function(e,t,n){var r,i=t.getBoundingClientRect(),a=n&&n.getBoundingClientRect(),s=(0,Aue.Z)(t);if(t.fakeTransform)r=t.fakeTransform;else{var o=s.getComputedStyle(t);r=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform")}var u=0,l=0;if(r&&"none"!==r&&"string"===typeof r){var c=r.split("(")[1].split(")")[0].split(",");u=parseInt(c[4],10),l=parseInt(c[5],10)}return"left"===e?"translateX(".concat(a?a.right+u-i.left:s.innerWidth+u-i.left,"px)"):"right"===e?"translateX(-".concat(a?i.right-a.left-u:i.left+i.width-u,"px)"):"up"===e?"translateY(".concat(a?a.bottom+l-i.top:s.innerHeight+l-i.top,"px)"):"translateY(-".concat(a?i.top-a.top+i.height-l:i.top+i.height-l,"px)")}(e,t,"function"===typeof(r=n)?r():r);i&&(t.style.webkitTransform=i,t.style.transform=i)}var Mue=e.forwardRef((function(t,n){var r=Jie(),i={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},a={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},s=t.addEndListener,o=t.appear,u=void 0===o||o,l=t.children,c=t.container,h=t.direction,p=void 0===h?"down":h,f=t.easing,d=void 0===f?i:f,v=t.in,m=t.onEnter,y=t.onEntered,g=t.onEntering,_=t.onExit,T=t.onExited,E=t.onExiting,x=t.style,b=t.timeout,I=void 0===b?a:b,w=t.TransitionComponent,k=void 0===w?fue:w,S=(0,Ge.Z)(t,Oue),R=e.useRef(null),C=(0,hae.Z)(l.ref,R,n),D=function(e){return function(t){e&&(void 0===t?e(R.current):e(R.current,t))}},A=D((function(e,t){Nue(p,e,c),due(e),m&&m(e,t)})),O=D((function(e,t){var n=vue({timeout:I,style:x,easing:d},{mode:"enter"});e.style.webkitTransition=r.transitions.create("-webkit-transform",(0,ze.Z)({},n)),e.style.transition=r.transitions.create("transform",(0,ze.Z)({},n)),e.style.webkitTransform="none",e.style.transform="none",g&&g(e,t)})),N=D(y),M=D(E),P=D((function(e){var t=vue({timeout:I,style:x,easing:d},{mode:"exit"});e.style.webkitTransition=r.transitions.create("-webkit-transform",t),e.style.transition=r.transitions.create("transform",t),Nue(p,e,c),_&&_(e)})),F=D((function(e){e.style.webkitTransition="",e.style.transition="",T&&T(e)})),L=e.useCallback((function(){R.current&&Nue(p,R.current,c)}),[p,c]);return e.useEffect((function(){if(!v&&"down"!==p&&"right"!==p){var e=(0,Due.Z)((function(){R.current&&Nue(p,R.current,c)})),t=(0,Aue.Z)(R.current);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}}),[p,v,c]),e.useEffect((function(){v||L()}),[v,L]),(0,Je.jsx)(k,(0,ze.Z)({nodeRef:R,onEnter:A,onEntered:N,onEntering:O,onExit:P,onExited:F,onExiting:M,addEndListener:function(e){s&&s(R.current,e)},appear:u,in:v,timeout:I},S,{children:function(t,n){return e.cloneElement(l,(0,ze.Z)({ref:C,style:(0,ze.Z)({visibility:"exited"!==t||v?void 0:"hidden"},x,l.props.style)},n))}}))})),Pue=Mue;function Fue(e){return(0,iae.Z)("MuiDrawer",e)}(0,rae.Z)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);var Lue=["BackdropProps"],Uue=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],Zue=function(e,t){var n=e.ownerState;return[t.root,("permanent"===n.variant||"persistent"===n.variant)&&t.docked,t.modal]},Bue=(0,tae.ZP)(Cue,{name:"MuiDrawer",slot:"Root",overridesResolver:Zue})((function(e){var t=e.theme;return{zIndex:(t.vars||t).zIndex.drawer}})),zue=(0,tae.ZP)("div",{shouldForwardProp:tae.FO,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:Zue})({flex:"0 0 auto"}),Gue=(0,tae.ZP)(goe,{name:"MuiDrawer",slot:"Paper",overridesResolver:function(e,t){var n=e.ownerState;return[t.paper,t["paperAnchor".concat((0,nse.Z)(n.anchor))],"temporary"!==n.variant&&t["paperAnchorDocked".concat((0,nse.Z)(n.anchor))]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,ze.Z)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===n.anchor&&{left:0},"top"===n.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===n.anchor&&{right:0},"bottom"===n.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===n.anchor&&"temporary"!==n.variant&&{borderRight:"1px solid ".concat((t.vars||t).palette.divider)},"top"===n.anchor&&"temporary"!==n.variant&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider)},"right"===n.anchor&&"temporary"!==n.variant&&{borderLeft:"1px solid ".concat((t.vars||t).palette.divider)},"bottom"===n.anchor&&"temporary"!==n.variant&&{borderTop:"1px solid ".concat((t.vars||t).palette.divider)})})),Hue={left:"right",right:"left",top:"down",bottom:"up"};var jue=e.forwardRef((function(t,n){var r=(0,nae.Z)({props:t,name:"MuiDrawer"}),i=Jie(),a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},s=r.anchor,o=void 0===s?"left":s,u=r.BackdropProps,l=r.children,c=r.className,h=r.elevation,p=void 0===h?16:h,f=r.hideBackdrop,d=void 0!==f&&f,v=r.ModalProps,m=(void 0===v?{}:v).BackdropProps,y=r.onClose,g=r.open,_=void 0!==g&&g,T=r.PaperProps,E=void 0===T?{}:T,x=r.SlideProps,b=r.TransitionComponent,I=void 0===b?Pue:b,w=r.transitionDuration,k=void 0===w?a:w,S=r.variant,R=void 0===S?"temporary":S,C=(0,Ge.Z)(r.ModalProps,Lue),D=(0,Ge.Z)(r,Uue),A=e.useRef(!1);e.useEffect((function(){A.current=!0}),[]);var O=function(e,t){return"rtl"===e.direction&&function(e){return-1!==["left","right"].indexOf(e)}(t)?Hue[t]:t}(i,o),N=o,M=(0,ze.Z)({},r,{anchor:N,elevation:p,open:_,variant:R},D),P=function(e){var t=e.classes,n=e.anchor,r=e.variant,i={root:["root"],docked:[("permanent"===r||"persistent"===r)&&"docked"],modal:["modal"],paper:["paper","paperAnchor".concat((0,nse.Z)(n)),"temporary"!==r&&"paperAnchorDocked".concat((0,nse.Z)(n))]};return(0,$ie.Z)(i,Fue,t)}(M),F=(0,Je.jsx)(Gue,(0,ze.Z)({elevation:"temporary"===R?p:0,square:!0},E,{className:(0,He.Z)(P.paper,E.className),ownerState:M,children:l}));if("permanent"===R)return(0,Je.jsx)(zue,(0,ze.Z)({className:(0,He.Z)(P.root,P.docked,c),ownerState:M,ref:n},D,{children:F}));var L=(0,Je.jsx)(I,(0,ze.Z)({in:_,direction:Hue[O],timeout:k,appear:A.current},x,{children:F}));return"persistent"===R?(0,Je.jsx)(zue,(0,ze.Z)({className:(0,He.Z)(P.root,P.docked,c),ownerState:M,ref:n},D,{children:L})):(0,Je.jsx)(Bue,(0,ze.Z)({BackdropProps:(0,ze.Z)({},u,m,{transitionDuration:k}),className:(0,He.Z)(P.root,P.modal,c),open:_,ownerState:M,onClose:y,hideBackdrop:d,ref:n},D,C,{children:L}))})),Vue=jue;var Wue=function(e,t){return{width:t,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}},Yue=function(e){return(0,at.Z)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc(".concat(e.spacing(7)," + 1px)")},e.breakpoints.up("sm"),{width:"calc(".concat(e.spacing(8)," + 1px)")})};function que(){return(0,tae.ZP)("div")((function(e){var t=e.theme;return ot({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:t.spacing(0,1)},t.mixins.toolbar)}))}var Xue=function(e){var t,n=Jie(),r=e.open,i=e.width,a=e.onClose,s=e.onToggleMenu,o=(t=i,(0,tae.ZP)(Vue,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var n=e.theme,r=e.open;return ot(ot({width:t,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},r&&ot(ot({},Wue(n,t)),{},{"& .MuiDrawer-paper":Wue(n,t)})),!r&&ot(ot({},Yue(n)),{},{"& .MuiDrawer-paper":Yue(n)}))}))),u=que();return(0,Je.jsxs)(o,{variant:"permanent",open:r,children:[(0,Je.jsx)(u,{children:(0,Je.jsx)(use,{onClick:a,children:"rtl"===n.direction?(0,Je.jsx)(cse.Z,{}):(0,Je.jsx)(lse.Z,{})})}),(0,Je.jsx)(poe,{onToggleMenu:s,open:r}),(0,Je.jsx)(cae,{})]})};function Kue(e){return(0,iae.Z)("MuiToolbar",e)}(0,rae.Z)("MuiToolbar",["root","gutters","regular","dense"]);var Que=["className","component","disableGutters","variant"],Jue=(0,tae.ZP)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,ze.Z)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&(0,at.Z)({paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}),"dense"===n.variant&&{minHeight:48})}),(function(e){var t=e.theme;return"regular"===e.ownerState.variant&&t.mixins.toolbar})),$ue=e.forwardRef((function(e,t){var n=(0,nae.Z)({props:e,name:"MuiToolbar"}),r=n.className,i=n.component,a=void 0===i?"div":i,s=n.disableGutters,o=void 0!==s&&s,u=n.variant,l=void 0===u?"regular":u,c=(0,Ge.Z)(n,Que),h=(0,ze.Z)({},n,{component:a,disableGutters:o,variant:l}),p=function(e){var t=e.classes,n={root:["root",!e.disableGutters&&"gutters",e.variant]};return(0,$ie.Z)(n,Kue,t)}(h);return(0,Je.jsx)(Jue,(0,ze.Z)({as:a,className:(0,He.Z)(p.root,r),ref:t,ownerState:h},c))})),ele=$ue,tle=n(1317),nle=function(e){var t,n=e.open,r=e.onOpen,i=e.width,a=(t=i,(0,tae.ZP)(Ioe,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var n=e.theme,r=e.open;return ot({zIndex:n.zIndex.drawer+1,transition:n.transitions.create(["margin","width"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen})},r&&{width:"calc(100% - ".concat(t,"px)"),marginLeft:"".concat(t,"px"),transition:n.transitions.create(["margin","width"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.enteringScreen})})})));return(0,Je.jsx)(a,{position:"fixed",open:n,children:(0,Je.jsxs)(ele,{children:[(0,Je.jsx)(use,{color:"inherit","aria-label":"open drawer",onClick:r,edge:"start",sx:ot({marginRight:5},n&&{display:"none"}),children:(0,Je.jsx)(tle.Z,{})}),(0,Je.jsx)(Kse,{variant:"h6",noWrap:!0,component:"div",children:"Building Viewer"})]})})};function rle(e){var t=e.styles,n=e.defaultTheme,r=void 0===n?{}:n,i="function"===typeof t?function(e){return t(void 0===(n=e)||null===n||0===Object.keys(n).length?r:e);var n}:t;return(0,Je.jsx)(Sae,{styles:i})}var ile=function(e){return(0,Je.jsx)(rle,(0,ze.Z)({},e,{defaultTheme:Qie.Z}))},ale=function(e,t){return(0,ze.Z)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode})},sle=function(e){return(0,ze.Z)({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}})},ole=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={};r&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach((function(t){var n,r=(0,i.Z)(t,2),s=r[0],o=r[1];a[e.getColorSchemeSelector(s).replace(/\s*&/,"")]={colorScheme:null==(n=o.palette)?void 0:n.mode}}));var s=(0,ze.Z)({html:ale(e,r),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,ze.Z)({margin:0},sle(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},a),o=null==(t=e.components)||null==(n=t.MuiCssBaseline)?void 0:n.styleOverrides;return o&&(s=[s,o]),s};var ule=function(t){var n=(0,nae.Z)({props:t,name:"MuiCssBaseline"}),r=n.children,i=n.enableColorScheme,a=void 0!==i&&i;return(0,Je.jsxs)(e.Fragment,{children:[(0,Je.jsx)(ile,{styles:function(e){return ole(e,a)}}),r]})};function lle(e){return(0,iae.Z)("MuiCard",e)}(0,rae.Z)("MuiCard",["root"]);var cle=["className","raised"],hle=(0,tae.ZP)(goe,{name:"MuiCard",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{overflow:"hidden"}})),ple=e.forwardRef((function(e,t){var n=(0,nae.Z)({props:e,name:"MuiCard"}),r=n.className,i=n.raised,a=void 0!==i&&i,s=(0,Ge.Z)(n,cle),o=(0,ze.Z)({},n,{raised:a}),u=function(e){var t=e.classes;return(0,$ie.Z)({root:["root"]},lle,t)}(o);return(0,Je.jsx)(hle,(0,ze.Z)({className:(0,He.Z)(u.root,r),elevation:a?8:void 0,ref:t,ownerState:o},s))})),fle=ple;function dle(e){return(0,iae.Z)("MuiCardContent",e)}(0,rae.Z)("MuiCardContent",["root"]);var vle=["className","component"],mle=(0,tae.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),yle=e.forwardRef((function(e,t){var n=(0,nae.Z)({props:e,name:"MuiCardContent"}),r=n.className,i=n.component,a=void 0===i?"div":i,s=(0,Ge.Z)(n,vle),o=(0,ze.Z)({},n,{component:a}),u=function(e){var t=e.classes;return(0,$ie.Z)({root:["root"]},dle,t)}(o);return(0,Je.jsx)(mle,(0,ze.Z)({as:a,className:(0,He.Z)(u.root,r),ownerState:o,ref:t},s))})),gle=yle,_le=n(9023);function Tle(e){return(0,iae.Z)("MuiButton",e)}var Ele=(0,rae.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var xle=e.createContext({}),ble=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Ile=function(e){return(0,ze.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},wle=(0,tae.ZP)(tse,{shouldForwardProp:function(e){return(0,tae.FO)(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat((0,nse.Z)(n.color))],t["size".concat((0,nse.Z)(n.size))],t["".concat(n.variant,"Size").concat((0,nse.Z)(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((function(e){var t,n,r,i=e.theme,a=e.ownerState;return(0,ze.Z)({},i.typography.button,(t={minWidth:64,padding:"6px 16px",borderRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),"&:hover":(0,ze.Z)({textDecoration:"none",backgroundColor:i.vars?"rgba(".concat(i.vars.palette.text.primaryChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):(0,eae.Fq)(i.palette.text.primary,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===a.variant&&"inherit"!==a.color&&{backgroundColor:i.vars?"rgba(".concat(i.vars.palette[a.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):(0,eae.Fq)(i.palette[a.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===a.variant&&"inherit"!==a.color&&{border:"1px solid ".concat((i.vars||i).palette[a.color].main),backgroundColor:i.vars?"rgba(".concat(i.vars.palette[a.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):(0,eae.Fq)(i.palette[a.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===a.variant&&{backgroundColor:(i.vars||i).palette.grey.A100,boxShadow:(i.vars||i).shadows[4],"@media (hover: none)":{boxShadow:(i.vars||i).shadows[2],backgroundColor:(i.vars||i).palette.grey[300]}},"contained"===a.variant&&"inherit"!==a.color&&{backgroundColor:(i.vars||i).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(i.vars||i).palette[a.color].main}}),"&:active":(0,ze.Z)({},"contained"===a.variant&&{boxShadow:(i.vars||i).shadows[8]})},(0,at.Z)(t,"&.".concat(Ele.focusVisible),(0,ze.Z)({},"contained"===a.variant&&{boxShadow:(i.vars||i).shadows[6]})),(0,at.Z)(t,"&.".concat(Ele.disabled),(0,ze.Z)({color:(i.vars||i).palette.action.disabled},"outlined"===a.variant&&{border:"1px solid ".concat((i.vars||i).palette.action.disabledBackground)},"contained"===a.variant&&{color:(i.vars||i).palette.action.disabled,boxShadow:(i.vars||i).shadows[0],backgroundColor:(i.vars||i).palette.action.disabledBackground})),t),"text"===a.variant&&{padding:"6px 8px"},"text"===a.variant&&"inherit"!==a.color&&{color:(i.vars||i).palette[a.color].main},"outlined"===a.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===a.variant&&"inherit"!==a.color&&{color:(i.vars||i).palette[a.color].main,border:i.vars?"1px solid rgba(".concat(i.vars.palette[a.color].mainChannel," / 0.5)"):"1px solid ".concat((0,eae.Fq)(i.palette[a.color].main,.5))},"contained"===a.variant&&{color:i.vars?i.vars.palette.text.primary:null==(n=(r=i.palette).getContrastText)?void 0:n.call(r,i.palette.grey[300]),backgroundColor:(i.vars||i).palette.grey[300],boxShadow:(i.vars||i).shadows[2]},"contained"===a.variant&&"inherit"!==a.color&&{color:(i.vars||i).palette[a.color].contrastText,backgroundColor:(i.vars||i).palette[a.color].main},"inherit"===a.color&&{color:"inherit",borderColor:"currentColor"},"small"===a.size&&"text"===a.variant&&{padding:"4px 5px",fontSize:i.typography.pxToRem(13)},"large"===a.size&&"text"===a.variant&&{padding:"8px 11px",fontSize:i.typography.pxToRem(15)},"small"===a.size&&"outlined"===a.variant&&{padding:"3px 9px",fontSize:i.typography.pxToRem(13)},"large"===a.size&&"outlined"===a.variant&&{padding:"7px 21px",fontSize:i.typography.pxToRem(15)},"small"===a.size&&"contained"===a.variant&&{padding:"4px 10px",fontSize:i.typography.pxToRem(13)},"large"===a.size&&"contained"===a.variant&&{padding:"8px 22px",fontSize:i.typography.pxToRem(15)},a.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(t={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,at.Z)(t,"&.".concat(Ele.focusVisible),{boxShadow:"none"}),(0,at.Z)(t,"&:active",{boxShadow:"none"}),(0,at.Z)(t,"&.".concat(Ele.disabled),{boxShadow:"none"}),t)})),kle=(0,tae.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.startIcon,t["iconSize".concat((0,nse.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,ze.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},Ile(t))})),Sle=(0,tae.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.endIcon,t["iconSize".concat((0,nse.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,ze.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},Ile(t))})),Rle=e.forwardRef((function(t,n){var r=e.useContext(xle),i=(0,_le.Z)(r,t),a=(0,nae.Z)({props:i,name:"MuiButton"}),s=a.children,o=a.color,u=void 0===o?"primary":o,l=a.component,c=void 0===l?"button":l,h=a.className,p=a.disabled,f=void 0!==p&&p,d=a.disableElevation,v=void 0!==d&&d,m=a.disableFocusRipple,y=void 0!==m&&m,g=a.endIcon,_=a.focusVisibleClassName,T=a.fullWidth,E=void 0!==T&&T,x=a.size,b=void 0===x?"medium":x,I=a.startIcon,w=a.type,k=a.variant,S=void 0===k?"text":k,R=(0,Ge.Z)(a,ble),C=(0,ze.Z)({},a,{color:u,component:c,disabled:f,disableElevation:v,disableFocusRipple:y,fullWidth:E,size:b,type:w,variant:S}),D=function(e){var t=e.color,n=e.disableElevation,r=e.fullWidth,i=e.size,a=e.variant,s=e.classes,o={root:["root",a,"".concat(a).concat((0,nse.Z)(t)),"size".concat((0,nse.Z)(i)),"".concat(a,"Size").concat((0,nse.Z)(i)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,nse.Z)(i))],endIcon:["endIcon","iconSize".concat((0,nse.Z)(i))]},u=(0,$ie.Z)(o,Tle,s);return(0,ze.Z)({},s,u)}(C),A=I&&(0,Je.jsx)(kle,{className:D.startIcon,ownerState:C,children:I}),O=g&&(0,Je.jsx)(Sle,{className:D.endIcon,ownerState:C,children:g});return(0,Je.jsxs)(wle,(0,ze.Z)({ownerState:C,className:(0,He.Z)(r.className,D.root,h),component:c,disabled:f,focusRipple:!y,focusVisibleClassName:(0,He.Z)(D.focusVisible,_),ref:n,type:w},R,{classes:D,children:[A,s,O]}))})),Cle=Rle,Dle=n(1198),Ale=n(3362),Ole=n(7219),Nle=n(4312),Mle=["onChange","maxRows","minRows","style","value"];function Ple(e){return parseInt(e,10)||0}var Fle={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function Lle(e){return void 0===e||null===e||0===Object.keys(e).length||0===e.outerHeightStyle&&!e.overflow}var Ule=e.forwardRef((function(t,n){var r=t.onChange,a=t.maxRows,s=t.minRows,o=void 0===s?1:s,u=t.style,l=t.value,c=(0,Ge.Z)(t,Mle),h=e.useRef(null!=l).current,p=e.useRef(null),f=(0,woe.Z)(n,p),d=e.useRef(null),v=e.useRef(0),m=e.useState({outerHeightStyle:0}),y=(0,i.Z)(m,2),g=y[0],_=y[1],T=e.useCallback((function(){var e=p.current,n=(0,Moe.Z)(e).getComputedStyle(e);if("0px"===n.width)return{outerHeightStyle:0};var r=d.current;r.style.width=n.width,r.value=e.value||t.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var i=n.boxSizing,s=Ple(n.paddingBottom)+Ple(n.paddingTop),u=Ple(n.borderBottomWidth)+Ple(n.borderTopWidth),l=r.scrollHeight;r.value="x";var c=r.scrollHeight,h=l;return o&&(h=Math.max(Number(o)*c,h)),a&&(h=Math.min(Number(a)*c,h)),{outerHeightStyle:(h=Math.max(h,c))+("border-box"===i?s+u:0),overflow:Math.abs(h-l)<=1}}),[a,o,t.placeholder]),E=function(e,t){var n=t.outerHeightStyle,r=t.overflow;return v.current<20&&(n>0&&Math.abs((e.outerHeightStyle||0)-n)>1||e.overflow!==r)?(v.current+=1,{overflow:r,outerHeightStyle:n}):e},x=e.useCallback((function(){var e=T();Lle(e)||_((function(t){return E(t,e)}))}),[T]);e.useEffect((function(){var e,t=(0,Nle.Z)((function(){v.current=0,p.current&&function(){var e=T();Lle(e)||Coe.flushSync((function(){_((function(t){return E(t,e)}))}))}()})),n=p.current,r=(0,Moe.Z)(n);return r.addEventListener("resize",t),"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(t)).observe(n),function(){t.clear(),r.removeEventListener("resize",t),e&&e.disconnect()}})),(0,Doe.Z)((function(){x()})),e.useEffect((function(){v.current=0}),[l]);return(0,Je.jsxs)(e.Fragment,{children:[(0,Je.jsx)("textarea",(0,ze.Z)({value:l,onChange:function(e){v.current=0,h||x(),r&&r(e)},ref:f,rows:o,style:(0,ze.Z)({height:g.outerHeightStyle,overflow:g.overflow?"hidden":void 0},u)},c)),(0,Je.jsx)("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:d,tabIndex:-1,style:(0,ze.Z)({},Fle,u,{padding:0})})]})})),Zle=Ule;function Ble(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}var zle=e.createContext(void 0);function Gle(){return e.useContext(zle)}function Hle(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function jle(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Hle(e.value)&&""!==e.value||t&&Hle(e.defaultValue)&&""!==e.defaultValue)}function Vle(e){return(0,iae.Z)("MuiInputBase",e)}var Wle=(0,rae.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Yle=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],qle=function(e,t){var n=e.ownerState;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat((0,nse.Z)(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Xle=function(e,t){var n=e.ownerState;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},Kle=(0,tae.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:qle})((function(e){var t=e.theme,n=e.ownerState;return(0,ze.Z)({},t.typography.body1,(0,at.Z)({color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center"},"&.".concat(Wle.disabled),{color:(t.vars||t).palette.text.disabled,cursor:"default"}),n.multiline&&(0,ze.Z)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),Qle=(0,tae.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Xle})((function(e){var t,n=e.theme,r=e.ownerState,i="light"===n.palette.mode,a=(0,ze.Z)({color:"currentColor"},n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5},{transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})}),s={opacity:"0 !important"},o=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5};return(0,ze.Z)((t={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},(0,at.Z)(t,"label[data-shrink=false] + .".concat(Wle.formControl," &"),{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o}),(0,at.Z)(t,"&.".concat(Wle.disabled),{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled}),(0,at.Z)(t,"&:-webkit-autofill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),t),"small"===r.size&&{paddingTop:1},r.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===r.type&&{MozAppearance:"textfield"})})),Jle=(0,Je.jsx)(ile,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),$le=e.forwardRef((function(t,n){var r,a=(0,nae.Z)({props:t,name:"MuiInputBase"}),s=a["aria-describedby"],o=a.autoComplete,u=a.autoFocus,l=a.className,c=a.components,h=void 0===c?{}:c,p=a.componentsProps,f=void 0===p?{}:p,d=a.defaultValue,v=a.disabled,m=a.disableInjectingGlobalStyles,y=a.endAdornment,g=a.fullWidth,_=void 0!==g&&g,T=a.id,E=a.inputComponent,x=void 0===E?"input":E,b=a.inputProps,I=void 0===b?{}:b,w=a.inputRef,k=a.maxRows,S=a.minRows,R=a.multiline,C=void 0!==R&&R,D=a.name,A=a.onBlur,O=a.onChange,N=a.onClick,M=a.onFocus,P=a.onKeyDown,F=a.onKeyUp,L=a.placeholder,U=a.readOnly,Z=a.renderSuffix,B=a.rows,z=a.slotProps,G=void 0===z?{}:z,H=a.slots,j=void 0===H?{}:H,V=a.startAdornment,W=a.type,Y=void 0===W?"text":W,q=a.value,X=(0,Ge.Z)(a,Yle),K=null!=I.value?I.value:q,Q=e.useRef(null!=K).current,J=e.useRef(),$=e.useCallback((function(e){0}),[]),ee=(0,hae.Z)(J,w,I.ref,$),te=e.useState(!1),ne=(0,i.Z)(te,2),re=ne[0],ie=ne[1],ae=Gle();var se=Ble({props:a,muiFormControl:ae,states:["color","disabled","error","hiddenLabel","size","required","filled"]});se.focused=ae?ae.focused:re,e.useEffect((function(){!ae&&v&&re&&(ie(!1),A&&A())}),[ae,v,re,A]);var oe=ae&&ae.onFilled,ue=ae&&ae.onEmpty,le=e.useCallback((function(e){jle(e)?oe&&oe():ue&&ue()}),[oe,ue]);(0,_se.Z)((function(){Q&&le({value:K})}),[K,le,Q]);e.useEffect((function(){le(J.current)}),[]);var ce=x,he=I;C&&"input"===ce&&(he=B?(0,ze.Z)({type:void 0,minRows:B,maxRows:B},he):(0,ze.Z)({type:void 0,maxRows:k,minRows:S},he),ce=Zle);e.useEffect((function(){ae&&ae.setAdornedStart(Boolean(V))}),[ae,V]);var pe=(0,ze.Z)({},a,{color:se.color||"primary",disabled:se.disabled,endAdornment:y,error:se.error,focused:se.focused,formControl:ae,fullWidth:_,hiddenLabel:se.hiddenLabel,multiline:C,size:se.size,startAdornment:V,type:Y}),fe=function(e){var t=e.classes,n=e.color,r=e.disabled,i=e.error,a=e.endAdornment,s=e.focused,o=e.formControl,u=e.fullWidth,l=e.hiddenLabel,c=e.multiline,h=e.readOnly,p=e.size,f=e.startAdornment,d=e.type,v={root:["root","color".concat((0,nse.Z)(n)),r&&"disabled",i&&"error",u&&"fullWidth",s&&"focused",o&&"formControl","small"===p&&"sizeSmall",c&&"multiline",f&&"adornedStart",a&&"adornedEnd",l&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled","search"===d&&"inputTypeSearch",c&&"inputMultiline","small"===p&&"inputSizeSmall",l&&"inputHiddenLabel",f&&"inputAdornedStart",a&&"inputAdornedEnd",h&&"readOnly"]};return(0,$ie.Z)(v,Vle,t)}(pe),de=j.root||h.Root||Kle,ve=G.root||f.root||{},me=j.input||h.Input||Qle;return he=(0,ze.Z)({},he,null!=(r=G.input)?r:f.input),(0,Je.jsxs)(e.Fragment,{children:[!m&&Jle,(0,Je.jsxs)(de,(0,ze.Z)({},ve,!yse(de)&&{ownerState:(0,ze.Z)({},pe,ve.ownerState)},{ref:n,onClick:function(e){J.current&&e.currentTarget===e.target&&J.current.focus(),N&&N(e)}},X,{className:(0,He.Z)(fe.root,ve.className,l,U&&"MuiInputBase-readOnly"),children:[V,(0,Je.jsx)(zle.Provider,{value:null,children:(0,Je.jsx)(me,(0,ze.Z)({ownerState:pe,"aria-invalid":se.error,"aria-describedby":s,autoComplete:o,autoFocus:u,defaultValue:d,disabled:se.disabled,id:T,onAnimationStart:function(e){le("mui-auto-fill-cancel"===e.animationName?J.current:{value:"x"})},name:D,placeholder:L,readOnly:U,required:se.required,rows:B,value:K,onKeyDown:P,onKeyUp:F,type:Y},he,!yse(me)&&{as:ce,ownerState:(0,ze.Z)({},pe,he.ownerState)},{ref:ee,className:(0,He.Z)(fe.input,he.className,U&&"MuiInputBase-readOnly"),onBlur:function(e){A&&A(e),I.onBlur&&I.onBlur(e),ae&&ae.onBlur?ae.onBlur(e):ie(!1)},onChange:function(e){if(!Q){var t=e.target||J.current;if(null==t)throw new Error((0,Ole.Z)(1));le({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];I.onChange&&I.onChange.apply(I,[e].concat(r)),O&&O.apply(void 0,[e].concat(r))},onFocus:function(e){se.disabled?e.stopPropagation():(M&&M(e),I.onFocus&&I.onFocus(e),ae&&ae.onFocus?ae.onFocus(e):ie(!0))}}))}),y,Z?Z((0,ze.Z)({},se,{startAdornment:V})):null]}))]})})),ece=$le;function tce(e){return(0,iae.Z)("MuiInput",e)}var nce=(0,ze.Z)({},Wle,(0,rae.Z)("MuiInput",["root","underline","input"])),rce=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],ice=(0,tae.ZP)(Kle,{shouldForwardProp:function(e){return(0,tae.FO)(e)||"classes"===e},name:"MuiInput",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[].concat((0,a.Z)(qle(e,t)),[!n.disableUnderline&&t.underline])}})((function(e){var t,n=e.theme,r=e.ownerState,i="light"===n.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(i="rgba(".concat(n.vars.palette.common.onBackgroundChannel," / ").concat(n.vars.opacity.inputUnderline,")")),(0,ze.Z)({position:"relative"},r.formControl&&{"label + &":{marginTop:16}},!r.disableUnderline&&(t={"&:after":{borderBottom:"2px solid ".concat((n.vars||n).palette[r.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"}},(0,at.Z)(t,"&.".concat(nce.focused,":after"),{transform:"scaleX(1) translateX(0)"}),(0,at.Z)(t,"&.".concat(nce.error),{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}}),(0,at.Z)(t,"&:before",{borderBottom:"1px solid ".concat(i),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"}),(0,at.Z)(t,"&:hover:not(.".concat(nce.disabled,", .").concat(nce.error,"):before"),{borderBottom:"2px solid ".concat((n.vars||n).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(i)}}),(0,at.Z)(t,"&.".concat(nce.disabled,":before"),{borderBottomStyle:"dotted"}),t))})),ace=(0,tae.ZP)(Qle,{name:"MuiInput",slot:"Input",overridesResolver:Xle})({}),sce=e.forwardRef((function(e,t){var n,r,i,a,s=(0,nae.Z)({props:e,name:"MuiInput"}),o=s.disableUnderline,u=s.components,l=void 0===u?{}:u,c=s.componentsProps,h=s.fullWidth,p=void 0!==h&&h,f=s.inputComponent,d=void 0===f?"input":f,v=s.multiline,m=void 0!==v&&v,y=s.slotProps,g=s.slots,_=void 0===g?{}:g,T=s.type,E=void 0===T?"text":T,x=(0,Ge.Z)(s,rce),b=function(e){var t=e.classes,n={root:["root",!e.disableUnderline&&"underline"],input:["input"]},r=(0,$ie.Z)(n,tce,t);return(0,ze.Z)({},t,r)}(s),I={root:{ownerState:{disableUnderline:o}}},w=(null!=y?y:c)?(0,We.Z)(null!=y?y:c,I):I,k=null!=(n=null!=(r=_.root)?r:l.Root)?n:ice,S=null!=(i=null!=(a=_.input)?a:l.Input)?i:ace;return(0,Je.jsx)(ece,(0,ze.Z)({slots:{root:k,input:S},slotProps:w,fullWidth:p,inputComponent:d,multiline:m,ref:t,type:E},x,{classes:b}))}));sce.muiName="Input";var oce=sce;function uce(e){return(0,iae.Z)("MuiFilledInput",e)}var lce=(0,ze.Z)({},Wle,(0,rae.Z)("MuiFilledInput",["root","underline","input"])),cce=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],hce=(0,tae.ZP)(Kle,{shouldForwardProp:function(e){return(0,tae.FO)(e)||"classes"===e},name:"MuiFilledInput",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[].concat((0,a.Z)(qle(e,t)),[!n.disableUnderline&&t.underline])}})((function(e){var t,n,r,i=e.theme,a=e.ownerState,s="light"===i.palette.mode,o=s?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",u=s?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=s?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",c=s?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,ze.Z)((t={position:"relative",backgroundColor:i.vars?i.vars.palette.FilledInput.bg:u,borderTopLeftRadius:(i.vars||i).shape.borderRadius,borderTopRightRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create("background-color",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),"&:hover":{backgroundColor:i.vars?i.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:i.vars?i.vars.palette.FilledInput.bg:u}}},(0,at.Z)(t,"&.".concat(lce.focused),{backgroundColor:i.vars?i.vars.palette.FilledInput.bg:u}),(0,at.Z)(t,"&.".concat(lce.disabled),{backgroundColor:i.vars?i.vars.palette.FilledInput.disabledBg:c}),t),!a.disableUnderline&&(n={"&:after":{borderBottom:"2px solid ".concat(null==(r=(i.vars||i).palette[a.color||"primary"])?void 0:r.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:i.transitions.create("transform",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),pointerEvents:"none"}},(0,at.Z)(n,"&.".concat(lce.focused,":after"),{transform:"scaleX(1) translateX(0)"}),(0,at.Z)(n,"&.".concat(lce.error),{"&:before, &:after":{borderBottomColor:(i.vars||i).palette.error.main}}),(0,at.Z)(n,"&:before",{borderBottom:"1px solid ".concat(i.vars?"rgba(".concat(i.vars.palette.common.onBackgroundChannel," / ").concat(i.vars.opacity.inputUnderline,")"):o),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:i.transitions.create("border-bottom-color",{duration:i.transitions.duration.shorter}),pointerEvents:"none"}),(0,at.Z)(n,"&:hover:not(.".concat(lce.disabled,", .").concat(lce.error,"):before"),{borderBottom:"1px solid ".concat((i.vars||i).palette.text.primary)}),(0,at.Z)(n,"&.".concat(lce.disabled,":before"),{borderBottomStyle:"dotted"}),n),a.startAdornment&&{paddingLeft:12},a.endAdornment&&{paddingRight:12},a.multiline&&(0,ze.Z)({padding:"25px 12px 8px"},"small"===a.size&&{paddingTop:21,paddingBottom:4},a.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),pce=(0,tae.ZP)(Qle,{name:"MuiFilledInput",slot:"Input",overridesResolver:Xle})((function(e){var t=e.theme,n=e.ownerState;return(0,ze.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&(0,at.Z)({"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9})})),fce=e.forwardRef((function(e,t){var n,r,i,a,s=(0,nae.Z)({props:e,name:"MuiFilledInput"}),o=s.components,u=void 0===o?{}:o,l=s.componentsProps,c=s.fullWidth,h=void 0!==c&&c,p=s.inputComponent,f=void 0===p?"input":p,d=s.multiline,v=void 0!==d&&d,m=s.slotProps,y=s.slots,g=void 0===y?{}:y,_=s.type,T=void 0===_?"text":_,E=(0,Ge.Z)(s,cce),x=(0,ze.Z)({},s,{fullWidth:h,inputComponent:f,multiline:v,type:T}),b=function(e){var t=e.classes,n={root:["root",!e.disableUnderline&&"underline"],input:["input"]},r=(0,$ie.Z)(n,uce,t);return(0,ze.Z)({},t,r)}(s),I={root:{ownerState:x},input:{ownerState:x}},w=(null!=m?m:l)?(0,We.Z)(null!=m?m:l,I):I,k=null!=(n=null!=(r=g.root)?r:u.Root)?n:hce,S=null!=(i=null!=(a=g.input)?a:u.Input)?i:pce;return(0,Je.jsx)(ece,(0,ze.Z)({slots:{root:k,input:S},componentsProps:w,fullWidth:h,inputComponent:f,multiline:v,ref:t,type:T},E,{classes:b}))}));fce.muiName="Input";var dce,vce=fce,mce=["children","classes","className","label","notched"],yce=(0,tae.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),gce=(0,tae.ZP)("legend")((function(e){var t=e.ownerState,n=e.theme;return(0,ze.Z)({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&(0,ze.Z)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function _ce(e){return(0,iae.Z)("MuiOutlinedInput",e)}var Tce=(0,ze.Z)({},Wle,(0,rae.Z)("MuiOutlinedInput",["root","notchedOutline","input"])),Ece=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],xce=(0,tae.ZP)(Kle,{shouldForwardProp:function(e){return(0,tae.FO)(e)||"classes"===e},name:"MuiOutlinedInput",slot:"Root",overridesResolver:qle})((function(e){var t,n=e.theme,r=e.ownerState,i="light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,ze.Z)((t={position:"relative",borderRadius:(n.vars||n).shape.borderRadius},(0,at.Z)(t,"&:hover .".concat(Tce.notchedOutline),{borderColor:(n.vars||n).palette.text.primary}),(0,at.Z)(t,"@media (hover: none)",(0,at.Z)({},"&:hover .".concat(Tce.notchedOutline),{borderColor:n.vars?"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.23)"):i})),(0,at.Z)(t,"&.".concat(Tce.focused," .").concat(Tce.notchedOutline),{borderColor:(n.vars||n).palette[r.color].main,borderWidth:2}),(0,at.Z)(t,"&.".concat(Tce.error," .").concat(Tce.notchedOutline),{borderColor:(n.vars||n).palette.error.main}),(0,at.Z)(t,"&.".concat(Tce.disabled," .").concat(Tce.notchedOutline),{borderColor:(n.vars||n).palette.action.disabled}),t),r.startAdornment&&{paddingLeft:14},r.endAdornment&&{paddingRight:14},r.multiline&&(0,ze.Z)({padding:"16.5px 14px"},"small"===r.size&&{padding:"8.5px 14px"}))})),bce=(0,tae.ZP)((function(e){var t=e.className,n=e.label,r=e.notched,i=(0,Ge.Z)(e,mce),a=null!=n&&""!==n,s=(0,ze.Z)({},e,{notched:r,withLabel:a});return(0,Je.jsx)(yce,(0,ze.Z)({"aria-hidden":!0,className:t,ownerState:s},i,{children:(0,Je.jsx)(gce,{ownerState:s,children:a?(0,Je.jsx)("span",{children:n}):dce||(dce=(0,Je.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:function(e,t){return t.notchedOutline}})((function(e){var t=e.theme,n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),Ice=(0,tae.ZP)(Qle,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Xle})((function(e){var t=e.theme,n=e.ownerState;return(0,ze.Z)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&(0,at.Z)({"&:-webkit-autofill":{borderRadius:"inherit"}},t.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),wce=e.forwardRef((function(t,n){var r,i,a,s,o,u=(0,nae.Z)({props:t,name:"MuiOutlinedInput"}),l=u.components,c=void 0===l?{}:l,h=u.fullWidth,p=void 0!==h&&h,f=u.inputComponent,d=void 0===f?"input":f,v=u.label,m=u.multiline,y=void 0!==m&&m,g=u.notched,_=u.slots,T=void 0===_?{}:_,E=u.type,x=void 0===E?"text":E,b=(0,Ge.Z)(u,Ece),I=function(e){var t=e.classes,n=(0,$ie.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},_ce,t);return(0,ze.Z)({},t,n)}(u),w=Gle(),k=Ble({props:u,muiFormControl:w,states:["required"]}),S=(0,ze.Z)({},u,{color:k.color||"primary",disabled:k.disabled,error:k.error,focused:k.focused,formControl:w,fullWidth:p,hiddenLabel:k.hiddenLabel,multiline:y,size:k.size,type:x}),R=null!=(r=null!=(i=T.root)?i:c.Root)?r:xce,C=null!=(a=null!=(s=T.input)?s:c.Input)?a:Ice;return(0,Je.jsx)(ece,(0,ze.Z)({slots:{root:R,input:C},renderSuffix:function(t){return(0,Je.jsx)(bce,{ownerState:S,className:I.notchedOutline,label:null!=v&&""!==v&&k.required?o||(o=(0,Je.jsxs)(e.Fragment,{children:[v,"\u2009","*"]})):v,notched:"undefined"!==typeof g?g:Boolean(t.startAdornment||t.filled||t.focused)})},fullWidth:p,inputComponent:d,multiline:y,ref:n,type:x},b,{classes:(0,ze.Z)({},I,{notchedOutline:null})}))}));wce.muiName="Input";var kce=wce;function Sce(e){return(0,iae.Z)("MuiFormLabel",e)}var Rce=(0,rae.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Cce=["children","className","color","component","disabled","error","filled","focused","required"],Dce=(0,tae.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return(0,ze.Z)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,ze.Z)({color:(n.vars||n).palette.text.secondary},n.typography.body1,(t={lineHeight:"1.4375em",padding:0,position:"relative"},(0,at.Z)(t,"&.".concat(Rce.focused),{color:(n.vars||n).palette[r.color].main}),(0,at.Z)(t,"&.".concat(Rce.disabled),{color:(n.vars||n).palette.text.disabled}),(0,at.Z)(t,"&.".concat(Rce.error),{color:(n.vars||n).palette.error.main}),t))})),Ace=(0,tae.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:function(e,t){return t.asterisk}})((function(e){var t=e.theme;return(0,at.Z)({},"&.".concat(Rce.error),{color:(t.vars||t).palette.error.main})})),Oce=e.forwardRef((function(e,t){var n=(0,nae.Z)({props:e,name:"MuiFormLabel"}),r=n.children,i=n.className,a=n.component,s=void 0===a?"label":a,o=(0,Ge.Z)(n,Cce),u=Ble({props:n,muiFormControl:Gle(),states:["color","required","focused","disabled","error","filled"]}),l=(0,ze.Z)({},n,{color:u.color||"primary",component:s,disabled:u.disabled,error:u.error,filled:u.filled,focused:u.focused,required:u.required}),c=function(e){var t=e.classes,n=e.color,r=e.focused,i=e.disabled,a=e.error,s=e.filled,o=e.required,u={root:["root","color".concat((0,nse.Z)(n)),i&&"disabled",a&&"error",s&&"filled",r&&"focused",o&&"required"],asterisk:["asterisk",a&&"error"]};return(0,$ie.Z)(u,Sce,t)}(l);return(0,Je.jsxs)(Dce,(0,ze.Z)({as:s,ownerState:l,className:(0,He.Z)(c.root,i),ref:t},o,{children:[r,u.required&&(0,Je.jsxs)(Ace,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),Nce=Oce;function Mce(e){return(0,iae.Z)("MuiInputLabel",e)}(0,rae.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var Pce=["disableAnimation","margin","shrink","variant","className"],Fce=(0,tae.ZP)(Nce,{shouldForwardProp:function(e){return(0,tae.FO)(e)||"classes"===e},name:"MuiInputLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,at.Z)({},"& .".concat(Rce.asterisk),t.asterisk),t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,ze.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,ze.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,ze.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,ze.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),Lce=e.forwardRef((function(e,t){var n=(0,nae.Z)({name:"MuiInputLabel",props:e}),r=n.disableAnimation,i=void 0!==r&&r,a=n.shrink,s=n.className,o=(0,Ge.Z)(n,Pce),u=Gle(),l=a;"undefined"===typeof l&&u&&(l=u.filled||u.focused||u.adornedStart);var c=Ble({props:n,muiFormControl:u,states:["size","variant","required"]}),h=(0,ze.Z)({},n,{disableAnimation:i,formControl:u,shrink:l,size:c.size,variant:c.variant,required:c.required}),p=function(e){var t=e.classes,n=e.formControl,r=e.size,i=e.shrink,a={root:["root",n&&"formControl",!e.disableAnimation&&"animated",i&&"shrink","small"===r&&"sizeSmall",e.variant],asterisk:[e.required&&"asterisk"]},s=(0,$ie.Z)(a,Mce,t);return(0,ze.Z)({},t,s)}(h);return(0,Je.jsx)(Fce,(0,ze.Z)({"data-shrink":l,ownerState:h,ref:t,className:(0,He.Z)(p.root,s)},o,{classes:p}))})),Uce=Lce;function Zce(e){return(0,iae.Z)("MuiFormControl",e)}(0,rae.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var Bce=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],zce=(0,tae.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return(0,ze.Z)({},t.root,t["margin".concat((0,nse.Z)(n.margin))],n.fullWidth&&t.fullWidth)}})((function(e){var t=e.ownerState;return(0,ze.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),Gce=e.forwardRef((function(t,n){var r=(0,nae.Z)({props:t,name:"MuiFormControl"}),a=r.children,s=r.className,o=r.color,u=void 0===o?"primary":o,l=r.component,c=void 0===l?"div":l,h=r.disabled,p=void 0!==h&&h,f=r.error,d=void 0!==f&&f,v=r.focused,m=r.fullWidth,y=void 0!==m&&m,g=r.hiddenLabel,_=void 0!==g&&g,T=r.margin,E=void 0===T?"none":T,x=r.required,b=void 0!==x&&x,I=r.size,w=void 0===I?"medium":I,k=r.variant,S=void 0===k?"outlined":k,R=(0,Ge.Z)(r,Bce),C=(0,ze.Z)({},r,{color:u,component:c,disabled:p,error:d,fullWidth:y,hiddenLabel:_,margin:E,required:b,size:w,variant:S}),D=function(e){var t=e.classes,n=e.margin,r=e.fullWidth,i={root:["root","none"!==n&&"margin".concat((0,nse.Z)(n)),r&&"fullWidth"]};return(0,$ie.Z)(i,Zce,t)}(C),A=e.useState((function(){var t=!1;return a&&e.Children.forEach(a,(function(e){if((0,gse.Z)(e,["Input","Select"])){var n=(0,gse.Z)(e,["Select"])?e.props.input:e;n&&n.props.startAdornment&&(t=!0)}})),t})),O=(0,i.Z)(A,2),N=O[0],M=O[1],P=e.useState((function(){var t=!1;return a&&e.Children.forEach(a,(function(e){(0,gse.Z)(e,["Input","Select"])&&jle(e.props,!0)&&(t=!0)})),t})),F=(0,i.Z)(P,2),L=F[0],U=F[1],Z=e.useState(!1),B=(0,i.Z)(Z,2),z=B[0],G=B[1];p&&z&&G(!1);var H,j=void 0===v||p?z:v,V=e.useMemo((function(){return{adornedStart:N,setAdornedStart:M,color:u,disabled:p,error:d,filled:L,focused:j,fullWidth:y,hiddenLabel:_,size:w,onBlur:function(){G(!1)},onEmpty:function(){U(!1)},onFilled:function(){U(!0)},onFocus:function(){G(!0)},registerEffect:H,required:b,variant:S}}),[N,u,p,d,L,j,y,_,H,b,w,S]);return(0,Je.jsx)(zle.Provider,{value:V,children:(0,Je.jsx)(zce,(0,ze.Z)({as:c,ownerState:C,className:(0,He.Z)(D.root,s),ref:n},R,{children:a}))})})),Hce=Gce;function jce(e){return(0,iae.Z)("MuiFormHelperText",e)}var Vce,Wce=(0,rae.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),Yce=["children","className","component","disabled","error","filled","focused","margin","required","variant"],qce=(0,tae.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.size&&t["size".concat((0,nse.Z)(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,ze.Z)({color:(n.vars||n).palette.text.secondary},n.typography.caption,(t={textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0},(0,at.Z)(t,"&.".concat(Wce.disabled),{color:(n.vars||n).palette.text.disabled}),(0,at.Z)(t,"&.".concat(Wce.error),{color:(n.vars||n).palette.error.main}),t),"small"===r.size&&{marginTop:4},r.contained&&{marginLeft:14,marginRight:14})})),Xce=e.forwardRef((function(e,t){var n=(0,nae.Z)({props:e,name:"MuiFormHelperText"}),r=n.children,i=n.className,a=n.component,s=void 0===a?"p":a,o=(0,Ge.Z)(n,Yce),u=Ble({props:n,muiFormControl:Gle(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,ze.Z)({},n,{component:s,contained:"filled"===u.variant||"outlined"===u.variant,variant:u.variant,size:u.size,disabled:u.disabled,error:u.error,filled:u.filled,focused:u.focused,required:u.required}),c=function(e){var t=e.classes,n=e.contained,r=e.size,i=e.disabled,a=e.error,s=e.filled,o=e.focused,u=e.required,l={root:["root",i&&"disabled",a&&"error",r&&"size".concat((0,nse.Z)(r)),n&&"contained",o&&"focused",s&&"filled",u&&"required"]};return(0,$ie.Z)(l,jce,t)}(l);return(0,Je.jsx)(qce,(0,ze.Z)({as:s,ownerState:l,className:(0,He.Z)(c.root,i),ref:t},o,{children:" "===r?Vce||(Vce=(0,Je.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))})),Kce=Xce,Qce=(n(478),n(6106)),Jce=Poe,$ce=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function ehe(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function the(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function nhe(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function rhe(e,t,n,r,i,a){for(var s=!1,o=i(e,t,!!t&&n);o;){if(o===e.firstChild){if(s)return!1;s=!0}var u=!r&&(o.disabled||"true"===o.getAttribute("aria-disabled"));if(o.hasAttribute("tabindex")&&nhe(o,a)&&!u)return o.focus(),!0;o=i(e,o,n)}return!1}var ihe=e.forwardRef((function(t,n){var r=t.actions,i=t.autoFocus,a=void 0!==i&&i,s=t.autoFocusItem,o=void 0!==s&&s,u=t.children,l=t.className,c=t.disabledItemsFocusable,h=void 0!==c&&c,p=t.disableListWrap,f=void 0!==p&&p,d=t.onKeyDown,v=t.variant,m=void 0===v?"selectedMenu":v,y=(0,Ge.Z)(t,$ce),g=e.useRef(null),_=e.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,_se.Z)((function(){a&&g.current.focus()}),[a]),e.useImperativeHandle(r,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!g.current.style.width;if(e.clientHeight<g.current.clientHeight&&n){var r="".concat(Jce((0,Qce.Z)(e)),"px");g.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,g.current.style.width="calc(100% + ".concat(r,")")}return g.current}}}),[]);var T=(0,hae.Z)(g,n),E=-1;e.Children.forEach(u,(function(t,n){e.isValidElement(t)&&(t.props.disabled||("selectedMenu"===m&&t.props.selected||-1===E)&&(E=n),E===n&&(t.props.disabled||t.props.muiSkipListHighlight||t.type.muiSkipListHighlight)&&(E+=1)>=u.length&&(E=-1))}));var x=e.Children.map(u,(function(t,n){if(n===E){var r={};return o&&(r.autoFocus=!0),void 0===t.props.tabIndex&&"selectedMenu"===m&&(r.tabIndex=0),e.cloneElement(t,r)}return t}));return(0,Je.jsx)(mse,(0,ze.Z)({role:"menu",ref:T,className:l,onKeyDown:function(e){var t=g.current,n=e.key,r=(0,Qce.Z)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),rhe(t,r,f,h,ehe);else if("ArrowUp"===n)e.preventDefault(),rhe(t,r,f,h,the);else if("Home"===n)e.preventDefault(),rhe(t,null,f,h,ehe);else if("End"===n)e.preventDefault(),rhe(t,null,f,h,the);else if(1===n.length){var i=_.current,a=n.toLowerCase(),s=performance.now();i.keys.length>0&&(s-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&a!==i.keys[0]&&(i.repeating=!1)),i.lastTime=s,i.keys.push(a);var o=r&&!i.repeating&&nhe(r,i);i.previousKeyMatched&&(o||rhe(t,r,!1,h,ehe,i))?e.preventDefault():i.previousKeyMatched=!1}d&&d(e)},tabIndex:a?0:-1},y,{children:x}))})),ahe=ihe,she=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function ohe(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var uhe={entering:{opacity:1,transform:ohe(1)},entered:{opacity:1,transform:"none"}},lhe="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),che=e.forwardRef((function(t,n){var r=t.addEndListener,i=t.appear,a=void 0===i||i,s=t.children,o=t.easing,u=t.in,l=t.onEnter,c=t.onEntered,h=t.onEntering,p=t.onExit,f=t.onExited,d=t.onExiting,v=t.style,m=t.timeout,y=void 0===m?"auto":m,g=t.TransitionComponent,_=void 0===g?fue:g,T=(0,Ge.Z)(t,she),E=e.useRef(),x=e.useRef(),b=Jie(),I=e.useRef(null),w=(0,hae.Z)(I,s.ref,n),k=function(e){return function(t){if(e){var n=I.current;void 0===t?e(n):e(n,t)}}},S=k(h),R=k((function(e,t){due(e);var n,r=vue({style:v,timeout:y,easing:o},{mode:"enter"}),i=r.duration,a=r.delay,s=r.easing;"auto"===y?(n=b.transitions.getAutoHeightDuration(e.clientHeight),x.current=n):n=i,e.style.transition=[b.transitions.create("opacity",{duration:n,delay:a}),b.transitions.create("transform",{duration:lhe?n:.666*n,delay:a,easing:s})].join(","),l&&l(e,t)})),C=k(c),D=k(d),A=k((function(e){var t,n=vue({style:v,timeout:y,easing:o},{mode:"exit"}),r=n.duration,i=n.delay,a=n.easing;"auto"===y?(t=b.transitions.getAutoHeightDuration(e.clientHeight),x.current=t):t=r,e.style.transition=[b.transitions.create("opacity",{duration:t,delay:i}),b.transitions.create("transform",{duration:lhe?t:.666*t,delay:lhe?i:i||.333*t,easing:a})].join(","),e.style.opacity=0,e.style.transform=ohe(.75),p&&p(e)})),O=k(f);return e.useEffect((function(){return function(){clearTimeout(E.current)}}),[]),(0,Je.jsx)(_,(0,ze.Z)({appear:a,in:u,nodeRef:I,onEnter:R,onEntered:C,onEntering:S,onExit:A,onExited:O,onExiting:D,addEndListener:function(e){"auto"===y&&(E.current=setTimeout(e,x.current||0)),r&&r(I.current,e)},timeout:"auto"===y?null:y},T,{children:function(t,n){return e.cloneElement(s,(0,ze.Z)({style:(0,ze.Z)({opacity:0,transform:ohe(.75),visibility:"exited"!==t||u?void 0:"hidden"},uhe[t],v,s.props.style),ref:w},n))}}))}));che.muiSupportAuto=!0;var hhe=che;function phe(e){return(0,iae.Z)("MuiPopover",e)}(0,rae.Z)("MuiPopover",["root","paper"]);var fhe=["onEntering"],dhe=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function vhe(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function mhe(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function yhe(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function ghe(e){return"function"===typeof e?e():e}var _he=(0,tae.ZP)(Cue,{name:"MuiPopover",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),The=(0,tae.ZP)(goe,{name:"MuiPopover",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Ehe=e.forwardRef((function(t,n){var r=(0,nae.Z)({props:t,name:"MuiPopover"}),a=r.action,s=r.anchorEl,o=r.anchorOrigin,u=void 0===o?{vertical:"top",horizontal:"left"}:o,l=r.anchorPosition,c=r.anchorReference,h=void 0===c?"anchorEl":c,p=r.children,f=r.className,d=r.container,v=r.elevation,m=void 0===v?8:v,y=r.marginThreshold,g=void 0===y?16:y,_=r.open,T=r.PaperProps,E=void 0===T?{}:T,x=r.transformOrigin,b=void 0===x?{vertical:"top",horizontal:"left"}:x,I=r.TransitionComponent,w=void 0===I?hhe:I,k=r.transitionDuration,S=void 0===k?"auto":k,R=r.TransitionProps,C=(void 0===R?{}:R).onEntering,D=(0,Ge.Z)(r.TransitionProps,fhe),A=(0,Ge.Z)(r,dhe),O=e.useRef(),N=(0,hae.Z)(O,E.ref),M=(0,ze.Z)({},r,{anchorOrigin:u,anchorReference:h,elevation:m,marginThreshold:g,PaperProps:E,transformOrigin:b,TransitionComponent:w,transitionDuration:S,TransitionProps:D}),P=function(e){var t=e.classes;return(0,$ie.Z)({root:["root"],paper:["paper"]},phe,t)}(M),F=e.useCallback((function(){if("anchorPosition"===h)return l;var e=ghe(s),t=(e&&1===e.nodeType?e:(0,Qce.Z)(O.current).body).getBoundingClientRect();return{top:t.top+vhe(t,u.vertical),left:t.left+mhe(t,u.horizontal)}}),[s,u.horizontal,u.vertical,l,h]),L=e.useCallback((function(e){return{vertical:vhe(e,b.vertical),horizontal:mhe(e,b.horizontal)}}),[b.horizontal,b.vertical]),U=e.useCallback((function(e){var t={width:e.offsetWidth,height:e.offsetHeight},n=L(t);if("none"===h)return{top:null,left:null,transformOrigin:yhe(n)};var r=F(),i=r.top-n.vertical,a=r.left-n.horizontal,o=i+t.height,u=a+t.width,l=(0,Aue.Z)(ghe(s)),c=l.innerHeight-g,p=l.innerWidth-g;if(i<g){var f=i-g;i-=f,n.vertical+=f}else if(o>c){var d=o-c;i-=d,n.vertical+=d}if(a<g){var v=a-g;a-=v,n.horizontal+=v}else if(u>p){var m=u-p;a-=m,n.horizontal+=m}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(a),"px"),transformOrigin:yhe(n)}}),[s,h,F,L,g]),Z=e.useState(_),B=(0,i.Z)(Z,2),z=B[0],G=B[1],H=e.useCallback((function(){var e=O.current;if(e){var t=U(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,G(!0)}}),[U]);e.useEffect((function(){_&&H()})),e.useImperativeHandle(a,(function(){return _?{updatePosition:function(){H()}}:null}),[_,H]),e.useEffect((function(){if(_){var e=(0,Due.Z)((function(){H()})),t=(0,Aue.Z)(s);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}}),[s,_,H]);var j=S;"auto"!==S||w.muiSupportAuto||(j=void 0);var V=d||(s?(0,Qce.Z)(ghe(s)).body:void 0);return(0,Je.jsx)(_he,(0,ze.Z)({BackdropProps:{invisible:!0},className:(0,He.Z)(P.root,f),container:V,open:_,ref:n,ownerState:M},A,{children:(0,Je.jsx)(w,(0,ze.Z)({appear:!0,in:_,onEntering:function(e,t){C&&C(e,t),H()},onExited:function(){G(!1)},timeout:j},D,{children:(0,Je.jsx)(The,(0,ze.Z)({elevation:m},E,{ref:N,className:(0,He.Z)(P.paper,E.className)},z?void 0:{style:(0,ze.Z)({},E.style,{opacity:0})},{ownerState:M,children:p}))}))}))})),xhe=Ehe;function bhe(e){return(0,iae.Z)("MuiMenu",e)}(0,rae.Z)("MuiMenu",["root","paper","list"]);var Ihe=["onEntering"],whe=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],khe={vertical:"top",horizontal:"right"},She={vertical:"top",horizontal:"left"},Rhe=(0,tae.ZP)(xhe,{shouldForwardProp:function(e){return(0,tae.FO)(e)||"classes"===e},name:"MuiMenu",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),Che=(0,tae.ZP)(goe,{name:"MuiMenu",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Dhe=(0,tae.ZP)(ahe,{name:"MuiMenu",slot:"List",overridesResolver:function(e,t){return t.list}})({outline:0}),Ahe=e.forwardRef((function(t,n){var r=(0,nae.Z)({props:t,name:"MuiMenu"}),i=r.autoFocus,a=void 0===i||i,s=r.children,o=r.disableAutoFocusItem,u=void 0!==o&&o,l=r.MenuListProps,c=void 0===l?{}:l,h=r.onClose,p=r.open,f=r.PaperProps,d=void 0===f?{}:f,v=r.PopoverClasses,m=r.transitionDuration,y=void 0===m?"auto":m,g=r.TransitionProps,_=(void 0===g?{}:g).onEntering,T=r.variant,E=void 0===T?"selectedMenu":T,x=(0,Ge.Z)(r.TransitionProps,Ihe),b=(0,Ge.Z)(r,whe),I=Jie(),w="rtl"===I.direction,k=(0,ze.Z)({},r,{autoFocus:a,disableAutoFocusItem:u,MenuListProps:c,onEntering:_,PaperProps:d,transitionDuration:y,TransitionProps:x,variant:E}),S=function(e){var t=e.classes;return(0,$ie.Z)({root:["root"],paper:["paper"],list:["list"]},bhe,t)}(k),R=a&&!u&&p,C=e.useRef(null),D=-1;return e.Children.map(s,(function(t,n){e.isValidElement(t)&&(t.props.disabled||("selectedMenu"===E&&t.props.selected||-1===D)&&(D=n))})),(0,Je.jsx)(Rhe,(0,ze.Z)({onClose:h,anchorOrigin:{vertical:"bottom",horizontal:w?"right":"left"},transformOrigin:w?khe:She,PaperProps:(0,ze.Z)({as:Che},d,{classes:(0,ze.Z)({},d.classes,{root:S.paper})}),className:S.root,open:p,ref:n,transitionDuration:y,TransitionProps:(0,ze.Z)({onEntering:function(e,t){C.current&&C.current.adjustStyleForScrollbar(e,I),_&&_(e,t)}},x),ownerState:k},b,{classes:v,children:(0,Je.jsx)(Dhe,(0,ze.Z)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),h&&h(e,"tabKeyDown"))},actions:C,autoFocus:a&&(-1===D||u),autoFocusItem:R,variant:E},c,{className:(0,He.Z)(S.list,c.className),children:s}))}))})),Ohe=Ahe;function Nhe(e){return(0,iae.Z)("MuiNativeSelect",e)}var Mhe=(0,rae.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),Phe=["className","disabled","IconComponent","inputRef","variant"],Fhe=function(e){var t,n=e.ownerState,r=e.theme;return(0,ze.Z)((t={MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,ze.Z)({},r.vars?{backgroundColor:"rgba(".concat(r.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===r.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"}},(0,at.Z)(t,"&.".concat(Mhe.disabled),{cursor:"default"}),(0,at.Z)(t,"&[multiple]",{height:"auto"}),(0,at.Z)(t,"&:not([multiple]) option, &:not([multiple]) optgroup",{backgroundColor:(r.vars||r).palette.background.paper}),(0,at.Z)(t,"&&&",{paddingRight:24,minWidth:16}),t),"filled"===n.variant&&{"&&&":{paddingRight:32}},"outlined"===n.variant&&{borderRadius:(r.vars||r).shape.borderRadius,"&:focus":{borderRadius:(r.vars||r).shape.borderRadius},"&&&":{paddingRight:32}})},Lhe=(0,tae.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:tae.FO,overridesResolver:function(e,t){var n=e.ownerState;return[t.select,t[n.variant],(0,at.Z)({},"&.".concat(Mhe.multiple),t.multiple)]}})(Fhe),Uhe=function(e){var t=e.ownerState,n=e.theme;return(0,ze.Z)((0,at.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active},"&.".concat(Mhe.disabled),{color:(n.vars||n).palette.action.disabled}),t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},Zhe=(0,tae.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:function(e,t){var n=e.ownerState;return[t.icon,n.variant&&t["icon".concat((0,nse.Z)(n.variant))],n.open&&t.iconOpen]}})(Uhe),Bhe=e.forwardRef((function(t,n){var r=t.className,i=t.disabled,a=t.IconComponent,s=t.inputRef,o=t.variant,u=void 0===o?"standard":o,l=(0,Ge.Z)(t,Phe),c=(0,ze.Z)({},t,{disabled:i,variant:u}),h=function(e){var t=e.classes,n=e.variant,r=e.disabled,i=e.multiple,a=e.open,s={select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat((0,nse.Z)(n)),a&&"iconOpen",r&&"disabled"]};return(0,$ie.Z)(s,Nhe,t)}(c);return(0,Je.jsxs)(e.Fragment,{children:[(0,Je.jsx)(Lhe,(0,ze.Z)({ownerState:c,className:(0,He.Z)(h.select,r),disabled:i,ref:s||n},l)),t.multiple?null:(0,Je.jsx)(Zhe,{as:a,ownerState:c,className:h.icon})]})})),zhe=Bhe,Ghe=n(522);function Hhe(e){return(0,iae.Z)("MuiSelect",e)}var jhe,Vhe=(0,rae.Z)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),Whe=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Yhe=(0,tae.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:function(e,t){var n=e.ownerState;return[(0,at.Z)({},"&.".concat(Vhe.select),t.select),(0,at.Z)({},"&.".concat(Vhe.select),t[n.variant]),(0,at.Z)({},"&.".concat(Vhe.multiple),t.multiple)]}})(Fhe,(0,at.Z)({},"&.".concat(Vhe.select),{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})),qhe=(0,tae.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:function(e,t){var n=e.ownerState;return[t.icon,n.variant&&t["icon".concat((0,nse.Z)(n.variant))],n.open&&t.iconOpen]}})(Uhe),Xhe=(0,tae.ZP)("input",{shouldForwardProp:function(e){return(0,tae.Dz)(e)&&"classes"!==e},name:"MuiSelect",slot:"NativeInput",overridesResolver:function(e,t){return t.nativeInput}})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Khe(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function Qhe(e){return null==e||"string"===typeof e&&!e.trim()}var Jhe,$he,epe=e.forwardRef((function(t,n){var r=t["aria-describedby"],a=t["aria-label"],s=t.autoFocus,o=t.autoWidth,u=t.children,l=t.className,c=t.defaultOpen,h=t.defaultValue,p=t.disabled,f=t.displayEmpty,d=t.IconComponent,v=t.inputRef,m=t.labelId,y=t.MenuProps,g=void 0===y?{}:y,_=t.multiple,T=t.name,E=t.onBlur,x=t.onChange,b=t.onClose,I=t.onFocus,w=t.onOpen,k=t.open,S=t.readOnly,R=t.renderValue,C=t.SelectDisplayProps,D=void 0===C?{}:C,A=t.tabIndex,O=t.value,N=t.variant,M=void 0===N?"standard":N,P=(0,Ge.Z)(t,Whe),F=(0,Ghe.Z)({controlled:O,default:h,name:"Select"}),L=(0,i.Z)(F,2),U=L[0],Z=L[1],B=(0,Ghe.Z)({controlled:k,default:c,name:"Select"}),z=(0,i.Z)(B,2),G=z[0],H=z[1],j=e.useRef(null),V=e.useRef(null),W=e.useState(null),Y=(0,i.Z)(W,2),q=Y[0],X=Y[1],K=e.useRef(null!=k).current,Q=e.useState(),J=(0,i.Z)(Q,2),$=J[0],ee=J[1],te=(0,hae.Z)(n,v),ne=e.useCallback((function(e){V.current=e,e&&X(e)}),[]),re=null==q?void 0:q.parentNode;e.useImperativeHandle(te,(function(){return{focus:function(){V.current.focus()},node:j.current,value:U}}),[U]),e.useEffect((function(){c&&G&&q&&!K&&(ee(o?null:re.clientWidth),V.current.focus())}),[q,o]),e.useEffect((function(){s&&V.current.focus()}),[s]),e.useEffect((function(){if(m){var e=(0,Qce.Z)(V.current).getElementById(m);if(e){var t=function(){getSelection().isCollapsed&&V.current.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[m]);var ie,ae,se=function(e,t){e?w&&w(t):b&&b(t),K||(ee(o?null:re.clientWidth),H(e))},oe=e.Children.toArray(u),ue=function(e){return function(t){var n;if(t.currentTarget.hasAttribute("tabindex")){if(_){n=Array.isArray(U)?U.slice():[];var r=U.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),U!==n&&(Z(n),x)){var i=t.nativeEvent||t,a=new i.constructor(i.type,i);Object.defineProperty(a,"target",{writable:!0,value:{value:n,name:T}}),x(a,e)}_||se(!1,t)}}},le=null!==q&&G;delete P["aria-invalid"];var ce=[],he=!1;(jle({value:U})||f)&&(R?ie=R(U):he=!0);var pe=oe.map((function(t){if(!e.isValidElement(t))return null;var n;if(_){if(!Array.isArray(U))throw new Error((0,Ole.Z)(2));n=U.some((function(e){return Khe(e,t.props.value)})),n&&he&&ce.push(t.props.children)}else(n=Khe(U,t.props.value))&&he&&(ae=t.props.children);return n&&!0,e.cloneElement(t,{"aria-selected":n?"true":"false",onClick:ue(t),onKeyUp:function(e){" "===e.key&&e.preventDefault(),t.props.onKeyUp&&t.props.onKeyUp(e)},role:"option",selected:n,value:void 0,"data-value":t.props.value})}));he&&(ie=_?0===ce.length?null:ce.reduce((function(e,t,n){return e.push(t),n<ce.length-1&&e.push(", "),e}),[]):ae);var fe,de=$;!o&&K&&q&&(de=re.clientWidth),fe="undefined"!==typeof A?A:p?null:0;var ve=D.id||(T?"mui-component-select-".concat(T):void 0),me=(0,ze.Z)({},t,{variant:M,value:U,open:le}),ye=function(e){var t=e.classes,n=e.variant,r=e.disabled,i=e.multiple,a=e.open,s={select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat((0,nse.Z)(n)),a&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,$ie.Z)(s,Hhe,t)}(me);return(0,Je.jsxs)(e.Fragment,{children:[(0,Je.jsx)(Yhe,(0,ze.Z)({ref:ne,tabIndex:fe,role:"button","aria-disabled":p?"true":void 0,"aria-expanded":le?"true":"false","aria-haspopup":"listbox","aria-label":a,"aria-labelledby":[m,ve].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:function(e){if(!S){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),se(!0,e))}},onMouseDown:p||S?null:function(e){0===e.button&&(e.preventDefault(),V.current.focus(),se(!0,e))},onBlur:function(e){!le&&E&&(Object.defineProperty(e,"target",{writable:!0,value:{value:U,name:T}}),E(e))},onFocus:I},D,{ownerState:me,className:(0,He.Z)(D.className,ye.select,l),id:ve,children:Qhe(ie)?jhe||(jhe=(0,Je.jsx)("span",{className:"notranslate",children:"\u200b"})):ie})),(0,Je.jsx)(Xhe,(0,ze.Z)({value:Array.isArray(U)?U.join(","):U,name:T,ref:j,"aria-hidden":!0,onChange:function(e){var t=oe.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=oe[t];Z(n.props.value),x&&x(e,n)}},tabIndex:-1,disabled:p,className:ye.nativeInput,autoFocus:s,ownerState:me},P)),(0,Je.jsx)(qhe,{as:d,className:ye.icon,ownerState:me}),(0,Je.jsx)(Ohe,(0,ze.Z)({id:"menu-".concat(T||""),anchorEl:re,open:le,onClose:function(e){se(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},g,{MenuListProps:(0,ze.Z)({"aria-labelledby":m,role:"listbox",disableListWrap:!0},g.MenuListProps),PaperProps:(0,ze.Z)({},g.PaperProps,{style:(0,ze.Z)({minWidth:de},null!=g.PaperProps?g.PaperProps.style:null)}),children:pe}))]})})),tpe=epe,npe=(0,n(1171).Z)((0,Je.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),rpe=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],ipe={name:"MuiSelect",overridesResolver:function(e,t){return t.root},shouldForwardProp:function(e){return(0,tae.FO)(e)&&"variant"!==e},slot:"Root"},ape=(0,tae.ZP)(oce,ipe)(""),spe=(0,tae.ZP)(kce,ipe)(""),ope=(0,tae.ZP)(vce,ipe)(""),upe=e.forwardRef((function(t,n){var r=(0,nae.Z)({name:"MuiSelect",props:t}),i=r.autoWidth,a=void 0!==i&&i,s=r.children,o=r.classes,u=void 0===o?{}:o,l=r.className,c=r.defaultOpen,h=void 0!==c&&c,p=r.displayEmpty,f=void 0!==p&&p,d=r.IconComponent,v=void 0===d?npe:d,m=r.id,y=r.input,g=r.inputProps,_=r.label,T=r.labelId,E=r.MenuProps,x=r.multiple,b=void 0!==x&&x,I=r.native,w=void 0!==I&&I,k=r.onClose,S=r.onOpen,R=r.open,C=r.renderValue,D=r.SelectDisplayProps,A=r.variant,O=void 0===A?"outlined":A,N=(0,Ge.Z)(r,rpe),M=w?zhe:tpe,P=Ble({props:r,muiFormControl:Gle(),states:["variant"]}).variant||O,F=y||{standard:Jhe||(Jhe=(0,Je.jsx)(ape,{})),outlined:(0,Je.jsx)(spe,{label:_}),filled:$he||($he=(0,Je.jsx)(ope,{}))}[P],L=function(e){return e.classes}((0,ze.Z)({},r,{variant:P,classes:u})),U=(0,hae.Z)(n,F.ref);return(0,Je.jsx)(e.Fragment,{children:e.cloneElement(F,(0,ze.Z)({inputComponent:M,inputProps:(0,ze.Z)({children:s,IconComponent:v,variant:P,type:void 0,multiple:b},w?{id:m}:{autoWidth:a,defaultOpen:h,displayEmpty:f,labelId:T,MenuProps:E,onClose:k,onOpen:S,open:R,renderValue:C,SelectDisplayProps:(0,ze.Z)({id:m},D)},g,{classes:g?(0,We.Z)(L,g.classes):L},y?y.props.inputProps:{})},b&&w&&"outlined"===P?{notched:!0}:{},{ref:U,className:(0,He.Z)(F.props.className,l)},!y&&{variant:P},N))})}));upe.muiName="Select";var lpe=upe;function cpe(e){return(0,iae.Z)("MuiTextField",e)}(0,rae.Z)("MuiTextField",["root"]);var hpe=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],ppe={standard:oce,filled:vce,outlined:kce},fpe=(0,tae.ZP)(Hce,{name:"MuiTextField",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),dpe=e.forwardRef((function(e,t){var n=(0,nae.Z)({props:e,name:"MuiTextField"}),r=n.autoComplete,i=n.autoFocus,a=void 0!==i&&i,s=n.children,o=n.className,u=n.color,l=void 0===u?"primary":u,c=n.defaultValue,h=n.disabled,p=void 0!==h&&h,f=n.error,d=void 0!==f&&f,v=n.FormHelperTextProps,m=n.fullWidth,y=void 0!==m&&m,g=n.helperText,_=n.id,T=n.InputLabelProps,E=n.inputProps,x=n.InputProps,b=n.inputRef,I=n.label,w=n.maxRows,k=n.minRows,S=n.multiline,R=void 0!==S&&S,C=n.name,D=n.onBlur,A=n.onChange,O=n.onFocus,N=n.placeholder,M=n.required,P=void 0!==M&&M,F=n.rows,L=n.select,U=void 0!==L&&L,Z=n.SelectProps,B=n.type,z=n.value,G=n.variant,H=void 0===G?"outlined":G,j=(0,Ge.Z)(n,hpe),V=(0,ze.Z)({},n,{autoFocus:a,color:l,disabled:p,error:d,fullWidth:y,multiline:R,required:P,select:U,variant:H}),W=function(e){var t=e.classes;return(0,$ie.Z)({root:["root"]},cpe,t)}(V);var Y={};"outlined"===H&&(T&&"undefined"!==typeof T.shrink&&(Y.notched=T.shrink),Y.label=I),U&&(Z&&Z.native||(Y.id=void 0),Y["aria-describedby"]=void 0);var q=(0,Ale.Z)(_),X=g&&q?"".concat(q,"-helper-text"):void 0,K=I&&q?"".concat(q,"-label"):void 0,Q=ppe[H],J=(0,Je.jsx)(Q,(0,ze.Z)({"aria-describedby":X,autoComplete:r,autoFocus:a,defaultValue:c,fullWidth:y,multiline:R,name:C,rows:F,maxRows:w,minRows:k,type:B,value:z,id:q,inputRef:b,onBlur:D,onChange:A,onFocus:O,placeholder:N,inputProps:E},Y,x));return(0,Je.jsxs)(fpe,(0,ze.Z)({className:(0,He.Z)(W.root,o),disabled:p,error:d,fullWidth:y,ref:t,required:P,color:l,variant:H,ownerState:V},j,{children:[null!=I&&""!==I&&(0,Je.jsx)(Uce,(0,ze.Z)({htmlFor:q,id:K},T,{children:I})),U?(0,Je.jsx)(lpe,(0,ze.Z)({"aria-describedby":X,id:q,labelId:K,value:z,input:J},Z,{children:s})):J,g&&(0,Je.jsx)(Kce,(0,ze.Z)({id:X},v,{children:g}))]}))})),vpe=dpe,mpe=function(e){var t=e.onToggleMenu,n=Kie(),r=(0,i.Z)(n,2),a=r[0],s=r[1],o=a.building;if(!o)throw new Error("No building active!");return(0,Je.jsxs)(rt,{component:"form",onSubmit:function(e){e.preventDefault();var n=new FormData(e.currentTarget),r=ot({},o);r.name=n.get("building-name")||o.name,r.lat=n.get("building-lat")||o.lat,r.lng=n.get("building-lng")||o.lng,s({type:"UPDATE_BUILDING",payload:r}),t(!1)},className:"full-width",children:[(0,Je.jsx)("div",{className:"list-item",children:(0,Je.jsx)(vpe,{required:!0,fullWidth:!0,id:"building-id",label:"Building ID",name:"building-id",autoComplete:"building-id",value:o.uid,disabled:!0})}),(0,Je.jsx)("div",{className:"list-item",children:(0,Je.jsx)(vpe,{fullWidth:!0,id:"building-name",label:"Building Name",name:"building-name",autoComplete:"building-name",defaultValue:o.name})}),(0,Je.jsx)("div",{className:"list-item",children:(0,Je.jsx)(vpe,{fullWidth:!0,required:!0,id:"building-lng",label:"Longitude",name:"building-lng",autoComplete:"building-lng",defaultValue:o.lng})}),(0,Je.jsx)("div",{className:"list-item",children:(0,Je.jsx)(vpe,{fullWidth:!0,required:!0,id:"building-lat",label:"Latitude",name:"building-lat",autoComplete:"building-lat",defaultValue:o.lat})}),(0,Je.jsx)("div",{className:"list-item",children:(0,Je.jsx)(Cle,{type:"submit",className:"submit-button",children:"Update building"})})]})},ype=n(3195),gpe=function(){var e=Kie(),t=(0,i.Z)(e,2),n=t[0],r=n.building,a=n.user,s=t[1];if(!r||!a)throw new Error("Error: Building or user not found!");return(0,Je.jsxs)("div",{children:[r.models.length?r.models.map((function(e){return(0,Je.jsxs)("div",{className:"list-item",children:[(0,Je.jsx)(use,{onClick:function(){return function(e){var t=ot({},r),n=t.models.find((function(e){return e.id}));if(!n)throw new Error("Model not found!");t.models=t.models.filter((function(t){return t.id!==e})),s({type:"DELETE_MODEL",payload:{model:n,building:t}})}(e.id)},children:(0,Je.jsx)(ype.Z,{})}),(0,Je.jsx)("span",{className:"margin-left",children:e.name})]},e.id)})):(0,Je.jsx)("p",{children:"This building has no models"}),(0,Je.jsx)("div",{className:"list-item",children:(0,Je.jsx)(Cle,{onClick:function(){var e=document.createElement("input");e.type="file",e.style.visibility="hidden",document.body.appendChild(e),e.onchange=function(){if(e.files&&e.files.length){var t=e.files[0],n=ot({},r),i={name:t.name,id:"".concat(t.name,"-").concat(performance.now())};n.models.push(i),s({type:"UPLOAD_MODEL",payload:{model:i,file:t,building:n}})}e.remove()},e.click()},variant:"contained",color:"primary",children:"Upload Model"})})]})},_pe=function(){var e=Kie(),t=(0,i.Z)(e,1)[0];return(0,Je.jsxs)("div",{children:[Boolean(t.properties.length)?(0,Je.jsx)(cae,{}):(0,Je.jsx)("p",{children:"No item selected."}),t.properties.map((function(e){return(0,Je.jsxs)("div",{children:[(0,Je.jsxs)("div",{className:"value-pair list-item",children:[(0,Je.jsx)("div",{children:e.name}),(0,Je.jsx)("p",{children:":"}),(0,Je.jsx)("div",{children:e.value})]}),(0,Je.jsx)(cae,{})]},e.name)}))]})},Tpe=function(){var e=Kie(),t=(0,i.Z)(e,2),n=t[0],r=t[1],a=function(e,t){r({type:"TOGGLE_FLOORPLAN",payload:{active:e,floorplan:t}})};return(0,Je.jsxs)("div",{children:[n.floorplans.map((function(e){return(0,Je.jsx)("div",{className:"list-item",children:(0,Je.jsx)(Cle,{onClick:function(){return a(!0,e)},className:"wide-button",children:e.name})},e.name)})),(0,Je.jsx)("div",{className:"list-item",children:(0,Je.jsx)(Cle,{onClick:function(){return a(!1)},className:"wide-button",children:"Exit"})},"exit")]})},Epe=function(e){var t=e.mode,n=e.open,r=e.onToggleMenu;if(!n)return(0,Je.jsx)(Je.Fragment,{});var i=new Map;i.set("BuildingInfo",(0,Je.jsx)(mpe,{onToggleMenu:r})),i.set("ModelList",(0,Je.jsx)(gpe,{})),i.set("Properties",(0,Je.jsx)(_pe,{})),i.set("Floorplans",(0,Je.jsx)(Tpe,{}));var a={BuildingInfo:"Building Information",ModelList:"Model List",Properties:"Properties",Floorplans:"Floorplans"}[t];return(0,Je.jsx)(fle,{className:"front-menu",children:(0,Je.jsxs)(gle,{children:[(0,Je.jsxs)("div",{className:"front-menu-header",children:[(0,Je.jsx)("h2",{children:a}),(0,Je.jsx)(Cle,{onClick:function(){return r(!1)},children:(0,Je.jsx)(Dle.Z,{})})]}),(0,Je.jsx)("div",{className:"front-menu-content",children:i.get(t)})]})})},xpe=function(){var t=Kie(),n=(0,i.Z)(t,2),r=n[0],a=r.user,s=r.building,o=n[1],u=(0,e.useRef)(null);return(0,e.useEffect)((function(){var e=u.current;e&&a&&o({type:"START_BUILDING",payload:{container:e,building:s}})}),[]),(0,Je.jsx)("div",{className:"full-screen",ref:u})},bpe=n(9513),Ipe=n(1676),wpe=n(4);var kpe=function(){var e=[{name:"Clipping planes",icon:(0,Je.jsx)(bpe.Z,{}),active:!1,action:function(e){var r=t("Clipping planes");n(e,"Clipping planes"),r.active=!r.active,e({type:"TOGGLE_CLIPPER",payload:r.active})}},{name:"Dimensions",icon:(0,Je.jsx)(Ipe.Z,{}),active:!1,action:function(e){var r=t("Dimensions");n(e,"Dimensions"),r.active=!r.active,e({type:"TOGGLE_DIMENSIONS",payload:r.active})}},{name:"Explosion",icon:(0,Je.jsx)(wpe.Z,{}),active:!1,action:function(e){var r=t("Explosion");n(e,"Explosion"),r.active=!r.active,e({type:"EXPLODE_MODEL",payload:r.active})}}],t=function(t){var n=e.find((function(e){return e.name===t}));if(!n)throw new Error("Tool not found!");return n},n=function(t,n){for(var r=0,i=e;r<i.length;r++){var a=i[r];a.active&&a.name!==n&&a.action(t)}};return e}(),Spe=function(){var e=Kie()[1];return(0,Je.jsx)(fle,{className:"bottom-menu",children:kpe.map((function(t){return(0,Je.jsx)(use,{color:t.active?"primary":"default",onClick:function(){return t.action(e)},children:t.icon},t.name)}))})},Rpe=function(){var t=(0,e.useState)(240),n=(0,i.Z)(t,1)[0],r=(0,e.useState)(!1),a=(0,i.Z)(r,2),s=a[0],o=a[1],u=(0,e.useState)(!1),l=(0,i.Z)(u,2),c=l[0],h=l[1],p=(0,e.useState)("BuildingInfo"),f=(0,i.Z)(p,2),d=f[0],v=f[1],m=Kie(),y=(0,i.Z)(m,1)[0],g=y.building,_=y.user;if(!g)return(0,Je.jsx)(Oe,{to:"/map"});if(!_)return(0,Je.jsx)(Oe,{to:"/login"});var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!c,t=arguments.length>1?arguments[1]:void 0;t&&v(t),h(e)},E=function(e){o(e)},x=que();return(0,Je.jsxs)(rt,{sx:{display:"flex"},children:[(0,Je.jsx)(ule,{}),(0,Je.jsx)(nle,{width:n,open:s,onOpen:function(){return E(!0)}}),(0,Je.jsx)(Xue,{width:n,open:s,onClose:function(){return E(!1)},onToggleMenu:T}),(0,Je.jsxs)(rt,{component:"main",sx:{flexGrow:1,p:3},children:[(0,Je.jsx)(x,{}),(0,Je.jsx)(xpe,{}),(0,Je.jsx)(Epe,{onToggleMenu:T,open:c,mode:d}),(0,Je.jsx)(Spe,{})]})]})},Cpe=function(){var e=Kie(),t=(0,i.Z)(e,2),n=t[0],r=t[1];return n.user?(0,Je.jsx)(Oe,{to:"/map"}):(0,Je.jsxs)(rt,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,Je.jsx)("img",{className:"landing-logo",alt:"ifcjs logo",src:"ifcjs-logo.png"}),(0,Je.jsx)(Cle,{variant:"contained",color:"primary",onClick:function(){r({type:"LOGIN"})},children:"Click here to log in."})]})},Dpe=function(){var t=(0,e.useState)(!1),n=(0,i.Z)(t,2),r=n[0],a=n[1],s=(0,e.useRef)(null),o=Kie(),u=(0,i.Z)(o,2),l=u[0],c=u[1],h=l.user,p=l.building,f=function(){a(!r)};if((0,e.useEffect)((function(){var e=s.current;e&&h&&c({type:"START_MAP",payload:{container:e,user:h}})}),[]),!h)return(0,Je.jsx)(Oe,{to:"/login"});if(p){var d="/building?id=".concat(p.uid);return(0,Je.jsx)(Oe,{to:d})}return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)("div",{onContextMenu:function(){r&&(c({type:"ADD_BUILDING",payload:h}),a(!1))},className:"full-screen",ref:s}),r&&(0,Je.jsxs)("div",{className:"overlay",children:[(0,Je.jsx)("p",{children:"Right click to create a new building or"}),(0,Je.jsx)(Cle,{onClick:f,children:"Cancel"})]}),(0,Je.jsxs)("div",{className:"gis-button-container",children:[(0,Je.jsx)(Cle,{color:"primary",variant:"contained",onClick:f,children:"Create building"}),(0,Je.jsx)(Cle,{color:"primary",variant:"contained",onClick:function(){c({type:"LOGOUT"})},children:"Logout"})]})]})};var Ape=function(){return(0,Je.jsx)(Xie,{children:(0,Je.jsx)(Ue,{children:(0,Je.jsxs)(Pe,{children:[(0,Je.jsx)(Ne,{path:"/building",element:(0,Je.jsx)(Rpe,{})}),(0,Je.jsx)(Ne,{path:"/map",element:(0,Je.jsx)(Dpe,{})}),(0,Je.jsx)(Ne,{path:"/login",element:(0,Je.jsx)(Cpe,{})}),(0,Je.jsx)(Ne,{path:"/",element:(0,Je.jsx)(Cpe,{})})]})})})},Ope=n(5693),Npe=n(201),Mpe="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var Ppe=function(t){var n=t.children,r=t.theme,i=(0,Npe.Z)(),a=e.useMemo((function(){var e=null===i?r:function(e,t){return"function"===typeof t?t(e):(0,ze.Z)({},e,t)}(i,r);return null!=e&&(e[Mpe]=null!==i),e}),[r,i]);return(0,Je.jsx)(Ope.Z.Provider,{value:a,children:n})},Fpe={};function Lpe(e){var t=(0,Qe.Z)();return(0,Je.jsx)(bae.T.Provider,{value:"object"===typeof t?t:Fpe,children:e.children})}var Upe=function(e){var t=e.children,n=e.theme;return(0,Je.jsx)(Ppe,{theme:n,children:(0,Je.jsx)(Lpe,{children:t})})},Zpe=r.createRoot(document.getElementById("root")),Bpe=(0,tt.Z)({palette:{primary:{main:"#EF6337"}}});Nn({apiKey:"AIzaSyDWFdP9aE8vAwyMG1jq6pc0_MHr6ItLk84",authDomain:"ifc-react-app.firebaseapp.com",databaseURL:{NODE_ENV:"production",PUBLIC_URL:"/IFCReactApp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDWFdP9aE8vAwyMG1jq6pc0_MHr6ItLk84",REACT_APP_FIREBASE_APP_ID:"1:54427550535:web:56f3c2daa707f1606e8262",REACT_APP_FIREBASE_AUTH_DOMAIN:"ifc-react-app.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"54427550535",REACT_APP_FIREBASE_PROJECT_ID:"ifc-react-app",REACT_APP_FIREBASE_STORAGE_BUCKET:"ifc-react-app.appspot.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoiYmltY2EiLCJhIjoiY2xmMXJ4ZGhrMGJhazN4bGg2YTAwZG5heSJ9.OQdD57WTOQigRXhxpjfaqA"}.REACT_APP_FIREBASE_DATABASE_URL,projectId:"ifc-react-app",storageBucket:"ifc-react-app.appspot.com",messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"/IFCReactApp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDWFdP9aE8vAwyMG1jq6pc0_MHr6ItLk84",REACT_APP_FIREBASE_APP_ID:"1:54427550535:web:56f3c2daa707f1606e8262",REACT_APP_FIREBASE_AUTH_DOMAIN:"ifc-react-app.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"54427550535",REACT_APP_FIREBASE_PROJECT_ID:"ifc-react-app",REACT_APP_FIREBASE_STORAGE_BUCKET:"ifc-react-app.appspot.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoiYmltY2EiLCJhIjoiY2xmMXJ4ZGhrMGJhazN4bGg2YTAwZG5heSJ9.OQdD57WTOQigRXhxpjfaqA"}.REACT_APP_FIREBASE_SENDER_ID,appId:"1:54427550535:web:56f3c2daa707f1606e8262"});Zpe.render((0,Je.jsx)(Upe,{theme:Bpe,children:(0,Je.jsx)(e.StrictMode,{children:(0,Je.jsx)(Ape,{})})}))}()}();